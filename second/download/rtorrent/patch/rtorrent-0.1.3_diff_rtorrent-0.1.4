diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/configure	2005-03-13 07:39:14.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/configure	2005-03-19 09:15:05.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.57 for rtorrent 0.1.3.
+# Generated by GNU Autoconf 2.57 for rtorrent 0.1.4.
 #
 # Report bugs to <jaris@ifi.uio.no>.
 #
 # Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001, 2002
 # Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
@@ -265,14 +265,14 @@
 # only ac_max_sed_lines should be used.
 : ${ac_max_here_lines=38}
 
 # Identity of this package.
 PACKAGE_NAME='rtorrent'
 PACKAGE_TARNAME='rtorrent'
-PACKAGE_VERSION='0.1.3'
-PACKAGE_STRING='rtorrent 0.1.3'
+PACKAGE_VERSION='0.1.4'
+PACKAGE_STRING='rtorrent 0.1.4'
 PACKAGE_BUGREPORT='jaris@ifi.uio.no'
 
 ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO AMTAR install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM AWK SET_MAKE CXX CXXFLAGS LDFLAGS CPPFLAGS ac_ct_CXX EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CXXDEPMODE RANLIB ac_ct_RANLIB CC CFLAGS ac_ct_CC CCDEPMODE PKG_CONFIG STUFF_CFLAGS STUFF_LIBS LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -742,13 +742,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures rtorrent 0.1.3 to adapt to many kinds of systems.
+\`configure' configures rtorrent 0.1.4 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -804,13 +804,13 @@
   --program-transform-name=PROGRAM   run sed PROGRAM on installed program names
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of rtorrent 0.1.3:";;
+     short | recursive ) echo "Configuration of rtorrent 0.1.4:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
@@ -893,13 +893,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit 0
 if $ac_init_version; then
   cat <<\_ACEOF
-rtorrent configure 0.1.3
+rtorrent configure 0.1.4
 generated by GNU Autoconf 2.57
 
 Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001, 2002
 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
@@ -908,13 +908,13 @@
 fi
 exec 5>config.log
 cat >&5 <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by rtorrent $as_me 0.1.3, which was
+It was created by rtorrent $as_me 0.1.4, which was
 generated by GNU Autoconf 2.57.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 {
@@ -1499,13 +1499,13 @@
 echo "$as_me: error: source directory already configured; run \"make distclean\" there first" >&2;}
    { (exit 1); exit 1; }; }
 fi
 
 # Define the identity of the package.
  PACKAGE=rtorrent
- VERSION=0.1.3
+ VERSION=0.1.4
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -3771,37 +3771,37 @@
      echo "*** in your path, or set the PKG_CONFIG environment variable"
      echo "*** to the full path to pkg-config."
      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
   else
      PKG_CONFIG_MIN_VERSION=0.9.0
      if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
-        echo "$as_me:$LINENO: checking for sigc++-2.0 libtorrent >= 0.5.2" >&5
-echo $ECHO_N "checking for sigc++-2.0 libtorrent >= 0.5.2... $ECHO_C" >&6
+        echo "$as_me:$LINENO: checking for sigc++-2.0 libtorrent >= 0.5.4" >&5
+echo $ECHO_N "checking for sigc++-2.0 libtorrent >= 0.5.4... $ECHO_C" >&6
 
-        if $PKG_CONFIG --exists "sigc++-2.0 libtorrent >= 0.5.2" ; then
+        if $PKG_CONFIG --exists "sigc++-2.0 libtorrent >= 0.5.4" ; then
             echo "$as_me:$LINENO: result: yes" >&5
 echo "${ECHO_T}yes" >&6
             succeeded=yes
 
             echo "$as_me:$LINENO: checking STUFF_CFLAGS" >&5
 echo $ECHO_N "checking STUFF_CFLAGS... $ECHO_C" >&6
-            STUFF_CFLAGS=`$PKG_CONFIG --cflags "sigc++-2.0 libtorrent >= 0.5.2"`
+            STUFF_CFLAGS=`$PKG_CONFIG --cflags "sigc++-2.0 libtorrent >= 0.5.4"`
             echo "$as_me:$LINENO: result: $STUFF_CFLAGS" >&5
 echo "${ECHO_T}$STUFF_CFLAGS" >&6
 
             echo "$as_me:$LINENO: checking STUFF_LIBS" >&5
 echo $ECHO_N "checking STUFF_LIBS... $ECHO_C" >&6
-            STUFF_LIBS=`$PKG_CONFIG --libs "sigc++-2.0 libtorrent >= 0.5.2"`
+            STUFF_LIBS=`$PKG_CONFIG --libs "sigc++-2.0 libtorrent >= 0.5.4"`
             echo "$as_me:$LINENO: result: $STUFF_LIBS" >&5
 echo "${ECHO_T}$STUFF_LIBS" >&6
         else
             STUFF_CFLAGS=""
             STUFF_LIBS=""
             ## If we have a custom action on failure, don't print errors, but
             ## do set a variable so people can do so.
-            STUFF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "sigc++-2.0 libtorrent >= 0.5.2"`
+            STUFF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "sigc++-2.0 libtorrent >= 0.5.4"`
             echo $STUFF_PKG_ERRORS
         fi
 
 
 
      else
@@ -3811,14 +3811,14 @@
   fi
 
   if test $succeeded = yes; then
      CXXFLAGS="$CXXFLAGS $STUFF_CFLAGS $CURL_CFLAGS";
 		  LIBS="$LIBS $STUFF_LIBS $CURL_LIBS"
   else
-     { { echo "$as_me:$LINENO: error: Library requirements (sigc++-2.0 libtorrent >= 0.5.2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&5
-echo "$as_me: error: Library requirements (sigc++-2.0 libtorrent >= 0.5.2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&2;}
+     { { echo "$as_me:$LINENO: error: Library requirements (sigc++-2.0 libtorrent >= 0.5.4) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&5
+echo "$as_me: error: Library requirements (sigc++-2.0 libtorrent >= 0.5.4) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&2;}
    { (exit 1); exit 1; }; }
   fi
 
 
 
 cat >>confdefs.h <<\_ACEOF
@@ -4191,13 +4191,13 @@
   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
 ## Running $as_me. ##
 _ASBOX
 } >&5
 cat >&5 <<_CSEOF
 
-This file was extended by rtorrent $as_me 0.1.3, which was
+This file was extended by rtorrent $as_me 0.1.4, which was
 generated by GNU Autoconf 2.57.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -4254,13 +4254,13 @@
 
 Report bugs to <bug-autoconf@gnu.org>."
 _ACEOF
 
 cat >>$CONFIG_STATUS <<_ACEOF
 ac_cs_version="\\
-rtorrent config.status 0.1.3
+rtorrent config.status 0.1.4
 configured by $0, generated by GNU Autoconf 2.57,
   with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/configure.ac /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/configure.ac
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/configure.ac	2005-03-13 07:34:51.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/configure.ac	2005-03-19 08:10:24.000000000 +0800
@@ -1,7 +1,7 @@
-AC_INIT(rtorrent, 0.1.3, jaris@ifi.uio.no)
+AC_INIT(rtorrent, 0.1.4, jaris@ifi.uio.no)
 
 AM_INIT_AUTOMAKE
 AM_CONFIG_HEADER(config.h)
 
 sinclude(scripts/checks.m4)
 
@@ -36,13 +36,13 @@
 AC_SEARCH_LIBS(wbkgdset, ncurses curses,,echo "*** The ncurses library is required!";exit 1)
 
 TORRENT_CHECK_EXECINFO()
 TORRENT_CHECK_CURL()
 TORRENT_OTFD()
 
-PKG_CHECK_MODULES(STUFF, sigc++-2.0 libtorrent >= 0.5.2,
+PKG_CHECK_MODULES(STUFF, sigc++-2.0 libtorrent >= 0.5.4,
 	          CXXFLAGS="$CXXFLAGS $STUFF_CFLAGS $CURL_CFLAGS";
 		  LIBS="$LIBS $STUFF_LIBS $CURL_LIBS")
 
 AC_DEFINE(HAVE_CONFIG_H, 1, true if config.h was included)
 
 AC_OUTPUT([
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/rak/algorithm.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/rak/algorithm.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/rak/algorithm.h	2005-03-13 07:34:51.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/rak/algorithm.h	2005-03-19 08:06:45.000000000 +0800
@@ -72,9 +72,52 @@
     }
   } while (true);
 
   return std::make_pair(__middle1, __middle2);
 }
 
+template <typename _Value>
+struct
+compare_base : public std::binary_function<_Value, _Value, bool> {
+  bool operator () (const _Value& complete, const _Value& base) const {
+    return !complete.compare(0, base.size(), base);
+  }
+};
+
+// Count the number of elements from the start of the containers to
+// the first inequal element.
+template <typename _InputIter>
+typename std::iterator_traits<_InputIter>::difference_type
+count_base(_InputIter __first1, _InputIter __last1,
+	   _InputIter __first2, _InputIter __last2) {
+
+  typename std::iterator_traits<_InputIter>::difference_type __n = 0;
+
+  for ( ;__first1 != __last1 && __first2 != __last2; ++__first1, ++__first2, ++__n)
+    if (*__first1 != *__first2)
+      return __n;
+
+  return __n;
+}
+
+template <typename _InputIter>
+typename std::iterator_traits<_InputIter>::value_type
+make_base(_InputIter __first, _InputIter __last) {
+  if (__first == __last)
+    return "";
+
+  typename std::iterator_traits<_InputIter>::value_type __base = *__first++;
+
+  for ( ;__first != __last; ++__first) {
+    typename std::iterator_traits<_InputIter>::difference_type __pos = count_base(__base.begin(), __base.end(),
+										  __first->begin(), __first->end());
+
+    if (__pos < (typename std::iterator_traits<_InputIter>::difference_type)__base.size())
+      __base.resize(__pos);
+  }
+
+  return __base;
+}
+
 }
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/core/download_list.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/core/download_list.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/core/download_list.h	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/core/download_list.h	2005-03-19 08:06:45.000000000 +0800
@@ -35,12 +35,14 @@
   typedef std::list<Download*> Base;
 
   using Base::iterator;
   using Base::const_iterator;
   using Base::reverse_iterator;
   using Base::const_reverse_iterator;
+  using Base::value_type;
+  using Base::pointer;
 
   using Base::begin;
   using Base::end;
   using Base::rbegin;
   using Base::rend;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/core/download_store.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/core/download_store.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/core/download_store.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/core/download_store.cc	2005-03-19 08:06:45.000000000 +0800
@@ -78,13 +78,15 @@
 utils::Directory
 DownloadStore::get_formated_entries() {
   if (!is_active())
     return utils::Directory();
 
   utils::Directory d(m_path);
-  d.update();
+
+  if (!d.update())
+    throw std::runtime_error("core::DownloadStore::update() could not open directory");
 
   d.erase(std::remove_if(d.begin(), d.end(), std::not1(std::ptr_fun(&DownloadStore::is_correct_format))), d.end());
 
   return d;
 }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/Makefile.am	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/Makefile.am	2005-03-19 08:06:44.000000000 +0800
@@ -26,12 +26,14 @@
 	window_peer_info.cc \
 	window_peer_info.h \
 	window_peer_list.cc \
 	window_peer_list.h \
 	window_statusbar.cc \
 	window_statusbar.h \
+	window_string_list.cc \
+	window_string_list.h \
 	window_title.cc \
 	window_title.h \
 	window_tracker_list.cc \
 	window_tracker_list.h
 
 INCLUDES = -I$(srcdir) -I$(srcdir)/.. -I$(top_srcdir)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/Makefile.in	2005-03-13 07:39:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/Makefile.in	2005-03-19 09:15:04.000000000 +0800
@@ -104,12 +104,14 @@
 	window_peer_info.cc \
 	window_peer_info.h \
 	window_peer_list.cc \
 	window_peer_list.h \
 	window_statusbar.cc \
 	window_statusbar.h \
+	window_string_list.cc \
+	window_string_list.h \
 	window_title.cc \
 	window_title.h \
 	window_tracker_list.cc \
 	window_tracker_list.h
 
 
@@ -125,14 +127,14 @@
 am_libsub_display_a_OBJECTS = canvas.$(OBJEXT) manager.$(OBJEXT) \
 	utils.$(OBJEXT) window.$(OBJEXT) window_download_list.$(OBJEXT) \
 	window_download_statusbar.$(OBJEXT) window_file_list.$(OBJEXT) \
 	window_http_queue.$(OBJEXT) window_input.$(OBJEXT) \
 	window_log.$(OBJEXT) window_log_complete.$(OBJEXT) \
 	window_peer_info.$(OBJEXT) window_peer_list.$(OBJEXT) \
-	window_statusbar.$(OBJEXT) window_title.$(OBJEXT) \
-	window_tracker_list.$(OBJEXT)
+	window_statusbar.$(OBJEXT) window_string_list.$(OBJEXT) \
+	window_title.$(OBJEXT) window_tracker_list.$(OBJEXT)
 libsub_display_a_OBJECTS = $(am_libsub_display_a_OBJECTS)
 
 DEFS = @DEFS@
 DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
@@ -148,12 +150,13 @@
 @AMDEP_TRUE@	./$(DEPDIR)/window_input.Po \
 @AMDEP_TRUE@	./$(DEPDIR)/window_log.Po \
 @AMDEP_TRUE@	./$(DEPDIR)/window_log_complete.Po \
 @AMDEP_TRUE@	./$(DEPDIR)/window_peer_info.Po \
 @AMDEP_TRUE@	./$(DEPDIR)/window_peer_list.Po \
 @AMDEP_TRUE@	./$(DEPDIR)/window_statusbar.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/window_string_list.Po \
 @AMDEP_TRUE@	./$(DEPDIR)/window_title.Po \
 @AMDEP_TRUE@	./$(DEPDIR)/window_tracker_list.Po
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
 CXXLD = $(CXX)
 CXXLINK = $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
@@ -204,12 +207,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_input.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_log.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_log_complete.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_peer_info.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_peer_list.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_statusbar.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_string_list.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_title.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/window_tracker_list.Po@am__quote@
 
 distclean-depend:
 	-rm -rf ./$(DEPDIR)
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/utils.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/utils.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/utils.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/utils.cc	2005-03-19 08:06:44.000000000 +0800
@@ -21,12 +21,13 @@
 //           3185 Skoppum, NORWAY
 
 #include "config.h"
 
 #include <ctime>
 #include <sstream>
+#include <iomanip>
 
 #include "core/download.h"
 #include "utils/timer.h"
 
 #include "utils.h"
 
@@ -60,15 +61,14 @@
   std::tm *u = std::localtime(&t.tval().tv_sec);
   
   if (u == NULL)
     return "inv_time";
 
   std::stringstream str;
-  str.width(2);
   str.fill('0');
   
-  str << u->tm_hour << ':' << u->tm_min << ':' << u->tm_sec;
+  str << std::setw(2) << u->tm_hour << ':' << std::setw(2) << u->tm_min << ':' << std::setw(2) << u->tm_sec;
 
   return str.str();
 }
 
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_download_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_download_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_download_list.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_download_list.cc	2005-03-19 08:06:44.000000000 +0800
@@ -28,31 +28,36 @@
 #include "canvas.h"
 #include "utils.h"
 #include "window_download_list.h"
 
 namespace display {
 
-WindowDownloadList::WindowDownloadList(DList* l, DList::iterator* f) :
+WindowDownloadList::WindowDownloadList(DList* l) :
   Window(new Canvas, true),
-  m_list(l),
-  m_focus(f) {
+  m_list(l) {
+
+  m_connChanged = m_list->signal_changed().connect(sigc::mem_fun(*this, &Window::mark_dirty));
+}
+
+WindowDownloadList::~WindowDownloadList() {
+  m_connChanged.disconnect();
 }
 
 void
 WindowDownloadList::redraw() {
   m_nextDraw = utils::Timer::cache().round_seconds() + 1000000;
 
   m_canvas->erase();
 
-  if (m_list->empty())
+  if (m_list->base().empty())
     return;
 
   typedef std::pair<DList::iterator, DList::iterator> Range;
 
   Range range = rak::advance_bidirectional(m_list->begin(),
-					   *m_focus != m_list->end() ? *m_focus : m_list->begin(),
+					   m_list->get_focus() != m_list->end() ? m_list->get_focus() : m_list->begin(),
 					   m_list->end(),
 					   m_canvas->get_height() / 3);
 
   // Make sure we properly fill out the last lines so it looks like
   // there are more torrents, yet don't hide it if we got the last one
   // in focus.
@@ -62,33 +67,33 @@
   int pos = 0;
 
   while (range.first != range.second) {
     torrent::Download& d = (*range.first)->get_download();
 
     m_canvas->print(0, pos++, "%c %s",
-		    range.first == *m_focus ? '*' : ' ',
+		    range.first == m_list->get_focus() ? '*' : ' ',
 		    d.get_name().c_str());
 
     if ((*range.first)->is_open() && (*range.first)->is_done())
-      m_canvas->print(0, pos++, "%c Torrent: Done %10.1f MiB Rate:%5.1f /%5.1f KiB Uploaded: %.1f MiB",
-		      range.first == *m_focus ? '*' : ' ',
+      m_canvas->print(0, pos++, "%c Torrent: Done %10.1f MiB Rate: %5.1f / %5.1f KiB Uploaded: %.1f MiB",
+		      range.first == m_list->get_focus() ? '*' : ' ',
 		      (double)d.get_bytes_total() / (double)(1 << 20),
 		      (double)d.get_rate_up() / 1024.0,
 		      (double)d.get_rate_down() / 1024.0,
 		      (double)d.get_bytes_up() / (double)(1 << 20));
     else
-      m_canvas->print(0, pos++, "%c Torrent: %6.1f / %6.1f MiB Rate:%5.1f /%5.1f KiB Uploaded: %.1f MiB",
-		      range.first == *m_focus ? '*' : ' ',
+      m_canvas->print(0, pos++, "%c Torrent: %6.1f / %6.1f MiB Rate: %5.1f / %5.1f KiB Uploaded: %.1f MiB",
+		      range.first == m_list->get_focus() ? '*' : ' ',
 		      (double)d.get_bytes_done() / (double)(1 << 20),
 		      (double)d.get_bytes_total() / (double)(1 << 20),
 		      (double)d.get_rate_up() / 1024.0,
 		      (double)d.get_rate_down() / 1024.0,
 		      (double)d.get_bytes_up() / (double)(1 << 20));
     
     m_canvas->print(0, pos++, "%c %s",
-		    range.first == *m_focus ? '*' : ' ',
+		    range.first == m_list->get_focus() ? '*' : ' ',
 		    print_download_status(*range.first).c_str());
 
     ++range.first;
   }    
 }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_download_list.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_download_list.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_download_list.h	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_download_list.h	2005-03-19 08:06:44.000000000 +0800
@@ -20,27 +20,33 @@
 //           Skomakerveien 33
 //           3185 Skoppum, NORWAY
 
 #ifndef RTORRENT_DISPLAY_WINDOW_DOWNLOAD_LIST_H
 #define RTORRENT_DISPLAY_WINDOW_DOWNLOAD_LIST_H
 
+#include <sigc++/connection.h>
+
 #include "window.h"
+
 #include "core/download_list.h"
+#include "utils/list_focus.h"
 
 namespace display {
 
 class WindowDownloadList : public Window {
 public:
-  typedef core::DownloadList DList;
+  typedef utils::ListFocus<core::DownloadList> DList;
 
-  WindowDownloadList(DList* l, DList::iterator* focus);
+  WindowDownloadList(DList* l);
+  ~WindowDownloadList();
 
-  virtual void     redraw();
+  virtual void        redraw();
 
 private:
-  DList*           m_list;
-  DList::iterator* m_focus;
+  DList*              m_list;
+
+  sigc::connection    m_connChanged;
 };
 
 }
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_download_statusbar.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_download_statusbar.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_download_statusbar.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_download_statusbar.cc	2005-03-19 08:06:44.000000000 +0800
@@ -39,21 +39,21 @@
 WindowDownloadStatusbar::redraw() {
   m_nextDraw = utils::Timer::cache().round_seconds() + 1000000;
 
   m_canvas->erase();
 
   if (m_download->get_download().get_chunks_done() != m_download->get_download().get_chunks_total() || !m_download->get_download().is_open())
-    m_canvas->print(0, 0, "Torrent: %.1f / %.1f MiB Rate:%5.1f /%5.1f KiB Uploaded: %.1f MiB",
+    m_canvas->print(0, 0, "Torrent: %.1f / %.1f MiB Rate: %5.1f / %5.1f KiB Uploaded: %.1f MiB",
 		    (double)m_download->get_download().get_bytes_done() / (double)(1 << 20),
 		    (double)m_download->get_download().get_bytes_total() / (double)(1 << 20),
 		    (double)m_download->get_download().get_rate_up() / 1024.0,
 		    (double)m_download->get_download().get_rate_down() / 1024.0,
 		    (double)m_download->get_download().get_bytes_up() / (double)(1 << 20));
  
   else
-    m_canvas->print(0, 0, "Torrent: Done %.1f MiB Rate:%5.1f /%5.1f KiB Uploaded: %.1f MiB",
+    m_canvas->print(0, 0, "Torrent: Done %.1f MiB Rate: %5.1f / %5.1f KiB Uploaded: %.1f MiB",
 		    (double)m_download->get_download().get_bytes_total() / (double)(1 << 20),
 		    (double)m_download->get_download().get_rate_up() / 1024.0,
 		    (double)m_download->get_download().get_rate_down() / 1024.0,
 		    (double)m_download->get_download().get_bytes_up() / (double)(1 << 20));
     
   m_canvas->print(0, 1, "Peers: %i(%i) Min/Max: %i/%i Uploads: %i",
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_file_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_file_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_file_list.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_file_list.cc	2005-03-19 08:06:44.000000000 +0800
@@ -43,14 +43,14 @@
   m_canvas->erase();
 
   int pos = 0;
 
   m_canvas->print( 2, pos, "File");
   m_canvas->print(55, pos, "Size");
-  m_canvas->print(62, pos, "Pri");
-  m_canvas->print(67, pos, "Cmpl");
+  m_canvas->print(63, pos, "Pri");
+  m_canvas->print(68, pos, "Cmpl");
 
   ++pos;
 
   if (m_download->get_download().get_entry_size() == 0)
     return;
 
@@ -91,13 +91,13 @@
 
     default:
       priority = "BUG";
       break;
     };
 
-    m_canvas->print(0, pos, "%c %s  %5.1f   %s   %3d",
+    m_canvas->print(0, pos, "%c %s  %6.1f   %s   %3d",
 		    range.first == *m_focus ? '*' : ' ',
 		    path.c_str(),
 		    (double)e.get_size() / (double)(1 << 20),
 		    priority.c_str(),
 		    done_percentage(e));
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_peer_info.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_peer_info.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/display/window_peer_info.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display/window_peer_info.cc	2005-03-19 08:06:44.000000000 +0800
@@ -45,12 +45,13 @@
   m_canvas->erase();
 
   int y = 0;
   torrent::Download d = m_download->get_download();
 
   m_canvas->print(0, y++, "Hash: %s", utils::string_to_hex(d.get_hash()).c_str());
+  m_canvas->print(0, y++, "Id:   %s", utils::escape_string(d.get_id()).c_str());
   m_canvas->print(0, y++, "Chunks: %u / %u * %u",
 		  d.get_chunks_done(),
 		  d.get_chunks_total(),
 		  d.get_chunks_size());
 
   y++;
@@ -58,12 +59,14 @@
   if (*m_focus == m_list->end()) {
     m_canvas->print(0, y++, "No peer in focus");
 
     return;
   }
 
+  m_canvas->print(0, y++, "*** Peer Info ***");
+
   m_canvas->print(0, y++, "DNS: %s:%hu", (*m_focus)->get_dns().c_str(), (*m_focus)->get_port());
   m_canvas->print(0, y++, "Id: %s" , utils::escape_string((*m_focus)->get_id()).c_str());
   m_canvas->print(0, y++, "Snubbed: %s", (*m_focus)->get_snubbed() ? "Yes" : "No");
 
   m_canvas->print(0, y++, "Done: %i%", done_percentage(**m_focus));
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display: window_string_list.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/display: window_string_list.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/input/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/input/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/input/Makefile.am	2005-03-13 07:34:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/input/Makefile.am	2005-03-19 08:06:43.000000000 +0800
@@ -2,10 +2,12 @@
 
 libsub_input_a_SOURCES = \
 	bindings.cc \
 	bindings.h \
 	manager.cc \
 	manager.h \
+	path_input.cc \
+	path_input.h \
 	text_input.cc \
 	text_input.h
 
 INCLUDES = -I$(srcdir) -I$(srcdir)/.. -I$(top_srcdir)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/input/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/input/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/input/Makefile.in	2005-03-13 07:39:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/input/Makefile.in	2005-03-19 09:15:04.000000000 +0800
@@ -80,12 +80,14 @@
 
 libsub_input_a_SOURCES = \
 	bindings.cc \
 	bindings.h \
 	manager.cc \
 	manager.h \
+	path_input.cc \
+	path_input.h \
 	text_input.cc \
 	text_input.h
 
 
 INCLUDES = -I$(srcdir) -I$(srcdir)/.. -I$(top_srcdir)
 subdir = src/input
@@ -94,24 +96,24 @@
 CONFIG_CLEAN_FILES =
 LIBRARIES = $(noinst_LIBRARIES)
 
 libsub_input_a_AR = $(AR) cru
 libsub_input_a_LIBADD =
 am_libsub_input_a_OBJECTS = bindings.$(OBJEXT) manager.$(OBJEXT) \
-	text_input.$(OBJEXT)
+	path_input.$(OBJEXT) text_input.$(OBJEXT)
 libsub_input_a_OBJECTS = $(am_libsub_input_a_OBJECTS)
 
 DEFS = @DEFS@
 DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
 depcomp = $(SHELL) $(top_srcdir)/depcomp
 am__depfiles_maybe = depfiles
 @AMDEP_TRUE@DEP_FILES = ./$(DEPDIR)/bindings.Po ./$(DEPDIR)/manager.Po \
-@AMDEP_TRUE@	./$(DEPDIR)/text_input.Po
+@AMDEP_TRUE@	./$(DEPDIR)/path_input.Po ./$(DEPDIR)/text_input.Po
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
 CXXLD = $(CXX)
 CXXLINK = $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
 CXXFLAGS = @CXXFLAGS@
@@ -148,12 +150,13 @@
 
 distclean-compile:
 	-rm -f *.tab.c
 
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/bindings.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/manager.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/path_input.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/text_input.Po@am__quote@
 
 distclean-depend:
 	-rm -rf ./$(DEPDIR)
 
 .cc.o:
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/input: path_input.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/input: path_input.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/input/text_input.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/input/text_input.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/input/text_input.h	2005-03-13 07:34:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/input/text_input.h	2005-03-19 08:06:43.000000000 +0800
@@ -33,29 +33,34 @@
   typedef std::string       Base;
   typedef sigc::slot0<void> SlotDirty;
 
   using Base::c_str;
   using Base::empty;
   using Base::size;
+  using Base::size_type;
+  using Base::npos;
 
   TextInput() : m_pos(0), m_alt(false) {}
+  virtual ~TextInput() {}
 
-  size_type get_pos()                  { return m_pos; }
+  size_type           get_pos()                  { return m_pos; }
+  void                set_pos(size_type pos)     { m_pos = pos; }
 
-  bool      pressed(int key);
+  virtual bool        pressed(int key);
 
-  void      clear()                    { m_pos = 0; m_alt = false; Base::clear(); }
+  void                clear()                    { m_pos = 0; m_alt = false; Base::clear(); }
 
-  void      slot_dirty(SlotDirty s)    { m_slotDirty = s; }
+  void                slot_dirty(SlotDirty s)    { m_slotDirty = s; }
+  void                mark_dirty()               { m_slotDirty(); }
 
-  const std::string& str()             { return *this; }
+  std::string&        str()                      { return *this; }
 
 private:
-  size_type m_pos;
+  size_type           m_pos;
 
-  bool      m_alt;
-  SlotDirty m_slotDirty;
+  bool                m_alt;
+  SlotDirty           m_slotDirty;
 };
 
 }
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/main.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/main.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/main.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/main.cc	2005-03-19 08:06:45.000000000 +0800
@@ -231,18 +231,20 @@
   std::cout << "Main view keys:" << std::endl;
   std::cout << "  backspace         Add a torrent url or path" << std::endl;
   std::cout << "  ^s                Start torrent" << std::endl;
   std::cout << "  ^d                Stop torrent or delete a stopped torrent" << std::endl;
   std::cout << "  ^q                Initiate shutdown or skip shutdown process" << std::endl;
   std::cout << "  a,s,d,z,x,c       Adjust throttle" << std::endl;
+  std::cout << "  right             View torrent" << std::endl;
   std::cout << std::endl;
   std::cout << "Download view keys:" << std::endl;
   std::cout << "  spacebar          Depends on the current view" << std::endl;
   std::cout << "  1,2               Adjust max uploads" << std::endl;
   std::cout << "  3,4,5,6           Adjust min/max connected peers" << std::endl;
   std::cout << "  t                 Query tracker for more peers" << std::endl;
+  std::cout << "  *                 Snub peer" << std::endl;
   std::cout << "  right             View files" << std::endl;
   std::cout << "  p                 View peer information" << std::endl;
   std::cout << "  o                 View trackers" << std::endl;
   std::cout << std::endl;
 
   std::cout << "Report bugs to <jaris@ifi.uio.no>." << std::endl;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/download.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/download.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/download.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/download.cc	2005-03-19 08:06:45.000000000 +0800
@@ -22,183 +22,126 @@
 
 #include "config.h"
 
 #include <stdexcept>
 #include <sigc++/bind.h>
 #include <torrent/torrent.h>
+#include <rak/functional.h>
 
 #include "core/download.h"
 #include "input/bindings.h"
 #include "display/window_title.h"
-#include "display/window_peer_list.h"
-#include "display/window_peer_info.h"
 #include "display/window_download_statusbar.h"
 #include "display/window_statusbar.h"
 
 #include "control.h"
 #include "download.h"
-#include "file_list.h"
-#include "tracker_list.h"
+#include "element_file_list.h"
+#include "element_peer_info.h"
+#include "element_peer_list.h"
+#include "element_tracker_list.h"
 
 namespace ui {
 
 Download::Download(DPtr d, Control* c) :
   m_download(d),
-  m_state(DISPLAY_NONE),
+  m_state(DISPLAY_MAX_SIZE),
 
-  m_uiFileList(NULL),
-  m_uiTrackerList(NULL),
+  m_windowTitle(new WTitle(d->get_download().get_name())),
+  m_windowDownloadStatus(new WDownloadStatus(d)),
+  m_windowMainStatus(new WMainStatus(&c->get_core())),
 
-  m_title(c->get_display().end()),
   m_window(c->get_display().end()),
-  m_downloadStatus(c->get_display().end()),
-  m_mainStatus(c->get_display().end()),
 
   m_control(c),
   m_bindings(new input::Bindings) {
 
   m_focus = m_peers.end();
 
-  bind_keys(m_bindings);
+  m_uiArray[DISPLAY_PEER_LIST]    = new ElementPeerList(d, &m_peers, &m_focus);
+  m_uiArray[DISPLAY_PEER_INFO]    = new ElementPeerInfo(d, &m_peers, &m_focus);
+  m_uiArray[DISPLAY_FILE_LIST]    = new ElementFileList(d);
+  m_uiArray[DISPLAY_TRACKER_LIST] = new ElementTrackerList(d);
+
+  bind_keys();
 
   m_download->get_download().peer_list(m_peers);
 
-  m_connPeerConnected = m_download->get_download().signal_peer_connected(sigc::mem_fun(*this, &Download::receive_peer_connected));
+  m_connPeerConnected    = m_download->get_download().signal_peer_connected(sigc::mem_fun(*this, &Download::receive_peer_connected));
   m_connPeerDisconnected = m_download->get_download().signal_peer_disconnected(sigc::mem_fun(*this, &Download::receive_peer_disconnected));
 }
 
 Download::~Download() {
   if (m_window != m_control->get_display().end())
     throw std::logic_error("ui::Download::~Download() called on an active object");
 
+  std::for_each(m_uiArray, m_uiArray + DISPLAY_MAX_SIZE, rak::call_delete<ElementBase>());
+
+  delete m_windowTitle;
+  delete m_windowDownloadStatus;
+  delete m_windowMainStatus;
+
+  delete m_bindings;
+
   m_connPeerConnected.disconnect();
   m_connPeerDisconnected.disconnect();
 }
 
 void
 Download::activate() {
   if (m_window != m_control->get_display().end())
     throw std::logic_error("ui::Download::activate() called on an already activated object");
 
-  m_window         = m_control->get_display().insert(m_control->get_display().begin(), NULL);
-  m_title          = m_control->get_display().insert(m_control->get_display().begin(), new WTitle(m_download->get_download().get_name()));
-  m_downloadStatus = m_control->get_display().insert(m_control->get_display().end(), new WDownloadStatus(m_download));
-  m_mainStatus     = m_control->get_display().insert(m_control->get_display().end(), new WMainStatus(&m_control->get_core()));
+  m_window = m_control->get_display().insert(m_control->get_display().begin(), NULL);
 
-  m_uiFileList    = new FileList(m_control, m_download);
-  m_uiTrackerList = new TrackerList(m_control, m_download);
+  m_control->get_display().insert(m_control->get_display().begin(), m_windowTitle);
+  m_control->get_display().insert(m_control->get_display().end(), m_windowDownloadStatus);
+  m_control->get_display().insert(m_control->get_display().end(), m_windowMainStatus);
 
   m_control->get_input().push_front(m_bindings);
 
-  activate_display(DISPLAY_MAIN);
+  activate_display(DISPLAY_PEER_LIST);
 }
 
 void
 Download::disable() {
   if (m_window == m_control->get_display().end())
     throw std::logic_error("ui::Download::disable() called on an already disabled object");
 
   disable_display();
 
   m_control->get_display().erase(m_window);
-  m_control->get_display().erase(m_title);
-  m_control->get_display().erase(m_downloadStatus);
-  m_control->get_display().erase(m_mainStatus);
-
-  delete *m_title;
-  delete *m_downloadStatus;
-  delete *m_mainStatus;
+  m_control->get_display().erase(m_windowTitle);
+  m_control->get_display().erase(m_windowDownloadStatus);
+  m_control->get_display().erase(m_windowMainStatus);
 
-  delete m_uiFileList;
-  delete m_uiTrackerList;
-
-  m_uiFileList = NULL;
-  m_uiTrackerList = NULL;
-
-  m_window = m_title = m_downloadStatus = m_mainStatus = m_control->get_display().end();
+  m_window = m_control->get_display().end();
 
   m_control->get_input().erase(m_bindings);
 }
 
 void
 Download::activate_display(Display d) {
-  WPeerList* wpl;
-  WPeerInfo* wpi;
-
   if (m_window == m_control->get_display().end())
     throw std::logic_error("ui::Download::activate_display(...) could not find previous display iterator");
 
-  switch (d) {
-  case DISPLAY_MAIN:
-    *m_window = wpl = new WPeerList(m_download, &m_peers, &m_focus);
-
-    (*m_bindings)['p']       = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_PEER);
-    (*m_bindings)[KEY_RIGHT] = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_FILE_LIST);
-    (*m_bindings)['o']       = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_TRACKER_LIST);
-    break;
-
-  case DISPLAY_PEER:
-    *m_window = wpi = new WPeerInfo(m_download, &m_peers, &m_focus);
-
-    (*m_bindings)[' '] = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_MAIN);
-    break;
-
-  case DISPLAY_FILE_LIST:
-    m_uiFileList->activate(m_window);
-    m_uiFileList->get_bindings()[KEY_LEFT] = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_MAIN);
-
-    break;    
-
-  case DISPLAY_TRACKER_LIST:
-    m_uiTrackerList->activate(m_window);
-    m_uiTrackerList->get_bindings()[' '] = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_MAIN);
-
-    break;    
-
-  default:
-    throw std::logic_error("ui::Download::activate_display(...) got wrong state");
-  }
+  if (d >= DISPLAY_MAX_SIZE)
+    throw std::logic_error("ui::Download::activate_display(...) out of bounds");
 
   m_state = d;
+  m_uiArray[d]->activate(m_control, m_window);
 
   m_control->get_display().adjust_layout();
 }
 
 // Does not delete disabled window.
 void
 Download::disable_display() {
-  switch (m_state) {
-  case DISPLAY_MAIN:
-    //m_bindings->erase(KEY_RIGHT);
-
-    break;
-
-  case DISPLAY_PEER:
-    m_bindings->erase(' ');
-
-    break;
-
-  case DISPLAY_FILE_LIST:
-    m_uiFileList->disable();
-    *m_window = NULL;
-
-    return;
-
-  case DISPLAY_TRACKER_LIST:
-    m_uiTrackerList->disable();
-    *m_window = NULL;
-
-    return;
-
-  default:
-    break;
-  }
-
-  // urgh, get ui's for the rest too.
-  delete *m_window;
+  m_uiArray[m_state]->disable(m_control);
 
+  m_state   = DISPLAY_MAX_SIZE;
   *m_window = NULL;
 }
 
 void
 Download::receive_next() {
   if (m_focus != m_peers.end())
@@ -236,34 +179,34 @@
   else
     m_peers.erase(itr);
 }
 
 void
 Download::receive_throttle(int t) {
-  (*m_mainStatus)->mark_dirty();
+  m_windowMainStatus->mark_dirty();
 
   torrent::set(torrent::THROTTLE_ROOT_CONST_RATE, torrent::get(torrent::THROTTLE_ROOT_CONST_RATE) + t * 1024);
 }
 
 void
 Download::receive_max_uploads(int t) {
-  (*m_downloadStatus)->mark_dirty();
+  m_windowDownloadStatus->mark_dirty();
 
   m_download->get_download().set_uploads_max(std::max(m_download->get_download().get_uploads_max() + t, (uint32_t)2));
 }
 
 void
 Download::receive_min_peers(int t) {
-  (*m_downloadStatus)->mark_dirty();
+  m_windowDownloadStatus->mark_dirty();
 
   m_download->get_download().set_peers_min(std::max(m_download->get_download().get_peers_min() + t, (uint32_t)5));
 }
 
 void
 Download::receive_max_peers(int t) {
-  (*m_downloadStatus)->mark_dirty();
+  m_windowDownloadStatus->mark_dirty();
 
   m_download->get_download().set_peers_max(std::max(m_download->get_download().get_peers_max() + t, (uint32_t)5));
 }
 
 void
 Download::receive_change(Display d) {
@@ -268,36 +211,57 @@
 void
 Download::receive_change(Display d) {
   if (d == m_state)
     return;
 
   disable_display();
-
   activate_display(d);
 }
 
 void
-Download::bind_keys(input::Bindings* b) {
-  (*b)['a'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), 1);
-  (*b)['z'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), -1);
-  (*b)['s'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), 5);
-  (*b)['x'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), -5);
-  (*b)['d'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), 50);
-  (*b)['c'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), -50);
-
-  (*b)['1'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_max_uploads), -1);
-  (*b)['2'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_max_uploads), 1);
-  (*b)['3'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_min_peers), -5);
-  (*b)['4'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_min_peers), 5);
-  (*b)['5'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_max_peers), -5);
-  (*b)['6'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_max_peers), 5);
+Download::receive_snub_peer() {
+  if (m_focus == m_peers.end())
+    return;
+
+  m_focus->set_snubbed(!m_focus->get_snubbed());
 
-  (*b)['t'] = sigc::bind(sigc::mem_fun(m_download->get_download(), &torrent::Download::set_tracker_timeout), 2 * 1000000);
+  mark_dirty();
+}
+
+void
+Download::bind_keys() {
+  (*m_bindings)['a'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), 1);
+  (*m_bindings)['z'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), -1);
+  (*m_bindings)['s'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), 5);
+  (*m_bindings)['x'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), -5);
+  (*m_bindings)['d'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), 50);
+  (*m_bindings)['c'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_throttle), -50);
+
+  (*m_bindings)['1'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_max_uploads), -1);
+  (*m_bindings)['2'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_max_uploads), 1);
+  (*m_bindings)['3'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_min_peers), -5);
+  (*m_bindings)['4'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_min_peers), 5);
+  (*m_bindings)['5'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_max_peers), -5);
+  (*m_bindings)['6'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_max_peers), 5);
+
+  (*m_bindings)['t'] = sigc::bind(sigc::mem_fun(m_download->get_download(), &torrent::Download::set_tracker_timeout), 2 * 1000000);
+
+  (*m_bindings)['p'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_PEER_INFO);
+  (*m_bindings)['o'] = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_TRACKER_LIST);
+
+  (*m_bindings)[KEY_UP]   = sigc::mem_fun(*this, &Download::receive_prev);
+  (*m_bindings)[KEY_DOWN] = sigc::mem_fun(*this, &Download::receive_next);
+
+  // Key bindings for sub-ui's.
+  m_uiArray[DISPLAY_PEER_LIST]->get_bindings()[KEY_RIGHT] = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_FILE_LIST);
+  m_uiArray[DISPLAY_PEER_INFO]->get_bindings()[' ']       = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_PEER_LIST);
+  m_uiArray[DISPLAY_FILE_LIST]->get_bindings()[KEY_LEFT]  = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_PEER_LIST);
+  m_uiArray[DISPLAY_TRACKER_LIST]->get_bindings()[' ']    = sigc::bind(sigc::mem_fun(*this, &Download::receive_change), DISPLAY_PEER_LIST);
 
-  (*b)[KEY_UP]   = sigc::mem_fun(*this, &Download::receive_prev);
-  (*b)[KEY_DOWN] = sigc::mem_fun(*this, &Download::receive_next);
+  m_uiArray[DISPLAY_PEER_LIST]->get_bindings()['*'] = sigc::mem_fun(*this, &Download::receive_snub_peer);
+  m_uiArray[DISPLAY_PEER_INFO]->get_bindings()['*'] = sigc::mem_fun(*this, &Download::receive_snub_peer);
 }
 
 void
 Download::mark_dirty() {
   (*m_window)->mark_dirty();
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/download.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/download.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/download.h	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/download.h	2005-03-19 08:06:45.000000000 +0800
@@ -24,102 +24,98 @@
 #define RTORRENT_UI_DOWNLOAD_H
 
 #include <list>
 #include <torrent/peer.h>
 #include <sigc++/connection.h>
 
+#include "utils/list_focus.h"
+
 namespace display {
   class WindowTitle;
-  class WindowPeerInfo;
   class WindowStatusbar;
-  class WindowPeerList;
   class WindowDownloadStatusbar;
 }
 
 namespace core {
   class Download;
 }
 
 namespace ui {
 
 class Control;
-class FileList;
-class TrackerList;
+class ElementBase;
 
 class Download {
 public:
-  typedef display::Window                  Window;
-  typedef display::WindowPeerInfo          WPeerInfo;
-  typedef display::WindowPeerList          WPeerList;
   typedef display::WindowTitle             WTitle;
   typedef display::WindowStatusbar         WMainStatus;
   typedef display::WindowDownloadStatusbar WDownloadStatus;
 
   typedef core::Download*                  DPtr;
   typedef std::list<torrent::Peer>         PList;
   typedef display::Manager::iterator       MItr;
 
   typedef enum {
-    DISPLAY_NONE,
-    DISPLAY_MAIN,
-    DISPLAY_PEER,
+    DISPLAY_PEER_LIST,
+    DISPLAY_PEER_INFO,
     DISPLAY_FILE_LIST,
-    DISPLAY_TRACKER_LIST
+    DISPLAY_TRACKER_LIST,
+    DISPLAY_MAX_SIZE
   } Display;
 
-  // We own 'window'.
   Download(DPtr d, Control* c);
   ~Download();
 
-  //WPeerList&       get_window()   { return *m_window; }
-  input::Bindings& get_bindings() { return *m_bindings; }
+  input::Bindings&    get_bindings() { return *m_bindings; }
 
-  void             activate();
-  void             disable();
+  void                activate();
+  void                disable();
 
-  void             activate_display(Display d);
-  void             disable_display();
+  void                activate_display(Display d);
+  void                disable_display();
 
 private:
   Download(const Download&);
   void operator = (const Download&);
 
-  void             receive_next();
-  void             receive_prev();
+  void                receive_next();
+  void                receive_prev();
+
+  void                receive_peer_connected(torrent::Peer p);
+  void                receive_peer_disconnected(torrent::Peer p);
+
+  void                receive_throttle(int t);
+  void                receive_max_uploads(int t);
+  void                receive_min_peers(int t);
+  void                receive_max_peers(int t);
+  void                receive_change(Display d);
 
-  void             receive_peer_connected(torrent::Peer p);
-  void             receive_peer_disconnected(torrent::Peer p);
+  void                receive_snub_peer();
 
-  void             receive_throttle(int t);
-  void             receive_max_uploads(int t);
-  void             receive_min_peers(int t);
-  void             receive_max_peers(int t);
-  void             receive_change(Display d);
+  void                bind_keys();
 
-  void             bind_keys(input::Bindings* b);
+  void                mark_dirty();
 
-  void             mark_dirty();
+  DPtr                m_download;
+  PList               m_peers;
+  PList::iterator     m_focus;
 
-  DPtr             m_download;
-  PList            m_peers;
-  PList::iterator  m_focus;
+  Display             m_state;
 
-  Display          m_state;
+  ElementBase*        m_uiArray[DISPLAY_MAX_SIZE];
 
-  FileList*        m_uiFileList;
-  TrackerList*     m_uiTrackerList;
+  WTitle*             m_windowTitle;
+  WDownloadStatus*    m_windowDownloadStatus;
+  WMainStatus*        m_windowMainStatus;
 
-  MItr             m_title;
-  MItr             m_window;
-  MItr             m_downloadStatus;
-  MItr             m_mainStatus;
+  MItr                m_window;
 
-  Control*         m_control;
-  input::Bindings* m_bindings;
+  Control*            m_control;
+  input::Bindings*    m_bindings;
 
-  sigc::connection m_connPeerConnected;
-  sigc::connection m_connPeerDisconnected;
+  sigc::connection    m_connPeerConnected;
+  sigc::connection    m_connPeerDisconnected;
 };
 
 }
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/download_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/download_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/download_list.cc	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/download_list.cc	2005-03-19 08:06:45.000000000 +0800
@@ -20,162 +20,194 @@
 //           Skomakerveien 33
 //           3185 Skoppum, NORWAY
 
 #include "config.h"
 
 #include <stdexcept>
-#include <torrent/torrent.h>
+#include <rak/functional.h>
 #include <sigc++/bind.h>
+#include <sigc++/hide.h>
+#include <torrent/torrent.h>
 
 #include "core/download.h"
 
 #include "input/bindings.h"
-#include "input/text_input.h"
+#include "input/path_input.h"
 
-#include "display/window_download_list.h"
 #include "display/window_http_queue.h"
 #include "display/window_input.h"
 #include "display/window_log.h"
-#include "display/window_log_complete.h"
 #include "display/window_statusbar.h"
 #include "display/window_title.h"
 
 #include "control.h"
 #include "download.h"
 #include "download_list.h"
+#include "element_download_list.h"
+#include "element_log_complete.h"
+#include "element_string_list.h"
 
 namespace ui {
 
 DownloadList::DownloadList(Control* c) :
+  m_state(DISPLAY_MAX_SIZE),
+
+  m_window(c->get_display().end()),
+
   m_windowTitle(new WTitle("rtorrent " VERSION " - " + torrent::get(torrent::LIBRARY_NAME))),
   m_windowStatus(new WStatus(&c->get_core())),
-  m_windowTextInput(new WInput(new input::TextInput)),
   m_windowHttpQueue(new WHttp(&c->get_core().get_http_queue())),
 
   m_taskUpdate(sigc::mem_fun(*this, &DownloadList::task_update)),
   m_uiDownload(NULL),
-  m_focus(c->get_core().get_download_list().end()),
+
+  m_downloadList(&c->get_core().get_download_list()),
+
   m_control(c),
   m_bindings(new input::Bindings) {
 
-  m_windowDownloadList = new WList(&m_control->get_core().get_download_list(), &m_focus);
-  m_windowLog          = new WLog(&m_control->get_core().get_log_important());
-  m_windowLogComplete  = NULL;
+  m_uiArray[DISPLAY_DOWNLOAD_LIST] = new ElementDownloadList(&m_downloadList);
+  m_uiArray[DISPLAY_LOG]           = new ElementLogComplete(&m_control->get_core().get_log_complete());
 
-  bind_keys(m_bindings);
+  m_windowLog                      = new WLog(&m_control->get_core().get_log_important());
 
-  m_windowTextInput->get_input()->slot_dirty(sigc::mem_fun(*m_windowTextInput, &WInput::mark_dirty));
+  setup_keys();
+  setup_input();
 }
 
 DownloadList::~DownloadList() {
-  delete m_windowDownloadList;
+  std::for_each(m_uiArray, m_uiArray + DISPLAY_MAX_SIZE, rak::call_delete<ElementBase>());
+
   delete m_windowTitle;
   delete m_windowStatus;
   delete m_bindings;
 
   delete m_windowLog;
   delete m_windowTextInput->get_input();
   delete m_windowTextInput;
   delete m_windowHttpQueue;
 }
 
 void
 DownloadList::activate() {
+  if (m_window != m_control->get_display().end())
+    throw std::logic_error("ui::Download::activate() called on an already activated object");
+
   m_taskUpdate.insert(utils::Timer::cache() + 1000000);
 
   m_windowTextInput->set_active(false);
 
-  m_control->get_input().push_front(m_bindings);
+  m_window = m_control->get_display().insert(m_control->get_display().begin(), NULL);
+  m_control->get_display().push_front(m_windowTitle);
 
   m_control->get_display().push_back(m_windowLog);
   m_control->get_display().push_back(m_windowHttpQueue);
   m_control->get_display().push_back(m_windowTextInput);
   m_control->get_display().push_back(m_windowStatus);
-  m_control->get_display().push_front(m_windowDownloadList);
-  m_control->get_display().push_front(m_windowTitle);
+
+  m_control->get_input().push_front(m_bindings);
+
+  activate_display(DISPLAY_DOWNLOAD_LIST);
 }
 
 void
 DownloadList::disable() {
+  if (m_window == m_control->get_display().end())
+    throw std::logic_error("ui::Download::disable() called on an already disabled object");
+
+  disable_display();
+
   m_taskUpdate.remove();
 
   if (m_windowTextInput->is_active()) {
     m_windowTextInput->get_input()->clear();
     receive_exit_input();
   }
 
-  if (m_windowLogComplete != NULL)
-    receive_toggle_log();
-
-  m_control->get_input().erase(m_bindings);
-
+  m_control->get_display().erase(m_window);
   m_control->get_display().erase(m_windowTitle);
-  m_control->get_display().erase(m_windowDownloadList);
   m_control->get_display().erase(m_windowStatus);
   m_control->get_display().erase(m_windowTextInput);
   m_control->get_display().erase(m_windowLog);
   m_control->get_display().erase(m_windowHttpQueue);
+
+  m_window = m_control->get_display().end();
+
+  m_control->get_input().erase(m_bindings);
 }
 
 void
-DownloadList::receive_next() {
-  if (m_focus != m_control->get_core().get_download_list().end())
-    ++m_focus;
-  else
-    m_focus = m_control->get_core().get_download_list().begin();
+DownloadList::activate_display(Display d) {
+  if (m_window == m_control->get_display().end())
+    throw std::logic_error("ui::DownloadList::activate_display(...) could not find previous display iterator");
+
+  if (d >= DISPLAY_MAX_SIZE)
+    throw std::logic_error("ui::DownloadList::activate_display(...) out of bounds");
+
+  m_state = d;
+  m_uiArray[d]->activate(m_control, m_window);
 
-  mark_dirty();
+  m_control->get_display().adjust_layout();
 }
 
+// Does not delete disabled window.
 void
-DownloadList::receive_prev() {
-  if (m_focus != m_control->get_core().get_download_list().begin())
-    --m_focus;
-  else
-    m_focus = m_control->get_core().get_download_list().end();
+DownloadList::disable_display() {
+  m_uiArray[m_state]->disable(m_control);
 
-  mark_dirty();
+  m_state   = DISPLAY_MAX_SIZE;
+  *m_window = NULL;
+}
+
+void
+DownloadList::receive_next() {
+  m_downloadList.inc_focus();
+}
+
+void
+DownloadList::receive_prev() {
+  m_downloadList.dec_focus();
 }
 
 void
 DownloadList::receive_throttle(int t) {
   m_windowStatus->mark_dirty();
 
   torrent::set(torrent::THROTTLE_ROOT_CONST_RATE, torrent::get(torrent::THROTTLE_ROOT_CONST_RATE) + t * 1024);
 }
 
 void
 DownloadList::receive_start_download() {
-  if (m_focus == m_control->get_core().get_download_list().end())
+  if (m_downloadList.get_focus() == m_downloadList.end())
     return;
 
-  m_control->get_core().start(*m_focus);
+  m_control->get_core().start(*m_downloadList.get_focus());
 }
 
 void
 DownloadList::receive_stop_download() {
-  if (m_focus == m_control->get_core().get_download_list().end())
+  if (m_downloadList.get_focus() == m_downloadList.end())
     return;
 
-  if ((*m_focus)->get_download().is_active())
-    m_control->get_core().stop(*m_focus);
+  if ((*m_downloadList.get_focus())->get_download().is_active())
+    m_control->get_core().stop(*m_downloadList.get_focus());
   else
-    m_focus = m_control->get_core().erase(m_focus);
+    m_downloadList.set_focus(m_control->get_core().erase(m_downloadList.get_focus()));
 }
 
 void
 DownloadList::receive_view_download() {
-  if (m_focus == m_control->get_core().get_download_list().end())
+  if (m_downloadList.get_focus() == m_downloadList.end())
     return;
 
   if (m_uiDownload != NULL)
     throw std::logic_error("DownloadList::receive_view_download() called but m_uiDownload != NULL");
 
   disable();
 
-  m_uiDownload = new Download(*m_focus, m_control);
+  m_uiDownload = new Download(*m_downloadList.get_focus(), m_control);
 
   m_uiDownload->activate();
   m_uiDownload->get_bindings()[KEY_LEFT] = sigc::mem_fun(*this, &DownloadList::receive_exit_download);
 }
 
 void
@@ -207,78 +239,73 @@
 }
 
 void
 DownloadList::receive_exit_input() {
   m_windowStatus->set_active(true);
   m_windowTextInput->set_active(false);
-  m_control->get_display().adjust_layout();
 
   m_control->get_input().set_text_input();
 
   m_slotOpenUri(m_windowTextInput->get_input()->str());
 
   m_windowTextInput->get_input()->clear();
   m_windowTextInput->set_focus(false);
 
   m_bindings->erase('\n');
   m_bindings->erase(KEY_ENTER);
+
+  receive_change(DISPLAY_DOWNLOAD_LIST);
 }
 
 void
-DownloadList::receive_toggle_log() {
-  if (m_windowLogComplete == NULL) {
-    display::Manager::iterator itr = m_control->get_display().find(m_windowDownloadList);
-
-    if (itr == m_control->get_display().end())
-      throw std::logic_error("ui::DownloadList::receive_toggle_log() could not find download list");
-
-    *itr = m_windowLogComplete = new WLogComplete(&m_control->get_core().get_log_complete());
-
-  } else {
-    display::Manager::iterator itr = m_control->get_display().find(m_windowLogComplete);
-
-    if (itr == m_control->get_display().end())
-      throw std::logic_error("ui::DownloadList::receive_toggle_log() could not find download list");
-
-    *itr = m_windowDownloadList;
-
-    delete m_windowLogComplete;
-    m_windowLogComplete = NULL;
-  }
+DownloadList::receive_change(Display d) {
+  if (d == m_state)
+    return;
 
-  m_control->get_display().adjust_layout();
+  disable_display();
+  activate_display(d);
 }
 
 void
 DownloadList::task_update() {
   m_windowLog->receive_update();
 
   m_taskUpdate.insert(utils::Timer::cache() + 1000000);
 }
 
 void
-DownloadList::bind_keys(input::Bindings* b) {
-  (*b)['a'] = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), 1);
-  (*b)['z'] = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), -1);
-  (*b)['s'] = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), 5);
-  (*b)['x'] = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), -5);
-  (*b)['d'] = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), 50);
-  (*b)['c'] = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), -50);
+DownloadList::setup_keys() {
+  (*m_bindings)['a']           = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), 1);
+  (*m_bindings)['z']           = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), -1);
+  (*m_bindings)['s']           = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), 5);
+  (*m_bindings)['x']           = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), -5);
+  (*m_bindings)['d']           = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), 50);
+  (*m_bindings)['c']           = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_throttle), -50);
 
-  (*b)['\x13'] = sigc::mem_fun(*this, &DownloadList::receive_start_download);
-  (*b)['\x04'] = sigc::mem_fun(*this, &DownloadList::receive_stop_download);
+  (*m_bindings)['\x13']        = sigc::mem_fun(*this, &DownloadList::receive_start_download);
+  (*m_bindings)['\x04']        = sigc::mem_fun(*this, &DownloadList::receive_stop_download);
 
-  (*b)[KEY_UP]    = sigc::mem_fun(*this, &DownloadList::receive_prev);
-  (*b)[KEY_DOWN]  = sigc::mem_fun(*this, &DownloadList::receive_next);
-  (*b)[KEY_RIGHT] = sigc::mem_fun(*this, &DownloadList::receive_view_download);
-  (*b)['l']       = sigc::mem_fun(*this, &DownloadList::receive_toggle_log);
+  (*m_bindings)['\x7f']        = sigc::mem_fun(*this, &DownloadList::receive_view_input);
+  (*m_bindings)[KEY_BACKSPACE] = sigc::mem_fun(*this, &DownloadList::receive_view_input);
 
-  (*b)['\x7f'] = sigc::mem_fun(*this, &DownloadList::receive_view_input);
-  (*b)[KEY_BACKSPACE] = sigc::mem_fun(*this, &DownloadList::receive_view_input);
+  (*m_bindings)[KEY_UP]        = sigc::mem_fun(*this, &DownloadList::receive_prev);
+  (*m_bindings)[KEY_DOWN]      = sigc::mem_fun(*this, &DownloadList::receive_next);
+  (*m_bindings)[KEY_RIGHT]     = sigc::mem_fun(*this, &DownloadList::receive_view_download);
+  (*m_bindings)['l']           = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_change), DISPLAY_LOG);
+
+  m_uiArray[DISPLAY_LOG]->get_bindings()[' '] = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_change), DISPLAY_DOWNLOAD_LIST);
 }
 
 void
-DownloadList::mark_dirty() {
-  m_windowDownloadList->mark_dirty();
+DownloadList::setup_input() {
+  input::PathInput* p    = new input::PathInput;
+  ElementStringList* esl = new ElementStringList();
+  m_windowTextInput      = new WInput(p);
+
+  p->slot_dirty(sigc::mem_fun(*m_windowTextInput, &WInput::mark_dirty));
+  p->signal_show_range().connect(sigc::hide(sigc::hide(sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_change), DISPLAY_STRING_LIST))));
+  p->signal_show_range().connect(sigc::mem_fun(*esl, &ElementStringList::set_range<utils::Directory::iterator>));
+
+  m_uiArray[DISPLAY_STRING_LIST] = esl;
 }
 
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/download_list.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/download_list.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/download_list.h	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/download_list.h	2005-03-19 08:06:45.000000000 +0800
@@ -24,12 +24,13 @@
 #define RTORRENT_UI_DOWNLOAD_LIST_H
 
 #include <sigc++/slot.h>
 
 #include "core/download_list.h"
 #include "utils/task.h"
+#include "utils/list_focus.h"
 
 namespace input {
   class Bindings;
 }
 
 namespace display {
@@ -43,84 +44,96 @@
 }
 
 namespace ui {
 
 class Control;
 class Download;
+class ElementBase;
 
 class DownloadList {
 public:
-  typedef display::WindowDownloadList           WList;
-  typedef display::WindowHttpQueue              WHttp;
-  typedef display::WindowInput                  WInput;
-  typedef display::WindowLog                    WLog;
-  typedef display::WindowLogComplete            WLogComplete;
-  typedef display::WindowStatusbar              WStatus;
-  typedef display::WindowTitle                  WTitle;
+  typedef display::WindowDownloadList              WList;
+  typedef display::WindowHttpQueue                 WHttp;
+  typedef display::WindowInput                     WInput;
+  typedef display::WindowLog                       WLog;
+  typedef display::WindowLogComplete               WLogComplete;
+  typedef display::WindowStatusbar                 WStatus;
+  typedef display::WindowTitle                     WTitle;
+
+  typedef utils::ListFocus<core::DownloadList>     DList;
+
+  typedef sigc::slot1<void, const std::string&>    SlotOpenUri;
+
+  typedef display::Manager::iterator               MItr;
+
+  typedef enum {
+    DISPLAY_DOWNLOAD_LIST,
+    DISPLAY_LOG,
+    DISPLAY_STRING_LIST,
+    DISPLAY_MAX_SIZE
+  } Display;
 
-  typedef core::DownloadList                    DList;
-
-  typedef sigc::slot1<void, const std::string&> SlotOpenUri;
-
-  // We own 'window'.
   DownloadList(Control* c);
   ~DownloadList();
 
-  WList&           get_window_download_list()   { return *m_windowDownloadList; }
-  input::Bindings& get_bindings()               { return *m_bindings; }
+  input::Bindings&    get_bindings()               { return *m_bindings; }
 
-  void             activate();
-  void             disable();
+  void                activate();
+  void                disable();
 
-  void             slot_open_uri(SlotOpenUri s) { m_slotOpenUri = s; }
+  void                activate_display(Display d);
+  void                disable_display();
+
+  void                slot_open_uri(SlotOpenUri s) { m_slotOpenUri = s; }
 
 private:
   DownloadList(const DownloadList&);
   void operator = (const DownloadList&);
 
-  void             receive_next();
-  void             receive_prev();
+  void                receive_next();
+  void                receive_prev();
+
+  void                receive_throttle(int t);
 
-  void             receive_throttle(int t);
+  void                receive_start_download();
+  void                receive_stop_download();
 
-  void             receive_start_download();
-  void             receive_stop_download();
+  void                receive_view_download();
+  void                receive_exit_download();
 
-  void             receive_view_download();
-  void             receive_exit_download();
+  void                receive_view_input();
+  void                receive_exit_input();
 
-  void             receive_view_input();
-  void             receive_exit_input();
+  void                receive_change(Display d);
 
-  void             receive_toggle_log();
+  void                task_update();
 
-  void             task_update();
+  void                setup_keys();
+  void                setup_input();
 
-  void             bind_keys(input::Bindings* b);
+  Display             m_state;
 
-  void             mark_dirty();
+  ElementBase*        m_uiArray[DISPLAY_MAX_SIZE];
 
-  WList*           m_windowDownloadList;
-  WTitle*          m_windowTitle;
-  WStatus*         m_windowStatus;
-  WLog*            m_windowLog;
-  WInput*          m_windowTextInput;
-  WHttp*           m_windowHttpQueue;
+  MItr                m_window;
 
-  WLogComplete*    m_windowLogComplete;
+  WTitle*             m_windowTitle;
+  WStatus*            m_windowStatus;
+  WLog*               m_windowLog;
+  WInput*             m_windowTextInput;
+  WHttp*              m_windowHttpQueue;
 
-  utils::Task      m_taskUpdate;
+  utils::Task         m_taskUpdate;
 
-  Download*        m_uiDownload;
+  Download*           m_uiDownload;
 
-  DList*           m_list;
-  DList::iterator  m_focus;
+  DList               m_downloadList;
 
-  Control*         m_control;
-  input::Bindings* m_bindings;
+  Control*            m_control;
+  input::Bindings*    m_bindings;
 
-  SlotOpenUri      m_slotOpenUri;
+  SlotOpenUri         m_slotOpenUri;
 };
 
 }
 
 #endif
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_base.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_download_list.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_download_list.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_file_list.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_file_list.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_log_complete.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_log_complete.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_peer_info.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_peer_info.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_peer_list.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_peer_list.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_string_list.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_string_list.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_tracker_list.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui: element_tracker_list.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui: file_list.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui: file_list.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/Makefile.am	2005-03-13 07:34:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/Makefile.am	2005-03-19 09:14:59.000000000 +0800
@@ -3,14 +3,25 @@
 libsub_ui_a_SOURCES = \
 	control.h \
 	download.cc \
 	download.h \
 	download_list.cc \
 	download_list.h \
-	file_list.cc \
-	file_list.h \
+	element_base.h \
+	element_download_list.cc \
+	element_download_list.h \
+	element_file_list.cc \
+	element_file_list.h \
+	element_log_complete.cc \
+	element_log_complete.h \
+	element_peer_info.cc \
+	element_peer_info.h \
+	element_peer_list.cc \
+	element_peer_list.h \
+	element_string_list.cc \
+	element_string_list.h \
+	element_tracker_list.cc \
+	element_tracker_list.h \
 	root.cc \
-	root.h \
-	tracker_list.cc \
-	tracker_list.h
+	root.h
 
 INCLUDES = -I$(srcdir) -I$(srcdir)/.. -I$(top_srcdir)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui/Makefile.in	2005-03-13 07:39:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/ui/Makefile.in	2005-03-19 09:15:04.000000000 +0800
@@ -81,44 +81,64 @@
 libsub_ui_a_SOURCES = \
 	control.h \
 	download.cc \
 	download.h \
 	download_list.cc \
 	download_list.h \
-	file_list.cc \
-	file_list.h \
+	element_base.h \
+	element_download_list.cc \
+	element_download_list.h \
+	element_file_list.cc \
+	element_file_list.h \
+	element_log_complete.cc \
+	element_log_complete.h \
+	element_peer_info.cc \
+	element_peer_info.h \
+	element_peer_list.cc \
+	element_peer_list.h \
+	element_string_list.cc \
+	element_string_list.h \
+	element_tracker_list.cc \
+	element_tracker_list.h \
 	root.cc \
-	root.h \
-	tracker_list.cc \
-	tracker_list.h
+	root.h
 
 
 INCLUDES = -I$(srcdir) -I$(srcdir)/.. -I$(top_srcdir)
 subdir = src/ui
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = $(top_builddir)/config.h
 CONFIG_CLEAN_FILES =
 LIBRARIES = $(noinst_LIBRARIES)
 
 libsub_ui_a_AR = $(AR) cru
 libsub_ui_a_LIBADD =
 am_libsub_ui_a_OBJECTS = download.$(OBJEXT) download_list.$(OBJEXT) \
-	file_list.$(OBJEXT) root.$(OBJEXT) tracker_list.$(OBJEXT)
+	element_download_list.$(OBJEXT) element_file_list.$(OBJEXT) \
+	element_log_complete.$(OBJEXT) element_peer_info.$(OBJEXT) \
+	element_peer_list.$(OBJEXT) element_string_list.$(OBJEXT) \
+	element_tracker_list.$(OBJEXT) root.$(OBJEXT)
 libsub_ui_a_OBJECTS = $(am_libsub_ui_a_OBJECTS)
 
 DEFS = @DEFS@
 DEFAULT_INCLUDES =  -I. -I$(srcdir) -I$(top_builddir)
 CPPFLAGS = @CPPFLAGS@
 LDFLAGS = @LDFLAGS@
 LIBS = @LIBS@
 depcomp = $(SHELL) $(top_srcdir)/depcomp
 am__depfiles_maybe = depfiles
 @AMDEP_TRUE@DEP_FILES = ./$(DEPDIR)/download.Po \
 @AMDEP_TRUE@	./$(DEPDIR)/download_list.Po \
-@AMDEP_TRUE@	./$(DEPDIR)/file_list.Po ./$(DEPDIR)/root.Po \
-@AMDEP_TRUE@	./$(DEPDIR)/tracker_list.Po
+@AMDEP_TRUE@	./$(DEPDIR)/element_download_list.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/element_file_list.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/element_log_complete.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/element_peer_info.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/element_peer_list.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/element_string_list.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/element_tracker_list.Po \
+@AMDEP_TRUE@	./$(DEPDIR)/root.Po
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
 CXXLD = $(CXX)
 CXXLINK = $(CXXLD) $(AM_CXXFLAGS) $(CXXFLAGS) $(AM_LDFLAGS) $(LDFLAGS) \
 	-o $@
 CXXFLAGS = @CXXFLAGS@
@@ -155,15 +175,20 @@
 
 distclean-compile:
 	-rm -f *.tab.c
 
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/download.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/download_list.Po@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/file_list.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/element_download_list.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/element_file_list.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/element_log_complete.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/element_peer_info.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/element_peer_list.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/element_string_list.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/element_tracker_list.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/root.Po@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tracker_list.Po@am__quote@
 
 distclean-depend:
 	-rm -rf ./$(DEPDIR)
 
 .cc.o:
 @AMDEP_TRUE@	source='$<' object='$@' libtool=no @AMDEPBACKSLASH@
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui: tracker_list.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/ui: tracker_list.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/directory.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/directory.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/directory.cc	2005-03-13 07:34:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/directory.cc	2005-03-19 08:06:44.000000000 +0800
@@ -28,33 +28,35 @@
 #include <dirent.h>
 
 #include "directory.h"
 
 namespace utils {
 
-void
+bool
 Directory::update() {
   if (m_path.empty())
     throw std::logic_error("Directory::update() tried to open an empty path");
 
   DIR* d = opendir(m_path.c_str());
 
   if (d == NULL)
-    throw std::runtime_error("Directory::update() could not open directory");
+    return false;
 
   struct dirent* ent;
 
   while ((ent = readdir(d)) != NULL) {
     std::string de(ent->d_name);
 
-    if (de != "." && de != "..")
+    if (!de.empty() && de[0] != '.')
       Base::push_back(ent->d_name);
   }
 
   closedir(d);
   Base::sort(std::less<std::string>());
+
+  return true;
 }
 
 Directory::Base
 Directory::make_list() {
   Base l;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/directory.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/directory.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/directory.h	2005-03-13 07:34:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/directory.h	2005-03-19 08:06:44.000000000 +0800
@@ -47,13 +47,13 @@
 
   using Base::erase;
 
   Directory() {}
   Directory(const std::string& path) : m_path(path) {}
 
-  void                update();
+  bool                update();
 
   const std::string&  get_path() { return m_path; }
 
   // Make a list with full path names.
   Base                make_list();
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils: list_focus.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/Makefile.am	2005-03-13 07:34:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/Makefile.am	2005-03-19 08:06:44.000000000 +0800
@@ -1,11 +1,12 @@
 noinst_LIBRARIES = libsub_utils.a
 
 libsub_utils_a_SOURCES = \
 	directory.cc \
 	directory.h \
+	list_focus.h \
 	parse.cc \
 	parse.h \
 	task.h \
 	task_schedule.cc \
 	task_schedule.h \
 	timer.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/Makefile.in	2005-03-13 07:39:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/Makefile.in	2005-03-19 09:15:04.000000000 +0800
@@ -78,12 +78,13 @@
 install_sh = @install_sh@
 noinst_LIBRARIES = libsub_utils.a
 
 libsub_utils_a_SOURCES = \
 	directory.cc \
 	directory.h \
+	list_focus.h \
 	parse.cc \
 	parse.h \
 	task.h \
 	task_schedule.cc \
 	task_schedule.h \
 	timer.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/timer.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/timer.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/src/utils/timer.h	2005-03-13 07:34:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/src/utils/timer.h	2005-03-19 08:06:44.000000000 +0800
@@ -17,14 +17,14 @@
 //
 // Contact:  Jari Sundell <jaris@ifi.uio.no>
 //
 //           Skomakerveien 33
 //           3185 Skoppum, NORWAY
 
-#ifndef LIBTORRENT_TIMER_H
-#define LIBTORRENT_TIMER_H
+#ifndef RTORRENT_UTILS_TIMER_H
+#define RTORRENT_UTILS_TIMER_H
 
 #include <limits>
 #include <inttypes.h>
 #include <sys/time.h>
 
 namespace utils {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/TODO /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/TODO
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.3/TODO	2005-03-13 07:34:51.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.1.4/TODO	2005-03-19 08:06:45.000000000 +0800
@@ -10,7 +10,15 @@
 
 Some kind of indication that a tracker request was tried, but won't be
 allowed since the tracker set a min interval.
 
 Make accumulate return the value, no refs please...
 
-!!! Clean up logs at regular intervals.
\ No newline at end of file
+>   - listing the total upload / download bandwidth at the bottom of the
+>     screen;
+
+>   - seeing the number of seeds / leechers of a torrent on the main
+>     screen (and the level of distribution between leechers);
+
+>   - being able to delete not just the torrent file, but the files it
+>     created from rtorrent.  Like when you start a torrent, but it is too
+>     slow or broken or for various reasons you don't want to download it.
