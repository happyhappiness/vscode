diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/configure	2005-09-03 00:43:10.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/configure	2005-09-06 16:19:20.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.59 for rtorrent 0.3.3.
+# Generated by GNU Autoconf 2.59 for rtorrent 0.3.4.
 #
 # Report bugs to <jaris@ifi.uio.no>.
 #
 # Copyright (C) 2003 Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
@@ -266,14 +266,14 @@
 # only ac_max_sed_lines should be used.
 : ${ac_max_here_lines=38}
 
 # Identity of this package.
 PACKAGE_NAME='rtorrent'
 PACKAGE_TARNAME='rtorrent'
-PACKAGE_VERSION='0.3.3'
-PACKAGE_STRING='rtorrent 0.3.3'
+PACKAGE_VERSION='0.3.4'
+PACKAGE_STRING='rtorrent 0.3.4'
 PACKAGE_BUGREPORT='jaris@ifi.uio.no'
 
 ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA CYGPATH_W PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM mkdir_p AWK SET_MAKE am__leading_dot AMTAR am__tar am__untar CXX CXXFLAGS LDFLAGS CPPFLAGS ac_ct_CXX EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CXXDEPMODE am__fastdepCXX_TRUE am__fastdepCXX_FALSE RANLIB ac_ct_RANLIB CC CFLAGS ac_ct_CC CCDEPMODE am__fastdepCC_TRUE am__fastdepCC_FALSE PKG_CONFIG STUFF_CFLAGS STUFF_LIBS LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -743,13 +743,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures rtorrent 0.3.3 to adapt to many kinds of systems.
+\`configure' configures rtorrent 0.3.4 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -805,13 +805,13 @@
   --program-transform-name=PROGRAM   run sed PROGRAM on installed program names
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of rtorrent 0.3.3:";;
+     short | recursive ) echo "Configuration of rtorrent 0.3.4:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
@@ -932,13 +932,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit 0
 if $ac_init_version; then
   cat <<\_ACEOF
-rtorrent configure 0.3.3
+rtorrent configure 0.3.4
 generated by GNU Autoconf 2.59
 
 Copyright (C) 2003 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
@@ -946,13 +946,13 @@
 fi
 exec 5>config.log
 cat >&5 <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by rtorrent $as_me 0.3.3, which was
+It was created by rtorrent $as_me 0.3.4, which was
 generated by GNU Autoconf 2.59.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 {
@@ -1590,13 +1590,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='rtorrent'
- VERSION='0.3.3'
+ VERSION='0.3.4'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -4200,37 +4200,37 @@
      echo "*** in your path, or set the PKG_CONFIG environment variable"
      echo "*** to the full path to pkg-config."
      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
   else
      PKG_CONFIG_MIN_VERSION=0.9.0
      if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
-        echo "$as_me:$LINENO: checking for sigc++-2.0 libtorrent >= 0.7.3" >&5
-echo $ECHO_N "checking for sigc++-2.0 libtorrent >= 0.7.3... $ECHO_C" >&6
+        echo "$as_me:$LINENO: checking for sigc++-2.0 libtorrent >= 0.7.4" >&5
+echo $ECHO_N "checking for sigc++-2.0 libtorrent >= 0.7.4... $ECHO_C" >&6
 
-        if $PKG_CONFIG --exists "sigc++-2.0 libtorrent >= 0.7.3" ; then
+        if $PKG_CONFIG --exists "sigc++-2.0 libtorrent >= 0.7.4" ; then
             echo "$as_me:$LINENO: result: yes" >&5
 echo "${ECHO_T}yes" >&6
             succeeded=yes
 
             echo "$as_me:$LINENO: checking STUFF_CFLAGS" >&5
 echo $ECHO_N "checking STUFF_CFLAGS... $ECHO_C" >&6
-            STUFF_CFLAGS=`$PKG_CONFIG --cflags "sigc++-2.0 libtorrent >= 0.7.3"`
+            STUFF_CFLAGS=`$PKG_CONFIG --cflags "sigc++-2.0 libtorrent >= 0.7.4"`
             echo "$as_me:$LINENO: result: $STUFF_CFLAGS" >&5
 echo "${ECHO_T}$STUFF_CFLAGS" >&6
 
             echo "$as_me:$LINENO: checking STUFF_LIBS" >&5
 echo $ECHO_N "checking STUFF_LIBS... $ECHO_C" >&6
-            STUFF_LIBS=`$PKG_CONFIG --libs "sigc++-2.0 libtorrent >= 0.7.3"`
+            STUFF_LIBS=`$PKG_CONFIG --libs "sigc++-2.0 libtorrent >= 0.7.4"`
             echo "$as_me:$LINENO: result: $STUFF_LIBS" >&5
 echo "${ECHO_T}$STUFF_LIBS" >&6
         else
             STUFF_CFLAGS=""
             STUFF_LIBS=""
             ## If we have a custom action on failure, don't print errors, but
             ## do set a variable so people can do so.
-            STUFF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "sigc++-2.0 libtorrent >= 0.7.3"`
+            STUFF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "sigc++-2.0 libtorrent >= 0.7.4"`
             echo $STUFF_PKG_ERRORS
         fi
 
 
 
      else
@@ -4240,14 +4240,14 @@
   fi
 
   if test $succeeded = yes; then
      CXXFLAGS="$CXXFLAGS $STUFF_CFLAGS $CURL_CFLAGS";
 		  LIBS="$LIBS $STUFF_LIBS $CURL_LIBS"
   else
-     { { echo "$as_me:$LINENO: error: Library requirements (sigc++-2.0 libtorrent >= 0.7.3) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&5
-echo "$as_me: error: Library requirements (sigc++-2.0 libtorrent >= 0.7.3) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&2;}
+     { { echo "$as_me:$LINENO: error: Library requirements (sigc++-2.0 libtorrent >= 0.7.4) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&5
+echo "$as_me: error: Library requirements (sigc++-2.0 libtorrent >= 0.7.4) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&2;}
    { (exit 1); exit 1; }; }
   fi
 
 
 
 cat >>confdefs.h <<\_ACEOF
@@ -4636,13 +4636,13 @@
   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
 ## Running $as_me. ##
 _ASBOX
 } >&5
 cat >&5 <<_CSEOF
 
-This file was extended by rtorrent $as_me 0.3.3, which was
+This file was extended by rtorrent $as_me 0.3.4, which was
 generated by GNU Autoconf 2.59.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -4699,13 +4699,13 @@
 
 Report bugs to <bug-autoconf@gnu.org>."
 _ACEOF
 
 cat >>$CONFIG_STATUS <<_ACEOF
 ac_cs_version="\\
-rtorrent config.status 0.3.3
+rtorrent config.status 0.3.4
 configured by $0, generated by GNU Autoconf 2.59,
   with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright (C) 2003 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/configure.ac /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/configure.ac
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/configure.ac	2005-08-28 01:11:01.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/configure.ac	2005-09-06 02:48:27.000000000 +0800
@@ -1,7 +1,7 @@
-AC_INIT(rtorrent, 0.3.3, jaris@ifi.uio.no)
+AC_INIT(rtorrent, 0.3.4, jaris@ifi.uio.no)
 
 AM_INIT_AUTOMAKE
 AM_CONFIG_HEADER(config.h)
 
 sinclude(scripts/checks.m4)
 sinclude(scripts/common.m4)
@@ -19,13 +19,13 @@
 TORRENT_CHECK_EXECINFO()
 TORRENT_CHECK_CURL()
 TORRENT_OTFD()
 
 TORRENT_WITHOUT_VARIABLE_FDSET()
 
-PKG_CHECK_MODULES(STUFF, sigc++-2.0 libtorrent >= 0.7.3,
+PKG_CHECK_MODULES(STUFF, sigc++-2.0 libtorrent >= 0.7.4,
 	          CXXFLAGS="$CXXFLAGS $STUFF_CFLAGS $CURL_CFLAGS";
 		  LIBS="$LIBS $STUFF_LIBS $CURL_LIBS")
 
 AC_DEFINE(HAVE_CONFIG_H, 1, true if config.h was included)
 
 AC_OUTPUT([
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/Makefile.am	2005-08-28 01:11:02.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/Makefile.am	2005-09-05 18:58:37.000000000 +0800
@@ -2,9 +2,10 @@
 	doc \
 	src
 
 EXTRA_DIST= \
 	autogen.sh \
 	rak/algorithm.h \
+	rak/error_number.h \
 	rak/functional.h \
 	scripts/checks.m4 \
 	scripts/common.m4
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/Makefile.in	2005-09-03 00:43:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/Makefile.in	2005-09-18 04:42:22.000000000 +0800
@@ -157,12 +157,13 @@
 	doc \
 	src
 
 EXTRA_DIST = \
 	autogen.sh \
 	rak/algorithm.h \
+	rak/error_number.h \
 	rak/functional.h \
 	scripts/checks.m4 \
 	scripts/common.m4
 
 all: config.h
 	$(MAKE) $(AM_MAKEFLAGS) all-recursive
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/rak/algorithm.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/rak/algorithm.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/rak/algorithm.h	2005-08-28 01:11:01.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/rak/algorithm.h	2005-09-06 02:48:54.000000000 +0800
@@ -1,7 +1,7 @@
-// rTorrent - BitTorrent client
+// rak - Rakshasa's toolbox
 // Copyright (C) 2005, Jari Sundell
 //
 // This program is free software; you can redistribute it and/or modify
 // it under the terms of the GNU General Public License as published by
 // the Free Software Foundation; either version 2 of the License, or
 // (at your option) any later version.
@@ -31,14 +31,14 @@
 //
 // Contact:  Jari Sundell <jaris@ifi.uio.no>
 //
 //           Skomakerveien 33
 //           3185 Skoppum, NORWAY
 
-#ifndef RTORRENT_UTILS_ALGORITHM_H
-#define RTORRENT_UTILS_ALGORITHM_H
+#ifndef RAK_ALGORITHM_H
+#define RAK_ALGORITHM_H
 
 #include <algorithm>
 
 namespace rak {
 
 template <typename _InputIter, typename _Function>
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/rak: error_number.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/rak/functional.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/rak/functional.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/rak/functional.h	2005-08-28 01:11:01.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/rak/functional.h	2005-09-10 04:13:56.000000000 +0800
@@ -1,7 +1,7 @@
-// rTorrent - BitTorrent client
+// rak - Rakshasa's toolbox
 // Copyright (C) 2005, Jari Sundell
 //
 // This program is free software; you can redistribute it and/or modify
 // it under the terms of the GNU General Public License as published by
 // the Free Software Foundation; either version 2 of the License, or
 // (at your option) any later version.
@@ -31,14 +31,14 @@
 //
 // Contact:  Jari Sundell <jaris@ifi.uio.no>
 //
 //           Skomakerveien 33
 //           3185 Skoppum, NORWAY
 
-#ifndef RTORRENT_UTILS_FUNCTIONAL_H
-#define RTORRENT_UTILS_FUNCTIONAL_H
+#ifndef RAK_FUNCTIONAL_H
+#define RAK_FUNCTIONAL_H
 
 #include <functional>
 
 namespace rak {
 
 template <typename Type>
@@ -49,70 +49,91 @@
 template <typename Type>
 struct reference_fix<Type&> {
   typedef Type type;
 };
 
 template <typename Type, typename Ftor>
-struct _accumulate {
-  _accumulate(Type& t, Ftor f) : m_t(t), m_f(f) {}
+struct accumulate_t {
+  accumulate_t(Type& t, Ftor f) : m_t(t), m_f(f) {}
 
   template <typename Arg>
   void operator () (Arg& a) { m_t += m_f(a); }
 
   Type& m_t;
   Ftor m_f;
 };
 
 template <typename Type, typename Ftor>
-inline _accumulate<Type, Ftor>
+inline accumulate_t<Type, Ftor>
 accumulate(Type& t, Ftor f) {
-  return _accumulate<Type, Ftor>(t, f);
+  return accumulate_t<Type, Ftor>(t, f);
 }
 
 // Operators:
 
 template <typename Type, typename Ftor>
-struct _equal {
+struct equal_t {
   typedef bool result_type;
 
-  _equal(Type t, Ftor f) : m_t(t), m_f(f) {}
+  equal_t(Type t, Ftor f) : m_t(t), m_f(f) {}
 
   template <typename Arg>
   bool operator () (Arg& a) {
     return m_t == m_f(a);
   }
 
   Type m_t;
   Ftor m_f;
 };
 
 template <typename Type, typename Ftor>
-inline _equal<Type, Ftor>
+inline equal_t<Type, Ftor>
 equal(Type t, Ftor f) {
-  return _equal<Type, Ftor>(t, f);
+  return equal_t<Type, Ftor>(t, f);
 }
 
 template <typename Type, typename Ftor>
-struct _less {
+struct not_equal_t {
   typedef bool result_type;
 
-  _less(Type t, Ftor f) : m_t(t), m_f(f) {}
+  not_equal_t(Type t, Ftor f) : m_t(t), m_f(f) {}
+
+  template <typename Arg>
+  bool operator () (Arg& a) {
+    return m_t != m_f(a);
+  }
+
+  Type m_t;
+  Ftor m_f;
+};
+
+template <typename Type, typename Ftor>
+inline not_equal_t<Type, Ftor>
+not_equal(Type t, Ftor f) {
+  return not_equal_t<Type, Ftor>(t, f);
+}
+
+template <typename Type, typename Ftor>
+struct less_t {
+  typedef bool result_type;
+
+  less_t(Type t, Ftor f) : m_t(t), m_f(f) {}
 
   template <typename Arg>
   bool operator () (Arg& a) {
     return m_t < m_f(a);
   }
 
   Type m_t;
   Ftor m_f;
 };
 
 template <typename Type, typename Ftor>
-inline _less<Type, Ftor>
+inline less_t<Type, Ftor>
 less(Type t, Ftor f) {
-  return _less<Type, Ftor>(t, f);
+  return less_t<Type, Ftor>(t, f);
 }
 
 template <typename Type, typename Ftor>
 struct _greater {
   typedef bool result_type;
 
@@ -131,109 +152,109 @@
 inline _greater<Type, Ftor>
 greater(Type t, Ftor f) {
   return _greater<Type, Ftor>(t, f);
 }
 
 template <typename Type, typename Ftor>
-struct _less_equal {
+struct less_equal_t {
   typedef bool result_type;
 
-  _less_equal(Type t, Ftor f) : m_t(t), m_f(f) {}
+  less_equal_t(Type t, Ftor f) : m_t(t), m_f(f) {}
 
   template <typename Arg>
   bool operator () (Arg& a) {
     return m_t <= m_f(a);
   }
 
   Type m_t;
   Ftor m_f;
 };
 
 template <typename Type, typename Ftor>
-inline _less_equal<Type, Ftor>
+inline less_equal_t<Type, Ftor>
 less_equal(Type t, Ftor f) {
-  return _less_equal<Type, Ftor>(t, f);
+  return less_equal_t<Type, Ftor>(t, f);
 }
 
 template <typename Type, typename Ftor>
-struct _greater_equal {
+struct greater_equal_t {
   typedef bool result_type;
 
-  _greater_equal(Type t, Ftor f) : m_t(t), m_f(f) {}
+  greater_equal_t(Type t, Ftor f) : m_t(t), m_f(f) {}
 
   template <typename Arg>
   bool operator () (Arg& a) {
     return m_t >= m_f(a);
   }
 
   Type m_t;
   Ftor m_f;
 };
 
 template <typename Type, typename Ftor>
-inline _greater_equal<Type, Ftor>
+inline greater_equal_t<Type, Ftor>
 greater_equal(Type t, Ftor f) {
-  return _greater_equal<Type, Ftor>(t, f);
+  return greater_equal_t<Type, Ftor>(t, f);
 }
 
 template <typename Src, typename Dest>
-struct _on : public std::unary_function<typename Src::argument_type, typename Dest::result_type> {
+struct on_t : public std::unary_function<typename Src::argument_type, typename Dest::result_type> {
   typedef typename Dest::result_type result_type;
 
-  _on(Src s, Dest d) : m_dest(d), m_src(s) {}
+  on_t(Src s, Dest d) : m_dest(d), m_src(s) {}
 
   result_type operator () (typename reference_fix<typename Src::argument_type>::type arg) {
     return m_dest(m_src(arg));
   }
 
   Dest m_dest;
   Src m_src;
 };
     
 template <typename Src, typename Dest>
-inline _on<Src, Dest>
+inline on_t<Src, Dest>
 on(Src s, Dest d) {
-  return _on<Src, Dest>(s, d);
+  return on_t<Src, Dest>(s, d);
 }  
 
 // Creates a functor for accessing a member.
 template <typename Class, typename Member>
-struct _mem_ptr_ref : public std::unary_function<Class&, Member&> {
-  _mem_ptr_ref(Member Class::*m) : m_member(m) {}
+struct mem_ptr_ref_t : public std::unary_function<Class&, Member&> {
+  mem_ptr_ref_t(Member Class::*m) : m_member(m) {}
 
   Member& operator () (Class& c) {
     return c.*m_member;
   }
 
   Member Class::*m_member;
 };
 
 template <typename Class, typename Member>
-inline _mem_ptr_ref<Class, Member>
+inline mem_ptr_ref_t<Class, Member>
 mem_ptr_ref(Member Class::*m) {
-  return _mem_ptr_ref<Class, Member>(m);
+  return mem_ptr_ref_t<Class, Member>(m);
 }
 
 template <typename Cond, typename Then>
-struct _if_then {
-  _if_then(Cond c, Then t) : m_cond(c), m_then(t) {}
+struct if_then_t {
+  if_then_t(Cond c, Then t) : m_cond(c), m_then(t) {}
 
   template <typename Arg>
   void operator () (Arg& a) {
     if (m_cond(a))
       m_then(a);
   }
 
   Cond m_cond;
   Then m_then;
 };
 
 template <typename Cond, typename Then>
-inline _if_then<Cond, Then>
+inline if_then_t<Cond, Then>
 if_then(Cond c, Then t) {
-  return _if_then<Cond, Then>(c, t);
+  return if_then_t<Cond, Then>(c, t);
 }
 
 template <typename T>
 struct call_delete : public std::unary_function<T*, void> {
   void operator () (T* t) {
     delete t;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/src/core/curl_get.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/src/core/curl_get.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/src/core/curl_get.cc	2005-08-28 01:10:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/src/core/curl_get.cc	2005-09-17 07:44:26.000000000 +0800
@@ -34,27 +34,27 @@
 //           Skomakerveien 33
 //           3185 Skoppum, NORWAY
 
 #include "config.h"
 
 #include <iostream>
+#include <stdexcept>
 #include <curl/curl.h>
 #include <curl/easy.h>
-#include <torrent/exceptions.h>
 
 #include "curl_get.h"
 #include "curl_stack.h"
 
 namespace core {
 
 CurlGet::CurlGet(CurlStack* s) :
   m_handle(NULL),
   m_stack(s) {
 
   if (m_stack == NULL)
-    throw torrent::client_error("Tried to create CurlGet without a valid CurlStack");
+    throw std::logic_error("Tried to create CurlGet without a valid CurlStack");
 }
 
 CurlGet::~CurlGet() {
   close();
 }
 
@@ -63,16 +63,16 @@
   return new CurlGet(s);
 }
 
 void
 CurlGet::start() {
   if (is_busy())
-    throw torrent::internal_error("Tried to call CurlGet::start on a busy object");
+    throw std::logic_error("Tried to call CurlGet::start on a busy object");
 
   if (m_stream == NULL)
-    throw torrent::internal_error("Tried to call CurlGet::start without a valid output stream");
+    throw std::logic_error("Tried to call CurlGet::start without a valid output stream");
 
   m_handle = curl_easy_init();
 
   curl_easy_setopt(m_handle, CURLOPT_URL,           m_url.c_str());
   curl_easy_setopt(m_handle, CURLOPT_USERAGENT,     m_userAgent.c_str());
   curl_easy_setopt(m_handle, CURLOPT_WRITEFUNCTION, &curl_get_receive_write);
@@ -114,13 +114,13 @@
   return d;
 }
 
 void
 CurlGet::perform(CURLMsg* msg) {
   if (msg->msg != CURLMSG_DONE)
-    throw torrent::client_error("CurlGet::process got CURLMSG that isn't done");
+    throw std::logic_error("CurlGet::process got CURLMSG that isn't done");
 
   if (msg->data.result == CURLE_OK)
     m_signalDone.emit();
   else
     m_signalFailed.emit(curl_easy_strerror(msg->data.result));
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/src/core/curl_stack.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/src/core/curl_stack.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/src/core/curl_stack.cc	2005-08-28 01:10:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/src/core/curl_stack.cc	2005-09-17 07:44:52.000000000 +0800
@@ -66,26 +66,26 @@
   CURLMcode code;
 
   do {
     code = curl_multi_perform((CURLM*)m_handle, &s);
 
     if (code > 0)
-      throw torrent::local_error("Error calling curl_multi_perform");
+      throw std::runtime_error("Error calling curl_multi_perform");
 
     if (s != m_size) {
       // Done with some handles.
       int t;
 
       do {
 	CURLMsg* msg = curl_multi_info_read((CURLM*)m_handle, &t);
 
 	CurlGetList::iterator itr = std::find_if(m_getList.begin(), m_getList.end(),
 						 rak::equal(msg->easy_handle, std::mem_fun(&CurlGet::handle)));
 
 	if (itr == m_getList.end())
-	  throw torrent::client_error("Could not find CurlGet with the right easy_handle");
+	  throw std::logic_error("Could not find CurlGet with the right easy_handle");
 	
 	(*itr)->perform(msg);
       } while (t);
     }
 
   } while (code == CURLM_CALL_MULTI_PERFORM);
@@ -103,27 +103,30 @@
 
 void
 CurlStack::add_get(CurlGet* get) {
   CURLMcode code;
 
   if ((code = curl_multi_add_handle((CURLM*)m_handle, get->handle())) > 0)
-    throw torrent::local_error("curl_multi_add_handle \"" + std::string(curl_multi_strerror(code)));
+    throw std::logic_error("curl_multi_add_handle \"" + std::string(curl_multi_strerror(code)));
 
   m_size++;
   m_getList.push_back(get);
+
+  // Curl ML suggest we need to do perform after adding a handle.
+  //perform();
 }
 
 void
 CurlStack::remove_get(CurlGet* get) {
   if (curl_multi_remove_handle((CURLM*)m_handle, get->handle()) > 0)
-    throw torrent::local_error("Error calling curl_multi_remove_handle");
+    throw std::logic_error("Error calling curl_multi_remove_handle");
 
   CurlGetList::iterator itr = std::find(m_getList.begin(), m_getList.end(), get);
 
   if (itr == m_getList.end())
-    throw torrent::client_error("Could not find CurlGet when calling CurlStack::remove");
+    throw std::logic_error("Could not find CurlGet when calling CurlStack::remove");
 
   m_size--;
   m_getList.erase(itr);
 }
 
 void
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/src/core/poll_manager.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/src/core/poll_manager.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/src/core/poll_manager.cc	2005-08-28 01:10:53.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/src/core/poll_manager.cc	2005-09-17 09:07:20.000000000 +0800
@@ -51,28 +51,47 @@
 
 #if defined USE_VARIABLE_FDSET
   m_setSize = m_poll->get_open_max() / 8;
   m_readSet = (fd_set*)new char[m_setSize];
   m_writeSet = (fd_set*)new char[m_setSize];
   m_errorSet = (fd_set*)new char[m_setSize];
+
+  std::memset(m_readSet, 0, m_setSize);
+  std::memset(m_writeSet, 0, m_setSize);
+  std::memset(m_errorSet, 0, m_setSize);
 #else
   if (m_poll->get_open_max() > FD_SETSIZE)
     throw std::logic_error("PollManager::PollManager(...) received a max open sockets >= FD_SETSIZE, but USE_VARIABLE_FDSET was not defined");
 
   m_setSize = FD_SETSIZE / 8;
   m_readSet = new fd_set;
   m_writeSet = new fd_set;
   m_errorSet = new fd_set;
+
+  FD_ZERO(m_readSet);
+  FD_ZERO(m_writeSet);
+  FD_ZERO(m_errorSet);
 #endif
+
+  // Call this so curl has valid fd_set pointers if curl_multi_perform
+  // is called before it gets set when polling.
+  m_httpStack.fdset(m_readSet, m_writeSet, m_errorSet);
 }
 
 PollManager::~PollManager() {
   delete m_poll;
+
+#if defined USE_VARIABLE_FDSET
+  delete [] m_readSet;
+  delete [] m_writeSet;
+  delete [] m_errorSet;
+#else
   delete m_readSet;
   delete m_writeSet;
   delete m_errorSet;
+#endif
 }
 
 void
 PollManager::check_error() {
   if (errno != EINTR)
     throw std::runtime_error("Poll::work(): select error");
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/src/main.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/src/main.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.3/src/main.cc	2005-08-28 01:11:01.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.3.4/src/main.cc	2005-09-17 07:47:44.000000000 +0800
@@ -44,12 +44,13 @@
 #include <stdlib.h>
 #include <sstream>
 #include <sigc++/bind.h>
 #include <sigc++/retype_return.h>
 #include <torrent/http.h>
 #include <torrent/torrent.h>
+#include <torrent/exceptions.h>
 #include <rak/functional.h>
 
 #ifdef USE_EXECINFO
 #include <execinfo.h>
 #endif
 
@@ -237,12 +238,18 @@
 						    utils::taskScheduler.get_next_timeout() - utils::Timer::cache() :
 						    60 * 1000000);
     }
 
     uiControl.cleanup();
 
+  } catch (torrent::base_error& e) {
+    display::Canvas::cleanup();
+
+    std::cout << "Caught exception from libtorrent: \"" << e.what() << '"' << std::endl;
+    return -1;
+
   } catch (std::exception& e) {
     display::Canvas::cleanup();
 
     std::cout << "Caught exception: \"" << e.what() << '"' << std::endl;
     return -1;
   }
