diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/configure	2005-04-28 03:12:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/configure	2005-05-31 03:22:33.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.57 for rtorrent 0.2.2.
+# Generated by GNU Autoconf 2.57 for rtorrent 0.2.3.
 #
 # Report bugs to <jaris@ifi.uio.no>.
 #
 # Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001, 2002
 # Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
@@ -265,14 +265,14 @@
 # only ac_max_sed_lines should be used.
 : ${ac_max_here_lines=38}
 
 # Identity of this package.
 PACKAGE_NAME='rtorrent'
 PACKAGE_TARNAME='rtorrent'
-PACKAGE_VERSION='0.2.2'
-PACKAGE_STRING='rtorrent 0.2.2'
+PACKAGE_VERSION='0.2.3'
+PACKAGE_STRING='rtorrent 0.2.3'
 PACKAGE_BUGREPORT='jaris@ifi.uio.no'
 
 ac_subst_vars='SHELL PATH_SEPARATOR PACKAGE_NAME PACKAGE_TARNAME PACKAGE_VERSION PACKAGE_STRING PACKAGE_BUGREPORT exec_prefix prefix program_transform_name bindir sbindir libexecdir datadir sysconfdir sharedstatedir localstatedir libdir includedir oldincludedir infodir mandir build_alias host_alias target_alias DEFS ECHO_C ECHO_N ECHO_T LIBS INSTALL_PROGRAM INSTALL_SCRIPT INSTALL_DATA PACKAGE VERSION ACLOCAL AUTOCONF AUTOMAKE AUTOHEADER MAKEINFO AMTAR install_sh STRIP ac_ct_STRIP INSTALL_STRIP_PROGRAM AWK SET_MAKE CXX CXXFLAGS LDFLAGS CPPFLAGS ac_ct_CXX EXEEXT OBJEXT DEPDIR am__include am__quote AMDEP_TRUE AMDEP_FALSE AMDEPBACKSLASH CXXDEPMODE RANLIB ac_ct_RANLIB CC CFLAGS ac_ct_CC CCDEPMODE PKG_CONFIG STUFF_CFLAGS STUFF_LIBS LIBOBJS LTLIBOBJS'
 ac_subst_files=''
 
 # Initialize some variables set by options.
@@ -742,13 +742,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures rtorrent 0.2.2 to adapt to many kinds of systems.
+\`configure' configures rtorrent 0.2.3 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -804,24 +804,24 @@
   --program-transform-name=PROGRAM   run sed PROGRAM on installed program names
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of rtorrent 0.2.2:";;
+     short | recursive ) echo "Configuration of rtorrent 0.2.3:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
   --enable-debug          enable debug information default=yes
+  --enable-werror         enable the -Werror flag default=no
   --disable-dependency-tracking Speeds up one-time builds
   --enable-dependency-tracking  Do not reject slow dependency extractors
   --disable-largefile     omit support for large files
-  --enable-werror         enable the -Werror flag default=no
 
 Some influential environment variables:
   CXX         C++ compiler command
   CXXFLAGS    C++ compiler flags
   LDFLAGS     linker flags, e.g. -L<lib dir> if you have libraries in a
               nonstandard directory <lib dir>
@@ -893,13 +893,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit 0
 if $ac_init_version; then
   cat <<\_ACEOF
-rtorrent configure 0.2.2
+rtorrent configure 0.2.3
 generated by GNU Autoconf 2.57
 
 Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001, 2002
 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
@@ -908,13 +908,13 @@
 fi
 exec 5>config.log
 cat >&5 <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by rtorrent $as_me 0.2.2, which was
+It was created by rtorrent $as_me 0.2.3, which was
 generated by GNU Autoconf 2.57.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 {
@@ -1499,13 +1499,13 @@
 echo "$as_me: error: source directory already configured; run \"make distclean\" there first" >&2;}
    { (exit 1); exit 1; }; }
 fi
 
 # Define the identity of the package.
  PACKAGE=rtorrent
- VERSION=0.2.2
+ VERSION=0.2.3
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -1647,31 +1647,64 @@
 
 
 
 
 
 
-CXXFLAGS="-O3"
 
-# Check whether --enable-debug or --disable-debug was given.
+
+
+
+
+
+
+
+
+  echo "$as_me:$LINENO: checking for user-defined CXXFLAGS" >&5
+echo $ECHO_N "checking for user-defined CXXFLAGS... $ECHO_C" >&6
+
+  if test !$CXXFLAGS; then
+    CXXFLAGS="-O3 -Wall"
+    echo "$as_me:$LINENO: result: default \"$CXXFLAGS\"" >&5
+echo "${ECHO_T}default \"$CXXFLAGS\"" >&6
+  else
+    echo "$as_me:$LINENO: result: user-defined \"$CXXFLAGS\"" >&5
+echo "${ECHO_T}user-defined \"$CXXFLAGS\"" >&6
+  fi
+
+
+
+  # Check whether --enable-debug or --disable-debug was given.
 if test "${enable_debug+set}" = set; then
   enableval="$enable_debug"
 
         if test "$enableval" = "yes"; then
-            CXXFLAGS="$CXXFLAGS -Wall -g -DDEBUG"
+            CXXFLAGS="$CXXFLAGS -g -DDEBUG"
         else
-            CXXFLAGS="$CXXFLAGS -Wall -DNDEBUG"
+            CXXFLAGS="$CXXFLAGS -DNDEBUG"
         fi
 
 else
 
-        CXXFLAGS="$CXXFLAGS -Wall -g -DDEBUG"
+        CXXFLAGS="$CXXFLAGS -g -DDEBUG"
+
+fi;
+
 
 
+  # Check whether --enable-werror or --disable-werror was given.
+if test "${enable_werror+set}" = set; then
+  enableval="$enable_werror"
+
+        if test "$enableval" = "yes"; then
+            CXXFLAGS="$CXXFLAGS -Werror"
+        fi
+
 fi;
 
+
 ac_ext=cc
 ac_cpp='$CXXCPP $CPPFLAGS'
 ac_compile='$CXX -c $CXXFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CXX -o conftest$ac_exeext $CXXFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_cxx_compiler_gnu
 if test -n "$ac_tool_prefix"; then
@@ -3456,23 +3489,12 @@
 
 fi
 rm -f conftest*
 fi
 
 
-# Check whether --enable-werror or --disable-werror was given.
-if test "${enable_werror+set}" = set; then
-  enableval="$enable_werror"
-
-        if test "$enableval" = "yes"; then
-            CXXFLAGS="$CXXFLAGS -Werror"
-        fi
-
-
-fi;
-
 echo "$as_me:$LINENO: checking for library containing wbkgdset" >&5
 echo $ECHO_N "checking for library containing wbkgdset... $ECHO_C" >&6
 if test "${ac_cv_search_wbkgdset+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -3641,14 +3663,14 @@
 
       if test x$ok != x0; then
         my_cv_curl_vers="$ver"
         echo "$as_me:$LINENO: result: $my_cv_curl_vers" >&5
 echo "${ECHO_T}$my_cv_curl_vers" >&6
 
-	CURL_CFLAGS=`curl-config --cflags`
-	CURL_LIBS=`curl-config --libs`
+	CURL_CFLAGS="`curl-config --cflags`"
+	CURL_LIBS="`curl-config --libs`"
       else
         echo "$as_me:$LINENO: result: FAILED" >&5
 echo "${ECHO_T}FAILED" >&6
         { { echo "$as_me:$LINENO: error: $ver is too old. Need version $check or higher." >&5
 echo "$as_me: error: $ver is too old. Need version $check or higher." >&2;}
    { (exit 1); exit 1; }; }
@@ -3771,37 +3793,37 @@
      echo "*** in your path, or set the PKG_CONFIG environment variable"
      echo "*** to the full path to pkg-config."
      echo "*** Or see http://www.freedesktop.org/software/pkgconfig to get pkg-config."
   else
      PKG_CONFIG_MIN_VERSION=0.9.0
      if $PKG_CONFIG --atleast-pkgconfig-version $PKG_CONFIG_MIN_VERSION; then
-        echo "$as_me:$LINENO: checking for sigc++-2.0 libtorrent >= 0.6.2" >&5
-echo $ECHO_N "checking for sigc++-2.0 libtorrent >= 0.6.2... $ECHO_C" >&6
+        echo "$as_me:$LINENO: checking for sigc++-2.0 libtorrent >= 0.6.3" >&5
+echo $ECHO_N "checking for sigc++-2.0 libtorrent >= 0.6.3... $ECHO_C" >&6
 
-        if $PKG_CONFIG --exists "sigc++-2.0 libtorrent >= 0.6.2" ; then
+        if $PKG_CONFIG --exists "sigc++-2.0 libtorrent >= 0.6.3" ; then
             echo "$as_me:$LINENO: result: yes" >&5
 echo "${ECHO_T}yes" >&6
             succeeded=yes
 
             echo "$as_me:$LINENO: checking STUFF_CFLAGS" >&5
 echo $ECHO_N "checking STUFF_CFLAGS... $ECHO_C" >&6
-            STUFF_CFLAGS=`$PKG_CONFIG --cflags "sigc++-2.0 libtorrent >= 0.6.2"`
+            STUFF_CFLAGS=`$PKG_CONFIG --cflags "sigc++-2.0 libtorrent >= 0.6.3"`
             echo "$as_me:$LINENO: result: $STUFF_CFLAGS" >&5
 echo "${ECHO_T}$STUFF_CFLAGS" >&6
 
             echo "$as_me:$LINENO: checking STUFF_LIBS" >&5
 echo $ECHO_N "checking STUFF_LIBS... $ECHO_C" >&6
-            STUFF_LIBS=`$PKG_CONFIG --libs "sigc++-2.0 libtorrent >= 0.6.2"`
+            STUFF_LIBS=`$PKG_CONFIG --libs "sigc++-2.0 libtorrent >= 0.6.3"`
             echo "$as_me:$LINENO: result: $STUFF_LIBS" >&5
 echo "${ECHO_T}$STUFF_LIBS" >&6
         else
             STUFF_CFLAGS=""
             STUFF_LIBS=""
             ## If we have a custom action on failure, don't print errors, but
             ## do set a variable so people can do so.
-            STUFF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "sigc++-2.0 libtorrent >= 0.6.2"`
+            STUFF_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "sigc++-2.0 libtorrent >= 0.6.3"`
             echo $STUFF_PKG_ERRORS
         fi
 
 
 
      else
@@ -3811,14 +3833,14 @@
   fi
 
   if test $succeeded = yes; then
      CXXFLAGS="$CXXFLAGS $STUFF_CFLAGS $CURL_CFLAGS";
 		  LIBS="$LIBS $STUFF_LIBS $CURL_LIBS"
   else
-     { { echo "$as_me:$LINENO: error: Library requirements (sigc++-2.0 libtorrent >= 0.6.2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&5
-echo "$as_me: error: Library requirements (sigc++-2.0 libtorrent >= 0.6.2) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&2;}
+     { { echo "$as_me:$LINENO: error: Library requirements (sigc++-2.0 libtorrent >= 0.6.3) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&5
+echo "$as_me: error: Library requirements (sigc++-2.0 libtorrent >= 0.6.3) not met; consider adjusting the PKG_CONFIG_PATH environment variable if your libraries are in a nonstandard prefix so pkg-config can find them." >&2;}
    { (exit 1); exit 1; }; }
   fi
 
 
 
 cat >>confdefs.h <<\_ACEOF
@@ -4191,13 +4213,13 @@
   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
 ## Running $as_me. ##
 _ASBOX
 } >&5
 cat >&5 <<_CSEOF
 
-This file was extended by rtorrent $as_me 0.2.2, which was
+This file was extended by rtorrent $as_me 0.2.3, which was
 generated by GNU Autoconf 2.57.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -4254,13 +4276,13 @@
 
 Report bugs to <bug-autoconf@gnu.org>."
 _ACEOF
 
 cat >>$CONFIG_STATUS <<_ACEOF
 ac_cs_version="\\
-rtorrent config.status 0.2.2
+rtorrent config.status 0.2.3
 configured by $0, generated by GNU Autoconf 2.57,
   with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/configure.ac /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/configure.ac
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/configure.ac	2005-04-28 02:39:03.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/configure.ac	2005-05-31 03:21:20.000000000 +0800
@@ -1,48 +1,29 @@
-AC_INIT(rtorrent, 0.2.2, jaris@ifi.uio.no)
+AC_INIT(rtorrent, 0.2.3, jaris@ifi.uio.no)
 
 AM_INIT_AUTOMAKE
 AM_CONFIG_HEADER(config.h)
 
 sinclude(scripts/checks.m4)
+sinclude(scripts/common.m4)
 
-CXXFLAGS="-O3"
-
-AC_ARG_ENABLE(debug,
-    [  --enable-debug          enable debug information [default=yes]],
-    [
-        if test "$enableval" = "yes"; then
-            CXXFLAGS="$CXXFLAGS -Wall -g -DDEBUG"
-        else
-            CXXFLAGS="$CXXFLAGS -Wall -DNDEBUG"
-        fi
-    ],[
-        CXXFLAGS="$CXXFLAGS -Wall -g -DDEBUG"
-    ]
-)
+TORRENT_CHECK_CXXFLAGS()
+TORRENT_ENABLE_DEBUG()
+TORRENT_ENABLE_WERROR()
 
 AC_PROG_CXX
 AC_PROG_RANLIB
 AC_SYS_LARGEFILE
 
-AC_ARG_ENABLE(werror,
-    [  --enable-werror         enable the -Werror flag [default=no]],
-    [
-        if test "$enableval" = "yes"; then
-            CXXFLAGS="$CXXFLAGS -Werror"
-        fi
-    ]
-)
-
 AC_SEARCH_LIBS(wbkgdset, ncurses curses,,echo "*** The ncurses library is required!";exit 1)
 
 TORRENT_CHECK_EXECINFO()
 TORRENT_CHECK_CURL()
 TORRENT_OTFD()
 
-PKG_CHECK_MODULES(STUFF, sigc++-2.0 libtorrent >= 0.6.2,
+PKG_CHECK_MODULES(STUFF, sigc++-2.0 libtorrent >= 0.6.3,
 	          CXXFLAGS="$CXXFLAGS $STUFF_CFLAGS $CURL_CFLAGS";
 		  LIBS="$LIBS $STUFF_LIBS $CURL_LIBS")
 
 AC_DEFINE(HAVE_CONFIG_H, 1, true if config.h was included)
 
 AC_OUTPUT([
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/Makefile.am	2005-04-18 00:07:00.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/Makefile.am	2005-05-31 03:22:23.000000000 +0800
@@ -2,7 +2,8 @@
 
 EXTRA_DIST= \
 	autogen.sh \
 	doc/rtorrent.1.txt \
 	rak/algorithm.h \
 	rak/functional.h \
-	scripts/checks.m4
+	scripts/checks.m4 \
+	scripts/common.m4
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/Makefile.in	2005-04-28 03:12:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/Makefile.in	2005-05-31 03:22:31.000000000 +0800
@@ -80,13 +80,14 @@
 
 EXTRA_DIST = \
 	autogen.sh \
 	doc/rtorrent.1.txt \
 	rak/algorithm.h \
 	rak/functional.h \
-	scripts/checks.m4
+	scripts/checks.m4 \
+	scripts/common.m4
 
 subdir = .
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = config.h
 CONFIG_CLEAN_FILES =
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/scripts/checks.m4 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/scripts/checks.m4
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/scripts/checks.m4	2005-03-17 04:36:00.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/scripts/checks.m4	2005-05-31 03:21:05.000000000 +0800
@@ -15,14 +15,14 @@
       ok=`echo "ibase=16; if($hex_ver>=$check_hex) $hex_ver else 0" | bc`
  
       if test x$ok != x0; then
         my_cv_curl_vers="$ver"
         AC_MSG_RESULT([$my_cv_curl_vers])
 
-	CURL_CFLAGS=`curl-config --cflags`
-	CURL_LIBS=`curl-config --libs`
+	CURL_CFLAGS="`curl-config --cflags`"
+	CURL_LIBS="`curl-config --libs`"
       else
         AC_MSG_RESULT(FAILED)
         AC_MSG_ERROR([$ver is too old. Need version $check or higher.])
       fi
     else
       AC_MSG_RESULT(FAILED)
@@ -57,77 +57,6 @@
       PKG_CHECK_MODULES(OPENSSL, openssl,
       CXXFLAGS="$CXXFLAGS `pkg-config --cflags openssl`";
       LIBS="$LIBS -lcrypto `pkg-config --libs-only-L openssl`",
       AC_MSG_ERROR(Could not find openssl's crypto library, try --with-openssl=PATH))
     ])
 ])
-
-
-AC_DEFUN([TORRENT_MINCORE_SIGNEDNESS], [
-
-  AC_LANG_PUSH(C++)
-  AC_MSG_CHECKING(signedness of mincore parameter)
-
-  AC_COMPILE_IFELSE(
-    [[#include <sys/types.h>
-      #include <sys/mman.h>
-      void f() { mincore((void*)0, 0, (unsigned char*)0); }
-    ]],
-    [
-      AC_DEFINE(USE_MINCORE_UNSIGNED, 1, use unsigned char* in mincore)
-      AC_MSG_RESULT(unsigned)
-    ],
-    [
-      AC_COMPILE_IFELSE(
-        [[#include <sys/types.h>
-          #include <sys/mman.h>
-          void f() { mincore((void*)0, 0, (char*)0); }
-        ]],
-        [
-          AC_DEFINE(USE_MINCORE_UNSIGNED, 0, use char* in mincore)
-          AC_MSG_RESULT(signed)
-        ],
-        [
-          AC_MSG_ERROR([mincore signedness test failed])
-      ])
-  ])
-
-  AC_LANG_POP(C++)
-])
-
-
-AC_DEFUN([TORRENT_OTFD], [
-
-  AC_LANG_PUSH(C++)
-  AC_MSG_CHECKING(for proper overloaded template function disambiguation)
-
-  AC_COMPILE_IFELSE(
-    [[template <typename T> void f(T&) {}
-      template <typename T> void f(T*) {}
-      int main() { int *i = 0; f(*i); f(i); }
-    ]],
-    [
-      AC_MSG_RESULT(yes)
-    ], [
-      AC_MSG_RESULT(no)
-      AC_MSG_ERROR([your compiler does not properly handle overloaded template function disambiguation])
-  ])
-
-  AC_LANG_POP(C++)
-])
-
-
-AC_DEFUN([TORRENT_CHECK_EXECINFO], [
-
-  AC_MSG_CHECKING(for execinfo.h)
-
-  AC_COMPILE_IFELSE(
-    [[#include <execinfo.h>
-      int main() { backtrace((void**)0, 0); backtrace_symbols((char**)0, 0); return 0;}
-    ]],
-    [
-      AC_MSG_RESULT(yes)
-      AC_DEFINE(USE_EXECINFO, 1, Use execinfo.h)
-    ], [
-      AC_MSG_RESULT(no)
-  ])
-])
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/scripts: common.m4
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/core/hash_queue.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/core/hash_queue.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/core/hash_queue.cc	2005-03-30 20:12:24.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/core/hash_queue.cc	2005-05-31 03:21:16.000000000 +0800
@@ -31,54 +31,65 @@
 #include "hash_queue.h"
 
 namespace core {
 
 void
 HashQueue::insert(Download* d, Slot s) {
-  if (d->get_download().is_hash_checking())
+  if (d->get_download().is_hash_checking() ||
+      find(d) != end())
     return;
 
-  if (std::find_if(begin(), end(), rak::equal(d, std::mem_fun(&HashQueueNode::get_download))) != end())
-    throw std::logic_error("core::HashQueue::insert(...) received a Download that is already queued");
-
   if (d->get_download().is_hash_checked()) {
     s();
     return;
   }
 
   iterator itr = Base::insert(end(), new HashQueueNode(d, s));
 
-  (*itr)->set_connection(d->get_download().signal_hash_done(sigc::bind(sigc::mem_fun(*this, &HashQueue::receive_hash_done), itr)));
+  (*itr)->set_connection(d->get_download().signal_hash_done(sigc::bind(sigc::mem_fun(*this, &HashQueue::receive_hash_done),
+								       (*itr)->get_download())));
 
   fill_queue();
 }
 
 void
 HashQueue::remove(Download* d) {
-  iterator itr = std::find_if(begin(), end(), rak::equal(d, std::mem_fun(&HashQueueNode::get_download)));
+  iterator itr = find(d);
 
   if (itr == end())
     return;
 
-  if ((*itr)->get_download()->get_download().is_hash_checking())
-    // What do we do if we're already checking?
-    ;
+  // We don't do anything if we're already checking, just disconnect.
+//   if ((*itr)->get_download()->get_download().is_hash_checking()) {
+//     // What do we do if we're already checking?
+//   }
 
   delete *itr;
   Base::erase(itr);
 
   fill_queue();
 }
 
+HashQueue::iterator
+HashQueue::find(Download* d) {
+  return std::find_if(begin(), end(), rak::equal(d, std::mem_fun(&HashQueueNode::get_download)));
+}
+
 void
-HashQueue::receive_hash_done(Base::iterator itr) {
+HashQueue::receive_hash_done(Download* d) {
+  iterator itr = find(d);
+
+  if (itr == end())
+    return;
+
   Slot s = (*itr)->get_slot();
 
   delete *itr;
   Base::erase(itr);
 
+  // Can we call this before the delete?
   s();
   fill_queue();
 }
 
 void
 HashQueue::fill_queue() {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/core/hash_queue.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/core/hash_queue.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/core/hash_queue.h	2005-03-17 04:35:58.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/core/hash_queue.h	2005-05-31 03:21:16.000000000 +0800
@@ -51,28 +51,32 @@
   using Base::front;
   using Base::back;
 
   using Base::empty;
   using Base::size;
 
-  // Should it be safe to try inserting already present/checked downloads?
   void insert(Download* d, Slot s);
 
-  // It's safe to try to remove downloads not in the queue.
+  // It's safe to try to remove downloads not in the queue. The hash
+  // checking is not stopped if it has already started.
   void remove(Download* d);
 
+  iterator find(Download* d);
+
 private:
-  void receive_hash_done(Base::iterator itr);
+  void receive_hash_done(Download* d);
 
   void fill_queue();
 };
 
 class HashQueueNode {
 public:
   HashQueueNode(Download* d, HashQueue::Slot s) : m_download(d), m_slot(s) {}
-  ~HashQueueNode()                                    { m_connection.disconnect(); }
+  ~HashQueueNode()                                    { disconnect(); }
+
+  void             disconnect()                       { m_connection.disconnect(); }
 
   Download*        get_download()                     { return m_download; }
   HashQueue::Slot  get_slot()                         { return m_slot; }
 
   void             set_connection(sigc::connection c) { m_connection = c; }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/core/manager.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/core/manager.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/core/manager.cc	2005-04-20 03:02:05.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/core/manager.cc	2005-05-31 03:21:16.000000000 +0800
@@ -77,44 +77,59 @@
   if ((*itr)->get_download().is_active())
     throw std::logic_error("core::Manager::erase(...) called on an active download");
 
   if (!(*itr)->get_download().is_open())
     throw std::logic_error("core::Manager::erase(...) called on an closed download");
 
+  m_hashQueue.remove(*itr);
   m_downloadStore.remove(*itr);
 
   return m_downloadList.erase(itr);
 }  
 
 void
 Manager::start(Download* d) {
-  if (d->get_download().is_active())
-    return;
+  try {
+    if (d->get_download().is_active())
+      return;
+
+    if (!d->get_download().is_open())
+      d->open();
 
-  if (!d->get_download().is_open())
-    d->open();
+    if (d->get_download().is_hash_checked())
+      d->start();
+    else
+      // This can cause infinit loops.
+      m_hashQueue.insert(d, sigc::mem_fun(d, &Download::start));
 
-  if (d->get_download().is_hash_checked())
-    d->start();
-  else
-    // This can cause infinit loops.
-    m_hashQueue.insert(d, sigc::mem_fun(d, &Download::start));
+  } catch (torrent::local_error& e) {
+    m_logImportant.push_front(e.what());
+    m_logComplete.push_front(e.what());
+  }
 }
 
 void
 Manager::stop(Download* d) {
-  m_hashQueue.remove(d);
+  try {
+    m_hashQueue.remove(d);
+    d->stop();
+
+    if (d->get_download().is_hash_checked())
+      d->get_download().hash_save();
 
-  d->stop();
+    m_downloadStore.save(d);
 
-  d->get_download().hash_save();
-  m_downloadStore.save(d);
+  } catch (torrent::local_error& e) {
+    m_logImportant.push_front(e.what());
+    m_logComplete.push_front(e.what());
+  }
 }
 
 void
 Manager::set_dns(const std::string& dns) {
+  // TODO: Switch with the inet version of this thingie.
   unsigned int a, b, c, d;
 
   if (std::sscanf(dns.c_str(), "%i.%i.%i.%i", &a, &b, &c, &d) != 4 ||
       (a >= 256 || b >= 256 || c >= 256 || d >= 256))
     throw std::runtime_error("Tried to set invalid ip address.");
 
@@ -122,70 +137,65 @@
   str << a << '.' << b << '.' << c << '.' << d;
 
   m_dns = str.str();
 }
 
 void
-Manager::receive_http_done(CurlGet* http) {
-  try {
-    create_final(http->get_stream());
-
-  } catch (torrent::local_error& e) {
-    // What to do? Keep in list for now.
-    m_logImportant.push_front(e.what());
-    m_logComplete.push_front(e.what());
-  }
-}  
-
-void
 Manager::receive_http_failed(std::string msg) {
   m_logImportant.push_front("Http download error: \"" + msg + "\"");
   m_logComplete.push_front("Http download error: \"" + msg + "\"");
 }
 
 void
 Manager::create_file(const std::string& uri) {
-  try {
-    std::fstream f(uri.c_str(), std::ios::in);
-    
-    create_final(&f);
-
-  } catch (torrent::local_error& e) {
-    // What to do? Keep in list for now.
-    m_logImportant.push_front(e.what());
-    m_logComplete.push_front(e.what());
-  }
+  std::fstream f(uri.c_str(), std::ios::in);
+  
+  create_final(&f);
 }
 
 void
 Manager::create_http(const std::string& uri) {
   core::HttpQueue::iterator itr = m_httpQueue.insert(uri);
 
-  (*itr)->signal_done().slots().push_front(sigc::bind(sigc::mem_fun(*this, &core::Manager::receive_http_done), *itr));
+  (*itr)->signal_done().slots().push_front(sigc::bind(sigc::mem_fun(*this, &core::Manager::create_final),
+						      (*itr)->get_stream()));
   (*itr)->signal_failed().slots().push_front(sigc::mem_fun(*this, &core::Manager::receive_http_failed));
 }
 
-Manager::iterator
+void
 Manager::create_final(std::istream* s) {
-  iterator itr = m_downloadList.insert(s);
+  try {
+    iterator itr = m_downloadList.insert(s);
   
-  (*itr)->get_download().set_ip(m_dns);
+    setup_download(*itr);
+    start(*itr);
 
-  if (!m_defaultRoot.empty())
-    (*itr)->get_download().set_root_dir(m_defaultRoot + ((*itr)->get_download().get_entry_size() ? (*itr)->get_download().get_name() : ""));
+    m_downloadStore.save(*itr);
 
-  start(*itr);
-  m_downloadStore.save(*itr);
+  } catch (torrent::local_error& e) {
+    // What to do? Keep in list for now.
+    m_logImportant.push_front(e.what());
+    m_logComplete.push_front(e.what());
+  }
+}
+
+void
+Manager::setup_download(Download* d) {
+  d->get_download().set_ip(m_dns);
+
+  if (!m_defaultRoot.empty())
+    d->get_download().set_root_dir(m_defaultRoot +
+				   (d->get_download().get_entry_size() > 1 ?
+				    d->get_download().get_name() :
+				    ""));
 
   if (m_debugTracker >= 0)
-    (*itr)->get_download().signal_tracker_dump(sigc::mem_fun(*this, &Manager::receive_debug_tracker));
+    d->get_download().signal_tracker_dump(sigc::mem_fun(*this, &Manager::receive_debug_tracker));
 
   // If we want to monitor network stuff.
-  (*itr)->get_download().signal_network_log(sigc::mem_fun(m_logComplete, &Log::push_front));
-
-  return itr;
+  d->get_download().signal_network_log(sigc::mem_fun(m_logComplete, &Log::push_front));
 }
 
 void
 Manager::receive_debug_tracker(std::istream* s) {
   std::stringstream filename;
   filename << "./tracker_dump." << m_debugTracker++;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/core/manager.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/core/manager.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/core/manager.h	2005-04-20 02:52:22.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/core/manager.h	2005-05-31 03:21:16.000000000 +0800
@@ -72,19 +72,20 @@
 
   void                set_default_root(const std::string& path);
 
   void                debug_tracker()                         { m_debugTracker = 0; }
 
 private:
-  void                receive_http_done(CurlGet* http);
   void                receive_http_failed(std::string msg);
 
   void                create_file(const std::string& uri);
   void                create_http(const std::string& uri);
 
-  iterator            create_final(std::istream* s);
+  void                create_final(std::istream* s);
+
+  void                setup_download(Download* itr);
 
   void                receive_debug_tracker(std::istream* s);
 
   DownloadList        m_downloadList;
   DownloadStore       m_downloadStore;
   HashQueue           m_hashQueue;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/display/window_file_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/display/window_file_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/display/window_file_list.cc	2005-03-19 06:52:11.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/display/window_file_list.cc	2005-05-31 03:21:13.000000000 +0800
@@ -39,33 +39,32 @@
 
 void
 WindowFileList::redraw() {
   m_nextDraw = utils::Timer::cache().round_seconds() + 10 * 1000000;
   m_canvas->erase();
 
+  if (m_download->get_download().get_entry_size() == 0 ||
+      m_canvas->get_height() < 2)
+    return;
+
   int pos = 0;
 
   m_canvas->print( 2, pos, "File");
   m_canvas->print(55, pos, "Size");
   m_canvas->print(63, pos, "Pri");
   m_canvas->print(68, pos, "Cmpl");
 
   ++pos;
 
-  if (m_download->get_download().get_entry_size() == 0)
-    return;
-
   if (*m_focus >= m_download->get_download().get_entry_size())
     throw std::logic_error("WindowFileList::redraw() called on an object with a bad focus value");
 
-  typedef std::pair<unsigned int, unsigned int> Range;
-
   Range range = rak::advance_bidirectional<unsigned int>(0,
 							 *m_focus,
 							 m_download->get_download().get_entry_size(),
-							 m_canvas->get_height());
+							 m_canvas->get_height() - pos);
 
   while (range.first != range.second) {
     torrent::Entry e = m_download->get_download().get_entry(range.first);
 
     std::string path = e.get_path();
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/display/window_file_list.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/display/window_file_list.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/display/window_file_list.h	2005-03-17 04:35:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/display/window_file_list.h	2005-05-31 03:21:13.000000000 +0800
@@ -36,12 +36,14 @@
 }
 
 namespace display {
 
 class WindowFileList : public Window {
 public:
+  typedef std::pair<unsigned int, unsigned int> Range;
+
   WindowFileList(core::Download* d, unsigned int* focus);
 
   virtual void     redraw();
 
 private:
   int              done_percentage(torrent::Entry& e);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/main.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/main.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/src/main.cc	2005-05-02 09:14:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/src/main.cc	2005-05-31 03:21:19.000000000 +0800
@@ -142,12 +142,13 @@
 
   srandom(utils::Timer::cache().usec());
   srand48(utils::Timer::cache().usec());
 
   try {
 
+  SignalHandler::set_ignore(SIGPIPE);
   SignalHandler::set_handler(SIGINT, sigc::bind(sigc::mem_fun(uiRoot, &ui::Root::set_shutdown_received), true));
   SignalHandler::set_handler(SIGSEGV, sigc::bind(sigc::ptr_fun(&do_panic), SIGSEGV));
   SignalHandler::set_handler(SIGBUS, sigc::bind(sigc::ptr_fun(&do_panic), SIGBUS));
 
   int firstArg = parse_options(&uiControl, argc, argv);
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/TODO /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/TODO
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.2/TODO	2005-04-21 02:40:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.2.3/TODO	2005-05-31 03:21:20.000000000 +0800
@@ -29,8 +29,9 @@
 Bug: Add the same torrent while it is hash checking.
 
 Bug: Using ^s on a bad torrent does not catch the exception.
 
 Show torrent creation date?
 
-RELEASE:
+Recheck hash key.
 
+BUG: Doesn't show the last file in the file list.
