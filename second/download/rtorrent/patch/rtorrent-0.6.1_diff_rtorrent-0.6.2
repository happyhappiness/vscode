diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/configure	2006-08-14 00:24:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/configure	2006-09-08 09:15:49.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.59 for rtorrent 0.6.1.
+# Generated by GNU Autoconf 2.59 for rtorrent 0.6.2.
 #
 # Report bugs to <jaris@ifi.uio.no>.
 #
 # Copyright (C) 2003 Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
@@ -416,14 +416,14 @@
 # only ac_max_sed_lines should be used.
 : ${ac_max_here_lines=38}
 
 # Identity of this package.
 PACKAGE_NAME='rtorrent'
 PACKAGE_TARNAME='rtorrent'
-PACKAGE_VERSION='0.6.1'
-PACKAGE_STRING='rtorrent 0.6.1'
+PACKAGE_VERSION='0.6.2'
+PACKAGE_STRING='rtorrent 0.6.2'
 PACKAGE_BUGREPORT='jaris@ifi.uio.no'
 
 # Factoring default headers for most tests.
 ac_includes_default="\
 #include <stdio.h>
 #if HAVE_SYS_TYPES_H
@@ -950,13 +950,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures rtorrent 0.6.1 to adapt to many kinds of systems.
+\`configure' configures rtorrent 0.6.2 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -1016,13 +1016,13 @@
   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of rtorrent 0.6.1:";;
+     short | recursive ) echo "Configuration of rtorrent 0.6.2:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
@@ -1165,13 +1165,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit 0
 if $ac_init_version; then
   cat <<\_ACEOF
-rtorrent configure 0.6.1
+rtorrent configure 0.6.2
 generated by GNU Autoconf 2.59
 
 Copyright (C) 2003 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
@@ -1179,13 +1179,13 @@
 fi
 exec 5>config.log
 cat >&5 <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by rtorrent $as_me 0.6.1, which was
+It was created by rtorrent $as_me 0.6.2, which was
 generated by GNU Autoconf 2.59.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 {
@@ -1823,13 +1823,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='rtorrent'
- VERSION='0.6.1'
+ VERSION='0.6.2'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -15632,13 +15632,13 @@
   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
 ## Running $as_me. ##
 _ASBOX
 } >&5
 cat >&5 <<_CSEOF
 
-This file was extended by rtorrent $as_me 0.6.1, which was
+This file was extended by rtorrent $as_me 0.6.2, which was
 generated by GNU Autoconf 2.59.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -15695,13 +15695,13 @@
 
 Report bugs to <bug-autoconf@gnu.org>."
 _ACEOF
 
 cat >>$CONFIG_STATUS <<_ACEOF
 ac_cs_version="\\
-rtorrent config.status 0.6.1
+rtorrent config.status 0.6.2
 configured by $0, generated by GNU Autoconf 2.59,
   with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright (C) 2003 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/configure.ac /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/configure.ac
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/configure.ac	2006-08-14 00:22:05.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/configure.ac	2006-08-30 05:20:00.000000000 +0800
@@ -1,7 +1,7 @@
-AC_INIT(rtorrent, 0.6.1, jaris@ifi.uio.no)
+AC_INIT(rtorrent, 0.6.2, jaris@ifi.uio.no)
 
 AM_INIT_AUTOMAKE
 AM_CONFIG_HEADER(config.h)
 
 TORRENT_CHECK_CXXFLAGS()
 TORRENT_ENABLE_DEBUG()
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/doc/rtorrent.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/doc/rtorrent.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/doc/rtorrent.1	2006-08-16 06:49:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/doc/rtorrent.1	2006-08-28 05:19:06.000000000 +0800
@@ -319,13 +319,13 @@
 when \fBview_sort\fR is called. All filters must
 match for the download to be included.
 
 \fBstopped\fR, \fBstarted\fR,
 \fBcomplete\fR, \fBincomplete\fR,
 .TP
-\fBkey_layout = \fIquerty|azerty\fB\fR
+\fBkey_layout = \fIqwerty|azerty|qwertz\fB\fR
 Change the key-bindings.
 .SH "ADVANCED SETTINGS"
 .PP
 This list contains settings users shouldn't need to touch, some may
 even cause crashes or similar if incorrectly set.
 .TP
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/doc/rtorrent.1.xml /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/doc/rtorrent.1.xml
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/doc/rtorrent.1.xml	2006-08-16 03:21:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/doc/rtorrent.1.xml	2006-08-28 05:20:19.000000000 +0800
@@ -31,17 +31,22 @@
   
 
   <refsect1>
     <title>DESCRIPTION</title>
 
     <para>
-      <command>rtorrent</command> is a BitTorrent client for ncurses,
-      using the <emphasis>libtorrent</emphasis> library. The client
-      and library is written in C++ with emphasis on speed and
-      efficiency, while delivering equivalent features to those found
-      in GUI based clients in an ncurses client.
+<command>rtorrent</command> is a BitTorrent client for ncurses, using
+the <emphasis>libtorrent</emphasis> library. The client and library is
+written in C++ with emphasis on speed and efficiency, while delivering
+equivalent features to those found in GUI based clients in an ncurses
+client.
+    </para>
+
+    <para>
+Most of the options below have their own default unit in addition to
+supporting B, K, M and G suffixes.
     </para>
 
   </refsect1>
 
 
   <refsect1>
@@ -60,22 +65,18 @@
             Initiate shutdown, press again to force the shutdown and
             skip sending the stop signal to trackers.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
-	  <term>up | down</term>
-	  <listitem><para>
-            Select item.
-          </para></listitem>
-	</varlistentry>
-
-	<varlistentry>
-	  <term><-</term>
+	  <term>up | down | left | right arrow keys</term>
+	  <term>^P | ^N | ^B | ^F</term>
 	  <listitem><para>
-            Go back to the previous screen.
+Select entries or change windows. The right arrow key or ^F is often
+used for viewing details about the selected entry, while the left
+arrow key or ^B often returns to the previous screen.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>a | s | d</term>
 	  <listitem><para>
@@ -113,13 +114,13 @@
 
       <variablelist>
 
 	<varlistentry>
 	  <term>-></term>
 	  <listitem><para>
-            View download.
+View download.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>1 - 7</term>
 	  <listitem><para>
@@ -129,13 +128,13 @@
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>^S</term>
 	  <listitem><para>
-            Start download.
+Start download.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>^D</term>
 	  <listitem><para>
@@ -154,51 +149,51 @@
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>^R</term>
 	  <listitem><para>
-            Initiate hash check of torrent.
+Initiate hash check of torrent.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>^O</term>
 	  <listitem><para>
-            Change the destination directory of the download. The
-            torrent must be closed.
+Change the destination directory of the download. The torrent must be
+closed.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
-	  <term>+ | -</term>
+	  <term>^X</term>
 	  <listitem><para>
-            Change the priority of the download.
+Call commands or change settings.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
-	  <term>backspace</term>
+	  <term>+ | -</term>
 	  <listitem><para>
-            Add torrent using an URL or file path. Use
-            <emphasis>tab</emphasis> to view directory content and do
-            auto-complete.
+Change the priority of the download.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
-	  <term>l</term>
+	  <term>backspace</term>
 	  <listitem><para>
-            View log. Exit by pressing the space-bar.
+Add torrent using an URL or file path. Use
+<emphasis>tab</emphasis> to view directory content and do
+auto-complete.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
-	  <term>^P</term>
+	  <term>l</term>
 	  <listitem><para>
-            Call commands or change settings.
+View log. Exit by pressing the space-bar.
           </para></listitem>
 	</varlistentry>
 
         <varlistentry>
           <term>U</term>
           <listitem><para>
@@ -226,37 +217,36 @@
 
       <variablelist>
 
 	<varlistentry>
 	  <term>-></term>
 	  <listitem><para>
-            View torrent file list. Use the space-bar to change the
-            file priority and <emphasis>*</emphasis> to change the
-            priority of all files.
+View torrent file list. Use the space-bar to change the file priority
+and <emphasis>*</emphasis> to change the priority of all files.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>1 | 2</term>
 	  <listitem><para>
-            Adjust max uploads.
+Adjust max uploads.
           </para></listitem>
 	</varlistentry>
 
 
 	<varlistentry>
 	  <term>3 | 4</term>
 	  <listitem><para>
-            Adjust min peers.
+Adjust min peers.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>5 | 6</term>
 	  <listitem><para>
-            Adjust max peers.
+Adjust max peers.
           </para></listitem>
 	</varlistentry>
 
         <varlistentry>
           <term>u</term>
           <listitem><para>
@@ -275,16 +261,14 @@
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>o</term>
 	  <listitem><para>
-
-Display the tracker list. Cycle the trackers in a group
-
-            with the space-bar.
+Display the tracker list. Cycle the trackers in a group with the
+space-bar.
           </para></listitem>
 	</varlistentry>
 
 	<varlistentry>
 	  <term>p</term>
 	  <listitem><para>
@@ -630,17 +550,15 @@
         </para></listitem>
       </varlistentry>
 
       <varlistentry>
         <term>close_low_diskspace = <replaceable>space</replaceable></term>
         <listitem><para>
-
 Close any active torrents on filesystems with less than
 <emphasis>space</emphasis> diskspace left. Use with
-<emphasis>schedule</emphasis>.
-
+the <emphasis>schedule</emphasis> option.
         </para></listitem>
       </varlistentry>
 
       <varlistentry>
         <term>stop_on_ratio = <replaceable>min_ratio</replaceable></term>
         <term>stop_on_ratio = <replaceable>min_ratio</replaceable>,<replaceable>min_upload</replaceable></term>
@@ -643,23 +561,21 @@
 
       <varlistentry>
         <term>stop_on_ratio = <replaceable>min_ratio</replaceable></term>
         <term>stop_on_ratio = <replaceable>min_ratio</replaceable>,<replaceable>min_upload</replaceable></term>
         <term>stop_on_ratio = <replaceable>min_ratio</replaceable>,<replaceable>min_upload</replaceable>,<replaceable>max_ratio</replaceable></term>
         <listitem><para>
-
 Stop torrents when they reach the given upload ratio
 <emphasis>min_ratio</emphasis> in percent. If the optional
 <emphasis>min_upload</emphasis> is given, require a total
 upload amount of this many bytes as well. If the optional
-<emphasis>max_ratio></emphasis> is given, stop the torrent
+<emphasis>max_ratio</emphasis> is given, stop the torrent
 when reaching this ratio regardless of the total upload
 amount. Exclude certain torrent by pressing 
 <emphasis>Shift+I</emphasis> in the downlist list.
-Use with <emphasis>schedule</emphasis>.
-
+Use with the <emphasis>schedule</emphasis> option.
         </para></listitem>
       </varlistentry>
 
       <varlistentry>
         <term>load = <replaceable>file</replaceable></term>
         <term>load_verbose = <replaceable>file</replaceable></term>
@@ -757,13 +665,13 @@
 <emphasis>complete</emphasis>, <emphasis>incomplete</emphasis>,
 
         </para></listitem>
       </varlistentry>
 
       <varlistentry>
-        <term>key_layout = <replaceable>querty|azerty</replaceable></term>
+        <term>key_layout = <replaceable>qwerty|azerty|qwertz</replaceable></term>
         <listitem><para>
 
 Change the key-bindings.
 
         </para></listitem>
       </varlistentry>
@@ -846,12 +754,23 @@
 gives the client 128 sockets to use as it wishes.
 
         </para></listitem>
       </varlistentry>
 
       <varlistentry>
+        <term>max_memory_usage = <replaceable>bytes</replaceable></term>
+        <listitem><para>
+
+Set the max amount of memory space used to mapping file chunks. This
+may also be set using <emphasis>ulimit -m</emphasis> where 3/4 will be
+allocated to file chunks.
+
+        </para></listitem>
+      </varlistentry>
+
+      <varlistentry>
         <term>send_buffer_size = <replaceable>value</replaceable></term>
         <term>receive_buffer_size = <replaceable>value</replaceable></term>
         <listitem><para>
 
 Adjust the send and receive buffer size for socket.
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/rak/algorithm.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/rak/algorithm.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/rak/algorithm.h	2006-07-24 06:57:05.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/rak/algorithm.h	2006-09-08 09:12:39.000000000 +0800
@@ -53,50 +53,42 @@
     __f(*__tmp);
   }
 
   return __f;
 }
 
-template <typename InputIter, typename Function, typename Accumulator>
-Accumulator
-accumulate(InputIter first, InputIter last, Function function, Accumulator acc) {
-  while (first != last)
-    acc += function(*first++);
-
-  return acc;
-}
-
 // Return a range with a distance of no more than __distance and
 // between __first and __last, centered on __middle1.
 template <typename _InputIter, typename _Distance>
 std::pair<_InputIter, _InputIter>
 advance_bidirectional(_InputIter __first, _InputIter __middle1, _InputIter __last, _Distance __distance) {
   _InputIter __middle2 = __middle1;
 
   do {
     if (!__distance)
       break;
 
-    if (__middle1 != __first) {
-      --__middle1;
+    if (__middle2 != __last) {
+      ++__middle2;
       --__distance;
 
-    } else if (__middle2 == __last) {
+    } else if (__middle1 == __first) {
       break;
     }
 
     if (!__distance)
       break;
 
-    if (__middle2 != __last) {
-      ++__middle2;
+    if (__middle1 != __first) {
+      --__middle1;
       --__distance;
 
-    } else if (__middle1 == __first) {
+    } else if (__middle2 == __last) {
       break;
     }
+
   } while (true);
 
   return std::make_pair(__middle1, __middle2);
 }
 
 template <typename _Value>
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/rak/file_stat.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/rak/file_stat.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/rak/file_stat.h	2006-05-27 07:20:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/rak/file_stat.h	2006-09-07 09:50:22.000000000 +0800
@@ -48,12 +48,15 @@
   // Consider storing rak::error_number.
 
   bool                update(int fd)                        { return fstat(fd, &m_stat) == 0; }
   bool                update(const char* filename)          { return stat(filename, &m_stat) == 0; }
   bool                update(const std::string& filename)   { return update(filename.c_str()); }
 
+  bool                update_link(const char* filename)        { return lstat(filename, &m_stat) == 0; }
+  bool                update_link(const std::string& filename) { return update_link(filename.c_str()); }
+
   bool                is_regular() const                    { return S_ISREG(m_stat.st_mode); }
   bool                is_directory() const                  { return S_ISDIR(m_stat.st_mode); }
   bool                is_character() const                  { return S_ISCHR(m_stat.st_mode); }
   bool                is_block() const                      { return S_ISBLK(m_stat.st_mode); }
   bool                is_fifo() const                       { return S_ISFIFO(m_stat.st_mode); }
   bool                is_link() const                       { return S_ISLNK(m_stat.st_mode); }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/rak/socket_address.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/rak/socket_address.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/rak/socket_address.h	2006-05-27 07:20:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/rak/socket_address.h	2006-08-25 06:14:09.000000000 +0800
@@ -73,14 +73,14 @@
   bool                is_bindable() const;
   bool                is_address_any() const;
 
   // Should we need to set AF_UNSPEC?
   void                clear()                                 { std::memset(this, 0, sizeof(socket_address)); set_family(); }
 
-  sa_family_t         family() const                          { return m_sa.m_sockaddr.sa_family; }
-  void                set_family()                            { m_sa.m_sockaddr.sa_family = af_unspec; }
+  sa_family_t         family() const                          { return m_sockaddr.sa_family; }
+  void                set_family()                            { m_sockaddr.sa_family = af_unspec; }
 
   uint16_t            port() const;
   void                set_port(uint16_t p);
 
   std::string         address_str() const;
   bool                address_c_str(char* buf, socklen_t size) const;
@@ -92,24 +92,24 @@
 
   uint32_t            length() const;
 
   socket_address_inet*        sa_inet()                       { return reinterpret_cast<socket_address_inet*>(this); }
   const socket_address_inet*  sa_inet() const                 { return reinterpret_cast<const socket_address_inet*>(this); }
 
-  sockaddr*           c_sockaddr()                            { return &m_sa.m_sockaddr; }
-  sockaddr_in*        c_sockaddr_inet()                       { return &m_sa.m_sockaddrInet; }
+  sockaddr*           c_sockaddr()                            { return &m_sockaddr; }
+  sockaddr_in*        c_sockaddr_inet()                       { return &m_sockaddrInet; }
 
-  const sockaddr*     c_sockaddr() const                      { return &m_sa.m_sockaddr; }
-  const sockaddr_in*  c_sockaddr_inet() const                 { return &m_sa.m_sockaddrInet; }
+  const sockaddr*     c_sockaddr() const                      { return &m_sockaddr; }
+  const sockaddr_in*  c_sockaddr_inet() const                 { return &m_sockaddrInet; }
 
 #ifdef RAK_USE_INET6
   socket_address_inet6*       sa_inet6()                      { return reinterpret_cast<socket_address_inet6*>(this); }
   const socket_address_inet6* sa_inet6() const                { return reinterpret_cast<const socket_address_inet6*>(this); }
 
-  sockaddr_in6*       c_sockaddr_inet6()                      { return &m_sa.m_sockaddrInet6; }
-  const sockaddr_in6* c_sockaddr_inet6() const                { return &m_sa.m_sockaddrInet6; }
+  sockaddr_in6*       c_sockaddr_inet6()                      { return &m_sockaddrInet6; }
+  const sockaddr_in6* c_sockaddr_inet6() const                { return &m_sockaddrInet6; }
 #endif
 
   // Copy a socket address which has the length 'length. Zero out any
   // extranous bytes and ensure it does not go beyond the size of this
   // struct.
   void                copy(const socket_address& src, size_t length);
@@ -117,24 +117,27 @@
   static socket_address*       cast_from(sockaddr* sa)        { return reinterpret_cast<socket_address*>(sa); }
   static const socket_address* cast_from(const sockaddr* sa)  { return reinterpret_cast<const socket_address*>(sa); }
 
   // The different families will be sorted according to the
   // sa_family_t's numeric value.
   bool                operator == (const socket_address& rhs) const;
-  bool                operator < (const socket_address& rhs) const;
+  bool                operator  < (const socket_address& rhs) const;
+
+  bool                operator == (const sockaddr& rhs) const { return *this == *cast_from(&rhs); }
+  bool                operator == (const sockaddr* rhs) const { return *this == *cast_from(rhs); }
+  bool                operator  < (const sockaddr& rhs) const { return *this == *cast_from(&rhs); }
+  bool                operator  < (const sockaddr* rhs) const { return *this == *cast_from(rhs); }
 
 private:
-  union sa_union {
+  union {
     sockaddr            m_sockaddr;
     sockaddr_in         m_sockaddrInet;
 #ifdef RAK_USE_INET6
     sockaddr_in6        m_sockaddrInet6;
 #endif
   };
-
-  sa_union            m_sa;
 };
 
 // Remeber to set the AF_INET.
 
 class socket_address_inet {
 public:
@@ -178,12 +181,56 @@
   bool                operator < (const socket_address_inet& rhs) const;
 
 private:
   struct sockaddr_in  m_sockaddr;
 };
 
+// Unique key for the address, excluding port numbers etc.
+class socket_address_key {
+public:
+//   socket_address_host_key() {}
+
+  socket_address_key(const socket_address& sa) {
+    *this = sa;
+  }
+
+  socket_address_key& operator = (const socket_address& sa) {
+    if (sa.family() == 0) {
+      std::memset(this, 0, sizeof(socket_address_key));
+
+    } else if (sa.family() == socket_address::af_inet) {
+      // Using hardware order as we use operator < to compare when
+      // using inet only.
+      m_addr.s_addr = sa.sa_inet()->address_h();
+
+    } else {
+      // When we implement INET6 handling, embed the ipv4 address in
+      // the ipv6 address.
+      throw std::logic_error("socket_address_key(...) received an unsupported protocol family.");
+    }
+
+    return *this;
+  }
+
+//   socket_address_key& operator = (const socket_address_key& sa) {
+//   }
+
+  bool operator < (const socket_address_key& sa) const {
+    // Compare the memory area instead.
+    return m_addr.s_addr < sa.m_addr.s_addr;
+  }    
+
+private:
+  union {
+    in_addr m_addr;
+// #ifdef RAK_USE_INET6
+//     in_addr6 m_addr6;
+// #endif
+  };
+};
+
 inline bool
 socket_address::is_valid() const {
   switch (family()) {
   case af_inet:
     return sa_inet()->is_valid();
 //   case af_inet6:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/rak/string_manip.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/rak/string_manip.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/rak/string_manip.h	2006-08-13 01:44:53.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/rak/string_manip.h	2006-09-01 06:48:05.000000000 +0800
@@ -276,13 +276,13 @@
 template <typename Sequence>
 Sequence
 generate_random(size_t length) {
   Sequence s;
   s.reserve(length);
 
-  std::generate_n(std::back_inserter(s), length, &std::rand);
+  std::generate_n(std::back_inserter(s), length, &::random);
 
   return s;
 }
 
 }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/scripts/checks.m4 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/scripts/checks.m4
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/scripts/checks.m4	2006-07-19 06:40:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/scripts/checks.m4	2006-08-31 08:00:37.000000000 +0800
@@ -136,12 +136,23 @@
     ], [
         TORRENT_CHECK_EPOLL
     ])
 ])
 
 
+AC_DEFUN([TORRENT_WITH_KQUEUE], [
+  AC_ARG_WITH(kqueue,
+    [  --with-kqueue                  enable kqueue. [[default=no]]],
+    [
+        if test "$withval" = "yes"; then
+            AC_DEFINE(USE_KQUEUE, 1, Enable kqueue.)
+        fi
+    ])
+])
+
+
 AC_DEFUN([TORRENT_WITHOUT_VARIABLE_FDSET], [
   AC_ARG_WITH(variable-fdset,
 
     [  --without-variable-fdset       do not use non-portable variable sized fd_set's.],
     [
       if test "$withval" = "yes"; then
@@ -317,6 +328,27 @@
         if test "$have_stat_vfs" = "no"; then
           TORRENT_DISABLED_STATFS
         fi
       fi
     ])
 ])
+
+AC_DEFUN([TORRENT_WITH_ADDRESS_SPACE], [
+  AC_ARG_WITH(address-space,
+    AC_HELP_STRING([--with-address-space=MB], [Change the default address space size, default 1024 MB.]),
+    [
+      if test ! -z $withval -a "$withval" != "yes" -a "$withval" != "no"; then
+        AC_DEFINE_UNQUOTED(DEFAULT_ADDRESS_SPACE_SIZE, [$withval])
+      else
+        AC_MSG_ERROR(--with-address-space requires a parameter.)
+      fi
+    ],
+    [
+      AC_CHECK_SIZEOF(long)
+
+      if test "$ac_cv_sizeof_long" = "4"; then
+        AC_DEFINE(DEFAULT_ADDRESS_SPACE_SIZE, 4096, Default address space size.)
+      else
+        AC_DEFINE(DEFAULT_ADDRESS_SPACE_SIZE, 1024, Default address space size.)
+      fi
+    ])
+])
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/scripts/common.m4 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/scripts/common.m4
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/scripts/common.m4	2006-05-27 07:20:23.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/scripts/common.m4	2006-09-08 07:27:03.000000000 +0800
@@ -72,24 +72,24 @@
   AC_LANG_PUSH(C++)
   AC_MSG_CHECKING(signedness of mincore parameter)
 
   AC_COMPILE_IFELSE(
     [[#include <sys/types.h>
       #include <sys/mman.h>
-      void f() { mincore((void*)0, 0, (unsigned char*)0); }
+      void f() { mincore((char*)0, 0, (unsigned char*)0); }
     ]],
     [
       AC_DEFINE(USE_MINCORE, 1, Use mincore)
       AC_DEFINE(USE_MINCORE_UNSIGNED, 1, use unsigned char* in mincore)
       AC_MSG_RESULT(unsigned)
     ],
     [
       AC_COMPILE_IFELSE(
         [[#include <sys/types.h>
           #include <sys/mman.h>
-          void f() { mincore((void*)0, 0, (char*)0); }
+          void f() { mincore((char*)0, 0, (char*)0); }
         ]],
         [
           AC_DEFINE(USE_MINCORE, 1, Use mincore)
           AC_DEFINE(USE_MINCORE_UNSIGNED, 0, use char* in mincore)
           AC_MSG_RESULT(signed)
         ],
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/core/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/core/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/core/Makefile.am	2006-05-27 07:20:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/core/Makefile.am	2006-08-19 21:24:44.000000000 +0800
@@ -21,12 +21,14 @@
 	manager.cc \
 	manager.h \
 	poll_manager.cc \
 	poll_manager.h \
 	poll_manager_epoll.cc \
 	poll_manager_epoll.h \
+	poll_manager_kqueue.cc \
+	poll_manager_kqueue.h \
 	poll_manager_select.cc \
 	poll_manager_select.h \
 	scheduler.cc \
 	scheduler.h \
 	view.cc \
 	view.h \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/core/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/core/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/core/Makefile.in	2006-08-14 00:24:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/core/Makefile.in	2006-09-08 09:15:49.000000000 +0800
@@ -57,14 +57,14 @@
 libsub_core_a_LIBADD =
 am_libsub_core_a_OBJECTS = curl_get.$(OBJEXT) curl_stack.$(OBJEXT) \
 	download.$(OBJEXT) download_factory.$(OBJEXT) \
 	download_list.$(OBJEXT) download_store.$(OBJEXT) \
 	http_queue.$(OBJEXT) log.$(OBJEXT) manager.$(OBJEXT) \
 	poll_manager.$(OBJEXT) poll_manager_epoll.$(OBJEXT) \
-	poll_manager_select.$(OBJEXT) scheduler.$(OBJEXT) \
-	view.$(OBJEXT) view_manager.$(OBJEXT)
+	poll_manager_kqueue.$(OBJEXT) poll_manager_select.$(OBJEXT) \
+	scheduler.$(OBJEXT) view.$(OBJEXT) view_manager.$(OBJEXT)
 libsub_core_a_OBJECTS = $(am_libsub_core_a_OBJECTS)
 DEFAULT_INCLUDES = -I. -I$(srcdir) -I$(top_builddir)
 depcomp = $(SHELL) $(top_srcdir)/depcomp
 am__depfiles_maybe = depfiles
 CXXCOMPILE = $(CXX) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CXXFLAGS) $(CXXFLAGS)
@@ -211,12 +211,14 @@
 	manager.cc \
 	manager.h \
 	poll_manager.cc \
 	poll_manager.h \
 	poll_manager_epoll.cc \
 	poll_manager_epoll.h \
+	poll_manager_kqueue.cc \
+	poll_manager_kqueue.h \
 	poll_manager_select.cc \
 	poll_manager_select.h \
 	scheduler.cc \
 	scheduler.h \
 	view.cc \
 	view.h \
@@ -279,12 +281,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/download_store.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/http_queue.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/log.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/manager.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/poll_manager.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/poll_manager_epoll.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/poll_manager_kqueue.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/poll_manager_select.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/scheduler.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/view.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/view_manager.Po@am__quote@
 
 .cc.o:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/core/manager.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/core/manager.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/core/manager.cc	2006-07-06 01:57:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/core/manager.cc	2006-08-19 21:31:14.000000000 +0800
@@ -62,12 +62,13 @@
 #include "download.h"
 #include "download_factory.h"
 #include "download_store.h"
 #include "http_queue.h"
 #include "manager.h"
 #include "poll_manager_epoll.h"
+#include "poll_manager_kqueue.h"
 #include "poll_manager_select.h"
 #include "view.h"
 
 namespace core {
 
 static void
@@ -150,14 +151,19 @@
 }
 
 void
 Manager::initialize_first() {
   if ((m_pollManager = PollManagerEPoll::create(sysconf(_SC_OPEN_MAX))) != NULL)
     m_logImportant.push_front("Using 'epoll' based polling.");
+
+  else if ((m_pollManager = PollManagerKQueue::create(sysconf(_SC_OPEN_MAX))) != NULL)
+    m_logImportant.push_front("Using 'kqueue' based polling.");
+
   else if ((m_pollManager = PollManagerSelect::create(sysconf(_SC_OPEN_MAX))) != NULL)
     m_logImportant.push_front("Using 'select' based polling.");
+
   else
     throw std::runtime_error("Could not create any PollManager.");
 
   // Need to initialize this before parseing options.
   torrent::initialize(m_pollManager->get_torrent_poll());
 }
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/core: poll_manager_kqueue.cc
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/core: poll_manager_kqueue.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/display/manager.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/display/manager.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/display/manager.cc	2006-08-07 21:40:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/display/manager.cc	2006-08-31 06:40:11.000000000 +0800
@@ -63,25 +63,27 @@
 }
 
 void
 Manager::schedule(Window* w, rak::timer t) {
   rak::priority_queue_erase(&m_scheduler, w->task_update());
   rak::priority_queue_insert(&m_scheduler, w->task_update(), t);
-  schedule_update();
+  schedule_update(50000);
 }
 
 void
 Manager::unschedule(Window* w) {
   rak::priority_queue_erase(&m_scheduler, w->task_update());
-  schedule_update();
+  schedule_update(50000);
 }
 
 void
 Manager::adjust_layout() {
   Canvas::redraw_std();
   m_rootFrame.balance(0, 0, Canvas::get_screen_width(), Canvas::get_screen_height());
+
+  schedule_update(0);
 }
 
 void
 Manager::receive_update() {
   if (m_forceRedraw) {
     m_forceRedraw = false;
@@ -98,23 +100,23 @@
   rak::priority_queue_perform(&m_scheduler, cachedTime);
   m_rootFrame.refresh();
 
   Canvas::do_update();
 
   m_timeLastUpdate = cachedTime;
-  schedule_update();
+  schedule_update(50000);
 }
 
 void
-Manager::schedule_update() {
+Manager::schedule_update(uint32_t minInterval) {
   if (m_scheduler.empty()) {
     rak::priority_queue_erase(&taskScheduler, &m_taskUpdate);
     return;
   }
 
   if (!m_taskUpdate.is_queued() || m_taskUpdate.time() > m_scheduler.top()->time()) {
     rak::priority_queue_erase(&taskScheduler, &m_taskUpdate);
-    rak::priority_queue_insert(&taskScheduler, &m_taskUpdate, std::max(m_scheduler.top()->time(), m_timeLastUpdate + 50000));
+    rak::priority_queue_insert(&taskScheduler, &m_taskUpdate, std::max(m_scheduler.top()->time(), m_timeLastUpdate + minInterval));
   }
 }
 
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/display/manager.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/display/manager.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/display/manager.h	2006-07-25 21:25:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/display/manager.h	2006-08-31 00:29:58.000000000 +0800
@@ -60,13 +60,13 @@
   void                receive_update();
 
   // New interface.
   Frame*              root_frame() { return &m_rootFrame; }
 
 private:
-  void                schedule_update();
+  void                schedule_update(uint32_t minInterval);
 
   bool                m_forceRedraw;
   rak::timer          m_timeLastUpdate;
 
   rak::priority_queue_default m_scheduler;
   rak::priority_item          m_taskUpdate;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/input/bindings.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/input/bindings.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/input/bindings.cc	2006-07-28 00:45:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/input/bindings.cc	2006-09-10 17:43:33.000000000 +0800
@@ -46,13 +46,14 @@
 Bindings::pressed(int key) {
   if (!m_enabled)
     return false;
 
   const_iterator itr = find(key);
 
-  if (itr != end())
-    itr->second();
+  if (itr == end())
+    return false;
 
-  return itr != end();
+  itr->second();
+  return true;
 }
 
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/download.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/download.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/download.cc	2006-08-16 02:35:11.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/download.cc	2006-09-10 17:24:48.000000000 +0800
@@ -220,51 +220,47 @@
     return;
 
   display::Frame* frame = m_frame->frame(0);
 
   // Cleanup previous state.
   switch (m_state) {
-  case DISPLAY_MENU:
-    break;
-
   case DISPLAY_PEER_LIST:
   case DISPLAY_INFO:
   case DISPLAY_FILE_LIST:
   case DISPLAY_TRACKER_LIST:
   case DISPLAY_CHUNKS_SEEN:
   case DISPLAY_TRANSFER_LIST:
     m_uiArray[DISPLAY_MENU]->disable();
     m_uiArray[m_state]->disable();
 
     frame->clear();
     break;
 
+  case DISPLAY_MENU:
   case DISPLAY_MAX_SIZE:
     break;
   }
 
   m_state = displayType;
   m_focusDisplay = focusDisplay;
 
   // Initialize new state.
   switch (displayType) {
-  case DISPLAY_MENU:
-    break;
-
   case DISPLAY_PEER_LIST:
   case DISPLAY_INFO:
   case DISPLAY_FILE_LIST:
   case DISPLAY_TRACKER_LIST:
   case DISPLAY_CHUNKS_SEEN:
   case DISPLAY_TRANSFER_LIST:
     frame->initialize_column(2);
 
     m_uiArray[DISPLAY_MENU]->activate(frame->frame(0), !focusDisplay);
     m_uiArray[displayType]->activate(frame->frame(1), focusDisplay);
     break;
 
+  case DISPLAY_MENU:
   case DISPLAY_MAX_SIZE:
     break;
   }
 
   // Set title.
   switch (displayType) {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/download_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/download_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/download_list.cc	2006-08-07 23:48:35.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/download_list.cc	2006-08-24 21:49:08.000000000 +0800
@@ -316,16 +316,18 @@
 DownloadList::setup_keys() {
   m_bindings['\x7f']        = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_view_input), INPUT_LOAD_DEFAULT);
   m_bindings[KEY_BACKSPACE] = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_view_input), INPUT_LOAD_DEFAULT);
   m_bindings['\n']          = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_view_input), INPUT_LOAD_MODIFIED);
   m_bindings[KEY_ENTER]     = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_view_input), INPUT_LOAD_MODIFIED);
   m_bindings['\x0F']        = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_view_input), INPUT_CHANGE_DIRECTORY);
-  m_bindings['\x10']        = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_view_input), INPUT_COMMAND);
+  m_bindings['X' - '@']     = sigc::bind(sigc::mem_fun(*this, &DownloadList::receive_view_input), INPUT_COMMAND);
 
-  m_uiArray[DISPLAY_LOG]->bindings()[' ']                 = sigc::bind(sigc::mem_fun(*this, &DownloadList::activate_display), DISPLAY_DOWNLOAD_LIST);
-  m_uiArray[DISPLAY_LOG]->bindings()[KEY_LEFT]            = sigc::bind(sigc::mem_fun(*this, &DownloadList::activate_display), DISPLAY_DOWNLOAD_LIST);
+  m_uiArray[DISPLAY_LOG]->bindings()[KEY_LEFT] =
+    m_uiArray[DISPLAY_LOG]->bindings()['B' - '@'] =
+    m_uiArray[DISPLAY_LOG]->bindings()[' '] = sigc::bind(sigc::mem_fun(*this, &DownloadList::activate_display), DISPLAY_DOWNLOAD_LIST);
 
-  m_uiArray[DISPLAY_DOWNLOAD_LIST]->bindings()[KEY_RIGHT] = sigc::bind(sigc::mem_fun(*this, &DownloadList::activate_display), DISPLAY_DOWNLOAD);
+  m_uiArray[DISPLAY_DOWNLOAD_LIST]->bindings()[KEY_RIGHT] =
+    m_uiArray[DISPLAY_DOWNLOAD_LIST]->bindings()['F' - '@'] = sigc::bind(sigc::mem_fun(*this, &DownloadList::activate_display), DISPLAY_DOWNLOAD);
   m_uiArray[DISPLAY_DOWNLOAD_LIST]->bindings()['l']       = sigc::bind(sigc::mem_fun(*this, &DownloadList::activate_display), DISPLAY_LOG);
 }
 
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_chunks_seen.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_chunks_seen.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_chunks_seen.cc	2006-08-08 00:00:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_chunks_seen.cc	2006-08-24 21:42:02.000000000 +0800
@@ -49,13 +49,13 @@
 
 ElementChunksSeen::ElementChunksSeen(core::Download* d) :
   m_download(d),
   m_window(NULL),
   m_focus(0) {
 
-  m_bindings[KEY_LEFT] = sigc::mem_fun(&m_slotExit, &slot_type::operator());
+  m_bindings[KEY_LEFT] = m_bindings['B' - '@'] = sigc::mem_fun(&m_slotExit, &slot_type::operator());
 
   m_bindings[KEY_DOWN]  = sigc::mem_fun(*this, &ElementChunksSeen::receive_next);
   m_bindings[KEY_UP]    = sigc::mem_fun(*this, &ElementChunksSeen::receive_prev);
   m_bindings[KEY_NPAGE] = sigc::mem_fun(*this, &ElementChunksSeen::receive_pagenext);
   m_bindings[KEY_PPAGE] = sigc::mem_fun(*this, &ElementChunksSeen::receive_pageprev);
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_file_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_file_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_file_list.cc	2006-08-15 23:00:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_file_list.cc	2006-08-31 01:37:36.000000000 +0800
@@ -37,12 +37,13 @@
 #include "config.h"
 
 #include <torrent/exceptions.h>
 #include <torrent/file_list.h>
 
 #include "display/frame.h"
+#include "display/manager.h"
 #include "display/window_file_list.h"
 #include "input/manager.h"
 
 #include "control.h"
 #include "element_file_list.h"
 
@@ -50,21 +51,21 @@
 
 ElementFileList::ElementFileList(core::Download* d) :
   m_download(d),
   m_window(NULL),
   m_focus(0) {
 
-  m_bindings[KEY_LEFT] = sigc::mem_fun(&m_slotExit, &slot_type::operator());
+  m_bindings[KEY_LEFT] = m_bindings['B' - '@'] = sigc::mem_fun(&m_slotExit, &slot_type::operator());
 
   m_bindings[' '] = sigc::mem_fun(*this, &ElementFileList::receive_priority);
   m_bindings['*'] = sigc::mem_fun(*this, &ElementFileList::receive_change_all);
   m_bindings[KEY_NPAGE] = sigc::mem_fun(*this, &ElementFileList::receive_pagenext);
   m_bindings[KEY_PPAGE] = sigc::mem_fun(*this, &ElementFileList::receive_pageprev);
 
-  m_bindings[KEY_DOWN] = m_bindings['P' - '@'] = sigc::mem_fun(*this, &ElementFileList::receive_next);
-  m_bindings[KEY_UP]   = m_bindings['N' - '@'] = sigc::mem_fun(*this, &ElementFileList::receive_prev);
+  m_bindings[KEY_DOWN] = m_bindings['N' - '@'] = sigc::mem_fun(*this, &ElementFileList::receive_next);
+  m_bindings[KEY_UP]   = m_bindings['P' - '@'] = sigc::mem_fun(*this, &ElementFileList::receive_prev);
 }
 
 void
 ElementFileList::activate(display::Frame* frame, bool focus) {
   if (m_window != NULL)
     throw torrent::client_error("ui::ElementFileList::activate(...) is_active().");
@@ -74,12 +75,14 @@
 
   m_window = new WFileList(m_download, &m_focus);
   m_window->set_active(true);
 
   m_frame = frame;
   m_frame->initialize_window(m_window);
+
+//   control->display()->adjust_layout();
 }
 
 void
 ElementFileList::disable() {
   if (m_window == NULL)
     throw torrent::client_error("ui::ElementFileList::disable(...) !is_active().");
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_menu.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_menu.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_menu.cc	2006-08-16 06:42:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_menu.cc	2006-08-24 21:42:02.000000000 +0800
@@ -69,14 +69,14 @@
 
 ElementMenu::ElementMenu() :
   m_window(new WindowText(NULL, 2)),
   m_entry(entry_invalid) {
 
   // Move bindings into a function that defines default bindings.
-  m_bindings[KEY_LEFT]  = sigc::mem_fun(&m_slotExit, &slot_type::operator());  
-  m_bindings[KEY_RIGHT] = sigc::mem_fun(this, &ElementMenu::entry_select);
+  m_bindings[KEY_LEFT] = m_bindings['B' - '@']  = sigc::mem_fun(&m_slotExit, &slot_type::operator());  
+  m_bindings[KEY_RIGHT] = m_bindings['F' - '@'] = sigc::mem_fun(this, &ElementMenu::entry_select);
 
   m_bindings[KEY_UP]   = m_bindings['P' - '@'] = sigc::mem_fun(this, &ElementMenu::entry_prev);
   m_bindings[KEY_DOWN] = m_bindings['N' - '@'] = sigc::mem_fun(this, &ElementMenu::entry_next);
 }
 
 ElementMenu::~ElementMenu() {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_peer_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_peer_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_peer_list.cc	2006-08-15 23:00:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_peer_list.cc	2006-08-24 21:42:02.000000000 +0800
@@ -69,14 +69,14 @@
   m_elementInfo = create_info();
 
   m_elementInfo->slot_exit(sigc::bind(sigc::mem_fun(this, &ElementPeerList::activate_display), DISPLAY_LIST));
 
   m_bindings['k']       = sigc::mem_fun(this, &ElementPeerList::receive_disconnect_peer);
   m_bindings['*']       = sigc::mem_fun(this, &ElementPeerList::receive_snub_peer);
-  m_bindings[KEY_LEFT]  = sigc::mem_fun(&m_slotExit, &slot_type::operator());  
-  m_bindings[KEY_RIGHT] = sigc::bind(sigc::mem_fun(this, &ElementPeerList::activate_display), DISPLAY_INFO);
+  m_bindings[KEY_LEFT] = m_bindings['B' - '@']  = sigc::mem_fun(&m_slotExit, &slot_type::operator());  
+  m_bindings[KEY_RIGHT] = m_bindings['F' - '@'] = sigc::bind(sigc::mem_fun(this, &ElementPeerList::activate_display), DISPLAY_INFO);
 
   m_bindings[KEY_UP]   = m_bindings['P' - '@'] = sigc::mem_fun(this, &ElementPeerList::receive_prev);
   m_bindings[KEY_DOWN] = m_bindings['N' - '@'] = sigc::mem_fun(this, &ElementPeerList::receive_next);
 }
 
 ElementPeerList::~ElementPeerList() {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_text.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_text.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_text.cc	2006-08-12 05:49:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_text.cc	2006-08-24 21:42:01.000000000 +0800
@@ -51,17 +51,17 @@
 ElementText::ElementText(void *object) :
   m_window(new WindowText(object)),
   m_column(0),
   m_columnWidth(0) {
 
   // Move bindings into a function that defines default bindings.
-  m_bindings[KEY_LEFT] = sigc::mem_fun(&m_slotExit, &slot_type::operator());  
+  m_bindings[KEY_LEFT] = m_bindings['B' - '@'] = sigc::mem_fun(&m_slotExit, &slot_type::operator());  
 
 //   m_bindings[KEY_UP]    = sigc::mem_fun(this, &ElementText::entry_prev);
 //   m_bindings[KEY_DOWN]  = sigc::mem_fun(this, &ElementText::entry_next);
-//   m_bindings[KEY_RIGHT] = sigc::mem_fun(this, &ElementText::entry_select);
+//   m_bindings[KEY_RIGHT] = m_bindings['F' - '@'] = sigc::mem_fun(this, &ElementText::entry_select);
 }
 
 ElementText::~ElementText() {
   delete m_window;
 }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_tracker_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_tracker_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_tracker_list.cc	2006-08-15 23:01:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_tracker_list.cc	2006-08-24 21:50:14.000000000 +0800
@@ -51,19 +51,19 @@
 
 ElementTrackerList::ElementTrackerList(core::Download* d) :
   m_download(d),
   m_window(NULL),
   m_focus(0) {
 
-  m_bindings[KEY_LEFT] = sigc::mem_fun(&m_slotExit, &slot_type::operator());
+  m_bindings[KEY_LEFT] = m_bindings['B' - '@'] = sigc::mem_fun(&m_slotExit, &slot_type::operator());
 
   m_bindings[' ']      = sigc::mem_fun(*this, &ElementTrackerList::receive_cycle_group);
   m_bindings['*']      = sigc::mem_fun(*this, &ElementTrackerList::receive_disable);
 
-  m_bindings[KEY_DOWN] = m_bindings['P' - '@'] = sigc::mem_fun(*this, &ElementTrackerList::receive_next);
-  m_bindings[KEY_UP]   = m_bindings['N' - '@'] = sigc::mem_fun(*this, &ElementTrackerList::receive_prev);
+  m_bindings[KEY_DOWN] = m_bindings['N' - '@'] = sigc::mem_fun(*this, &ElementTrackerList::receive_next);
+  m_bindings[KEY_UP]   = m_bindings['P' - '@'] = sigc::mem_fun(*this, &ElementTrackerList::receive_prev);
 }
 
 void
 ElementTrackerList::activate(display::Frame* frame, bool focus) {
   if (m_window != NULL)
     throw torrent::client_error("ui::ElementTrackerList::activate(...) is_active().");
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_transfer_list.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_transfer_list.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/element_transfer_list.cc	2006-08-08 00:00:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/element_transfer_list.cc	2006-08-24 21:42:02.000000000 +0800
@@ -49,13 +49,13 @@
 
 ElementTransferList::ElementTransferList(core::Download* d) :
   m_download(d),
   m_window(NULL),
   m_focus(0) {
 
-  m_bindings[KEY_LEFT] = sigc::mem_fun(&m_slotExit, &slot_type::operator());
+  m_bindings[KEY_LEFT] = m_bindings['B' - '@'] = sigc::mem_fun(&m_slotExit, &slot_type::operator());
 
   m_bindings[KEY_DOWN]  = sigc::mem_fun(*this, &ElementTransferList::receive_next);
   m_bindings[KEY_UP]    = sigc::mem_fun(*this, &ElementTransferList::receive_prev);
   m_bindings[KEY_NPAGE] = sigc::mem_fun(*this, &ElementTransferList::receive_pagenext);
   m_bindings[KEY_PPAGE] = sigc::mem_fun(*this, &ElementTransferList::receive_pageprev);
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/root.cc /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/root.cc
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.1/src/ui/root.cc	2006-08-05 06:00:37.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rtorrent/repos/rtorrent-0.6.2/src/ui/root.cc	2006-08-28 05:19:07.000000000 +0800
@@ -126,12 +126,18 @@
   if (strcasecmp(control->variable()->get_string("key_layout").c_str(), "azerty") == 0) {
     m_bindings['q']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_up_throttle), 1);
     m_bindings['w']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_up_throttle), -1);
     m_bindings['Q']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_down_throttle), 1);
     m_bindings['W']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_down_throttle), -1);
 
+  } else if (strcasecmp(control->variable()->get_string("key_layout").c_str(), "qwertz") == 0) {
+    m_bindings['a']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_up_throttle), 1);
+    m_bindings['y']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_up_throttle), -1);
+    m_bindings['A']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_down_throttle), 1);
+    m_bindings['Y']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_down_throttle), -1);
+
   } else {
     m_bindings['a']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_up_throttle), 1);
     m_bindings['z']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_up_throttle), -1);
     m_bindings['A']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_down_throttle), 1);
     m_bindings['Z']           = sigc::bind(sigc::mem_fun(*this, &Root::adjust_down_throttle), -1);
   }
