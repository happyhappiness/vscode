die("expected commit for %s, got %s",
			    oid_to_hex(&commit->object.oid), typename(type));