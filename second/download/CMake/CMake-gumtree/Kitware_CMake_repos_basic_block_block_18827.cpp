(initsize <= 0)
    bufsize = 4096;
  else
    bufsize = (size_t) initsize