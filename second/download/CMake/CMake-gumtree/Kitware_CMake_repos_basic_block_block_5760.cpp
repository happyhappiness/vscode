{
          negotiate(conn);
          tn->already_negotiated = 1;
        }