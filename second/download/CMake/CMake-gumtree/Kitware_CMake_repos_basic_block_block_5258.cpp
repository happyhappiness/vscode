f(pending_ms <= 0) {
        r = 0;  /* Simulate a "call timed out" case */
        break;
      }