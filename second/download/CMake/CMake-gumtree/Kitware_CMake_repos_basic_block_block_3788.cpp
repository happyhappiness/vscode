f(!c->filename)
      goto fail;