flags = r | O_NONBLOCK