f(pipe_broke)
      data->state.pipe_broke = TRUE