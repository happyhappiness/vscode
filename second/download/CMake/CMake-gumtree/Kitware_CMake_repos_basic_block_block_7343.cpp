r(p3 = str; *p3; p3++) {
        if(l < n)
          buf[l] = *p3;
        l++;
      }