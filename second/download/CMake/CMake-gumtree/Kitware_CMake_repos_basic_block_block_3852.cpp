f(!hoststr) {
    free(buf);
    return NULL;
  }