f((int) fread(buf, size, 1, fp) != 1)
      break;