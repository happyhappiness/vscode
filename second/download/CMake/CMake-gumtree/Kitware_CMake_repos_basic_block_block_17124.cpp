(n == 0)
				shar->end_of_line = 1;
			else
				*buf++ = 'X'