dlen = snprintf(dbuf,sizeof(dbuf),"%.17g",d);