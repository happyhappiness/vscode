snprintf(buf,sizeof(buf),"%.17g",d);