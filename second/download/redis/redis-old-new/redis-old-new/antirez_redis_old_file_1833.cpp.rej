--- /dev/null
+++ /dev/null
@@ -891,28 +879,9 @@
 }
 
 void brpoplpushCommand(redisClient *c) {
-    time_t timeout;
+    c->bstate.target = c->argv[2];
+    c->argv[2] = c->argv[3];
+    c->argc--;
 
-    if (checkTimeout(c, c->argv[3], &timeout) != REDIS_OK) {
-        return;
-    }
-
-    robj *key = lookupKeyWrite(c->db, c->argv[1]);
-
-
-    if (key == NULL) {
-        // block
-        if (c->flags & REDIS_MULTI) {
-            addReply(c,shared.nullmultibulk);
-        } else {
-            if (timeout > 0) timeout += time(NULL);
-            blockForKeys(c, c->argv + 1, 1, timeout, c->argv[2]);
-        }
-    } else if (key->type != REDIS_LIST) {
-        addReply(c, shared.wrongtypeerr);
-    } else {
-        // The list exists and has elements.
-        redisAssert(listTypeLength(key) > 0);
-        rpoplpushCommand(c);
-    }
+    blockingPopGenericCommand(c,REDIS_TAIL);
 
