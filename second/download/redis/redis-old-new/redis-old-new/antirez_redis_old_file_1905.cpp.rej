--- /dev/null
+++ /dev/null
@@ -505,20 +498,19 @@
 
     if (config.auth != NULL) {
         char *authargv[2];
-        int dbnum = config.dbnum;
 
-        /* We need to save the real configured database number and set it to
-         * zero here, otherwise cliSendCommand() will try to perform the
-         * SELECT command before the authentication, and it will fail. */
-        config.dbnum = 0;
         authargv[0] = "AUTH";
         authargv[1] = config.auth;
         cliSendCommand(2, convertToSds(2, authargv), 1);
-        config.dbnum = dbnum; /* restore the right DB number */
     }
 
-    /* Start interactive mode when no command is provided */
-    if (argc == 0) repl();
-    /* Otherwise, we have some arguments to execute */
-    return noninteractive(argc,convertToSds(argc,argv));
+    if (argc == 0 || config.interactive == 1) repl();
+
+    argvcopy = convertToSds(argc+1, argv);
+    if (config.argn_from_stdin) {
+        sds lastarg = readArgFromStdin();
+        argvcopy[argc] = lastarg;
+        argc++;
+    }
+    return cliSendCommand(argc, argvcopy, config.repeat);
 
