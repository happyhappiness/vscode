diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/ChangeLog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/ChangeLog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/ChangeLog	2006-02-04 17:56:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/ChangeLog	2006-02-23 00:24:43.000000000 +0800
@@ -1,6 +1,13 @@
+2006-02-18, Version 3.7.2
+	* A simple bug in the `battery' plugin has been fixed. It should now
+	  work with ACPI based batteries as well. Thankt to Sebastian for
+	  fixing this.
+	* Fixing a bug that prevented collectd to be built without librrd.
+	  Thanks to Werner Heuser for reporting it.
+
 2006-02-04, Version 3.7.1
 	* The new network code has been improved to build with older versions
 	  of glibc.
 	* Fix in `libping' sets the ICMP sequence on outgoing packets. Thanks
 	  to Tommie Gannert for this patch.
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/collectd.spec /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/collectd.spec
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/collectd.spec	2006-02-04 17:56:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/collectd.spec	2006-02-23 00:24:43.000000000 +0800
@@ -1,9 +1,9 @@
 Summary:	Statistics collection daemon for filling RRD files.
 Name:           collectd
-Version:	3.7.1
+Version:	3.7.2
 Release:	1
 Source:		http://verplant.org/collectd/%{name}-%{version}.tar.gz
 License:	GPL
 Group:		System Environment/Daemons
 BuildRoot:	%{_tmppath}/%{name}-%{version}-root
 BuildPrereq:	lm_sensors-devel, mysqlclient10-devel | mysql-devel, rrdtool-devel
@@ -73,23 +73,28 @@
 %attr(0444,root,root) %{_libdir}/%{name}/memory.so*
 %attr(0444,root,root) %{_libdir}/%{name}/nfs.so*
 %attr(0444,root,root) %{_libdir}/%{name}/ping.so*
 %attr(0444,root,root) %{_libdir}/%{name}/processes.so*
 %attr(0444,root,root) %{_libdir}/%{name}/serial.so*
 %attr(0444,root,root) %{_libdir}/%{name}/swap.so*
+%attr(0444,root,root) %{_libdir}/%{name}/tape.so*
 %attr(0444,root,root) %{_libdir}/%{name}/traffic.so*
 %attr(0444,root,root) %{_libdir}/%{name}/users.so*
 %dir /var/lib/collectd
 
 %files mysql
 %attr(0444,root,root) %{_libdir}/%{name}/mysql.so*
 
 %files sensors
 %attr(0444,root,root) %{_libdir}/%{name}/sensors.so*
 
 %changelog
+* Sat Feb 18 2006 Florian octo Forster <octo@verplant.org> 3.7.2-1
+- Include `tape.so' so the build doesn't terminate because of missing files..
+- New upstream version
+
 * Sat Feb 04 2006 Florian octo Forster <octo@verplant.org> 3.7.1-1
 - New upstream version
 
 * Mon Jan 30 2006 Florian octo Forster <octo@verplant.org> 3.7.0-1
 - New upstream version
 - Removed the extra `hddtemp' package
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/configure	2006-02-04 17:56:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/configure	2006-02-23 00:24:43.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.59 for collectd 3.7.1.
+# Generated by GNU Autoconf 2.59 for collectd 3.7.2.
 #
 # Copyright (C) 2003 Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
 ## --------------------- ##
 ## M4sh Initialization.  ##
@@ -418,14 +418,14 @@
 # only ac_max_sed_lines should be used.
 : ${ac_max_here_lines=38}
 
 # Identity of this package.
 PACKAGE_NAME='collectd'
 PACKAGE_TARNAME='collectd'
-PACKAGE_VERSION='3.7.1'
-PACKAGE_STRING='collectd 3.7.1'
+PACKAGE_VERSION='3.7.2'
+PACKAGE_STRING='collectd 3.7.2'
 PACKAGE_BUGREPORT=''
 
 ac_unique_file="src/collectd.c"
 ac_default_prefix="/opt/collectd"
 # Factoring default headers for most tests.
 ac_includes_default="\
@@ -951,13 +951,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures collectd 3.7.1 to adapt to many kinds of systems.
+\`configure' configures collectd 3.7.2 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -1017,13 +1017,13 @@
   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of collectd 3.7.1:";;
+     short | recursive ) echo "Configuration of collectd 3.7.2:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
@@ -1192,13 +1192,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit 0
 if $ac_init_version; then
   cat <<\_ACEOF
-collectd configure 3.7.1
+collectd configure 3.7.2
 generated by GNU Autoconf 2.59
 
 Copyright (C) 2003 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
@@ -1206,13 +1206,13 @@
 fi
 exec 5>config.log
 cat >&5 <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by collectd $as_me 3.7.1, which was
+It was created by collectd $as_me 3.7.2, which was
 generated by GNU Autoconf 2.59.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 {
@@ -1852,13 +1852,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='collectd'
- VERSION='3.7.1'
+ VERSION='3.7.2'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -30413,13 +30413,13 @@
   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
 ## Running $as_me. ##
 _ASBOX
 } >&5
 cat >&5 <<_CSEOF
 
-This file was extended by collectd $as_me 3.7.1, which was
+This file was extended by collectd $as_me 3.7.2, which was
 generated by GNU Autoconf 2.59.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -30476,13 +30476,13 @@
 
 Report bugs to <bug-autoconf@gnu.org>."
 _ACEOF
 
 cat >>$CONFIG_STATUS <<_ACEOF
 ac_cs_version="\\
-collectd config.status 3.7.1
+collectd config.status 3.7.2
 configured by $0, generated by GNU Autoconf 2.59,
   with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright (C) 2003 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/configure.in	2006-02-04 17:56:12.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/configure.in	2006-02-23 00:24:43.000000000 +0800
@@ -1,8 +1,8 @@
 dnl Process this file with autoconf to produce a configure script.
-AC_INIT(collectd, 3.7.1)
+AC_INIT(collectd, 3.7.2)
 AC_CONFIG_SRCDIR(src/collectd.c)
 AC_CONFIG_HEADERS(src/config.h)
 AM_INIT_AUTOMAKE(dist-bzip2)
 AC_LANG(C)
 
 AC_PREFIX_DEFAULT("/opt/collectd")
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/debian/changelog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/debian/changelog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/debian/changelog	2006-02-04 17:56:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/debian/changelog	2006-02-23 00:24:44.000000000 +0800
@@ -1,11 +1,17 @@
+collectd (3.7.2-1) unstable; urgency=low
+
+  * New upstream version
+
+ -- Florian Forster <octo@verplant.org>  Sat, 18 Feb 2006 12:36:09 +0200
+
 collectd (3.7.1-1) unstable; urgency=low
 
   * New upstream version
 
- -- Florian Forster <octo@verplant.org>  Sat, 02 Feb 2006 10:44:05 +0200
+ -- Florian Forster <octo@verplant.org>  Sat, 04 Feb 2006 10:44:05 +0200
 
 collectd (3.7.0-1) unstable; urgency=low
 
   * New upstream version
   * Removed package `collectd-hddtemp'
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/src/battery.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/src/battery.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/src/battery.c	2006-02-04 17:56:14.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/src/battery.c	2006-02-23 00:24:44.000000000 +0800
@@ -275,35 +275,35 @@
 			 * [11:00] <@tokkee> capacity state:          ok
 			 * [11:00] <@tokkee> charging state:          charging
 			 * [11:00] <@tokkee> present rate:            1724 mA
 			 * [11:00] <@tokkee> remaining capacity:      4136 mAh
 			 * [11:00] <@tokkee> present voltage:         12428 mV
 			 */
-			while (fgets (buffer, BUFSIZE, fh) == NULL)
+			while (fgets (buffer, BUFSIZE, fh) != NULL)
 			{
 				numfields = strsplit (buffer, fields, 8);
 
 				if (numfields < 3)
 					continue;
 
-				if ((strcmp (fields[0], "present"))
-						&& (strcmp (fields[1], "rate:")))
+				if ((strcmp (fields[0], "present") == 0)
+						&& (strcmp (fields[1], "rate:") == 0))
 					valptr = &current;
-				else if ((strcmp (fields[0], "remaining"))
-						&& (strcmp (fields[1], "capacity:")))
+				else if ((strcmp (fields[0], "remaining") == 0)
+						&& (strcmp (fields[1], "capacity:") == 0))
 					valptr = &charge;
-				else if ((strcmp (fields[0], "present"))
-						&& (strcmp (fields[1], "voltage:")))
+				else if ((strcmp (fields[0], "present") == 0)
+						&& (strcmp (fields[1], "voltage:") == 0))
 					valptr = &voltage;
 				else
 					valptr = NULL;
 
-				if ((strcmp (fields[0], "charging"))
-						&& (strcmp (fields[1], "state:")))
+				if ((strcmp (fields[0], "charging") == 0)
+						&& (strcmp (fields[1], "state:") == 0))
 				{
-					if (strcmp (fields[2], "charging"))
+					if (strcmp (fields[2], "charging") == 0)
 						charging = 1;
 					else
 						charging = 0;
 				}
 
 				if (valptr != NULL)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/src/collectd.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/src/collectd.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/src/collectd.1	2006-02-04 17:56:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/src/collectd.1	2006-02-23 00:24:45.000000000 +0800
@@ -1,7 +1,7 @@
-.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.3
+.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
 .\"
 .\" Standard preamble:
 .\" ========================================================================
 .de Sh \" Subsection heading
 .br
 .if t .Sp
@@ -126,13 +126,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD 1"
-.TH COLLECTD 1 "2006-01-29" "3.7.alpha2" "collectd"
+.TH COLLECTD 1 "2006-02-18" "3.7.2" "collectd"
 .SH "NAME"
 collectd \- System statistics collection daemon
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 collectd \fI[options]\fR
 .SH "DESCRIPTION"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/src/collectd.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/src/collectd.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/src/collectd.h	2006-02-04 17:56:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/src/collectd.h	2006-02-23 00:24:45.000000000 +0800
@@ -197,11 +197,14 @@
 
 #define MODE_SERVER 0x01
 #define MODE_CLIENT 0x02
 #define MODE_LOCAL  0x04
 
 extern time_t curtime;
+
+#ifdef HAVE_LIBRRD
 extern int operating_mode;
+#endif
 
 /* int main (int argc, char **argv); */
 
 #endif /* COLLECTD_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/src/traffic.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/src/traffic.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.1/src/traffic.c	2006-02-04 17:56:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-3.7.2/src/traffic.c	2006-02-23 00:24:45.000000000 +0800
@@ -52,13 +52,12 @@
 #endif /* HAVE_LIBKSTAT */
 
 static void traffic_init (void)
 {
 #ifdef HAVE_LIBKSTAT
 	kstat_t *ksp_chain;
-	kstat_named_t *kn;
 	unsigned long long val;
 
 	numif = 0;
 
 	if (kc == NULL)
 		return;
