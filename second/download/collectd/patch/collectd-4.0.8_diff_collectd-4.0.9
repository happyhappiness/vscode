diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/ChangeLog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/ChangeLog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/ChangeLog	2007-09-12 18:31:35.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/ChangeLog	2007-09-28 22:24:13.000000000 +0800
@@ -1,6 +1,12 @@
+2007-09-28, Version 4.0.9
+	* apcups plugin: Fix reporting of the `load percent' data.
+	* wireless plugin: Correct the handling of cards returning signal and
+	  noise quality as percentage.
+	* perl plugin: Fix a possible buffer overflow in get_module_name().
+
 2007-09-12, Version 4.0.8
 	* collectd: The `sstrerror' function was improved to work correctly
 	  with the broken GNU version of `strerror_r'.
 	* collectd: Write an error message to STDERR when loading of a plugin
 	  fails.
 	* apcups plugin: Fix the `types' used to submit the values: They still
@@ -100,12 +106,16 @@
 	* apache plugin: Support for lighttpd's `BusyServers' (aka.
 	  connections) field was added by Florent Monbillard.
 	* collectd-nagios: The new `collectd-nagios' binary queries values
 	  from collectd, parses them and exits according to Nagios-standards.
 	* manpages: The manpages have been improved a lot.
 
+2007-09-28, Version 3.11.7
+	* wireless plugin: Correct the handling of cards returning signal and
+	  noise quality as percentage.
+
 2007-08-31, Version 3.11.6
 	* processes plugin: Fix a potential segmentation fault.
 
 2007-05-29, Version 3.11.5
 	* configure: Added `AC_SYS_LARGEFILE' for LFS.
 	* ntpd plugin: Fix a potential buffer overflow.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/configure	2007-09-12 18:32:10.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/configure	2007-09-28 22:24:55.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.61 for collectd 4.0.8.
+# Generated by GNU Autoconf 2.61 for collectd 4.0.9.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
 ## --------------------- ##
@@ -723,14 +723,14 @@
 MAKEFLAGS=
 SHELL=${CONFIG_SHELL-/bin/sh}
 
 # Identity of this package.
 PACKAGE_NAME='collectd'
 PACKAGE_TARNAME='collectd'
-PACKAGE_VERSION='4.0.8'
-PACKAGE_STRING='collectd 4.0.8'
+PACKAGE_VERSION='4.0.9'
+PACKAGE_STRING='collectd 4.0.9'
 PACKAGE_BUGREPORT=''
 
 ac_unique_file="src/collectd.c"
 ac_default_prefix="/opt/collectd"
 # Factoring default headers for most tests.
 ac_includes_default="\
@@ -1530,13 +1530,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures collectd 4.0.8 to adapt to many kinds of systems.
+\`configure' configures collectd 4.0.9 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -1600,13 +1600,13 @@
   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of collectd 4.0.8:";;
+     short | recursive ) echo "Configuration of collectd 4.0.9:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
@@ -1777,13 +1777,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-collectd configure 4.0.8
+collectd configure 4.0.9
 generated by GNU Autoconf 2.61
 
 Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
@@ -1791,13 +1791,13 @@
   exit
 fi
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by collectd $as_me 4.0.8, which was
+It was created by collectd $as_me 4.0.9, which was
 generated by GNU Autoconf 2.61.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 exec 5>>config.log
@@ -2464,13 +2464,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='collectd'
- VERSION='4.0.8'
+ VERSION='4.0.9'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -44988,13 +44988,13 @@
 exec 6>&1
 
 # Save the log message, to keep $[0] and so on meaningful, and to
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by collectd $as_me 4.0.8, which was
+This file was extended by collectd $as_me 4.0.9, which was
 generated by GNU Autoconf 2.61.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -45041,13 +45041,13 @@
 
 Report bugs to <bug-autoconf@gnu.org>."
 
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF
 ac_cs_version="\\
-collectd config.status 4.0.8
+collectd config.status 4.0.9
 configured by $0, generated by GNU Autoconf 2.61,
   with options \\"`echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright (C) 2006 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/configure.in	2007-09-12 18:31:35.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/configure.in	2007-09-28 22:24:18.000000000 +0800
@@ -1,8 +1,8 @@
 dnl Process this file with autoconf to produce a configure script.
-AC_INIT(collectd, 4.0.8)
+AC_INIT(collectd, 4.0.9)
 AC_CONFIG_SRCDIR(src/collectd.c)
 AC_CONFIG_HEADERS(src/config.h)
 AM_INIT_AUTOMAKE(dist-bzip2)
 AC_LANG(C)
 
 AC_PREFIX_DEFAULT("/opt/collectd")
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/contrib/collection.cgi /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/contrib/collection.cgi
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/contrib/collection.cgi	2007-09-12 18:31:35.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/contrib/collection.cgi	2007-09-28 21:45:29.000000000 +0800
@@ -941,52 +941,40 @@
     "LINE1:avg#$FullBlue:Bits/s",
     'GPRINT:min:MIN:%5.1lf%s Min,',
     'GPRINT:avg:AVERAGE:%5.1lf%s Average,',
     'GPRINT:max:MAX:%5.1lf%s Max,',
     'GPRINT:avg:LAST:%5.1lf%s Last\l'
     ],
-    charge => [
-    'DEF:avg={file}:charge:AVERAGE',
-    'DEF:min={file}:charge:MIN',
-    'DEF:max={file}:charge:MAX',
+    charge => ['-v', 'Ah',
+    'DEF:avg={file}:value:AVERAGE',
+    'DEF:min={file}:value:MIN',
+    'DEF:max={file}:value:MAX',
     "AREA:max#$HalfBlue",
     "AREA:min#$Canvas",
     "LINE1:avg#$FullBlue:Charge",
     'GPRINT:min:MIN:%5.1lf%sAh Min,',
     'GPRINT:avg:AVERAGE:%5.1lf%sAh Avg,',
     'GPRINT:max:MAX:%5.1lf%sAh Max,',
     'GPRINT:avg:LAST:%5.1lf%sAh Last\l'
     ],
-    charge_percent => [
-    'DEF:avg={file}:percent:AVERAGE',
-    'DEF:min={file}:percent:MIN',
-    'DEF:max={file}:percent:MAX',
-    "AREA:max#$HalfBlue",
-    "AREA:min#$Canvas",
-    "LINE1:avg#$FullBlue:Charge",
-    'GPRINT:min:MIN:%5.1lf%s%% Min,',
-    'GPRINT:avg:AVERAGE:%5.1lf%s%% Avg,',
-    'GPRINT:max:MAX:%5.1lf%s%% Max,',
-    'GPRINT:avg:LAST:%5.1lf%s%% Last\l'
-    ],
     cpu => ['-v', 'CPU load',
     'DEF:avg={file}:value:AVERAGE',
     'DEF:min={file}:value:MIN',
     'DEF:max={file}:value:MAX',
     "AREA:max#$HalfBlue",
     "AREA:min#$Canvas",
     "LINE1:avg#$FullBlue:Percent",
     'GPRINT:min:MIN:%6.2lf%% Min,',
     'GPRINT:avg:AVERAGE:%6.2lf%% Avg,',
     'GPRINT:max:MAX:%6.2lf%% Max,',
     'GPRINT:avg:LAST:%6.2lf%% Last\l'
     ],
-    current => [
-    'DEF:avg={file}:current:AVERAGE',
-    'DEF:min={file}:current:MIN',
-    'DEF:max={file}:current:MAX',
+    current => ['-v', 'Ampere',
+    'DEF:avg={file}:value:AVERAGE',
+    'DEF:min={file}:value:MIN',
+    'DEF:max={file}:value:MAX',
     "AREA:max#$HalfBlue",
     "AREA:min#$Canvas",
     "LINE1:avg#$FullBlue:Current",
     'GPRINT:min:MIN:%5.1lf%sA Min,',
     'GPRINT:avg:AVERAGE:%5.1lf%sA Avg,',
     'GPRINT:max:MAX:%5.1lf%sA Max,',
@@ -2514,13 +2502,13 @@
   my $sources = [];
 
   $opts->{'title'} = "$host/$plugin"
   . (defined ($plugin_instance) ? "-$plugin_instance" : '') . "/$type";
   $opts->{'number_format'} = '%5.1lf%s';
 
-  $opts->{'rrd_opts'} = ['-b', '1024'];
+  $opts->{'rrd_opts'} = ['-b', '1024', '-v', 'Bytes'];
 
   my @files = ();
 
   $opts->{'colors'} =
   {
     'free'     => '00e000',
@@ -2774,16 +2762,16 @@
   $opts->{'number_format'} = '%5.1lf%s';
 
   my @files = ();
 
   $opts->{'colors'} =
   {
-    'Free'   => '00e000',
-    'Cached'  => '0000ff',
-    'Reserved'      => 'ffb000',
-    'Used'   => 'ff0000'
+    'Free'     => '00e000',
+    'Cached'   => '0000ff',
+    'Reserved' => 'ffb000',
+    'Used'     => 'ff0000'
   };
 
   _custom_sort_arrayref ($type_instances,
     [qw(free cached reserved used)]);
 
   for (@$type_instances)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/contrib/PerlLib/Collectd.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/contrib/PerlLib/Collectd.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/contrib/PerlLib/Collectd.pm	2007-09-12 20:43:19.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/contrib/PerlLib/Collectd.pm	2007-09-28 22:24:13.000000000 +0800
@@ -41,12 +41,12 @@
 	push @{$EXPORT_TAGS{'all'}}, grep {! $seen{$_}++ } @{$EXPORT_TAGS{$_}}
 		foreach keys %EXPORT_TAGS;
 }
 
 Exporter::export_ok_tags('all');
 
-bootstrap Collectd "4.0.8";
+bootstrap Collectd "4.0.9";
 
 1;
 
 # vim: set sw=4 ts=4 tw=78 noexpandtab :
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/apcups.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/apcups.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/apcups.c	2007-09-12 18:31:35.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/apcups.c	2007-09-28 22:24:13.000000000 +0800
@@ -388,13 +388,13 @@
 static void apc_submit (struct apc_detail_s *apcups_detail)
 {
 	apc_submit_generic ("voltage",    "input",   apcups_detail->linev);
 	apc_submit_generic ("voltage",    "output",  apcups_detail->outputv);
 	apc_submit_generic ("voltage",    "battery", apcups_detail->battv);
 	apc_submit_generic ("charge",     "",        apcups_detail->bcharge);
-	apc_submit_generic ("percent",    "charge",  apcups_detail->loadpct);
+	apc_submit_generic ("percent",    "load",    apcups_detail->loadpct);
 	apc_submit_generic ("timeleft",   "",        apcups_detail->timeleft);
 	apc_submit_generic ("temperature", "",       apcups_detail->itemp);
 	apc_submit_generic ("frequency",  "input",   apcups_detail->linefreq);
 }
 
 static int apcups_read (void)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd.1	2007-09-12 20:33:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd.1	2007-09-28 22:29:20.000000000 +0800
@@ -126,13 +126,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD 1"
-.TH COLLECTD 1 "2007-09-12" "4.0.8" "collectd"
+.TH COLLECTD 1 "2007-09-28" "4.0.9" "collectd"
 .SH "NAME"
 collectd \- System statistics collection daemon
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 collectd \fI[options]\fR
 .SH "DESCRIPTION"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd.conf.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd.conf.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd.conf.5	2007-09-12 20:33:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd.conf.5	2007-09-28 22:29:20.000000000 +0800
@@ -126,13 +126,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD.CONF 5"
-.TH COLLECTD.CONF 5 "2007-09-12" "4.0.8" "collectd"
+.TH COLLECTD.CONF 5 "2007-09-28" "4.0.9" "collectd"
 .SH "NAME"
 collectd.conf \- Configuration for the system statistics collection daemon \fBcollectd\fR
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 .Vb 3
 \&  BaseDir "/path/to/data/"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-email.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-email.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-email.5	2007-09-12 20:33:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-email.5	2007-09-28 19:45:33.000000000 +0800
@@ -126,13 +126,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EMAIL 5"
-.TH COLLECTD-EMAIL 5 "2007-08-31" "4.0.8" "collectd"
+.TH COLLECTD-EMAIL 5 "2007-09-28" "4.0.8" "collectd"
 .SH "NAME"
 collectd\-email \- Documentation of collectd's \f(CW\*(C`email plugin\*(C'\fR
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 .Vb 8
 \&  # See collectd.conf(5)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-exec.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-exec.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-exec.5	2007-09-12 20:33:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-exec.5	2007-09-28 22:29:20.000000000 +0800
@@ -126,13 +126,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EXEC 5"
-.TH COLLECTD-EXEC 5 "2007-09-12" "4.0.8" "collectd"
+.TH COLLECTD-EXEC 5 "2007-09-28" "4.0.9" "collectd"
 .SH "NAME"
 collectd\-exec \- Documentation of collectd's \f(CW\*(C`exec plugin\*(C'\fR
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 .Vb 7
 \&  # See collectd.conf(5)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-nagios.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-nagios.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-nagios.1	2007-09-12 20:33:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-nagios.1	2007-09-28 19:45:32.000000000 +0800
@@ -126,13 +126,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-NAGIOS 1"
-.TH COLLECTD-NAGIOS 1 "2007-09-02" "4.0.8" "collectd"
+.TH COLLECTD-NAGIOS 1 "2007-09-28" "4.0.8" "collectd"
 .SH "NAME"
 collectd\-nagios \- Nagios plugin for querying collectd
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 collectd-nagios \fB\-s\fR \fIsocket\fR \fB\-n\fR \fIvalue_spec\fR \fB\-H\fR \fIhostname\fR \fI[options]\fR
 .SH "DESCRIPTION"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-perl.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-perl.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-perl.5	2007-09-12 20:33:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-perl.5	2007-09-28 19:45:33.000000000 +0800
@@ -126,13 +126,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-PERL 5"
-.TH COLLECTD-PERL 5 "2007-09-02" "4.0.8" "collectd"
+.TH COLLECTD-PERL 5 "2007-09-28" "4.0.8" "collectd"
 .SH "NAME"
 collectd\-perl \- Documentation of collectd's \f(CW\*(C`perl plugin\*(C'\fR
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 .Vb 8
 \&  # See collectd.conf(5)
@@ -162,13 +162,13 @@
 A data-set is a list of one or more data\-sources. Each data-source defines a
 name, type, min\- and max-value and the data-set wraps them up into one
 structure. The general layout looks like this:
 .Sp
 .Vb 6
 \&  [{
-\&    name => 'data_source_name',
+\&    name => \(aqdata_source_name\(aq,
 \&    type => DS_TYPE_COUNTER || DS_TYPE_GAUGE
 \&    min  => value || undef,
 \&    max  => value || undef
 \&  }, ...]
 .Ve
 .IP "Value-List" 4
@@ -180,16 +180,16 @@
 this:
 .Sp
 .Vb 8
 \&  {
 \&    values => [123, 0.5],
 \&    time   => time (),
-\&    host   => 'localhost',
-\&    plugin => 'myplugin',
-\&    plugin_instance => '',
-\&    type_instance   => ''
+\&    host   => \(aqlocalhost\(aq,
+\&    plugin => \(aqmyplugin\(aq,
+\&    plugin_instance => \(aq\(aq,
+\&    type_instance   => \(aq\(aq
 \&  }
 .Ve
 .SH "METHODS"
 .IX Header "METHODS"
 The following functions provide the C\-interface to Perl\-modules. They are
 automatically exported into the module's namespace. You don't need to \f(CW\*(C`use\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-unixsock.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-unixsock.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/collectd-unixsock.5	2007-09-12 20:33:27.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/collectd-unixsock.5	2007-09-28 22:29:20.000000000 +0800
@@ -126,13 +126,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-UNIXSOCK 5"
-.TH COLLECTD-UNIXSOCK 5 "2007-09-12" "4.0.8" "collectd"
+.TH COLLECTD-UNIXSOCK 5 "2007-09-28" "4.0.9" "collectd"
 .SH "NAME"
 collectd\-unixsock \- Documentation of collectd's \f(CW\*(C`unixsock plugin\*(C'\fR
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 .Vb 8
 \&  # See collectd.conf(5)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/perl.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/perl.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/perl.c	2007-09-03 00:06:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/perl.c	2007-09-28 19:38:23.000000000 +0800
@@ -330,13 +330,13 @@
 	if (base_name[0] == '\0')
 		status = snprintf (buf, buf_len, "%s", module);
 	else
 		status = snprintf (buf, buf_len, "%s::%s", base_name, module);
 	if ((status < 0) || (status >= buf_len))
 		return (NULL);
-	buf[buf_len] = '\0';
+	buf[buf_len - 1] = '\0';
 	return (buf);
 } /* char *get_module_name */
 
 /*
  * Add a new plugin with the given name.
  */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/wireless.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/wireless.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.8/src/wireless.c	2007-09-12 18:31:31.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.0.9/src/wireless.c	2007-09-28 22:24:13.000000000 +0800
@@ -64,12 +64,21 @@
 	strncpy (vl.plugin_instance, plugin_instance,
 			sizeof (vl.plugin_instance));
 
 	plugin_dispatch_values (type, &vl);
 } /* void wireless_submit */
 
+#define POWER_MIN -90.0
+#define POWER_MAX -50.0
+static double wireless_percent_to_power (double quality)
+{
+	assert ((quality >= 0.0) && (quality <= 100.0));
+
+	return ((quality * (POWER_MAX - POWER_MIN)) + POWER_MIN);
+} /* double wireless_percent_to_power */
+
 static int wireless_read (void)
 {
 #ifdef KERNEL_LINUX
 	FILE *fh;
 	char buffer[1024];
 
@@ -93,12 +102,14 @@
 		return (-1);
 	}
 
 	devices_found = 0;
 	while (fgets (buffer, sizeof (buffer), fh) != NULL)
 	{
+		char *endptr;
+
 		numfields = strsplit (buffer, fields, 8);
 
 		if (numfields < 5)
 			continue;
 
 		len = strlen (fields[0]) - 1;
@@ -106,25 +117,34 @@
 			continue;
 		if (fields[0][len] != ':')
 			continue;
 		fields[0][len] = '\0';
 
 		device  = fields[0];
-		quality = atof (fields[2]);
-		power   = atof (fields[3]);
-		noise   = atof (fields[4]);
-
-		/* Fill in invalid values when conversion failed.. */
-		if (quality == 0.0)
-			quality = -1.0; /* quality >= 0 */
-
-		if (power == 0.0)
-			power = 1.0; /* power <= 0 */
 
-		if (noise == 0.0)
-			noise = 1.0; /* noise <= 0 */
+		quality = strtod (fields[2], &endptr);
+		if (fields[2] == endptr)
+			quality = -1.0; /* invalid */
+
+		/* power [dBm] < 0.0 */
+		power = strtod (fields[3], &endptr);
+		if (fields[3] == endptr)
+			power = 1.0; /* invalid */
+		else if ((power >= 0.0) && (power <= 100.0))
+			power = wireless_percent_to_power (power);
+		else if (power > 100.0)
+			power = 1.0; /* invalid */
+
+		/* noise [dBm] < 0.0 */
+		noise = strtod (fields[3], &endptr);
+		if (fields[3] == endptr)
+			noise = 1.0; /* invalid */
+		else if ((noise >= 0.0) && (noise <= 100.0))
+			noise = wireless_percent_to_power (noise);
+		else if (noise > 100.0)
+			noise = 1.0; /* invalid */
 
 		wireless_submit (device, "signal_quality", quality);
 		wireless_submit (device, "signal_power", power);
 		wireless_submit (device, "signal_noise", noise);
 
 		devices_found++;
