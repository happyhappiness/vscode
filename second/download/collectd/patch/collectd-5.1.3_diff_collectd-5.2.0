diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/aclocal.m4 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/aclocal.m4
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/aclocal.m4	2013-04-09 09:04:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/aclocal.m4	2012-11-18 06:23:29.000000000 +0800
@@ -10,14 +10,14 @@
 # but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
 m4_ifndef([AC_AUTOCONF_VERSION],
   [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
-m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.67],,
-[m4_warning([this file was generated for autoconf 2.67.
+m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.65],,
+[m4_warning([this file was generated for autoconf 2.65.
 You have another version of autoconf.  It may work, but is not guaranteed to.
 If you have problems, you may need to regenerate the build system entirely.
 To do so, use the procedure documented by the package, typically `autoreconf'.])])
 
 # Portability macros for glibc argz.                    -*- Autoconf -*-
 #
@@ -8977,13 +8977,12 @@
 m4_ifndef([AC_LIBTOOL_LANG_RC_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_RC_CONFIG])])
 m4_ifndef([_LT_AC_LANG_RC_CONFIG],	[AC_DEFUN([_LT_AC_LANG_RC_CONFIG])])
 m4_ifndef([AC_LIBTOOL_CONFIG],		[AC_DEFUN([AC_LIBTOOL_CONFIG])])
 m4_ifndef([_LT_AC_FILE_LTDLL_C],	[AC_DEFUN([_LT_AC_FILE_LTDLL_C])])
 
 # pkg.m4 - Macros to locate and utilise pkg-config.            -*- Autoconf -*-
-# serial 1 (pkg-config-0.24)
 # 
 # Copyright © 2004 Scott James Remnant <scott@netsplit.com>.
 #
 # This program is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
@@ -9005,61 +9004,62 @@
 
 # PKG_PROG_PKG_CONFIG([MIN-VERSION])
 # ----------------------------------
 AC_DEFUN([PKG_PROG_PKG_CONFIG],
 [m4_pattern_forbid([^_?PKG_[A-Z_]+$])
 m4_pattern_allow([^PKG_CONFIG(_PATH)?$])
-AC_ARG_VAR([PKG_CONFIG], [path to pkg-config utility])
-AC_ARG_VAR([PKG_CONFIG_PATH], [directories to add to pkg-config's search path])
-AC_ARG_VAR([PKG_CONFIG_LIBDIR], [path overriding pkg-config's built-in search path])
-
+AC_ARG_VAR([PKG_CONFIG], [path to pkg-config utility])dnl
 if test "x$ac_cv_env_PKG_CONFIG_set" != "xset"; then
 	AC_PATH_TOOL([PKG_CONFIG], [pkg-config])
 fi
 if test -n "$PKG_CONFIG"; then
 	_pkg_min_version=m4_default([$1], [0.9.0])
 	AC_MSG_CHECKING([pkg-config is at least version $_pkg_min_version])
 	if $PKG_CONFIG --atleast-pkgconfig-version $_pkg_min_version; then
 		AC_MSG_RESULT([yes])
 	else
 		AC_MSG_RESULT([no])
 		PKG_CONFIG=""
 	fi
+		
 fi[]dnl
 ])# PKG_PROG_PKG_CONFIG
 
 # PKG_CHECK_EXISTS(MODULES, [ACTION-IF-FOUND], [ACTION-IF-NOT-FOUND])
 #
 # Check to see whether a particular set of modules exists.  Similar
 # to PKG_CHECK_MODULES(), but does not set variables or print errors.
 #
-# Please remember that m4 expands AC_REQUIRE([PKG_PROG_PKG_CONFIG])
-# only at the first occurence in configure.ac, so if the first place
-# it's called might be skipped (such as if it is within an "if", you
-# have to call PKG_CHECK_EXISTS manually
+#
+# Similar to PKG_CHECK_MODULES, make sure that the first instance of
+# this or PKG_CHECK_MODULES is called, or make sure to call
+# PKG_CHECK_EXISTS manually
 # --------------------------------------------------------------
 AC_DEFUN([PKG_CHECK_EXISTS],
 [AC_REQUIRE([PKG_PROG_PKG_CONFIG])dnl
 if test -n "$PKG_CONFIG" && \
     AC_RUN_LOG([$PKG_CONFIG --exists --print-errors "$1"]); then
-  m4_default([$2], [:])
+  m4_ifval([$2], [$2], [:])
 m4_ifvaln([$3], [else
   $3])dnl
 fi])
 
+
 # _PKG_CONFIG([VARIABLE], [COMMAND], [MODULES])
 # ---------------------------------------------
 m4_define([_PKG_CONFIG],
-[if test -n "$$1"; then
-    pkg_cv_[]$1="$$1"
- elif test -n "$PKG_CONFIG"; then
-    PKG_CHECK_EXISTS([$3],
-                     [pkg_cv_[]$1=`$PKG_CONFIG --[]$2 "$3" 2>/dev/null`],
-		     [pkg_failed=yes])
- else
-    pkg_failed=untried
+[if test -n "$PKG_CONFIG"; then
+    if test -n "$$1"; then
+        pkg_cv_[]$1="$$1"
+    else
+        PKG_CHECK_EXISTS([$3],
+                         [pkg_cv_[]$1=`$PKG_CONFIG --[]$2 "$3" 2>/dev/null`],
+			 [pkg_failed=yes])
+    fi
+else
+	pkg_failed=untried
 fi[]dnl
 ])# _PKG_CONFIG
 
 # _PKG_SHORT_ERRORS_SUPPORTED
 # -----------------------------
 AC_DEFUN([_PKG_SHORT_ERRORS_SUPPORTED],
@@ -9095,48 +9095,48 @@
 
 m4_define([_PKG_TEXT], [Alternatively, you may set the environment variables $1[]_CFLAGS
 and $1[]_LIBS to avoid the need to call pkg-config.
 See the pkg-config man page for more details.])
 
 if test $pkg_failed = yes; then
-   	AC_MSG_RESULT([no])
         _PKG_SHORT_ERRORS_SUPPORTED
         if test $_pkg_short_errors_supported = yes; then
-	        $1[]_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "$2" 2>&1`
+	        $1[]_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "$2"`
         else 
-	        $1[]_PKG_ERRORS=`$PKG_CONFIG --print-errors "$2" 2>&1`
+	        $1[]_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "$2"`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$$1[]_PKG_ERRORS" >&AS_MESSAGE_LOG_FD
 
-	m4_default([$4], [AC_MSG_ERROR(
+	ifelse([$4], , [AC_MSG_ERROR(dnl
 [Package requirements ($2) were not met:
 
 $$1_PKG_ERRORS
 
 Consider adjusting the PKG_CONFIG_PATH environment variable if you
 installed software in a non-standard prefix.
 
-_PKG_TEXT])[]dnl
-        ])
+_PKG_TEXT
+])],
+		[AC_MSG_RESULT([no])
+                $4])
 elif test $pkg_failed = untried; then
-     	AC_MSG_RESULT([no])
-	m4_default([$4], [AC_MSG_FAILURE(
+	ifelse([$4], , [AC_MSG_FAILURE(dnl
 [The pkg-config script could not be found or is too old.  Make sure it
 is in your PATH or set the PKG_CONFIG environment variable to the full
 path to pkg-config.
 
 _PKG_TEXT
 
-To get pkg-config, see <http://pkg-config.freedesktop.org/>.])[]dnl
-        ])
+To get pkg-config, see <http://pkg-config.freedesktop.org/>.])],
+		[$4])
 else
 	$1[]_CFLAGS=$pkg_cv_[]$1[]_CFLAGS
 	$1[]_LIBS=$pkg_cv_[]$1[]_LIBS
         AC_MSG_RESULT([yes])
-	$3
+	ifelse([$3], , :, [$3])
 fi[]dnl
 ])# PKG_CHECK_MODULES
 
 # Copyright (C) 2002, 2003, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
 #
 # This file is free software; the Free Software Foundation
@@ -9891,29 +9891,12 @@
 # _AM_IF_OPTION(OPTION, IF-SET, [IF-NOT-SET])
 # -------------------------------------------
 # Execute IF-SET if OPTION is set, IF-NOT-SET otherwise.
 AC_DEFUN([_AM_IF_OPTION],
 [m4_ifset(_AM_MANGLE_OPTION([$1]), [$2], [$3])])
 
-# Copyright (C) 2001, 2003, 2005  Free Software Foundation, Inc.
-#
-# This file is free software; the Free Software Foundation
-# gives unlimited permission to copy and/or distribute it,
-# with or without modifications, as long as this notice is preserved.
-
-# AM_RUN_LOG(COMMAND)
-# -------------------
-# Run COMMAND, save the exit status in ac_status, and log it.
-# (This has been adapted from Autoconf's _AC_RUN_LOG macro.)
-AC_DEFUN([AM_RUN_LOG],
-[{ echo "$as_me:$LINENO: $1" >&AS_MESSAGE_LOG_FD
-   ($1) >&AS_MESSAGE_LOG_FD 2>&AS_MESSAGE_LOG_FD
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&AS_MESSAGE_LOG_FD
-   (exit $ac_status); }])
-
 # Check to make sure that the build environment is sane.    -*- Autoconf -*-
 
 # Copyright (C) 1996, 1997, 2000, 2001, 2003, 2005, 2008
 # Free Software Foundation, Inc.
 #
 # This file is free software; the Free Software Foundation
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/AUTHORS /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/AUTHORS
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/AUTHORS	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/AUTHORS	2012-11-18 06:23:21.000000000 +0800
@@ -197,12 +197,15 @@
  - teamspeak2 plugin.
 
 Sven Trenkel <collectd at semidefinite.de>
  - netapp plugin.
  - python plugin.
 
+Thomas Meson <zllak at hycik.org>
+ - Graphite support for the AMQP plugin.
+
 Tomasz Pala <gotar at pld-linux.org>
  - conntrack plugin.
 
 Tommie Gannert <d00-tga at d.kth.se>
  - PID-file patch.
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/java/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/java/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/java/Makefile.in	2013-04-09 09:04:23.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/java/Makefile.in	2012-11-18 06:23:37.000000000 +0800
@@ -215,14 +215,12 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
-PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
-PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/java/org/collectd/java/GenericJMXConfConnection.java /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/java/org/collectd/java/GenericJMXConfConnection.java
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/java/org/collectd/java/GenericJMXConfConnection.java	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/java/org/collectd/java/GenericJMXConfConnection.java	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 /*
  * collectd/java - org/collectd/java/GenericJMXConfConnection.java
- * Copyright (C) 2009,2010  Florian octo Forster
+ * Copyright (C) 2009-2012  Florian octo Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -13,22 +13,24 @@
  *
  * You should have received a copy of the GNU General Public License along
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
- *   Florian octo Forster <octo at verplant.org>
+ *   Florian octo Forster <octo at collectd.org>
  */
 
 package org.collectd.java;
 
 import java.util.List;
 import java.util.Map;
 import java.util.Iterator;
 import java.util.ArrayList;
 import java.util.HashMap;
+import java.net.InetAddress;
+import java.net.UnknownHostException;
 
 import javax.management.MBeanServerConnection;
 import javax.management.ObjectName;
 import javax.management.MalformedObjectNameException;
 
 import javax.management.remote.JMXServiceURL;
@@ -74,12 +76,30 @@
       return (null);
     }
 
     return (v.getString ());
   } /* }}} String getConfigString */
 
+  private String getHost () /* {{{ */
+  {
+    if (this._host != null)
+    {
+      return (this._host);
+    }
+
+    try
+    {
+      InetAddress localHost = InetAddress.getLocalHost();
+      return (localHost.getHostName ());
+    }
+    catch (UnknownHostException e)
+    {
+      return ("localhost");
+    }
+  } /* }}} String getHost */
+
 private void connect () /* {{{ */
 {
   JMXServiceURL service_url;
   JMXConnector connector;
   Map environment;
 
@@ -208,13 +228,13 @@
 
     Collectd.logDebug ("GenericJMXConfConnection.query: "
         + "Reading " + this._mbeans.size () + " mbeans from "
         + ((this._host != null) ? this._host : "(null)"));
 
     pd = new PluginData ();
-    pd.setHost ((this._host != null) ? this._host : "localhost");
+    pd.setHost (this.getHost ());
     pd.setPlugin ("GenericJMX");
 
     for (int i = 0; i < this._mbeans.size (); i++)
     {
       int status;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/Makefile.am	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/Makefile.am	2012-11-18 06:23:21.000000000 +0800
@@ -2,13 +2,12 @@
 
 if BUILD_WITH_JAVA
 SUBDIRS += java
 endif
 
 EXTRA_DIST = perl/Makefile.PL \
-	     perl/uninstall_mod.pl \
 	     perl/lib/Collectd.pm \
 	     perl/lib/Collectd/Unixsock.pm \
 	     perl/lib/Collectd/Plugins/Monitorus.pm \
 	     perl/lib/Collectd/Plugins/OpenVZ.pm
 
 CLEANFILES = \
@@ -31,24 +30,28 @@
 install-exec-local:
 	[ ! -f buildperl/Makefile ] || ( cd buildperl && $(MAKE) install )
 
 # Perl 'make uninstall' does not work as well as wanted.
 # So we do the work here.
 uninstall-local:
-	@PERL@ -I$(DESTDIR)$(prefix) $(srcdir)/perl/uninstall_mod.pl Collectd
-	find $(DESTDIR)$(prefix) -name "perllocal.pod" -exec rm {} \;
+	rm -f $(DESTDIR)$(mandir)/man3/Collectd::Unixsock.3pm
+	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd.pm
+	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd/Plugins/OpenVZ.pm
+	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd/Unixsock.pm
+	rm -f $(DESTDIR)$(prefix)/lib64/perl5/perllocal.pod
+	rm -f $(DESTDIR)$(prefix)/lib64/perl5/auto/Collectd/.packlist
 
 clean-local:
 	rm -rf buildperl
 
 perl: buildperl/Makefile
 	cd buildperl && $(MAKE)
 
 buildperl/Makefile: .perl-directory-stamp buildperl/Makefile.PL \
 	$(top_builddir)/config.status
-	cd buildperl && @PERL@ Makefile.PL INSTALL_BASE=$(DESTDIR)$(prefix) @PERL_BINDINGS_OPTIONS@
+	cd buildperl && @PERL@ Makefile.PL INSTALL_BASE=$(prefix) @PERL_BINDINGS_OPTIONS@
 
 buildperl/Makefile.PL: .perl-directory-stamp $(top_builddir)/config.status
 
 .perl-directory-stamp:
 	if test ! -d buildperl; then \
 	  mkdir -p buildperl/Collectd/Plugins; \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/Makefile.in	2013-04-09 09:04:23.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/Makefile.in	2012-11-18 06:23:37.000000000 +0800
@@ -256,14 +256,12 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
-PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
-PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
@@ -326,13 +324,12 @@
 target_alias = @target_alias@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
 SUBDIRS = $(am__append_1)
 EXTRA_DIST = perl/Makefile.PL \
-	     perl/uninstall_mod.pl \
 	     perl/lib/Collectd.pm \
 	     perl/lib/Collectd/Unixsock.pm \
 	     perl/lib/Collectd/Plugins/Monitorus.pm \
 	     perl/lib/Collectd/Plugins/OpenVZ.pm
 
 CLEANFILES = \
@@ -704,24 +701,28 @@
 install-exec-local:
 	[ ! -f buildperl/Makefile ] || ( cd buildperl && $(MAKE) install )
 
 # Perl 'make uninstall' does not work as well as wanted.
 # So we do the work here.
 uninstall-local:
-	@PERL@ -I$(DESTDIR)$(prefix) $(srcdir)/perl/uninstall_mod.pl Collectd
-	find $(DESTDIR)$(prefix) -name "perllocal.pod" -exec rm {} \;
+	rm -f $(DESTDIR)$(mandir)/man3/Collectd::Unixsock.3pm
+	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd.pm
+	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd/Plugins/OpenVZ.pm
+	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd/Unixsock.pm
+	rm -f $(DESTDIR)$(prefix)/lib64/perl5/perllocal.pod
+	rm -f $(DESTDIR)$(prefix)/lib64/perl5/auto/Collectd/.packlist
 
 clean-local:
 	rm -rf buildperl
 
 perl: buildperl/Makefile
 	cd buildperl && $(MAKE)
 
 buildperl/Makefile: .perl-directory-stamp buildperl/Makefile.PL \
 	$(top_builddir)/config.status
-	cd buildperl && @PERL@ Makefile.PL INSTALL_BASE=$(DESTDIR)$(prefix) @PERL_BINDINGS_OPTIONS@
+	cd buildperl && @PERL@ Makefile.PL INSTALL_BASE=$(prefix) @PERL_BINDINGS_OPTIONS@
 
 buildperl/Makefile.PL: .perl-directory-stamp $(top_builddir)/config.status
 
 .perl-directory-stamp:
 	if test ! -d buildperl; then \
 	  mkdir -p buildperl/Collectd/Plugins; \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/perl/lib/Collectd/Plugins/OpenVZ.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/perl/lib/Collectd/Plugins/OpenVZ.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/perl/lib/Collectd/Plugins/OpenVZ.pm	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/perl/lib/Collectd/Plugins/OpenVZ.pm	2012-11-18 06:23:21.000000000 +0800
@@ -33,13 +33,13 @@
 my $vzlist = '/usr/sbin/vzlist';
 
 my $last_stat = {};
 
 sub openvz_read
 {
-    my %v = (time => time(), interval => $interval_g);
+    my %v = (time => time(), interval => plugin_get_interval());
     my (@veids, $veid, $name, $key, $val, $i, @lines, @parts, @counters);
 
     @veids = map { s/ //g; $_; } split(/\n/, `$vzlist -Ho veid`);
 
     foreach $veid (@veids)
     {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/perl/lib/Collectd.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/perl/lib/Collectd.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/perl/lib/Collectd.pm	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/bindings/perl/lib/Collectd.pm	2012-11-18 06:23:21.000000000 +0800
@@ -39,12 +39,13 @@
 
 our %EXPORT_TAGS = (
 	'plugin' => [ qw(
 			plugin_register
 			plugin_unregister
 			plugin_dispatch_values
+			plugin_get_interval
 			plugin_write
 			plugin_flush
 			plugin_flush_one
 			plugin_flush_all
 			plugin_dispatch_notification
 			plugin_log
@@ -168,12 +169,13 @@
 sub DEBUG   { _log (scalar caller, LOG_DEBUG,   shift); }
 
 sub plugin_call_all {
 	my $type = shift;
 
 	my %plugins;
+	my $interval;
 
 	our $cb_name = undef;
 
 	if (! defined $type) {
 		return;
 	}
@@ -191,19 +193,21 @@
 
 	{
 		lock %{$plugins[$type]};
 		%plugins = %{$plugins[$type]};
 	}
 
+	$interval = plugin_get_interval ();
+
 	foreach my $plugin (keys %plugins) {
 		my $p = $plugins{$plugin};
 
 		my $status = 0;
 
 		if ($p->{'wait_left'} > 0) {
-			$p->{'wait_left'} -= $interval_g;
+			$p->{'wait_left'} -= $interval;
 		}
 
 		next if ($p->{'wait_left'} > 0);
 
 		$cb_name = $p->{'cb_name'};
 		$status = call_by_name (@_);
@@ -224,17 +228,17 @@
 
 			$status = 0;
 		}
 
 		if ($status) {
 			$p->{'wait_left'} = 0;
-			$p->{'wait_time'} = $interval_g;
+			$p->{'wait_time'} = $interval;
 		}
 		elsif (TYPE_READ == $type) {
-			if ($p->{'wait_time'} < $interval_g) {
-				$p->{'wait_time'} = $interval_g;
+			if ($p->{'wait_time'} < $interval) {
+				$p->{'wait_time'} = $interval;
 			}
 
 			$p->{'wait_left'} = $p->{'wait_time'};
 			$p->{'wait_time'} *= 2;
 
 			if ($p->{'wait_time'} > 86400) {
@@ -310,13 +314,13 @@
 
 		if ($data !~ m/^$pkg\:\:/) {
 			$data = $pkg . "::" . $data;
 		}
 
 		%p = (
-			wait_time => $interval_g,
+			wait_time => plugin_get_interval (),
 			wait_left => 0,
 			cb_name   => $data,
 		);
 
 		lock %{$plugins[$type]};
 		$plugins[$type]->{$name} = \%p;
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/bindings/perl: uninstall_mod.pl
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/ChangeLog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/ChangeLog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/ChangeLog	2013-04-09 09:03:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/ChangeLog	2012-11-18 06:23:21.000000000 +0800
@@ -1,52 +1,54 @@
-2013-04-08, Version 5.1.3
-	* Build system: A bad interaction between the Java detection code and
-	  libltdl has been fixed. Thanks to Dave Cottlehuber for his patch.
-	* collectd: Fixed read callback scheduling at startup.
-	* apache, ascent, bind, curl, curl_json, curl_xml, nginx and
-	  write_http plugins: Portability fixes, protection from infinite
-	  redirect loops, improved error handling and incorrect dereferences
-	  have been fixed. Most of these are related to the cURL library.
-	  Thanks to Dan Fandrich for his patches.
-	* logfile plugin: Flush the output file handle. This works around
-	  caching when logging to STDOUT and redirecting into a file. Thanks
-	  to Nathan Huff for the patch.
-	* mysql plugin: Fix a memory leak in the error handling. Thanks to
-	  Tomas Doran for his patch.
-	* netapp plugin: Fix the interval with which values are dispatched.
-	* network plugin: Build issues under FreeBSD and initialization have
-	  been fixed. Thanks to Ed Schouten for his patch.
-	* nfs plugin: A compilation problem has been fixed.
-	* notify_email plugin: Add a character set to the mail header. Thanks
-	  to Manuel Cissé for his patch.
-	* rrdcached plugin: Connect to the daemon from the read callback.
-	* snmp plugin: Matching of SNMP subtrees has been improved. Thanks to
-	  "jkrabbe" for the patch.
-	* thermal plugin: The initialization of dispatched value lists has
-	  been fixed. Thanks to Markus Knetschke for his patch.
-	* unixsock plugin: Parsing of options with an underscore, e.g.
-	  "plugin_instance" has been fixed. Thanks to Tommie Gannert for his
-	  patch.
-
-2013-01-25, Version 5.1.2
-	* Build system: "make distcheck" has been fixed. Thanks to Yves
-	  Mettier for his patches.
-	* collectd: The complaint mechanism was fixed. It reported messages
-	  more frequently than intended.
-	* dns plugin: Build issues on FreeBSD have been fixed. Thanks to
-	  Ed Schouten for his patch.
-	* ethstat plugin: Fix the "Map" config option. An incorrectly used
-	  character pointer may lead to a segmentation fault.
-	* network plugin: Build issues on FreeBSD have been fixed. Thanks to
-	  Ed Schouten for his patch.
-	* varnish plugin: Fix a problem with instances without name.
-	* write_graphite: Improve reporting of connection errors to not spam
-	  log files too much. Thanks to Pierre-Yves Ritschard for reporting
-	  this problem.
-	* zfs_arc plugin: Fix the type used for mutex misses. Thanks to Yves
-	  Mettier for reporting this bug.
+2012-11-17, Version 5.2.0
+	* collectd: The performance of the LISTVAL command has been improved.
+	  Thanks to Yves Mettier for the patch.
+	* collectd: The possibility to configure the collection interval on a
+	  per-plugin basis has been added. Huge thanks to Sebastian Harl for
+	  his work.
+	* collectd-tg: This new binary allows to generate random but real
+	  looking collectd network traffic. This can be used to load-test new
+	  plugin, for example.
+	* libcollectdclient: Code for constructing and sending network packets
+	  in the binary format has been added.
+	* aggregation plugin: This new plugin allows to aggregate multiple
+	  value lists into one.
+	* amqp and write_http plugins: Meta data is now included in the JSON
+	  output format. Thanks to Mark Wong for the patch.
+	* amqp plugin: Support for "Graphite" output has been added. Thanks to
+	  Thomas Meson for the patch.
+	* contextswitch plugin: Support for AIX has been added. Thanks to
+	  Manuel Rozada for his patch.
+	* disk plugin: The "UseBSDName" config option has been added to the
+	  Mac OS X version.
+	* GenericJMX plugin: Automatically determine the host name if it isn't
+	  configured.
+	* libvirt plugin: The "number" interface format has been added. Thanks
+	  to "Davide Guerri" for the patch.
+	* memcached plugin: Support for multiple connections has been added.
+	  Thanks to Nicolas Szalay for the patch.
+	* ntpd plugin: The "IncludeUnitID" config option has been added. The
+	  behavior when a peer is unreachable has been improved. Thanks to
+	  Johan Kiviniemi for the patches.
+	* oracle plugin: The "Host" config option has been added.
+	* pf plugin: This new plugin allows to collect statistics from BSD's
+	  packet filter "pf". Thanks to Pierre-Yves Ritschard and Stefan Rinkes
+	  for their work.
+	* postgresql plugin: The "Instance" config option has been added.
+	  Support for writing values to a PostgreSQL database has been added.
+	  Thanks to Sebastian Harl for the patches.
+	* processes plugin: Support for Solaris has been added. Thanks to
+	  Cosmin Ioiart for the patch.
+	* redis plugin: Support for authenticating via password has been added.
+	  Thanks to biancalana for the patch.
+	* rrdcached plugin: The "HeartBeat", "RRARows", "RRATimespan",
+	  "StepSize" and "XFF" config options have been added.
+	* swap plugin: The "ReportBytes" config option has been added. The AIX
+	  version now also exports "reserved" pages and swap-in / swap-out
+	  "traffic". Thanks to Manuel Rozada for the patch.
+	* tcpconns plugin: Use a netlink socket rather than reading from /proc
+	  for improved performance. Thanks to Michael Stapelberg for the patch.
 
 2012-11-11, Version 5.1.1
 	* collectd: Create new directories with mode 0777 and let umask remove
 	  unwanted permission bits.
 	* collectd: Build issues have been fixed.
 	* collectd: An incorrect assertion has been fixed in some common code
@@ -377,33 +379,12 @@
 	  store.
 	* zfs_arc plugin: The data sets have been replaced by more elegant
 	  alternatives.
 	* v5upgrade target: Target for converting v4 data sets to the v5
 	  schema.
 
-2013-04-07, Version 4.10.9
-	* Build system: A bad interaction between the Java detection code and
-	  libltdl has been fixed. Thanks to Dave Cottlehuber for his patch.
-	* apache, ascent, bind, curl, curl_json, curl_xml, nginx and
-	  write_http plugins: Portability fixes, protection from infinite
-	  redirect loops, improved error handling and incorrect dereferences
-	  have been fixed. Most of these are related to the cURL library.
-	  Thanks to Dan Fandrich for his patches.
-	* logfile plugin: Flush the output file handle. This works around
-	  caching when logging to STDOUT and redirecting into a file. Thanks
-	  to Nathan Huff for the patch.
-	* network plugin: Build issues under FreeBSD and initialization have
-	  been fixed. Thanks to Ed Schouten for his patch.
-	* mysql plugin: Fix a memory leak in the error handling. Thanks to
-	  Tomas Doran for his patch.
-	* thermal plugin: The initialization of dispatched value lists has
-	  been fixed. Thanks to Markus Knetschke for his patch.
-	* unixsock plugin: Parsing of options with an underscore, e.g.
-	  "plugin_instance" has been fixed. Thanks to Tommie Gannert for his
-	  patch.
-
 2012-11-11, Version 4.10.8
 	* collectd: Create new directories with mode 0777 and let umask remove
 	  unwanted permission bits.
 	* collectd: Build issues have been fixed.
 	* collectd: An incorrect assertion has been fixed in some common code
 	  for Solaris. This should resolve pseudo-random assertion failures
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3: compile
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3: config.guess
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3: config.sub
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/configure	2013-04-09 09:04:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/configure	2012-11-18 06:23:39.000000000 +0800
@@ -1,14 +1,14 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.67 for collectd 5.1.3.
+# Generated by GNU Autoconf 2.65 for collectd 5.2.0.
 #
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
-# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
-# Foundation, Inc.
+# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software Foundation,
+# Inc.
 #
 #
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
 ## -------------------- ##
 ## M4sh Initialization. ##
@@ -313,13 +313,13 @@
 	    q
 	  }
 	  s/.*/./; q'`
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
 # as_fn_append VAR VALUE
 # ----------------------
 # Append the text in VALUE to the end of the definition contained in VAR. Take
@@ -353,25 +353,25 @@
   {
     as_val=`expr "$@" || test $? -eq 1`
   }
 fi # as_fn_arith
 
 
-# as_fn_error STATUS ERROR [LINENO LOG_FD]
-# ----------------------------------------
+# as_fn_error ERROR [LINENO LOG_FD]
+# ---------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with STATUS, using 1 if that was 0.
+# script with status $?, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$1; test $as_status -eq 0 && as_status=1
-  if test "$4"; then
-    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+  as_status=$?; test $as_status -eq 0 && as_status=1
+  if test "$3"; then
+    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
   fi
-  $as_echo "$as_me: error: $2" >&2
+  $as_echo "$as_me: error: $1" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
 if expr a : '\(a\)' >/dev/null 2>&1 &&
    test "X`expr 00001 : '.*\(...\)'`" = X001; then
   as_expr=expr
@@ -680,13 +680,13 @@
 lt_dlopen_dir="$lt_ltdl_dir"
 
 test -n "$DJDIR" || exec 7<&0 </dev/null
 exec 6>&1
 
 # Name of the host.
-# hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
+# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
 # so uname gets run too.
 ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
 
 #
 # Initializations.
 #
@@ -699,14 +699,14 @@
 MFLAGS=
 MAKEFLAGS=
 
 # Identity of this package.
 PACKAGE_NAME='collectd'
 PACKAGE_TARNAME='collectd'
-PACKAGE_VERSION='5.1.3'
-PACKAGE_STRING='collectd 5.1.3'
+PACKAGE_VERSION='5.2.0'
+PACKAGE_STRING='collectd 5.2.0'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
 ac_unique_file="src/collectd.c"
 # Factoring default headers for most tests.
 ac_includes_default="\
@@ -850,12 +850,14 @@
 BUILD_PLUGIN_POSTGRESQL_FALSE
 BUILD_PLUGIN_POSTGRESQL_TRUE
 BUILD_PLUGIN_PING_FALSE
 BUILD_PLUGIN_PING_TRUE
 BUILD_PLUGIN_PINBA_FALSE
 BUILD_PLUGIN_PINBA_TRUE
+BUILD_PLUGIN_PF_FALSE
+BUILD_PLUGIN_PF_TRUE
 BUILD_PLUGIN_PERL_FALSE
 BUILD_PLUGIN_PERL_TRUE
 BUILD_PLUGIN_ORACLE_FALSE
 BUILD_PLUGIN_ORACLE_TRUE
 BUILD_PLUGIN_OPENVPN_FALSE
 BUILD_PLUGIN_OPENVPN_TRUE
@@ -982,12 +984,14 @@
 BUILD_PLUGIN_APCUPS_FALSE
 BUILD_PLUGIN_APCUPS_TRUE
 BUILD_PLUGIN_APACHE_FALSE
 BUILD_PLUGIN_APACHE_TRUE
 BUILD_PLUGIN_AMQP_FALSE
 BUILD_PLUGIN_AMQP_TRUE
+BUILD_PLUGIN_AGGREGATION_FALSE
+BUILD_PLUGIN_AGGREGATION_TRUE
 BUILD_FEATURE_GETIFADDRS_FALSE
 BUILD_FEATURE_GETIFADDRS_TRUE
 BUILD_FEATURE_DAEMON_FALSE
 BUILD_FEATURE_DAEMON_TRUE
 BUILD_FEATURE_DEBUG_FALSE
 BUILD_FEATURE_DEBUG_TRUE
@@ -1169,14 +1173,12 @@
 pkgconfigdir
 KERNEL_CFLAGS
 KERNEL_DIR
 HAVE_PROTOC_C_FALSE
 HAVE_PROTOC_C_TRUE
 have_protoc_c
-PKG_CONFIG_LIBDIR
-PKG_CONFIG_PATH
 PKG_CONFIG
 YFLAGS
 YACC
 LEXLIB
 LEX_OUTPUT_ROOT
 LEX
@@ -1360,12 +1362,13 @@
 with_libyajl
 with_libvarnish
 enable_debug
 enable_daemon
 enable_getifaddrs
 enable_all_plugins
+enable_aggregation
 enable_amqp
 enable_apache
 enable_apcups
 enable_apple_sensors
 enable_ascent
 enable_battery
@@ -1426,12 +1429,13 @@
 enable_nut
 enable_olsrd
 enable_onewire
 enable_openvpn
 enable_oracle
 enable_perl
+enable_pf
 enable_pinba
 enable_ping
 enable_postgresql
 enable_powerdns
 enable_processes
 enable_protocols
@@ -1484,14 +1488,12 @@
 LIBS
 CPPFLAGS
 CPP
 YACC
 YFLAGS
 PKG_CONFIG
-PKG_CONFIG_PATH
-PKG_CONFIG_LIBDIR
 KERNEL_DIR
 LIBNETAPP_CPPFLAGS
 LIBNETAPP_LDFLAGS
 LIBNETAPP_LIBS
 LIBNOTIFY_CFLAGS
 LIBNOTIFY_LIBS'
@@ -1554,14 +1556,13 @@
     eval $ac_prev=\$ac_option
     ac_prev=
     continue
   fi
 
   case $ac_option in
-  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
-  *=)   ac_optarg= ;;
+  *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
   *)    ac_optarg=yes ;;
   esac
 
   # Accept the important Cygnus configure options, so we can diagnose typos.
 
   case $ac_dashdash$ac_option in
@@ -1601,13 +1602,13 @@
     datarootdir=$ac_optarg ;;
 
   -disable-* | --disable-*)
     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid feature name: $ac_useropt"
+      as_fn_error "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "enable_$ac_useropt"
 "*) ;;
@@ -1627,13 +1628,13 @@
     dvidir=$ac_optarg ;;
 
   -enable-* | --enable-*)
     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid feature name: $ac_useropt"
+      as_fn_error "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "enable_$ac_useropt"
 "*) ;;
@@ -1831,13 +1832,13 @@
     ac_init_version=: ;;
 
   -with-* | --with-*)
     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid package name: $ac_useropt"
+      as_fn_error "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "with_$ac_useropt"
 "*) ;;
@@ -1847,13 +1848,13 @@
     eval with_$ac_useropt=\$ac_optarg ;;
 
   -without-* | --without-*)
     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid package name: $ac_useropt"
+      as_fn_error "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "with_$ac_useropt"
 "*) ;;
@@ -1877,22 +1878,22 @@
   | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
     ac_prev=x_libraries ;;
   -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
     x_libraries=$ac_optarg ;;
 
-  -*) as_fn_error $? "unrecognized option: \`$ac_option'
-Try \`$0 --help' for more information"
+  -*) as_fn_error "unrecognized option: \`$ac_option'
+Try \`$0 --help' for more information."
     ;;
 
   *=*)
     ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
     # Reject names that are not valid shell variable names.
     case $ac_envvar in #(
       '' | [0-9]* | *[!_$as_cr_alnum]* )
-      as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
+      as_fn_error "invalid variable name: \`$ac_envvar'" ;;
     esac
     eval $ac_envvar=\$ac_optarg
     export $ac_envvar ;;
 
   *)
     # FIXME: should be removed in autoconf 3.0.
@@ -1904,19 +1905,19 @@
 
   esac
 done
 
 if test -n "$ac_prev"; then
   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
-  as_fn_error $? "missing argument to $ac_option"
+  as_fn_error "missing argument to $ac_option"
 fi
 
 if test -n "$ac_unrecognized_opts"; then
   case $enable_option_checking in
     no) ;;
-    fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
+    fatal) as_fn_error "unrecognized options: $ac_unrecognized_opts" ;;
     *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
   esac
 fi
 
 # Check all directory arguments for consistency.
 for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
@@ -1933,13 +1934,13 @@
   esac
   # Be sure to have absolute directory names.
   case $ac_val in
     [\\/$]* | ?:[\\/]* )  continue;;
     NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
   esac
-  as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
+  as_fn_error "expected an absolute directory name for --$ac_var: $ac_val"
 done
 
 # There might be people who depend on the old broken behavior: `$host'
 # used to hold the argument of --host etc.
 # FIXME: To remove some day.
 build=$build_alias
@@ -1947,14 +1948,14 @@
 target=$target_alias
 
 # FIXME: To remove some day.
 if test "x$host_alias" != x; then
   if test "x$build_alias" = x; then
     cross_compiling=maybe
-    $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
-    If a cross compiler is detected then cross compile mode will be used" >&2
+    $as_echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used." >&2
   elif test "x$build_alias" != "x$host_alias"; then
     cross_compiling=yes
   fi
 fi
 
 ac_tool_prefix=
@@ -1963,15 +1964,15 @@
 test "$silent" = yes && exec 6>/dev/null
 
 
 ac_pwd=`pwd` && test -n "$ac_pwd" &&
 ac_ls_di=`ls -di .` &&
 ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
-  as_fn_error $? "working directory cannot be determined"
+  as_fn_error "working directory cannot be determined"
 test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
-  as_fn_error $? "pwd does not report name of working directory"
+  as_fn_error "pwd does not report name of working directory"
 
 
 # Find the source files, if location was not specified.
 if test -z "$srcdir"; then
   ac_srcdir_defaulted=yes
   # Try the directory containing this script, then the parent directory.
@@ -2004,17 +2005,17 @@
   fi
 else
   ac_srcdir_defaulted=no
 fi
 if test ! -r "$srcdir/$ac_unique_file"; then
   test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
-  as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
+  as_fn_error "cannot find sources ($ac_unique_file) in $srcdir"
 fi
 ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
 ac_abs_confdir=`(
-	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
+	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error "$ac_msg"
 	pwd)`
 # When building in place, set srcdir=.
 if test "$ac_abs_confdir" = "$ac_pwd"; then
   srcdir=.
 fi
 # Remove unnecessary trailing slashes from srcdir.
@@ -2034,13 +2035,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures collectd 5.1.3 to adapt to many kinds of systems.
+\`configure' configures collectd 5.2.0 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -2048,13 +2049,13 @@
 
 Configuration:
   -h, --help              display this help and exit
       --help=short        display options specific to this package
       --help=recursive    display the short help of all the included packages
   -V, --version           display version information and exit
-  -q, --quiet, --silent   do not print \`checking ...' messages
+  -q, --quiet, --silent   do not print \`checking...' messages
       --cache-file=FILE   cache test results in FILE [disabled]
   -C, --config-cache      alias for \`--cache-file=config.cache'
   -n, --no-create         do not create output files
       --srcdir=DIR        find the sources in DIR [configure dir or \`..']
 
 Installation directories:
@@ -2104,13 +2105,13 @@
   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of collectd 5.1.3:";;
+     short | recursive ) echo "Configuration of collectd 5.2.0:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-option-checking  ignore unrecognized --enable/--with options
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
@@ -2131,12 +2132,13 @@
   --disable-daemon        disable daemon mode (enabled by def)
   --enable-getifaddrs     enable getifaddrs under Linux (disabled by def)
 
 collectd plugins:
   --enable-all-plugins    enable all plugins (auto by def)
 
+  --enable-aggregation    Aggregation plugin
   --enable-amqp           AMQP output plugin
   --enable-apache         Apache httpd statistics
   --enable-apcups         Statistics of UPSes by APC
   --enable-apple_sensors  Apple's hardware sensors
   --enable-ascent         AscentEmu player statistics
   --enable-battery        Battery statistics
@@ -2198,12 +2200,13 @@
   --enable-nut            Network UPS tools statistics
   --enable-olsrd          olsrd statistics
   --enable-onewire        OneWire sensor statistics
   --enable-openvpn        OpenVPN client statistics
   --enable-oracle         Oracle plugin
   --enable-perl           Embed a Perl interpreter
+  --enable-pf             BSD packet filter (PF) statistics
   --enable-pinba          Pinba statistics
   --enable-ping           Network latency statistics
   --enable-postgresql     PostgreSQL database statistics
   --enable-powerdns       PowerDNS statistics
   --enable-processes      Process statistics
   --enable-protocols      Protocol (IP, TCP, ...) statistics
@@ -2336,16 +2339,12 @@
   YACC        The `Yet Another C Compiler' implementation to use. Defaults to
               the first program found out of: `bison -y', `byacc', `yacc'.
   YFLAGS      The list of arguments that will be passed by default to $YACC.
               This script will default YFLAGS to the empty string to avoid a
               default value of `-d' given by some make applications.
   PKG_CONFIG  path to pkg-config utility
-  PKG_CONFIG_PATH
-              directories to add to pkg-config's search path
-  PKG_CONFIG_LIBDIR
-              path overriding pkg-config's built-in search path
   KERNEL_DIR  path to Linux kernel sources
   LIBNETAPP_CPPFLAGS
               C preprocessor flags required to build with libnetapp
   LIBNETAPP_LDFLAGS
               Linker flags required to build with libnetapp
   LIBNETAPP_LIBS
@@ -2418,16 +2417,16 @@
   done
 fi
 
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-collectd configure 5.1.3
-generated by GNU Autoconf 2.67
+collectd configure 5.2.0
+generated by GNU Autoconf 2.65
 
-Copyright (C) 2010 Free Software Foundation, Inc.
+Copyright (C) 2009 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
   exit
 fi
 
@@ -2525,13 +2524,13 @@
 # INCLUDES, setting the cache variable VAR accordingly.
 ac_fn_c_check_header_compile ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if eval "test \"\${$3+set}\"" = set; then :
+if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 #include <$2>
@@ -2568,13 +2567,13 @@
   if test -s conftest.err; then
     grep -v '^ *+' conftest.err >conftest.er1
     cat conftest.er1 >&5
     mv -f conftest.er1 conftest.err
   fi
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } > conftest.i && {
+  test $ac_status = 0; } >/dev/null && {
 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
 	 test ! -s conftest.err
        }; then :
   ac_retval=0
 else
   $as_echo "$as_me: failed program was:" >&5
@@ -2634,13 +2633,13 @@
 # Tests whether FUNC exists, setting the cache variable VAR accordingly
 ac_fn_c_check_func ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if eval "test \"\${$3+set}\"" = set; then :
+if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 /* Define $2 to an innocuous variant, in case <limits.h> declares $2.
    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
@@ -2693,38 +2692,31 @@
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
   eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
 
 } # ac_fn_c_check_func
 
-# ac_fn_c_check_decl LINENO SYMBOL VAR INCLUDES
-# ---------------------------------------------
-# Tests whether SYMBOL is declared in INCLUDES, setting cache variable VAR
-# accordingly.
+# ac_fn_c_check_decl LINENO SYMBOL VAR
+# ------------------------------------
+# Tests whether SYMBOL is declared, setting cache variable VAR accordingly.
 ac_fn_c_check_decl ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  as_decl_name=`echo $2|sed 's/ *(.*//'`
-  as_decl_use=`echo $2|sed -e 's/(/((/' -e 's/)/) 0&/' -e 's/,/) 0& (/g'`
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $as_decl_name is declared" >&5
-$as_echo_n "checking whether $as_decl_name is declared... " >&6; }
-if eval "test \"\${$3+set}\"" = set; then :
+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $2 is declared" >&5
+$as_echo_n "checking whether $2 is declared... " >&6; }
+if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
 main ()
 {
-#ifndef $as_decl_name
-#ifdef __cplusplus
-  (void) $as_decl_use;
-#else
-  (void) $as_decl_name;
-#endif
+#ifndef $2
+  (void) $2;
 #endif
 
   ;
   return 0;
 }
 _ACEOF
@@ -2748,13 +2740,13 @@
 # variable VAR accordingly.
 ac_fn_c_check_type ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if eval "test \"\${$3+set}\"" = set; then :
+if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=no"
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
@@ -2801,16 +2793,16 @@
 # Tests whether HEADER exists, giving a warning if it cannot be compiled using
 # the include files in INCLUDES and setting the cache variable VAR
 # accordingly.
 ac_fn_c_check_header_mongrel ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if eval "test \"\${$3+set}\"" = set; then :
+  if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if eval "test \"\${$3+set}\"" = set; then :
+if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 fi
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
 else
@@ -2840,13 +2832,13 @@
 _ACEOF
 if ac_fn_c_try_cpp "$LINENO"; then :
   ac_header_preproc=yes
 else
   ac_header_preproc=no
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
 $as_echo "$ac_header_preproc" >&6; }
 
 # So?  What about this header?
 case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((
   yes:no: )
@@ -2867,13 +2859,13 @@
     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
 $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
     ;;
 esac
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if eval "test \"\${$3+set}\"" = set; then :
+if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=\$ac_header_compiler"
 fi
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
@@ -2889,13 +2881,13 @@
 # INCLUDES, setting cache variable VAR accordingly.
 ac_fn_c_check_member ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2.$3" >&5
 $as_echo_n "checking for $2.$3... " >&6; }
-if eval "test \"\${$4+set}\"" = set; then :
+if { as_var=$4; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $5
 int
@@ -2940,14 +2932,14 @@
 
 } # ac_fn_c_check_member
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by collectd $as_me 5.1.3, which was
-generated by GNU Autoconf 2.67.  Invocation command line was
+It was created by collectd $as_me 5.2.0, which was
+generated by GNU Autoconf 2.65.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 exec 5>>config.log
 {
@@ -3051,15 +3043,17 @@
 # WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
 trap 'exit_status=$?
   # Save into config.log some information that might help in debugging.
   {
     echo
 
-    $as_echo "## ---------------- ##
+    cat <<\_ASBOX
+## ---------------- ##
 ## Cache variables. ##
-## ---------------- ##"
+## ---------------- ##
+_ASBOX
     echo
     # The following way of writing the cache mishandles newlines in values,
 (
   for ac_var in `(set) 2>&1 | sed -n '\''s/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'\''`; do
     eval ac_val=\$$ac_var
     case $ac_val in #(
@@ -3087,30 +3081,34 @@
       ;;
     esac |
     sort
 )
     echo
 
-    $as_echo "## ----------------- ##
+    cat <<\_ASBOX
+## ----------------- ##
 ## Output variables. ##
-## ----------------- ##"
+## ----------------- ##
+_ASBOX
     echo
     for ac_var in $ac_subst_vars
     do
       eval ac_val=\$$ac_var
       case $ac_val in
       *\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
       esac
       $as_echo "$ac_var='\''$ac_val'\''"
     done | sort
     echo
 
     if test -n "$ac_subst_files"; then
-      $as_echo "## ------------------- ##
+      cat <<\_ASBOX
+## ------------------- ##
 ## File substitutions. ##
-## ------------------- ##"
+## ------------------- ##
+_ASBOX
       echo
       for ac_var in $ac_subst_files
       do
 	eval ac_val=\$$ac_var
 	case $ac_val in
 	*\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
@@ -3118,15 +3116,17 @@
 	$as_echo "$ac_var='\''$ac_val'\''"
       done | sort
       echo
     fi
 
     if test -s confdefs.h; then
-      $as_echo "## ----------- ##
+      cat <<\_ASBOX
+## ----------- ##
 ## confdefs.h. ##
-## ----------- ##"
+## ----------- ##
+_ASBOX
       echo
       cat confdefs.h
       echo
     fi
     test "$ac_signal" != 0 &&
       $as_echo "$as_me: caught signal $ac_signal"
@@ -3175,18 +3175,13 @@
 
 # Let the site file select an alternate cache file if it wants to.
 # Prefer an explicitly selected file to automatically selected ones.
 ac_site_file1=NONE
 ac_site_file2=NONE
 if test -n "$CONFIG_SITE"; then
-  # We do not want a PATH search for config.site.
-  case $CONFIG_SITE in #((
-    -*)  ac_site_file1=./$CONFIG_SITE;;
-    */*) ac_site_file1=$CONFIG_SITE;;
-    *)   ac_site_file1=./$CONFIG_SITE;;
-  esac
+  ac_site_file1=$CONFIG_SITE
 elif test "x$prefix" != xNONE; then
   ac_site_file1=$prefix/share/config.site
   ac_site_file2=$prefix/etc/config.site
 else
   ac_site_file1=$ac_default_prefix/share/config.site
   ac_site_file2=$ac_default_prefix/etc/config.site
@@ -3195,17 +3190,13 @@
 do
   test "x$ac_site_file" = xNONE && continue
   if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
 $as_echo "$as_me: loading site script $ac_site_file" >&6;}
     sed 's/^/| /' "$ac_site_file" >&5
-    . "$ac_site_file" \
-      || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "failed to load site script $ac_site_file
-See \`config.log' for more details" "$LINENO" 5 ; }
+    . "$ac_site_file"
   fi
 done
 
 if test -r "$cache_file"; then
   # Some versions of bash will fail to source /dev/null (special files
   # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
@@ -3275,13 +3266,13 @@
 done
 if $ac_cache_corrupted; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
   { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
 $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
-  as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
+  as_fn_error "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
 fi
 ## -------------------- ##
 ## Main body of script. ##
 ## -------------------- ##
 
 ac_ext=c
@@ -3293,28 +3284,22 @@
 
 
 ac_config_headers="$ac_config_headers src/config.h"
 
 ac_aux_dir=
 for ac_dir in libltdl/config "$srcdir"/libltdl/config; do
-  if test -f "$ac_dir/install-sh"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install-sh -c"
-    break
-  elif test -f "$ac_dir/install.sh"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install.sh -c"
-    break
-  elif test -f "$ac_dir/shtool"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/shtool install -c"
-    break
-  fi
+  for ac_t in install-sh install.sh shtool; do
+    if test -f "$ac_dir/$ac_t"; then
+      ac_aux_dir=$ac_dir
+      ac_install_sh="$ac_aux_dir/$ac_t -c"
+      break 2
+    fi
+  done
 done
 if test -z "$ac_aux_dir"; then
-  as_fn_error $? "cannot find install-sh, install.sh, or shtool in libltdl/config \"$srcdir\"/libltdl/config" "$LINENO" 5
+  as_fn_error "cannot find install-sh, install.sh, or shtool in libltdl/config \"$srcdir\"/libltdl/config" "$LINENO" 5
 fi
 
 # These three variables are undocumented and unsupported,
 # and are intended to be withdrawn in a future Autoconf release.
 # They can cause serious problems if a builder's source tree is in a directory
 # whose full name contains unusual characters.
@@ -3358,33 +3343,33 @@
 
 
 ltmain="$ac_aux_dir/ltmain.sh"
 
 # Make sure we can run config.sub.
 $SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
-  as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
+  as_fn_error "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
 $as_echo_n "checking build system type... " >&6; }
 if test "${ac_cv_build+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_build_alias=$build_alias
 test "x$ac_build_alias" = x &&
   ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
 test "x$ac_build_alias" = x &&
-  as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
+  as_fn_error "cannot guess build type; you must specify one" "$LINENO" 5
 ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
-  as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
+  as_fn_error "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
 $as_echo "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
-*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5 ;;
+*) as_fn_error "invalid value of canonical build" "$LINENO" 5;;
 esac
 build=$ac_cv_build
 ac_save_IFS=$IFS; IFS='-'
 set x $ac_cv_build
 shift
 build_cpu=$1
@@ -3403,21 +3388,21 @@
   $as_echo_n "(cached) " >&6
 else
   if test "x$host_alias" = x; then
   ac_cv_host=$ac_cv_build
 else
   ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
-    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
+    as_fn_error "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
 fi
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
 $as_echo "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
-*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5 ;;
+*) as_fn_error "invalid value of canonical host" "$LINENO" 5;;
 esac
 host=$ac_cv_host
 ac_save_IFS=$IFS; IFS='-'
 set x $ac_cv_host
 shift
 host_cpu=$1
@@ -3727,14 +3712,14 @@
 
 fi
 
 
 test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "no acceptable C compiler found in \$PATH
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "no acceptable C compiler found in \$PATH
+See \`config.log' for more details." "$LINENO" 5; }
 
 # Provide some information about the compiler.
 $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
 set X $ac_compile
 ac_compiler=$2
 for ac_option in --version -v -V -qversion; do
@@ -3842,14 +3827,15 @@
 $as_echo "no" >&6; }
 $as_echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error 77 "C compiler cannot create executables
-See \`config.log' for more details" "$LINENO" 5 ; }
+{ as_fn_set_status 77
+as_fn_error "C compiler cannot create executables
+See \`config.log' for more details." "$LINENO" 5; }; }
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
 $as_echo_n "checking for C compiler default output file name... " >&6; }
@@ -3885,14 +3871,14 @@
     * ) break;;
   esac
 done
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details." "$LINENO" 5; }
 fi
 rm -f conftest conftest$ac_cv_exeext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
 $as_echo "$ac_cv_exeext" >&6; }
 
 rm -f conftest.$ac_ext
@@ -3943,15 +3929,15 @@
   else
     if test "$cross_compiling" = maybe; then
 	cross_compiling=yes
     else
 	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot run C compiled programs.
+as_fn_error "cannot run C compiled programs.
 If you meant to cross compile, use \`--host'.
-See \`config.log' for more details" "$LINENO" 5 ; }
+See \`config.log' for more details." "$LINENO" 5; }
     fi
   fi
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
 $as_echo "$cross_compiling" >&6; }
 
@@ -3996,14 +3982,14 @@
 else
   $as_echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot compute suffix of object files: cannot compile
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "cannot compute suffix of object files: cannot compile
+See \`config.log' for more details." "$LINENO" 5; }
 fi
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
 $as_echo "$ac_cv_objext" >&6; }
 OBJEXT=$ac_cv_objext
@@ -4274,13 +4260,13 @@
       $ac_path_SED_found && break 3
     done
   done
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_SED"; then
-    as_fn_error $? "no acceptable sed could be found in \$PATH" "$LINENO" 5
+    as_fn_error "no acceptable sed could be found in \$PATH" "$LINENO" 5
   fi
 else
   ac_cv_path_SED=$SED
 fi
 
 fi
@@ -4350,13 +4336,13 @@
       $ac_path_GREP_found && break 3
     done
   done
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_GREP"; then
-    as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_GREP=$GREP
 fi
 
 fi
@@ -4416,13 +4402,13 @@
       $ac_path_EGREP_found && break 3
     done
   done
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_EGREP"; then
-    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_EGREP=$EGREP
 fi
 
    fi
@@ -4483,13 +4469,13 @@
       $ac_path_FGREP_found && break 3
     done
   done
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_FGREP"; then
-    as_fn_error $? "no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error "no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_FGREP=$FGREP
 fi
 
    fi
@@ -4599,13 +4585,13 @@
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
 $as_echo "$LD" >&6; }
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
 fi
-test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
+test -z "$LD" && as_fn_error "no acceptable ld found in \$PATH" "$LINENO" 5
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
 $as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
 if test "${lt_cv_prog_gnu_ld+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   # I'd rather use --version here, but apparently some GNU lds only accept -v.
@@ -4801,19 +4787,19 @@
 $as_echo_n "checking the name lister ($NM) interface... " >&6; }
 if test "${lt_cv_nm_interface+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_nm_interface="BSD nm"
   echo "int some_variable = 0;" > conftest.$ac_ext
-  (eval echo "\"\$as_me:4807: $ac_compile\"" >&5)
+  (eval echo "\"\$as_me:4793: $ac_compile\"" >&5)
   (eval "$ac_compile" 2>conftest.err)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:4810: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
+  (eval echo "\"\$as_me:4796: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:4813: output\"" >&5)
+  (eval echo "\"\$as_me:4799: output\"" >&5)
   cat conftest.out >&5
   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
     lt_cv_nm_interface="MS dumpbin"
   fi
   rm -f conftest*
 fi
@@ -6013,13 +5999,13 @@
     esac
   fi
   rm -rf conftest*
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 6019 "configure"' > conftest.$ac_ext
+  echo '#line 6005 "configure"' > conftest.$ac_ext
   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
     if test "$lt_cv_prog_gnu_ld" = yes; then
@@ -6802,13 +6788,13 @@
 if ac_fn_c_try_cpp "$LINENO"; then :
 
 else
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
@@ -6818,17 +6804,17 @@
 continue
 else
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.i conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
   break
 fi
 
     done
     ac_cv_prog_CPP=$CPP
@@ -6861,13 +6847,13 @@
 if ac_fn_c_try_cpp "$LINENO"; then :
 
 else
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
@@ -6877,24 +6863,24 @@
 continue
 else
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.i conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
 
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details." "$LINENO" 5; }
 fi
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
@@ -7017,13 +7003,14 @@
 for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
 		  inttypes.h stdint.h unistd.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
 "
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -7537,17 +7524,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7543: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7530: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:7547: \$? = $ac_status" >&5
+   echo "$as_me:7534: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -7876,17 +7863,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7882: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7869: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:7886: \$? = $ac_status" >&5
+   echo "$as_me:7873: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -7981,17 +7968,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7987: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7974: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:7991: \$? = $ac_status" >&5
+   echo "$as_me:7978: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -8036,17 +8023,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8042: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8029: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:8046: \$? = $ac_status" >&5
+   echo "$as_me:8033: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -10420,13 +10407,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10426 "configure"
+#line 10413 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -10516,13 +10503,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self_static=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10522 "configure"
+#line 10509 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -11188,13 +11175,13 @@
 	  if test "$cross_compiling" = yes; then :
   libltdl_cv_need_uscore=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 11194 "configure"
+#line 11181 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -11425,13 +11412,14 @@
 ARGZ_H=
 for ac_func in argz_add argz_append argz_count argz_create_sep argz_insert \
 	argz_next argz_stringify
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
+eval as_val=\$$as_ac_var
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 else
   ARGZ_H=argz.h;
@@ -11605,13 +11593,13 @@
 fi
 
 
 if test -n "$with_ltdl_include"; then
   if test -f "$with_ltdl_include/ltdl.h"; then :
   else
-    as_fn_error $? "invalid ltdl include directory: \`$with_ltdl_include'" "$LINENO" 5
+    as_fn_error "invalid ltdl include directory: \`$with_ltdl_include'" "$LINENO" 5
   fi
 else
   with_ltdl_include=no
 fi
 
 
@@ -11621,22 +11609,22 @@
 fi
 
 
 if test -n "$with_ltdl_lib"; then
   if test -f "$with_ltdl_lib/libltdl.la"; then :
   else
-    as_fn_error $? "invalid ltdl library directory: \`$with_ltdl_lib'" "$LINENO" 5
+    as_fn_error "invalid ltdl library directory: \`$with_ltdl_lib'" "$LINENO" 5
   fi
 else
   with_ltdl_lib=no
 fi
 
 case ,$with_included_ltdl,$with_ltdl_include,$with_ltdl_lib, in
   ,yes,no,no,)
 	case $enable_ltdl_convenience in
-  no) as_fn_error $? "this package needs a convenience libltdl" "$LINENO" 5  ;;
+  no) as_fn_error "this package needs a convenience libltdl" "$LINENO" 5 ;;
   "") enable_ltdl_convenience=yes
       ac_configure_args="$ac_configure_args --enable-ltdl-convenience" ;;
 esac
 LIBLTDL='${top_build_prefix}'"${lt_ltdl_dir+$lt_ltdl_dir/}libltdlc.la"
 LTDLDEPS=$LIBLTDL
 LTDLINCL='-I${top_srcdir}'"${lt_ltdl_dir+/$lt_ltdl_dir}"
@@ -11658,13 +11646,13 @@
 
 	LIBLTDL=-lltdl
 	LTDLDEPS=
 	LTDLINCL=
 	;;
   ,no*,no,*)
-	as_fn_error $? "\`--with-ltdl-include' and \`--with-ltdl-lib' options must be used together" "$LINENO" 5
+	as_fn_error "\`--with-ltdl-include' and \`--with-ltdl-lib' options must be used together" "$LINENO" 5
 	;;
   *)	with_included_ltdl=no
 	LIBLTDL="-L$with_ltdl_lib -lltdl"
 	LTDLDEPS=
 	LTDLINCL="-I$with_ltdl_include"
 	;;
@@ -11728,13 +11716,14 @@
 
 for ac_header in unistd.h dl.h sys/dl.h dld.h mach-o/dyld.h dirent.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
 "
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -11742,13 +11731,14 @@
 
 
 for ac_func in closedir opendir readdir
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
+eval as_val=\$$as_ac_var
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 else
 
@@ -11759,13 +11749,14 @@
 done
 
 for ac_func in strlcat strlcpy
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
+eval as_val=\$$as_ac_var
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 else
 
@@ -11904,17 +11895,17 @@
 # Reject unsafe characters in $srcdir or the absolute working directory
 # name.  Accept space and tab only in the latter.
 am_lf='
 '
 case `pwd` in
   *[\\\"\#\$\&\'\`$am_lf]*)
-    as_fn_error $? "unsafe absolute working directory name" "$LINENO" 5 ;;
+    as_fn_error "unsafe absolute working directory name" "$LINENO" 5;;
 esac
 case $srcdir in
   *[\\\"\#\$\&\'\`$am_lf\ \	]*)
-    as_fn_error $? "unsafe srcdir value: \`$srcdir'" "$LINENO" 5 ;;
+    as_fn_error "unsafe srcdir value: \`$srcdir'" "$LINENO" 5;;
 esac
 
 # Do `set' in a subshell so we don't clobber the current shell's
 # arguments.  Must try -L first in case configure is actually a
 # symlink; some systems play weird games with the mod time of symlinks
 # (eg FreeBSD returns the mod time of the symlink's containing
@@ -11930,23 +11921,23 @@
       && test "$*" != "X conftest.file $srcdir/configure"; then
 
       # If neither matched, then we have a broken ls.  This can happen
       # if, for instance, CONFIG_SHELL is bash and it inherits a
       # broken ls alias from the environment.  This has actually
       # happened.  Such a system could not be considered "sane".
-      as_fn_error $? "ls -t appears to fail.  Make sure there is not a broken
+      as_fn_error "ls -t appears to fail.  Make sure there is not a broken
 alias in your environment" "$LINENO" 5
    fi
 
    test "$2" = conftest.file
    )
 then
    # Ok.
    :
 else
-   as_fn_error $? "newly created file is older than distributed files!
+   as_fn_error "newly created file is older than distributed files!
 Check your system clock" "$LINENO" 5
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
 test "$program_prefix" != NONE &&
   program_transform_name="s&^&$program_prefix&;$program_transform_name"
@@ -12178,21 +12169,21 @@
 done
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
 $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
 set x ${MAKE-make}
 ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
-if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\"" = set; then :
+if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat >conftest.make <<\_ACEOF
 SHELL = /bin/sh
 all:
 	@echo '@@@%%%=$(MAKE)=@@@%%%'
 _ACEOF
-# GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
+# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
 case `${MAKE-make} -f conftest.make 2>/dev/null` in
   *@@@%%%=?*=@@@%%%*)
     eval ac_cv_prog_make_${ac_make}_set=yes;;
   *)
     eval ac_cv_prog_make_${ac_make}_set=no;;
 esac
@@ -12282,13 +12273,13 @@
 if test "`cd $srcdir && pwd`" != "`pwd`"; then
   # Use -I$(srcdir) only when $(srcdir) != ., so that make's output
   # is not polluted with repeated "-I."
   am__isrc=' -I$(srcdir)'
   # test to see if srcdir already configured
   if test -f $srcdir/config.status; then
-    as_fn_error $? "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
+    as_fn_error "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
   fi
 fi
 
 # test whether we have cygpath
 if test -z "$CYGPATH_W"; then
   if (cygpath --version) >/dev/null 2>/dev/null; then
@@ -12298,13 +12289,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='collectd'
- VERSION='5.1.3'
+ VERSION='5.2.0'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -12332,94 +12323,13 @@
 # We need awk for the "check" target.  The system "awk" is bad on
 # some platforms.
 # Always define AMTAR for backward compatibility.
 
 AMTAR=${AMTAR-"${am_missing_run}tar"}
 
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to create a pax tar archive" >&5
-$as_echo_n "checking how to create a pax tar archive... " >&6; }
-# Loop over all known methods to create a tar archive until one works.
-_am_tools='gnutar  pax cpio none'
-_am_tools=${am_cv_prog_tar_pax-$_am_tools}
-# Do not fold the above two line into one, because Tru64 sh and
-# Solaris sh will not grok spaces in the rhs of `-'.
-for _am_tool in $_am_tools
-do
-  case $_am_tool in
-  gnutar)
-    for _am_tar in tar gnutar gtar;
-    do
-      { echo "$as_me:$LINENO: $_am_tar --version" >&5
-   ($_am_tar --version) >&5 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); } && break
-    done
-    am__tar="$_am_tar --format=posix -chf - "'"$$tardir"'
-    am__tar_="$_am_tar --format=posix -chf - "'"$tardir"'
-    am__untar="$_am_tar -xf -"
-    ;;
-  plaintar)
-    # Must skip GNU tar: if it does not support --format= it doesn't create
-    # ustar tarball either.
-    (tar --version) >/dev/null 2>&1 && continue
-    am__tar='tar chf - "$$tardir"'
-    am__tar_='tar chf - "$tardir"'
-    am__untar='tar xf -'
-    ;;
-  pax)
-    am__tar='pax -L -x pax -w "$$tardir"'
-    am__tar_='pax -L -x pax -w "$tardir"'
-    am__untar='pax -r'
-    ;;
-  cpio)
-    am__tar='find "$$tardir" -print | cpio -o -H pax -L'
-    am__tar_='find "$tardir" -print | cpio -o -H pax -L'
-    am__untar='cpio -i -H pax -d'
-    ;;
-  none)
-    am__tar=false
-    am__tar_=false
-    am__untar=false
-    ;;
-  esac
-
-  # If the value was cached, stop now.  We just wanted to have am__tar
-  # and am__untar set.
-  test -n "${am_cv_prog_tar_pax}" && break
-
-  # tar/untar a dummy directory, and stop if the command works
-  rm -rf conftest.dir
-  mkdir conftest.dir
-  echo GrepMe > conftest.dir/file
-  { echo "$as_me:$LINENO: tardir=conftest.dir && eval $am__tar_ >conftest.tar" >&5
-   (tardir=conftest.dir && eval $am__tar_ >conftest.tar) >&5 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }
-  rm -rf conftest.dir
-  if test -s conftest.tar; then
-    { echo "$as_me:$LINENO: $am__untar <conftest.tar" >&5
-   ($am__untar <conftest.tar) >&5 2>&5
-   ac_status=$?
-   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-   (exit $ac_status); }
-    grep GrepMe conftest.dir/file >/dev/null 2>&1 && break
-  fi
-done
-rm -rf conftest.dir
-
-if test "${am_cv_prog_tar_pax+set}" = set; then :
-  $as_echo_n "(cached) " >&6
-else
-  am_cv_prog_tar_pax=$_am_tool
-fi
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $am_cv_prog_tar_pax" >&5
-$as_echo "$am_cv_prog_tar_pax" >&6; }
+am__tar='${AMTAR} chof - "$$tardir"'; am__untar='${AMTAR} xf -'
 
 
 
 
 depcc="$CC"   am_compiler_list=
 
@@ -13057,14 +12967,14 @@
 
 fi
 
 
 test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "no acceptable C compiler found in \$PATH
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "no acceptable C compiler found in \$PATH
+See \`config.log' for more details." "$LINENO" 5; }
 
 # Provide some information about the compiler.
 $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
 set X $ac_compile
 ac_compiler=$2
 for ac_option in --version -v -V -qversion; do
@@ -13339,13 +13249,13 @@
 if ac_fn_c_try_cpp "$LINENO"; then :
 
 else
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
@@ -13355,17 +13265,17 @@
 continue
 else
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.i conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
   break
 fi
 
     done
     ac_cv_prog_CPP=$CPP
@@ -13398,13 +13308,13 @@
 if ac_fn_c_try_cpp "$LINENO"; then :
 
 else
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
@@ -13414,24 +13324,24 @@
 continue
 else
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.i conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.i conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
 
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details." "$LINENO" 5; }
 fi
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
@@ -13450,21 +13360,21 @@
 fi
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
 $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
 set x ${MAKE-make}
 ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
-if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\"" = set; then :
+if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat >conftest.make <<\_ACEOF
 SHELL = /bin/sh
 all:
 	@echo '@@@%%%=$(MAKE)=@@@%%%'
 _ACEOF
-# GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
+# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
 case `${MAKE-make} -f conftest.make 2>/dev/null` in
   *@@@%%%=?*=@@@%%%*)
     eval ac_cv_prog_make_${ac_make}_set=yes;;
   *)
     eval ac_cv_prog_make_${ac_make}_set=no;;
 esac
@@ -13486,13 +13396,13 @@
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether cc understands -c and -o together" >&5
 $as_echo_n "checking whether cc understands -c and -o together... " >&6; }
 fi
 set dummy $CC; ac_cc=`$as_echo "$2" |
 		      sed 's/[^a-zA-Z0-9_]/_/g;s/^[0-9]/_/'`
-if eval "test \"\${ac_cv_prog_cc_${ac_cc}_c_o+set}\"" = set; then :
+if { as_var=ac_cv_prog_cc_${ac_cc}_c_o; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
@@ -13726,13 +13636,13 @@
 
 if test -f lex.yy.c; then
   ac_cv_prog_lex_root=lex.yy
 elif test -f lexyy.c; then
   ac_cv_prog_lex_root=lexyy
 else
-  as_fn_error $? "cannot find output from $LEX; giving up" "$LINENO" 5
+  as_fn_error "cannot find output from $LEX; giving up" "$LINENO" 5
 fi
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_root" >&5
 $as_echo "$ac_cv_prog_lex_root" >&6; }
 LEX_OUTPUT_ROOT=$ac_cv_prog_lex_root
 
@@ -14270,13 +14177,13 @@
 
 ac_header_dirent=no
 for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h; do
   as_ac_Header=`$as_echo "ac_cv_header_dirent_$ac_hdr" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_hdr that defines DIR" >&5
 $as_echo_n "checking for $ac_hdr that defines DIR... " >&6; }
-if eval "test \"\${$as_ac_Header+set}\"" = set; then :
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <sys/types.h>
 #include <$ac_hdr>
@@ -14297,13 +14204,14 @@
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 fi
 eval ac_res=\$$as_ac_Header
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_hdr" | $as_tr_cpp` 1
 _ACEOF
 
 ac_header_dirent=$ac_hdr; break
 fi
@@ -14538,13 +14446,14 @@
 
 
 for ac_header in stdio.h errno.h math.h stdarg.h syslog.h fcntl.h signal.h assert.h sys/types.h sys/socket.h sys/select.h poll.h netdb.h arpa/inet.h sys/resource.h sys/param.h kstat.h regex.h sys/ioctl.h endian.h sys/isa_defs.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -14800,26 +14709,28 @@
 if test "x$ac_system" = "xDarwin"
 then
 	for ac_header in mach/mach_init.h mach/host_priv.h mach/mach_error.h mach/mach_host.h mach/mach_port.h mach/mach_types.h mach/message.h mach/processor_set.h mach/processor.h mach/processor_info.h mach/task.h mach/thread_act.h mach/vm_region.h mach/vm_map.h mach/vm_prot.h mach/vm_statistics.h mach/kern_return.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
 done
 
 	for ac_header in CoreFoundation/CoreFoundation.h IOKit/IOKitLib.h IOKit/IOTypes.h IOKit/ps/IOPSKeys.h IOKit/IOBSD.h IOKit/storage/IOBlockStorageDriver.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -14870,13 +14781,14 @@
 
 # For hddtemp module
 for ac_header in linux/major.h libgen.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -14969,13 +14881,14 @@
 #endif
 #if HAVE_SYS_PARAM_H
 # include <sys/param.h>
 #endif
 
 "
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 else
   have_sys_swap_h="no"
@@ -15001,13 +14914,14 @@
 # For the processes plugin
 # For users module
 for ac_header in sys/loadavg.h linux/config.h utmp.h utmpx.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -15310,13 +15224,14 @@
 
 
 for ac_header in pwd.h grp.h sys/un.h ctype.h limits.h xfs/xqm.h fs_info.h fshelp.h paths.h mntent.h mnttab.h sys/fstyp.h sys/fs_types.h sys/mntent.h sys/mnttab.h sys/statfs.h sys/statvfs.h sys/vfs.h sys/vfstab.h kvm.h wordexp.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -15437,12 +15352,26 @@
 
 fi
 
 done
 
 
+have_net_pfvar_h="no"
+for ac_header in net/pfvar.h
+do :
+  ac_fn_c_check_header_mongrel "$LINENO" "net/pfvar.h" "ac_cv_header_net_pfvar_h" "$ac_includes_default"
+if test "x$ac_cv_header_net_pfvar_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_NET_PFVAR_H 1
+_ACEOF
+ have_net_pfvar_h="yes"
+fi
+
+done
+
+
 # For the multimeter plugin
 have_termios_h="no"
 for ac_header in termios.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "termios.h" "ac_cv_header_termios_h" "$ac_includes_default"
 if test "x$ac_cv_header_termios_h" = x""yes; then :
@@ -15672,13 +15601,14 @@
 fi
 
 for ac_func in gettimeofday select strdup strtol getaddrinfo getnameinfo strchr memcpy strstr strcmp strncmp strncpy strlen strncasecmp strcasecmp openlog closelog sysconf setenv if_indextoname
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
+eval as_val=\$$as_ac_var
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 done
@@ -15871,14 +15799,14 @@
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
   c_cv_have_strtok_r_reentrant="yes"
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "strtok_r isn't available. Please file a bugreport!
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "strtok_r isn't available. Please file a bugreport!
+See \`config.log' for more details." "$LINENO" 5; }
 
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 
 fi
@@ -15893,13 +15821,14 @@
 fi
 
 for ac_func in getpwnam_r getgrnam_r setgroups regcomp regerror regexec regfree
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
+eval as_val=\$$as_ac_var
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 done
@@ -15951,13 +15880,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_socket" >&5
 $as_echo "$ac_cv_lib_socket_socket" >&6; }
 if test "x$ac_cv_lib_socket_socket" = x""yes; then :
   socket_needs_socket="yes"
 else
-  as_fn_error $? "cannot find socket" "$LINENO" 5
+  as_fn_error "cannot find socket" "$LINENO" 5
 fi
 
 fi
 done
 
  if test "x$socket_needs_socket" = "xyes"; then
@@ -16167,13 +16096,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_posix4_nanosleep" >&5
 $as_echo "$ac_cv_lib_posix4_nanosleep" >&6; }
 if test "x$ac_cv_lib_posix4_nanosleep" = x""yes; then :
   nanosleep_needs_posix4="yes"
 else
-  as_fn_error $? "cannot find nanosleep" "$LINENO" 5
+  as_fn_error "cannot find nanosleep" "$LINENO" 5
 fi
 
 fi
 
 fi
 done
@@ -16380,12 +16309,13 @@
 if test "${c_cv_have_strptime_default+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
+$ac_includes_default
 #include <time.h>
 
 int
 main ()
 {
 
@@ -16423,12 +16352,13 @@
 #ifndef _POSIX_C_SOURCE
 # define _POSIX_C_SOURCE 200112L
 #endif
 #ifndef _XOPEN_SOURCE
 # define _XOPEN_SOURCE 500
 #endif
+$ac_includes_default
 #include <time.h>
 
 int
 main ()
 {
 
@@ -16484,13 +16414,13 @@
 $as_echo_n "checking whether swapctl takes two arguments... " >&6; }
 if test "${c_cv_have_swapctl_two_args+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-
+$ac_includes_default
 #if HAVE_SYS_SWAP_H && !defined(_LP64) && _FILE_OFFSET_BITS == 64
 #  undef _FILE_OFFSET_BITS
 #  undef _LARGEFILE64_SOURCE
 #endif
 #include <sys/stat.h>
 #include <sys/swap.h>
@@ -16491,18 +16421,17 @@
 #if HAVE_SYS_SWAP_H && !defined(_LP64) && _FILE_OFFSET_BITS == 64
 #  undef _FILE_OFFSET_BITS
 #  undef _LARGEFILE64_SOURCE
 #endif
 #include <sys/stat.h>
 #include <sys/swap.h>
-
 int
 main ()
 {
 
-int num = swapctl(0, NULL);
+                                int num = swapctl(0, NULL);
 
 
   ;
   return 0;
 }
 _ACEOF
@@ -16521,13 +16450,13 @@
 $as_echo_n "checking whether swapctl takes three arguments... " >&6; }
 if test "${c_cv_have_swapctl_three_args+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-
+$ac_includes_default
 #if HAVE_SYS_SWAP_H && !defined(_LP64) && _FILE_OFFSET_BITS == 64
 #  undef _FILE_OFFSET_BITS
 #  undef _LARGEFILE64_SOURCE
 #endif
 #include <sys/stat.h>
 #include <sys/swap.h>
@@ -16528,18 +16457,17 @@
 #if HAVE_SYS_SWAP_H && !defined(_LP64) && _FILE_OFFSET_BITS == 64
 #  undef _FILE_OFFSET_BITS
 #  undef _LARGEFILE64_SOURCE
 #endif
 #include <sys/stat.h>
 #include <sys/swap.h>
-
 int
 main ()
 {
 
-int num = swapctl(0, NULL, 0);
+                                int num = swapctl(0, NULL,0);
 
 
   ;
   return 0;
 }
 _ACEOF
@@ -16681,14 +16607,14 @@
 if test "${c_cv_have_nan_zero+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot run test program while cross compiling
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "cannot run test program while cross compiling
+See \`config.log' for more details." "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <stdlib.h>
 #include <math.h>
@@ -16746,13 +16671,13 @@
 
 else if test "x$nan_type" = "xzero"; then
 
 $as_echo "#define NAN_ZERO_ZERO 1" >>confdefs.h
 
 else
-  as_fn_error $? "Didn't find out how to statically initialize variables to NAN. Sorry." "$LINENO" 5
+  as_fn_error "Didn't find out how to statically initialize variables to NAN. Sorry." "$LINENO" 5
 fi; fi; fi
 
 
 # Check whether --with-fp-layout was given.
 if test "${with_fp_layout+set}" = set; then :
   withval=$with_fp_layout;
@@ -16760,13 +16685,13 @@
  	fp_layout_type="nothing"
  else if test "x$withval" = "xendianflip"; then
  	fp_layout_type="endianflip"
  else if test "x$withval" = "xintswap"; then
  	fp_layout_type="intswap"
  else
- 	as_fn_error $? "Invalid argument for --with-fp-layout. Valid arguments are: nothing, endianflip, intswap" "$LINENO" 5 ;
+ 	as_fn_error "Invalid argument for --with-fp-layout. Valid arguments are: nothing, endianflip, intswap" "$LINENO" 5;
 fi; fi; fi
 
 else
   fp_layout_type="unknown"
 fi
 
@@ -16777,14 +16702,14 @@
 if test "${c_cv_fp_layout_need_nothing+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot run test program while cross compiling
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "cannot run test program while cross compiling
+See \`config.log' for more details." "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <stdlib.h>
 #include <stdio.h>
@@ -16851,14 +16775,14 @@
 if test "${c_cv_fp_layout_need_endianflip+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot run test program while cross compiling
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "cannot run test program while cross compiling
+See \`config.log' for more details." "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <stdlib.h>
 #include <stdio.h>
@@ -16933,14 +16856,14 @@
 if test "${c_cv_fp_layout_need_intswap+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot run test program while cross compiling
-See \`config.log' for more details" "$LINENO" 5 ; }
+as_fn_error "cannot run test program while cross compiling
+See \`config.log' for more details." "$LINENO" 5; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <stdlib.h>
 #include <stdio.h>
@@ -17014,13 +16936,13 @@
 
 else if test "x$fp_layout_type" = "xintswap"; then
 
 $as_echo "#define FP_LAYOUT_NEED_INTSWAP 1" >>confdefs.h
 
 else
-  as_fn_error $? "Didn't find out how doubles are stored in memory. Sorry." "$LINENO" 5
+  as_fn_error "Didn't find out how doubles are stored in memory. Sorry." "$LINENO" 5
 fi; fi; fi
 
 have_getfsstat="no"
 for ac_func in getfsstat
 do :
   ac_fn_c_check_func "$LINENO" "getfsstat" "ac_cv_func_getfsstat"
@@ -17201,23 +17123,22 @@
 $as_echo_n "checking whether getmntent takes one argument... " >&6; }
 if test "${c_cv_have_one_getmntent+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-
+$ac_includes_default
 #include "$srcdir/src/utils_mount.h"
-
 int
 main ()
 {
 
-FILE *fh;
-struct mntent *me;
-fh = setmntent ("/etc/mtab", "r");
-me = getmntent (fh);
+				 FILE *fh;
+				 struct mntent *me;
+				 fh = setmntent ("/etc/mtab", "r");
+				 me = getmntent (fh);
 
 
   ;
   return 0;
 }
 _ACEOF
@@ -17236,15 +17157,14 @@
 $as_echo_n "checking whether getmntent takes two arguments... " >&6; }
 if test "${c_cv_have_two_getmntent+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-
+$ac_includes_default
 #include "$srcdir/src/utils_mount.h"
-
 int
 main ()
 {
 
 				 FILE *fh;
 				 struct mnttab mt;
@@ -17304,29 +17224,30 @@
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if have htonll defined" >&5
 $as_echo_n "checking if have htonll defined... " >&6; }
 
     have_htonll="no"
     cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-[
+
+
 #include <sys/types.h>
 #include <netinet/in.h>
 #if HAVE_INTTYPES_H
 # include <inttypes.h>
 #endif
-]
+
 int
 main ()
 {
-[
+
           return htonll(0);
-]
 
   ;
   return 0;
 }
+
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
 
       have_htonll="yes"
 
 $as_echo "#define HAVE_HTONLL 1" >>confdefs.h
@@ -17455,12 +17376,13 @@
 
 
 fi
 
 
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "ki_pid" "ac_cv_member_struct_kinfo_proc_ki_pid" "
+$ac_includes_default
 #include <kvm.h>
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <sys/user.h>
 
 "
@@ -17479,12 +17401,13 @@
 else
 
 		have_struct_kinfo_proc_freebsd="no"
 
 fi
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "ki_rssize" "ac_cv_member_struct_kinfo_proc_ki_rssize" "
+$ac_includes_default
 #include <kvm.h>
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <sys/user.h>
 
 "
@@ -17503,12 +17426,13 @@
 else
 
 		have_struct_kinfo_proc_freebsd="no"
 
 fi
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "ki_rusage" "ac_cv_member_struct_kinfo_proc_ki_rusage" "
+$ac_includes_default
 #include <kvm.h>
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <sys/user.h>
 
 "
@@ -17529,12 +17453,13 @@
 		have_struct_kinfo_proc_freebsd="no"
 
 fi
 
 
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "kp_proc" "ac_cv_member_struct_kinfo_proc_kp_proc" "
+$ac_includes_default
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <kvm.h>
 
 "
 if test "x$ac_cv_member_struct_kinfo_proc_kp_proc" = x""yes; then :
@@ -17552,12 +17477,13 @@
 else
 
 		have_struct_kinfo_proc_openbsd="no"
 
 fi
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "kp_eproc" "ac_cv_member_struct_kinfo_proc_kp_eproc" "
+$ac_includes_default
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <kvm.h>
 
 "
 if test "x$ac_cv_member_struct_kinfo_proc_kp_eproc" = x""yes; then :
@@ -18343,13 +18269,14 @@
 if test "x$with_kvm_nlist" = "xyes"
 then
 	for ac_header in bsd/nlist.h nlist.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -19410,13 +19337,14 @@
 if test "x$with_libiptc" = "xpkgconfig"
 then
 	for ac_header in libiptc/libiptc.h libiptc/libip6tc.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 else
   with_libiptc="no (header file missing)"
@@ -19533,13 +19461,14 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "
 #include \"$srcdir/src/owniptc/ipt_kernel_headers.h\"
 
 "
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 else
 
@@ -19612,72 +19541,72 @@
 if test "x$with_java" = "xyes"
 then
 	if test -d "$with_java_home"
 	then
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for jni.h" >&5
 $as_echo_n "checking for jni.h... " >&6; }
-		TMPVAR=`find "$with_java_home" -name jni.h -type f -exec 'dirname' '{}' ';' | head -n 1`
-		if test "x$TMPVAR" != "x"
+		TMPDIR=`find "$with_java_home" -name jni.h -type f -exec 'dirname' '{}' ';' 2>/dev/null | head -n 1`
+		if test "x$TMPDIR" != "x"
 		then
-			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $TMPVAR" >&5
-$as_echo "found in $TMPVAR" >&6; }
-			JAVA_CPPFLAGS="$JAVA_CPPFLAGS -I$TMPVAR"
+			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $TMPDIR" >&5
+$as_echo "found in $TMPDIR" >&6; }
+			JAVA_CPPFLAGS="$JAVA_CPPFLAGS -I$TMPDIR"
 		else
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
 $as_echo "not found" >&6; }
 		fi
 
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for jni_md.h" >&5
 $as_echo_n "checking for jni_md.h... " >&6; }
-		TMPVAR=`find "$with_java_home" -name jni_md.h -type f -exec 'dirname' '{}' ';' | head -n 1`
-		if test "x$TMPVAR" != "x"
+		TMPDIR=`find "$with_java_home" -name jni_md.h -type f -exec 'dirname' '{}' ';' 2>/dev/null | head -n 1`
+		if test "x$TMPDIR" != "x"
 		then
-			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $TMPVAR" >&5
-$as_echo "found in $TMPVAR" >&6; }
-			JAVA_CPPFLAGS="$JAVA_CPPFLAGS -I$TMPVAR"
+			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $TMPDIR" >&5
+$as_echo "found in $TMPDIR" >&6; }
+			JAVA_CPPFLAGS="$JAVA_CPPFLAGS -I$TMPDIR"
 		else
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
 $as_echo "not found" >&6; }
 		fi
 
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for libjvm.so" >&5
 $as_echo_n "checking for libjvm.so... " >&6; }
-		TMPVAR=`find "$with_java_home" -name libjvm.so -type f -exec 'dirname' '{}' ';' | head -n 1`
-		if test "x$TMPVAR" != "x"
+		TMPDIR=`find "$with_java_home" -name libjvm.so -type f -exec 'dirname' '{}' ';' 2>/dev/null | head -n 1`
+		if test "x$TMPDIR" != "x"
 		then
-			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $TMPVAR" >&5
-$as_echo "found in $TMPVAR" >&6; }
-			JAVA_LDFLAGS="$JAVA_LDFLAGS -L$TMPVAR -Wl,-rpath -Wl,$TMPVAR"
+			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: found in $TMPDIR" >&5
+$as_echo "found in $TMPDIR" >&6; }
+			JAVA_LDFLAGS="$JAVA_LDFLAGS -L$TMPDIR -Wl,-rpath -Wl,$TMPDIR"
 		else
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
 $as_echo "not found" >&6; }
 		fi
 
 		if test "x$JAVAC" = "x"
 		then
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for javac" >&5
 $as_echo_n "checking for javac... " >&6; }
-			TMPVAR=`find "$with_java_home" -name javac -type f | head -n 1`
-			if test "x$TMPVAR" != "x"
+			TMPDIR=`find "$with_java_home" -name javac -type f 2>/dev/null | head -n 1`
+			if test "x$TMPDIR" != "x"
 			then
-				JAVAC="$TMPVAR"
+				JAVAC="$TMPDIR"
 				{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $JAVAC" >&5
 $as_echo "$JAVAC" >&6; }
 			else
 				{ $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
 $as_echo "not found" >&6; }
 			fi
 		fi
 		if test "x$JAR" = "x"
 		then
 			{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for jar" >&5
 $as_echo_n "checking for jar... " >&6; }
-			TMPVAR=`find "$with_java_home" -name jar -type f | head -n 1`
-			if test "x$TMPVAR" != "x"
+			TMPDIR=`find "$with_java_home" -name jar -type f 2>/dev/null | head -n 1`
+			if test "x$TMPDIR" != "x"
 			then
-				JAR="$TMPVAR"
+				JAR="$TMPDIR"
 				{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $JAR" >&5
 $as_echo "$JAR" >&6; }
 			else
 				{ $as_echo "$as_me:${as_lineno-$LINENO}: result: not found" >&5
 $as_echo "not found" >&6; }
 			fi
@@ -20523,13 +20452,13 @@
 	 if test -d "$withval/include"
 	 then
 		 with_libnetlink_cflags="-I$withval/include"
 		 with_libnetlink_libs="-L$withval/lib -lnetlink"
 		 with_libnetlink="yes"
 	 else
-		 as_fn_error $? "\"no such directory: $withval/include\"" "$LINENO" 5
+		 as_fn_error "\"no such directory: $withval/include\"" "$LINENO" 5
 	 fi
  fi; fi
 
 else
 
  if test "x$ac_system" = "xLinux"
@@ -20555,13 +20484,14 @@
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>
 #include <linux/netlink.h>
 #include <linux/rtnetlink.h>
 "
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 	 with_libnetlink="yes"
 	 break
@@ -20575,39 +20505,40 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "#include <stdio.h>
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>
 "
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
+eval as_val=\$$as_ac_Header
+   if test "x$as_val" = x""yes; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
 done
 
 
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-[
-#include <stdio.h>
-#include <sys/types.h>
-#include <asm/types.h>
-#include <sys/socket.h>
-#include <linux/netlink.h>
-#include <linux/rtnetlink.h>
-]
+
+                            #include <stdio.h>
+                            #include <sys/types.h>
+                            #include <asm/types.h>
+                            #include <sys/socket.h>
+                            #include <linux/netlink.h>
+                            #include <linux/rtnetlink.h>
+
 int
 main ()
 {
-[
-int retval = TCA_STATS2;
-return (retval);
-]
+
+                                int retval = TCA_STATS2;
+                                return (retval);
+
 
   ;
   return 0;
 }
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
@@ -20616,30 +20547,23 @@
 
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 
 	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-[
 #include <stdio.h>
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>
 #include <linux/netlink.h>
 #include <linux/rtnetlink.h>
-]
-int
-main ()
-{
-[
-int retval = TCA_STATS;
-return (retval);
-]
 
-  ;
-  return 0;
+int main (void)
+{
+	int retval = TCA_STATS;
+	return (retval);
 }
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
 $as_echo "#define HAVE_TCA_STATS 1" >>confdefs.h
 
@@ -20640,14 +20564,15 @@
 }
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
 $as_echo "#define HAVE_TCA_STATS 1" >>confdefs.h
 
+
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext;
 
 	CFLAGS="$SAVE_CFLAGS"
 fi
 if test "x$with_libnetlink" = "xyes"
 then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for rtnl_open in -lnetlink" >&5
@@ -20703,14 +20628,13 @@
 if test "${c_cv_rtnl_dump_filter_five_args+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
-#include <stdio.h>
-#include <sys/types.h>
+$ac_includes_default
 #include <asm/types.h>
 #include <sys/socket.h>
 #if HAVE_LIBNETLINK_H
 # include <libnetlink.h>
 #elif HAVE_IPROUTE_LIBNETLINK_H
 # include <iproute/libnetlink.h>
@@ -20748,14 +20672,13 @@
 if test "${c_cv_rtnl_dump_filter_three_args+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
-#include <stdio.h>
-#include <sys/types.h>
+$ac_includes_default
 #include <asm/types.h>
 #include <sys/socket.h>
 #if HAVE_LIBNETLINK_H
 # include <libnetlink.h>
 #elif HAVE_IPROUTE_LIBNETLINK_H
 # include <iproute/libnetlink.h>
@@ -21103,13 +21026,13 @@
 		then
 			liboconfig_CPPFLAGS="$CPPFLAGS -I$withval/include"
 		fi
 	fi
 	if test "x$withval" = "xno"
 	then
-		as_fn_error $? "\"liboconfig is required\"" "$LINENO" 5
+		as_fn_error "\"liboconfig is required\"" "$LINENO" 5
 	fi
 
 else
 
 	with_liboconfig="yes"
 
@@ -24228,72 +24148,74 @@
 
 
 pkg_failed=no
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LIBNOTIFY" >&5
 $as_echo_n "checking for LIBNOTIFY... " >&6; }
 
-if test -n "$LIBNOTIFY_CFLAGS"; then
-    pkg_cv_LIBNOTIFY_CFLAGS="$LIBNOTIFY_CFLAGS"
- elif test -n "$PKG_CONFIG"; then
-    if test -n "$PKG_CONFIG" && \
+if test -n "$PKG_CONFIG"; then
+    if test -n "$LIBNOTIFY_CFLAGS"; then
+        pkg_cv_LIBNOTIFY_CFLAGS="$LIBNOTIFY_CFLAGS"
+    else
+        if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libnotify\""; } >&5
   ($PKG_CONFIG --exists --print-errors "libnotify") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_LIBNOTIFY_CFLAGS=`$PKG_CONFIG --cflags "libnotify" 2>/dev/null`
 else
   pkg_failed=yes
 fi
- else
-    pkg_failed=untried
+    fi
+else
+	pkg_failed=untried
 fi
-if test -n "$LIBNOTIFY_LIBS"; then
-    pkg_cv_LIBNOTIFY_LIBS="$LIBNOTIFY_LIBS"
- elif test -n "$PKG_CONFIG"; then
-    if test -n "$PKG_CONFIG" && \
+if test -n "$PKG_CONFIG"; then
+    if test -n "$LIBNOTIFY_LIBS"; then
+        pkg_cv_LIBNOTIFY_LIBS="$LIBNOTIFY_LIBS"
+    else
+        if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libnotify\""; } >&5
   ($PKG_CONFIG --exists --print-errors "libnotify") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_LIBNOTIFY_LIBS=`$PKG_CONFIG --libs "libnotify" 2>/dev/null`
 else
   pkg_failed=yes
 fi
- else
-    pkg_failed=untried
+    fi
+else
+	pkg_failed=untried
 fi
 
 
 
 if test $pkg_failed = yes; then
-   	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
 
 if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
         _pkg_short_errors_supported=yes
 else
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "libnotify" 2>&1`
+	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "libnotify"`
         else
-	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --print-errors "libnotify" 2>&1`
+	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libnotify"`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$LIBNOTIFY_PKG_ERRORS" >&5
 
-	if test "x$LIBNOTIFY_PKG_ERRORS" = "x"; then
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
+                if test "x$LIBNOTIFY_PKG_ERRORS" = "x"; then
 			 with_libnotify="no"
 		 else
 			 with_libnotify="no ($LIBNOTIFY_PKG_ERRORS)"
 		 fi
 elif test $pkg_failed = untried; then
-     	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
 	if test "x$LIBNOTIFY_PKG_ERRORS" = "x"; then
 			 with_libnotify="no"
 		 else
 			 with_libnotify="no ($LIBNOTIFY_PKG_ERRORS)"
 		 fi
 else
@@ -24520,17 +24442,19 @@
         plugin_tcpconns="yes"
 fi
 
 if test "x$with_perfstat" = "xyes"
 then
 	plugin_cpu="yes"
+	plugin_contextswitch="yes"
 	plugin_disk="yes"
 	plugin_memory="yes"
 	plugin_swap="yes"
 	plugin_interface="yes"
 	plugin_load="yes"
+	plugin_uptime="yes"
 fi
 
 if test "x$with_procinfo" = "xyes"
 then
 	plugin_processes="yes"
 fi
@@ -24738,12 +24662,72 @@
 
 
 
 
     enable_plugin="no"
     force="no"
+    # Check whether --enable-aggregation was given.
+if test "${enable_aggregation+set}" = set; then :
+  enableval=$enable_aggregation;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else if test "x$enableval" = "xforce"
+     then
+	     enable_plugin="yes"
+	     force="yes"
+     else
+	     enable_plugin="no (disabled on command line)"
+     fi; fi
+
+else
+
+	 if test "x$enable_all_plugins" = "xauto"
+	 then
+	     if test "xyes" = "xyes"
+	     then
+		     enable_plugin="yes"
+	     else
+		     enable_plugin="no"
+	     fi
+	 else
+	     enable_plugin="$enable_all_plugins"
+	 fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+	    if test "xyes" = "xyes" || test "x$force" = "xyes"
+	    then
+
+$as_echo "#define HAVE_PLUGIN_AGGREGATION 1" >>confdefs.h
+
+		    if test "xyes" != "xyes"
+		    then
+			    dependency_warning="yes"
+		    fi
+	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
+		    dependency_error="yes"
+		    enable_plugin="no (dependency error)"
+	    fi
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_AGGREGATION_TRUE=
+  BUILD_PLUGIN_AGGREGATION_FALSE='#'
+else
+  BUILD_PLUGIN_AGGREGATION_TRUE='#'
+  BUILD_PLUGIN_AGGREGATION_FALSE=
+fi
+
+    enable_aggregation="$enable_plugin"
+
+
+
+    enable_plugin="no"
+    force="no"
     # Check whether --enable-amqp was given.
 if test "${enable_amqp+set}" = set; then :
   enableval=$enable_amqp;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -28695,12 +28679,72 @@
   BUILD_PLUGIN_PERL_FALSE=
 fi
 
     enable_perl="$enable_plugin"
 
 
+
+    enable_plugin="no"
+    force="no"
+    # Check whether --enable-pf was given.
+if test "${enable_pf+set}" = set; then :
+  enableval=$enable_pf;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else if test "x$enableval" = "xforce"
+     then
+	     enable_plugin="yes"
+	     force="yes"
+     else
+	     enable_plugin="no (disabled on command line)"
+     fi; fi
+
+else
+
+	 if test "x$enable_all_plugins" = "xauto"
+	 then
+	     if test "x$have_net_pfvar_h" = "xyes"
+	     then
+		     enable_plugin="yes"
+	     else
+		     enable_plugin="no"
+	     fi
+	 else
+	     enable_plugin="$enable_all_plugins"
+	 fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+	    if test "x$have_net_pfvar_h" = "xyes" || test "x$force" = "xyes"
+	    then
+
+$as_echo "#define HAVE_PLUGIN_PF 1" >>confdefs.h
+
+		    if test "x$have_net_pfvar_h" != "xyes"
+		    then
+			    dependency_warning="yes"
+		    fi
+	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
+		    dependency_error="yes"
+		    enable_plugin="no (dependency error)"
+	    fi
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_PF_TRUE=
+  BUILD_PLUGIN_PF_FALSE='#'
+else
+  BUILD_PLUGIN_PF_TRUE='#'
+  BUILD_PLUGIN_PF_FALSE=
+fi
+
+    enable_pf="$enable_plugin"
+
+
 # FIXME: Check for libevent, too.
 
     enable_plugin="no"
     force="no"
     # Check whether --enable-pinba was given.
 if test "${enable_pinba+set}" = set; then :
@@ -31479,13 +31523,13 @@
 
 
 
 
 
 
-ac_config_files="$ac_config_files src/libcollectdclient/lcc_features.h"
+ac_config_files="$ac_config_files src/libcollectdclient/collectd/lcc_features.h"
 
 
 ac_config_files="$ac_config_files Makefile src/Makefile src/collectd.conf src/libcollectdclient/Makefile src/libcollectdclient/libcollectdclient.pc src/liboconfig/Makefile bindings/Makefile bindings/java/Makefile"
 
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
@@ -31567,13 +31611,12 @@
 test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
 
 DEFS=-DHAVE_CONFIG_H
 
 ac_libobjs=
 ac_ltlibobjs=
-U=
 for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
   # 1. Remove the extension, and $U if already installed.
   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
   ac_i=`$as_echo "$ac_i" | sed "$ac_script"`
   # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
   #    will be set to the directory where LIBOBJS objects are built.
@@ -31583,17 +31626,17 @@
 LIBOBJS=$ac_libobjs
 
 LTLIBOBJS=$ac_ltlibobjs
 
 
 if test -z "${INSTALL_LTDL_TRUE}" && test -z "${INSTALL_LTDL_FALSE}"; then
-  as_fn_error $? "conditional \"INSTALL_LTDL\" was never defined.
+  as_fn_error "conditional \"INSTALL_LTDL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${CONVENIENCE_LTDL_TRUE}" && test -z "${CONVENIENCE_LTDL_FALSE}"; then
-  as_fn_error $? "conditional \"CONVENIENCE_LTDL\" was never defined.
+  as_fn_error "conditional \"CONVENIENCE_LTDL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 LT_CONFIG_H=src/config.h
 
     _ltdl_libobjs=
     _ltdl_ltlibobjs=
@@ -31608,661 +31651,669 @@
     ltdl_LIBOBJS=$_ltdl_libobjs
 
     ltdl_LTLIBOBJS=$_ltdl_ltlibobjs
 
 
 if test -z "${AMDEP_TRUE}" && test -z "${AMDEP_FALSE}"; then
-  as_fn_error $? "conditional \"AMDEP\" was never defined.
+  as_fn_error "conditional \"AMDEP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
-  as_fn_error $? "conditional \"am__fastdepCC\" was never defined.
+  as_fn_error "conditional \"am__fastdepCC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
  if test -n "$EXEEXT"; then
   am__EXEEXT_TRUE=
   am__EXEEXT_FALSE='#'
 else
   am__EXEEXT_TRUE='#'
   am__EXEEXT_FALSE=
 fi
 
 if test -z "${COMPILER_IS_GCC_TRUE}" && test -z "${COMPILER_IS_GCC_FALSE}"; then
-  as_fn_error $? "conditional \"COMPILER_IS_GCC\" was never defined.
+  as_fn_error "conditional \"COMPILER_IS_GCC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${HAVE_PROTOC_C_TRUE}" && test -z "${HAVE_PROTOC_C_FALSE}"; then
-  as_fn_error $? "conditional \"HAVE_PROTOC_C\" was never defined.
+  as_fn_error "conditional \"HAVE_PROTOC_C\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_FEATURE_STANDARDS_TRUE}" && test -z "${BUILD_FEATURE_STANDARDS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_FEATURE_STANDARDS\" was never defined.
+  as_fn_error "conditional \"BUILD_FEATURE_STANDARDS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${IP_VS_H_NEEDS_KERNEL_CFLAGS_TRUE}" && test -z "${IP_VS_H_NEEDS_KERNEL_CFLAGS_FALSE}"; then
-  as_fn_error $? "conditional \"IP_VS_H_NEEDS_KERNEL_CFLAGS\" was never defined.
+  as_fn_error "conditional \"IP_VS_H_NEEDS_KERNEL_CFLAGS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBSOCKET_TRUE}" && test -z "${BUILD_WITH_LIBSOCKET_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBSOCKET\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBSOCKET\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBRT_TRUE}" && test -z "${BUILD_WITH_LIBRT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBRT\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBRT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPOSIX4_TRUE}" && test -z "${BUILD_WITH_LIBPOSIX4_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBPOSIX4\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBPOSIX4\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBRESOLV_TRUE}" && test -z "${BUILD_WITH_LIBRESOLV_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBRESOLV\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBRESOLV\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_AIX_TRUE}" && test -z "${BUILD_AIX_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_AIX\" was never defined.
+  as_fn_error "conditional \"BUILD_AIX\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_PERFSTAT_TRUE}" && test -z "${BUILD_WITH_PERFSTAT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_PERFSTAT\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_PERFSTAT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKSTAT_TRUE}" && test -z "${BUILD_WITH_LIBKSTAT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBKSTAT\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBKSTAT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBDEVINFO_TRUE}" && test -z "${BUILD_WITH_LIBDEVINFO_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBDEVINFO\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBDEVINFO\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBIOKIT_TRUE}" && test -z "${BUILD_WITH_LIBIOKIT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBIOKIT\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBIOKIT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKVM_GETPROCS_TRUE}" && test -z "${BUILD_WITH_LIBKVM_GETPROCS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBKVM_GETPROCS\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBKVM_GETPROCS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE}" && test -z "${BUILD_WITH_LIBKVM_GETSWAPINFO_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBKVM_GETSWAPINFO\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBKVM_GETSWAPINFO\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKVM_NLIST_TRUE}" && test -z "${BUILD_WITH_LIBKVM_NLIST_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBKVM_NLIST\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBKVM_NLIST\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKVM_OPENFILES_TRUE}" && test -z "${BUILD_WITH_LIBKVM_OPENFILES_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBKVM_OPENFILES\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBKVM_OPENFILES\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBCREDIS_TRUE}" && test -z "${BUILD_WITH_LIBCREDIS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBCREDIS\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBCREDIS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBCURL_TRUE}" && test -z "${BUILD_WITH_LIBCURL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBCURL\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBCURL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBDBI_TRUE}" && test -z "${BUILD_WITH_LIBDBI_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBDBI\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBDBI\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBESMTP_TRUE}" && test -z "${BUILD_WITH_LIBESMTP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBESMTP\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBESMTP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBGANGLIA_TRUE}" && test -z "${BUILD_WITH_LIBGANGLIA_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBGANGLIA\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBGANGLIA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBGCRYPT_TRUE}" && test -z "${BUILD_WITH_LIBGCRYPT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBGCRYPT\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBGCRYPT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_OWN_LIBIPTC_TRUE}" && test -z "${BUILD_WITH_OWN_LIBIPTC_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_OWN_LIBIPTC\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_OWN_LIBIPTC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBIPTC_TRUE}" && test -z "${BUILD_WITH_LIBIPTC_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBIPTC\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBIPTC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_JAVA_TRUE}" && test -z "${BUILD_WITH_JAVA_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_JAVA\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_JAVA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBMEMCACHED_TRUE}" && test -z "${BUILD_WITH_LIBMEMCACHED_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBMEMCACHED\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBMEMCACHED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBMONGOC_TRUE}" && test -z "${BUILD_WITH_LIBMONGOC_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBMONGOC\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBMONGOC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBMYSQL_TRUE}" && test -z "${BUILD_WITH_LIBMYSQL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBMYSQL\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBMYSQL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBNETLINK_TRUE}" && test -z "${BUILD_WITH_LIBNETLINK_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBNETLINK\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBNETLINK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBNETAPP_TRUE}" && test -z "${BUILD_WITH_LIBNETAPP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBNETAPP\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBNETAPP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBNETSNMP_TRUE}" && test -z "${BUILD_WITH_LIBNETSNMP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBNETSNMP\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBNETSNMP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_OWN_LIBOCONFIG_TRUE}" && test -z "${BUILD_WITH_OWN_LIBOCONFIG_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_OWN_LIBOCONFIG\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_OWN_LIBOCONFIG\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBOPING_TRUE}" && test -z "${BUILD_WITH_LIBOPING_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBOPING\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBOPING\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPCAP_TRUE}" && test -z "${BUILD_WITH_LIBPCAP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBPCAP\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBPCAP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPERL_TRUE}" && test -z "${BUILD_WITH_LIBPERL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBPERL\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBPERL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${HAVE_BROKEN_PERL_LOAD_MODULE_TRUE}" && test -z "${HAVE_BROKEN_PERL_LOAD_MODULE_FALSE}"; then
-  as_fn_error $? "conditional \"HAVE_BROKEN_PERL_LOAD_MODULE\" was never defined.
+  as_fn_error "conditional \"HAVE_BROKEN_PERL_LOAD_MODULE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPQ_TRUE}" && test -z "${BUILD_WITH_LIBPQ_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBPQ\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBPQ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPTHREAD_TRUE}" && test -z "${BUILD_WITH_LIBPTHREAD_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBPTHREAD\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBPTHREAD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBRABBITMQ_TRUE}" && test -z "${BUILD_WITH_LIBRABBITMQ_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBRABBITMQ\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBRABBITMQ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBROUTEROS_TRUE}" && test -z "${BUILD_WITH_LIBROUTEROS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBROUTEROS\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBROUTEROS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LM_SENSORS_TRUE}" && test -z "${BUILD_WITH_LM_SENSORS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LM_SENSORS\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LM_SENSORS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBSTATGRAB_TRUE}" && test -z "${BUILD_WITH_LIBSTATGRAB_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBSTATGRAB\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBSTATGRAB\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBTOKYOTYRANT_TRUE}" && test -z "${BUILD_WITH_LIBTOKYOTYRANT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBTOKYOTYRANT\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBTOKYOTYRANT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBXMMS_TRUE}" && test -z "${BUILD_WITH_LIBXMMS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBXMMS\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBXMMS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBYAJL_TRUE}" && test -z "${BUILD_WITH_LIBYAJL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_WITH_LIBYAJL\" was never defined.
+  as_fn_error "conditional \"BUILD_WITH_LIBYAJL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_FEATURE_DEBUG_TRUE}" && test -z "${BUILD_FEATURE_DEBUG_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_FEATURE_DEBUG\" was never defined.
+  as_fn_error "conditional \"BUILD_FEATURE_DEBUG\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_FEATURE_DAEMON_TRUE}" && test -z "${BUILD_FEATURE_DAEMON_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_FEATURE_DAEMON\" was never defined.
+  as_fn_error "conditional \"BUILD_FEATURE_DAEMON\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_FEATURE_GETIFADDRS_TRUE}" && test -z "${BUILD_FEATURE_GETIFADDRS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_FEATURE_GETIFADDRS\" was never defined.
+  as_fn_error "conditional \"BUILD_FEATURE_GETIFADDRS\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
+if test -z "${BUILD_PLUGIN_AGGREGATION_TRUE}" && test -z "${BUILD_PLUGIN_AGGREGATION_FALSE}"; then
+  as_fn_error "conditional \"BUILD_PLUGIN_AGGREGATION\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_AMQP_TRUE}" && test -z "${BUILD_PLUGIN_AMQP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_AMQP\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_AMQP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_APACHE_TRUE}" && test -z "${BUILD_PLUGIN_APACHE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_APACHE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_APACHE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_APCUPS_TRUE}" && test -z "${BUILD_PLUGIN_APCUPS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_APCUPS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_APCUPS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_APPLE_SENSORS_TRUE}" && test -z "${BUILD_PLUGIN_APPLE_SENSORS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_APPLE_SENSORS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_APPLE_SENSORS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ASCENT_TRUE}" && test -z "${BUILD_PLUGIN_ASCENT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_ASCENT\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_ASCENT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_BATTERY_TRUE}" && test -z "${BUILD_PLUGIN_BATTERY_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_BATTERY\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_BATTERY\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_BIND_TRUE}" && test -z "${BUILD_PLUGIN_BIND_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_BIND\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_BIND\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CONNTRACK_TRUE}" && test -z "${BUILD_PLUGIN_CONNTRACK_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_CONNTRACK\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_CONNTRACK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CONTEXTSWITCH_TRUE}" && test -z "${BUILD_PLUGIN_CONTEXTSWITCH_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_CONTEXTSWITCH\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_CONTEXTSWITCH\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CPUFREQ_TRUE}" && test -z "${BUILD_PLUGIN_CPUFREQ_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_CPUFREQ\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_CPUFREQ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CPU_TRUE}" && test -z "${BUILD_PLUGIN_CPU_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_CPU\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_CPU\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CSV_TRUE}" && test -z "${BUILD_PLUGIN_CSV_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_CSV\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_CSV\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CURL_TRUE}" && test -z "${BUILD_PLUGIN_CURL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_CURL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_CURL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CURL_JSON_TRUE}" && test -z "${BUILD_PLUGIN_CURL_JSON_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_CURL_JSON\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_CURL_JSON\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CURL_XML_TRUE}" && test -z "${BUILD_PLUGIN_CURL_XML_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_CURL_XML\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_CURL_XML\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_DBI_TRUE}" && test -z "${BUILD_PLUGIN_DBI_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_DBI\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_DBI\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_DF_TRUE}" && test -z "${BUILD_PLUGIN_DF_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_DF\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_DF\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_DISK_TRUE}" && test -z "${BUILD_PLUGIN_DISK_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_DISK\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_DISK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_DNS_TRUE}" && test -z "${BUILD_PLUGIN_DNS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_DNS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_DNS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_EMAIL_TRUE}" && test -z "${BUILD_PLUGIN_EMAIL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_EMAIL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_EMAIL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ENTROPY_TRUE}" && test -z "${BUILD_PLUGIN_ENTROPY_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_ENTROPY\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_ENTROPY\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ETHSTAT_TRUE}" && test -z "${BUILD_PLUGIN_ETHSTAT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_ETHSTAT\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_ETHSTAT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_EXEC_TRUE}" && test -z "${BUILD_PLUGIN_EXEC_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_EXEC\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_EXEC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_FILECOUNT_TRUE}" && test -z "${BUILD_PLUGIN_FILECOUNT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_FILECOUNT\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_FILECOUNT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_FSCACHE_TRUE}" && test -z "${BUILD_PLUGIN_FSCACHE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_FSCACHE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_FSCACHE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_GMOND_TRUE}" && test -z "${BUILD_PLUGIN_GMOND_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_GMOND\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_GMOND\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_HDDTEMP_TRUE}" && test -z "${BUILD_PLUGIN_HDDTEMP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_HDDTEMP\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_HDDTEMP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_INTERFACE_TRUE}" && test -z "${BUILD_PLUGIN_INTERFACE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_INTERFACE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_INTERFACE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_IPMI_TRUE}" && test -z "${BUILD_PLUGIN_IPMI_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_IPMI\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_IPMI\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_IPTABLES_TRUE}" && test -z "${BUILD_PLUGIN_IPTABLES_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_IPTABLES\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_IPTABLES\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_IPVS_TRUE}" && test -z "${BUILD_PLUGIN_IPVS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_IPVS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_IPVS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_IRQ_TRUE}" && test -z "${BUILD_PLUGIN_IRQ_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_IRQ\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_IRQ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_JAVA_TRUE}" && test -z "${BUILD_PLUGIN_JAVA_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_JAVA\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_JAVA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_LIBVIRT_TRUE}" && test -z "${BUILD_PLUGIN_LIBVIRT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_LIBVIRT\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_LIBVIRT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_LOAD_TRUE}" && test -z "${BUILD_PLUGIN_LOAD_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_LOAD\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_LOAD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_LOGFILE_TRUE}" && test -z "${BUILD_PLUGIN_LOGFILE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_LOGFILE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_LOGFILE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_LPAR_TRUE}" && test -z "${BUILD_PLUGIN_LPAR_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_LPAR\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_LPAR\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MADWIFI_TRUE}" && test -z "${BUILD_PLUGIN_MADWIFI_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MADWIFI\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MADWIFI\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_EMPTY_COUNTER_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_EMPTY_COUNTER\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_EMPTY_COUNTER\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_HASHED_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_HASHED_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_HASHED\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_HASHED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_REGEX_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_REGEX_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_REGEX\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_REGEX\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_TIMEDIFF_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_TIMEDIFF\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_TIMEDIFF\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_VALUE_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_VALUE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_VALUE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_VALUE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MBMON_TRUE}" && test -z "${BUILD_PLUGIN_MBMON_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MBMON\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MBMON\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MD_TRUE}" && test -z "${BUILD_PLUGIN_MD_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MD\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MEMCACHEC_TRUE}" && test -z "${BUILD_PLUGIN_MEMCACHEC_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MEMCACHEC\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MEMCACHEC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MEMCACHED_TRUE}" && test -z "${BUILD_PLUGIN_MEMCACHED_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MEMCACHED\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MEMCACHED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MEMORY_TRUE}" && test -z "${BUILD_PLUGIN_MEMORY_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MEMORY\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MEMORY\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MODBUS_TRUE}" && test -z "${BUILD_PLUGIN_MODBUS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MODBUS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MODBUS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MULTIMETER_TRUE}" && test -z "${BUILD_PLUGIN_MULTIMETER_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MULTIMETER\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MULTIMETER\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MYSQL_TRUE}" && test -z "${BUILD_PLUGIN_MYSQL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_MYSQL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_MYSQL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NETAPP_TRUE}" && test -z "${BUILD_PLUGIN_NETAPP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NETAPP\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NETAPP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NETLINK_TRUE}" && test -z "${BUILD_PLUGIN_NETLINK_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NETLINK\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NETLINK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NETWORK_TRUE}" && test -z "${BUILD_PLUGIN_NETWORK_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NETWORK\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NETWORK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NFS_TRUE}" && test -z "${BUILD_PLUGIN_NFS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NFS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NFS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NGINX_TRUE}" && test -z "${BUILD_PLUGIN_NGINX_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NGINX\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NGINX\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE}" && test -z "${BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NOTIFY_DESKTOP\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NOTIFY_DESKTOP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NOTIFY_EMAIL_TRUE}" && test -z "${BUILD_PLUGIN_NOTIFY_EMAIL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NOTIFY_EMAIL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NOTIFY_EMAIL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NTPD_TRUE}" && test -z "${BUILD_PLUGIN_NTPD_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NTPD\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NTPD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NUMA_TRUE}" && test -z "${BUILD_PLUGIN_NUMA_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NUMA\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NUMA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NUT_TRUE}" && test -z "${BUILD_PLUGIN_NUT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_NUT\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_NUT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_OLSRD_TRUE}" && test -z "${BUILD_PLUGIN_OLSRD_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_OLSRD\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_OLSRD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ONEWIRE_TRUE}" && test -z "${BUILD_PLUGIN_ONEWIRE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_ONEWIRE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_ONEWIRE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_OPENVPN_TRUE}" && test -z "${BUILD_PLUGIN_OPENVPN_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_OPENVPN\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_OPENVPN\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ORACLE_TRUE}" && test -z "${BUILD_PLUGIN_ORACLE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_ORACLE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_ORACLE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PERL_TRUE}" && test -z "${BUILD_PLUGIN_PERL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_PERL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_PERL\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
+if test -z "${BUILD_PLUGIN_PF_TRUE}" && test -z "${BUILD_PLUGIN_PF_FALSE}"; then
+  as_fn_error "conditional \"BUILD_PLUGIN_PF\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PINBA_TRUE}" && test -z "${BUILD_PLUGIN_PINBA_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_PINBA\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_PINBA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PING_TRUE}" && test -z "${BUILD_PLUGIN_PING_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_PING\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_PING\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_POSTGRESQL_TRUE}" && test -z "${BUILD_PLUGIN_POSTGRESQL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_POSTGRESQL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_POSTGRESQL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_POWERDNS_TRUE}" && test -z "${BUILD_PLUGIN_POWERDNS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_POWERDNS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_POWERDNS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PROCESSES_TRUE}" && test -z "${BUILD_PLUGIN_PROCESSES_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_PROCESSES\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_PROCESSES\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PROTOCOLS_TRUE}" && test -z "${BUILD_PLUGIN_PROTOCOLS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_PROTOCOLS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_PROTOCOLS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PYTHON_TRUE}" && test -z "${BUILD_PLUGIN_PYTHON_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_PYTHON\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_PYTHON\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_REDIS_TRUE}" && test -z "${BUILD_PLUGIN_REDIS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_REDIS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_REDIS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ROUTEROS_TRUE}" && test -z "${BUILD_PLUGIN_ROUTEROS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_ROUTEROS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_ROUTEROS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_RRDCACHED_TRUE}" && test -z "${BUILD_PLUGIN_RRDCACHED_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_RRDCACHED\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_RRDCACHED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_RRDTOOL_TRUE}" && test -z "${BUILD_PLUGIN_RRDTOOL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_RRDTOOL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_RRDTOOL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SENSORS_TRUE}" && test -z "${BUILD_PLUGIN_SENSORS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_SENSORS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_SENSORS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SERIAL_TRUE}" && test -z "${BUILD_PLUGIN_SERIAL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_SERIAL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_SERIAL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SNMP_TRUE}" && test -z "${BUILD_PLUGIN_SNMP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_SNMP\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_SNMP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SWAP_TRUE}" && test -z "${BUILD_PLUGIN_SWAP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_SWAP\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_SWAP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SYSLOG_TRUE}" && test -z "${BUILD_PLUGIN_SYSLOG_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_SYSLOG\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_SYSLOG\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TABLE_TRUE}" && test -z "${BUILD_PLUGIN_TABLE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TABLE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TABLE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TAIL_TRUE}" && test -z "${BUILD_PLUGIN_TAIL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TAIL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TAIL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TAPE_TRUE}" && test -z "${BUILD_PLUGIN_TAPE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TAPE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TAPE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_NOTIFICATION_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_NOTIFICATION\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_NOTIFICATION\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_REPLACE_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_REPLACE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_REPLACE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_REPLACE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_SCALE_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_SCALE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_SCALE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_SCALE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_SET_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_SET_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_SET\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_SET\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_V5UPGRADE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_V5UPGRADE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_V5UPGRADE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TCPCONNS_TRUE}" && test -z "${BUILD_PLUGIN_TCPCONNS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TCPCONNS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TCPCONNS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TEAMSPEAK2_TRUE}" && test -z "${BUILD_PLUGIN_TEAMSPEAK2_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TEAMSPEAK2\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TEAMSPEAK2\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TED_TRUE}" && test -z "${BUILD_PLUGIN_TED_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TED\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_THERMAL_TRUE}" && test -z "${BUILD_PLUGIN_THERMAL_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_THERMAL\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_THERMAL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_THRESHOLD_TRUE}" && test -z "${BUILD_PLUGIN_THRESHOLD_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_THRESHOLD\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_THRESHOLD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TOKYOTYRANT_TRUE}" && test -z "${BUILD_PLUGIN_TOKYOTYRANT_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_TOKYOTYRANT\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_TOKYOTYRANT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_UNIXSOCK_TRUE}" && test -z "${BUILD_PLUGIN_UNIXSOCK_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_UNIXSOCK\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_UNIXSOCK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_UPTIME_TRUE}" && test -z "${BUILD_PLUGIN_UPTIME_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_UPTIME\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_UPTIME\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_USERS_TRUE}" && test -z "${BUILD_PLUGIN_USERS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_USERS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_USERS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_UUID_TRUE}" && test -z "${BUILD_PLUGIN_UUID_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_UUID\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_UUID\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_VARNISH_TRUE}" && test -z "${BUILD_PLUGIN_VARNISH_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_VARNISH\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_VARNISH\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_VMEM_TRUE}" && test -z "${BUILD_PLUGIN_VMEM_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_VMEM\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_VMEM\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_VSERVER_TRUE}" && test -z "${BUILD_PLUGIN_VSERVER_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_VSERVER\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_VSERVER\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_WIRELESS_TRUE}" && test -z "${BUILD_PLUGIN_WIRELESS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_WIRELESS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_WIRELESS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_WRITE_GRAPHITE_TRUE}" && test -z "${BUILD_PLUGIN_WRITE_GRAPHITE_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_WRITE_GRAPHITE\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_WRITE_GRAPHITE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_WRITE_HTTP_TRUE}" && test -z "${BUILD_PLUGIN_WRITE_HTTP_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_WRITE_HTTP\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_WRITE_HTTP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_WRITE_REDIS_TRUE}" && test -z "${BUILD_PLUGIN_WRITE_REDIS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_WRITE_REDIS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_WRITE_REDIS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_WRITE_MONGODB_TRUE}" && test -z "${BUILD_PLUGIN_WRITE_MONGODB_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_WRITE_MONGODB\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_WRITE_MONGODB\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_XMMS_TRUE}" && test -z "${BUILD_PLUGIN_XMMS_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_XMMS\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_XMMS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ZFS_ARC_TRUE}" && test -z "${BUILD_PLUGIN_ZFS_ARC_FALSE}"; then
-  as_fn_error $? "conditional \"BUILD_PLUGIN_ZFS_ARC\" was never defined.
+  as_fn_error "conditional \"BUILD_PLUGIN_ZFS_ARC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 
 : ${CONFIG_STATUS=./config.status}
 ac_write_fail=0
 ac_clean_files_save=$ac_clean_files
@@ -32406,25 +32457,25 @@
 export LANGUAGE
 
 # CDPATH.
 (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 
-# as_fn_error STATUS ERROR [LINENO LOG_FD]
-# ----------------------------------------
+# as_fn_error ERROR [LINENO LOG_FD]
+# ---------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with STATUS, using 1 if that was 0.
+# script with status $?, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$1; test $as_status -eq 0 && as_status=1
-  if test "$4"; then
-    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+  as_status=$?; test $as_status -eq 0 && as_status=1
+  if test "$3"; then
+    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
   fi
-  $as_echo "$as_me: error: $2" >&2
+  $as_echo "$as_me: error: $1" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
 
 # as_fn_set_status STATUS
 # -----------------------
@@ -32614,13 +32665,13 @@
 	    q
 	  }
 	  s/.*/./; q'`
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
 if mkdir -p . 2>/dev/null; then
   as_mkdir_p='mkdir -p "$as_dir"'
 else
@@ -32667,14 +32718,14 @@
 
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 # Save the log message, to keep $0 and so on meaningful, and to
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by collectd $as_me 5.1.3, which was
-generated by GNU Autoconf 2.67.  Invocation command line was
+This file was extended by collectd $as_me 5.2.0, which was
+generated by GNU Autoconf 2.65.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
   $ $0 $@
@@ -32733,17 +32784,17 @@
 Report bugs to the package provider."
 
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
 ac_cs_version="\\
-collectd config.status 5.1.3
-configured by $0, generated by GNU Autoconf 2.67,
+collectd config.status 5.2.0
+configured by $0, generated by GNU Autoconf 2.65,
   with options \\"\$ac_cs_config\\"
 
-Copyright (C) 2010 Free Software Foundation, Inc.
+Copyright (C) 2009 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
 
 ac_pwd='$ac_pwd'
 srcdir='$srcdir'
 INSTALL='$INSTALL'
@@ -32755,22 +32806,17 @@
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 # The default lists apply if the user does not specify any file.
 ac_need_defaults=:
 while test $# != 0
 do
   case $1 in
-  --*=?*)
+  --*=*)
     ac_option=`expr "X$1" : 'X\([^=]*\)='`
     ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
     ac_shift=:
     ;;
-  --*=)
-    ac_option=`expr "X$1" : 'X\([^=]*\)='`
-    ac_optarg=
-    ac_shift=:
-    ;;
   *)
     ac_option=$1
     ac_optarg=$2
     ac_shift=shift
     ;;
   esac
@@ -32786,35 +32832,34 @@
   --debug | --debu | --deb | --de | --d | -d )
     debug=: ;;
   --file | --fil | --fi | --f )
     $ac_shift
     case $ac_optarg in
     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
-    '') as_fn_error $? "missing file argument" ;;
     esac
     as_fn_append CONFIG_FILES " '$ac_optarg'"
     ac_need_defaults=false;;
   --header | --heade | --head | --hea )
     $ac_shift
     case $ac_optarg in
     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
     esac
     as_fn_append CONFIG_HEADERS " '$ac_optarg'"
     ac_need_defaults=false;;
   --he | --h)
     # Conflict between --help and --header
-    as_fn_error $? "ambiguous option: \`$1'
+    as_fn_error "ambiguous option: \`$1'
 Try \`$0 --help' for more information.";;
   --help | --hel | -h )
     $as_echo "$ac_cs_usage"; exit ;;
   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
   | -silent | --silent | --silen | --sile | --sil | --si | --s)
     ac_cs_silent=: ;;
 
   # This is an error.
-  -*) as_fn_error $? "unrecognized option: \`$1'
+  -*) as_fn_error "unrecognized option: \`$1'
 Try \`$0 --help' for more information." ;;
 
   *) as_fn_append ac_config_targets " $1"
      ac_need_defaults=false ;;
 
   esac
@@ -33120,23 +33165,23 @@
 for ac_config_target in $ac_config_targets
 do
   case $ac_config_target in
     "src/config.h") CONFIG_HEADERS="$CONFIG_HEADERS src/config.h" ;;
     "libtool") CONFIG_COMMANDS="$CONFIG_COMMANDS libtool" ;;
     "depfiles") CONFIG_COMMANDS="$CONFIG_COMMANDS depfiles" ;;
-    "src/libcollectdclient/lcc_features.h") CONFIG_FILES="$CONFIG_FILES src/libcollectdclient/lcc_features.h" ;;
+    "src/libcollectdclient/collectd/lcc_features.h") CONFIG_FILES="$CONFIG_FILES src/libcollectdclient/collectd/lcc_features.h" ;;
     "Makefile") CONFIG_FILES="$CONFIG_FILES Makefile" ;;
     "src/Makefile") CONFIG_FILES="$CONFIG_FILES src/Makefile" ;;
     "src/collectd.conf") CONFIG_FILES="$CONFIG_FILES src/collectd.conf" ;;
     "src/libcollectdclient/Makefile") CONFIG_FILES="$CONFIG_FILES src/libcollectdclient/Makefile" ;;
     "src/libcollectdclient/libcollectdclient.pc") CONFIG_FILES="$CONFIG_FILES src/libcollectdclient/libcollectdclient.pc" ;;
     "src/liboconfig/Makefile") CONFIG_FILES="$CONFIG_FILES src/liboconfig/Makefile" ;;
     "bindings/Makefile") CONFIG_FILES="$CONFIG_FILES bindings/Makefile" ;;
     "bindings/java/Makefile") CONFIG_FILES="$CONFIG_FILES bindings/java/Makefile" ;;
 
-  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5 ;;
+  *) as_fn_error "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
   esac
 done
 
 
 # If the user did not use the arguments to specify the items to instantiate,
 # then the envvar interface is used.  Set only those that are not.
@@ -33168,13 +33213,13 @@
   tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
   test -n "$tmp" && test -d "$tmp"
 }  ||
 {
   tmp=./conf$$-$RANDOM
   (umask 077 && mkdir "$tmp")
-} || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
+} || as_fn_error "cannot create a temporary directory in ." "$LINENO" 5
 
 # Set up the scripts for CONFIG_FILES section.
 # No need to generate them if there are no CONFIG_FILES.
 # This happens for instance with `./config.status config.h'.
 if test -n "$CONFIG_FILES"; then
 
@@ -33185,13 +33230,13 @@
 # point, so we can use a bashism as a fallback.
 if test "x$ac_cr" = x; then
   eval ac_cr=\$\'\\r\'
 fi
 ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
 if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
-  ac_cs_awk_cr='\\r'
+  ac_cs_awk_cr='\r'
 else
   ac_cs_awk_cr=$ac_cr
 fi
 
 echo 'BEGIN {' >"$tmp/subs1.awk" &&
 _ACEOF
@@ -33199,24 +33244,24 @@
 
 {
   echo "cat >conf$$subs.awk <<_ACEOF" &&
   echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
   echo "_ACEOF"
 } >conf$$subs.sh ||
-  as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
-ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
+  as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+ac_delim_num=`echo "$ac_subst_vars" | grep -c '$'`
 ac_delim='%!_!# '
 for ac_last_try in false false false false false :; do
   . ./conf$$subs.sh ||
-    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
 
   ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
   if test $ac_delim_n = $ac_delim_num; then
     break
   elif $ac_last_try; then
-    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
 done
 rm -f conf$$subs.sh
 
@@ -33299,34 +33344,26 @@
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 if sed "s/$ac_cr//" < /dev/null > /dev/null 2>&1; then
   sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
 else
   cat
 fi < "$tmp/subs1.awk" > "$tmp/subs.awk" \
-  || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
+  || as_fn_error "could not setup config files machinery" "$LINENO" 5
 _ACEOF
 
-# VPATH may cause trouble with some makes, so we remove sole $(srcdir),
-# ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
+# VPATH may cause trouble with some makes, so we remove $(srcdir),
+# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
 # trailing colons and then remove the whole line if VPATH becomes empty
 # (actually we leave an empty line to preserve line numbers).
 if test "x$srcdir" = x.; then
-  ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
-h
-s///
-s/^/:/
-s/[	 ]*$/:/
-s/:\$(srcdir):/:/g
-s/:\${srcdir}:/:/g
-s/:@srcdir@:/:/g
-s/^:*//
+  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
+s/:*\$(srcdir):*/:/
+s/:*\${srcdir}:*/:/
+s/:*@srcdir@:*/:/
+s/^\([^=]*=[	 ]*\):*/\1/
 s/:*$//
-x
-s/\(=[	 ]*\).*/\1/
-G
-s/\n//
 s/^[^=]*=[	 ]*$//
 }'
 fi
 
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 fi # test -n "$CONFIG_FILES"
@@ -33348,13 +33385,13 @@
 ac_delim='%!_!# '
 for ac_last_try in false false :; do
   ac_t=`sed -n "/$ac_delim/p" confdefs.h`
   if test -z "$ac_t"; then
     break
   elif $ac_last_try; then
-    as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
+    as_fn_error "could not make $CONFIG_HEADERS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
 done
 
 # For the awk script, D is an array of macro values keyed by name,
@@ -33433,26 +33470,26 @@
   }
 }
 { print }
 _ACAWK
 _ACEOF
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
-  as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
+  as_fn_error "could not setup config headers machinery" "$LINENO" 5
 fi # test -n "$CONFIG_HEADERS"
 
 
 eval set X "  :F $CONFIG_FILES  :H $CONFIG_HEADERS    :C $CONFIG_COMMANDS"
 shift
 for ac_tag
 do
   case $ac_tag in
   :[FHLC]) ac_mode=$ac_tag; continue;;
   esac
   case $ac_mode$ac_tag in
   :[FHL]*:*);;
-  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5 ;;
+  :L* | :C*:*) as_fn_error "invalid tag \`$ac_tag'" "$LINENO" 5;;
   :[FH]-) ac_tag=-:-;;
   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
   esac
   ac_save_IFS=$IFS
   IFS=:
   set x $ac_tag
@@ -33474,13 +33511,13 @@
 	 # because $ac_f cannot contain `:'.
 	 test -f "$ac_f" ||
 	   case $ac_f in
 	   [\\/$]*) false;;
 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
 	   esac ||
-	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5 ;;
+	   as_fn_error "cannot find input file: \`$ac_f'" "$LINENO" 5;;
       esac
       case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
       as_fn_append ac_file_inputs " '$ac_f'"
     done
 
     # Let's still pretend it is `configure' which instantiates (i.e., don't
@@ -33501,13 +33538,13 @@
        sed 's/[\\\\&|]/\\\\&/g'`;; #(
     *) ac_sed_conf_input=$configure_input;;
     esac
 
     case $ac_tag in
     *:-:* | *:-) cat >"$tmp/stdin" \
-      || as_fn_error $? "could not create $ac_file" "$LINENO" 5  ;;
+      || as_fn_error "could not create $ac_file" "$LINENO" 5 ;;
     esac
     ;;
   esac
 
   ac_dir=`$as_dirname -- "$ac_file" ||
 $as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
@@ -33638,51 +33675,51 @@
 s&@abs_top_builddir@&$ac_abs_top_builddir&;t t
 s&@INSTALL@&$ac_INSTALL&;t t
 s&@MKDIR_P@&$ac_MKDIR_P&;t t
 $ac_datarootdir_hack
 "
 eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$tmp/subs.awk" >$tmp/out \
-  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+  || as_fn_error "could not create $ac_file" "$LINENO" 5
 
 test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
   { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined" >&5
+which seems to be undefined.  Please make sure it is defined." >&5
 $as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined" >&2;}
+which seems to be undefined.  Please make sure it is defined." >&2;}
 
   rm -f "$tmp/stdin"
   case $ac_file in
   -) cat "$tmp/out" && rm -f "$tmp/out";;
   *) rm -f "$ac_file" && mv "$tmp/out" "$ac_file";;
   esac \
-  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+  || as_fn_error "could not create $ac_file" "$LINENO" 5
  ;;
   :H)
   #
   # CONFIG_HEADER
   #
   if test x"$ac_file" != x-; then
     {
       $as_echo "/* $configure_input  */" \
       && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs"
     } >"$tmp/config.h" \
-      || as_fn_error $? "could not create $ac_file" "$LINENO" 5
+      || as_fn_error "could not create $ac_file" "$LINENO" 5
     if diff "$ac_file" "$tmp/config.h" >/dev/null 2>&1; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
 $as_echo "$as_me: $ac_file is unchanged" >&6;}
     else
       rm -f "$ac_file"
       mv "$tmp/config.h" "$ac_file" \
-	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
+	|| as_fn_error "could not create $ac_file" "$LINENO" 5
     fi
   else
     $as_echo "/* $configure_input  */" \
       && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs" \
-      || as_fn_error $? "could not create -" "$LINENO" 5
+      || as_fn_error "could not create -" "$LINENO" 5
   fi
 # Compute "$ac_file"'s index in $config_headers.
 _am_arg="$ac_file"
 _am_stamp_count=1
 for _am_header in $config_headers :; do
   case $_am_header in
@@ -34461,13 +34498,13 @@
 
 as_fn_exit 0
 _ACEOF
 ac_clean_files=$ac_clean_files_save
 
 test $ac_write_fail = 0 ||
-  as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
+  as_fn_error "write failure creating $CONFIG_STATUS" "$LINENO" 5
 
 
 # configure is writing to config.log, and then calls config.status.
 # config.status does its own redirection, appending to config.log.
 # Unfortunately, on DOS this fails, as config.log is still kept open
 # by configure, so config.status won't be able to write to it; its
@@ -34482,13 +34519,13 @@
     ac_config_status_args="$ac_config_status_args --quiet"
   exec 5>/dev/null
   $SHELL $CONFIG_STATUS $ac_config_status_args || ac_cs_success=false
   exec 5>>config.log
   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
   # would make configure fail if this is the last instruction.
-  $ac_cs_success || as_fn_exit 1
+  $ac_cs_success || as_fn_exit $?
 fi
 
 #
 # CONFIG_SUBDIRS section.
 #
 if test "$no_recursion" != yes; then
@@ -34623,13 +34660,13 @@
 
       { $as_echo "$as_me:${as_lineno-$LINENO}: running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir" >&5
 $as_echo "$as_me: running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir" >&6;}
       # The eval makes quoting arguments work.
       eval "\$SHELL \"\$ac_sub_configure\" $ac_sub_configure_args \
 	   --cache-file=\"\$ac_sub_cache_file\" --srcdir=\"\$ac_srcdir\"" ||
-	as_fn_error $? "$ac_sub_configure failed for $ac_dir" "$LINENO" 5
+	as_fn_error "$ac_sub_configure failed for $ac_dir" "$LINENO" 5
     fi
 
     cd "$ac_popdir"
   done
 fi
 if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
@@ -34714,12 +34751,13 @@
     debug . . . . . . . . $enable_debug
 
   Bindings:
     perl  . . . . . . . . $with_perl_bindings
 
   Modules:
+    aggregation . . . . . $enable_aggregation
     amqp    . . . . . . . $enable_amqp
     apache  . . . . . . . $enable_apache
     apcups  . . . . . . . $enable_apcups
     apple_sensors . . . . $enable_apple_sensors
     ascent  . . . . . . . $enable_ascent
     battery . . . . . . . $enable_battery
@@ -34780,12 +34818,13 @@
     nut . . . . . . . . . $enable_nut
     olsrd . . . . . . . . $enable_olsrd
     onewire . . . . . . . $enable_onewire
     openvpn . . . . . . . $enable_openvpn
     oracle  . . . . . . . $enable_oracle
     perl  . . . . . . . . $enable_perl
+    pf  . . . . . . . . . $enable_pf
     pinba . . . . . . . . $enable_pinba
     ping  . . . . . . . . $enable_ping
     postgresql  . . . . . $enable_postgresql
     powerdns  . . . . . . $enable_powerdns
     processes . . . . . . $enable_processes
     protocols . . . . . . $enable_protocols
@@ -34828,13 +34867,13 @@
     xmms  . . . . . . . . $enable_xmms
     zfs_arc . . . . . . . $enable_zfs_arc
 
 EOF
 
 if test "x$dependency_error" = "xyes"; then
-	as_fn_error $? "\"Some plugins are missing dependencies - see the summary above for details\"" "$LINENO" 5
+	as_fn_error "\"Some plugins are missing dependencies - see the summary above for details\"" "$LINENO" 5
 fi
 
 if test "x$dependency_warning" = "xyes"; then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \"Some plugins seem to have missing dependencies but have been enabled forcibly - see the summary above for details\"" >&5
 $as_echo "$as_me: WARNING: \"Some plugins seem to have missing dependencies but have been enabled forcibly - see the summary above for details\"" >&2;}
 fi
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/configure.in	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/configure.in	2012-11-18 06:23:21.000000000 +0800
@@ -21,13 +21,13 @@
 	 AC_LIBTOOL_DLOPEN
 	 AC_CONFIG_SUBDIRS(libltdl)
 	 AC_DEFINE(LIBTOOL_VERSION, 1, [Define to used libtool version.])
 	]
 )
 
-AM_INIT_AUTOMAKE([tar-pax dist-bzip2])
+AM_INIT_AUTOMAKE(dist-bzip2)
 AC_LANG(C)
 
 AC_PREFIX_DEFAULT("/opt/collectd")
 
 AC_SYS_LARGEFILE
 
@@ -532,12 +532,15 @@
 # include <netinet/in.h>
 #endif
 ])
 
 AC_CHECK_HEADERS(netinet/ip_compat.h)
 
+have_net_pfvar_h="no"
+AC_CHECK_HEADERS(net/pfvar.h, [have_net_pfvar_h="yes"])
+
 # For the multimeter plugin
 have_termios_h="no"
 AC_CHECK_HEADERS(termios.h, [have_termios_h="yes"])
 
 #
 # Checks for typedefs, structures, and compiler characteristics.
@@ -563,66 +566,64 @@
 	CFLAGS="$CFLAGS -Wall -Werror"
 fi
 
 AC_CACHE_CHECK([for strtok_r],
   [c_cv_have_strtok_r_default],
   AC_LINK_IFELSE(
-    [AC_LANG_PROGRAM(
-[[[
+    AC_LANG_PROGRAM(
+    [[[[
 #include <stdlib.h>
 #include <stdio.h>
 #include <string.h>
-]]],
-[[[
+    ]]]],
+    [[[[
       char buffer[] = "foo,bar,baz";
       char *token;
       char *dummy;
       char *saveptr;
 
       dummy = buffer;
       saveptr = NULL;
       while ((token = strtok_r (dummy, ",", &saveptr)) != NULL)
       {
         dummy = NULL;
         printf ("token = %s;\n", token);
       }
-]]]
-    )],
+    ]]]]),
     [c_cv_have_strtok_r_default="yes"],
     [c_cv_have_strtok_r_default="no"]
   )
 )
 
 if test "x$c_cv_have_strtok_r_default" = "xno"
 then
   CFLAGS="$CFLAGS -D_REENTRANT=1"
 
   AC_CACHE_CHECK([if strtok_r needs _REENTRANT],
     [c_cv_have_strtok_r_reentrant],
     AC_LINK_IFELSE(
-      [AC_LANG_PROGRAM(
-[[[
+      AC_LANG_PROGRAM(
+      [[[[
 #include <stdlib.h>
 #include <stdio.h>
 #include <string.h>
-]]],
-[[[
+      ]]]],
+      [[[[
         char buffer[] = "foo,bar,baz";
         char *token;
         char *dummy;
         char *saveptr;
 
         dummy = buffer;
         saveptr = NULL;
         while ((token = strtok_r (dummy, ",", &saveptr)) != NULL)
         {
           dummy = NULL;
           printf ("token = %s;\n", token);
         }
-]]]
-      )],
+      ]]]]),
       [c_cv_have_strtok_r_reentrant="yes"],
       [AC_MSG_FAILURE([strtok_r isn't available. Please file a bugreport!])]
     )
   )
 fi
 
@@ -694,46 +695,48 @@
 
 AC_CHECK_FUNCS(strptime, [have_strptime="yes"], [have_strptime="no"])
 if test "x$have_strptime" = "xyes"
 then
 	AC_CACHE_CHECK([whether strptime is exported by default],
 		       [c_cv_have_strptime_default],
-		       AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
+		       AC_COMPILE_IFELSE(
+AC_LANG_PROGRAM(
+[[
+AC_INCLUDES_DEFAULT
 #include <time.h>
-]]],
-[[[
+]],
+[[
  struct tm stm;
  (void) strptime ("2010-12-30%13:42:42", "%Y-%m-%dT%T", &stm);
-]]]
-		       )],
+]]),
 		       [c_cv_have_strptime_default="yes"],
 		       [c_cv_have_strptime_default="no"]))
 fi
 if test "x$have_strptime" = "xyes" && test "x$c_cv_have_strptime_default" = "xno"
 then
 	AC_CACHE_CHECK([whether strptime needs standards mode],
 		       [c_cv_have_strptime_standards],
-		       AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
+		       AC_COMPILE_IFELSE(
+AC_LANG_PROGRAM(
+[[
 #ifndef _ISOC99_SOURCE
 # define _ISOC99_SOURCE 1
 #endif
 #ifndef _POSIX_C_SOURCE
 # define _POSIX_C_SOURCE 200112L
 #endif
 #ifndef _XOPEN_SOURCE
 # define _XOPEN_SOURCE 500
 #endif
+AC_INCLUDES_DEFAULT
 #include <time.h>
-]]],
-[[[
+]],
+[[
  struct tm stm;
  (void) strptime ("2010-12-30%13:42:42", "%Y-%m-%dT%T", &stm);
-]]]
-		       )],
+]]),
 		       [c_cv_have_strptime_standards="yes"],
 		       [c_cv_have_strptime_standards="no"]))
 
 	if test "x$c_cv_have_strptime_standards" = "xyes"
 	then
 		AC_DEFINE([STRPTIME_NEEDS_STANDARDS], 1, [Set to true if strptime is only exported in X/Open mode (GNU libc).])
@@ -749,45 +753,42 @@
 # }}} Check for strptime
 
 AC_CHECK_FUNCS(swapctl, [have_swapctl="yes"], [have_swapctl="no"])
 if test "x$have_swapctl" = "xyes"; then
         AC_CACHE_CHECK([whether swapctl takes two arguments],
                 [c_cv_have_swapctl_two_args],
-                AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
+                AC_COMPILE_IFELSE(
+                        AC_LANG_PROGRAM([[AC_INCLUDES_DEFAULT
 #if HAVE_SYS_SWAP_H && !defined(_LP64) && _FILE_OFFSET_BITS == 64
 #  undef _FILE_OFFSET_BITS
 #  undef _LARGEFILE64_SOURCE
 #endif
 #include <sys/stat.h>
-#include <sys/swap.h>
-]]],
-[[[
-int num = swapctl(0, NULL);
-]]]
-                        )],
+#include <sys/swap.h>]],
+                                [[
+                                int num = swapctl(0, NULL);
+                                ]]
+                        ),
                         [c_cv_have_swapctl_two_args="yes"],
                         [c_cv_have_swapctl_two_args="no"]
                 )
         )
         AC_CACHE_CHECK([whether swapctl takes three arguments],
                 [c_cv_have_swapctl_three_args],
                 AC_COMPILE_IFELSE(
-                        [AC_LANG_PROGRAM(
-[[[
+                        AC_LANG_PROGRAM([[AC_INCLUDES_DEFAULT
 #if HAVE_SYS_SWAP_H && !defined(_LP64) && _FILE_OFFSET_BITS == 64
 #  undef _FILE_OFFSET_BITS
 #  undef _LARGEFILE64_SOURCE
 #endif
 #include <sys/stat.h>
-#include <sys/swap.h>
-]]],
-[[[
-int num = swapctl(0, NULL, 0);
-]]]
-                        )],
+#include <sys/swap.h>]],
+                                [[
+                                int num = swapctl(0, NULL,0);
+                                ]]
+                        ),
                         [c_cv_have_swapctl_three_args="yes"],
                         [c_cv_have_swapctl_three_args="no"]
                 )
         )
 fi
 # Check for different versions of `swapctl' here..
@@ -814,51 +815,51 @@
  fi; fi
 ],
 [nan_type="none"])
 if test "x$nan_type" = "xnone"; then
   AC_CACHE_CHECK([whether NAN is defined by default],
     [c_cv_have_nan_default],
-    AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
+    AC_COMPILE_IFELSE(
+      AC_LANG_PROGRAM(
+      [[
 #include <stdlib.h>
 #include <math.h>
 static double foo = NAN;
-]]],
-[[[
+      ]],
+      [[
        if (isnan (foo))
         return 0;
        else
 	return 1;
-]]]
-      )],
+      ]]),
       [c_cv_have_nan_default="yes"],
       [c_cv_have_nan_default="no"]
     )
   )
   if test "x$c_cv_have_nan_default" = "xyes"
   then
     nan_type="default"
   fi
 fi
 if test "x$nan_type" = "xnone"; then
   AC_CACHE_CHECK([whether NAN is defined by __USE_ISOC99],
     [c_cv_have_nan_isoc],
-    AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
+    AC_COMPILE_IFELSE(
+      AC_LANG_PROGRAM(
+      [[
 #include <stdlib.h>
 #define __USE_ISOC99 1
 #include <math.h>
 static double foo = NAN;
-]]],
-[[[
+      ]],
+      [[
        if (isnan (foo))
         return 0;
        else
 	return 1;
-]]]
-      )],
+      ]]),
       [c_cv_have_nan_isoc="yes"],
       [c_cv_have_nan_isoc="no"]
     )
   )
   if test "x$c_cv_have_nan_isoc" = "xyes"
   then
@@ -867,32 +868,32 @@
 fi
 if test "x$nan_type" = "xnone"; then
   SAVE_LDFLAGS=$LDFLAGS
   LDFLAGS="$LDFLAGS -lm"
   AC_CACHE_CHECK([whether NAN can be defined by 0/0],
     [c_cv_have_nan_zero],
-    AC_RUN_IFELSE([AC_LANG_PROGRAM(
-[[[
+    AC_RUN_IFELSE(
+      AC_LANG_PROGRAM(
+      [[
 #include <stdlib.h>
 #include <math.h>
 #ifdef NAN
 # undef NAN
 #endif
 #define NAN (0.0 / 0.0)
 #ifndef isnan
 # define isnan(f) ((f) != (f))
 #endif
 static double foo = NAN;
-]]],
-[[[
+      ]],
+      [[
        if (isnan (foo))
         return 0;
        else
 	return 1;
-]]]
-      )],
+      ]]),
       [c_cv_have_nan_zero="yes"],
       [c_cv_have_nan_zero="no"]
     )
   )
   LDFLAGS=$SAVE_LDFLAGS
   if test "x$c_cv_have_nan_zero" = "xyes"
@@ -928,28 +929,29 @@
 ],
 [fp_layout_type="unknown"])
 
 if test "x$fp_layout_type" = "xunknown"; then
   AC_CACHE_CHECK([if doubles are stored in x86 representation],
     [c_cv_fp_layout_need_nothing],
-    AC_RUN_IFELSE([AC_LANG_PROGRAM(
-[[[
+    AC_RUN_IFELSE(
+      AC_LANG_PROGRAM(
+      [[[[
 #include <stdlib.h>
 #include <stdio.h>
 #include <string.h>
 #if HAVE_STDINT_H
 # include <stdint.h>
 #endif
 #if HAVE_INTTYPES_H
 # include <inttypes.h>
 #endif
 #if HAVE_STDBOOL_H
 # include <stdbool.h>
 #endif
-]]],
-[[[
+      ]]]],
+      [[[[
 	uint64_t i0;
 	uint64_t i1;
 	uint8_t c[8];
 	double d;
 
 	d = 8.642135e130; 
@@ -962,27 +964,27 @@
 			&& (c[2] == 0xc0) && (c[3] == 0xc7)
 			&& (c[4] == 0x43) && (c[5] == 0x2b)
 			&& (c[6] == 0x1f) && (c[7] == 0x5b))
 		return (0);
 	else
 		return (1);
-]]]
-      )],
+      ]]]]),
       [c_cv_fp_layout_need_nothing="yes"],
       [c_cv_fp_layout_need_nothing="no"]
     )
   )
   if test "x$c_cv_fp_layout_need_nothing" = "xyes"; then
     fp_layout_type="nothing"
   fi
 fi
 if test "x$fp_layout_type" = "xunknown"; then
   AC_CACHE_CHECK([if endianflip converts to x86 representation],
     [c_cv_fp_layout_need_endianflip],
-    AC_RUN_IFELSE([AC_LANG_PROGRAM(
-[[[
+    AC_RUN_IFELSE(
+      AC_LANG_PROGRAM(
+      [[[[
 #include <stdlib.h>
 #include <stdio.h>
 #include <string.h>
 #if HAVE_STDINT_H
 # include <stdint.h>
 #endif
@@ -997,14 +999,14 @@
                        (((uint64_t)(A) & 0x0000ff0000000000LL) >> 24) | \
                        (((uint64_t)(A) & 0x000000ff00000000LL) >> 8)  | \
                        (((uint64_t)(A) & 0x00000000ff000000LL) << 8)  | \
                        (((uint64_t)(A) & 0x0000000000ff0000LL) << 24) | \
                        (((uint64_t)(A) & 0x000000000000ff00LL) << 40) | \
                        (((uint64_t)(A) & 0x00000000000000ffLL) << 56))
-]]],
-[[[
+      ]]]],
+      [[[[
 	uint64_t i0;
 	uint64_t i1;
 	uint8_t c[8];
 	double d;
 
 	d = 8.642135e130; 
@@ -1017,27 +1019,27 @@
 			&& (c[2] == 0xc0) && (c[3] == 0xc7)
 			&& (c[4] == 0x43) && (c[5] == 0x2b)
 			&& (c[6] == 0x1f) && (c[7] == 0x5b))
 		return (0);
 	else
 		return (1);
-]]]
-      )],
+      ]]]]),
       [c_cv_fp_layout_need_endianflip="yes"],
       [c_cv_fp_layout_need_endianflip="no"]
     )
   )
   if test "x$c_cv_fp_layout_need_endianflip" = "xyes"; then
     fp_layout_type="endianflip"
   fi
 fi
 if test "x$fp_layout_type" = "xunknown"; then
   AC_CACHE_CHECK([if intswap converts to x86 representation],
     [c_cv_fp_layout_need_intswap],
-    AC_RUN_IFELSE([AC_LANG_PROGRAM(
-[[[
+    AC_RUN_IFELSE(
+      AC_LANG_PROGRAM(
+      [[[[
 #include <stdlib.h>
 #include <stdio.h>
 #include <string.h>
 #if HAVE_STDINT_H
 # include <stdint.h>
 #endif
@@ -1046,14 +1048,14 @@
 #endif
 #if HAVE_STDBOOL_H
 # include <stdbool.h>
 #endif
 #define intswap(A)    ((((uint64_t)(A) & 0xffffffff00000000LL) >> 32) | \
                        (((uint64_t)(A) & 0x00000000ffffffffLL) << 32))
-]]],
-[[[
+      ]]]],
+      [[[[
 	uint64_t i0;
 	uint64_t i1;
 	uint8_t c[8];
 	double d;
 
 	d = 8.642135e130; 
@@ -1066,14 +1068,13 @@
 			&& (c[2] == 0xc0) && (c[3] == 0xc7)
 			&& (c[4] == 0x43) && (c[5] == 0x2b)
 			&& (c[6] == 0x1f) && (c[7] == 0x5b))
 		return (0);
 	else
 		return (1);
-]]]
-      )],
+      ]]]]),
       [c_cv_fp_layout_need_intswap="yes"],
       [c_cv_fp_layout_need_intswap="no"]
     )
   )
   if test "x$c_cv_fp_layout_need_intswap" = "xyes"; then
     fp_layout_type="intswap"
@@ -1113,42 +1114,38 @@
 fi
 
 if test "x$have_getmntent" = "xc"; then
 	AC_CACHE_CHECK([whether getmntent takes one argument],
 		[c_cv_have_one_getmntent],
 		AC_COMPILE_IFELSE(
-			[AC_LANG_PROGRAM(
-[[[
-#include "$srcdir/src/utils_mount.h"
-]]],
-[[[
-FILE *fh;
-struct mntent *me;
-fh = setmntent ("/etc/mtab", "r");
-me = getmntent (fh);
-]]]
-			)],
+			AC_LANG_PROGRAM([[AC_INCLUDES_DEFAULT
+#include "$srcdir/src/utils_mount.h"]],
+				[[
+				 FILE *fh;
+				 struct mntent *me;
+				 fh = setmntent ("/etc/mtab", "r");
+				 me = getmntent (fh);
+				]]
+			),
 			[c_cv_have_one_getmntent="yes"],
 			[c_cv_have_one_getmntent="no"]
 		)
 	)
 	AC_CACHE_CHECK([whether getmntent takes two arguments],
 		[c_cv_have_two_getmntent],
 		AC_COMPILE_IFELSE(
-			[AC_LANG_PROGRAM(
-[[[
-#include "$srcdir/src/utils_mount.h"
-]]],
-[[[
+			AC_LANG_PROGRAM([[AC_INCLUDES_DEFAULT
+#include "$srcdir/src/utils_mount.h"]],
+				[[
 				 FILE *fh;
 				 struct mnttab mt;
 				 int status;
 				 fh = fopen ("/etc/mnttab", "r");
 				 status = getmntent (fh, &mt);
-]]]
-			)],
+				]]
+			),
 			[c_cv_have_two_getmntent="yes"],
 			[c_cv_have_two_getmntent="no"]
 		)
 	)
 fi
 
@@ -1178,25 +1175,23 @@
 fi
 
 # Check for htonll
 AC_MSG_CHECKING([if have htonll defined])
 
     have_htonll="no"
-    AC_LINK_IFELSE([AC_LANG_PROGRAM(
-[[[
+    AC_LINK_IFELSE([
+       AC_LANG_PROGRAM([
 #include <sys/types.h>
 #include <netinet/in.h>
 #if HAVE_INTTYPES_H
 # include <inttypes.h>
 #endif
-]]],
-[[[
+       ], [
           return htonll(0);
-]]]
-    )],
-    [
+       ])
+    ], [
       have_htonll="yes"
       AC_DEFINE(HAVE_HTONLL, 1, [Define if the function htonll exists.])
     ])
  
 AC_MSG_RESULT([$have_htonll])
 
@@ -1233,12 +1228,13 @@
 		have_struct_kinfo_proc_freebsd="yes"
 	],
 	[
 		have_struct_kinfo_proc_freebsd="no"
 	],
 	[
+AC_INCLUDES_DEFAULT
 #include <kvm.h>
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <sys/user.h>
 	])
 
@@ -1249,12 +1245,13 @@
 		have_struct_kinfo_proc_openbsd="yes"
 	],
 	[
 		have_struct_kinfo_proc_openbsd="no"
 	],
 	[
+AC_INCLUDES_DEFAULT
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <kvm.h>
 	])
 
 AC_CHECK_MEMBERS([struct udphdr.uh_dport, struct udphdr.uh_sport], [], [],
@@ -1980,60 +1977,60 @@
 [with_java="yes"])
 if test "x$with_java" = "xyes"
 then
 	if test -d "$with_java_home"
 	then
 		AC_MSG_CHECKING([for jni.h])
-		TMPVAR=`find "$with_java_home" -name jni.h -type f -exec 'dirname' '{}' ';' | head -n 1`
-		if test "x$TMPVAR" != "x"
+		TMPDIR=`find "$with_java_home" -name jni.h -type f -exec 'dirname' '{}' ';' 2>/dev/null | head -n 1`
+		if test "x$TMPDIR" != "x"
 		then
-			AC_MSG_RESULT([found in $TMPVAR])
-			JAVA_CPPFLAGS="$JAVA_CPPFLAGS -I$TMPVAR"
+			AC_MSG_RESULT([found in $TMPDIR])
+			JAVA_CPPFLAGS="$JAVA_CPPFLAGS -I$TMPDIR"
 		else
 			AC_MSG_RESULT([not found])
 		fi
 
 		AC_MSG_CHECKING([for jni_md.h])
-		TMPVAR=`find "$with_java_home" -name jni_md.h -type f -exec 'dirname' '{}' ';' | head -n 1`
-		if test "x$TMPVAR" != "x"
+		TMPDIR=`find "$with_java_home" -name jni_md.h -type f -exec 'dirname' '{}' ';' 2>/dev/null | head -n 1`
+		if test "x$TMPDIR" != "x"
 		then
-			AC_MSG_RESULT([found in $TMPVAR])
-			JAVA_CPPFLAGS="$JAVA_CPPFLAGS -I$TMPVAR"
+			AC_MSG_RESULT([found in $TMPDIR])
+			JAVA_CPPFLAGS="$JAVA_CPPFLAGS -I$TMPDIR"
 		else
 			AC_MSG_RESULT([not found])
 		fi
 
 		AC_MSG_CHECKING([for libjvm.so])
-		TMPVAR=`find "$with_java_home" -name libjvm.so -type f -exec 'dirname' '{}' ';' | head -n 1`
-		if test "x$TMPVAR" != "x"
+		TMPDIR=`find "$with_java_home" -name libjvm.so -type f -exec 'dirname' '{}' ';' 2>/dev/null | head -n 1`
+		if test "x$TMPDIR" != "x"
 		then
-			AC_MSG_RESULT([found in $TMPVAR])
-			JAVA_LDFLAGS="$JAVA_LDFLAGS -L$TMPVAR -Wl,-rpath -Wl,$TMPVAR"
+			AC_MSG_RESULT([found in $TMPDIR])
+			JAVA_LDFLAGS="$JAVA_LDFLAGS -L$TMPDIR -Wl,-rpath -Wl,$TMPDIR"
 		else
 			AC_MSG_RESULT([not found])
 		fi
 
 		if test "x$JAVAC" = "x"
 		then
 			AC_MSG_CHECKING([for javac])
-			TMPVAR=`find "$with_java_home" -name javac -type f | head -n 1`
-			if test "x$TMPVAR" != "x"
+			TMPDIR=`find "$with_java_home" -name javac -type f 2>/dev/null | head -n 1`
+			if test "x$TMPDIR" != "x"
 			then
-				JAVAC="$TMPVAR"
+				JAVAC="$TMPDIR"
 				AC_MSG_RESULT([$JAVAC])
 			else
 				AC_MSG_RESULT([not found])
 			fi
 		fi
 		if test "x$JAR" = "x"
 		then
 			AC_MSG_CHECKING([for jar])
-			TMPVAR=`find "$with_java_home" -name jar -type f | head -n 1`
-			if test "x$TMPVAR" != "x"
+			TMPDIR=`find "$with_java_home" -name jar -type f 2>/dev/null | head -n 1`
+			if test "x$TMPDIR" != "x"
 			then
-				JAR="$TMPVAR"
+				JAR="$TMPDIR"
 				AC_MSG_RESULT([$JAR])
 			else
 				AC_MSG_RESULT([not found])
 			fi
 		fi
 	else if test "x$with_java_home" != "x"
@@ -2470,42 +2467,41 @@
 [#include <stdio.h>
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>])
 
         AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
-#include <stdio.h>
-#include <sys/types.h>
-#include <asm/types.h>
-#include <sys/socket.h>
-#include <linux/netlink.h>
-#include <linux/rtnetlink.h>
-]]],
-[[[
-int retval = TCA_STATS2;
-return (retval);
-]]]
-	)],
-	[AC_DEFINE([HAVE_TCA_STATS2], [1], [True if the enum-member TCA_STATS2 exists])])
+                           [
+                            #include <stdio.h>
+                            #include <sys/types.h>
+                            #include <asm/types.h>
+                            #include <sys/socket.h>
+                            #include <linux/netlink.h>
+                            #include <linux/rtnetlink.h>
+                            ], [
+                                int retval = TCA_STATS2;
+                                return (retval);
+                                ]
+                            )],
+                            [AC_DEFINE([HAVE_TCA_STATS2], [1], [True if the enum-member TCA_STATS2 exists])])
 
-	AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
-#include <stdio.h>
+	AC_COMPILE_IFELSE(
+[#include <stdio.h>
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>
 #include <linux/netlink.h>
 #include <linux/rtnetlink.h>
-]]],
-[[[
-int retval = TCA_STATS;
-return (retval);
-]]]
-	)],
-	[AC_DEFINE([HAVE_TCA_STATS], 1, [True if the enum-member TCA_STATS exists])])
+
+int main (void)
+{
+	int retval = TCA_STATS;
+	return (retval);
+}],
+	[AC_DEFINE([HAVE_TCA_STATS], 1, [True if the enum-member TCA_STATS exists])]
+	[]);
 
 	CFLAGS="$SAVE_CFLAGS"
 fi
 if test "x$with_libnetlink" = "xyes"
 then
 	AC_CHECK_LIB(netlink, rtnl_open,
@@ -2519,63 +2515,61 @@
 	CFLAGS="$CFLAGS $with_libnetlink_cflags"
 
 	AC_CACHE_CHECK(
 		[if function 'rtnl_dump_filter' expects five arguments],
 		[c_cv_rtnl_dump_filter_five_args],
 		AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
-#include <stdio.h>
-#include <sys/types.h>
+				[
+AC_INCLUDES_DEFAULT
 #include <asm/types.h>
 #include <sys/socket.h>
 #if HAVE_LIBNETLINK_H
 # include <libnetlink.h>
 #elif HAVE_IPROUTE_LIBNETLINK_H
 # include <iproute/libnetlink.h>
 #elif HAVE_LINUX_LIBNETLINK_H
 # include <linux/libnetlink.h>
 #endif
-]]],
-[[[
+				],
+				[
 if (rtnl_dump_filter(NULL, NULL, NULL, NULL, NULL))
 	return 1;
 return 0;
-]]]
-	)],
-	[c_cv_rtnl_dump_filter_five_args="yes"],
-	[c_cv_rtnl_dump_filter_five_args="no"]
+				]
+			)],
+			[c_cv_rtnl_dump_filter_five_args="yes"],
+			[c_cv_rtnl_dump_filter_five_args="no"]
+		)
 	)
-)
 
 	AC_CACHE_CHECK(
 		[if function 'rtnl_dump_filter' expects three arguments],
 		[c_cv_rtnl_dump_filter_three_args],
 		AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-[[[
-#include <stdio.h>
-#include <sys/types.h>
+				[
+AC_INCLUDES_DEFAULT
 #include <asm/types.h>
 #include <sys/socket.h>
 #if HAVE_LIBNETLINK_H
 # include <libnetlink.h>
 #elif HAVE_IPROUTE_LIBNETLINK_H
 # include <iproute/libnetlink.h>
 #elif HAVE_LINUX_LIBNETLINK_H
 # include <linux/libnetlink.h>
 #endif
-]]],
-[[[
+				],
+				[
 if (rtnl_dump_filter(NULL, NULL, NULL))
 	return 1;
 return 0;
-]]]
-	)],
-	[c_cv_rtnl_dump_filter_three_args="yes"],
-	[c_cv_rtnl_dump_filter_three_args="no"]
+				]
+			)],
+			[c_cv_rtnl_dump_filter_three_args="yes"],
+			[c_cv_rtnl_dump_filter_three_args="no"]
+		)
 	)
-)
 
 	CFLAGS="$SAVE_CFLAGS"
 
 	if test "x$c_cv_rtnl_dump_filter_five_args" = "xyes"
 	then
 		AC_DEFINE(RTNL_DUMP_FILTER_FIVE_ARGS, 1,
@@ -3034,26 +3028,26 @@
   PERL_LDFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ldopts`
   CFLAGS="$CFLAGS $PERL_CFLAGS"
   LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
   AC_CACHE_CHECK([for libperl],
     [c_cv_have_libperl],
-    AC_LINK_IFELSE([AC_LANG_PROGRAM(
-[[[
+    AC_LINK_IFELSE(
+      AC_LANG_PROGRAM(
+      [[
 #define PERL_NO_GET_CONTEXT
 #include <EXTERN.h>
 #include <perl.h>
 #include <XSUB.h>
-]]],
-[[[
+      ]],
+      [[
        dTHX;
        load_module (PERL_LOADMOD_NOIMPORT,
 			 newSVpv ("Collectd::Plugin::FooBar", 24),
 			 Nullsv);
-]]]
-      )],
+      ]]),
       [c_cv_have_libperl="yes"],
       [c_cv_have_libperl="no"]
     )
   )
 
   if test "x$c_cv_have_libperl" = "xyes"
@@ -3079,24 +3073,24 @@
 	SAVE_LDFLAGS="$LDFLAGS"
 	CFLAGS="$CFLAGS $PERL_CFLAGS"
 	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	AC_CACHE_CHECK([if perl supports ithreads],
 		[c_cv_have_perl_ithreads],
-		AC_LINK_IFELSE([AC_LANG_PROGRAM(
-[[[
+		AC_LINK_IFELSE(
+			AC_LANG_PROGRAM(
+			[[
 #include <EXTERN.h>
 #include <perl.h>
 #include <XSUB.h>
 
 #if !defined(USE_ITHREADS)
 # error "Perl does not support ithreads!"
 #endif /* !defined(USE_ITHREADS) */
-]]],
-[[[ ]]]
-			)],
+			]],
+			[[ ]]),
 			[c_cv_have_perl_ithreads="yes"],
 			[c_cv_have_perl_ithreads="no"]
 		)
 	)
 
 	if test "x$c_cv_have_perl_ithreads" = "xyes"
@@ -3116,26 +3110,26 @@
 	# (see issues #41 and #42)
 	CFLAGS="$CFLAGS $PERL_CFLAGS -Wall -Werror"
 	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	AC_CACHE_CHECK([for broken Perl_load_module()],
 		[c_cv_have_broken_perl_load_module],
-		AC_LINK_IFELSE([AC_LANG_PROGRAM(
-[[[
+		AC_LINK_IFELSE(
+			AC_LANG_PROGRAM(
+			[[
 #define PERL_NO_GET_CONTEXT
 #include <EXTERN.h>
 #include <perl.h>
 #include <XSUB.h>
-]]],
-[[[
+			]],
+			[[
 			 dTHX;
 			 load_module (PERL_LOADMOD_NOIMPORT,
 			     newSVpv ("Collectd::Plugin::FooBar", 24),
 			     Nullsv);
-]]]
-			)],
+			]]),
 			[c_cv_have_broken_perl_load_module="no"],
 			[c_cv_have_broken_perl_load_module="yes"]
 		)
 	)
 
 	CFLAGS="$SAVE_CFLAGS"
@@ -4642,17 +4636,19 @@
         plugin_tcpconns="yes"
 fi
 
 if test "x$with_perfstat" = "xyes"
 then
 	plugin_cpu="yes"
+	plugin_contextswitch="yes"
 	plugin_disk="yes"
 	plugin_memory="yes"
 	plugin_swap="yes"
 	plugin_interface="yes"
 	plugin_load="yes"
+	plugin_uptime="yes"
 fi
 
 if test "x$with_procinfo" = "xyes"
 then
 	plugin_processes="yes"
 fi
@@ -4856,12 +4852,13 @@
 		 fi; fi
 		],
 		[enable_all_plugins="auto"])
 
 m4_divert_once([HELP_ENABLE], [])
 
+AC_PLUGIN([aggregation], [yes],                [Aggregation plugin])
 AC_PLUGIN([amqp],        [$with_librabbitmq],  [AMQP output plugin])
 AC_PLUGIN([apache],      [$with_libcurl],      [Apache httpd statistics])
 AC_PLUGIN([apcups],      [yes],                [Statistics of UPSes by APC])
 AC_PLUGIN([apple_sensors], [$with_libiokit],   [Apple's hardware sensors])
 AC_PLUGIN([ascent],      [$plugin_ascent],     [AscentEmu player statistics])
 AC_PLUGIN([battery],     [$plugin_battery],    [Battery statistics])
@@ -4922,12 +4919,13 @@
 AC_PLUGIN([nut],         [$with_libupsclient], [Network UPS tools statistics])
 AC_PLUGIN([olsrd],       [yes],                [olsrd statistics])
 AC_PLUGIN([onewire],     [$with_libowcapi],    [OneWire sensor statistics])
 AC_PLUGIN([openvpn],     [yes],                [OpenVPN client statistics])
 AC_PLUGIN([oracle],      [$with_oracle],       [Oracle plugin])
 AC_PLUGIN([perl],        [$plugin_perl],       [Embed a Perl interpreter])
+AC_PLUGIN([pf],          [$have_net_pfvar_h],  [BSD packet filter (PF) statistics])
 # FIXME: Check for libevent, too.
 AC_PLUGIN([pinba],       [$have_protoc_c],     [Pinba statistics])
 AC_PLUGIN([ping],        [$with_liboping],     [Network latency statistics])
 AC_PLUGIN([postgresql],  [$with_libpq],        [PostgreSQL database statistics])
 AC_PLUGIN([powerdns],    [yes],                [PowerDNS statistics])
 AC_PLUGIN([processes],   [$plugin_processes],  [Process statistics])
@@ -5105,13 +5103,13 @@
 AC_SUBST(LCC_VERSION_MAJOR)
 AC_SUBST(LCC_VERSION_MINOR)
 AC_SUBST(LCC_VERSION_PATCH)
 AC_SUBST(LCC_VERSION_EXTRA)
 AC_SUBST(LCC_VERSION_STRING)
 
-AC_CONFIG_FILES(src/libcollectdclient/lcc_features.h)
+AC_CONFIG_FILES(src/libcollectdclient/collectd/lcc_features.h)
 
 AC_OUTPUT(Makefile src/Makefile src/collectd.conf src/libcollectdclient/Makefile src/libcollectdclient/libcollectdclient.pc src/liboconfig/Makefile bindings/Makefile bindings/java/Makefile)
 
 if test "x$with_librrd" = "xyes" \
 	&& test "x$librrd_threadsafe" != "xyes"
 then
@@ -5188,12 +5186,13 @@
     debug . . . . . . . . $enable_debug
 
   Bindings:
     perl  . . . . . . . . $with_perl_bindings
 
   Modules:
+    aggregation . . . . . $enable_aggregation
     amqp    . . . . . . . $enable_amqp
     apache  . . . . . . . $enable_apache
     apcups  . . . . . . . $enable_apcups
     apple_sensors . . . . $enable_apple_sensors
     ascent  . . . . . . . $enable_ascent
     battery . . . . . . . $enable_battery
@@ -5254,12 +5253,13 @@
     nut . . . . . . . . . $enable_nut
     olsrd . . . . . . . . $enable_olsrd
     onewire . . . . . . . $enable_onewire
     openvpn . . . . . . . $enable_openvpn
     oracle  . . . . . . . $enable_oracle
     perl  . . . . . . . . $enable_perl
+    pf  . . . . . . . . . $enable_pf
     pinba . . . . . . . . $enable_pinba
     ping  . . . . . . . . $enable_ping
     postgresql  . . . . . $enable_postgresql
     powerdns  . . . . . . $enable_powerdns
     processes . . . . . . $enable_processes
     protocols . . . . . . $enable_protocols
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/contrib: collectd.service
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/collection3/bin: fetch-json.cgi
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/collection3/bin: htmlcss.cgi
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/collection3/etc: collection4.conf
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/collection3/etc/collection.conf /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/contrib/collection3/etc/collection.conf
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/collection3/etc/collection.conf	2013-04-08 23:23:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/contrib/collection3/etc/collection.conf	2012-11-18 06:23:21.000000000 +0800
@@ -1,28 +1,28 @@
 #DataDir "/var/lib/collectd/rrd"
 GraphWidth 400
 #UnixSockAddr "/var/run/collectd-unixsock"
 <Type apache_bytes>
-  DataSources value
+  DataSources count
   DSName "count Bytes/s"
   RRDTitle "Apache Traffic"
   RRDVerticalLabel "Bytes/s"
   RRDFormat "%5.1lf%s"
   Color count 0000ff
 </Type>
 <Type apache_requests>
-  DataSources value
+  DataSources count
   DSName "count Requests/s"
   RRDTitle "Apache Traffic"
   RRDVerticalLabel "Requests/s"
   RRDFormat "%5.2lf"
   Color count 00d000
 </Type>
 <Type apache_scoreboard>
   Module GenericStacked
-  DataSources value
+  DataSources count
   RRDTitle "Apache scoreboard on {hostname}"
   RRDVerticalLabel "Slots"
   RRDFormat "%6.2lf"
   DSName closing Closing
   DSName dnslookup DNS lookup
   DSName finishing Finishing
@@ -242,20 +242,20 @@
   DSName "value Queries/s"
   RRDTitle "DNS Opcode {type_instance}"
   RRDVerticalLabel "Queries/s"
   RRDFormat "%6.1lf"
 </Type>
 <Type conntrack>
-  DataSources value
+  DataSources conntrack
   DSName conntrack Conntrack count
   RRDTitle "nf_conntrack connections on {hostname}"
   RRDVerticalLabel "Count"
   RRDFormat "%4.0lf"
 </Type>
 <Type entropy>
-  DataSources value
+  DataSources entropy
   DSName entropy Entropy bits
   RRDTitle "Available entropy on {hostname}"
   RRDVerticalLabel "Bits"
   RRDFormat "%4.0lf"
 </Type>
 <Type fanspeed>
@@ -264,13 +264,13 @@
   RRDTitle "Fanspeed ({instance})"
   RRDVerticalLabel "RPM"
   RRDFormat "%6.1lf"
   Color value 00b000
 </Type>
 <Type frequency>
-  DataSources value
+  DataSources frequency
   DSName frequency Frequency
   RRDTitle "Frequency ({type_instance})"
   RRDVerticalLabel "Hertz"
   RRDFormat "%4.1lfHz"
   Color frequency a000a0
 </Type>
@@ -539,21 +539,21 @@
   RRDTitle "MySQL Traffic ({plugin_instance})"
   RRDVerticalLabel "Bits per second"
   RRDFormat "%5.1lf%s"
   Scale 8
 </Type>
 <Type percent>
-  DataSources value
+  DataSources percent
   DSName percent Percent
   RRDTitle "Percent ({type_instance})"
   RRDVerticalLabel "Percent"
   RRDFormat "%4.1lf%%"
   Color percent 0000ff
 </Type>
 <Type ping>
-  DataSources value
+  DataSources ping
   DSName "ping Latency"
   RRDTitle "Network latency ({type_instance})"
   RRDVerticalLabel "Milliseconds"
   RRDFormat "%5.2lfms"
 </Type>
 <Type power>
@@ -697,13 +697,13 @@
   RRDTitle "Time {instance}"
   RRDVerticalLabel "Seconds"
   RRDFormat "%6.2lf %ss"
   Scale 0.001
 </Type>
 <Type users>
-  DataSources value
+  DataSources users
   DSName users Users
   RRDTitle "Users ({type_instance}) on {hostname}"
   RRDVerticalLabel "Users"
   RRDFormat "%.1lf"
   Color users 0000f0
 </Type>
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/collection3/lib/Collectd/Graph: Data.pm
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/collection3/share: html.css
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib: collection.cgi.orig
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib: ctail.px
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib: cussh.pl.orig
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib: cussh.pl.rej
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib: java
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/contrib: postgresql
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/README /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/contrib/README
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib/README	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/contrib/README	2012-11-18 06:23:21.000000000 +0800
@@ -98,6 +98,11 @@
 them in, so others can profit from it.
 
 solaris-smf
 -----------
   Manifest file for the Solaris SMF system and detailed information on how to
 register collectd as a service with this system.
+
+collectd.service
+----------------
+  Service file for systemd. Please ship this file as
+  /lib/systemd/system/collectd.service in any linux package of collectd.
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/contrib: upstart.collectd.conf
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3: depcomp
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/INSTALL /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/INSTALL
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/INSTALL	2006-07-09 15:49:45.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/INSTALL	2012-11-18 06:23:33.000000000 +0800
@@ -1,213 +1,332 @@
 Installation Instructions
 *************************
 
-Copyright (C) 1994, 1995, 1996, 1999, 2000, 2001, 2002, 2004, 2005 Free
-Software Foundation, Inc.
+Copyright (C) 1994, 1995, 1996, 1999, 2000, 2001, 2002, 2004, 2005,
+2006, 2007, 2008, 2009 Free Software Foundation, Inc.
 
-This file is free documentation; the Free Software Foundation gives
-unlimited permission to copy, distribute and modify it.
+   Copying and distribution of this file, with or without modification,
+are permitted in any medium without royalty provided the copyright
+notice and this notice are preserved.  This file is offered as-is,
+without warranty of any kind.
 
 Basic Installation
 ==================
 
-These are generic installation instructions.
+   Briefly, the shell commands `./configure; make; make install' should
+configure, build, and install this package.  The following
+more-detailed instructions are generic; see the `README' file for
+instructions specific to this package.  Some packages provide this
+`INSTALL' file but do not implement all of the features documented
+below.  The lack of an optional feature in a given package is not
+necessarily a bug.  More recommendations for GNU packages can be found
+in *note Makefile Conventions: (standards)Makefile Conventions.
 
    The `configure' shell script attempts to guess correct values for
 various system-dependent variables used during compilation.  It uses
 those values to create a `Makefile' in each directory of the package.
 It may also create one or more `.h' files containing system-dependent
 definitions.  Finally, it creates a shell script `config.status' that
 you can run in the future to recreate the current configuration, and a
 file `config.log' containing compiler output (useful mainly for
 debugging `configure').
 
    It can also use an optional file (typically called `config.cache'
 and enabled with `--cache-file=config.cache' or simply `-C') that saves
-the results of its tests to speed up reconfiguring.  (Caching is
+the results of its tests to speed up reconfiguring.  Caching is
 disabled by default to prevent problems with accidental use of stale
-cache files.)
+cache files.
 
    If you need to do unusual things to compile the package, please try
 to figure out how `configure' could check whether to do them, and mail
 diffs or instructions to the address given in the `README' so they can
 be considered for the next release.  If you are using the cache, and at
 some point `config.cache' contains results you don't want to keep, you
 may remove or edit it.
 
    The file `configure.ac' (or `configure.in') is used to create
-`configure' by a program called `autoconf'.  You only need
-`configure.ac' if you want to change it or regenerate `configure' using
-a newer version of `autoconf'.
+`configure' by a program called `autoconf'.  You need `configure.ac' if
+you want to change it or regenerate `configure' using a newer version
+of `autoconf'.
 
-The simplest way to compile this package is:
+   The simplest way to compile this package is:
 
   1. `cd' to the directory containing the package's source code and type
-     `./configure' to configure the package for your system.  If you're
-     using `csh' on an old version of System V, you might need to type
-     `sh ./configure' instead to prevent `csh' from trying to execute
-     `configure' itself.
+     `./configure' to configure the package for your system.
 
-     Running `configure' takes awhile.  While running, it prints some
-     messages telling which features it is checking for.
+     Running `configure' might take a while.  While running, it prints
+     some messages telling which features it is checking for.
 
   2. Type `make' to compile the package.
 
   3. Optionally, type `make check' to run any self-tests that come with
-     the package.
+     the package, generally using the just-built uninstalled binaries.
 
   4. Type `make install' to install the programs and any data files and
-     documentation.
+     documentation.  When installing into a prefix owned by root, it is
+     recommended that the package be configured and built as a regular
+     user, and only the `make install' phase executed with root
+     privileges.
+
+  5. Optionally, type `make installcheck' to repeat any self-tests, but
+     this time using the binaries in their final installed location.
+     This target does not install anything.  Running this target as a
+     regular user, particularly if the prior `make install' required
+     root privileges, verifies that the installation completed
+     correctly.
 
-  5. You can remove the program binaries and object files from the
+  6. You can remove the program binaries and object files from the
      source code directory by typing `make clean'.  To also remove the
      files that `configure' created (so you can compile the package for
      a different kind of computer), type `make distclean'.  There is
      also a `make maintainer-clean' target, but that is intended mainly
      for the package's developers.  If you use it, you may have to get
      all sorts of other programs in order to regenerate files that came
      with the distribution.
 
+  7. Often, you can also type `make uninstall' to remove the installed
+     files again.  In practice, not all packages have tested that
+     uninstallation works correctly, even though it is required by the
+     GNU Coding Standards.
+
+  8. Some packages, particularly those that use Automake, provide `make
+     distcheck', which can by used by developers to test that all other
+     targets like `make install' and `make uninstall' work correctly.
+     This target is generally not run by end users.
+
 Compilers and Options
 =====================
 
-Some systems require unusual options for compilation or linking that the
-`configure' script does not know about.  Run `./configure --help' for
-details on some of the pertinent environment variables.
+   Some systems require unusual options for compilation or linking that
+the `configure' script does not know about.  Run `./configure --help'
+for details on some of the pertinent environment variables.
 
    You can give `configure' initial values for configuration parameters
 by setting variables in the command line or in the environment.  Here
 is an example:
 
-     ./configure CC=c89 CFLAGS=-O2 LIBS=-lposix
+     ./configure CC=c99 CFLAGS=-g LIBS=-lposix
 
    *Note Defining Variables::, for more details.
 
 Compiling For Multiple Architectures
 ====================================
 
-You can compile the package for more than one kind of computer at the
+   You can compile the package for more than one kind of computer at the
 same time, by placing the object files for each architecture in their
-own directory.  To do this, you must use a version of `make' that
-supports the `VPATH' variable, such as GNU `make'.  `cd' to the
+own directory.  To do this, you can use GNU `make'.  `cd' to the
 directory where you want the object files and executables to go and run
 the `configure' script.  `configure' automatically checks for the
-source code in the directory that `configure' is in and in `..'.
+source code in the directory that `configure' is in and in `..'.  This
+is known as a "VPATH" build.
 
-   If you have to use a `make' that does not support the `VPATH'
-variable, you have to compile the package for one architecture at a
-time in the source code directory.  After you have installed the
-package for one architecture, use `make distclean' before reconfiguring
-for another architecture.
+   With a non-GNU `make', it is safer to compile the package for one
+architecture at a time in the source code directory.  After you have
+installed the package for one architecture, use `make distclean' before
+reconfiguring for another architecture.
+
+   On MacOS X 10.5 and later systems, you can create libraries and
+executables that work on multiple system types--known as "fat" or
+"universal" binaries--by specifying multiple `-arch' options to the
+compiler but only a single `-arch' option to the preprocessor.  Like
+this:
+
+     ./configure CC="gcc -arch i386 -arch x86_64 -arch ppc -arch ppc64" \
+                 CXX="g++ -arch i386 -arch x86_64 -arch ppc -arch ppc64" \
+                 CPP="gcc -E" CXXCPP="g++ -E"
+
+   This is not guaranteed to produce working output in all cases, you
+may have to build one architecture at a time and combine the results
+using the `lipo' tool if you have problems.
 
 Installation Names
 ==================
 
-By default, `make install' will install the package's files in
-`/usr/local/bin', `/usr/local/man', etc.  You can specify an
-installation prefix other than `/usr/local' by giving `configure' the
-option `--prefix=PREFIX'.
+   By default, `make install' installs the package's commands under
+`/usr/local/bin', include files under `/usr/local/include', etc.  You
+can specify an installation prefix other than `/usr/local' by giving
+`configure' the option `--prefix=PREFIX', where PREFIX must be an
+absolute file name.
 
    You can specify separate installation prefixes for
 architecture-specific files and architecture-independent files.  If you
-give `configure' the option `--exec-prefix=PREFIX', the package will
-use PREFIX as the prefix for installing programs and libraries.
-Documentation and other data files will still use the regular prefix.
+pass the option `--exec-prefix=PREFIX' to `configure', the package uses
+PREFIX as the prefix for installing programs and libraries.
+Documentation and other data files still use the regular prefix.
 
    In addition, if you use an unusual directory layout you can give
 options like `--bindir=DIR' to specify different values for particular
 kinds of files.  Run `configure --help' for a list of the directories
-you can set and what kinds of files go in them.
+you can set and what kinds of files go in them.  In general, the
+default for these options is expressed in terms of `${prefix}', so that
+specifying just `--prefix' will affect all of the other directory
+specifications that were not explicitly provided.
+
+   The most portable way to affect installation locations is to pass the
+correct locations to `configure'; however, many packages provide one or
+both of the following shortcuts of passing variable assignments to the
+`make install' command line to change installation locations without
+having to reconfigure or recompile.
+
+   The first method involves providing an override variable for each
+affected directory.  For example, `make install
+prefix=/alternate/directory' will choose an alternate location for all
+directory configuration variables that were expressed in terms of
+`${prefix}'.  Any directories that were specified during `configure',
+but not in terms of `${prefix}', must each be overridden at install
+time for the entire installation to be relocated.  The approach of
+makefile variable overrides for each directory variable is required by
+the GNU Coding Standards, and ideally causes no recompilation.
+However, some platforms have known limitations with the semantics of
+shared libraries that end up requiring recompilation when using this
+method, particularly noticeable in packages that use GNU Libtool.
+
+   The second method involves providing the `DESTDIR' variable.  For
+example, `make install DESTDIR=/alternate/directory' will prepend
+`/alternate/directory' before all installation names.  The approach of
+`DESTDIR' overrides is not required by the GNU Coding Standards, and
+does not work on platforms that have drive letters.  On the other hand,
+it does better at avoiding recompilation issues, and works well even
+when some directory options were not specified in terms of `${prefix}'
+at `configure' time.
+
+Optional Features
+=================
 
    If the package supports it, you can cause programs to be installed
 with an extra prefix or suffix on their names by giving `configure' the
 option `--program-prefix=PREFIX' or `--program-suffix=SUFFIX'.
 
-Optional Features
-=================
-
-Some packages pay attention to `--enable-FEATURE' options to
+   Some packages pay attention to `--enable-FEATURE' options to
 `configure', where FEATURE indicates an optional part of the package.
 They may also pay attention to `--with-PACKAGE' options, where PACKAGE
 is something like `gnu-as' or `x' (for the X Window System).  The
 `README' should mention any `--enable-' and `--with-' options that the
 package recognizes.
 
    For packages that use the X Window System, `configure' can usually
 find the X include and library files automatically, but if it doesn't,
 you can use the `configure' options `--x-includes=DIR' and
 `--x-libraries=DIR' to specify their locations.
 
+   Some packages offer the ability to configure how verbose the
+execution of `make' will be.  For these packages, running `./configure
+--enable-silent-rules' sets the default to minimal output, which can be
+overridden with `make V=1'; while running `./configure
+--disable-silent-rules' sets the default to verbose, which can be
+overridden with `make V=0'.
+
+Particular systems
+==================
+
+   On HP-UX, the default C compiler is not ANSI C compatible.  If GNU
+CC is not installed, it is recommended to use the following options in
+order to use an ANSI C compiler:
+
+     ./configure CC="cc -Ae -D_XOPEN_SOURCE=500"
+
+and if that doesn't work, install pre-built binaries of GCC for HP-UX.
+
+   On OSF/1 a.k.a. Tru64, some versions of the default C compiler cannot
+parse its `<wchar.h>' header file.  The option `-nodtk' can be used as
+a workaround.  If GNU CC is not installed, it is therefore recommended
+to try
+
+     ./configure CC="cc"
+
+and if that doesn't work, try
+
+     ./configure CC="cc -nodtk"
+
+   On Solaris, don't put `/usr/ucb' early in your `PATH'.  This
+directory contains several dysfunctional programs; working variants of
+these programs are available in `/usr/bin'.  So, if you need `/usr/ucb'
+in your `PATH', put it _after_ `/usr/bin'.
+
+   On Haiku, software installed for all users goes in `/boot/common',
+not `/usr/local'.  It is recommended to use the following options:
+
+     ./configure --prefix=/boot/common
+
 Specifying the System Type
 ==========================
 
-There may be some features `configure' cannot figure out automatically,
-but needs to determine by the type of machine the package will run on.
-Usually, assuming the package is built to be run on the _same_
-architectures, `configure' can figure that out, but if it prints a
-message saying it cannot guess the machine type, give it the
+   There may be some features `configure' cannot figure out
+automatically, but needs to determine by the type of machine the package
+will run on.  Usually, assuming the package is built to be run on the
+_same_ architectures, `configure' can figure that out, but if it prints
+a message saying it cannot guess the machine type, give it the
 `--build=TYPE' option.  TYPE can either be a short name for the system
 type, such as `sun4', or a canonical name which has the form:
 
      CPU-COMPANY-SYSTEM
 
 where SYSTEM can have one of these forms:
 
-     OS KERNEL-OS
+     OS
+     KERNEL-OS
 
    See the file `config.sub' for the possible values of each field.  If
 `config.sub' isn't included in this package, then this package doesn't
 need to know the machine type.
 
    If you are _building_ compiler tools for cross-compiling, you should
-use the `--target=TYPE' option to select the type of system they will
+use the option `--target=TYPE' to select the type of system they will
 produce code for.
 
    If you want to _use_ a cross compiler, that generates code for a
 platform different from the build platform, you should specify the
 "host" platform (i.e., that on which the generated programs will
 eventually be run) with `--host=TYPE'.
 
 Sharing Defaults
 ================
 
-If you want to set default values for `configure' scripts to share, you
-can create a site shell script called `config.site' that gives default
-values for variables like `CC', `cache_file', and `prefix'.
+   If you want to set default values for `configure' scripts to share,
+you can create a site shell script called `config.site' that gives
+default values for variables like `CC', `cache_file', and `prefix'.
 `configure' looks for `PREFIX/share/config.site' if it exists, then
 `PREFIX/etc/config.site' if it exists.  Or, you can set the
 `CONFIG_SITE' environment variable to the location of the site script.
 A warning: not all `configure' scripts look for a site script.
 
 Defining Variables
 ==================
 
-Variables not defined in a site shell script can be set in the
+   Variables not defined in a site shell script can be set in the
 environment passed to `configure'.  However, some packages may run
 configure again during the build, and the customized values of these
 variables may be lost.  In order to avoid this problem, you should set
 them in the `configure' command line, using `VAR=value'.  For example:
 
      ./configure CC=/usr/local2/bin/gcc
 
 causes the specified `gcc' to be used as the C compiler (unless it is
-overridden in the site shell script).  Here is a another example:
+overridden in the site shell script).
 
-     /bin/bash ./configure CONFIG_SHELL=/bin/bash
+Unfortunately, this technique does not work for `CONFIG_SHELL' due to
+an Autoconf bug.  Until the bug is fixed you can use this workaround:
 
-Here the `CONFIG_SHELL=/bin/bash' operand causes subsequent
-configuration-related scripts to be executed by `/bin/bash'.
+     CONFIG_SHELL=/bin/bash /bin/bash ./configure CONFIG_SHELL=/bin/bash
 
 `configure' Invocation
 ======================
 
-`configure' recognizes the following options to control how it operates.
+   `configure' recognizes the following options to control how it
+operates.
 
 `--help'
 `-h'
-     Print a summary of the options to `configure', and exit.
+     Print a summary of all of the options to `configure', and exit.
+
+`--help=short'
+`--help=recursive'
+     Print a summary of the options unique to this package's
+     `configure', and exit.  The `short' variant lists options used
+     only in the top level, while the `recursive' variant lists options
+     also present in any nested packages.
 
 `--version'
 `-V'
      Print the version of Autoconf used to generate the `configure'
      script, and exit.
 
@@ -228,9 +347,19 @@
      messages will still be shown).
 
 `--srcdir=DIR'
      Look for the package's source code in directory DIR.  Usually
      `configure' can determine that directory automatically.
 
+`--prefix=DIR'
+     Use DIR as the installation prefix.  *note Installation Names::
+     for more details, including other options available for fine-tuning
+     the installation locations.
+
+`--no-create'
+`-n'
+     Run the configure checks, but stop before creating any output
+     files.
+
 `configure' also accepts some other, not widely useful, options.  Run
 `configure --help' for more details.
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3: install-sh
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/libltdl/config/config.guess /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/libltdl/config/config.guess
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/libltdl/config/config.guess	2013-04-09 09:04:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/libltdl/config/config.guess	2012-11-18 06:23:36.000000000 +0800
@@ -1,13 +1,13 @@
 #! /bin/sh
 # Attempt to guess a canonical system name.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
+#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009
 #   Free Software Foundation, Inc.
 
-timestamp='2009-12-30'
+timestamp='2009-06-10'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
 #
@@ -24,22 +24,22 @@
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
 
-# Originally written by Per Bothner.  Please send patches (context
-# diff format) to <config-patches@gnu.org> and include a ChangeLog
-# entry.
+# Originally written by Per Bothner <per@bothner.com>.
+# Please send patches to <config-patches@gnu.org>.  Submit a context
+# diff and a properly formatted ChangeLog entry.
 #
 # This script attempts to guess a canonical system name similar to
 # config.sub.  If it succeeds, it prints the system name on stdout, and
 # exits with 0.  Otherwise, it exits with 1.
 #
-# You can get the latest version of this script from:
-# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
+# The plan is that this can be called by configure scripts if you
+# don't specify an explicit build system type.
 
 me=`echo "$0" | sed -e 's,.*/,,'`
 
 usage="\
 Usage: $0 [OPTION]
 
@@ -53,15 +53,14 @@
 Report bugs and patches to <config-patches@gnu.org>."
 
 version="\
 GNU config.guess ($timestamp)
 
 Originally written by Per Bothner.
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
-2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
-Software Foundation, Inc.
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001,
+2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
 
 help="
 Try \`$me --help' for more information."
@@ -331,15 +330,12 @@
     sun4H:SunOS:5.*:*)
 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
-    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
-	echo i386-pc-auroraux${UNAME_RELEASE}
-	exit ;;
     i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
 	eval $set_cc_for_build
 	SUN_ARCH="i386"
 	# If there is a compiler, see if it is configured for 64-bit objects.
 	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
 	# This test works for both compilers.
@@ -808,18 +804,18 @@
     	# uname -m includes "-pc" on this system.
     	echo ${UNAME_MACHINE}-mingw32
 	exit ;;
     i*:PW*:*)
 	echo ${UNAME_MACHINE}-pc-pw32
 	exit ;;
-    *:Interix*:*)
+    *:Interix*:[3456]*)
     	case ${UNAME_MACHINE} in
 	    x86)
 		echo i586-pc-interix${UNAME_RELEASE}
 		exit ;;
-	    authenticamd | genuineintel | EM64T)
+	    EM64T | authenticamd | genuineintel)
 		echo x86_64-unknown-interix${UNAME_RELEASE}
 		exit ;;
 	    IA64)
 		echo ia64-unknown-interix${UNAME_RELEASE}
 		exit ;;
 	esac ;;
@@ -855,26 +851,12 @@
 	# other systems with GNU libc and userland
 	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
 	exit ;;
     i*86:Minix:*:*)
 	echo ${UNAME_MACHINE}-pc-minix
 	exit ;;
-    alpha:Linux:*:*)
-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
-	  EV5)   UNAME_MACHINE=alphaev5 ;;
-	  EV56)  UNAME_MACHINE=alphaev56 ;;
-	  PCA56) UNAME_MACHINE=alphapca56 ;;
-	  PCA57) UNAME_MACHINE=alphapca56 ;;
-	  EV6)   UNAME_MACHINE=alphaev6 ;;
-	  EV67)  UNAME_MACHINE=alphaev67 ;;
-	  EV68*) UNAME_MACHINE=alphaev68 ;;
-        esac
-	objdump --private-headers /bin/sh | grep -q ld.so.1
-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
-	exit ;;
     arm*:Linux:*:*)
 	eval $set_cc_for_build
 	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
 	    | grep -q __ARM_EABI__
 	then
 	    echo ${UNAME_MACHINE}-unknown-linux-gnu
@@ -891,23 +873,12 @@
     crisv32:Linux:*:*)
 	echo crisv32-axis-linux-gnu
 	exit ;;
     frv:Linux:*:*)
     	echo frv-unknown-linux-gnu
 	exit ;;
-    i*86:Linux:*:*)
-	LIBC=gnu
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#ifdef __dietlibc__
-	LIBC=dietlibc
-	#endif
-EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`
-	echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
-	exit ;;
     ia64:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
 	exit ;;
     m32r*:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
 	exit ;;
@@ -927,37 +898,55 @@
 	CPU=${UNAME_MACHINE}
 	#else
 	CPU=
 	#endif
 	#endif
 EOF
-	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
+	eval "`$CC_FOR_BUILD -E $dummy.c 2>/dev/null | sed -n '
+	    /^CPU/{
+		s: ::g
+		p
+	    }'`"
 	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
 	;;
     or32:Linux:*:*)
 	echo or32-unknown-linux-gnu
 	exit ;;
+    ppc:Linux:*:*)
+	echo powerpc-unknown-linux-gnu
+	exit ;;
+    ppc64:Linux:*:*)
+	echo powerpc64-unknown-linux-gnu
+	exit ;;
+    alpha:Linux:*:*)
+	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+	  EV5)   UNAME_MACHINE=alphaev5 ;;
+	  EV56)  UNAME_MACHINE=alphaev56 ;;
+	  PCA56) UNAME_MACHINE=alphapca56 ;;
+	  PCA57) UNAME_MACHINE=alphapca56 ;;
+	  EV6)   UNAME_MACHINE=alphaev6 ;;
+	  EV67)  UNAME_MACHINE=alphaev67 ;;
+	  EV68*) UNAME_MACHINE=alphaev68 ;;
+        esac
+	objdump --private-headers /bin/sh | grep -q ld.so.1
+	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
+	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+	exit ;;
     padre:Linux:*:*)
 	echo sparc-unknown-linux-gnu
 	exit ;;
-    parisc64:Linux:*:* | hppa64:Linux:*:*)
-	echo hppa64-unknown-linux-gnu
-	exit ;;
     parisc:Linux:*:* | hppa:Linux:*:*)
 	# Look for CPU level
 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
 	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
 	  *)    echo hppa-unknown-linux-gnu ;;
 	esac
 	exit ;;
-    ppc64:Linux:*:*)
-	echo powerpc64-unknown-linux-gnu
-	exit ;;
-    ppc:Linux:*:*)
-	echo powerpc-unknown-linux-gnu
+    parisc64:Linux:*:* | hppa64:Linux:*:*)
+	echo hppa64-unknown-linux-gnu
 	exit ;;
     s390:Linux:*:* | s390x:Linux:*:*)
 	echo ${UNAME_MACHINE}-ibm-linux
 	exit ;;
     sh64*:Linux:*:*)
     	echo ${UNAME_MACHINE}-unknown-linux-gnu
@@ -974,12 +963,64 @@
     x86_64:Linux:*:*)
 	echo x86_64-unknown-linux-gnu
 	exit ;;
     xtensa*:Linux:*:*)
     	echo ${UNAME_MACHINE}-unknown-linux-gnu
 	exit ;;
+    i*86:Linux:*:*)
+	# The BFD linker knows what the default object file format is, so
+	# first see if it will tell us. cd to the root directory to prevent
+	# problems with other programs or directories called `ld' in the path.
+	# Set LC_ALL=C to ensure ld outputs messages in English.
+	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
+			 | sed -ne '/supported targets:/!d
+				    s/[ 	][ 	]*/ /g
+				    s/.*supported targets: *//
+				    s/ .*//
+				    p'`
+        case "$ld_supported_targets" in
+	  elf32-i386)
+		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
+		;;
+	esac
+	# Determine whether the default compiler is a.out or elf
+	eval $set_cc_for_build
+	sed 's/^	//' << EOF >$dummy.c
+	#include <features.h>
+	#ifdef __ELF__
+	# ifdef __GLIBC__
+	#  if __GLIBC__ >= 2
+	LIBC=gnu
+	#  else
+	LIBC=gnulibc1
+	#  endif
+	# else
+	LIBC=gnulibc1
+	# endif
+	#else
+	#if defined(__INTEL_COMPILER) || defined(__PGI) || defined(__SUNPRO_C) || defined(__SUNPRO_CC)
+	LIBC=gnu
+	#else
+	LIBC=gnuaout
+	#endif
+	#endif
+	#ifdef __dietlibc__
+	LIBC=dietlibc
+	#endif
+EOF
+	eval "`$CC_FOR_BUILD -E $dummy.c 2>/dev/null | sed -n '
+	    /^LIBC/{
+		s: ::g
+		p
+	    }'`"
+	test x"${LIBC}" != x && {
+		echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
+		exit
+	}
+	test x"${TENTATIVE}" != x && { echo "${TENTATIVE}"; exit; }
+	;;
     i*86:DYNIX/ptx:4*:*)
 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
 	# earlier versions are messed up and put the nodename in both
 	# sysname and nodename.
 	echo i386-sequent-sysv4
 	exit ;;
@@ -1203,22 +1244,12 @@
     *:Rhapsody:*:*)
 	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
 	exit ;;
     *:Darwin:*:*)
 	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
 	case $UNAME_PROCESSOR in
-	    i386)
-		eval $set_cc_for_build
-		if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
-		  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
-		      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
-		      grep IS_64BIT_ARCH >/dev/null
-		  then
-		      UNAME_PROCESSOR="x86_64"
-		  fi
-		fi ;;
 	    unknown) UNAME_PROCESSOR=powerpc ;;
 	esac
 	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
 	exit ;;
     *:procnto*:*:* | *:QNX:[0123456789]*:*)
 	UNAME_PROCESSOR=`uname -p`
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/libltdl/config/config.sub /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/libltdl/config/config.sub
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/libltdl/config/config.sub	2013-04-09 09:04:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/libltdl/config/config.sub	2012-11-18 06:23:36.000000000 +0800
@@ -1,13 +1,13 @@
 #! /bin/sh
 # Configuration validation subroutine script.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
+#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009
 #   Free Software Foundation, Inc.
 
-timestamp='2010-01-22'
+timestamp='2009-06-11'
 
 # This file is (in principle) common to ALL GNU software.
 # The presence of a machine in this file suggests that SOME GNU software
 # can handle that machine.  It does not imply ALL GNU software can.
 #
 # This file is free software; you can redistribute it and/or modify
@@ -29,22 +29,19 @@
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
 
 # Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted GNU ChangeLog entry.
+# diff and a properly formatted ChangeLog entry.
 #
 # Configuration subroutine to validate and canonicalize a configuration type.
 # Supply the specified configuration type as an argument.
 # If it is invalid, we print an error message on stderr and exit with code 1.
 # Otherwise, we print the canonical config type on stdout and succeed.
 
-# You can get the latest version of this script from:
-# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
-
 # This file is supposed to be the same for all GNU packages
 # and recognize all the CPU types, system types and aliases
 # that are meaningful with *any* GNU software.
 # Each package is responsible for reporting which valid configurations
 # it does not support.  The user should be able to distinguish
 # a failure to support a valid configuration from a meaningless
@@ -72,15 +69,14 @@
 
 Report bugs and patches to <config-patches@gnu.org>."
 
 version="\
 GNU config.sub ($timestamp)
 
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
-2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
-Software Foundation, Inc.
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001,
+2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
 
 help="
 Try \`$me --help' for more information."
@@ -150,13 +146,13 @@
 	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
 	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
 	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
-	-apple | -axis | -knuth | -cray | -microblaze)
+	-apple | -axis | -knuth | -cray)
 		os=
 		basic_machine=$1
 		;;
         -bluegene*)
 	        os=-cnk
 		;;
@@ -285,28 +281,26 @@
 	| nios | nios2 \
 	| ns16k | ns32k \
 	| or32 \
 	| pdp10 | pdp11 | pj | pjl \
 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
 	| pyramid \
-	| rx \
 	| score \
 	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
 	| sh64 | sh64le \
 	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
 	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
 	| spu | strongarm \
 	| tahoe | thumb | tic4x | tic80 | tron \
-	| ubicom32 \
 	| v850 | v850e \
 	| we32k \
 	| x86 | xc16x | xscale | xscalee[bl] | xstormy16 | xtensa \
 	| z8k | z80)
 		basic_machine=$basic_machine-unknown
 		;;
-	m6811 | m68hc11 | m6812 | m68hc12 | picochip)
+	m6811 | m68hc11 | m6812 | m68hc12)
 		# Motorola 68HC11/12.
 		basic_machine=$basic_machine-unknown
 		os=-none
 		;;
 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
 		;;
@@ -343,13 +337,13 @@
 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
 	| i*86-* | i860-* | i960-* | ia64-* \
 	| ip2k-* | iq2000-* \
 	| lm32-* \
 	| m32c-* | m32r-* | m32rle-* \
 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
-	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \
+	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* \
 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
 	| mips16-* \
 	| mips64-* | mips64el-* \
 	| mips64octeon-* | mips64octeonel-* \
 	| mips64orion-* | mips64orionel-* \
 	| mips64r5900-* | mips64r5900el-* \
@@ -371,23 +365,21 @@
 	| nios-* | nios2-* \
 	| none-* | np1-* | ns16k-* | ns32k-* \
 	| orion-* \
 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
 	| pyramid-* \
-	| romp-* | rs6000-* | rx-* \
+	| romp-* | rs6000-* \
 	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
 	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
 	| sparclite-* \
 	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | strongarm-* | sv1-* | sx?-* \
 	| tahoe-* | thumb-* \
-	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
-	| tile-* | tilegx-* \
+	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* | tile-* \
 	| tron-* \
-	| ubicom32-* \
 	| v850-* | v850e-* | vax-* \
 	| we32k-* \
 	| x86-* | x86_64-* | xc16x-* | xps100-* | xscale-* | xscalee[bl]-* \
 	| xstormy16-* | xtensa*-* \
 	| ymp-* \
 	| z8k-* | z80-*)
@@ -731,15 +723,12 @@
 		os=-sysv
 		;;
 	merlin)
 		basic_machine=ns32k-utek
 		os=-sysv
 		;;
-        microblaze)
-		basic_machine=microblaze-xilinx
-		;;
 	mingw32)
 		basic_machine=i386-pc
 		os=-mingw32
 		;;
 	mingw32ce)
 		basic_machine=arm-unknown
@@ -1084,17 +1073,12 @@
 		os=-coff
 		;;
 	tic6x | c6x*)
 		basic_machine=tic6x-unknown
 		os=-coff
 		;;
-        # This must be matched before tile*.
-        tilegx*)
-		basic_machine=tilegx-unknown
-		os=-linux-gnu
-		;;
 	tile*)
 		basic_machine=tile-unknown
 		os=-linux-gnu
 		;;
 	tx39)
 		basic_machine=mipstx39-unknown
@@ -1260,15 +1244,12 @@
 if [ x"$os" != x"" ]
 then
 case $os in
         # First match some system type aliases
         # that might get confused with valid system types.
 	# -solaris* is a basic system type, with this one exception.
-        -auroraux)
-	        os=-auroraux
-		;;
 	-solaris1 | -solaris1.*)
 		os=`echo $os | sed -e 's|solaris1|sunos4|'`
 		;;
 	-solaris)
 		os=-solaris2
 		;;
@@ -1284,14 +1265,14 @@
 	# First accept the basic system types.
 	# The portable systems comes first.
 	# Each alternative MUST END IN A *, to match a version number.
 	# -sysv* is not here because it comes later, after sysvr4.
 	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
 	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
-	      | -sym* | -kopensolaris* \
+	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
+	      | -kopensolaris* \
 	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
 	      | -aos* | -aros* \
 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
 	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
 	      | -openbsd* | -solidbsd* \
@@ -1306,13 +1287,13 @@
 	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
 	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
-	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
+	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops*)
 	# Remember, each alternative MUST END IN *, to match a version number.
 		;;
 	-qnx*)
 		case $basic_machine in
 		    x86-* | i*86-*)
 			;;
@@ -1439,14 +1420,12 @@
 	-zvmoe)
 		os=-zvmoe
 		;;
 	-dicos*)
 		os=-dicos
 		;;
-        -nacl*)
-	        ;;
 	-none)
 		;;
 	*)
 		# Get rid of the `-' at the beginning of $os.
 		os=`echo $os | sed 's/[^-]*-//'`
 		echo Invalid configuration \`$1\': system \`$os\' not recognized 1>&2
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/libltdl/config/ltmain.sh /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/libltdl/config/ltmain.sh
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/libltdl/config/ltmain.sh	2013-04-09 09:04:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/libltdl/config/ltmain.sh	2012-11-18 06:23:36.000000000 +0800
@@ -62,21 +62,21 @@
 #
 #       host-triplet:	$host
 #       shell:		$SHELL
 #       compiler:		$LTCC
 #       compiler flags:		$LTCFLAGS
 #       linker:		$LD (gnu? $with_gnu_ld)
-#       $progname:		(GNU libtool) 2.2.6b Debian-2.2.6b-2
+#       $progname:		(GNU libtool) 2.2.6b Debian-2.2.6b-2ubuntu1
 #       automake:		$automake_version
 #       autoconf:		$autoconf_version
 #
 # Report bugs to <bug-libtool@gnu.org>.
 
 PROGRAM=ltmain.sh
 PACKAGE=libtool
-VERSION="2.2.6b Debian-2.2.6b-2"
+VERSION="2.2.6b Debian-2.2.6b-2ubuntu1"
 TIMESTAMP=""
 package_revision=1.3017
 
 # Be Bourne compatible
 if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
   emulate sh
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3: ltmain.sh
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/Makefile.in	2013-04-09 09:04:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/Makefile.in	2012-11-18 06:23:38.000000000 +0800
@@ -32,28 +32,28 @@
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
 subdir = .
 DIST_COMMON = README $(am__configure_deps) $(srcdir)/Makefile.am \
-	$(srcdir)/Makefile.in $(top_srcdir)/configure AUTHORS COPYING \
-	ChangeLog INSTALL NEWS TODO compile config.guess config.sub \
-	depcomp install-sh libltdl/config/compile \
-	libltdl/config/config.guess libltdl/config/config.sub \
-	libltdl/config/depcomp libltdl/config/install-sh \
-	libltdl/config/ltmain.sh libltdl/config/missing \
-	libltdl/config/ylwrap ltmain.sh missing
+	$(srcdir)/Makefile.in $(top_srcdir)/configure \
+	$(top_srcdir)/src/libcollectdclient/collectd/lcc_features.h.in \
+	AUTHORS COPYING ChangeLog INSTALL NEWS TODO \
+	libltdl/config/compile libltdl/config/config.guess \
+	libltdl/config/config.sub libltdl/config/depcomp \
+	libltdl/config/install-sh libltdl/config/ltmain.sh \
+	libltdl/config/missing libltdl/config/ylwrap
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 am__aclocal_m4_deps = $(top_srcdir)/configure.in
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
 am__CONFIG_DISTCLEAN_FILES = config.status config.cache config.log \
  configure.lineno config.status.lineno
 mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = $(top_builddir)/src/config.h
-CONFIG_CLEAN_FILES =
+CONFIG_CLEAN_FILES = src/libcollectdclient/collectd/lcc_features.h
 CONFIG_CLEAN_VPATH_FILES =
 SOURCES =
 DIST_SOURCES =
 RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
 	html-recursive info-recursive install-data-recursive \
 	install-dvi-recursive install-exec-recursive \
@@ -274,14 +274,12 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
-PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
-PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
@@ -383,12 +381,14 @@
 
 $(top_srcdir)/configure:  $(am__configure_deps)
 	$(am__cd) $(srcdir) && $(AUTOCONF)
 $(ACLOCAL_M4):  $(am__aclocal_m4_deps)
 	$(am__cd) $(srcdir) && $(ACLOCAL) $(ACLOCAL_AMFLAGS)
 $(am__aclocal_m4_deps):
+src/libcollectdclient/collectd/lcc_features.h: $(top_builddir)/config.status $(top_srcdir)/src/libcollectdclient/collectd/lcc_features.h.in
+	cd $(top_builddir) && $(SHELL) ./config.status $@
 
 mostlyclean-libtool:
 	-rm -f *.lo
 
 clean-libtool:
 	-rm -rf .libs _libs
@@ -648,13 +648,13 @@
 	  uncompress -c $(distdir).tar.Z | $(am__untar) ;;\
 	*.shar.gz*) \
 	  GZIP=$(GZIP_ENV) gzip -dc $(distdir).shar.gz | unshar ;;\
 	*.zip*) \
 	  unzip $(distdir).zip ;;\
 	esac
-	chmod -R a-w $(distdir); chmod u+w $(distdir)
+	chmod -R a-w $(distdir); chmod a+w $(distdir)
 	mkdir $(distdir)/_build
 	mkdir $(distdir)/_inst
 	chmod a-w $(distdir)
 	test -d $(distdir)/_build || exit 0; \
 	dc_install_base=`$(am__cd) $(distdir)/_inst && pwd | sed -e 's,^[^:\\/]:[\\/],/,'` \
 	  && dc_destdir="$${TMPDIR-/tmp}/am-dc-$$$$/" \
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3: missing
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src: aggregation.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/amqp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/amqp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/amqp.c	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/amqp.c	2012-11-18 06:23:21.000000000 +0800
@@ -28,25 +28,27 @@
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "utils_cmd_putval.h"
 #include "utils_format_json.h"
+#include "utils_format_graphite.h"
 
 #include <pthread.h>
 
 #include <amqp.h>
 #include <amqp_framing.h>
 
 /* Defines for the delivery mode. I have no idea why they're not defined by the
  * library.. */
 #define CAMQP_DM_VOLATILE   1
 #define CAMQP_DM_PERSISTENT 2
 
-#define CAMQP_FORMAT_COMMAND 1
-#define CAMQP_FORMAT_JSON    2
+#define CAMQP_FORMAT_COMMAND    1
+#define CAMQP_FORMAT_JSON       2
+#define CAMQP_FORMAT_GRAPHITE   3
 
 #define CAMQP_CHANNEL 1
 
 /*
  * Data types
  */
@@ -65,12 +67,16 @@
     char   *routing_key;
 
     /* publish only */
     uint8_t delivery_mode;
     _Bool   store_rates;
     int     format;
+    /* publish & graphite format only */
+    char    *prefix;
+    char    *postfix;
+    char    escape_char;
 
     /* subscribe only */
     char   *exchange_type;
     char   *queue;
 
     amqp_connection_state_t connection;
@@ -126,12 +132,15 @@
     sfree (conf->user);
     sfree (conf->password);
     sfree (conf->exchange);
     sfree (conf->exchange_type);
     sfree (conf->queue);
     sfree (conf->routing_key);
+    sfree (conf->prefix);
+    sfree (conf->postfix);
+
 
     sfree (conf);
 } /* }}} void camqp_config_free */
 
 static char *camqp_bytes_cstring (amqp_bytes_t *in) /* {{{ */
 {
@@ -588,37 +597,39 @@
 
 static void *camqp_subscribe_thread (void *user_data) /* {{{ */
 {
     camqp_config_t *conf = user_data;
     int status;
 
+    cdtime_t interval = plugin_get_interval ();
+
     while (subscriber_threads_running)
     {
         amqp_frame_t frame;
 
         status = camqp_connect (conf);
         if (status != 0)
         {
             struct timespec ts_interval;
             ERROR ("amqp plugin: camqp_connect failed. "
                     "Will sleep for %.3f seconds.",
-                    CDTIME_T_TO_DOUBLE (interval_g));
-            CDTIME_T_TO_TIMESPEC (interval_g, &ts_interval);
+                    CDTIME_T_TO_DOUBLE (interval));
+            CDTIME_T_TO_TIMESPEC (interval, &ts_interval);
             nanosleep (&ts_interval, /* remaining = */ NULL);
             continue;
         }
 
         status = amqp_simple_wait_frame (conf->connection, &frame);
         if (status < 0)
         {
             struct timespec ts_interval;
             ERROR ("amqp plugin: amqp_simple_wait_frame failed. "
                     "Will sleep for %.3f seconds.",
-                    CDTIME_T_TO_DOUBLE (interval_g));
+                    CDTIME_T_TO_DOUBLE (interval));
             camqp_close_connection (conf);
-            CDTIME_T_TO_TIMESPEC (interval_g, &ts_interval);
+            CDTIME_T_TO_TIMESPEC (interval, &ts_interval);
             nanosleep (&ts_interval, /* remaining = */ NULL);
             continue;
         }
 
         if (frame.frame_type != AMQP_FRAME_METHOD)
         {
@@ -658,13 +669,13 @@
         return (ENOMEM);
     }
     subscriber_threads = tmp;
     tmp = subscriber_threads + subscriber_threads_num;
     memset (tmp, 0, sizeof (*tmp));
 
-    status = pthread_create (tmp, /* attr = */ NULL,
+    status = plugin_thread_create (tmp, /* attr = */ NULL,
             camqp_subscribe_thread, conf);
     if (status != 0)
     {
         char errbuf[1024];
         ERROR ("amqp plugin: pthread_create failed: %s",
                 sstrerror (status, errbuf, sizeof (errbuf)));
@@ -696,12 +707,14 @@
         | AMQP_BASIC_DELIVERY_MODE_FLAG
         | AMQP_BASIC_APP_ID_FLAG;
     if (conf->format == CAMQP_FORMAT_COMMAND)
         props.content_type = amqp_cstring_bytes("text/collectd");
     else if (conf->format == CAMQP_FORMAT_JSON)
         props.content_type = amqp_cstring_bytes("application/json");
+    else if (conf->format == CAMQP_FORMAT_GRAPHITE)
+        props.content_type = amqp_cstring_bytes("text/graphite");
     else
         assert (23 == 42);
     props.delivery_mode = conf->delivery_mode;
     props.app_id = amqp_cstring_bytes("collectd");
 
     status = amqp_basic_publish(conf->connection,
@@ -774,12 +787,24 @@
         size_t bfill = 0;
 
         format_json_initialize (buffer, &bfill, &bfree);
         format_json_value_list (buffer, &bfill, &bfree, ds, vl, conf->store_rates);
         format_json_finalize (buffer, &bfill, &bfree);
     }
+    else if (conf->format == CAMQP_FORMAT_GRAPHITE)
+    {
+        status = format_graphite (buffer, sizeof (buffer), ds, vl,
+                    conf->prefix, conf->postfix, conf->escape_char,
+                    conf->store_rates);
+        if (status != 0)
+        {
+            ERROR ("amqp plugin: format_graphite failed with status %i.",
+                    status);
+            return (status);
+        }
+    }
     else
     {
         ERROR ("amqp plugin: Invalid format (%i).", conf->format);
         return (-1);
     }
 
@@ -806,12 +831,14 @@
 
     assert (string != NULL);
     if (strcasecmp ("Command", string) == 0)
         conf->format = CAMQP_FORMAT_COMMAND;
     else if (strcasecmp ("JSON", string) == 0)
         conf->format = CAMQP_FORMAT_JSON;
+    else if (strcasecmp ("Graphite", string) == 0)
+        conf->format = CAMQP_FORMAT_GRAPHITE;
     else
     {
         WARNING ("amqp plugin: Invalid format string: %s",
                 string);
     }
 
@@ -846,12 +873,16 @@
     conf->password = NULL;
     conf->exchange = NULL;
     conf->routing_key = NULL;
     /* publish only */
     conf->delivery_mode = CAMQP_DM_VOLATILE;
     conf->store_rates = 0;
+    /* publish & graphite only */
+    conf->prefix = NULL;
+    conf->postfix = NULL;
+    conf->escape_char = '_';
     /* subscribe only */
     conf->exchange_type = NULL;
     conf->queue = NULL;
     /* general */
     conf->connection = NULL;
     pthread_mutex_init (&conf->lock, /* attr = */ NULL);
@@ -903,12 +934,26 @@
                 conf->delivery_mode = CAMQP_DM_VOLATILE;
         }
         else if ((strcasecmp ("StoreRates", child->key) == 0) && publish)
             status = cf_util_get_boolean (child, &conf->store_rates);
         else if ((strcasecmp ("Format", child->key) == 0) && publish)
             status = camqp_config_set_format (child, conf);
+        else if ((strcasecmp ("GraphitePrefix", child->key) == 0) && publish)
+            status = cf_util_get_string (child, &conf->prefix);
+        else if ((strcasecmp ("GraphitePostfix", child->key) == 0) && publish)
+            status = cf_util_get_string (child, &conf->postfix);
+        else if ((strcasecmp ("GraphiteEscapeChar", child->key) == 0) && publish)
+        {
+            char *tmp_buff = NULL;
+            status = cf_util_get_string (child, &tmp_buff);
+            if (strlen (tmp_buff) > 1)
+                WARNING ("amqp plugin: The option \"GraphiteEscapeChar\" handles "
+                        "only one character. Others will be ignored.");
+            conf->escape_char = tmp_buff[0];
+            sfree (tmp_buff);
+        }
         else
             WARNING ("amqp plugin: Ignoring unknown "
                     "configuration option \"%s\".", child->key);
 
         if (status != 0)
             break;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/apache.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/apache.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/apache.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/apache.c	2012-11-18 06:23:21.000000000 +0800
@@ -370,13 +370,13 @@
 	if ((st->curl = curl_easy_init ()) == NULL)
 	{
 		ERROR ("apache plugin: init_host: `curl_easy_init' failed.");
 		return (-1);
 	}
 
-	curl_easy_setopt (st->curl, CURLOPT_NOSIGNAL, 1L);
+	curl_easy_setopt (st->curl, CURLOPT_NOSIGNAL, 1);
 	curl_easy_setopt (st->curl, CURLOPT_WRITEFUNCTION, apache_curl_callback);
 	curl_easy_setopt (st->curl, CURLOPT_WRITEDATA, st);
 
 	/* not set as yet if the user specified string doesn't match apache or
 	 * lighttpd, then ignore it. Headers will be parsed to find out the
 	 * server type */
@@ -422,31 +422,30 @@
 		}
 
 		curl_easy_setopt (st->curl, CURLOPT_USERPWD, credentials);
 	}
 
 	curl_easy_setopt (st->curl, CURLOPT_URL, st->url);
-	curl_easy_setopt (st->curl, CURLOPT_FOLLOWLOCATION, 1L);
-	curl_easy_setopt (st->curl, CURLOPT_MAXREDIRS, 50L);
+	curl_easy_setopt (st->curl, CURLOPT_FOLLOWLOCATION, 1);
 
 	if (st->verify_peer != 0)
 	{
-		curl_easy_setopt (st->curl, CURLOPT_SSL_VERIFYPEER, 1L);
+		curl_easy_setopt (st->curl, CURLOPT_SSL_VERIFYPEER, 1);
 	}
 	else
 	{
-		curl_easy_setopt (st->curl, CURLOPT_SSL_VERIFYPEER, 0L);
+		curl_easy_setopt (st->curl, CURLOPT_SSL_VERIFYPEER, 0);
 	}
 
 	if (st->verify_host != 0)
 	{
-		curl_easy_setopt (st->curl, CURLOPT_SSL_VERIFYHOST, 2L);
+		curl_easy_setopt (st->curl, CURLOPT_SSL_VERIFYHOST, 2);
 	}
 	else
 	{
-		curl_easy_setopt (st->curl, CURLOPT_SSL_VERIFYHOST, 0L);
+		curl_easy_setopt (st->curl, CURLOPT_SSL_VERIFYHOST, 0);
 	}
 
 	if (st->cacert != NULL)
 	{
 		curl_easy_setopt (st->curl, CURLOPT_CAINFO, st->cacert);
 	}
@@ -609,13 +608,13 @@
 		if (status != 0)
 			return (-1);
 	}
 	assert (st->curl != NULL);
 
 	st->apache_buffer_fill = 0;
-	if (curl_easy_perform (st->curl) != CURLE_OK)
+	if (curl_easy_perform (st->curl) != 0)
 	{
 		ERROR ("apache: curl_easy_perform failed: %s",
 				st->apache_curl_error);
 		return (-1);
 	}
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/apcups.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/apcups.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/apcups.c	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/apcups.c	2012-11-18 06:23:21.000000000 +0800
@@ -447,13 +447,13 @@
 
 	apcups_detail.linev    =   -1.0;
 	apcups_detail.outputv  =   -1.0;
 	apcups_detail.battv    =   -1.0;
 	apcups_detail.loadpct  =   -1.0;
 	apcups_detail.bcharge  =   -1.0;
-	apcups_detail.timeleft =    NAN;
+	apcups_detail.timeleft =   -1.0;
 	apcups_detail.itemp    = -300.0;
 	apcups_detail.linefreq =   -1.0;
 
 	status = apc_query_server (conf_host == NULL
 			? APCUPS_DEFAULT_HOST
 			: conf_host,
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ascent.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ascent.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ascent.c	2013-03-28 06:49:35.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ascent.c	2012-11-18 06:23:21.000000000 +0800
@@ -536,13 +536,13 @@
   if ((curl = curl_easy_init ()) == NULL)
   {
     ERROR ("ascent plugin: ascent_init: curl_easy_init failed.");
     return (-1);
   }
 
-  curl_easy_setopt (curl, CURLOPT_NOSIGNAL, 1L);
+  curl_easy_setopt (curl, CURLOPT_NOSIGNAL, 1);
   curl_easy_setopt (curl, CURLOPT_WRITEFUNCTION, ascent_curl_callback);
   curl_easy_setopt (curl, CURLOPT_USERAGENT, PACKAGE_NAME"/"PACKAGE_VERSION);
   curl_easy_setopt (curl, CURLOPT_ERRORBUFFER, ascent_curl_error);
 
   if (user != NULL)
   {
@@ -558,24 +558,23 @@
     }
 
     curl_easy_setopt (curl, CURLOPT_USERPWD, credentials);
   }
 
   curl_easy_setopt (curl, CURLOPT_URL, url);
-  curl_easy_setopt (curl, CURLOPT_FOLLOWLOCATION, 1L);
-  curl_easy_setopt (curl, CURLOPT_MAXREDIRS, 50L);
+  curl_easy_setopt (curl, CURLOPT_FOLLOWLOCATION, 1);
 
   if ((verify_peer == NULL) || IS_TRUE (verify_peer))
-    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 1L);
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 1);
   else
-    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 0L);
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 0);
 
   if ((verify_host == NULL) || IS_TRUE (verify_host))
-    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 2L);
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 2);
   else
-    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 0L);
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 0);
 
   if (cacert != NULL)
     curl_easy_setopt (curl, CURLOPT_CAINFO, cacert);
 
   return (0);
 } /* }}} int ascent_init */
@@ -594,13 +593,13 @@
   {
     ERROR ("ascent plugin: No URL has been configured.");
     return (-1);
   }
 
   ascent_buffer_fill = 0;
-  if (curl_easy_perform (curl) != CURLE_OK)
+  if (curl_easy_perform (curl) != 0)
   {
     ERROR ("ascent plugin: curl_easy_perform failed: %s",
         ascent_curl_error);
     return (-1);
   }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/bind.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/bind.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/bind.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/bind.c	2012-11-18 06:23:21.000000000 +0800
@@ -1390,19 +1390,18 @@
   if (curl == NULL)
   {
     ERROR ("bind plugin: bind_init: curl_easy_init failed.");
     return (-1);
   }
 
-  curl_easy_setopt (curl, CURLOPT_NOSIGNAL, 1L);
+  curl_easy_setopt (curl, CURLOPT_NOSIGNAL, 1);
   curl_easy_setopt (curl, CURLOPT_WRITEFUNCTION, bind_curl_callback);
   curl_easy_setopt (curl, CURLOPT_USERAGENT, PACKAGE_NAME"/"PACKAGE_VERSION);
   curl_easy_setopt (curl, CURLOPT_ERRORBUFFER, bind_curl_error);
   curl_easy_setopt (curl, CURLOPT_URL, (url != NULL) ? url : BIND_DEFAULT_URL);
-  curl_easy_setopt (curl, CURLOPT_FOLLOWLOCATION, 1L);
-  curl_easy_setopt (curl, CURLOPT_MAXREDIRS, 50L);
+  curl_easy_setopt (curl, CURLOPT_FOLLOWLOCATION, 1);
 
   return (0);
 } /* }}} int bind_init */
 
 static int bind_read (void) /* {{{ */
 {
@@ -1412,13 +1411,13 @@
   {
     ERROR ("bind plugin: I don't have a CURL object.");
     return (-1);
   }
 
   bind_buffer_fill = 0;
-  if (curl_easy_perform (curl) != CURLE_OK)
+  if (curl_easy_perform (curl) != 0)
   {
     ERROR ("bind plugin: curl_easy_perform failed: %s",
         bind_curl_error);
     return (-1);
   }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.1	2011-02-07 15:11:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.1	2012-11-18 06:24:49.000000000 +0800
@@ -1,7 +1,7 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.22 (Pod::Simple 3.07)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD 1"
-.TH COLLECTD 1 "2011-02-07" "5.0.0.beta1.39.g6bd4bf7" "collectd"
+.TH COLLECTD 1 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd \- System statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.c	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.c	2012-11-18 06:23:21.000000000 +0800
@@ -135,34 +135,16 @@
 	freeaddrinfo (ai_list);
 	return (0);
 } /* int init_hostname */
 
 static int init_global_variables (void)
 {
-	const char *str;
+	char const *str;
 
-	str = global_option_get ("Interval");
-	if (str == NULL)
-	{
-		interval_g = TIME_T_TO_CDTIME_T (10);
-	}
-	else
-	{
-		double tmp;
-
-		tmp = atof (str);
-		if (tmp <= 0.0)
-		{
-			fprintf (stderr, "Cannot set the interval to a "
-					"correct value.\n"
-					"Please check your settings.\n");
-			return (-1);
-		}
-
-		interval_g = DOUBLE_TO_CDTIME_T (tmp);
-	}
+	interval_g = cf_get_default_interval ();
+	assert (interval_g > 0);
 	DEBUG ("interval_g = %.3f;", CDTIME_T_TO_DOUBLE (interval_g));
 
 	str = global_option_get ("Timeout");
 	if (str == NULL)
 		str = "2";
 	timeout_g = atoi (str);
@@ -324,15 +306,16 @@
 	return (0);
 } /* int do_init () */
 
 
 static int do_loop (void)
 {
+	cdtime_t interval = cf_get_default_interval ();
 	cdtime_t wait_until;
 
-	wait_until = cdtime () + interval_g;
+	wait_until = cdtime () + interval;
 
 	while (loop == 0)
 	{
 		struct timespec ts_wait = { 0, 0 };
 		cdtime_t now;
 
@@ -346,18 +329,18 @@
 		now = cdtime ();
 		if (now >= wait_until)
 		{
 			WARNING ("Not sleeping because the next interval is "
 					"%.3f seconds in the past!",
 					CDTIME_T_TO_DOUBLE (now - wait_until));
-			wait_until = now + interval_g;
+			wait_until = now + interval;
 			continue;
 		}
 
 		CDTIME_T_TO_TIMESPEC (wait_until - now, &ts_wait);
-		wait_until = wait_until + interval_g;
+		wait_until = wait_until + interval;
 
 		while ((loop == 0) && (nanosleep (&ts_wait, &ts_wait) != 0))
 		{
 			if (errno != EINTR)
 			{
 				char errbuf[1024];
@@ -469,12 +452,14 @@
 		} /* switch (c) */
 	} /* while (1) */
 
 	if (optind < argc)
 		exit_usage (1);
 
+	plugin_init_ctx ();
+
 	/*
 	 * Read options from the config file, the environment and the command
 	 * line (in that order, with later options overwriting previous ones in
 	 * general).
 	 * Also, this will automatically load modules.
 	 */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.conf.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.conf.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.conf.5	2013-04-09 09:05:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.conf.5	2012-11-18 06:24:50.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD.CONF 5"
-.TH COLLECTD.CONF 5 "2013-04-09" "5.1.3" "collectd"
+.TH COLLECTD.CONF 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd.conf \- Configuration for the system statistics collection daemon \fBcollectd\fR
@@ -218,12 +218,17 @@
 See the documentation of those plugins (e.g., \fIcollectd\-perl\fR\|(5) or
 \&\fIcollectd\-python\fR\|(5)) for details.
 .Sp
 By default, this is disabled. As a special exception, if the plugin name is
 either \f(CW\*(C`perl\*(C'\fR or \f(CW\*(C`python\*(C'\fR, the default is changed to enabled in order to keep
 the average user from ever having to deal with this low level linking stuff.
+.IP "\fBInterval\fR \fISeconds\fR" 4
+.IX Item "Interval Seconds"
+Sets a plugin-specific interval for collecting metrics. This overrides the
+global \fBInterval\fR setting. If a plugin provides own support for specifying an
+interval, that setting will take precedence.
 .RE
 .RS 4
 .RE
 .IP "\fBInclude\fR \fIPath\fR" 4
 .IX Item "Include Path"
 If \fIPath\fR points to a file, includes that file. If \fIPath\fR points to a
@@ -308,17 +313,122 @@
 .IX Header "PLUGIN OPTIONS"
 Some plugins may register own options. These options must be enclosed in a
 \&\f(CW\*(C`Plugin\*(C'\fR\-Section. Which options exist depends on the plugin used. Some plugins
 require external configuration, too. The \f(CW\*(C`apache plugin\*(C'\fR, for example,
 required \f(CW\*(C`mod_status\*(C'\fR to be configured in the webserver you're going to
 collect data from. These plugins are listed below as well, even if they don't
-require any configuration within collectd's configfile.
+require any configuration within collectd's configuration file.
 .PP
 A list of all plugins and a short summary for each plugin can be found in the
 \&\fI\s-1README\s0\fR file shipped with the sourcecode and hopefully binary packets as
 well.
+.ie n .SS "Plugin ""aggregation"""
+.el .SS "Plugin \f(CWaggregation\fP"
+.IX Subsection "Plugin aggregation"
+The \fIAggregation plugin\fR makes it possible to aggregate several values into
+one using aggregation functions such as \fIsum\fR, \fIaverage\fR, \fImin\fR and \fImax\fR.
+This can be put to a wide variety of uses, e.g. average and total \s-1CPU\s0
+statistics for your entire fleet.
+.PP
+The grouping is powerful but, as with many powerful tools, may be a bit
+difficult to wrap your head around. The grouping will therefore be
+demonstrated using an example: The average and sum of the \s-1CPU\s0 usage across
+all CPUs of each host is to be calculated.
+.PP
+To select all the affected values for our example, set \f(CW\*(C`Plugin cpu\*(C'\fR and
+\&\f(CW\*(C`Type cpu\*(C'\fR. The other values are left unspecified, meaning \*(L"all values\*(R". The
+\&\fIHost\fR, \fIPlugin\fR, \fIPluginInstance\fR, \fIType\fR and \fITypeInstance\fR options
+work as if they were specified in the \f(CW\*(C`WHERE\*(C'\fR clause of an \f(CW\*(C`SELECT\*(C'\fR \s-1SQL\s0
+statement.
+.PP
+.Vb 2
+\&  Plugin "cpu"
+\&  Type "cpu"
+.Ve
+.PP
+Although the \fIHost\fR, \fIPluginInstance\fR (\s-1CPU\s0 number, i.e. 0, 1, 2, ...)  and
+\&\fITypeInstance\fR (idle, user, system, ...) fields are left unspecified in the
+example, the intention is to have a new value for each host / type instance
+pair. This is achieved by \*(L"grouping\*(R" the values using the \f(CW\*(C`GroupBy\*(C'\fR option.
+It can be specified multiple times to group by more than one field.
+.PP
+.Vb 2
+\&  GroupBy "Host"
+\&  GroupBy "TypeInstance"
+.Ve
+.PP
+We do neither specify nor group by \fIplugin instance\fR (the \s-1CPU\s0 number), so all
+metrics that differ in the \s-1CPU\s0 number only will be aggregated. Each
+aggregation needs \fIat least one\fR such field, otherwise no aggregation would
+take place.
+.PP
+The full example configuration looks like this:
+.PP
+.Vb 4
+\& <Plugin "aggregation">
+\&   <Aggregation>
+\&     Plugin "cpu"
+\&     Type "cpu"
+\&     
+\&     GroupBy "Host"
+\&     GroupBy "TypeInstance"
+\&     
+\&     CalculateSum true
+\&     CalculateAverage true
+\&   </Aggregation>
+\& </Plugin>
+.Ve
+.PP
+There are a couple of limitations you should be aware of:
+.IP "\(bu" 4
+The \fIType\fR cannot be left unspecified, because it is not reasonable to add
+apples to oranges. Also, the internal lookup structure won't work if you try
+to group by type.
+.IP "\(bu" 4
+There must be at least one unspecified, ungrouped field. Otherwise nothing
+will be aggregated.
+.PP
+As you can see in the example above, each aggregation has its own
+\&\fBAggregation\fR block. You can have multiple aggregation blocks and aggregation
+blocks may match the same values, i.e. one value list can update multiple
+aggregations. The following options are valid inside \fBAggregation\fR blocks:
+.IP "\fBHost\fR \fIHost\fR" 4
+.IX Item "Host Host"
+.PD 0
+.IP "\fBPlugin\fR \fIPlugin\fR" 4
+.IX Item "Plugin Plugin"
+.IP "\fBPluginInstance\fR \fIPluginInstance\fR" 4
+.IX Item "PluginInstance PluginInstance"
+.IP "\fBType\fR \fIType\fR" 4
+.IX Item "Type Type"
+.IP "\fBTypeInstance\fR \fITypeInstance\fR" 4
+.IX Item "TypeInstance TypeInstance"
+.PD
+Selects the value lists to be added to this aggregation. \fBType\fR must be a
+valid data set name, see \fItypes.db\fR\|(5) for details.
+.IP "\fBGroupBy\fR \fBHost\fR|\fBPlugin\fR|\fBPluginInstance\fR|\fBTypeInstance\fR" 4
+.IX Item "GroupBy Host|Plugin|PluginInstance|TypeInstance"
+Group valued by the specified field. The \fBGroupBy\fR option may be repeated to
+group by multiple fields.
+.IP "\fBCalculateNum\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "CalculateNum true|false"
+.PD 0
+.IP "\fBCalculateSum\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "CalculateSum true|false"
+.IP "\fBCalculateAverage\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "CalculateAverage true|false"
+.IP "\fBCalculateMinimum\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "CalculateMinimum true|false"
+.IP "\fBCalculateMaximum\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "CalculateMaximum true|false"
+.IP "\fBCalculateStddev\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "CalculateStddev true|false"
+.PD
+Boolean options for enabling calculation of the number of value lists, their
+sum, average, minimum, maximum and\ / or standard deviation. All options
+are disabled by default.
 .ie n .SS "Plugin ""amqp"""
 .el .SS "Plugin \f(CWamqp\fP"
 .IX Subsection "Plugin amqp"
 The \fI\s-1AMQMP\s0 plugin\fR can be used to communicate with other instances of
 \&\fIcollectd\fR or third party applications using an \s-1AMQP\s0 message broker. Values
 are sent to or received from the broker, which handles routing, queueing and
@@ -336,12 +446,14 @@
 \&     Exchange "amq.fanout"
 \& #   ExchangeType "fanout"
 \& #   RoutingKey "collectd"
 \& #   Persistent false
 \& #   Format "command"
 \& #   StoreRates false
+\& #   GraphitePrefix "collectd."
+\& #   GraphiteEscapeChar "_"
 \&   </Publish>
 \&   
 \&   # Receive values from an AMQP broker
 \&   <Subscribe "some_name">
 \&     Host "localhost"
 \&     Port "5672"
@@ -427,24 +539,44 @@
 case, the \f(CW\*(C`Content\-Type\*(C'\fR header field will be set to \f(CW\*(C`text/collectd\*(C'\fR.
 .Sp
 If set to \fB\s-1JSON\s0\fR, the values are encoded in the \fIJavaScript Object Notation\fR,
 an easy and straight forward exchange format. The \f(CW\*(C`Content\-Type\*(C'\fR header field
 will be set to \f(CW\*(C`application/json\*(C'\fR.
 .Sp
+If set to \fBGraphite\fR, values are encoded in the \fIGraphite\fR format, which is
+\&\*(L"<metric> <value> <timestamp>\en\*(R". The \f(CW\*(C`Content\-Type\*(C'\fR header field will be set to
+\&\f(CW\*(C`text/graphite\*(C'\fR.
+.Sp
 A subscribing client \fIshould\fR use the \f(CW\*(C`Content\-Type\*(C'\fR header field to
 determine how to decode the values. Currently, the \fI\s-1AMQP\s0 plugin\fR itself can
 only decode the \fBCommand\fR format.
 .IP "\fBStoreRates\fR \fBtrue\fR|\fBfalse\fR (Publish only)" 4
 .IX Item "StoreRates true|false (Publish only)"
 Determines whether or not \f(CW\*(C`COUNTER\*(C'\fR, \f(CW\*(C`DERIVE\*(C'\fR and \f(CW\*(C`ABSOLUTE\*(C'\fR data sources
 are converted to a \fIrate\fR (i.e. a \f(CW\*(C`GAUGE\*(C'\fR value). If set to \fBfalse\fR (the
 default), no conversion is performed. Otherwise the conversion is performed
 using the internal value cache.
 .Sp
 Please note that currently this option is only used if the \fBFormat\fR option has
 been set to \fB\s-1JSON\s0\fR.
+.IP "\fBGraphitePrefix\fR (Publish and \fBFormat\fR=\fIGraphite\fR only)" 4
+.IX Item "GraphitePrefix (Publish and Format=Graphite only)"
+A prefix can be added in the metric name when outputting in the \fIGraphite\fR format.
+It's added before the \fIHost\fR name.
+Metric name will be \*(L"<prefix><host><postfix><plugin><type><name>\*(R"
+.IP "\fBGraphitePostfix\fR (Publish and \fBFormat\fR=\fIGraphite\fR only)" 4
+.IX Item "GraphitePostfix (Publish and Format=Graphite only)"
+A postfix can be added in the metric name when outputting in the \fIGraphite\fR format.
+It's added after the \fIHost\fR name.
+Metric name will be \*(L"<prefix><host><postfix><plugin><type><name>\*(R"
+.IP "\fBGraphiteEscapeChar\fR (Publish and \fBFormat\fR=\fIGraphite\fR only)" 4
+.IX Item "GraphiteEscapeChar (Publish and Format=Graphite only)"
+Specify a character to replace dots (.) in the host part of the metric name.
+In \fIGraphite\fR metric name, dots are used as separators between different
+metric parts (host, plugin, type).
+Default is \*(L"_\*(R" (\fIUnderscore\fR).
 .ie n .SS "Plugin ""apache"""
 .el .SS "Plugin \f(CWapache\fP"
 .IX Subsection "Plugin apache"
 To configure the \f(CW\*(C`apache\*(C'\fR\-plugin you first need to configure the Apache
 webserver correctly. The Apache-plugin \f(CW\*(C`mod_status\*(C'\fR needs to be loaded and
 working and the \f(CW\*(C`ExtendedStatus\*(C'\fR directive needs to be \fBenabled\fR. You can use
@@ -1839,18 +1971,35 @@
 .ie n .SS "Plugin ""memcached"""
 .el .SS "Plugin \f(CWmemcached\fP"
 .IX Subsection "Plugin memcached"
 The \f(CW\*(C`memcached plugin\*(C'\fR connects to a memcached server and queries statistics
 about cache utilization, memory and bandwidth used.
 <http://www.danga.com/memcached/>
+.PP
+.Vb 6
+\& <Plugin "memcached">
+\&   <Instance "name">
+\&     Host "memcache.example.com"
+\&     Port 11211
+\&   </Instance>
+\& </Plugin>
+.Ve
+.PP
+The plugin configuration consists of one or more \fBInstance\fR blocks which
+specify one \fImemcached\fR connection each. Within the \fBInstance\fR blocks, the
+following options are allowed:
 .IP "\fBHost\fR \fIHostname\fR" 4
 .IX Item "Host Hostname"
 Hostname to connect to. Defaults to \fB127.0.0.1\fR.
 .IP "\fBPort\fR \fIPort\fR" 4
 .IX Item "Port Port"
 TCP-Port to connect to. Defaults to \fB11211\fR.
+.IP "\fBSocket\fR \fIPath\fR" 4
+.IX Item "Socket Path"
+Connect to \fImemcached\fR using the \s-1UNIX\s0 domain socket at \fIPath\fR. If this
+setting is given, the \fBHost\fR and \fBPort\fR settings are ignored.
 .ie n .SS "Plugin ""modbus"""
 .el .SS "Plugin \f(CWmodbus\fP"
 .IX Subsection "Plugin modbus"
 The \fBmodbus plugin\fR connects to a Modbus \*(L"slave\*(R" via Modbus/TCP and reads
 register values. It supports reading single registers (unsigned 16\ bit
 values), large integer values (unsigned 32\ bit values) and floating point
@@ -2838,12 +2987,21 @@
 .IP "\fBReverseLookups\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "ReverseLookups true|false"
 Sets whether or not to perform reverse lookups on peers. Since the name or
 IP-address may be used in a filename it is recommended to disable reverse
 lookups. The default is to do reverse lookups to preserve backwards
 compatibility, though.
+.IP "\fBIncludeUnitID\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "IncludeUnitID true|false"
+When a peer is a refclock, include the unit \s-1ID\s0 in the \fItype instance\fR.
+Defaults to \fBfalse\fR for backward compatibility.
+.Sp
+If two refclock peers use the same driver and this is \fBfalse\fR, the plugin will
+try to write simultaneous measurements from both to the same type instance.
+This will result in error messages in the log and only one set of measurements
+making it through.
 .ie n .SS "Plugin ""nut"""
 .el .SS "Plugin \f(CWnut\fP"
 .IX Subsection "Plugin nut"
 .IP "\fB\s-1UPS\s0\fR \fIupsname\fR\fB@\fR\fIhostname\fR[\fB:\fR\fIport\fR]" 4
 .IX Item "UPS upsname@hostname[:port]"
 Add a \s-1UPS\s0 to collect data from. The format is identical to the one accepted by
@@ -3036,12 +3194,16 @@
 starting tag of the block. This name will be used as \*(L"PluginInstance\*(R" in the
 values submitted to the daemon. Other than that, that name is not used.
 .IP "\fBConnectID\fR \fI\s-1ID\s0\fR" 4
 .IX Item "ConnectID ID"
 Defines the \*(L"database alias\*(R" or \*(L"service name\*(R" to connect to. Usually, these
 names are defined in the file named \f(CW\*(C`$ORACLE_HOME/network/admin/tnsnames.ora\*(C'\fR.
+.IP "\fBHost\fR \fIHost\fR" 4
+.IX Item "Host Host"
+Hostname to use when dispatching values for this database. Defaults to using
+the global hostname of the \fIcollectd\fR instance.
 .IP "\fBUsername\fR \fIUsername\fR" 4
 .IX Item "Username Username"
 Username used for authentication.
 .IP "\fBPassword\fR \fIPassword\fR" 4
 .IX Item "Password Password"
 Password used for authentication.
@@ -3190,12 +3352,19 @@
 below, you may collect any data that is available from some PostgreSQL
 database. This way, you are able to access statistics of external daemons
 which are available in a PostgreSQL database or use future or special
 statistics provided by PostgreSQL without the need to upgrade your collectd
 installation.
 .PP
+Starting with version 5.2, the \f(CW\*(C`postgresql\*(C'\fR plugin supports writing data to
+PostgreSQL databases as well. This has been implemented in a generic way. You
+need to specify an \s-1SQL\s0 statement which will then be executed by collectd in
+order to write the data (see below for details). The benefit of that approach
+is that there is no fixed database layout. Rather, the layout may be optimized
+for the current setup.
+.PP
 The \fBPostgreSQL Documentation\fR manual can be found at
 <http://www.postgresql.org/docs/manuals/>.
 .PP
 .Vb 10
 \&  <Plugin postgresql>
 \&    <Query magic>
@@ -3220,12 +3389,17 @@
 \&        InstancePrefix "rt36_tickets"
 \&        InstancesFrom "type"
 \&        ValuesFrom "count"
 \&      </Result>
 \&    </Query>
 \&
+\&    <Writer sqlstore>
+\&      Statement "SELECT collectd_insert($1, $2, $3, $4, $5, $6, $7, $8, $9);"
+\&      StoreRates true
+\&    </Writer>
+\&
 \&    <Database foo>
 \&      Host "hostname"
 \&      Port "5432"
 \&      User "username"
 \&      Password "secret"
 \&      SSLMode "prefer"
@@ -3236,12 +3410,18 @@
 \&    <Database bar>
 \&      Interval 300
 \&      Service "service_name"
 \&      Query backend # predefined
 \&      Query rt36_tickets
 \&    </Database>
+\&
+\&    <Database qux>
+\&      # ...
+\&      Writer sqlstore
+\&      CommitInterval 10
+\&    </Database>
 \&  </Plugin>
 .Ve
 .PP
 The \fBQuery\fR block defines one database query which may later be used by a
 database definition. It accepts a single mandatory argument which specifies
 the name of the query. The names of all queries have to be unique (see the
@@ -3277,12 +3457,16 @@
 .IX Item "hostname"
 The configured hostname of the database connection. If a \s-1UNIX\s0 domain socket is
 used, the parameter expands to \*(L"localhost\*(R".
 .IP "\fIdatabase\fR" 4
 .IX Item "database"
 The name of the database of the current connection.
+.IP "\fIinstance\fR" 4
+.IX Item "instance"
+The name of the database plugin instance. See the \fBInstance\fR option of the
+database specification below for details.
 .IP "\fIusername\fR" 4
 .IX Item "username"
 The username used to connect to the database.
 .IP "\fIinterval\fR" 4
 .IX Item "interval"
 The interval with which this database is queried (as specified by the database
@@ -3377,23 +3561,120 @@
 .IX Item "disk_io"
 This query collects disk block access counts for user tables.
 .IP "\fBdisk_usage\fR" 4
 .IX Item "disk_usage"
 This query collects the on-disk size of the database in bytes.
 .PP
+In addition, the following detailed queries are available by default. Please
+note that each of those queries collects information \fBby table\fR, thus,
+potentially producing \fBa lot\fR of data. For details see the description of the
+non\-by_table queries above.
+.IP "\fBqueries_by_table\fR" 4
+.IX Item "queries_by_table"
+.PD 0
+.IP "\fBquery_plans_by_table\fR" 4
+.IX Item "query_plans_by_table"
+.IP "\fBtable_states_by_table\fR" 4
+.IX Item "table_states_by_table"
+.IP "\fBdisk_io_by_table\fR" 4
+.IX Item "disk_io_by_table"
+.PD
+.PP
+The \fBWriter\fR block defines a PostgreSQL writer backend. It accepts a single
+mandatory argument specifying the name of the writer. This will then be used
+in the \fBDatabase\fR specification in order to activate the writer instance. The
+names of all writers have to be unique. The following options may be
+specified:
+.IP "\fBStatement\fR \fIsql statement\fR" 4
+.IX Item "Statement sql statement"
+This mandatory option specifies the \s-1SQL\s0 statement that will be executed for
+each submitted value. A single \s-1SQL\s0 statement is allowed only. Anything after
+the first semicolon will be ignored.
+.Sp
+Nine parameters will be passed to the statement and should be specified as
+tokens \fB\f(CB$1\fB\fR, \fB\f(CB$2\fB\fR, through \fB\f(CB$9\fB\fR in the statement string. The following
+values are made available through those parameters:
+.RS 4
+.ie n .IP "\fB\fB$1\fB\fR" 4
+.el .IP "\fB\f(CB$1\fB\fR" 4
+.IX Item "$1"
+The timestamp of the queried value as a floating point number.
+.ie n .IP "\fB\fB$2\fB\fR" 4
+.el .IP "\fB\f(CB$2\fB\fR" 4
+.IX Item "$2"
+The hostname of the queried value.
+.ie n .IP "\fB\fB$3\fB\fR" 4
+.el .IP "\fB\f(CB$3\fB\fR" 4
+.IX Item "$3"
+The plugin name of the queried value.
+.ie n .IP "\fB\fB$4\fB\fR" 4
+.el .IP "\fB\f(CB$4\fB\fR" 4
+.IX Item "$4"
+The plugin instance of the queried value. This value may be \fB\s-1NULL\s0\fR if there
+is no plugin instance.
+.ie n .IP "\fB\fB$5\fB\fR" 4
+.el .IP "\fB\f(CB$5\fB\fR" 4
+.IX Item "$5"
+The type of the queried value (cf. \fItypes.db\fR\|(5)).
+.ie n .IP "\fB\fB$6\fB\fR" 4
+.el .IP "\fB\f(CB$6\fB\fR" 4
+.IX Item "$6"
+The type instance of the queried value. This value may be \fB\s-1NULL\s0\fR if there is
+no type instance.
+.ie n .IP "\fB\fB$7\fB\fR" 4
+.el .IP "\fB\f(CB$7\fB\fR" 4
+.IX Item "$7"
+An array of names for the submitted values (i.\ e., the name of the data
+sources of the submitted value-list).
+.ie n .IP "\fB\fB$8\fB\fR" 4
+.el .IP "\fB\f(CB$8\fB\fR" 4
+.IX Item "$8"
+An array of types for the submitted values (i.\ e., the type of the data
+sources of the submitted value-list; \f(CW\*(C`counter\*(C'\fR, \f(CW\*(C`gauge\*(C'\fR, ...). Note, that if
+\&\fBStoreRates\fR is enabled (which is the default, see below), all types will be
+\&\f(CW\*(C`gauge\*(C'\fR.
+.ie n .IP "\fB\fB$9\fB\fR" 4
+.el .IP "\fB\f(CB$9\fB\fR" 4
+.IX Item "$9"
+An array of the submitted values. The dimensions of the value name and value
+arrays match.
+.RE
+.RS 4
+.Sp
+In general, it is advisable to create and call a custom function in the
+PostgreSQL database for this purpose. Any procedural language supported by
+PostgreSQL will do (see chapter \*(L"Server Programming\*(R" in the PostgreSQL manual
+for details).
+.RE
+.IP "\fBStoreRates\fR \fBfalse\fR|\fBtrue\fR" 4
+.IX Item "StoreRates false|true"
+If set to \fBtrue\fR (the default), convert counter values to rates. If set to
+\&\fBfalse\fR counter values are stored as is, i.\ e. as an increasing integer
+number.
+.PP
 The \fBDatabase\fR block defines one PostgreSQL database for which to collect
 statistics. It accepts a single mandatory argument which specifies the
 database name. None of the other options are required. PostgreSQL will use
 default values as documented in the section \*(L"\s-1CONNECTING\s0 \s-1TO\s0 A \s-1DATABASE\s0\*(R" in the
 \&\fIpsql\fR\|(1) manpage. However, be aware that those defaults may be influenced by
 the user collectd is run as and special environment variables. See the manpage
 for details.
 .IP "\fBInterval\fR \fIseconds\fR" 4
 .IX Item "Interval seconds"
 Specify the interval with which the database should be queried. The default is
 to use the global \fBInterval\fR setting.
+.IP "\fBCommitInterval\fR \fIseconds\fR" 4
+.IX Item "CommitInterval seconds"
+This option may be used for database connections which have \*(L"writers\*(R" assigned
+(see above). If specified, it causes a writer to put several updates into a
+single transaction. This transaction will last for the specified amount of
+time. By default, each update will be executed in a separate transaction. Each
+transaction generates a fair amount of overhead which can, thus, be reduced by
+activating this option. The draw-back is, that data covering the specified
+amount of time will be lost, for example, if a single statement within the
+transaction fails or if the database server crashes.
 .IP "\fBHost\fR \fIhostname\fR" 4
 .IX Item "Host hostname"
 Specify the hostname or \s-1IP\s0 of the PostgreSQL server to connect to. If the
 value begins with a slash, it is interpreted as the directory name in which to
 look for the \s-1UNIX\s0 domain socket.
 .Sp
@@ -3413,12 +3694,18 @@
 .IX Item "Password password"
 Specify the password to be used when connecting to the server.
 .IP "\fBSSLMode\fR \fIdisable\fR|\fIallow\fR|\fIprefer\fR|\fIrequire\fR" 4
 .IX Item "SSLMode disable|allow|prefer|require"
 Specify whether to use an \s-1SSL\s0 connection when contacting the server. The
 following modes are supported:
+.IP "\fBInstance\fR \fIname\fR" 4
+.IX Item "Instance name"
+Specify the plugin instance name that should be used instead of the database
+name (which is the default, if this option has not been specified). This
+allows to query multiple databases of the same name on the same host (e.g.
+when running multiple database server versions in parallel).
 .RS 4
 .IP "\fIdisable\fR" 4
 .IX Item "disable"
 Do not use \s-1SSL\s0 at all.
 .IP "\fIallow\fR" 4
 .IX Item "allow"
@@ -3442,17 +3729,39 @@
 Specify the PostgreSQL service name to use for additional parameters. That
 service has to be defined in \fIpg_service.conf\fR and holds additional
 connection parameters. See the section \*(L"The Connection Service File\*(R" in the
 \&\fBPostgreSQL Documentation\fR for details.
 .IP "\fBQuery\fR \fIquery\fR" 4
 .IX Item "Query query"
-Specify a \fIquery\fR which should be executed for the database connection. This
-may be any of the predefined or user-defined queries. If no such option is
-given, it defaults to \*(L"backends\*(R", \*(L"transactions\*(R", \*(L"queries\*(R", \*(L"query_plans\*(R",
-\&\*(L"table_states\*(R", \*(L"disk_io\*(R" and \*(L"disk_usage\*(R". Else, the specified queries are
-used only.
+Specifies a \fIquery\fR which should be executed in the context of the database
+connection. This may be any of the predefined or user-defined queries. If no
+such option is given, it defaults to \*(L"backends\*(R", \*(L"transactions\*(R", \*(L"queries\*(R",
+\&\*(L"query_plans\*(R", \*(L"table_states\*(R", \*(L"disk_io\*(R" and \*(L"disk_usage\*(R" (unless a \fBWriter\fR
+has been specified). Else, the specified queries are used only.
+.IP "\fBWriter\fR \fIwriter\fR" 4
+.IX Item "Writer writer"
+Assigns the specified \fIwriter\fR backend to the database connection. This
+causes all collected data to be send to the database using the settings
+defined in the writer configuration (see the section \*(L"\s-1FILTER\s0 \s-1CONFIGURATION\s0\*(R"
+below for details on how to selectively send data to certain plugins).
+.Sp
+Each writer will register a flush callback which may be used when having long
+transactions enabled (see the \fBCommitInterval\fR option above). When issuing
+the \fB\s-1FLUSH\s0\fR command (see \fIcollectd\-unixsock\fR\|(5) for details) the current
+transaction will be committed right away. Two different kinds of flush
+callbacks are available with the \f(CW\*(C`postgresql\*(C'\fR plugin:
+.RS 4
+.IP "\fBpostgresql\fR" 4
+.IX Item "postgresql"
+Flush all writer backends.
+.IP "\fBpostgresql\-\fR\fIdatabase\fR" 4
+.IX Item "postgresql-database"
+Flush all writers of the specified \fIdatabase\fR only.
+.RE
+.RS 4
+.RE
 .ie n .SS "Plugin ""powerdns"""
 .el .SS "Plugin \f(CWpowerdns\fP"
 .IX Subsection "Plugin powerdns"
 The \f(CW\*(C`powerdns\*(C'\fR plugin queries statistics from an authoritative PowerDNS
 nameserver and/or a PowerDNS recursor. Since both offer a wide variety of
 values, many of which are probably meaningless to most users, but may be useful
@@ -3738,12 +4047,15 @@
 running on.
 .IP "\fBPort\fR \fIPort\fR" 4
 .IX Item "Port Port"
 The \fBPort\fR option is the \s-1TCP\s0 port on which the Redis instance accepts
 connections. Either a service name of a port number may be given. Please note
 that numerical port numbers must be given as a string, too.
+.IP "\fBPassword\fR \fIPassword\fR" 4
+.IX Item "Password Password"
+Use \fIPassword\fR to authenticate when connecting to \fIRedis\fR.
 .IP "\fBTimeout\fR \fITimeout in miliseconds\fR" 4
 .IX Item "Timeout Timeout in miliseconds"
 The \fBTimeout\fR option set the socket timeout for node response. Since the Redis
 read function is blocking, you should keep this value as low as possible. Keep
 in mind that the sum of all \fBTimeout\fR values for all \fBNodes\fR should be lower
 than \fBInterval\fR defined globally.
@@ -3789,12 +4101,51 @@
 Use of an absolute path is recommended.
 .IP "\fBCreateFiles\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "CreateFiles true|false"
 Enables or disables the creation of \s-1RRD\s0 files. If the daemon is not running
 locally, or \fBDataDir\fR is set to a relative path, this will not work as
 expected. Default is \fBtrue\fR.
+.IP "\fBStepSize\fR \fISeconds\fR" 4
+.IX Item "StepSize Seconds"
+\&\fBForce\fR the stepsize of newly created RRD-files. Ideally (and per default)
+this setting is unset and the stepsize is set to the interval in which the data
+is collected. Do not use this option unless you absolutely have to for some
+reason. Setting this option may cause problems with the \f(CW\*(C`snmp plugin\*(C'\fR, the
+\&\f(CW\*(C`exec plugin\*(C'\fR or when the daemon is set up to receive data from other hosts.
+.IP "\fBHeartBeat\fR \fISeconds\fR" 4
+.IX Item "HeartBeat Seconds"
+\&\fBForce\fR the heartbeat of newly created RRD-files. This setting should be unset
+in which case the heartbeat is set to twice the \fBStepSize\fR which should equal
+the interval in which data is collected. Do not set this option unless you have
+a very good reason to do so.
+.IP "\fBRRARows\fR \fINumRows\fR" 4
+.IX Item "RRARows NumRows"
+The \f(CW\*(C`rrdtool plugin\*(C'\fR calculates the number of PDPs per \s-1CDP\s0 based on the
+\&\fBStepSize\fR, this setting and a timespan. This plugin creates RRD-files with
+three times five RRAs, i. e. five RRAs with the CFs \fB\s-1MIN\s0\fR, \fB\s-1AVERAGE\s0\fR, and
+\&\fB\s-1MAX\s0\fR. The five RRAs are optimized for graphs covering one hour, one day, one
+week, one month, and one year.
+.Sp
+So for each timespan, it calculates how many PDPs need to be consolidated into
+one \s-1CDP\s0 by calculating:
+  number of PDPs = timespan / (stepsize * rrarows)
+.Sp
+Bottom line is, set this no smaller than the width of you graphs in pixels. The
+default is 1200.
+.IP "\fBRRATimespan\fR \fISeconds\fR" 4
+.IX Item "RRATimespan Seconds"
+Adds an RRA-timespan, given in seconds. Use this option multiple times to have
+more then one \s-1RRA\s0. If this option is never used, the built-in default of (3600,
+86400, 604800, 2678400, 31622400) is used.
+.Sp
+For more information on how RRA-sizes are calculated see \fBRRARows\fR above.
+.IP "\fB\s-1XFF\s0\fR \fIFactor\fR" 4
+.IX Item "XFF Factor"
+Set the \*(L"XFiles Factor\*(R". The default is 0.1. If unsure, don't set this option.
+\&\fIFactor\fR must be in the range \f(CW\*(C`[0.0\-1.0)\*(C'\fR, i.e. between zero (inclusive) and
+one (exclusive).
 .ie n .SS "Plugin ""rrdtool"""
 .el .SS "Plugin \f(CWrrdtool\fP"
 .IX Subsection "Plugin rrdtool"
 You can use the settings \fBStepSize\fR, \fBHeartBeat\fR, \fBRRARows\fR, and \fB\s-1XFF\s0\fR to
 fine-tune your RRD-files. Please read \fIrrdcreate\fR\|(1) if you encounter problems
 using these settings. If you don't want to dive into the depths of RRDtool, you
@@ -3837,12 +4188,14 @@
 86400, 604800, 2678400, 31622400) is used.
 .Sp
 For more information on how RRA-sizes are calculated see \fBRRARows\fR above.
 .IP "\fB\s-1XFF\s0\fR \fIFactor\fR" 4
 .IX Item "XFF Factor"
 Set the \*(L"XFiles Factor\*(R". The default is 0.1. If unsure, don't set this option.
+\&\fIFactor\fR must be in the range \f(CW\*(C`[0.0\-1.0)\*(C'\fR, i.e. between zero (inclusive) and
+one (exclusive).
 .IP "\fBCacheFlush\fR \fISeconds\fR" 4
 .IX Item "CacheFlush Seconds"
 When the \f(CW\*(C`rrdtool\*(C'\fR plugin uses a cache (by setting \fBCacheTimeout\fR, see below)
 it writes all values for a certain RRD-file if the oldest value is older than
 (or equal to) the number of seconds specified. If some RRD-file is not updated
 anymore for some reason (the computer was shut down, the network is broken,
@@ -3935,12 +4288,16 @@
 default), the summary over all swap devices is reported only, i.e. the globally
 used and available space over all devices. If \fBtrue\fR is configured, the used
 and available space of each device will be reported separately.
 .Sp
 This option is only available if the \fISwap plugin\fR can read \f(CW\*(C`/proc/swaps\*(C'\fR
 (under Linux) or use the \fIswapctl\fR\|(2) mechanism (under \fISolaris\fR).
+.IP "\fBReportBytes\fR \fBfalse\fR|\fBtrue\fR" 4
+.IX Item "ReportBytes false|true"
+When enabled, the \fIswap I/O\fR is reported in bytes. When disabled, the default,
+\&\fIswap I/O\fR is reported in pages. This option is available under Linux only.
 .ie n .SS "Plugin ""syslog"""
 .el .SS "Plugin \f(CWsyslog\fP"
 .IX Subsection "Plugin syslog"
 .IP "\fBLogLevel\fR \fBdebug|info|notice|warning|err\fR" 4
 .IX Item "LogLevel debug|info|notice|warning|err"
 Sets the log-level. If, for example, set to \fBnotice\fR, then all events with
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.conf.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.conf.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.conf.in	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.conf.in	2012-11-18 06:23:21.000000000 +0800
@@ -9,15 +9,15 @@
 #----------------------------------------------------------------------------#
 # Global settings for the daemon.                                            #
 ##############################################################################
 
 #Hostname    "localhost"
 #FQDNLookup   true
-#BaseDir     "@prefix@/var/lib/@PACKAGE_NAME@"
-#PIDFile     "@prefix@/var/run/@PACKAGE_NAME@.pid"
-#PluginDir   "@prefix@/lib/@PACKAGE_NAME@"
+#BaseDir     "@localstatedir@/lib/@PACKAGE_NAME@"
+#PIDFile     "@localstatedir@/run/@PACKAGE_NAME@.pid"
+#PluginDir   "@libdir@/@PACKAGE_NAME@"
 #TypesDB     "@prefix@/share/@PACKAGE_NAME@/types.db"
 #Interval     10
 #Timeout      2
 #ReadThreads  5
 
 ##############################################################################
@@ -49,12 +49,13 @@
 # but are disabled by default.                                               #
 #                                                                            #
 # Lines begnning with `##' belong to plugins which have not been built due   #
 # to missing dependencies or because they have been deactivated explicitly.  #
 ##############################################################################
 
+#@BUILD_PLUGIN_AGGREGATION_TRUE@LoadPlugin aggregation
 #@BUILD_PLUGIN_AMQP_TRUE@LoadPlugin amqp
 #@BUILD_PLUGIN_APACHE_TRUE@LoadPlugin apache
 #@BUILD_PLUGIN_APCUPS_TRUE@LoadPlugin apcups
 #@BUILD_PLUGIN_APPLE_SENSORS_TRUE@LoadPlugin apple_sensors
 #@BUILD_PLUGIN_ASCENT_TRUE@LoadPlugin ascent
 #@BUILD_PLUGIN_BATTERY_TRUE@LoadPlugin battery
@@ -158,12 +159,32 @@
 # Plugin configuration                                                       #
 #----------------------------------------------------------------------------#
 # In this section configuration stubs for each plugin are provided. A desc-  #
 # ription of those options is available in the collectd.conf(5) manual page. #
 ##############################################################################
 
+#<Plugin "aggregation">
+#  <Aggregation>
+#    #Host "unspecified"
+#    Plugin "cpu"
+#    #PluginInstance "unspecified"
+#    Type "cpu"
+#    #TypeInstance "unspecified"
+#
+#    GroupBy "Host"
+#    GroupBy "TypeInstance"
+#
+#    CalculateNum false
+#    CalculateSum false
+#    CalculateAverage true
+#    CalculateMinimum false
+#    CalculateMaximum false
+#    CalculateStddev false
+#  </Aggregation>
+#</Plugin>
+
 #<Plugin "amqp">
 #  <Publish "name">
 #    Host "localhost"
 #    Port "5672"
 #    VHost "/"
 #    User "guest"
@@ -214,13 +235,13 @@
 #
 #    Zone "127.in-addr.arpa/IN"
 #  </View>
 #</Plugin>
 
 #<Plugin csv>
-#	DataDir "@prefix@/var/lib/@PACKAGE_NAME@/csv"
+#	DataDir "@localstatedir@/lib/@PACKAGE_NAME@/csv"
 #	StoreRates false
 #</Plugin>
 
 #<Plugin curl>
 #  <Page "stock_quotes">
 #    URL "http://finance.google.com/finance?q=NYSE%3AAMD"
@@ -327,13 +348,13 @@
 #	Interface "eth0"
 #	IgnoreSource "192.168.0.1"
 #	SelectNumericQueryTypes true
 #</Plugin>
 
 #<Plugin email>
-#	SocketFile "@prefix@/var/run/@PACKAGE_NAME@-email"
+#	SocketFile "@localstatedir@/run/@PACKAGE_NAME@-email"
 #	SocketGroup "collectd"
 #	SocketPerms "0770"
 #	MaxConns 5
 #</Plugin>
 
 #<Plugin ethstat>
@@ -462,14 +483,16 @@
 #			Instance "type_instance"
 #		</Match>
 #	</Page>
 #</Plugin>
 
 #<Plugin memcached>
-#	Host "127.0.0.1"
-#	Port "11211"
+#	<Instance "local">
+#		Host "127.0.0.1"
+#		Port "11211"
+#	</Instance>
 #</Plugin>
 
 #<Plugin modbus>
 #	<Data "data_name">
 #		RegisterBase 1234
 #		RegisterType float
@@ -623,12 +646,13 @@
 #</Plugin>
 
 #<Plugin ntpd>
 #	Host "localhost"
 #	Port 123
 #	ReverseLookups false
+#	IncludeUnitID true
 #</Plugin>
 
 #<Plugin nut>
 #	UPS "upsname@hostname:port"
 #</Plugin>
 
@@ -801,19 +825,19 @@
 #		CollectDisk true
 #	</Router>
 #</Plugin>
 
 #<Plugin rrdcached>
 #	DaemonAddress "unix:/tmp/rrdcached.sock"
-#	DataDir "@prefix@/var/lib/@PACKAGE_NAME@/rrd"
+#	DataDir "@localstatedir@/lib/@PACKAGE_NAME@/rrd"
 #	CreateFiles true
 #	CollectStatistics true
 #</Plugin>
 
 #<Plugin rrdtool>
-#	DataDir "@prefix@/var/lib/@PACKAGE_NAME@/rrd"
+#	DataDir "@localstatedir@/lib/@PACKAGE_NAME@/rrd"
 #	CacheTimeout 120
 #	CacheFlush   900
 #</Plugin>
 
 #<Plugin sensors>
 #	SensorConfigFile "/etc/sensors.conf"
@@ -864,12 +888,13 @@
 #       Interval 300
 #   </Host>
 #</Plugin>
 
 #<Plugin "swap">
 #	ReportByDevice false
+#	ReportBytes true
 #</Plugin>
 
 #<Plugin "table">
 #	<Table "/proc/slabinfo">
 #		Instance "slabinfo"
 #		Separator " "
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.conf.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.conf.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.conf.pod	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.conf.pod	2012-11-18 06:23:21.000000000 +0800
@@ -93,12 +93,18 @@
 L<collectd-python(5)>) for details.
 
 By default, this is disabled. As a special exception, if the plugin name is
 either C<perl> or C<python>, the default is changed to enabled in order to keep
 the average user from ever having to deal with this low level linking stuff.
 
+=item B<Interval> I<Seconds>
+
+Sets a plugin-specific interval for collecting metrics. This overrides the
+global B<Interval> setting. If a plugin provides own support for specifying an
+interval, that setting will take precedence.
+
 =back
 
 =item B<Include> I<Path>
 
 If I<Path> points to a file, includes that file. If I<Path> points to a
 directory, recursively includes all files within that directory and its
@@ -190,18 +196,128 @@
 
 Some plugins may register own options. These options must be enclosed in a
 C<Plugin>-Section. Which options exist depends on the plugin used. Some plugins
 require external configuration, too. The C<apache plugin>, for example,
 required C<mod_status> to be configured in the webserver you're going to
 collect data from. These plugins are listed below as well, even if they don't
-require any configuration within collectd's configfile.
+require any configuration within collectd's configuration file.
 
 A list of all plugins and a short summary for each plugin can be found in the
 F<README> file shipped with the sourcecode and hopefully binary packets as
 well.
 
+=head2 Plugin C<aggregation>
+
+The I<Aggregation plugin> makes it possible to aggregate several values into
+one using aggregation functions such as I<sum>, I<average>, I<min> and I<max>.
+This can be put to a wide variety of uses, e.g. average and total CPU
+statistics for your entire fleet.
+
+The grouping is powerful but, as with many powerful tools, may be a bit
+difficult to wrap your head around. The grouping will therefore be
+demonstrated using an example: The average and sum of the CPU usage across
+all CPUs of each host is to be calculated.
+
+To select all the affected values for our example, set C<Plugin cpu> and
+C<Type cpu>. The other values are left unspecified, meaning "all values". The
+I<Host>, I<Plugin>, I<PluginInstance>, I<Type> and I<TypeInstance> options
+work as if they were specified in the C<WHERE> clause of an C<SELECT> SQL
+statement.
+
+  Plugin "cpu"
+  Type "cpu"
+
+Although the I<Host>, I<PluginInstance> (CPU number, i.e. 0, 1, 2, ...)  and
+I<TypeInstance> (idle, user, system, ...) fields are left unspecified in the
+example, the intention is to have a new value for each host / type instance
+pair. This is achieved by "grouping" the values using the C<GroupBy> option.
+It can be specified multiple times to group by more than one field.
+
+  GroupBy "Host"
+  GroupBy "TypeInstance"
+
+We do neither specify nor group by I<plugin instance> (the CPU number), so all
+metrics that differ in the CPU number only will be aggregated. Each
+aggregation needs I<at least one> such field, otherwise no aggregation would
+take place.
+
+The full example configuration looks like this:
+
+ <Plugin "aggregation">
+   <Aggregation>
+     Plugin "cpu"
+     Type "cpu"
+     
+     GroupBy "Host"
+     GroupBy "TypeInstance"
+     
+     CalculateSum true
+     CalculateAverage true
+   </Aggregation>
+ </Plugin>
+
+There are a couple of limitations you should be aware of:
+
+=over 4
+
+=item
+
+The I<Type> cannot be left unspecified, because it is not reasonable to add
+apples to oranges. Also, the internal lookup structure won't work if you try
+to group by type.
+
+=item
+
+There must be at least one unspecified, ungrouped field. Otherwise nothing
+will be aggregated.
+
+=back
+
+As you can see in the example above, each aggregation has its own
+B<Aggregation> block. You can have multiple aggregation blocks and aggregation
+blocks may match the same values, i.e. one value list can update multiple
+aggregations. The following options are valid inside B<Aggregation> blocks:
+
+=over 4
+
+=item B<Host> I<Host>
+
+=item B<Plugin> I<Plugin>
+
+=item B<PluginInstance> I<PluginInstance>
+
+=item B<Type> I<Type>
+
+=item B<TypeInstance> I<TypeInstance>
+
+Selects the value lists to be added to this aggregation. B<Type> must be a
+valid data set name, see L<types.db(5)> for details.
+
+=item B<GroupBy> B<Host>|B<Plugin>|B<PluginInstance>|B<TypeInstance>
+
+Group valued by the specified field. The B<GroupBy> option may be repeated to
+group by multiple fields.
+
+=item B<CalculateNum> B<true>|B<false>
+
+=item B<CalculateSum> B<true>|B<false>
+
+=item B<CalculateAverage> B<true>|B<false>
+
+=item B<CalculateMinimum> B<true>|B<false>
+
+=item B<CalculateMaximum> B<true>|B<false>
+
+=item B<CalculateStddev> B<true>|B<false>
+
+Boolean options for enabling calculation of the number of value lists, their
+sum, average, minimum, maximum andE<nbsp>/ or standard deviation. All options
+are disabled by default.
+
+=back
+
 =head2 Plugin C<amqp>
 
 The I<AMQMP plugin> can be used to communicate with other instances of
 I<collectd> or third party applications using an AMQP message broker. Values
 are sent to or received from the broker, which handles routing, queueing and
 possibly filtering or messages.
@@ -217,12 +333,14 @@
      Exchange "amq.fanout"
  #   ExchangeType "fanout"
  #   RoutingKey "collectd"
  #   Persistent false
  #   Format "command"
  #   StoreRates false
+ #   GraphitePrefix "collectd."
+ #   GraphiteEscapeChar "_"
    </Publish>
    
    # Receive values from an AMQP broker
    <Subscribe "some_name">
      Host "localhost"
      Port "5672"
@@ -317,12 +435,16 @@
 case, the C<Content-Type> header field will be set to C<text/collectd>.
 
 If set to B<JSON>, the values are encoded in the I<JavaScript Object Notation>,
 an easy and straight forward exchange format. The C<Content-Type> header field
 will be set to C<application/json>.
 
+If set to B<Graphite>, values are encoded in the I<Graphite> format, which is
+"<metric> <value> <timestamp>\n". The C<Content-Type> header field will be set to
+C<text/graphite>.
+
 A subscribing client I<should> use the C<Content-Type> header field to
 determine how to decode the values. Currently, the I<AMQP plugin> itself can
 only decode the B<Command> format.
 
 =item B<StoreRates> B<true>|B<false> (Publish only)
 
@@ -331,12 +453,31 @@
 default), no conversion is performed. Otherwise the conversion is performed
 using the internal value cache.
 
 Please note that currently this option is only used if the B<Format> option has
 been set to B<JSON>.
 
+=item B<GraphitePrefix> (Publish and B<Format>=I<Graphite> only)
+
+A prefix can be added in the metric name when outputting in the I<Graphite> format.
+It's added before the I<Host> name.
+Metric name will be "<prefix><host><postfix><plugin><type><name>"
+
+=item B<GraphitePostfix> (Publish and B<Format>=I<Graphite> only)
+
+A postfix can be added in the metric name when outputting in the I<Graphite> format.
+It's added after the I<Host> name.
+Metric name will be "<prefix><host><postfix><plugin><type><name>"
+
+=item B<GraphiteEscapeChar> (Publish and B<Format>=I<Graphite> only)
+
+Specify a character to replace dots (.) in the host part of the metric name.
+In I<Graphite> metric name, dots are used as separators between different
+metric parts (host, plugin, type).
+Default is "_" (I<Underscore>).
+
 =back
 
 =head2 Plugin C<apache>
 
 To configure the C<apache>-plugin you first need to configure the Apache
 webserver correctly. The Apache-plugin C<mod_status> needs to be loaded and
@@ -1946,22 +2087,38 @@
 =head2 Plugin C<memcached>
 
 The C<memcached plugin> connects to a memcached server and queries statistics
 about cache utilization, memory and bandwidth used.
 L<http://www.danga.com/memcached/>
 
+ <Plugin "memcached">
+   <Instance "name">
+     Host "memcache.example.com"
+     Port 11211
+   </Instance>
+ </Plugin>
+
+The plugin configuration consists of one or more B<Instance> blocks which
+specify one I<memcached> connection each. Within the B<Instance> blocks, the
+following options are allowed:
+
 =over 4
 
 =item B<Host> I<Hostname>
 
 Hostname to connect to. Defaults to B<127.0.0.1>.
 
 =item B<Port> I<Port>
 
 TCP-Port to connect to. Defaults to B<11211>.
 
+=item B<Socket> I<Path>
+
+Connect to I<memcached> using the UNIX domain socket at I<Path>. If this
+setting is given, the B<Host> and B<Port> settings are ignored.
+
 =back
 
 =head2 Plugin C<modbus>
 
 The B<modbus plugin> connects to a Modbus "slave" via Modbus/TCP and reads
 register values. It supports reading single registers (unsigned 16E<nbsp>bit
@@ -3050,12 +3207,22 @@
 
 Sets whether or not to perform reverse lookups on peers. Since the name or
 IP-address may be used in a filename it is recommended to disable reverse
 lookups. The default is to do reverse lookups to preserve backwards
 compatibility, though.
 
+=item B<IncludeUnitID> B<true>|B<false>
+
+When a peer is a refclock, include the unit ID in the I<type instance>.
+Defaults to B<false> for backward compatibility.
+
+If two refclock peers use the same driver and this is B<false>, the plugin will
+try to write simultaneous measurements from both to the same type instance.
+This will result in error messages in the log and only one set of measurements
+making it through.
+
 =back
 
 =head2 Plugin C<nut>
 
 =over 4
 
@@ -3275,12 +3442,17 @@
 
 =item B<ConnectID> I<ID>
 
 Defines the "database alias" or "service name" to connect to. Usually, these
 names are defined in the file named C<$ORACLE_HOME/network/admin/tnsnames.ora>.
 
+=item B<Host> I<Host>
+
+Hostname to use when dispatching values for this database. Defaults to using
+the global hostname of the I<collectd> instance.
+
 =item B<Username> I<Username>
 
 Username used for authentication.
 
 =item B<Password> I<Password>
 
@@ -3452,12 +3624,19 @@
 below, you may collect any data that is available from some PostgreSQL
 database. This way, you are able to access statistics of external daemons
 which are available in a PostgreSQL database or use future or special
 statistics provided by PostgreSQL without the need to upgrade your collectd
 installation.
 
+Starting with version 5.2, the C<postgresql> plugin supports writing data to
+PostgreSQL databases as well. This has been implemented in a generic way. You
+need to specify an SQL statement which will then be executed by collectd in
+order to write the data (see below for details). The benefit of that approach
+is that there is no fixed database layout. Rather, the layout may be optimized
+for the current setup.
+
 The B<PostgreSQL Documentation> manual can be found at
 L<http://www.postgresql.org/docs/manuals/>.
 
   <Plugin postgresql>
     <Query magic>
       Statement "SELECT magic FROM wizard WHERE host = $1;"
@@ -3481,12 +3660,17 @@
         InstancePrefix "rt36_tickets"
         InstancesFrom "type"
         ValuesFrom "count"
       </Result>
     </Query>
 
+    <Writer sqlstore>
+      Statement "SELECT collectd_insert($1, $2, $3, $4, $5, $6, $7, $8, $9);"
+      StoreRates true
+    </Writer>
+
     <Database foo>
       Host "hostname"
       Port "5432"
       User "username"
       Password "secret"
       SSLMode "prefer"
@@ -3497,12 +3681,18 @@
     <Database bar>
       Interval 300
       Service "service_name"
       Query backend # predefined
       Query rt36_tickets
     </Database>
+
+    <Database qux>
+      # ...
+      Writer sqlstore
+      CommitInterval 10
+    </Database>
   </Plugin>
 
 The B<Query> block defines one database query which may later be used by a
 database definition. It accepts a single mandatory argument which specifies
 the name of the query. The names of all queries have to be unique (see the
 B<MinVersion> and B<MaxVersion> options below for an exception to this
@@ -3545,12 +3735,17 @@
 used, the parameter expands to "localhost".
 
 =item I<database>
 
 The name of the database of the current connection.
 
+=item I<instance>
+
+The name of the database plugin instance. See the B<Instance> option of the
+database specification below for details.
+
 =item I<username>
 
 The username used to connect to the database.
 
 =item I<interval>
 
@@ -3658,12 +3853,107 @@
 =item B<disk_usage>
 
 This query collects the on-disk size of the database in bytes.
 
 =back
 
+In addition, the following detailed queries are available by default. Please
+note that each of those queries collects information B<by table>, thus,
+potentially producing B<a lot> of data. For details see the description of the
+non-by_table queries above.
+
+=over 4
+
+=item B<queries_by_table>
+
+=item B<query_plans_by_table>
+
+=item B<table_states_by_table>
+
+=item B<disk_io_by_table>
+
+=back
+
+The B<Writer> block defines a PostgreSQL writer backend. It accepts a single
+mandatory argument specifying the name of the writer. This will then be used
+in the B<Database> specification in order to activate the writer instance. The
+names of all writers have to be unique. The following options may be
+specified:
+
+=over 4
+
+=item B<Statement> I<sql statement>
+
+This mandatory option specifies the SQL statement that will be executed for
+each submitted value. A single SQL statement is allowed only. Anything after
+the first semicolon will be ignored.
+
+Nine parameters will be passed to the statement and should be specified as
+tokens B<$1>, B<$2>, through B<$9> in the statement string. The following
+values are made available through those parameters:
+
+=over 4
+
+=item B<$1>
+
+The timestamp of the queried value as a floating point number.
+
+=item B<$2>
+
+The hostname of the queried value.
+
+=item B<$3>
+
+The plugin name of the queried value.
+
+=item B<$4>
+
+The plugin instance of the queried value. This value may be B<NULL> if there
+is no plugin instance.
+
+=item B<$5>
+
+The type of the queried value (cf. L<types.db(5)>).
+
+=item B<$6>
+
+The type instance of the queried value. This value may be B<NULL> if there is
+no type instance.
+
+=item B<$7>
+
+An array of names for the submitted values (i.E<nbsp>e., the name of the data
+sources of the submitted value-list).
+
+=item B<$8>
+
+An array of types for the submitted values (i.E<nbsp>e., the type of the data
+sources of the submitted value-list; C<counter>, C<gauge>, ...). Note, that if
+B<StoreRates> is enabled (which is the default, see below), all types will be
+C<gauge>.
+
+=item B<$9>
+
+An array of the submitted values. The dimensions of the value name and value
+arrays match.
+
+=back
+
+In general, it is advisable to create and call a custom function in the
+PostgreSQL database for this purpose. Any procedural language supported by
+PostgreSQL will do (see chapter "Server Programming" in the PostgreSQL manual
+for details).
+
+=item B<StoreRates> B<false>|B<true>
+
+If set to B<true> (the default), convert counter values to rates. If set to
+B<false> counter values are stored as is, i.E<nbsp>e. as an increasing integer
+number.
+
+=back
+
 The B<Database> block defines one PostgreSQL database for which to collect
 statistics. It accepts a single mandatory argument which specifies the
 database name. None of the other options are required. PostgreSQL will use
 default values as documented in the section "CONNECTING TO A DATABASE" in the
 L<psql(1)> manpage. However, be aware that those defaults may be influenced by
 the user collectd is run as and special environment variables. See the manpage
@@ -3673,12 +3963,23 @@
 
 =item B<Interval> I<seconds>
 
 Specify the interval with which the database should be queried. The default is
 to use the global B<Interval> setting.
 
+=item B<CommitInterval> I<seconds>
+
+This option may be used for database connections which have "writers" assigned
+(see above). If specified, it causes a writer to put several updates into a
+single transaction. This transaction will last for the specified amount of
+time. By default, each update will be executed in a separate transaction. Each
+transaction generates a fair amount of overhead which can, thus, be reduced by
+activating this option. The draw-back is, that data covering the specified
+amount of time will be lost, for example, if a single statement within the
+transaction fails or if the database server crashes.
+
 =item B<Host> I<hostname>
 
 Specify the hostname or IP of the PostgreSQL server to connect to. If the
 value begins with a slash, it is interpreted as the directory name in which to
 look for the UNIX domain socket.
 
@@ -3703,12 +4004,19 @@
 
 =item B<SSLMode> I<disable>|I<allow>|I<prefer>|I<require>
 
 Specify whether to use an SSL connection when contacting the server. The
 following modes are supported:
 
+=item B<Instance> I<name>
+
+Specify the plugin instance name that should be used instead of the database
+name (which is the default, if this option has not been specified). This
+allows to query multiple databases of the same name on the same host (e.g.
+when running multiple database server versions in parallel).
+
 =over 4
 
 =item I<disable>
 
 Do not use SSL at all.
 
@@ -3738,17 +4046,42 @@
 service has to be defined in F<pg_service.conf> and holds additional
 connection parameters. See the section "The Connection Service File" in the
 B<PostgreSQL Documentation> for details.
 
 =item B<Query> I<query>
 
-Specify a I<query> which should be executed for the database connection. This
-may be any of the predefined or user-defined queries. If no such option is
-given, it defaults to "backends", "transactions", "queries", "query_plans",
-"table_states", "disk_io" and "disk_usage". Else, the specified queries are
-used only.
+Specifies a I<query> which should be executed in the context of the database
+connection. This may be any of the predefined or user-defined queries. If no
+such option is given, it defaults to "backends", "transactions", "queries",
+"query_plans", "table_states", "disk_io" and "disk_usage" (unless a B<Writer>
+has been specified). Else, the specified queries are used only.
+
+=item B<Writer> I<writer>
+
+Assigns the specified I<writer> backend to the database connection. This
+causes all collected data to be send to the database using the settings
+defined in the writer configuration (see the section "FILTER CONFIGURATION"
+below for details on how to selectively send data to certain plugins).
+
+Each writer will register a flush callback which may be used when having long
+transactions enabled (see the B<CommitInterval> option above). When issuing
+the B<FLUSH> command (see L<collectd-unixsock(5)> for details) the current
+transaction will be committed right away. Two different kinds of flush
+callbacks are available with the C<postgresql> plugin:
+
+=over 4
+
+=item B<postgresql>
+
+Flush all writer backends.
+
+=item B<postgresql->I<database>
+
+Flush all writers of the specified I<database> only.
+
+=back
 
 =back
 
 =head2 Plugin C<powerdns>
 
 The C<powerdns> plugin queries statistics from an authoritative PowerDNS
@@ -4063,12 +4396,16 @@
 =item B<Port> I<Port>
 
 The B<Port> option is the TCP port on which the Redis instance accepts
 connections. Either a service name of a port number may be given. Please note
 that numerical port numbers must be given as a string, too.
 
+=item B<Password> I<Password>
+
+Use I<Password> to authenticate when connecting to I<Redis>.
+
 =item B<Timeout> I<Timeout in miliseconds>
 
 The B<Timeout> option set the socket timeout for node response. Since the Redis
 read function is blocking, you should keep this value as low as possible. Keep
 in mind that the sum of all B<Timeout> values for all B<Nodes> should be lower
 than B<Interval> defined globally.
@@ -4120,12 +4457,56 @@
 =item B<CreateFiles> B<true>|B<false>
 
 Enables or disables the creation of RRD files. If the daemon is not running
 locally, or B<DataDir> is set to a relative path, this will not work as
 expected. Default is B<true>.
 
+=item B<StepSize> I<Seconds>
+
+B<Force> the stepsize of newly created RRD-files. Ideally (and per default)
+this setting is unset and the stepsize is set to the interval in which the data
+is collected. Do not use this option unless you absolutely have to for some
+reason. Setting this option may cause problems with the C<snmp plugin>, the
+C<exec plugin> or when the daemon is set up to receive data from other hosts.
+
+=item B<HeartBeat> I<Seconds>
+
+B<Force> the heartbeat of newly created RRD-files. This setting should be unset
+in which case the heartbeat is set to twice the B<StepSize> which should equal
+the interval in which data is collected. Do not set this option unless you have
+a very good reason to do so.
+
+=item B<RRARows> I<NumRows>
+
+The C<rrdtool plugin> calculates the number of PDPs per CDP based on the
+B<StepSize>, this setting and a timespan. This plugin creates RRD-files with
+three times five RRAs, i. e. five RRAs with the CFs B<MIN>, B<AVERAGE>, and
+B<MAX>. The five RRAs are optimized for graphs covering one hour, one day, one
+week, one month, and one year.
+
+So for each timespan, it calculates how many PDPs need to be consolidated into
+one CDP by calculating:
+  number of PDPs = timespan / (stepsize * rrarows)
+
+Bottom line is, set this no smaller than the width of you graphs in pixels. The
+default is 1200.
+
+=item B<RRATimespan> I<Seconds>
+
+Adds an RRA-timespan, given in seconds. Use this option multiple times to have
+more then one RRA. If this option is never used, the built-in default of (3600,
+86400, 604800, 2678400, 31622400) is used.
+
+For more information on how RRA-sizes are calculated see B<RRARows> above.
+
+=item B<XFF> I<Factor>
+
+Set the "XFiles Factor". The default is 0.1. If unsure, don't set this option.
+I<Factor> must be in the range C<[0.0-1.0)>, i.e. between zero (inclusive) and
+one (exclusive).
+
 =back
 
 =head2 Plugin C<rrdtool>
 
 You can use the settings B<StepSize>, B<HeartBeat>, B<RRARows>, and B<XFF> to
 fine-tune your RRD-files. Please read L<rrdcreate(1)> if you encounter problems
@@ -4177,12 +4558,14 @@
 
 For more information on how RRA-sizes are calculated see B<RRARows> above.
 
 =item B<XFF> I<Factor>
 
 Set the "XFiles Factor". The default is 0.1. If unsure, don't set this option.
+I<Factor> must be in the range C<[0.0-1.0)>, i.e. between zero (inclusive) and
+one (exclusive).
 
 =item B<CacheFlush> I<Seconds>
 
 When the C<rrdtool> plugin uses a cache (by setting B<CacheTimeout>, see below)
 it writes all values for a certain RRD-file if the oldest value is older than
 (or equal to) the number of seconds specified. If some RRD-file is not updated
@@ -4292,12 +4675,17 @@
 used and available space over all devices. If B<true> is configured, the used
 and available space of each device will be reported separately.
 
 This option is only available if the I<Swap plugin> can read C</proc/swaps>
 (under Linux) or use the L<swapctl(2)> mechanism (under I<Solaris>).
 
+=item B<ReportBytes> B<false>|B<true>
+
+When enabled, the I<swap I/O> is reported in bytes. When disabled, the default,
+I<swap I/O> is reported in pages. This option is available under Linux only.
+
 =back
 
 =head2 Plugin C<syslog>
 
 =over 4
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectdctl.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectdctl.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectdctl.1	2013-04-09 09:05:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectdctl.1	2012-11-18 06:24:49.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTDCTL 1"
-.TH COLLECTDCTL 1 "2013-04-08" "5.1.3" "collectd"
+.TH COLLECTDCTL 1 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectdctl \- Control interface for collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectdctl.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectdctl.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectdctl.c	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectdctl.c	2012-11-18 06:23:21.000000000 +0800
@@ -62,13 +62,13 @@
 # endif
 # ifndef isinf
 #  define isinf(f) (!isfinite(f) && !isnan(f))
 # endif
 #endif /* NAN_ZERO_ZERO */
 
-#include "libcollectdclient/client.h"
+#include "libcollectdclient/collectd/client.h"
 
 #define DEFAULT_SOCK LOCALSTATEDIR"/run/"PACKAGE_NAME"-unixsock"
 
 extern char *optarg;
 extern int   optind;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-email.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-email.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-email.5	2008-02-06 02:02:41.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-email.5	2012-11-18 06:24:49.000000000 +0800
@@ -1,18 +1,10 @@
-.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
+.\" Automatically generated by Pod::Man 2.22 (Pod::Simple 3.07)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
-.de Sh \" Subsection heading
-.br
-.if t .Sp
-.ne 5
-.PP
-\fB\\$1\fR
-.PP
-..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -45,28 +37,31 @@
 .    ds -- \|\(em\|
 .    ds PI \(*p
 .    ds L" ``
 .    ds R" ''
 'br\}
 .\"
+.\" Escape single quotes in literal strings from groff's Unicode transform.
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
-.if \nF \{\
+.ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
 .    nr % 0
 .    rr F
 .\}
-.\"
-.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
-.\" way too many mistakes in technical documents.
-.hy 0
-.if n .na
+.el \{\
+.    de IX
+..
+.\}
 .\"
 .\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
 .\" Fear.  Run.  Save yourself.  No user-serviceable parts.
 .    \" fudge factors for nroff and troff
 .if n \{\
 .    ds #H 0
@@ -126,13 +121,17 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EMAIL 5"
-.TH COLLECTD-EMAIL 5 "2007-10-11" "4.3.0beta0" "collectd"
+.TH COLLECTD-EMAIL 5 "2012-11-17" "5.2.0" "collectd"
+.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
+.\" way too many mistakes in technical documents.
+.if n .ad l
+.nh
 .SH "NAME"
 collectd\-email \- Documentation of collectd's \f(CW\*(C`email plugin\*(C'\fR
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 .Vb 8
 \&  # See collectd.conf(5)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-exec.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-exec.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-exec.5	2013-04-09 09:05:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-exec.5	2012-11-18 06:24:49.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EXEC 5"
-.TH COLLECTD-EXEC 5 "2013-04-08" "5.1.3" "collectd"
+.TH COLLECTD-EXEC 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-exec \- Documentation of collectd's \f(CW\*(C`exec plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd.h	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd.h	2012-11-18 06:23:21.000000000 +0800
@@ -255,12 +255,16 @@
 #endif
 
 #ifndef COLLECTD_GRP_NAME
 # define COLLECTD_GRP_NAME "collectd"
 #endif
 
+#ifndef COLLECTD_DEFAULT_INTERVAL
+# define COLLECTD_DEFAULT_INTERVAL 10.0
+#endif
+
 #define STATIC_ARRAY_LEN(array) (sizeof (array) / sizeof ((array)[0]))
 
 /* Remove GNU specific __attribute__ settings when using another compiler */
 #if !__GNUC__
 # define __attribute__(x) /**/
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-java.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-java.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-java.5	2013-04-09 09:05:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-java.5	2012-11-18 06:24:49.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-JAVA 5"
-.TH COLLECTD-JAVA 5 "2013-04-08" "5.1.3" "collectd"
+.TH COLLECTD-JAVA 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-java \- Documentation of collectd's "java plugin"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectdmon.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectdmon.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectdmon.1	2008-06-04 21:21:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectdmon.1	2012-11-18 06:24:49.000000000 +0800
@@ -1,18 +1,10 @@
-.\" Automatically generated by Pod::Man v1.37, Pod::Parser v1.32
+.\" Automatically generated by Pod::Man 2.22 (Pod::Simple 3.07)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
-.de Sh \" Subsection heading
-.br
-.if t .Sp
-.ne 5
-.PP
-\fB\\$1\fR
-.PP
-..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -45,28 +37,31 @@
 .    ds -- \|\(em\|
 .    ds PI \(*p
 .    ds L" ``
 .    ds R" ''
 'br\}
 .\"
+.\" Escape single quotes in literal strings from groff's Unicode transform.
+.ie \n(.g .ds Aq \(aq
+.el       .ds Aq '
+.\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
-.if \nF \{\
+.ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
 .    nr % 0
 .    rr F
 .\}
-.\"
-.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
-.\" way too many mistakes in technical documents.
-.hy 0
-.if n .na
+.el \{\
+.    de IX
+..
+.\}
 .\"
 .\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
 .\" Fear.  Run.  Save yourself.  No user-serviceable parts.
 .    \" fudge factors for nroff and troff
 .if n \{\
 .    ds #H 0
@@ -126,13 +121,17 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTDMON 1"
-.TH COLLECTDMON 1 "2008-05-20" "4.4.0.48.g2715835" "collectd"
+.TH COLLECTDMON 1 "2012-11-17" "5.2.0" "collectd"
+.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
+.\" way too many mistakes in technical documents.
+.if n .ad l
+.nh
 .SH "NAME"
 collectdmon \- Monitoring daemon for collectd
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
 collectdmon \fI[options]\fR [\-\- \fIcollectd options\fR]
 .SH "DESCRIPTION"
@@ -145,13 +144,13 @@
 collectdmon supports the following options:
 .IP "\fB\-c\fR \fI<path>\fR" 4
 .IX Item "-c <path>"
 Specify the pathname of the collectd binary. You may either specify an
 absolute path or simply the name of the binary in which case the \fB\s-1PATH\s0\fR
 variable will be searched for it. The default is "\fBcollectd\fR".
-.IP "\fB\-P\fR \fI<pid-file>\fR" 4
+.IP "\fB\-P\fR \fI<pid\-file>\fR" 4
 .IX Item "-P <pid-file>"
 Specify the pid file. The default is "\fI/var/run/collectdmon.pid\fR".
 .IP "\fB\-h\fR" 4
 .IX Item "-h"
 Output usage information and exit.
 .IP "\fIcollectd options\fR" 4
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-nagios.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-nagios.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-nagios.1	2013-04-09 09:05:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-nagios.1	2012-11-18 06:24:49.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-NAGIOS 1"
-.TH COLLECTD-NAGIOS 1 "2013-04-08" "5.1.3" "collectd"
+.TH COLLECTD-NAGIOS 1 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-nagios \- Nagios plugin for querying collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-nagios.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-nagios.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-nagios.c	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-nagios.c	2012-11-18 06:23:21.000000000 +0800
@@ -63,13 +63,13 @@
 # endif
 # ifndef isinf
 #  define isinf(f) (!isfinite(f) && !isnan(f))
 # endif
 #endif /* NAN_ZERO_ZERO */
 
-#include "libcollectdclient/client.h"
+#include "libcollectdclient/collectd/client.h"
 
 #define RET_OKAY     0
 #define RET_WARNING  1
 #define RET_CRITICAL 2
 #define RET_UNKNOWN  3
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-perl.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-perl.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-perl.5	2013-04-09 09:05:45.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-perl.5	2012-11-18 06:24:49.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-PERL 5"
-.TH COLLECTD-PERL 5 "2013-04-09" "5.1.3" "collectd"
+.TH COLLECTD-PERL 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-perl \- Documentation of collectd's \f(CW\*(C`perl plugin\*(C'\fR
@@ -312,13 +312,13 @@
 layout looks like this:
 .Sp
 .Vb 10
 \&  {
 \&    values => [123, 0.5],
 \&    time   => time (),
-\&    interval => $interval_g,
+\&    interval => plugin_get_interval (),
 \&    host   => $hostname_g,
 \&    plugin => \*(Aqmyplugin\*(Aq,
 \&    type   => \*(Aqmyplugin\*(Aq,
 \&    plugin_instance => \*(Aq\*(Aq,
 \&    type_instance   => \*(Aq\*(Aq
 \&  }
@@ -503,12 +503,18 @@
 Submits a \fImessage\fR of level \fIlog-level\fR to collectd's logging mechanism.
 The message is passed to all log-callbacks that are registered with collectd.
 .IP "\fB\s-1ERROR\s0\fR, \fB\s-1WARNING\s0\fR, \fB\s-1NOTICE\s0\fR, \fB\s-1INFO\s0\fR, \fB\s-1DEBUG\s0\fR (\fImessage\fR)" 4
 .IX Item "ERROR, WARNING, NOTICE, INFO, DEBUG (message)"
 Wrappers around \fBplugin_log\fR, using \fB\s-1LOG_ERR\s0\fR, \fB\s-1LOG_WARNING\s0\fR,
 \&\fB\s-1LOG_NOTICE\s0\fR, \fB\s-1LOG_INFO\s0\fR and \fB\s-1LOG_DEBUG\s0\fR respectively as \fIlog-level\fR.
+.IP "\fBplugin_get_interval\fR ()" 4
+.IX Item "plugin_get_interval ()"
+Returns the interval of the current plugin as a floating point number in
+seconds. This value depends on the interval configured within the
+\&\f(CW\*(C`LoadPlugin perl\*(C'\fR block or the global interval (see \fIcollectd.conf\fR\|(5) for
+details).
 .PP
 The following function provides the filter chain C\-interface to Perl-modules.
 It is exported by the \*(L":filter_chain\*(R" export tag (see the section \*(L"\s-1EXPORTS\s0\*(R"
 below).
 .IP "\fBfc_register\fR (\fItype\fR, \fIname\fR, \fIproc\fR)" 4
 .IX Item "fc_register (type, name, proc)"
@@ -570,12 +576,17 @@
 \&\fBFQDNLookup\fR configuration options (see \fIcollectd.conf\fR\|(5) for details).
 .ie n .IP "\fB\fB$interval_g\fB\fR" 4
 .el .IP "\fB\f(CB$interval_g\fB\fR" 4
 .IX Item "$interval_g"
 This variable keeps the interval in seconds in which the read functions are
 queried (see the \fBInterval\fR configuration option).
+.Sp
+\&\fBNote:\fR This variable should no longer be used in favor of
+\&\f(CW\*(C`plugin_get_interval()\*(C'\fR (see above). This function takes any plugin-specific
+interval settings into account (see the \f(CW\*(C`Interval\*(C'\fR option of \f(CW\*(C`LoadPlugin\*(C'\fR in
+\&\fIcollectd.conf\fR\|(5) for details).
 .PP
 Any changes to these variables will be globally visible in collectd.
 .SH "EXPORTS"
 .IX Header "EXPORTS"
 By default no symbols are exported. However, the following export tags are
 available (\fB:all\fR will export all of them):
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-perl.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-perl.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-perl.pod	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-perl.pod	2012-11-18 06:23:21.000000000 +0800
@@ -205,13 +205,13 @@
 included in the value-list but is passed as an extra argument, the general
 layout looks like this:
 
   {
     values => [123, 0.5],
     time   => time (),
-    interval => $interval_g,
+    interval => plugin_get_interval (),
     host   => $hostname_g,
     plugin => 'myplugin',
     type   => 'myplugin',
     plugin_instance => '',
     type_instance   => ''
   }
@@ -412,12 +412,19 @@
 
 =item B<ERROR>, B<WARNING>, B<NOTICE>, B<INFO>, B<DEBUG> (I<message>)
 
 Wrappers around B<plugin_log>, using B<LOG_ERR>, B<LOG_WARNING>,
 B<LOG_NOTICE>, B<LOG_INFO> and B<LOG_DEBUG> respectively as I<log-level>.
 
+=item B<plugin_get_interval> ()
+
+Returns the interval of the current plugin as a floating point number in
+seconds. This value depends on the interval configured within the
+C<LoadPlugin perl> block or the global interval (see L<collectd.conf(5)> for
+details).
+
 =back
 
 The following function provides the filter chain C-interface to Perl-modules.
 It is exported by the ":filter_chain" export tag (see the section "EXPORTS"
 below).
 
@@ -491,12 +498,17 @@
 
 =item B<$interval_g>
 
 This variable keeps the interval in seconds in which the read functions are
 queried (see the B<Interval> configuration option).
 
+B<Note:> This variable should no longer be used in favor of
+C<plugin_get_interval()> (see above). This function takes any plugin-specific
+interval settings into account (see the C<Interval> option of C<LoadPlugin> in
+L<collectd.conf(5)> for details).
+
 =back
 
 Any changes to these variables will be globally visible in collectd.
 
 =head1 EXPORTS
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-python.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-python.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-python.5	2013-02-07 03:15:41.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-python.5	2012-11-18 06:24:49.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-PYTHON 5"
-.TH COLLECTD-PYTHON 5 "2013-01-25" "5.2.1.77.gc9ca810" "collectd"
+.TH COLLECTD-PYTHON 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-python \- Documentation of collectd's \f(CW\*(C`python plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-snmp.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-snmp.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-snmp.5	2011-02-07 15:11:22.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-snmp.5	2012-11-18 06:24:49.000000000 +0800
@@ -1,7 +1,7 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.22 (Pod::Simple 3.07)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-SNMP 5"
-.TH COLLECTD-SNMP 5 "2011-02-07" "5.0.0.beta1.39.g6bd4bf7" "collectd"
+.TH COLLECTD-SNMP 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-snmp \- Documentation of collectd's \f(CW\*(C`snmp plugin\*(C'\fR
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src: collectd-tg.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-threshold.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-threshold.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-threshold.5	2013-04-09 09:05:45.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-threshold.5	2012-11-18 06:24:49.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-THRESHOLD 5"
-.TH COLLECTD-THRESHOLD 5 "2013-04-08" "5.1.3" "collectd"
+.TH COLLECTD-THRESHOLD 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-threshold \- Documentation of collectd's \fIThreshold plugin\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-unixsock.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-unixsock.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/collectd-unixsock.5	2011-07-07 22:56:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/collectd-unixsock.5	2012-11-18 06:24:50.000000000 +0800
@@ -1,7 +1,7 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.22 (Pod::Simple 3.07)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-UNIXSOCK 5"
-.TH COLLECTD-UNIXSOCK 5 "2011-05-25" "5.0.0.3.ge61872d" "collectd"
+.TH COLLECTD-UNIXSOCK 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-unixsock \- Documentation of collectd's \f(CW\*(C`unixsock plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/common.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/common.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/common.c	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/common.c	2012-11-18 06:23:21.000000000 +0800
@@ -1226,13 +1226,108 @@
 	else
 	{
 		diff = new_value - old_value;
 	}
 
 	return (diff);
-} /* counter_t counter_to_gauge */
+} /* counter_t counter_diff */
+
+int rate_to_value (value_t *ret_value, gauge_t rate, /* {{{ */
+		rate_to_value_state_t *state,
+		int ds_type, cdtime_t t)
+{
+	gauge_t delta_gauge;
+	cdtime_t delta_t;
+
+	if (ds_type == DS_TYPE_GAUGE)
+	{
+		state->last_value.gauge = rate;
+		state->last_time = t;
+
+		*ret_value = state->last_value;
+		return (0);
+	}
+
+	/* Counter and absolute can't handle negative rates. Reset "last time"
+	 * to zero, so that the next valid rate will re-initialize the
+	 * structure. */
+	if ((rate < 0.0)
+			&& ((ds_type == DS_TYPE_COUNTER)
+				|| (ds_type == DS_TYPE_ABSOLUTE)))
+	{
+		memset (state, 0, sizeof (*state));
+		return (EINVAL);
+	}
+
+	/* Another invalid state: The time is not increasing. */
+	if (t <= state->last_time)
+	{
+		memset (state, 0, sizeof (*state));
+		return (EINVAL);
+	}
+
+	delta_t = t - state->last_time;
+	delta_gauge = (rate * CDTIME_T_TO_DOUBLE (delta_t)) + state->residual;
+
+	/* Previous value is invalid. */
+	if (state->last_time == 0) /* {{{ */
+	{
+		if (ds_type == DS_TYPE_DERIVE)
+		{
+			state->last_value.derive = (derive_t) rate;
+			state->residual = rate - ((gauge_t) state->last_value.derive);
+		}
+		else if (ds_type == DS_TYPE_COUNTER)
+		{
+			state->last_value.counter = (counter_t) rate;
+			state->residual = rate - ((gauge_t) state->last_value.counter);
+		}
+		else if (ds_type == DS_TYPE_ABSOLUTE)
+		{
+			state->last_value.absolute = (absolute_t) rate;
+			state->residual = rate - ((gauge_t) state->last_value.absolute);
+		}
+		else
+		{
+			assert (23 == 42);
+		}
+
+		state->last_time = t;
+		return (EAGAIN);
+	} /* }}} */
+
+	if (ds_type == DS_TYPE_DERIVE)
+	{
+		derive_t delta_derive = (derive_t) delta_gauge;
+
+		state->last_value.derive += delta_derive;
+		state->residual = delta_gauge - ((gauge_t) delta_derive);
+	}
+	else if (ds_type == DS_TYPE_COUNTER)
+	{
+		counter_t delta_counter = (counter_t) delta_gauge;
+
+		state->last_value.counter += delta_counter;
+		state->residual = delta_gauge - ((gauge_t) delta_counter);
+	}
+	else if (ds_type == DS_TYPE_ABSOLUTE)
+	{
+		absolute_t delta_absolute = (absolute_t) delta_gauge;
+
+		state->last_value.absolute = delta_absolute;
+		state->residual = delta_gauge - ((gauge_t) delta_absolute);
+	}
+	else
+	{
+		assert (23 == 42);
+	}
+
+        state->last_time = t;
+	*ret_value = state->last_value;
+	return (0);
+} /* }}} value_t rate_to_value */
 
 int service_name_to_port_number (const char *service_name)
 {
 	struct addrinfo *ai_list;
 	struct addrinfo *ai_ptr;
 	struct addrinfo ai_hints;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/common.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/common.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/common.h	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/common.h	2012-11-18 06:23:21.000000000 +0800
@@ -44,12 +44,20 @@
 		|| (strcasecmp ("yes", (s)) == 0) \
 		|| (strcasecmp ("on", (s)) == 0))
 #define IS_FALSE(s) ((strcasecmp ("false", (s)) == 0) \
 		|| (strcasecmp ("no", (s)) == 0) \
 		|| (strcasecmp ("off", (s)) == 0))
 
+struct rate_to_value_state_s
+{
+  value_t last_value;
+  cdtime_t last_time;
+  gauge_t residual;
+};
+typedef struct rate_to_value_state_s rate_to_value_state_t;
+
 char *sstrncpy (char *dest, const char *src, size_t n);
 int ssnprintf (char *dest, size_t n, const char *format, ...);
 char *sstrdup(const char *s);
 void *smalloc(size_t size);
 char *sstrerror (int errnum, char *buf, size_t buflen);
 
@@ -289,12 +297,21 @@
 		void *user_data, int hidden);
 /* Returns the number of bytes read or negative on error. */
 int read_file_contents (const char *filename, char *buf, int bufsize);
 
 counter_t counter_diff (counter_t old_value, counter_t new_value);
 
+/* Convert a rate back to a value_t. When converting to a derive_t, counter_t
+ * or absoltue_t, take fractional residuals into account. This is important
+ * when scaling counters, for example.
+ * Returns zero on success. Returns EAGAIN when called for the first time; in
+ * this case the value_t is invalid and the next call should succeed. Other
+ * return values indicate an error. */
+int rate_to_value (value_t *ret_value, gauge_t rate,
+		rate_to_value_state_t *state, int ds_type, cdtime_t t);
+
 /* Converts a service name (a string) to a port number
  * (in the range [1-65535]). Returns less than zero on error. */
 int service_name_to_port_number (const char *service_name);
 
 /** Parse a string to a derive_t value. Returns zero on success or non-zero on
  * failure. If failure is returned, ret_value is not touched. */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/configfile.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/configfile.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/configfile.c	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/configfile.c	2012-11-18 06:23:21.000000000 +0800
@@ -43,19 +43,21 @@
 typedef struct cf_callback
 {
 	const char  *type;
 	int  (*callback) (const char *, const char *);
 	const char **keys;
 	int    keys_num;
+	plugin_ctx_t ctx;
 	struct cf_callback *next;
 } cf_callback_t;
 
 typedef struct cf_complex_callback_s
 {
 	char *type;
 	int (*callback) (oconfig_item_t *);
+	plugin_ctx_t ctx;
 	struct cf_complex_callback_s *next;
 } cf_complex_callback_t;
 
 typedef struct cf_value_map_s
 {
 	char *key;
@@ -93,13 +95,13 @@
 static cf_global_option_t cf_global_options[] =
 {
 	{"BaseDir",     NULL, PKGLOCALSTATEDIR},
 	{"PIDFile",     NULL, PIDFILE},
 	{"Hostname",    NULL, NULL},
 	{"FQDNLookup",  NULL, "true"},
-	{"Interval",    NULL, "10"},
+	{"Interval",    NULL, NULL},
 	{"ReadThreads", NULL, "5"},
 	{"Timeout",     NULL, "2"},
 	{"PreCacheChain",  NULL, "PreCache"},
 	{"PostCacheChain", NULL, "PostCache"}
 };
 static int cf_global_options_num = STATIC_ARRAY_LEN (cf_global_options);
@@ -125,12 +127,13 @@
 }
 
 static int cf_dispatch (const char *type, const char *orig_key,
 		const char *orig_value)
 {
 	cf_callback_t *cf_cb;
+	plugin_ctx_t old_ctx;
 	char *key;
 	char *value;
 	int ret;
 	int i;
 
 	DEBUG ("type = %s, key = %s, value = %s",
@@ -153,22 +156,26 @@
 		free (key);
 		return (2);
 	}
 
 	ret = -1;
 
+	old_ctx = plugin_set_ctx (cf_cb->ctx);
+
 	for (i = 0; i < cf_cb->keys_num; i++)
 	{
 		if ((cf_cb->keys[i] != NULL)
 				&& (strcasecmp (cf_cb->keys[i], key) == 0))
 		{
 			ret = (*cf_cb->callback) (key, value);
 			break;
 		}
 	}
 
+	plugin_set_ctx (old_ctx);
+
 	if (i >= cf_cb->keys_num)
 		WARNING ("Plugin `%s' did not register for value `%s'.", type, key);
 
 	free (key);
 	free (value);
 
@@ -241,21 +248,29 @@
 
 static int dispatch_loadplugin (const oconfig_item_t *ci)
 {
 	int i;
 	const char *name;
 	unsigned int flags = 0;
+	plugin_ctx_t ctx;
+	plugin_ctx_t old_ctx;
+	int ret_val;
+
 	assert (strcasecmp (ci->key, "LoadPlugin") == 0);
 
 	if (ci->values_num != 1)
 		return (-1);
 	if (ci->values[0].type != OCONFIG_TYPE_STRING)
 		return (-1);
 
 	name = ci->values[0].value.string;
 
+	/* default to the global interval set before loading this plugin */
+	memset (&ctx, 0, sizeof (ctx));
+	ctx.interval = cf_get_default_interval ();
+
 	/*
 	 * XXX: Magic at work:
 	 *
 	 * Some of the language bindings, for example the Python and Perl
 	 * plugins, need to be able to export symbols to the scripts they run.
 	 * For this to happen, the "Globals" flag needs to be set.
@@ -268,20 +283,35 @@
 			|| (strcasecmp ("Python", name) == 0))
 		flags |= PLUGIN_FLAGS_GLOBAL;
 
 	for (i = 0; i < ci->children_num; ++i) {
 		if (strcasecmp("Globals", ci->children[i].key) == 0)
 			cf_util_get_flag (ci->children + i, &flags, PLUGIN_FLAGS_GLOBAL);
+		else if (strcasecmp ("Interval", ci->children[i].key) == 0) {
+			double interval = 0.0;
+
+			if (cf_util_get_double (ci->children + i, &interval) != 0) {
+				/* cf_util_get_double will log an error */
+				continue;
+			}
+
+			ctx.interval = DOUBLE_TO_CDTIME_T (interval);
+		}
 		else {
 			WARNING("Ignoring unknown LoadPlugin option \"%s\" "
 					"for plugin \"%s\"",
 					ci->children[i].key, ci->values[0].value.string);
 		}
 	}
 
-	return (plugin_load (name, (uint32_t) flags));
+	old_ctx = plugin_set_ctx (ctx);
+	ret_val = plugin_load (name, (uint32_t) flags);
+	/* reset to the "global" context */
+	plugin_set_ctx (old_ctx);
+
+	return (ret_val);
 } /* int dispatch_value_loadplugin */
 
 static int dispatch_value_plugin (const char *plugin, oconfig_item_t *ci)
 {
 	char  buffer[4096];
 	char *buffer_ptr;
@@ -354,14 +384,24 @@
 		return (-1);
 
 	name = ci->values[0].value.string;
 
 	/* Check for a complex callback first */
 	for (cb = complex_callback_head; cb != NULL; cb = cb->next)
+	{
 		if (strcasecmp (name, cb->type) == 0)
-			return (cb->callback (ci));
+		{
+			plugin_ctx_t old_ctx;
+			int ret_val;
+
+			old_ctx = plugin_set_ctx (cb->ctx);
+			ret_val = (cb->callback (ci));
+			plugin_set_ctx (old_ctx);
+			return (ret_val);
+		}
+	}
 
 	/* Hm, no complex plugin found. Dispatch the values one by one */
 	for (i = 0; i < ci->children_num; i++)
 	{
 		if (ci->children[i].children == NULL)
 			dispatch_value_plugin (name, ci->children + i);
@@ -825,12 +865,35 @@
 	
 	return ((cf_global_options[i].value != NULL)
 			? cf_global_options[i].value
 			: cf_global_options[i].def);
 } /* char *global_option_get */
 
+cdtime_t cf_get_default_interval (void)
+{
+  char const *str = global_option_get ("Interval");
+  double interval_double = COLLECTD_DEFAULT_INTERVAL;
+
+  if (str != NULL)
+  {
+    char *endptr = NULL;
+    double tmp = strtod (str, &endptr);
+
+    if ((endptr == NULL) || (endptr == str) || (*endptr != 0))
+      ERROR ("cf_get_default_interval: Unable to parse string \"%s\" "
+          "as number.", str);
+    else if (tmp <= 0.0)
+      ERROR ("cf_get_default_interval: Interval must be a positive number. "
+          "The current number is %g.", tmp);
+    else
+      interval_double = tmp;
+  }
+
+  return (DOUBLE_TO_CDTIME_T (interval_double));
+} /* }}} cdtime_t cf_get_default_interval */
+
 void cf_unregister (const char *type)
 {
 	cf_callback_t *this, *prev;
 
 	for (prev = NULL, this = first_callback;
 			this != NULL;
@@ -881,12 +944,13 @@
 		return;
 
 	cf_cb->type     = type;
 	cf_cb->callback = callback;
 	cf_cb->keys     = keys;
 	cf_cb->keys_num = keys_num;
+	cf_cb->ctx      = plugin_get_ctx ();
 
 	cf_cb->next = first_callback;
 	first_callback = cf_cb;
 } /* void cf_register */
 
 int cf_register_complex (const char *type, int (*callback) (oconfig_item_t *))
@@ -904,12 +968,14 @@
 		return (-1);
 	}
 
 	new->callback = callback;
 	new->next = NULL;
 
+	new->ctx = plugin_get_ctx ();
+
 	if (complex_callback_head == NULL)
 	{
 		complex_callback_head = new;
 	}
 	else
 	{
@@ -1012,12 +1078,29 @@
 
 	*ret_value = (int) ci->values[0].value.number;
 
 	return (0);
 } /* }}} int cf_util_get_int */
 
+int cf_util_get_double (const oconfig_item_t *ci, double *ret_value) /* {{{ */
+{
+	if ((ci == NULL) || (ret_value == NULL))
+		return (EINVAL);
+
+	if ((ci->values_num != 1) || (ci->values[0].type != OCONFIG_TYPE_NUMBER))
+	{
+		ERROR ("cf_util_get_double: The %s option requires "
+				"exactly one numeric argument.", ci->key);
+		return (-1);
+	}
+
+	*ret_value = ci->values[0].value.number;
+
+	return (0);
+} /* }}} int cf_util_get_double */
+
 int cf_util_get_boolean (const oconfig_item_t *ci, _Bool *ret_bool) /* {{{ */
 {
 	if ((ci == NULL) || (ret_bool == NULL))
 		return (EINVAL);
 
 	if ((ci->values_num != 1) || (ci->values[0].type != OCONFIG_TYPE_BOOLEAN))
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/configfile.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/configfile.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/configfile.h	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/configfile.h	2012-11-18 06:23:21.000000000 +0800
@@ -84,12 +84,14 @@
  */
 int cf_read (char *filename);
 
 int global_option_set (const char *option, const char *value);
 const char *global_option_get (const char *option);
 
+cdtime_t cf_get_default_interval (void);
+
 /* Assures the config option is a string, duplicates it and returns the copy in
  * "ret_string". If necessary "*ret_string" is freed first. Returns zero upon
  * success. */
 int cf_util_get_string (const oconfig_item_t *ci, char **ret_string);
 
 /* Assures the config option is a string and copies it to the provided buffer.
@@ -97,12 +99,15 @@
 int cf_util_get_string_buffer (const oconfig_item_t *ci, char *buffer,
 		size_t buffer_size);
 
 /* Assures the config option is a number and returns it as an int. */
 int cf_util_get_int (const oconfig_item_t *ci, int *ret_value);
 
+/* Assures the config option is a number and returns it as a double. */
+int cf_util_get_double (const oconfig_item_t *ci, double *ret_value);
+
 /* Assures the config option is a boolean and assignes it to `ret_bool'.
  * Otherwise, `ret_bool' is not changed and non-zero is returned. */
 int cf_util_get_boolean (const oconfig_item_t *ci, _Bool *ret_bool);
 
 /* Assures the config option is a boolean and set or unset the given flag in
  * `ret_value' as appropriate. Returns non-zero on error. */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/config.h.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/config.h.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/config.h.in	2013-04-09 09:05:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/config.h.in	2012-11-18 06:23:33.000000000 +0800
@@ -544,12 +544,15 @@
 /* Define to 1 if you have the <net/if_ppp.h> header file. */
 #undef HAVE_NET_IF_PPP_H
 
 /* Define to 1 if you have the <net/ip_vs.h> header file. */
 #undef HAVE_NET_IP_VS_H
 
+/* Define to 1 if you have the <net/pfvar.h> header file. */
+#undef HAVE_NET_PFVAR_H
+
 /* Define to 1 if you have the <net/ppp_defs.h> header file. */
 #undef HAVE_NET_PPP_DEFS_H
 
 /* Define to 1 if you have the <net-snmp/net-snmp-config.h> header file. */
 #undef HAVE_NET_SNMP_NET_SNMP_CONFIG_H
 
@@ -592,12 +595,15 @@
 /* Define if Perl supports ithreads. */
 #undef HAVE_PERL_ITHREADS
 
 /* Define if Perl's struct mgvtbl has member svt_local. */
 #undef HAVE_PERL_STRUCT_MGVTBL_SVT_LOCAL
 
+/* Define to 1 if the aggregation plugin is enabled. */
+#undef HAVE_PLUGIN_AGGREGATION
+
 /* Define to 1 if the amqp plugin is enabled. */
 #undef HAVE_PLUGIN_AMQP
 
 /* Define to 1 if the apache plugin is enabled. */
 #undef HAVE_PLUGIN_APACHE
 
@@ -790,12 +796,15 @@
 /* Define to 1 if the oracle plugin is enabled. */
 #undef HAVE_PLUGIN_ORACLE
 
 /* Define to 1 if the perl plugin is enabled. */
 #undef HAVE_PLUGIN_PERL
 
+/* Define to 1 if the pf plugin is enabled. */
+#undef HAVE_PLUGIN_PF
+
 /* Define to 1 if the pinba plugin is enabled. */
 #undef HAVE_PLUGIN_PINBA
 
 /* Define to 1 if the ping plugin is enabled. */
 #undef HAVE_PLUGIN_PING
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/contextswitch.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/contextswitch.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/contextswitch.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/contextswitch.c	2012-11-18 06:23:21.000000000 +0800
@@ -34,12 +34,17 @@
 /* #endif HAVE_SYSCTLBYNAME */
 
 #elif KERNEL_LINUX
 /* no global variables */
 /* #endif KERNEL_LINUX */
 
+#elif HAVE_PERFSTAT
+# include <sys/protosw.h>
+# include <libperfstat.h>
+/* #endif HAVE_PERFSTAT */
+
 #else
 # error "No applicable input method."
 #endif
 
 static void cs_submit (derive_t context_switches)
 {
@@ -118,13 +123,30 @@
 		break;
 	}
 	fclose(fh);
 
 	if (status == -2)
 		ERROR ("contextswitch plugin: Unable to find context switch value.");
-#endif /* KERNEL_LINUX */
+/* #endif  KERNEL_LINUX */
+
+#elif HAVE_PERFSTAT
+	int status = 0;
+	perfstat_cpu_total_t perfcputotal;
+
+	status = perfstat_cpu_total(NULL, &perfcputotal, sizeof(perfstat_cpu_total_t), 1);
+	if (status < 0)
+	{
+		char errbuf[1024];
+		ERROR ("contextswitch plugin: perfstat_cpu_total: %s",
+			sstrerror (errno, errbuf, sizeof (errbuf)));
+		return (-1);
+	}
+
+	cs_submit(perfcputotal.pswitch);
+	status = 0;
+#endif /* defined(HAVE_PERFSTAT) */
 
 	return status;
 }
 
 void module_register (void)
 {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/cpu.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/cpu.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/cpu.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/cpu.c	2012-11-18 06:23:21.000000000 +0800
@@ -160,13 +160,13 @@
 		return (-1);
 	}
 
 	DEBUG ("host_processors returned %i %s", (int) cpu_list_len, cpu_list_len == 1 ? "processor" : "processors");
 	INFO ("cpu plugin: Found %i processor%s.", (int) cpu_list_len, cpu_list_len == 1 ? "" : "s");
 
-	cpu_temp_retry_max = 86400 / CDTIME_T_TO_TIME_T (interval_g);
+	cpu_temp_retry_max = 86400 / CDTIME_T_TO_TIME_T (plugin_get_interval ());
 /* #endif PROCESSOR_CPU_LOAD_INFO */
 
 #elif defined(HAVE_LIBKSTAT)
 	kstat_t *ksp_chain;
 
 	numcpu = 0;
@@ -341,12 +341,14 @@
 				       	(int) cpu_temp_len);
 			continue;
 		}
 
 		cpu_temp_retry_counter = 0;
 		cpu_temp_retry_step    = 1;
+
+		DEBUG ("cpu_temp = %i", (int) cpu_temp);
 #endif /* PROCESSOR_TEMPERATURE */
 	}
 /* #endif PROCESSOR_CPU_LOAD_INFO */
 
 #elif defined(KERNEL_LINUX)
 	int cpu;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/curl.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/curl.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/curl.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/curl.c	2012-11-18 06:23:21.000000000 +0800
@@ -367,21 +367,20 @@
   if (wp->curl == NULL)
   {
     ERROR ("curl plugin: curl_easy_init failed.");
     return (-1);
   }
 
-  curl_easy_setopt (wp->curl, CURLOPT_NOSIGNAL, 1L);
+  curl_easy_setopt (wp->curl, CURLOPT_NOSIGNAL, 1);
   curl_easy_setopt (wp->curl, CURLOPT_WRITEFUNCTION, cc_curl_callback);
   curl_easy_setopt (wp->curl, CURLOPT_WRITEDATA, wp);
   curl_easy_setopt (wp->curl, CURLOPT_USERAGENT,
       PACKAGE_NAME"/"PACKAGE_VERSION);
   curl_easy_setopt (wp->curl, CURLOPT_ERRORBUFFER, wp->curl_errbuf);
   curl_easy_setopt (wp->curl, CURLOPT_URL, wp->url);
-  curl_easy_setopt (wp->curl, CURLOPT_FOLLOWLOCATION, 1L);
-  curl_easy_setopt (wp->curl, CURLOPT_MAXREDIRS, 50L);
+  curl_easy_setopt (wp->curl, CURLOPT_FOLLOWLOCATION, 1);
 
   if (wp->user != NULL)
   {
     size_t credentials_size;
 
     credentials_size = strlen (wp->user) + 2;
@@ -397,15 +396,15 @@
 
     ssnprintf (wp->credentials, credentials_size, "%s:%s",
         wp->user, (wp->pass == NULL) ? "" : wp->pass);
     curl_easy_setopt (wp->curl, CURLOPT_USERPWD, wp->credentials);
   }
 
-  curl_easy_setopt (wp->curl, CURLOPT_SSL_VERIFYPEER, (long) wp->verify_peer);
+  curl_easy_setopt (wp->curl, CURLOPT_SSL_VERIFYPEER, wp->verify_peer);
   curl_easy_setopt (wp->curl, CURLOPT_SSL_VERIFYHOST,
-      wp->verify_host ? 2L : 0L);
+      wp->verify_host ? 2 : 0);
   if (wp->cacert != NULL)
     curl_easy_setopt (wp->curl, CURLOPT_CAINFO, wp->cacert);
 
   return (0);
 } /* }}} int cc_page_init_curl */
 
@@ -613,13 +612,13 @@
 
   if (wp->response_time)
     gettimeofday (&start, NULL);
 
   wp->buffer_fill = 0;
   status = curl_easy_perform (wp->curl);
-  if (status != CURLE_OK)
+  if (status != 0)
   {
     ERROR ("curl plugin: curl_easy_perform failed with staus %i: %s",
         status, wp->curl_errbuf);
     return (-1);
   }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/curl_json.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/curl_json.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/curl_json.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/curl_json.c	2012-11-18 06:23:21.000000000 +0800
@@ -108,15 +108,22 @@
     return (len);
 
   db = user_data;
   if (db == NULL)
     return (0);
 
-  status = yajl_parse(db->yajl, (unsigned char *)buf, len);
+  status = yajl_parse(db->yajl, (unsigned char *) buf, len);
   if (status == yajl_status_ok)
+  {
+#if HAVE_YAJL_V2
+    status = yajl_complete_parse(db->yajl);
+#else
+    status = yajl_parse_complete(db->yajl);
+#endif
     return (len);
+  }
 #if !HAVE_YAJL_V2
   else if (status == yajl_status_insufficient_data)
     return (len);
 #endif
 
   if (status != yajl_status_ok)
@@ -511,13 +518,13 @@
   if (db->curl == NULL)
   {
     ERROR ("curl_json plugin: curl_easy_init failed.");
     return (-1);
   }
 
-  curl_easy_setopt (db->curl, CURLOPT_NOSIGNAL, 1L);
+  curl_easy_setopt (db->curl, CURLOPT_NOSIGNAL, 1);
   curl_easy_setopt (db->curl, CURLOPT_WRITEFUNCTION, cj_curl_callback);
   curl_easy_setopt (db->curl, CURLOPT_WRITEDATA, db);
   curl_easy_setopt (db->curl, CURLOPT_USERAGENT,
                     PACKAGE_NAME"/"PACKAGE_VERSION);
   curl_easy_setopt (db->curl, CURLOPT_ERRORBUFFER, db->curl_errbuf);
   curl_easy_setopt (db->curl, CURLOPT_URL, db->url);
@@ -539,15 +546,15 @@
 
     ssnprintf (db->credentials, credentials_size, "%s:%s",
                db->user, (db->pass == NULL) ? "" : db->pass);
     curl_easy_setopt (db->curl, CURLOPT_USERPWD, db->credentials);
   }
 
-  curl_easy_setopt (db->curl, CURLOPT_SSL_VERIFYPEER, (long) db->verify_peer);
+  curl_easy_setopt (db->curl, CURLOPT_SSL_VERIFYPEER, (int) db->verify_peer);
   curl_easy_setopt (db->curl, CURLOPT_SSL_VERIFYHOST,
-                    db->verify_host ? 2L : 0L);
+                    (int) (db->verify_host ? 2 : 0));
   if (db->cacert != NULL)
     curl_easy_setopt (db->curl, CURLOPT_CAINFO, db->cacert);
 
   return (0);
 } /* }}} int cj_init_curl */
 
@@ -760,13 +767,13 @@
   }
 
   url = NULL;
   curl_easy_getinfo(curl, CURLINFO_EFFECTIVE_URL, &url);
 
   status = curl_easy_perform (curl);
-  if (status != CURLE_OK)
+  if (status != 0)
   {
     ERROR ("curl_json plugin: curl_easy_perform failed with status %i: %s (%s)",
            status, db->curl_errbuf, (url != NULL) ? url : "<null>");
     yajl_free (db->yajl);
     db->yajl = yprev;
     return (-1);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/curl_xml.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/curl_xml.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/curl_xml.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/curl_xml.c	2012-11-18 06:23:21.000000000 +0800
@@ -362,13 +362,13 @@
     if (instance_node_obj == NULL)
       return (-1); /* error is logged already */
 
     instance_node = instance_node_obj->nodesetval;
     tmp_size = (instance_node) ? instance_node->nodeNr : 0;
 
-    if (tmp_size <= 0)
+    if ( (tmp_size == 0) && (is_table) )
     {
       WARNING ("curl_xml plugin: "
           "relative xpath expression for 'InstanceFrom' \"%s\" doesn't match "
           "any of the nodes. Skipping the node.", xpath->instance);
       xmlXPathFreeObject (instance_node_obj);
       return (-1);
@@ -550,30 +550,31 @@
   long rc;
   char *ptr;
   char *url;
 
   db->buffer_fill = 0; 
   status = curl_easy_perform (curl);
-  if (status != CURLE_OK)
-  {
-    ERROR ("curl_xml plugin: curl_easy_perform failed with status %i: %s (%s)",
-           status, db->curl_errbuf, url);
-    return (-1);
-  }
 
   curl_easy_getinfo(curl, CURLINFO_EFFECTIVE_URL, &url);
   curl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &rc);
 
   /* The response code is zero if a non-HTTP transport was used. */
   if ((rc != 0) && (rc != 200))
   {
     ERROR ("curl_xml plugin: curl_easy_perform failed with response code %ld (%s)",
            rc, url);
     return (-1);
   }
 
+  if (status != 0)
+  {
+    ERROR ("curl_xml plugin: curl_easy_perform failed with status %i: %s (%s)",
+           status, db->curl_errbuf, url);
+    return (-1);
+  }
+
   ptr = db->buffer;
 
   status = cx_parse_stats_xml(BAD_CAST ptr, db);
   db->buffer_fill = 0;
 
   return status;
@@ -733,13 +734,13 @@
   if (db->curl == NULL)
   {
     ERROR ("curl_xml plugin: curl_easy_init failed.");
     return (-1);
   }
 
-  curl_easy_setopt (db->curl, CURLOPT_NOSIGNAL, 1L);
+  curl_easy_setopt (db->curl, CURLOPT_NOSIGNAL, 1);
   curl_easy_setopt (db->curl, CURLOPT_WRITEFUNCTION, cx_curl_callback);
   curl_easy_setopt (db->curl, CURLOPT_WRITEDATA, db);
   curl_easy_setopt (db->curl, CURLOPT_USERAGENT,
                     PACKAGE_NAME"/"PACKAGE_VERSION);
   curl_easy_setopt (db->curl, CURLOPT_ERRORBUFFER, db->curl_errbuf);
   curl_easy_setopt (db->curl, CURLOPT_URL, db->url);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/dbi.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/dbi.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/dbi.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/dbi.c	2012-11-18 06:23:21.000000000 +0800
@@ -190,12 +190,39 @@
  *     ...
  *     Query "plugin_instance0"
  *   </Database>
  * </Plugin>
  */
 
+static int cdbi_config_set_string (char **ret_string, /* {{{ */
+    oconfig_item_t *ci)
+{
+  char *string;
+
+  if ((ci->values_num != 1)
+      || (ci->values[0].type != OCONFIG_TYPE_STRING))
+  {
+    WARNING ("dbi plugin: The `%s' config option "
+        "needs exactly one string argument.", ci->key);
+    return (-1);
+  }
+
+  string = strdup (ci->values[0].value.string);
+  if (string == NULL)
+  {
+    ERROR ("dbi plugin: strdup failed.");
+    return (-1);
+  }
+
+  if (*ret_string != NULL)
+    free (*ret_string);
+  *ret_string = string;
+
+  return (0);
+} /* }}} int cdbi_config_set_string */
+
 static int cdbi_config_add_database_driver_option (cdbi_database_t *db, /* {{{ */
     oconfig_item_t *ci)
 {
   cdbi_driver_option_t *option;
 
   if ((ci->values_num != 2)
@@ -256,30 +283,30 @@
   {
     ERROR ("dbi plugin: malloc failed.");
     return (-1);
   }
   memset (db, 0, sizeof (*db));
 
-  status = cf_util_get_string (ci, &db->name);
+  status = cdbi_config_set_string (&db->name, ci);
   if (status != 0)
   {
     sfree (db);
     return (status);
   }
 
   /* Fill the `cdbi_database_t' structure.. */
   for (i = 0; i < ci->children_num; i++)
   {
     oconfig_item_t *child = ci->children + i;
 
     if (strcasecmp ("Driver", child->key) == 0)
-      status = cf_util_get_string (child, &db->driver);
+      status = cdbi_config_set_string (&db->driver, child);
     else if (strcasecmp ("DriverOption", child->key) == 0)
       status = cdbi_config_add_database_driver_option (db, child);
     else if (strcasecmp ("SelectDB", child->key) == 0)
-      status = cf_util_get_string (child, &db->select_db);
+      status = cdbi_config_set_string (&db->select_db, child);
     else if (strcasecmp ("Query", child->key) == 0)
       status = udb_query_pick_from_list (child, queries, queries_num,
           &db->queries, &db->queries_num);
     else
     {
       WARNING ("dbi plugin: Option `%s' not allowed here.", child->key);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/disk.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/disk.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/disk.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/disk.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/disk.c
- * Copyright (C) 2005-2010  Florian octo Forster
+ * Copyright (C) 2005-2012  Florian octo Forster
  * Copyright (C) 2009       Manuel Sanmartin
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
@@ -14,13 +14,13 @@
  *
  * You should have received a copy of the GNU General Public License along
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
- *   Florian octo Forster <octo at verplant.org>
+ *   Florian octo Forster <octo at collectd.org>
  *   Manuel Sanmartin
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
@@ -72,12 +72,15 @@
 # include <sys/protosw.h>
 # include <libperfstat.h>
 #endif
 
 #if HAVE_IOKIT_IOKITLIB_H
 static mach_port_t io_master_port = MACH_PORT_NULL;
+/* This defaults to false for backwards compatibility. Please fix in the next
+ * major version. */
+static _Bool use_bsd_name = 0;
 /* #endif HAVE_IOKIT_IOKITLIB_H */
 
 #elif KERNEL_LINUX
 typedef struct diskstats
 {
 	char *name;
@@ -125,12 +128,13 @@
 # error "No applicable input method."
 #endif
 
 static const char *config_keys[] =
 {
 	"Disk",
+	"UseBSDName",
 	"IgnoreSelected"
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
 static ignorelist_t *ignorelist = NULL;
 
@@ -149,12 +153,21 @@
   {
     int invert = 1;
     if (IS_TRUE (value))
       invert = 0;
     ignorelist_set_invert (ignorelist, invert);
   }
+  else if (strcasecmp ("UseBSDName", key) == 0)
+  {
+#if HAVE_IOKIT_IOKITLIB_H
+    use_bsd_name = IS_TRUE (value) ? 1 : 0;
+#else
+    WARNING ("disk plugin: The \"UseBSDName\" option is only supported "
+        "on Mach / Mac OS X and will be ignored.");
+#endif
+  }
   else
   {
     return (-1);
   }
 
   return (0);
@@ -235,14 +248,15 @@
 	plugin_dispatch_values (&vl);
 } /* void disk_submit */
 
 #if KERNEL_LINUX
 static counter_t disk_calc_time_incr (counter_t delta_time, counter_t delta_ops)
 {
+	double interval = CDTIME_T_TO_DOUBLE (plugin_get_interval ());
 	double avg_time = ((double) delta_time) / ((double) delta_ops);
-	double avg_time_incr = CDTIME_T_TO_DOUBLE (interval_g) * avg_time;
+	double avg_time_incr = interval * avg_time;
 
 	return ((counter_t) (avg_time_incr + .5));
 }
 #endif
 
 #if HAVE_IOKIT_IOKITLIB_H
@@ -288,24 +302,26 @@
 	io_registry_entry_t	disk;
 	io_registry_entry_t	disk_child;
 	io_iterator_t		disk_list;
 	CFDictionaryRef		props_dict;
 	CFDictionaryRef		stats_dict;
 	CFDictionaryRef		child_dict;
+	CFStringRef		tmp_cf_string_ref;
 	kern_return_t           status;
 
 	signed long long read_ops;
 	signed long long read_byt;
 	signed long long read_tme;
 	signed long long write_ops;
 	signed long long write_byt;
 	signed long long write_tme;
 
 	int  disk_major;
 	int  disk_minor;
-	char disk_name[64];
+	char disk_name[DATA_MAX_NAME_LEN];
+	char disk_name_bsd[DATA_MAX_NAME_LEN];
 
 	/* Get the list of all disk objects. */
 	if (IOServiceGetMatchingServices (io_master_port,
 				IOServiceMatching (kIOBlockStorageDriverClass),
 				&disk_list) != kIOReturnSuccess)
 	{
@@ -347,18 +363,47 @@
 			DEBUG ("IORegistryEntryCreateCFProperties (disk) failed.");
 			IOObjectRelease (disk_child);
 			IOObjectRelease (disk);
 			continue;
 		}
 
+		/* tmp_cf_string_ref doesn't need to be released. */
+		tmp_cf_string_ref = (CFStringRef) CFDictionaryGetValue (props_dict,
+				CFSTR(kIOBSDNameKey));
+		if (!tmp_cf_string_ref)
+		{
+			DEBUG ("disk plugin: CFDictionaryGetValue("
+					"kIOBSDNameKey) failed.");
+			CFRelease (props_dict);
+			IOObjectRelease (disk_child);
+			IOObjectRelease (disk);
+			continue;
+		}
+		assert (CFGetTypeID (tmp_cf_string_ref) == CFStringGetTypeID ());
+
+		memset (disk_name_bsd, 0, sizeof (disk_name_bsd));
+		CFStringGetCString (tmp_cf_string_ref,
+				disk_name_bsd, sizeof (disk_name_bsd),
+				kCFStringEncodingUTF8);
+		if (disk_name_bsd[0] == 0)
+		{
+			ERROR ("disk plugin: CFStringGetCString() failed.");
+			CFRelease (props_dict);
+			IOObjectRelease (disk_child);
+			IOObjectRelease (disk);
+			continue;
+		}
+		DEBUG ("disk plugin: disk_name_bsd = \"%s\"", disk_name_bsd);
+
 		stats_dict = (CFDictionaryRef) CFDictionaryGetValue (props_dict,
 				CFSTR (kIOBlockStorageDriverStatisticsKey));
 
 		if (stats_dict == NULL)
 		{
-			DEBUG ("CFDictionaryGetValue (%s) failed.",
+			DEBUG ("disk plugin: CFDictionaryGetValue ("
+					"%s) failed.",
 				       	kIOBlockStorageDriverStatisticsKey);
 			CFRelease (props_dict);
 			IOObjectRelease (disk_child);
 			IOObjectRelease (disk);
 			continue;
 		}
@@ -366,13 +411,14 @@
 		if (IORegistryEntryCreateCFProperties (disk_child,
 					(CFMutableDictionaryRef *) &child_dict,
 					kCFAllocatorDefault,
 					kNilOptions)
 				!= kIOReturnSuccess)
 		{
-			DEBUG ("IORegistryEntryCreateCFProperties (disk_child) failed.");
+			DEBUG ("disk plugin: IORegistryEntryCreateCFProperties ("
+					"disk_child) failed.");
 			IOObjectRelease (disk_child);
 			CFRelease (props_dict);
 			IOObjectRelease (disk);
 			continue;
 		}
 
@@ -396,23 +442,18 @@
 		 * instantiated. It is one of the statistic entries listed
 		 * under the top-level kIOBlockStorageDriverStatisticsKey
 		 * property table. It has an OSNumber value. */
 		write_tme = dict_get_value (stats_dict,
 				kIOBlockStorageDriverStatisticsTotalWriteTimeKey);
 
-		if (ssnprintf (disk_name, sizeof (disk_name),
-				"%i-%i", disk_major, disk_minor) >= sizeof (disk_name))
-		{
-			DEBUG ("snprintf (major, minor) failed.");
-			CFRelease (child_dict);
-			IOObjectRelease (disk_child);
-			CFRelease (props_dict);
-			IOObjectRelease (disk);
-			continue;
-		}
-		DEBUG ("disk_name = %s", disk_name);
+		if (use_bsd_name)
+			sstrncpy (disk_name, disk_name_bsd, sizeof (disk_name));
+		else
+			ssnprintf (disk_name, sizeof (disk_name), "%i-%i",
+					disk_major, disk_minor);
+		DEBUG ("disk plugin: disk_name = \"%s\"", disk_name);
 
 		if ((read_byt != -1LL) || (write_byt != -1LL))
 			disk_submit (disk_name, "disk_octets", read_byt, write_byt);
 		if ((read_ops != -1LL) || (write_ops != -1LL))
 			disk_submit (disk_name, "disk_ops", read_ops, write_ops);
 		if ((read_tme != -1LL) || (write_tme != -1LL))
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/dns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/dns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/dns.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/dns.c	2012-11-18 06:23:21.000000000 +0800
@@ -225,13 +225,13 @@
 
 	/* Passing `pcap_device == NULL' is okay and the same as passign "any" */
 	DEBUG ("dns plugin: Creating PCAP object..");
 	pcap_obj = pcap_open_live ((pcap_device != NULL) ? pcap_device : "any",
 			PCAP_SNAPLEN,
 			0 /* Not promiscuous */,
-			(int) CDTIME_T_TO_MS (interval_g / 2),
+			(int) CDTIME_T_TO_MS (plugin_get_interval () / 2),
 			pcap_error);
 	if (pcap_obj == NULL)
 	{
 		ERROR ("dns plugin: Opening interface `%s' "
 				"failed: %s",
 				(pcap_device != NULL) ? pcap_device : "any",
@@ -283,13 +283,13 @@
 	tr_responses = 0;
 	pthread_mutex_unlock (&traffic_mutex);
 
 	if (listen_thread_init != 0)
 		return (-1);
 
-	status = pthread_create (&listen_thread, NULL, dns_child_loop,
+	status = plugin_thread_create (&listen_thread, NULL, dns_child_loop,
 			(void *) 0);
 	if (status != 0)
 	{
 		char errbuf[1024];
 		ERROR ("dns plugin: pthread_create failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/email.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/email.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/email.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/email.c	2012-11-18 06:23:21.000000000 +0800
@@ -479,14 +479,14 @@
 			(collector_t **)smalloc (max_conns * sizeof (collector_t *));
 
 		for (i = 0; i < max_conns; ++i) {
 			collectors[i] = (collector_t *)smalloc (sizeof (collector_t));
 			collectors[i]->socket = NULL;
 
-			if (0 != (err = pthread_create (&collectors[i]->thread, &ptattr,
-							collect, collectors[i]))) {
+			if (0 != (err = plugin_thread_create (&collectors[i]->thread,
+							&ptattr, collect, collectors[i]))) {
 				char errbuf[1024];
 				log_err ("pthread_create() failed: %s",
 						sstrerror (errno, errbuf, sizeof (errbuf)));
 				collectors[i]->thread = (pthread_t) 0;
 			}
 		}
@@ -555,13 +555,13 @@
 } /* static void *open_connection (void *) */
 
 static int email_init (void)
 {
 	int err = 0;
 
-	if (0 != (err = pthread_create (&connector, NULL,
+	if (0 != (err = plugin_thread_create (&connector, NULL,
 				open_connection, NULL))) {
 		char errbuf[1024];
 		disabled = 1;
 		log_err ("pthread_create() failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		return (-1);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ethstat.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ethstat.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ethstat.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ethstat.c	2012-11-18 06:23:21.000000000 +0800
@@ -70,23 +70,22 @@
 
   status = cf_util_get_string (ci, interfaces + interfaces_num);
   if (status != 0)
     return (status);
 
   interfaces_num++;
-  INFO("ethstat plugin: Registered interface %s",
+  INFO("ethstat plugin: Registred interface %s",
       interfaces[interfaces_num - 1]);
 
   return (0);
 } /* }}} int ethstat_add_interface */
 
 static int ethstat_add_map (const oconfig_item_t *ci) /* {{{ */
 {
   value_map_t *map;
   int status;
-  char *key;
 
   if ((ci->values_num < 2)
       || (ci->values_num > 3)
       || (ci->values[0].type != OCONFIG_TYPE_STRING)
       || (ci->values[1].type != OCONFIG_TYPE_STRING)
       || ((ci->values_num == 3)
@@ -94,23 +93,15 @@
   {
     ERROR ("ethstat plugin: The %s option requires "
         "two or three string arguments.", ci->key);
     return (-1);
   }
 
-  key = strdup (ci->values[0].value.string);
-  if (key == NULL)
-  {
-    ERROR ("ethstat plugin: strdup(3) failed.");
-    return (ENOMEM);
-  }
-
   map = malloc (sizeof (*map));
   if (map == NULL)
   {
-    sfree (key);
     ERROR ("ethstat plugin: malloc(3) failed.");
     return (ENOMEM);
   }
   memset (map, 0, sizeof (*map));
 
   sstrncpy (map->type, ci->values[1].value.string, sizeof (map->type));
@@ -121,30 +112,29 @@
   if (value_map == NULL)
   {
     value_map = c_avl_create ((void *) strcmp);
     if (value_map == NULL)
     {
       sfree (map);
-      sfree (key);
       ERROR ("ethstat plugin: c_avl_create() failed.");
       return (-1);
     }
   }
 
   status = c_avl_insert (value_map,
-      /* key = */ key,
+      /* key = */ ci->values[0].value.string,
       /* value = */ map);
   if (status != 0)
   {
+    sfree (map);
     if (status > 0)
-      ERROR ("ethstat plugin: Multiple mappings for \"%s\".", key);
+      ERROR ("ethstat plugin: Multiple mappings for \"%s\".",
+          ci->values[0].value.string);
     else
-      ERROR ("ethstat plugin: c_avl_insert(\"%s\") failed.", key);
-
-    sfree (map);
-    sfree (key);
+      ERROR ("ethstat plugin: c_avl_insert(\"%s\") failed.",
+          ci->values[0].value.string);
     return (-1);
   }
 
   return (0);
 } /* }}} int ethstat_add_map */
 
@@ -335,34 +325,13 @@
   for (i = 0; i < interfaces_num; i++)
     ethstat_read_interface (interfaces[i]);
 
   return 0;
 }
 
-static int ethstat_shutdown (void)
-{
-  void *key = NULL;
-  void *value = NULL;
-
-  if (value_map == NULL)
-    return (0);
-
-  while (c_avl_pick (value_map, &key, &value) == 0)
-  {
-    sfree (key);
-    sfree (value);
-  }
-
-  c_avl_destroy (value_map);
-  value_map = NULL;
-
-  return (0);
-}
-
 void module_register (void)
 {
   plugin_register_complex_config ("ethstat", ethstat_config);
   plugin_register_read ("ethstat", ethstat_read);
-  plugin_register_shutdown ("ethstat", ethstat_shutdown);
 }
 
 /* vim: set sw=2 sts=2 et fdm=marker : */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/exec.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/exec.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/exec.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/exec.c	2012-11-18 06:23:21.000000000 +0800
@@ -267,20 +267,21 @@
 
 static void set_environment (void) /* {{{ */
 {
   char buffer[1024];
 
 #ifdef HAVE_SETENV
-  ssnprintf (buffer, sizeof (buffer), "%.3f", CDTIME_T_TO_DOUBLE (interval_g));
+  ssnprintf (buffer, sizeof (buffer), "%.3f",
+      CDTIME_T_TO_DOUBLE (plugin_get_interval ()));
   setenv ("COLLECTD_INTERVAL", buffer, /* overwrite = */ 1);
 
   ssnprintf (buffer, sizeof (buffer), "%s", hostname_g);
   setenv ("COLLECTD_HOSTNAME", buffer, /* overwrite = */ 1);
 #else
   ssnprintf (buffer, sizeof (buffer), "COLLECTD_INTERVAL=%.3f",
-      CDTIME_T_TO_DOUBLE (interval_g));
+      CDTIME_T_TO_DOUBLE (plugin_get_interval ()));
   putenv (buffer);
 
   ssnprintf (buffer, sizeof (buffer), "COLLECTD_HOSTNAME=%s", hostname_g);
   putenv (buffer);
 #endif
 } /* }}} void set_environment */
@@ -489,13 +490,13 @@
     if (fd_pipe_out[1] != STDOUT_FILENO)
     {
       dup2 (fd_pipe_out[1], STDOUT_FILENO);
       close (fd_pipe_out[1]);
     }
 
-    /* Now connect the `err' pipe to STDERR */
+    /* Now connect the `out' pipe to STDOUT */
     if (fd_pipe_err[1] != STDERR_FILENO)
     {
       dup2 (fd_pipe_err[1], STDERR_FILENO);
       close (fd_pipe_err[1]);
     }
 
@@ -823,13 +824,13 @@
     }
     pl->flags |= PL_RUNNING;
     pthread_mutex_unlock (&pl_lock);
 
     pthread_attr_init (&attr);
     pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
-    pthread_create (&t, &attr, exec_read_one, (void *) pl);
+    plugin_thread_create (&t, &attr, exec_read_one, (void *) pl);
     pthread_attr_destroy (&attr);
   } /* for (pl) */
 
   return (0);
 } /* int exec_read }}} */
 
@@ -867,13 +868,13 @@
      * will run into an endless loop. */
     pln->n.meta = NULL;
     plugin_notification_meta_copy (&pln->n, n);
 
     pthread_attr_init (&attr);
     pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
-    pthread_create (&t, &attr, exec_notification_one, (void *) pln);
+    plugin_thread_create (&t, &attr, exec_notification_one, (void *) pln);
     pthread_attr_destroy (&attr);
   } /* for (pl) */
 
   return (0);
 } /* }}} int exec_notification */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/filter_chain.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/filter_chain.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/filter_chain.c	2013-04-08 01:20:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/filter_chain.c	2012-11-18 06:23:21.000000000 +0800
@@ -89,13 +89,13 @@
     return;
 
   if (m->proc.destroy != NULL)
     (*m->proc.destroy) (&m->user_data);
   else if (m->user_data != NULL)
   {
-    ERROR ("Filter subsystem: fc_free_matches: There is user data, but no "
+    ERROR ("Filter sybsystem: fc_free_matches: There is user data, but no "
         "destroy functions has been specified. "
         "Memory will probably be lost!");
   }
 
   if (m->next != NULL)
     fc_free_matches (m->next);
@@ -109,13 +109,13 @@
     return;
 
   if (t->proc.destroy != NULL)
     (*t->proc.destroy) (&t->user_data);
   else if (t->user_data != NULL)
   {
-    ERROR ("Filter subsystem: fc_free_targets: There is user data, but no "
+    ERROR ("Filter sybsystem: fc_free_targets: There is user data, but no "
         "destroy functions has been specified. "
         "Memory will probably be lost!");
   }
 
   if (t->next != NULL)
     fc_free_targets (t->next);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/gmond.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/gmond.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/gmond.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/gmond.c	2012-11-18 06:23:21.000000000 +0800
@@ -876,13 +876,13 @@
 
   if (mc_receive_thread_running != 0)
     return (-1);
 
   mc_receive_thread_loop = 1;
 
-  status = pthread_create (&mc_receive_thread_id, /* attr = */ NULL,
+  status = plugin_thread_create (&mc_receive_thread_id, /* attr = */ NULL,
       mc_receive_thread, /* args = */ NULL);
   if (status != 0)
   {
     ERROR ("gmond plugin: Starting receive thread failed.");
     mc_receive_thread_loop = 0;
     return (-1);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ipmi.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ipmi.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ipmi.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ipmi.c	2012-11-18 06:23:21.000000000 +0800
@@ -661,18 +661,18 @@
 
 static int c_ipmi_init (void)
 {
   int status;
 
   /* Don't send `ADD' notifications during startup (~ 1 minute) */
-  time_t iv = CDTIME_T_TO_TIME_T (interval_g);
+  time_t iv = CDTIME_T_TO_TIME_T (plugin_get_interval ());
   c_ipmi_init_in_progress = 1 + (60 / iv);
 
   c_ipmi_active = 1;
 
-  status = pthread_create (&thread_id, /* attr = */ NULL, thread_main,
+  status = plugin_thread_create (&thread_id, /* attr = */ NULL, thread_main,
       /* user data = */ NULL);
   if (status != 0)
   {
     c_ipmi_active = 0;
     thread_id = (pthread_t) 0;
     ERROR ("ipmi plugin: pthread_create failed.");
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient/client.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient/client.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient/client.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient/client.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,36 +1,41 @@
 /**
  * libcollectdclient - src/libcollectdclient/client.c
- * Copyright (C) 2008  Florian octo Forster
+ * Copyright (C) 2008-2012  Florian octo Forster
  *
- * This program is free software; you can redistribute it and/or modify it
- * under the terms of the GNU General Public License as published by the
- * Free Software Foundation; only version 2 of the License is applicable.
+ * Permission is hereby granted, free of charge, to any person obtaining a
+ * copy of this software and associated documentation files (the "Software"),
+ * to deal in the Software without restriction, including without limitation
+ * the rights to use, copy, modify, merge, publish, distribute, sublicense,
+ * and/or sell copies of the Software, and to permit persons to whom the
+ * Software is furnished to do so, subject to the following conditions:
  *
- * This program is distributed in the hope that it will be useful, but
- * WITHOUT ANY WARRANTY; without even the implied warranty of
- * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
- * General Public License for more details.
+ * The above copyright notice and this permission notice shall be included in
+ * all copies or substantial portions of the Software.
  *
- * You should have received a copy of the GNU General Public License along
- * with this program; if not, write to the Free Software Foundation, Inc.,
- * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
+ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
+ * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
+ * DEALINGS IN THE SOFTWARE.
  *
  * Authors:
- *   Florian octo Forster <octo at verplant.org>
+ *   Florian octo Forster <octo at collectd.org>
  **/
 
 #if HAVE_CONFIG_H
 # include "config.h"
 #endif
 
 #if !defined(__GNUC__) || !__GNUC__
 # define __attribute__(x) /**/
 #endif
 
-#include "lcc_features.h"
+#include "collectd/lcc_features.h"
 
 #include <stdlib.h>
 #include <stdio.h>
 #include <unistd.h>
 #include <sys/types.h>
 #include <sys/socket.h>
@@ -38,13 +43,13 @@
 #include <string.h>
 #include <assert.h>
 #include <errno.h>
 #include <math.h>
 #include <netdb.h>
 
-#include "client.h"
+#include "collectd/client.h"
 
 /* NI_MAXHOST has been obsoleted by RFC 3493 which is a reason for SunOS 5.11
  * to no longer define it. We'll use the old, RFC 2553 value here. */
 #ifndef NI_MAXHOST
 # define NI_MAXHOST 1025
 #endif
@@ -225,59 +230,12 @@
       break;
     str[str_len - 1] = 0;
     str_len--;
   }
 } /* }}} void lcc_chomp */
 
-static int lcc_identifier_cmp (const void *a, const void *b)
-{
-  const lcc_identifier_t *ident_a, *ident_b;
-
-  int status;
-
-  ident_a = a;
-  ident_b = b;
-
-  status = strcasecmp (ident_a->host, ident_b->host);
-  if (status != 0)
-    return (status);
-
-  status = strcmp (ident_a->plugin, ident_b->plugin);
-  if (status != 0)
-    return (status);
-
-  if ((*ident_a->plugin_instance != '\0') || (*ident_b->plugin_instance != '\0'))
-  {
-    if (*ident_a->plugin_instance == '\0')
-      return (-1);
-    else if (*ident_b->plugin_instance == '\0')
-      return (1);
-
-    status = strcmp (ident_a->plugin_instance, ident_b->plugin_instance);
-    if (status != 0)
-      return (status);
-  }
-
-  status = strcmp (ident_a->type, ident_b->type);
-  if (status != 0)
-    return (status);
-
-  if ((*ident_a->type_instance != '\0') || (*ident_b->type_instance != '\0'))
-  {
-    if (*ident_a->type_instance == '\0')
-      return (-1);
-    else if (*ident_b->type_instance == '\0')
-      return (1);
-
-    status = strcmp (ident_a->type_instance, ident_b->type_instance);
-    if (status != 0)
-      return (status);
-  }
-  return (0);
-} /* }}} int lcc_identifier_cmp */
-
 static void lcc_response_free (lcc_response_t *res) /* {{{ */
 {
   size_t i;
 
   if (res == NULL)
     return;
@@ -806,17 +764,17 @@
   if (status != 0)
     return (status);
 
   SSTRCATF (command, "PUTVAL %s",
       lcc_strescape (ident_esc, ident_str, sizeof (ident_esc)));
 
-  if (vl->interval > 0)
-    SSTRCATF (command, " interval=%i", vl->interval);
+  if (vl->interval > 0.0)
+    SSTRCATF (command, " interval=%.3f", vl->interval);
 
-  if (vl->time > 0)
-    SSTRCATF (command, " %u", (unsigned int) vl->time);
+  if (vl->time > 0.0)
+    SSTRCATF (command, " %.3f", vl->time);
   else
     SSTRCAT (command, " N");
 
   for (i = 0; i < vl->values_len; i++)
   {
     if (vl->values_types[i] == LCC_TYPE_COUNTER)
@@ -1102,20 +1060,50 @@
     SSTRCPY (ident->type_instance, type_instance);
 
   free (string_copy);
   return (0);
 } /* }}} int lcc_string_to_identifier */
 
+int lcc_identifier_compare (const lcc_identifier_t *i0, /* {{{ */
+    const lcc_identifier_t *i1)
+{
+  int status;
+
+  if ((i0 == NULL) && (i1 == NULL))
+    return (0);
+  else if (i0 == NULL)
+    return (-1);
+  else if (i1 == NULL)
+    return (1);
+
+#define CMP_FIELD(f) do {         \
+  status = strcmp (i0->f, i1->f); \
+  if (status != 0)                \
+    return (status);              \
+} while (0);
+
+    CMP_FIELD (host);
+    CMP_FIELD (plugin);
+    CMP_FIELD (plugin_instance);
+    CMP_FIELD (type);
+    CMP_FIELD (type_instance);
+
+#undef CMP_FIELD
+
+    return (0);
+} /* }}} int lcc_identifier_compare */
+
 int lcc_sort_identifiers (lcc_connection_t *c, /* {{{ */
     lcc_identifier_t *idents, size_t idents_num)
 {
   if (idents == NULL)
   {
     lcc_set_errno (c, EINVAL);
     return (-1);
   }
 
-  qsort (idents, idents_num, sizeof (*idents), lcc_identifier_cmp);
+  qsort (idents, idents_num, sizeof (*idents),
+      (void *) lcc_identifier_compare);
   return (0);
 } /* }}} int lcc_sort_identifiers */
 
 /* vim: set sw=2 sts=2 et fdm=marker : */
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient: client.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient: collectd
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient: lcc_features.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient: lcc_features.h.in
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient/Makefile.am	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient/Makefile.am	2012-11-18 06:23:21.000000000 +0800
@@ -1,14 +1,21 @@
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
 if COMPILER_IS_GCC
 AM_CFLAGS = -Wall -Werror
 endif
 
-pkginclude_HEADERS = client.h lcc_features.h
+pkginclude_HEADERS = collectd/client.h collectd/network.h collectd/network_buffer.h collectd/lcc_features.h
 lib_LTLIBRARIES = libcollectdclient.la
 nodist_pkgconfig_DATA = libcollectdclient.pc
 
-BUILT_SOURCES = lcc_features.h
+BUILT_SOURCES = collectd/lcc_features.h
 
-libcollectdclient_la_SOURCES = client.c
-libcollectdclient_la_LDFLAGS = -version-info 0:0:0
+libcollectdclient_la_SOURCES = client.c network.c network_buffer.c
+libcollectdclient_la_CPPFLAGS = $(AM_CPPFLAGS)
+libcollectdclient_la_LDFLAGS = -version-info 1:0:0
+libcollectdclient_la_LIBADD = 
+if BUILD_WITH_LIBGCRYPT
+libcollectdclient_la_CPPFLAGS += $(GCRYPT_CPPFLAGS)
+libcollectdclient_la_LDFLAGS += $(GCRYPT_LDFLAGS)
+libcollectdclient_la_LIBADD += $(GCRYPT_LIBS)
+endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libcollectdclient/Makefile.in	2013-04-09 09:04:25.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient/Makefile.in	2012-11-18 06:23:38.000000000 +0800
@@ -33,23 +33,25 @@
 POST_INSTALL = :
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
+@BUILD_WITH_LIBGCRYPT_TRUE@am__append_1 = $(GCRYPT_CPPFLAGS)
+@BUILD_WITH_LIBGCRYPT_TRUE@am__append_2 = $(GCRYPT_LDFLAGS)
+@BUILD_WITH_LIBGCRYPT_TRUE@am__append_3 = $(GCRYPT_LIBS)
 subdir = src/libcollectdclient
 DIST_COMMON = $(pkginclude_HEADERS) $(srcdir)/Makefile.am \
-	$(srcdir)/Makefile.in $(srcdir)/lcc_features.h.in \
-	$(srcdir)/libcollectdclient.pc.in
+	$(srcdir)/Makefile.in $(srcdir)/libcollectdclient.pc.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 am__aclocal_m4_deps = $(top_srcdir)/configure.in
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
 mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = $(top_builddir)/src/config.h
-CONFIG_CLEAN_FILES = lcc_features.h libcollectdclient.pc
+CONFIG_CLEAN_FILES = libcollectdclient.pc
 CONFIG_CLEAN_VPATH_FILES =
 am__vpath_adj_setup = srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`;
 am__vpath_adj = case $$p in \
     $(srcdir)/*) f=`echo "$$p" | sed "s|^$$srcdirstrip/||"`;; \
     *) f=$$p;; \
   esac;
@@ -69,14 +71,18 @@
 am__base_list = \
   sed '$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;s/\n/ /g' | \
   sed '$$!N;$$!N;$$!N;$$!N;s/\n/ /g'
 am__installdirs = "$(DESTDIR)$(libdir)" "$(DESTDIR)$(pkgconfigdir)" \
 	"$(DESTDIR)$(pkgincludedir)"
 LTLIBRARIES = $(lib_LTLIBRARIES)
-libcollectdclient_la_LIBADD =
-am_libcollectdclient_la_OBJECTS = client.lo
+am__DEPENDENCIES_1 =
+@BUILD_WITH_LIBGCRYPT_TRUE@am__DEPENDENCIES_2 = $(am__DEPENDENCIES_1)
+libcollectdclient_la_DEPENDENCIES = $(am__DEPENDENCIES_2)
+am_libcollectdclient_la_OBJECTS = libcollectdclient_la-client.lo \
+	libcollectdclient_la-network.lo \
+	libcollectdclient_la-network_buffer.lo
 libcollectdclient_la_OBJECTS = $(am_libcollectdclient_la_OBJECTS)
 libcollectdclient_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(libcollectdclient_la_LDFLAGS) $(LDFLAGS) -o $@
 DEFAULT_INCLUDES = -I.@am__isrc@ -I$(top_builddir)/src
 depcomp =
@@ -266,14 +272,12 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
-PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
-PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
@@ -336,18 +340,20 @@
 target_alias = @target_alias@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
 AUTOMAKE_OPTIONS = foreign no-dependencies
 @COMPILER_IS_GCC_TRUE@AM_CFLAGS = -Wall -Werror
-pkginclude_HEADERS = client.h lcc_features.h
+pkginclude_HEADERS = collectd/client.h collectd/network.h collectd/network_buffer.h collectd/lcc_features.h
 lib_LTLIBRARIES = libcollectdclient.la
 nodist_pkgconfig_DATA = libcollectdclient.pc
-BUILT_SOURCES = lcc_features.h
-libcollectdclient_la_SOURCES = client.c
-libcollectdclient_la_LDFLAGS = -version-info 0:0:0
+BUILT_SOURCES = collectd/lcc_features.h
+libcollectdclient_la_SOURCES = client.c network.c network_buffer.c
+libcollectdclient_la_CPPFLAGS = $(AM_CPPFLAGS) $(am__append_1)
+libcollectdclient_la_LDFLAGS = -version-info 1:0:0 $(am__append_2)
+libcollectdclient_la_LIBADD = $(am__append_3)
 all: $(BUILT_SOURCES)
 	$(MAKE) $(AM_MAKEFLAGS) all-am
 
 .SUFFIXES:
 .SUFFIXES: .c .lo .o .obj
 $(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
@@ -377,14 +383,12 @@
 
 $(top_srcdir)/configure:  $(am__configure_deps)
 	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
 $(ACLOCAL_M4):  $(am__aclocal_m4_deps)
 	cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh
 $(am__aclocal_m4_deps):
-lcc_features.h: $(top_builddir)/config.status $(srcdir)/lcc_features.h.in
-	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
 libcollectdclient.pc: $(top_builddir)/config.status $(srcdir)/libcollectdclient.pc.in
 	cd $(top_builddir) && $(SHELL) ./config.status $(subdir)/$@
 install-libLTLIBRARIES: $(lib_LTLIBRARIES)
 	@$(NORMAL_INSTALL)
 	test -z "$(libdir)" || $(MKDIR_P) "$(DESTDIR)$(libdir)"
 	@list='$(lib_LTLIBRARIES)'; test -n "$(libdir)" || list=; \
@@ -430,12 +434,21 @@
 .c.obj:
 	$(COMPILE) -c `$(CYGPATH_W) '$<'`
 
 .c.lo:
 	$(LTCOMPILE) -c -o $@ $<
 
+libcollectdclient_la-client.lo: client.c
+	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcollectdclient_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o libcollectdclient_la-client.lo `test -f 'client.c' || echo '$(srcdir)/'`client.c
+
+libcollectdclient_la-network.lo: network.c
+	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcollectdclient_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o libcollectdclient_la-network.lo `test -f 'network.c' || echo '$(srcdir)/'`network.c
+
+libcollectdclient_la-network_buffer.lo: network_buffer.c
+	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(libcollectdclient_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o libcollectdclient_la-network_buffer.lo `test -f 'network_buffer.c' || echo '$(srcdir)/'`network_buffer.c
+
 mostlyclean-libtool:
 	-rm -f *.lo
 
 clean-libtool:
 	-rm -rf .libs _libs
 install-nodist_pkgconfigDATA: $(nodist_pkgconfig_DATA)
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient: network_buffer.c
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libcollectdclient: network.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/liboconfig/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/liboconfig/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/liboconfig/Makefile.in	2013-04-09 09:04:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/liboconfig/Makefile.in	2012-11-18 06:23:38.000000000 +0800
@@ -245,14 +245,12 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
-PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
-PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/liboconfig/parser.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/liboconfig/parser.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/liboconfig/parser.c	2013-04-09 09:05:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/liboconfig/parser.c	2012-11-18 06:24:51.000000000 +0800
@@ -379,24 +379,24 @@
       }									\
     while (YYID (0))
 
 #endif
 
 /* YYFINAL -- State number of the termination state.  */
-#define YYFINAL  22
+#define YYFINAL  24
 /* YYLAST -- Last index in YYTABLE.  */
-#define YYLAST   48
+#define YYLAST   46
 
 /* YYNTOKENS -- Number of terminals.  */
 #define YYNTOKENS  12
 /* YYNNTS -- Number of nonterminals.  */
 #define YYNNTS  12
 /* YYNRULES -- Number of rules.  */
-#define YYNRULES  21
+#define YYNRULES  23
 /* YYNRULES -- Number of states.  */
-#define YYNSTATES  36
+#define YYNSTATES  37
 
 /* YYTRANSLATE(YYLEX) -- Bison symbol number corresponding to YYLEX.  */
 #define YYUNDEFTOK  2
 #define YYMAXUTOK   266
 
 #define YYTRANSLATE(YYX)						\
@@ -437,33 +437,34 @@
 #if YYDEBUG
 /* YYPRHS[YYN] -- Index of the first RHS symbol of rule number YYN in
    YYRHS.  */
 static const yytype_uint8 yyprhs[] =
 {
        0,     0,     3,     5,     7,     9,    11,    13,    15,    18,
-      20,    22,    26,    31,    37,    43,    47,    49,    51,    53,
-      56,    58
+      20,    22,    26,    31,    37,    43,    47,    50,    52,    54,
+      56,    59,    61,    63
 };
 
 /* YYRHS -- A `-1'-separated list of the rules' RHS.  */
 static const yytype_int8 yyrhs[] =
 {
       23,     0,    -1,     6,    -1,     7,    -1,     3,    -1,     4,
       -1,     5,    -1,    13,    -1,    15,    14,    -1,    14,    -1,
        7,    -1,    16,    15,    11,    -1,     9,    16,    10,    11,
       -1,     9,    16,    15,    10,    11,    -1,     9,     8,    16,
-      10,    11,    -1,    18,    22,    19,    -1,    17,    -1,    20,
-      -1,    11,    -1,    22,    21,    -1,    21,    -1,    22,    -1
+      10,    11,    -1,    18,    22,    19,    -1,    18,    19,    -1,
+      17,    -1,    20,    -1,    11,    -1,    22,    21,    -1,    21,
+      -1,    22,    -1,    -1
 };
 
 /* YYRLINE[YYN] -- source line where rule number YYN was defined.  */
 static const yytype_uint8 yyrline[] =
 {
        0,    73,    73,    74,    78,    79,    80,    81,    85,    92,
-     101,   105,   115,   121,   131,   138,   154,   155,   156,   160,
-     170,   187
+     101,   105,   115,   121,   131,   138,   151,   167,   168,   169,
+     173,   183,   200,   208
 };
 #endif
 
 #if YYDEBUG || YYERROR_VERBOSE || YYTOKEN_TABLE
 /* YYTNAME[SYMBOL-NUM] -- String name of the symbol SYMBOL-NUM.
    First, the terminals, then, starting at YYNTOKENS, nonterminals.  */
@@ -488,91 +489,91 @@
 # endif
 
 /* YYR1[YYN] -- Symbol number of symbol that rule YYN derives.  */
 static const yytype_uint8 yyr1[] =
 {
        0,    12,    13,    13,    14,    14,    14,    14,    15,    15,
-      16,    17,    18,    18,    19,    20,    21,    21,    21,    22,
-      22,    23
+      16,    17,    18,    18,    19,    20,    20,    21,    21,    21,
+      22,    22,    23,    23
 };
 
 /* YYR2[YYN] -- Number of symbols composing right hand side of rule YYN.  */
 static const yytype_uint8 yyr2[] =
 {
        0,     2,     1,     1,     1,     1,     1,     1,     2,     1,
-       1,     3,     4,     5,     5,     3,     1,     1,     1,     2,
-       1,     1
+       1,     3,     4,     5,     5,     3,     2,     1,     1,     1,
+       2,     1,     1,     0
 };
 
 /* YYDEFACT[STATE-NAME] -- Default rule to reduce with in state
    STATE-NUM when YYTABLE doesn't specify something else to do.  Zero
    means the default is an error.  */
 static const yytype_uint8 yydefact[] =
 {
-       0,    10,     0,    18,     0,    16,     0,    17,    20,    21,
+      23,    10,     0,    19,     0,    17,     0,    18,    21,    22,
        0,     0,     4,     5,     6,     2,     3,     7,     9,     0,
-       0,    19,     1,     0,     0,    11,     8,     0,    15,    12,
-       0,     0,    13,     0,     0,    14
+       0,    16,     0,    20,     1,     0,     0,    11,     8,     0,
+      15,    12,     0,     0,    13,     0,    14
 };
 
 /* YYDEFGOTO[NTERM-NUM].  */
 static const yytype_int8 yydefgoto[] =
 {
-      -1,    17,    18,    19,     4,     5,     6,    28,     7,     8,
+      -1,    17,    18,    19,     4,     5,     6,    21,     7,     8,
        9,    10
 };
 
 /* YYPACT[STATE-NUM] -- Index in YYTABLE of the portion describing
    STATE-NUM.  */
-#define YYPACT_NINF -9
+#define YYPACT_NINF -12
 static const yytype_int8 yypact[] =
 {
-      36,    -9,     4,    -9,    35,    -9,    36,    -9,    -9,    36,
-       7,    10,    -9,    -9,    -9,    -9,    -9,    -9,    -9,    -1,
-      37,    -9,    -9,    11,    27,    -9,    -9,     1,    -9,    -9,
-      12,     4,    -9,     8,    15,    -9
+       0,   -12,     9,   -12,    33,   -12,    34,   -12,   -12,     0,
+      17,    16,   -12,   -12,   -12,   -12,   -12,   -12,   -12,    -1,
+       5,   -12,    34,   -12,   -12,    13,    25,   -12,   -12,     9,
+     -12,   -12,    14,    23,   -12,    31,   -12
 };
 
 /* YYPGOTO[NTERM-NUM].  */
 static const yytype_int8 yypgoto[] =
 {
-      -9,    -9,     0,    16,    -2,    -9,    -9,    -9,    -9,    -8,
-      22,    -9
+     -12,   -12,   -11,    35,    -2,   -12,   -12,    12,   -12,    -8,
+      38,   -12
 };
 
 /* YYTABLE[YYPACT[STATE-NUM]].  What to do in state STATE-NUM.  If
    positive, shift that token.  If negative, reduce the rule which
    number is the opposite.  If zero, do what YYDEFACT says.
    If YYTABLE_NINF, syntax error.  */
 #define YYTABLE_NINF -1
 static const yytype_uint8 yytable[] =
 {
-      11,    21,    12,    13,    14,    15,    16,    22,     1,    31,
-      25,     1,    21,    12,    13,    14,    15,    16,    34,    26,
-      23,     0,    29,    32,    26,    11,    35,    24,    20,    33,
-      12,    13,    14,    15,    16,     0,     0,    30,    12,    13,
-      14,    15,    16,     1,     1,     2,    27,     3,     3
+      11,    23,    12,    13,    14,    15,    16,     1,    28,     2,
+      27,     3,     1,    29,    23,    28,     1,    24,    11,    12,
+      13,    14,    15,    16,    31,    34,    25,    33,    12,    13,
+      14,    15,    16,    35,    30,    32,    12,    13,    14,    15,
+      16,     1,    36,    20,    22,     3,    26
 };
 
-static const yytype_int8 yycheck[] =
+static const yytype_uint8 yycheck[] =
 {
-       2,     9,     3,     4,     5,     6,     7,     0,     7,     8,
-      11,     7,    20,     3,     4,     5,     6,     7,    10,    19,
-      10,    -1,    11,    11,    24,    27,    11,    11,     6,    31,
-       3,     4,     5,     6,     7,    -1,    -1,    10,     3,     4,
-       5,     6,     7,     7,     7,     9,     9,    11,    11
+       2,     9,     3,     4,     5,     6,     7,     7,    19,     9,
+      11,    11,     7,     8,    22,    26,     7,     0,    20,     3,
+       4,     5,     6,     7,    11,    11,    10,    29,     3,     4,
+       5,     6,     7,    10,    22,    10,     3,     4,     5,     6,
+       7,     7,    11,     9,     6,    11,    11
 };
 
 /* YYSTOS[STATE-NUM] -- The (internal number of the) accessing
    symbol of state STATE-NUM.  */
 static const yytype_uint8 yystos[] =
 {
        0,     7,     9,    11,    16,    17,    18,    20,    21,    22,
       23,    16,     3,     4,     5,     6,     7,    13,    14,    15,
-      22,    21,     0,    10,    15,    11,    14,     9,    19,    11,
-      10,     8,    11,    16,    10,    11
+       9,    19,    22,    21,     0,    10,    15,    11,    14,     8,
+      19,    11,    10,    16,    11,    10,    11
 };
 
 #define yyerrok		(yyerrstatus = 0)
 #define yyclearin	(yychar = YYEMPTY)
 #define YYEMPTY		(-2)
 #define YYEOF		0
@@ -1513,49 +1514,67 @@
 	}
     break;
 
   case 16:
 
 /* Line 1455 of yacc.c  */
-#line 154 "parser.y"
-    {(yyval.ci) = (yyvsp[(1) - (1)].ci);}
+#line 152 "parser.y"
+    {
+	 if (strcmp ((yyvsp[(1) - (2)].ci).key, (yyvsp[(2) - (2)].string)) != 0)
+	 {
+		printf ("block_begin = %s; block_end = %s;\n", (yyvsp[(1) - (2)].ci).key, (yyvsp[(2) - (2)].string));
+		yyerror ("Block not closed..\n");
+		exit (1);
+	 }
+	 free ((yyvsp[(2) - (2)].string)); (yyvsp[(2) - (2)].string) = NULL;
+	 (yyval.ci) = (yyvsp[(1) - (2)].ci);
+	 (yyval.ci).children = NULL;
+	 (yyval.ci).children_num = 0;
+	}
     break;
 
   case 17:
 
 /* Line 1455 of yacc.c  */
-#line 155 "parser.y"
+#line 167 "parser.y"
     {(yyval.ci) = (yyvsp[(1) - (1)].ci);}
     break;
 
   case 18:
 
 /* Line 1455 of yacc.c  */
-#line 156 "parser.y"
-    {(yyval.ci).values_num = 0;}
+#line 168 "parser.y"
+    {(yyval.ci) = (yyvsp[(1) - (1)].ci);}
     break;
 
   case 19:
 
 /* Line 1455 of yacc.c  */
-#line 161 "parser.y"
+#line 169 "parser.y"
+    {(yyval.ci).values_num = 0;}
+    break;
+
+  case 20:
+
+/* Line 1455 of yacc.c  */
+#line 174 "parser.y"
     {
 	 (yyval.sl) = (yyvsp[(1) - (2)].sl);
 	 if (((yyvsp[(2) - (2)].ci).values_num > 0) || ((yyvsp[(2) - (2)].ci).children_num > 0))
 	 {
 		 (yyval.sl).statement_num++;
 		 (yyval.sl).statement = realloc ((yyval.sl).statement, (yyval.sl).statement_num * sizeof (oconfig_item_t));
 		 (yyval.sl).statement[(yyval.sl).statement_num-1] = (yyvsp[(2) - (2)].ci);
 	 }
 	}
     break;
 
-  case 20:
+  case 21:
 
 /* Line 1455 of yacc.c  */
-#line 171 "parser.y"
+#line 184 "parser.y"
     {
 	 if (((yyvsp[(1) - (1)].ci).values_num > 0) || ((yyvsp[(1) - (1)].ci).children_num > 0))
 	 {
 		 (yyval.sl).statement = malloc (sizeof (oconfig_item_t));
 		 (yyval.sl).statement[0] = (yyvsp[(1) - (1)].ci);
 		 (yyval.sl).statement_num = 1;
@@ -1565,28 +1584,40 @@
 	 	(yyval.sl).statement = NULL;
 		(yyval.sl).statement_num = 0;
 	 }
 	}
     break;
 
-  case 21:
+  case 22:
 
 /* Line 1455 of yacc.c  */
-#line 188 "parser.y"
+#line 201 "parser.y"
     {
 	 ci_root = malloc (sizeof (oconfig_item_t));
 	 memset (ci_root, '\0', sizeof (oconfig_item_t));
 	 ci_root->children = (yyvsp[(1) - (1)].sl).statement;
 	 ci_root->children_num = (yyvsp[(1) - (1)].sl).statement_num;
 	}
     break;
 
+  case 23:
+
+/* Line 1455 of yacc.c  */
+#line 208 "parser.y"
+    {
+	 ci_root = malloc (sizeof (oconfig_item_t));
+	 memset (ci_root, '\0', sizeof (oconfig_item_t));
+	 ci_root->children = NULL;
+	 ci_root->children_num = 0;
+	}
+    break;
+
 
 
 /* Line 1455 of yacc.c  */
-#line 1587 "parser.c"
+#line 1618 "parser.c"
       default: break;
     }
   YY_SYMBOL_PRINT ("-> $$ =", yyr1[yyn], &yyval, &yyloc);
 
   YYPOPSTACK (yylen);
   yylen = 0;
@@ -1792,13 +1823,13 @@
   return YYID (yyresult);
 }
 
 
 
 /* Line 1675 of yacc.c  */
-#line 196 "parser.y"
+#line 216 "parser.y"
 
 static int yyerror (const char *s)
 {
 	char *text;
 
 	if (*yytext == '\n')
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/liboconfig/parser.y /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/liboconfig/parser.y
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/liboconfig/parser.y	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/liboconfig/parser.y	2012-11-18 06:23:21.000000000 +0800
@@ -145,12 +145,25 @@
 	 }
 	 free ($3); $3 = NULL;
 	 $$ = $1;
 	 $$.children = $2.statement;
 	 $$.children_num = $2.statement_num;
 	}
+	| block_begin block_end
+	{
+	 if (strcmp ($1.key, $2) != 0)
+	 {
+		printf ("block_begin = %s; block_end = %s;\n", $1.key, $2);
+		yyerror ("Block not closed..\n");
+		exit (1);
+	 }
+	 free ($2); $2 = NULL;
+	 $$ = $1;
+	 $$.children = NULL;
+	 $$.children_num = 0;
+	}
 	;
 
 statement:
 	option		{$$ = $1;}
 	| block		{$$ = $1;}
 	| EOL		{$$.values_num = 0;}
@@ -188,12 +201,19 @@
 	{
 	 ci_root = malloc (sizeof (oconfig_item_t));
 	 memset (ci_root, '\0', sizeof (oconfig_item_t));
 	 ci_root->children = $1.statement;
 	 ci_root->children_num = $1.statement_num;
 	}
+	| /* epsilon */
+	{
+	 ci_root = malloc (sizeof (oconfig_item_t));
+	 memset (ci_root, '\0', sizeof (oconfig_item_t));
+	 ci_root->children = NULL;
+	 ci_root->children_num = 0;
+	}
 	;
 
 %%
 static int yyerror (const char *s)
 {
 	char *text;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libvirt.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libvirt.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/libvirt.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/libvirt.c	2012-11-18 06:23:21.000000000 +0800
@@ -88,19 +88,20 @@
 
 /* Actual list of network interfaces found on last refresh. */
 struct interface_device {
     virDomainPtr dom;           /* domain */
     char *path;                 /* name of interface device */
     char *address;              /* mac address of interface device */
+    char *number;               /* interface device number */
 };
 
 static struct interface_device *interface_devices = NULL;
 static int nr_interface_devices = 0;
 
 static void free_interface_devices (void);
-static int add_interface_device (virDomainPtr dom, const char *path, const char *address);
+static int add_interface_device (virDomainPtr dom, const char *path, const char *address, unsigned int number);
 
 /* HostnameFormat. */
 #define HF_MAX_FIELDS 3
 
 enum hf_field {
     hf_none = 0,
@@ -112,13 +113,14 @@
 static enum hf_field hostname_format[HF_MAX_FIELDS] =
     { hf_name };
 
 /* InterfaceFormat. */
 enum if_field {
     if_address,
-    if_name
+    if_name,
+    if_number
 };
 
 static enum if_field interface_format = if_name;
 
 /* Time that we last refreshed. */
 static time_t last_refresh = (time_t) 0;
@@ -136,14 +138,12 @@
 init_value_list (value_list_t *vl, virDomainPtr dom)
 {
     int i, n;
     const char *name;
     char uuid[VIR_UUID_STRING_BUFLEN];
 
-    vl->interval = interval_g;
-
     sstrncpy (vl->plugin, "libvirt", sizeof (vl->plugin));
 
     vl->host[0] = '\0';
 
     /* Construct the hostname field according to HostnameFormat. */
     for (i = 0; i < HF_MAX_FIELDS; ++i) {
@@ -345,12 +345,14 @@
 
     if (strcasecmp (key, "InterfaceFormat") == 0) {
         if (strcasecmp (value, "name") == 0)
             interface_format = if_name;
         else if (strcasecmp (value, "address") == 0)
             interface_format = if_address;
+        else if (strcasecmp (value, "number") == 0)
+            interface_format = if_number;
         else {
             ERROR ("unknown InterfaceFormat: %s", value);
             return -1;
         }
         return 0;
     }
@@ -464,16 +466,26 @@
                     block_devices[i].dom, block_devices[i].path);
     } /* for (nr_block_devices) */
 
     /* Get interface stats for each domain. */
     for (i = 0; i < nr_interface_devices; ++i) {
         struct _virDomainInterfaceStats stats;
-        char *display_name = interface_devices[i].path;
+        char *display_name = NULL;
+
 
-        if (interface_format == if_address)
-            display_name = interface_devices[i].address;
+        switch (interface_format) {
+            case if_address:
+                display_name = interface_devices[i].address;
+                break;
+            case if_number:
+                display_name = interface_devices[i].number;
+                break;
+            case if_name:
+            default:
+                display_name = interface_devices[i].path;
+        }
 
         if (virDomainInterfaceStats (interface_devices[i].dom,
                     interface_devices[i].path,
                     &stats, sizeof stats) != 0)
             continue;
 
@@ -641,13 +653,13 @@
 
                 if (il_interface_devices &&
                     (ignore_device_match (il_interface_devices, name, path) != 0 ||
                      ignore_device_match (il_interface_devices, name, address) != 0))
                     goto cont3;
 
-                add_interface_device (dom, path, address);
+                add_interface_device (dom, path, address, j+1);
                 cont3:
                     if (path) xmlFree (path);
                     if (address) xmlFree (address);
             }
 
         cont:
@@ -742,31 +754,37 @@
     int i;
 
     if (interface_devices) {
         for (i = 0; i < nr_interface_devices; ++i) {
             sfree (interface_devices[i].path);
             sfree (interface_devices[i].address);
+            sfree (interface_devices[i].number);
         }
         sfree (interface_devices);
     }
     interface_devices = NULL;
     nr_interface_devices = 0;
 }
 
 static int
-add_interface_device (virDomainPtr dom, const char *path, const char *address)
+add_interface_device (virDomainPtr dom, const char *path, const char *address, unsigned int number)
 {
     struct interface_device *new_ptr;
     int new_size = sizeof (interface_devices[0]) * (nr_interface_devices+1);
-    char *path_copy, *address_copy;
+    char *path_copy, *address_copy, number_string[15];
 
     path_copy = strdup (path);
     if (!path_copy) return -1;
 
     address_copy = strdup (address);
-    if (!address_copy) return -1;
+    if (!address_copy) {
+        sfree(path_copy);
+        return -1;
+    }
+
+    snprintf(number_string, sizeof (number_string), "interface-%u", number);
 
     if (interface_devices)
         new_ptr = realloc (interface_devices, new_size);
     else
         new_ptr = malloc (new_size);
 
@@ -776,12 +794,13 @@
         return -1;
     }
     interface_devices = new_ptr;
     interface_devices[nr_interface_devices].dom = dom;
     interface_devices[nr_interface_devices].path = path_copy;
     interface_devices[nr_interface_devices].address = address_copy;
+    interface_devices[nr_interface_devices].number = strdup(number_string);
     return nr_interface_devices++;
 }
 
 static int
 ignore_device_match (ignorelist_t *il, const char *domname, const char *devpath)
 {
@@ -822,14 +841,14 @@
 }
 
 void
 module_register (void)
 {
     plugin_register_config ("libvirt",
-	    lv_config,
-	    config_keys, NR_CONFIG_KEYS);
+    lv_config,
+    config_keys, NR_CONFIG_KEYS);
     plugin_register_init ("libvirt", lv_init);
     plugin_register_read ("libvirt", lv_read);
     plugin_register_shutdown ("libvirt", lv_shutdown);
 }
 
 /*
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/logfile.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/logfile.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/logfile.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/logfile.c	2012-11-18 06:23:21.000000000 +0800
@@ -78,13 +78,13 @@
 } /* int logfile_config (const char *, const char *) */
 
 static void logfile_print (const char *msg, int severity,
 	   	cdtime_t timestamp_time)
 {
 	FILE *fh;
-	_Bool do_close = 0;
+	int do_close = 0;
 	struct tm timestamp_tm;
 	char timestamp_str[64];
 	char level_str[16] = "";
 
 	if (print_severity)
 	{
@@ -148,17 +148,14 @@
 	{
 		if (print_timestamp)
 			fprintf (fh, "[%s] %s%s\n", timestamp_str, level_str, msg);
 		else
 			fprintf (fh, "%s%s\n", level_str, msg);
 
-		if (do_close) {
+		if (do_close != 0)
 			fclose (fh);
-		} else {
-			fflush(fh);
-		}
 	}
 
 	pthread_mutex_unlock (&file_lock);
 
 	return;
 } /* void logfile_print */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/Makefile.am	2013-04-09 09:03:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/Makefile.am	2012-11-18 06:23:21.000000000 +0800
@@ -15,13 +15,13 @@
 AM_CPPFLAGS += -DPIDFILE='"${localstatedir}/run/${PACKAGE_NAME}.pid"'
 endif
 AM_CPPFLAGS += -DPLUGINDIR='"${pkglibdir}"'
 AM_CPPFLAGS += -DPKGDATADIR='"${pkgdatadir}"'
 
 sbin_PROGRAMS = collectd collectdmon
-bin_PROGRAMS = collectd-nagios collectdctl
+bin_PROGRAMS = collectd-nagios collectdctl collectd-tg
 
 collectd_SOURCES = collectd.c collectd.h \
 		   common.c common.h \
 		   configfile.c configfile.h \
 		   filter_chain.c filter_chain.h \
 		   meta_data.c meta_data.h \
@@ -110,22 +110,45 @@
 if BUILD_AIX
 collectdctl_LDADD += -lm
 endif
 collectdctl_LDADD += libcollectdclient/libcollectdclient.la
 collectdctl_DEPENDENCIES = libcollectdclient/libcollectdclient.la
 
+collectd_tg_SOURCES = collectd-tg.c \
+		      utils_heap.c utils_heap.h
+collectd_tg_LDADD =
+if BUILD_WITH_LIBSOCKET
+collectd_tg_LDADD += -lsocket
+endif
+if BUILD_AIX
+collectd_tg_LDADD += -lm
+endif
+collectd_tg_LDADD += libcollectdclient/libcollectdclient.la
+collectd_tg_DEPENDENCIES = libcollectdclient/libcollectdclient.la
+
 
 pkglib_LTLIBRARIES = 
 
 BUILT_SOURCES = 
 CLEANFILES = 
 
+if BUILD_PLUGIN_AGGREGATION
+pkglib_LTLIBRARIES += aggregation.la
+aggregation_la_SOURCES = aggregation.c \
+                         utils_vl_lookup.c utils_vl_lookup.h
+aggregation_la_LDFLAGS = -module -avoid-version
+aggregation_la_LIBADD =
+collectd_LDADD += "-dlopen" aggregation.la
+collectd_DEPENDENCIES += aggregation.la
+endif
+
 if BUILD_PLUGIN_AMQP
 pkglib_LTLIBRARIES += amqp.la
 amqp_la_SOURCES = amqp.c \
 		  utils_cmd_putval.c utils_cmd_putval.h \
+		  utils_format_graphite.c utils_format_graphite.h \
 		  utils_format_json.c utils_format_json.h
 amqp_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBRABBITMQ_LDFLAGS)
 amqp_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBRABBITMQ_CPPFLAGS)
 amqp_la_LIBADD = $(BUILD_WITH_LIBRABBITMQ_LIBS)
 collectd_LDADD += "-dlopen" amqp.la
 collectd_DEPENDENCIES += amqp.la
@@ -209,12 +232,16 @@
 endif
 
 if BUILD_PLUGIN_CONTEXTSWITCH
 pkglib_LTLIBRARIES += contextswitch.la
 contextswitch_la_SOURCES = contextswitch.c
 contextswitch_la_LDFLAGS = -module -avoid-version
+contextswitch_la_LIBADD =
+if BUILD_WITH_PERFSTAT
+contextswitch_la_LIBADD += -lperfstat
+endif
 collectd_LDADD += "-dlopen" contextswitch.la
 collectd_DEPENDENCIES += contextswitch.la
 endif
 
 if BUILD_PLUGIN_CPU
 pkglib_LTLIBRARIES += cpu.la
@@ -858,12 +885,20 @@
 perl_la_LDFLAGS = -module -avoid-version \
 		$(PERL_LDFLAGS)
 collectd_LDADD += "-dlopen" perl.la
 collectd_DEPENDENCIES += perl.la
 endif
 
+if BUILD_PLUGIN_PF
+pkglib_LTLIBRARIES += pf.la
+pf_la_SOURCES = pf.c
+pf_la_LDFLAGS = -module -avoid-version
+collectd_LDADD += "-dlopen" pf.la
+collectd_DEPENDENCIES += pf.la
+endif
+
 if BUILD_PLUGIN_PINBA
 BUILT_SOURCES += pinba.pb-c.c pinba.pb-c.h
 CLEANFILES += pinba.pb-c.c pinba.pb-c.h
 pkglib_LTLIBRARIES += pinba.la
 pinba_la_SOURCES = pinba.c
 pinba_la_LDFLAGS = -module -avoid-version
@@ -1188,12 +1223,15 @@
 uptime_la_CFLAGS = $(AM_CFLAGS)
 uptime_la_LDFLAGS = -module -avoid-version
 uptime_la_LIBADD =
 if BUILD_WITH_LIBKSTAT
 uptime_la_LIBADD += -lkstat
 endif
+if BUILD_WITH_PERFSTAT
+uptime_la_LIBADD += -lperfstat
+endif
 collectd_LDADD += "-dlopen" uptime.la
 collectd_DEPENDENCIES += uptime.la
 endif
 
 if BUILD_PLUGIN_USERS
 pkglib_LTLIBRARIES += users.la
@@ -1253,12 +1291,13 @@
 collectd_DEPENDENCIES += wireless.la
 endif
 
 if BUILD_PLUGIN_WRITE_GRAPHITE
 pkglib_LTLIBRARIES += write_graphite.la
 write_graphite_la_SOURCES = write_graphite.c \
+                        utils_format_graphite.c utils_format_graphite.h \
 			utils_format_json.c utils_format_json.h
 write_graphite_la_LDFLAGS = -module -avoid-version
 collectd_LDADD += "-dlopen" write_graphite.la
 collectd_DEPENDENCIES += write_graphite.la
 endif
 
@@ -1368,13 +1407,13 @@
 	@if grep '\<POD ERRORS\>' $@ >/dev/null 2>&1; \
 	then \
 		echo "$@ has some POD errors!"; false; \
 	fi
 
 pinba.pb-c.c pinba.pb-c.h: pinba.proto
-	protoc-c -I$(srcdir) --c_out . $(srcdir)/pinba.proto
+	protoc-c --c_out . pinba.proto
 
 install-exec-hook:
 	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)
 	if test -e $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	then \
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf.pkg-orig; \
@@ -1387,6 +1426,19 @@
 		$(DESTDIR)$(pkgdatadir)/postgresql_default.conf;
 
 uninstall-hook:
 	rm -f $(DESTDIR)$(pkgdatadir)/types.db;
 	rm -f $(DESTDIR)$(sysconfdir)/collectd.conf
 	rm -f $(DESTDIR)$(pkgdatadir)/postgresql_default.conf;
+
+if BUILD_FEATURE_DEBUG
+bin_PROGRAMS += utils_vl_lookup_test
+utils_vl_lookup_test_SOURCES = utils_vl_lookup_test.c \
+                               utils_vl_lookup.h utils_vl_lookup.c \
+                               utils_avltree.c utils_avltree.h \
+                               common.h
+
+utils_vl_lookup_test_CPPFLAGS =  $(AM_CPPFLAGS) $(LTDLINCL) -DBUILD_TEST=1
+utils_vl_lookup_test_CFLAGS = $(AM_CFLAGS)
+utils_vl_lookup_test_LDFLAGS = -export-dynamic
+utils_vl_lookup_test_LDADD =
+endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/Makefile.in	2013-04-09 09:04:25.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/Makefile.in	2012-11-18 06:23:38.000000000 +0800
@@ -35,13 +35,14 @@
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
 @BUILD_WITH_OWN_LIBOCONFIG_TRUE@am__append_1 = liboconfig
 @BUILD_FEATURE_DAEMON_TRUE@am__append_2 = -DPIDFILE='"${localstatedir}/run/${PACKAGE_NAME}.pid"'
 sbin_PROGRAMS = collectd$(EXEEXT) collectdmon$(EXEEXT)
-bin_PROGRAMS = collectd-nagios$(EXEEXT) collectdctl$(EXEEXT)
+bin_PROGRAMS = collectd-nagios$(EXEEXT) collectdctl$(EXEEXT) \
+	collectd-tg$(EXEEXT) $(am__EXEEXT_1)
 
 # Link to these libraries..
 @BUILD_WITH_LIBRT_TRUE@am__append_3 = -lrt
 @BUILD_WITH_LIBPOSIX4_TRUE@am__append_4 = -lposix4
 @BUILD_WITH_LIBSOCKET_TRUE@am__append_5 = -lsocket
 @BUILD_WITH_LIBRESOLV_TRUE@am__append_6 = -lresolv
@@ -58,410 +59,421 @@
 @BUILD_WITH_OWN_LIBOCONFIG_TRUE@am__append_14 = liboconfig/liboconfig.la
 @BUILD_WITH_OWN_LIBOCONFIG_FALSE@am__append_15 = -loconfig
 @BUILD_WITH_LIBSOCKET_TRUE@am__append_16 = -lsocket
 @BUILD_AIX_TRUE@am__append_17 = -lm
 @BUILD_WITH_LIBSOCKET_TRUE@am__append_18 = -lsocket
 @BUILD_AIX_TRUE@am__append_19 = -lm
-@BUILD_PLUGIN_AMQP_TRUE@am__append_20 = amqp.la
-@BUILD_PLUGIN_AMQP_TRUE@am__append_21 = "-dlopen" amqp.la
-@BUILD_PLUGIN_AMQP_TRUE@am__append_22 = amqp.la
-@BUILD_PLUGIN_APACHE_TRUE@am__append_23 = apache.la
-@BUILD_PLUGIN_APACHE_TRUE@am__append_24 = "-dlopen" apache.la
-@BUILD_PLUGIN_APACHE_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_25 = $(BUILD_WITH_LIBCURL_CFLAGS)
-@BUILD_PLUGIN_APACHE_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_26 = $(BUILD_WITH_LIBCURL_LIBS)
-@BUILD_PLUGIN_APACHE_TRUE@am__append_27 = apache.la
-@BUILD_PLUGIN_APCUPS_TRUE@am__append_28 = apcups.la
-@BUILD_PLUGIN_APCUPS_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_29 = -lsocket
-@BUILD_PLUGIN_APCUPS_TRUE@am__append_30 = "-dlopen" apcups.la
-@BUILD_PLUGIN_APCUPS_TRUE@am__append_31 = apcups.la
-@BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_32 = apple_sensors.la
-@BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_33 = "-dlopen" apple_sensors.la
-@BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_34 = apple_sensors.la
-@BUILD_PLUGIN_ASCENT_TRUE@am__append_35 = ascent.la
-@BUILD_PLUGIN_ASCENT_TRUE@am__append_36 = "-dlopen" ascent.la
-@BUILD_PLUGIN_ASCENT_TRUE@am__append_37 = ascent.la
-@BUILD_PLUGIN_BATTERY_TRUE@am__append_38 = battery.la
-@BUILD_PLUGIN_BATTERY_TRUE@@BUILD_WITH_LIBIOKIT_TRUE@am__append_39 = -lIOKit
-@BUILD_PLUGIN_BATTERY_TRUE@am__append_40 = "-dlopen" battery.la
-@BUILD_PLUGIN_BATTERY_TRUE@am__append_41 = battery.la
-@BUILD_PLUGIN_BIND_TRUE@am__append_42 = bind.la
-@BUILD_PLUGIN_BIND_TRUE@am__append_43 = "-dlopen" bind.la
-@BUILD_PLUGIN_BIND_TRUE@am__append_44 = bind.la
-@BUILD_PLUGIN_CONNTRACK_TRUE@am__append_45 = conntrack.la
-@BUILD_PLUGIN_CONNTRACK_TRUE@am__append_46 = "-dlopen" conntrack.la
-@BUILD_PLUGIN_CONNTRACK_TRUE@am__append_47 = conntrack.la
-@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@am__append_48 = contextswitch.la
-@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@am__append_49 = "-dlopen" contextswitch.la
-@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@am__append_50 = contextswitch.la
-@BUILD_PLUGIN_CPU_TRUE@am__append_51 = cpu.la
-@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_52 = -lkstat
-@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_53 = -ldevinfo
-@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_54 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_55 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_56 = -lperfstat
-@BUILD_PLUGIN_CPU_TRUE@am__append_57 = "-dlopen" cpu.la
-@BUILD_PLUGIN_CPU_TRUE@am__append_58 = cpu.la
-@BUILD_PLUGIN_CPUFREQ_TRUE@am__append_59 = cpufreq.la
-@BUILD_PLUGIN_CPUFREQ_TRUE@am__append_60 = "-dlopen" cpufreq.la
-@BUILD_PLUGIN_CPUFREQ_TRUE@am__append_61 = cpufreq.la
-@BUILD_PLUGIN_CSV_TRUE@am__append_62 = csv.la
-@BUILD_PLUGIN_CSV_TRUE@am__append_63 = "-dlopen" csv.la
-@BUILD_PLUGIN_CSV_TRUE@am__append_64 = csv.la
-@BUILD_PLUGIN_CURL_TRUE@am__append_65 = curl.la
-@BUILD_PLUGIN_CURL_TRUE@am__append_66 = "-dlopen" curl.la
-@BUILD_PLUGIN_CURL_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_67 = $(BUILD_WITH_LIBCURL_CFLAGS)
-@BUILD_PLUGIN_CURL_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_68 = $(BUILD_WITH_LIBCURL_LIBS)
-@BUILD_PLUGIN_CURL_TRUE@am__append_69 = curl.la
-@BUILD_PLUGIN_CURL_JSON_TRUE@am__append_70 = curl_json.la
-@BUILD_PLUGIN_CURL_JSON_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_71 = $(BUILD_WITH_LIBCURL_CFLAGS)
-@BUILD_PLUGIN_CURL_JSON_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_72 = $(BUILD_WITH_LIBCURL_LIBS)
-@BUILD_PLUGIN_CURL_JSON_TRUE@am__append_73 = "-dlopen" curl_json.la
-@BUILD_PLUGIN_CURL_JSON_TRUE@am__append_74 = curl_json.la
-@BUILD_PLUGIN_CURL_XML_TRUE@am__append_75 = curl_xml.la
-@BUILD_PLUGIN_CURL_XML_TRUE@am__append_76 = "-dlopen" curl_xml.la
-@BUILD_PLUGIN_CURL_XML_TRUE@am__append_77 = curl_xml.la
-@BUILD_PLUGIN_DBI_TRUE@am__append_78 = dbi.la
-@BUILD_PLUGIN_DBI_TRUE@am__append_79 = "-dlopen" dbi.la
-@BUILD_PLUGIN_DBI_TRUE@am__append_80 = dbi.la
-@BUILD_PLUGIN_DF_TRUE@am__append_81 = df.la
-@BUILD_PLUGIN_DF_TRUE@am__append_82 = "-dlopen" df.la
-@BUILD_PLUGIN_DF_TRUE@am__append_83 = df.la
-@BUILD_PLUGIN_DISK_TRUE@am__append_84 = disk.la
-@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_85 = -lkstat
-@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_86 = -ldevinfo
-@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBIOKIT_TRUE@am__append_87 = -lIOKit
-@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_88 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)  
-@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_89 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_90 = -lperfstat
-@BUILD_PLUGIN_DISK_TRUE@am__append_91 = "-dlopen" disk.la
-@BUILD_PLUGIN_DISK_TRUE@am__append_92 = disk.la
-@BUILD_PLUGIN_DNS_TRUE@am__append_93 = dns.la
-@BUILD_PLUGIN_DNS_TRUE@am__append_94 = "-dlopen" dns.la
-@BUILD_PLUGIN_DNS_TRUE@am__append_95 = dns.la
-@BUILD_PLUGIN_EMAIL_TRUE@am__append_96 = email.la
-@BUILD_PLUGIN_EMAIL_TRUE@am__append_97 = "-dlopen" email.la
-@BUILD_PLUGIN_EMAIL_TRUE@am__append_98 = email.la
-@BUILD_PLUGIN_ENTROPY_TRUE@am__append_99 = entropy.la
-@BUILD_PLUGIN_ENTROPY_TRUE@am__append_100 = "-dlopen" entropy.la
-@BUILD_PLUGIN_ENTROPY_TRUE@am__append_101 = entropy.la
-@BUILD_PLUGIN_EXEC_TRUE@am__append_102 = exec.la
-@BUILD_PLUGIN_EXEC_TRUE@am__append_103 = "-dlopen" exec.la
-@BUILD_PLUGIN_EXEC_TRUE@am__append_104 = exec.la
-@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_105 = ethstat.la
-@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_106 = "-dlopen" ethstat.la
-@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_107 = ethstat.la
-@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_108 = filecount.la
-@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_109 = "-dlopen" filecount.la
-@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_110 = filecount.la
-@BUILD_PLUGIN_GMOND_TRUE@am__append_111 = gmond.la
-@BUILD_PLUGIN_GMOND_TRUE@am__append_112 = "-dlopen" gmond.la
-@BUILD_PLUGIN_GMOND_TRUE@am__append_113 = gmond.la
-@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_114 = hddtemp.la
-@BUILD_PLUGIN_HDDTEMP_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_115 = -lsocket
-@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_116 = "-dlopen" hddtemp.la
-@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_117 = hddtemp.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_118 = interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_119 = "-dlopen" interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_120 = interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_121 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_122 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_123 = -lkstat
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_124 = -ldevinfo
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_125 = -lperfstat
-@BUILD_PLUGIN_IPTABLES_TRUE@am__append_126 = iptables.la
-@BUILD_PLUGIN_IPTABLES_TRUE@am__append_127 = "-dlopen" iptables.la
-@BUILD_PLUGIN_IPTABLES_TRUE@am__append_128 = iptables.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_129 = ipmi.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_130 = "-dlopen" ipmi.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_131 = ipmi.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_132 = ipvs.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_133 = "-dlopen" ipvs.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_134 = ipvs.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_135 = irq.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_136 = "-dlopen" irq.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_137 = irq.la
-@BUILD_PLUGIN_JAVA_TRUE@am__append_138 = java.la
-@BUILD_PLUGIN_JAVA_TRUE@am__append_139 = "-dlopen" java.la
-@BUILD_PLUGIN_JAVA_TRUE@am__append_140 = java.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_141 = libvirt.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_142 = "-dlopen" libvirt.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_143 = libvirt.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_144 = load.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_145 = "-dlopen" load.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_146 = load.la
-@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_147 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_148 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_149 = -lperfstat
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_150 = logfile.la
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_151 = "-dlopen" logfile.la
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_152 = logfile.la
-@BUILD_PLUGIN_LPAR_TRUE@am__append_153 = lpar.la
-@BUILD_PLUGIN_LPAR_TRUE@am__append_154 = "-dlopen" lpar.la
-@BUILD_PLUGIN_LPAR_TRUE@am__append_155 = lpar.la
-@BUILD_PLUGIN_MADWIFI_TRUE@am__append_156 = madwifi.la
-@BUILD_PLUGIN_MADWIFI_TRUE@am__append_157 = "-dlopen" madwifi.la
-@BUILD_PLUGIN_MADWIFI_TRUE@am__append_158 = madwifi.la
-@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_159 = match_empty_counter.la
-@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_160 = "-dlopen" match_empty_counter.la
-@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_161 = match_empty_counter.la
-@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_162 = match_hashed.la
-@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_163 = "-dlopen" match_hashed.la
-@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_164 = match_hashed.la
-@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_165 = match_regex.la
-@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_166 = "-dlopen" match_regex.la
-@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_167 = match_regex.la
-@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_168 = match_timediff.la
-@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_169 = "-dlopen" match_timediff.la
-@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_170 = match_timediff.la
-@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_171 = match_value.la
-@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_172 = "-dlopen" match_value.la
-@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_173 = match_value.la
-@BUILD_PLUGIN_MBMON_TRUE@am__append_174 = mbmon.la
-@BUILD_PLUGIN_MBMON_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_175 = -lsocket
-@BUILD_PLUGIN_MBMON_TRUE@am__append_176 = "-dlopen" mbmon.la
-@BUILD_PLUGIN_MBMON_TRUE@am__append_177 = mbmon.la
-@BUILD_PLUGIN_MD_TRUE@am__append_178 = md.la
-@BUILD_PLUGIN_MD_TRUE@am__append_179 = "-dlopen" md.la
-@BUILD_PLUGIN_MD_TRUE@am__append_180 = md.la
-@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_181 = memcachec.la
-@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_182 = "-dlopen" memcachec.la
-@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_183 = memcachec.la
-@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_184 = memcached.la
-@BUILD_PLUGIN_MEMCACHED_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_185 = -lsocket
-@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_186 = "-dlopen" memcached.la
-@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_187 = memcached.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_188 = memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_189 = "-dlopen" memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_190 = memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_191 = -lkstat
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_192 = -ldevinfo
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_193 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_194 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_195 = -lperfstat
-@BUILD_PLUGIN_MODBUS_TRUE@am__append_196 = modbus.la
-@BUILD_PLUGIN_MODBUS_TRUE@am__append_197 = "-dlopen" modbus.la
-@BUILD_PLUGIN_MODBUS_TRUE@am__append_198 = modbus.la
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_199 = multimeter.la
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_200 = "-dlopen" multimeter.la
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_201 = multimeter.la
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_202 = mysql.la
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_203 = "-dlopen" mysql.la
-@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_204 = $(BUILD_WITH_LIBMYSQL_CFLAGS)
-@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_205 = $(BUILD_WITH_LIBMYSQL_LIBS)
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_206 = mysql.la
-@BUILD_PLUGIN_NETAPP_TRUE@am__append_207 = netapp.la
-@BUILD_PLUGIN_NETAPP_TRUE@am__append_208 = "-dlopen" netapp.la
-@BUILD_PLUGIN_NETAPP_TRUE@am__append_209 = netapp.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_210 = netlink.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_211 = "-dlopen" netlink.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_212 = netlink.la
-@BUILD_PLUGIN_NETWORK_TRUE@am__append_213 = network.la
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_214 = -lsocket
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_215 = $(GCRYPT_CPPFLAGS)
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_216 = $(GCRYPT_LDFLAGS)
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_217 = $(GCRYPT_LIBS)
-@BUILD_PLUGIN_NETWORK_TRUE@am__append_218 = "-dlopen" network.la
+@BUILD_WITH_LIBSOCKET_TRUE@am__append_20 = -lsocket
+@BUILD_AIX_TRUE@am__append_21 = -lm
+@BUILD_PLUGIN_AGGREGATION_TRUE@am__append_22 = aggregation.la
+@BUILD_PLUGIN_AGGREGATION_TRUE@am__append_23 = "-dlopen" aggregation.la
+@BUILD_PLUGIN_AGGREGATION_TRUE@am__append_24 = aggregation.la
+@BUILD_PLUGIN_AMQP_TRUE@am__append_25 = amqp.la
+@BUILD_PLUGIN_AMQP_TRUE@am__append_26 = "-dlopen" amqp.la
+@BUILD_PLUGIN_AMQP_TRUE@am__append_27 = amqp.la
+@BUILD_PLUGIN_APACHE_TRUE@am__append_28 = apache.la
+@BUILD_PLUGIN_APACHE_TRUE@am__append_29 = "-dlopen" apache.la
+@BUILD_PLUGIN_APACHE_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_30 = $(BUILD_WITH_LIBCURL_CFLAGS)
+@BUILD_PLUGIN_APACHE_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_31 = $(BUILD_WITH_LIBCURL_LIBS)
+@BUILD_PLUGIN_APACHE_TRUE@am__append_32 = apache.la
+@BUILD_PLUGIN_APCUPS_TRUE@am__append_33 = apcups.la
+@BUILD_PLUGIN_APCUPS_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_34 = -lsocket
+@BUILD_PLUGIN_APCUPS_TRUE@am__append_35 = "-dlopen" apcups.la
+@BUILD_PLUGIN_APCUPS_TRUE@am__append_36 = apcups.la
+@BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_37 = apple_sensors.la
+@BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_38 = "-dlopen" apple_sensors.la
+@BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_39 = apple_sensors.la
+@BUILD_PLUGIN_ASCENT_TRUE@am__append_40 = ascent.la
+@BUILD_PLUGIN_ASCENT_TRUE@am__append_41 = "-dlopen" ascent.la
+@BUILD_PLUGIN_ASCENT_TRUE@am__append_42 = ascent.la
+@BUILD_PLUGIN_BATTERY_TRUE@am__append_43 = battery.la
+@BUILD_PLUGIN_BATTERY_TRUE@@BUILD_WITH_LIBIOKIT_TRUE@am__append_44 = -lIOKit
+@BUILD_PLUGIN_BATTERY_TRUE@am__append_45 = "-dlopen" battery.la
+@BUILD_PLUGIN_BATTERY_TRUE@am__append_46 = battery.la
+@BUILD_PLUGIN_BIND_TRUE@am__append_47 = bind.la
+@BUILD_PLUGIN_BIND_TRUE@am__append_48 = "-dlopen" bind.la
+@BUILD_PLUGIN_BIND_TRUE@am__append_49 = bind.la
+@BUILD_PLUGIN_CONNTRACK_TRUE@am__append_50 = conntrack.la
+@BUILD_PLUGIN_CONNTRACK_TRUE@am__append_51 = "-dlopen" conntrack.la
+@BUILD_PLUGIN_CONNTRACK_TRUE@am__append_52 = conntrack.la
+@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@am__append_53 = contextswitch.la
+@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_54 = -lperfstat
+@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@am__append_55 = "-dlopen" contextswitch.la
+@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@am__append_56 = contextswitch.la
+@BUILD_PLUGIN_CPU_TRUE@am__append_57 = cpu.la
+@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_58 = -lkstat
+@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_59 = -ldevinfo
+@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_60 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_61 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_CPU_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_62 = -lperfstat
+@BUILD_PLUGIN_CPU_TRUE@am__append_63 = "-dlopen" cpu.la
+@BUILD_PLUGIN_CPU_TRUE@am__append_64 = cpu.la
+@BUILD_PLUGIN_CPUFREQ_TRUE@am__append_65 = cpufreq.la
+@BUILD_PLUGIN_CPUFREQ_TRUE@am__append_66 = "-dlopen" cpufreq.la
+@BUILD_PLUGIN_CPUFREQ_TRUE@am__append_67 = cpufreq.la
+@BUILD_PLUGIN_CSV_TRUE@am__append_68 = csv.la
+@BUILD_PLUGIN_CSV_TRUE@am__append_69 = "-dlopen" csv.la
+@BUILD_PLUGIN_CSV_TRUE@am__append_70 = csv.la
+@BUILD_PLUGIN_CURL_TRUE@am__append_71 = curl.la
+@BUILD_PLUGIN_CURL_TRUE@am__append_72 = "-dlopen" curl.la
+@BUILD_PLUGIN_CURL_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_73 = $(BUILD_WITH_LIBCURL_CFLAGS)
+@BUILD_PLUGIN_CURL_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_74 = $(BUILD_WITH_LIBCURL_LIBS)
+@BUILD_PLUGIN_CURL_TRUE@am__append_75 = curl.la
+@BUILD_PLUGIN_CURL_JSON_TRUE@am__append_76 = curl_json.la
+@BUILD_PLUGIN_CURL_JSON_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_77 = $(BUILD_WITH_LIBCURL_CFLAGS)
+@BUILD_PLUGIN_CURL_JSON_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_78 = $(BUILD_WITH_LIBCURL_LIBS)
+@BUILD_PLUGIN_CURL_JSON_TRUE@am__append_79 = "-dlopen" curl_json.la
+@BUILD_PLUGIN_CURL_JSON_TRUE@am__append_80 = curl_json.la
+@BUILD_PLUGIN_CURL_XML_TRUE@am__append_81 = curl_xml.la
+@BUILD_PLUGIN_CURL_XML_TRUE@am__append_82 = "-dlopen" curl_xml.la
+@BUILD_PLUGIN_CURL_XML_TRUE@am__append_83 = curl_xml.la
+@BUILD_PLUGIN_DBI_TRUE@am__append_84 = dbi.la
+@BUILD_PLUGIN_DBI_TRUE@am__append_85 = "-dlopen" dbi.la
+@BUILD_PLUGIN_DBI_TRUE@am__append_86 = dbi.la
+@BUILD_PLUGIN_DF_TRUE@am__append_87 = df.la
+@BUILD_PLUGIN_DF_TRUE@am__append_88 = "-dlopen" df.la
+@BUILD_PLUGIN_DF_TRUE@am__append_89 = df.la
+@BUILD_PLUGIN_DISK_TRUE@am__append_90 = disk.la
+@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_91 = -lkstat
+@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_92 = -ldevinfo
+@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBIOKIT_TRUE@am__append_93 = -lIOKit
+@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_94 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)  
+@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_95 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_DISK_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_96 = -lperfstat
+@BUILD_PLUGIN_DISK_TRUE@am__append_97 = "-dlopen" disk.la
+@BUILD_PLUGIN_DISK_TRUE@am__append_98 = disk.la
+@BUILD_PLUGIN_DNS_TRUE@am__append_99 = dns.la
+@BUILD_PLUGIN_DNS_TRUE@am__append_100 = "-dlopen" dns.la
+@BUILD_PLUGIN_DNS_TRUE@am__append_101 = dns.la
+@BUILD_PLUGIN_EMAIL_TRUE@am__append_102 = email.la
+@BUILD_PLUGIN_EMAIL_TRUE@am__append_103 = "-dlopen" email.la
+@BUILD_PLUGIN_EMAIL_TRUE@am__append_104 = email.la
+@BUILD_PLUGIN_ENTROPY_TRUE@am__append_105 = entropy.la
+@BUILD_PLUGIN_ENTROPY_TRUE@am__append_106 = "-dlopen" entropy.la
+@BUILD_PLUGIN_ENTROPY_TRUE@am__append_107 = entropy.la
+@BUILD_PLUGIN_EXEC_TRUE@am__append_108 = exec.la
+@BUILD_PLUGIN_EXEC_TRUE@am__append_109 = "-dlopen" exec.la
+@BUILD_PLUGIN_EXEC_TRUE@am__append_110 = exec.la
+@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_111 = ethstat.la
+@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_112 = "-dlopen" ethstat.la
+@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_113 = ethstat.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_114 = filecount.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_115 = "-dlopen" filecount.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_116 = filecount.la
+@BUILD_PLUGIN_GMOND_TRUE@am__append_117 = gmond.la
+@BUILD_PLUGIN_GMOND_TRUE@am__append_118 = "-dlopen" gmond.la
+@BUILD_PLUGIN_GMOND_TRUE@am__append_119 = gmond.la
+@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_120 = hddtemp.la
+@BUILD_PLUGIN_HDDTEMP_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_121 = -lsocket
+@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_122 = "-dlopen" hddtemp.la
+@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_123 = hddtemp.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_124 = interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_125 = "-dlopen" interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_126 = interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_127 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_128 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_129 = -lkstat
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_130 = -ldevinfo
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_131 = -lperfstat
+@BUILD_PLUGIN_IPTABLES_TRUE@am__append_132 = iptables.la
+@BUILD_PLUGIN_IPTABLES_TRUE@am__append_133 = "-dlopen" iptables.la
+@BUILD_PLUGIN_IPTABLES_TRUE@am__append_134 = iptables.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_135 = ipmi.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_136 = "-dlopen" ipmi.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_137 = ipmi.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_138 = ipvs.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_139 = "-dlopen" ipvs.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_140 = ipvs.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_141 = irq.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_142 = "-dlopen" irq.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_143 = irq.la
+@BUILD_PLUGIN_JAVA_TRUE@am__append_144 = java.la
+@BUILD_PLUGIN_JAVA_TRUE@am__append_145 = "-dlopen" java.la
+@BUILD_PLUGIN_JAVA_TRUE@am__append_146 = java.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_147 = libvirt.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_148 = "-dlopen" libvirt.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_149 = libvirt.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_150 = load.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_151 = "-dlopen" load.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_152 = load.la
+@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_153 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_154 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_155 = -lperfstat
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_156 = logfile.la
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_157 = "-dlopen" logfile.la
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_158 = logfile.la
+@BUILD_PLUGIN_LPAR_TRUE@am__append_159 = lpar.la
+@BUILD_PLUGIN_LPAR_TRUE@am__append_160 = "-dlopen" lpar.la
+@BUILD_PLUGIN_LPAR_TRUE@am__append_161 = lpar.la
+@BUILD_PLUGIN_MADWIFI_TRUE@am__append_162 = madwifi.la
+@BUILD_PLUGIN_MADWIFI_TRUE@am__append_163 = "-dlopen" madwifi.la
+@BUILD_PLUGIN_MADWIFI_TRUE@am__append_164 = madwifi.la
+@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_165 = match_empty_counter.la
+@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_166 = "-dlopen" match_empty_counter.la
+@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_167 = match_empty_counter.la
+@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_168 = match_hashed.la
+@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_169 = "-dlopen" match_hashed.la
+@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_170 = match_hashed.la
+@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_171 = match_regex.la
+@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_172 = "-dlopen" match_regex.la
+@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_173 = match_regex.la
+@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_174 = match_timediff.la
+@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_175 = "-dlopen" match_timediff.la
+@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_176 = match_timediff.la
+@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_177 = match_value.la
+@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_178 = "-dlopen" match_value.la
+@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_179 = match_value.la
+@BUILD_PLUGIN_MBMON_TRUE@am__append_180 = mbmon.la
+@BUILD_PLUGIN_MBMON_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_181 = -lsocket
+@BUILD_PLUGIN_MBMON_TRUE@am__append_182 = "-dlopen" mbmon.la
+@BUILD_PLUGIN_MBMON_TRUE@am__append_183 = mbmon.la
+@BUILD_PLUGIN_MD_TRUE@am__append_184 = md.la
+@BUILD_PLUGIN_MD_TRUE@am__append_185 = "-dlopen" md.la
+@BUILD_PLUGIN_MD_TRUE@am__append_186 = md.la
+@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_187 = memcachec.la
+@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_188 = "-dlopen" memcachec.la
+@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_189 = memcachec.la
+@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_190 = memcached.la
+@BUILD_PLUGIN_MEMCACHED_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_191 = -lsocket
+@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_192 = "-dlopen" memcached.la
+@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_193 = memcached.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_194 = memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_195 = "-dlopen" memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_196 = memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_197 = -lkstat
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_198 = -ldevinfo
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_199 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_200 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_201 = -lperfstat
+@BUILD_PLUGIN_MODBUS_TRUE@am__append_202 = modbus.la
+@BUILD_PLUGIN_MODBUS_TRUE@am__append_203 = "-dlopen" modbus.la
+@BUILD_PLUGIN_MODBUS_TRUE@am__append_204 = modbus.la
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_205 = multimeter.la
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_206 = "-dlopen" multimeter.la
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_207 = multimeter.la
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_208 = mysql.la
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_209 = "-dlopen" mysql.la
+@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_210 = $(BUILD_WITH_LIBMYSQL_CFLAGS)
+@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_211 = $(BUILD_WITH_LIBMYSQL_LIBS)
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_212 = mysql.la
+@BUILD_PLUGIN_NETAPP_TRUE@am__append_213 = netapp.la
+@BUILD_PLUGIN_NETAPP_TRUE@am__append_214 = "-dlopen" netapp.la
+@BUILD_PLUGIN_NETAPP_TRUE@am__append_215 = netapp.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_216 = netlink.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_217 = "-dlopen" netlink.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_218 = netlink.la
 @BUILD_PLUGIN_NETWORK_TRUE@am__append_219 = network.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_220 = nfs.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_221 = "-dlopen" nfs.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_222 = nfs.la
-@BUILD_PLUGIN_FSCACHE_TRUE@am__append_223 = fscache.la
-@BUILD_PLUGIN_FSCACHE_TRUE@am__append_224 = "-dlopen" fscache.la
-@BUILD_PLUGIN_FSCACHE_TRUE@am__append_225 = fscache.la
-@BUILD_PLUGIN_NGINX_TRUE@am__append_226 = nginx.la
-@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_227 = $(BUILD_WITH_LIBCURL_CFLAGS)
-@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_228 = $(BUILD_WITH_LIBCURL_LIBS)
-@BUILD_PLUGIN_NGINX_TRUE@am__append_229 = "-dlopen" nginx.la
-@BUILD_PLUGIN_NGINX_TRUE@am__append_230 = nginx.la
-@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_231 = notify_desktop.la
-@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_232 = "-dlopen" notify_desktop.la
-@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_233 = notify_desktop.la
-@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_234 = notify_email.la
-@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_235 = "-dlopen" notify_email.la
-@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_236 = notify_email.la
-@BUILD_PLUGIN_NTPD_TRUE@am__append_237 = ntpd.la
-@BUILD_PLUGIN_NTPD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_238 = -lsocket
-@BUILD_PLUGIN_NTPD_TRUE@am__append_239 = "-dlopen" ntpd.la
-@BUILD_PLUGIN_NTPD_TRUE@am__append_240 = ntpd.la
-@BUILD_PLUGIN_NUMA_TRUE@am__append_241 = numa.la
-@BUILD_PLUGIN_NUMA_TRUE@am__append_242 = "-dlopen" numa.la
-@BUILD_PLUGIN_NUMA_TRUE@am__append_243 = numa.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_244 = nut.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_245 = "-dlopen" nut.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_246 = nut.la
-@BUILD_PLUGIN_OLSRD_TRUE@am__append_247 = olsrd.la
-@BUILD_PLUGIN_OLSRD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_248 = -lsocket
-@BUILD_PLUGIN_OLSRD_TRUE@am__append_249 = "-dlopen" olsrd.la
-@BUILD_PLUGIN_OLSRD_TRUE@am__append_250 = olsrd.la
-@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_251 = onewire.la
-@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_252 = "-dlopen" onewire.la
-@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_253 = onewire.la
-@BUILD_PLUGIN_OPENVPN_TRUE@am__append_254 = openvpn.la
-@BUILD_PLUGIN_OPENVPN_TRUE@am__append_255 = "-dlopen" openvpn.la
-@BUILD_PLUGIN_OPENVPN_TRUE@am__append_256 = openvpn.la
-@BUILD_PLUGIN_ORACLE_TRUE@am__append_257 = oracle.la
-@BUILD_PLUGIN_ORACLE_TRUE@am__append_258 = "-dlopen" oracle.la
-@BUILD_PLUGIN_ORACLE_TRUE@am__append_259 = oracle.la
-@BUILD_PLUGIN_PERL_TRUE@am__append_260 = perl.la
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_220 = -lsocket
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_221 = $(GCRYPT_CPPFLAGS)
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_222 = $(GCRYPT_LDFLAGS)
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_223 = $(GCRYPT_LIBS)
+@BUILD_PLUGIN_NETWORK_TRUE@am__append_224 = "-dlopen" network.la
+@BUILD_PLUGIN_NETWORK_TRUE@am__append_225 = network.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_226 = nfs.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_227 = "-dlopen" nfs.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_228 = nfs.la
+@BUILD_PLUGIN_FSCACHE_TRUE@am__append_229 = fscache.la
+@BUILD_PLUGIN_FSCACHE_TRUE@am__append_230 = "-dlopen" fscache.la
+@BUILD_PLUGIN_FSCACHE_TRUE@am__append_231 = fscache.la
+@BUILD_PLUGIN_NGINX_TRUE@am__append_232 = nginx.la
+@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_233 = $(BUILD_WITH_LIBCURL_CFLAGS)
+@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_234 = $(BUILD_WITH_LIBCURL_LIBS)
+@BUILD_PLUGIN_NGINX_TRUE@am__append_235 = "-dlopen" nginx.la
+@BUILD_PLUGIN_NGINX_TRUE@am__append_236 = nginx.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_237 = notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_238 = "-dlopen" notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_239 = notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_240 = notify_email.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_241 = "-dlopen" notify_email.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_242 = notify_email.la
+@BUILD_PLUGIN_NTPD_TRUE@am__append_243 = ntpd.la
+@BUILD_PLUGIN_NTPD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_244 = -lsocket
+@BUILD_PLUGIN_NTPD_TRUE@am__append_245 = "-dlopen" ntpd.la
+@BUILD_PLUGIN_NTPD_TRUE@am__append_246 = ntpd.la
+@BUILD_PLUGIN_NUMA_TRUE@am__append_247 = numa.la
+@BUILD_PLUGIN_NUMA_TRUE@am__append_248 = "-dlopen" numa.la
+@BUILD_PLUGIN_NUMA_TRUE@am__append_249 = numa.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_250 = nut.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_251 = "-dlopen" nut.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_252 = nut.la
+@BUILD_PLUGIN_OLSRD_TRUE@am__append_253 = olsrd.la
+@BUILD_PLUGIN_OLSRD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_254 = -lsocket
+@BUILD_PLUGIN_OLSRD_TRUE@am__append_255 = "-dlopen" olsrd.la
+@BUILD_PLUGIN_OLSRD_TRUE@am__append_256 = olsrd.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_257 = onewire.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_258 = "-dlopen" onewire.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_259 = onewire.la
+@BUILD_PLUGIN_OPENVPN_TRUE@am__append_260 = openvpn.la
+@BUILD_PLUGIN_OPENVPN_TRUE@am__append_261 = "-dlopen" openvpn.la
+@BUILD_PLUGIN_OPENVPN_TRUE@am__append_262 = openvpn.la
+@BUILD_PLUGIN_ORACLE_TRUE@am__append_263 = oracle.la
+@BUILD_PLUGIN_ORACLE_TRUE@am__append_264 = "-dlopen" oracle.la
+@BUILD_PLUGIN_ORACLE_TRUE@am__append_265 = oracle.la
+@BUILD_PLUGIN_PERL_TRUE@am__append_266 = perl.la
 # Work-around for issues #41 and #42 - Perl 5.10 incorrectly introduced
 # __attribute__nonnull__(3) for Perl_load_module().
-@BUILD_PLUGIN_PERL_TRUE@@HAVE_BROKEN_PERL_LOAD_MODULE_TRUE@am__append_261 = -Wno-nonnull
-@BUILD_PLUGIN_PERL_TRUE@am__append_262 = "-dlopen" perl.la
-@BUILD_PLUGIN_PERL_TRUE@am__append_263 = perl.la
-@BUILD_PLUGIN_PINBA_TRUE@am__append_264 = pinba.pb-c.c pinba.pb-c.h
-@BUILD_PLUGIN_PINBA_TRUE@am__append_265 = pinba.pb-c.c pinba.pb-c.h
-@BUILD_PLUGIN_PINBA_TRUE@am__append_266 = pinba.la
-@BUILD_PLUGIN_PINBA_TRUE@am__append_267 = "-dlopen" pinba.la
-@BUILD_PLUGIN_PINBA_TRUE@am__append_268 = pinba.la
-@BUILD_PLUGIN_PING_TRUE@am__append_269 = ping.la
-@BUILD_PLUGIN_PING_TRUE@am__append_270 = "-dlopen" ping.la
-@BUILD_PLUGIN_PING_TRUE@am__append_271 = ping.la
-@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_272 = postgresql.la
-@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_273 = "-dlopen" postgresql.la
-@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_274 = postgresql.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_275 = powerdns.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_276 = "-dlopen" powerdns.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_277 = powerdns.la
-@BUILD_PLUGIN_PYTHON_TRUE@am__append_278 = python.la
-@BUILD_PLUGIN_PYTHON_TRUE@@COMPILER_IS_GCC_TRUE@am__append_279 = -fno-strict-aliasing -Wno-strict-aliasing
-@BUILD_PLUGIN_PYTHON_TRUE@am__append_280 = "-dlopen" python.la
-@BUILD_PLUGIN_PYTHON_TRUE@am__append_281 = python.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_282 = processes.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_283 = "-dlopen" processes.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_284 = processes.la
-@BUILD_PLUGIN_PROCESSES_TRUE@@BUILD_WITH_LIBKVM_GETPROCS_TRUE@am__append_285 = -lkvm
-@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_286 = protocols.la
-@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_287 = "-dlopen" protocols.la
-@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_288 = protocols.la
-@BUILD_PLUGIN_REDIS_TRUE@am__append_289 = redis.la
-@BUILD_PLUGIN_REDIS_TRUE@am__append_290 = "-dlopen" redis.la
-@BUILD_PLUGIN_REDIS_TRUE@am__append_291 = redis.la
-@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_292 = routeros.la
-@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_293 = "-dlopen" routeros.la
-@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_294 = routeros.la
-@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_295 = rrdcached.la
-@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_296 = "-dlopen" rrdcached.la
-@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_297 = rrdcached.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_298 = rrdtool.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_299 = "-dlopen" rrdtool.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_300 = rrdtool.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_301 = sensors.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_302 = "-dlopen" sensors.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_303 = sensors.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_304 = serial.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_305 = "-dlopen" serial.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_306 = serial.la
-@BUILD_PLUGIN_SNMP_TRUE@am__append_307 = snmp.la
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_308 = $(BUILD_WITH_LIBSNMP_CFLAGS)
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_309 = $(BUILD_WITH_LIBSNMP_LIBS)
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_310 = -lpthread
-@BUILD_PLUGIN_SNMP_TRUE@am__append_311 = "-dlopen" snmp.la
-@BUILD_PLUGIN_SNMP_TRUE@am__append_312 = snmp.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_313 = swap.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_314 = "-dlopen" swap.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_315 = swap.la
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_316 = -lkstat
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_317 = -ldevinfo
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE@am__append_318 = -lkvm
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_319 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_320 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_321 = -lperfstat
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_322 = syslog.la
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_323 = "-dlopen" syslog.la
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_324 = syslog.la
-@BUILD_PLUGIN_TABLE_TRUE@am__append_325 = table.la
-@BUILD_PLUGIN_TABLE_TRUE@am__append_326 = "-dlopen" table.la
-@BUILD_PLUGIN_TABLE_TRUE@am__append_327 = table.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_328 = tail.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_329 = "-dlopen" tail.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_330 = tail.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_331 = tape.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_332 = "-dlopen" tape.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_333 = tape.la
-@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_334 = target_notification.la
-@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_335 = "-dlopen" target_notification.la
-@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_336 = target_notification.la
-@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_337 = target_replace.la
-@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_338 = "-dlopen" target_replace.la
-@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_339 = target_replace.la
-@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_340 = target_scale.la
-@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_341 = "-dlopen" target_scale.la
-@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_342 = target_scale.la
-@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_343 = target_set.la
-@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_344 = "-dlopen" target_set.la
-@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_345 = target_set.la
-@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_346 = target_v5upgrade.la
-@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_347 = "-dlopen" target_v5upgrade.la
-@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_348 = target_v5upgrade.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_349 = tcpconns.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_350 = "-dlopen" tcpconns.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_351 = tcpconns.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@@BUILD_WITH_LIBKVM_NLIST_TRUE@am__append_352 = -lkvm
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_353 = teamspeak2.la
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_354 = "-dlopen" teamspeak2.la
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_355 = teamspeak2.la
-@BUILD_PLUGIN_TED_TRUE@am__append_356 = ted.la
-@BUILD_PLUGIN_TED_TRUE@am__append_357 = "-dlopen" ted.la
-@BUILD_PLUGIN_TED_TRUE@am__append_358 = ted.la
-@BUILD_PLUGIN_THERMAL_TRUE@am__append_359 = thermal.la
-@BUILD_PLUGIN_THERMAL_TRUE@am__append_360 = "-dlopen" thermal.la
-@BUILD_PLUGIN_THERMAL_TRUE@am__append_361 = thermal.la
-@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_362 = threshold.la
-@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_363 = "-dlopen" threshold.la
-@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_364 = threshold.la
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_365 = tokyotyrant.la
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_366 = -lsocket
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_367 = "-dlopen" tokyotyrant.la
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_368 = tokyotyrant.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_369 = unixsock.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_370 = "-dlopen" unixsock.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_371 = unixsock.la
-@BUILD_PLUGIN_UPTIME_TRUE@am__append_372 = uptime.la
-@BUILD_PLUGIN_UPTIME_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_373 = -lkstat
-@BUILD_PLUGIN_UPTIME_TRUE@am__append_374 = "-dlopen" uptime.la
-@BUILD_PLUGIN_UPTIME_TRUE@am__append_375 = uptime.la
-@BUILD_PLUGIN_USERS_TRUE@am__append_376 = users.la
-@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_377 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_378 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_USERS_TRUE@am__append_379 = "-dlopen" users.la
-@BUILD_PLUGIN_USERS_TRUE@am__append_380 = users.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_381 = uuid.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_382 = "-dlopen" uuid.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_383 = uuid.la
-@BUILD_PLUGIN_VARNISH_TRUE@am__append_384 = varnish.la
-@BUILD_PLUGIN_VARNISH_TRUE@am__append_385 = "-dlopen" varnish.la
-@BUILD_PLUGIN_VARNISH_TRUE@am__append_386 = varnish.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_387 = vmem.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_388 = "-dlopen" vmem.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_389 = vmem.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_390 = vserver.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_391 = "-dlopen" vserver.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_392 = vserver.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_393 = wireless.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_394 = "-dlopen" wireless.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_395 = wireless.la
-@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_396 = write_graphite.la
-@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_397 = "-dlopen" write_graphite.la
-@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_398 = write_graphite.la
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_399 = write_http.la
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_400 = "-dlopen" write_http.la
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_401 = $(BUILD_WITH_LIBCURL_CFLAGS)
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_402 = $(BUILD_WITH_LIBCURL_LIBS)
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_403 = write_http.la
-@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_404 = write_mongodb.la
-@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_405 = "-dlopen" write_mongodb.la
-@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_406 = write_mongodb.la
-@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_407 = write_redis.la
-@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_408 = "-dlopen" write_redis.la
-@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_409 = write_redis.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_410 = xmms.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_411 = "-dlopen" xmms.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_412 = xmms.la
-@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_413 = zfs_arc.la
-@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_414 = "-dlopen" zfs_arc.la
-@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_415 = zfs_arc.la
+@BUILD_PLUGIN_PERL_TRUE@@HAVE_BROKEN_PERL_LOAD_MODULE_TRUE@am__append_267 = -Wno-nonnull
+@BUILD_PLUGIN_PERL_TRUE@am__append_268 = "-dlopen" perl.la
+@BUILD_PLUGIN_PERL_TRUE@am__append_269 = perl.la
+@BUILD_PLUGIN_PF_TRUE@am__append_270 = pf.la
+@BUILD_PLUGIN_PF_TRUE@am__append_271 = "-dlopen" pf.la
+@BUILD_PLUGIN_PF_TRUE@am__append_272 = pf.la
+@BUILD_PLUGIN_PINBA_TRUE@am__append_273 = pinba.pb-c.c pinba.pb-c.h
+@BUILD_PLUGIN_PINBA_TRUE@am__append_274 = pinba.pb-c.c pinba.pb-c.h
+@BUILD_PLUGIN_PINBA_TRUE@am__append_275 = pinba.la
+@BUILD_PLUGIN_PINBA_TRUE@am__append_276 = "-dlopen" pinba.la
+@BUILD_PLUGIN_PINBA_TRUE@am__append_277 = pinba.la
+@BUILD_PLUGIN_PING_TRUE@am__append_278 = ping.la
+@BUILD_PLUGIN_PING_TRUE@am__append_279 = "-dlopen" ping.la
+@BUILD_PLUGIN_PING_TRUE@am__append_280 = ping.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_281 = postgresql.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_282 = "-dlopen" postgresql.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_283 = postgresql.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_284 = powerdns.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_285 = "-dlopen" powerdns.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_286 = powerdns.la
+@BUILD_PLUGIN_PYTHON_TRUE@am__append_287 = python.la
+@BUILD_PLUGIN_PYTHON_TRUE@@COMPILER_IS_GCC_TRUE@am__append_288 = -fno-strict-aliasing -Wno-strict-aliasing
+@BUILD_PLUGIN_PYTHON_TRUE@am__append_289 = "-dlopen" python.la
+@BUILD_PLUGIN_PYTHON_TRUE@am__append_290 = python.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_291 = processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_292 = "-dlopen" processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_293 = processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@@BUILD_WITH_LIBKVM_GETPROCS_TRUE@am__append_294 = -lkvm
+@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_295 = protocols.la
+@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_296 = "-dlopen" protocols.la
+@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_297 = protocols.la
+@BUILD_PLUGIN_REDIS_TRUE@am__append_298 = redis.la
+@BUILD_PLUGIN_REDIS_TRUE@am__append_299 = "-dlopen" redis.la
+@BUILD_PLUGIN_REDIS_TRUE@am__append_300 = redis.la
+@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_301 = routeros.la
+@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_302 = "-dlopen" routeros.la
+@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_303 = routeros.la
+@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_304 = rrdcached.la
+@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_305 = "-dlopen" rrdcached.la
+@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_306 = rrdcached.la
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_307 = rrdtool.la
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_308 = "-dlopen" rrdtool.la
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_309 = rrdtool.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_310 = sensors.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_311 = "-dlopen" sensors.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_312 = sensors.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_313 = serial.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_314 = "-dlopen" serial.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_315 = serial.la
+@BUILD_PLUGIN_SNMP_TRUE@am__append_316 = snmp.la
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_317 = $(BUILD_WITH_LIBSNMP_CFLAGS)
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_318 = $(BUILD_WITH_LIBSNMP_LIBS)
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_319 = -lpthread
+@BUILD_PLUGIN_SNMP_TRUE@am__append_320 = "-dlopen" snmp.la
+@BUILD_PLUGIN_SNMP_TRUE@am__append_321 = snmp.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_322 = swap.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_323 = "-dlopen" swap.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_324 = swap.la
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_325 = -lkstat
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_326 = -ldevinfo
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE@am__append_327 = -lkvm
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_328 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_329 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_330 = -lperfstat
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_331 = syslog.la
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_332 = "-dlopen" syslog.la
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_333 = syslog.la
+@BUILD_PLUGIN_TABLE_TRUE@am__append_334 = table.la
+@BUILD_PLUGIN_TABLE_TRUE@am__append_335 = "-dlopen" table.la
+@BUILD_PLUGIN_TABLE_TRUE@am__append_336 = table.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_337 = tail.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_338 = "-dlopen" tail.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_339 = tail.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_340 = tape.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_341 = "-dlopen" tape.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_342 = tape.la
+@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_343 = target_notification.la
+@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_344 = "-dlopen" target_notification.la
+@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_345 = target_notification.la
+@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_346 = target_replace.la
+@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_347 = "-dlopen" target_replace.la
+@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_348 = target_replace.la
+@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_349 = target_scale.la
+@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_350 = "-dlopen" target_scale.la
+@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_351 = target_scale.la
+@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_352 = target_set.la
+@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_353 = "-dlopen" target_set.la
+@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_354 = target_set.la
+@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_355 = target_v5upgrade.la
+@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_356 = "-dlopen" target_v5upgrade.la
+@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_357 = target_v5upgrade.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_358 = tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_359 = "-dlopen" tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_360 = tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@@BUILD_WITH_LIBKVM_NLIST_TRUE@am__append_361 = -lkvm
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_362 = teamspeak2.la
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_363 = "-dlopen" teamspeak2.la
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_364 = teamspeak2.la
+@BUILD_PLUGIN_TED_TRUE@am__append_365 = ted.la
+@BUILD_PLUGIN_TED_TRUE@am__append_366 = "-dlopen" ted.la
+@BUILD_PLUGIN_TED_TRUE@am__append_367 = ted.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_368 = thermal.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_369 = "-dlopen" thermal.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_370 = thermal.la
+@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_371 = threshold.la
+@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_372 = "-dlopen" threshold.la
+@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_373 = threshold.la
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_374 = tokyotyrant.la
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_375 = -lsocket
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_376 = "-dlopen" tokyotyrant.la
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_377 = tokyotyrant.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_378 = unixsock.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_379 = "-dlopen" unixsock.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_380 = unixsock.la
+@BUILD_PLUGIN_UPTIME_TRUE@am__append_381 = uptime.la
+@BUILD_PLUGIN_UPTIME_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_382 = -lkstat
+@BUILD_PLUGIN_UPTIME_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_383 = -lperfstat
+@BUILD_PLUGIN_UPTIME_TRUE@am__append_384 = "-dlopen" uptime.la
+@BUILD_PLUGIN_UPTIME_TRUE@am__append_385 = uptime.la
+@BUILD_PLUGIN_USERS_TRUE@am__append_386 = users.la
+@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_387 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_388 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_USERS_TRUE@am__append_389 = "-dlopen" users.la
+@BUILD_PLUGIN_USERS_TRUE@am__append_390 = users.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_391 = uuid.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_392 = "-dlopen" uuid.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_393 = uuid.la
+@BUILD_PLUGIN_VARNISH_TRUE@am__append_394 = varnish.la
+@BUILD_PLUGIN_VARNISH_TRUE@am__append_395 = "-dlopen" varnish.la
+@BUILD_PLUGIN_VARNISH_TRUE@am__append_396 = varnish.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_397 = vmem.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_398 = "-dlopen" vmem.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_399 = vmem.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_400 = vserver.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_401 = "-dlopen" vserver.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_402 = vserver.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_403 = wireless.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_404 = "-dlopen" wireless.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_405 = wireless.la
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_406 = write_graphite.la
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_407 = "-dlopen" write_graphite.la
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_408 = write_graphite.la
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_409 = write_http.la
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_410 = "-dlopen" write_http.la
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_411 = $(BUILD_WITH_LIBCURL_CFLAGS)
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_412 = $(BUILD_WITH_LIBCURL_LIBS)
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_413 = write_http.la
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_414 = write_mongodb.la
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_415 = "-dlopen" write_mongodb.la
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_416 = write_mongodb.la
+@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_417 = write_redis.la
+@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_418 = "-dlopen" write_redis.la
+@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_419 = write_redis.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_420 = xmms.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_421 = "-dlopen" xmms.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_422 = xmms.la
+@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_423 = zfs_arc.la
+@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_424 = "-dlopen" zfs_arc.la
+@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_425 = zfs_arc.la
+@BUILD_FEATURE_DEBUG_TRUE@am__append_426 = utils_vl_lookup_test
 subdir = src
 DIST_COMMON = $(dist_man_MANS) $(srcdir)/Makefile.am \
 	$(srcdir)/Makefile.in $(srcdir)/collectd.conf.in \
 	$(srcdir)/config.h.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 am__aclocal_m4_deps = $(top_srcdir)/configure.in
@@ -493,18 +505,33 @@
   sed '$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;$$!N;s/\n/ /g' | \
   sed '$$!N;$$!N;$$!N;$$!N;s/\n/ /g'
 am__installdirs = "$(DESTDIR)$(pkglibdir)" "$(DESTDIR)$(bindir)" \
 	"$(DESTDIR)$(sbindir)" "$(DESTDIR)$(man1dir)" \
 	"$(DESTDIR)$(man5dir)"
 LTLIBRARIES = $(pkglib_LTLIBRARIES)
+aggregation_la_DEPENDENCIES =
+am__aggregation_la_SOURCES_DIST = aggregation.c utils_vl_lookup.c \
+	utils_vl_lookup.h
+@BUILD_PLUGIN_AGGREGATION_TRUE@am_aggregation_la_OBJECTS =  \
+@BUILD_PLUGIN_AGGREGATION_TRUE@	aggregation.lo \
+@BUILD_PLUGIN_AGGREGATION_TRUE@	utils_vl_lookup.lo
+aggregation_la_OBJECTS = $(am_aggregation_la_OBJECTS)
+aggregation_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(aggregation_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_AGGREGATION_TRUE@am_aggregation_la_rpath = -rpath \
+@BUILD_PLUGIN_AGGREGATION_TRUE@	$(pkglibdir)
 am__DEPENDENCIES_1 =
 @BUILD_PLUGIN_AMQP_TRUE@amqp_la_DEPENDENCIES = $(am__DEPENDENCIES_1)
 am__amqp_la_SOURCES_DIST = amqp.c utils_cmd_putval.c \
-	utils_cmd_putval.h utils_format_json.c utils_format_json.h
+	utils_cmd_putval.h utils_format_graphite.c \
+	utils_format_graphite.h utils_format_json.c \
+	utils_format_json.h
 @BUILD_PLUGIN_AMQP_TRUE@am_amqp_la_OBJECTS = amqp_la-amqp.lo \
 @BUILD_PLUGIN_AMQP_TRUE@	amqp_la-utils_cmd_putval.lo \
+@BUILD_PLUGIN_AMQP_TRUE@	amqp_la-utils_format_graphite.lo \
 @BUILD_PLUGIN_AMQP_TRUE@	amqp_la-utils_format_json.lo
 amqp_la_OBJECTS = $(am_amqp_la_OBJECTS)
 amqp_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(amqp_la_LDFLAGS) \
 	$(LDFLAGS) -o $@
 @BUILD_PLUGIN_AMQP_TRUE@am_amqp_la_rpath = -rpath $(pkglibdir)
@@ -571,13 +598,14 @@
 conntrack_la_OBJECTS = $(am_conntrack_la_OBJECTS)
 conntrack_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(conntrack_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_CONNTRACK_TRUE@am_conntrack_la_rpath = -rpath \
 @BUILD_PLUGIN_CONNTRACK_TRUE@	$(pkglibdir)
-contextswitch_la_LIBADD =
+@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@contextswitch_la_DEPENDENCIES =  \
+@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@	$(am__DEPENDENCIES_1)
 am__contextswitch_la_SOURCES_DIST = contextswitch.c
 @BUILD_PLUGIN_CONTEXTSWITCH_TRUE@am_contextswitch_la_OBJECTS =  \
 @BUILD_PLUGIN_CONTEXTSWITCH_TRUE@	contextswitch.lo
 contextswitch_la_OBJECTS = $(am_contextswitch_la_OBJECTS)
 contextswitch_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
@@ -1124,12 +1152,20 @@
 @BUILD_PLUGIN_PERL_TRUE@am_perl_la_OBJECTS = perl_la-perl.lo
 perl_la_OBJECTS = $(am_perl_la_OBJECTS)
 perl_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(perl_la_CFLAGS) $(CFLAGS) \
 	$(perl_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_PERL_TRUE@am_perl_la_rpath = -rpath $(pkglibdir)
+pf_la_LIBADD =
+am__pf_la_SOURCES_DIST = pf.c
+@BUILD_PLUGIN_PF_TRUE@am_pf_la_OBJECTS = pf.lo
+pf_la_OBJECTS = $(am_pf_la_OBJECTS)
+pf_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
+	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(pf_la_LDFLAGS) \
+	$(LDFLAGS) -o $@
+@BUILD_PLUGIN_PF_TRUE@am_pf_la_rpath = -rpath $(pkglibdir)
 pinba_la_DEPENDENCIES =
 am__pinba_la_SOURCES_DIST = pinba.c
 @BUILD_PLUGIN_PINBA_TRUE@am_pinba_la_OBJECTS = pinba.lo
 pinba_la_OBJECTS = $(am_pinba_la_OBJECTS)
 pinba_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(pinba_la_LDFLAGS) \
@@ -1427,12 +1463,13 @@
 unixsock_la_OBJECTS = $(am_unixsock_la_OBJECTS)
 unixsock_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(unixsock_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_UNIXSOCK_TRUE@am_unixsock_la_rpath = -rpath $(pkglibdir)
 @BUILD_PLUGIN_UPTIME_TRUE@uptime_la_DEPENDENCIES =  \
+@BUILD_PLUGIN_UPTIME_TRUE@	$(am__DEPENDENCIES_1) \
 @BUILD_PLUGIN_UPTIME_TRUE@	$(am__DEPENDENCIES_1)
 am__uptime_la_SOURCES_DIST = uptime.c
 @BUILD_PLUGIN_UPTIME_TRUE@am_uptime_la_OBJECTS = uptime_la-uptime.lo
 uptime_la_OBJECTS = $(am_uptime_la_OBJECTS)
 uptime_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(uptime_la_CFLAGS) \
@@ -1489,15 +1526,17 @@
 wireless_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(wireless_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_WIRELESS_TRUE@am_wireless_la_rpath = -rpath $(pkglibdir)
 write_graphite_la_LIBADD =
 am__write_graphite_la_SOURCES_DIST = write_graphite.c \
+	utils_format_graphite.c utils_format_graphite.h \
 	utils_format_json.c utils_format_json.h
 @BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am_write_graphite_la_OBJECTS =  \
 @BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@	write_graphite.lo \
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@	utils_format_graphite.lo \
 @BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@	utils_format_json.lo
 write_graphite_la_OBJECTS = $(am_write_graphite_la_OBJECTS)
 write_graphite_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(write_graphite_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am_write_graphite_la_rpath = -rpath \
@@ -1549,12 +1588,14 @@
 @BUILD_PLUGIN_ZFS_ARC_TRUE@	zfs_arc_la-zfs_arc.lo
 zfs_arc_la_OBJECTS = $(am_zfs_arc_la_OBJECTS)
 zfs_arc_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(zfs_arc_la_CFLAGS) \
 	$(CFLAGS) $(zfs_arc_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_ZFS_ARC_TRUE@am_zfs_arc_la_rpath = -rpath $(pkglibdir)
+@BUILD_FEATURE_DEBUG_TRUE@am__EXEEXT_1 =  \
+@BUILD_FEATURE_DEBUG_TRUE@	utils_vl_lookup_test$(EXEEXT)
 PROGRAMS = $(bin_PROGRAMS) $(sbin_PROGRAMS)
 am_collectd_OBJECTS = collectd-collectd.$(OBJEXT) \
 	collectd-common.$(OBJEXT) collectd-configfile.$(OBJEXT) \
 	collectd-filter_chain.$(OBJEXT) collectd-meta_data.$(OBJEXT) \
 	collectd-plugin.$(OBJEXT) collectd-utils_avltree.$(OBJEXT) \
 	collectd-utils_cache.$(OBJEXT) \
@@ -1575,17 +1616,31 @@
 @BUILD_WITH_OWN_LIBOCONFIG_TRUE@	liboconfig/liboconfig.la
 collectd_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(collectd_CFLAGS) $(CFLAGS) \
 	$(collectd_LDFLAGS) $(LDFLAGS) -o $@
 am_collectd_nagios_OBJECTS = collectd-nagios.$(OBJEXT)
 collectd_nagios_OBJECTS = $(am_collectd_nagios_OBJECTS)
+am_collectd_tg_OBJECTS = collectd-tg.$(OBJEXT) utils_heap.$(OBJEXT)
+collectd_tg_OBJECTS = $(am_collectd_tg_OBJECTS)
 am_collectdctl_OBJECTS = collectdctl.$(OBJEXT)
 collectdctl_OBJECTS = $(am_collectdctl_OBJECTS)
 am_collectdmon_OBJECTS = collectdmon-collectdmon.$(OBJEXT)
 collectdmon_OBJECTS = $(am_collectdmon_OBJECTS)
 collectdmon_LDADD = $(LDADD)
+am__utils_vl_lookup_test_SOURCES_DIST = utils_vl_lookup_test.c \
+	utils_vl_lookup.h utils_vl_lookup.c utils_avltree.c \
+	utils_avltree.h common.h
+@BUILD_FEATURE_DEBUG_TRUE@am_utils_vl_lookup_test_OBJECTS = utils_vl_lookup_test-utils_vl_lookup_test.$(OBJEXT) \
+@BUILD_FEATURE_DEBUG_TRUE@	utils_vl_lookup_test-utils_vl_lookup.$(OBJEXT) \
+@BUILD_FEATURE_DEBUG_TRUE@	utils_vl_lookup_test-utils_avltree.$(OBJEXT)
+utils_vl_lookup_test_OBJECTS = $(am_utils_vl_lookup_test_OBJECTS)
+utils_vl_lookup_test_DEPENDENCIES =
+utils_vl_lookup_test_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) \
+	$(utils_vl_lookup_test_CFLAGS) $(CFLAGS) \
+	$(utils_vl_lookup_test_LDFLAGS) $(LDFLAGS) -o $@
 DEFAULT_INCLUDES = -I.@am__isrc@
 depcomp = $(SHELL) $(top_srcdir)/libltdl/config/depcomp
 am__depfiles_maybe = depfiles
 am__mv = mv -f
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
@@ -1593,13 +1648,14 @@
 	--mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) \
 	$(AM_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 CCLD = $(CC)
 LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) \
 	$(LDFLAGS) -o $@
-SOURCES = $(amqp_la_SOURCES) $(apache_la_SOURCES) $(apcups_la_SOURCES) \
+SOURCES = $(aggregation_la_SOURCES) $(amqp_la_SOURCES) \
+	$(apache_la_SOURCES) $(apcups_la_SOURCES) \
 	$(apple_sensors_la_SOURCES) $(ascent_la_SOURCES) \
 	$(battery_la_SOURCES) $(bind_la_SOURCES) \
 	$(conntrack_la_SOURCES) $(contextswitch_la_SOURCES) \
 	$(cpu_la_SOURCES) $(cpufreq_la_SOURCES) $(csv_la_SOURCES) \
 	$(curl_la_SOURCES) $(curl_json_la_SOURCES) \
 	$(curl_xml_la_SOURCES) $(dbi_la_SOURCES) $(df_la_SOURCES) \
@@ -1620,13 +1676,13 @@
 	$(netapp_la_SOURCES) $(netlink_la_SOURCES) \
 	$(network_la_SOURCES) $(nfs_la_SOURCES) $(nginx_la_SOURCES) \
 	$(notify_desktop_la_SOURCES) $(notify_email_la_SOURCES) \
 	$(ntpd_la_SOURCES) $(numa_la_SOURCES) $(nut_la_SOURCES) \
 	$(olsrd_la_SOURCES) $(onewire_la_SOURCES) \
 	$(openvpn_la_SOURCES) $(oracle_la_SOURCES) $(perl_la_SOURCES) \
-	$(pinba_la_SOURCES) $(ping_la_SOURCES) \
+	$(pf_la_SOURCES) $(pinba_la_SOURCES) $(ping_la_SOURCES) \
 	$(postgresql_la_SOURCES) $(powerdns_la_SOURCES) \
 	$(processes_la_SOURCES) $(protocols_la_SOURCES) \
 	$(python_la_SOURCES) $(redis_la_SOURCES) \
 	$(routeros_la_SOURCES) $(rrdcached_la_SOURCES) \
 	$(rrdtool_la_SOURCES) $(sensors_la_SOURCES) \
 	$(serial_la_SOURCES) $(snmp_la_SOURCES) $(swap_la_SOURCES) \
@@ -1641,16 +1697,18 @@
 	$(users_la_SOURCES) $(uuid_la_SOURCES) $(varnish_la_SOURCES) \
 	$(vmem_la_SOURCES) $(vserver_la_SOURCES) \
 	$(wireless_la_SOURCES) $(write_graphite_la_SOURCES) \
 	$(write_http_la_SOURCES) $(write_mongodb_la_SOURCES) \
 	$(write_redis_la_SOURCES) $(xmms_la_SOURCES) \
 	$(zfs_arc_la_SOURCES) $(collectd_SOURCES) \
-	$(collectd_nagios_SOURCES) $(collectdctl_SOURCES) \
-	$(collectdmon_SOURCES)
-DIST_SOURCES = $(am__amqp_la_SOURCES_DIST) \
-	$(am__apache_la_SOURCES_DIST) $(am__apcups_la_SOURCES_DIST) \
+	$(collectd_nagios_SOURCES) $(collectd_tg_SOURCES) \
+	$(collectdctl_SOURCES) $(collectdmon_SOURCES) \
+	$(utils_vl_lookup_test_SOURCES)
+DIST_SOURCES = $(am__aggregation_la_SOURCES_DIST) \
+	$(am__amqp_la_SOURCES_DIST) $(am__apache_la_SOURCES_DIST) \
+	$(am__apcups_la_SOURCES_DIST) \
 	$(am__apple_sensors_la_SOURCES_DIST) \
 	$(am__ascent_la_SOURCES_DIST) $(am__battery_la_SOURCES_DIST) \
 	$(am__bind_la_SOURCES_DIST) $(am__conntrack_la_SOURCES_DIST) \
 	$(am__contextswitch_la_SOURCES_DIST) \
 	$(am__cpu_la_SOURCES_DIST) $(am__cpufreq_la_SOURCES_DIST) \
 	$(am__csv_la_SOURCES_DIST) $(am__curl_la_SOURCES_DIST) \
@@ -1684,14 +1742,14 @@
 	$(am__notify_desktop_la_SOURCES_DIST) \
 	$(am__notify_email_la_SOURCES_DIST) \
 	$(am__ntpd_la_SOURCES_DIST) $(am__numa_la_SOURCES_DIST) \
 	$(am__nut_la_SOURCES_DIST) $(am__olsrd_la_SOURCES_DIST) \
 	$(am__onewire_la_SOURCES_DIST) $(am__openvpn_la_SOURCES_DIST) \
 	$(am__oracle_la_SOURCES_DIST) $(am__perl_la_SOURCES_DIST) \
-	$(am__pinba_la_SOURCES_DIST) $(am__ping_la_SOURCES_DIST) \
-	$(am__postgresql_la_SOURCES_DIST) \
+	$(am__pf_la_SOURCES_DIST) $(am__pinba_la_SOURCES_DIST) \
+	$(am__ping_la_SOURCES_DIST) $(am__postgresql_la_SOURCES_DIST) \
 	$(am__powerdns_la_SOURCES_DIST) \
 	$(am__processes_la_SOURCES_DIST) \
 	$(am__protocols_la_SOURCES_DIST) $(am__python_la_SOURCES_DIST) \
 	$(am__redis_la_SOURCES_DIST) $(am__routeros_la_SOURCES_DIST) \
 	$(am__rrdcached_la_SOURCES_DIST) \
 	$(am__rrdtool_la_SOURCES_DIST) $(am__sensors_la_SOURCES_DIST) \
@@ -1715,14 +1773,15 @@
 	$(am__vserver_la_SOURCES_DIST) $(am__wireless_la_SOURCES_DIST) \
 	$(am__write_graphite_la_SOURCES_DIST) \
 	$(am__write_http_la_SOURCES_DIST) \
 	$(am__write_mongodb_la_SOURCES_DIST) \
 	$(am__write_redis_la_SOURCES_DIST) $(am__xmms_la_SOURCES_DIST) \
 	$(am__zfs_arc_la_SOURCES_DIST) $(collectd_SOURCES) \
-	$(collectd_nagios_SOURCES) $(collectdctl_SOURCES) \
-	$(collectdmon_SOURCES)
+	$(collectd_nagios_SOURCES) $(collectd_tg_SOURCES) \
+	$(collectdctl_SOURCES) $(collectdmon_SOURCES) \
+	$(am__utils_vl_lookup_test_SOURCES_DIST)
 RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
 	html-recursive info-recursive install-data-recursive \
 	install-dvi-recursive install-exec-recursive \
 	install-html-recursive install-info-recursive \
 	install-pdf-recursive install-ps-recursive install-recursive \
 	installcheck-recursive installdirs-recursive pdf-recursive \
@@ -1934,14 +1993,12 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
-PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
-PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
@@ -2036,195 +2093,211 @@
 collectd_CPPFLAGS = $(AM_CPPFLAGS) $(LTDLINCL)
 collectd_CFLAGS = $(AM_CFLAGS) $(am__append_11)
 collectd_LDFLAGS = -export-dynamic $(am__append_10)
 collectd_LDADD = -lm $(am__append_3) $(am__append_4) $(am__append_5) \
 	$(am__append_6) $(am__append_7) $(am__append_8) \
 	$(am__append_9) $(am__append_12) $(am__append_13) \
-	$(am__append_15) $(am__append_21) $(am__append_24) \
-	$(am__append_30) $(am__append_33) $(am__append_36) \
-	$(am__append_40) $(am__append_43) $(am__append_46) \
-	$(am__append_49) $(am__append_57) $(am__append_60) \
-	$(am__append_63) $(am__append_66) $(am__append_73) \
-	$(am__append_76) $(am__append_79) $(am__append_82) \
-	$(am__append_91) $(am__append_94) $(am__append_97) \
-	$(am__append_100) $(am__append_103) $(am__append_106) \
-	$(am__append_109) $(am__append_112) $(am__append_116) \
-	$(am__append_119) $(am__append_127) $(am__append_130) \
-	$(am__append_133) $(am__append_136) $(am__append_139) \
-	$(am__append_142) $(am__append_145) $(am__append_151) \
-	$(am__append_154) $(am__append_157) $(am__append_160) \
-	$(am__append_163) $(am__append_166) $(am__append_169) \
-	$(am__append_172) $(am__append_176) $(am__append_179) \
-	$(am__append_182) $(am__append_186) $(am__append_189) \
-	$(am__append_197) $(am__append_200) $(am__append_203) \
-	$(am__append_208) $(am__append_211) $(am__append_218) \
-	$(am__append_221) $(am__append_224) $(am__append_229) \
-	$(am__append_232) $(am__append_235) $(am__append_239) \
-	$(am__append_242) $(am__append_245) $(am__append_249) \
-	$(am__append_252) $(am__append_255) $(am__append_258) \
-	$(am__append_262) $(am__append_267) $(am__append_270) \
-	$(am__append_273) $(am__append_276) $(am__append_280) \
-	$(am__append_283) $(am__append_287) $(am__append_290) \
-	$(am__append_293) $(am__append_296) $(am__append_299) \
-	$(am__append_302) $(am__append_305) $(am__append_311) \
-	$(am__append_314) $(am__append_323) $(am__append_326) \
-	$(am__append_329) $(am__append_332) $(am__append_335) \
-	$(am__append_338) $(am__append_341) $(am__append_344) \
-	$(am__append_347) $(am__append_350) $(am__append_354) \
-	$(am__append_357) $(am__append_360) $(am__append_363) \
-	$(am__append_367) $(am__append_370) $(am__append_374) \
-	$(am__append_379) $(am__append_382) $(am__append_385) \
-	$(am__append_388) $(am__append_391) $(am__append_394) \
-	$(am__append_397) $(am__append_400) $(am__append_405) \
-	$(am__append_408) $(am__append_411) $(am__append_414)
-collectd_DEPENDENCIES = $(am__append_14) $(am__append_22) \
-	$(am__append_27) $(am__append_31) $(am__append_34) \
-	$(am__append_37) $(am__append_41) $(am__append_44) \
-	$(am__append_47) $(am__append_50) $(am__append_58) \
-	$(am__append_61) $(am__append_64) $(am__append_69) \
-	$(am__append_74) $(am__append_77) $(am__append_80) \
-	$(am__append_83) $(am__append_92) $(am__append_95) \
-	$(am__append_98) $(am__append_101) $(am__append_104) \
-	$(am__append_107) $(am__append_110) $(am__append_113) \
-	$(am__append_117) $(am__append_120) $(am__append_128) \
-	$(am__append_131) $(am__append_134) $(am__append_137) \
-	$(am__append_140) $(am__append_143) $(am__append_146) \
-	$(am__append_152) $(am__append_155) $(am__append_158) \
-	$(am__append_161) $(am__append_164) $(am__append_167) \
-	$(am__append_170) $(am__append_173) $(am__append_177) \
-	$(am__append_180) $(am__append_183) $(am__append_187) \
-	$(am__append_190) $(am__append_198) $(am__append_201) \
-	$(am__append_206) $(am__append_209) $(am__append_212) \
-	$(am__append_219) $(am__append_222) $(am__append_225) \
-	$(am__append_230) $(am__append_233) $(am__append_236) \
-	$(am__append_240) $(am__append_243) $(am__append_246) \
-	$(am__append_250) $(am__append_253) $(am__append_256) \
-	$(am__append_259) $(am__append_263) $(am__append_268) \
-	$(am__append_271) $(am__append_274) $(am__append_277) \
-	$(am__append_281) $(am__append_284) $(am__append_288) \
-	$(am__append_291) $(am__append_294) $(am__append_297) \
-	$(am__append_300) $(am__append_303) $(am__append_306) \
-	$(am__append_312) $(am__append_315) $(am__append_324) \
-	$(am__append_327) $(am__append_330) $(am__append_333) \
-	$(am__append_336) $(am__append_339) $(am__append_342) \
-	$(am__append_345) $(am__append_348) $(am__append_351) \
-	$(am__append_355) $(am__append_358) $(am__append_361) \
-	$(am__append_364) $(am__append_368) $(am__append_371) \
-	$(am__append_375) $(am__append_380) $(am__append_383) \
-	$(am__append_386) $(am__append_389) $(am__append_392) \
-	$(am__append_395) $(am__append_398) $(am__append_403) \
-	$(am__append_406) $(am__append_409) $(am__append_412) \
-	$(am__append_415)
+	$(am__append_15) $(am__append_23) $(am__append_26) \
+	$(am__append_29) $(am__append_35) $(am__append_38) \
+	$(am__append_41) $(am__append_45) $(am__append_48) \
+	$(am__append_51) $(am__append_55) $(am__append_63) \
+	$(am__append_66) $(am__append_69) $(am__append_72) \
+	$(am__append_79) $(am__append_82) $(am__append_85) \
+	$(am__append_88) $(am__append_97) $(am__append_100) \
+	$(am__append_103) $(am__append_106) $(am__append_109) \
+	$(am__append_112) $(am__append_115) $(am__append_118) \
+	$(am__append_122) $(am__append_125) $(am__append_133) \
+	$(am__append_136) $(am__append_139) $(am__append_142) \
+	$(am__append_145) $(am__append_148) $(am__append_151) \
+	$(am__append_157) $(am__append_160) $(am__append_163) \
+	$(am__append_166) $(am__append_169) $(am__append_172) \
+	$(am__append_175) $(am__append_178) $(am__append_182) \
+	$(am__append_185) $(am__append_188) $(am__append_192) \
+	$(am__append_195) $(am__append_203) $(am__append_206) \
+	$(am__append_209) $(am__append_214) $(am__append_217) \
+	$(am__append_224) $(am__append_227) $(am__append_230) \
+	$(am__append_235) $(am__append_238) $(am__append_241) \
+	$(am__append_245) $(am__append_248) $(am__append_251) \
+	$(am__append_255) $(am__append_258) $(am__append_261) \
+	$(am__append_264) $(am__append_268) $(am__append_271) \
+	$(am__append_276) $(am__append_279) $(am__append_282) \
+	$(am__append_285) $(am__append_289) $(am__append_292) \
+	$(am__append_296) $(am__append_299) $(am__append_302) \
+	$(am__append_305) $(am__append_308) $(am__append_311) \
+	$(am__append_314) $(am__append_320) $(am__append_323) \
+	$(am__append_332) $(am__append_335) $(am__append_338) \
+	$(am__append_341) $(am__append_344) $(am__append_347) \
+	$(am__append_350) $(am__append_353) $(am__append_356) \
+	$(am__append_359) $(am__append_363) $(am__append_366) \
+	$(am__append_369) $(am__append_372) $(am__append_376) \
+	$(am__append_379) $(am__append_384) $(am__append_389) \
+	$(am__append_392) $(am__append_395) $(am__append_398) \
+	$(am__append_401) $(am__append_404) $(am__append_407) \
+	$(am__append_410) $(am__append_415) $(am__append_418) \
+	$(am__append_421) $(am__append_424)
+collectd_DEPENDENCIES = $(am__append_14) $(am__append_24) \
+	$(am__append_27) $(am__append_32) $(am__append_36) \
+	$(am__append_39) $(am__append_42) $(am__append_46) \
+	$(am__append_49) $(am__append_52) $(am__append_56) \
+	$(am__append_64) $(am__append_67) $(am__append_70) \
+	$(am__append_75) $(am__append_80) $(am__append_83) \
+	$(am__append_86) $(am__append_89) $(am__append_98) \
+	$(am__append_101) $(am__append_104) $(am__append_107) \
+	$(am__append_110) $(am__append_113) $(am__append_116) \
+	$(am__append_119) $(am__append_123) $(am__append_126) \
+	$(am__append_134) $(am__append_137) $(am__append_140) \
+	$(am__append_143) $(am__append_146) $(am__append_149) \
+	$(am__append_152) $(am__append_158) $(am__append_161) \
+	$(am__append_164) $(am__append_167) $(am__append_170) \
+	$(am__append_173) $(am__append_176) $(am__append_179) \
+	$(am__append_183) $(am__append_186) $(am__append_189) \
+	$(am__append_193) $(am__append_196) $(am__append_204) \
+	$(am__append_207) $(am__append_212) $(am__append_215) \
+	$(am__append_218) $(am__append_225) $(am__append_228) \
+	$(am__append_231) $(am__append_236) $(am__append_239) \
+	$(am__append_242) $(am__append_246) $(am__append_249) \
+	$(am__append_252) $(am__append_256) $(am__append_259) \
+	$(am__append_262) $(am__append_265) $(am__append_269) \
+	$(am__append_272) $(am__append_277) $(am__append_280) \
+	$(am__append_283) $(am__append_286) $(am__append_290) \
+	$(am__append_293) $(am__append_297) $(am__append_300) \
+	$(am__append_303) $(am__append_306) $(am__append_309) \
+	$(am__append_312) $(am__append_315) $(am__append_321) \
+	$(am__append_324) $(am__append_333) $(am__append_336) \
+	$(am__append_339) $(am__append_342) $(am__append_345) \
+	$(am__append_348) $(am__append_351) $(am__append_354) \
+	$(am__append_357) $(am__append_360) $(am__append_364) \
+	$(am__append_367) $(am__append_370) $(am__append_373) \
+	$(am__append_377) $(am__append_380) $(am__append_385) \
+	$(am__append_390) $(am__append_393) $(am__append_396) \
+	$(am__append_399) $(am__append_402) $(am__append_405) \
+	$(am__append_408) $(am__append_413) $(am__append_416) \
+	$(am__append_419) $(am__append_422) $(am__append_425)
 collectdmon_SOURCES = collectdmon.c
 collectdmon_CPPFLAGS = $(AM_CPPFLAGS)
 collectd_nagios_SOURCES = collectd-nagios.c
 collectd_nagios_LDADD = $(am__append_16) $(am__append_17) \
 	libcollectdclient/libcollectdclient.la
 collectd_nagios_DEPENDENCIES = libcollectdclient/libcollectdclient.la
 collectdctl_SOURCES = collectdctl.c
 collectdctl_LDADD = $(am__append_18) $(am__append_19) \
 	libcollectdclient/libcollectdclient.la
 collectdctl_DEPENDENCIES = libcollectdclient/libcollectdclient.la
-pkglib_LTLIBRARIES = $(am__append_20) $(am__append_23) \
-	$(am__append_28) $(am__append_32) $(am__append_35) \
-	$(am__append_38) $(am__append_42) $(am__append_45) \
-	$(am__append_48) $(am__append_51) $(am__append_59) \
-	$(am__append_62) $(am__append_65) $(am__append_70) \
-	$(am__append_75) $(am__append_78) $(am__append_81) \
-	$(am__append_84) $(am__append_93) $(am__append_96) \
-	$(am__append_99) $(am__append_102) $(am__append_105) \
-	$(am__append_108) $(am__append_111) $(am__append_114) \
-	$(am__append_118) $(am__append_126) $(am__append_129) \
-	$(am__append_132) $(am__append_135) $(am__append_138) \
-	$(am__append_141) $(am__append_144) $(am__append_150) \
-	$(am__append_153) $(am__append_156) $(am__append_159) \
-	$(am__append_162) $(am__append_165) $(am__append_168) \
-	$(am__append_171) $(am__append_174) $(am__append_178) \
-	$(am__append_181) $(am__append_184) $(am__append_188) \
-	$(am__append_196) $(am__append_199) $(am__append_202) \
-	$(am__append_207) $(am__append_210) $(am__append_213) \
-	$(am__append_220) $(am__append_223) $(am__append_226) \
-	$(am__append_231) $(am__append_234) $(am__append_237) \
-	$(am__append_241) $(am__append_244) $(am__append_247) \
-	$(am__append_251) $(am__append_254) $(am__append_257) \
-	$(am__append_260) $(am__append_266) $(am__append_269) \
-	$(am__append_272) $(am__append_275) $(am__append_278) \
-	$(am__append_282) $(am__append_286) $(am__append_289) \
-	$(am__append_292) $(am__append_295) $(am__append_298) \
-	$(am__append_301) $(am__append_304) $(am__append_307) \
-	$(am__append_313) $(am__append_322) $(am__append_325) \
-	$(am__append_328) $(am__append_331) $(am__append_334) \
-	$(am__append_337) $(am__append_340) $(am__append_343) \
-	$(am__append_346) $(am__append_349) $(am__append_353) \
-	$(am__append_356) $(am__append_359) $(am__append_362) \
-	$(am__append_365) $(am__append_369) $(am__append_372) \
-	$(am__append_376) $(am__append_381) $(am__append_384) \
-	$(am__append_387) $(am__append_390) $(am__append_393) \
-	$(am__append_396) $(am__append_399) $(am__append_404) \
-	$(am__append_407) $(am__append_410) $(am__append_413)
-BUILT_SOURCES = $(am__append_264) $(dist_man_MANS)
-CLEANFILES = $(am__append_265)
+collectd_tg_SOURCES = collectd-tg.c \
+		      utils_heap.c utils_heap.h
+
+collectd_tg_LDADD = $(am__append_20) $(am__append_21) \
+	libcollectdclient/libcollectdclient.la
+collectd_tg_DEPENDENCIES = libcollectdclient/libcollectdclient.la
+pkglib_LTLIBRARIES = $(am__append_22) $(am__append_25) \
+	$(am__append_28) $(am__append_33) $(am__append_37) \
+	$(am__append_40) $(am__append_43) $(am__append_47) \
+	$(am__append_50) $(am__append_53) $(am__append_57) \
+	$(am__append_65) $(am__append_68) $(am__append_71) \
+	$(am__append_76) $(am__append_81) $(am__append_84) \
+	$(am__append_87) $(am__append_90) $(am__append_99) \
+	$(am__append_102) $(am__append_105) $(am__append_108) \
+	$(am__append_111) $(am__append_114) $(am__append_117) \
+	$(am__append_120) $(am__append_124) $(am__append_132) \
+	$(am__append_135) $(am__append_138) $(am__append_141) \
+	$(am__append_144) $(am__append_147) $(am__append_150) \
+	$(am__append_156) $(am__append_159) $(am__append_162) \
+	$(am__append_165) $(am__append_168) $(am__append_171) \
+	$(am__append_174) $(am__append_177) $(am__append_180) \
+	$(am__append_184) $(am__append_187) $(am__append_190) \
+	$(am__append_194) $(am__append_202) $(am__append_205) \
+	$(am__append_208) $(am__append_213) $(am__append_216) \
+	$(am__append_219) $(am__append_226) $(am__append_229) \
+	$(am__append_232) $(am__append_237) $(am__append_240) \
+	$(am__append_243) $(am__append_247) $(am__append_250) \
+	$(am__append_253) $(am__append_257) $(am__append_260) \
+	$(am__append_263) $(am__append_266) $(am__append_270) \
+	$(am__append_275) $(am__append_278) $(am__append_281) \
+	$(am__append_284) $(am__append_287) $(am__append_291) \
+	$(am__append_295) $(am__append_298) $(am__append_301) \
+	$(am__append_304) $(am__append_307) $(am__append_310) \
+	$(am__append_313) $(am__append_316) $(am__append_322) \
+	$(am__append_331) $(am__append_334) $(am__append_337) \
+	$(am__append_340) $(am__append_343) $(am__append_346) \
+	$(am__append_349) $(am__append_352) $(am__append_355) \
+	$(am__append_358) $(am__append_362) $(am__append_365) \
+	$(am__append_368) $(am__append_371) $(am__append_374) \
+	$(am__append_378) $(am__append_381) $(am__append_386) \
+	$(am__append_391) $(am__append_394) $(am__append_397) \
+	$(am__append_400) $(am__append_403) $(am__append_406) \
+	$(am__append_409) $(am__append_414) $(am__append_417) \
+	$(am__append_420) $(am__append_423)
+BUILT_SOURCES = $(am__append_273) $(dist_man_MANS)
+CLEANFILES = $(am__append_274)
+@BUILD_PLUGIN_AGGREGATION_TRUE@aggregation_la_SOURCES = aggregation.c \
+@BUILD_PLUGIN_AGGREGATION_TRUE@                         utils_vl_lookup.c utils_vl_lookup.h
+
+@BUILD_PLUGIN_AGGREGATION_TRUE@aggregation_la_LDFLAGS = -module -avoid-version
+@BUILD_PLUGIN_AGGREGATION_TRUE@aggregation_la_LIBADD = 
 @BUILD_PLUGIN_AMQP_TRUE@amqp_la_SOURCES = amqp.c \
 @BUILD_PLUGIN_AMQP_TRUE@		  utils_cmd_putval.c utils_cmd_putval.h \
+@BUILD_PLUGIN_AMQP_TRUE@		  utils_format_graphite.c utils_format_graphite.h \
 @BUILD_PLUGIN_AMQP_TRUE@		  utils_format_json.c utils_format_json.h
 
 @BUILD_PLUGIN_AMQP_TRUE@amqp_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBRABBITMQ_LDFLAGS)
 @BUILD_PLUGIN_AMQP_TRUE@amqp_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBRABBITMQ_CPPFLAGS)
 @BUILD_PLUGIN_AMQP_TRUE@amqp_la_LIBADD = $(BUILD_WITH_LIBRABBITMQ_LIBS)
 @BUILD_PLUGIN_APACHE_TRUE@apache_la_SOURCES = apache.c
 @BUILD_PLUGIN_APACHE_TRUE@apache_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_APACHE_TRUE@apache_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_APACHE_TRUE@	$(am__append_25)
-@BUILD_PLUGIN_APACHE_TRUE@apache_la_LIBADD = $(am__append_26)
+@BUILD_PLUGIN_APACHE_TRUE@	$(am__append_30)
+@BUILD_PLUGIN_APACHE_TRUE@apache_la_LIBADD = $(am__append_31)
 @BUILD_PLUGIN_APCUPS_TRUE@apcups_la_SOURCES = apcups.c
 @BUILD_PLUGIN_APCUPS_TRUE@apcups_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_APCUPS_TRUE@apcups_la_LIBADD = $(am__append_29)
+@BUILD_PLUGIN_APCUPS_TRUE@apcups_la_LIBADD = $(am__append_34)
 @BUILD_PLUGIN_APPLE_SENSORS_TRUE@apple_sensors_la_SOURCES = apple_sensors.c
 @BUILD_PLUGIN_APPLE_SENSORS_TRUE@apple_sensors_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_APPLE_SENSORS_TRUE@apple_sensors_la_LIBADD = -lIOKit
 @BUILD_PLUGIN_ASCENT_TRUE@ascent_la_SOURCES = ascent.c
 @BUILD_PLUGIN_ASCENT_TRUE@ascent_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_ASCENT_TRUE@ascent_la_CFLAGS = $(AM_CFLAGS) \
 @BUILD_PLUGIN_ASCENT_TRUE@		$(BUILD_WITH_LIBCURL_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
 
 @BUILD_PLUGIN_ASCENT_TRUE@ascent_la_LIBADD = $(BUILD_WITH_LIBCURL_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
 @BUILD_PLUGIN_BATTERY_TRUE@battery_la_SOURCES = battery.c
 @BUILD_PLUGIN_BATTERY_TRUE@battery_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_BATTERY_TRUE@battery_la_LIBADD = $(am__append_39)
+@BUILD_PLUGIN_BATTERY_TRUE@battery_la_LIBADD = $(am__append_44)
 @BUILD_PLUGIN_BIND_TRUE@bind_la_SOURCES = bind.c
 @BUILD_PLUGIN_BIND_TRUE@bind_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_BIND_TRUE@bind_la_CFLAGS = $(AM_CFLAGS) \
 @BUILD_PLUGIN_BIND_TRUE@		$(BUILD_WITH_LIBCURL_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
 
 @BUILD_PLUGIN_BIND_TRUE@bind_la_LIBADD = $(BUILD_WITH_LIBCURL_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
 @BUILD_PLUGIN_CONNTRACK_TRUE@conntrack_la_SOURCES = conntrack.c
 @BUILD_PLUGIN_CONNTRACK_TRUE@conntrack_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_CONTEXTSWITCH_TRUE@contextswitch_la_SOURCES = contextswitch.c
 @BUILD_PLUGIN_CONTEXTSWITCH_TRUE@contextswitch_la_LDFLAGS = -module -avoid-version
+@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@contextswitch_la_LIBADD =  \
+@BUILD_PLUGIN_CONTEXTSWITCH_TRUE@	$(am__append_54)
 @BUILD_PLUGIN_CPU_TRUE@cpu_la_SOURCES = cpu.c
-@BUILD_PLUGIN_CPU_TRUE@cpu_la_CFLAGS = $(AM_CFLAGS) $(am__append_54)
+@BUILD_PLUGIN_CPU_TRUE@cpu_la_CFLAGS = $(AM_CFLAGS) $(am__append_60)
 @BUILD_PLUGIN_CPU_TRUE@cpu_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_CPU_TRUE@cpu_la_LIBADD = $(am__append_52) \
-@BUILD_PLUGIN_CPU_TRUE@	$(am__append_53) $(am__append_55) \
-@BUILD_PLUGIN_CPU_TRUE@	$(am__append_56)
+@BUILD_PLUGIN_CPU_TRUE@cpu_la_LIBADD = $(am__append_58) \
+@BUILD_PLUGIN_CPU_TRUE@	$(am__append_59) $(am__append_61) \
+@BUILD_PLUGIN_CPU_TRUE@	$(am__append_62)
 @BUILD_PLUGIN_CPUFREQ_TRUE@cpufreq_la_SOURCES = cpufreq.c
 @BUILD_PLUGIN_CPUFREQ_TRUE@cpufreq_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_CSV_TRUE@csv_la_SOURCES = csv.c
 @BUILD_PLUGIN_CSV_TRUE@csv_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_CURL_TRUE@curl_la_SOURCES = curl.c
 @BUILD_PLUGIN_CURL_TRUE@curl_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_CURL_TRUE@curl_la_CFLAGS = $(AM_CFLAGS) $(am__append_67)
-@BUILD_PLUGIN_CURL_TRUE@curl_la_LIBADD = $(am__append_68)
+@BUILD_PLUGIN_CURL_TRUE@curl_la_CFLAGS = $(AM_CFLAGS) $(am__append_73)
+@BUILD_PLUGIN_CURL_TRUE@curl_la_LIBADD = $(am__append_74)
 @BUILD_PLUGIN_CURL_JSON_TRUE@curl_json_la_SOURCES = curl_json.c
 @BUILD_PLUGIN_CURL_JSON_TRUE@curl_json_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_CURL_JSON_TRUE@	$(am__append_71)
+@BUILD_PLUGIN_CURL_JSON_TRUE@	$(am__append_77)
 @BUILD_PLUGIN_CURL_JSON_TRUE@curl_json_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBYAJL_LDFLAGS)
 @BUILD_PLUGIN_CURL_JSON_TRUE@curl_json_la_CPPFLAGS = $(BUILD_WITH_LIBYAJL_CPPFLAGS)
 @BUILD_PLUGIN_CURL_JSON_TRUE@curl_json_la_LIBADD =  \
 @BUILD_PLUGIN_CURL_JSON_TRUE@	$(BUILD_WITH_LIBYAJL_LIBS) \
-@BUILD_PLUGIN_CURL_JSON_TRUE@	$(am__append_72)
+@BUILD_PLUGIN_CURL_JSON_TRUE@	$(am__append_78)
 @BUILD_PLUGIN_CURL_XML_TRUE@curl_xml_la_SOURCES = curl_xml.c
 @BUILD_PLUGIN_CURL_XML_TRUE@curl_xml_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_CURL_XML_TRUE@curl_xml_la_CFLAGS = $(AM_CFLAGS) \
 @BUILD_PLUGIN_CURL_XML_TRUE@		$(BUILD_WITH_LIBCURL_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
 
 @BUILD_PLUGIN_CURL_XML_TRUE@curl_xml_la_LIBADD = $(BUILD_WITH_LIBCURL_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
@@ -2234,17 +2307,17 @@
 @BUILD_PLUGIN_DBI_TRUE@dbi_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBDBI_CPPFLAGS)
 @BUILD_PLUGIN_DBI_TRUE@dbi_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBDBI_LDFLAGS)
 @BUILD_PLUGIN_DBI_TRUE@dbi_la_LIBADD = $(BUILD_WITH_LIBDBI_LIBS)
 @BUILD_PLUGIN_DF_TRUE@df_la_SOURCES = df.c utils_mount.c utils_mount.h
 @BUILD_PLUGIN_DF_TRUE@df_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_DISK_TRUE@disk_la_SOURCES = disk.c
-@BUILD_PLUGIN_DISK_TRUE@disk_la_CFLAGS = $(AM_CFLAGS) $(am__append_88)
+@BUILD_PLUGIN_DISK_TRUE@disk_la_CFLAGS = $(AM_CFLAGS) $(am__append_94)
 @BUILD_PLUGIN_DISK_TRUE@disk_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_DISK_TRUE@disk_la_LIBADD = $(am__append_85) \
-@BUILD_PLUGIN_DISK_TRUE@	$(am__append_86) $(am__append_87) \
-@BUILD_PLUGIN_DISK_TRUE@	$(am__append_89) $(am__append_90)
+@BUILD_PLUGIN_DISK_TRUE@disk_la_LIBADD = $(am__append_91) \
+@BUILD_PLUGIN_DISK_TRUE@	$(am__append_92) $(am__append_93) \
+@BUILD_PLUGIN_DISK_TRUE@	$(am__append_95) $(am__append_96)
 @BUILD_PLUGIN_DNS_TRUE@dns_la_SOURCES = dns.c utils_dns.c utils_dns.h
 @BUILD_PLUGIN_DNS_TRUE@dns_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_DNS_TRUE@dns_la_LIBADD = -lpcap -lpthread
 @BUILD_PLUGIN_EMAIL_TRUE@email_la_SOURCES = email.c
 @BUILD_PLUGIN_EMAIL_TRUE@email_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_EMAIL_TRUE@email_la_LIBADD = -lpthread
@@ -2263,21 +2336,21 @@
 @BUILD_PLUGIN_GMOND_TRUE@gmond_la_SOURCES = gmond.c
 @BUILD_PLUGIN_GMOND_TRUE@gmond_la_CPPFLAGS = $(AM_CPPFLAGS) $(GANGLIA_CPPFLAGS)
 @BUILD_PLUGIN_GMOND_TRUE@gmond_la_LDFLAGS = -module -avoid-version $(GANGLIA_LDFLAGS)
 @BUILD_PLUGIN_GMOND_TRUE@gmond_la_LIBADD = $(GANGLIA_LIBS)
 @BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_SOURCES = hddtemp.c
 @BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_LIBADD = $(am__append_115)
+@BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_LIBADD = $(am__append_121)
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_SOURCES = interface.c
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_121)
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_127)
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LIBADD = $(am__append_122) \
-@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_123) \
-@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_124) \
-@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_125)
+@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LIBADD = $(am__append_128) \
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_129) \
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_130) \
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_131)
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_SOURCES = iptables.c
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBIPTC_CPPFLAGS)
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBIPTC_LDFLAGS)
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_LIBADD = -liptc
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_SOURCES = ipmi.c
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_OPENIPMI_CFLAGS)
@@ -2298,16 +2371,16 @@
 @BUILD_PLUGIN_LIBVIRT_TRUE@		$(BUILD_WITH_LIBVIRT_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
 
 @BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_LIBADD = $(BUILD_WITH_LIBVIRT_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
 @BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_LOAD_TRUE@load_la_SOURCES = load.c
 @BUILD_PLUGIN_LOAD_TRUE@load_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_147)
+@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_153)
 @BUILD_PLUGIN_LOAD_TRUE@load_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_LOAD_TRUE@load_la_LIBADD = $(am__append_148) \
-@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_149)
+@BUILD_PLUGIN_LOAD_TRUE@load_la_LIBADD = $(am__append_154) \
+@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_155)
 @BUILD_PLUGIN_LOGFILE_TRUE@logfile_la_SOURCES = logfile.c
 @BUILD_PLUGIN_LOGFILE_TRUE@logfile_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_LPAR_TRUE@lpar_la_SOURCES = lpar.c
 @BUILD_PLUGIN_LPAR_TRUE@lpar_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_LPAR_TRUE@lpar_la_LIBADD = -lperfstat
 @BUILD_PLUGIN_MADWIFI_TRUE@madwifi_la_SOURCES = madwifi.c madwifi.h
@@ -2321,85 +2394,85 @@
 @BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@match_timediff_la_SOURCES = match_timediff.c
 @BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@match_timediff_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MATCH_VALUE_TRUE@match_value_la_SOURCES = match_value.c
 @BUILD_PLUGIN_MATCH_VALUE_TRUE@match_value_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MBMON_TRUE@mbmon_la_SOURCES = mbmon.c
 @BUILD_PLUGIN_MBMON_TRUE@mbmon_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_MBMON_TRUE@mbmon_la_LIBADD = $(am__append_175)
+@BUILD_PLUGIN_MBMON_TRUE@mbmon_la_LIBADD = $(am__append_181)
 @BUILD_PLUGIN_MD_TRUE@md_la_SOURCES = md.c
 @BUILD_PLUGIN_MD_TRUE@md_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_SOURCES = memcachec.c
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBMEMCACHED_LDFLAGS)
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_CPPFLAGS = $(BUILD_WITH_LIBMEMCACHED_CPPFLAGS)
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_LIBADD = $(BUILD_WITH_LIBMEMCACHED_LIBS)
 @BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_SOURCES = memcached.c
 @BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_LIBADD = $(am__append_185)
+@BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_LIBADD = $(am__append_191)
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_SOURCES = memory.c
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_193)
+@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_199)
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_MEMORY_TRUE@memory_la_LIBADD = $(am__append_191) \
-@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_192) $(am__append_194) \
-@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_195)
+@BUILD_PLUGIN_MEMORY_TRUE@memory_la_LIBADD = $(am__append_197) \
+@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_198) $(am__append_200) \
+@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_201)
 @BUILD_PLUGIN_MODBUS_TRUE@modbus_la_SOURCES = modbus.c
 @BUILD_PLUGIN_MODBUS_TRUE@modbus_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MODBUS_TRUE@modbus_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBMODBUS_CFLAGS)
 @BUILD_PLUGIN_MODBUS_TRUE@modbus_la_LIBADD = $(BUILD_WITH_LIBMODBUS_LIBS)
 @BUILD_PLUGIN_MULTIMETER_TRUE@multimeter_la_SOURCES = multimeter.c
 @BUILD_PLUGIN_MULTIMETER_TRUE@multimeter_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MYSQL_TRUE@mysql_la_SOURCES = mysql.c
 @BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MYSQL_TRUE@mysql_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_MYSQL_TRUE@	$(am__append_204)
-@BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LIBADD = $(am__append_205)
+@BUILD_PLUGIN_MYSQL_TRUE@	$(am__append_210)
+@BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LIBADD = $(am__append_211)
 @BUILD_PLUGIN_NETAPP_TRUE@netapp_la_SOURCES = netapp.c
 @BUILD_PLUGIN_NETAPP_TRUE@netapp_la_CPPFLAGS = $(AM_CPPFLAGS) $(LIBNETAPP_CPPFLAGS)
 @BUILD_PLUGIN_NETAPP_TRUE@netapp_la_LDFLAGS = -module -avoid-version $(LIBNETAPP_LDFLAGS)
 @BUILD_PLUGIN_NETAPP_TRUE@netapp_la_LIBADD = $(LIBNETAPP_LIBS)
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_SOURCES = netlink.c
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBNETLINK_CFLAGS)
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_LIBADD = $(BUILD_WITH_LIBNETLINK_LIBS)
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_SOURCES = network.c network.h \
 @BUILD_PLUGIN_NETWORK_TRUE@		     utils_fbhash.c utils_fbhash.h
 
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_CPPFLAGS = $(AM_CPPFLAGS) \
-@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_215)
+@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_221)
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_LDFLAGS = -module -avoid-version \
-@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_216)
+@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_222)
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_LIBADD = -lpthread \
-@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_214) $(am__append_217)
+@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_220) $(am__append_223)
 @BUILD_PLUGIN_NFS_TRUE@nfs_la_SOURCES = nfs.c
 @BUILD_PLUGIN_NFS_TRUE@nfs_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_FSCACHE_TRUE@fscache_la_SOURCES = fscache.c
 @BUILD_PLUGIN_FSCACHE_TRUE@fscache_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_SOURCES = nginx.c
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_NGINX_TRUE@	$(am__append_227)
-@BUILD_PLUGIN_NGINX_TRUE@nginx_la_LIBADD = $(am__append_228)
+@BUILD_PLUGIN_NGINX_TRUE@	$(am__append_233)
+@BUILD_PLUGIN_NGINX_TRUE@nginx_la_LIBADD = $(am__append_234)
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_SOURCES = notify_desktop.c
 @BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_CFLAGS = $(AM_CFLAGS) $(LIBNOTIFY_CFLAGS)
 @BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_LIBADD = $(LIBNOTIFY_LIBS)
 @BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@notify_email_la_SOURCES = notify_email.c
 @BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@notify_email_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@notify_email_la_LIBADD = -lesmtp -lssl -lcrypto -lpthread -ldl
 @BUILD_PLUGIN_NTPD_TRUE@ntpd_la_SOURCES = ntpd.c
 @BUILD_PLUGIN_NTPD_TRUE@ntpd_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_NTPD_TRUE@ntpd_la_LIBADD = $(am__append_238)
+@BUILD_PLUGIN_NTPD_TRUE@ntpd_la_LIBADD = $(am__append_244)
 @BUILD_PLUGIN_NUMA_TRUE@numa_la_SOURCES = numa.c
 @BUILD_PLUGIN_NUMA_TRUE@numa_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NUT_TRUE@nut_la_SOURCES = nut.c
 @BUILD_PLUGIN_NUT_TRUE@nut_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBUPSCLIENT_CFLAGS)
 @BUILD_PLUGIN_NUT_TRUE@nut_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NUT_TRUE@nut_la_LIBADD = -lpthread $(BUILD_WITH_LIBUPSCLIENT_LIBS)
 @BUILD_PLUGIN_OLSRD_TRUE@olsrd_la_SOURCES = olsrd.c
 @BUILD_PLUGIN_OLSRD_TRUE@olsrd_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_OLSRD_TRUE@olsrd_la_LIBADD = $(am__append_248)
+@BUILD_PLUGIN_OLSRD_TRUE@olsrd_la_LIBADD = $(am__append_254)
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_SOURCES = onewire.c
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_CFLAGS = $(AM_CFLAGS)
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_CPPFLAGS = $(BUILD_WITH_LIBOWCAPI_CPPFLAGS)
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_LIBADD = $(BUILD_WITH_LIBOWCAPI_LIBS)
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_OPENVPN_TRUE@openvpn_la_SOURCES = openvpn.c
@@ -2416,16 +2489,18 @@
 # Despite C99 providing the "bool" type thru stdbool.h, Perl defines its own
 # version of that type if HAS_BOOL is not defined... *sigh*
 @BUILD_PLUGIN_PERL_TRUE@perl_la_CPPFLAGS = $(AM_CPPFLAGS) -DHAS_BOOL=1
 @BUILD_PLUGIN_PERL_TRUE@perl_la_CFLAGS = $(AM_CFLAGS) $(PERL_CFLAGS) \
 @BUILD_PLUGIN_PERL_TRUE@	-DXS_VERSION=\"$(VERSION)\" \
 @BUILD_PLUGIN_PERL_TRUE@	-DVERSION=\"$(VERSION)\" \
-@BUILD_PLUGIN_PERL_TRUE@	$(am__append_261)
+@BUILD_PLUGIN_PERL_TRUE@	$(am__append_267)
 @BUILD_PLUGIN_PERL_TRUE@perl_la_LDFLAGS = -module -avoid-version \
 @BUILD_PLUGIN_PERL_TRUE@		$(PERL_LDFLAGS)
 
+@BUILD_PLUGIN_PF_TRUE@pf_la_SOURCES = pf.c
+@BUILD_PLUGIN_PF_TRUE@pf_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_PINBA_TRUE@pinba_la_SOURCES = pinba.c
 @BUILD_PLUGIN_PINBA_TRUE@pinba_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_PINBA_TRUE@pinba_la_LIBADD = -lprotobuf-c
 @BUILD_PLUGIN_PING_TRUE@ping_la_SOURCES = ping.c
 @BUILD_PLUGIN_PING_TRUE@ping_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBOPING_CPPFLAGS)
 @BUILD_PLUGIN_PING_TRUE@ping_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBOPING_LDFLAGS)
@@ -2440,18 +2515,18 @@
 @BUILD_PLUGIN_POSTGRESQL_TRUE@postgresql_la_LIBADD = -lpq
 @BUILD_PLUGIN_POWERDNS_TRUE@powerdns_la_SOURCES = powerdns.c
 @BUILD_PLUGIN_POWERDNS_TRUE@powerdns_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_SOURCES = python.c pyconfig.c pyvalues.c cpython.h
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_PYTHON_CPPFLAGS)
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_PYTHON_TRUE@	$(am__append_279)
+@BUILD_PLUGIN_PYTHON_TRUE@	$(am__append_288)
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_PYTHON_LDFLAGS)
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_LIBADD = $(BUILD_WITH_PYTHON_LIBS)
 @BUILD_PLUGIN_PROCESSES_TRUE@processes_la_SOURCES = processes.c
 @BUILD_PLUGIN_PROCESSES_TRUE@processes_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_PROCESSES_TRUE@processes_la_LIBADD = $(am__append_285)
+@BUILD_PLUGIN_PROCESSES_TRUE@processes_la_LIBADD = $(am__append_294)
 @BUILD_PLUGIN_PROTOCOLS_TRUE@protocols_la_SOURCES = protocols.c
 @BUILD_PLUGIN_PROTOCOLS_TRUE@protocols_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_REDIS_TRUE@redis_la_SOURCES = redis.c
 @BUILD_PLUGIN_REDIS_TRUE@redis_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBCREDIS_LDFLAGS)
 @BUILD_PLUGIN_REDIS_TRUE@redis_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBCREDIS_CPPFLAGS)
 @BUILD_PLUGIN_REDIS_TRUE@redis_la_LIBADD = -lcredis
@@ -2473,22 +2548,22 @@
 @BUILD_PLUGIN_SENSORS_TRUE@sensors_la_LIBADD = -lsensors
 @BUILD_PLUGIN_SERIAL_TRUE@serial_la_SOURCES = serial.c
 @BUILD_PLUGIN_SERIAL_TRUE@serial_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_SNMP_TRUE@snmp_la_SOURCES = snmp.c
 @BUILD_PLUGIN_SNMP_TRUE@snmp_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_SNMP_TRUE@snmp_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_308)
-@BUILD_PLUGIN_SNMP_TRUE@snmp_la_LIBADD = $(am__append_309) \
-@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_310)
+@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_317)
+@BUILD_PLUGIN_SNMP_TRUE@snmp_la_LIBADD = $(am__append_318) \
+@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_319)
 @BUILD_PLUGIN_SWAP_TRUE@swap_la_SOURCES = swap.c
 @BUILD_PLUGIN_SWAP_TRUE@swap_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_319)
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_328)
 @BUILD_PLUGIN_SWAP_TRUE@swap_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_SWAP_TRUE@swap_la_LIBADD = $(am__append_316) \
-@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_317) $(am__append_318) \
-@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_320) $(am__append_321)
+@BUILD_PLUGIN_SWAP_TRUE@swap_la_LIBADD = $(am__append_325) \
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_326) $(am__append_327) \
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_329) $(am__append_330)
 @BUILD_PLUGIN_SYSLOG_TRUE@syslog_la_SOURCES = syslog.c
 @BUILD_PLUGIN_SYSLOG_TRUE@syslog_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TABLE_TRUE@table_la_SOURCES = table.c
 @BUILD_PLUGIN_TABLE_TRUE@table_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TAIL_TRUE@tail_la_SOURCES = tail.c
 @BUILD_PLUGIN_TAIL_TRUE@tail_la_LDFLAGS = -module -avoid-version
@@ -2504,44 +2579,45 @@
 @BUILD_PLUGIN_TARGET_SET_TRUE@target_set_la_SOURCES = target_set.c
 @BUILD_PLUGIN_TARGET_SET_TRUE@target_set_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@target_v5upgrade_la_SOURCES = target_v5upgrade.c
 @BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@target_v5upgrade_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_SOURCES = tcpconns.c
 @BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_LIBADD = $(am__append_352)
+@BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_LIBADD = $(am__append_361)
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@teamspeak2_la_SOURCES = teamspeak2.c
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@teamspeak2_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TED_TRUE@ted_la_SOURCES = ted.c
 @BUILD_PLUGIN_TED_TRUE@ted_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_THERMAL_TRUE@thermal_la_SOURCES = thermal.c
 @BUILD_PLUGIN_THERMAL_TRUE@thermal_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_THRESHOLD_TRUE@threshold_la_SOURCES = threshold.c
 @BUILD_PLUGIN_THRESHOLD_TRUE@threshold_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TOKYOTYRANT_TRUE@tokyotyrant_la_SOURCES = tokyotyrant.c
 @BUILD_PLUGIN_TOKYOTYRANT_TRUE@tokyotyrant_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBTOKYOTYRANT_CPPFLAGS)
 @BUILD_PLUGIN_TOKYOTYRANT_TRUE@tokyotyrant_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBTOKYOTYRANT_LDFLAGS)
 @BUILD_PLUGIN_TOKYOTYRANT_TRUE@tokyotyrant_la_LIBADD = $(BUILD_WITH_LIBTOKYOTYRANT_LIBS) \
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@	$(am__append_366)
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@	$(am__append_375)
 @BUILD_PLUGIN_UNIXSOCK_TRUE@unixsock_la_SOURCES = unixsock.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_flush.h utils_cmd_flush.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_getval.h utils_cmd_getval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_listval.h utils_cmd_listval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_putval.h utils_cmd_putval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_putnotif.h utils_cmd_putnotif.c
 
 @BUILD_PLUGIN_UNIXSOCK_TRUE@unixsock_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_UNIXSOCK_TRUE@unixsock_la_LIBADD = -lpthread
 @BUILD_PLUGIN_UPTIME_TRUE@uptime_la_SOURCES = uptime.c
 @BUILD_PLUGIN_UPTIME_TRUE@uptime_la_CFLAGS = $(AM_CFLAGS)
 @BUILD_PLUGIN_UPTIME_TRUE@uptime_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_UPTIME_TRUE@uptime_la_LIBADD = $(am__append_373)
+@BUILD_PLUGIN_UPTIME_TRUE@uptime_la_LIBADD = $(am__append_382) \
+@BUILD_PLUGIN_UPTIME_TRUE@	$(am__append_383)
 @BUILD_PLUGIN_USERS_TRUE@users_la_SOURCES = users.c
 @BUILD_PLUGIN_USERS_TRUE@users_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_USERS_TRUE@	$(am__append_377)
+@BUILD_PLUGIN_USERS_TRUE@	$(am__append_387)
 @BUILD_PLUGIN_USERS_TRUE@users_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_USERS_TRUE@users_la_LIBADD = $(am__append_378)
+@BUILD_PLUGIN_USERS_TRUE@users_la_LIBADD = $(am__append_388)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_SOURCES = uuid.c
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBHAL_CFLAGS)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_LIBADD = $(BUILD_WITH_LIBHAL_LIBS)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_VARNISH_TRUE@varnish_la_SOURCES = varnish.c
 @BUILD_PLUGIN_VARNISH_TRUE@varnish_la_LDFLAGS = -module -avoid-version
@@ -2551,23 +2627,24 @@
 @BUILD_PLUGIN_VMEM_TRUE@vmem_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_VSERVER_TRUE@vserver_la_SOURCES = vserver.c
 @BUILD_PLUGIN_VSERVER_TRUE@vserver_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_WIRELESS_TRUE@wireless_la_SOURCES = wireless.c
 @BUILD_PLUGIN_WIRELESS_TRUE@wireless_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@write_graphite_la_SOURCES = write_graphite.c \
-@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@			utils_format_json.c utils_format_json.h
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@                        utils_format_graphite.c utils_format_graphite.h \
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@                        utils_format_json.c utils_format_json.h
 
 @BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@write_graphite_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_SOURCES = write_http.c \
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@			utils_format_json.c utils_format_json.h
 
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__append_401)
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__append_411)
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_LIBADD =  \
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__append_402)
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__append_412)
 @BUILD_PLUGIN_WRITE_MONGODB_TRUE@write_mongodb_la_SOURCES = write_mongodb.c
 @BUILD_PLUGIN_WRITE_MONGODB_TRUE@write_mongodb_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBMONGOC_CPPFLAGS)
 @BUILD_PLUGIN_WRITE_MONGODB_TRUE@write_mongodb_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBMONGOC_LDFLAGS)
 @BUILD_PLUGIN_WRITE_MONGODB_TRUE@write_mongodb_la_LIBADD = -lmongoc
 @BUILD_PLUGIN_WRITE_REDIS_TRUE@write_redis_la_SOURCES = write_redis.c
 @BUILD_PLUGIN_WRITE_REDIS_TRUE@write_redis_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBCREDIS_LDFLAGS)
@@ -2601,12 +2678,21 @@
 EXTRA_DIST = types.db pinba.proto collectd.conf.pod collectd-email.pod \
 	collectd-exec.pod collectdctl.pod collectd-java.pod \
 	collectdmon.pod collectd-nagios.pod collectd-perl.pod \
 	collectd-python.pod collectd.pod collectd-snmp.pod \
 	collectd-threshold.pod collectd-unixsock.pod \
 	postgresql_default.conf types.db.pod
+@BUILD_FEATURE_DEBUG_TRUE@utils_vl_lookup_test_SOURCES = utils_vl_lookup_test.c \
+@BUILD_FEATURE_DEBUG_TRUE@                               utils_vl_lookup.h utils_vl_lookup.c \
+@BUILD_FEATURE_DEBUG_TRUE@                               utils_avltree.c utils_avltree.h \
+@BUILD_FEATURE_DEBUG_TRUE@                               common.h
+
+@BUILD_FEATURE_DEBUG_TRUE@utils_vl_lookup_test_CPPFLAGS = $(AM_CPPFLAGS) $(LTDLINCL) -DBUILD_TEST=1
+@BUILD_FEATURE_DEBUG_TRUE@utils_vl_lookup_test_CFLAGS = $(AM_CFLAGS)
+@BUILD_FEATURE_DEBUG_TRUE@utils_vl_lookup_test_LDFLAGS = -export-dynamic
+@BUILD_FEATURE_DEBUG_TRUE@utils_vl_lookup_test_LDADD = 
 all: $(BUILT_SOURCES) config.h
 	$(MAKE) $(AM_MAKEFLAGS) all-recursive
 
 .SUFFIXES:
 .SUFFIXES: .1 .5 .c .lo .o .obj .pod
 $(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
@@ -2686,12 +2772,14 @@
 	@list='$(pkglib_LTLIBRARIES)'; for p in $$list; do \
 	  dir="`echo $$p | sed -e 's|/[^/]*$$||'`"; \
 	  test "$$dir" != "$$p" || dir=.; \
 	  echo "rm -f \"$${dir}/so_locations\""; \
 	  rm -f "$${dir}/so_locations"; \
 	done
+aggregation.la: $(aggregation_la_OBJECTS) $(aggregation_la_DEPENDENCIES) 
+	$(aggregation_la_LINK) $(am_aggregation_la_rpath) $(aggregation_la_OBJECTS) $(aggregation_la_LIBADD) $(LIBS)
 amqp.la: $(amqp_la_OBJECTS) $(amqp_la_DEPENDENCIES) 
 	$(amqp_la_LINK) $(am_amqp_la_rpath) $(amqp_la_OBJECTS) $(amqp_la_LIBADD) $(LIBS)
 apache.la: $(apache_la_OBJECTS) $(apache_la_DEPENDENCIES) 
 	$(apache_la_LINK) $(am_apache_la_rpath) $(apache_la_OBJECTS) $(apache_la_LIBADD) $(LIBS)
 apcups.la: $(apcups_la_OBJECTS) $(apcups_la_DEPENDENCIES) 
 	$(apcups_la_LINK) $(am_apcups_la_rpath) $(apcups_la_OBJECTS) $(apcups_la_LIBADD) $(LIBS)
@@ -2818,12 +2906,14 @@
 openvpn.la: $(openvpn_la_OBJECTS) $(openvpn_la_DEPENDENCIES) 
 	$(openvpn_la_LINK) $(am_openvpn_la_rpath) $(openvpn_la_OBJECTS) $(openvpn_la_LIBADD) $(LIBS)
 oracle.la: $(oracle_la_OBJECTS) $(oracle_la_DEPENDENCIES) 
 	$(oracle_la_LINK) $(am_oracle_la_rpath) $(oracle_la_OBJECTS) $(oracle_la_LIBADD) $(LIBS)
 perl.la: $(perl_la_OBJECTS) $(perl_la_DEPENDENCIES) 
 	$(perl_la_LINK) $(am_perl_la_rpath) $(perl_la_OBJECTS) $(perl_la_LIBADD) $(LIBS)
+pf.la: $(pf_la_OBJECTS) $(pf_la_DEPENDENCIES) 
+	$(pf_la_LINK) $(am_pf_la_rpath) $(pf_la_OBJECTS) $(pf_la_LIBADD) $(LIBS)
 pinba.la: $(pinba_la_OBJECTS) $(pinba_la_DEPENDENCIES) 
 	$(pinba_la_LINK) $(am_pinba_la_rpath) $(pinba_la_OBJECTS) $(pinba_la_LIBADD) $(LIBS)
 ping.la: $(ping_la_OBJECTS) $(ping_la_DEPENDENCIES) 
 	$(ping_la_LINK) $(am_ping_la_rpath) $(ping_la_OBJECTS) $(ping_la_LIBADD) $(LIBS)
 postgresql.la: $(postgresql_la_OBJECTS) $(postgresql_la_DEPENDENCIES) 
 	$(postgresql_la_LINK) $(am_postgresql_la_rpath) $(postgresql_la_OBJECTS) $(postgresql_la_LIBADD) $(LIBS)
@@ -2998,27 +3088,35 @@
 collectd$(EXEEXT): $(collectd_OBJECTS) $(collectd_DEPENDENCIES) 
 	@rm -f collectd$(EXEEXT)
 	$(collectd_LINK) $(collectd_OBJECTS) $(collectd_LDADD) $(LIBS)
 collectd-nagios$(EXEEXT): $(collectd_nagios_OBJECTS) $(collectd_nagios_DEPENDENCIES) 
 	@rm -f collectd-nagios$(EXEEXT)
 	$(LINK) $(collectd_nagios_OBJECTS) $(collectd_nagios_LDADD) $(LIBS)
+collectd-tg$(EXEEXT): $(collectd_tg_OBJECTS) $(collectd_tg_DEPENDENCIES) 
+	@rm -f collectd-tg$(EXEEXT)
+	$(LINK) $(collectd_tg_OBJECTS) $(collectd_tg_LDADD) $(LIBS)
 collectdctl$(EXEEXT): $(collectdctl_OBJECTS) $(collectdctl_DEPENDENCIES) 
 	@rm -f collectdctl$(EXEEXT)
 	$(LINK) $(collectdctl_OBJECTS) $(collectdctl_LDADD) $(LIBS)
 collectdmon$(EXEEXT): $(collectdmon_OBJECTS) $(collectdmon_DEPENDENCIES) 
 	@rm -f collectdmon$(EXEEXT)
 	$(LINK) $(collectdmon_OBJECTS) $(collectdmon_LDADD) $(LIBS)
+utils_vl_lookup_test$(EXEEXT): $(utils_vl_lookup_test_OBJECTS) $(utils_vl_lookup_test_DEPENDENCIES) 
+	@rm -f utils_vl_lookup_test$(EXEEXT)
+	$(utils_vl_lookup_test_LINK) $(utils_vl_lookup_test_OBJECTS) $(utils_vl_lookup_test_LDADD) $(LIBS)
 
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
 
 distclean-compile:
 	-rm -f *.tab.c
 
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/aggregation.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/amqp_la-amqp.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/amqp_la-utils_cmd_putval.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/amqp_la-utils_format_graphite.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/amqp_la-utils_format_json.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/apache_la-apache.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/apcups.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/apple_sensors.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ascent_la-ascent.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/battery.Plo@am__quote@
@@ -3027,12 +3125,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-common.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-configfile.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-filter_chain.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-meta_data.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-nagios.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-plugin.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-tg.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-types_list.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_avltree.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_cache.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_complain.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_heap.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_ignorelist.Po@am__quote@
@@ -3104,12 +3203,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/olsrd.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/onewire_la-onewire.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/openvpn_la-openvpn.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/oracle_la-oracle.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/oracle_la-utils_db_query.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/perl_la-perl.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pf.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/pinba.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ping_la-ping.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/postgresql_la-postgresql.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/postgresql_la-utils_db_query.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/powerdns.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/processes.Plo@am__quote@
@@ -3148,14 +3248,20 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_flush.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_getval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_listval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_putnotif.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_putval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_dns.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_format_graphite.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_format_json.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_heap.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_mount.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_vl_lookup.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_vl_lookup_test-utils_avltree.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup_test.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/uuid_la-uuid.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/varnish_la-varnish.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/vmem.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/vserver.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/wireless.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/write_graphite.Plo@am__quote@
@@ -3198,12 +3304,19 @@
 @am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(amqp_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT amqp_la-utils_cmd_putval.lo -MD -MP -MF $(DEPDIR)/amqp_la-utils_cmd_putval.Tpo -c -o amqp_la-utils_cmd_putval.lo `test -f 'utils_cmd_putval.c' || echo '$(srcdir)/'`utils_cmd_putval.c
 @am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/amqp_la-utils_cmd_putval.Tpo $(DEPDIR)/amqp_la-utils_cmd_putval.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_cmd_putval.c' object='amqp_la-utils_cmd_putval.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(amqp_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o amqp_la-utils_cmd_putval.lo `test -f 'utils_cmd_putval.c' || echo '$(srcdir)/'`utils_cmd_putval.c
 
+amqp_la-utils_format_graphite.lo: utils_format_graphite.c
+@am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(amqp_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT amqp_la-utils_format_graphite.lo -MD -MP -MF $(DEPDIR)/amqp_la-utils_format_graphite.Tpo -c -o amqp_la-utils_format_graphite.lo `test -f 'utils_format_graphite.c' || echo '$(srcdir)/'`utils_format_graphite.c
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/amqp_la-utils_format_graphite.Tpo $(DEPDIR)/amqp_la-utils_format_graphite.Plo
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_format_graphite.c' object='amqp_la-utils_format_graphite.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(amqp_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o amqp_la-utils_format_graphite.lo `test -f 'utils_format_graphite.c' || echo '$(srcdir)/'`utils_format_graphite.c
+
 amqp_la-utils_format_json.lo: utils_format_json.c
 @am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(amqp_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT amqp_la-utils_format_json.lo -MD -MP -MF $(DEPDIR)/amqp_la-utils_format_json.Tpo -c -o amqp_la-utils_format_json.lo `test -f 'utils_format_json.c' || echo '$(srcdir)/'`utils_format_json.c
 @am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/amqp_la-utils_format_json.Tpo $(DEPDIR)/amqp_la-utils_format_json.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_format_json.c' object='amqp_la-utils_format_json.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(amqp_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o amqp_la-utils_format_json.lo `test -f 'utils_format_json.c' || echo '$(srcdir)/'`utils_format_json.c
@@ -3905,12 +4018,54 @@
 @am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectdmon_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT collectdmon-collectdmon.obj -MD -MP -MF $(DEPDIR)/collectdmon-collectdmon.Tpo -c -o collectdmon-collectdmon.obj `if test -f 'collectdmon.c'; then $(CYGPATH_W) 'collectdmon.c'; else $(CYGPATH_W) '$(srcdir)/collectdmon.c'; fi`
 @am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/collectdmon-collectdmon.Tpo $(DEPDIR)/collectdmon-collectdmon.Po
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='collectdmon.c' object='collectdmon-collectdmon.obj' libtool=no @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectdmon_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o collectdmon-collectdmon.obj `if test -f 'collectdmon.c'; then $(CYGPATH_W) 'collectdmon.c'; else $(CYGPATH_W) '$(srcdir)/collectdmon.c'; fi`
 
+utils_vl_lookup_test-utils_vl_lookup_test.o: utils_vl_lookup_test.c
+@am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -MT utils_vl_lookup_test-utils_vl_lookup_test.o -MD -MP -MF $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup_test.Tpo -c -o utils_vl_lookup_test-utils_vl_lookup_test.o `test -f 'utils_vl_lookup_test.c' || echo '$(srcdir)/'`utils_vl_lookup_test.c
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup_test.Tpo $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup_test.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_vl_lookup_test.c' object='utils_vl_lookup_test-utils_vl_lookup_test.o' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -c -o utils_vl_lookup_test-utils_vl_lookup_test.o `test -f 'utils_vl_lookup_test.c' || echo '$(srcdir)/'`utils_vl_lookup_test.c
+
+utils_vl_lookup_test-utils_vl_lookup_test.obj: utils_vl_lookup_test.c
+@am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -MT utils_vl_lookup_test-utils_vl_lookup_test.obj -MD -MP -MF $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup_test.Tpo -c -o utils_vl_lookup_test-utils_vl_lookup_test.obj `if test -f 'utils_vl_lookup_test.c'; then $(CYGPATH_W) 'utils_vl_lookup_test.c'; else $(CYGPATH_W) '$(srcdir)/utils_vl_lookup_test.c'; fi`
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup_test.Tpo $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup_test.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_vl_lookup_test.c' object='utils_vl_lookup_test-utils_vl_lookup_test.obj' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -c -o utils_vl_lookup_test-utils_vl_lookup_test.obj `if test -f 'utils_vl_lookup_test.c'; then $(CYGPATH_W) 'utils_vl_lookup_test.c'; else $(CYGPATH_W) '$(srcdir)/utils_vl_lookup_test.c'; fi`
+
+utils_vl_lookup_test-utils_vl_lookup.o: utils_vl_lookup.c
+@am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -MT utils_vl_lookup_test-utils_vl_lookup.o -MD -MP -MF $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup.Tpo -c -o utils_vl_lookup_test-utils_vl_lookup.o `test -f 'utils_vl_lookup.c' || echo '$(srcdir)/'`utils_vl_lookup.c
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup.Tpo $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_vl_lookup.c' object='utils_vl_lookup_test-utils_vl_lookup.o' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -c -o utils_vl_lookup_test-utils_vl_lookup.o `test -f 'utils_vl_lookup.c' || echo '$(srcdir)/'`utils_vl_lookup.c
+
+utils_vl_lookup_test-utils_vl_lookup.obj: utils_vl_lookup.c
+@am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -MT utils_vl_lookup_test-utils_vl_lookup.obj -MD -MP -MF $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup.Tpo -c -o utils_vl_lookup_test-utils_vl_lookup.obj `if test -f 'utils_vl_lookup.c'; then $(CYGPATH_W) 'utils_vl_lookup.c'; else $(CYGPATH_W) '$(srcdir)/utils_vl_lookup.c'; fi`
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup.Tpo $(DEPDIR)/utils_vl_lookup_test-utils_vl_lookup.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_vl_lookup.c' object='utils_vl_lookup_test-utils_vl_lookup.obj' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -c -o utils_vl_lookup_test-utils_vl_lookup.obj `if test -f 'utils_vl_lookup.c'; then $(CYGPATH_W) 'utils_vl_lookup.c'; else $(CYGPATH_W) '$(srcdir)/utils_vl_lookup.c'; fi`
+
+utils_vl_lookup_test-utils_avltree.o: utils_avltree.c
+@am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -MT utils_vl_lookup_test-utils_avltree.o -MD -MP -MF $(DEPDIR)/utils_vl_lookup_test-utils_avltree.Tpo -c -o utils_vl_lookup_test-utils_avltree.o `test -f 'utils_avltree.c' || echo '$(srcdir)/'`utils_avltree.c
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/utils_vl_lookup_test-utils_avltree.Tpo $(DEPDIR)/utils_vl_lookup_test-utils_avltree.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_avltree.c' object='utils_vl_lookup_test-utils_avltree.o' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -c -o utils_vl_lookup_test-utils_avltree.o `test -f 'utils_avltree.c' || echo '$(srcdir)/'`utils_avltree.c
+
+utils_vl_lookup_test-utils_avltree.obj: utils_avltree.c
+@am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -MT utils_vl_lookup_test-utils_avltree.obj -MD -MP -MF $(DEPDIR)/utils_vl_lookup_test-utils_avltree.Tpo -c -o utils_vl_lookup_test-utils_avltree.obj `if test -f 'utils_avltree.c'; then $(CYGPATH_W) 'utils_avltree.c'; else $(CYGPATH_W) '$(srcdir)/utils_avltree.c'; fi`
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/utils_vl_lookup_test-utils_avltree.Tpo $(DEPDIR)/utils_vl_lookup_test-utils_avltree.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_avltree.c' object='utils_vl_lookup_test-utils_avltree.obj' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(utils_vl_lookup_test_CPPFLAGS) $(CPPFLAGS) $(utils_vl_lookup_test_CFLAGS) $(CFLAGS) -c -o utils_vl_lookup_test-utils_avltree.obj `if test -f 'utils_avltree.c'; then $(CYGPATH_W) 'utils_avltree.c'; else $(CYGPATH_W) '$(srcdir)/utils_avltree.c'; fi`
+
 mostlyclean-libtool:
 	-rm -f *.lo
 
 clean-libtool:
 	-rm -rf .libs _libs
 install-man1: $(dist_man_MANS)
@@ -4350,13 +4505,13 @@
 	@if grep '\<POD ERRORS\>' $@ >/dev/null 2>&1; \
 	then \
 		echo "$@ has some POD errors!"; false; \
 	fi
 
 pinba.pb-c.c pinba.pb-c.h: pinba.proto
-	protoc-c -I$(srcdir) --c_out . $(srcdir)/pinba.proto
+	protoc-c --c_out . pinba.proto
 
 install-exec-hook:
 	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)
 	if test -e $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	then \
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf.pkg-orig; \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/memcached.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/memcached.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/memcached.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/memcached.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,12 +1,13 @@
 /**
  * collectd - src/memcached.c, based on src/hddtemp.c
  * Copyright (C) 2007       Antony Dovgal
- * Copyright (C) 2007-2010  Florian Forster
+ * Copyright (C) 2007-2012  Florian Forster
  * Copyright (C) 2009       Doug MacEachern
  * Copyright (C) 2009       Franck Lombardi
+ * Copyright (C) 2012       Nicolas Szalay
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; either version 2 of the License, or (at your
  * option) any later version.
  *
@@ -21,512 +22,628 @@
  *
  * Authors:
  *   Antony Dovgal <tony at daylessday dot org>
  *   Florian octo Forster <octo at collectd.org>
  *   Doug MacEachern <dougm at hyperic.com>
  *   Franck Lombardi
+ *   Nicolas Szalay
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
 
-# include <poll.h>
-# include <netdb.h>
-# include <sys/socket.h>
-# include <sys/un.h>
-# include <netinet/in.h>
-# include <netinet/tcp.h>
-
-/* Hack to work around the missing define in AIX */
-#ifndef MSG_DONTWAIT
-# define MSG_DONTWAIT MSG_NONBLOCK
-#endif
+#include <netdb.h>
+#include <sys/socket.h>
+#include <sys/un.h>
+#include <netinet/in.h>
+#include <netinet/tcp.h>
 
 #define MEMCACHED_DEF_HOST "127.0.0.1"
 #define MEMCACHED_DEF_PORT "11211"
 
-#define MEMCACHED_RETRY_COUNT 100
-
-static const char *config_keys[] =
+struct memcached_s
 {
-	"Socket",
-	"Host",
-	"Port"
+  char *name;
+  char *socket;
+  char *host;
+  char *port;
 };
-static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
+typedef struct memcached_s memcached_t;
+
+static _Bool memcached_have_instances = 0;
+
+static void memcached_free (memcached_t *st)
+{
+  if (st == NULL)
+    return;
+
+  sfree (st->name);
+  sfree (st->socket);
+  sfree (st->host);
+  sfree (st->port);
+}
+
+static int memcached_connect_unix (memcached_t *st)
+{
+  struct sockaddr_un serv_addr;
+  int fd;
 
-static char *memcached_socket = NULL;
-static char *memcached_host = NULL;
-static char memcached_port[16];
-
-static int memcached_query_daemon (char *buffer, int buffer_size) /* {{{ */
-{
-	int fd;
-	ssize_t status;
-	int buffer_fill;
-	int i = 0;
-
-	if (memcached_socket != NULL) {
-		struct sockaddr_un serv_addr;
-
-		memset (&serv_addr, 0, sizeof (serv_addr));
-		serv_addr.sun_family = AF_UNIX;
-		sstrncpy (serv_addr.sun_path, memcached_socket,
-				sizeof (serv_addr.sun_path));
-
-		/* create our socket descriptor */
-		fd = socket (AF_UNIX, SOCK_STREAM, 0);
-		if (fd < 0) {
-			char errbuf[1024];
-			ERROR ("memcached: unix socket: %s", sstrerror (errno, errbuf,
-						sizeof (errbuf)));
-			return -1;
-		}
-
-		/* connect to the memcached daemon */
-		status = (ssize_t) connect (fd, (struct sockaddr *) &serv_addr,
-				sizeof (serv_addr));
-		if (status != 0) {
-			shutdown (fd, SHUT_RDWR);
-			close (fd);
-			fd = -1;
-		}
-	}
-	else { /* if (memcached_socket == NULL) */
-		const char *host;
-		const char *port;
-
-		struct addrinfo  ai_hints;
-		struct addrinfo *ai_list, *ai_ptr;
-		int              ai_return = 0;
+  memset (&serv_addr, 0, sizeof (serv_addr));
+  serv_addr.sun_family = AF_UNIX;
+  sstrncpy (serv_addr.sun_path, st->socket,
+      sizeof (serv_addr.sun_path));
+
+  /* create our socket descriptor */
+  fd = socket (AF_UNIX, SOCK_STREAM, 0);
+  if (fd < 0)
+  {
+    char errbuf[1024];
+    ERROR ("memcached plugin: memcached_connect_unix: socket(2) failed: %s",
+        sstrerror (errno, errbuf, sizeof (errbuf)));
+    return (-1);
+  }
 
-		memset (&ai_hints, '\0', sizeof (ai_hints));
-		ai_hints.ai_flags    = 0;
+  return (fd);
+} /* int memcached_connect_unix */
+
+static int memcached_connect_inet (memcached_t *st)
+{
+  char *host;
+  char *port;
+
+  struct addrinfo  ai_hints;
+  struct addrinfo *ai_list, *ai_ptr;
+  int status;
+  int fd = -1;
+
+  memset (&ai_hints, 0, sizeof (ai_hints));
+  ai_hints.ai_flags    = 0;
 #ifdef AI_ADDRCONFIG
-		/*	ai_hints.ai_flags   |= AI_ADDRCONFIG; */
+  ai_hints.ai_flags   |= AI_ADDRCONFIG;
 #endif
-		ai_hints.ai_family   = AF_INET;
-		ai_hints.ai_socktype = SOCK_STREAM;
-		ai_hints.ai_protocol = 0;
-
-		host = memcached_host;
-		if (host == NULL) {
-			host = MEMCACHED_DEF_HOST;
-		}
-
-		port = memcached_port;
-		if (strlen (port) == 0) {
-			port = MEMCACHED_DEF_PORT;
-		}
-
-		if ((ai_return = getaddrinfo (host, port, &ai_hints, &ai_list)) != 0) {
-			char errbuf[1024];
-			ERROR ("memcached: getaddrinfo (%s, %s): %s",
-					host, port,
-					(ai_return == EAI_SYSTEM)
-					? sstrerror (errno, errbuf, sizeof (errbuf))
-					: gai_strerror (ai_return));
-			return -1;
-		}
-
-		fd = -1;
-		for (ai_ptr = ai_list; ai_ptr != NULL; ai_ptr = ai_ptr->ai_next) {
-			/* create our socket descriptor */
-			fd = socket (ai_ptr->ai_family, ai_ptr->ai_socktype, ai_ptr->ai_protocol);
-			if (fd < 0) {
-				char errbuf[1024];
-				ERROR ("memcached: socket: %s", sstrerror (errno, errbuf, sizeof (errbuf)));
-				continue;
-			}
-
-			/* connect to the memcached daemon */
-			status = (ssize_t) connect (fd, (struct sockaddr *) ai_ptr->ai_addr, ai_ptr->ai_addrlen);
-			if (status != 0) {
-				shutdown (fd, SHUT_RDWR);
-				close (fd);
-				fd = -1;
-				continue;
-			}
-
-			/* A socket could be opened and connecting succeeded. We're
-			 * done. */
-			break;
-		}
-
-		freeaddrinfo (ai_list);
-	}
-
-	if (fd < 0) {
-		ERROR ("memcached: Could not connect to daemon.");
-		return -1;
-	}
-
-	if (send(fd, "stats\r\n", sizeof("stats\r\n") - 1, MSG_DONTWAIT) != (sizeof("stats\r\n") - 1)) {
-		ERROR ("memcached: Could not send command to the memcached daemon.");
-		return -1;
-	}
-
-	{
-		struct pollfd p;
-		int status;
-
-		memset (&p, 0, sizeof (p));
-		p.fd = fd;
-		p.events = POLLIN | POLLERR | POLLHUP;
-		p.revents = 0;
-
-		status = poll (&p, /* nfds = */ 1,
-				/* timeout = */ CDTIME_T_TO_MS (interval_g));
-		if (status <= 0)
-		{
-			if (status == 0)
-			{
-				ERROR ("memcached: poll(2) timed out after %.3f seconds.",
-						CDTIME_T_TO_DOUBLE (interval_g));
-			}
-			else
-			{
-				char errbuf[1024];
-				ERROR ("memcached: poll(2) failed: %s",
-						sstrerror (errno, errbuf, sizeof (errbuf)));
-			}
-			shutdown (fd, SHUT_RDWR);
-			close (fd);
-			return (-1);
-		}
-	}
-
-	/* receive data from the memcached daemon */
-	memset (buffer, '\0', buffer_size);
-
-	buffer_fill = 0;
-	while ((status = recv (fd, buffer + buffer_fill, buffer_size - buffer_fill, MSG_DONTWAIT)) != 0) {
-		if (i > MEMCACHED_RETRY_COUNT) {
-			ERROR("recv() timed out");
-			break;
-		}
-		i++;
-
-		if (status == -1) {
-			char errbuf[1024];
-
-			if (errno == EAGAIN) {
-				continue;
-			}
-
-			ERROR ("memcached: Error reading from socket: %s",
-					sstrerror (errno, errbuf, sizeof (errbuf)));
-			shutdown(fd, SHUT_RDWR);
-			close (fd);
-			return -1;
-		}
-		buffer_fill += status;
-
-		if (buffer_fill > 3 && buffer[buffer_fill-5] == 'E' && buffer[buffer_fill-4] == 'N' && buffer[buffer_fill-3] == 'D') {
-			/* we got all the data */
-			break;
-		}
-	}
-
-	if (buffer_fill >= buffer_size) {
-		buffer[buffer_size - 1] = '\0';
-		WARNING ("memcached: Message from memcached has been truncated.");
-	} else if (buffer_fill == 0) {
-		WARNING ("memcached: Peer has unexpectedly shut down the socket. "
-				"Buffer: `%s'", buffer);
-		shutdown(fd, SHUT_RDWR);
-		close(fd);
-		return -1;
-	}
-
-	shutdown(fd, SHUT_RDWR);
-	close(fd);
-	return 0;
+  ai_hints.ai_family   = AF_UNSPEC;
+  ai_hints.ai_socktype = SOCK_STREAM;
+  ai_hints.ai_protocol = 0;
+
+  host = (st->host != NULL) ? st->host : MEMCACHED_DEF_HOST;
+  port = (st->port != NULL) ? st->port : MEMCACHED_DEF_PORT;
+
+  ai_list = NULL;
+  status = getaddrinfo (host, port, &ai_hints, &ai_list);
+  if (status != 0)
+  {
+    char errbuf[1024];
+    ERROR ("memcached plugin: memcached_connect_inet: "
+        "getaddrinfo(%s,%s) failed: %s",
+        host, port,
+        (status == EAI_SYSTEM)
+        ? sstrerror (errno, errbuf, sizeof (errbuf))
+        : gai_strerror (status));
+    return (-1);
+  }
+
+  for (ai_ptr = ai_list; ai_ptr != NULL; ai_ptr = ai_ptr->ai_next)
+  {
+    /* create our socket descriptor */
+    fd = socket (ai_ptr->ai_family, ai_ptr->ai_socktype, ai_ptr->ai_protocol);
+    if (fd < 0)
+    {
+      char errbuf[1024];
+      WARNING ("memcached plugin: memcached_connect_inet: "
+          "socket(2) failed: %s",
+          sstrerror (errno, errbuf, sizeof (errbuf)));
+      continue;
+    }
+
+    /* connect to the memcached daemon */
+    status = (int) connect (fd, ai_ptr->ai_addr, ai_ptr->ai_addrlen);
+    if (status != 0)
+    {
+      shutdown (fd, SHUT_RDWR);
+      close (fd);
+      fd = -1;
+      continue;
+    }
+
+    /* A socket could be opened and connecting succeeded. We're done. */
+    break;
+  }
+
+  freeaddrinfo (ai_list);
+  return (fd);
+} /* int memcached_connect_inet */
+
+static int memcached_connect (memcached_t *st)
+{
+  if (st->socket != NULL)
+    return (memcached_connect_unix (st));
+  else
+    return (memcached_connect_inet (st));
 }
-/* }}} */
 
-static int memcached_config (const char *key, const char *value) /* {{{ */
+static int memcached_query_daemon (char *buffer, size_t buffer_size, memcached_t *st)
 {
-	if (strcasecmp (key, "Socket") == 0) {
-		if (memcached_socket != NULL) {
-			free (memcached_socket);
-		}
-		memcached_socket = strdup (value);
-	} else if (strcasecmp (key, "Host") == 0) {
-		if (memcached_host != NULL) {
-			free (memcached_host);
-		}
-		memcached_host = strdup (value);
-	} else if (strcasecmp (key, "Port") == 0) {
-		int port = (int) (atof (value));
-		if ((port > 0) && (port <= 65535)) {
-			ssnprintf (memcached_port, sizeof (memcached_port), "%i", port);
-		} else {
-			sstrncpy (memcached_port, value, sizeof (memcached_port));
-		}
-	} else {
-		return -1;
-	}
+  int fd = -1;
+  int status;
+  size_t buffer_fill;
+
+  fd = memcached_connect (st);
+  if (fd < 0) {
+    ERROR ("memcached plugin: Instance \"%s\" could not connect to daemon.",
+        st->name);
+    return -1;
+  }
+
+  status = (int) swrite (fd, "stats\r\n", strlen ("stats\r\n"));
+  if (status != 0)
+  {
+    char errbuf[1024];
+    ERROR ("memcached plugin: write(2) failed: %s",
+        sstrerror (errno, errbuf, sizeof (errbuf)));
+    shutdown(fd, SHUT_RDWR);
+    close (fd);
+    return (-1);
+  }
+
+  /* receive data from the memcached daemon */
+  memset (buffer, 0, buffer_size);
+
+  buffer_fill = 0;
+  while ((status = (int) recv (fd, buffer + buffer_fill,
+          buffer_size - buffer_fill, /* flags = */ 0)) != 0)
+  {
+    char const end_token[5] = {'E', 'N', 'D', '\r', '\n'};
+    if (status < 0)
+    {
+      char errbuf[1024];
+
+      if ((errno == EAGAIN) || (errno == EINTR))
+          continue;
+
+      ERROR ("memcached: Error reading from socket: %s",
+          sstrerror (errno, errbuf, sizeof (errbuf)));
+      shutdown(fd, SHUT_RDWR);
+      close (fd);
+      return (-1);
+    }
+
+    buffer_fill += (size_t) status;
+    if (buffer_fill > buffer_size)
+    {
+      buffer_fill = buffer_size;
+      WARNING ("memcached plugin: Message was truncated.");
+      break;
+    }
+
+    /* If buffer ends in end_token, we have all the data. */
+    if (memcmp (buffer + buffer_fill - sizeof (end_token),
+          end_token, sizeof (end_token)) == 0)
+      break;
+  } /* while (recv) */
+
+  status = 0;
+  if (buffer_fill == 0)
+  {
+    WARNING ("memcached plugin: No data returned by memcached.");
+    status = -1;
+  }
+
+  shutdown(fd, SHUT_RDWR);
+  close(fd);
+  return (status);
+} /* int memcached_query_daemon */
 
-	return 0;
+static void memcached_init_vl (value_list_t *vl, memcached_t const *st)
+{
+  sstrncpy (vl->plugin, "memcached", sizeof (vl->plugin));
+  if (strcmp (st->name, "__legacy__") == 0) /* legacy mode */
+  {
+    sstrncpy (vl->host, hostname_g, sizeof (vl->host));
+  }
+  else
+  {
+    if (st->socket != NULL)
+      sstrncpy (vl->host, hostname_g, sizeof (vl->host));
+    else
+      sstrncpy (vl->host,
+          (st->host != NULL) ? st->host : MEMCACHED_DEF_HOST,
+          sizeof (vl->host));
+    sstrncpy (vl->plugin_instance, st->name, sizeof (vl->plugin_instance));
+  }
 }
-/* }}} */
 
 static void submit_derive (const char *type, const char *type_inst,
-		derive_t value) /* {{{ */
+    derive_t value, memcached_t *st)
 {
-	value_t values[1];
-	value_list_t vl = VALUE_LIST_INIT;
+  value_t values[1];
+  value_list_t vl = VALUE_LIST_INIT;
+  memcached_init_vl (&vl, st);
+
+  values[0].derive = value;
+
+  vl.values = values;
+  vl.values_len = 1;
+  sstrncpy (vl.type, type, sizeof (vl.type));
+  if (type_inst != NULL)
+    sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	values[0].derive = value;
-
-	vl.values = values;
-	vl.values_len = 1;
-	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
-	sstrncpy (vl.plugin, "memcached", sizeof (vl.plugin));
-	sstrncpy (vl.type, type, sizeof (vl.type));
-	if (type_inst != NULL)
-		sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
-
-	plugin_dispatch_values (&vl);
-} /* void memcached_submit_cmd */
-/* }}} */
+  plugin_dispatch_values (&vl);
+}
 
 static void submit_derive2 (const char *type, const char *type_inst,
-		derive_t value0, derive_t value1) /* {{{ */
+    derive_t value0, derive_t value1, memcached_t *st)
 {
-	value_t values[2];
-	value_list_t vl = VALUE_LIST_INIT;
+  value_t values[2];
+  value_list_t vl = VALUE_LIST_INIT;
+  memcached_init_vl (&vl, st);
+
+  values[0].derive = value0;
+  values[1].derive = value1;
+
+  vl.values = values;
+  vl.values_len = 2;
+  sstrncpy (vl.type, type, sizeof (vl.type));
+  if (type_inst != NULL)
+    sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	values[0].derive = value0;
-	values[1].derive = value1;
-
-	vl.values = values;
-	vl.values_len = 2;
-	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
-	sstrncpy (vl.plugin, "memcached", sizeof (vl.plugin));
-	sstrncpy (vl.type, type, sizeof (vl.type));
-	if (type_inst != NULL)
-		sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
-
-	plugin_dispatch_values (&vl);
-} /* void memcached_submit_cmd */
-/* }}} */
+  plugin_dispatch_values (&vl);
+}
 
 static void submit_gauge (const char *type, const char *type_inst,
-		gauge_t value) /* {{{ */
+    gauge_t value, memcached_t *st)
 {
-	value_t values[1];
-	value_list_t vl = VALUE_LIST_INIT;
-
-	values[0].gauge = value;
+  value_t values[1];
+  value_list_t vl = VALUE_LIST_INIT;
+  memcached_init_vl (&vl, st);
+
+  values[0].gauge = value;
+
+  vl.values = values;
+  vl.values_len = 1;
+  sstrncpy (vl.type, type, sizeof (vl.type));
+  if (type_inst != NULL)
+    sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	vl.values = values;
-	vl.values_len = 1;
-	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
-	sstrncpy (vl.plugin, "memcached", sizeof (vl.plugin));
-	sstrncpy (vl.type, type, sizeof (vl.type));
-	if (type_inst != NULL)
-		sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
-
-	plugin_dispatch_values (&vl);
+  plugin_dispatch_values (&vl);
 }
-/* }}} */
 
 static void submit_gauge2 (const char *type, const char *type_inst,
-		gauge_t value0, gauge_t value1) /* {{{ */
+    gauge_t value0, gauge_t value1, memcached_t *st)
 {
-	value_t values[2];
-	value_list_t vl = VALUE_LIST_INIT;
-
-	values[0].gauge = value0;
-	values[1].gauge = value1;
+  value_t values[2];
+  value_list_t vl = VALUE_LIST_INIT;
+  memcached_init_vl (&vl, st);
+
+  values[0].gauge = value0;
+  values[1].gauge = value1;
+
+  vl.values = values;
+  vl.values_len = 2;
+  sstrncpy (vl.type, type, sizeof (vl.type));
+  if (type_inst != NULL)
+    sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	vl.values = values;
-	vl.values_len = 2;
-	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
-	sstrncpy (vl.plugin, "memcached", sizeof (vl.plugin));
-	sstrncpy (vl.type, type, sizeof (vl.type));
-	if (type_inst != NULL)
-		sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
-
-	plugin_dispatch_values (&vl);
+  plugin_dispatch_values (&vl);
 }
-/* }}} */
 
-static int memcached_read (void) /* {{{ */
+static int memcached_read (user_data_t *user_data)
 {
-	char buf[4096];
-	char *fields[3];
-	char *ptr;
-	char *line;
-	char *saveptr;
-	int fields_num;
-
-	gauge_t bytes_used = NAN;
-	gauge_t bytes_total = NAN;
-	gauge_t hits = NAN;
-	gauge_t gets = NAN;
-	derive_t rusage_user = 0;
-	derive_t rusage_syst = 0;
-	derive_t octets_rx = 0;
-	derive_t octets_tx = 0;
-
-	/* get data from daemon */
-	if (memcached_query_daemon (buf, sizeof (buf)) < 0) {
-		return -1;
-	}
+  char buf[4096];
+  char *fields[3];
+  char *ptr;
+  char *line;
+  char *saveptr;
+  int fields_num;
+
+  gauge_t bytes_used = NAN;
+  gauge_t bytes_total = NAN;
+  gauge_t hits = NAN;
+  gauge_t gets = NAN;
+  derive_t rusage_user = 0;
+  derive_t rusage_syst = 0;
+  derive_t octets_rx = 0;
+  derive_t octets_tx = 0;
+
+  memcached_t *st;
+  st = user_data->data;
+
+  /* get data from daemon */
+  if (memcached_query_daemon (buf, sizeof (buf), st) < 0) {
+    return -1;
+  }
 
 #define FIELD_IS(cnst) \
-	(((sizeof(cnst) - 1) == name_len) && (strcmp (cnst, fields[1]) == 0))
+  (((sizeof(cnst) - 1) == name_len) && (strcmp (cnst, fields[1]) == 0))
+
+  ptr = buf;
+  saveptr = NULL;
+  while ((line = strtok_r (ptr, "\n\r", &saveptr)) != NULL)
+  {
+    int name_len;
+
+    ptr = NULL;
+
+    fields_num = strsplit(line, fields, 3);
+    if (fields_num != 3)
+      continue;
+
+    name_len = strlen(fields[1]);
+    if (name_len == 0)
+      continue;
+
+    /*
+     * For an explanation on these fields please refer to
+     * <http://code.sixapart.com/svn/memcached/trunk/server/doc/protocol.txt>
+     */
+
+    /*
+     * CPU time consumed by the memcached process
+     */
+    if (FIELD_IS ("rusage_user"))
+    {
+      rusage_user = atoll (fields[2]);
+    }
+    else if (FIELD_IS ("rusage_system"))
+    {
+      rusage_syst = atoll(fields[2]);
+    }
+
+    /*
+     * Number of threads of this instance
+     */
+    else if (FIELD_IS ("threads"))
+    {
+      submit_gauge2 ("ps_count", NULL, NAN, atof (fields[2]), st);
+    }
+
+    /*
+     * Number of items stored
+     */
+    else if (FIELD_IS ("curr_items"))
+    {
+      submit_gauge ("memcached_items", "current", atof (fields[2]), st);
+    }
+
+    /*
+     * Number of bytes used and available (total - used)
+     */
+    else if (FIELD_IS ("bytes"))
+    {
+      bytes_used = atof (fields[2]);
+    }
+    else if (FIELD_IS ("limit_maxbytes"))
+    {
+      bytes_total = atof(fields[2]);
+    }
+
+    /*
+     * Connections
+     */
+    else if (FIELD_IS ("curr_connections"))
+    {
+      submit_gauge ("memcached_connections", "current", atof (fields[2]), st);
+    }
+
+    /*
+     * Commands
+     */
+    else if ((name_len > 4) && (strncmp (fields[1], "cmd_", 4) == 0))
+    {
+      const char *name = fields[1] + 4;
+      submit_derive ("memcached_command", name, atoll (fields[2]), st);
+      if (strcmp (name, "get") == 0)
+        gets = atof (fields[2]);
+    }
+
+    /*
+     * Operations on the cache, i. e. cache hits, cache misses and evictions of items
+     */
+    else if (FIELD_IS ("get_hits"))
+    {
+      submit_derive ("memcached_ops", "hits", atoll (fields[2]), st);
+      hits = atof (fields[2]);
+    }
+    else if (FIELD_IS ("get_misses"))
+    {
+      submit_derive ("memcached_ops", "misses", atoll (fields[2]), st);
+    }
+    else if (FIELD_IS ("evictions"))
+    {
+      submit_derive ("memcached_ops", "evictions", atoll (fields[2]), st);
+    }
+
+    /*
+     * Network traffic
+     */
+    else if (FIELD_IS ("bytes_read"))
+    {
+      octets_rx = atoll (fields[2]);
+    }
+    else if (FIELD_IS ("bytes_written"))
+    {
+      octets_tx = atoll (fields[2]);
+    }
+  } /* while ((line = strtok_r (ptr, "\n\r", &saveptr)) != NULL) */
+
+  if (!isnan (bytes_used) && !isnan (bytes_total) && (bytes_used <= bytes_total))
+    submit_gauge2 ("df", "cache", bytes_used, bytes_total - bytes_used, st);
+
+  if ((rusage_user != 0) || (rusage_syst != 0))
+    submit_derive2 ("ps_cputime", NULL, rusage_user, rusage_syst, st);
+
+  if ((octets_rx != 0) || (octets_tx != 0))
+    submit_derive2 ("memcached_octets", NULL, octets_rx, octets_tx, st);
+
+  if (!isnan (gets) && !isnan (hits))
+  {
+    gauge_t rate = NAN;
+
+    if (gets != 0.0)
+      rate = 100.0 * hits / gets;
 
-	ptr = buf;
-	saveptr = NULL;
-	while ((line = strtok_r (ptr, "\n\r", &saveptr)) != NULL)
-	{
-		int name_len;
-
-		ptr = NULL;
-
-		fields_num = strsplit(line, fields, 3);
-		if (fields_num != 3)
-			continue;
-
-		name_len = strlen(fields[1]);
-		if (name_len == 0)
-			continue;
-
-		/*
-		 * For an explanation on these fields please refer to
-		 * <http://code.sixapart.com/svn/memcached/trunk/server/doc/protocol.txt>
-		 */
-
-		/*
-		 * CPU time consumed by the memcached process
-		 */
-		if (FIELD_IS ("rusage_user"))
-		{
-			rusage_user = atoll (fields[2]);
-		}
-		else if (FIELD_IS ("rusage_system"))
-		{
-			rusage_syst = atoll(fields[2]);
-		}
-
-		/*
-		 * Number of threads of this instance
-		 */
-		else if (FIELD_IS ("threads"))
-		{
-			submit_gauge2 ("ps_count", NULL, NAN, atof (fields[2]));
-		}
-
-		/*
-		 * Number of items stored
-		 */
-		else if (FIELD_IS ("curr_items"))
-		{
-			submit_gauge ("memcached_items", "current", atof (fields[2]));
-		}
-
-		/*
-		 * Number of bytes used and available (total - used)
-		 */
-		else if (FIELD_IS ("bytes"))
-		{
-			bytes_used = atof (fields[2]);
-		}
-		else if (FIELD_IS ("limit_maxbytes"))
-		{
-			bytes_total = atof(fields[2]);
-		}
-
-		/*
-		 * Connections
-		 */
-		else if (FIELD_IS ("curr_connections"))
-		{
-			submit_gauge ("memcached_connections", "current", atof (fields[2]));
-		}
-
-		/*
-		 * Commands
-		 */
-		else if ((name_len > 4) && (strncmp (fields[1], "cmd_", 4) == 0))
-		{
-			const char *name = fields[1] + 4;
-			submit_derive ("memcached_command", name, atoll (fields[2]));
-			if (strcmp (name, "get") == 0)
-				gets = atof (fields[2]);
-		}
-
-		/*
-		 * Operations on the cache, i. e. cache hits, cache misses and evictions of items
-		 */
-		else if (FIELD_IS ("get_hits"))
-		{
-			submit_derive ("memcached_ops", "hits", atoll (fields[2]));
-			hits = atof (fields[2]);
-		}
-		else if (FIELD_IS ("get_misses"))
-		{
-			submit_derive ("memcached_ops", "misses", atoll (fields[2]));
-		}
-		else if (FIELD_IS ("evictions"))
-		{
-			submit_derive ("memcached_ops", "evictions", atoll (fields[2]));
-		}
-
-		/*
-		 * Network traffic
-		 */
-		else if (FIELD_IS ("bytes_read"))
-		{
-			octets_rx = atoll (fields[2]);
-		}
-		else if (FIELD_IS ("bytes_written"))
-		{
-			octets_tx = atoll (fields[2]);
-		}
-	} /* while ((line = strtok_r (ptr, "\n\r", &saveptr)) != NULL) */
-
-	if (!isnan (bytes_used) && !isnan (bytes_total) && (bytes_used <= bytes_total))
-		submit_gauge2 ("df", "cache", bytes_used, bytes_total - bytes_used);
-
-	if ((rusage_user != 0) || (rusage_syst != 0))
-		submit_derive2 ("ps_cputime", NULL, rusage_user, rusage_syst);
-
-	if ((octets_rx != 0) || (octets_tx != 0))
-		submit_derive2 ("memcached_octets", NULL, octets_rx, octets_tx);
-
-	if (!isnan (gets) && !isnan (hits))
-	{
-		gauge_t rate = NAN;
+    submit_gauge ("percent", "hitratio", rate, st);
+  }
 
-		if (gets != 0.0)
-			rate = 100.0 * hits / gets;
+  return 0;
+} /* int memcached_read */
 
-		submit_gauge ("percent", "hitratio", rate);
-	}
+static int memcached_add_read_callback (memcached_t *st)
+{
+  user_data_t ud;
+  char callback_name[3*DATA_MAX_NAME_LEN];
+  int status;
+
+  memset (&ud, 0, sizeof (ud));
+  ud.data = st;
+  ud.free_func = (void *) memcached_free;
+
+  assert (st->name != NULL);
+  ssnprintf (callback_name, sizeof (callback_name), "memcached/%s", st->name);
+
+  status = plugin_register_complex_read (/* group = */ "memcached",
+      /* name      = */ callback_name,
+      /* callback  = */ memcached_read,
+      /* interval  = */ NULL,
+      /* user_data = */ &ud);
+  return (status);
+} /* int memcached_add_read_callback */
+
+/* Configuration handling functiions
+ * <Plugin memcached>
+ *   <Instance "instance_name">
+ *     Host foo.zomg.com
+ *     Port "1234"
+ *   </Instance>
+ * </Plugin>
+ */
+static int config_add_instance(oconfig_item_t *ci)
+{
+  memcached_t *st;
+  int i;
+  int status = 0;
+
+  /* Disable automatic generation of default instance in the init callback. */
+  memcached_have_instances = 1;
+
+  st = malloc (sizeof (*st));
+  if (st == NULL)
+  {
+    ERROR ("memcached plugin: malloc failed.");
+    return (-1);
+  }
+
+  memset (st, 0, sizeof (*st));
+  st->name = NULL;
+  st->socket = NULL;
+  st->host = NULL;
+  st->port = NULL;
+
+  if (strcasecmp (ci->key, "Plugin") == 0) /* default instance */
+    st->name = sstrdup ("__legacy__");
+  else /* <Instance /> block */
+    status = cf_util_get_string (ci, &st->name);
+  if (status != 0)
+  {
+    sfree (st);
+    return (status);
+  }
+  assert (st->name != NULL);
+
+  for (i = 0; i < ci->children_num; i++)
+  {
+    oconfig_item_t *child = ci->children + i;
+
+    if (strcasecmp ("Socket", child->key) == 0)
+      status = cf_util_get_string (child, &st->socket);
+    else if (strcasecmp ("Host", child->key) == 0)
+      status = cf_util_get_string (child, &st->host);
+    else if (strcasecmp ("Port", child->key) == 0)
+      status = cf_util_get_service (child, &st->port);
+    else
+    {
+      WARNING ("memcached plugin: Option `%s' not allowed here.",
+          child->key);
+      status = -1;
+    }
+
+    if (status != 0)
+      break;
+  }
+
+  if (status == 0)
+    status = memcached_add_read_callback (st);
+
+  if (status != 0)
+  {
+    memcached_free(st);
+    return (-1);
+  }
 
-	return 0;
+  return (0);
 }
-/* }}} */
 
-void module_register (void) /* {{{ */
+static int memcached_config (oconfig_item_t *ci)
 {
-	plugin_register_config ("memcached", memcached_config, config_keys, config_keys_num);
-	plugin_register_read ("memcached", memcached_read);
+  int status = 0;
+  _Bool have_instance_block = 0;
+  int i;
+
+  for (i = 0; i < ci->children_num; i++)
+  {
+    oconfig_item_t *child = ci->children + i;
+
+    if (strcasecmp ("Instance", child->key) == 0)
+    {
+      config_add_instance (child);
+      have_instance_block = 1;
+    }
+    else if (!have_instance_block)
+    {
+      /* Non-instance option: Assume legacy configuration (without <Instance />
+       * blocks) and call config_add_instance() with the <Plugin /> block. */
+      return (config_add_instance (ci));
+    }
+    else
+      WARNING ("memcached plugin: The configuration option "
+          "\"%s\" is not allowed here. Did you "
+          "forget to add an <Instance /> block "
+          "around the configuration?",
+          child->key);
+  } /* for (ci->children) */
+
+  return (status);
 }
-/* }}} */
 
-/*
- * Local variables:
- * tab-width: 4
- * c-basic-offset: 4
- * End:
- * vim600: sw=4 ts=4 fdm=marker noexpandtab
- * vim<600: sw=4 ts=4 noexpandtab
- */
+static int memcached_init (void)
+{
+  memcached_t *st;
+  int status;
+
+  if (memcached_have_instances)
+    return (0);
 
+  /* No instances were configured, lets start a default instance. */
+  st = malloc (sizeof (*st));
+  if (st == NULL)
+    return (ENOMEM);
+  memset (st, 0, sizeof (*st));
+  st->name = sstrdup ("__legacy__");
+  st->socket = NULL;
+  st->host = NULL;
+  st->port = NULL;
+
+  status = memcached_add_read_callback (st);
+  if (status == 0)
+    memcached_have_instances = 1;
+  else
+    memcached_free (st);
+
+  return (status);
+} /* int memcached_init */
+
+void module_register (void)
+{
+  plugin_register_complex_config ("memcached", memcached_config);
+  plugin_register_init ("memcached", memcached_init);
+}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/modbus.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/modbus.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/modbus.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/modbus.c	2012-11-18 06:23:21.000000000 +0800
@@ -234,13 +234,13 @@
   value_list_t vl = VALUE_LIST_INIT;
 
   if ((host == NULL) || (slave == NULL) || (data == NULL))
     return (EINVAL);
 
   if (host->interval <= 0)
-    host->interval = interval_g;
+    host->interval = plugin_get_interval ();
 
   if (slave->instance[0] == 0)
     ssnprintf (slave->instance, sizeof (slave->instance), "slave_%i",
         slave->id);
 
   vl.values = &value;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/mysql.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/mysql.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/mysql.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/mysql.c	2012-11-18 06:23:21.000000000 +0800
@@ -55,13 +55,13 @@
 
 	_Bool slave_notif;
 	_Bool slave_io_running;
 	_Bool slave_sql_running;
 
 	MYSQL *con;
-	_Bool  is_connected;
+	int    state;
 };
 typedef struct mysql_database_s mysql_database_t; /* }}} */
 
 static int mysql_read (user_data_t *ud);
 
 static void mysql_database_free (void *arg) /* {{{ */
@@ -234,56 +234,60 @@
 } /* }}} int mysql_config */
 
 /* }}} End of configuration handling functions */
 
 static MYSQL *getconnection (mysql_database_t *db)
 {
-	if (db->is_connected)
+	if (db->state != 0)
 	{
-		int status;
-
-		status = mysql_ping (db->con);
-		if (status == 0)
+		int err;
+		if ((err = mysql_ping (db->con)) != 0)
+		{
+			/* Assured by "mysql_config_database" */
+			assert (db->instance != NULL);
+			WARNING ("mysql_ping failed for instance \"%s\": %s",
+					db->instance,
+					mysql_error (db->con));
+			db->state = 0;
+		}
+		else
+		{
+			db->state = 1;
 			return (db->con);
-
-		WARNING ("mysql plugin: Lost connection to instance \"%s\": %s",
-				db->instance, mysql_error (db->con));
+		}
 	}
-	db->is_connected = 0;
 
-	if (db->con == NULL)
+	if ((db->con = mysql_init (db->con)) == NULL)
 	{
-		db->con = mysql_init (NULL);
-		if (db->con == NULL)
-		{
-			ERROR ("mysql plugin: mysql_init failed: %s",
-					mysql_error (db->con));
-			return (NULL);
-		}
+		ERROR ("mysql_init failed: %s", mysql_error (db->con));
+		db->state = 0;
+		return (NULL);
 	}
 
 	if (mysql_real_connect (db->con, db->host, db->user, db->pass,
 				db->database, db->port, db->socket, 0) == NULL)
 	{
 		ERROR ("mysql plugin: Failed to connect to database %s "
 				"at server %s: %s",
 				(db->database != NULL) ? db->database : "<none>",
 				(db->host != NULL) ? db->host : "localhost",
 				mysql_error (db->con));
+		db->state = 0;
 		return (NULL);
 	}
-
-	INFO ("mysql plugin: Successfully connected to database %s "
-			"at server %s (server version: %s, protocol version: %d)",
-			(db->database != NULL) ? db->database : "<none>",
-			mysql_get_host_info (db->con),
-			mysql_get_server_info (db->con),
-			mysql_get_proto_info (db->con));
-
-	db->is_connected = 1;
-	return (db->con);
+	else
+	{
+		INFO ("mysql plugin: Successfully connected to database %s "
+				"at server %s (server version: %s, protocol version: %d)",
+				(db->database != NULL) ? db->database : "<none>",
+				mysql_get_host_info (db->con),
+				mysql_get_server_info (db->con),
+				mysql_get_proto_info (db->con));
+		db->state = 1;
+		return (db->con);
+	}
 } /* static MYSQL *getconnection (mysql_database_t *db) */
 
 static void set_host (mysql_database_t *db, char *buf, size_t buflen)
 {
 	if ((db->host == NULL)
 			|| (strcmp ("", db->host) == 0)
@@ -396,22 +400,20 @@
 
 	row = mysql_fetch_row (res);
 	if (row == NULL)
 	{
 		ERROR ("mysql plugin: Failed to get master statistics: "
 				"`%s' did not return any rows.", query);
-		mysql_free_result (res);
 		return (-1);
 	}
 
 	field_num = mysql_num_fields (res);
 	if (field_num < 2)
 	{
 		ERROR ("mysql plugin: Failed to get master statistics: "
 				"`%s' returned less than two columns.", query);
-		mysql_free_result (res);
 		return (-1);
 	}
 
 	position = atoll (row[1]);
 	counter_submit ("mysql_log_position", "master-bin", position, db);
 
@@ -449,22 +451,20 @@
 
 	row = mysql_fetch_row (res);
 	if (row == NULL)
 	{
 		ERROR ("mysql plugin: Failed to get slave statistics: "
 				"`%s' did not return any rows.", query);
-		mysql_free_result (res);
 		return (-1);
 	}
 
 	field_num = mysql_num_fields (res);
 	if (field_num < 33)
 	{
 		ERROR ("mysql plugin: Failed to get slave statistics: "
 				"`%s' returned less than 33 columns.", query);
-		mysql_free_result (res);
 		return (-1);
 	}
 
 	if (db->slave_stats)
 	{
 		unsigned long long counter;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/netapp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/netapp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/netapp.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/netapp.c	2012-11-18 06:23:21.000000000 +0800
@@ -672,13 +672,13 @@
 	return (submit_values (host, plugin_inst, "cache_ratio", type_inst,
 				&v, 1, timestamp, interval));
 } /* }}} int submit_cache_ratio */
 
 /* Submits all the caches used by WAFL. Uses "submit_cache_ratio". */
 static int submit_wafl_data (const char *hostname, const char *instance, /* {{{ */
-		cfg_wafl_t *old_data, const cfg_wafl_t *new_data, cdtime_t interval)
+		cfg_wafl_t *old_data, const cfg_wafl_t *new_data, int interval)
 {
 	/* Submit requested counters */
 	if (HAS_ALL_FLAGS (old_data->flags, CFG_WAFL_NAME_CACHE | HAVE_WAFL_NAME_CACHE)
 			&& HAS_ALL_FLAGS (new_data->flags, HAVE_WAFL_NAME_CACHE))
 		submit_cache_ratio (hostname, instance, "name_cache_hit",
 				new_data->name_cache_hit, new_data->name_cache_miss,
@@ -833,13 +833,13 @@
  *
  * These functions are called with appropriate data returned by the libnetapp
  * interface which is parsed and submitted with the above functions.
  */
 /* Data corresponding to <WAFL /> */
 static int cna_handle_wafl_data (const char *hostname, cfg_wafl_t *cfg_wafl, /* {{{ */
-		na_elem_t *data, cdtime_t interval)
+		na_elem_t *data, int interval)
 {
 	cfg_wafl_t perf_data;
 	const char *plugin_inst;
 
 	na_elem_t *instances;
 	na_elem_t *counter;
@@ -986,14 +986,13 @@
 		ERROR ("netapp plugin: cna_query_wafl: na_server_invoke_elem failed for host %s: %s",
 				host->name, na_results_reason (data));
 		na_elem_free (data);
 		return (-1);
 	}
 
-	status = cna_handle_wafl_data (host->name, host->cfg_wafl, data,
-			host->cfg_wafl->interval.interval);
+	status = cna_handle_wafl_data (host->name, host->cfg_wafl, data, host->interval);
 
 	if (status == 0)
 		host->cfg_wafl->interval.last_read = now;
 
 	na_elem_free (data);
 	return (status);
@@ -1182,14 +1181,13 @@
 		ERROR ("netapp plugin: cna_query_disk: na_server_invoke_elem failed for host %s: %s",
 				host->name, na_results_reason (data));
 		na_elem_free (data);
 		return (-1);
 	}
 
-	status = cna_handle_disk_data (host->name, host->cfg_disk, data,
-			host->cfg_disk->interval.interval);
+	status = cna_handle_disk_data (host->name, host->cfg_disk, data, host->interval);
 
 	if (status == 0)
 		host->cfg_disk->interval.last_read = now;
 
 	na_elem_free (data);
 	return (status);
@@ -1354,14 +1352,13 @@
 		ERROR ("netapp plugin: cna_query_volume_perf: na_server_invoke_elem failed for host %s: %s",
 				host->name, na_results_reason (data));
 		na_elem_free (data);
 		return (-1);
 	}
 
-	status = cna_handle_volume_perf_data (host->name, host->cfg_volume_perf, data,
-			host->cfg_volume_perf->interval.interval);
+	status = cna_handle_volume_perf_data (host->name, host->cfg_volume_perf, data, host->interval);
 
 	if (status == 0)
 		host->cfg_volume_perf->interval.last_read = now;
 
 	na_elem_free (data);
 	return (status);
@@ -1669,14 +1666,13 @@
 					v->sis_saved = guess3;
 			}
 			v->flags |= HAVE_VOLUME_USAGE_SIS_SAVED;
 		} /* }}} end of 32-bit workaround */
 	} /* for (elem_volume) */
 
-	return (cna_submit_volume_usage_data (host->name, cfg_volume,
-				host->cfg_volume_usage->interval.interval));
+	return (cna_submit_volume_usage_data (host->name, cfg_volume, host->interval));
 } /* }}} int cna_handle_volume_usage_data */
 
 static int cna_setup_volume_usage (cfg_volume_usage_t *cvu) /* {{{ */
 {
 	if (cvu == NULL)
 		return (EINVAL);
@@ -1882,14 +1878,13 @@
 		ERROR ("netapp plugin: cna_query_system: na_server_invoke_elem failed for host %s: %s",
 				host->name, na_results_reason (data));
 		na_elem_free (data);
 		return (-1);
 	}
 
-	status = cna_handle_system_data (host->name, host->cfg_system, data,
-			host->cfg_system->interval.interval);
+	status = cna_handle_system_data (host->name, host->cfg_system, data, host->interval);
 
 	if (status == 0)
 		host->cfg_system->interval.last_read = now;
 
 	na_elem_free (data);
 	return (status);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/network.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/network.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/network.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/network.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/network.c
- * Copyright (C) 2005-2013  Florian octo Forster
+ * Copyright (C) 2005-2010  Florian octo Forster
  * Copyright (C) 2009       Aman Gupta
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU Lesser General Public License as published by
  * the Free Software Foundation; only version 2.1 of the License is
  * applicable.
@@ -15,13 +15,13 @@
  *
  * You should have received a copy of the GNU Lesser General Public License
  * along with this program; if not, write to the Free Software Foundation,
  * Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
  *
  * Authors:
- *   Florian octo Forster <octo at collectd.org>
+ *   Florian octo Forster <octo at verplant.org>
  *   Aman Gupta <aman at tmm1.net>
  **/
 
 #define _BSD_SOURCE /* For struct ip_mreq */
 
 #include "collectd.h"
@@ -490,26 +490,12 @@
   n->meta = NULL;
 
   return (status);
 } /* }}} int network_dispatch_notification */
 
 #if HAVE_LIBGCRYPT
-static void network_init_gcrypt (void) /* {{{ */
-{
-  /* http://lists.gnupg.org/pipermail/gcrypt-devel/2003-August/000458.html
-   * Because you can't know in a library whether another library has
-   * already initialized the library */
-  if (gcry_control (GCRYCTL_ANY_INITIALIZATION_P))
-    return;
-
-  gcry_check_version (NULL); /* before calling any other functions */
-  gcry_control (GCRYCTL_SET_THREAD_CBS, &gcry_threads_pthread);
-  gcry_control (GCRYCTL_INIT_SECMEM, 32768);
-  gcry_control (GCRYCTL_INITIALIZATION_FINISHED);
-} /* }}} void network_init_gcrypt */
-
 static gcry_cipher_hd_t network_get_aes256_cypher (sockent_t *se, /* {{{ */
     const void *iv, size_t iv_size, const char *username)
 {
   gcry_error_t err;
   gcry_cipher_hd_t *cyper_ptr;
   unsigned char password_hash[32];
@@ -2040,14 +2026,12 @@
 	/* Set up the security structures. */
 #if HAVE_LIBGCRYPT /* {{{ */
 	if (se->type == SOCKENT_TYPE_CLIENT)
 	{
 		if (se->data.client.security_level > SECURITY_LEVEL_NONE)
 		{
-			network_init_gcrypt ();
-
 			if ((se->data.client.username == NULL)
 					|| (se->data.client.password == NULL))
 			{
 				ERROR ("network plugin: Client socket with "
 						"security requested, but no "
 						"credentials are configured.");
@@ -2060,14 +2044,12 @@
 		}
 	}
 	else /* (se->type == SOCKENT_TYPE_SERVER) */
 	{
 		if (se->data.server.security_level > SECURITY_LEVEL_NONE)
 		{
-			network_init_gcrypt ();
-
 			if (se->data.server.auth_file == NULL)
 			{
 				ERROR ("network plugin: Server socket with "
 						"security requested, but no "
 						"password file is configured.");
 				return (-1);
@@ -3326,13 +3308,12 @@
 	copy_receive_list_length = receive_list_length;
 
 	/* Initialize `vl' */
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = 0;
-	vl.interval = interval_g;
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "network", sizeof (vl.plugin));
 
 	/* Octets received / sent */
 	vl.values[0].derive = (derive_t) copy_octets_rx;
 	vl.values[1].derive = (derive_t) copy_octets_tx;
@@ -3386,13 +3367,23 @@
 	 * nothing more to do (for now, that is). */
 	if (have_init)
 		return (0);
 	have_init = 1;
 
 #if HAVE_LIBGCRYPT
-	network_init_gcrypt ();
+    /* http://lists.gnupg.org/pipermail/gcrypt-devel/2003-August/000458.html
+     * Because you can't know in a library whether another library has
+     * already initialized the library
+     */
+    if (!gcry_control (GCRYCTL_ANY_INITIALIZATION_P))
+    {
+        gcry_check_version(NULL); /* before calling any other functions */
+        gcry_control (GCRYCTL_SET_THREAD_CBS, &gcry_threads_pthread);
+        gcry_control (GCRYCTL_INIT_SECMEM, 32768, 0);
+        gcry_control (GCRYCTL_INITIALIZATION_FINISHED, 0);
+    }
 #endif
 
 	if (network_config_stats != 0)
 		plugin_register_read ("network", network_stats_read);
 
 	plugin_register_shutdown ("network", network_shutdown);
@@ -3420,13 +3411,13 @@
 				&& (receive_thread_running != 0)))
 		return (0);
 
 	if (dispatch_thread_running == 0)
 	{
 		int status;
-		status = pthread_create (&dispatch_thread_id,
+		status = plugin_thread_create (&dispatch_thread_id,
 				NULL /* no attributes */,
 				dispatch_thread,
 				NULL /* no argument */);
 		if (status != 0)
 		{
 			char errbuf[1024];
@@ -3440,13 +3431,13 @@
 		}
 	}
 
 	if (receive_thread_running == 0)
 	{
 		int status;
-		status = pthread_create (&receive_thread_id,
+		status = plugin_thread_create (&receive_thread_id,
 				NULL /* no attributes */,
 				receive_thread,
 				NULL /* no argument */);
 		if (status != 0)
 		{
 			char errbuf[1024];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/nfs.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/nfs.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/nfs.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/nfs.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,10 +1,9 @@
 /**
  * collectd - src/nfs.c
  * Copyright (C) 2005,2006  Jason Pepas
- * Copyright (C) 2012,2013  Florian Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -15,13 +14,13 @@
  * You should have received a copy of the GNU General Public License along
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
  *   Jason Pepas <cell at ices.utexas.edu>
- *   Florian octo Forster <octo at collectd.org>
+ *   Florian octo Forster <octo at verplant.org>
  *   Cosmin Ioiart <cioiart at gmail.com>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
@@ -316,13 +315,13 @@
 	} /* while (fgets) */
 } /* void nfs_read_linux */
 #endif /* KERNEL_LINUX */
 
 #if HAVE_LIBKSTAT
 static int nfs_read_kstat (kstat_t *ksp, int nfs_version, char *inst,
-		char const **proc_names, size_t proc_names_num)
+		const char **proc_names, size_t proc_names_num)
 {
 	char plugin_instance[DATA_MAX_NAME_LEN];
 	value_t values[proc_names_num];
 	size_t i;
 
 	if (ksp == NULL)
@@ -330,20 +329,14 @@
 
 	ssnprintf (plugin_instance, sizeof (plugin_instance), "v%i%s",
 			nfs_version, inst);
 
 	kstat_read(kc, ksp, NULL);
 	for (i = 0; i < proc_names_num; i++)
-	{
-		/* The name passed to kstat_data_lookup() doesn't have the
-		 * "const" modifier, so we need to copy the name here. */
-		char name[32];
-		sstrncpy (name, proc_names[i], sizeof (name));
-
-		values[i].counter = (derive_t) get_kstat_value (ksp, name);
-	}
+		values[i].counter = (derive_t) get_kstat_value (ksp,
+				(char *)proc_names[i]);
 
 	nfs_procedures_submit (plugin_instance, proc_names, values,
 			proc_names_num);
 	return (0);
 }
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/nginx.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/nginx.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/nginx.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/nginx.c	2012-11-18 06:23:21.000000000 +0800
@@ -117,13 +117,13 @@
   if ((curl = curl_easy_init ()) == NULL)
   {
     ERROR ("nginx plugin: curl_easy_init failed.");
     return (-1);
   }
 
-  curl_easy_setopt (curl, CURLOPT_NOSIGNAL, 1L);
+  curl_easy_setopt (curl, CURLOPT_NOSIGNAL, 1);
   curl_easy_setopt (curl, CURLOPT_WRITEFUNCTION, nginx_curl_callback);
   curl_easy_setopt (curl, CURLOPT_USERAGENT, PACKAGE_NAME"/"PACKAGE_VERSION);
   curl_easy_setopt (curl, CURLOPT_ERRORBUFFER, nginx_curl_error);
 
   if (user != NULL)
   {
@@ -140,31 +140,30 @@
 
   if (url != NULL)
   {
     curl_easy_setopt (curl, CURLOPT_URL, url);
   }
 
-  curl_easy_setopt (curl, CURLOPT_FOLLOWLOCATION, 1L);
-  curl_easy_setopt (curl, CURLOPT_MAXREDIRS, 50L);
+  curl_easy_setopt (curl, CURLOPT_FOLLOWLOCATION, 1);
 
   if ((verify_peer == NULL) || IS_TRUE (verify_peer))
   {
-    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 1L);
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 1);
   }
   else
   {
-    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 0L);
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 0);
   }
 
   if ((verify_host == NULL) || IS_TRUE (verify_host))
   {
-    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 2L);
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 2);
   }
   else
   {
-    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 0L);
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 0);
   }
 
   if (cacert != NULL)
   {
     curl_easy_setopt (curl, CURLOPT_CAINFO, cacert);
   }
@@ -212,13 +211,13 @@
   if (curl == NULL)
     return (-1);
   if (url == NULL)
     return (-1);
 
   nginx_buffer_len = 0;
-  if (curl_easy_perform (curl) != CURLE_OK)
+  if (curl_easy_perform (curl) != 0)
   {
     WARNING ("nginx plugin: curl_easy_perform failed: %s", nginx_curl_error);
     return (-1);
   }
 
   ptr = nginx_buffer;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/notify_email.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/notify_email.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/notify_email.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/notify_email.c	2012-11-18 06:23:21.000000000 +0800
@@ -255,13 +255,13 @@
       &timestamp_tm);
   timestamp_str[sizeof (timestamp_str) - 1] = '\0';
 
   /* Let's make RFC822 message text with \r\n EOLs */
   ssnprintf (buf, buf_len,
       "MIME-Version: 1.0\r\n"
-      "Content-Type: text/plain; charset=\"US-ASCII\"\r\n"
+      "Content-Type: text/plain;\r\n"
       "Content-Transfer-Encoding: 8bit\r\n"
       "Subject: %s\r\n"
       "\r\n"
       "%s - %s@%s\r\n"
       "\r\n"
       "Message: %s",
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ntpd.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ntpd.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ntpd.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ntpd.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/ntpd.c
- * Copyright (C) 2006-2007  Florian octo Forster
+ * Copyright (C) 2006-2012  Florian octo Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -13,13 +13,13 @@
  *
  * You should have received a copy of the GNU General Public License along
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
- *   Florian octo Forster <octo at verplant.org>
+ *   Florian octo Forster <octo at collectd.org>
  **/
 
 #define _BSD_SOURCE /* For NI_MAXHOST */
 
 #include "collectd.h"
 #include "common.h"
@@ -49,17 +49,23 @@
 #endif
 
 static const char *config_keys[] =
 {
 	"Host",
 	"Port",
-	"ReverseLookups"
+	"ReverseLookups",
+	"IncludeUnitID"
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
-static int do_reverse_lookups = 1;
+static _Bool do_reverse_lookups = 1;
+
+/* This option only exists for backward compatibility. If it is false and two
+ * ntpd peers use the same refclock driver, the plugin will try to write
+ * simultaneous measurements from both to the same type instance. */
+static _Bool include_unit_id = 0;
 
 # define NTPD_DEFAULT_HOST "localhost"
 # define NTPD_DEFAULT_PORT "123"
 static int   sock_descr = -1;
 static char *ntpd_host = NULL;
 static char  ntpd_port[16];
@@ -280,12 +286,19 @@
 	{
 		if (IS_TRUE (value))
 			do_reverse_lookups = 1;
 		else
 			do_reverse_lookups = 0;
 	}
+	else if (strcasecmp (key, "IncludeUnitID") == 0)
+	{
+		if (IS_TRUE (value))
+			include_unit_id = 1;
+		else
+			include_unit_id = 0;
+	}
 	else
 	{
 		return (-1);
 	}
 
 	return (0);
@@ -306,12 +319,24 @@
 	sstrncpy (vl.type, type, sizeof (vl.type));
 	sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
 	plugin_dispatch_values (&vl);
 }
 
+/* Each time a peer is polled, ntpd shifts the reach register to the left and
+ * sets the LSB based on whether the peer was reachable. If the LSB is zero,
+ * the values are out of date. */
+static void ntpd_submit_reach (char *type, char *type_inst, uint8_t reach,
+		double value)
+{
+	if (!(reach & 1))
+		value = NAN;
+
+	ntpd_submit (type, type_inst, value);
+}
+
 static int ntpd_connect (void)
 {
 	char *host;
 	char *port;
 
 	struct addrinfo  ai_hints;
@@ -760,12 +785,114 @@
 	val_int = ntohl (val_int);
 	val_double = ((double) val_int) / FP_FRAC;
 
 	return (val_double);
 }
 
+static uint32_t ntpd_get_refclock_id (struct info_peer_summary const *peer_info)
+{
+	uint32_t addr = ntohl (peer_info->srcadr);
+	uint32_t refclock_id = (addr >> 8) & 0x00FF;
+
+	return (refclock_id);
+}
+
+static int ntpd_get_name_from_address (char *buffer, size_t buffer_size,
+		struct info_peer_summary const *peer_info, _Bool do_reverse_lookup)
+{
+	struct sockaddr_storage sa;
+	socklen_t sa_len;
+	int flags = 0;
+	int status;
+
+	memset (&sa, 0, sizeof (sa));
+
+	if (peer_info->v6_flag)
+	{
+		struct sockaddr_in6 sa6;
+
+		assert (sizeof (sa) >= sizeof (sa6));
+
+		memset (&sa6, 0, sizeof (sa6));
+		sa6.sin6_family = AF_INET6;
+		sa6.sin6_port = htons (123);
+		memcpy (&sa6.sin6_addr, &peer_info->srcadr6,
+				sizeof (struct in6_addr));
+		sa_len = sizeof (sa6);
+
+		memcpy (&sa, &sa6, sizeof (sa6));
+	}
+	else
+	{
+		struct sockaddr_in sa4;
+
+		assert (sizeof (sa) >= sizeof (sa4));
+
+		memset (&sa4, 0, sizeof (sa4));
+		sa4.sin_family = AF_INET;
+		sa4.sin_port = htons (123);
+		memcpy (&sa4.sin_addr, &peer_info->srcadr,
+				sizeof (struct in_addr));
+		sa_len = sizeof (sa4);
+
+		memcpy (&sa, &sa4, sizeof (sa4));
+	}
+
+	if (!do_reverse_lookup)
+		flags |= NI_NUMERICHOST;
+
+	status = getnameinfo ((struct sockaddr const *) &sa, sa_len,
+			buffer, buffer_size,
+			NULL, 0, /* No port name */
+			flags);
+	if (status != 0)
+	{
+		char errbuf[1024];
+		ERROR ("ntpd plugin: getnameinfo failed: %s",
+				(status == EAI_SYSTEM)
+				? sstrerror (errno, errbuf, sizeof (errbuf))
+				: gai_strerror (status));
+		return (-1);
+	}
+
+	return (0);
+} /* ntpd_get_name_from_address */
+
+static int ntpd_get_name_refclock (char *buffer, size_t buffer_size,
+		struct info_peer_summary const *peer_info)
+{
+	uint32_t refclock_id = ntpd_get_refclock_id (peer_info);
+	uint32_t unit_id = ntohl (peer_info->srcadr) & 0x00FF;
+
+	if (refclock_id >= refclock_names_num)
+		return (ntpd_get_name_from_address (buffer, buffer_size,
+					peer_info,
+					/* do_reverse_lookup = */ 0));
+
+	if (include_unit_id)
+		ssnprintf (buffer, buffer_size, "%s-%"PRIu32,
+				refclock_names[refclock_id], unit_id);
+	else
+		sstrncpy (buffer, refclock_names[refclock_id], buffer_size);
+
+	return (0);
+} /* int ntpd_get_name_refclock */
+
+static int ntpd_get_name (char *buffer, size_t buffer_size,
+		struct info_peer_summary const *peer_info)
+{
+	uint32_t addr = ntohl (peer_info->srcadr);
+
+	if (!peer_info->v6_flag && ((addr & REFCLOCK_MASK) == REFCLOCK_ADDR))
+		return (ntpd_get_name_refclock (buffer, buffer_size,
+					peer_info));
+	else
+		return (ntpd_get_name_from_address (buffer, buffer_size,
+					peer_info, do_reverse_lookups));
+} /* int ntpd_addr_to_name */
+
 static int ntpd_read (void)
 {
 	struct info_kernel *ik;
 	int                 ik_num;
 	int                 ik_size;
 
@@ -834,124 +961,55 @@
 	for (i = 0; i < ps_num; i++)
 	{
 		struct info_peer_summary *ptr;
 		double offset;
 
 		char peername[NI_MAXHOST];
-		int refclock_id;
-		
-		ptr = ps + i;
-		refclock_id = 0;
+		uint32_t refclock_id;
 
-		/* Convert the `long floating point' offset value to double */
-		M_LFPTOD (ntohl (ptr->offset_int), ntohl (ptr->offset_frc), offset);
+		ptr = ps + i;
 
-		/* Special IP addresses for hardware clocks and stuff.. */
-		if (!ptr->v6_flag
-				&& ((ntohl (ptr->srcadr) & REFCLOCK_MASK)
-					== REFCLOCK_ADDR))
+		status = ntpd_get_name (peername, sizeof (peername), ptr);
+		if (status != 0)
 		{
-			struct in_addr  addr_obj;
-			char *addr_str;
-
-			refclock_id = (ntohl (ptr->srcadr) >> 8) & 0x000000FF;
-
-			if (refclock_id < refclock_names_num)
-			{
-				sstrncpy (peername, refclock_names[refclock_id],
-						sizeof (peername));
-			}
-			else
-			{
-				memset ((void *) &addr_obj, '\0', sizeof (addr_obj));
-				addr_obj.s_addr = ptr->srcadr;
-				addr_str = inet_ntoa (addr_obj);
-
-				sstrncpy (peername, addr_str, sizeof (peername));
-			}
+			ERROR ("ntpd plugin: Determining name of peer failed.");
+			continue;
 		}
-		else /* Normal network host. */
-		{
-			struct sockaddr_storage sa;
-			socklen_t sa_len;
-			int flags = 0;
-
-			memset (&sa, '\0', sizeof (sa));
-
-			if (ptr->v6_flag)
-			{
-				struct sockaddr_in6 sa6;
-
-				assert (sizeof (sa) >= sizeof (sa6));
-
-				memset (&sa6, 0, sizeof (sa6));
-				sa6.sin6_family = AF_INET6;
-				sa6.sin6_port = htons (123);
-				memcpy (&sa6.sin6_addr, &ptr->srcadr6,
-						sizeof (struct in6_addr));
-				sa_len = sizeof (sa6);
-
-				memcpy (&sa, &sa6, sizeof (sa6));
-			}
-			else
-			{
-				struct sockaddr_in sa4;
-
-				assert (sizeof (sa) >= sizeof (sa4));
 
-				memset (&sa4, 0, sizeof (sa4));
-				sa4.sin_family = AF_INET;
-				sa4.sin_port = htons (123);
-				memcpy (&sa4.sin_addr, &ptr->srcadr,
-						sizeof (struct in_addr));
-				sa_len = sizeof (sa4);
+		refclock_id = ntpd_get_refclock_id (ptr);
 
-				memcpy (&sa, &sa4, sizeof (sa4));
-			}
-
-			if (do_reverse_lookups == 0)
-				flags |= NI_NUMERICHOST;
-
-			status = getnameinfo ((const struct sockaddr *) &sa,
-					sa_len,
-					peername, sizeof (peername),
-					NULL, 0, /* No port name */
-					flags);
-			if (status != 0)
-			{
-				char errbuf[1024];
-				ERROR ("ntpd plugin: getnameinfo failed: %s",
-						(status == EAI_SYSTEM)
-						? sstrerror (errno, errbuf, sizeof (errbuf))
-						: gai_strerror (status));
-				continue;
-			}
-		}
+		/* Convert the `long floating point' offset value to double */
+		M_LFPTOD (ntohl (ptr->offset_int), ntohl (ptr->offset_frc), offset);
 
 		DEBUG ("peer %i:\n"
 				"  peername   = %s\n"
 				"  srcadr     = 0x%08x\n"
+				"  reach      = 0%03o\n"
 				"  delay      = %f\n"
 				"  offset_int = %i\n"
 				"  offset_frc = %i\n"
 				"  offset     = %f\n"
 				"  dispersion = %f\n",
 				i,
 				peername,
 				ntohl (ptr->srcadr),
+				ptr->reach,
 				ntpd_read_fp (ptr->delay),
 				ntohl (ptr->offset_int),
 				ntohl (ptr->offset_frc),
 				offset,
 				ntpd_read_fp (ptr->dispersion));
 
 		if (refclock_id != 1) /* not the system clock (offset will always be zero.. */
-			ntpd_submit ("time_offset", peername, offset);
-		ntpd_submit ("time_dispersion", peername, ntpd_read_fp (ptr->dispersion));
+			ntpd_submit_reach ("time_offset", peername, ptr->reach,
+					offset);
+		ntpd_submit_reach ("time_dispersion", peername, ptr->reach,
+				ntpd_read_fp (ptr->dispersion));
 		if (refclock_id == 0) /* not a reference clock */
-			ntpd_submit ("delay", peername, ntpd_read_fp (ptr->delay));
+			ntpd_submit_reach ("delay", peername, ptr->reach,
+					ntpd_read_fp (ptr->delay));
 	}
 
 	free (ps);
 	ps = NULL;
 
 	return (0);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/oracle.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/oracle.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/oracle.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/oracle.c	2012-11-18 06:23:21.000000000 +0800
@@ -56,12 +56,13 @@
 /*
  * Data types
  */
 struct o_database_s
 {
   char *name;
+  char *host;
   char *connect_id;
   char *username;
   char *password;
 
   udb_query_preparation_area_t **q_prep_areas;
   udb_query_t **queries;
@@ -180,39 +181,12 @@
  *     Password "secret"
  *     Query "plugin_instance0"
  *   </Database>
  * </Plugin>
  */
 
-static int o_config_set_string (char **ret_string, /* {{{ */
-    oconfig_item_t *ci)
-{
-  char *string;
-
-  if ((ci->values_num != 1)
-      || (ci->values[0].type != OCONFIG_TYPE_STRING))
-  {
-    WARNING ("oracle plugin: The `%s' config option "
-        "needs exactly one string argument.", ci->key);
-    return (-1);
-  }
-
-  string = strdup (ci->values[0].value.string);
-  if (string == NULL)
-  {
-    ERROR ("oracle plugin: strdup failed.");
-    return (-1);
-  }
-
-  if (*ret_string != NULL)
-    free (*ret_string);
-  *ret_string = string;
-
-  return (0);
-} /* }}} int o_config_set_string */
-
 static int o_config_add_database (oconfig_item_t *ci) /* {{{ */
 {
   o_database_t *db;
   int status;
   int i;
 
@@ -228,31 +202,38 @@
   if (db == NULL)
   {
     ERROR ("oracle plugin: malloc failed.");
     return (-1);
   }
   memset (db, 0, sizeof (*db));
+  db->name = NULL;
+  db->host = NULL;
+  db->connect_id = NULL;
+  db->username = NULL;
+  db->password = NULL;
 
-  status = o_config_set_string (&db->name, ci);
+  status = cf_util_get_string (ci, &db->name);
   if (status != 0)
   {
     sfree (db);
     return (status);
   }
 
   /* Fill the `o_database_t' structure.. */
   for (i = 0; i < ci->children_num; i++)
   {
     oconfig_item_t *child = ci->children + i;
 
     if (strcasecmp ("ConnectID", child->key) == 0)
-      status = o_config_set_string (&db->connect_id, child);
+      status = cf_util_get_string (child, &db->connect_id);
+    else if (strcasecmp ("Host", child->key) == 0)
+      status = cf_util_get_string (child, &db->host);
     else if (strcasecmp ("Username", child->key) == 0)
-      status = o_config_set_string (&db->username, child);
+      status = cf_util_get_string (child, &db->username);
     else if (strcasecmp ("Password", child->key) == 0)
-      status = o_config_set_string (&db->password, child);
+      status = cf_util_get_string (child, &db->password);
     else if (strcasecmp ("Query", child->key) == 0)
       status = udb_query_pick_from_list (child, queries, queries_num,
           &db->queries, &db->queries_num);
     else
     {
       WARNING ("oracle plugin: Option `%s' not allowed here.", child->key);
@@ -610,13 +591,14 @@
           udb_query_get_name (q), "OCIDefineByPos", oci_error);
       continue;
     }
   } /* for (j = 1; j <= param_counter; j++) */
   /* }}} End of the ``define'' stuff. */
 
-  status = udb_query_prepare_result (q, prep_area, hostname_g,
+  status = udb_query_prepare_result (q, prep_area,
+      (db->host != NULL) ? db->host : hostname_g,
       /* plugin = */ "oracle", db->name, column_names, column_num,
       /* interval = */ 0);
   if (status != 0)
   {
     ERROR ("oracle plugin: o_read_database_query (%s, %s): "
         "udb_query_prepare_result failed.",
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/perl.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/perl.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/perl.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/perl.c	2012-11-18 06:23:21.000000000 +0800
@@ -99,12 +99,13 @@
 /* this is defined in DynaLoader.a */
 void boot_DynaLoader (PerlInterpreter *, CV *);
 
 static XS (Collectd_plugin_register_ds);
 static XS (Collectd_plugin_unregister_ds);
 static XS (Collectd_plugin_dispatch_values);
+static XS (Collectd_plugin_get_interval);
 static XS (Collectd__plugin_write);
 static XS (Collectd__plugin_flush);
 static XS (Collectd_plugin_dispatch_notification);
 static XS (Collectd_plugin_log);
 static XS (Collectd__fc_register);
 static XS (Collectd_call_by_name);
@@ -174,12 +175,13 @@
 	XS ((*f));
 } api[] =
 {
 	{ "Collectd::plugin_register_data_set",   Collectd_plugin_register_ds },
 	{ "Collectd::plugin_unregister_data_set", Collectd_plugin_unregister_ds },
 	{ "Collectd::plugin_dispatch_values",     Collectd_plugin_dispatch_values },
+	{ "Collectd::plugin_get_interval",        Collectd_plugin_get_interval },
 	{ "Collectd::_plugin_write",              Collectd__plugin_write },
 	{ "Collectd::_plugin_flush",              Collectd__plugin_flush },
 	{ "Collectd::plugin_dispatch_notification",
 		Collectd_plugin_dispatch_notification },
 	{ "Collectd::plugin_log",                 Collectd_plugin_log },
 	{ "Collectd::_fc_register",               Collectd__fc_register },
@@ -1656,12 +1658,27 @@
 	if (0 == ret)
 		XSRETURN_YES;
 	else
 		XSRETURN_EMPTY;
 } /* static XS (Collectd_plugin_dispatch_values) */
 
+/*
+ * Collectd::plugin_get_interval ().
+ */
+static XS (Collectd_plugin_get_interval)
+{
+	dXSARGS;
+
+	/* make sure we don't get any unused variable warnings for 'items';
+	 * don't abort, though */
+	if (items)
+		log_err ("Usage: Collectd::plugin_get_interval()");
+
+	XSRETURN_NV ((NV) CDTIME_T_TO_DOUBLE (plugin_get_interval ()));
+} /* static XS (Collectd_plugin_get_interval) */
+
 /* Collectd::plugin_write (plugin, ds, vl).
  *
  * plugin:
  *   name of the plugin to call, may be 'undef'
  *
  * ds:
@@ -2127,29 +2144,26 @@
 	sstrncpy (pv, SvPV_nolen (var), DATA_MAX_NAME_LEN);
 	return 0;
 } /* static int g_pv_set (pTHX_ SV *, MAGIC *) */
 
 static int g_interval_get (pTHX_ SV *var, MAGIC *mg)
 {
-	cdtime_t *interval = (cdtime_t *)mg->mg_ptr;
-	double nv;
-
-	nv = CDTIME_T_TO_DOUBLE (*interval);
-
-	sv_setnv (var, nv);
+	log_warn ("Accessing $interval_g is deprecated (and might not "
+			"give the desired results) - plugin_get_interval() should "
+			"be used instead.");
+	sv_setnv (var, CDTIME_T_TO_DOUBLE (interval_g));
 	return 0;
 } /* static int g_interval_get (pTHX_ SV *, MAGIC *) */
 
 static int g_interval_set (pTHX_ SV *var, MAGIC *mg)
 {
-	cdtime_t *interval = (cdtime_t *)mg->mg_ptr;
-	double nv;
-
-	nv = (double)SvNV (var);
-
-	*interval = DOUBLE_TO_CDTIME_T (nv);
+	double nv = (double)SvNV (var);
+	log_warn ("Accessing $interval_g is deprecated (and might not "
+			"give the desired results) - plugin_get_interval() should "
+			"be used instead.");
+	interval_g = DOUBLE_TO_CDTIME_T (nv);
 	return 0;
 } /* static int g_interval_set (pTHX_ SV *, MAGIC *) */
 
 static MGVTBL g_pv_vtbl = {
 	g_pv_get, g_pv_set, NULL, NULL, NULL, NULL, NULL
 #if HAVE_PERL_STRUCT_MGVTBL_SVT_LOCAL
@@ -2199,13 +2213,13 @@
 				g_strings[i].var, 0);
 	}
 
 	tmp = get_sv ("Collectd::interval_g", /* create = */ 1);
 	sv_magicext (tmp, NULL, /* how = */ PERL_MAGIC_ext,
 			/* vtbl = */ &g_interval_vtbl,
-			/* name = */ (char *) &interval_g, /* namelen = */ 0);
+			/* name = */ NULL, /* namelen = */ 0);
 
 	return;
 } /* static void xs_init (pTHX) */
 
 /* Initialize the global Perl interpreter. */
 static int init_pi (int argc, char **argv)
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src: pf.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/pinba.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/pinba.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/pinba.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/pinba.c	2012-11-18 06:23:21.000000000 +0800
@@ -642,13 +642,13 @@
         /* script = */ NULL);
   }
 
   if (collector_thread_running)
     return (0);
 
-  status = pthread_create (&collector_thread_id,
+  status = plugin_thread_create (&collector_thread_id,
       /* attrs = */ NULL,
       collector_thread,
       /* args = */ NULL);
   if (status != 0)
   {
     char errbuf[1024];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ping.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ping.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/ping.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/ping.c	2012-11-18 06:23:21.000000000 +0800
@@ -376,13 +376,13 @@
     pthread_mutex_unlock (&ping_lock);
     return (-1);
   }
 
   ping_thread_loop = 1;
   ping_thread_error = 0;
-  status = pthread_create (&ping_thread_id, /* attr = */ NULL,
+  status = plugin_thread_create (&ping_thread_id, /* attr = */ NULL,
       ping_thread, /* arg = */ (void *) 0);
   if (status != 0)
   {
     ping_thread_loop = 0;
     ERROR ("ping plugin: Starting thread failed.");
     pthread_mutex_unlock (&ping_lock);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/plugin.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/plugin.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/plugin.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/plugin.c	2012-11-18 06:23:21.000000000 +0800
@@ -42,24 +42,26 @@
  * Private structures
  */
 struct callback_func_s
 {
 	void *cf_callback;
 	user_data_t cf_udata;
+	plugin_ctx_t cf_ctx;
 };
 typedef struct callback_func_s callback_func_t;
 
 #define RF_SIMPLE  0
 #define RF_COMPLEX 1
 #define RF_REMOVE  65535
 struct read_func_s
 {
 	/* `read_func_t' "inherits" from `callback_func_t'.
 	 * The `rf_super' member MUST be the first one in this structure! */
 #define rf_callback rf_super.cf_callback
 #define rf_udata rf_super.cf_udata
+#define rf_ctx rf_super.cf_ctx
 	callback_func_t rf_super;
 	char rf_group[DATA_MAX_NAME_LEN];
 	char rf_name[DATA_MAX_NAME_LEN];
 	int rf_type;
 	struct timespec rf_interval;
 	struct timespec rf_effective_interval;
@@ -90,12 +92,15 @@
 static int             read_loop = 1;
 static pthread_mutex_t read_lock = PTHREAD_MUTEX_INITIALIZER;
 static pthread_cond_t  read_cond = PTHREAD_COND_INITIALIZER;
 static pthread_t      *read_threads = NULL;
 static int             read_threads_num = 0;
 
+static pthread_key_t   plugin_ctx_key;
+static _Bool           plugin_ctx_key_initialized = 0;
+
 /*
  * Static functions
  */
 static const char *plugin_get_dir (void)
 {
 	if (plugindir == NULL)
@@ -243,12 +248,14 @@
 	}
 	else
 	{
 		cf->cf_udata = *ud;
 	}
 
+	cf->cf_ctx = plugin_get_ctx ();
+
 	return (register_callback (list, name, cf));
 } /* }}} int create_register_callback */
 
 static int plugin_unregister (llist_t *list, const char *name) /* {{{ */
 {
 	llentry_t *e;
@@ -343,39 +350,40 @@
 
 static void *plugin_read_thread (void __attribute__((unused)) *args)
 {
 	while (read_loop != 0)
 	{
 		read_func_t *rf;
+		plugin_ctx_t old_ctx;
 		cdtime_t now;
 		int status;
 		int rf_type;
 		int rc;
 
-		/* Get the read function that needs to be read next. */
+		/* Get the read function that needs to be read next.
+		 * We don't need to hold "read_lock" for the heap, but we need
+		 * to call c_heap_get_root() and pthread_cond_wait() in the
+		 * same protected block. */
+		pthread_mutex_lock (&read_lock);
 		rf = c_heap_get_root (read_heap);
 		if (rf == NULL)
 		{
-			struct timespec abstime;
-
-			now = cdtime ();
-
-			CDTIME_T_TO_TIMESPEC (now + interval_g, &abstime);
-
-			pthread_mutex_lock (&read_lock);
-			pthread_cond_timedwait (&read_cond, &read_lock,
-					&abstime);
+			pthread_cond_wait (&read_cond, &read_lock);
 			pthread_mutex_unlock (&read_lock);
 			continue;
 		}
+		pthread_mutex_unlock (&read_lock);
 
 		if ((rf->rf_interval.tv_sec == 0) && (rf->rf_interval.tv_nsec == 0))
 		{
+			/* this should not happen, because the interval is set
+			 * for each plugin when loading it
+			 * XXX: issue a warning? */
 			now = cdtime ();
 
-			CDTIME_T_TO_TIMESPEC (interval_g, &rf->rf_interval);
+			CDTIME_T_TO_TIMESPEC (plugin_get_interval (), &rf->rf_interval);
 
 			rf->rf_effective_interval = rf->rf_interval;
 
 			CDTIME_T_TO_TIMESPEC (now, &rf->rf_next_read);
 		}
 
@@ -420,12 +428,14 @@
 			rf = NULL;
 			continue;
 		}
 
 		DEBUG ("plugin_read_thread: Handling `%s'.", rf->rf_name);
 
+		old_ctx = plugin_set_ctx (rf->rf_ctx);
+
 		if (rf_type == RF_SIMPLE)
 		{
 			int (*callback) (void);
 
 			callback = rf->rf_callback;
 			status = (*callback) ();
@@ -437,12 +447,14 @@
 			assert (rf_type == RF_COMPLEX);
 
 			callback = rf->rf_callback;
 			status = (*callback) (&rf->rf_udata);
 		}
 
+		plugin_set_ctx (old_ctx);
+
 		/* If the function signals failure, we will increase the
 		 * intervals in which it will be called. */
 		if (status != 0)
 		{
 			rf->rf_effective_interval.tv_sec *= 2;
 			rf->rf_effective_interval.tv_nsec *= 2;
@@ -711,15 +723,12 @@
  * is used to determine which plugin to read next. */
 static int plugin_insert_read (read_func_t *rf)
 {
 	int status;
 	llentry_t *le;
 
-	cdtime_t now = cdtime ();
-	CDTIME_T_TO_TIMESPEC (now, &rf->rf_next_read);
-
 	pthread_mutex_lock (&read_lock);
 
 	if (read_list == NULL)
 	{
 		read_list = llist_create ();
 		if (read_list == NULL)
@@ -769,33 +778,67 @@
 		return (-1);
 	}
 
 	/* This does not fail. */
 	llist_append (read_list, le);
 
+	/* Wake up all the read threads. */
+	pthread_cond_broadcast (&read_cond);
 	pthread_mutex_unlock (&read_lock);
 	return (0);
 } /* int plugin_insert_read */
 
+static int read_cb_wrapper (user_data_t *ud)
+{
+	int (*callback) (void);
+
+	if (ud == NULL)
+		return -1;
+
+	callback = ud->data;
+	return callback();
+} /* int read_cb_wrapper */
+
 int plugin_register_read (const char *name,
 		int (*callback) (void))
 {
 	read_func_t *rf;
+	plugin_ctx_t ctx = plugin_get_ctx ();
 	int status;
 
+	if (ctx.interval != 0) {
+		/* If ctx.interval is not zero (== use the plugin or global
+		 * interval), we need to use the "complex" read callback,
+		 * because only that allows to specify a different interval.
+		 * Wrap the callback using read_cb_wrapper(). */
+		struct timespec interval;
+		user_data_t user_data;
+
+		user_data.data = callback;
+		user_data.free_func = NULL;
+
+		CDTIME_T_TO_TIMESPEC (ctx.interval, &interval);
+		return plugin_register_complex_read (/* group = */ NULL,
+				name, read_cb_wrapper, &interval, &user_data);
+	}
+
+	DEBUG ("plugin_register_read: default_interval = %.3f",
+			CDTIME_T_TO_DOUBLE(plugin_get_interval ()));
+
 	rf = malloc (sizeof (*rf));
 	if (rf == NULL)
 	{
 		ERROR ("plugin_register_read: malloc failed.");
 		return (ENOMEM);
 	}
 
 	memset (rf, 0, sizeof (read_func_t));
 	rf->rf_callback = (void *) callback;
 	rf->rf_udata.data = NULL;
 	rf->rf_udata.free_func = NULL;
+	rf->rf_ctx = ctx;
 	rf->rf_group[0] = '\0';
 	sstrncpy (rf->rf_name, name, sizeof (rf->rf_name));
 	rf->rf_type = RF_SIMPLE;
 	rf->rf_interval.tv_sec = 0;
 	rf->rf_interval.tv_nsec = 0;
 	rf->rf_effective_interval = rf->rf_interval;
@@ -810,12 +853,13 @@
 int plugin_register_complex_read (const char *group, const char *name,
 		plugin_read_cb callback,
 		const struct timespec *interval,
 		user_data_t *user_data)
 {
 	read_func_t *rf;
+	plugin_ctx_t ctx = plugin_get_ctx ();
 	int status;
 
 	rf = malloc (sizeof (*rf));
 	if (rf == NULL)
 	{
 		ERROR ("plugin_register_complex_read: malloc failed.");
@@ -831,25 +875,35 @@
 	sstrncpy (rf->rf_name, name, sizeof (rf->rf_name));
 	rf->rf_type = RF_COMPLEX;
 	if (interval != NULL)
 	{
 		rf->rf_interval = *interval;
 	}
+	else if (ctx.interval != 0)
+	{
+		CDTIME_T_TO_TIMESPEC (ctx.interval, &rf->rf_interval);
+	}
 	rf->rf_effective_interval = rf->rf_interval;
 
+	DEBUG ("plugin_register_read: interval = %i.%09i",
+			(int) rf->rf_interval.tv_sec,
+			(int) rf->rf_interval.tv_nsec);
+
 	/* Set user data */
 	if (user_data == NULL)
 	{
 		rf->rf_udata.data = NULL;
 		rf->rf_udata.free_func = NULL;
 	}
 	else
 	{
 		rf->rf_udata = *user_data;
 	}
 
+	rf->rf_ctx = ctx;
+
 	status = plugin_insert_read (rf);
 	if (status != 0)
 		sfree (rf);
 
 	return (status);
 } /* int plugin_register_complex_read */
@@ -1121,16 +1175,19 @@
 	 * callback. */
 	le = llist_head (list_init);
 	while (le != NULL)
 	{
 		callback_func_t *cf;
 		plugin_init_cb callback;
+		plugin_ctx_t old_ctx;
 
 		cf = le->value;
+		old_ctx = plugin_set_ctx (cf->cf_ctx);
 		callback = cf->cf_callback;
 		status = (*callback) ();
+		plugin_set_ctx (old_ctx);
 
 		if (status != 0)
 		{
 			ERROR ("Initialization of plugin `%s' "
 					"failed with status %i. "
 					"Plugin will be unloaded.",
@@ -1177,17 +1234,20 @@
 		return (0);
 	}
 
 	while (42)
 	{
 		read_func_t *rf;
+		plugin_ctx_t old_ctx;
 
 		rf = c_heap_get_root (read_heap);
 		if (rf == NULL)
 			break;
 
+		old_ctx = plugin_set_ctx (rf->rf_ctx);
+
 		if (rf->rf_type == RF_SIMPLE)
 		{
 			int (*callback) (void);
 
 			callback = rf->rf_callback;
 			status = (*callback) ();
@@ -1197,12 +1257,14 @@
 			plugin_read_cb callback;
 
 			callback = rf->rf_callback;
 			status = (*callback) (&rf->rf_udata);
 		}
 
+		plugin_set_ctx (old_ctx);
+
 		if (status != 0)
 		{
 			NOTICE ("read-function of plugin `%s' failed.",
 					rf->rf_name);
 			return_status = -1;
 		}
@@ -1243,12 +1305,15 @@
     le = llist_head (list_write);
     while (le != NULL)
     {
       callback_func_t *cf = le->value;
       plugin_write_cb callback;
 
+      /* do not switch plugin context; rather keep the context (interval)
+       * information of the calling read plugin */
+
       DEBUG ("plugin: plugin_write: Writing values via %s.", le->key);
       callback = cf->cf_callback;
       status = (*callback) (ds, vl, &cf->cf_udata);
       if (status != 0)
         failure++;
       else
@@ -1278,12 +1343,15 @@
 
     if (le == NULL)
       return (ENOENT);
 
     cf = le->value;
 
+    /* do not switch plugin context; rather keep the context (interval)
+     * information of the calling read plugin */
+
     DEBUG ("plugin: plugin_write: Writing values via %s.", le->key);
     callback = cf->cf_callback;
     status = (*callback) (ds, vl, &cf->cf_udata);
   }
 
   return (status);
@@ -1298,25 +1366,29 @@
 
   le = llist_head (list_flush);
   while (le != NULL)
   {
     callback_func_t *cf;
     plugin_flush_cb callback;
+    plugin_ctx_t old_ctx;
 
     if ((plugin != NULL)
         && (strcmp (plugin, le->key) != 0))
     {
       le = le->next;
       continue;
     }
 
     cf = le->value;
+    old_ctx = plugin_set_ctx (cf->cf_ctx);
     callback = cf->cf_callback;
 
     (*callback) (timeout, identifier, &cf->cf_udata);
 
+    plugin_set_ctx (old_ctx);
+
     le = le->next;
   }
   return (0);
 } /* int plugin_flush */
 
 void plugin_shutdown_all (void)
@@ -1343,23 +1415,27 @@
 		le = llist_head (list_shutdown);
 
 	while (le != NULL)
 	{
 		callback_func_t *cf;
 		plugin_shutdown_cb callback;
+		plugin_ctx_t old_ctx;
 
 		cf = le->value;
+		old_ctx = plugin_set_ctx (cf->cf_ctx);
 		callback = cf->cf_callback;
 
 		/* Advance the pointer before calling the callback allows
 		 * shutdown functions to unregister themselves. If done the
 		 * other way around the memory `le' points to will be freed
 		 * after callback returns. */
 		le = le->next;
 
 		(*callback) ();
+
+		plugin_set_ctx (old_ctx);
 	}
 
 	/* Write plugins which use the `user_data' pointer usually need the
 	 * same data available to the flush callback. If this is the case, set
 	 * the free_function to NULL when registering the flush callback and to
 	 * the real free function when registering the write callback. This way
@@ -1382,18 +1458,21 @@
 
   le = llist_head (list_missing);
   while (le != NULL)
   {
     callback_func_t *cf;
     plugin_missing_cb callback;
+    plugin_ctx_t old_ctx;
     int status;
 
     cf = le->value;
+    old_ctx = plugin_set_ctx (cf->cf_ctx);
     callback = cf->cf_callback;
 
     status = (*callback) (vl, &cf->cf_udata);
+    plugin_set_ctx (old_ctx);
     if (status != 0)
     {
       if (status < 0)
       {
         ERROR ("plugin_dispatch_missing: Callback function \"%s\" "
             "failed with status %i.",
@@ -1463,13 +1542,31 @@
 	}
 
 	if (vl->time == 0)
 		vl->time = cdtime ();
 
 	if (vl->interval <= 0)
-		vl->interval = interval_g;
+	{
+		plugin_ctx_t ctx = plugin_get_ctx ();
+
+		if (ctx.interval != 0)
+			vl->interval = ctx.interval;
+		else
+		{
+			char name[6 * DATA_MAX_NAME_LEN];
+			FORMAT_VL (name, sizeof (name), vl);
+			ERROR ("plugin_dispatch_values: Unable to determine "
+					"interval from context for "
+					"value list \"%s\". "
+					"This indicates a broken plugin. "
+					"Please report this problem to the "
+					"collectd mailing list or at "
+					"<http://collectd.org/bugs/>.", name);
+			vl->interval = cf_get_default_interval ();
+		}
+	}
 
 	DEBUG ("plugin_dispatch_values: time = %.3f; interval = %.3f; "
 			"host = %s; "
 			"plugin = %s; plugin_instance = %s; "
 			"type = %s; type_instance = %s;",
 			CDTIME_T_TO_DOUBLE (vl->time),
@@ -1653,12 +1750,15 @@
 	while (le != NULL)
 	{
 		callback_func_t *cf;
 		plugin_notification_cb callback;
 		int status;
 
+		/* do not switch plugin context; rather keep the context
+		 * (interval) information of the calling plugin */
+
 		cf = le->value;
 		callback = cf->cf_callback;
 		status = (*callback) (notif, &cf->cf_udata);
 		if (status != 0)
 		{
 			WARNING ("plugin_dispatch_notification: Notification "
@@ -1700,12 +1800,15 @@
 		callback_func_t *cf;
 		plugin_log_cb callback;
 
 		cf = le->value;
 		callback = cf->cf_callback;
 
+		/* do not switch plugin context; rather keep the context
+		 * (interval) information of the calling plugin */
+
 		(*callback) (level, msg, &cf->cf_udata);
 
 		le = le->next;
 	}
 } /* void plugin_log */
 
@@ -1932,7 +2035,125 @@
     this = next;
   }
 
   return (0);
 } /* int plugin_notification_meta_free */
 
+static void plugin_ctx_destructor (void *ctx)
+{
+	sfree (ctx);
+} /* void plugin_ctx_destructor */
+
+static plugin_ctx_t ctx_init = { /* interval = */ 0 };
+
+static plugin_ctx_t *plugin_ctx_create (void)
+{
+	plugin_ctx_t *ctx;
+
+	ctx = malloc (sizeof (*ctx));
+	if (ctx == NULL) {
+		char errbuf[1024];
+		ERROR ("Failed to allocate plugin context: %s",
+				sstrerror (errno, errbuf, sizeof (errbuf)));
+		return NULL;
+	}
+
+	*ctx = ctx_init;
+	assert (plugin_ctx_key_initialized);
+	pthread_setspecific (plugin_ctx_key, ctx);
+	DEBUG("Created new plugin context.");
+	return (ctx);
+} /* int plugin_ctx_create */
+
+void plugin_init_ctx (void)
+{
+	pthread_key_create (&plugin_ctx_key, plugin_ctx_destructor);
+	plugin_ctx_key_initialized = 1;
+} /* void plugin_init_ctx */
+
+plugin_ctx_t plugin_get_ctx (void)
+{
+	plugin_ctx_t *ctx;
+
+	assert (plugin_ctx_key_initialized);
+	ctx = pthread_getspecific (plugin_ctx_key);
+
+	if (ctx == NULL) {
+		ctx = plugin_ctx_create ();
+		/* this must no happen -- exit() instead? */
+		if (ctx == NULL)
+			return ctx_init;
+	}
+
+	return (*ctx);
+} /* plugin_ctx_t plugin_get_ctx */
+
+plugin_ctx_t plugin_set_ctx (plugin_ctx_t ctx)
+{
+	plugin_ctx_t *c;
+	plugin_ctx_t old;
+
+	assert (plugin_ctx_key_initialized);
+	c = pthread_getspecific (plugin_ctx_key);
+
+	if (c == NULL) {
+		c = plugin_ctx_create ();
+		/* this must no happen -- exit() instead? */
+		if (c == NULL)
+			return ctx_init;
+	}
+
+	old = *c;
+	*c = ctx;
+
+	return (old);
+} /* void plugin_set_ctx */
+
+cdtime_t plugin_get_interval (void)
+{
+	cdtime_t interval;
+
+	interval = plugin_get_ctx().interval;
+	if (interval > 0)
+		return interval;
+
+	return cf_get_default_interval ();
+} /* cdtime_t plugin_get_interval */
+
+typedef struct {
+	plugin_ctx_t ctx;
+	void *(*start_routine) (void *);
+	void *arg;
+} plugin_thread_t;
+
+static void *plugin_thread_start (void *arg)
+{
+	plugin_thread_t *plugin_thread = arg;
+
+	void *(*start_routine) (void *) = plugin_thread->start_routine;
+	void *plugin_arg = plugin_thread->arg;
+
+	plugin_set_ctx (plugin_thread->ctx);
+
+	free (plugin_thread);
+
+	return start_routine (plugin_arg);
+} /* void *plugin_thread_start */
+
+int plugin_thread_create (pthread_t *thread, const pthread_attr_t *attr,
+		void *(*start_routine) (void *), void *arg)
+{
+	plugin_thread_t *plugin_thread;
+
+	plugin_thread = malloc (sizeof (*plugin_thread));
+	if (plugin_thread == NULL)
+		return -1;
+
+	plugin_thread->ctx           = plugin_get_ctx ();
+	plugin_thread->start_routine = start_routine;
+	plugin_thread->arg           = arg;
+
+	return pthread_create (thread, attr,
+			plugin_thread_start, plugin_thread);
+} /* int plugin_thread_create */
+
 /* vim: set sw=8 ts=8 noet fdm=marker : */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/plugin.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/plugin.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/plugin.h	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/plugin.h	2012-11-18 06:23:21.000000000 +0800
@@ -62,12 +62,14 @@
 #define NOTIF_MAX_MSG_LEN 256
 
 #define NOTIF_FAILURE 1
 #define NOTIF_WARNING 2
 #define NOTIF_OKAY    4
 
+#define plugin_interval (plugin_get_ctx().interval)
+
 /*
  * Public data types
  */
 typedef unsigned long long counter_t;
 typedef double gauge_t;
 typedef int64_t derive_t;
@@ -94,13 +96,14 @@
 	char     type[DATA_MAX_NAME_LEN];
 	char     type_instance[DATA_MAX_NAME_LEN];
 	meta_data_t *meta;
 };
 typedef struct value_list_s value_list_t;
 
-#define VALUE_LIST_INIT { NULL, 0, 0, interval_g, "localhost", "", "", "", "", NULL }
+#define VALUE_LIST_INIT { NULL, 0, 0, plugin_get_interval (), \
+	"localhost", "", "", "", "", NULL }
 #define VALUE_LIST_STATIC { NULL, 0, 0, 0, "localhost", "", "", "", "", NULL }
 
 struct data_source_s
 {
 	char   name[DATA_MAX_NAME_LEN];
 	int    type;
@@ -158,12 +161,18 @@
 {
 	void *data;
 	void (*free_func) (void *);
 };
 typedef struct user_data_s user_data_t;
 
+struct plugin_ctx_s
+{
+	cdtime_t interval;
+};
+typedef struct plugin_ctx_s plugin_ctx_t;
+
 /*
  * Callback types
  */
 typedef int (*plugin_init_cb) (void);
 typedef int (*plugin_read_cb) (user_data_t *);
 typedef int (*plugin_write_cb) (const data_set_t *, const value_list_t *,
@@ -360,7 +369,34 @@
 
 int plugin_notification_meta_copy (notification_t *dst,
     const notification_t *src);
 
 int plugin_notification_meta_free (notification_meta_t *n);
 
+/*
+ * Plugin context management.
+ */
+
+void plugin_init_ctx (void);
+
+plugin_ctx_t plugin_get_ctx (void);
+plugin_ctx_t plugin_set_ctx (plugin_ctx_t ctx);
+
+/*
+ * NAME
+ *  plugin_get_interval
+ *
+ * DESCRIPTION
+ *  This function returns the current value of the plugin's interval. The
+ *  return value will be strictly greater than zero in all cases. If
+ *  everything else fails, it will fall back to 10 seconds.
+ */
+cdtime_t plugin_get_interval (void);
+
+/*
+ * Context-aware thread management.
+ */
+
+int plugin_thread_create (pthread_t *thread, const pthread_attr_t *attr,
+		void *(*start_routine) (void *), void *arg);
+
 #endif /* PLUGIN_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/postgresql.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/postgresql.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/postgresql.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/postgresql.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,10 +1,10 @@
 /**
  * collectd - src/postgresql.c
- * Copyright (C) 2008, 2009  Sebastian Harl
- * Copyright (C) 2009        Florian Forster
+ * Copyright (C) 2008-2012  Sebastian Harl
+ * Copyright (C) 2009       Florian Forster
  * All rights reserved.
  *
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions
  * are met:
  *
@@ -39,21 +39,27 @@
 #include "collectd.h"
 #include "common.h"
 
 #include "configfile.h"
 #include "plugin.h"
 
+#include "utils_cache.h"
 #include "utils_db_query.h"
 #include "utils_complain.h"
 
+#if HAVE_PTHREAD_H
+# include <pthread.h>
+#endif
+
 #include <pg_config_manual.h>
 #include <libpq-fe.h>
 
 #define log_err(...) ERROR ("postgresql: " __VA_ARGS__)
 #define log_warn(...) WARNING ("postgresql: " __VA_ARGS__)
 #define log_info(...) INFO ("postgresql: " __VA_ARGS__)
+#define log_debug(...) DEBUG ("postgresql: " __VA_ARGS__)
 
 #ifndef C_PSQL_DEFAULT_CONF
 # define C_PSQL_DEFAULT_CONF PKGDATADIR "/postgresql_default.conf"
 #endif
 
 /* Appends the (parameter, value) pair to the string
@@ -92,21 +98,28 @@
 
 typedef enum {
 	C_PSQL_PARAM_HOST = 1,
 	C_PSQL_PARAM_DB,
 	C_PSQL_PARAM_USER,
 	C_PSQL_PARAM_INTERVAL,
+	C_PSQL_PARAM_INSTANCE,
 } c_psql_param_t;
 
 /* Parameter configuration. Stored as `user data' in the query objects. */
 typedef struct {
 	c_psql_param_t *params;
 	int             params_num;
 } c_psql_user_data_t;
 
 typedef struct {
+	char *name;
+	char *statement;
+	_Bool store_rates;
+} c_psql_writer_t;
+
+typedef struct {
 	PGconn      *conn;
 	c_complain_t conn_complaint;
 
 	int proto_version;
 	int server_version;
 
@@ -114,25 +127,39 @@
 
 	/* user configuration */
 	udb_query_preparation_area_t **q_prep_areas;
 	udb_query_t    **queries;
 	size_t           queries_num;
 
+	c_psql_writer_t **writers;
+	size_t            writers_num;
+
+	/* make sure we don't access the database object in parallel */
+	pthread_mutex_t   db_lock;
+
 	cdtime_t interval;
 
+	/* writer "caching" settings */
+	cdtime_t commit_interval;
+	cdtime_t next_commit;
+
 	char *host;
 	char *port;
 	char *database;
 	char *user;
 	char *password;
 
+	char *instance;
+
 	char *sslmode;
 
 	char *krbsrvname;
 
 	char *service;
+
+	int ref_cnt;
 } c_psql_database_t;
 
 static char *def_queries[] = {
 	"backends",
 	"transactions",
 	"queries",
@@ -140,25 +167,75 @@
 	"table_states",
 	"disk_io",
 	"disk_usage"
 };
 static int def_queries_num = STATIC_ARRAY_SIZE (def_queries);
 
+static c_psql_database_t *databases     = NULL;
+static size_t             databases_num = 0;
+
 static udb_query_t      **queries       = NULL;
 static size_t             queries_num   = 0;
 
+static c_psql_writer_t   *writers       = NULL;
+static size_t             writers_num   = 0;
+
+static int c_psql_begin (c_psql_database_t *db)
+{
+	PGresult *r = PQexec (db->conn, "BEGIN");
+
+	int status = 1;
+
+	if (r != NULL) {
+		if (PGRES_COMMAND_OK == PQresultStatus (r)) {
+			db->next_commit = cdtime() + db->commit_interval;
+			status = 0;
+		}
+		else
+			log_warn ("Failed to initiate ('BEGIN') transaction: %s",
+					PQerrorMessage (db->conn));
+		PQclear (r);
+	}
+	return status;
+} /* c_psql_begin */
+
+static int c_psql_commit (c_psql_database_t *db)
+{
+	PGresult *r = PQexec (db->conn, "COMMIT");
+
+	int status = 1;
+
+	if (r != NULL) {
+		if (PGRES_COMMAND_OK == PQresultStatus (r)) {
+			db->next_commit = 0;
+			log_debug ("Successfully committed transaction.");
+			status = 0;
+		}
+		else
+			log_warn ("Failed to commit transaction: %s",
+					PQerrorMessage (db->conn));
+		PQclear (r);
+	}
+	return status;
+} /* c_psql_commit */
+
 static c_psql_database_t *c_psql_database_new (const char *name)
 {
 	c_psql_database_t *db;
 
-	db = (c_psql_database_t *)malloc (sizeof (*db));
+	db = (c_psql_database_t *)realloc (databases,
+			(databases_num + 1) * sizeof (*db));
 	if (NULL == db) {
 		log_err ("Out of memory.");
 		return NULL;
 	}
 
+	databases = db;
+	db = databases + databases_num;
+	++databases_num;
+
 	db->conn = NULL;
 
 	C_COMPLAIN_INIT (&db->conn_complaint);
 
 	db->proto_version = 0;
 	db->server_version = 0;
@@ -166,67 +243,102 @@
 	db->max_params_num = 0;
 
 	db->q_prep_areas   = NULL;
 	db->queries        = NULL;
 	db->queries_num    = 0;
 
+	db->writers        = NULL;
+	db->writers_num    = 0;
+
+	pthread_mutex_init (&db->db_lock, /* attrs = */ NULL);
+
 	db->interval   = 0;
 
+	db->commit_interval = 0;
+	db->next_commit     = 0;
+
 	db->database   = sstrdup (name);
 	db->host       = NULL;
 	db->port       = NULL;
 	db->user       = NULL;
 	db->password   = NULL;
 
+	db->instance   = sstrdup (name);
+
 	db->sslmode    = NULL;
 
 	db->krbsrvname = NULL;
 
 	db->service    = NULL;
+
+	db->ref_cnt    = 0;
 	return db;
 } /* c_psql_database_new */
 
 static void c_psql_database_delete (void *data)
 {
 	size_t i;
 
 	c_psql_database_t *db = data;
 
+	--db->ref_cnt;
+	/* readers and writers may access this database */
+	if (db->ref_cnt > 0)
+		return;
+
+	/* wait for the lock to be released by the last writer */
+	pthread_mutex_lock (&db->db_lock);
+
+	if (db->next_commit > 0)
+		c_psql_commit (db);
+
 	PQfinish (db->conn);
 	db->conn = NULL;
 
 	if (db->q_prep_areas)
 		for (i = 0; i < db->queries_num; ++i)
 			udb_query_delete_preparation_area (db->q_prep_areas[i]);
 	free (db->q_prep_areas);
 
 	sfree (db->queries);
 	db->queries_num = 0;
 
+	sfree (db->writers);
+	db->writers_num = 0;
+
+	pthread_mutex_unlock (&db->db_lock);
+
+	pthread_mutex_destroy (&db->db_lock);
+
 	sfree (db->database);
 	sfree (db->host);
 	sfree (db->port);
 	sfree (db->user);
 	sfree (db->password);
 
+	sfree (db->instance);
+
 	sfree (db->sslmode);
 
 	sfree (db->krbsrvname);
 
 	sfree (db->service);
+
+	/* don't care about freeing or reordering the 'databases' array
+	 * this is done in 'shutdown' */
 	return;
 } /* c_psql_database_delete */
 
 static int c_psql_connect (c_psql_database_t *db)
 {
 	char  conninfo[4096];
 	char *buf     = conninfo;
 	int   buf_len = sizeof (conninfo);
 	int   status;
 
-	if (! db)
+	if ((! db) || (! db->database))
 		return -1;
 
 	status = ssnprintf (buf, buf_len, "dbname = '%s'", db->database);
 	if (0 < status) {
 		buf     += status;
 		buf_len -= status;
@@ -268,14 +380,15 @@
 		/* trigger c_release() */
 		if (0 == db->conn_complaint.interval)
 			db->conn_complaint.interval = 1;
 
 		if (CONNECTION_OK != PQstatus (db->conn)) {
 			c_complain (LOG_ERR, &db->conn_complaint,
-					"Failed to connect to database %s: %s",
-					db->database, PQerrorMessage (db->conn));
+					"Failed to connect to database %s (%s): %s",
+					db->database, db->instance,
+					PQerrorMessage (db->conn));
 			return -1;
 		}
 
 		db->proto_version = PQprotocolVersion (db->conn);
 	}
 
@@ -334,26 +447,31 @@
 			case C_PSQL_PARAM_USER:
 				params[i] = db->user;
 				break;
 			case C_PSQL_PARAM_INTERVAL:
 				ssnprintf (interval, sizeof (interval), "%.3f",
 						(db->interval > 0)
-						? CDTIME_T_TO_DOUBLE (db->interval) : interval_g);
+						? CDTIME_T_TO_DOUBLE (db->interval)
+						: plugin_get_interval ());
 				params[i] = interval;
 				break;
+			case C_PSQL_PARAM_INSTANCE:
+				params[i] = db->instance;
+				break;
 			default:
 				assert (0);
 		}
 	}
 
 	return PQexecParams (db->conn, udb_query_get_statement (q),
 			data->params_num, NULL,
 			(const char *const *) params,
 			NULL, NULL, /* return text data */ 0);
 } /* c_psql_exec_query_params */
 
+/* db->db_lock must be locked when calling this function */
 static int c_psql_exec_query (c_psql_database_t *db, udb_query_t *q,
 		udb_query_preparation_area_t *prep_area)
 {
 	PGresult *res;
 
 	c_psql_user_data_t *data;
@@ -374,36 +492,46 @@
 	/* Versions up to `3' don't know how to handle parameters. */
 	if (3 <= db->proto_version)
 		res = c_psql_exec_query_params (db, q, data);
 	else if ((NULL == data) || (0 == data->params_num))
 		res = c_psql_exec_query_noparams (db, q);
 	else {
-		log_err ("Connection to database \"%s\" does not support parameters "
-				"(protocol version %d) - cannot execute query \"%s\".",
-				db->database, db->proto_version,
+		log_err ("Connection to database \"%s\" (%s) does not support "
+				"parameters (protocol version %d) - "
+				"cannot execute query \"%s\".",
+				db->database, db->instance, db->proto_version,
 				udb_query_get_name (q));
 		return -1;
 	}
 
+	/* give c_psql_write() a chance to acquire the lock if called recursively
+	 * through dispatch_values(); this will happen if, both, queries and
+	 * writers are configured for a single connection */
+	pthread_mutex_unlock (&db->db_lock);
+
 	column_names = NULL;
 	column_values = NULL;
 
-#define BAIL_OUT(status) \
-	sfree (column_names); \
-	sfree (column_values); \
-	PQclear (res); \
-	return status
-
 	if (PGRES_TUPLES_OK != PQresultStatus (res)) {
+		pthread_mutex_lock (&db->db_lock);
+
 		log_err ("Failed to execute SQL query: %s",
 				PQerrorMessage (db->conn));
 		log_info ("SQL query was: %s",
 				udb_query_get_statement (q));
-		BAIL_OUT (-1);
+		PQclear (res);
+		return -1;
 	}
 
+#define BAIL_OUT(status) \
+	sfree (column_names); \
+	sfree (column_values); \
+	PQclear (res); \
+	pthread_mutex_lock (&db->db_lock); \
+	return status
+
 	rows_num = PQntuples (res);
 	if (1 > rows_num) {
 		BAIL_OUT (0);
 	}
 
 	column_num = PQnfields (res);
@@ -433,13 +561,13 @@
 			|| (0 == strcmp (db->host, "localhost")))
 		host = hostname_g;
 	else
 		host = db->host;
 
 	status = udb_query_prepare_result (q, prep_area, host, "postgresql",
-			db->database, column_names, (size_t) column_num, db->interval);
+			db->instance, column_names, (size_t) column_num, db->interval);
 	if (0 != status) {
 		log_err ("udb_query_prepare_result failed with status %i.",
 				status);
 		BAIL_OUT (-1);
 	}
 
@@ -484,15 +612,21 @@
 		return -1;
 	}
 
 	db = ud->data;
 
 	assert (NULL != db->database);
+	assert (NULL != db->instance);
+	assert (NULL != db->queries);
+
+	pthread_mutex_lock (&db->db_lock);
 
-	if (0 != c_psql_check_connection (db))
+	if (0 != c_psql_check_connection (db)) {
+		pthread_mutex_unlock (&db->db_lock);
 		return -1;
+	}
 
 	for (i = 0; i < db->queries_num; ++i)
 	{
 		udb_query_preparation_area_t *prep_area;
 		udb_query_t *q;
 
@@ -504,25 +638,383 @@
 			continue;
 
 		if (0 == c_psql_exec_query (db, q, prep_area))
 			success = 1;
 	}
 
+	pthread_mutex_unlock (&db->db_lock);
+
 	if (! success)
 		return -1;
 	return 0;
 } /* c_psql_read */
 
+static char *values_name_to_sqlarray (const data_set_t *ds,
+		char *string, size_t string_len)
+{
+	char  *str_ptr;
+	size_t str_len;
+
+	int i;
+
+	str_ptr = string;
+	str_len = string_len;
+
+	for (i = 0; i < ds->ds_num; ++i) {
+		int status = ssnprintf (str_ptr, str_len, ",'%s'", ds->ds[i].name);
+
+		if (status < 1)
+			return NULL;
+		else if ((size_t)status >= str_len) {
+			str_len = 0;
+			break;
+		}
+		else {
+			str_ptr += status;
+			str_len -= (size_t)status;
+		}
+	}
+
+	if (str_len <= 2) {
+		log_err ("c_psql_write: Failed to stringify value names");
+		return NULL;
+	}
+
+	/* overwrite the first comma */
+	string[0] = '{';
+	str_ptr[0] = '}';
+	str_ptr[1] = '\0';
+
+	return string;
+} /* values_name_to_sqlarray */
+
+static char *values_type_to_sqlarray (const data_set_t *ds,
+		char *string, size_t string_len, _Bool store_rates)
+{
+	char  *str_ptr;
+	size_t str_len;
+
+	int i;
+
+	str_ptr = string;
+	str_len = string_len;
+
+	for (i = 0; i < ds->ds_num; ++i) {
+		int status;
+
+		if (store_rates)
+			status = ssnprintf(str_ptr, str_len, ",'gauge'");
+		else
+			status = ssnprintf(str_ptr, str_len, ",'%s'",
+					DS_TYPE_TO_STRING (ds->ds[i].type));
+
+		if (status < 1) {
+			str_len = 0;
+			break;
+		}
+		else if ((size_t)status >= str_len) {
+			str_len = 0;
+			break;
+		}
+		else {
+			str_ptr += status;
+			str_len -= (size_t)status;
+		}
+	}
+
+	if (str_len <= 2) {
+		log_err ("c_psql_write: Failed to stringify value types");
+		return NULL;
+	}
+
+	/* overwrite the first comma */
+	string[0] = '{';
+	str_ptr[0] = '}';
+	str_ptr[1] = '\0';
+
+	return string;
+} /* values_type_to_sqlarray */
+
+static char *values_to_sqlarray (const data_set_t *ds, const value_list_t *vl,
+		char *string, size_t string_len, _Bool store_rates)
+{
+	char  *str_ptr;
+	size_t str_len;
+
+	gauge_t *rates = NULL;
+
+	int i;
+
+	str_ptr = string;
+	str_len = string_len;
+
+	for (i = 0; i < vl->values_len; ++i) {
+		int status = 0;
+
+		if ((ds->ds[i].type != DS_TYPE_GAUGE)
+				&& (ds->ds[i].type != DS_TYPE_COUNTER)
+				&& (ds->ds[i].type != DS_TYPE_DERIVE)
+				&& (ds->ds[i].type != DS_TYPE_ABSOLUTE)) {
+			log_err ("c_psql_write: Unknown data source type: %i",
+					ds->ds[i].type);
+			sfree (rates);
+			return NULL;
+		}
+
+		if (ds->ds[i].type == DS_TYPE_GAUGE)
+			status = ssnprintf (str_ptr, str_len,
+					",%f", vl->values[i].gauge);
+		else if (store_rates) {
+			if (rates == NULL)
+				rates = uc_get_rate (ds, vl);
+
+			if (rates == NULL) {
+				log_err ("c_psql_write: Failed to determine rate");
+				return NULL;
+			}
+
+			status = ssnprintf (str_ptr, str_len,
+					",%lf", rates[i]);
+		}
+		else if (ds->ds[i].type == DS_TYPE_COUNTER)
+			status = ssnprintf (str_ptr, str_len,
+					",%llu", vl->values[i].counter);
+		else if (ds->ds[i].type == DS_TYPE_DERIVE)
+			status = ssnprintf (str_ptr, str_len,
+					",%"PRIi64, vl->values[i].derive);
+		else if (ds->ds[i].type == DS_TYPE_ABSOLUTE)
+			status = ssnprintf (str_ptr, str_len,
+					",%"PRIu64, vl->values[i].absolute);
+
+		if (status < 1) {
+			str_len = 0;
+			break;
+		}
+		else if ((size_t)status >= str_len) {
+			str_len = 0;
+			break;
+		}
+		else {
+			str_ptr += status;
+			str_len -= (size_t)status;
+		}
+	}
+
+	sfree (rates);
+
+	if (str_len <= 2) {
+		log_err ("c_psql_write: Failed to stringify value list");
+		return NULL;
+	}
+
+	/* overwrite the first comma */
+	string[0] = '{';
+	str_ptr[0] = '}';
+	str_ptr[1] = '\0';
+
+	return string;
+} /* values_to_sqlarray */
+
+static int c_psql_write (const data_set_t *ds, const value_list_t *vl,
+		user_data_t *ud)
+{
+	c_psql_database_t *db;
+
+	char time_str[32];
+	char values_name_str[1024];
+	char values_type_str[1024];
+	char values_str[1024];
+
+	const char *params[9];
+
+	int success = 0;
+	int i;
+
+	if ((ud == NULL) || (ud->data == NULL)) {
+		log_err ("c_psql_write: Invalid user data.");
+		return -1;
+	}
+
+	db = ud->data;
+	assert (db->database != NULL);
+	assert (db->writers != NULL);
+
+	if (cdtime_to_iso8601 (time_str, sizeof (time_str), vl->time) == 0) {
+		log_err ("c_psql_write: Failed to convert time to ISO 8601 format");
+		return -1;
+	}
+
+	if (values_name_to_sqlarray (ds,
+				values_name_str, sizeof (values_name_str)) == NULL)
+		return -1;
+
+#define VALUE_OR_NULL(v) ((((v) == NULL) || (*(v) == '\0')) ? NULL : (v))
+
+	params[0] = time_str;
+	params[1] = vl->host;
+	params[2] = vl->plugin;
+	params[3] = VALUE_OR_NULL(vl->plugin_instance);
+	params[4] = vl->type;
+	params[5] = VALUE_OR_NULL(vl->type_instance);
+	params[6] = values_name_str;
+
+#undef VALUE_OR_NULL
+
+	pthread_mutex_lock (&db->db_lock);
+
+	if (0 != c_psql_check_connection (db)) {
+		pthread_mutex_unlock (&db->db_lock);
+		return -1;
+	}
+
+	if ((db->commit_interval > 0)
+			&& (db->next_commit == 0))
+		c_psql_begin (db);
+
+	for (i = 0; i < db->writers_num; ++i) {
+		c_psql_writer_t *writer;
+		PGresult *res;
+
+		writer = db->writers[i];
+
+		if (values_type_to_sqlarray (ds,
+					values_type_str, sizeof (values_type_str),
+					writer->store_rates) == NULL) {
+			pthread_mutex_unlock (&db->db_lock);
+			return -1;
+		}
+
+		if (values_to_sqlarray (ds, vl,
+					values_str, sizeof (values_str),
+					writer->store_rates) == NULL) {
+			pthread_mutex_unlock (&db->db_lock);
+			return -1;
+		}
+
+		params[7] = values_type_str;
+		params[8] = values_str;
+
+		res = PQexecParams (db->conn, writer->statement,
+				STATIC_ARRAY_SIZE (params), NULL,
+				(const char *const *)params,
+				NULL, NULL, /* return text data */ 0);
+
+		if ((PGRES_COMMAND_OK != PQresultStatus (res))
+				&& (PGRES_TUPLES_OK != PQresultStatus (res))) {
+			if ((CONNECTION_OK != PQstatus (db->conn))
+					&& (0 == c_psql_check_connection (db))) {
+				PQclear (res);
+
+				/* try again */
+				res = PQexecParams (db->conn, writer->statement,
+						STATIC_ARRAY_SIZE (params), NULL,
+						(const char *const *)params,
+						NULL, NULL, /* return text data */ 0);
+
+				if ((PGRES_COMMAND_OK == PQresultStatus (res))
+						|| (PGRES_TUPLES_OK == PQresultStatus (res))) {
+					success = 1;
+					continue;
+				}
+			}
+
+			log_err ("Failed to execute SQL query: %s",
+					PQerrorMessage (db->conn));
+			log_info ("SQL query was: '%s', "
+					"params: %s, %s, %s, %s, %s, %s, %s, %s",
+					writer->statement,
+					params[0], params[1], params[2], params[3],
+					params[4], params[5], params[6], params[7]);
+
+			/* this will abort any current transaction -> restart */
+			if (db->next_commit > 0)
+				c_psql_commit (db);
+
+			pthread_mutex_unlock (&db->db_lock);
+			return -1;
+		}
+		success = 1;
+	}
+
+	if ((db->next_commit > 0)
+			&& (cdtime () > db->next_commit))
+		c_psql_commit (db);
+
+	pthread_mutex_unlock (&db->db_lock);
+
+	if (! success)
+		return -1;
+	return 0;
+} /* c_psql_write */
+
+/* We cannot flush single identifiers as all we do is to commit the currently
+ * running transaction, thus making sure that all written data is actually
+ * visible to everybody. */
+static int c_psql_flush (cdtime_t timeout,
+		__attribute__((unused)) const char *ident,
+		user_data_t *ud)
+{
+	c_psql_database_t *dbs = databases;
+	size_t dbs_num = databases_num;
+	size_t i;
+
+	if ((ud != NULL) && (ud->data != NULL)) {
+		dbs = ud->data;
+		dbs_num = 1;
+	}
+
+	for (i = 0; i < dbs_num; ++i) {
+		c_psql_database_t *db = dbs + i;
+
+		/* don't commit if the timeout is larger than the regular commit
+		 * interval as in that case all requested data has already been
+		 * committed */
+		if ((db->next_commit > 0) && (db->commit_interval > timeout))
+			c_psql_commit (db);
+	}
+	return 0;
+} /* c_psql_flush */
+
 static int c_psql_shutdown (void)
 {
+	size_t i = 0;
+
+	_Bool had_flush = 0;
+
 	plugin_unregister_read_group ("postgresql");
 
+	for (i = 0; i < databases_num; ++i) {
+		c_psql_database_t *db = databases + i;
+
+		if (db->writers_num > 0) {
+			char cb_name[DATA_MAX_NAME_LEN];
+			ssnprintf (cb_name, sizeof (cb_name), "postgresql-%s",
+					db->database);
+
+			if (! had_flush) {
+				plugin_unregister_flush ("postgresql");
+				had_flush = 1;
+			}
+
+			plugin_unregister_flush (cb_name);
+			plugin_unregister_write (cb_name);
+		}
+	}
+
 	udb_query_free (queries, queries_num);
 	queries = NULL;
 	queries_num = 0;
 
+	sfree (writers);
+	writers = NULL;
+	writers_num = 0;
+
+	sfree (databases);
+	databases = NULL;
+	databases_num = 0;
+
 	return 0;
 } /* c_psql_shutdown */
 
 static int config_query_param_add (udb_query_t *q, oconfig_item_t *ci)
 {
 	c_psql_user_data_t *data;
@@ -555,12 +1047,14 @@
 	else if (0 == strcasecmp (param_str, "database"))
 		data->params[data->params_num] = C_PSQL_PARAM_DB;
 	else if (0 == strcasecmp (param_str, "username"))
 		data->params[data->params_num] = C_PSQL_PARAM_USER;
 	else if (0 == strcasecmp (param_str, "interval"))
 		data->params[data->params_num] = C_PSQL_PARAM_INTERVAL;
+	else if (0 == strcasecmp (param_str, "instance"))
+		data->params[data->params_num] = C_PSQL_PARAM_INSTANCE;
 	else {
 		log_err ("Invalid parameter \"%s\".", param_str);
 		return 1;
 	}
 
 	data->params_num++;
@@ -576,20 +1070,119 @@
 
 	log_err ("Option not allowed within a Query block: `%s'", ci->key);
 
 	return (-1);
 } /* config_query_callback */
 
+static int config_add_writer (oconfig_item_t *ci,
+		c_psql_writer_t *src_writers, size_t src_writers_num,
+		c_psql_writer_t ***dst_writers, size_t *dst_writers_num)
+{
+	char *name;
+
+	size_t i;
+
+	if ((ci == NULL) || (dst_writers == NULL) || (dst_writers_num == NULL))
+		return -1;
+
+	if ((ci->values_num != 1)
+			|| (ci->values[0].type != OCONFIG_TYPE_STRING)) {
+		log_err ("`Writer' expects a single string argument.");
+		return 1;
+	}
+
+	name = ci->values[0].value.string;
+
+	for (i = 0; i < src_writers_num; ++i) {
+		c_psql_writer_t **tmp;
+
+		if (strcasecmp (name, src_writers[i].name) != 0)
+			continue;
+
+		tmp = (c_psql_writer_t **)realloc (*dst_writers,
+				sizeof (**dst_writers) * (*dst_writers_num + 1));
+		if (tmp == NULL) {
+			log_err ("Out of memory.");
+			return -1;
+		}
+
+		tmp[*dst_writers_num] = src_writers + i;
+
+		*dst_writers = tmp;
+		++(*dst_writers_num);
+		break;
+	}
+
+	if (i >= src_writers_num) {
+		log_err ("No such writer: `%s'", name);
+		return -1;
+	}
+
+	return 0;
+} /* config_add_writer */
+
+static int c_psql_config_writer (oconfig_item_t *ci)
+{
+	c_psql_writer_t *writer;
+	c_psql_writer_t *tmp;
+
+	int status = 0;
+	int i;
+
+	if ((ci->values_num != 1)
+			|| (ci->values[0].type != OCONFIG_TYPE_STRING)) {
+		log_err ("<Writer> expects a single string argument.");
+		return 1;
+	}
+
+	tmp = (c_psql_writer_t *)realloc (writers,
+			sizeof (*writers) * (writers_num + 1));
+	if (tmp == NULL) {
+		log_err ("Out of memory.");
+		return -1;
+	}
+
+	writers = tmp;
+	writer  = writers + writers_num;
+	++writers_num;
+
+	writer->name = sstrdup (ci->values[0].value.string);
+	writer->statement = NULL;
+	writer->store_rates = 1;
+
+	for (i = 0; i < ci->children_num; ++i) {
+		oconfig_item_t *c = ci->children + i;
+
+		if (strcasecmp ("Statement", c->key) == 0)
+			status = cf_util_get_string (c, &writer->statement);
+		else if (strcasecmp ("StoreRates", c->key) == 0)
+			status = cf_util_get_boolean (c, &writer->store_rates);
+		else
+			log_warn ("Ignoring unknown config key \"%s\".", c->key);
+	}
+
+	if (status != 0) {
+		sfree (writer->statement);
+		sfree (writer->name);
+		sfree (writer);
+		return status;
+	}
+
+	return 0;
+} /* c_psql_config_writer */
+
 static int c_psql_config_database (oconfig_item_t *ci)
 {
 	c_psql_database_t *db;
 
 	char cb_name[DATA_MAX_NAME_LEN];
 	struct timespec cb_interval = { 0, 0 };
 	user_data_t ud;
 
+	static _Bool have_flush = 0;
+
 	int i;
 
 	if ((1 != ci->values_num)
 			|| (OCONFIG_TYPE_STRING != ci->values[0].type)) {
 		log_err ("<Database> expects a single string argument.");
 		return 1;
@@ -609,29 +1202,36 @@
 		else if (0 == strcasecmp (c->key, "Port"))
 			cf_util_get_service (c, &db->port);
 		else if (0 == strcasecmp (c->key, "User"))
 			cf_util_get_string (c, &db->user);
 		else if (0 == strcasecmp (c->key, "Password"))
 			cf_util_get_string (c, &db->password);
+		else if (0 == strcasecmp (c->key, "Instance"))
+			cf_util_get_string (c, &db->instance);
 		else if (0 == strcasecmp (c->key, "SSLMode"))
 			cf_util_get_string (c, &db->sslmode);
 		else if (0 == strcasecmp (c->key, "KRBSrvName"))
 			cf_util_get_string (c, &db->krbsrvname);
 		else if (0 == strcasecmp (c->key, "Service"))
 			cf_util_get_string (c, &db->service);
 		else if (0 == strcasecmp (c->key, "Query"))
 			udb_query_pick_from_list (c, queries, queries_num,
 					&db->queries, &db->queries_num);
+		else if (0 == strcasecmp (c->key, "Writer"))
+			config_add_writer (c, writers, writers_num,
+					&db->writers, &db->writers_num);
 		else if (0 == strcasecmp (c->key, "Interval"))
 			cf_util_get_cdtime (c, &db->interval);
+		else if (strcasecmp ("CommitInterval", c->key) == 0)
+			cf_util_get_cdtime (c, &db->commit_interval);
 		else
 			log_warn ("Ignoring unknown config key \"%s\".", c->key);
 	}
 
 	/* If no `Query' options were given, add the default queries.. */
-	if (db->queries_num == 0) {
+	if ((db->queries_num == 0) && (db->writers_num == 0)){
 		for (i = 0; i < def_queries_num; i++)
 			udb_query_pick_from_list_by_name (def_queries[i],
 					queries, queries_num,
 					&db->queries, &db->queries_num);
 	}
 
@@ -662,19 +1262,42 @@
 		}
 	}
 
 	ud.data = db;
 	ud.free_func = c_psql_database_delete;
 
-	ssnprintf (cb_name, sizeof (cb_name), "postgresql-%s", db->database);
+	ssnprintf (cb_name, sizeof (cb_name), "postgresql-%s", db->instance);
 
-	CDTIME_T_TO_TIMESPEC (db->interval, &cb_interval);
+	if (db->queries_num > 0) {
+		CDTIME_T_TO_TIMESPEC (db->interval, &cb_interval);
 
-	plugin_register_complex_read ("postgresql", cb_name, c_psql_read,
-			/* interval = */ (db->interval > 0) ? &cb_interval : NULL,
-			&ud);
+		++db->ref_cnt;
+		plugin_register_complex_read ("postgresql", cb_name, c_psql_read,
+				/* interval = */ (db->interval > 0) ? &cb_interval : NULL,
+				&ud);
+	}
+	if (db->writers_num > 0) {
+		++db->ref_cnt;
+		plugin_register_write (cb_name, c_psql_write, &ud);
+
+		if (! have_flush) {
+			/* flush all */
+			plugin_register_flush ("postgresql",
+					c_psql_flush, /* user data = */ NULL);
+			have_flush = 1;
+		}
+
+		/* flush this connection only */
+		++db->ref_cnt;
+		plugin_register_flush (cb_name, c_psql_flush, &ud);
+	}
+	else if (db->commit_interval > 0) {
+		log_warn ("Database '%s': You do not have any writers assigned to "
+				"this database connection. Setting 'CommitInterval' does "
+				"not have any effect.", db->database);
+	}
 	return 0;
 } /* c_psql_config_database */
 
 static int c_psql_config (oconfig_item_t *ci)
 {
 	static int have_def_config = 0;
@@ -700,12 +1323,14 @@
 	for (i = 0; i < ci->children_num; ++i) {
 		oconfig_item_t *c = ci->children + i;
 
 		if (0 == strcasecmp (c->key, "Query"))
 			udb_query_create (&queries, &queries_num, c,
 					/* callback = */ config_query_callback);
+		else if (0 == strcasecmp (c->key, "Writer"))
+			c_psql_config_writer (c);
 		else if (0 == strcasecmp (c->key, "Database"))
 			c_psql_config_database (c);
 		else
 			log_warn ("Ignoring unknown config key \"%s\".", c->key);
 	}
 	return 0;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/postgresql_default.conf /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/postgresql_default.conf
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/postgresql_default.conf	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/postgresql_default.conf	2012-11-18 06:23:21.000000000 +0800
@@ -90,12 +90,77 @@
 		ValuesFrom "hot_upd"
 	</Result>
 
 	MinVersion 80300
 </Query>
 
+<Query queries_by_table>
+	Statement "SELECT schemaname, relname, \
+			n_tup_ins AS ins, \
+			n_tup_upd AS upd, \
+			n_tup_del AS del \
+		FROM pg_stat_user_tables;"
+
+	<Result>
+		Type "pg_n_tup_c"
+		InstancePrefix "ins"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "ins"
+	</Result>
+	<Result>
+		Type "pg_n_tup_c"
+		InstancePrefix "upd"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "upd"
+	</Result>
+	<Result>
+		Type "pg_n_tup_c"
+		InstancePrefix "del"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "del"
+	</Result>
+
+	MaxVersion 80299
+</Query>
+
+<Query queries_by_table>
+	Statement "SELECT schemaname, relname, \
+			n_tup_ins AS ins, \
+			n_tup_upd AS upd, \
+			n_tup_del AS del, \
+			n_tup_hot_upd AS hot_upd \
+		FROM pg_stat_user_tables;"
+
+	<Result>
+		Type "pg_n_tup_c"
+		InstancePrefix "ins"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "ins"
+	</Result>
+	<Result>
+		Type "pg_n_tup_c"
+		InstancePrefix "upd"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "upd"
+	</Result>
+	<Result>
+		Type "pg_n_tup_c"
+		InstancePrefix "del"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "del"
+	</Result>
+	<Result>
+		Type "pg_n_tup_c"
+		InstancePrefix "hot_upd"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "hot_upd"
+	</Result>
+
+	MinVersion 80300
+</Query>
+
 <Query query_plans>
 	Statement "SELECT sum(seq_scan) AS seq, \
 			sum(seq_tup_read) AS seq_tup_read, \
 			sum(idx_scan) AS idx, \
 			sum(idx_tup_fetch) AS idx_tup_fetch \
 		FROM pg_stat_user_tables;"
@@ -137,12 +202,67 @@
 		ValuesFrom "dead"
 	</Result>
 
 	MinVersion 80300
 </Query>
 
+<Query query_plans_by_table>
+	Statement "SELECT schemaname, relname, \
+			seq_scan AS seq, \
+			seq_tup_read AS seq_tup_read, \
+			idx_scan AS idx, \
+			idx_tup_fetch AS idx_tup_fetch \
+		FROM pg_stat_user_tables;"
+
+	<Result>
+		Type "pg_scan"
+		InstancePrefix "seq"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "seq"
+	</Result>
+	<Result>
+		Type "pg_scan"
+		InstancePrefix "seq_tup_read"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "seq_tup_read"
+	</Result>
+	<Result>
+		Type "pg_scan"
+		InstancePrefix "idx"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "idx"
+	</Result>
+	<Result>
+		Type "pg_scan"
+		InstancePrefix "idx_tup_fetch"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "idx_tup_fetch"
+	</Result>
+</Query>
+
+<Query table_states_by_table>
+	Statement "SELECT schemaname, relname, \
+			n_live_tup AS live, n_dead_tup AS dead \
+		FROM pg_stat_user_tables;"
+
+	<Result>
+		Type "pg_n_tup_g"
+		InstancePrefix "live"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "live"
+	</Result>
+	<Result>
+		Type "pg_n_tup_g"
+		InstancePrefix "dead"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "dead"
+	</Result>
+
+	MinVersion 80300
+</Query>
+
 <Query disk_io>
 	Statement "SELECT coalesce(sum(heap_blks_read), 0) AS heap_read, \
 			coalesce(sum(heap_blks_hit), 0) AS heap_hit, \
 			coalesce(sum(idx_blks_read), 0) AS idx_read, \
 			coalesce(sum(idx_blks_hit), 0) AS idx_hit, \
 			coalesce(sum(toast_blks_read), 0) AS toast_read, \
@@ -190,12 +310,74 @@
 		Type "pg_blks"
 		InstancePrefix "tidx_hit"
 		ValuesFrom "tidx_hit"
 	</Result>
 </Query>
 
+<Query disk_io_by_table>
+	Statement "SELECT schemaname, relname, \
+			coalesce(heap_blks_read, 0) AS heap_read, \
+			coalesce(heap_blks_hit, 0) AS heap_hit, \
+			coalesce(idx_blks_read, 0) AS idx_read, \
+			coalesce(idx_blks_hit, 0) AS idx_hit, \
+			coalesce(toast_blks_read, 0) AS toast_read, \
+			coalesce(toast_blks_hit, 0) AS toast_hit, \
+			coalesce(tidx_blks_read, 0) AS tidx_read, \
+			coalesce(tidx_blks_hit, 0) AS tidx_hit \
+		FROM pg_statio_user_tables;"
+
+	<Result>
+		Type "pg_blks"
+		InstancePrefix "heap_read"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "heap_read"
+	</Result>
+	<Result>
+		Type "pg_blks"
+		InstancePrefix "heap_hit"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "heap_hit"
+	</Result>
+	<Result>
+		Type "pg_blks"
+		InstancePrefix "idx_read"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "idx_read"
+	</Result>
+	<Result>
+		Type "pg_blks"
+		InstancePrefix "idx_hit"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "idx_hit"
+	</Result>
+	<Result>
+		Type "pg_blks"
+		InstancePrefix "toast_read"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "toast_read"
+	</Result>
+	<Result>
+		Type "pg_blks"
+		InstancePrefix "toast_hit"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "toast_hit"
+	</Result>
+	<Result>
+		Type "pg_blks"
+		InstancePrefix "tidx_read"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "tidx_read"
+	</Result>
+	<Result>
+		Type "pg_blks"
+		InstancePrefix "tidx_hit"
+		InstancesFrom "schemaname" "relname"
+		ValuesFrom "tidx_hit"
+	</Result>
+</Query>
+
 <Query disk_usage>
 	Statement "SELECT pg_database_size($1) AS size;"
 
 	Param database
 
 	<Result>
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/powerdns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/powerdns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/powerdns.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/powerdns.c	2012-11-18 06:23:21.000000000 +0800
@@ -361,13 +361,13 @@
     if (status != 0)
     {
       FUNC_ERROR ("chmod");
       break;
     }
 
-    cdt_timeout = interval_g * 3 / 4;
+    cdt_timeout = plugin_get_interval () * 3 / 4;
     if (cdt_timeout < TIME_T_TO_CDTIME_T (2))
       cdt_timeout = TIME_T_TO_CDTIME_T (2);
 
     CDTIME_T_TO_TIMEVAL (cdt_timeout, &stv_timeout);
 
     status = setsockopt (sd, SOL_SOCKET, SO_RCVTIMEO, &stv_timeout, sizeof (stv_timeout));
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/processes.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/processes.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/processes.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/processes.c	2012-11-18 06:23:21.000000000 +0800
@@ -4,12 +4,13 @@
  * Copyright (C) 2006-2010  Florian octo Forster
  * Copyright (C) 2008       Oleg King
  * Copyright (C) 2009       Sebastian Harl
  * Copyright (C) 2009       Andrés J. Díaz
  * Copyright (C) 2009       Manuel Sanmartin
  * Copyright (C) 2010       Clément Stenac
+ * Copyright (C) 2012       Cosmin Ioiart
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; either version 2 of the License, or (at your
  * option) any later version.
  *
@@ -27,12 +28,13 @@
  *   Florian octo Forster <octo at verplant.org>
  *   Oleg King <king2 at kaluga.ru>
  *   Sebastian Harl <sh at tokkee.org>
  *   Andrés J. Díaz <ajdiaz at connectical.com>
  *   Manuel Sanmartin
  *   Clément Stenac <clement.stenac at diwi.org>
+ *   Cosmin Ioiart <cioiart at gmail.com>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
@@ -106,20 +108,29 @@
 
 #define MAXPROCENTRY 32
 #define MAXTHRDENTRY 16
 #define MAXARGLN 1024
 /* #endif HAVE_PROCINFO_H */
 
+#elif KERNEL_SOLARIS
+# include <procfs.h>
+# include <dirent.h>
+/* #endif KERNEL_SOLARIS */
+
 #else
 # error "No applicable input method."
 #endif
 
 #if HAVE_REGEX_H
 # include <regex.h>
 #endif
 
+#if HAVE_KSTAT_H
+# include <kstat.h>
+#endif
+
 #ifndef ARG_MAX
 #  define ARG_MAX 4096
 #endif
 
 typedef struct procstat_entry_s
 {
@@ -213,14 +224,14 @@
 int     getthrds64( pid_t, void *, int, tid64_t *, int );
 #endif
 int getargs (struct procentry64 *processBuffer, int bufferLen, char *argsBuffer, int argsLen);
 #endif /* HAVE_PROCINFO_H */
 
 /* put name of process from config to list_head_g tree
-   list_head_g is a list of 'procstat_t' structs with
-   processes names we want to watch */
+ * list_head_g is a list of 'procstat_t' structs with
+ * processes names we want to watch */
 static void ps_list_register (const char *name, const char *regexp)
 {
 	procstat_t *new;
 	procstat_t *ptr;
 	int status;
 
@@ -723,12 +734,32 @@
 			ps->vmem_data, ps->vmem_code,
 			ps->vmem_minflt_counter, ps->vmem_majflt_counter,
 			ps->cpu_user_counter, ps->cpu_system_counter,
 			ps->io_rchar, ps->io_wchar, ps->io_syscr, ps->io_syscw);
 } /* void ps_submit_proc_list */
 
+#if KERNEL_LINUX || KERNEL_SOLARIS
+static void ps_submit_fork_rate (derive_t value)
+{
+	value_t values[1];
+	value_list_t vl = VALUE_LIST_INIT;
+
+	values[0].derive = value;
+
+	vl.values = values;
+	vl.values_len = 1;
+	sstrncpy(vl.host, hostname_g, sizeof (vl.host));
+	sstrncpy(vl.plugin, "processes", sizeof (vl.plugin));
+	sstrncpy(vl.plugin_instance, "", sizeof (vl.plugin_instance));
+	sstrncpy(vl.type, "fork_rate", sizeof (vl.type));
+	sstrncpy(vl.type_instance, "", sizeof (vl.type_instance));
+
+	plugin_dispatch_values(&vl);
+}
+#endif /* KERNEL_LINUX || KERNEL_SOLARIS*/
+
 /* ------- additional functions for KERNEL_LINUX/HAVE_THREAD_INFO ------- */
 #if KERNEL_LINUX
 static int ps_read_tasks (int pid)
 {
 	char           dirname[64];
 	DIR           *dh;
@@ -777,13 +808,13 @@
 		char *endptr;
 
 		if (strncmp (buffer, "Vm", 2) != 0)
 			continue;
 
 		numfields = strsplit (buffer, fields,
-                                      STATIC_ARRAY_SIZE (fields));
+				STATIC_ARRAY_SIZE (fields));
 
 		if (numfields < 2)
 			continue;
 
 		errno = 0;
 		endptr = NULL;
@@ -1114,76 +1145,232 @@
 			buf[n] = ' ';
 		--n;
 	}
 	return buf;
 } /* char *ps_get_cmdline (...) */
 
-static unsigned long read_fork_rate ()
+static int read_fork_rate ()
 {
 	FILE *proc_stat;
-	char buf[1024];
-	unsigned long result = 0;
-	int numfields;
-	char *fields[3];
+	char buffer[1024];
+	value_t value;
+	_Bool value_valid = 0;
 
-	proc_stat = fopen("/proc/stat", "r");
-	if (proc_stat == NULL) {
+	proc_stat = fopen ("/proc/stat", "r");
+	if (proc_stat == NULL)
+	{
 		char errbuf[1024];
 		ERROR ("processes plugin: fopen (/proc/stat) failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
-		return ULONG_MAX;
+		return (-1);
 	}
 
-	while (fgets (buf, sizeof(buf), proc_stat) != NULL)
+	while (fgets (buffer, sizeof (buffer), proc_stat) != NULL)
 	{
-		char *endptr;
+		int status;
+		char *fields[3];
+		int fields_num;
 
-		numfields = strsplit(buf, fields, STATIC_ARRAY_SIZE (fields));
-		if (numfields != 2)
+		fields_num = strsplit (buffer, fields,
+				STATIC_ARRAY_SIZE (fields));
+		if (fields_num != 2)
 			continue;
 
 		if (strcmp ("processes", fields[0]) != 0)
 			continue;
 
-		errno = 0;
-		endptr = NULL;
-		result = strtoul(fields[1], &endptr, /* base = */ 10);
-		if ((endptr == fields[1]) || (errno != 0)) {
-			ERROR ("processes plugin: Cannot parse fork rate: %s",
-					fields[1]);
-			result = ULONG_MAX;
-			break;
-		}
+		status = parse_value (fields[1], &value, DS_TYPE_DERIVE);
+		if (status == 0)
+			value_valid = 1;
 
 		break;
 	}
-
 	fclose(proc_stat);
 
-	return result;
+	if (!value_valid)
+		return (-1);
+
+	ps_submit_fork_rate (value.derive);
+	return (0);
 }
+#endif /*KERNEL_LINUX */
 
-static void ps_submit_fork_rate (unsigned long value)
+#if KERNEL_SOLARIS
+static const char *ps_get_cmdline (pid_t pid, /* {{{ */
+		char *buffer, size_t buffer_size)
 {
-	value_t values[1];
-	value_list_t vl = VALUE_LIST_INIT;
+	char path[PATH_MAX];
+	psinfo_t info;
+	int status;
 
-	values[0].derive = (derive_t) value;
+	snprintf(path, sizeof (path), "/proc/%i/psinfo", pid);
 
-	vl.values = values;
-	vl.values_len = 1;
-	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
-	sstrncpy (vl.plugin, "processes", sizeof (vl.plugin));
-	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
-	sstrncpy (vl.type, "fork_rate", sizeof (vl.type));
-	sstrncpy (vl.type_instance, "", sizeof (vl.type_instance));
+	status = read_file_contents (path, (void *) &info, sizeof (info));
+	if (status != ((int) buffer_size))
+	{
+		ERROR ("processes plugin: Unexpected return value "
+				"while reading \"%s\": "
+				"Returned %i but expected %zu.",
+				path, status, buffer_size);
+		return (NULL);
+	}
 
-	plugin_dispatch_values (&vl);
+	info.pr_psargs[sizeof (info.pr_psargs) - 1] = 0;
+	sstrncpy (buffer, info.pr_psargs, buffer_size);
+
+	return (buffer);
+} /* }}} int ps_get_cmdline */
+
+/*
+ * Reads process information on the Solaris OS. The information comes mainly from
+ * /proc/PID/status, /proc/PID/psinfo and /proc/PID/usage
+ * The values for input and ouput chars are calculated "by hand"
+ * Added a few "solaris" specific process states as well
+ */
+static int ps_read_process(int pid, procstat_t *ps, char *state)
+{
+	char filename[64];
+	char f_psinfo[64], f_usage[64];
+	char *buffer;
+
+	pstatus_t *myStatus;
+	psinfo_t *myInfo;
+	prusage_t *myUsage;
+
+	snprintf(filename, sizeof (filename), "/proc/%i/status", pid);
+	snprintf(f_psinfo, sizeof (f_psinfo), "/proc/%i/psinfo", pid);
+	snprintf(f_usage, sizeof (f_usage), "/proc/%i/usage", pid);
+
+
+	buffer = malloc(sizeof (pstatus_t));
+	memset(buffer, 0, sizeof (pstatus_t));
+	read_file_contents(filename, buffer, sizeof (pstatus_t));
+	myStatus = (pstatus_t *) buffer;
+
+	buffer = malloc(sizeof (psinfo_t));
+	memset(buffer, 0, sizeof(psinfo_t));
+	read_file_contents(f_psinfo, buffer, sizeof (psinfo_t));
+	myInfo = (psinfo_t *) buffer;
+
+	buffer = malloc(sizeof (prusage_t));
+	memset(buffer, 0, sizeof(prusage_t));
+	read_file_contents(f_usage, buffer, sizeof (prusage_t));
+	myUsage = (prusage_t *) buffer;
+
+	sstrncpy(ps->name, myInfo->pr_fname, sizeof (myInfo->pr_fname));
+	ps->num_lwp = myStatus->pr_nlwp;
+	if (myInfo->pr_wstat != 0) {
+		ps->num_proc = 0;
+		ps->num_lwp = 0;
+		*state = (char) 'Z';
+		return (0);
+	} else {
+		ps->num_proc = 1;
+		ps->num_lwp = myInfo->pr_nlwp;
+	}
+
+	/*
+	 * Convert system time and user time from nanoseconds to microseconds
+	 * for compatibility with the linux module
+	 */
+	ps->cpu_system_counter = myStatus -> pr_stime.tv_nsec / 1000;
+	ps->cpu_user_counter = myStatus -> pr_utime.tv_nsec / 1000;
+
+	/*
+	 * Convert rssize from KB to bytes to be consistent w/ the linux module
+	 */
+	ps->vmem_rss = myInfo->pr_rssize * 1024;
+	ps->vmem_size = myInfo->pr_size * 1024;
+	ps->vmem_minflt_counter = myUsage->pr_minf;
+	ps->vmem_majflt_counter = myUsage->pr_majf;
+
+	/*
+	 * TODO: Data and code segment calculations for Solaris
+	 */
+
+	ps->vmem_data = -1;
+	ps->vmem_code = -1;
+	ps->stack_size = myStatus->pr_stksize;
+
+	/*
+	 * Calculating input/ouput chars
+	 * Formula used is total chars / total blocks => chars/block
+	 * then convert input/output blocks to chars
+	 */
+	ulong_t tot_chars = myUsage->pr_ioch;
+	ulong_t tot_blocks = myUsage->pr_inblk + myUsage->pr_oublk;
+	ulong_t chars_per_block = 1;
+	if (tot_blocks != 0)
+		chars_per_block = tot_chars / tot_blocks;
+	ps->io_rchar = myUsage->pr_inblk * chars_per_block;
+	ps->io_wchar = myUsage->pr_oublk * chars_per_block;
+	ps->io_syscr = myUsage->pr_sysc;
+	ps->io_syscw = myUsage->pr_sysc;
+
+
+	/*
+	 * TODO: Find way of setting BLOCKED and PAGING status
+	 */
+
+	*state = (char) 'R';
+	if (myStatus->pr_flags & PR_ASLEEP)
+		*state = (char) 'S';
+	else if (myStatus->pr_flags & PR_STOPPED)
+		*state = (char) 'T';
+	else if (myStatus->pr_flags & PR_DETACH)
+		*state = (char) 'E';
+	else if (myStatus->pr_flags & PR_DAEMON)
+		*state = (char) 'A';
+	else if (myStatus->pr_flags & PR_ISSYS)
+		*state = (char) 'Y';
+	else if (myStatus->pr_flags & PR_ORPHAN)
+		*state = (char) 'O';
+
+	sfree(myStatus);
+	sfree(myInfo);
+	sfree(myUsage);
+
+	return (0);
 }
 
-#endif /* KERNEL_LINUX */
+/*
+ * Reads the number of threads created since the last reboot. On Solaris these
+ * are retrieved from kstat (module cpu, name sys, class misc, stat nthreads).
+ * The result is the sum for all the threads created on each cpu
+ */
+static int read_fork_rate()
+{
+	extern kstat_ctl_t *kc;
+	kstat_t *ksp_chain = NULL;
+	derive_t result = 0;
+
+	if (kc == NULL)
+		return (-1);
+
+	for (ksp_chain = kc->kc_chain;
+			ksp_chain != NULL;
+			ksp_chain = ksp_chain->ks_next)
+	{
+		if ((strcmp (ksp_chain->ks_module, "cpu") == 0)
+				&& (strcmp (ksp_chain->ks_name, "sys") == 0)
+				&& (strcmp (ksp_chain->ks_class, "misc") == 0))
+		{
+			long long tmp;
+
+			kstat_read (kc, ksp_chain, NULL);
+
+			tmp = get_kstat_value(ksp_chain, "nthreads");
+			if (tmp != -1LL)
+				result += tmp;
+		}
+	}
+
+	ps_submit_fork_rate (result);
+	return (0);
+}
+#endif /* KERNEL_SOLARIS */
 
 #if HAVE_THREAD_INFO
 static int mach_get_task_name (task_t t, int *pid, char *name, size_t name_max_len)
 {
 	int mib[4];
 
@@ -1503,14 +1690,12 @@
 
 	int        status;
 	procstat_t ps;
 	procstat_entry_t pse;
 	char       state;
 
-	unsigned long fork_rate;
-
 	procstat_t *ps_ptr;
 
 	running = sleeping = zombies = stopped = paging = blocked = 0;
 	ps_list_reset ();
 
 	if ((proc = opendir ("/proc")) == NULL)
@@ -1586,15 +1771,13 @@
 	ps_submit_state ("paging",   paging);
 	ps_submit_state ("blocked",  blocked);
 
 	for (ps_ptr = list_head_g; ps_ptr != NULL; ps_ptr = ps_ptr->next)
 		ps_submit_proc_list (ps_ptr);
 
-	fork_rate = read_fork_rate();
-	if (fork_rate != ULONG_MAX)
-		ps_submit_fork_rate(fork_rate);
+	read_fork_rate();
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_LIBKVM_GETPROCS && HAVE_STRUCT_KINFO_PROC_FREEBSD
 	int running  = 0;
 	int sleeping = 0;
 	int zombies  = 0;
@@ -1867,13 +2050,124 @@
 	ps_submit_state ("stopped",  stopped);
 	ps_submit_state ("paging",   paging);
 	ps_submit_state ("blocked",  blocked);
 
 	for (ps = list_head_g; ps != NULL; ps = ps->next)
 		ps_submit_proc_list (ps);
-#endif /* HAVE_PROCINFO_H */
+/* #endif HAVE_PROCINFO_H */
+
+#elif KERNEL_SOLARIS
+	/*
+	 * The Solaris section adds a few more process states and removes some
+	 * process states compared to linux. Most notably there is no "PAGING"
+	 * and "BLOCKED" state for a process.  The rest is similar to the linux
+	 * code.
+	 */
+	int running = 0;
+	int sleeping = 0;
+	int zombies = 0;
+	int stopped = 0;
+	int detached = 0;
+	int daemon = 0;
+	int system = 0;
+	int orphan = 0;
+
+	struct dirent *ent;
+	DIR *proc;
+
+	int status;
+	procstat_t *ps_ptr;
+	char state;
+
+	char cmdline[PRARGSZ];
+
+	ps_list_reset ();
+
+	proc = opendir ("/proc");
+	if (proc == NULL)
+		return (-1);
+
+	while ((ent = readdir(proc)) != NULL)
+	{
+		int pid;
+		struct procstat ps;
+		procstat_entry_t pse;
+
+		if (!isdigit ((int) ent->d_name[0]))
+			continue;
+
+		if ((pid = atoi (ent->d_name)) < 1)
+			continue;
+
+		status = ps_read_process (pid, &ps, &state);
+		if (status != 0)
+		{
+			DEBUG("ps_read_process failed: %i", status);
+			continue;
+		}
+
+		pse.id = pid;
+		pse.age = 0;
+
+		pse.num_proc   = ps.num_proc;
+		pse.num_lwp    = ps.num_lwp;
+		pse.vmem_size  = ps.vmem_size;
+		pse.vmem_rss   = ps.vmem_rss;
+		pse.vmem_data  = ps.vmem_data;
+		pse.vmem_code  = ps.vmem_code;
+		pse.stack_size = ps.stack_size;
+
+		pse.vmem_minflt = 0;
+		pse.vmem_minflt_counter = ps.vmem_minflt_counter;
+		pse.vmem_majflt = 0;
+		pse.vmem_majflt_counter = ps.vmem_majflt_counter;
+
+		pse.cpu_user = 0;
+		pse.cpu_user_counter = ps.cpu_user_counter;
+		pse.cpu_system = 0;
+		pse.cpu_system_counter = ps.cpu_system_counter;
+
+		pse.io_rchar = ps.io_rchar;
+		pse.io_wchar = ps.io_wchar;
+		pse.io_syscr = ps.io_syscr;
+		pse.io_syscw = ps.io_syscw;
+
+		switch (state)
+		{
+			case 'R': running++;  break;
+			case 'S': sleeping++; break;
+			case 'E': detached++; break;
+			case 'Z': zombies++;  break;
+			case 'T': stopped++;  break;
+			case 'A': daemon++;   break;
+			case 'Y': system++;   break;
+			case 'O': orphan++;   break;
+		}
+
+
+		ps_list_add (ps.name,
+				ps_get_cmdline ((pid_t) pid,
+					cmdline, sizeof (cmdline)),
+				&pse);
+	} /* while(readdir) */
+	closedir (proc);
+
+	ps_submit_state ("running",  running);
+	ps_submit_state ("sleeping", sleeping);
+	ps_submit_state ("zombies",  zombies);
+	ps_submit_state ("stopped",  stopped);
+	ps_submit_state ("detached", detached);
+	ps_submit_state ("daemon",   daemon);
+	ps_submit_state ("system",   system);
+	ps_submit_state ("orphan",   orphan);
+
+	for (ps_ptr = list_head_g; ps_ptr != NULL; ps_ptr = ps_ptr->next)
+		ps_submit_proc_list (ps_ptr);
+
+	read_fork_rate();
+#endif /* KERNEL_SOLARIS */
 
 	return (0);
 } /* int ps_read */
 
 void module_register (void)
 {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/python.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/python.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/python.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/python.c	2012-11-18 06:23:21.000000000 +0800
@@ -930,13 +930,13 @@
 	}
 	sigemptyset(&sigset);
 	sigaddset(&sigset, SIGINT);
 	pthread_sigmask(SIG_BLOCK, &sigset, NULL);
 	state = PyEval_SaveThread();
 	if (do_interactive) {
-		if (pthread_create(&thread, NULL, cpy_interactive, NULL)) {
+		if (plugin_thread_create(&thread, NULL, cpy_interactive, NULL)) {
 			ERROR("python: Error creating thread for interactive interpreter.");
 		}
 	}
 
 	return 0;
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/redis.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/redis.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/redis.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/redis.c	2012-11-18 06:23:21.000000000 +0800
@@ -51,12 +51,13 @@
 struct redis_node_s;
 typedef struct redis_node_s redis_node_t;
 struct redis_node_s
 {
   char name[MAX_REDIS_NODE_NAME];
   char host[HOST_NAME_MAX];
+  char passwd[HOST_NAME_MAX];
   int port;
   int timeout;
 
   redis_node_t *next;
 };
 
@@ -133,12 +134,14 @@
         rn.port = status;
         status = 0;
       }
     }
     else if (strcasecmp ("Timeout", option->key) == 0)
       status = cf_util_get_int (option, &rn.timeout);
+    else if (strcasecmp ("Password", option->key) == 0)
+      status = cf_util_get_string_buffer (option, rn.passwd, sizeof (rn.passwd));
     else
       WARNING ("redis plugin: Option `%s' not allowed inside a `Node' "
           "block. I'll ignore this option.", option->key);
 
     if (status != 0)
       break;
@@ -252,12 +255,24 @@
     if (rh == NULL)
     {
       ERROR ("redis plugin: unable to connect to node `%s' (%s:%d).", rn->name, rn->host, rn->port);
       continue;
     }
 
+    if (strlen (rn->passwd) > 0)
+    {
+      DEBUG ("redis plugin: authenticanting node `%s' passwd(%s).", rn->name, rn->passwd);
+      status = credis_auth(rh, rn->passwd);
+      if (status != 0)
+      {
+        WARNING ("redis plugin: unable to authenticate on node `%s'.", rn->name);
+        credis_close (rh);
+        continue;
+      }
+    }
+
     memset (&info, 0, sizeof (info));
     status = credis_info (rh, &info);
     if (status != 0)
     {
       WARNING ("redis plugin: unable to get info from node `%s'.", rn->name);
       credis_close (rh);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/rrdcached.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/rrdcached.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/rrdcached.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/rrdcached.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/rrdcached.c
- * Copyright (C) 2008-2013  Florian octo Forster
+ * Copyright (C) 2008-2012  Florian octo Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -30,14 +30,14 @@
 
 /*
  * Private variables
  */
 static char *datadir = NULL;
 static char *daemon_address = NULL;
-static int config_create_files = 1;
-static int config_collect_stats = 1;
+static _Bool config_create_files = 1;
+static _Bool config_collect_stats = 1;
 static rrdcreate_config_t rrdcreate_config =
 {
 	/* stepsize = */ 0,
 	/* heartbeat = */ 0,
 	/* rrarows = */ 1200,
 	/* xff = */ 0.1,
@@ -158,95 +158,136 @@
   strncpy (buffer + offset, ".rrd", buffer_len - offset);
   buffer[buffer_len - 1] = 0;
 
   return (0);
 } /* int value_list_to_filename */
 
-static const char *config_get_string (oconfig_item_t *ci)
+static int rc_config_get_int_positive (oconfig_item_t const *ci, int *ret)
 {
-  if ((ci->children_num != 0) || (ci->values_num != 1)
-      || ((ci->values[0].type != OCONFIG_TYPE_STRING)
-        && (ci->values[0].type != OCONFIG_TYPE_BOOLEAN)))
-  {
-    ERROR ("rrdcached plugin: %s expects a single string argument.",
-        ci->key);
-    return (NULL);
+  int status;
+  int tmp = 0;
+
+  status = cf_util_get_int (ci, &tmp);
+  if (status != 0)
+    return (status);
+  if (tmp < 0)
+    return (EINVAL);
+
+  *ret = tmp;
+  return (0);
+} /* int rc_config_get_int_positive */
+
+static int rc_config_get_xff (oconfig_item_t const *ci, double *ret)
+{
+  double value;
+
+  if ((ci->values_num != 1) || (ci->values[0].type != OCONFIG_TYPE_NUMBER))
+  {
+    ERROR ("rrdcached plugin: The \"%s\" needs exactly one numeric argument "
+        "in the range [0.0, 1.0)", ci->key);
+    return (EINVAL);
   }
 
-  if (ci->values[0].type == OCONFIG_TYPE_BOOLEAN) {
-    if (ci->values[0].value.boolean)
-      return "true";
-    else
-      return "false";
+  value = ci->values[0].value.number;
+  if ((value >= 0.0) && (value < 1.0))
+  {
+    *ret = value;
+    return (0);
   }
-  return (ci->values[0].value.string);
-} /* const char *config_get_string */
+
+  ERROR ("rrdcached plugin: The \"%s\" needs exactly one numeric argument "
+      "in the range [0.0, 1.0)", ci->key);
+  return (EINVAL);
+} /* int rc_config_get_xff */
+
+static int rc_config_add_timespan (int timespan)
+{
+  int *tmp;
+
+  if (timespan <= 0)
+    return (EINVAL);
+
+  tmp = realloc (rrdcreate_config.timespans,
+      sizeof (*rrdcreate_config.timespans)
+      * (rrdcreate_config.timespans_num + 1));
+  if (tmp == NULL)
+    return (ENOMEM);
+  rrdcreate_config.timespans = tmp;
+
+  rrdcreate_config.timespans[rrdcreate_config.timespans_num] = timespan;
+  rrdcreate_config.timespans_num++;
+
+  return (0);
+} /* int rc_config_add_timespan */
 
 static int rc_config (oconfig_item_t *ci)
 {
   int i;
 
-  for (i = 0; i < ci->children_num; ++i) {
-    const char *key = ci->children[i].key;
-    const char *value = config_get_string (ci->children + i);
-
-    if (value == NULL) /* config_get_strings prints error message */
-      continue;
+  for (i = 0; i < ci->children_num; i++)
+  {
+    oconfig_item_t const *child = ci->children + i;
+    const char *key = child->key;
+    int status = 0;
 
     if (strcasecmp ("DataDir", key) == 0)
     {
-      if (datadir != NULL)
-        free (datadir);
-      datadir = strdup (value);
-      if (datadir != NULL)
+      status = cf_util_get_string (child, &datadir);
+      if (status == 0)
       {
         int len = strlen (datadir);
+
         while ((len > 0) && (datadir[len - 1] == '/'))
         {
           len--;
-          datadir[len] = '\0';
+          datadir[len] = 0;
         }
+
         if (len <= 0)
-        {
-          free (datadir);
-          datadir = NULL;
-        }
+          sfree (datadir);
       }
     }
     else if (strcasecmp ("DaemonAddress", key) == 0)
-    {
-      sfree (daemon_address);
-      daemon_address = strdup (value);
-      if (daemon_address == NULL)
-      {
-        ERROR ("rrdcached plugin: strdup failed.");
-        continue;
-      }
-    }
+      status = cf_util_get_string (child, &daemon_address);
     else if (strcasecmp ("CreateFiles", key) == 0)
-    {
-      if (IS_FALSE (value))
-        config_create_files = 0;
-      else
-        config_create_files = 1;
-    }
+      status = cf_util_get_boolean (child, &config_create_files);
     else if (strcasecmp ("CollectStatistics", key) == 0)
+      status = cf_util_get_boolean (child, &config_collect_stats);
+    else if (strcasecmp ("StepSize", key) == 0)
     {
-      if (IS_FALSE (value))
-        config_collect_stats = 0;
-      else
-        config_collect_stats = 1;
+      int tmp = -1;
+
+      status = rc_config_get_int_positive (child, &tmp);
+      if (status == 0)
+        rrdcreate_config.stepsize = (unsigned long) tmp;
+    }
+    else if (strcasecmp ("HeartBeat", key) == 0)
+      status = rc_config_get_int_positive (child, &rrdcreate_config.heartbeat);
+    else if (strcasecmp ("RRARows", key) == 0)
+      status = rc_config_get_int_positive (child, &rrdcreate_config.rrarows);
+    else if (strcasecmp ("RRATimespan", key) == 0)
+    {
+      int tmp = -1;
+      status = rc_config_get_int_positive (child, &tmp);
+      if (status == 0)
+        status = rc_config_add_timespan (tmp);
     }
+    else if (strcasecmp ("XFF", key) == 0)
+      status = rc_config_get_xff (child, &rrdcreate_config.xff);
     else
     {
       WARNING ("rrdcached plugin: Ignoring invalid option %s.", key);
       continue;
     }
+
+    if (status != 0)
+      WARNING ("rrdcached plugin: Handling the \"%s\" option failed.", key);
   }
 
-  if (daemon_address != NULL) {
+  if (daemon_address != NULL)
+  {
     plugin_register_write ("rrdcached", rc_write, /* user_data = */ NULL);
     plugin_register_flush ("rrdcached", rc_flush, /* user_data = */ NULL);
   }
   return (0);
 } /* int rc_config */
 
@@ -259,33 +300,25 @@
   value_t values[1];
   value_list_t vl = VALUE_LIST_INIT;
 
   if (daemon_address == NULL)
     return (-1);
 
-  if (config_collect_stats == 0)
+  if (!config_collect_stats)
     return (-1);
 
   vl.values = values;
   vl.values_len = 1;
 
   if ((strncmp ("unix:", daemon_address, strlen ("unix:")) == 0)
       || (daemon_address[0] == '/'))
     sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   else
     sstrncpy (vl.host, daemon_address, sizeof (vl.host));
   sstrncpy (vl.plugin, "rrdcached", sizeof (vl.plugin));
 
-  status = rrdc_connect (daemon_address);
-  if (status != 0)
-  {
-    ERROR ("rrdcached plugin: rrdc_connect (%s) failed with status %i.",
-        daemon_address, status);
-    return (-1);
-  }
-
   head = NULL;
   status = rrdc_stats_get (&head);
   if (status != 0)
   {
     ERROR ("rrdcached plugin: rrdc_stats_get failed with status %i.", status);
     return (-1);
@@ -359,13 +392,13 @@
 
   return (0);
 } /* int rc_read */
 
 static int rc_init (void)
 {
-  if (config_collect_stats != 0)
+  if (config_collect_stats)
     plugin_register_read ("rrdcached", rc_read);
 
   return (0);
 } /* int rc_init */
 
 static int rc_write (const data_set_t *ds, const value_list_t *vl,
@@ -401,13 +434,13 @@
     return (-1);
   }
 
   values_array[0] = values;
   values_array[1] = NULL;
 
-  if (config_create_files != 0)
+  if (config_create_files)
   {
     struct stat statbuf;
 
     status = stat (filename, &statbuf);
     if (status != 0)
     {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/rrdtool.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/rrdtool.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/rrdtool.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/rrdtool.c	2012-11-18 06:23:21.000000000 +0800
@@ -1161,23 +1161,12 @@
 		return (0);
 	init_once = 1;
 
 	if (rrdcreate_config.heartbeat <= 0)
 		rrdcreate_config.heartbeat = 2 * rrdcreate_config.stepsize;
 
-	if ((rrdcreate_config.heartbeat > 0)
-			&& (rrdcreate_config.heartbeat < CDTIME_T_TO_TIME_T (interval_g)))
-		WARNING ("rrdtool plugin: Your `heartbeat' is "
-				"smaller than your `interval'. This will "
-				"likely cause problems.");
-	else if ((rrdcreate_config.stepsize > 0)
-			&& (rrdcreate_config.stepsize < CDTIME_T_TO_TIME_T (interval_g)))
-		WARNING ("rrdtool plugin: Your `stepsize' is "
-				"smaller than your `interval'. This will "
-				"create needlessly big RRD-files.");
-
 	/* Set the cache up */
 	pthread_mutex_lock (&cache_lock);
 
 	cache = c_avl_create ((int (*) (const void *, const void *)) strcmp);
 	if (cache == NULL)
 	{
@@ -1192,13 +1181,13 @@
 	}
 	else if (cache_flush_timeout < cache_timeout)
 		cache_flush_timeout = 10 * cache_timeout;
 
 	pthread_mutex_unlock (&cache_lock);
 
-	status = pthread_create (&queue_thread, /* attr = */ NULL,
+	status = plugin_thread_create (&queue_thread, /* attr = */ NULL,
 			rrd_queue_thread, /* args = */ NULL);
 	if (status != 0)
 	{
 		ERROR ("rrdtool plugin: Cannot create queue-thread.");
 		return (-1);
 	}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/snmp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/snmp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/snmp.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/snmp.c	2012-11-18 06:23:21.000000000 +0800
@@ -893,12 +893,77 @@
     ret.gauge = NAN;
   }
 
   return (ret);
 } /* value_t csnmp_value_list_to_value */
 
+/* Returns true if all OIDs have left their subtree */
+static int csnmp_check_res_left_subtree (const host_definition_t *host,
+    const data_definition_t *data,
+    struct snmp_pdu *res)
+{
+  struct variable_list *vb;
+  int num_checked;
+  int num_left_subtree;
+  int i;
+
+  vb = res->variables;
+  if (vb == NULL)
+    return (-1);
+
+  num_checked = 0;
+  num_left_subtree = 0;
+
+  /* check all the variables and count how many have left their subtree */
+  for (vb = res->variables, i = 0;
+      (vb != NULL) && (i < data->values_len);
+      vb = vb->next_variable, i++)
+  {
+    num_checked++;
+
+    if ((vb->type == SNMP_ENDOFMIBVIEW)
+        || (snmp_oid_ncompare (data->values[i].oid,
+            data->values[i].oid_len,
+            vb->name, vb->name_length,
+            data->values[i].oid_len) != 0))
+      num_left_subtree++;
+  }
+
+  /* check if enough variables have been returned */
+  if (i < data->values_len)
+  {
+    ERROR ("snmp plugin: host %s: Expected %i variables, but got only %i",
+        host->name, data->values_len, i);
+    return (-1);
+  }
+
+  if (data->instance.oid.oid_len > 0)
+  {
+    if (vb == NULL)
+    {
+      ERROR ("snmp plugin: host %s: Expected one more variable for "
+          "the instance..", host->name);
+      return (-1);
+    }
+
+    num_checked++;
+    if (snmp_oid_ncompare (data->instance.oid.oid,
+          data->instance.oid.oid_len,
+          vb->name, vb->name_length,
+          data->instance.oid.oid_len) != 0)
+      num_left_subtree++;
+  }
+
+  DEBUG ("snmp plugin: csnmp_check_res_left_subtree: %i of %i variables have "
+      "left their subtree",
+      num_left_subtree, num_checked);
+  if (num_left_subtree >= num_checked)
+    return (1);
+  return (0);
+} /* int csnmp_check_res_left_subtree */
+
 static int csnmp_strvbcopy_hexstring (char *dst, /* {{{ */
     const struct variable_list *vb, size_t dst_size)
 {
   char *buffer_ptr;
   size_t buffer_free;
   size_t i;
@@ -1196,24 +1261,17 @@
 {
   struct snmp_pdu *req;
   struct snmp_pdu *res;
   struct variable_list *vb;
 
   const data_set_t *ds;
-
-  uint32_t oid_list_len = (uint32_t) (data->values_len + 1);
-  /* Holds the last OID returned by the device. We use this in the GETNEXT
-   * request to proceed. */
-  oid_t oid_list[oid_list_len];
-  /* Set to false when an OID has left its subtree so we don't re-request it
-   * again. */
-  _Bool oid_list_todo[oid_list_len];
+  oid_t *oid_list;
+  uint32_t oid_list_len;
 
   int status;
   int i;
-  uint32_t j;
 
   /* `value_list_head' and `value_list_tail' implement a linked list for each
    * value. `instance_list_head' and `instance_list_tail' implement a linked list of
    * instance names. This is used to jump gaps in the table. */
   csnmp_list_instances_t *instance_list_head;
   csnmp_list_instances_t *instance_list_tail;
@@ -1241,70 +1299,59 @@
     ERROR ("snmp plugin: DataSet `%s' requires %i values, but config talks about %i",
         data->type, ds->ds_num, data->values_len);
     return (-1);
   }
 
   /* We need a copy of all the OIDs, because GETNEXT will destroy them. */
+  oid_list_len = data->values_len + 1;
+  oid_list = (oid_t *) malloc (sizeof (oid_t) * (oid_list_len));
+  if (oid_list == NULL)
+  {
+    ERROR ("snmp plugin: csnmp_read_table: malloc failed.");
+    return (-1);
+  }
   memcpy (oid_list, data->values, data->values_len * sizeof (oid_t));
   if (data->instance.oid.oid_len > 0)
     memcpy (oid_list + data->values_len, &data->instance.oid, sizeof (oid_t));
-  else /* no InstanceFrom option specified. */
+  else
     oid_list_len--;
 
-  for (j = 0; j < oid_list_len; j++)
-    oid_list_todo[j] = 1;
-
   /* We're going to construct n linked lists, one for each "value".
    * value_list_head will contain pointers to the heads of these linked lists,
    * value_list_tail will contain pointers to the tail of the lists. */
   value_list_head = calloc (data->values_len, sizeof (*value_list_head));
   value_list_tail = calloc (data->values_len, sizeof (*value_list_tail));
   if ((value_list_head == NULL) || (value_list_tail == NULL))
   {
     ERROR ("snmp plugin: csnmp_read_table: calloc failed.");
+    sfree (oid_list);
     sfree (value_list_head);
     sfree (value_list_tail);
     return (-1);
   }
 
   instance_list_head = NULL;
   instance_list_tail = NULL;
 
   status = 0;
   while (status == 0)
   {
-    int oid_list_todo_num;
-
     req = snmp_pdu_create (SNMP_MSG_GETNEXT);
     if (req == NULL)
     {
       ERROR ("snmp plugin: snmp_pdu_create failed.");
       status = -1;
       break;
     }
 
-    oid_list_todo_num = 0;
-    for (j = 0; j < oid_list_len; j++)
-    {
-      /* Do not rerequest already finished OIDs */
-      if (!oid_list_todo[j])
-        continue;
-      oid_list_todo_num++;
-      snmp_add_null_var (req, oid_list[j].oid, oid_list[j].oid_len);
-    }
-
-    if (oid_list_todo_num == 0)
-    {
-      /* The request is still empty - so we are finished */
-      DEBUG ("snmp plugin: all variables have left their subtree");
-      status = 0;
-      break;
-    }
+    for (i = 0; (uint32_t) i < oid_list_len; i++)
+      snmp_add_null_var (req, oid_list[i].oid, oid_list[i].oid_len);
 
     res = NULL;
     status = snmp_sess_synch_response (host->sess_handle, req, &res);
+
     if ((status != STAT_SUCCESS) || (res == NULL))
     {
       char *errstr = NULL;
 
       snmp_sess_error (host->sess_handle, NULL, NULL, &errstr);
 
@@ -1333,103 +1379,109 @@
     if (vb == NULL)
     {
       status = -1;
       break;
     }
 
-    for (vb = res->variables, i = 0; (vb != NULL); vb = vb->next_variable, i++)
+    /* Check if all values (and possibly the instance) have left their
+     * subtree */
+    if (csnmp_check_res_left_subtree (host, data, res) != 0)
     {
-      /* Calculate value index from todo list */
-      while (!oid_list_todo[i] && (i < oid_list_len))
-        i++;
-
-      /* An instance is configured and the res variable we process is the
-       * instance value (last index) */
-      if ((data->instance.oid.oid_len > 0) && (i == data->values_len))
+      status = 0;
+      break;
+    }
+
+    /* Copy the OID of the value used as instance to oid_list, if an instance
+     * is configured. */
+    if (data->instance.oid.oid_len > 0)
+    {
+      /* Allocate a new `csnmp_list_instances_t', insert the instance name and
+       * add it to the list */
+      if (csnmp_instance_list_add (&instance_list_head, &instance_list_tail,
+	    res, host, data) != 0)
       {
-        if ((vb->type == SNMP_ENDOFMIBVIEW)
-            || (snmp_oid_ncompare (data->instance.oid.oid,
-                data->instance.oid.oid_len,
-                vb->name, vb->name_length,
-                data->instance.oid.oid_len) != 0))
-        {
-          DEBUG ("snmp plugin: host = %s; data = %s; Instance left its subtree.",
-              host->name, data->name);
-          oid_list_todo[i] = 0;
-          continue;
-        }
-
-        /* Allocate a new `csnmp_list_instances_t', insert the instance name and
-         * add it to the list */
-        if (csnmp_instance_list_add (&instance_list_head, &instance_list_tail,
-              res, host, data) != 0)
-        {
-          ERROR ("snmp plugin: csnmp_instance_list_add failed.");
-          status = -1;
-          break;
-        }
+        ERROR ("snmp plugin: csnmp_instance_list_add failed.");
+        status = -1;
+        break;
       }
-      else /* The variable we are processing is a normal value */
+
+      /* The instance OID is added to the list of OIDs to GET from the
+       * snmp agent last, so set vb on the last variable returned and copy
+       * that OID. */
+      for (vb = res->variables;
+          (vb != NULL) && (vb->next_variable != NULL);
+          vb = vb->next_variable)
+        /* do nothing */;
+      assert (vb != NULL);
+
+      /* Copy the OID of the instance value to oid_list[data->values_len].
+       * "oid_list" is used for the next GETNEXT request. */
+      memcpy (oid_list[data->values_len].oid, vb->name,
+          sizeof (oid) * vb->name_length);
+      oid_list[data->values_len].oid_len = vb->name_length;
+    }
+
+    /* Iterate over all the (non-instance) values returned by the agent. The
+     * (i < value_len) check will make sure we're not handling the instance OID
+     * twice. */
+    for (vb = res->variables, i = 0;
+        (vb != NULL) && (i < data->values_len);
+        vb = vb->next_variable, i++)
+    {
+      csnmp_table_values_t *vt;
+      oid_t vb_name;
+      oid_t suffix;
+
+      csnmp_oid_init (&vb_name, vb->name, vb->name_length);
+
+      /* Calculate the current suffix. This is later used to check that the
+       * suffix is increasing. This also checks if we left the subtree */
+      status = csnmp_oid_suffix (&suffix, &vb_name, data->values + i);
+      if (status != 0)
       {
-        csnmp_table_values_t *vt;
-        oid_t vb_name;
-        oid_t suffix;
-
-        csnmp_oid_init (&vb_name, vb->name, vb->name_length);
-
-        /* Calculate the current suffix. This is later used to check that the
-         * suffix is increasing. This also checks if we left the subtree */
-        int ret;
-        ret = csnmp_oid_suffix (&suffix, &vb_name, data->values + i);
-        if (ret != 0)
-        {
-          DEBUG ("snmp plugin: host = %s; data = %s; i = %i; "
-              "Value probably left its subtree.",
-              host->name, data->name, i);
-          oid_list_todo[i] = 0;
-          continue;
-        }
-
-        /* Make sure the OIDs returned by the agent are increasing. Otherwise our
-         * table matching algorithm will get confused. */
-        if ((value_list_tail[i] != NULL)
-            && (csnmp_oid_compare (&suffix, &value_list_tail[i]->suffix) <= 0))
-        {
-          DEBUG ("snmp plugin: host = %s; data = %s; i = %i; "
-              "Suffix is not increasing.",
-              host->name, data->name, i);
-          oid_list_todo[i] = 0;
-          continue;
-        }
-
-        vt = malloc (sizeof (*vt));
-        if (vt == NULL)
-        {
-          ERROR ("snmp plugin: malloc failed.");
-          status = -1;
-          break;
-        }
-        memset (vt, 0, sizeof (*vt));
+        DEBUG ("snmp plugin: host = %s; data = %s; Value %i failed. "
+            "It probably left its subtree.",
+            host->name, data->name, i);
+        continue;
+      }
 
-        vt->value = csnmp_value_list_to_value (vb, ds->ds[i].type,
-            data->scale, data->shift, host->name, data->name);
-        memcpy (&vt->suffix, &suffix, sizeof (vt->suffix));
-        vt->next = NULL;
+      /* Make sure the OIDs returned by the agent are increasing. Otherwise our
+       * table matching algorithm will get confused. */
+      if ((value_list_tail[i] != NULL)
+          && (csnmp_oid_compare (&suffix, &value_list_tail[i]->suffix) <= 0))
+      {
+        DEBUG ("snmp plugin: host = %s; data = %s; i = %i; "
+            "Suffix is not increasing.",
+            host->name, data->name, i);
+        continue;
+      }
 
-        if (value_list_tail[i] == NULL)
-          value_list_head[i] = vt;
-        else
-          value_list_tail[i]->next = vt;
-        value_list_tail[i] = vt;
+      vt = malloc (sizeof (*vt));
+      if (vt == NULL)
+      {
+        ERROR ("snmp plugin: malloc failed.");
+        status = -1;
+        break;
       }
+      memset (vt, 0, sizeof (*vt));
+
+      vt->value = csnmp_value_list_to_value (vb, ds->ds[i].type,
+          data->scale, data->shift, host->name, data->name);
+      memcpy (&vt->suffix, &suffix, sizeof (vt->suffix));
+      vt->next = NULL;
 
-      /* Copy OID to oid_list[i] */
+      if (value_list_tail[i] == NULL)
+        value_list_head[i] = vt;
+      else
+        value_list_tail[i]->next = vt;
+      value_list_tail[i] = vt;
+
+      /* Copy OID to oid_list[i + 1] */
       memcpy (oid_list[i].oid, vb->name, sizeof (oid) * vb->name_length);
       oid_list[i].oid_len = vb->name_length;
-
-    } /* for (vb = res->variables ...) */
+    } /* for (i = data->values_len) */
 
     if (res != NULL)
       snmp_free_pdu (res);
     res = NULL;
   } /* while (status == 0) */
 
@@ -1457,12 +1509,13 @@
       value_list_head[i] = next;
     }
   }
 
   sfree (value_list_head);
   sfree (value_list_tail);
+  sfree (oid_list);
 
   return (0);
 } /* int csnmp_read_table */
 
 static int csnmp_read_value (host_definition_t *host, data_definition_t *data)
 {
@@ -1587,13 +1640,13 @@
   int success;
   int i;
 
   host = ud->data;
 
   if (host->interval == 0)
-    host->interval = interval_g;
+    host->interval = plugin_get_interval ();
 
   time_start = cdtime ();
 
   if (host->sess_handle == NULL)
     csnmp_host_open_session (host);
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/swap.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/swap.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/swap.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/swap.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/swap.c
- * Copyright (C) 2005-2010  Florian octo Forster
+ * Copyright (C) 2005-2012  Florian octo Forster
  * Copyright (C) 2009       Stefan Völkel
  * Copyright (C) 2009       Manuel Sanmartin
  * Copyright (C) 2010       Aurélien Reynaud
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
@@ -67,19 +67,22 @@
 #endif
 
 #undef  MAX
 #define MAX(x,y) ((x) > (y) ? (x) : (y))
 
 #if KERNEL_LINUX
-# define SWAP_HAVE_CONFIG 1
-/* No global variables */
+# define SWAP_HAVE_REPORT_BY_DEVICE 1
+static derive_t pagesize;
+static _Bool report_bytes = 0;
+static _Bool report_by_device = 0;
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS
-# define SWAP_HAVE_CONFIG 1
+# define SWAP_HAVE_REPORT_BY_DEVICE 1
 static derive_t pagesize;
+static _Bool report_by_device = 0;
 /* #endif HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS */
 
 #elif defined(VM_SWAPUSAGE)
 /* No global variables */
 /* #endif defined(VM_SWAPUSAGE) */
 
@@ -98,43 +101,56 @@
 /*# endif HAVE_PERFSTAT */
 
 #else
 # error "No applicable input method."
 #endif /* HAVE_LIBSTATGRAB */
 
-#if SWAP_HAVE_CONFIG
 static const char *config_keys[] =
 {
+	"ReportBytes",
 	"ReportByDevice"
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
-static _Bool report_by_device = 0;
-
 static int swap_config (const char *key, const char *value) /* {{{ */
 {
-	if (strcasecmp ("ReportByDevice", key) == 0)
+	if (strcasecmp ("ReportBytes", key) == 0)
+	{
+#if KERNEL_LINUX
+		report_bytes = IS_TRUE (value) ? 1 : 0;
+#else
+		WARNING ("swap plugin: The \"ReportBytes\" option is only "
+				"valid under Linux. "
+				"The option is going to be ignored.");
+#endif
+	}
+	else if (strcasecmp ("ReportByDevice", key) == 0)
 	{
+#if SWAP_HAVE_REPORT_BY_DEVICE
 		if (IS_TRUE (value))
 			report_by_device = 1;
 		else
 			report_by_device = 0;
+#else
+		WARNING ("swap plugin: The \"ReportByDevice\" option is not "
+				"supported on this platform. "
+				"The option is going to be ignored.");
+#endif /* SWAP_HAVE_REPORT_BY_DEVICE */
 	}
 	else
 	{
 		return (-1);
 	}
 
 	return (0);
 } /* }}} int swap_config */
-#endif /* SWAP_HAVE_CONFIG */
 
 static int swap_init (void) /* {{{ */
 {
 #if KERNEL_LINUX
-	/* No init stuff */
+	pagesize = (derive_t) sysconf (_SC_PAGESIZE);
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS
 	/* getpagesize(3C) tells me this does not fail.. */
 	pagesize = (derive_t) getpagesize ();
 /* #endif HAVE_SWAPCTL */
@@ -202,22 +218,24 @@
 	value_t v;
 
 	v.gauge = value;
 	swap_submit (plugin_instance, "swap", type_instance, v);
 } /* }}} void swap_submit_gauge */
 
-#if KERNEL_LINUX
+#if KERNEL_LINUX || HAVE_PERFSTAT
 static void swap_submit_derive (const char *plugin_instance, /* {{{ */
 		const char *type_instance, derive_t value)
 {
 	value_t v;
 
 	v.derive = value;
 	swap_submit (plugin_instance, "swap_io", type_instance, v);
 } /* }}} void swap_submit_derive */
+#endif
 
+#if KERNEL_LINUX
 static int swap_read_separate (void) /* {{{ */
 {
 	FILE *fh;
 	char buffer[1024];
 
 	fh = fopen ("/proc/swaps", "r");
@@ -403,12 +421,18 @@
 
 	fclose (fh);
 
 	if (have_data != 0x03)
 		return (ENOENT);
 
+	if (report_bytes)
+	{
+		swap_in = swap_in * pagesize;
+		swap_out = swap_out * pagesize;
+	}
+
 	swap_submit_derive (NULL, "in",  swap_in);
 	swap_submit_derive (NULL, "out", swap_out);
 
 	return (0);
 } /* }}} int swap_read_io */
 
@@ -761,23 +785,26 @@
 	{
                 char errbuf[1024];
                 WARNING ("memory plugin: perfstat_memory_total failed: %s",
                         sstrerror (errno, errbuf, sizeof (errbuf)));
                 return (-1);
         }
+
 	swap_submit_gauge (NULL, "used", (gauge_t) (pmemory.pgsp_total - pmemory.pgsp_free) * pagesize);
 	swap_submit_gauge (NULL, "free", (gauge_t) pmemory.pgsp_free * pagesize );
+	swap_submit_gauge (NULL, "reserved", (gauge_t) pmemory.pgsp_rsvd * pagesize);
+	swap_submit_derive (NULL, "in",  (derive_t) pmemory.pgspins * pagesize);
+	swap_submit_derive (NULL, "out", (derive_t) pmemory.pgspouts * pagesize);
 
 	return (0);
 } /* }}} int swap_read */
 #endif /* HAVE_PERFSTAT */
 
 void module_register (void)
 {
-#if SWAP_HAVE_CONFIG
-	plugin_register_config ("swap", swap_config, config_keys, config_keys_num);
-#endif
+	plugin_register_config ("swap", swap_config,
+			config_keys, config_keys_num);
 	plugin_register_init ("swap", swap_init);
 	plugin_register_read ("swap", swap_read);
 } /* void module_register */
 
 /* vim: set fdm=marker : */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/tcpconns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/tcpconns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/tcpconns.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/tcpconns.c	2012-11-18 06:23:21.000000000 +0800
@@ -67,12 +67,19 @@
 
 #if !KERNEL_LINUX && !HAVE_SYSCTLBYNAME && !HAVE_LIBKVM_NLIST && !KERNEL_AIX
 # error "No applicable input method."
 #endif
 
 #if KERNEL_LINUX
+# include <asm/types.h>
+/* sys/socket.h is necessary to compile when using netlink on older systems. */
+# include <sys/socket.h>
+# include <linux/netlink.h>
+# include <linux/inet_diag.h>
+# include <sys/socket.h>
+# include <arpa/inet.h>
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_SYSCTLBYNAME
 # include <sys/socketvar.h>
 # include <sys/sysctl.h>
 
@@ -127,12 +134,17 @@
 #elif KERNEL_AIX
 # include <arpa/inet.h>
 # include <sys/socketvar.h>
 #endif /* KERNEL_AIX */
 
 #if KERNEL_LINUX
+struct nlreq {
+  struct nlmsghdr nlh;
+  struct inet_diag_req r;
+};
+
 static const char *tcp_state[] =
 {
   "", /* 0 */
   "ESTABLISHED",
   "SYN_SENT",
   "SYN_RECV",
@@ -260,12 +272,23 @@
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
 static int port_collect_listening = 0;
 static port_entry_t *port_list_head = NULL;
 
+#if KERNEL_LINUX
+static uint32_t sequence_number = 0;
+
+enum
+{
+  SRC_DUNNO,
+  SRC_NETLINK,
+  SRC_PROC
+} linux_source = SRC_DUNNO;
+#endif
+
 static void conn_submit_port_entry (port_entry_t *pe)
 {
   value_t values[1];
   value_list_t vl = VALUE_LIST_INIT;
   int i;
 
@@ -416,12 +439,146 @@
     pe->count_remote[state]++;
 
   return (0);
 } /* int conn_handle_ports */
 
 #if KERNEL_LINUX
+/* Returns zero on success, less than zero on socket error and greater than
+ * zero on other errors. */
+static int conn_read_netlink (void)
+{
+  int fd;
+  struct sockaddr_nl nladdr;
+  struct nlreq req;
+  struct msghdr msg;
+  struct iovec iov;
+  struct inet_diag_msg *r;
+  char buf[8192];
+
+  /* If this fails, it's likely a permission problem. We'll fall back to
+   * reading this information from files below. */
+  fd = socket(AF_NETLINK, SOCK_RAW, NETLINK_INET_DIAG);
+  if (fd < 0)
+  {
+    ERROR ("tcpconns plugin: conn_read_netlink: socket(AF_NETLINK, SOCK_RAW, "
+	"NETLINK_INET_DIAG) failed: %s",
+	sstrerror (errno, buf, sizeof (buf)));
+    return (-1);
+  }
+
+  memset(&nladdr, 0, sizeof(nladdr));
+  nladdr.nl_family = AF_NETLINK;
+
+  memset(&req, 0, sizeof(req));
+  req.nlh.nlmsg_len = sizeof(req);
+  req.nlh.nlmsg_type = TCPDIAG_GETSOCK;
+  /* NLM_F_ROOT: return the complete table instead of a single entry.
+   * NLM_F_MATCH: return all entries matching criteria (not implemented)
+   * NLM_F_REQUEST: must be set on all request messages */
+  req.nlh.nlmsg_flags = NLM_F_ROOT | NLM_F_MATCH | NLM_F_REQUEST;
+  req.nlh.nlmsg_pid = 0;
+  /* The sequence_number is used to track our messages. Since netlink is not
+   * reliable, we don't want to end up with a corrupt or incomplete old
+   * message in case the system is/was out of memory. */
+  req.nlh.nlmsg_seq = ++sequence_number;
+  req.r.idiag_family = AF_INET;
+  req.r.idiag_states = 0xfff;
+  req.r.idiag_ext = 0;
+
+  memset(&iov, 0, sizeof(iov));
+  iov.iov_base = &req;
+  iov.iov_len = sizeof(req);
+
+  memset(&msg, 0, sizeof(msg));
+  msg.msg_name = (void*)&nladdr;
+  msg.msg_namelen = sizeof(nladdr);
+  msg.msg_iov = &iov;
+  msg.msg_iovlen = 1;
+
+  if (sendmsg (fd, &msg, 0) < 0)
+  {
+    ERROR ("tcpconns plugin: conn_read_netlink: sendmsg(2) failed: %s",
+	sstrerror (errno, buf, sizeof (buf)));
+    close (fd);
+    return (-1);
+  }
+
+  iov.iov_base = buf;
+  iov.iov_len = sizeof(buf);
+
+  while (1)
+  {
+    int status;
+    struct nlmsghdr *h;
+
+    memset(&msg, 0, sizeof(msg));
+    msg.msg_name = (void*)&nladdr;
+    msg.msg_namelen = sizeof(nladdr);
+    msg.msg_iov = &iov;
+    msg.msg_iovlen = 1;
+
+    status = recvmsg(fd, (void *) &msg, /* flags = */ 0);
+    if (status < 0)
+    {
+      if ((errno == EINTR) || (errno == EAGAIN))
+        continue;
+
+      ERROR ("tcpconns plugin: conn_read_netlink: recvmsg(2) failed: %s",
+	  sstrerror (errno, buf, sizeof (buf)));
+      close (fd);
+      return (-1);
+    }
+    else if (status == 0)
+    {
+      close (fd);
+      DEBUG ("tcpconns plugin: conn_read_netlink: Unexpected zero-sized "
+	  "reply from netlink socket.");
+      return (0);
+    }
+
+    h = (struct nlmsghdr*)buf;
+    while (NLMSG_OK(h, status))
+    {
+      if (h->nlmsg_seq != sequence_number)
+      {
+	h = NLMSG_NEXT(h, status);
+	continue;
+      }
+
+      if (h->nlmsg_type == NLMSG_DONE)
+      {
+	close (fd);
+	return (0);
+      }
+      else if (h->nlmsg_type == NLMSG_ERROR)
+      {
+	struct nlmsgerr *msg_error;
+
+	msg_error = NLMSG_DATA(h);
+	WARNING ("tcpconns plugin: conn_read_netlink: Received error %i.",
+	    msg_error->error);
+
+	close (fd);
+	return (1);
+      }
+
+      r = NLMSG_DATA(h);
+
+      /* This code does not (need to) distinguish between IPv4 and IPv6. */
+      conn_handle_ports (ntohs(r->id.idiag_sport),
+	  ntohs(r->id.idiag_dport),
+	  r->idiag_state);
+
+      h = NLMSG_NEXT(h, status);
+    } /* while (NLMSG_OK) */
+  } /* while (1) */
+
+  /* Not reached because the while() loop above handles the exit condition. */
+  return (0);
+} /* int conn_read_netlink */
+
 static int conn_handle_line (char *buffer)
 {
   char *fields[32];
   int   fields_len;
 
   char *endptr;
@@ -550,32 +707,61 @@
 
   return (0);
 } /* int conn_init */
 
 static int conn_read (void)
 {
-  int errors_num = 0;
+  int status;
 
   conn_reset_port_entry ();
 
-  if (conn_read_file ("/proc/net/tcp") != 0)
-    errors_num++;
-  if (conn_read_file ("/proc/net/tcp6") != 0)
-    errors_num++;
-
-  if (errors_num < 2)
+  if (linux_source == SRC_NETLINK)
   {
-    conn_submit_all ();
+    status = conn_read_netlink ();
   }
-  else
+  else if (linux_source == SRC_PROC)
   {
-    ERROR ("tcpconns plugin: Neither /proc/net/tcp nor /proc/net/tcp6 "
-	"coult be read.");
-    return (-1);
+    int errors_num = 0;
+
+    if (conn_read_file ("/proc/net/tcp") != 0)
+      errors_num++;
+    if (conn_read_file ("/proc/net/tcp6") != 0)
+      errors_num++;
+
+    if (errors_num < 2)
+      status = 0;
+    else
+      status = ENOENT;
+  }
+  else /* if (linux_source == SRC_DUNNO) */
+  {
+    /* Try to use netlink for getting this data, it is _much_ faster on systems
+     * with a large amount of connections. */
+    status = conn_read_netlink ();
+    if (status == 0)
+    {
+      INFO ("tcpconns plugin: Reading from netlink succeeded. "
+	  "Will use the netlink method from now on.");
+      linux_source = SRC_NETLINK;
+    }
+    else
+    {
+      INFO ("tcpconns plugin: Reading from netlink failed. "
+	  "Will read from /proc from now on.");
+      linux_source = SRC_PROC;
+
+      /* return success here to avoid the "plugin failed" message. */
+      return (0);
+    }
   }
 
+  if (status == 0)
+    conn_submit_all ();
+  else
+    return (status);
+
   return (0);
 } /* int conn_read */
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_SYSCTLBYNAME
 static int conn_read (void)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/thermal.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/thermal.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/thermal.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/thermal.c	2012-11-18 06:23:21.000000000 +0800
@@ -52,15 +52,12 @@
 	value_list_t vl = VALUE_LIST_INIT;
 	value_t v;
 
 	v.gauge = value;
 	vl.values = &v;
 
-	vl.values_len = 1;
-
-	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "thermal", sizeof(vl.plugin));
 	if (plugin_instance != NULL)
 		sstrncpy (vl.plugin_instance, plugin_instance,
 				sizeof (vl.plugin_instance));
 	sstrncpy (vl.type,
 			(dt == TEMP) ? "temperature" : "gauge",
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/types.db /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/types.db
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/types.db	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/types.db	2012-11-18 06:23:21.000000000 +0800
@@ -57,14 +57,14 @@
 email_size		value:GAUGE:0:U
 entropy			value:GAUGE:0:4294967295
 fanspeed		value:GAUGE:0:U
 file_size		value:GAUGE:0:U
 files			value:GAUGE:0:U
 fork_rate		value:DERIVE:0:U
-frequency		value:GAUGE:0:U
 frequency_offset	value:GAUGE:-1000000:1000000
+frequency		value:GAUGE:0:U
 fscache_stat		value:DERIVE:0:U
 gauge			value:GAUGE:U:U
 hash_collisions		value:DERIVE:0:U
 http_request_methods	value:DERIVE:0:U
 http_requests		value:DERIVE:0:U
 http_response_codes	value:DERIVE:0:U
@@ -106,22 +106,27 @@
 node_octets		rx:DERIVE:0:U, tx:DERIVE:0:U
 node_rssi		value:GAUGE:0:255
 node_stat		value:DERIVE:0:U
 node_tx_rate		value:GAUGE:0:127
 operations		value:DERIVE:0:U
 percent			value:GAUGE:0:100.1
+pf_counters		value:DERIVE:0:U
+pf_limits		value:DERIVE:0:U
+pf_source		value:DERIVE:0:U
+pf_states		value:GAUGE:0:U
+pf_state		value:DERIVE:0:U
 pg_blks			value:DERIVE:0:U
 pg_db_size		value:GAUGE:0:U
 pg_n_tup_c		value:DERIVE:0:U
 pg_n_tup_g		value:GAUGE:0:U
 pg_numbackends		value:GAUGE:0:U
 pg_scan			value:DERIVE:0:U
 pg_xact			value:DERIVE:0:U
 ping_droprate		value:GAUGE:0:100
-ping			value:GAUGE:0:65535
 ping_stddev		value:GAUGE:0:65535
+ping			value:GAUGE:0:65535
 players			value:GAUGE:0:1000000
 power			value:GAUGE:0:U
 protocol_counter	value:DERIVE:0:U
 ps_code			value:GAUGE:0:9223372036854775807
 ps_count		processes:GAUGE:0:1000000, threads:GAUGE:0:1000000
 ps_cputime		user:DERIVE:0:U, syst:DERIVE:0:U
@@ -150,13 +155,13 @@
 swap_io			value:DERIVE:0:U
 swap			value:GAUGE:0:1099511627776
 tcp_connections		value:GAUGE:0:4294967295
 temperature		value:GAUGE:-273.15:U
 threads			value:GAUGE:0:U
 time_dispersion		value:GAUGE:-1000000:1000000
-timeleft		value:GAUGE:0:U
+timeleft		value:GAUGE:0:3600
 time_offset		value:GAUGE:-1000000:1000000
 total_bytes		value:DERIVE:0:U
 total_connections	value:DERIVE:0:U
 total_operations	value:DERIVE:0:U
 total_requests		value:DERIVE:0:U
 total_sessions		value:DERIVE:0:U
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/types.db.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/types.db.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/types.db.5	2011-02-07 15:11:23.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/types.db.5	2012-11-18 06:24:50.000000000 +0800
@@ -1,7 +1,7 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.22 (Pod::Simple 3.07)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "TYPES.DB 5"
-.TH TYPES.DB 5 "2011-02-07" "5.0.0.beta1.39.g6bd4bf7" "collectd"
+.TH TYPES.DB 5 "2012-11-17" "5.2.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 types.db \- Data\-set specifications for the system statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/unixsock.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/unixsock.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/unixsock.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/unixsock.c	2012-11-18 06:23:21.000000000 +0800
@@ -360,13 +360,14 @@
 			continue;
 		}
 		*remote_fd = status;
 
 		DEBUG ("Spawning child to handle connection on fd #%i", *remote_fd);
 
-		status = pthread_create (&th, &th_attr, us_handle_client, (void *) remote_fd);
+		status = plugin_thread_create (&th, &th_attr,
+				us_handle_client, (void *) remote_fd);
 		if (status != 0)
 		{
 			char errbuf[1024];
 			WARNING ("unixsock plugin: pthread_create failed: %s",
 					sstrerror (errno, errbuf, sizeof (errbuf)));
 			close (*remote_fd);
@@ -440,13 +441,14 @@
 	if (have_init != 0)
 		return (0);
 	have_init = 1;
 
 	loop = 1;
 
-	status = pthread_create (&listen_thread, NULL, us_server_thread, NULL);
+	status = plugin_thread_create (&listen_thread, NULL,
+			us_server_thread, NULL);
 	if (status != 0)
 	{
 		char errbuf[1024];
 		ERROR ("unixsock plugin: pthread_create failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		return (-1);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/uptime.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/uptime.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/uptime.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/uptime.c	2012-11-18 06:23:21.000000000 +0800
@@ -34,12 +34,18 @@
 
 #elif HAVE_SYS_SYSCTL_H
 # include <sys/sysctl.h>
 /* Using sysctl interface to retrieve the boot time on *BSD / Darwin / OS X systems */
 /* #endif HAVE_SYS_SYSCTL_H */
 
+#elif HAVE_PERFSTAT
+# include <sys/protosw.h>
+# include <libperfstat.h>
+/* Using perfstat_cpu_total to retrive the boot time in AIX */
+/* #endif HAVE_PERFSTAT */
+
 #else
 # error "No applicable input method."
 #endif
 
 /*
  * Global variables
@@ -200,13 +206,35 @@
 	if (boottime == 0)
 	{
 		ERROR ("uptime plugin: sysctl(3) returned success, "
 				"but `boottime' is zero!");
 		return (-1);
 	}
-#endif /* HAVE_SYS_SYSCTL_H */
+/* #endif HAVE_SYS_SYSCTL_H */
+
+#elif HAVE_PERFSTAT
+	int status;
+	perfstat_cpu_total_t cputotal;
+	int hertz;
+
+	status = perfstat_cpu_total(NULL, &cputotal,
+		sizeof(perfstat_cpu_total_t), 1);
+	if (status < 0)
+	{
+		char errbuf[1024];
+		ERROR ("uptime plugin: perfstat_cpu_total: %s",
+			sstrerror (errno, errbuf, sizeof (errbuf)));
+		return (-1);
+	}
+
+	hertz = sysconf(_SC_CLK_TCK);
+	if (hertz <= 0)
+		hertz = HZ;
+
+	boottime = time(NULL) - cputotal.lbolt / hertz;
+#endif /* HAVE_PERFSTAT */
 
 	return (0);
 } /* }}} int uptime_init */
 
 static int uptime_read (void)
 {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_cache.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_cache.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_cache.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_cache.c	2012-11-18 06:23:21.000000000 +0800
@@ -569,50 +569,55 @@
   char *key;
   cache_entry_t *value;
 
   char **names = NULL;
   cdtime_t *times = NULL;
   size_t number = 0;
+  size_t size_arrays = 0;
 
   int status = 0;
 
   if ((ret_names == NULL) || (ret_number == NULL))
     return (-1);
 
   pthread_mutex_lock (&cache_lock);
 
+  size_arrays = (size_t) c_avl_size (cache_tree);
+  if (size_arrays < 1)
+  {
+    /* Handle the "no values" case here, to avoid the error message when
+     * calloc() returns NULL. */
+    pthread_mutex_unlock (&cache_lock);
+    return (0);
+  }
+
+  names = calloc (size_arrays, sizeof (*names));
+  times = calloc (size_arrays, sizeof (*times));
+  if ((names == NULL) || (times == NULL))
+  {
+    ERROR ("uc_get_names: calloc failed.");
+    sfree (names);
+    sfree (times);
+    pthread_mutex_unlock (&cache_lock);
+    return (ENOMEM);
+  }
+
   iter = c_avl_get_iterator (cache_tree);
   while (c_avl_iterator_next (iter, (void *) &key, (void *) &value) == 0)
   {
-    char **temp;
-
     /* remove missing values when list values */
     if (value->state == STATE_MISSING)
       continue;
 
-    if (ret_times != NULL)
-    {
-      cdtime_t *tmp_times;
+    /* c_avl_size does not return a number smaller than the number of elements
+     * returned by c_avl_iterator_next. */
+    assert (number < size_arrays);
 
-      tmp_times = (cdtime_t *) realloc (times, sizeof (cdtime_t) * (number + 1));
-      if (tmp_times == NULL)
-      {
-	status = -1;
-	break;
-      }
-      times = tmp_times;
+    if (ret_times != NULL)
       times[number] = value->last_time;
-    }
 
-    temp = (char **) realloc (names, sizeof (char *) * (number + 1));
-    if (temp == NULL)
-    {
-      status = -1;
-      break;
-    }
-    names = temp;
     names[number] = strdup (key);
     if (names[number] == NULL)
     {
       status = -1;
       break;
     }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_cmd_putval.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_cmd_putval.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_cmd_putval.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_cmd_putval.c	2012-11-18 06:23:21.000000000 +0800
@@ -247,11 +247,11 @@
 
 	ssnprintf (ret, ret_len,
 			"PUTVAL %s interval=%.3f %s",
 			buffer_ident,
 			(vl->interval > 0)
 			? CDTIME_T_TO_DOUBLE (vl->interval)
-			: CDTIME_T_TO_DOUBLE (interval_g),
+			: CDTIME_T_TO_DOUBLE (plugin_get_interval ()),
 			buffer_values);
 
 	return (0);
 } /* }}} int create_putval */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_complain.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_complain.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_complain.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_complain.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/utils_complain.c
- * Copyright (C) 2006-2013  Florian octo Forster
+ * Copyright (C) 2006-2007  Florian octo Forster
  * Copyright (C) 2008  Sebastian tokkee Harl
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
@@ -26,70 +26,72 @@
 #include "plugin.h"
 
 /* vcomplain returns 0 if it did not report, 1 else */
 static int vcomplain (int level, c_complain_t *c,
 		const char *format, va_list ap)
 {
-	cdtime_t now;
+	time_t now;
 	char   message[512];
 
-	now = cdtime ();
+	now = time (NULL);
 
 	if (c->last + c->interval > now)
 		return 0;
 
 	c->last = now;
 
-	if (c->interval < interval_g)
-		c->interval = interval_g;
+	if (c->interval < plugin_get_interval ())
+		c->interval = plugin_get_interval ();
 	else
 		c->interval *= 2;
 
-	if (c->interval > TIME_T_TO_CDTIME_T (86400))
-		c->interval = TIME_T_TO_CDTIME_T (86400);
+	if (c->interval > 86400)
+		c->interval = 86400;
 
 	vsnprintf (message, sizeof (message), format, ap);
 	message[sizeof (message) - 1] = '\0';
 
 	plugin_log (level, "%s", message);
 	return 1;
 } /* vcomplain */
 
 void c_complain (int level, c_complain_t *c, const char *format, ...)
 {
 	va_list ap;
 
+	/* reset the old interval */
+	if (c->interval < 0)
+		c->interval *= -1;
+
 	va_start (ap, format);
-	if (vcomplain (level, c, format, ap))
-		c->complained_once = 1;
+	vcomplain (level, c, format, ap);
 	va_end (ap);
 } /* c_complain */
 
 void c_complain_once (int level, c_complain_t *c, const char *format, ...)
 {
 	va_list ap;
 
-	if (c->complained_once)
+	if (c->interval < 0)
 		return;
 
 	va_start (ap, format);
 	if (vcomplain (level, c, format, ap))
-		c->complained_once = 1;
+		c->interval *= -1;
 	va_end (ap);
 } /* c_complain_once */
 
 void c_do_release (int level, c_complain_t *c, const char *format, ...)
 {
 	char message[512];
 	va_list ap;
 
 	if (c->interval == 0)
 		return;
 
 	c->interval = 0;
-	c->complained_once = 0;
 
 	va_start (ap, format);
 	vsnprintf (message, sizeof (message), format, ap);
 	message[sizeof (message) - 1] = '\0';
 	va_end (ap);
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_complain.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_complain.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_complain.h	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_complain.h	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/utils_complain.h
- * Copyright (C) 2006-2013  Florian octo Forster
+ * Copyright (C) 2006-2007  Florian octo Forster
  * Copyright (C) 2008  Sebastian tokkee Harl
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
@@ -21,32 +21,29 @@
  *   Sebastian tokkee Harl <sh at tokkee.org>
  **/
 
 #ifndef UTILS_COMPLAIN_H
 #define UTILS_COMPLAIN_H 1
 
-#include "utils_time.h"
+#include <time.h>
 
 typedef struct
 {
 	/* time of the last report */
-	cdtime_t last;
+	time_t last;
 
-	/* How long to wait until reporting again.
-	 * 0 indicates that the complaint is no longer valid. */
-	cdtime_t interval;
-
-	_Bool complained_once;
+	/* how long to wait until reporting again
+	 *   0 indicates that the complaint is no longer valid
+	 * < 0 indicates that the complaint has been reported once
+	 *     => c_complain_once will not report again
+	 *     => c_complain uses the absolute value to reset the old value */
+	int interval;
 } c_complain_t;
 
-#define C_COMPLAIN_INIT_STATIC { 0, 0, 0 }
-#define C_COMPLAIN_INIT(c) do { \
-	(c)->last = 0; \
-	(c)->interval = 0; \
-	(c)->complained_once = 0; \
-} while (0)
+#define C_COMPLAIN_INIT_STATIC { 0, 0 }
+#define C_COMPLAIN_INIT(c) do { (c)->last = 0; (c)->interval = 0; } while (0)
 
 /*
  * NAME
  *   c_complain
  *
  * DESCRIPTION
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_dns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_dns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_dns.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_dns.c	2012-11-18 06:23:21.000000000 +0800
@@ -36,44 +36,58 @@
 #define _BSD_SOURCE
 
 #include "collectd.h"
 #include "plugin.h"
 #include "common.h"
 
+#if HAVE_NETINET_IN_SYSTM_H
+# include <netinet/in_systm.h>
+#endif
+#if HAVE_NETINET_IN_H
+# include <netinet/in.h>
+#endif
+#if HAVE_NETINET_IP6_H
+# include <netinet/ip6.h>
+#endif
+#if HAVE_NETINET_IP_COMPAT_H
+# include <netinet/ip_compat.h>
+#endif
+#if HAVE_ARPA_INET_H
+# include <arpa/inet.h>
+#endif
 #if HAVE_SYS_SOCKET_H
 # include <sys/socket.h>
 #endif
 
+#if HAVE_ARPA_NAMESER_H
+# include <arpa/nameser.h>
+#endif
+#if HAVE_ARPA_NAMESER_COMPAT_H
+# include <arpa/nameser_compat.h>
+#endif
+
 #if HAVE_NET_IF_ARP_H
 # include <net/if_arp.h>
 #endif
 #if HAVE_NET_IF_H
 # include <net/if.h>
 #endif
+#if HAVE_NETINET_IF_ETHER_H
+# include <netinet/if_ether.h>
+#endif
 #if HAVE_NET_PPP_DEFS_H
 # include <net/ppp_defs.h>
 #endif
 #if HAVE_NET_IF_PPP_H
 # include <net/if_ppp.h>
 #endif
 
-#if HAVE_NETINET_IN_SYSTM_H
-# include <netinet/in_systm.h>
-#endif
-#if HAVE_NETINET_IN_H
-# include <netinet/in.h>
-#endif
-#if HAVE_NETINET_IP6_H
-# include <netinet/ip6.h>
-#endif
-#if HAVE_NETINET_IP_COMPAT_H
-# include <netinet/ip_compat.h>
-#endif
-#if HAVE_NETINET_IF_ETHER_H
-# include <netinet/if_ether.h>
+#if HAVE_NETDB_H
+# include <netdb.h>
 #endif
+
 #if HAVE_NETINET_IP_H
 # include <netinet/ip.h>
 #endif
 #ifdef HAVE_NETINET_IP_VAR_H
 # include <netinet/ip_var.h>
 #endif
@@ -74,30 +88,19 @@
 #if HAVE_NETINET_IP_H
 # include <netinet/ip.h>
 #endif
 #ifdef HAVE_NETINET_IP_VAR_H
 # include <netinet/ip_var.h>
 #endif
+#if HAVE_NETINET_IP6_H
+# include <netinet/ip6.h>
+#endif
 #if HAVE_NETINET_UDP_H
 # include <netinet/udp.h>
 #endif
 
-#if HAVE_ARPA_INET_H
-# include <arpa/inet.h>
-#endif
-#if HAVE_ARPA_NAMESER_H
-# include <arpa/nameser.h>
-#endif
-#if HAVE_ARPA_NAMESER_COMPAT_H
-# include <arpa/nameser_compat.h>
-#endif
-
-#if HAVE_NETDB_H
-# include <netdb.h>
-#endif
-
 #if HAVE_PCAP_H
 # include <pcap.h>
 #endif
 
 #define PCAP_SNAPLEN 1460
 #ifndef ETHER_HDR_LEN
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src: utils_format_graphite.c
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src: utils_format_graphite.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_format_json.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_format_json.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_format_json.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_format_json.c	2012-11-18 06:23:21.000000000 +0800
@@ -67,13 +67,13 @@
   BUFFER_ADD ('"');
   buffer[dst_pos] = 0;
 
 #undef BUFFER_ADD
 
   return (0);
-} /* }}} int buffer_add_string */
+} /* }}} int escape_string */
 
 static int values_to_json (char *buffer, size_t buffer_size, /* {{{ */
                 const data_set_t *ds, const value_list_t *vl, int store_rates)
 {
   size_t offset = 0;
   int i;
@@ -149,13 +149,13 @@
   DEBUG ("format_json: values_to_json: buffer = %s;", buffer);
   sfree(rates);
   return (0);
 } /* }}} int values_to_json */
 
 static int dstypes_to_json (char *buffer, size_t buffer_size, /* {{{ */
-                const data_set_t *ds, const value_list_t *vl)
+                const data_set_t *ds)
 {
   size_t offset = 0;
   int i;
 
   memset (buffer, 0, buffer_size);
 
@@ -186,13 +186,13 @@
   DEBUG ("format_json: dstypes_to_json: buffer = %s;", buffer);
 
   return (0);
 } /* }}} int dstypes_to_json */
 
 static int dsnames_to_json (char *buffer, size_t buffer_size, /* {{{ */
-                const data_set_t *ds, const value_list_t *vl)
+                const data_set_t *ds)
 {
   size_t offset = 0;
   int i;
 
   memset (buffer, 0, buffer_size);
 
@@ -222,12 +222,92 @@
 
   DEBUG ("format_json: dsnames_to_json: buffer = %s;", buffer);
 
   return (0);
 } /* }}} int dsnames_to_json */
 
+static int meta_data_to_json (char *buffer, size_t buffer_size, /* {{{ */
+    meta_data_t *meta)
+{
+  size_t offset = 0;
+  char **keys = NULL;
+  int keys_num;
+  int status;
+  int i;
+
+  memset (buffer, 0, buffer_size);
+
+#define BUFFER_ADD(...) do { \
+  status = ssnprintf (buffer + offset, buffer_size - offset, \
+      __VA_ARGS__); \
+  if (status < 1) \
+    return (-1); \
+  else if (((size_t) status) >= (buffer_size - offset)) \
+    return (-ENOMEM); \
+  else \
+    offset += ((size_t) status); \
+} while (0)
+
+  keys_num = meta_data_toc (meta, &keys);
+  for (i = 0; i < keys_num; ++i)
+  {
+    int type;
+    char *key = keys[i];
+
+    type = meta_data_type (meta, key);
+    if (type == MD_TYPE_STRING)
+    {
+      char *value = NULL;
+      if (meta_data_get_string (meta, key, &value) == 0)
+      {
+        char temp[512] = "";
+        escape_string (temp, sizeof (temp), value);
+        sfree (value);
+        BUFFER_ADD (",\"%s\":%s", key, temp);
+      }
+    }
+    else if (type == MD_TYPE_SIGNED_INT)
+    {
+      int64_t value = 0;
+      if (meta_data_get_signed_int (meta, key, &value) == 0)
+        BUFFER_ADD (",\"%s\":%"PRIi64, key, value);
+    }
+    else if (type == MD_TYPE_UNSIGNED_INT)
+    {
+      uint64_t value = 0;
+      if (meta_data_get_unsigned_int (meta, key, &value) == 0)
+        BUFFER_ADD (",\"%s\":%"PRIu64, key, value);
+    }
+    else if (type == MD_TYPE_DOUBLE)
+    {
+      double value = 0.0;
+      if (meta_data_get_double (meta, key, &value) == 0)
+        BUFFER_ADD (",\"%s\":%f", key, value);
+    }
+    else if (type == MD_TYPE_BOOLEAN)
+    {
+      _Bool value = 0;
+      if (meta_data_get_boolean (meta, key, &value) == 0)
+        BUFFER_ADD (",\"%s\":%s", key, value ? "true" : "false");
+    }
+
+    free (key);
+  } /* for (keys) */
+  free (keys);
+
+  if (offset <= 0)
+    return (ENOENT);
+
+  buffer[0] = '{'; /* replace leading ',' */
+  BUFFER_ADD ("}");
+
+#undef BUFFER_ADD
+
+  return (0);
+} /* int meta_data_to_json */
+
 static int value_list_to_json (char *buffer, size_t buffer_size, /* {{{ */
                 const data_set_t *ds, const value_list_t *vl, int store_rates)
 {
   char temp[512];
   size_t offset = 0;
   int status;
@@ -251,18 +331,18 @@
 
   status = values_to_json (temp, sizeof (temp), ds, vl, store_rates);
   if (status != 0)
     return (status);
   BUFFER_ADD ("\"values\":%s", temp);
 
-  status = dstypes_to_json (temp, sizeof (temp), ds, vl);
+  status = dstypes_to_json (temp, sizeof (temp), ds);
   if (status != 0)
     return (status);
   BUFFER_ADD (",\"dstypes\":%s", temp);
 
-  status = dsnames_to_json (temp, sizeof (temp), ds, vl);
+  status = dsnames_to_json (temp, sizeof (temp), ds);
   if (status != 0)
     return (status);
   BUFFER_ADD (",\"dsnames\":%s", temp);
 
   BUFFER_ADD (",\"time\":%.3f", CDTIME_T_TO_DOUBLE (vl->time));
   BUFFER_ADD (",\"interval\":%.3f", CDTIME_T_TO_DOUBLE (vl->interval));
@@ -277,12 +357,23 @@
   BUFFER_ADD_KEYVAL ("host", vl->host);
   BUFFER_ADD_KEYVAL ("plugin", vl->plugin);
   BUFFER_ADD_KEYVAL ("plugin_instance", vl->plugin_instance);
   BUFFER_ADD_KEYVAL ("type", vl->type);
   BUFFER_ADD_KEYVAL ("type_instance", vl->type_instance);
 
+  if (vl->meta != NULL)
+  {
+    char meta_buffer[buffer_size];
+    memset (meta_buffer, 0, sizeof (meta_buffer));
+    status = meta_data_to_json (meta_buffer, sizeof (meta_buffer), vl->meta);
+    if (status != 0)
+      return (status);
+
+    BUFFER_ADD (",\"meta\":%s", meta_buffer);
+  } /* if (vl->meta != NULL) */
+
   BUFFER_ADD ("}");
 
 #undef BUFFER_ADD_KEYVAL
 #undef BUFFER_ADD
 
   DEBUG ("format_json: value_list_to_json: buffer = %s;", buffer);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_parse_option.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_parse_option.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_parse_option.c	2013-04-08 01:20:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_parse_option.c	2012-11-18 06:23:21.000000000 +0800
@@ -124,13 +124,13 @@
     key++;
   if (*key == 0)
     return (1);
 
   /* Look for the equal sign */
   buffer = key;
-  while (isalnum ((int) *buffer) || *buffer == '_')
+  while (isalnum ((int) *buffer))
     buffer++;
   if ((*buffer != '=') || (buffer == key))
     return (1);
   *buffer = 0;
   buffer++;
   /* Empty values must be written as "" */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_time.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_time.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_time.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_time.c	2012-11-18 06:23:21.000000000 +0800
@@ -58,7 +58,42 @@
   }
 
   return (TIMEVAL_TO_CDTIME_T (&tv));
 } /* }}} cdtime_t cdtime */
 #endif
 
+size_t cdtime_to_iso8601 (char *s, size_t max, cdtime_t t) /* {{{ */
+{
+  struct timespec t_spec;
+  struct tm t_tm;
+
+  size_t len;
+
+  CDTIME_T_TO_TIMESPEC (t, &t_spec);
+  NORMALIZE_TIMESPEC (t_spec);
+
+  if (localtime_r ((time_t *)&t_spec.tv_sec, &t_tm) == NULL) {
+    char errbuf[1024];
+    ERROR ("cdtime_to_iso8601: localtime_r failed: %s",
+        sstrerror (errno, errbuf, sizeof (errbuf)));
+    return (0);
+  }
+
+  len = strftime (s, max, "%Y-%m-%dT%H:%M:%S", &t_tm);
+  if (len == 0)
+    return 0;
+
+  if (max - len > 2) {
+    int n = snprintf (s + len, max - len, ".%09i", (int)t_spec.tv_nsec);
+    len += (n < max - len) ? n : max - len;
+  }
+
+  if (max - len > 3) {
+    int n = strftime (s + len, max - len, "%z", &t_tm);
+    len += (n < max - len) ? n : max - len;
+  }
+
+  s[max - 1] = '\0';
+  return len;
+} /* }}} size_t cdtime_to_iso8601 */
+
 /* vim: set sw=2 sts=2 et fdm=marker : */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_time.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_time.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/utils_time.h	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/utils_time.h	2012-11-18 06:23:21.000000000 +0800
@@ -63,8 +63,14 @@
 } while (0)
 #define TIMESPEC_TO_CDTIME_T(ts) (TIME_T_TO_CDTIME_T ((ts)->tv_sec)           \
     + NS_TO_CDTIME_T ((ts)->tv_nsec))
 
 cdtime_t cdtime (void);
 
+/* format a cdtime_t value in ISO 8601 format:
+ * returns the number of characters written to the string (not including the
+ * terminating null byte or 0 on error; the function ensures that the string
+ * is null terminated */
+size_t cdtime_to_iso8601 (char *s, size_t max, cdtime_t t);
+
 #endif /* UTILS_TIME_H */
 /* vim: set sw=2 sts=2 et : */
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src: utils_vl_lookup.c
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src: utils_vl_lookup.h
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src: utils_vl_lookup_test.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/varnish.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/varnish.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/varnish.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/varnish.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,11 +1,11 @@
 /**
  * collectd - src/varnish.c
- * Copyright (C) 2010      Jérôme Renard
- * Copyright (C) 2010      Marc Fournier
- * Copyright (C) 2010-2012 Florian Forster
+ * Copyright (C) 2010 Jérôme Renard
+ * Copyright (C) 2010 Marc Fournier
+ * Copyright (C) 2010 Florian Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -17,13 +17,13 @@
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
  *   Jérôme Renard <jerome.renard at gmail.com>
  *   Marc Fournier <marc.fournier at camptocamp.com>
- *   Florian octo Forster <octo at collectd.org>
+ *   Florian octo Forster <octo at verplant.org>
  **/
 
 /**
  * Current list of what is monitored and what is not monitored (yet)
  * {{{
  * Field name           Description                           Monitored
@@ -409,27 +409,17 @@
 		return (EINVAL);
 
 	conf = ud->data;
 
 	vd = VSM_New();
 	VSC_Setup(vd);
-
-	if (conf->instance != NULL)
+	if (VSM_n_Arg(vd, conf->instance) == -1)
 	{
-		int status;
-
-		status = VSM_n_Arg (vd, conf->instance);
-		if (status < 0)
-		{
-			ERROR ("varnish plugin: VSM_n_Arg (\"%s\") failed "
-					"with status %i.",
-					conf->instance, status);
-			return (-1);
-		}
+		ERROR ("Varnish plugin : unable to load statistics from instance");
+		return (-1);
 	}
-
 	if (VSC_Open (vd, /* diag = */ 1))
 	{
 		ERROR ("varnish plugin: Unable to load statistics.");
 
 		return (-1);
 	}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/write_graphite.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/write_graphite.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/write_graphite.c	2013-04-09 09:03:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/write_graphite.c	2012-11-18 06:23:21.000000000 +0800
@@ -1,13 +1,13 @@
 /**
  * collectd - src/write_graphite.c
  * Copyright (C) 2012       Pierre-Yves Ritschard
  * Copyright (C) 2011       Scott Sanders
  * Copyright (C) 2009       Paul Sadauskas
  * Copyright (C) 2009       Doug MacEachern
- * Copyright (C) 2007-2013  Florian octo Forster
+ * Copyright (C) 2007-2012  Florian octo Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -43,14 +43,14 @@
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
 
 #include "utils_cache.h"
-#include "utils_complain.h"
 #include "utils_parse_option.h"
+#include "utils_format_graphite.h"
 
 /* Folks without pthread will need to disable this plugin. */
 #include <pthread.h>
 
 #include <sys/socket.h>
 #include <netdb.h>
@@ -92,13 +92,12 @@
     char     send_buf[WG_SEND_BUF_SIZE];
     size_t   send_buf_free;
     size_t   send_buf_fill;
     cdtime_t send_buf_init_time;
 
     pthread_mutex_t send_lock;
-    c_complain_t init_complaint;
 };
 
 
 /*
  * Functions
  */
@@ -214,25 +213,18 @@
 
     freeaddrinfo (ai_list);
 
     if (cb->sock_fd < 0)
     {
         char errbuf[1024];
-        c_complain (LOG_ERR, &cb->init_complaint,
-                "write_graphite plugin: Connecting to %s:%s failed. "
+        ERROR ("write_graphite plugin: Connecting to %s:%s failed. "
                 "The last error was: %s", node, service,
                 sstrerror (errno, errbuf, sizeof (errbuf)));
         close (cb->sock_fd);
         return (-1);
     }
-    else
-    {
-        c_release (LOG_INFO, &cb->init_complaint,
-                "write_graphite plugin: Successfully connected to %s:%s.",
-                node, service);
-    }
 
     wg_reset_buffer (cb);
 
     return (0);
 }
 
@@ -278,202 +270,39 @@
 
     if (cb->sock_fd < 0)
     {
         status = wg_callback_init (cb);
         if (status != 0)
         {
-            /* An error message has already been printed. */
+            ERROR ("write_graphite plugin: wg_callback_init failed.");
             pthread_mutex_unlock (&cb->send_lock);
             return (-1);
         }
     }
 
     status = wg_flush_nolock (timeout, cb);
     pthread_mutex_unlock (&cb->send_lock);
 
     return (status);
 }
 
-static int wg_format_values (char *ret, size_t ret_len,
-        int ds_num, const data_set_t *ds, const value_list_t *vl,
-        _Bool store_rates)
-{
-    size_t offset = 0;
-    int status;
-    gauge_t *rates = NULL;
-
-    assert (0 == strcmp (ds->type, vl->type));
-
-    memset (ret, 0, ret_len);
-
-#define BUFFER_ADD(...) do { \
-    status = ssnprintf (ret + offset, ret_len - offset, \
-            __VA_ARGS__); \
-    if (status < 1) \
-    { \
-        sfree (rates); \
-        return (-1); \
-    } \
-    else if (((size_t) status) >= (ret_len - offset)) \
-    { \
-        sfree (rates); \
-        return (-1); \
-    } \
-    else \
-    offset += ((size_t) status); \
-} while (0)
-
-    if (ds->ds[ds_num].type == DS_TYPE_GAUGE)
-        BUFFER_ADD ("%f", vl->values[ds_num].gauge);
-    else if (store_rates)
-    {
-        if (rates == NULL)
-            rates = uc_get_rate (ds, vl);
-        if (rates == NULL)
-        {
-            WARNING ("format_values: "
-                    "uc_get_rate failed.");
-            return (-1);
-        }
-        BUFFER_ADD ("%g", rates[ds_num]);
-    }
-    else if (ds->ds[ds_num].type == DS_TYPE_COUNTER)
-        BUFFER_ADD ("%llu", vl->values[ds_num].counter);
-    else if (ds->ds[ds_num].type == DS_TYPE_DERIVE)
-        BUFFER_ADD ("%"PRIi64, vl->values[ds_num].derive);
-    else if (ds->ds[ds_num].type == DS_TYPE_ABSOLUTE)
-        BUFFER_ADD ("%"PRIu64, vl->values[ds_num].absolute);
-    else
-    {
-        ERROR ("format_values plugin: Unknown data source type: %i",
-                ds->ds[ds_num].type);
-        sfree (rates);
-        return (-1);
-    }
-
-#undef BUFFER_ADD
-
-    sfree (rates);
-    return (0);
-}
-
-static void wg_copy_escape_part (char *dst, const char *src, size_t dst_len,
-    char escape_char)
-{
-    size_t i;
-
-    memset (dst, 0, dst_len);
-
-    if (src == NULL)
-        return;
-
-    for (i = 0; i < dst_len; i++)
-    {
-        if (src[i] == 0)
-        {
-            dst[i] = 0;
-            break;
-        }
-
-        if ((src[i] == '.')
-                || isspace ((int) src[i])
-                || iscntrl ((int) src[i]))
-            dst[i] = escape_char;
-        else
-            dst[i] = src[i];
-    }
-}
-
-static int wg_format_name (char *ret, int ret_len,
-        const value_list_t *vl,
-        const struct wg_callback *cb,
-        const char *ds_name)
-{
-    char n_host[DATA_MAX_NAME_LEN];
-    char n_plugin[DATA_MAX_NAME_LEN];
-    char n_plugin_instance[DATA_MAX_NAME_LEN];
-    char n_type[DATA_MAX_NAME_LEN];
-    char n_type_instance[DATA_MAX_NAME_LEN];
-
-    char *prefix;
-    char *postfix;
-
-    char tmp_plugin[2 * DATA_MAX_NAME_LEN + 1];
-    char tmp_type[2 * DATA_MAX_NAME_LEN + 1];
-
-    prefix = cb->prefix;
-    if (prefix == NULL)
-        prefix = "";
-
-    postfix = cb->postfix;
-    if (postfix == NULL)
-        postfix = "";
-
-    wg_copy_escape_part (n_host, vl->host,
-            sizeof (n_host), cb->escape_char);
-    wg_copy_escape_part (n_plugin, vl->plugin,
-            sizeof (n_plugin), cb->escape_char);
-    wg_copy_escape_part (n_plugin_instance, vl->plugin_instance,
-            sizeof (n_plugin_instance), cb->escape_char);
-    wg_copy_escape_part (n_type, vl->type,
-            sizeof (n_type), cb->escape_char);
-    wg_copy_escape_part (n_type_instance, vl->type_instance,
-            sizeof (n_type_instance), cb->escape_char);
-
-    if (n_plugin_instance[0] != '\0')
-        ssnprintf (tmp_plugin, sizeof (tmp_plugin), "%s%c%s",
-            n_plugin,
-            cb->separate_instances ? '.' : '-',
-            n_plugin_instance);
-    else
-        sstrncpy (tmp_plugin, n_plugin, sizeof (tmp_plugin));
-
-    if (n_type_instance[0] != '\0')
-        ssnprintf (tmp_type, sizeof (tmp_type), "%s%c%s",
-            n_type,
-            cb->separate_instances ? '.' : '-',
-            n_type_instance);
-    else
-        sstrncpy (tmp_type, n_type, sizeof (tmp_type));
-
-    if (ds_name != NULL)
-        ssnprintf (ret, ret_len, "%s%s%s.%s.%s.%s",
-            prefix, n_host, postfix, tmp_plugin, tmp_type, ds_name);
-    else
-        ssnprintf (ret, ret_len, "%s%s%s.%s.%s",
-            prefix, n_host, postfix, tmp_plugin, tmp_type);
-
-    return (0);
-}
-
-static int wg_send_message (const char* key, const char* value,
-        cdtime_t time, struct wg_callback *cb)
+static int wg_send_message (char const *message, struct wg_callback *cb)
 {
     int status;
     size_t message_len;
-    char message[1024];
 
-    message_len = (size_t) ssnprintf (message, sizeof (message),
-            "%s %s %u\r\n",
-            key,
-            value,
-            (unsigned int) CDTIME_T_TO_TIME_T (time));
-    if (message_len >= sizeof (message)) {
-        ERROR ("write_graphite plugin: message buffer too small: "
-                "Need %zu bytes.", message_len + 1);
-        return (-1);
-    }
+    message_len = strlen (message);
 
     pthread_mutex_lock (&cb->send_lock);
 
     if (cb->sock_fd < 0)
     {
         status = wg_callback_init (cb);
         if (status != 0)
         {
-            /* An error message has already been printed. */
+            ERROR ("write_graphite plugin: wg_callback_init failed.");
             pthread_mutex_unlock (&cb->send_lock);
             return (-1);
         }
     }
 
     if (message_len >= cb->send_buf_free)
@@ -508,62 +337,38 @@
     return (0);
 }
 
 static int wg_write_messages (const data_set_t *ds, const value_list_t *vl,
         struct wg_callback *cb)
 {
-    char key[10*DATA_MAX_NAME_LEN];
-    char values[512];
-
-    int status, i;
+    char buffer[4096];
+    int status;
 
     if (0 != strcmp (ds->type, vl->type))
     {
         ERROR ("write_graphite plugin: DS type does not match "
                 "value list type");
         return -1;
     }
 
-    for (i = 0; i < ds->ds_num; i++)
-    {
-        const char *ds_name = NULL;
-
-        if (cb->always_append_ds || (ds->ds_num > 1))
-            ds_name = ds->ds[i].name;
-
-        /* Copy the identifier to `key' and escape it. */
-        status = wg_format_name (key, sizeof (key), vl, cb, ds_name);
-        if (status != 0)
-        {
-            ERROR ("write_graphite plugin: error with format_name");
-            return (status);
-        }
-
-        escape_string (key, sizeof (key));
-        /* Convert the values to an ASCII representation and put that into
-         * `values'. */
-        status = wg_format_values (values, sizeof (values), i, ds, vl,
-                    cb->store_rates);
-        if (status != 0)
-        {
-            ERROR ("write_graphite plugin: error with "
-                    "wg_format_values");
-            return (status);
-        }
+    memset (buffer, 0, sizeof (buffer));
+    status = format_graphite (buffer, sizeof (buffer), ds, vl,
+            cb->prefix, cb->postfix, cb->escape_char, cb->store_rates);
+    if (status != 0) /* error message has been printed already. */
+        return (status);
 
-        /* Send the message to graphite */
-        status = wg_send_message (key, values, vl->time, cb);
-        if (status != 0)
-        {
-            /* An error message has already been printed. */
-            return (status);
-        }
+    wg_send_message (buffer, cb);
+    if (status != 0)
+    {
+        ERROR ("write_graphite plugin: wg_send_message failed "
+                "with status %i.", status);
+        return (status);
     }
 
     return (0);
-}
+} /* int wg_write_messages */
 
 static int wg_write (const data_set_t *ds, const value_list_t *vl,
         user_data_t *user_data)
 {
     struct wg_callback *cb;
     int status;
@@ -629,13 +434,12 @@
     cb->prefix = NULL;
     cb->postfix = NULL;
     cb->escape_char = WG_DEFAULT_ESCAPE;
     cb->store_rates = 1;
 
     pthread_mutex_init (&cb->send_lock, /* attr = */ NULL);
-    C_COMPLAIN_INIT (&cb->init_complaint);
 
     for (i = 0; i < ci->children_num; i++)
     {
         oconfig_item_t *child = ci->children + i;
 
         if (strcasecmp ("Host", child->key) == 0)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/write_http.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/write_http.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/write_http.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/write_http.c	2012-11-18 06:23:21.000000000 +0800
@@ -85,13 +85,13 @@
 static int wh_send_buffer (wh_callback_t *cb) /* {{{ */
 {
         int status = 0;
 
         curl_easy_setopt (cb->curl, CURLOPT_POSTFIELDS, cb->send_buffer);
         status = curl_easy_perform (cb->curl);
-        if (status != CURLE_OK)
+        if (status != 0)
         {
                 ERROR ("write_http plugin: curl_easy_perform failed with "
                                 "status %i: %s",
                                 status, cb->curl_errbuf);
         }
         return (status);
@@ -108,13 +108,13 @@
         if (cb->curl == NULL)
         {
                 ERROR ("curl plugin: curl_easy_init failed.");
                 return (-1);
         }
 
-        curl_easy_setopt (cb->curl, CURLOPT_NOSIGNAL, 1L);
+        curl_easy_setopt (cb->curl, CURLOPT_NOSIGNAL, 1);
         curl_easy_setopt (cb->curl, CURLOPT_USERAGENT, PACKAGE_NAME"/"PACKAGE_VERSION);
 
         headers = NULL;
         headers = curl_slist_append (headers, "Accept:  */*");
         if (cb->format == WH_FORMAT_JSON)
                 headers = curl_slist_append (headers, "Content-Type: application/json");
@@ -144,15 +144,15 @@
                 ssnprintf (cb->credentials, credentials_size, "%s:%s",
                                 cb->user, (cb->pass == NULL) ? "" : cb->pass);
                 curl_easy_setopt (cb->curl, CURLOPT_USERPWD, cb->credentials);
                 curl_easy_setopt (cb->curl, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
         }
 
-        curl_easy_setopt (cb->curl, CURLOPT_SSL_VERIFYPEER, (long) cb->verify_peer);
+        curl_easy_setopt (cb->curl, CURLOPT_SSL_VERIFYPEER, cb->verify_peer);
         curl_easy_setopt (cb->curl, CURLOPT_SSL_VERIFYHOST,
-                        cb->verify_host ? 2L : 0L);
+                        cb->verify_host ? 2 : 0);
         if (cb->cacert != NULL)
                 curl_easy_setopt (cb->curl, CURLOPT_CAINFO, cb->cacert);
 
         wh_reset_buffer (cb);
 
         return (0);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/zfs_arc.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/zfs_arc.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/src/zfs_arc.c	2013-04-08 23:23:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/src/zfs_arc.c	2012-11-18 06:23:21.000000000 +0800
@@ -125,13 +125,13 @@
         /* Operations */
 	za_read_derive (ksp, "allocated","cache_operation", "allocated");
 	za_read_derive (ksp, "deleted",  "cache_operation", "deleted");
 	za_read_derive (ksp, "stolen",   "cache_operation", "stolen");
 
         /* Issue indicators */
-        za_read_derive (ksp, "mutex_miss", "mutex_operations", "miss");
+        za_read_derive (ksp, "mutex_miss", "mutex_operation", "miss");
 	za_read_derive (ksp, "hash_collisions", "hash_collisions", "");
 	
         /* Evictions */
 	za_read_derive (ksp, "evict_l2_cached",     "cache_eviction", "cached");
 	za_read_derive (ksp, "evict_l2_eligible",   "cache_eviction", "eligible");
 	za_read_derive (ksp, "evict_l2_ineligible", "cache_eviction", "ineligible");
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/version-gen.sh /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/version-gen.sh
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.3/version-gen.sh	2013-04-09 09:03:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.2.0/version-gen.sh	2012-11-18 06:23:21.000000000 +0800
@@ -1,9 +1,9 @@
 #!/usr/bin/env bash
 
-DEFAULT_VERSION="5.1.3.git"
+DEFAULT_VERSION="5.2.0.git"
 
 VERSION="`git describe 2> /dev/null | sed -e 's/^collectd-//'`"
 
 if test -z "$VERSION"; then
 	VERSION="$DEFAULT_VERSION"
 fi
