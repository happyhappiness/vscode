diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/aclocal.m4 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/aclocal.m4
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/aclocal.m4	2012-11-11 19:38:14.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/aclocal.m4	2012-04-02 16:05:24.000000000 +0800
@@ -10,14 +10,14 @@
 # but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
 m4_ifndef([AC_AUTOCONF_VERSION],
   [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
-m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.65],,
-[m4_warning([this file was generated for autoconf 2.65.
+m4_if(m4_defn([AC_AUTOCONF_VERSION]), [2.67],,
+[m4_warning([this file was generated for autoconf 2.67.
 You have another version of autoconf.  It may work, but is not guaranteed to.
 If you have problems, you may need to regenerate the build system entirely.
 To do so, use the procedure documented by the package, typically `autoreconf'.])])
 
 # Portability macros for glibc argz.                    -*- Autoconf -*-
 #
@@ -8977,12 +8977,13 @@
 m4_ifndef([AC_LIBTOOL_LANG_RC_CONFIG],	[AC_DEFUN([AC_LIBTOOL_LANG_RC_CONFIG])])
 m4_ifndef([_LT_AC_LANG_RC_CONFIG],	[AC_DEFUN([_LT_AC_LANG_RC_CONFIG])])
 m4_ifndef([AC_LIBTOOL_CONFIG],		[AC_DEFUN([AC_LIBTOOL_CONFIG])])
 m4_ifndef([_LT_AC_FILE_LTDLL_C],	[AC_DEFUN([_LT_AC_FILE_LTDLL_C])])
 
 # pkg.m4 - Macros to locate and utilise pkg-config.            -*- Autoconf -*-
+# serial 1 (pkg-config-0.24)
 # 
 # Copyright © 2004 Scott James Remnant <scott@netsplit.com>.
 #
 # This program is free software; you can redistribute it and/or modify
 # it under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
@@ -9004,62 +9005,61 @@
 
 # PKG_PROG_PKG_CONFIG([MIN-VERSION])
 # ----------------------------------
 AC_DEFUN([PKG_PROG_PKG_CONFIG],
 [m4_pattern_forbid([^_?PKG_[A-Z_]+$])
 m4_pattern_allow([^PKG_CONFIG(_PATH)?$])
-AC_ARG_VAR([PKG_CONFIG], [path to pkg-config utility])dnl
+AC_ARG_VAR([PKG_CONFIG], [path to pkg-config utility])
+AC_ARG_VAR([PKG_CONFIG_PATH], [directories to add to pkg-config's search path])
+AC_ARG_VAR([PKG_CONFIG_LIBDIR], [path overriding pkg-config's built-in search path])
+
 if test "x$ac_cv_env_PKG_CONFIG_set" != "xset"; then
 	AC_PATH_TOOL([PKG_CONFIG], [pkg-config])
 fi
 if test -n "$PKG_CONFIG"; then
 	_pkg_min_version=m4_default([$1], [0.9.0])
 	AC_MSG_CHECKING([pkg-config is at least version $_pkg_min_version])
 	if $PKG_CONFIG --atleast-pkgconfig-version $_pkg_min_version; then
 		AC_MSG_RESULT([yes])
 	else
 		AC_MSG_RESULT([no])
 		PKG_CONFIG=""
 	fi
-		
 fi[]dnl
 ])# PKG_PROG_PKG_CONFIG
 
 # PKG_CHECK_EXISTS(MODULES, [ACTION-IF-FOUND], [ACTION-IF-NOT-FOUND])
 #
 # Check to see whether a particular set of modules exists.  Similar
 # to PKG_CHECK_MODULES(), but does not set variables or print errors.
 #
-#
-# Similar to PKG_CHECK_MODULES, make sure that the first instance of
-# this or PKG_CHECK_MODULES is called, or make sure to call
-# PKG_CHECK_EXISTS manually
+# Please remember that m4 expands AC_REQUIRE([PKG_PROG_PKG_CONFIG])
+# only at the first occurence in configure.ac, so if the first place
+# it's called might be skipped (such as if it is within an "if", you
+# have to call PKG_CHECK_EXISTS manually
 # --------------------------------------------------------------
 AC_DEFUN([PKG_CHECK_EXISTS],
 [AC_REQUIRE([PKG_PROG_PKG_CONFIG])dnl
 if test -n "$PKG_CONFIG" && \
     AC_RUN_LOG([$PKG_CONFIG --exists --print-errors "$1"]); then
-  m4_ifval([$2], [$2], [:])
+  m4_default([$2], [:])
 m4_ifvaln([$3], [else
   $3])dnl
 fi])
 
-
 # _PKG_CONFIG([VARIABLE], [COMMAND], [MODULES])
 # ---------------------------------------------
 m4_define([_PKG_CONFIG],
-[if test -n "$PKG_CONFIG"; then
-    if test -n "$$1"; then
-        pkg_cv_[]$1="$$1"
-    else
-        PKG_CHECK_EXISTS([$3],
-                         [pkg_cv_[]$1=`$PKG_CONFIG --[]$2 "$3" 2>/dev/null`],
-			 [pkg_failed=yes])
-    fi
-else
-	pkg_failed=untried
+[if test -n "$$1"; then
+    pkg_cv_[]$1="$$1"
+ elif test -n "$PKG_CONFIG"; then
+    PKG_CHECK_EXISTS([$3],
+                     [pkg_cv_[]$1=`$PKG_CONFIG --[]$2 "$3" 2>/dev/null`],
+		     [pkg_failed=yes])
+ else
+    pkg_failed=untried
 fi[]dnl
 ])# _PKG_CONFIG
 
 # _PKG_SHORT_ERRORS_SUPPORTED
 # -----------------------------
 AC_DEFUN([_PKG_SHORT_ERRORS_SUPPORTED],
@@ -9095,48 +9095,48 @@
 
 m4_define([_PKG_TEXT], [Alternatively, you may set the environment variables $1[]_CFLAGS
 and $1[]_LIBS to avoid the need to call pkg-config.
 See the pkg-config man page for more details.])
 
 if test $pkg_failed = yes; then
+   	AC_MSG_RESULT([no])
         _PKG_SHORT_ERRORS_SUPPORTED
         if test $_pkg_short_errors_supported = yes; then
-	        $1[]_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "$2"`
+	        $1[]_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "$2" 2>&1`
         else 
-	        $1[]_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "$2"`
+	        $1[]_PKG_ERRORS=`$PKG_CONFIG --print-errors "$2" 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$$1[]_PKG_ERRORS" >&AS_MESSAGE_LOG_FD
 
-	ifelse([$4], , [AC_MSG_ERROR(dnl
+	m4_default([$4], [AC_MSG_ERROR(
 [Package requirements ($2) were not met:
 
 $$1_PKG_ERRORS
 
 Consider adjusting the PKG_CONFIG_PATH environment variable if you
 installed software in a non-standard prefix.
 
-_PKG_TEXT
-])],
-		[AC_MSG_RESULT([no])
-                $4])
+_PKG_TEXT])[]dnl
+        ])
 elif test $pkg_failed = untried; then
-	ifelse([$4], , [AC_MSG_FAILURE(dnl
+     	AC_MSG_RESULT([no])
+	m4_default([$4], [AC_MSG_FAILURE(
 [The pkg-config script could not be found or is too old.  Make sure it
 is in your PATH or set the PKG_CONFIG environment variable to the full
 path to pkg-config.
 
 _PKG_TEXT
 
-To get pkg-config, see <http://pkg-config.freedesktop.org/>.])],
-		[$4])
+To get pkg-config, see <http://pkg-config.freedesktop.org/>.])[]dnl
+        ])
 else
 	$1[]_CFLAGS=$pkg_cv_[]$1[]_CFLAGS
 	$1[]_LIBS=$pkg_cv_[]$1[]_LIBS
         AC_MSG_RESULT([yes])
-	ifelse([$3], , :, [$3])
+	$3
 fi[]dnl
 ])# PKG_CHECK_MODULES
 
 # Copyright (C) 2002, 2003, 2005, 2006, 2007, 2008  Free Software Foundation, Inc.
 #
 # This file is free software; the Free Software Foundation
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/AUTHORS /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/AUTHORS
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/AUTHORS	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/AUTHORS	2012-04-02 16:04:58.000000000 +0800
@@ -12,12 +12,15 @@
  - Debian package.
 
 
 Contributors (sorted alphabetically)
 ====================================
 
+Akkarit Sangpetch <asangpet at andrew.cmu.edu>
+ - write_mongodb plugin.
+
 Alessandro Iurlano <alessandro.iurlano at gmail.com>
  - Initial filecount plugin.
 
 Alvaro Barcellos <alvaro.barcellos at gmail.com>
  - Don't-fork patch.
 
@@ -41,16 +44,22 @@
 Bruno Prémont <bonbons at linux-vserver.org>
  - BIND plugin.
  - Many bugreports and -fixes in various plugins,
    especially a nasty bug in the network plugin.
  - Wireshark dissector.
 
+Chris Lundquist <clundquist at bluebox.net>
+ - Improvements to the write_mongodb plugin.
+
 Christophe Kalt <collectd at klb.taranis.org>
  - The version 3 `log' mode.
  - Many Solaris related hints and fixes.
 
+Cyril Feraudet <cyril at feraudet.com>
+ - ethstat plugin.
+
 Dan Berrange <berrange at redhat.com>
  - uuid plugin.
 
 David Bacher <drbacher at gmail.com>
  - serial plugin.
 
@@ -106,12 +115,15 @@
 
 Marco Chiappero <marco at absence.it>
  - uptime plugin.
  - ip6tables support in the iptables plugin.
  - openvpn plugin (support for more status file formats)
 
+Michael Hanselmann <public at hansmi.ch>
+ - md plugin.
+
 Michael Stapelberg <michael+git at stapelberg.de>
  - OpenBSD port of the tcpconns plugin.
 
 Michał Mirosław <mirq-linux at rere.qmqm.pl>
  - thermal plugin.
  - Streamlines recursive directory traversion.
@@ -166,12 +178,15 @@
 Rodolphe Quiédeville <rquiedeville at bearstech.com>
  - Lock statistics in the mysql plugin.
 
 Scott Garrett <sgarrett at technomancer.com>
  - tape plugin.
 
+Scott Sanders <scott at jssjr.com>
+ - Write-Graphite plugin.
+
 Sebastien Pahl <sebastien.pahl at dotcloud.com>
  - AMQP plugin.
 
 Simon Kuhnle <simon at blarzwurst.de>
  - OpenBSD code for the cpu and memory plugins.
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/bindings/java/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/bindings/java/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/bindings/java/Makefile.in	2012-11-11 19:38:31.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/bindings/java/Makefile.in	2012-04-02 16:05:28.000000000 +0800
@@ -67,12 +67,14 @@
 BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMODBUS_CFLAGS = @BUILD_WITH_LIBMODBUS_CFLAGS@
 BUILD_WITH_LIBMODBUS_LIBS = @BUILD_WITH_LIBMODBUS_LIBS@
+BUILD_WITH_LIBMONGOC_CPPFLAGS = @BUILD_WITH_LIBMONGOC_CPPFLAGS@
+BUILD_WITH_LIBMONGOC_LDFLAGS = @BUILD_WITH_LIBMONGOC_LDFLAGS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
 BUILD_WITH_LIBOPING_CPPFLAGS = @BUILD_WITH_LIBOPING_CPPFLAGS@
 BUILD_WITH_LIBOPING_LDFLAGS = @BUILD_WITH_LIBOPING_LDFLAGS@
@@ -213,12 +215,14 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
+PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
+PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/bindings/java/org/collectd/java/GenericJMXConfValue.java /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/bindings/java/org/collectd/java/GenericJMXConfValue.java
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/bindings/java/org/collectd/java/GenericJMXConfValue.java	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/bindings/java/org/collectd/java/GenericJMXConfValue.java	2012-04-02 16:04:58.000000000 +0800
@@ -309,13 +309,20 @@
     key = attrNameArray[0];
     for (int i = 1; i < attrNameArray.length; i++)
       attrNameList.add (attrNameArray[i]);
 
     try
     {
-      value = conn.getAttribute (objName, key);
+      try
+      {
+        value = conn.getAttribute (objName, key);
+      }
+      catch (javax.management.AttributeNotFoundException e)
+      {
+        value = conn.invoke (objName, key, /* args = */ null, /* types = */ null);
+      }
     }
     catch (Exception e)
     {
       Collectd.logError ("GenericJMXConfValue.query: getAttribute failed: "
           + e);
       return (null);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/bindings/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/bindings/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/bindings/Makefile.am	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/bindings/Makefile.am	2012-04-02 16:04:58.000000000 +0800
@@ -7,60 +7,33 @@
 EXTRA_DIST = perl/Makefile.PL \
 	     perl/lib/Collectd.pm \
 	     perl/lib/Collectd/Unixsock.pm \
 	     perl/lib/Collectd/Plugins/Monitorus.pm \
 	     perl/lib/Collectd/Plugins/OpenVZ.pm
 
-CLEANFILES = \
-	buildperl/Collectd.pm \
-	buildperl/Collectd/Plugins/OpenVZ.pm \
-	buildperl/Collectd/Unixsock.pm \
-	buildperl/Makefile.PL \
-	.perl-directory-stamp
-
-DISTCLEANFILES = \
-	buildperl/Collectd.pm \
-	buildperl/Collectd/Plugins/OpenVZ.pm \
-	buildperl/Collectd/Unixsock.pm \
-	buildperl/Makefile.PL \
-	.perl-directory-stamp
-
 all-local: @PERL_BINDINGS@
 
-
 install-exec-local:
-	[ ! -f buildperl/Makefile ] || ( cd buildperl && $(MAKE) install )
-
-# Perl 'make uninstall' does not work as well as wanted.
-# So we do the work here.
-uninstall-local:
-	rm -f $(DESTDIR)$(mandir)/man3/Collectd::Unixsock.3pm
-	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd.pm
-	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd/Plugins/OpenVZ.pm
-	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd/Unixsock.pm
-	rm -f $(DESTDIR)$(prefix)/lib64/perl5/perllocal.pod
-	rm -f $(DESTDIR)$(prefix)/lib64/perl5/auto/Collectd/.packlist
+	[ ! -f perl/Makefile ] || ( cd perl && $(MAKE) install )
 
 clean-local:
-	rm -rf buildperl
+	[ ! -f perl/Makefile ] || ( cd perl && $(MAKE) realclean )
 
-perl: buildperl/Makefile
-	cd buildperl && $(MAKE)
+perl: perl/Makefile
+	cd perl && $(MAKE)
 
-buildperl/Makefile: .perl-directory-stamp buildperl/Makefile.PL \
+perl/Makefile: .perl-directory-stamp perl/Makefile.PL \
 	$(top_builddir)/config.status
-	cd buildperl && @PERL@ Makefile.PL INSTALL_BASE=$(prefix) @PERL_BINDINGS_OPTIONS@
-
-buildperl/Makefile.PL: .perl-directory-stamp $(top_builddir)/config.status
+	cd perl && @PERL@ Makefile.PL PREFIX=$(prefix) @PERL_BINDINGS_OPTIONS@
 
 .perl-directory-stamp:
-	if test ! -d buildperl; then \
-	  mkdir -p buildperl/Collectd/Plugins; \
-	  cp $(srcdir)/perl/lib/Collectd.pm buildperl/; \
-	  cp $(srcdir)/perl/Makefile.PL buildperl/; \
-	  cp $(srcdir)/perl/lib/Collectd/Unixsock.pm buildperl/Collectd/; \
-	  cp $(srcdir)/perl/lib/Collectd/Plugins/OpenVZ.pm buildperl/Collectd/Plugins/; \
+	if test ! -d perl; then \
+	  mkdir -p perl/Collectd/Plugins; \
+	  cp $(srcdir)/perl/Collectd.pm perl/; \
+	  cp $(srcdir)/perl/Makefile.PL perl/; \
+	  cp $(srcdir)/perl/Collectd/Unixsock.pm perl/Collectd/; \
+	  cp $(srcdir)/perl/Collectd/Plugins/OpenVZ.pm perl/Collectd/Plugins/; \
 	fi
 	touch $@
 
 .PHONY: perl
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/bindings/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/bindings/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/bindings/Makefile.in	2012-11-11 19:38:31.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/bindings/Makefile.in	2012-04-02 16:05:28.000000000 +0800
@@ -108,12 +108,14 @@
 BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMODBUS_CFLAGS = @BUILD_WITH_LIBMODBUS_CFLAGS@
 BUILD_WITH_LIBMODBUS_LIBS = @BUILD_WITH_LIBMODBUS_LIBS@
+BUILD_WITH_LIBMONGOC_CPPFLAGS = @BUILD_WITH_LIBMONGOC_CPPFLAGS@
+BUILD_WITH_LIBMONGOC_LDFLAGS = @BUILD_WITH_LIBMONGOC_LDFLAGS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
 BUILD_WITH_LIBOPING_CPPFLAGS = @BUILD_WITH_LIBOPING_CPPFLAGS@
 BUILD_WITH_LIBOPING_LDFLAGS = @BUILD_WITH_LIBOPING_LDFLAGS@
@@ -254,12 +256,14 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
+PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
+PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
@@ -327,26 +331,12 @@
 EXTRA_DIST = perl/Makefile.PL \
 	     perl/lib/Collectd.pm \
 	     perl/lib/Collectd/Unixsock.pm \
 	     perl/lib/Collectd/Plugins/Monitorus.pm \
 	     perl/lib/Collectd/Plugins/OpenVZ.pm
 
-CLEANFILES = \
-	buildperl/Collectd.pm \
-	buildperl/Collectd/Plugins/OpenVZ.pm \
-	buildperl/Collectd/Unixsock.pm \
-	buildperl/Makefile.PL \
-	.perl-directory-stamp
-
-DISTCLEANFILES = \
-	buildperl/Collectd.pm \
-	buildperl/Collectd/Plugins/OpenVZ.pm \
-	buildperl/Collectd/Unixsock.pm \
-	buildperl/Makefile.PL \
-	.perl-directory-stamp
-
 all: all-recursive
 
 .SUFFIXES:
 $(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
 	@for dep in $?; do \
 	  case '$(am__configure_deps)' in \
@@ -596,18 +586,16 @@
 	  install_sh_PROGRAM="$(INSTALL_STRIP_PROGRAM)" INSTALL_STRIP_FLAG=-s \
 	  `test -z '$(STRIP)' || \
 	    echo "INSTALL_PROGRAM_ENV=STRIPPROG='$(STRIP)'"` install
 mostlyclean-generic:
 
 clean-generic:
-	-test -z "$(CLEANFILES)" || rm -f $(CLEANFILES)
 
 distclean-generic:
 	-test -z "$(CONFIG_CLEAN_FILES)" || rm -f $(CONFIG_CLEAN_FILES)
 	-test . = "$(srcdir)" || test -z "$(CONFIG_CLEAN_VPATH_FILES)" || rm -f $(CONFIG_CLEAN_VPATH_FILES)
-	-test -z "$(DISTCLEANFILES)" || rm -f $(DISTCLEANFILES)
 
 maintainer-clean-generic:
 	@echo "This command is intended for maintainers to use"
 	@echo "it deletes files that may require special tools to rebuild."
 clean: clean-recursive
 
@@ -670,13 +658,13 @@
 pdf-am:
 
 ps: ps-recursive
 
 ps-am:
 
-uninstall-am: uninstall-local
+uninstall-am:
 
 .MAKE: $(RECURSIVE_CLEAN_TARGETS) $(RECURSIVE_TARGETS) ctags-recursive \
 	install-am install-strip tags-recursive
 
 .PHONY: $(RECURSIVE_CLEAN_TARGETS) $(RECURSIVE_TARGETS) CTAGS GTAGS \
 	all all-am all-local check check-am clean clean-generic \
@@ -687,50 +675,37 @@
 	install-exec install-exec-am install-exec-local install-html \
 	install-html-am install-info install-info-am install-man \
 	install-pdf install-pdf-am install-ps install-ps-am \
 	install-strip installcheck installcheck-am installdirs \
 	installdirs-am maintainer-clean maintainer-clean-generic \
 	mostlyclean mostlyclean-generic mostlyclean-libtool pdf pdf-am \
-	ps ps-am tags tags-recursive uninstall uninstall-am \
-	uninstall-local
+	ps ps-am tags tags-recursive uninstall uninstall-am
 
 
 all-local: @PERL_BINDINGS@
 
 install-exec-local:
-	[ ! -f buildperl/Makefile ] || ( cd buildperl && $(MAKE) install )
-
-# Perl 'make uninstall' does not work as well as wanted.
-# So we do the work here.
-uninstall-local:
-	rm -f $(DESTDIR)$(mandir)/man3/Collectd::Unixsock.3pm
-	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd.pm
-	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd/Plugins/OpenVZ.pm
-	rm -f $(DESTDIR)$(datarootdir)/perl5/Collectd/Unixsock.pm
-	rm -f $(DESTDIR)$(prefix)/lib64/perl5/perllocal.pod
-	rm -f $(DESTDIR)$(prefix)/lib64/perl5/auto/Collectd/.packlist
+	[ ! -f perl/Makefile ] || ( cd perl && $(MAKE) install )
 
 clean-local:
-	rm -rf buildperl
+	[ ! -f perl/Makefile ] || ( cd perl && $(MAKE) realclean )
 
-perl: buildperl/Makefile
-	cd buildperl && $(MAKE)
+perl: perl/Makefile
+	cd perl && $(MAKE)
 
-buildperl/Makefile: .perl-directory-stamp buildperl/Makefile.PL \
+perl/Makefile: .perl-directory-stamp perl/Makefile.PL \
 	$(top_builddir)/config.status
-	cd buildperl && @PERL@ Makefile.PL INSTALL_BASE=$(prefix) @PERL_BINDINGS_OPTIONS@
-
-buildperl/Makefile.PL: .perl-directory-stamp $(top_builddir)/config.status
+	cd perl && @PERL@ Makefile.PL PREFIX=$(prefix) @PERL_BINDINGS_OPTIONS@
 
 .perl-directory-stamp:
-	if test ! -d buildperl; then \
-	  mkdir -p buildperl/Collectd/Plugins; \
-	  cp $(srcdir)/perl/lib/Collectd.pm buildperl/; \
-	  cp $(srcdir)/perl/Makefile.PL buildperl/; \
-	  cp $(srcdir)/perl/lib/Collectd/Unixsock.pm buildperl/Collectd/; \
-	  cp $(srcdir)/perl/lib/Collectd/Plugins/OpenVZ.pm buildperl/Collectd/Plugins/; \
+	if test ! -d perl; then \
+	  mkdir -p perl/Collectd/Plugins; \
+	  cp $(srcdir)/perl/Collectd.pm perl/; \
+	  cp $(srcdir)/perl/Makefile.PL perl/; \
+	  cp $(srcdir)/perl/Collectd/Unixsock.pm perl/Collectd/; \
+	  cp $(srcdir)/perl/Collectd/Plugins/OpenVZ.pm perl/Collectd/Plugins/; \
 	fi
 	touch $@
 
 .PHONY: perl
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/ChangeLog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/ChangeLog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/ChangeLog	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/ChangeLog	2012-04-02 16:04:58.000000000 +0800
@@ -1,57 +1,59 @@
-2012-11-11, Version 5.0.5
-	* collectd: Create new directories with mode 0777 and let umask remove
-	  unwanted permission bits.
-	* collectd: Build issues have been fixed.
-	* collectd: An incorrect assertion has been fixed in some common code
-	  for Solaris. This should resolve pseudo-random assertion failures
-	  under Solaris. Thanks to Jeff Blane for his help debugging this.
-	* collectd: A couple of memory leaks through PThread thread attributes
-	  have been fixed. Thanks to Gerrie Roos for fixing these.
-	* collectdctl: Fix PUTVAL for data sets with multiple data sources.
-	  Thanks to Cyril Feraudet for reporting this problem.
-	* contrib/migrate-4-5.px: Handle to "df" to "df_complex" conversion
-	  correctly.
-	* apcups plugin: Improve the reconnect behavior.
-	* curl_xml plugin: The "Host" setting was silently ignored. Thanks to
-	  Fabien Wernli for fixing this.
-	* df plugin: Ignore "rootfs" devices under Linux to avoid having them
-	  reported twice. Thanks to Brune Prémont for fixing this.
-	* disk plugin: Fix incorrect computation of read and write latency (the
-	  "disk_time" type). Previously, the numbers reported where too small
-	  by a factor of "interval", e.g. when the interval is set to 10
-	  seconds, the values were too low by a factor of 10. Thanks to Manuel
-	  Sanmartin for reporting this problem.
-	* dns plugin: A build issue under Solaris has been fixed. A erroneous
-	  define that could lead to the reporting of bad data has been fixed by
-	  Daniel Sutto.
-	* memcachec plugin: A bug in the configuration handling has been fixed.
-	  Thanks to Pascal Hofmann for fixing this issue.
-	* mysql plugin: Fix a bug when registering multiple databases. Thanks
-	  to Sebastian Harl for fixing this.
-	* netapp plugin: Correctly close the connection on communication
-	  errors.
-	* netlink plugin: The function used to query statistics has been
-	  changed to be more in line with iproute2's behavior. Thanks to
-	  "KIvosak" for the patch.
-	* network plugin: Initialization of libgcrypt has been fixed. Thanks to
-	  Chris Lundquist for his patch.
-	* oracle plugin: Error messages have been improved.
-	* ping plugin: Don't enter the exponential back-off mode when
-	  ping_send() fails. This should make recovery after a network failure
-	  much faster.
-	* python plugin: Memory leaks have been fixed. Thanks to Tommie Gannert
-	  and Sven Trenkel for fixing this.
-	* redis plugin: Fix a compilation problem on FreeBSD. Thanks to
-	  "biancalana" for the fix.
-	* rrdtool plugin: Fix an out-of-bounds array access when printing a
-	  warning message. Thanks to Will Hawkins for fixing this bug.
-	* snmp plugin: Support for the SNMP_ENDOFMIBVIEW return value has been
-	  added. Support for more complex / unusual MIBs / subtrees has been
-	  added. Thanks to Mark Juric to test the changes and point out these
-	  problems.
+2012-04-01, Version 5.1.0
+	* Build system, iptables plugin: The shipped version of libiptc has
+	  been removed.
+	* collectd-nagios: A list of value lists can now be queried using
+	  "-n LIST". Thanks to Sebastian Harl for his patches.
+	* bind plugin: The "ParseTime" option has been added. It allows to use
+	  the system time rather than the time reported by BIND.
+	* curl, memcachec, tail plugins: The "ExcludeRegexp" option has been
+	  added. Thanks to Peter Warasin for his initial patch.
+	* ethstat plugin: The new "ethstat" plugin reads performance statistics
+	  directly from ethernet cards. Thanks to Cyril Feraudet for his patch.
+	* GenericJMX plugin: Support for querying MBean "Operations" (in
+	  addition to "Attributes") has been added. Thanks to Pierre-Yves
+	  Ritschard for his patch.
+	* irq plugin: The selection / ignore code now uses the default
+	  ignorelist infrastructure, providing the standard feature set, e.g.
+	  regex matching.
+	* md plugin: The new "md" plugin reports the number of disks in various
+	  states in Linux software RAID devices. Thanks to Michael Hanselmann
+	  for his patch.
+	* modbus plugin: Support for signed integer register types has been
+	  added.
+	* nfs plugin: Support for Solaris has been added. Thanks to Cosmin
+	  Ioiart for his patch.
+	* numa plugin: The new "numa" plugin reports statistics of the
+	  Non-Uniform Memory Access (NUMA) subsystem of Linux.
+	* processes plugin: Various fixes for the FreeBSD implementation.
+	  Thanks to Phil Kulin for his patch.
+	* rrdcached plugin: Passing flushes to the caching daemon has been
+	  added.
+	* sensors plugin: The initialization code has been improved. Thanks to
+	  Henrique de Moraes Holschuh for his patch.
+	* swap plugin: The "ReportByDevice" option has been added.
+	* syslog plugin: Support for writing notifications has been added.
+	  Thanks to Fabien Wernli for his patch.
+	* tcpconns plugin: Support for AIX has been added. Thanks to Manuel
+	  Luis Sanmartín Rozada for his patch.
+	* threshold plugin: The "PersistOK" option has been added. Thanks to
+	  Aaron Brady for his patch.
+	* varnish plugin: Support for Varnish 3.0 has been added. Thanks to
+	  Jérôme Renard for his patches.
+	* write_mongodb plugin: The new "write_mongodb" plugin writes value
+	  lists to MongoDB, a shema-less database. Thanks to Akkarit Sangpetch
+	  and Chris Lundquist for their work.
+	* write_graphite plugin: The new "write_graphite" plugin writes value
+	  lists to Carbon, the storage layer of the Graphite time-series
+	  database. Thanks to Scott Sanders and Pierre-Yves Ritschard for their
+	  work.
+	* zfs_arc plugin: Several new statistics have been added. Thanks to
+	  Aurelien Rougemont for his patches.
+	* scale target: Support for scaling specific data sources only has been
+	  added. Thanks to Gerrie Roos for his patch.
+
 
 2012-04-01, Version 5.0.4
 	* Build system: Fix the use of a libltdl macro. Thanks to Clemens Lang
 	  for fixing this. Adresses some issues with building the iptables
 	  plugin under Gentoo.
 	* libcollectdclient: A memory leak in the lcc_getval() function has
@@ -193,13 +195,13 @@
 	* libvirt plugin: The "InterfaceFormat" option has been added. Thanks
 	  to Ruben Kerkhof for his patch.
 	* lpar plugin: New plugins for "logical partitions", a virtualization
 	  technique of POWER CPUs. Thanks to Aurélien Reynaud for his code and
 	  patience.
 	* modbus plugin: Support for libmodbus 2.9.2 has been added and the
-	  license has been changes to LGPLv2.1.
+	  license has been changed to LGPLv2.1.
 	* mysql plugin: Backwards compatibility code has been removed. The
 	  data sets used have been improved.
 	* network plugin: The default buffer size has been increased to
 	  1452 bytes.
 	* perl plugin: Backwards compatibility code has been removed.
 	* postgresql plugin: Backwards compatibility code has been removed.
@@ -218,54 +220,12 @@
 	  store.
 	* zfs_arc plugin: The data sets have been replaced by more elegant
 	  alternatives.
 	* v5upgrade target: Target for converting v4 data sets to the v5
 	  schema.
 
-2012-11-11, Version 4.10.8
-	* collectd: Create new directories with mode 0777 and let umask remove
-	  unwanted permission bits.
-	* collectd: Build issues have been fixed.
-	* collectd: An incorrect assertion has been fixed in some common code
-	  for Solaris. This should resolve pseudo-random assertion failures
-	  under Solaris. Thanks to Jeff Blane for his help debugging this.
-	* collectd: A couple of memory leaks through PThread thread attributes
-	  have been fixed. Thanks to Gerrie Roos for fixing these.
-	* apcups plugin: Improve the reconnect behavior.
-	* df plugin: Ignore "rootfs" devices under Linux to avoid having them
-	  reported twice. Thanks to Brune Prémont for fixing this.
-	* disk plugin: Fix incorrect computation of read and write latency (the
-	  "disk_time" type). Previously, the numbers reported where too small
-	  by a factor of "interval", e.g. when the interval is set to 10
-	  seconds, the values were too low by a factor of 10. Thanks to Manuel
-	  Sanmartin for reporting this problem.
-	* dns plugin: A build issue under Solaris has been fixed. A erroneous
-	  define that could lead to the reporting of bad data has been fixed by
-	  Daniel Sutto.
-	* memcachec plugin: A bug in the configuration handling has been fixed.
-	  Thanks to Pascal Hofmann for fixing this issue.
-	* netapp plugin: Correctly close the connection on communication
-	  errors.
-	* netlink plugin: The function used to query statistics has been
-	  changed to be more in line with iproute2's behavior. Thanks to
-	  "KIvosak" for the patch.
-	* network plugin: Initialization of libgcrypt has been fixed. Thanks to
-	  Chris Lundquist for his patch.
-	* oracle plugin: Error messages have been improved.
-	* ping plugin: Don't enter the exponential back-off mode when
-	  ping_send() fails. This should make recovery after a network failure
-	  much faster.
-	* python plugin: Memory leaks have been fixed. Thanks to Tommie Gannert
-	  and Sven Trenkel for fixing this.
-	* rrdtool plugin: Fix an out-of-bounds array access when printing a
-	  warning message. Thanks to Will Hawkins for fixing this bug.
-	* snmp plugin: Support for the SNMP_ENDOFMIBVIEW return value has been
-	  added. Support for more complex / unusual MIBs / subtrees has been
-	  added. Thanks to Mark Juric to test the changes and point out these
-	  problems.
-
 2012-04-01, Version 4.10.7
 	* Build system: Fix the use of a libltdl macro. Thanks to Clemens Lang
 	  for fixing this. Adresses some issues with building the iptables
 	  plugin under Gentoo.
 	* libcollectdclient: A memory leak in the lcc_getval() function has
 	  been fixed. Thanks to Jason Schmidlapp for finding and fixing this
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/configure	2012-11-11 19:38:27.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/configure	2012-04-02 16:05:33.000000000 +0800
@@ -1,14 +1,14 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.65 for collectd 5.0.5.
+# Generated by GNU Autoconf 2.67 for collectd 5.1.0.
 #
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
-# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software Foundation,
-# Inc.
+# 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free Software
+# Foundation, Inc.
 #
 #
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
 ## -------------------- ##
 ## M4sh Initialization. ##
@@ -313,13 +313,13 @@
 	    q
 	  }
 	  s/.*/./; q'`
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
 # as_fn_append VAR VALUE
 # ----------------------
 # Append the text in VALUE to the end of the definition contained in VAR. Take
@@ -353,25 +353,25 @@
   {
     as_val=`expr "$@" || test $? -eq 1`
   }
 fi # as_fn_arith
 
 
-# as_fn_error ERROR [LINENO LOG_FD]
-# ---------------------------------
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with status $?, using 1 if that was 0.
+# script with STATUS, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$?; test $as_status -eq 0 && as_status=1
-  if test "$3"; then
-    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $1" >&2
+  $as_echo "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
 if expr a : '\(a\)' >/dev/null 2>&1 &&
    test "X`expr 00001 : '.*\(...\)'`" = X001; then
   as_expr=expr
@@ -680,13 +680,13 @@
 lt_dlopen_dir="$lt_ltdl_dir"
 
 test -n "$DJDIR" || exec 7<&0 </dev/null
 exec 6>&1
 
 # Name of the host.
-# hostname on some systems (SVR3.2, Linux) returns a bogus exit status,
+# hostname on some systems (SVR3.2, old GNU/Linux) returns a bogus exit status,
 # so uname gets run too.
 ac_hostname=`(hostname || uname -n) 2>/dev/null | sed 1q`
 
 #
 # Initializations.
 #
@@ -699,14 +699,14 @@
 MFLAGS=
 MAKEFLAGS=
 
 # Identity of this package.
 PACKAGE_NAME='collectd'
 PACKAGE_TARNAME='collectd'
-PACKAGE_VERSION='5.0.5'
-PACKAGE_STRING='collectd 5.0.5'
+PACKAGE_VERSION='5.1.0'
+PACKAGE_STRING='collectd 5.1.0'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
 ac_unique_file="src/collectd.c"
 # Factoring default headers for most tests.
 ac_includes_default="\
@@ -766,16 +766,20 @@
 LOAD_PLUGIN_LOGFILE
 LOAD_PLUGIN_SYSLOG
 BUILD_PLUGIN_ZFS_ARC_FALSE
 BUILD_PLUGIN_ZFS_ARC_TRUE
 BUILD_PLUGIN_XMMS_FALSE
 BUILD_PLUGIN_XMMS_TRUE
+BUILD_PLUGIN_WRITE_MONGODB_FALSE
+BUILD_PLUGIN_WRITE_MONGODB_TRUE
 BUILD_PLUGIN_WRITE_REDIS_FALSE
 BUILD_PLUGIN_WRITE_REDIS_TRUE
 BUILD_PLUGIN_WRITE_HTTP_FALSE
 BUILD_PLUGIN_WRITE_HTTP_TRUE
+BUILD_PLUGIN_WRITE_GRAPHITE_FALSE
+BUILD_PLUGIN_WRITE_GRAPHITE_TRUE
 BUILD_PLUGIN_WIRELESS_FALSE
 BUILD_PLUGIN_WIRELESS_TRUE
 BUILD_PLUGIN_VSERVER_FALSE
 BUILD_PLUGIN_VSERVER_TRUE
 BUILD_PLUGIN_VMEM_FALSE
 BUILD_PLUGIN_VMEM_TRUE
@@ -858,12 +862,14 @@
 BUILD_PLUGIN_ONEWIRE_FALSE
 BUILD_PLUGIN_ONEWIRE_TRUE
 BUILD_PLUGIN_OLSRD_FALSE
 BUILD_PLUGIN_OLSRD_TRUE
 BUILD_PLUGIN_NUT_FALSE
 BUILD_PLUGIN_NUT_TRUE
+BUILD_PLUGIN_NUMA_FALSE
+BUILD_PLUGIN_NUMA_TRUE
 BUILD_PLUGIN_NTPD_FALSE
 BUILD_PLUGIN_NTPD_TRUE
 BUILD_PLUGIN_NOTIFY_EMAIL_FALSE
 BUILD_PLUGIN_NOTIFY_EMAIL_TRUE
 BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE
 BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE
@@ -886,12 +892,14 @@
 BUILD_PLUGIN_MEMORY_FALSE
 BUILD_PLUGIN_MEMORY_TRUE
 BUILD_PLUGIN_MEMCACHED_FALSE
 BUILD_PLUGIN_MEMCACHED_TRUE
 BUILD_PLUGIN_MEMCACHEC_FALSE
 BUILD_PLUGIN_MEMCACHEC_TRUE
+BUILD_PLUGIN_MD_FALSE
+BUILD_PLUGIN_MD_TRUE
 BUILD_PLUGIN_MBMON_FALSE
 BUILD_PLUGIN_MBMON_TRUE
 BUILD_PLUGIN_MATCH_VALUE_FALSE
 BUILD_PLUGIN_MATCH_VALUE_TRUE
 BUILD_PLUGIN_MATCH_TIMEDIFF_FALSE
 BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE
@@ -930,12 +938,14 @@
 BUILD_PLUGIN_FSCACHE_FALSE
 BUILD_PLUGIN_FSCACHE_TRUE
 BUILD_PLUGIN_FILECOUNT_FALSE
 BUILD_PLUGIN_FILECOUNT_TRUE
 BUILD_PLUGIN_EXEC_FALSE
 BUILD_PLUGIN_EXEC_TRUE
+BUILD_PLUGIN_ETHSTAT_FALSE
+BUILD_PLUGIN_ETHSTAT_TRUE
 BUILD_PLUGIN_ENTROPY_FALSE
 BUILD_PLUGIN_ENTROPY_TRUE
 BUILD_PLUGIN_EMAIL_FALSE
 BUILD_PLUGIN_EMAIL_TRUE
 BUILD_PLUGIN_DNS_FALSE
 BUILD_PLUGIN_DNS_TRUE
@@ -1068,12 +1078,16 @@
 BUILD_WITH_LIBNETLINK_LIBS
 BUILD_WITH_LIBNETLINK_CFLAGS
 BUILD_WITH_LIBMYSQL_FALSE
 BUILD_WITH_LIBMYSQL_TRUE
 BUILD_WITH_LIBMYSQL_LIBS
 BUILD_WITH_LIBMYSQL_CFLAGS
+BUILD_WITH_LIBMONGOC_FALSE
+BUILD_WITH_LIBMONGOC_TRUE
+BUILD_WITH_LIBMONGOC_LDFLAGS
+BUILD_WITH_LIBMONGOC_CPPFLAGS
 BUILD_WITH_LIBMODBUS_LIBS
 BUILD_WITH_LIBMODBUS_CFLAGS
 BUILD_WITH_LIBMEMCACHED_FALSE
 BUILD_WITH_LIBMEMCACHED_TRUE
 BUILD_WITH_LIBMEMCACHED_LIBS
 BUILD_WITH_LIBMEMCACHED_LDFLAGS
@@ -1155,12 +1169,14 @@
 pkgconfigdir
 KERNEL_CFLAGS
 KERNEL_DIR
 HAVE_PROTOC_C_FALSE
 HAVE_PROTOC_C_TRUE
 have_protoc_c
+PKG_CONFIG_LIBDIR
+PKG_CONFIG_PATH
 PKG_CONFIG
 YFLAGS
 YACC
 LEXLIB
 LEX_OUTPUT_ROOT
 LEX
@@ -1316,12 +1332,13 @@
 with_libgcrypt
 with_libgcrypt_prefix
 with_libiptc
 with_java
 with_libmemcached
 with_libmodbus
+with_libmongoc
 with_libmysql
 with_libnetlink
 with_libnetapp
 with_libnetsnmp
 with_liboconfig
 with_liboping
@@ -1364,12 +1381,13 @@
 enable_dbi
 enable_df
 enable_disk
 enable_dns
 enable_email
 enable_entropy
+enable_ethstat
 enable_exec
 enable_filecount
 enable_fscache
 enable_gmond
 enable_hddtemp
 enable_interface
@@ -1386,12 +1404,13 @@
 enable_match_empty_counter
 enable_match_hashed
 enable_match_regex
 enable_match_timediff
 enable_match_value
 enable_mbmon
+enable_md
 enable_memcachec
 enable_memcached
 enable_memory
 enable_modbus
 enable_multimeter
 enable_mysql
@@ -1400,12 +1419,13 @@
 enable_network
 enable_nfs
 enable_nginx
 enable_notify_desktop
 enable_notify_email
 enable_ntpd
+enable_numa
 enable_nut
 enable_olsrd
 enable_onewire
 enable_openvpn
 enable_oracle
 enable_perl
@@ -1444,14 +1464,16 @@
 enable_users
 enable_uuid
 enable_varnish
 enable_vmem
 enable_vserver
 enable_wireless
+enable_write_graphite
 enable_write_http
 enable_write_redis
+enable_write_mongodb
 enable_xmms
 enable_zfs_arc
 with_perl_bindings
 '
       ac_precious_vars='build_alias
 host_alias
@@ -1462,12 +1484,14 @@
 LIBS
 CPPFLAGS
 CPP
 YACC
 YFLAGS
 PKG_CONFIG
+PKG_CONFIG_PATH
+PKG_CONFIG_LIBDIR
 KERNEL_DIR
 LIBNETAPP_CPPFLAGS
 LIBNETAPP_LDFLAGS
 LIBNETAPP_LIBS
 LIBNOTIFY_CFLAGS
 LIBNOTIFY_LIBS'
@@ -1530,13 +1554,14 @@
     eval $ac_prev=\$ac_option
     ac_prev=
     continue
   fi
 
   case $ac_option in
-  *=*)	ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
+  *=?*) ac_optarg=`expr "X$ac_option" : '[^=]*=\(.*\)'` ;;
+  *=)   ac_optarg= ;;
   *)	ac_optarg=yes ;;
   esac
 
   # Accept the important Cygnus configure options, so we can diagnose typos.
 
   case $ac_dashdash$ac_option in
@@ -1576,13 +1601,13 @@
     datarootdir=$ac_optarg ;;
 
   -disable-* | --disable-*)
     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "enable_$ac_useropt"
 "*) ;;
@@ -1602,13 +1627,13 @@
     dvidir=$ac_optarg ;;
 
   -enable-* | --enable-*)
     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "enable_$ac_useropt"
 "*) ;;
@@ -1806,13 +1831,13 @@
     ac_init_version=: ;;
 
   -with-* | --with-*)
     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "with_$ac_useropt"
 "*) ;;
@@ -1822,13 +1847,13 @@
     eval with_$ac_useropt=\$ac_optarg ;;
 
   -without-* | --without-*)
     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: $ac_useropt"
     ac_useropt_orig=$ac_useropt
     ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "with_$ac_useropt"
 "*) ;;
@@ -1852,22 +1877,22 @@
   | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
     ac_prev=x_libraries ;;
   -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
     x_libraries=$ac_optarg ;;
 
-  -*) as_fn_error "unrecognized option: \`$ac_option'
-Try \`$0 --help' for more information."
+  -*) as_fn_error $? "unrecognized option: \`$ac_option'
+Try \`$0 --help' for more information"
     ;;
 
   *=*)
     ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
     # Reject names that are not valid shell variable names.
     case $ac_envvar in #(
       '' | [0-9]* | *[!_$as_cr_alnum]* )
-      as_fn_error "invalid variable name: \`$ac_envvar'" ;;
+      as_fn_error $? "invalid variable name: \`$ac_envvar'" ;;
     esac
     eval $ac_envvar=\$ac_optarg
     export $ac_envvar ;;
 
   *)
     # FIXME: should be removed in autoconf 3.0.
@@ -1879,19 +1904,19 @@
 
   esac
 done
 
 if test -n "$ac_prev"; then
   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
-  as_fn_error "missing argument to $ac_option"
+  as_fn_error $? "missing argument to $ac_option"
 fi
 
 if test -n "$ac_unrecognized_opts"; then
   case $enable_option_checking in
     no) ;;
-    fatal) as_fn_error "unrecognized options: $ac_unrecognized_opts" ;;
+    fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
     *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
   esac
 fi
 
 # Check all directory arguments for consistency.
 for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
@@ -1908,13 +1933,13 @@
   esac
   # Be sure to have absolute directory names.
   case $ac_val in
     [\\/$]* | ?:[\\/]* )  continue;;
     NONE | '' ) case $ac_var in *prefix ) continue;; esac;;
   esac
-  as_fn_error "expected an absolute directory name for --$ac_var: $ac_val"
+  as_fn_error $? "expected an absolute directory name for --$ac_var: $ac_val"
 done
 
 # There might be people who depend on the old broken behavior: `$host'
 # used to hold the argument of --host etc.
 # FIXME: To remove some day.
 build=$build_alias
@@ -1922,14 +1947,14 @@
 target=$target_alias
 
 # FIXME: To remove some day.
 if test "x$host_alias" != x; then
   if test "x$build_alias" = x; then
     cross_compiling=maybe
-    $as_echo "$as_me: WARNING: If you wanted to set the --build type, don't use --host.
-    If a cross compiler is detected then cross compile mode will be used." >&2
+    $as_echo "$as_me: WARNING: if you wanted to set the --build type, don't use --host.
+    If a cross compiler is detected then cross compile mode will be used" >&2
   elif test "x$build_alias" != "x$host_alias"; then
     cross_compiling=yes
   fi
 fi
 
 ac_tool_prefix=
@@ -1938,15 +1963,15 @@
 test "$silent" = yes && exec 6>/dev/null
 
 
 ac_pwd=`pwd` && test -n "$ac_pwd" &&
 ac_ls_di=`ls -di .` &&
 ac_pwd_ls_di=`cd "$ac_pwd" && ls -di .` ||
-  as_fn_error "working directory cannot be determined"
+  as_fn_error $? "working directory cannot be determined"
 test "X$ac_ls_di" = "X$ac_pwd_ls_di" ||
-  as_fn_error "pwd does not report name of working directory"
+  as_fn_error $? "pwd does not report name of working directory"
 
 
 # Find the source files, if location was not specified.
 if test -z "$srcdir"; then
   ac_srcdir_defaulted=yes
   # Try the directory containing this script, then the parent directory.
@@ -1979,17 +2004,17 @@
   fi
 else
   ac_srcdir_defaulted=no
 fi
 if test ! -r "$srcdir/$ac_unique_file"; then
   test "$ac_srcdir_defaulted" = yes && srcdir="$ac_confdir or .."
-  as_fn_error "cannot find sources ($ac_unique_file) in $srcdir"
+  as_fn_error $? "cannot find sources ($ac_unique_file) in $srcdir"
 fi
 ac_msg="sources are in $srcdir, but \`cd $srcdir' does not work"
 ac_abs_confdir=`(
-	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error "$ac_msg"
+	cd "$srcdir" && test -r "./$ac_unique_file" || as_fn_error $? "$ac_msg"
 	pwd)`
 # When building in place, set srcdir=.
 if test "$ac_abs_confdir" = "$ac_pwd"; then
   srcdir=.
 fi
 # Remove unnecessary trailing slashes from srcdir.
@@ -2009,13 +2034,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures collectd 5.0.5 to adapt to many kinds of systems.
+\`configure' configures collectd 5.1.0 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -2023,13 +2048,13 @@
 
 Configuration:
   -h, --help              display this help and exit
       --help=short        display options specific to this package
       --help=recursive    display the short help of all the included packages
   -V, --version           display version information and exit
-  -q, --quiet, --silent   do not print \`checking...' messages
+  -q, --quiet, --silent   do not print \`checking ...' messages
       --cache-file=FILE   cache test results in FILE [disabled]
   -C, --config-cache      alias for \`--cache-file=config.cache'
   -n, --no-create         do not create output files
       --srcdir=DIR        find the sources in DIR [configure dir or \`..']
 
 Installation directories:
@@ -2079,13 +2104,13 @@
   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of collectd 5.0.5:";;
+     short | recursive ) echo "Configuration of collectd 5.1.0:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-option-checking  ignore unrecognized --enable/--with options
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
@@ -2127,12 +2152,13 @@
   --enable-dbi            General database statistics
   --enable-df             Filesystem usage statistics
   --enable-disk           Disk usage statistics
   --enable-dns            DNS traffic analysis
   --enable-email          EMail statistics
   --enable-entropy        Entropy statistics
+  --enable-ethstat        Stats from NIC driver
   --enable-exec           Execution of external programs
   --enable-filecount      Count files in directories
   --enable-fscache        fscache statistics
   --enable-gmond          Ganglia plugin
   --enable-hddtemp        Query hddtempd
   --enable-interface      Interface traffic statistics
@@ -2150,12 +2176,13 @@
                           The empty counter match
   --enable-match_hashed   The hashed match
   --enable-match_regex    The regex match
   --enable-match_timediff The timediff match
   --enable-match_value    The value match
   --enable-mbmon          Query mbmond
+  --enable-md             md (Linux software RAID) devices
   --enable-memcachec      memcachec statistics
   --enable-memcached      memcached statistics
   --enable-memory         Memory usage
   --enable-modbus         Modbus plugin
   --enable-multimeter     Read multimeter values
   --enable-mysql          MySQL statistics
@@ -2164,12 +2191,13 @@
   --enable-network        Network communication plugin
   --enable-nfs            NFS statistics
   --enable-nginx          nginx statistics
   --enable-notify_desktop Desktop notifications
   --enable-notify_email   Email notifier
   --enable-ntpd           NTPd statistics
+  --enable-numa           NUMA virtual memory statistics
   --enable-nut            Network UPS tools statistics
   --enable-olsrd          olsrd statistics
   --enable-onewire        OneWire sensor statistics
   --enable-openvpn        OpenVPN client statistics
   --enable-oracle         Oracle plugin
   --enable-perl           Embed a Perl interpreter
@@ -2210,14 +2238,16 @@
   --enable-users          User statistics
   --enable-uuid           UUID as hostname plugin
   --enable-varnish        Varnish cache statistics
   --enable-vmem           Virtual memory statistics
   --enable-vserver        Linux VServer statistics
   --enable-wireless       Wireless statistics
+  --enable-write_graphite Graphite / Carbon output plugin
   --enable-write_http     HTTP output plugin
   --enable-write_redis    Redis output plugin
+  --enable-write_mongodb  MongoDB output plugin
   --enable-xmms           XMMS statistics
   --enable-zfs_arc        ZFS ARC statistics
 
 Optional Packages:
   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
   --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
@@ -2247,12 +2277,14 @@
   --with-libiptc[=PREFIX] Path to libiptc.
   --with-java[=PREFIX]    Path to Java home.
   --with-libmemcached[=PREFIX]
                           Path to libmemcached.
   --with-libmodbus[=PREFIX]
                           Path to the modbus library.
+  --with-libmongoc[=PREFIX]
+                          Path to libmongoc.
   --with-libmysql[=PREFIX]
                           Path to libmysql.
   --with-libnetlink[=PREFIX]
                           Path to libnetlink.
   --with-libnetapp[=PREFIX]
                           Path to libnetapp.
@@ -2304,12 +2336,16 @@
   YACC        The `Yet Another C Compiler' implementation to use. Defaults to
               the first program found out of: `bison -y', `byacc', `yacc'.
   YFLAGS      The list of arguments that will be passed by default to $YACC.
               This script will default YFLAGS to the empty string to avoid a
               default value of `-d' given by some make applications.
   PKG_CONFIG  path to pkg-config utility
+  PKG_CONFIG_PATH
+              directories to add to pkg-config's search path
+  PKG_CONFIG_LIBDIR
+              path overriding pkg-config's built-in search path
   KERNEL_DIR  path to Linux kernel sources
   LIBNETAPP_CPPFLAGS
               C preprocessor flags required to build with libnetapp
   LIBNETAPP_LDFLAGS
               Linker flags required to build with libnetapp
   LIBNETAPP_LIBS
@@ -2382,16 +2418,16 @@
   done
 fi
 
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-collectd configure 5.0.5
-generated by GNU Autoconf 2.65
+collectd configure 5.1.0
+generated by GNU Autoconf 2.67
 
-Copyright (C) 2009 Free Software Foundation, Inc.
+Copyright (C) 2010 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
   exit
 fi
 
@@ -2489,13 +2525,13 @@
 # INCLUDES, setting the cache variable VAR accordingly.
 ac_fn_c_check_header_compile ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${$3+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 #include <$2>
@@ -2532,13 +2568,13 @@
   if test -s conftest.err; then
     grep -v '^ *+' conftest.err >conftest.er1
     cat conftest.er1 >&5
     mv -f conftest.er1 conftest.err
   fi
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } >/dev/null && {
+  test $ac_status = 0; } > conftest.i && {
 	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
 	 test ! -s conftest.err
        }; then :
   ac_retval=0
 else
   $as_echo "$as_me: failed program was:" >&5
@@ -2598,13 +2634,13 @@
 # Tests whether FUNC exists, setting the cache variable VAR accordingly
 ac_fn_c_check_func ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${$3+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 /* Define $2 to an innocuous variant, in case <limits.h> declares $2.
    For example, HP-UX 11i <limits.h> declares gettimeofday.  */
@@ -2657,31 +2693,38 @@
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
   eval $as_lineno_stack; test "x$as_lineno_stack" = x && { as_lineno=; unset as_lineno;}
 
 } # ac_fn_c_check_func
 
-# ac_fn_c_check_decl LINENO SYMBOL VAR
-# ------------------------------------
-# Tests whether SYMBOL is declared, setting cache variable VAR accordingly.
+# ac_fn_c_check_decl LINENO SYMBOL VAR INCLUDES
+# ---------------------------------------------
+# Tests whether SYMBOL is declared in INCLUDES, setting cache variable VAR
+# accordingly.
 ac_fn_c_check_decl ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $2 is declared" >&5
-$as_echo_n "checking whether $2 is declared... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+  as_decl_name=`echo $2|sed 's/ *(.*//'`
+  as_decl_use=`echo $2|sed -e 's/(/((/' -e 's/)/) 0&/' -e 's/,/) 0& (/g'`
+  { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $as_decl_name is declared" >&5
+$as_echo_n "checking whether $as_decl_name is declared... " >&6; }
+if eval "test \"\${$3+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
 main ()
 {
-#ifndef $2
-  (void) $2;
+#ifndef $as_decl_name
+#ifdef __cplusplus
+  (void) $as_decl_use;
+#else
+  (void) $as_decl_name;
+#endif
 #endif
 
   ;
   return 0;
 }
 _ACEOF
@@ -2705,13 +2748,13 @@
 # variable VAR accordingly.
 ac_fn_c_check_type ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${$3+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=no"
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
@@ -2758,16 +2801,16 @@
 # Tests whether HEADER exists, giving a warning if it cannot be compiled using
 # the include files in INCLUDES and setting the cache variable VAR
 # accordingly.
 ac_fn_c_check_header_mongrel ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+  if eval "test \"\${$3+set}\"" = set; then :
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${$3+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 fi
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
 else
@@ -2797,13 +2840,13 @@
 _ACEOF
 if ac_fn_c_try_cpp "$LINENO"; then :
   ac_header_preproc=yes
 else
   ac_header_preproc=no
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
 $as_echo "$ac_header_preproc" >&6; }
 
 # So?  What about this header?
 case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((
   yes:no: )
@@ -2824,13 +2867,13 @@
     { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
 $as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
     ;;
 esac
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
 $as_echo_n "checking for $2... " >&6; }
-if { as_var=$3; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${$3+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   eval "$3=\$ac_header_compiler"
 fi
 eval ac_res=\$$3
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
@@ -2846,13 +2889,13 @@
 # INCLUDES, setting cache variable VAR accordingly.
 ac_fn_c_check_member ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2.$3" >&5
 $as_echo_n "checking for $2.$3... " >&6; }
-if { as_var=$4; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${$4+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $5
 int
@@ -2897,14 +2940,14 @@
 
 } # ac_fn_c_check_member
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by collectd $as_me 5.0.5, which was
-generated by GNU Autoconf 2.65.  Invocation command line was
+It was created by collectd $as_me 5.1.0, which was
+generated by GNU Autoconf 2.67.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 exec 5>>config.log
 {
@@ -3008,17 +3051,15 @@
 # WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
 trap 'exit_status=$?
   # Save into config.log some information that might help in debugging.
   {
     echo
 
-    cat <<\_ASBOX
-## ---------------- ##
+    $as_echo "## ---------------- ##
 ## Cache variables. ##
-## ---------------- ##
-_ASBOX
+## ---------------- ##"
     echo
     # The following way of writing the cache mishandles newlines in values,
 (
   for ac_var in `(set) 2>&1 | sed -n '\''s/^\([a-zA-Z_][a-zA-Z0-9_]*\)=.*/\1/p'\''`; do
     eval ac_val=\$$ac_var
     case $ac_val in #(
@@ -3046,34 +3087,30 @@
       ;;
     esac |
     sort
 )
     echo
 
-    cat <<\_ASBOX
-## ----------------- ##
+    $as_echo "## ----------------- ##
 ## Output variables. ##
-## ----------------- ##
-_ASBOX
+## ----------------- ##"
     echo
     for ac_var in $ac_subst_vars
     do
       eval ac_val=\$$ac_var
       case $ac_val in
       *\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
       esac
       $as_echo "$ac_var='\''$ac_val'\''"
     done | sort
     echo
 
     if test -n "$ac_subst_files"; then
-      cat <<\_ASBOX
-## ------------------- ##
+      $as_echo "## ------------------- ##
 ## File substitutions. ##
-## ------------------- ##
-_ASBOX
+## ------------------- ##"
       echo
       for ac_var in $ac_subst_files
       do
 	eval ac_val=\$$ac_var
 	case $ac_val in
 	*\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
@@ -3081,17 +3118,15 @@
 	$as_echo "$ac_var='\''$ac_val'\''"
       done | sort
       echo
     fi
 
     if test -s confdefs.h; then
-      cat <<\_ASBOX
-## ----------- ##
+      $as_echo "## ----------- ##
 ## confdefs.h. ##
-## ----------- ##
-_ASBOX
+## ----------- ##"
       echo
       cat confdefs.h
       echo
     fi
     test "$ac_signal" != 0 &&
       $as_echo "$as_me: caught signal $ac_signal"
@@ -3140,13 +3175,18 @@
 
 # Let the site file select an alternate cache file if it wants to.
 # Prefer an explicitly selected file to automatically selected ones.
 ac_site_file1=NONE
 ac_site_file2=NONE
 if test -n "$CONFIG_SITE"; then
-  ac_site_file1=$CONFIG_SITE
+  # We do not want a PATH search for config.site.
+  case $CONFIG_SITE in #((
+    -*)  ac_site_file1=./$CONFIG_SITE;;
+    */*) ac_site_file1=$CONFIG_SITE;;
+    *)   ac_site_file1=./$CONFIG_SITE;;
+  esac
 elif test "x$prefix" != xNONE; then
   ac_site_file1=$prefix/share/config.site
   ac_site_file2=$prefix/etc/config.site
 else
   ac_site_file1=$ac_default_prefix/share/config.site
   ac_site_file2=$ac_default_prefix/etc/config.site
@@ -3155,13 +3195,17 @@
 do
   test "x$ac_site_file" = xNONE && continue
   if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
     { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
 $as_echo "$as_me: loading site script $ac_site_file" >&6;}
     sed 's/^/| /' "$ac_site_file" >&5
-    . "$ac_site_file"
+    . "$ac_site_file" \
+      || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "failed to load site script $ac_site_file
+See \`config.log' for more details" "$LINENO" 5 ; }
   fi
 done
 
 if test -r "$cache_file"; then
   # Some versions of bash will fail to source /dev/null (special files
   # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
@@ -3231,13 +3275,13 @@
 done
 if $ac_cache_corrupted; then
   { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
   { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
 $as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
-  as_fn_error "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
+  as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
 fi
 ## -------------------- ##
 ## Main body of script. ##
 ## -------------------- ##
 
 ac_ext=c
@@ -3249,22 +3293,28 @@
 
 
 ac_config_headers="$ac_config_headers src/config.h"
 
 ac_aux_dir=
 for ac_dir in libltdl/config "$srcdir"/libltdl/config; do
-  for ac_t in install-sh install.sh shtool; do
-    if test -f "$ac_dir/$ac_t"; then
-      ac_aux_dir=$ac_dir
-      ac_install_sh="$ac_aux_dir/$ac_t -c"
-      break 2
-    fi
-  done
+  if test -f "$ac_dir/install-sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install-sh -c"
+    break
+  elif test -f "$ac_dir/install.sh"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/install.sh -c"
+    break
+  elif test -f "$ac_dir/shtool"; then
+    ac_aux_dir=$ac_dir
+    ac_install_sh="$ac_aux_dir/shtool install -c"
+    break
+  fi
 done
 if test -z "$ac_aux_dir"; then
-  as_fn_error "cannot find install-sh, install.sh, or shtool in libltdl/config \"$srcdir\"/libltdl/config" "$LINENO" 5
+  as_fn_error $? "cannot find install-sh, install.sh, or shtool in libltdl/config \"$srcdir\"/libltdl/config" "$LINENO" 5
 fi
 
 # These three variables are undocumented and unsupported,
 # and are intended to be withdrawn in a future Autoconf release.
 # They can cause serious problems if a builder's source tree is in a directory
 # whose full name contains unusual characters.
@@ -3308,33 +3358,33 @@
 
 
 ltmain="$ac_aux_dir/ltmain.sh"
 
 # Make sure we can run config.sub.
 $SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
-  as_fn_error "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
+  as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
 $as_echo_n "checking build system type... " >&6; }
 if test "${ac_cv_build+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_build_alias=$build_alias
 test "x$ac_build_alias" = x &&
   ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
 test "x$ac_build_alias" = x &&
-  as_fn_error "cannot guess build type; you must specify one" "$LINENO" 5
+  as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
 ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
-  as_fn_error "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
+  as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
 $as_echo "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical build" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical build" "$LINENO" 5 ;;
 esac
 build=$ac_cv_build
 ac_save_IFS=$IFS; IFS='-'
 set x $ac_cv_build
 shift
 build_cpu=$1
@@ -3353,21 +3403,21 @@
   $as_echo_n "(cached) " >&6
 else
   if test "x$host_alias" = x; then
   ac_cv_host=$ac_cv_build
 else
   ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
-    as_fn_error "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
+    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
 fi
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
 $as_echo "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
-*) as_fn_error "invalid value of canonical host" "$LINENO" 5;;
+*) as_fn_error $? "invalid value of canonical host" "$LINENO" 5 ;;
 esac
 host=$ac_cv_host
 ac_save_IFS=$IFS; IFS='-'
 set x $ac_cv_host
 shift
 host_cpu=$1
@@ -3677,14 +3727,14 @@
 
 fi
 
 
 test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "no acceptable C compiler found in \$PATH
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "no acceptable C compiler found in \$PATH
+See \`config.log' for more details" "$LINENO" 5 ; }
 
 # Provide some information about the compiler.
 $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
 set X $ac_compile
 ac_compiler=$2
 for ac_option in --version -v -V -qversion; do
@@ -3792,15 +3842,14 @@
 $as_echo "no" >&6; }
 $as_echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-{ as_fn_set_status 77
-as_fn_error "C compiler cannot create executables
-See \`config.log' for more details." "$LINENO" 5; }; }
+as_fn_error 77 "C compiler cannot create executables
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
 $as_echo_n "checking for C compiler default output file name... " >&6; }
@@ -3836,14 +3885,14 @@
     * ) break;;
   esac
 done
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot compute suffix of executables: cannot compile and link
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot compute suffix of executables: cannot compile and link
+See \`config.log' for more details" "$LINENO" 5 ; }
 fi
 rm -f conftest conftest$ac_cv_exeext
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
 $as_echo "$ac_cv_exeext" >&6; }
 
 rm -f conftest.$ac_ext
@@ -3894,15 +3943,15 @@
   else
     if test "$cross_compiling" = maybe; then
 	cross_compiling=yes
     else
 	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run C compiled programs.
+as_fn_error $? "cannot run C compiled programs.
 If you meant to cross compile, use \`--host'.
-See \`config.log' for more details." "$LINENO" 5; }
+See \`config.log' for more details" "$LINENO" 5 ; }
     fi
   fi
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
 $as_echo "$cross_compiling" >&6; }
 
@@ -3947,14 +3996,14 @@
 else
   $as_echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot compute suffix of object files: cannot compile
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot compute suffix of object files: cannot compile
+See \`config.log' for more details" "$LINENO" 5 ; }
 fi
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
 $as_echo "$ac_cv_objext" >&6; }
 OBJEXT=$ac_cv_objext
@@ -4225,13 +4274,13 @@
       $ac_path_SED_found && break 3
     done
   done
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_SED"; then
-    as_fn_error "no acceptable sed could be found in \$PATH" "$LINENO" 5
+    as_fn_error $? "no acceptable sed could be found in \$PATH" "$LINENO" 5
   fi
 else
   ac_cv_path_SED=$SED
 fi
 
 fi
@@ -4301,13 +4350,13 @@
       $ac_path_GREP_found && break 3
     done
   done
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_GREP"; then
-    as_fn_error "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable grep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_GREP=$GREP
 fi
 
 fi
@@ -4367,13 +4416,13 @@
       $ac_path_EGREP_found && break 3
     done
   done
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_EGREP"; then
-    as_fn_error "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable egrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_EGREP=$EGREP
 fi
 
    fi
@@ -4434,13 +4483,13 @@
       $ac_path_FGREP_found && break 3
     done
   done
   done
 IFS=$as_save_IFS
   if test -z "$ac_cv_path_FGREP"; then
-    as_fn_error "no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
+    as_fn_error $? "no acceptable fgrep could be found in $PATH$PATH_SEPARATOR/usr/xpg4/bin" "$LINENO" 5
   fi
 else
   ac_cv_path_FGREP=$FGREP
 fi
 
    fi
@@ -4550,13 +4599,13 @@
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: $LD" >&5
 $as_echo "$LD" >&6; }
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
 $as_echo "no" >&6; }
 fi
-test -z "$LD" && as_fn_error "no acceptable ld found in \$PATH" "$LINENO" 5
+test -z "$LD" && as_fn_error $? "no acceptable ld found in \$PATH" "$LINENO" 5
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking if the linker ($LD) is GNU ld" >&5
 $as_echo_n "checking if the linker ($LD) is GNU ld... " >&6; }
 if test "${lt_cv_prog_gnu_ld+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   # I'd rather use --version here, but apparently some GNU lds only accept -v.
@@ -4752,19 +4801,19 @@
 $as_echo_n "checking the name lister ($NM) interface... " >&6; }
 if test "${lt_cv_nm_interface+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   lt_cv_nm_interface="BSD nm"
   echo "int some_variable = 0;" > conftest.$ac_ext
-  (eval echo "\"\$as_me:4758: $ac_compile\"" >&5)
+  (eval echo "\"\$as_me:4807: $ac_compile\"" >&5)
   (eval "$ac_compile" 2>conftest.err)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:4761: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
+  (eval echo "\"\$as_me:4810: $NM \\\"conftest.$ac_objext\\\"\"" >&5)
   (eval "$NM \"conftest.$ac_objext\"" 2>conftest.err > conftest.out)
   cat conftest.err >&5
-  (eval echo "\"\$as_me:4764: output\"" >&5)
+  (eval echo "\"\$as_me:4813: output\"" >&5)
   cat conftest.out >&5
   if $GREP 'External.*some_variable' conftest.out > /dev/null; then
     lt_cv_nm_interface="MS dumpbin"
   fi
   rm -f conftest*
 fi
@@ -5964,13 +6013,13 @@
     esac
   fi
   rm -rf conftest*
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 5970 "configure"' > conftest.$ac_ext
+  echo '#line 6019 "configure"' > conftest.$ac_ext
   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
     if test "$lt_cv_prog_gnu_ld" = yes; then
@@ -6753,13 +6802,13 @@
 if ac_fn_c_try_cpp "$LINENO"; then :
 
 else
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
@@ -6769,17 +6818,17 @@
 continue
 else
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
   break
 fi
 
     done
     ac_cv_prog_CPP=$CPP
@@ -6812,13 +6861,13 @@
 if ac_fn_c_try_cpp "$LINENO"; then :
 
 else
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
@@ -6828,24 +6877,24 @@
 continue
 else
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
 
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5 ; }
 fi
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
@@ -6968,14 +7017,13 @@
 for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
 		  inttypes.h stdint.h unistd.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -7489,17 +7537,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7495: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7543: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:7499: \$? = $ac_status" >&5
+   echo "$as_me:7547: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -7828,17 +7876,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7834: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7882: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:7838: \$? = $ac_status" >&5
+   echo "$as_me:7886: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -7933,17 +7981,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7939: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:7987: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:7943: \$? = $ac_status" >&5
+   echo "$as_me:7991: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -7988,17 +8036,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:7994: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8042: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:7998: \$? = $ac_status" >&5
+   echo "$as_me:8046: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $ECHO "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -10372,13 +10420,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10378 "configure"
+#line 10426 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -10468,13 +10516,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self_static=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 10474 "configure"
+#line 10522 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -11140,13 +11188,13 @@
 	  if test "$cross_compiling" = yes; then :
   libltdl_cv_need_uscore=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<_LT_EOF
-#line 11146 "configure"
+#line 11194 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -11377,14 +11425,13 @@
 ARGZ_H=
 for ac_func in argz_add argz_append argz_count argz_create_sep argz_insert \
 	argz_next argz_stringify
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 else
   ARGZ_H=argz.h;
@@ -11558,13 +11605,13 @@
 fi
 
 
 if test -n "$with_ltdl_include"; then
   if test -f "$with_ltdl_include/ltdl.h"; then :
   else
-    as_fn_error "invalid ltdl include directory: \`$with_ltdl_include'" "$LINENO" 5
+    as_fn_error $? "invalid ltdl include directory: \`$with_ltdl_include'" "$LINENO" 5
   fi
 else
   with_ltdl_include=no
 fi
 
 
@@ -11574,22 +11621,22 @@
 fi
 
 
 if test -n "$with_ltdl_lib"; then
   if test -f "$with_ltdl_lib/libltdl.la"; then :
   else
-    as_fn_error "invalid ltdl library directory: \`$with_ltdl_lib'" "$LINENO" 5
+    as_fn_error $? "invalid ltdl library directory: \`$with_ltdl_lib'" "$LINENO" 5
   fi
 else
   with_ltdl_lib=no
 fi
 
 case ,$with_included_ltdl,$with_ltdl_include,$with_ltdl_lib, in
   ,yes,no,no,)
 	case $enable_ltdl_convenience in
-  no) as_fn_error "this package needs a convenience libltdl" "$LINENO" 5 ;;
+  no) as_fn_error $? "this package needs a convenience libltdl" "$LINENO" 5  ;;
   "") enable_ltdl_convenience=yes
       ac_configure_args="$ac_configure_args --enable-ltdl-convenience" ;;
 esac
 LIBLTDL='${top_build_prefix}'"${lt_ltdl_dir+$lt_ltdl_dir/}libltdlc.la"
 LTDLDEPS=$LIBLTDL
 LTDLINCL='-I${top_srcdir}'"${lt_ltdl_dir+/$lt_ltdl_dir}"
@@ -11611,13 +11658,13 @@
 
 	LIBLTDL=-lltdl
 	LTDLDEPS=
 	LTDLINCL=
 	;;
   ,no*,no,*)
-	as_fn_error "\`--with-ltdl-include' and \`--with-ltdl-lib' options must be used together" "$LINENO" 5
+	as_fn_error $? "\`--with-ltdl-include' and \`--with-ltdl-lib' options must be used together" "$LINENO" 5
 	;;
   *)	with_included_ltdl=no
 	LIBLTDL="-L$with_ltdl_lib -lltdl"
 	LTDLDEPS=
 	LTDLINCL="-I$with_ltdl_include"
 	;;
@@ -11681,14 +11728,13 @@
 
 for ac_header in unistd.h dl.h sys/dl.h dld.h mach-o/dyld.h dirent.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -11696,14 +11742,13 @@
 
 
 for ac_func in closedir opendir readdir
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 else
 
@@ -11714,14 +11759,13 @@
 done
 
 for ac_func in strlcat strlcpy
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 else
 
@@ -11860,17 +11904,17 @@
 # Reject unsafe characters in $srcdir or the absolute working directory
 # name.  Accept space and tab only in the latter.
 am_lf='
 '
 case `pwd` in
   *[\\\"\#\$\&\'\`$am_lf]*)
-    as_fn_error "unsafe absolute working directory name" "$LINENO" 5;;
+    as_fn_error $? "unsafe absolute working directory name" "$LINENO" 5 ;;
 esac
 case $srcdir in
   *[\\\"\#\$\&\'\`$am_lf\ \	]*)
-    as_fn_error "unsafe srcdir value: \`$srcdir'" "$LINENO" 5;;
+    as_fn_error $? "unsafe srcdir value: \`$srcdir'" "$LINENO" 5 ;;
 esac
 
 # Do `set' in a subshell so we don't clobber the current shell's
 # arguments.  Must try -L first in case configure is actually a
 # symlink; some systems play weird games with the mod time of symlinks
 # (eg FreeBSD returns the mod time of the symlink's containing
@@ -11886,23 +11930,23 @@
       && test "$*" != "X conftest.file $srcdir/configure"; then
 
       # If neither matched, then we have a broken ls.  This can happen
       # if, for instance, CONFIG_SHELL is bash and it inherits a
       # broken ls alias from the environment.  This has actually
       # happened.  Such a system could not be considered "sane".
-      as_fn_error "ls -t appears to fail.  Make sure there is not a broken
+      as_fn_error $? "ls -t appears to fail.  Make sure there is not a broken
 alias in your environment" "$LINENO" 5
    fi
 
    test "$2" = conftest.file
    )
 then
    # Ok.
    :
 else
-   as_fn_error "newly created file is older than distributed files!
+   as_fn_error $? "newly created file is older than distributed files!
 Check your system clock" "$LINENO" 5
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
 $as_echo "yes" >&6; }
 test "$program_prefix" != NONE &&
   program_transform_name="s&^&$program_prefix&;$program_transform_name"
@@ -12134,21 +12178,21 @@
 done
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
 $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
 set x ${MAKE-make}
 ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
-if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat >conftest.make <<\_ACEOF
 SHELL = /bin/sh
 all:
 	@echo '@@@%%%=$(MAKE)=@@@%%%'
 _ACEOF
-# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
+# GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
 case `${MAKE-make} -f conftest.make 2>/dev/null` in
   *@@@%%%=?*=@@@%%%*)
     eval ac_cv_prog_make_${ac_make}_set=yes;;
   *)
     eval ac_cv_prog_make_${ac_make}_set=no;;
 esac
@@ -12238,13 +12282,13 @@
 if test "`cd $srcdir && pwd`" != "`pwd`"; then
   # Use -I$(srcdir) only when $(srcdir) != ., so that make's output
   # is not polluted with repeated "-I."
   am__isrc=' -I$(srcdir)'
   # test to see if srcdir already configured
   if test -f $srcdir/config.status; then
-    as_fn_error "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
+    as_fn_error $? "source directory already configured; run \"make distclean\" there first" "$LINENO" 5
   fi
 fi
 
 # test whether we have cygpath
 if test -z "$CYGPATH_W"; then
   if (cygpath --version) >/dev/null 2>/dev/null; then
@@ -12254,13 +12298,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='collectd'
- VERSION='5.0.5'
+ VERSION='5.1.0'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -12932,14 +12976,14 @@
 
 fi
 
 
 test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "no acceptable C compiler found in \$PATH
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "no acceptable C compiler found in \$PATH
+See \`config.log' for more details" "$LINENO" 5 ; }
 
 # Provide some information about the compiler.
 $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
 set X $ac_compile
 ac_compiler=$2
 for ac_option in --version -v -V -qversion; do
@@ -13214,13 +13258,13 @@
 if ac_fn_c_try_cpp "$LINENO"; then :
 
 else
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
@@ -13230,17 +13274,17 @@
 continue
 else
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
   break
 fi
 
     done
     ac_cv_prog_CPP=$CPP
@@ -13273,13 +13317,13 @@
 if ac_fn_c_try_cpp "$LINENO"; then :
 
 else
   # Broken: fails on valid input.
 continue
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether nonexistent headers
   # can be detected and how.
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ac_nonexistent.h>
@@ -13289,24 +13333,24 @@
 continue
 else
   # Passes both tests.
 ac_preproc_ok=:
 break
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.err conftest.i conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.i conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then :
 
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5 ; }
 fi
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
@@ -13325,21 +13369,21 @@
 fi
 
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether ${MAKE-make} sets \$(MAKE)" >&5
 $as_echo_n "checking whether ${MAKE-make} sets \$(MAKE)... " >&6; }
 set x ${MAKE-make}
 ac_make=`$as_echo "$2" | sed 's/+/p/g; s/[^a-zA-Z0-9_]/_/g'`
-if { as_var=ac_cv_prog_make_${ac_make}_set; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat >conftest.make <<\_ACEOF
 SHELL = /bin/sh
 all:
 	@echo '@@@%%%=$(MAKE)=@@@%%%'
 _ACEOF
-# GNU make sometimes prints "make[1]: Entering...", which would confuse us.
+# GNU make sometimes prints "make[1]: Entering ...", which would confuse us.
 case `${MAKE-make} -f conftest.make 2>/dev/null` in
   *@@@%%%=?*=@@@%%%*)
     eval ac_cv_prog_make_${ac_make}_set=yes;;
   *)
     eval ac_cv_prog_make_${ac_make}_set=no;;
 esac
@@ -13361,13 +13405,13 @@
 else
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether cc understands -c and -o together" >&5
 $as_echo_n "checking whether cc understands -c and -o together... " >&6; }
 fi
 set dummy $CC; ac_cc=`$as_echo "$2" |
 		      sed 's/[^a-zA-Z0-9_]/_/g;s/^[0-9]/_/'`
-if { as_var=ac_cv_prog_cc_${ac_cc}_c_o; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${ac_cv_prog_cc_${ac_cc}_c_o+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
@@ -13601,13 +13645,13 @@
 
 if test -f lex.yy.c; then
   ac_cv_prog_lex_root=lex.yy
 elif test -f lexyy.c; then
   ac_cv_prog_lex_root=lexyy
 else
-  as_fn_error "cannot find output from $LEX; giving up" "$LINENO" 5
+  as_fn_error $? "cannot find output from $LEX; giving up" "$LINENO" 5
 fi
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_lex_root" >&5
 $as_echo "$ac_cv_prog_lex_root" >&6; }
 LEX_OUTPUT_ROOT=$ac_cv_prog_lex_root
 
@@ -13930,15 +13977,12 @@
 
 if test "x$ac_system" = "xSolaris"
 then
 
 $as_echo "#define _POSIX_PTHREAD_SEMANTICS 1" >>confdefs.h
 
-
-$as_echo "#define _REENTRANT 1" >>confdefs.h
-
 fi
 if test "x$ac_system" = "xAIX"
 then
 
 $as_echo "#define _THREAD_SAFE_ERRNO 1" >>confdefs.h
 
@@ -14142,13 +14186,13 @@
 
 ac_header_dirent=no
 for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h; do
   as_ac_Header=`$as_echo "ac_cv_header_dirent_$ac_hdr" | $as_tr_sh`
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_hdr that defines DIR" >&5
 $as_echo_n "checking for $ac_hdr that defines DIR... " >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then :
+if eval "test \"\${$as_ac_Header+set}\"" = set; then :
   $as_echo_n "(cached) " >&6
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <sys/types.h>
 #include <$ac_hdr>
@@ -14169,14 +14213,13 @@
 fi
 rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
 fi
 eval ac_res=\$$as_ac_Header
 	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
 $as_echo "$ac_res" >&6; }
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_hdr" | $as_tr_cpp` 1
 _ACEOF
 
 ac_header_dirent=$ac_hdr; break
 fi
@@ -14411,14 +14454,13 @@
 
 
 for ac_header in stdio.h errno.h math.h stdarg.h syslog.h fcntl.h signal.h assert.h sys/types.h sys/socket.h sys/select.h poll.h netdb.h arpa/inet.h sys/resource.h sys/param.h kstat.h regex.h sys/ioctl.h endian.h sys/isa_defs.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -14674,28 +14716,26 @@
 if test "x$ac_system" = "xDarwin"
 then
 	for ac_header in mach/mach_init.h mach/host_priv.h mach/mach_error.h mach/mach_host.h mach/mach_port.h mach/mach_types.h mach/message.h mach/processor_set.h mach/processor.h mach/processor_info.h mach/task.h mach/thread_act.h mach/vm_region.h mach/vm_map.h mach/vm_prot.h mach/vm_statistics.h mach/kern_return.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
 done
 
 	for ac_header in CoreFoundation/CoreFoundation.h IOKit/IOKitLib.h IOKit/IOTypes.h IOKit/ps/IOPSKeys.h IOKit/IOBSD.h IOKit/storage/IOBlockStorageDriver.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -14746,23 +14786,48 @@
 
 # For hddtemp module
 for ac_header in linux/major.h libgen.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
 done
 
 
+# For md module (Linux only)
+if test "x$ac_system" = "xLinux"
+then
+	for ac_header in linux/raid/md_u.h
+do :
+  ac_fn_c_check_header_compile "$LINENO" "linux/raid/md_u.h" "ac_cv_header_linux_raid_md_u_h" "
+#include <sys/ioctl.h>
+#include <linux/major.h>
+#include <linux/types.h>
+
+"
+if test "x$ac_cv_header_linux_raid_md_u_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LINUX_RAID_MD_U_H 1
+_ACEOF
+ have_linux_raid_md_u_h="yes"
+else
+  have_linux_raid_md_u_h="no"
+fi
+
+done
+
+else
+	have_linux_raid_md_u_h="no"
+fi
+
 # For the battery plugin
 for ac_header in IOKit/ps/IOPowerSources.h
 do :
   ac_fn_c_check_header_compile "$LINENO" "IOKit/ps/IOPowerSources.h" "ac_cv_header_IOKit_ps_IOPowerSources_h" "
 #if HAVE_IOKIT_IOKITLIB_H
 #  include <IOKit/IOKitLib.h>
@@ -14820,14 +14885,13 @@
 #endif
 #if HAVE_SYS_PARAM_H
 # include <sys/param.h>
 #endif
 
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 else
   have_sys_swap_h="no"
@@ -14853,14 +14917,13 @@
 # For the processes plugin
 # For users module
 for ac_header in sys/loadavg.h linux/config.h utmp.h utmpx.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -14941,12 +15004,61 @@
 
 fi
 
 done
 
 
+# For ethstat module
+for ac_header in linux/sockios.h
+do :
+  ac_fn_c_check_header_compile "$LINENO" "linux/sockios.h" "ac_cv_header_linux_sockios_h" "
+#if HAVE_SYS_IOCTL_H
+# include <sys/ioctl.h>
+#endif
+#if HAVE_NET_IF_H
+# include <net/if.h>
+#endif
+
+"
+if test "x$ac_cv_header_linux_sockios_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LINUX_SOCKIOS_H 1
+_ACEOF
+ have_linux_sockios_h="yes"
+else
+  have_linux_sockios_h="no"
+fi
+
+done
+
+for ac_header in linux/ethtool.h
+do :
+  ac_fn_c_check_header_compile "$LINENO" "linux/ethtool.h" "ac_cv_header_linux_ethtool_h" "
+#if HAVE_SYS_IOCTL_H
+# include <sys/ioctl.h>
+#endif
+#if HAVE_NET_IF_H
+# include <net/if.h>
+#endif
+#if HAVE_LINUX_SOCKIOS_H
+# include <linux/sockios.h>
+#endif
+
+"
+if test "x$ac_cv_header_linux_ethtool_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LINUX_ETHTOOL_H 1
+_ACEOF
+ have_linux_ethtool_h="yes"
+else
+  have_linux_ethtool_h="no"
+fi
+
+done
+
+
 # For ipvs module
 have_linux_ip_vs_h="no"
 have_net_ip_vs_h="no"
 have_ip_vs_h="no"
 ip_vs_h_needs_kernel_cflags="no"
 if test "x$ac_system" = "xLinux"
@@ -15114,14 +15226,13 @@
 
 
 for ac_header in pwd.h grp.h sys/un.h ctype.h limits.h xfs/xqm.h fs_info.h fshelp.h paths.h mntent.h mnttab.h sys/fstyp.h sys/fs_types.h sys/mntent.h sys/mnttab.h sys/statfs.h sys/statvfs.h sys/vfs.h sys/vfstab.h kvm.h wordexp.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -15229,25 +15340,12 @@
 
 fi
 
 done
 
 
-for ac_header in netinet/ip_compat.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "netinet/ip_compat.h" "ac_cv_header_netinet_ip_compat_h" "$ac_includes_default"
-if test "x$ac_cv_header_netinet_ip_compat_h" = x""yes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_NETINET_IP_COMPAT_H 1
-_ACEOF
-
-fi
-
-done
-
-
 # For the multimeter plugin
 have_termios_h="no"
 for ac_header in termios.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "termios.h" "ac_cv_header_termios_h" "$ac_includes_default"
 if test "x$ac_cv_header_termios_h" = x""yes; then :
@@ -15477,14 +15575,13 @@
 fi
 
 for ac_func in gettimeofday select strdup strtol getaddrinfo getnameinfo strchr memcpy strstr strcmp strncmp strncpy strlen strncasecmp strcasecmp openlog closelog sysconf setenv if_indextoname
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 done
@@ -15675,14 +15772,14 @@
 _ACEOF
 if ac_fn_c_try_link "$LINENO"; then :
   c_cv_have_strtok_r_reentrant="yes"
 else
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "strtok_r isn't available. Please file a bugreport!
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "strtok_r isn't available. Please file a bugreport!
+See \`config.log' for more details" "$LINENO" 5 ; }
 
 fi
 rm -f core conftest.err conftest.$ac_objext \
     conftest$ac_exeext conftest.$ac_ext
 
 fi
@@ -15697,14 +15794,13 @@
 fi
 
 for ac_func in getpwnam_r getgrnam_r setgroups regcomp regerror regexec regfree
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
 ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-eval as_val=\$$as_ac_var
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 done
@@ -15756,13 +15852,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_socket_socket" >&5
 $as_echo "$ac_cv_lib_socket_socket" >&6; }
 if test "x$ac_cv_lib_socket_socket" = x""yes; then :
   socket_needs_socket="yes"
 else
-  as_fn_error "cannot find socket" "$LINENO" 5
+  as_fn_error $? "cannot find socket" "$LINENO" 5
 fi
 
 fi
 done
 
  if test "x$socket_needs_socket" = "xyes"; then
@@ -15972,13 +16068,13 @@
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_posix4_nanosleep" >&5
 $as_echo "$ac_cv_lib_posix4_nanosleep" >&6; }
 if test "x$ac_cv_lib_posix4_nanosleep" = x""yes; then :
   nanosleep_needs_posix4="yes"
 else
-  as_fn_error "cannot find nanosleep" "$LINENO" 5
+  as_fn_error $? "cannot find nanosleep" "$LINENO" 5
 fi
 
 fi
 
 fi
 done
@@ -16483,14 +16579,14 @@
 if test "${c_cv_have_nan_zero+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <stdlib.h>
 #include <math.h>
@@ -16547,13 +16643,13 @@
 
 else if test "x$nan_type" = "xzero"; then
 
 $as_echo "#define NAN_ZERO_ZERO 1" >>confdefs.h
 
 else
-  as_fn_error "Didn't find out how to statically initialize variables to NAN. Sorry." "$LINENO" 5
+  as_fn_error $? "Didn't find out how to statically initialize variables to NAN. Sorry." "$LINENO" 5
 fi; fi; fi
 
 
 # Check whether --with-fp-layout was given.
 if test "${with_fp_layout+set}" = set; then :
   withval=$with_fp_layout;
@@ -16561,13 +16657,13 @@
  	fp_layout_type="nothing"
  else if test "x$withval" = "xendianflip"; then
  	fp_layout_type="endianflip"
  else if test "x$withval" = "xintswap"; then
  	fp_layout_type="intswap"
  else
- 	as_fn_error "Invalid argument for --with-fp-layout. Valid arguments are: nothing, endianflip, intswap" "$LINENO" 5;
+ 	as_fn_error $? "Invalid argument for --with-fp-layout. Valid arguments are: nothing, endianflip, intswap" "$LINENO" 5 ;
 fi; fi; fi
 
 else
   fp_layout_type="unknown"
 fi
 
@@ -16578,14 +16674,14 @@
 if test "${c_cv_fp_layout_need_nothing+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <stdlib.h>
 #include <stdio.h>
@@ -16651,14 +16747,14 @@
 if test "${c_cv_fp_layout_need_endianflip+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <stdlib.h>
 #include <stdio.h>
@@ -16732,14 +16828,14 @@
 if test "${c_cv_fp_layout_need_intswap+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   if test "$cross_compiling" = yes; then :
   { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
 $as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error "cannot run test program while cross compiling
-See \`config.log' for more details." "$LINENO" 5; }
+as_fn_error $? "cannot run test program while cross compiling
+See \`config.log' for more details" "$LINENO" 5 ; }
 else
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 #include <stdlib.h>
 #include <stdio.h>
@@ -16812,13 +16908,13 @@
 
 else if test "x$fp_layout_type" = "xintswap"; then
 
 $as_echo "#define FP_LAYOUT_NEED_INTSWAP 1" >>confdefs.h
 
 else
-  as_fn_error "Didn't find out how doubles are stored in memory. Sorry." "$LINENO" 5
+  as_fn_error $? "Didn't find out how doubles are stored in memory. Sorry." "$LINENO" 5
 fi; fi; fi
 
 have_getfsstat="no"
 for ac_func in getfsstat
 do :
   ac_fn_c_check_func "$LINENO" "getfsstat" "ac_cv_func_getfsstat"
@@ -17252,13 +17348,12 @@
 
 
 fi
 
 
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "ki_pid" "ac_cv_member_struct_kinfo_proc_ki_pid" "
-$ac_includes_default
 #include <kvm.h>
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <sys/user.h>
 
 "
@@ -17277,13 +17372,12 @@
 else
 
 		have_struct_kinfo_proc_freebsd="no"
 
 fi
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "ki_rssize" "ac_cv_member_struct_kinfo_proc_ki_rssize" "
-$ac_includes_default
 #include <kvm.h>
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <sys/user.h>
 
 "
@@ -17302,13 +17396,12 @@
 else
 
 		have_struct_kinfo_proc_freebsd="no"
 
 fi
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "ki_rusage" "ac_cv_member_struct_kinfo_proc_ki_rusage" "
-$ac_includes_default
 #include <kvm.h>
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <sys/user.h>
 
 "
@@ -17329,13 +17422,12 @@
 		have_struct_kinfo_proc_freebsd="no"
 
 fi
 
 
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "kp_proc" "ac_cv_member_struct_kinfo_proc_kp_proc" "
-$ac_includes_default
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <kvm.h>
 
 "
 if test "x$ac_cv_member_struct_kinfo_proc_kp_proc" = x""yes; then :
@@ -17353,13 +17445,12 @@
 else
 
 		have_struct_kinfo_proc_openbsd="no"
 
 fi
 ac_fn_c_check_member "$LINENO" "struct kinfo_proc" "kp_eproc" "ac_cv_member_struct_kinfo_proc_kp_eproc" "
-$ac_includes_default
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <kvm.h>
 
 "
 if test "x$ac_cv_member_struct_kinfo_proc_kp_eproc" = x""yes; then :
@@ -18144,14 +18236,13 @@
 if test "x$with_kvm_nlist" = "xyes"
 then
 	for ac_header in bsd/nlist.h nlist.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
@@ -19212,14 +19303,13 @@
 if test "x$with_libiptc" = "xpkgconfig"
 then
 	for ac_header in libiptc/libiptc.h libiptc/libip6tc.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 else
   with_libiptc="no (header file missing)"
@@ -19254,13 +19344,12 @@
 
 fi
 # Check for the iptc_init symbol in the library.
 # This could be in iptc or ip4tc
 if test "x$with_libiptc" = "xpkgconfig"
 then
-	SAVE_LIBS="$LIBS"
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for library containing iptc_init" >&5
 $as_echo_n "checking for library containing iptc_init... " >&6; }
 if test "${ac_cv_search_iptc_init+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
   ac_func_search_save_LIBS=$LIBS
@@ -19313,13 +19402,12 @@
   test "$ac_res" = "none required" || LIBS="$ac_res $LIBS"
   with_libiptc="pkgconfig"
 else
   with_libiptc="no"
 fi
 
-	LIBS="$SAVE_LIBS"
 fi
 if test "x$with_libiptc" = "xpkgconfig"
 then
 	with_libiptc="yes"
 fi
 
@@ -19336,14 +19424,13 @@
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "
 #include \"$srcdir/src/owniptc/ipt_kernel_headers.h\"
 
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 else
 
@@ -19871,28 +19958,28 @@
 	then
 		with_libmodbus="no (Don't have pkg-config)"
 	fi
 fi
 if test "x$with_libmodbus" = "xuse_pkgconfig"
 then
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: Checking for modbus using $PKG_CONFIG" >&5
-$as_echo "$as_me: Checking for modbus using $PKG_CONFIG" >&6;}
-	$PKG_CONFIG --exists 'modbus' 2>/dev/null
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: Checking for libmodbus using $PKG_CONFIG" >&5
+$as_echo "$as_me: Checking for libmodbus using $PKG_CONFIG" >&6;}
+	$PKG_CONFIG --exists 'libmodbus' 2>/dev/null
 	if test $? -ne 0
 	then
-		with_libmodbus="no (pkg-config doesn't know modbus)"
+		with_libmodbus="no (pkg-config doesn't know libmodbus)"
 	fi
 fi
 if test "x$with_libmodbus" = "xuse_pkgconfig"
 then
-	with_libmodbus_cflags="`$PKG_CONFIG --cflags 'modbus'`"
+	with_libmodbus_cflags="`$PKG_CONFIG --cflags 'libmodbus'`"
 	if test $? -ne 0
 	then
 		with_libmodbus="no ($PKG_CONFIG failed)"
 	fi
-	with_libmodbus_libs="`$PKG_CONFIG --libs 'modbus'`"
+	with_libmodbus_libs="`$PKG_CONFIG --libs 'libmodbus'`"
 	if test $? -ne 0
 	then
 		with_libmodbus="no ($PKG_CONFIG failed)"
 	fi
 fi
 if test "x$with_libmodbus" = "xuse_pkgconfig"
@@ -19984,12 +20071,139 @@
 	BUILD_WITH_LIBMODBUS_LIBS="$with_libmodbus_libs"
 
 
 fi
 # }}}
 
+# --with-libmongoc {{{
+
+# Check whether --with-libmongoc was given.
+if test "${with_libmongoc+set}" = set; then :
+  withval=$with_libmongoc;
+ if test "x$withval" = "xyes"
+ then
+	 with_libmongoc="yes"
+ else if test "x$withval" = "xno"
+ then
+	 with_libmongoc="no"
+ else
+	 with_libmongoc="yes"
+	 LIBMONGOC_CPPFLAGS="$LIBMONGOC_CPPFLAGS -I$withval/include"
+	 LIBMONGOC_LDFLAGS="$LIBMONGOC_LDFLAGS -L$withval/lib"
+ fi; fi
+
+else
+  with_libmongoc="yes"
+fi
+
+
+SAVE_CPPFLAGS="$CPPFLAGS"
+SAVE_LDFLAGS="$LDFLAGS"
+
+CPPFLAGS="$CPPFLAGS $LIBMONGOC_CPPFLAGS"
+LDFLAGS="$LDFLAGS $LIBMONGOC_LDFLAGS"
+
+if test "x$with_libmongoc" = "xyes"
+then
+	if test "x$LIBMONGOC_CPPFLAGS" != "x"
+	then
+		{ $as_echo "$as_me:${as_lineno-$LINENO}: libmongoc CPPFLAGS: $LIBMONGOC_CPPFLAGS" >&5
+$as_echo "$as_me: libmongoc CPPFLAGS: $LIBMONGOC_CPPFLAGS" >&6;}
+	fi
+	for ac_header in mongo.h
+do :
+  ac_fn_c_check_header_compile "$LINENO" "mongo.h" "ac_cv_header_mongo_h" "#if HAVE_STDINT_H
+# define MONGO_HAVE_STDINT 1
+#else
+# define MONGO_USE_LONG_LONG_INT 1
+#endif
+
+"
+if test "x$ac_cv_header_mongo_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_MONGO_H 1
+_ACEOF
+ with_libmongoc="yes"
+else
+  with_libmongoc="no ('mongo.h' not found)"
+fi
+
+done
+
+fi
+if test "x$with_libmongoc" = "xyes"
+then
+	if test "x$LIBMONGOC_LDFLAGS" != "x"
+	then
+		{ $as_echo "$as_me:${as_lineno-$LINENO}: libmongoc LDFLAGS: $LIBMONGOC_LDFLAGS" >&5
+$as_echo "$as_me: libmongoc LDFLAGS: $LIBMONGOC_LDFLAGS" >&6;}
+	fi
+	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for mongo_run_command in -lmongoc" >&5
+$as_echo_n "checking for mongo_run_command in -lmongoc... " >&6; }
+if test "${ac_cv_lib_mongoc_mongo_run_command+set}" = set; then :
+  $as_echo_n "(cached) " >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lmongoc  $LIBS"
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char mongo_run_command ();
+int
+main ()
+{
+return mongo_run_command ();
+  ;
+  return 0;
+}
+_ACEOF
+if ac_fn_c_try_link "$LINENO"; then :
+  ac_cv_lib_mongoc_mongo_run_command=yes
+else
+  ac_cv_lib_mongoc_mongo_run_command=no
+fi
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_mongoc_mongo_run_command" >&5
+$as_echo "$ac_cv_lib_mongoc_mongo_run_command" >&6; }
+if test "x$ac_cv_lib_mongoc_mongo_run_command" = x""yes; then :
+  with_libmongoc="yes"
+else
+  with_libmongoc="no (symbol 'mongo_run_command' not found)"
+fi
+
+fi
+
+CPPFLAGS="$SAVE_CPPFLAGS"
+LDFLAGS="$SAVE_LDFLAGS"
+
+if test "x$with_libmongoc" = "xyes"
+then
+	BUILD_WITH_LIBMONGOC_CPPFLAGS="$LIBMONGOC_CPPFLAGS"
+	BUILD_WITH_LIBMONGOC_LDFLAGS="$LIBMONGOC_LDFLAGS"
+
+
+fi
+ if test "x$with_libmongoc" = "xyes"; then
+  BUILD_WITH_LIBMONGOC_TRUE=
+  BUILD_WITH_LIBMONGOC_FALSE='#'
+else
+  BUILD_WITH_LIBMONGOC_TRUE='#'
+  BUILD_WITH_LIBMONGOC_FALSE=
+fi
+
+# }}}
+
 # --with-libmysql {{{
 with_mysql_config="mysql_config"
 with_mysql_cflags=""
 with_mysql_libs=""
 
 # Check whether --with-libmysql was given.
@@ -20200,13 +20414,13 @@
 	 if test -d "$withval/include"
 	 then
 		 with_libnetlink_cflags="-I$withval/include"
 		 with_libnetlink_libs="-L$withval/lib -lnetlink"
 		 with_libnetlink="yes"
 	 else
-		 as_fn_error "\"no such directory: $withval/include\"" "$LINENO" 5
+		 as_fn_error $? "\"no such directory: $withval/include\"" "$LINENO" 5
 	 fi
  fi; fi
 
 else
 
  if test "x$ac_system" = "xLinux"
@@ -20232,14 +20446,13 @@
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>
 #include <linux/netlink.h>
 #include <linux/rtnetlink.h>
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 	 with_libnetlink="yes"
 	 break
@@ -20253,43 +20466,35 @@
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "#include <stdio.h>
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>
 "
-eval as_val=\$$as_ac_Header
-   if test "x$as_val" = x""yes; then :
+if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
 done
 
 
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
+#include <stdio.h>
+#include <sys/types.h>
+#include <asm/types.h>
+#include <sys/socket.h>
+#include <linux/netlink.h>
+#include <linux/rtnetlink.h>
 
-                            #include <stdio.h>
-                            #include <sys/types.h>
-                            #include <asm/types.h>
-                            #include <sys/socket.h>
-                            #include <linux/netlink.h>
-                            #include <linux/rtnetlink.h>
-
-int
-main ()
+int main (void)
 {
-
-                                int retval = TCA_STATS2;
-                                return (retval);
-
-
-  ;
-  return 0;
+	int retval = TCA_STATS2;
+	return (retval);
 }
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
 $as_echo "#define HAVE_TCA_STATS2 1" >>confdefs.h
 
@@ -20290,14 +20495,15 @@
 }
 _ACEOF
 if ac_fn_c_try_compile "$LINENO"; then :
 
 $as_echo "#define HAVE_TCA_STATS2 1" >>confdefs.h
 
+
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext;
 
 	cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <stdio.h>
 #include <sys/types.h>
 #include <asm/types.h>
@@ -20365,118 +20571,12 @@
   with_libnetlink="no (symbol 'rtnl_open' not found)"
 fi
 
 fi
 if test "x$with_libnetlink" = "xyes"
 then
-	SAVE_CFLAGS="$CFLAGS"
-	CFLAGS="$CFLAGS $with_libnetlink_cflags"
-
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if function 'rtnl_dump_filter' expects five arguments" >&5
-$as_echo_n "checking if function 'rtnl_dump_filter' expects five arguments... " >&6; }
-if test "${c_cv_rtnl_dump_filter_five_args+set}" = set; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-$ac_includes_default
-#include <asm/types.h>
-#include <sys/socket.h>
-#if HAVE_LIBNETLINK_H
-# include <libnetlink.h>
-#elif HAVE_IPROUTE_LIBNETLINK_H
-# include <iproute/libnetlink.h>
-#elif HAVE_LINUX_LIBNETLINK_H
-# include <linux/libnetlink.h>
-#endif
-
-int
-main ()
-{
-
-if (rtnl_dump_filter(NULL, NULL, NULL, NULL, NULL))
-	return 1;
-return 0;
-
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  c_cv_rtnl_dump_filter_five_args="yes"
-else
-  c_cv_rtnl_dump_filter_five_args="no"
-
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $c_cv_rtnl_dump_filter_five_args" >&5
-$as_echo "$c_cv_rtnl_dump_filter_five_args" >&6; }
-
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if function 'rtnl_dump_filter' expects three arguments" >&5
-$as_echo_n "checking if function 'rtnl_dump_filter' expects three arguments... " >&6; }
-if test "${c_cv_rtnl_dump_filter_three_args+set}" = set; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-$ac_includes_default
-#include <asm/types.h>
-#include <sys/socket.h>
-#if HAVE_LIBNETLINK_H
-# include <libnetlink.h>
-#elif HAVE_IPROUTE_LIBNETLINK_H
-# include <iproute/libnetlink.h>
-#elif HAVE_LINUX_LIBNETLINK_H
-# include <linux/libnetlink.h>
-#endif
-
-int
-main ()
-{
-
-if (rtnl_dump_filter(NULL, NULL, NULL))
-	return 1;
-return 0;
-
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  c_cv_rtnl_dump_filter_three_args="yes"
-else
-  c_cv_rtnl_dump_filter_three_args="no"
-
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $c_cv_rtnl_dump_filter_three_args" >&5
-$as_echo "$c_cv_rtnl_dump_filter_three_args" >&6; }
-
-	CFLAGS="$SAVE_CFLAGS"
-
-	if test "x$c_cv_rtnl_dump_filter_five_args" = "xyes"
-	then
-
-$as_echo "#define RTNL_DUMP_FILTER_FIVE_ARGS 1" >>confdefs.h
-
-	fi
-	if test "x$c_cv_rtnl_dump_filter_three_args" = "xyes"
-	then
-
-$as_echo "#define RTNL_DUMP_FILTER_THREE_ARGS 1" >>confdefs.h
-
-	fi
-
 	BUILD_WITH_LIBNETLINK_CFLAGS="$with_libnetlink_cflags"
 	BUILD_WITH_LIBNETLINK_LIBS="$with_libnetlink_libs"
 
 
 fi
  if test "x$with_libnetlink" = "xyes"; then
@@ -20774,13 +20874,13 @@
 		then
 			liboconfig_CPPFLAGS="$CPPFLAGS -I$withval/include"
 		fi
 	fi
 	if test "x$withval" = "xno"
 	then
-		as_fn_error "\"liboconfig is required\"" "$LINENO" 5
+		as_fn_error $? "\"liboconfig is required\"" "$LINENO" 5
 	fi
 
 else
 
 	with_liboconfig="yes"
 
@@ -21293,13 +21393,13 @@
 # --with-libperl {{{
 perl_interpreter="perl"
 
 # Check whether --with-libperl was given.
 if test "${with_libperl+set}" = set; then :
   withval=$with_libperl;
-	if test -f "$withval" && test -x "$withval"
+ 	if test -x "$withval"
 	then
 		perl_interpreter="$withval"
 		with_libperl="yes"
 	else if test "x$withval" != "xno" && test "x$withval" != "xyes"
 	then
 		LDFLAGS="$LDFLAGS -L$withval/lib"
@@ -23467,13 +23567,13 @@
 		with_libvarnish="use_pkgconfig"
 	else if test -d "$with_libvarnish/lib"
 	then
 		{ $as_echo "$as_me:${as_lineno-$LINENO}: Not checking for libvarnish: Manually configured" >&5
 $as_echo "$as_me: Not checking for libvarnish: Manually configured" >&6;}
 		with_libvarnish_cflags="-I$withval/include"
-		with_libvarnish_libs="-L$withval/lib -lvarnishapi"
+		with_libvarnish_libs="-L$withval/lib -lvarnish -lvarnishcompat -lvarnishapi"
 		with_libvarnish="yes"
 	fi; fi; fi
 
 else
   with_libvarnish="use_pkgconfig"
 fi
@@ -23543,54 +23643,30 @@
 	SAVE_CPPFLAGS="$CPPFLAGS"
 	#SAVE_LDFLAGS="$LDFLAGS"
 
 	CPPFLAGS="$CPPFLAGS $with_libvarnish_cflags"
 	#LDFLAGS="$LDFLAGS $with_libvarnish_libs"
 
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for VSL_OpenStats in -lvarnishapi" >&5
-$as_echo_n "checking for VSL_OpenStats in -lvarnishapi... " >&6; }
-if test "${ac_cv_lib_varnishapi_VSL_OpenStats+set}" = set; then :
-  $as_echo_n "(cached) " >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lvarnishapi $with_libvarnish_libs $LIBS"
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char VSL_OpenStats ();
-int
-main ()
-{
-return VSL_OpenStats ();
-  ;
-  return 0;
-}
+    for ac_header in varnish/vsc.h
+do :
+  ac_fn_c_check_header_mongrel "$LINENO" "varnish/vsc.h" "ac_cv_header_varnish_vsc_h" "$ac_includes_default"
+if test "x$ac_cv_header_varnish_vsc_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_VARNISH_VSC_H 1
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
-  ac_cv_lib_varnishapi_VSL_OpenStats=yes
-else
-  ac_cv_lib_varnishapi_VSL_OpenStats=no
-fi
-rm -f core conftest.err conftest.$ac_objext \
-    conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_lib_varnishapi_VSL_OpenStats" >&5
-$as_echo "$ac_cv_lib_varnishapi_VSL_OpenStats" >&6; }
-if test "x$ac_cv_lib_varnishapi_VSL_OpenStats" = x""yes; then :
-  with_libvarnish="yes"
+
+$as_echo "#define HAVE_VARNISH_V3 1" >>confdefs.h
+
 else
-  with_libvarnish="no (symbol VSL_OpenStats not found)"
+
+$as_echo "#define HAVE_VARNISH_V2 1" >>confdefs.h
+
 fi
 
+done
+
 
 	CPPFLAGS="$SAVE_CPPFLAGS"
 	#LDFLAGS="$SAVE_LDFLAGS"
 fi
 if test "x$with_libvarnish" = "xyes"
 then
@@ -23920,74 +23996,72 @@
 
 
 pkg_failed=no
 { $as_echo "$as_me:${as_lineno-$LINENO}: checking for LIBNOTIFY" >&5
 $as_echo_n "checking for LIBNOTIFY... " >&6; }
 
-if test -n "$PKG_CONFIG"; then
-    if test -n "$LIBNOTIFY_CFLAGS"; then
-        pkg_cv_LIBNOTIFY_CFLAGS="$LIBNOTIFY_CFLAGS"
-    else
-        if test -n "$PKG_CONFIG" && \
+if test -n "$LIBNOTIFY_CFLAGS"; then
+    pkg_cv_LIBNOTIFY_CFLAGS="$LIBNOTIFY_CFLAGS"
+ elif test -n "$PKG_CONFIG"; then
+    if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libnotify\""; } >&5
   ($PKG_CONFIG --exists --print-errors "libnotify") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_LIBNOTIFY_CFLAGS=`$PKG_CONFIG --cflags "libnotify" 2>/dev/null`
 else
   pkg_failed=yes
 fi
-    fi
-else
-	pkg_failed=untried
+ else
+    pkg_failed=untried
 fi
-if test -n "$PKG_CONFIG"; then
-    if test -n "$LIBNOTIFY_LIBS"; then
-        pkg_cv_LIBNOTIFY_LIBS="$LIBNOTIFY_LIBS"
-    else
-        if test -n "$PKG_CONFIG" && \
+if test -n "$LIBNOTIFY_LIBS"; then
+    pkg_cv_LIBNOTIFY_LIBS="$LIBNOTIFY_LIBS"
+ elif test -n "$PKG_CONFIG"; then
+    if test -n "$PKG_CONFIG" && \
     { { $as_echo "$as_me:${as_lineno-$LINENO}: \$PKG_CONFIG --exists --print-errors \"libnotify\""; } >&5
   ($PKG_CONFIG --exists --print-errors "libnotify") 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
   pkg_cv_LIBNOTIFY_LIBS=`$PKG_CONFIG --libs "libnotify" 2>/dev/null`
 else
   pkg_failed=yes
 fi
-    fi
-else
-	pkg_failed=untried
+ else
+    pkg_failed=untried
 fi
 
 
 
 if test $pkg_failed = yes; then
+   	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
 
 if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
         _pkg_short_errors_supported=yes
 else
         _pkg_short_errors_supported=no
 fi
         if test $_pkg_short_errors_supported = yes; then
-	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "libnotify"`
+	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --short-errors --print-errors "libnotify" 2>&1`
         else
-	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libnotify"`
+	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --print-errors "libnotify" 2>&1`
         fi
 	# Put the nasty error message in config.log where it belongs
 	echo "$LIBNOTIFY_PKG_ERRORS" >&5
 
-	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-                if test "x$LIBNOTIFY_PKG_ERRORS" = "x"; then
+	if test "x$LIBNOTIFY_PKG_ERRORS" = "x"; then
 			 with_libnotify="no"
 		 else
 			 with_libnotify="no ($LIBNOTIFY_PKG_ERRORS)"
 		 fi
 elif test $pkg_failed = untried; then
+     	{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
+$as_echo "no" >&6; }
 	if test "x$LIBNOTIFY_PKG_ERRORS" = "x"; then
 			 with_libnotify="no"
 		 else
 			 with_libnotify="no ($LIBNOTIFY_PKG_ERRORS)"
 		 fi
 else
@@ -24130,22 +24204,24 @@
 plugin_cpufreq="no"
 plugin_curl_json="no"
 plugin_curl_xml="no"
 plugin_df="no"
 plugin_disk="no"
 plugin_entropy="no"
+plugin_ethstat="no"
+plugin_fscache="no"
 plugin_interface="no"
 plugin_ipmi="no"
 plugin_ipvs="no"
 plugin_irq="no"
 plugin_libvirt="no"
 plugin_load="no"
 plugin_memory="no"
 plugin_multimeter="no"
 plugin_nfs="no"
-plugin_fscache="no"
+plugin_numa="no"
 plugin_perl="no"
 plugin_processes="no"
 plugin_protocols="no"
 plugin_serial="no"
 plugin_swap="no"
 plugin_tape="no"
@@ -24166,18 +24242,19 @@
 	plugin_conntrack="yes"
 	plugin_contextswitch="yes"
 	plugin_cpu="yes"
 	plugin_cpufreq="yes"
 	plugin_disk="yes"
 	plugin_entropy="yes"
+	plugin_fscache="yes"
 	plugin_interface="yes"
 	plugin_irq="yes"
 	plugin_load="yes"
 	plugin_memory="yes"
 	plugin_nfs="yes"
-	plugin_fscache="yes"
+	plugin_numa="yes"
 	plugin_processes="yes"
 	plugin_protocols="yes"
 	plugin_serial="yes"
 	plugin_swap="yes"
 	plugin_tcpconns="yes"
 	plugin_thermal="yes"
@@ -24202,12 +24279,18 @@
 then
 	plugin_battery="yes"
 	plugin_disk="yes"
 fi
 
 # AIX
+
+if test "x$ac_system" = "xAIX"
+then
+        plugin_tcpconns="yes"
+fi
+
 if test "x$with_perfstat" = "xyes"
 then
 	plugin_cpu="yes"
 	plugin_disk="yes"
 	plugin_memory="yes"
 	plugin_swap="yes"
@@ -24220,12 +24303,13 @@
 	plugin_processes="yes"
 fi
 
 # Solaris
 if test "x$with_kstat" = "xyes"
 then
+	plugin_nfs="yes"
 	plugin_uptime="yes"
 	plugin_zfs_arc="yes"
 fi
 
 if test "x$with_devinfo$with_kstat" = "xyesyes"
 then
@@ -24326,12 +24410,17 @@
 	if test "x$have_statvfs" = "xyes"
 	then
 		plugin_df="yes"
 	fi
 fi
 
+if test "x$have_linux_sockios_h$have_linux_ethtool_h" = "xyesyes"
+then
+	plugin_ethstat="yes"
+fi
+
 if test "x$have_getifaddrs" = "xyes"
 then
 	plugin_interface="yes"
 fi
 
 if test "x$with_libxml2" = "xyes" && test "x$with_libvirt" = "xyes"
@@ -25677,12 +25766,72 @@
     enable_entropy="$enable_plugin"
 
 
 
     enable_plugin="no"
     force="no"
+    # Check whether --enable-ethstat was given.
+if test "${enable_ethstat+set}" = set; then :
+  enableval=$enable_ethstat;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else if test "x$enableval" = "xforce"
+     then
+	     enable_plugin="yes"
+	     force="yes"
+     else
+	     enable_plugin="no (disabled on command line)"
+     fi; fi
+
+else
+
+	 if test "x$enable_all_plugins" = "xauto"
+	 then
+	     if test "x$plugin_ethstat" = "xyes"
+	     then
+		     enable_plugin="yes"
+	     else
+		     enable_plugin="no"
+	     fi
+	 else
+	     enable_plugin="$enable_all_plugins"
+	 fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+	    if test "x$plugin_ethstat" = "xyes" || test "x$force" = "xyes"
+	    then
+
+$as_echo "#define HAVE_PLUGIN_ETHSTAT 1" >>confdefs.h
+
+		    if test "x$plugin_ethstat" != "xyes"
+		    then
+			    dependency_warning="yes"
+		    fi
+	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
+		    dependency_error="yes"
+		    enable_plugin="no (dependency error)"
+	    fi
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_ETHSTAT_TRUE=
+  BUILD_PLUGIN_ETHSTAT_FALSE='#'
+else
+  BUILD_PLUGIN_ETHSTAT_TRUE='#'
+  BUILD_PLUGIN_ETHSTAT_FALSE=
+fi
+
+    enable_ethstat="$enable_plugin"
+
+
+
+    enable_plugin="no"
+    force="no"
     # Check whether --enable-exec was given.
 if test "${enable_exec+set}" = set; then :
   enableval=$enable_exec;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -26997,12 +27146,72 @@
     enable_mbmon="$enable_plugin"
 
 
 
     enable_plugin="no"
     force="no"
+    # Check whether --enable-md was given.
+if test "${enable_md+set}" = set; then :
+  enableval=$enable_md;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else if test "x$enableval" = "xforce"
+     then
+	     enable_plugin="yes"
+	     force="yes"
+     else
+	     enable_plugin="no (disabled on command line)"
+     fi; fi
+
+else
+
+	 if test "x$enable_all_plugins" = "xauto"
+	 then
+	     if test "x$have_linux_raid_md_u_h" = "xyes"
+	     then
+		     enable_plugin="yes"
+	     else
+		     enable_plugin="no"
+	     fi
+	 else
+	     enable_plugin="$enable_all_plugins"
+	 fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+	    if test "x$have_linux_raid_md_u_h" = "xyes" || test "x$force" = "xyes"
+	    then
+
+$as_echo "#define HAVE_PLUGIN_MD 1" >>confdefs.h
+
+		    if test "x$have_linux_raid_md_u_h" != "xyes"
+		    then
+			    dependency_warning="yes"
+		    fi
+	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
+		    dependency_error="yes"
+		    enable_plugin="no (dependency error)"
+	    fi
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_MD_TRUE=
+  BUILD_PLUGIN_MD_FALSE='#'
+else
+  BUILD_PLUGIN_MD_TRUE='#'
+  BUILD_PLUGIN_MD_FALSE=
+fi
+
+    enable_md="$enable_plugin"
+
+
+
+    enable_plugin="no"
+    force="no"
     # Check whether --enable-memcachec was given.
 if test "${enable_memcachec+set}" = set; then :
   enableval=$enable_memcachec;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -27837,12 +28046,72 @@
     enable_ntpd="$enable_plugin"
 
 
 
     enable_plugin="no"
     force="no"
+    # Check whether --enable-numa was given.
+if test "${enable_numa+set}" = set; then :
+  enableval=$enable_numa;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else if test "x$enableval" = "xforce"
+     then
+	     enable_plugin="yes"
+	     force="yes"
+     else
+	     enable_plugin="no (disabled on command line)"
+     fi; fi
+
+else
+
+	 if test "x$enable_all_plugins" = "xauto"
+	 then
+	     if test "x$plugin_numa" = "xyes"
+	     then
+		     enable_plugin="yes"
+	     else
+		     enable_plugin="no"
+	     fi
+	 else
+	     enable_plugin="$enable_all_plugins"
+	 fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+	    if test "x$plugin_numa" = "xyes" || test "x$force" = "xyes"
+	    then
+
+$as_echo "#define HAVE_PLUGIN_NUMA 1" >>confdefs.h
+
+		    if test "x$plugin_numa" != "xyes"
+		    then
+			    dependency_warning="yes"
+		    fi
+	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
+		    dependency_error="yes"
+		    enable_plugin="no (dependency error)"
+	    fi
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_NUMA_TRUE=
+  BUILD_PLUGIN_NUMA_FALSE='#'
+else
+  BUILD_PLUGIN_NUMA_TRUE='#'
+  BUILD_PLUGIN_NUMA_FALSE=
+fi
+
+    enable_numa="$enable_plugin"
+
+
+
+    enable_plugin="no"
+    force="no"
     # Check whether --enable-nut was given.
 if test "${enable_nut+set}" = set; then :
   enableval=$enable_nut;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -30478,12 +30747,72 @@
     enable_wireless="$enable_plugin"
 
 
 
     enable_plugin="no"
     force="no"
+    # Check whether --enable-write_graphite was given.
+if test "${enable_write_graphite+set}" = set; then :
+  enableval=$enable_write_graphite;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else if test "x$enableval" = "xforce"
+     then
+	     enable_plugin="yes"
+	     force="yes"
+     else
+	     enable_plugin="no (disabled on command line)"
+     fi; fi
+
+else
+
+	 if test "x$enable_all_plugins" = "xauto"
+	 then
+	     if test "xyes" = "xyes"
+	     then
+		     enable_plugin="yes"
+	     else
+		     enable_plugin="no"
+	     fi
+	 else
+	     enable_plugin="$enable_all_plugins"
+	 fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+	    if test "xyes" = "xyes" || test "x$force" = "xyes"
+	    then
+
+$as_echo "#define HAVE_PLUGIN_WRITE_GRAPHITE 1" >>confdefs.h
+
+		    if test "xyes" != "xyes"
+		    then
+			    dependency_warning="yes"
+		    fi
+	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
+		    dependency_error="yes"
+		    enable_plugin="no (dependency error)"
+	    fi
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_WRITE_GRAPHITE_TRUE=
+  BUILD_PLUGIN_WRITE_GRAPHITE_FALSE='#'
+else
+  BUILD_PLUGIN_WRITE_GRAPHITE_TRUE='#'
+  BUILD_PLUGIN_WRITE_GRAPHITE_FALSE=
+fi
+
+    enable_write_graphite="$enable_plugin"
+
+
+
+    enable_plugin="no"
+    force="no"
     # Check whether --enable-write_http was given.
 if test "${enable_write_http+set}" = set; then :
   enableval=$enable_write_http;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -30598,12 +30927,72 @@
     enable_write_redis="$enable_plugin"
 
 
 
     enable_plugin="no"
     force="no"
+    # Check whether --enable-write_mongodb was given.
+if test "${enable_write_mongodb+set}" = set; then :
+  enableval=$enable_write_mongodb;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else if test "x$enableval" = "xforce"
+     then
+	     enable_plugin="yes"
+	     force="yes"
+     else
+	     enable_plugin="no (disabled on command line)"
+     fi; fi
+
+else
+
+	 if test "x$enable_all_plugins" = "xauto"
+	 then
+	     if test "x$with_libmongoc" = "xyes"
+	     then
+		     enable_plugin="yes"
+	     else
+		     enable_plugin="no"
+	     fi
+	 else
+	     enable_plugin="$enable_all_plugins"
+	 fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+	    if test "x$with_libmongoc" = "xyes" || test "x$force" = "xyes"
+	    then
+
+$as_echo "#define HAVE_PLUGIN_WRITE_MONGODB 1" >>confdefs.h
+
+		    if test "x$with_libmongoc" != "xyes"
+		    then
+			    dependency_warning="yes"
+		    fi
+	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
+		    dependency_error="yes"
+		    enable_plugin="no (dependency error)"
+	    fi
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_WRITE_MONGODB_TRUE=
+  BUILD_PLUGIN_WRITE_MONGODB_FALSE='#'
+else
+  BUILD_PLUGIN_WRITE_MONGODB_TRUE='#'
+  BUILD_PLUGIN_WRITE_MONGODB_FALSE=
+fi
+
+    enable_write_mongodb="$enable_plugin"
+
+
+
+    enable_plugin="no"
+    force="no"
     # Check whether --enable-xmms was given.
 if test "${enable_xmms+set}" = set; then :
   enableval=$enable_xmms;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -30861,13 +31250,13 @@
 
 
 
 ac_config_files="$ac_config_files src/libcollectdclient/lcc_features.h"
 
 
-ac_config_files="$ac_config_files Makefile src/Makefile src/collectd.conf src/owniptc/Makefile src/libcollectdclient/Makefile src/libcollectdclient/libcollectdclient.pc src/liboconfig/Makefile bindings/Makefile bindings/java/Makefile"
+ac_config_files="$ac_config_files Makefile src/Makefile src/collectd.conf src/libcollectdclient/Makefile src/libcollectdclient/libcollectdclient.pc src/liboconfig/Makefile bindings/Makefile bindings/java/Makefile"
 
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
 # scripts and configure runs, see configure's option --config-cache.
 # It is not useful on other systems.  If it contains results you don't
@@ -30946,12 +31335,13 @@
 test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
 
 DEFS=-DHAVE_CONFIG_H
 
 ac_libobjs=
 ac_ltlibobjs=
+U=
 for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
   # 1. Remove the extension, and $U if already installed.
   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
   ac_i=`$as_echo "$ac_i" | sed "$ac_script"`
   # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
   #    will be set to the directory where LIBOBJS objects are built.
@@ -30961,17 +31351,17 @@
 LIBOBJS=$ac_libobjs
 
 LTLIBOBJS=$ac_ltlibobjs
 
 
 if test -z "${INSTALL_LTDL_TRUE}" && test -z "${INSTALL_LTDL_FALSE}"; then
-  as_fn_error "conditional \"INSTALL_LTDL\" was never defined.
+  as_fn_error $? "conditional \"INSTALL_LTDL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${CONVENIENCE_LTDL_TRUE}" && test -z "${CONVENIENCE_LTDL_FALSE}"; then
-  as_fn_error "conditional \"CONVENIENCE_LTDL\" was never defined.
+  as_fn_error $? "conditional \"CONVENIENCE_LTDL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 LT_CONFIG_H=src/config.h
 
     _ltdl_libobjs=
     _ltdl_ltlibobjs=
@@ -30986,637 +31376,661 @@
     ltdl_LIBOBJS=$_ltdl_libobjs
 
     ltdl_LTLIBOBJS=$_ltdl_ltlibobjs
 
 
 if test -z "${AMDEP_TRUE}" && test -z "${AMDEP_FALSE}"; then
-  as_fn_error "conditional \"AMDEP\" was never defined.
+  as_fn_error $? "conditional \"AMDEP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${am__fastdepCC_TRUE}" && test -z "${am__fastdepCC_FALSE}"; then
-  as_fn_error "conditional \"am__fastdepCC\" was never defined.
+  as_fn_error $? "conditional \"am__fastdepCC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
  if test -n "$EXEEXT"; then
   am__EXEEXT_TRUE=
   am__EXEEXT_FALSE='#'
 else
   am__EXEEXT_TRUE='#'
   am__EXEEXT_FALSE=
 fi
 
 if test -z "${COMPILER_IS_GCC_TRUE}" && test -z "${COMPILER_IS_GCC_FALSE}"; then
-  as_fn_error "conditional \"COMPILER_IS_GCC\" was never defined.
+  as_fn_error $? "conditional \"COMPILER_IS_GCC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${HAVE_PROTOC_C_TRUE}" && test -z "${HAVE_PROTOC_C_FALSE}"; then
-  as_fn_error "conditional \"HAVE_PROTOC_C\" was never defined.
+  as_fn_error $? "conditional \"HAVE_PROTOC_C\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_FEATURE_STANDARDS_TRUE}" && test -z "${BUILD_FEATURE_STANDARDS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_FEATURE_STANDARDS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_FEATURE_STANDARDS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${IP_VS_H_NEEDS_KERNEL_CFLAGS_TRUE}" && test -z "${IP_VS_H_NEEDS_KERNEL_CFLAGS_FALSE}"; then
-  as_fn_error "conditional \"IP_VS_H_NEEDS_KERNEL_CFLAGS\" was never defined.
+  as_fn_error $? "conditional \"IP_VS_H_NEEDS_KERNEL_CFLAGS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBSOCKET_TRUE}" && test -z "${BUILD_WITH_LIBSOCKET_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBSOCKET\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBSOCKET\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBRT_TRUE}" && test -z "${BUILD_WITH_LIBRT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBRT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBRT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPOSIX4_TRUE}" && test -z "${BUILD_WITH_LIBPOSIX4_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBPOSIX4\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBPOSIX4\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBRESOLV_TRUE}" && test -z "${BUILD_WITH_LIBRESOLV_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBRESOLV\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBRESOLV\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_AIX_TRUE}" && test -z "${BUILD_AIX_FALSE}"; then
-  as_fn_error "conditional \"BUILD_AIX\" was never defined.
+  as_fn_error $? "conditional \"BUILD_AIX\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_PERFSTAT_TRUE}" && test -z "${BUILD_WITH_PERFSTAT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_PERFSTAT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_PERFSTAT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKSTAT_TRUE}" && test -z "${BUILD_WITH_LIBKSTAT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBKSTAT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBKSTAT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBDEVINFO_TRUE}" && test -z "${BUILD_WITH_LIBDEVINFO_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBDEVINFO\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBDEVINFO\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBIOKIT_TRUE}" && test -z "${BUILD_WITH_LIBIOKIT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBIOKIT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBIOKIT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKVM_GETPROCS_TRUE}" && test -z "${BUILD_WITH_LIBKVM_GETPROCS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBKVM_GETPROCS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBKVM_GETPROCS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE}" && test -z "${BUILD_WITH_LIBKVM_GETSWAPINFO_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBKVM_GETSWAPINFO\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBKVM_GETSWAPINFO\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKVM_NLIST_TRUE}" && test -z "${BUILD_WITH_LIBKVM_NLIST_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBKVM_NLIST\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBKVM_NLIST\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBKVM_OPENFILES_TRUE}" && test -z "${BUILD_WITH_LIBKVM_OPENFILES_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBKVM_OPENFILES\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBKVM_OPENFILES\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBCREDIS_TRUE}" && test -z "${BUILD_WITH_LIBCREDIS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBCREDIS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBCREDIS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBCURL_TRUE}" && test -z "${BUILD_WITH_LIBCURL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBCURL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBCURL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBDBI_TRUE}" && test -z "${BUILD_WITH_LIBDBI_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBDBI\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBDBI\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBESMTP_TRUE}" && test -z "${BUILD_WITH_LIBESMTP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBESMTP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBESMTP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBGANGLIA_TRUE}" && test -z "${BUILD_WITH_LIBGANGLIA_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBGANGLIA\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBGANGLIA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBGCRYPT_TRUE}" && test -z "${BUILD_WITH_LIBGCRYPT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBGCRYPT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBGCRYPT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_OWN_LIBIPTC_TRUE}" && test -z "${BUILD_WITH_OWN_LIBIPTC_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_OWN_LIBIPTC\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_OWN_LIBIPTC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBIPTC_TRUE}" && test -z "${BUILD_WITH_LIBIPTC_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBIPTC\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBIPTC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_JAVA_TRUE}" && test -z "${BUILD_WITH_JAVA_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_JAVA\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_JAVA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBMEMCACHED_TRUE}" && test -z "${BUILD_WITH_LIBMEMCACHED_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBMEMCACHED\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBMEMCACHED\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
+if test -z "${BUILD_WITH_LIBMONGOC_TRUE}" && test -z "${BUILD_WITH_LIBMONGOC_FALSE}"; then
+  as_fn_error $? "conditional \"BUILD_WITH_LIBMONGOC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBMYSQL_TRUE}" && test -z "${BUILD_WITH_LIBMYSQL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBMYSQL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBMYSQL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBNETLINK_TRUE}" && test -z "${BUILD_WITH_LIBNETLINK_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBNETLINK\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBNETLINK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBNETAPP_TRUE}" && test -z "${BUILD_WITH_LIBNETAPP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBNETAPP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBNETAPP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBNETSNMP_TRUE}" && test -z "${BUILD_WITH_LIBNETSNMP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBNETSNMP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBNETSNMP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_OWN_LIBOCONFIG_TRUE}" && test -z "${BUILD_WITH_OWN_LIBOCONFIG_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_OWN_LIBOCONFIG\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_OWN_LIBOCONFIG\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBOPING_TRUE}" && test -z "${BUILD_WITH_LIBOPING_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBOPING\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBOPING\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPCAP_TRUE}" && test -z "${BUILD_WITH_LIBPCAP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBPCAP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBPCAP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPERL_TRUE}" && test -z "${BUILD_WITH_LIBPERL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBPERL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBPERL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${HAVE_BROKEN_PERL_LOAD_MODULE_TRUE}" && test -z "${HAVE_BROKEN_PERL_LOAD_MODULE_FALSE}"; then
-  as_fn_error "conditional \"HAVE_BROKEN_PERL_LOAD_MODULE\" was never defined.
+  as_fn_error $? "conditional \"HAVE_BROKEN_PERL_LOAD_MODULE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPQ_TRUE}" && test -z "${BUILD_WITH_LIBPQ_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBPQ\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBPQ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBPTHREAD_TRUE}" && test -z "${BUILD_WITH_LIBPTHREAD_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBPTHREAD\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBPTHREAD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBRABBITMQ_TRUE}" && test -z "${BUILD_WITH_LIBRABBITMQ_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBRABBITMQ\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBRABBITMQ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBROUTEROS_TRUE}" && test -z "${BUILD_WITH_LIBROUTEROS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBROUTEROS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBROUTEROS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LM_SENSORS_TRUE}" && test -z "${BUILD_WITH_LM_SENSORS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LM_SENSORS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LM_SENSORS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBSTATGRAB_TRUE}" && test -z "${BUILD_WITH_LIBSTATGRAB_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBSTATGRAB\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBSTATGRAB\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBTOKYOTYRANT_TRUE}" && test -z "${BUILD_WITH_LIBTOKYOTYRANT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBTOKYOTYRANT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBTOKYOTYRANT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBXMMS_TRUE}" && test -z "${BUILD_WITH_LIBXMMS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBXMMS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBXMMS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_WITH_LIBYAJL_TRUE}" && test -z "${BUILD_WITH_LIBYAJL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_WITH_LIBYAJL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_WITH_LIBYAJL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_FEATURE_DEBUG_TRUE}" && test -z "${BUILD_FEATURE_DEBUG_FALSE}"; then
-  as_fn_error "conditional \"BUILD_FEATURE_DEBUG\" was never defined.
+  as_fn_error $? "conditional \"BUILD_FEATURE_DEBUG\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_FEATURE_DAEMON_TRUE}" && test -z "${BUILD_FEATURE_DAEMON_FALSE}"; then
-  as_fn_error "conditional \"BUILD_FEATURE_DAEMON\" was never defined.
+  as_fn_error $? "conditional \"BUILD_FEATURE_DAEMON\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_FEATURE_GETIFADDRS_TRUE}" && test -z "${BUILD_FEATURE_GETIFADDRS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_FEATURE_GETIFADDRS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_FEATURE_GETIFADDRS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_AMQP_TRUE}" && test -z "${BUILD_PLUGIN_AMQP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_AMQP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_AMQP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_APACHE_TRUE}" && test -z "${BUILD_PLUGIN_APACHE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_APACHE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_APACHE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_APCUPS_TRUE}" && test -z "${BUILD_PLUGIN_APCUPS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_APCUPS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_APCUPS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_APPLE_SENSORS_TRUE}" && test -z "${BUILD_PLUGIN_APPLE_SENSORS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_APPLE_SENSORS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_APPLE_SENSORS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ASCENT_TRUE}" && test -z "${BUILD_PLUGIN_ASCENT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_ASCENT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_ASCENT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_BATTERY_TRUE}" && test -z "${BUILD_PLUGIN_BATTERY_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_BATTERY\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_BATTERY\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_BIND_TRUE}" && test -z "${BUILD_PLUGIN_BIND_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_BIND\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_BIND\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CONNTRACK_TRUE}" && test -z "${BUILD_PLUGIN_CONNTRACK_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_CONNTRACK\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_CONNTRACK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CONTEXTSWITCH_TRUE}" && test -z "${BUILD_PLUGIN_CONTEXTSWITCH_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_CONTEXTSWITCH\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_CONTEXTSWITCH\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CPUFREQ_TRUE}" && test -z "${BUILD_PLUGIN_CPUFREQ_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_CPUFREQ\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_CPUFREQ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CPU_TRUE}" && test -z "${BUILD_PLUGIN_CPU_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_CPU\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_CPU\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CSV_TRUE}" && test -z "${BUILD_PLUGIN_CSV_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_CSV\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_CSV\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CURL_TRUE}" && test -z "${BUILD_PLUGIN_CURL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_CURL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_CURL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CURL_JSON_TRUE}" && test -z "${BUILD_PLUGIN_CURL_JSON_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_CURL_JSON\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_CURL_JSON\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_CURL_XML_TRUE}" && test -z "${BUILD_PLUGIN_CURL_XML_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_CURL_XML\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_CURL_XML\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_DBI_TRUE}" && test -z "${BUILD_PLUGIN_DBI_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_DBI\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_DBI\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_DF_TRUE}" && test -z "${BUILD_PLUGIN_DF_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_DF\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_DF\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_DISK_TRUE}" && test -z "${BUILD_PLUGIN_DISK_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_DISK\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_DISK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_DNS_TRUE}" && test -z "${BUILD_PLUGIN_DNS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_DNS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_DNS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_EMAIL_TRUE}" && test -z "${BUILD_PLUGIN_EMAIL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_EMAIL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_EMAIL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ENTROPY_TRUE}" && test -z "${BUILD_PLUGIN_ENTROPY_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_ENTROPY\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_ENTROPY\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
+if test -z "${BUILD_PLUGIN_ETHSTAT_TRUE}" && test -z "${BUILD_PLUGIN_ETHSTAT_FALSE}"; then
+  as_fn_error $? "conditional \"BUILD_PLUGIN_ETHSTAT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_EXEC_TRUE}" && test -z "${BUILD_PLUGIN_EXEC_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_EXEC\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_EXEC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_FILECOUNT_TRUE}" && test -z "${BUILD_PLUGIN_FILECOUNT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_FILECOUNT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_FILECOUNT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_FSCACHE_TRUE}" && test -z "${BUILD_PLUGIN_FSCACHE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_FSCACHE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_FSCACHE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_GMOND_TRUE}" && test -z "${BUILD_PLUGIN_GMOND_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_GMOND\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_GMOND\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_HDDTEMP_TRUE}" && test -z "${BUILD_PLUGIN_HDDTEMP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_HDDTEMP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_HDDTEMP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_INTERFACE_TRUE}" && test -z "${BUILD_PLUGIN_INTERFACE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_INTERFACE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_INTERFACE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_IPMI_TRUE}" && test -z "${BUILD_PLUGIN_IPMI_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_IPMI\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_IPMI\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_IPTABLES_TRUE}" && test -z "${BUILD_PLUGIN_IPTABLES_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_IPTABLES\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_IPTABLES\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_IPVS_TRUE}" && test -z "${BUILD_PLUGIN_IPVS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_IPVS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_IPVS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_IRQ_TRUE}" && test -z "${BUILD_PLUGIN_IRQ_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_IRQ\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_IRQ\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_JAVA_TRUE}" && test -z "${BUILD_PLUGIN_JAVA_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_JAVA\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_JAVA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_LIBVIRT_TRUE}" && test -z "${BUILD_PLUGIN_LIBVIRT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_LIBVIRT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_LIBVIRT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_LOAD_TRUE}" && test -z "${BUILD_PLUGIN_LOAD_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_LOAD\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_LOAD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_LOGFILE_TRUE}" && test -z "${BUILD_PLUGIN_LOGFILE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_LOGFILE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_LOGFILE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_LPAR_TRUE}" && test -z "${BUILD_PLUGIN_LPAR_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_LPAR\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_LPAR\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MADWIFI_TRUE}" && test -z "${BUILD_PLUGIN_MADWIFI_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MADWIFI\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MADWIFI\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_EMPTY_COUNTER_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_EMPTY_COUNTER\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_EMPTY_COUNTER\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_HASHED_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_HASHED_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_HASHED\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_HASHED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_REGEX_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_REGEX_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_REGEX\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_REGEX\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_TIMEDIFF_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_TIMEDIFF\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_TIMEDIFF\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MATCH_VALUE_TRUE}" && test -z "${BUILD_PLUGIN_MATCH_VALUE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MATCH_VALUE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MATCH_VALUE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MBMON_TRUE}" && test -z "${BUILD_PLUGIN_MBMON_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MBMON\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MBMON\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
+if test -z "${BUILD_PLUGIN_MD_TRUE}" && test -z "${BUILD_PLUGIN_MD_FALSE}"; then
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MEMCACHEC_TRUE}" && test -z "${BUILD_PLUGIN_MEMCACHEC_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MEMCACHEC\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MEMCACHEC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MEMCACHED_TRUE}" && test -z "${BUILD_PLUGIN_MEMCACHED_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MEMCACHED\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MEMCACHED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MEMORY_TRUE}" && test -z "${BUILD_PLUGIN_MEMORY_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MEMORY\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MEMORY\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MODBUS_TRUE}" && test -z "${BUILD_PLUGIN_MODBUS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MODBUS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MODBUS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MULTIMETER_TRUE}" && test -z "${BUILD_PLUGIN_MULTIMETER_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MULTIMETER\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MULTIMETER\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_MYSQL_TRUE}" && test -z "${BUILD_PLUGIN_MYSQL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_MYSQL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_MYSQL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NETAPP_TRUE}" && test -z "${BUILD_PLUGIN_NETAPP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NETAPP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NETAPP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NETLINK_TRUE}" && test -z "${BUILD_PLUGIN_NETLINK_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NETLINK\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NETLINK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NETWORK_TRUE}" && test -z "${BUILD_PLUGIN_NETWORK_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NETWORK\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NETWORK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NFS_TRUE}" && test -z "${BUILD_PLUGIN_NFS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NFS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NFS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NGINX_TRUE}" && test -z "${BUILD_PLUGIN_NGINX_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NGINX\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NGINX\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE}" && test -z "${BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NOTIFY_DESKTOP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NOTIFY_DESKTOP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NOTIFY_EMAIL_TRUE}" && test -z "${BUILD_PLUGIN_NOTIFY_EMAIL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NOTIFY_EMAIL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NOTIFY_EMAIL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NTPD_TRUE}" && test -z "${BUILD_PLUGIN_NTPD_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NTPD\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NTPD\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
+if test -z "${BUILD_PLUGIN_NUMA_TRUE}" && test -z "${BUILD_PLUGIN_NUMA_FALSE}"; then
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NUMA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_NUT_TRUE}" && test -z "${BUILD_PLUGIN_NUT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_NUT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_NUT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_OLSRD_TRUE}" && test -z "${BUILD_PLUGIN_OLSRD_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_OLSRD\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_OLSRD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ONEWIRE_TRUE}" && test -z "${BUILD_PLUGIN_ONEWIRE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_ONEWIRE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_ONEWIRE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_OPENVPN_TRUE}" && test -z "${BUILD_PLUGIN_OPENVPN_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_OPENVPN\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_OPENVPN\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ORACLE_TRUE}" && test -z "${BUILD_PLUGIN_ORACLE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_ORACLE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_ORACLE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PERL_TRUE}" && test -z "${BUILD_PLUGIN_PERL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_PERL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_PERL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PINBA_TRUE}" && test -z "${BUILD_PLUGIN_PINBA_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_PINBA\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_PINBA\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PING_TRUE}" && test -z "${BUILD_PLUGIN_PING_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_PING\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_PING\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_POSTGRESQL_TRUE}" && test -z "${BUILD_PLUGIN_POSTGRESQL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_POSTGRESQL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_POSTGRESQL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_POWERDNS_TRUE}" && test -z "${BUILD_PLUGIN_POWERDNS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_POWERDNS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_POWERDNS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PROCESSES_TRUE}" && test -z "${BUILD_PLUGIN_PROCESSES_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_PROCESSES\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_PROCESSES\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PROTOCOLS_TRUE}" && test -z "${BUILD_PLUGIN_PROTOCOLS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_PROTOCOLS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_PROTOCOLS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_PYTHON_TRUE}" && test -z "${BUILD_PLUGIN_PYTHON_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_PYTHON\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_PYTHON\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_REDIS_TRUE}" && test -z "${BUILD_PLUGIN_REDIS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_REDIS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_REDIS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ROUTEROS_TRUE}" && test -z "${BUILD_PLUGIN_ROUTEROS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_ROUTEROS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_ROUTEROS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_RRDCACHED_TRUE}" && test -z "${BUILD_PLUGIN_RRDCACHED_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_RRDCACHED\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_RRDCACHED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_RRDTOOL_TRUE}" && test -z "${BUILD_PLUGIN_RRDTOOL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_RRDTOOL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_RRDTOOL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SENSORS_TRUE}" && test -z "${BUILD_PLUGIN_SENSORS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_SENSORS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_SENSORS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SERIAL_TRUE}" && test -z "${BUILD_PLUGIN_SERIAL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_SERIAL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_SERIAL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SNMP_TRUE}" && test -z "${BUILD_PLUGIN_SNMP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_SNMP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_SNMP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SWAP_TRUE}" && test -z "${BUILD_PLUGIN_SWAP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_SWAP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_SWAP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_SYSLOG_TRUE}" && test -z "${BUILD_PLUGIN_SYSLOG_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_SYSLOG\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_SYSLOG\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TABLE_TRUE}" && test -z "${BUILD_PLUGIN_TABLE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TABLE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TABLE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TAIL_TRUE}" && test -z "${BUILD_PLUGIN_TAIL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TAIL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TAIL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TAPE_TRUE}" && test -z "${BUILD_PLUGIN_TAPE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TAPE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TAPE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_NOTIFICATION_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_NOTIFICATION\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_NOTIFICATION\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_REPLACE_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_REPLACE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_REPLACE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_REPLACE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_SCALE_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_SCALE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_SCALE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_SCALE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_SET_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_SET_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_SET\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_SET\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE}" && test -z "${BUILD_PLUGIN_TARGET_V5UPGRADE_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TARGET_V5UPGRADE\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TARGET_V5UPGRADE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TCPCONNS_TRUE}" && test -z "${BUILD_PLUGIN_TCPCONNS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TCPCONNS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TCPCONNS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TEAMSPEAK2_TRUE}" && test -z "${BUILD_PLUGIN_TEAMSPEAK2_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TEAMSPEAK2\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TEAMSPEAK2\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TED_TRUE}" && test -z "${BUILD_PLUGIN_TED_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TED\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TED\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_THERMAL_TRUE}" && test -z "${BUILD_PLUGIN_THERMAL_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_THERMAL\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_THERMAL\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_THRESHOLD_TRUE}" && test -z "${BUILD_PLUGIN_THRESHOLD_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_THRESHOLD\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_THRESHOLD\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_TOKYOTYRANT_TRUE}" && test -z "${BUILD_PLUGIN_TOKYOTYRANT_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_TOKYOTYRANT\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_TOKYOTYRANT\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_UNIXSOCK_TRUE}" && test -z "${BUILD_PLUGIN_UNIXSOCK_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_UNIXSOCK\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_UNIXSOCK\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_UPTIME_TRUE}" && test -z "${BUILD_PLUGIN_UPTIME_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_UPTIME\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_UPTIME\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_USERS_TRUE}" && test -z "${BUILD_PLUGIN_USERS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_USERS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_USERS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_UUID_TRUE}" && test -z "${BUILD_PLUGIN_UUID_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_UUID\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_UUID\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_VARNISH_TRUE}" && test -z "${BUILD_PLUGIN_VARNISH_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_VARNISH\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_VARNISH\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_VMEM_TRUE}" && test -z "${BUILD_PLUGIN_VMEM_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_VMEM\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_VMEM\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_VSERVER_TRUE}" && test -z "${BUILD_PLUGIN_VSERVER_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_VSERVER\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_VSERVER\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_WIRELESS_TRUE}" && test -z "${BUILD_PLUGIN_WIRELESS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_WIRELESS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_WIRELESS\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
+if test -z "${BUILD_PLUGIN_WRITE_GRAPHITE_TRUE}" && test -z "${BUILD_PLUGIN_WRITE_GRAPHITE_FALSE}"; then
+  as_fn_error $? "conditional \"BUILD_PLUGIN_WRITE_GRAPHITE\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_WRITE_HTTP_TRUE}" && test -z "${BUILD_PLUGIN_WRITE_HTTP_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_WRITE_HTTP\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_WRITE_HTTP\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_WRITE_REDIS_TRUE}" && test -z "${BUILD_PLUGIN_WRITE_REDIS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_WRITE_REDIS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_WRITE_REDIS\" was never defined.
+Usually this means the macro was only invoked conditionally." "$LINENO" 5
+fi
+if test -z "${BUILD_PLUGIN_WRITE_MONGODB_TRUE}" && test -z "${BUILD_PLUGIN_WRITE_MONGODB_FALSE}"; then
+  as_fn_error $? "conditional \"BUILD_PLUGIN_WRITE_MONGODB\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_XMMS_TRUE}" && test -z "${BUILD_PLUGIN_XMMS_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_XMMS\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_XMMS\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 if test -z "${BUILD_PLUGIN_ZFS_ARC_TRUE}" && test -z "${BUILD_PLUGIN_ZFS_ARC_FALSE}"; then
-  as_fn_error "conditional \"BUILD_PLUGIN_ZFS_ARC\" was never defined.
+  as_fn_error $? "conditional \"BUILD_PLUGIN_ZFS_ARC\" was never defined.
 Usually this means the macro was only invoked conditionally." "$LINENO" 5
 fi
 
 : ${CONFIG_STATUS=./config.status}
 ac_write_fail=0
 ac_clean_files_save=$ac_clean_files
@@ -31760,25 +32174,25 @@
 export LANGUAGE
 
 # CDPATH.
 (unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 
-# as_fn_error ERROR [LINENO LOG_FD]
-# ---------------------------------
+# as_fn_error STATUS ERROR [LINENO LOG_FD]
+# ----------------------------------------
 # Output "`basename $0`: error: ERROR" to stderr. If LINENO and LOG_FD are
 # provided, also output the error to LOG_FD, referencing LINENO. Then exit the
-# script with status $?, using 1 if that was 0.
+# script with STATUS, using 1 if that was 0.
 as_fn_error ()
 {
-  as_status=$?; test $as_status -eq 0 && as_status=1
-  if test "$3"; then
-    as_lineno=${as_lineno-"$2"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $1" >&$3
+  as_status=$1; test $as_status -eq 0 && as_status=1
+  if test "$4"; then
+    as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $1" >&2
+  $as_echo "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
 
 # as_fn_set_status STATUS
 # -----------------------
@@ -31968,13 +32382,13 @@
 	    q
 	  }
 	  s/.*/./; q'`
       test -d "$as_dir" && break
     done
     test -z "$as_dirs" || eval "mkdir $as_dirs"
-  } || test -d "$as_dir" || as_fn_error "cannot create directory $as_dir"
+  } || test -d "$as_dir" || as_fn_error $? "cannot create directory $as_dir"
 
 
 } # as_fn_mkdir_p
 if mkdir -p . 2>/dev/null; then
   as_mkdir_p='mkdir -p "$as_dir"'
 else
@@ -32021,14 +32435,14 @@
 
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 # Save the log message, to keep $0 and so on meaningful, and to
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by collectd $as_me 5.0.5, which was
-generated by GNU Autoconf 2.65.  Invocation command line was
+This file was extended by collectd $as_me 5.1.0, which was
+generated by GNU Autoconf 2.67.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
   $ $0 $@
@@ -32087,17 +32501,17 @@
 Report bugs to the package provider."
 
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
 ac_cs_version="\\
-collectd config.status 5.0.5
-configured by $0, generated by GNU Autoconf 2.65,
+collectd config.status 5.1.0
+configured by $0, generated by GNU Autoconf 2.67,
   with options \\"\$ac_cs_config\\"
 
-Copyright (C) 2009 Free Software Foundation, Inc.
+Copyright (C) 2010 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
 
 ac_pwd='$ac_pwd'
 srcdir='$srcdir'
 INSTALL='$INSTALL'
@@ -32109,17 +32523,22 @@
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 # The default lists apply if the user does not specify any file.
 ac_need_defaults=:
 while test $# != 0
 do
   case $1 in
-  --*=*)
+  --*=?*)
     ac_option=`expr "X$1" : 'X\([^=]*\)='`
     ac_optarg=`expr "X$1" : 'X[^=]*=\(.*\)'`
     ac_shift=:
     ;;
+  --*=)
+    ac_option=`expr "X$1" : 'X\([^=]*\)='`
+    ac_optarg=
+    ac_shift=:
+    ;;
   *)
     ac_option=$1
     ac_optarg=$2
     ac_shift=shift
     ;;
   esac
@@ -32135,34 +32554,35 @@
   --debug | --debu | --deb | --de | --d | -d )
     debug=: ;;
   --file | --fil | --fi | --f )
     $ac_shift
     case $ac_optarg in
     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    '') as_fn_error $? "missing file argument" ;;
     esac
     as_fn_append CONFIG_FILES " '$ac_optarg'"
     ac_need_defaults=false;;
   --header | --heade | --head | --hea )
     $ac_shift
     case $ac_optarg in
     *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
     esac
     as_fn_append CONFIG_HEADERS " '$ac_optarg'"
     ac_need_defaults=false;;
   --he | --h)
     # Conflict between --help and --header
-    as_fn_error "ambiguous option: \`$1'
+    as_fn_error $? "ambiguous option: \`$1'
 Try \`$0 --help' for more information.";;
   --help | --hel | -h )
     $as_echo "$ac_cs_usage"; exit ;;
   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
   | -silent | --silent | --silen | --sile | --sil | --si | --s)
     ac_cs_silent=: ;;
 
   # This is an error.
-  -*) as_fn_error "unrecognized option: \`$1'
+  -*) as_fn_error $? "unrecognized option: \`$1'
 Try \`$0 --help' for more information." ;;
 
   *) as_fn_append ac_config_targets " $1"
      ac_need_defaults=false ;;
 
   esac
@@ -32472,20 +32892,19 @@
     "libtool") CONFIG_COMMANDS="$CONFIG_COMMANDS libtool" ;;
     "depfiles") CONFIG_COMMANDS="$CONFIG_COMMANDS depfiles" ;;
     "src/libcollectdclient/lcc_features.h") CONFIG_FILES="$CONFIG_FILES src/libcollectdclient/lcc_features.h" ;;
     "Makefile") CONFIG_FILES="$CONFIG_FILES Makefile" ;;
     "src/Makefile") CONFIG_FILES="$CONFIG_FILES src/Makefile" ;;
     "src/collectd.conf") CONFIG_FILES="$CONFIG_FILES src/collectd.conf" ;;
-    "src/owniptc/Makefile") CONFIG_FILES="$CONFIG_FILES src/owniptc/Makefile" ;;
     "src/libcollectdclient/Makefile") CONFIG_FILES="$CONFIG_FILES src/libcollectdclient/Makefile" ;;
     "src/libcollectdclient/libcollectdclient.pc") CONFIG_FILES="$CONFIG_FILES src/libcollectdclient/libcollectdclient.pc" ;;
     "src/liboconfig/Makefile") CONFIG_FILES="$CONFIG_FILES src/liboconfig/Makefile" ;;
     "bindings/Makefile") CONFIG_FILES="$CONFIG_FILES bindings/Makefile" ;;
     "bindings/java/Makefile") CONFIG_FILES="$CONFIG_FILES bindings/java/Makefile" ;;
 
-  *) as_fn_error "invalid argument: \`$ac_config_target'" "$LINENO" 5;;
+  *) as_fn_error $? "invalid argument: \`$ac_config_target'" "$LINENO" 5 ;;
   esac
 done
 
 
 # If the user did not use the arguments to specify the items to instantiate,
 # then the envvar interface is used.  Set only those that are not.
@@ -32517,13 +32936,13 @@
   tmp=`(umask 077 && mktemp -d "./confXXXXXX") 2>/dev/null` &&
   test -n "$tmp" && test -d "$tmp"
 }  ||
 {
   tmp=./conf$$-$RANDOM
   (umask 077 && mkdir "$tmp")
-} || as_fn_error "cannot create a temporary directory in ." "$LINENO" 5
+} || as_fn_error $? "cannot create a temporary directory in ." "$LINENO" 5
 
 # Set up the scripts for CONFIG_FILES section.
 # No need to generate them if there are no CONFIG_FILES.
 # This happens for instance with `./config.status config.h'.
 if test -n "$CONFIG_FILES"; then
 
@@ -32534,13 +32953,13 @@
 # point, so we can use a bashism as a fallback.
 if test "x$ac_cr" = x; then
   eval ac_cr=\$\'\\r\'
 fi
 ac_cs_awk_cr=`$AWK 'BEGIN { print "a\rb" }' </dev/null 2>/dev/null`
 if test "$ac_cs_awk_cr" = "a${ac_cr}b"; then
-  ac_cs_awk_cr='\r'
+  ac_cs_awk_cr='\\r'
 else
   ac_cs_awk_cr=$ac_cr
 fi
 
 echo 'BEGIN {' >"$tmp/subs1.awk" &&
 _ACEOF
@@ -32548,24 +32967,24 @@
 
 {
   echo "cat >conf$$subs.awk <<_ACEOF" &&
   echo "$ac_subst_vars" | sed 's/.*/&!$&$ac_delim/' &&
   echo "_ACEOF"
 } >conf$$subs.sh ||
-  as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
-ac_delim_num=`echo "$ac_subst_vars" | grep -c '$'`
+  as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
+ac_delim_num=`echo "$ac_subst_vars" | grep -c '^'`
 ac_delim='%!_!# '
 for ac_last_try in false false false false false :; do
   . ./conf$$subs.sh ||
-    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
 
   ac_delim_n=`sed -n "s/.*$ac_delim\$/X/p" conf$$subs.awk | grep -c X`
   if test $ac_delim_n = $ac_delim_num; then
     break
   elif $ac_last_try; then
-    as_fn_error "could not make $CONFIG_STATUS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_STATUS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
 done
 rm -f conf$$subs.sh
 
@@ -32648,26 +33067,34 @@
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 if sed "s/$ac_cr//" < /dev/null > /dev/null 2>&1; then
   sed "s/$ac_cr\$//; s/$ac_cr/$ac_cs_awk_cr/g"
 else
   cat
 fi < "$tmp/subs1.awk" > "$tmp/subs.awk" \
-  || as_fn_error "could not setup config files machinery" "$LINENO" 5
+  || as_fn_error $? "could not setup config files machinery" "$LINENO" 5
 _ACEOF
 
-# VPATH may cause trouble with some makes, so we remove $(srcdir),
-# ${srcdir} and @srcdir@ from VPATH if srcdir is ".", strip leading and
+# VPATH may cause trouble with some makes, so we remove sole $(srcdir),
+# ${srcdir} and @srcdir@ entries from VPATH if srcdir is ".", strip leading and
 # trailing colons and then remove the whole line if VPATH becomes empty
 # (actually we leave an empty line to preserve line numbers).
 if test "x$srcdir" = x.; then
-  ac_vpsub='/^[	 ]*VPATH[	 ]*=/{
-s/:*\$(srcdir):*/:/
-s/:*\${srcdir}:*/:/
-s/:*@srcdir@:*/:/
-s/^\([^=]*=[	 ]*\):*/\1/
+  ac_vpsub='/^[	 ]*VPATH[	 ]*=[	 ]*/{
+h
+s///
+s/^/:/
+s/[	 ]*$/:/
+s/:\$(srcdir):/:/g
+s/:\${srcdir}:/:/g
+s/:@srcdir@:/:/g
+s/^:*//
 s/:*$//
+x
+s/\(=[	 ]*\).*/\1/
+G
+s/\n//
 s/^[^=]*=[	 ]*$//
 }'
 fi
 
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 fi # test -n "$CONFIG_FILES"
@@ -32689,13 +33116,13 @@
 ac_delim='%!_!# '
 for ac_last_try in false false :; do
   ac_t=`sed -n "/$ac_delim/p" confdefs.h`
   if test -z "$ac_t"; then
     break
   elif $ac_last_try; then
-    as_fn_error "could not make $CONFIG_HEADERS" "$LINENO" 5
+    as_fn_error $? "could not make $CONFIG_HEADERS" "$LINENO" 5
   else
     ac_delim="$ac_delim!$ac_delim _$ac_delim!! "
   fi
 done
 
 # For the awk script, D is an array of macro values keyed by name,
@@ -32774,26 +33201,26 @@
   }
 }
 { print }
 _ACAWK
 _ACEOF
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
-  as_fn_error "could not setup config headers machinery" "$LINENO" 5
+  as_fn_error $? "could not setup config headers machinery" "$LINENO" 5
 fi # test -n "$CONFIG_HEADERS"
 
 
 eval set X "  :F $CONFIG_FILES  :H $CONFIG_HEADERS    :C $CONFIG_COMMANDS"
 shift
 for ac_tag
 do
   case $ac_tag in
   :[FHLC]) ac_mode=$ac_tag; continue;;
   esac
   case $ac_mode$ac_tag in
   :[FHL]*:*);;
-  :L* | :C*:*) as_fn_error "invalid tag \`$ac_tag'" "$LINENO" 5;;
+  :L* | :C*:*) as_fn_error $? "invalid tag \`$ac_tag'" "$LINENO" 5 ;;
   :[FH]-) ac_tag=-:-;;
   :[FH]*) ac_tag=$ac_tag:$ac_tag.in;;
   esac
   ac_save_IFS=$IFS
   IFS=:
   set x $ac_tag
@@ -32815,13 +33242,13 @@
 	 # because $ac_f cannot contain `:'.
 	 test -f "$ac_f" ||
 	   case $ac_f in
 	   [\\/$]*) false;;
 	   *) test -f "$srcdir/$ac_f" && ac_f="$srcdir/$ac_f";;
 	   esac ||
-	   as_fn_error "cannot find input file: \`$ac_f'" "$LINENO" 5;;
+	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5 ;;
       esac
       case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
       as_fn_append ac_file_inputs " '$ac_f'"
     done
 
     # Let's still pretend it is `configure' which instantiates (i.e., don't
@@ -32842,13 +33269,13 @@
        sed 's/[\\\\&|]/\\\\&/g'`;; #(
     *) ac_sed_conf_input=$configure_input;;
     esac
 
     case $ac_tag in
     *:-:* | *:-) cat >"$tmp/stdin" \
-      || as_fn_error "could not create $ac_file" "$LINENO" 5 ;;
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5  ;;
     esac
     ;;
   esac
 
   ac_dir=`$as_dirname -- "$ac_file" ||
 $as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
@@ -32979,51 +33406,51 @@
 s&@abs_top_builddir@&$ac_abs_top_builddir&;t t
 s&@INSTALL@&$ac_INSTALL&;t t
 s&@MKDIR_P@&$ac_MKDIR_P&;t t
 $ac_datarootdir_hack
 "
 eval sed \"\$ac_sed_extra\" "$ac_file_inputs" | $AWK -f "$tmp/subs.awk" >$tmp/out \
-  || as_fn_error "could not create $ac_file" "$LINENO" 5
+  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
 
 test -z "$ac_datarootdir_hack$ac_datarootdir_seen" &&
   { ac_out=`sed -n '/\${datarootdir}/p' "$tmp/out"`; test -n "$ac_out"; } &&
   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' "$tmp/out"`; test -z "$ac_out"; } &&
   { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&5
+which seems to be undefined.  Please make sure it is defined" >&5
 $as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
-which seems to be undefined.  Please make sure it is defined." >&2;}
+which seems to be undefined.  Please make sure it is defined" >&2;}
 
   rm -f "$tmp/stdin"
   case $ac_file in
   -) cat "$tmp/out" && rm -f "$tmp/out";;
   *) rm -f "$ac_file" && mv "$tmp/out" "$ac_file";;
   esac \
-  || as_fn_error "could not create $ac_file" "$LINENO" 5
+  || as_fn_error $? "could not create $ac_file" "$LINENO" 5
  ;;
   :H)
   #
   # CONFIG_HEADER
   #
   if test x"$ac_file" != x-; then
     {
       $as_echo "/* $configure_input  */" \
       && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs"
     } >"$tmp/config.h" \
-      || as_fn_error "could not create $ac_file" "$LINENO" 5
+      || as_fn_error $? "could not create $ac_file" "$LINENO" 5
     if diff "$ac_file" "$tmp/config.h" >/dev/null 2>&1; then
       { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
 $as_echo "$as_me: $ac_file is unchanged" >&6;}
     else
       rm -f "$ac_file"
       mv "$tmp/config.h" "$ac_file" \
-	|| as_fn_error "could not create $ac_file" "$LINENO" 5
+	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
     fi
   else
     $as_echo "/* $configure_input  */" \
       && eval '$AWK -f "$tmp/defines.awk"' "$ac_file_inputs" \
-      || as_fn_error "could not create -" "$LINENO" 5
+      || as_fn_error $? "could not create -" "$LINENO" 5
   fi
 # Compute "$ac_file"'s index in $config_headers.
 _am_arg="$ac_file"
 _am_stamp_count=1
 for _am_header in $config_headers :; do
   case $_am_header in
@@ -33802,13 +34229,13 @@
 
 as_fn_exit 0
 _ACEOF
 ac_clean_files=$ac_clean_files_save
 
 test $ac_write_fail = 0 ||
-  as_fn_error "write failure creating $CONFIG_STATUS" "$LINENO" 5
+  as_fn_error $? "write failure creating $CONFIG_STATUS" "$LINENO" 5
 
 
 # configure is writing to config.log, and then calls config.status.
 # config.status does its own redirection, appending to config.log.
 # Unfortunately, on DOS this fails, as config.log is still kept open
 # by configure, so config.status won't be able to write to it; its
@@ -33823,13 +34250,13 @@
     ac_config_status_args="$ac_config_status_args --quiet"
   exec 5>/dev/null
   $SHELL $CONFIG_STATUS $ac_config_status_args || ac_cs_success=false
   exec 5>>config.log
   # Use ||, not &&, to avoid exiting from the if with $? = 1, which
   # would make configure fail if this is the last instruction.
-  $ac_cs_success || as_fn_exit $?
+  $ac_cs_success || as_fn_exit 1
 fi
 
 #
 # CONFIG_SUBDIRS section.
 #
 if test "$no_recursion" != yes; then
@@ -33964,13 +34391,13 @@
 
       { $as_echo "$as_me:${as_lineno-$LINENO}: running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir" >&5
 $as_echo "$as_me: running $SHELL $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_srcdir" >&6;}
       # The eval makes quoting arguments work.
       eval "\$SHELL \"\$ac_sub_configure\" $ac_sub_configure_args \
 	   --cache-file=\"\$ac_sub_cache_file\" --srcdir=\"\$ac_srcdir\"" ||
-	as_fn_error "$ac_sub_configure failed for $ac_dir" "$LINENO" 5
+	as_fn_error $? "$ac_sub_configure failed for $ac_dir" "$LINENO" 5
     fi
 
     cd "$ac_popdir"
   done
 fi
 if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
@@ -34076,12 +34503,13 @@
     dbi . . . . . . . . . $enable_dbi
     df  . . . . . . . . . $enable_df
     disk  . . . . . . . . $enable_disk
     dns . . . . . . . . . $enable_dns
     email . . . . . . . . $enable_email
     entropy . . . . . . . $enable_entropy
+    ethstat . . . . . . . $enable_ethstat
     exec  . . . . . . . . $enable_exec
     filecount . . . . . . $enable_filecount
     fscache . . . . . . . $enable_fscache
     gmond . . . . . . . . $enable_gmond
     hddtemp . . . . . . . $enable_hddtemp
     interface . . . . . . $enable_interface
@@ -34098,12 +34526,13 @@
     match_empty_counter . $enable_match_empty_counter
     match_hashed  . . . . $enable_match_hashed
     match_regex . . . . . $enable_match_regex
     match_timediff  . . . $enable_match_timediff
     match_value . . . . . $enable_match_value
     mbmon . . . . . . . . $enable_mbmon
+    md  . . . . . . . . . $enable_md
     memcachec . . . . . . $enable_memcachec
     memcached . . . . . . $enable_memcached
     memory  . . . . . . . $enable_memory
     modbus  . . . . . . . $enable_modbus
     multimeter  . . . . . $enable_multimeter
     mysql . . . . . . . . $enable_mysql
@@ -34112,12 +34541,13 @@
     network . . . . . . . $enable_network
     nfs . . . . . . . . . $enable_nfs
     nginx . . . . . . . . $enable_nginx
     notify_desktop  . . . $enable_notify_desktop
     notify_email  . . . . $enable_notify_email
     ntpd  . . . . . . . . $enable_ntpd
+    numa  . . . . . . . . $enable_numa
     nut . . . . . . . . . $enable_nut
     olsrd . . . . . . . . $enable_olsrd
     onewire . . . . . . . $enable_onewire
     openvpn . . . . . . . $enable_openvpn
     oracle  . . . . . . . $enable_oracle
     perl  . . . . . . . . $enable_perl
@@ -34156,21 +34586,23 @@
     users . . . . . . . . $enable_users
     uuid  . . . . . . . . $enable_uuid
     varnish . . . . . . . $enable_varnish
     vmem  . . . . . . . . $enable_vmem
     vserver . . . . . . . $enable_vserver
     wireless  . . . . . . $enable_wireless
+    write_graphite  . . . $enable_write_graphite
     write_http  . . . . . $enable_write_http
     write_redis . . . . . $enable_write_redis
+    write_mongodb . . . . $enable_write_mongodb
     xmms  . . . . . . . . $enable_xmms
     zfs_arc . . . . . . . $enable_zfs_arc
 
 EOF
 
 if test "x$dependency_error" = "xyes"; then
-	as_fn_error "\"Some plugins are missing dependencies - see the summary above for details\"" "$LINENO" 5
+	as_fn_error $? "\"Some plugins are missing dependencies - see the summary above for details\"" "$LINENO" 5
 fi
 
 if test "x$dependency_warning" = "xyes"; then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: \"Some plugins seem to have missing dependencies but have been enabled forcibly - see the summary above for details\"" >&5
 $as_echo "$as_me: WARNING: \"Some plugins seem to have missing dependencies but have been enabled forcibly - see the summary above for details\"" >&2;}
 fi
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/configure.in	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/configure.in	2012-04-02 16:04:58.000000000 +0800
@@ -1,8 +1,8 @@
 dnl Process this file with autoconf to produce a configure script.
-AC_INIT(collectd, m4_esyscmd(./version-gen.sh))
+AC_INIT(collectd, [m4_esyscmd(./version-gen.sh)])
 AC_CONFIG_SRCDIR(src/collectd.c)
 AC_CONFIG_HEADERS(src/config.h)
 AC_CONFIG_AUX_DIR([libltdl/config])
 
 m4_ifdef([LT_PACKAGE_VERSION],
 	# libtool >= 2.2
@@ -88,13 +88,12 @@
 	AC_SUBST(KERNEL_CFLAGS)
 fi
 
 if test "x$ac_system" = "xSolaris"
 then
 	AC_DEFINE(_POSIX_PTHREAD_SEMANTICS, 1, [Define to enforce POSIX thread semantics under Solaris.])
-	AC_DEFINE(_REENTRANT,               1, [Define to enable reentrancy interfaces.])
 fi
 if test "x$ac_system" = "xAIX"
 then
 	AC_DEFINE(_THREAD_SAFE_ERRNO, 1, [Define to use the thread-safe version of errno under AIX.])
 fi
 
@@ -297,12 +296,27 @@
 	AC_MSG_RESULT([no])
 fi
 
 # For hddtemp module
 AC_CHECK_HEADERS(linux/major.h libgen.h)
 
+# For md module (Linux only)
+if test "x$ac_system" = "xLinux"
+then
+	AC_CHECK_HEADERS(linux/raid/md_u.h,
+			 [have_linux_raid_md_u_h="yes"],
+			 [have_linux_raid_md_u_h="no"],
+[
+#include <sys/ioctl.h>
+#include <linux/major.h>
+#include <linux/types.h>
+])
+else
+	have_linux_raid_md_u_h="no"
+fi
+
 # For the battery plugin
 AC_CHECK_HEADERS(IOKit/ps/IOPowerSources.h, [], [],
 [
 #if HAVE_IOKIT_IOKITLIB_H
 #  include <IOKit/IOKitLib.h>
 #endif
@@ -386,12 +400,39 @@
 #endif
 #if HAVE_LINUX_IF_H
 # include <linux/if.h>
 #endif
 ])
 
+# For ethstat module
+AC_CHECK_HEADERS(linux/sockios.h,
+    [have_linux_sockios_h="yes"],
+    [have_linux_sockios_h="no"],
+    [
+#if HAVE_SYS_IOCTL_H
+# include <sys/ioctl.h>
+#endif
+#if HAVE_NET_IF_H
+# include <net/if.h>
+#endif
+    ])
+AC_CHECK_HEADERS(linux/ethtool.h,
+    [have_linux_ethtool_h="yes"],
+    [have_linux_ethtool_h="no"],
+    [
+#if HAVE_SYS_IOCTL_H
+# include <sys/ioctl.h>
+#endif
+#if HAVE_NET_IF_H
+# include <net/if.h>
+#endif
+#if HAVE_LINUX_SOCKIOS_H
+# include <linux/sockios.h>
+#endif
+    ])
+
 # For ipvs module
 have_linux_ip_vs_h="no"
 have_net_ip_vs_h="no"
 have_ip_vs_h="no"
 ip_vs_h_needs_kernel_cflags="no"
 if test "x$ac_system" = "xLinux"
@@ -488,14 +529,12 @@
 #endif
 #if HAVE_NETINET_IN_H
 # include <netinet/in.h>
 #endif
 ])
 
-AC_CHECK_HEADERS(netinet/ip_compat.h)
-
 # For the multimeter plugin
 have_termios_h="no"
 AC_CHECK_HEADERS(termios.h, [have_termios_h="yes"])
 
 #
 # Checks for typedefs, structures, and compiler characteristics.
@@ -1183,13 +1222,12 @@
 		have_struct_kinfo_proc_freebsd="yes"
 	],
 	[
 		have_struct_kinfo_proc_freebsd="no"
 	],
 	[
-AC_INCLUDES_DEFAULT
 #include <kvm.h>
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <sys/user.h>
 	])
 
@@ -1200,13 +1238,12 @@
 		have_struct_kinfo_proc_openbsd="yes"
 	],
 	[
 		have_struct_kinfo_proc_openbsd="no"
 	],
 	[
-AC_INCLUDES_DEFAULT
 #include <sys/param.h>
 #include <sys/sysctl.h>
 #include <kvm.h>
 	])
 
 AC_CHECK_MEMBERS([struct udphdr.uh_dport, struct udphdr.uh_sport], [], [],
@@ -1859,18 +1897,16 @@
 	AC_CHECK_TYPES([iptc_handle_t, ip6tc_handle_t], [], [])
 fi
 # Check for the iptc_init symbol in the library.
 # This could be in iptc or ip4tc
 if test "x$with_libiptc" = "xpkgconfig"
 then
-	SAVE_LIBS="$LIBS"
 	AC_SEARCH_LIBS(iptc_init, [iptc ip4tc],
 			[with_libiptc="pkgconfig"],
 			[with_libiptc="no"],
 			[$with_libiptc_libs])
-	LIBS="$SAVE_LIBS"
 fi
 if test "x$with_libiptc" = "xpkgconfig"
 then
 	with_libiptc="yes"
 fi
 
@@ -2157,27 +2193,27 @@
 	then
 		with_libmodbus="no (Don't have pkg-config)"
 	fi
 fi
 if test "x$with_libmodbus" = "xuse_pkgconfig"
 then
-	AC_MSG_NOTICE([Checking for modbus using $PKG_CONFIG])
-	$PKG_CONFIG --exists 'modbus' 2>/dev/null
+	AC_MSG_NOTICE([Checking for libmodbus using $PKG_CONFIG])
+	$PKG_CONFIG --exists 'libmodbus' 2>/dev/null
 	if test $? -ne 0
 	then
-		with_libmodbus="no (pkg-config doesn't know modbus)"
+		with_libmodbus="no (pkg-config doesn't know libmodbus)"
 	fi
 fi
 if test "x$with_libmodbus" = "xuse_pkgconfig"
 then
-	with_libmodbus_cflags="`$PKG_CONFIG --cflags 'modbus'`"
+	with_libmodbus_cflags="`$PKG_CONFIG --cflags 'libmodbus'`"
 	if test $? -ne 0
 	then
 		with_libmodbus="no ($PKG_CONFIG failed)"
 	fi
-	with_libmodbus_libs="`$PKG_CONFIG --libs 'modbus'`"
+	with_libmodbus_libs="`$PKG_CONFIG --libs 'libmodbus'`"
 	if test $? -ne 0
 	then
 		with_libmodbus="no ($PKG_CONFIG failed)"
 	fi
 fi
 if test "x$with_libmodbus" = "xuse_pkgconfig"
@@ -2217,12 +2253,75 @@
 	BUILD_WITH_LIBMODBUS_LIBS="$with_libmodbus_libs"
 	AC_SUBST(BUILD_WITH_LIBMODBUS_CFLAGS)
 	AC_SUBST(BUILD_WITH_LIBMODBUS_LIBS)
 fi
 # }}}
 
+# --with-libmongoc {{{
+AC_ARG_WITH(libmongoc, [AS_HELP_STRING([--with-libmongoc@<:@=PREFIX@:>@], [Path to libmongoc.])],
+[
+ if test "x$withval" = "xyes"
+ then
+	 with_libmongoc="yes"
+ else if test "x$withval" = "xno"
+ then
+	 with_libmongoc="no"
+ else
+	 with_libmongoc="yes"
+	 LIBMONGOC_CPPFLAGS="$LIBMONGOC_CPPFLAGS -I$withval/include"
+	 LIBMONGOC_LDFLAGS="$LIBMONGOC_LDFLAGS -L$withval/lib"
+ fi; fi
+],
+[with_libmongoc="yes"])
+
+SAVE_CPPFLAGS="$CPPFLAGS"
+SAVE_LDFLAGS="$LDFLAGS"
+
+CPPFLAGS="$CPPFLAGS $LIBMONGOC_CPPFLAGS"
+LDFLAGS="$LDFLAGS $LIBMONGOC_LDFLAGS"
+
+if test "x$with_libmongoc" = "xyes"
+then
+	if test "x$LIBMONGOC_CPPFLAGS" != "x"
+	then
+		AC_MSG_NOTICE([libmongoc CPPFLAGS: $LIBMONGOC_CPPFLAGS])
+	fi
+	AC_CHECK_HEADERS(mongo.h,
+	[with_libmongoc="yes"],
+	[with_libmongoc="no ('mongo.h' not found)"],
+[#if HAVE_STDINT_H
+# define MONGO_HAVE_STDINT 1
+#else
+# define MONGO_USE_LONG_LONG_INT 1
+#endif
+])
+fi
+if test "x$with_libmongoc" = "xyes"
+then
+	if test "x$LIBMONGOC_LDFLAGS" != "x"
+	then
+		AC_MSG_NOTICE([libmongoc LDFLAGS: $LIBMONGOC_LDFLAGS])
+	fi
+	AC_CHECK_LIB(mongoc, mongo_run_command,
+	[with_libmongoc="yes"],
+	[with_libmongoc="no (symbol 'mongo_run_command' not found)"])
+fi
+
+CPPFLAGS="$SAVE_CPPFLAGS"
+LDFLAGS="$SAVE_LDFLAGS"
+
+if test "x$with_libmongoc" = "xyes"
+then
+	BUILD_WITH_LIBMONGOC_CPPFLAGS="$LIBMONGOC_CPPFLAGS"
+	BUILD_WITH_LIBMONGOC_LDFLAGS="$LIBMONGOC_LDFLAGS"
+	AC_SUBST(BUILD_WITH_LIBMONGOC_CPPFLAGS)
+	AC_SUBST(BUILD_WITH_LIBMONGOC_LDFLAGS)
+fi
+AM_CONDITIONAL(BUILD_WITH_LIBMONGOC, test "x$with_libmongoc" = "xyes")
+# }}}
+
 # --with-libmysql {{{
 with_mysql_config="mysql_config"
 with_mysql_cflags=""
 with_mysql_libs=""
 AC_ARG_WITH(libmysql, [AS_HELP_STRING([--with-libmysql@<:@=PREFIX@:>@], [Path to libmysql.])],
 [
@@ -2357,26 +2456,27 @@
 	AC_CHECK_HEADERS(linux/gen_stats.h linux/pkt_sched.h, [], [],
 [#include <stdio.h>
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>])
 
-        AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-                           [
-                            #include <stdio.h>
-                            #include <sys/types.h>
-                            #include <asm/types.h>
-                            #include <sys/socket.h>
-                            #include <linux/netlink.h>
-                            #include <linux/rtnetlink.h>
-                            ], [
-                                int retval = TCA_STATS2;
-                                return (retval);
-                                ]
-                            )],
-                            [AC_DEFINE([HAVE_TCA_STATS2], [1], [True if the enum-member TCA_STATS2 exists])])
+	AC_COMPILE_IFELSE(
+[#include <stdio.h>
+#include <sys/types.h>
+#include <asm/types.h>
+#include <sys/socket.h>
+#include <linux/netlink.h>
+#include <linux/rtnetlink.h>
+
+int main (void)
+{
+	int retval = TCA_STATS2;
+	return (retval);
+}],
+	[AC_DEFINE([HAVE_TCA_STATS2], 1, [True if the enum-member TCA_STATS2 exists])]
+	[]);
 
 	AC_COMPILE_IFELSE(
 [#include <stdio.h>
 #include <sys/types.h>
 #include <asm/types.h>
 #include <sys/socket.h>
@@ -2399,82 +2499,12 @@
 		     [with_libnetlink="yes"],
 		     [with_libnetlink="no (symbol 'rtnl_open' not found)"],
 		     [$with_libnetlink_libs])
 fi
 if test "x$with_libnetlink" = "xyes"
 then
-	SAVE_CFLAGS="$CFLAGS"
-	CFLAGS="$CFLAGS $with_libnetlink_cflags"
-
-	AC_CACHE_CHECK(
-		[if function 'rtnl_dump_filter' expects five arguments],
-		[c_cv_rtnl_dump_filter_five_args],
-		AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-				[
-AC_INCLUDES_DEFAULT
-#include <asm/types.h>
-#include <sys/socket.h>
-#if HAVE_LIBNETLINK_H
-# include <libnetlink.h>
-#elif HAVE_IPROUTE_LIBNETLINK_H
-# include <iproute/libnetlink.h>
-#elif HAVE_LINUX_LIBNETLINK_H
-# include <linux/libnetlink.h>
-#endif
-				],
-				[
-if (rtnl_dump_filter(NULL, NULL, NULL, NULL, NULL))
-	return 1;
-return 0;
-				]
-			)],
-			[c_cv_rtnl_dump_filter_five_args="yes"],
-			[c_cv_rtnl_dump_filter_five_args="no"]
-		)
-	)
-
-	AC_CACHE_CHECK(
-		[if function 'rtnl_dump_filter' expects three arguments],
-		[c_cv_rtnl_dump_filter_three_args],
-		AC_COMPILE_IFELSE([AC_LANG_PROGRAM(
-				[
-AC_INCLUDES_DEFAULT
-#include <asm/types.h>
-#include <sys/socket.h>
-#if HAVE_LIBNETLINK_H
-# include <libnetlink.h>
-#elif HAVE_IPROUTE_LIBNETLINK_H
-# include <iproute/libnetlink.h>
-#elif HAVE_LINUX_LIBNETLINK_H
-# include <linux/libnetlink.h>
-#endif
-				],
-				[
-if (rtnl_dump_filter(NULL, NULL, NULL))
-	return 1;
-return 0;
-				]
-			)],
-			[c_cv_rtnl_dump_filter_three_args="yes"],
-			[c_cv_rtnl_dump_filter_three_args="no"]
-		)
-	)
-
-	CFLAGS="$SAVE_CFLAGS"
-
-	if test "x$c_cv_rtnl_dump_filter_five_args" = "xyes"
-	then
-		AC_DEFINE(RTNL_DUMP_FILTER_FIVE_ARGS, 1,
-				[Define to 1 if function 'rtnl_dump_filter' expects five arguments.])
-	fi
-	if test "x$c_cv_rtnl_dump_filter_three_args" = "xyes"
-	then
-		AC_DEFINE(RTNL_DUMP_FILTER_THREE_ARGS, 1,
-				[Define to 1 if function 'rtnl_dump_filter' expects three arguments.])
-	fi
-
 	BUILD_WITH_LIBNETLINK_CFLAGS="$with_libnetlink_cflags"
 	BUILD_WITH_LIBNETLINK_LIBS="$with_libnetlink_libs"
 	AC_SUBST(BUILD_WITH_LIBNETLINK_CFLAGS)
 	AC_SUBST(BUILD_WITH_LIBNETLINK_LIBS)
 fi
 AM_CONDITIONAL(BUILD_WITH_LIBNETLINK, test "x$with_libnetlink" = "xyes")
@@ -2876,13 +2906,13 @@
 # }}}
 
 # --with-libperl {{{
 perl_interpreter="perl"
 AC_ARG_WITH(libperl, [AS_HELP_STRING([--with-libperl@<:@=PREFIX@:>@], [Path to libperl.])],
 [
-	if test -f "$withval" && test -x "$withval"
+ 	if test -x "$withval"
 	then
 		perl_interpreter="$withval"
 		with_libperl="yes"
 	else if test "x$withval" != "xno" && test "x$withval" != "xyes"
 	then
 		LDFLAGS="$LDFLAGS -L$withval/lib"
@@ -4024,13 +4054,13 @@
 	then
 		with_libvarnish="use_pkgconfig"
 	else if test -d "$with_libvarnish/lib"
 	then
 		AC_MSG_NOTICE([Not checking for libvarnish: Manually configured])
 		with_libvarnish_cflags="-I$withval/include"
-		with_libvarnish_libs="-L$withval/lib -lvarnishapi"
+		with_libvarnish_libs="-L$withval/lib -lvarnish -lvarnishcompat -lvarnishapi"
 		with_libvarnish="yes"
 	fi; fi; fi
 ],
 [with_libvarnish="use_pkgconfig"])
 
 # configure using pkg-config
@@ -4083,16 +4113,15 @@
 	SAVE_CPPFLAGS="$CPPFLAGS"
 	#SAVE_LDFLAGS="$LDFLAGS"
 
 	CPPFLAGS="$CPPFLAGS $with_libvarnish_cflags"
 	#LDFLAGS="$LDFLAGS $with_libvarnish_libs"
 
-	AC_CHECK_LIB(varnishapi, VSL_OpenStats,
-		     [with_libvarnish="yes"],
-		     [with_libvarnish="no (symbol VSL_OpenStats not found)"],
-		     [$with_libvarnish_libs])
+    AC_CHECK_HEADERS(varnish/vsc.h,
+        [AC_DEFINE([HAVE_VARNISH_V3], [1], [Varnish 3 API support])],
+        [AC_DEFINE([HAVE_VARNISH_V2], [1], [Varnish 2 API support])])
 
 	CPPFLAGS="$SAVE_CPPFLAGS"
 	#LDFLAGS="$SAVE_LDFLAGS"
 fi
 if test "x$with_libvarnish" = "xyes"
 then
@@ -4444,22 +4473,24 @@
 plugin_cpufreq="no"
 plugin_curl_json="no"
 plugin_curl_xml="no"
 plugin_df="no"
 plugin_disk="no"
 plugin_entropy="no"
+plugin_ethstat="no"
+plugin_fscache="no"
 plugin_interface="no"
 plugin_ipmi="no"
 plugin_ipvs="no"
 plugin_irq="no"
 plugin_libvirt="no"
 plugin_load="no"
 plugin_memory="no"
 plugin_multimeter="no"
 plugin_nfs="no"
-plugin_fscache="no"
+plugin_numa="no"
 plugin_perl="no"
 plugin_processes="no"
 plugin_protocols="no"
 plugin_serial="no"
 plugin_swap="no"
 plugin_tape="no"
@@ -4480,18 +4511,19 @@
 	plugin_conntrack="yes"
 	plugin_contextswitch="yes"
 	plugin_cpu="yes"
 	plugin_cpufreq="yes"
 	plugin_disk="yes"
 	plugin_entropy="yes"
+	plugin_fscache="yes"
 	plugin_interface="yes"
 	plugin_irq="yes"
 	plugin_load="yes"
 	plugin_memory="yes"
 	plugin_nfs="yes"
-	plugin_fscache="yes"
+	plugin_numa="yes"
 	plugin_processes="yes"
 	plugin_protocols="yes"
 	plugin_serial="yes"
 	plugin_swap="yes"
 	plugin_tcpconns="yes"
 	plugin_thermal="yes"
@@ -4516,12 +4548,18 @@
 then
 	plugin_battery="yes"
 	plugin_disk="yes"
 fi
 
 # AIX
+
+if test "x$ac_system" = "xAIX"
+then
+        plugin_tcpconns="yes"
+fi
+
 if test "x$with_perfstat" = "xyes"
 then
 	plugin_cpu="yes"
 	plugin_disk="yes"
 	plugin_memory="yes"
 	plugin_swap="yes"
@@ -4534,12 +4572,13 @@
 	plugin_processes="yes"
 fi
 
 # Solaris
 if test "x$with_kstat" = "xyes"
 then
+	plugin_nfs="yes"
 	plugin_uptime="yes"
 	plugin_zfs_arc="yes"
 fi
 
 if test "x$with_devinfo$with_kstat" = "xyesyes"
 then
@@ -4640,12 +4679,17 @@
 	if test "x$have_statvfs" = "xyes"
 	then
 		plugin_df="yes"
 	fi
 fi
 
+if test "x$have_linux_sockios_h$have_linux_ethtool_h" = "xyesyes"
+then
+	plugin_ethstat="yes"
+fi
+
 if test "x$have_getifaddrs" = "xyes"
 then
 	plugin_interface="yes"
 fi
 
 if test "x$with_libxml2" = "xyes" && test "x$with_libvirt" = "xyes"
@@ -4748,12 +4792,13 @@
 AC_PLUGIN([dbi],         [$with_libdbi],       [General database statistics])
 AC_PLUGIN([df],          [$plugin_df],         [Filesystem usage statistics])
 AC_PLUGIN([disk],        [$plugin_disk],       [Disk usage statistics])
 AC_PLUGIN([dns],         [$with_libpcap],      [DNS traffic analysis])
 AC_PLUGIN([email],       [yes],                [EMail statistics])
 AC_PLUGIN([entropy],     [$plugin_entropy],    [Entropy statistics])
+AC_PLUGIN([ethstat],     [$plugin_ethstat],    [Stats from NIC driver])
 AC_PLUGIN([exec],        [yes],                [Execution of external programs])
 AC_PLUGIN([filecount],   [yes],                [Count files in directories])
 AC_PLUGIN([fscache],     [$plugin_fscache],    [fscache statistics])
 AC_PLUGIN([gmond],       [$with_libganglia],   [Ganglia plugin])
 AC_PLUGIN([hddtemp],     [yes],                [Query hddtempd])
 AC_PLUGIN([interface],   [$plugin_interface],  [Interface traffic statistics])
@@ -4770,12 +4815,13 @@
 AC_PLUGIN([match_empty_counter], [yes],        [The empty counter match])
 AC_PLUGIN([match_hashed], [yes],               [The hashed match])
 AC_PLUGIN([match_regex], [yes],                [The regex match])
 AC_PLUGIN([match_timediff], [yes],             [The timediff match])
 AC_PLUGIN([match_value], [yes],                [The value match])
 AC_PLUGIN([mbmon],       [yes],                [Query mbmond])
+AC_PLUGIN([md],          [$have_linux_raid_md_u_h], [md (Linux software RAID) devices])
 AC_PLUGIN([memcachec],   [$with_libmemcached], [memcachec statistics])
 AC_PLUGIN([memcached],   [yes],                [memcached statistics])
 AC_PLUGIN([memory],      [$plugin_memory],     [Memory usage])
 AC_PLUGIN([modbus],      [$with_libmodbus],    [Modbus plugin])
 AC_PLUGIN([multimeter],  [$plugin_multimeter], [Read multimeter values])
 AC_PLUGIN([mysql],       [$with_libmysql],     [MySQL statistics])
@@ -4784,12 +4830,13 @@
 AC_PLUGIN([network],     [yes],                [Network communication plugin])
 AC_PLUGIN([nfs],         [$plugin_nfs],        [NFS statistics])
 AC_PLUGIN([nginx],       [$with_libcurl],      [nginx statistics])
 AC_PLUGIN([notify_desktop], [$with_libnotify], [Desktop notifications])
 AC_PLUGIN([notify_email], [$with_libesmtp],    [Email notifier])
 AC_PLUGIN([ntpd],        [yes],                [NTPd statistics])
+AC_PLUGIN([numa],        [$plugin_numa],       [NUMA virtual memory statistics])
 AC_PLUGIN([nut],         [$with_libupsclient], [Network UPS tools statistics])
 AC_PLUGIN([olsrd],       [yes],                [olsrd statistics])
 AC_PLUGIN([onewire],     [$with_libowcapi],    [OneWire sensor statistics])
 AC_PLUGIN([openvpn],     [yes],                [OpenVPN client statistics])
 AC_PLUGIN([oracle],      [$with_oracle],       [Oracle plugin])
 AC_PLUGIN([perl],        [$plugin_perl],       [Embed a Perl interpreter])
@@ -4829,14 +4876,16 @@
 AC_PLUGIN([users],       [$plugin_users],      [User statistics])
 AC_PLUGIN([uuid],        [yes],                [UUID as hostname plugin])
 AC_PLUGIN([varnish],     [$with_libvarnish],   [Varnish cache statistics])
 AC_PLUGIN([vmem],        [$plugin_vmem],       [Virtual memory statistics])
 AC_PLUGIN([vserver],     [$plugin_vserver],    [Linux VServer statistics])
 AC_PLUGIN([wireless],    [$plugin_wireless],   [Wireless statistics])
+AC_PLUGIN([write_graphite], [yes],             [Graphite / Carbon output plugin])
 AC_PLUGIN([write_http],  [$with_libcurl],      [HTTP output plugin])
 AC_PLUGIN([write_redis], [$with_libcredis],    [Redis output plugin])
+AC_PLUGIN([write_mongodb], [$with_libmongoc],  [MongoDB output plugin])
 AC_PLUGIN([xmms],        [$with_libxmms],      [XMMS statistics])
 AC_PLUGIN([zfs_arc],     [$plugin_zfs_arc],    [ZFS ARC statistics])
 
 dnl Default configuration file
 # Load either syslog or logfile
 LOAD_PLUGIN_SYSLOG=""
@@ -4973,13 +5022,13 @@
 AC_SUBST(LCC_VERSION_PATCH)
 AC_SUBST(LCC_VERSION_EXTRA)
 AC_SUBST(LCC_VERSION_STRING)
 
 AC_CONFIG_FILES(src/libcollectdclient/lcc_features.h)
 
-AC_OUTPUT(Makefile src/Makefile src/collectd.conf src/owniptc/Makefile src/libcollectdclient/Makefile src/libcollectdclient/libcollectdclient.pc src/liboconfig/Makefile bindings/Makefile bindings/java/Makefile)
+AC_OUTPUT(Makefile src/Makefile src/collectd.conf src/libcollectdclient/Makefile src/libcollectdclient/libcollectdclient.pc src/liboconfig/Makefile bindings/Makefile bindings/java/Makefile)
 
 if test "x$with_librrd" = "xyes" \
 	&& test "x$librrd_threadsafe" != "xyes"
 then
 	with_librrd="yes (warning: librrd is not thread-safe)"
 fi
@@ -5075,12 +5124,13 @@
     dbi . . . . . . . . . $enable_dbi
     df  . . . . . . . . . $enable_df
     disk  . . . . . . . . $enable_disk
     dns . . . . . . . . . $enable_dns
     email . . . . . . . . $enable_email
     entropy . . . . . . . $enable_entropy
+    ethstat . . . . . . . $enable_ethstat
     exec  . . . . . . . . $enable_exec
     filecount . . . . . . $enable_filecount
     fscache . . . . . . . $enable_fscache
     gmond . . . . . . . . $enable_gmond
     hddtemp . . . . . . . $enable_hddtemp
     interface . . . . . . $enable_interface
@@ -5097,12 +5147,13 @@
     match_empty_counter . $enable_match_empty_counter
     match_hashed  . . . . $enable_match_hashed
     match_regex . . . . . $enable_match_regex
     match_timediff  . . . $enable_match_timediff
     match_value . . . . . $enable_match_value
     mbmon . . . . . . . . $enable_mbmon
+    md  . . . . . . . . . $enable_md
     memcachec . . . . . . $enable_memcachec
     memcached . . . . . . $enable_memcached
     memory  . . . . . . . $enable_memory
     modbus  . . . . . . . $enable_modbus
     multimeter  . . . . . $enable_multimeter
     mysql . . . . . . . . $enable_mysql
@@ -5111,12 +5162,13 @@
     network . . . . . . . $enable_network
     nfs . . . . . . . . . $enable_nfs
     nginx . . . . . . . . $enable_nginx
     notify_desktop  . . . $enable_notify_desktop
     notify_email  . . . . $enable_notify_email
     ntpd  . . . . . . . . $enable_ntpd
+    numa  . . . . . . . . $enable_numa
     nut . . . . . . . . . $enable_nut
     olsrd . . . . . . . . $enable_olsrd
     onewire . . . . . . . $enable_onewire
     openvpn . . . . . . . $enable_openvpn
     oracle  . . . . . . . $enable_oracle
     perl  . . . . . . . . $enable_perl
@@ -5155,14 +5207,16 @@
     users . . . . . . . . $enable_users
     uuid  . . . . . . . . $enable_uuid
     varnish . . . . . . . $enable_varnish
     vmem  . . . . . . . . $enable_vmem
     vserver . . . . . . . $enable_vserver
     wireless  . . . . . . $enable_wireless
+    write_graphite  . . . $enable_write_graphite
     write_http  . . . . . $enable_write_http
     write_redis . . . . . $enable_write_redis
+    write_mongodb . . . . $enable_write_mongodb
     xmms  . . . . . . . . $enable_xmms
     zfs_arc . . . . . . . $enable_zfs_arc
 
 EOF
 
 if test "x$dependency_error" = "xyes"; then
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collectd_network.py /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collectd_network.py
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collectd_network.py	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collectd_network.py	2012-04-02 16:04:58.000000000 +0800
@@ -1,29 +1,25 @@
 #! /usr/bin/env python
 # -*- coding: utf-8 -*-
 # vim: fileencoding=utf-8
 #
 # Copyright © 2009 Adrian Perez <aperez@igalia.com>
 #
-# Distributed under terms of the GPLv2 license or newer.
-# 
-# Frank Marien (frank@apsu.be) 6 Sep 2012
-# - quick fixes for 5.1 binary protocol
-# - updated to python 3
-# - fixed for larger packet sizes (possible on lo interface)
-# - fixed comment typo (decode_network_string decodes a string)
+# Distributed under terms of the GPLv2 license.
 
 """
 Collectd network protocol implementation.
 """
 
-import socket,struct,sys
+import socket
+import struct
+
 try:
-  from io import StringIO
+    from cStringIO import StringIO
 except ImportError:
-  from cStringIO import StringIO
+    from StringIO import StringIO
 
 from datetime import datetime
 from copy import deepcopy
 
 
 DEFAULT_PORT = 25826
@@ -32,35 +28,32 @@
 DEFAULT_IPv4_GROUP = "239.192.74.66"
 """Default IPv4 multicast group"""
 
 DEFAULT_IPv6_GROUP = "ff18::efc0:4a42"
 """Default IPv6 multicast group"""
 
-HR_TIME_DIV = (2.0**30)
+
 
 # Message kinds
 TYPE_HOST            = 0x0000
 TYPE_TIME            = 0x0001
-TYPE_TIME_HR         = 0x0008
 TYPE_PLUGIN          = 0x0002
 TYPE_PLUGIN_INSTANCE = 0x0003
 TYPE_TYPE            = 0x0004
 TYPE_TYPE_INSTANCE   = 0x0005
 TYPE_VALUES          = 0x0006
 TYPE_INTERVAL        = 0x0007
-TYPE_INTERVAL_HR     = 0x0009
 
 # For notifications
 TYPE_MESSAGE         = 0x0100
 TYPE_SEVERITY        = 0x0101
 
 # DS kinds
 DS_TYPE_COUNTER      = 0
 DS_TYPE_GAUGE        = 1
-DS_TYPE_DERIVE       = 2
-DS_TYPE_ABSOLUTE     = 3
+
 
 header = struct.Struct("!2H")
 number = struct.Struct("!Q")
 short  = struct.Struct("!H")
 double = struct.Struct("<d")
 
@@ -73,50 +67,42 @@
 
     # Check whether our expected packet size is the reported one
     assert ((valskip + 1) * nvalues + short.size + header.size) == plen
     assert double.size == number.size
 
     result = []
-    for dstype in buf[header.size+short.size:off]:
+    for dstype in map(ord, buf[header.size+short.size:off]):
         if dstype == DS_TYPE_COUNTER:
             result.append((dstype, number.unpack_from(buf, off)[0]))
             off += valskip
         elif dstype == DS_TYPE_GAUGE:
             result.append((dstype, double.unpack_from(buf, off)[0]))
             off += valskip
-        elif dstype == DS_TYPE_DERIVE:
-            result.append((dstype, number.unpack_from(buf, off)[0]))
-            off += valskip
-        elif dstype == DS_TYPE_ABSOLUTE:
-            result.append((dstype, number.unpack_from(buf, off)[0]))
-            off += valskip
         else:
             raise ValueError("DS type %i unsupported" % dstype)
 
     return result
 
 
 def decode_network_number(ptype, plen, buf):
-    """Decodes a number (64-bit unsigned) from collectd network format.
+    """Decodes a number (64-bit unsigned) in collectd network format.
     """
     return number.unpack_from(buf, header.size)[0]
 
 
 def decode_network_string(msgtype, plen, buf):
-    """Decodes a string from collectd network format.
+    """Decodes a floating point number (64-bit) in collectd network format.
     """
     return buf[header.size:plen-1]
 
 
 # Mapping of message types to decoding functions.
 _decoders = {
     TYPE_VALUES         : decode_network_values,
     TYPE_TIME           : decode_network_number,
-    TYPE_TIME_HR        : decode_network_number,
     TYPE_INTERVAL       : decode_network_number,
-    TYPE_INTERVAL_HR    : decode_network_number,
     TYPE_HOST           : decode_network_string,
     TYPE_PLUGIN         : decode_network_string,
     TYPE_PLUGIN_INSTANCE: decode_network_string,
     TYPE_TYPE           : decode_network_string,
     TYPE_TYPE_INSTANCE  : decode_network_string,
     TYPE_MESSAGE        : decode_network_string,
@@ -149,35 +137,35 @@
     plugin = None
     plugininstance = None
     type = None
     typeinstance = None
 
     def __init__(self, **kw):
-        [setattr(self, k, v) for k, v in kw.items()]
+        [setattr(self, k, v) for k, v in kw.iteritems()]
 
     @property
     def datetime(self):
         return datetime.fromtimestamp(self.time)
 
     @property
     def source(self):
         buf = StringIO()
         if self.host:
-            buf.write(str(self.host))
+            buf.write(self.host)
         if self.plugin:
             buf.write("/")
-            buf.write(str(self.plugin))
+            buf.write(self.plugin)
         if self.plugininstance:
             buf.write("/")
-            buf.write(str(self.plugininstance))
+            buf.write(self.plugininstance)
         if self.type:
             buf.write("/")
-            buf.write(str(self.type))
+            buf.write(self.type)
         if self.typeinstance:
             buf.write("/")
-            buf.write(str(self.typeinstance))
+            buf.write(self.typeinstance)
         return buf.getvalue()
 
     def __str__(self):
         return "[%i] %s" % (self.time, self.source)
 
 
@@ -224,18 +212,14 @@
     vl = Values()
     nt = Notification()
 
     for kind, data in iterable:
         if kind == TYPE_TIME:
             vl.time = nt.time = data
-        elif kind == TYPE_TIME_HR:
-            vl.time = nt.time = data / HR_TIME_DIV
         elif kind == TYPE_INTERVAL:
             vl.interval = data
-        elif kind == TYPE_INTERVAL_HR:
-            vl.interval = data / HR_TIME_DIV
         elif kind == TYPE_HOST:
             vl.host = nt.host = data
         elif kind == TYPE_PLUGIN:
             vl.plugin = nt.plugin = data
         elif kind == TYPE_PLUGIN_INSTANCE:
             vl.plugininstance = nt.plugininstance = data
@@ -261,13 +245,13 @@
     group address, and handles reading data when it arrives.
     """
     addr = None
     host = None
     port = DEFAULT_PORT
 
-    BUFFER_SIZE = 16384
+    BUFFER_SIZE = 1024
 
 
     def __init__(self, host=None, port=DEFAULT_PORT, multicast=False):
         if host is None:
             multicast = True
             host = DEFAULT_IPv4_GROUP
@@ -324,9 +308,11 @@
 
     def interpret(self, iterable=None):
         """Interprets a sequence
         """
         if iterable is None:
             iterable = self.decode()
-        if isinstance(iterable, str):
+        if isinstance(iterable, basestring):
             iterable = self.decode(iterable)
         return interpret_opcodes(iterable)
+
+
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/bin/graph.cgi /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/bin/graph.cgi
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/bin/graph.cgi	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/bin/graph.cgi	2012-04-02 16:04:58.000000000 +0800
@@ -1,216 +1,334 @@
 #!/usr/bin/perl
 
+# Copyright (C) 2008-2011  Florian Forster
+# Copyright (C) 2011       noris network AG
+#
+# This program is free software; you can redistribute it and/or modify it under
+# the terms of the GNU General Public License as published by the Free Software
+# Foundation; only version 2 of the License is applicable.
+#
+# This program is distributed in the hope that it will be useful, but WITHOUT
+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
+# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
+# details.
+#
+# You should have received a copy of the GNU General Public License along with
+# this program; if not, write to the Free Software Foundation, Inc.,
+# 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
+#
+# Authors:
+#   Florian "octo" Forster <octo at collectd.org>
+
 use strict;
 use warnings;
-use lib ('../lib');
 use utf8;
+use vars (qw($BASE_DIR));
+
+BEGIN
+{
+  if (defined $ENV{'SCRIPT_FILENAME'})
+  {
+    if ($ENV{'SCRIPT_FILENAME'} =~ m{^(/.+)/bin/[^/]+$})
+    {
+      $::BASE_DIR = $1;
+      unshift (@::INC, "$::BASE_DIR/lib");
+    }
+  }
+}
 
-use FindBin ('$RealBin');
 use Carp (qw(confess cluck));
 use CGI (':cgi');
 use RRDs ();
+use File::Temp (':POSIX');
 
 use Collectd::Graph::Config (qw(gc_read_config gc_get_scalar));
 use Collectd::Graph::TypeLoader (qw(tl_load_type));
 
 use Collectd::Graph::Common (qw(sanitize_type get_selected_files
       epoch_to_rfc1123 flush_files));
 use Collectd::Graph::Type ();
 
-our $Debug = param ('debug');
-our $Begin = param ('begin');
-our $End = param ('end');
-our $GraphWidth = param ('width');
-our $GraphHeight = param ('height');
-our $Index = param ('index') || 0;
-our $OutputFormat = 'PNG';
-our $ContentType = 'image/png';
-
-if (param ('format'))
-{
-  my $temp = param ('format') || '';
-  $temp = uc ($temp);
-
-  if ($temp =~ m/^(PNG|SVG|EPS|PDF)$/)
-  {
-    $OutputFormat = $temp;
-
-    if ($OutputFormat eq 'SVG') { $ContentType = 'image/svg+xml'; }
-    elsif ($OutputFormat eq 'EPS') { $ContentType = 'image/eps'; }
-    elsif ($OutputFormat eq 'PDF') { $ContentType = 'application/pdf'; }
+sub base_dir
+{
+  if (defined $::BASE_DIR)
+  {
+    return ($::BASE_DIR);
   }
-}
 
-if ($Debug)
-{
-  print <<HTTP;
-Content-Type: text/plain
+  if (!defined ($ENV{'SCRIPT_FILENAME'}))
+  {
+    return;
+  }
 
-HTTP
-}
+  if ($ENV{'SCRIPT_FILENAME'} =~ m{^(/.+)/bin/[^/]+$})
+  {
+    $::BASE_DIR = $1;
+    return ($::BASE_DIR);
+  }
 
-gc_read_config ("$RealBin/../etc/collection.conf");
+  return;
+}
 
-if ($GraphWidth)
+sub lib_dir
 {
-  $GraphWidth =~ s/\D//g;
+  my $base = base_dir ();
+
+  if ($base)
+  {
+    return "$base/lib";
+  }
+  else
+  {
+    return "../lib";
+  }
 }
 
-if (!$GraphWidth)
+sub sysconf_dir
 {
-  $GraphWidth = gc_get_scalar ('GraphWidth', 400);
+  my $base = base_dir ();
+
+  if ($base)
+  {
+    return "$base/etc";
+  }
+  else
+  {
+    return "../etc";
+  }
 }
 
-if ($GraphHeight)
+sub init
 {
-  $GraphHeight =~ s/\D//g;
+  my $lib_dir = lib_dir ();
+  my $sysconf_dir = sysconf_dir ();
+
+  if (!grep { $lib_dir eq $_ } (@::INC))
+  {
+    unshift (@::INC, $lib_dir);
+  }
+
+  gc_read_config ("$sysconf_dir/collection.conf");
 }
 
-if (!$GraphHeight)
+sub main
 {
-  $GraphHeight = gc_get_scalar ('GraphHeight', 100);
-}
+  my $Begin = param ('begin');
+  my $End = param ('end');
+  my $GraphWidth = param ('width');
+  my $GraphHeight = param ('height');
+  my $Index = param ('index') || 0;
+  my $OutputFormat = 'PNG';
+  my $ContentType = 'image/png';
 
-{ # Sanitize begin and end times
-  $End ||= 0;
-  $Begin ||= 0;
+  init ();
 
-  if ($End =~ m/\D/)
+  if (param ('format'))
   {
-    $End = 0;
+    my $temp = param ('format') || '';
+    $temp = uc ($temp);
+
+    if ($temp =~ m/^(PNG|SVG|EPS|PDF)$/)
+    {
+      $OutputFormat = $temp;
+
+      if ($OutputFormat eq 'SVG') { $ContentType = 'image/svg+xml'; }
+      elsif ($OutputFormat eq 'EPS') { $ContentType = 'image/eps'; }
+      elsif ($OutputFormat eq 'PDF') { $ContentType = 'application/pdf'; }
+    }
   }
 
-  if (!$Begin || !($Begin =~ m/^-?([1-9][0-9]*)$/))
+  if (param ('debug'))
   {
-    $Begin = -86400;
+    print <<HTTP;
+Content-Type: text/plain
+
+HTTP
+    $ContentType = 'text/plain';
   }
 
-  if ($Begin < 0)
+  if ($GraphWidth)
   {
-    if ($End)
-    {
-      $Begin = $End + $Begin;
-    }
-    else
-    {
-      $Begin = time () + $Begin;
-    }
+    $GraphWidth =~ s/\D//g;
   }
 
-  if ($Begin < 0)
+  if (!$GraphWidth)
   {
-    $Begin = time () - 86400;
+    $GraphWidth = gc_get_scalar ('GraphWidth', 400);
   }
 
-  if (($End > 0) && ($Begin > $End))
+  if ($GraphHeight)
   {
-    my $temp = $End;
-    $End = $Begin;
-    $Begin = $temp;
+    $GraphHeight =~ s/\D//g;
   }
-}
 
-my $type = param ('type') or die;
-my $obj;
+  if (!$GraphHeight)
+  {
+    $GraphHeight = gc_get_scalar ('GraphHeight', 100);
+  }
 
-$obj = tl_load_type ($type);
-if (!$obj)
-{
-  confess ("tl_load_type ($type) failed");
-}
+  { # Sanitize begin and end times
+    $End ||= 0;
+    $Begin ||= 0;
 
-$type = ucfirst (lc ($type));
-$type =~ s/_([A-Za-z])/\U$1\E/g;
-$type = sanitize_type ($type);
+    if ($End =~ m/\D/)
+    {
+      $End = 0;
+    }
 
-my $files = get_selected_files ();
-if ($Debug)
-{
-  require Data::Dumper;
-  print STDOUT Data::Dumper->Dump ([$files], ['files']);
-}
-for (@$files)
-{
-  $obj->addFiles ($_);
-}
+    if (!$Begin || !($Begin =~ m/^-?([1-9][0-9]*)$/))
+    {
+      $Begin = -86400;
+    }
 
-my $expires = time ();
-# IF (End is `now')
-#    OR (Begin is before `now' AND End is after `now')
-if (($End == 0) || (($Begin <= $expires) && ($End >= $expires)))
-{
-  # 400 == width in pixels
-  my $timespan;
+    if ($Begin < 0)
+    {
+      if ($End)
+      {
+        $Begin = $End + $Begin;
+      }
+      else
+      {
+        $Begin = time () + $Begin;
+      }
+    }
+
+    if ($Begin < 0)
+    {
+      $Begin = time () - 86400;
+    }
+
+    if (($End > 0) && ($Begin > $End))
+    {
+      my $temp = $End;
+      $End = $Begin;
+      $Begin = $temp;
+    }
+  }
+
+  my $type = param ('type') or die;
+  my $obj;
 
-  if ($End == 0)
+  $obj = tl_load_type ($type);
+  if (!$obj)
   {
-    $timespan = $expires - $Begin;
+    confess ("tl_load_type ($type) failed");
   }
-  else
+
+  $type = ucfirst (lc ($type));
+  $type =~ s/_([A-Za-z])/\U$1\E/g;
+  $type = sanitize_type ($type);
+
+  my $files = get_selected_files ();
+  if (param ('debug'))
   {
-    $timespan = $End - $Begin;
+    require Data::Dumper;
+    print Data::Dumper->Dump ([$files], ['files']);
+  }
+  for (@$files)
+  {
+    $obj->addFiles ($_);
+  }
+
+  my $expires = time ();
+# IF (End is `now')
+#    OR (Begin is before `now' AND End is after `now')
+  if (($End == 0) || (($Begin <= $expires) && ($End >= $expires)))
+  {
+    # 400 == width in pixels
+    my $timespan;
+
+    if ($End == 0)
+    {
+      $timespan = $expires - $Begin;
+    }
+    else
+    {
+      $timespan = $End - $Begin;
+    }
+    $expires += int ($timespan / 400.0);
   }
-  $expires += int ($timespan / 400.0);
-}
 # IF (End is not `now')
 #    AND (End is before `now')
 # ==> Graph will never change again!
-elsif (($End > 0) && ($End < $expires))
-{
-  $expires += (366 * 86400);
-}
-elsif ($Begin > $expires)
-{
-  $expires = $Begin;
-}
+  elsif (($End > 0) && ($End < $expires))
+  {
+    $expires += (366 * 86400);
+  }
+  elsif ($Begin > $expires)
+  {
+    $expires = $Begin;
+  }
 
 # Send FLUSH command to the daemon if necessary and possible.
-flush_files ($files,
+  flush_files ($files,
     begin => $Begin,
     end => $End,
     addr => gc_get_scalar ('UnixSockAddr', undef),
     interval => gc_get_scalar ('Interval', 10));
 
-print STDOUT header (-Content_type => $ContentType,
-  -Last_Modified => epoch_to_rfc1123 ($obj->getLastModified ()),
-  -Expires => epoch_to_rfc1123 ($expires));
-
-if ($Debug)
-{
-  print "\$expires = $expires;\n";
-}
+  print header (-Content_type => $ContentType,
+    -Last_Modified => epoch_to_rfc1123 ($obj->getLastModified ()),
+    -Expires => epoch_to_rfc1123 ($expires));
 
-my $args = $obj->getRRDArgs (0 + $Index);
-
-if ($Debug)
-{
-  require Data::Dumper;
-  print STDOUT Data::Dumper->Dump ([$obj], ['obj']);
-  print STDOUT join (",\n", @$args) . "\n";
-  print STDOUT "Last-Modified: " . epoch_to_rfc1123 ($obj->getLastModified ()) . "\n";
-}
-else
-{
-  my @timesel = ();
+  if (param ('debug'))
+  {
+    print "\$expires = $expires;\n";
+  }
 
-  if ($End) # $Begin is always true
+  my $args = $obj->getRRDArgs (0 + $Index);
+  if (param ('debug'))
   {
-    @timesel = ('-s', $Begin, '-e', $End);
+    require Data::Dumper;
+    print Data::Dumper->Dump ([$obj], ['obj']);
+    print join (",\n", @$args) . "\n";
+    print "Last-Modified: " . epoch_to_rfc1123 ($obj->getLastModified ()) . "\n";
   }
   else
   {
-    @timesel = ('-s', $Begin); # End is implicitely `now'.
-  }
+    my @timesel = ();
+    my $tmpfile = tmpnam ();
+    my $status;
 
-  $| = 1;
-  RRDs::graph ('-', '-a', $OutputFormat, '--width', $GraphWidth, '--height', $GraphHeight, @timesel, @$args);
-  if (my $err = RRDs::error ())
-  {
-    print STDERR "RRDs::graph failed: $err\n";
-    exit (1);
+    if ($End) # $Begin is always true
+    {
+      @timesel = ('-s', $Begin, '-e', $End);
+    }
+    else
+    {
+      @timesel = ('-s', $Begin); # End is implicitely `now'.
+    }
+
+    if (-S "/var/run/rrdcached.sock" && -w "/var/run/rrdcached.sock")
+    {
+      $ENV{"RRDCACHED_ADDRESS"} = "/var/run/rrdcached.sock";
+    }
+    unlink ($tmpfile);
+    RRDs::graph ($tmpfile, '-a', $OutputFormat, '--width', $GraphWidth, '--height', $GraphHeight, @timesel, @$args);
+    if (my $err = RRDs::error ())
+    {
+      print STDERR "RRDs::graph failed: $err\n";
+      exit (1);
+    }
+
+    $status = open (IMG, '<', $tmpfile) or die ("open ($tmpfile): $!");
+    if (!$status)
+    {
+      print STDERR "graph.cgi: Unable to open temporary file \"$tmpfile\" for reading: $!\n";
+    }
+    else
+    {
+      local $/ = undef;
+      while (my $data = <IMG>)
+      {
+        print STDOUT $data;
+      }
+
+      close (IMG);
+      unlink ($tmpfile);
+    }
   }
-}
+} # sub main
 
-exit (0);
+main ();
 
 # vim: set shiftwidth=2 softtabstop=2 tabstop=8 :
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/bin/index.cgi /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/bin/index.cgi
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/bin/index.cgi	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/bin/index.cgi	2012-04-02 16:04:58.000000000 +0800
@@ -1,9 +1,10 @@
 #!/usr/bin/perl
 
-# Copyright (C) 2008  Florian octo Forster <octo at verplant.org>
+# Copyright (C) 2008-2011  Florian Forster
+# Copyright (C) 2011       noris network AG
 #
 # This program is free software; you can redistribute it and/or modify it under
 # the terms of the GNU General Public License as published by the Free Software
 # Foundation; only version 2 of the License is applicable.
 #
 # This program is distributed in the hope that it will be useful, but WITHOUT
@@ -11,20 +12,34 @@
 # FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
 # details.
 #
 # You should have received a copy of the GNU General Public License along with
 # this program; if not, write to the Free Software Foundation, Inc.,
 # 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
+#
+# Authors:
+#   Florian "octo" Forster <octo at collectd.org>
 
 use strict;
 use warnings;
-use lib ('../lib');
 use utf8;
+use vars (qw($BASE_DIR));
+
+BEGIN
+{
+  if (defined $ENV{'SCRIPT_FILENAME'})
+  {
+    if ($ENV{'SCRIPT_FILENAME'} =~ m{^(/.+)/bin/[^/]+$})
+    {
+      $::BASE_DIR = $1;
+      unshift (@::INC, "$::BASE_DIR/lib");
+    }
+  }
+}
 
 use Carp (qw(cluck confess));
-use FindBin ('$RealBin');
 use CGI (':cgi');
 use CGI::Carp ('fatalsToBrowser');
 use HTML::Entities ('encode_entities');
 
 use Data::Dumper;
 
@@ -32,40 +47,105 @@
 use Collectd::Graph::TypeLoader (qw(tl_load_type));
 use Collectd::Graph::Common (qw(get_files_from_directory get_all_hosts
       get_timespan_selection get_selected_files get_host_selection
       get_plugin_selection flush_files));
 use Collectd::Graph::Type ();
 
-our $Debug = param ('debug') ? 1 : 0;
-
 our $TimeSpans =
 {
   Hour  =>        3600,
   Day   =>       86400,
   Week  =>   7 * 86400,
   Month =>  31 * 86400,
   Year  => 366 * 86400
 };
 
-my $action = param ('action') || 'list_hosts';
-our %Actions =
+my %Actions =
 (
   list_hosts => \&action_list_hosts,
   show_selection => \&action_show_selection
 );
 
-if (!exists ($Actions{$action}))
+sub base_dir
+{
+  if (defined $::BASE_DIR)
+  {
+    return ($::BASE_DIR);
+  }
+
+  if (!defined ($ENV{'SCRIPT_FILENAME'}))
+  {
+    return;
+  }
+
+  if ($ENV{'SCRIPT_FILENAME'} =~ m{^(/.+)/bin/[^/]+$})
+  {
+    $::BASE_DIR = $1;
+    return ($::BASE_DIR);
+  }
+
+  return;
+}
+
+sub lib_dir
 {
-  print STDERR "No such action: $action\n";
-  exit 1;
+  my $base = base_dir ();
+
+  if ($base)
+  {
+    return "$base/lib";
+  }
+  else
+  {
+    return "../lib";
+  }
 }
 
-gc_read_config ("$RealBin/../etc/collection.conf");
+sub sysconf_dir
+{
+  my $base = base_dir ();
 
-$Actions{$action}->();
-exit (0);
+  if ($base)
+  {
+    return "$base/etc";
+  }
+  else
+  {
+    return "../etc";
+  }
+}
+
+sub init
+{
+  my $lib_dir = lib_dir ();
+  my $sysconf_dir = sysconf_dir ();
+
+  if (!grep { $lib_dir eq $_ } (@::INC))
+  {
+    unshift (@::INC, $lib_dir);
+  }
+
+  gc_read_config ("$sysconf_dir/collection.conf");
+}
+
+sub main
+{
+  my $Debug = param ('debug') ? 1 : 0;
+  my $action = param ('action') || 'list_hosts';
+
+  if (!exists ($Actions{$action}))
+  {
+    print STDERR "No such action: $action\n";
+    return (1);
+  }
+
+  init ();
+
+  $Actions{$action}->();
+  return (1);
+} # sub main
 
 sub can_handle_xhtml
 {
   my %types = ();
 
   if (!defined $ENV{'HTTP_ACCEPT'})
@@ -101,13 +181,13 @@
   else
   {
     return (1);
   }
 } # can_handle_xhtml
 
-{my $html_started;
+my $html_started;
 sub start_html
 {
   return if ($html_started);
 
   my $end;
   my $begin;
@@ -116,29 +196,27 @@
   $end = time ();
   $timespan = get_timespan_selection ();
   $begin = $end - $timespan;
 
   if (can_handle_xhtml ())
   {
+    print header (-Content_Type => 'application/xhtml+xml; charset=UTF-8');
     print <<HTML;
-Content-Type: application/xhtml+xml; charset=UTF-8
-
 <?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
     "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.w3.org/MarkUp/SCHEMA/xhtml11.xsd"
     xml:lang="en">
 HTML
   }
   else
   {
+    print header (-Content_Type => 'text/html; charset=UTF-8');
     print <<HTML;
-Content-Type: text/html; charset=UTF-8
-
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
     "http://www.w3.org/TR/html4/strict.dtd">
 <html>
 HTML
   }
   print <<HTML;
@@ -148,42 +226,21 @@
     <link rel="stylesheet" href="../share/style.css" type="text/css" />
     <script type="text/javascript" src="../share/navigate.js"></script>
   </head>
   <body onload="nav_init ($begin, $end);">
 HTML
   $html_started = 1;
-}}
+}
 
 sub end_html
 {
   print <<HTML;
   </body>
 </html>
 HTML
-}
-
-sub contains_invalid_chars
-{
-  my $str = shift;
-
-  for (split (m//, $str))
-  {
-    my $n = ord ($_);
-
-    # Whitespace is allowed.
-    if (($n >= 9) && ($n <= 13))
-    {
-      next;
-    }
-    elsif ($n < 32)
-    {
-      return (1);
-    }
-  }
-
-  return;
+  $html_started = 0;
 }
 
 sub show_selector
 {
   my $timespan_selection = get_timespan_selection ();
   my $host_selection = get_host_selection ();
@@ -194,39 +251,36 @@
       <fieldset>
         <legend>Data selection</legend>
         <select name="hostname" multiple="multiple" size="15">
 HTML
   for (sort (keys %$host_selection))
   {
-    next if contains_invalid_chars ($_);
     my $host = encode_entities ($_);
     my $selected = $host_selection->{$_}
     ? ' selected="selected"'
     : '';
     print qq#          <option value="$host"$selected>$host</option>\n#;
   }
   print <<HTML;
         </select>
 	<select name="plugin" multiple="multiple" size="15">
 HTML
   for (sort (keys %$plugin_selection))
   {
-    next if contains_invalid_chars ($_);
     my $plugin = encode_entities ($_);
     my $selected = $plugin_selection->{$_}
     ? ' selected="selected"'
     : '';
     print qq#          <option value="$plugin"$selected>$plugin</option>\n#;
   }
   print <<HTML;
 	</select>
 	<select name="timespan">
 HTML
   for (sort { $TimeSpans->{$a} <=> $TimeSpans->{$b} } (keys (%$TimeSpans)))
   {
-    next if contains_invalid_chars ($_);
     my $name = encode_entities ($_);
     my $value = $TimeSpans->{$_};
     my $selected = ($value == $timespan_selection)
     ? ' selected="selected"'
     : '';
     print qq#          <option value="$value"$selected>$name</option>\n#;
@@ -247,13 +301,12 @@
 
   my @hosts = get_all_hosts ();
   print "    <ul>\n";
   for (sort @hosts)
   {
     my $url = encode_entities (script_name () . "?action=show_selection;hostname=$_");
-    next if contains_invalid_chars ($_);
     my $name = encode_entities ($_);
     print qq#      <li><a href="$url">$name</a></li>\n#;
   }
   print "    </ul>\n";
 
   end_html ();
@@ -305,13 +358,13 @@
 
   my $id_counter = 0;
 
   $all_files = get_selected_files ();
   $timespan = get_timespan_selection ();
 
-  if ($Debug)
+  if (param ('debug'))
   {
     print "<pre>", Data::Dumper->Dump ([$all_files], ['all_files']), "</pre>\n";
   }
 
   # Send FLUSH command to the daemon if necessary and possible.
   flush_files ($all_files,
@@ -330,25 +383,31 @@
 
     if (!defined ($types->{$type}))
     {
       $types->{$type} = tl_load_type ($file->{'type'});
       if (!$types->{$type})
       {
-        cluck ("tl_load_type (" . $file->{'type'} . ") failed");
+        warn ("tl_load_type (" . $file->{'type'} . ") failed");
         next;
       }
     }
 
     $types->{$type}->addFiles ($file);
   }
 #print STDOUT Data::Dumper->Dump ([$types], ['types']);
 
   print qq#    <table>\n#;
   for (sort (keys %$types))
   {
     my $type = $_;
+
+    if (!defined ($types->{$type}))
+    {
+      next;
+    }
+
     my $graphs_num = $types->{$type}->getGraphsNum ();
 
     for (my $i = 0; $i < $graphs_num; $i++)
     {
       my $args = $types->{$type}->getGraphArgs ($i);
       my $url = encode_entities ("graph.cgi?$args;begin=-$timespan");
@@ -397,12 +456,14 @@
   }
 
   print "    </table>\n";
   end_html ();
 }
 
+main ();
+
 =head1 SEE ALSO
 
 L<Collectd::Graph::Type>
 
 =head1 AUTHOR AND LICENSE
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/lib/Collectd/Graph/Common.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/lib/Collectd/Graph/Common.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/lib/Collectd/Graph/Common.pm	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/lib/Collectd/Graph/Common.pm	2012-04-02 16:04:58.000000000 +0800
@@ -1,19 +1,40 @@
 package Collectd::Graph::Common;
 
+# Copyright (C) 2008-2011  Florian Forster
+# Copyright (C) 2011       noris network AG
+#
+# This program is free software; you can redistribute it and/or modify it under
+# the terms of the GNU General Public License as published by the Free Software
+# Foundation; only version 2 of the License is applicable.
+#
+# This program is distributed in the hope that it will be useful, but WITHOUT
+# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
+# FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
+# details.
+#
+# You should have received a copy of the GNU General Public License along with
+# this program; if not, write to the Free Software Foundation, Inc.,
+# 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
+#
+# Authors:
+#   Florian "octo" Forster <octo at collectd.org>
+
 use strict;
 use warnings;
 
 use vars (qw($ColorCanvas $ColorFullBlue $ColorHalfBlue));
 
 use Collectd::Unixsock ();
 use Carp (qw(confess cluck));
 use CGI (':cgi');
 use Exporter;
 use Collectd::Graph::Config (qw(gc_get_scalar));
 
+our $Cache = {};
+
 $ColorCanvas   = 'FFFFFF';
 $ColorFullBlue = '0000FF';
 $ColorHalfBlue = 'B7B7F7';
 
 @Collectd::Graph::Common::ISA = ('Exporter');
 @Collectd::Graph::Common::EXPORT_OK = (qw(
@@ -188,28 +209,54 @@
   }
   $ret .= '.rrd';
 
   return ($ret);
 } # ident_to_filename
 
+sub _part_to_string
+{
+  my $part = shift;
+
+  if (!defined ($part))
+  {
+    return ("(UNDEF)");
+  }
+  if (ref ($part) eq 'ARRAY')
+  {
+    if (1 == @$part)
+    {
+      return ($part->[0]);
+    }
+    else
+    {
+      return ('(' . join (',', @$part) . ')');
+    }
+  }
+  else
+  {
+    return ($part);
+  }
+} # _part_to_string
+
 sub ident_to_string
 {
   my $ident = shift;
 
   my $ret = '';
 
-  $ret .= $ident->{'hostname'} . '/' . $ident->{'plugin'};
+  $ret .= _part_to_string ($ident->{'hostname'})
+  . '/' . _part_to_string ($ident->{'plugin'});
   if (defined ($ident->{'plugin_instance'}))
   {
-    $ret .= '-' . $ident->{'plugin_instance'};
+    $ret .= '-' . _part_to_string ($ident->{'plugin_instance'});
   }
 
-  $ret .= '/' . $ident->{'type'};
+  $ret .= '/' . _part_to_string ($ident->{'type'});
   if (defined ($ident->{'type_instance'}))
   {
-    $ret .= '-' . $ident->{'type_instance'};
+    $ret .= '-' . _part_to_string ($ident->{'type_instance'});
   }
 
   return ($ret);
 } # ident_to_string
 
 sub get_files_from_directory
@@ -255,33 +302,42 @@
 
   return ($ret);
 } # get_files_from_directory
 
 sub get_all_hosts
 {
-  my $dh;
-  my @ret = ();
-  my $data_dir = gc_get_scalar ('DataDir', $DefaultDataDir);
+  my $ret = [];
 
-  opendir ($dh, "$data_dir") or confess ("opendir ($data_dir): $!");
-  while (my $entry = readdir ($dh))
+  if (defined ($Cache->{'get_all_hosts'}))
   {
-    next if ($entry =~ m/^\./);
-    next if (!-d "$data_dir/$entry");
-    next if (!-r "$data_dir/$entry" or !-x "$data_dir/$entry");
-    push (@ret, sanitize_hostname ($entry));
+    $ret = $Cache->{'get_all_hosts'};
+  }
+  else
+  {
+    my $dh;
+    my $data_dir = gc_get_scalar ('DataDir', $DefaultDataDir);
+
+    opendir ($dh, "$data_dir") or confess ("opendir ($data_dir): $!");
+    while (my $entry = readdir ($dh))
+    {
+      next if ($entry =~ m/^\./);
+      next if (!-d "$data_dir/$entry");
+      push (@$ret, sanitize_hostname ($entry));
+    }
+    closedir ($dh);
+
+    $Cache->{'get_all_hosts'} = $ret;
   }
-  closedir ($dh);
 
   if (wantarray ())
   {
-    return (@ret);
+    return (@$ret);
   }
-  elsif (@ret)
+  elsif (@$ret)
   {
-    return (\@ret);
+    return ($ret);
   }
   else
   {
     return;
   }
 } # get_all_hosts
@@ -289,18 +345,38 @@
 sub get_all_plugins
 {
   my @hosts = @_;
   my $ret = {};
   my $dh;
   my $data_dir = gc_get_scalar ('DataDir', $DefaultDataDir);
+  my $cache_key;
 
-  if (!@hosts)
+  if (@hosts)
   {
+    $cache_key = join (';', @hosts);
+  }
+  else
+  {
+    $cache_key = "/*/";
     @hosts = get_all_hosts ();
   }
 
+  if (defined ($Cache->{'get_all_plugins'}{$cache_key}))
+  {
+    $ret = $Cache->{'get_all_plugins'}{$cache_key};
+
+    if (wantarray ())
+    {
+      return (sort (keys %$ret));
+    }
+    else
+    {
+      return ($ret);
+    }
+  }
+
   for (@hosts)
   {
     my $host = $_;
     opendir ($dh, "$data_dir/$host") or next;
     while (my $entry = readdir ($dh))
     {
@@ -328,12 +404,13 @@
       $ret->{$plugin} ||= {};
       $ret->{$plugin}{$plugin_instance} = 1;
     } # while (readdir)
     closedir ($dh);
   } # for (@hosts)
 
+  $Cache->{'get_all_plugins'}{$cache_key} = $ret;
   if (wantarray ())
   {
     return (sort (keys %$ret));
   }
   else
   {
@@ -383,30 +460,50 @@
     }
   }
 
   return (0);
 } # _filter_ident
 
+sub _get_all_files
+{
+  my $ret;
+
+  if (defined ($Cache->{'_get_all_files'}))
+  {
+    $ret = $Cache->{'_get_all_files'};
+  }
+  else
+  {
+    my $data_dir = gc_get_scalar ('DataDir', $DefaultDataDir);
+
+    $ret = get_files_from_directory ($data_dir, 3);
+    $Cache->{'_get_all_files'} = $ret;
+  }
+
+  return ($ret);
+} # _get_all_files
+
 sub get_files_by_ident
 {
   my $ident = shift;
   my $all_files;
   my @ret = ();
-  my $data_dir = gc_get_scalar ('DataDir', $DefaultDataDir);
 
-  #if ($ident->{'hostname'})
-  #{
-  #$all_files = get_files_for_host ($ident->{'hostname'});
-  #}
-  #else
-  #{
-    $all_files = get_files_from_directory ($data_dir, 3);
-    #}
+  my $cache_key = ident_to_string ($ident);
+  if (defined ($Cache->{'get_files_by_ident'}{$cache_key}))
+  {
+    my $ret = $Cache->{'get_files_by_ident'}{$cache_key};
+
+    return ($ret)
+  }
+
+  $all_files = _get_all_files ();
 
   @ret = grep { _filter_ident ($ident, $_) == 0 } (@$all_files);
 
+  $Cache->{'get_files_by_ident'}{$cache_key} = \@ret;
   return (\@ret);
 } # get_files_by_ident
 
 sub get_selected_files
 {
   my $ident = {};
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/lib/Collectd/Graph/Type/Df.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/lib/Collectd/Graph/Type/Df.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/lib/Collectd/Graph/Type/Df.pm	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/lib/Collectd/Graph/Type/Df.pm	2012-04-02 16:04:58.000000000 +0800
@@ -31,13 +31,13 @@
 sub new
 {
   my $pkg = shift;
   my $obj = Collectd::Graph::Type->new (@_);
   $obj->{'data_sources'} = [qw(free used)];
   $obj->{'rrd_opts'} = ['-v', 'Bytes'];
-  $obj->{'rrd_title'} = 'Disk space ({instance})';
+  $obj->{'rrd_title'} = 'Disk space ({type_instance})';
   $obj->{'rrd_format'} = '%5.1lf%sB';
   $obj->{'colors'} = [qw(00b000 ff0000)];
 
   return (bless ($obj, $pkg));
 } # new
 
@@ -55,13 +55,13 @@
   my $filename = ident_to_filename ($ident);
   $filename =~ s#:#\\:#g;
 
   my $faded_green = get_faded_color ('00ff00');
   my $faded_red = get_faded_color ('ff0000');
 
-  return (['-t', $obj->getTitle ($ident), '-v', 'Bytes', '-l', '0',
+  return (['-t', 'Diskspace (' . $ident->{'type_instance'} . ')', '-v', 'Bytes', '-l', '0',
     "DEF:free_min=${filename}:free:MIN",
     "DEF:free_avg=${filename}:free:AVERAGE",
     "DEF:free_max=${filename}:free:MAX",
     "DEF:used_min=${filename}:used:MIN",
     "DEF:used_avg=${filename}:used:AVERAGE",
     "DEF:used_max=${filename}:used:MAX",
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/lib/Collectd/Graph/TypeLoader.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/lib/Collectd/Graph/TypeLoader.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/collection3/lib/Collectd/Graph/TypeLoader.pm	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/collection3/lib/Collectd/Graph/TypeLoader.pm	2012-04-02 16:04:58.000000000 +0800
@@ -89,13 +89,14 @@
 
   if ($module)
   {
     $obj = _create_object ($module);
     if (!$obj)
     {
-      cluck ("Creating an $module object failed");
+      #cluck ("Creating an $module object failed");
+      warn ("Creating an $module object failed");
       return;
     }
   }
   else
   {
     $obj = Collectd::Graph::Type->new ();
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib: exec-ksm.sh
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/migrate-4-5.px /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/migrate-4-5.px
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/migrate-4-5.px	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/migrate-4-5.px	2012-04-02 16:04:58.000000000 +0800
@@ -30,13 +30,12 @@
 use Getopt::Long ('GetOptions');
 use Data::Dumper ();
 use File::Basename ('dirname');
 
 our $InDir = '/var/lib/collectd';
 our $RRDtool = 'rrdtool';
-our $RRDFilter = 'rrd_filter.px';
 
 our %TypesCounterToDerive = # {{{
 (
   apache_bytes => ["count"],
   apache_requests => ["count"],
   arc_counts => ["demand_data", "demand_metadata", "prefetch_data", "prefetch_metadata"],
@@ -182,21 +181,13 @@
 
   if ((($plugin eq 'df') || ($plugin eq 'interface'))
     && (!$plugin_inst) && ($type_inst))
   {
     my $dir = join ('/', @path);
     print "mkdir -p \"$dir/$plugin-$type_inst\"\n";
-    if (($plugin eq 'df') and ($type eq 'df'))
-    {
-      print "$RRDFilter --infile=\"$path\" --outfile=\"$dir/$plugin-$type_inst/df_complex-free.rrd\" --map free:value\n";
-      print "$RRDFilter --infile=\"$path\" --outfile=\"$dir/$plugin-$type_inst/df_complex-used.rrd\" --map used:value\n";
-    }
-    else
-    {
-      print "mv \"$path\" \"$dir/$plugin-$type_inst/$type.rrd\"\n";
-    }
+    print "mv \"$path\" \"$dir/$plugin-$type_inst/$type.rrd\"\n";
   }
 } # }}} sub handle_file
 
 sub scan_dir # {{{
 {
   my @dir_parts = @_;
@@ -229,27 +220,22 @@
 {
   print STDERR <<EOF;
 migrate-4-5.px [OPTIONS]
 
 Valid options are:
 
-  --indir <dir>         Source directory
-                        Default: $InDir
-  --rrdtool <path>      Path to the RRDtool binary
-                        Default: $RRDtool
-  --rrdfilter <path>    Path to the rrd_filter.px script
-                        Default: $RRDFilter
+  --indir <dir>      Source directory
+                     Default: $InDir
+  --rrdtool <path>   Path to the RRDtool binary
+                     Default: $RRDtool
 
 EOF
   exit (1);
 } # }}} sub exit_usage
 
 GetOptions ("indir|i=s" => \$InDir,
         "rrdtool=s" => \$RRDtool,
-        "rrdfilter=s" => \$RRDFilter,
         "help|h" => \&exit_usage) or exit_usage ();
 
-print "#!/bin/bash\n\n";
-
 scan_dir ($InDir);
 
 # vim: set sw=2 sts=2 et fdm=marker :
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/php-collection/definitions.php /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/php-collection/definitions.php
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/php-collection/definitions.php	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/php-collection/definitions.php	2012-04-02 16:04:58.000000000 +0800
@@ -45,15 +45,15 @@
 
 	$HalfBlueGreen = '89B3C9';
 
 	$GraphDefs = array();
 	$GraphDefs['apache_bytes'] = array(
 		'-v', 'Bits/s',
-		'DEF:min_raw={file}:count:MIN',
-		'DEF:avg_raw={file}:count:AVERAGE',
-		'DEF:max_raw={file}:count:MAX',
+		'DEF:min_raw={file}:value:MIN',
+		'DEF:avg_raw={file}:value:AVERAGE',
+		'DEF:max_raw={file}:value:MAX',
 		'CDEF:min=min_raw,8,*',
 		'CDEF:avg=avg_raw,8,*',
 		'CDEF:max=max_raw,8,*',
 		'CDEF:mytime=avg_raw,TIME,TIME,IF',
 		'CDEF:sample_len_raw=mytime,PREV(mytime),-',
 		'CDEF:sample_len=sample_len_raw,UN,0,sample_len_raw,IF',
@@ -65,26 +65,26 @@
 		'GPRINT:avg:AVERAGE:%5.1lf%s Avg,',
 		'GPRINT:max:MAX:%5.1lf%s Max,',
 		'GPRINT:avg:LAST:%5.1lf%s Last',
 		'GPRINT:avg_sum:LAST:(ca. %5.1lf%sB Total)\l');
 	$GraphDefs['apache_requests'] = array(
 		'-v', 'Requests/s',
-		'DEF:min={file}:count:MIN',
-		'DEF:avg={file}:count:AVERAGE',
-		'DEF:max={file}:count:MAX',
+		'DEF:min={file}:value:MIN',
+		'DEF:avg={file}:value:AVERAGE',
+		'DEF:max={file}:value:MAX',
 		"AREA:max#$HalfBlue",
 		"AREA:min#$Canvas",
 		"LINE1:avg#$FullBlue:Requests/s",
 		'GPRINT:min:MIN:%6.2lf Min,',
 		'GPRINT:avg:AVERAGE:%6.2lf Avg,',
 		'GPRINT:max:MAX:%6.2lf Max,',
 		'GPRINT:avg:LAST:%6.2lf Last');
 	$GraphDefs['apache_scoreboard'] = array(
-		'DEF:min={file}:count:MIN',
-		'DEF:avg={file}:count:AVERAGE',
-		'DEF:max={file}:count:MAX',
+		'DEF:min={file}:value:MIN',
+		'DEF:avg={file}:value:AVERAGE',
+		'DEF:max={file}:value:MAX',
 		"AREA:max#$HalfBlue",
 		"AREA:min#$Canvas",
 		"LINE1:avg#$FullBlue:Processes",
 		'GPRINT:min:MIN:%6.2lf Min,',
 		'GPRINT:avg:AVERAGE:%6.2lf Avg,',
 		'GPRINT:max:MAX:%6.2lf Max,',
@@ -2021,13 +2021,13 @@
 				$file = $datadir.'/'.$title.'-'.$inst.'.rrd';
 				break;
 			}
 		if ($file == '')
 			continue;
 
-		$sources[] = array('name'=>$inst, 'file'=>$file, 'ds'=>'count');
+		$sources[] = array('name'=>$inst, 'file'=>$file, 'ds'=>'value');
 	}
 
 	return collectd_draw_meta_stack($opts, $sources);
 }
 
 function meta_graph_tcp_connections($host, $plugin, $plugin_instance, $type, $type_instances, $opts = array()) {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/redhat/collectd.spec /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/redhat/collectd.spec
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/contrib/redhat/collectd.spec	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/contrib/redhat/collectd.spec	2012-04-02 16:04:58.000000000 +0800
@@ -1,12 +1,12 @@
 
 %define with_java %(test -z "$JAVA_HOME" ; echo $?)
 
 Summary:	Statistics collection daemon for filling RRD files.
 Name:		collectd
-Version:	4.9.0
+Version:	5.0.1
 Release:	1%{?dist}
 Source:		http://collectd.org/files/%{name}-%{version}.tar.gz
 License:	GPL
 Group:		System Environment/Daemons
 BuildRoot:	%{_tmppath}/%{name}-%{version}-root
 BuildPrereq:	lm_sensors-devel, rrdtool-devel, libpcap-devel, net-snmp-devel, libstatgrab-devel, libxml2-devel, libiptcdata-devel
@@ -144,12 +144,13 @@
 %doc AUTHORS COPYING ChangeLog INSTALL NEWS README contrib/
 %config %attr(0644,root,root) /etc/collectd.conf
 %attr(0755,root,root) /etc/rc.d/init.d/collectd
 %attr(0755,root,root) /var/www/cgi-bin/collection.cgi
 %attr(0755,root,root) %{_sbindir}/collectd
 %attr(0755,root,root) %{_bindir}/collectd-nagios
+%attr(0755,root,root) %{_bindir}/collectdctl
 %attr(0755,root,root) %{_sbindir}/collectdmon
 %attr(0644,root,root) %{_mandir}/man1/*
 %attr(0644,root,root) %{_mandir}/man5/*
 %dir /etc/collectd.d
 
 # client
@@ -171,12 +172,13 @@
 %plugin_macro conntrack
 %plugin_macro contextswitch
 %plugin_macro cpufreq
 %plugin_macro cpu
 %plugin_macro csv
 %plugin_macro curl
+%plugin_macro curl_xml
 %plugin_macro df
 %plugin_macro disk
 %plugin_macro dns
 %plugin_macro entropy
 %plugin_macro email
 %plugin_macro exec
@@ -194,12 +196,13 @@
 %plugin_macro match_hashed
 %plugin_macro match_regex
 %plugin_macro match_timediff
 %plugin_macro match_value
 
 %plugin_macro mbmon
+%plugin_macro memcachec
 %plugin_macro memcached
 %plugin_macro memory
 %plugin_macro multimeter
 %plugin_macro network
 %plugin_macro nfs
 %plugin_macro ntpd
@@ -219,17 +222,20 @@
 %plugin_macro tail
 
 %plugin_macro target_notification
 %plugin_macro target_replace
 %plugin_macro target_scale
 %plugin_macro target_set
+%plugin_macro target_v5upgrade
 
 %plugin_macro tcpconns
 %plugin_macro teamspeak2
 %plugin_macro ted
 %plugin_macro thermal
+%plugin_macro threshold
+
 %plugin_macro unixsock
 %plugin_macro uptime
 %plugin_macro users
 %plugin_macro uuid
 %plugin_macro vmem
 %plugin_macro vserver
@@ -240,22 +246,23 @@
 
 %exclude %{_libdir}/perl5/5.8.8/%{_arch}-linux-thread-multi/perllocal.pod
 %attr(0644,root,root) %{_libdir}/perl5/site_perl/5.8.8/%{_arch}-linux-thread-multi/auto/Collectd/.packlist
 %attr(0644,root,root) /usr/lib/perl5/site_perl/5.8.8/Collectd.pm
 %attr(0644,root,root) /usr/lib/perl5/site_perl/5.8.8/Collectd/Unixsock.pm
 %attr(0644,root,root) /usr/lib/perl5/site_perl/5.8.8/Collectd/Plugins/OpenVZ.pm
+%attr(0644,root,root) /usr/lib/perl5/site_perl/5.8.8/Collectd/Plugins/Monitorus.pm
 %attr(0644,root,root) /usr/share/man/man3/Collectd::Unixsock.3pm.gz
 
 %exclude /usr/share/collectd/postgresql_default.conf
 
 %dir /var/lib/collectd
 
 %if %with_java
 %files java
-%attr(0644,root,root) /usr/share/%{name}/java/org/collectd/api/*.class
-%attr(0644,root,root) /usr/share/%{name}/java/org/collectd/java/*.class
+/usr/share/collectd/java/collectd-api.jar
+/usr/share/collectd/java/generic-jmx.jar
 %plugin_macro java
 %endif
 
 %files apache
 %config %attr(0644,root,root) /etc/collectd.d/apache.conf
 %plugin_macro apache
@@ -280,12 +287,16 @@
 
 %files snmp
 %attr(0644,root,root) /etc/collectd.d/snmp.conf
 %plugin_macro snmp
 
 %changelog
+* Tue Jan 03 2011 Monetate <jason.stelzer@monetate.com> 5.0.1
+- New upstream version
+- Changes to support 5.0.1
+
 * Tue Jan 04 2010 Rackspace <stu.hood@rackspace.com> 4.9.0
 - New upstream version
 - Changes to support 4.9.0
 - Added support for Java/GenericJMX plugin
 
 * Mon Mar 17 2008 RightScale <support@rightscale.com> 4.3.1
@@ -296,13 +307,13 @@
 
 * Mon Aug 06 2007 Kjell Randa <Kjell.Randa@broadpark.no> 4.0.6
 - New upstream version
 
 * Wed Jul 25 2007 Kjell Randa <Kjell.Randa@broadpark.no> 4.0.5
 - New major releas
-- Changes to support 4.0.5 
+- Changes to support 4.0.5
 
 * Wed Jan 11 2007 Iain Lea <iain@bricbrac.de> 3.11.0-0
 - fixed spec file to build correctly on fedora core
 - added improved init.d script to work with chkconfig
 - added %post and %postun to call chkconfig automatically
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/libltdl/config/config.guess /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/libltdl/config/config.guess
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/libltdl/config/config.guess	2012-11-11 19:38:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/libltdl/config/config.guess	2012-04-02 16:05:24.000000000 +0800
@@ -1,13 +1,13 @@
 #! /bin/sh
 # Attempt to guess a canonical system name.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009
+#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
 #   Free Software Foundation, Inc.
 
-timestamp='2009-06-10'
+timestamp='2009-12-30'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
 # the Free Software Foundation; either version 2 of the License, or
 # (at your option) any later version.
 #
@@ -24,22 +24,22 @@
 # As a special exception to the GNU General Public License, if you
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
 
-# Originally written by Per Bothner <per@bothner.com>.
-# Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted ChangeLog entry.
+# Originally written by Per Bothner.  Please send patches (context
+# diff format) to <config-patches@gnu.org> and include a ChangeLog
+# entry.
 #
 # This script attempts to guess a canonical system name similar to
 # config.sub.  If it succeeds, it prints the system name on stdout, and
 # exits with 0.  Otherwise, it exits with 1.
 #
-# The plan is that this can be called by configure scripts if you
-# don't specify an explicit build system type.
+# You can get the latest version of this script from:
+# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
 
 me=`echo "$0" | sed -e 's,.*/,,'`
 
 usage="\
 Usage: $0 [OPTION]
 
@@ -53,14 +53,15 @@
 Report bugs and patches to <config-patches@gnu.org>."
 
 version="\
 GNU config.guess ($timestamp)
 
 Originally written by Per Bothner.
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001,
-2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
+2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
+Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
 
 help="
 Try \`$me --help' for more information."
@@ -330,12 +331,15 @@
     sun4H:SunOS:5.*:*)
 	echo sparc-hal-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
 	echo sparc-sun-solaris2`echo ${UNAME_RELEASE}|sed -e 's/[^.]*//'`
 	exit ;;
+    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
+	echo i386-pc-auroraux${UNAME_RELEASE}
+	exit ;;
     i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
 	eval $set_cc_for_build
 	SUN_ARCH="i386"
 	# If there is a compiler, see if it is configured for 64-bit objects.
 	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
 	# This test works for both compilers.
@@ -804,18 +808,18 @@
     	# uname -m includes "-pc" on this system.
     	echo ${UNAME_MACHINE}-mingw32
 	exit ;;
     i*:PW*:*)
 	echo ${UNAME_MACHINE}-pc-pw32
 	exit ;;
-    *:Interix*:[3456]*)
+    *:Interix*:*)
     	case ${UNAME_MACHINE} in
 	    x86)
 		echo i586-pc-interix${UNAME_RELEASE}
 		exit ;;
-	    EM64T | authenticamd | genuineintel)
+	    authenticamd | genuineintel | EM64T)
 		echo x86_64-unknown-interix${UNAME_RELEASE}
 		exit ;;
 	    IA64)
 		echo ia64-unknown-interix${UNAME_RELEASE}
 		exit ;;
 	esac ;;
@@ -851,12 +855,26 @@
 	# other systems with GNU libc and userland
 	echo ${UNAME_MACHINE}-unknown-`echo ${UNAME_SYSTEM} | sed 's,^[^/]*/,,' | tr '[A-Z]' '[a-z]'``echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`-gnu
 	exit ;;
     i*86:Minix:*:*)
 	echo ${UNAME_MACHINE}-pc-minix
 	exit ;;
+    alpha:Linux:*:*)
+	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+	  EV5)   UNAME_MACHINE=alphaev5 ;;
+	  EV56)  UNAME_MACHINE=alphaev56 ;;
+	  PCA56) UNAME_MACHINE=alphapca56 ;;
+	  PCA57) UNAME_MACHINE=alphapca56 ;;
+	  EV6)   UNAME_MACHINE=alphaev6 ;;
+	  EV67)  UNAME_MACHINE=alphaev67 ;;
+	  EV68*) UNAME_MACHINE=alphaev68 ;;
+        esac
+	objdump --private-headers /bin/sh | grep -q ld.so.1
+	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
+	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
+	exit ;;
     arm*:Linux:*:*)
 	eval $set_cc_for_build
 	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
 	    | grep -q __ARM_EABI__
 	then
 	    echo ${UNAME_MACHINE}-unknown-linux-gnu
@@ -873,12 +891,23 @@
     crisv32:Linux:*:*)
 	echo crisv32-axis-linux-gnu
 	exit ;;
     frv:Linux:*:*)
     	echo frv-unknown-linux-gnu
 	exit ;;
+    i*86:Linux:*:*)
+	LIBC=gnu
+	eval $set_cc_for_build
+	sed 's/^	//' << EOF >$dummy.c
+	#ifdef __dietlibc__
+	LIBC=dietlibc
+	#endif
+EOF
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^LIBC'`
+	echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
+	exit ;;
     ia64:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
 	exit ;;
     m32r*:Linux:*:*)
 	echo ${UNAME_MACHINE}-unknown-linux-gnu
 	exit ;;
@@ -898,55 +927,37 @@
 	CPU=${UNAME_MACHINE}
 	#else
 	CPU=
 	#endif
 	#endif
 EOF
-	eval "`$CC_FOR_BUILD -E $dummy.c 2>/dev/null | sed -n '
-	    /^CPU/{
-		s: ::g
-		p
-	    }'`"
+	eval `$CC_FOR_BUILD -E $dummy.c 2>/dev/null | grep '^CPU'`
 	test x"${CPU}" != x && { echo "${CPU}-unknown-linux-gnu"; exit; }
 	;;
     or32:Linux:*:*)
 	echo or32-unknown-linux-gnu
 	exit ;;
-    ppc:Linux:*:*)
-	echo powerpc-unknown-linux-gnu
-	exit ;;
-    ppc64:Linux:*:*)
-	echo powerpc64-unknown-linux-gnu
-	exit ;;
-    alpha:Linux:*:*)
-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
-	  EV5)   UNAME_MACHINE=alphaev5 ;;
-	  EV56)  UNAME_MACHINE=alphaev56 ;;
-	  PCA56) UNAME_MACHINE=alphapca56 ;;
-	  PCA57) UNAME_MACHINE=alphapca56 ;;
-	  EV6)   UNAME_MACHINE=alphaev6 ;;
-	  EV67)  UNAME_MACHINE=alphaev67 ;;
-	  EV68*) UNAME_MACHINE=alphaev68 ;;
-        esac
-	objdump --private-headers /bin/sh | grep -q ld.so.1
-	if test "$?" = 0 ; then LIBC="libc1" ; else LIBC="" ; fi
-	echo ${UNAME_MACHINE}-unknown-linux-gnu${LIBC}
-	exit ;;
     padre:Linux:*:*)
 	echo sparc-unknown-linux-gnu
 	exit ;;
+    parisc64:Linux:*:* | hppa64:Linux:*:*)
+	echo hppa64-unknown-linux-gnu
+	exit ;;
     parisc:Linux:*:* | hppa:Linux:*:*)
 	# Look for CPU level
 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
 	  PA7*) echo hppa1.1-unknown-linux-gnu ;;
 	  PA8*) echo hppa2.0-unknown-linux-gnu ;;
 	  *)    echo hppa-unknown-linux-gnu ;;
 	esac
 	exit ;;
-    parisc64:Linux:*:* | hppa64:Linux:*:*)
-	echo hppa64-unknown-linux-gnu
+    ppc64:Linux:*:*)
+	echo powerpc64-unknown-linux-gnu
+	exit ;;
+    ppc:Linux:*:*)
+	echo powerpc-unknown-linux-gnu
 	exit ;;
     s390:Linux:*:* | s390x:Linux:*:*)
 	echo ${UNAME_MACHINE}-ibm-linux
 	exit ;;
     sh64*:Linux:*:*)
     	echo ${UNAME_MACHINE}-unknown-linux-gnu
@@ -963,64 +974,12 @@
     x86_64:Linux:*:*)
 	echo x86_64-unknown-linux-gnu
 	exit ;;
     xtensa*:Linux:*:*)
     	echo ${UNAME_MACHINE}-unknown-linux-gnu
 	exit ;;
-    i*86:Linux:*:*)
-	# The BFD linker knows what the default object file format is, so
-	# first see if it will tell us. cd to the root directory to prevent
-	# problems with other programs or directories called `ld' in the path.
-	# Set LC_ALL=C to ensure ld outputs messages in English.
-	ld_supported_targets=`cd /; LC_ALL=C ld --help 2>&1 \
-			 | sed -ne '/supported targets:/!d
-				    s/[ 	][ 	]*/ /g
-				    s/.*supported targets: *//
-				    s/ .*//
-				    p'`
-        case "$ld_supported_targets" in
-	  elf32-i386)
-		TENTATIVE="${UNAME_MACHINE}-pc-linux-gnu"
-		;;
-	esac
-	# Determine whether the default compiler is a.out or elf
-	eval $set_cc_for_build
-	sed 's/^	//' << EOF >$dummy.c
-	#include <features.h>
-	#ifdef __ELF__
-	# ifdef __GLIBC__
-	#  if __GLIBC__ >= 2
-	LIBC=gnu
-	#  else
-	LIBC=gnulibc1
-	#  endif
-	# else
-	LIBC=gnulibc1
-	# endif
-	#else
-	#if defined(__INTEL_COMPILER) || defined(__PGI) || defined(__SUNPRO_C) || defined(__SUNPRO_CC)
-	LIBC=gnu
-	#else
-	LIBC=gnuaout
-	#endif
-	#endif
-	#ifdef __dietlibc__
-	LIBC=dietlibc
-	#endif
-EOF
-	eval "`$CC_FOR_BUILD -E $dummy.c 2>/dev/null | sed -n '
-	    /^LIBC/{
-		s: ::g
-		p
-	    }'`"
-	test x"${LIBC}" != x && {
-		echo "${UNAME_MACHINE}-pc-linux-${LIBC}"
-		exit
-	}
-	test x"${TENTATIVE}" != x && { echo "${TENTATIVE}"; exit; }
-	;;
     i*86:DYNIX/ptx:4*:*)
 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
 	# earlier versions are messed up and put the nodename in both
 	# sysname and nodename.
 	echo i386-sequent-sysv4
 	exit ;;
@@ -1244,12 +1203,22 @@
     *:Rhapsody:*:*)
 	echo ${UNAME_MACHINE}-apple-rhapsody${UNAME_RELEASE}
 	exit ;;
     *:Darwin:*:*)
 	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
 	case $UNAME_PROCESSOR in
+	    i386)
+		eval $set_cc_for_build
+		if [ "$CC_FOR_BUILD" != 'no_compiler_found' ]; then
+		  if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+		      (CCOPTS= $CC_FOR_BUILD -E - 2>/dev/null) | \
+		      grep IS_64BIT_ARCH >/dev/null
+		  then
+		      UNAME_PROCESSOR="x86_64"
+		  fi
+		fi ;;
 	    unknown) UNAME_PROCESSOR=powerpc ;;
 	esac
 	echo ${UNAME_PROCESSOR}-apple-darwin${UNAME_RELEASE}
 	exit ;;
     *:procnto*:*:* | *:QNX:[0123456789]*:*)
 	UNAME_PROCESSOR=`uname -p`
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/libltdl/config/config.sub /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/libltdl/config/config.sub
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/libltdl/config/config.sub	2012-11-11 19:38:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/libltdl/config/config.sub	2012-04-02 16:05:24.000000000 +0800
@@ -1,13 +1,13 @@
 #! /bin/sh
 # Configuration validation subroutine script.
 #   Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999,
-#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009
+#   2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010
 #   Free Software Foundation, Inc.
 
-timestamp='2009-06-11'
+timestamp='2010-01-22'
 
 # This file is (in principle) common to ALL GNU software.
 # The presence of a machine in this file suggests that SOME GNU software
 # can handle that machine.  It does not imply ALL GNU software can.
 #
 # This file is free software; you can redistribute it and/or modify
@@ -29,19 +29,22 @@
 # distribute this file as part of a program that contains a
 # configuration script generated by Autoconf, you may include it under
 # the same distribution terms that you use for the rest of that program.
 
 
 # Please send patches to <config-patches@gnu.org>.  Submit a context
-# diff and a properly formatted ChangeLog entry.
+# diff and a properly formatted GNU ChangeLog entry.
 #
 # Configuration subroutine to validate and canonicalize a configuration type.
 # Supply the specified configuration type as an argument.
 # If it is invalid, we print an error message on stderr and exit with code 1.
 # Otherwise, we print the canonical config type on stdout and succeed.
 
+# You can get the latest version of this script from:
+# http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD
+
 # This file is supposed to be the same for all GNU packages
 # and recognize all the CPU types, system types and aliases
 # that are meaningful with *any* GNU software.
 # Each package is responsible for reporting which valid configurations
 # it does not support.  The user should be able to distinguish
 # a failure to support a valid configuration from a meaningless
@@ -69,14 +72,15 @@
 
 Report bugs and patches to <config-patches@gnu.org>."
 
 version="\
 GNU config.sub ($timestamp)
 
-Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000, 2001,
-2002, 2003, 2004, 2005, 2006, 2007, 2008 Free Software Foundation, Inc.
+Copyright (C) 1992, 1993, 1994, 1995, 1996, 1997, 1998, 1999, 2000,
+2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010 Free
+Software Foundation, Inc.
 
 This is free software; see the source for copying conditions.  There is NO
 warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
 
 help="
 Try \`$me --help' for more information."
@@ -146,13 +150,13 @@
 	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
 	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
 	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
 	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
 	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
 	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
-	-apple | -axis | -knuth | -cray)
+	-apple | -axis | -knuth | -cray | -microblaze)
 		os=
 		basic_machine=$1
 		;;
         -bluegene*)
 	        os=-cnk
 		;;
@@ -281,26 +285,28 @@
 	| nios | nios2 \
 	| ns16k | ns32k \
 	| or32 \
 	| pdp10 | pdp11 | pj | pjl \
 	| powerpc | powerpc64 | powerpc64le | powerpcle | ppcbe \
 	| pyramid \
+	| rx \
 	| score \
 	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[34]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
 	| sh64 | sh64le \
 	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
 	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
 	| spu | strongarm \
 	| tahoe | thumb | tic4x | tic80 | tron \
+	| ubicom32 \
 	| v850 | v850e \
 	| we32k \
 	| x86 | xc16x | xscale | xscalee[bl] | xstormy16 | xtensa \
 	| z8k | z80)
 		basic_machine=$basic_machine-unknown
 		;;
-	m6811 | m68hc11 | m6812 | m68hc12)
+	m6811 | m68hc11 | m6812 | m68hc12 | picochip)
 		# Motorola 68HC11/12.
 		basic_machine=$basic_machine-unknown
 		os=-none
 		;;
 	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65 | z8k)
 		;;
@@ -337,13 +343,13 @@
 	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
 	| i*86-* | i860-* | i960-* | ia64-* \
 	| ip2k-* | iq2000-* \
 	| lm32-* \
 	| m32c-* | m32r-* | m32rle-* \
 	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
-	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* \
+	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* | microblaze-* \
 	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
 	| mips16-* \
 	| mips64-* | mips64el-* \
 	| mips64octeon-* | mips64octeonel-* \
 	| mips64orion-* | mips64orionel-* \
 	| mips64r5900-* | mips64r5900el-* \
@@ -365,21 +371,23 @@
 	| nios-* | nios2-* \
 	| none-* | np1-* | ns16k-* | ns32k-* \
 	| orion-* \
 	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
 	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* | ppcbe-* \
 	| pyramid-* \
-	| romp-* | rs6000-* \
+	| romp-* | rs6000-* | rx-* \
 	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
 	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
 	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
 	| sparclite-* \
 	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | strongarm-* | sv1-* | sx?-* \
 	| tahoe-* | thumb-* \
-	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* | tile-* \
+	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
+	| tile-* | tilegx-* \
 	| tron-* \
+	| ubicom32-* \
 	| v850-* | v850e-* | vax-* \
 	| we32k-* \
 	| x86-* | x86_64-* | xc16x-* | xps100-* | xscale-* | xscalee[bl]-* \
 	| xstormy16-* | xtensa*-* \
 	| ymp-* \
 	| z8k-* | z80-*)
@@ -723,12 +731,15 @@
 		os=-sysv
 		;;
 	merlin)
 		basic_machine=ns32k-utek
 		os=-sysv
 		;;
+        microblaze)
+		basic_machine=microblaze-xilinx
+		;;
 	mingw32)
 		basic_machine=i386-pc
 		os=-mingw32
 		;;
 	mingw32ce)
 		basic_machine=arm-unknown
@@ -1073,12 +1084,17 @@
 		os=-coff
 		;;
 	tic6x | c6x*)
 		basic_machine=tic6x-unknown
 		os=-coff
 		;;
+        # This must be matched before tile*.
+        tilegx*)
+		basic_machine=tilegx-unknown
+		os=-linux-gnu
+		;;
 	tile*)
 		basic_machine=tile-unknown
 		os=-linux-gnu
 		;;
 	tx39)
 		basic_machine=mipstx39-unknown
@@ -1244,12 +1260,15 @@
 if [ x"$os" != x"" ]
 then
 case $os in
         # First match some system type aliases
         # that might get confused with valid system types.
 	# -solaris* is a basic system type, with this one exception.
+        -auroraux)
+	        os=-auroraux
+		;;
 	-solaris1 | -solaris1.*)
 		os=`echo $os | sed -e 's|solaris1|sunos4|'`
 		;;
 	-solaris)
 		os=-solaris2
 		;;
@@ -1265,14 +1284,14 @@
 	# First accept the basic system types.
 	# The portable systems comes first.
 	# Each alternative MUST END IN A *, to match a version number.
 	# -sysv* is not here because it comes later, after sysvr4.
 	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
 	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -solaris* | -sym* \
-	      | -kopensolaris* \
+	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
+	      | -sym* | -kopensolaris* \
 	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
 	      | -aos* | -aros* \
 	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
 	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
 	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
 	      | -openbsd* | -solidbsd* \
@@ -1287,13 +1306,13 @@
 	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* | -opened* \
 	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
 	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
 	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
 	      | -morphos* | -superux* | -rtmk* | -rtmk-nova* | -windiss* \
 	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
-	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops*)
+	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es*)
 	# Remember, each alternative MUST END IN *, to match a version number.
 		;;
 	-qnx*)
 		case $basic_machine in
 		    x86-* | i*86-*)
 			;;
@@ -1420,12 +1439,14 @@
 	-zvmoe)
 		os=-zvmoe
 		;;
 	-dicos*)
 		os=-dicos
 		;;
+        -nacl*)
+	        ;;
 	-none)
 		;;
 	*)
 		# Get rid of the `-' at the beginning of $os.
 		os=`echo $os | sed 's/[^-]*-//'`
 		echo Invalid configuration \`$1\': system \`$os\' not recognized 1>&2
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/libltdl/config/ltmain.sh /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/libltdl/config/ltmain.sh
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/libltdl/config/ltmain.sh	2012-11-11 19:38:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/libltdl/config/ltmain.sh	2012-04-02 16:05:24.000000000 +0800
@@ -62,21 +62,21 @@
 #
 #       host-triplet:	$host
 #       shell:		$SHELL
 #       compiler:		$LTCC
 #       compiler flags:		$LTCFLAGS
 #       linker:		$LD (gnu? $with_gnu_ld)
-#       $progname:		(GNU libtool) 2.2.6b Debian-2.2.6b-2ubuntu1
+#       $progname:		(GNU libtool) 2.2.6b Debian-2.2.6b-2
 #       automake:		$automake_version
 #       autoconf:		$autoconf_version
 #
 # Report bugs to <bug-libtool@gnu.org>.
 
 PROGRAM=ltmain.sh
 PACKAGE=libtool
-VERSION="2.2.6b Debian-2.2.6b-2ubuntu1"
+VERSION="2.2.6b Debian-2.2.6b-2"
 TIMESTAMP=""
 package_revision=1.3017
 
 # Be Bourne compatible
 if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
   emulate sh
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/Makefile.am	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/Makefile.am	2012-04-02 16:04:58.000000000 +0800
@@ -1,17 +1,12 @@
 ACLOCAL_AMFLAGS = -I libltdl/m4
 
-SUBDIRS = libltdl src bindings .
+SUBDIRS = libltdl src bindings
 
 INCLUDES = $(LTDLINCL)
 
 EXTRA_DIST = contrib version-gen.sh
 
 install-exec-hook:
 	$(mkinstalldirs) $(DESTDIR)$(localstatedir)/run
 	$(mkinstalldirs) $(DESTDIR)$(localstatedir)/lib/$(PACKAGE_NAME)
 	$(mkinstalldirs) $(DESTDIR)$(localstatedir)/log
-
-maintainer-clean-local:
-	-rm -f -r libltdl
-	-rm -f INSTALL
-	-rm -f aclocal.m4
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/Makefile.in	2012-11-11 19:38:32.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/Makefile.in	2012-04-02 16:05:31.000000000 +0800
@@ -125,12 +125,14 @@
 BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMODBUS_CFLAGS = @BUILD_WITH_LIBMODBUS_CFLAGS@
 BUILD_WITH_LIBMODBUS_LIBS = @BUILD_WITH_LIBMODBUS_LIBS@
+BUILD_WITH_LIBMONGOC_CPPFLAGS = @BUILD_WITH_LIBMONGOC_CPPFLAGS@
+BUILD_WITH_LIBMONGOC_LDFLAGS = @BUILD_WITH_LIBMONGOC_LDFLAGS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
 BUILD_WITH_LIBOPING_CPPFLAGS = @BUILD_WITH_LIBOPING_CPPFLAGS@
 BUILD_WITH_LIBOPING_LDFLAGS = @BUILD_WITH_LIBOPING_LDFLAGS@
@@ -271,12 +273,14 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
+PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
+PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
@@ -338,13 +342,13 @@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
 ACLOCAL_AMFLAGS = -I libltdl/m4
-SUBDIRS = libltdl src bindings .
+SUBDIRS = libltdl src bindings
 INCLUDES = $(LTDLINCL)
 EXTRA_DIST = contrib version-gen.sh
 all: all-recursive
 
 .SUFFIXES:
 am--refresh:
@@ -783,14 +787,13 @@
 installcheck-am:
 
 maintainer-clean: maintainer-clean-recursive
 	-rm -f $(am__CONFIG_DISTCLEAN_FILES)
 	-rm -rf $(top_srcdir)/autom4te.cache
 	-rm -f Makefile
-maintainer-clean-am: distclean-am maintainer-clean-generic \
-	maintainer-clean-local
+maintainer-clean-am: distclean-am maintainer-clean-generic
 
 mostlyclean: mostlyclean-recursive
 
 mostlyclean-am: mostlyclean-generic mostlyclean-libtool
 
 pdf: pdf-recursive
@@ -816,24 +819,18 @@
 	install-data install-data-am install-dvi install-dvi-am \
 	install-exec install-exec-am install-exec-hook install-html \
 	install-html-am install-info install-info-am install-man \
 	install-pdf install-pdf-am install-ps install-ps-am \
 	install-strip installcheck installcheck-am installdirs \
 	installdirs-am maintainer-clean maintainer-clean-generic \
-	maintainer-clean-local mostlyclean mostlyclean-generic \
-	mostlyclean-libtool pdf pdf-am ps ps-am tags tags-recursive \
-	uninstall uninstall-am
+	mostlyclean mostlyclean-generic mostlyclean-libtool pdf pdf-am \
+	ps ps-am tags tags-recursive uninstall uninstall-am
 
 
 install-exec-hook:
 	$(mkinstalldirs) $(DESTDIR)$(localstatedir)/run
 	$(mkinstalldirs) $(DESTDIR)$(localstatedir)/lib/$(PACKAGE_NAME)
 	$(mkinstalldirs) $(DESTDIR)$(localstatedir)/log
 
-maintainer-clean-local:
-	-rm -f -r libltdl
-	-rm -f INSTALL
-	-rm -f aclocal.m4
-
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/README /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/README
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/README	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/README	2012-04-02 16:04:58.000000000 +0800
@@ -80,12 +80,15 @@
       Email statistics: Count, traffic, spam scores and checks.
       See collectd-email(5).
 
     - entropy
       Amount of entropy available to the system.
 
+    - ethstat
+      Network interface card statistics.
+
     - exec
       Values gathered by a custom program or script.
       See collectd-exec(5).
 
     - filecount
       Count the number of files in directories.
@@ -137,12 +140,16 @@
       interfaces that use the Atheros chipset and the MadWifi driver.
 
     - mbmon
       Motherboard sensors: temperature, fanspeed and voltage information,
       using mbmon(1).
 
+    - md
+      Linux software-RAID device information (number of active, failed, spare
+      and missing disks).
+
     - memcachec
       Query and parse data from a memcache daemon (memcached).
 
     - memcached
       Statistics of the memcached distributed caching system.
       <http://www.danga.com/memcached/>
@@ -189,12 +196,15 @@
       NTP daemon statistics: Local clock drift, offset to peers, etc.
 
     - nut
       Network UPS tools: UPS current, voltage, power, charge, utilisation,
       temperature, etc. See upsd(8).
 
+    - numa
+      Information about Non-Uniform Memory Access (NUMA).
+
     - olsrd
       Queries routing information from the “Optimized Link State Routing”
       daemon.
 
     - onewire (EXPERIMENTAL!)
       Read onewire sensors using the owcapu library of the owfs project.
@@ -355,12 +365,15 @@
 
     - unixsock
       One can query the values from the unixsock plugin whenever they're
       needed. Please read collectd-unixsock(5) for a description on how that's
       done.
 
+    - write_graphite
+      Sends data to Carbon, the storage layer of Graphite.
+
     - write_http
       Sends the values collected by collectd to a web-server using HTTP POST
       requests. The transmitted data is either in a form understood by the
       Exec plugin or formatted in JSON.
 
     - write_redis
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/amqp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/amqp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/amqp.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/amqp.c	2012-04-02 16:04:58.000000000 +0800
@@ -638,13 +638,12 @@
 
         amqp_maybe_release_buffers (conf->connection);
     } /* while (subscriber_threads_running) */
 
     camqp_config_free (conf);
     pthread_exit (NULL);
-    return (NULL);
 } /* }}} void *camqp_subscribe_thread */
 
 static int camqp_subscribe_init (camqp_config_t *conf) /* {{{ */
 {
     int status;
     pthread_t *tmp;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/apcups.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/apcups.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/apcups.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/apcups.c	2012-04-02 16:04:58.000000000 +0800
@@ -1,9 +1,9 @@
 /*
  * collectd - src/apcups.c
- * Copyright (C) 2006-2012  Florian octo Forster
+ * Copyright (C) 2006-2007  Florian octo Forster
  * Copyright (C) 2006       Anthony Gialluca <tonyabg at charter.net>
  * Copyright (C) 2000-2004  Kern Sibbald
  * Copyright (C) 1996-1999  Andre M. Hedrick <andre at suse.com>
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of version 2 of the GNU General
@@ -70,49 +70,40 @@
 /* Default values for contacting daemon */
 static char *conf_host = NULL;
 static int   conf_port = NISPORT;
 
 static int global_sockfd = -1;
 
-static int count_retries = 0;
-static int count_iterations = 0;
-static _Bool close_socket = 0;
-
 static const char *config_keys[] =
 {
 	"Host",
 	"Port",
 	NULL
 };
 static int config_keys_num = 2;
 
-static int net_shutdown (int *fd)
+/* Close the network connection */
+static int apcups_shutdown (void)
 {
 	uint16_t packet_size = 0;
 
-	if ((fd == NULL) || (*fd < 0))
-		return (EINVAL);
+	if (global_sockfd < 0)
+		return (0);
 
-	swrite (*fd, (void *) &packet_size, sizeof (packet_size));
-	close (*fd);
-	*fd = -1;
+	DEBUG ("Gracefully shutting down socket %i.", global_sockfd);
 
-	return (0);
-} /* int net_shutdown */
+	/* send EOF sentinel */
+	swrite (global_sockfd, (void *) &packet_size, sizeof (packet_size));
 
-/* Close the network connection */
-static int apcups_shutdown (void)
-{
-	if (global_sockfd < 0)
-		return (0);
+	close (global_sockfd);
+	global_sockfd = -1;
 
-	net_shutdown (&global_sockfd);
 	return (0);
 } /* int apcups_shutdown */
 
-/*
+/*     
  * Open a TCP connection to the UPS network server
  * Returns -1 on error
  * Returns socket file descriptor otherwise
  */
 static int net_open (char *host, int port)
 {
@@ -176,13 +167,13 @@
 
 	DEBUG ("Done opening a socket %i", sd);
 
 	return (sd);
 } /* int net_open (char *host, char *service, int port) */
 
-/*
+/* 
  * Receive a message from the other end. Each message consists of
  * two packets. The first is a header that contains the size
  * of the data that follows in the second packet.
  * Returns number of bytes read
  * Returns 0 on end of file
  * Returns -1 on hard end of file (i.e. network connection close)
@@ -192,35 +183,29 @@
 {
 	uint16_t packet_size;
 
 	/* get data size -- in short */
 	if (sread (*sockfd, (void *) &packet_size, sizeof (packet_size)) != 0)
 	{
-		close (*sockfd);
 		*sockfd = -1;
 		return (-1);
 	}
 
 	packet_size = ntohs (packet_size);
 	if (packet_size > buflen)
 	{
-		ERROR ("apcups plugin: Received %"PRIu16" bytes of payload "
-				"but have only %i bytes of buffer available.",
-				packet_size, buflen);
-		close (*sockfd);
-		*sockfd = -1;
+		DEBUG ("record length too large");
 		return (-2);
 	}
 
 	if (packet_size == 0)
 		return (0);
 
 	/* now read the actual data */
 	if (sread (*sockfd, (void *) buf, packet_size) != 0)
 	{
-		close (*sockfd);
 		*sockfd = -1;
 		return (-1);
 	}
 
 	return ((int) packet_size);
 } /* static int net_recv (int *sockfd, char *buf, int buflen) */
@@ -241,21 +226,19 @@
 
 	/* send short containing size of data packet */
 	packet_size = htons ((uint16_t) len);
 
 	if (swrite (*sockfd, (void *) &packet_size, sizeof (packet_size)) != 0)
 	{
-		close (*sockfd);
 		*sockfd = -1;
 		return (-1);
 	}
 
 	/* send data packet */
 	if (swrite (*sockfd, (void *) buff, len) != 0)
 	{
-		close (*sockfd);
 		*sockfd = -1;
 		return (-2);
 	}
 
 	return (0);
 }
@@ -267,66 +250,34 @@
 	int     n;
 	char    recvline[1024];
 	char   *tokptr;
 	char   *toksaveptr;
 	char   *key;
 	double  value;
-	_Bool retry = 1;
-	int status;
 
 #if APCMAIN
 # define PRINT_VALUE(name, val) printf("  Found property: name = %s; value = %f;\n", name, val)
 #else
 # define PRINT_VALUE(name, val) /**/
 #endif
 
-	while (retry)
+	if (global_sockfd < 0)
 	{
+		global_sockfd = net_open (host, port);
 		if (global_sockfd < 0)
 		{
-			global_sockfd = net_open (host, port);
-			if (global_sockfd < 0)
-			{
-				ERROR ("apcups plugin: Connecting to the "
-						"apcupsd failed.");
-				return (-1);
-			}
-		}
-
-
-		status = net_send (&global_sockfd, "status", strlen ("status"));
-		if (status != 0)
-		{
-			/* net_send is closing the socket on error. */
-			assert (global_sockfd < 0);
-			if (retry)
-			{
-				retry = 0;
-				count_retries++;
-				continue;
-			}
-
-			ERROR ("apcups plugin: Writing to the socket failed.");
+			ERROR ("apcups plugin: Connecting to the "
+					"apcupsd failed.");
 			return (-1);
 		}
+	}
 
-		break;
-	} /* while (retry) */
-
-        /* When collectd's collection interval is larger than apcupsd's
-         * timeout, we would have to retry / re-connect each iteration. Try to
-         * detect this situation and shut down the socket gracefully in that
-         * case. Otherwise, keep the socket open to avoid overhead. */
-	count_iterations++;
-	if ((count_iterations == 10) && (count_retries > 2))
-	{
-		NOTICE ("apcups plugin: There have been %i retries in the "
-				"first %i iterations. Will close the socket "
-				"in future iterations.",
-				count_retries, count_iterations);
-		close_socket = 1;
+	if (net_send (&global_sockfd, "status", 6) < 0)
+	{
+		ERROR ("apcups plugin: Writing to the socket failed.");
+		return (-1);
 	}
 
 	while ((n = net_recv (&global_sockfd, recvline, sizeof (recvline) - 1)) > 0)
 	{
 		assert ((unsigned int)n < sizeof (recvline));
 		recvline[n] = '\0';
@@ -344,13 +295,13 @@
 			value = atof (tokptr);
 
 			PRINT_VALUE (key, value);
 
 			if (strcmp ("LINEV", key) == 0)
 				apcups_detail->linev = value;
-			else if (strcmp ("BATTV", key) == 0)
+			else if (strcmp ("BATTV", key) == 0) 
 				apcups_detail->battv = value;
 			else if (strcmp ("ITEMP", key) == 0)
 				apcups_detail->itemp = value;
 			else if (strcmp ("LOADPCT", key) == 0)
 				apcups_detail->loadpct = value;
 			else if (strcmp ("BCHARGE", key) == 0)
@@ -362,22 +313,16 @@
 			else if (strcmp ("TIMELEFT", key) == 0)
 				apcups_detail->timeleft = value;
 
 			tokptr = strtok_r (NULL, ":", &toksaveptr);
 		} /* while (tokptr != NULL) */
 	}
-	status = errno; /* save errno, net_shutdown() may re-set it. */
-
-	if (close_socket)
-		net_shutdown (&global_sockfd);
-
+	
 	if (n < 0)
 	{
-		char errbuf[1024];
-		ERROR ("apcups plugin: Reading from socket failed: %s",
-				sstrerror (status, errbuf, sizeof (errbuf)));
+		WARNING ("apcups plugin: Error reading from socket");
 		return (-1);
 	}
 
 	return (0);
 }
 
@@ -450,18 +395,18 @@
 	apcups_detail.battv    =   -1.0;
 	apcups_detail.loadpct  =   -1.0;
 	apcups_detail.bcharge  =   -1.0;
 	apcups_detail.timeleft =   -1.0;
 	apcups_detail.itemp    = -300.0;
 	apcups_detail.linefreq =   -1.0;
-
+  
 	status = apc_query_server (conf_host == NULL
 			? APCUPS_DEFAULT_HOST
 			: conf_host,
 			conf_port, &apcups_detail);
-
+ 
 	/*
 	 * if we did not connect then do not bother submitting
 	 * zeros. We want rrd files to have NAN.
 	 */
 	if (status != 0)
 	{
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/bind.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/bind.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/bind.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/bind.c	2012-04-02 16:04:58.000000000 +0800
@@ -95,12 +95,16 @@
 {
   const char *plugin_instance;
   const char *type;
 };
 typedef struct list_info_ptr_s list_info_ptr_t;
 
+/* FIXME: Enabled by default for backwards compatibility. */
+/* TODO: Remove time parsing code. */
+static _Bool config_parse_time = 1;
+
 static char *url                   = NULL;
 static int global_opcodes          = 1;
 static int global_qtypes           = 1;
 static int global_server_stats     = 1;
 static int global_zone_maint_stats = 1;
 static int global_resolver_stats   = 0;
@@ -246,13 +250,14 @@
   value_list_t vl = VALUE_LIST_INIT;
 
   values[0] = value;
 
   vl.values = values;
   vl.values_len = 1;
-  vl.time = TIME_T_TO_CDTIME_T (ts);
+  if (config_parse_time)
+    vl.time = TIME_T_TO_CDTIME_T (ts);
   sstrncpy(vl.host, hostname_g, sizeof(vl.host));
   sstrncpy(vl.plugin, "bind", sizeof(vl.plugin));
   if (plugin_instance) {
     sstrncpy(vl.plugin_instance, plugin_instance,
         sizeof(vl.plugin_instance));
     replace_special (vl.plugin_instance, sizeof (vl.plugin_instance));
@@ -1361,12 +1366,14 @@
     else if (strcasecmp ("ResolverStats", child->key) == 0)
       bind_config_set_bool ("ResolverStats", &global_resolver_stats, child);
     else if (strcasecmp ("MemoryStats", child->key) == 0)
       bind_config_set_bool ("MemoryStats", &global_memory_stats, child);
     else if (strcasecmp ("View", child->key) == 0)
       bind_config_add_view (child);
+    else if (strcasecmp ("ParseTime", child->key) == 0)
+      cf_util_get_boolean (child, &config_parse_time);
     else
     {
       WARNING ("bind plugin: Unknown configuration option "
           "`%s' will be ignored.", child->key);
     }
   }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.1	2012-11-11 19:39:08.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.1	2012-04-02 16:16:50.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD 1"
-.TH COLLECTD 1 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD 1 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd \- System statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.c	2012-04-02 16:04:58.000000000 +0800
@@ -76,13 +76,12 @@
 
 	/* flushing the data might take a while,
 	 * so it should be done asynchronously */
 	pthread_attr_init (&attr);
 	pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
 	pthread_create (&thread, &attr, do_flush, NULL);
-	pthread_attr_destroy (&attr);
 }
 
 static int init_hostname (void)
 {
 	const char *str;
 
@@ -180,17 +179,16 @@
 
 	return (0);
 } /* int init_global_variables */
 
 static int change_basedir (const char *orig_dir)
 {
-	char *dir;
-	size_t dirlen;
+	char *dir = strdup (orig_dir);
+	int dirlen;
 	int status;
 
-	dir = strdup (orig_dir);
 	if (dir == NULL)
 	{
 		char errbuf[1024];
 		ERROR ("strdup failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		return (-1);
@@ -201,47 +199,45 @@
 		dir[--dirlen] = '\0';
 
 	if (dirlen <= 0)
 		return (-1);
 
 	status = chdir (dir);
-	if (status == 0)
-	{
-		free (dir);
-		return (0);
-	}
-	else if (errno != ENOENT)
-	{
-		char errbuf[1024];
-		ERROR ("change_basedir: chdir (%s): %s", dir,
-				sstrerror (errno, errbuf, sizeof (errbuf)));
-		free (dir);
-		return (-1);
-	}
-
-	status = mkdir (dir, S_IRWXU | S_IRWXG | S_IRWXO);
-	if (status != 0)
-	{
-		char errbuf[1024];
-		ERROR ("change_basedir: mkdir (%s): %s", dir,
-				sstrerror (errno, errbuf, sizeof (errbuf)));
-		free (dir);
-		return (-1);
-	}
+	free (dir);
 
-	status = chdir (dir);
 	if (status != 0)
 	{
-		char errbuf[1024];
-		ERROR ("change_basedir: chdir (%s): %s", dir,
-				sstrerror (errno, errbuf, sizeof (errbuf)));
-		free (dir);
-		return (-1);
+		if (errno == ENOENT)
+		{
+			if (mkdir (orig_dir, 0755) == -1)
+			{
+				char errbuf[1024];
+				ERROR ("change_basedir: mkdir (%s): %s", orig_dir,
+						sstrerror (errno, errbuf,
+							sizeof (errbuf)));
+				return (-1);
+			}
+			else if (chdir (orig_dir) == -1)
+			{
+				char errbuf[1024];
+				ERROR ("chdir (%s): %s", orig_dir,
+						sstrerror (errno, errbuf,
+							sizeof (errbuf)));
+				return (-1);
+			}
+		}
+		else
+		{
+			char errbuf[1024];
+			ERROR ("chdir (%s): %s", orig_dir,
+					sstrerror (errno, errbuf,
+						sizeof (errbuf)));
+			return (-1);
+		}
 	}
 
-	free (dir);
 	return (0);
 } /* static int change_basedir (char *dir) */
 
 #if HAVE_LIBKSTAT
 static void update_kstat (void)
 {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.conf.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.conf.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.conf.5	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.conf.5	2012-04-02 16:16:51.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD.CONF 5"
-.TH COLLECTD.CONF 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD.CONF 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd.conf \- Configuration for the system statistics collection daemon \fBcollectd\fR
@@ -152,38 +152,28 @@
 This config file controls how the system statistics collection daemon
 \&\fBcollectd\fR behaves. The most significant option is \fBLoadPlugin\fR, which
 controls which plugins to load. These plugins ultimately define collectd's
 behavior.
 .PP
 The syntax of this config file is similar to the config file of the famous
-\&\fIApache\fR webserver. Each line contains either an option (a key and a list of
-one or more values) or a section-start or \-end. Empty lines and everything
-after a non-quoted hash-symbol (\f(CW\*(C`#\*(C'\fR) is ignored. \fIKeys\fR are unquoted
-strings, consisting only of alphanumeric characters and the underscore (\f(CW\*(C`_\*(C'\fR)
-character. Keys are handled case insensitive by \fIcollectd\fR itself and all
-plugins included with it. \fIValues\fR can either be an \fIunquoted string\fR, a
-\&\fIquoted string\fR (enclosed in double-quotes) a \fInumber\fR or a \fIboolean\fR
-expression. \fIUnquoted strings\fR consist of only alphanumeric characters and
-underscores (\f(CW\*(C`_\*(C'\fR) and do not need to be quoted. \fIQuoted strings\fR are
-enclosed in double quotes (\f(CW\*(C`"\*(C'\fR). You can use the backslash character (\f(CW\*(C`\e\*(C'\fR)
-to include double quotes as part of the string. \fINumbers\fR can be specified in
-decimal and floating point format (using a dot \f(CW\*(C`.\*(C'\fR as decimal separator),
-hexadecimal when using the \f(CW\*(C`0x\*(C'\fR prefix and octal with a leading zero (\f(CW0\fR).
-\&\fIBoolean\fR values are either \fBtrue\fR or \fBfalse\fR.
-.PP
-Lines may be wrapped by using \f(CW\*(C`\e\*(C'\fR as the last character before the newline.
-This allows long lines to be split into multiple lines. Quoted strings may be
-wrapped as well. However, those are treated special in that whitespace at the
-beginning of the following lines will be ignored, which allows for nicely
-indenting the wrapped lines.
-.PP
-The configuration is read and processed in order, i.e. from top to bottom. So
-the plugins are loaded in the order listed in this config file. It is a good
-idea to load any logging plugins first in order to catch messages from plugins
-during configuration. Also, the \f(CW\*(C`LoadPlugin\*(C'\fR option \fBmust\fR occur \fBbefore\fR
-the appropriate \f(CW\*(C`<Plugin ...>\*(C'\fR block.
+\&\fBApache Webserver\fR. Each line contains either a key-value-pair or a
+section-start or \-end. Empty lines and everything after the hash-symbol `#' is
+ignored. Values are either string, enclosed in double-quotes,
+(floating\-point\-)numbers or a boolean expression, i.\ e. either \fBtrue\fR or
+\&\fBfalse\fR. String containing of only alphanumeric characters and underscores do
+not need to be quoted. Lines may be wrapped by using `\e' as the last character
+before the newline. This allows long lines to be split into multiple lines.
+Quoted strings may be wrapped as well. However, those are treated special in
+that whitespace at the beginning of the following lines will be ignored, which
+allows for nicely indenting the wrapped lines.
+.PP
+The configuration is read and processed in order, i.\ e. from top to
+bottom. So the plugins are loaded in the order listed in this config file. It
+is a good idea to load any logging plugins first in order to catch messages
+from plugins during configuration. Also, the \f(CW\*(C`LoadPlugin\*(C'\fR option \fBmust\fR occur
+\&\fBbefore\fR the \f(CW\*(C`<Plugin ...>\*(C'\fR block.
 .SH "GLOBAL OPTIONS"
 .IX Header "GLOBAL OPTIONS"
 .IP "\fBBaseDir\fR \fIDirectory\fR" 4
 .IX Item "BaseDir Directory"
 Sets the base directory. This is the directory beneath all RRD-files are
 created. Possibly more subdirectories are created. This is also the working
@@ -576,15 +566,16 @@
 data with an \s-1XSLT\s0 compatible viewer, such as a modern web browser. It's
 probably a good idea to make yourself familiar with the provided values, so you
 can understand what the collected statistics actually mean.
 .PP
 Synopsis:
 .PP
-.Vb 4
+.Vb 5
 \& <Plugin "bind">
 \&   URL "http://localhost:8053/"
+\&   ParseTime       false
 \&   OpCodes         true
 \&   QTypes          true
 \& 
 \&   ServerStats     true
 \&   ZoneMaintStats  true
 \&   ResolverStats   false
@@ -602,37 +593,45 @@
 .PP
 The bind plugin accepts the following configuration options:
 .IP "\fB\s-1URL\s0\fR \fI\s-1URL\s0\fR" 4
 .IX Item "URL URL"
 \&\s-1URL\s0 from which to retrieve the \s-1XML\s0 data. If not specified,
 \&\f(CW\*(C`http://localhost:8053/\*(C'\fR will be used.
-.IP "\fBOpCodes\fR \fItrue\fR|\fIfalse\fR" 4
+.IP "\fBParseTime\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "ParseTime true|false"
+When set to \fBtrue\fR, the time provided by \s-1BIND\s0 will be parsed and used to
+dispatch the values. When set to \fBfalse\fR, the local time source is queried.
+.Sp
+This setting is set to \fBtrue\fR by default for backwards compatibility; setting
+this to \fBfalse\fR is \fIrecommended\fR to avoid problems with timezones and
+localization.
+.IP "\fBOpCodes\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "OpCodes true|false"
 When enabled, statistics about the \fI\*(L"OpCodes\*(R"\fR, for example the number of
 \&\f(CW\*(C`QUERY\*(C'\fR packets, are collected.
 .Sp
 Default: Enabled.
-.IP "\fBQTypes\fR \fItrue\fR|\fIfalse\fR" 4
+.IP "\fBQTypes\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "QTypes true|false"
 When enabled, the number of \fIincoming\fR queries by query types (for example
 \&\f(CW\*(C`A\*(C'\fR, \f(CW\*(C`MX\*(C'\fR, \f(CW\*(C`AAAA\*(C'\fR) is collected.
 .Sp
 Default: Enabled.
-.IP "\fBServerStats\fR \fItrue\fR|\fIfalse\fR" 4
+.IP "\fBServerStats\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "ServerStats true|false"
 Collect global server statistics, such as requests received over IPv4 and IPv6,
 successful queries, and failed updates.
 .Sp
 Default: Enabled.
-.IP "\fBZoneMaintStats\fR \fItrue\fR|\fIfalse\fR" 4
+.IP "\fBZoneMaintStats\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "ZoneMaintStats true|false"
 Collect zone maintenance statistics, mostly information about notifications
 (zone updates) and zone transfers.
 .Sp
 Default: Enabled.
-.IP "\fBResolverStats\fR \fItrue\fR|\fIfalse\fR" 4
+.IP "\fBResolverStats\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "ResolverStats true|false"
 Collect resolver statistics, i.\ e. statistics about outgoing requests
 (e.\ g. queries over IPv4, lame servers). Since the global resolver
 counters apparently were removed in \s-1BIND\s0 9.5.1 and 9.6.0, this is disabled by
 default. Use the \fBResolverStats\fR option within a \fBView \*(L"_default\*(R"\fR block
 instead for the same functionality.
@@ -651,25 +650,25 @@
 likely are only interested in the \f(CW\*(C`_default\*(C'\fR view.
 .Sp
 Within a <\fBView\fR\ \fIname\fR> block, you can specify which
 information you want to collect about a view. If no \fBView\fR block is
 configured, no detailed view statistics will be collected.
 .RS 4
-.IP "\fBQTypes\fR \fItrue\fR|\fIfalse\fR" 4
+.IP "\fBQTypes\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "QTypes true|false"
 If enabled, the number of \fIoutgoing\fR queries by query type (e.\ g. \f(CW\*(C`A\*(C'\fR,
 \&\f(CW\*(C`MX\*(C'\fR) is collected.
 .Sp
 Default: Enabled.
-.IP "\fBResolverStats\fR \fItrue\fR|\fIfalse\fR" 4
+.IP "\fBResolverStats\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "ResolverStats true|false"
 Collect resolver statistics, i.\ e. statistics about outgoing requests
 (e.\ g. queries over IPv4, lame servers).
 .Sp
 Default: Enabled.
-.IP "\fBCacheRRSets\fR \fItrue\fR|\fIfalse\fR" 4
+.IP "\fBCacheRRSets\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "CacheRRSets true|false"
 If enabled, the number of entries (\fI\*(L"\s-1RR\s0 sets\*(R"\fR) in the view's cache by query
 type is collected. Negative entries (queries which resulted in an error, for
 example names that do not exist) are reported with a leading exclamation mark,
 e.\ g. \*(L"!A\*(R".
 .Sp
@@ -1267,12 +1266,42 @@
 .IP "\fBMaxConns\fR \fINumber\fR" 4
 .IX Item "MaxConns Number"
 Sets the maximum number of connections that can be handled in parallel. Since
 this many threads will be started immediately setting this to a very high
 value will waste valuable resources. Defaults to \fB5\fR and will be forced to be
 at most \fB16384\fR to prevent typos and dumb mistakes.
+.ie n .SS "Plugin ""ethstat"""
+.el .SS "Plugin \f(CWethstat\fP"
+.IX Subsection "Plugin ethstat"
+The \fIethstat plugin\fR collects information about network interface cards (NICs)
+by talking directly with the underlying kernel driver using \fIioctl\fR\|(2).
+.PP
+\&\fBSynopsis:\fR
+.PP
+.Vb 5
+\& <Plugin "ethstat">
+\&   Interface "eth0"
+\&   Map "rx_csum_offload_errors" "if_rx_errors" "checksum_offload"
+\&   Map "multicast" "if_multicast"
+\& </Plugin>
+.Ve
+.PP
+\&\fBOptions:\fR
+.IP "\fBInterface\fR \fIName\fR" 4
+.IX Item "Interface Name"
+Collect statistical information about interface \fIName\fR.
+.IP "\fBMap\fR \fIName\fR \fIType\fR [\fITypeInstance\fR]" 4
+.IX Item "Map Name Type [TypeInstance]"
+By default, the plugin will submit values as type \f(CW\*(C`derive\*(C'\fR and \fItype
+instance\fR set to \fIName\fR, the name of the metric as reported by the driver. If
+an appropriate \fBMap\fR option exists, the given \fIType\fR and, optionally,
+\&\fITypeInstance\fR will be used.
+.IP "\fBMappedOnly\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "MappedOnly true|false"
+When set to \fBtrue\fR, only metrics that can be mapped to to a \fItype\fR will be
+collected, all other metrics will be ignored. Defaults to \fBfalse\fR.
 .ie n .SS "Plugin ""exec"""
 .el .SS "Plugin \f(CWexec\fP"
 .IX Subsection "Plugin exec"
 Please make sure to read \fIcollectd\-exec\fR\|(5) before using this plugin. It
 contains valuable information on when the executable is executed and the
 output that is expected from it.
@@ -1730,12 +1759,31 @@
 .IP "\fBHost\fR \fIHostname\fR" 4
 .IX Item "Host Hostname"
 Hostname to connect to. Defaults to \fB127.0.0.1\fR.
 .IP "\fBPort\fR \fIPort\fR" 4
 .IX Item "Port Port"
 TCP-Port to connect to. Defaults to \fB411\fR.
+.ie n .SS "Plugin ""md"""
+.el .SS "Plugin \f(CWmd\fP"
+.IX Subsection "Plugin md"
+The \f(CW\*(C`md plugin\*(C'\fR collects information from Linux Software-RAID devices (md).
+.PP
+All reported values are of the type \f(CW\*(C`md_disks\*(C'\fR. Reported type instances are
+\&\fIactive\fR, \fIfailed\fR (present but not operational), \fIspare\fR (hot stand-by) and
+\&\fImissing\fR (physically absent) disks.
+.IP "\fBDevice\fR \fIDevice\fR" 4
+.IX Item "Device Device"
+Select md devices based on device name. The \fIdevice name\fR is the basename of
+the device, i.e. the name of the block device without the leading \f(CW\*(C`/dev/\*(C'\fR.
+See \fBIgnoreSelected\fR for more details.
+.IP "\fBIgnoreSelected\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "IgnoreSelected true|false"
+Invert device selection: If set to \fBtrue\fR, all md devices \fBexcept\fR those
+listed using \fBDevice\fR are collected. If \fBfalse\fR (the default), only those
+listed are collected. If no configuration is given, the \fBmd\fR plugin will
+collect data from all md devices.
 .ie n .SS "Plugin ""memcachec"""
 .el .SS "Plugin \f(CWmemcachec\fP"
 .IX Subsection "Plugin memcachec"
 The \f(CW\*(C`memcachec plugin\*(C'\fR connects to a memcached server, queries one or more
 given \fIpages\fR and parses the returned data according to user specification.
 The \fImatches\fR used are the same as the matches used in the \f(CW\*(C`curl\*(C'\fR and \f(CW\*(C`tail\*(C'\fR
@@ -1836,17 +1884,17 @@
 .RS 4
 .IP "\fBRegisterBase\fR \fINumber\fR" 4
 .IX Item "RegisterBase Number"
 Configures the base register to read from the device. If the option
 \&\fBRegisterType\fR has been set to \fBUint32\fR or \fBFloat\fR, this and the next
 register will be read (the register number is increased by one).
-.IP "\fBRegisterType\fR \fBUint16\fR|\fBUint32\fR|\fBFloat\fR" 4
-.IX Item "RegisterType Uint16|Uint32|Float"
-Specifies what kind of data is returned by the device. If the type is \fBUint32\fR
-or \fBFloat\fR, two 16\ bit registers will be read and the data is combined
-into one value. Defaults to \fBUint16\fR.
+.IP "\fBRegisterType\fR \fBInt16\fR|\fBInt32\fR|\fBUint16\fR|\fBUint32\fR|\fBFloat\fR" 4
+.IX Item "RegisterType Int16|Int32|Uint16|Uint32|Float"
+Specifies what kind of data is returned by the device. If the type is \fBInt32\fR,
+\&\fBUint32\fR or \fBFloat\fR, two 16\ bit registers will be read and the data is
+combined into one value. Defaults to \fBUint16\fR.
 .IP "\fBType\fR \fIType\fR" 4
 .IX Item "Type Type"
 Specifies the \*(L"type\*(R" (data set) to use when dispatching the value to
 \&\fIcollectd\fR. Currently, only data sets with exactly one data source are
 supported.
 .IP "\fBInstance\fR \fIInstance\fR" 4
@@ -3838,12 +3886,16 @@
 that all the needed modules have to be loaded and lm_sensors has to be
 configured (most likely by editing \fI/etc/sensors.conf\fR. Read
 \&\fIsensors.conf\fR\|(5) for details.
 .PP
 The \fBlm_sensors\fR homepage can be found at
 <http://secure.netroedge.com/~lm78/>.
+.IP "\fBSensorConfigFile\fR \fIFile\fR" 4
+.IX Item "SensorConfigFile File"
+Read the \fIlm_sensors\fR configuration from \fIFile\fR. When unset (recommended),
+the library's default will be used.
 .IP "\fBSensor\fR \fIchip\-bus\-address/type\-feature\fR" 4
 .IX Item "Sensor chip-bus-address/type-feature"
 Selects the name of the sensor which you want to collect or ignore, depending
 on the \fBIgnoreSelected\fR below. For example, the option "\fBSensor\fR
 \&\fIit8712\-isa\-0290/voltage\-in1\fR" will cause collectd to gather data for the
 voltage sensor \fIin1\fR of the \fIit8712\fR on the isa bus at the address 0290.
@@ -3863,33 +3915,41 @@
 other plugins, its documentation has been moved to an own manpage,
 \&\fIcollectd\-snmp\fR\|(5). Please see there for details.
 .ie n .SS "Plugin ""swap"""
 .el .SS "Plugin \f(CWswap\fP"
 .IX Subsection "Plugin swap"
 The \fISwap plugin\fR collects information about used and available swap space. On
-\&\fISolaris\fR, the following options are available:
+\&\fILinux\fR and \fISolaris\fR, the following options are available:
 .IP "\fBReportByDevice\fR \fBfalse\fR|\fBtrue\fR" 4
 .IX Item "ReportByDevice false|true"
-Configures how to report physical swap devices. If set to \fBfalse\fR is used (the
+Configures how to report physical swap devices. If set to \fBfalse\fR (the
 default), the summary over all swap devices is reported only, i.e. the globally
 used and available space over all devices. If \fBtrue\fR is configured, the used
 and available space of each device will be reported separately.
 .Sp
-This option is only available if the \fISwap plugin\fR can use the \fIswapctl\fR\|(2)
-mechanism under \fISolaris\fR.
+This option is only available if the \fISwap plugin\fR can read \f(CW\*(C`/proc/swaps\*(C'\fR
+(under Linux) or use the \fIswapctl\fR\|(2) mechanism (under \fISolaris\fR).
 .ie n .SS "Plugin ""syslog"""
 .el .SS "Plugin \f(CWsyslog\fP"
 .IX Subsection "Plugin syslog"
 .IP "\fBLogLevel\fR \fBdebug|info|notice|warning|err\fR" 4
 .IX Item "LogLevel debug|info|notice|warning|err"
 Sets the log-level. If, for example, set to \fBnotice\fR, then all events with
 severity \fBnotice\fR, \fBwarning\fR, or \fBerr\fR will be submitted to the
 syslog-daemon.
 .Sp
 Please note that \fBdebug\fR is only available if collectd has been compiled with
 debugging support.
+.IP "\fBNotifyLevel\fR \fB\s-1OKAY\s0\fR|\fB\s-1WARNING\s0\fR|\fB\s-1FAILURE\s0\fR" 4
+.IX Item "NotifyLevel OKAY|WARNING|FAILURE"
+Controls which notifications should be sent to syslog. The default behaviour is
+not to send any. Less severe notifications always imply logging more severe
+notifications: Setting this to \fB\s-1OKAY\s0\fR means all notifications will be sent to
+syslog, setting this to \fB\s-1WARNING\s0\fR will send \fB\s-1WARNING\s0\fR and \fB\s-1FAILURE\s0\fR
+notifications but will dismiss \fB\s-1OKAY\s0\fR notifications. Setting this option to
+\&\fB\s-1FAILURE\s0\fR will only send failures to syslog.
 .ie n .SS "Plugin ""table"""
 .el .SS "Plugin \f(CWtable\fP"
 .IX Subsection "Plugin table"
 The \f(CW\*(C`table plugin\*(C'\fR provides generic means to parse tabular data and dispatch
 user specified values. Values are selected based on column numbers. For
 example, this plugin may be used to get values from the Linux \fIproc\fR\|(5)
@@ -4341,12 +4401,105 @@
 .PP
 \&\fBNote\fR: The traffic collected by this plugin accounts for the amount of
 traffic passing a socket which might be a lot less than the actual on-wire
 traffic (e.\ g. due to headers and retransmission). If you want to
 collect on-wire traffic you could, for example, use the logging facilities of
 iptables to feed data for the guest IPs into the iptables plugin.
+.ie n .SS "Plugin ""write_graphite"""
+.el .SS "Plugin \f(CWwrite_graphite\fP"
+.IX Subsection "Plugin write_graphite"
+The \f(CW\*(C`write_graphite\*(C'\fR plugin writes data to \fIGraphite\fR, an open-source metrics
+storage and graphing project. The plugin connects to \fICarbon\fR, the data layer
+of \fIGraphite\fR, and sends data via the \*(L"line based\*(R" protocol (per default using
+port\ 2003). The data will be sent in blocks of at most 1428 bytes to
+minimize the number of network packets.
+.PP
+Synopsis:
+.PP
+.Vb 7
+\& <Plugin write_graphite>
+\&   <Carbon>
+\&     Host "localhost"
+\&     Port "2003"
+\&     Prefix "collectd"
+\&   </Carbon>
+\& </Plugin>
+.Ve
+.IP "\fBHost\fR \fIAddress\fR" 4
+.IX Item "Host Address"
+Hostname or address to connect to. Defaults to \f(CW\*(C`localhost\*(C'\fR.
+.IP "\fBPort\fR \fIService\fR" 4
+.IX Item "Port Service"
+Service name or port number to connect to. Defaults to \f(CW2003\fR.
+.IP "\fBPrefix\fR \fIString\fR" 4
+.IX Item "Prefix String"
+When set, \fIString\fR is added in front of the host name. Dots and whitespace are
+\&\fInot\fR escaped in this string (see \fBEscapeCharacter\fR below).
+.IP "\fBPostfix\fR \fIString\fR" 4
+.IX Item "Postfix String"
+When set, \fIString\fR is appended to the host name. Dots and whitespace are
+\&\fInot\fR escaped in this string (see \fBEscapeCharacter\fR below).
+.IP "\fBEscapeCharacter\fR \fIChar\fR" 4
+.IX Item "EscapeCharacter Char"
+\&\fICarbon\fR uses the dot (\f(CW\*(C`.\*(C'\fR) as escape character and doesn't allow whitespace
+in the identifier. The \fBEscapeCharacter\fR option determines which character
+dots, whitespace and control characters are replaced with. Defaults to
+underscore (\f(CW\*(C`_\*(C'\fR).
+.IP "\fBStoreRates\fR \fBfalse\fR|\fBtrue\fR" 4
+.IX Item "StoreRates false|true"
+If set to \fBtrue\fR (the default), convert counter values to rates. If set to
+\&\fBfalse\fR counter values are stored as is, i.\ e. as an increasing integer
+number.
+.IP "\fBSeparateInstances\fR \fBfalse\fR|\fBtrue\fR" 4
+.IX Item "SeparateInstances false|true"
+If set to \fBtrue\fR, the plugin instance and type instance will be in their own
+path component, for example \f(CW\*(C`host.cpu.0.cpu.idle\*(C'\fR. If set to \fBfalse\fR (the
+default), the plugin and plugin instance (and likewise the type and type
+instance) are put into once component, for example \f(CW\*(C`host.cpu\-0.cpu\-idle\*(C'\fR.
+.IP "\fBAlwaysAppendDS\fR \fBfalse\fR|\fBtrue\fR" 4
+.IX Item "AlwaysAppendDS false|true"
+If set the \fBtrue\fR, append the name of the \fIData Source\fR (\s-1DS\s0) to the \*(L"metric\*(R"
+identifier. If set to \fBfalse\fR (the default), this is only done when there is
+more than one \s-1DS\s0.
+.ie n .SS "Plugin ""write_mongodb"""
+.el .SS "Plugin \f(CWwrite_mongodb\fP"
+.IX Subsection "Plugin write_mongodb"
+The \fIwrite_mongodb plugin\fR will send values to \fIMongoDB\fR, a schema-less
+NoSQL database.
+.PP
+\&\fBSynopsis:\fR
+.PP
+.Vb 8
+\& <Plugin "write_mongodb">
+\&   <Node "default">
+\&     Host "localhost"
+\&     Port "27017"
+\&     Timeout 1000
+\&     StoreRates true
+\&   </Node>
+\& </Plugin>
+.Ve
+.PP
+The plugin can send values to multiple instances of \fIMongoDB\fR by specifying
+one \fBNode\fR block for each instance. Within the \fBNode\fR blocks, the following
+options are available:
+.IP "\fBHost\fR \fIAddress\fR" 4
+.IX Item "Host Address"
+Hostname or address to connect to. Defaults to \f(CW\*(C`localhost\*(C'\fR.
+.IP "\fBPort\fR \fIService\fR" 4
+.IX Item "Port Service"
+Service name or port number to connect to. Defaults to \f(CW27017\fR.
+.IP "\fBTimeout\fR \fITimeout\fR" 4
+.IX Item "Timeout Timeout"
+Set the timeout for each operation on \fIMongoDB\fR to \fITimeout\fR milliseconds.
+Setting this option to zero means no timeout, which is the default.
+.IP "\fBStoreRates\fR \fBfalse\fR|\fBtrue\fR" 4
+.IX Item "StoreRates false|true"
+If set to \fBtrue\fR (the default), convert counter values to rates. If set to
+\&\fBfalse\fR counter values are stored as is, i.e. as an increasing integer
+number.
 .ie n .SS "Plugin ""write_http"""
 .el .SS "Plugin \f(CWwrite_http\fP"
 .IX Subsection "Plugin write_http"
 This output plugin submits values to an http server by \s-1POST\s0 them using the
 \&\s-1PUTVAL\s0 plain-text protocol. Each destination you want to post data to needs to
 have one \fB\s-1URL\s0\fR block, within which the destination can be configured further,
@@ -5155,15 +5308,15 @@
 convert counter values to rates.
 .RE
 .RS 4
 .Sp
 Please note that these placeholders are \fBcase sensitive\fR!
 .RE
-.ie n .IP "\fBSeverity\fR \fB""\s-1FATAL\s0""\fR|\fB""\s-1WARNING\s0""\fR|\fB""\s-1OKAY\s0""\fR" 4
-.el .IP "\fBSeverity\fR \fB``\s-1FATAL\s0''\fR|\fB``\s-1WARNING\s0''\fR|\fB``\s-1OKAY\s0''\fR" 4
-.IX Item "Severity FATAL|WARNING|OKAY"
+.ie n .IP "\fBSeverity\fR \fB""\s-1FAILURE\s0""\fR|\fB""\s-1WARNING\s0""\fR|\fB""\s-1OKAY\s0""\fR" 4
+.el .IP "\fBSeverity\fR \fB``\s-1FAILURE\s0''\fR|\fB``\s-1WARNING\s0''\fR|\fB``\s-1OKAY\s0''\fR" 4
+.IX Item "Severity FAILURE|WARNING|OKAY"
 Sets the severity of the message. If omitted, the severity \fB\*(L"\s-1WARNING\s0\*(R"\fR is
 used.
 .RE
 .RS 4
 .Sp
 Example:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.conf.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.conf.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.conf.in	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.conf.in	2012-04-02 16:04:58.000000000 +0800
@@ -70,12 +70,13 @@
 #@BUILD_PLUGIN_DBI_TRUE@LoadPlugin dbi
 #@BUILD_PLUGIN_DF_TRUE@LoadPlugin df
 #@BUILD_PLUGIN_DISK_TRUE@LoadPlugin disk
 #@BUILD_PLUGIN_DNS_TRUE@LoadPlugin dns
 #@BUILD_PLUGIN_EMAIL_TRUE@LoadPlugin email
 #@BUILD_PLUGIN_ENTROPY_TRUE@LoadPlugin entropy
+#@BUILD_PLUGIN_ETHSTAT_TRUE@LoadPlugin ethstat
 #@BUILD_PLUGIN_EXEC_TRUE@LoadPlugin exec
 #@BUILD_PLUGIN_FILECOUNT_TRUE@LoadPlugin filecount
 #@BUILD_PLUGIN_FSCACHE_TRUE@LoadPlugin fscache
 #@BUILD_PLUGIN_GMOND_TRUE@LoadPlugin gmond
 #@BUILD_PLUGIN_HDDTEMP_TRUE@LoadPlugin hddtemp
 @BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_PLUGIN_INTERFACE_TRUE@LoadPlugin interface
@@ -86,12 +87,13 @@
 #@BUILD_PLUGIN_JAVA_TRUE@LoadPlugin java
 #@BUILD_PLUGIN_LIBVIRT_TRUE@LoadPlugin libvirt
 @BUILD_PLUGIN_LOAD_TRUE@@BUILD_PLUGIN_LOAD_TRUE@LoadPlugin load
 #@BUILD_PLUGIN_LPAR_TRUE@LoadPlugin lpar
 #@BUILD_PLUGIN_MADWIFI_TRUE@LoadPlugin madwifi
 #@BUILD_PLUGIN_MBMON_TRUE@LoadPlugin mbmon
+#@BUILD_PLUGIN_MD_TRUE@LoadPlugin md
 #@BUILD_PLUGIN_MEMCACHEC_TRUE@LoadPlugin memcachec
 #@BUILD_PLUGIN_MEMCACHED_TRUE@LoadPlugin memcached
 @BUILD_PLUGIN_MEMORY_TRUE@@BUILD_PLUGIN_MEMORY_TRUE@LoadPlugin memory
 #@BUILD_PLUGIN_MODBUS_TRUE@LoadPlugin modbus
 #@BUILD_PLUGIN_MULTIMETER_TRUE@LoadPlugin multimeter
 #@BUILD_PLUGIN_MYSQL_TRUE@LoadPlugin mysql
@@ -100,12 +102,13 @@
 @LOAD_PLUGIN_NETWORK@LoadPlugin network
 #@BUILD_PLUGIN_NFS_TRUE@LoadPlugin nfs
 #@BUILD_PLUGIN_NGINX_TRUE@LoadPlugin nginx
 #@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@LoadPlugin notify_desktop
 #@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@LoadPlugin notify_email
 #@BUILD_PLUGIN_NTPD_TRUE@LoadPlugin ntpd
+#@BUILD_PLUGIN_NUMA_TRUE@LoadPlugin numa
 #@BUILD_PLUGIN_NUT_TRUE@LoadPlugin nut
 #@BUILD_PLUGIN_OLSRD_TRUE@LoadPlugin olsrd
 #@BUILD_PLUGIN_ONEWIRE_TRUE@LoadPlugin onewire
 #@BUILD_PLUGIN_OPENVPN_TRUE@LoadPlugin openvpn
 #@BUILD_PLUGIN_ORACLE_TRUE@LoadPlugin oracle
 #@BUILD_PLUGIN_PERL_TRUE@<LoadPlugin perl>
@@ -141,14 +144,16 @@
 #@BUILD_PLUGIN_USERS_TRUE@LoadPlugin users
 #@BUILD_PLUGIN_UUID_TRUE@LoadPlugin uuid
 #@BUILD_PLUGIN_VARNISH_TRUE@LoadPlugin varnish
 #@BUILD_PLUGIN_VMEM_TRUE@LoadPlugin vmem
 #@BUILD_PLUGIN_VSERVER_TRUE@LoadPlugin vserver
 #@BUILD_PLUGIN_WIRELESS_TRUE@LoadPlugin wireless
+#@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@LoadPlugin write_graphite
 #@BUILD_PLUGIN_WRITE_HTTP_TRUE@LoadPlugin write_http
 #@BUILD_PLUGIN_WRITE_REDIS_TRUE@LoadPlugin write_redis
+#@BUILD_PLUGIN_WRITE_MONGODB_TRUE@LoadPlugin write_mongodb
 #@BUILD_PLUGIN_XMMS_TRUE@LoadPlugin xmms
 #@BUILD_PLUGIN_ZFS_ARC_TRUE@LoadPlugin zfs_arc
 
 ##############################################################################
 # Plugin configuration                                                       #
 #----------------------------------------------------------------------------#
@@ -190,12 +195,13 @@
 #	Password "secret"
 #	CACert "/etc/ssl/ca.crt"
 #</Plugin>
 
 #<Plugin "bind">
 #  URL "http://localhost:8053/"
+#  ParseTime       false
 #  OpCodes         true
 #  QTypes          true
 #
 #  ServerStats     true
 #  ZoneMaintStats  true
 #  ResolverStats   false
@@ -327,12 +333,19 @@
 #	SocketFile "@prefix@/var/run/@PACKAGE_NAME@-email"
 #	SocketGroup "collectd"
 #	SocketPerms "0770"
 #	MaxConns 5
 #</Plugin>
 
+#<Plugin ethstat>
+#	Interface "eth0"
+#	Map "rx_csum_offload_errors" "if_rx_errors" "checksum_offload"
+#	Map "multicast" "if_multicast"
+#	MappedOnly false
+#</Plugin>
+
 #<Plugin exec>
 #	Exec "user:group" "/path/to/exec"
 #	NotificationExec "user:group" "/path/to/exec"
 #</Plugin>
 
 #<Plugin filecount>
@@ -429,12 +442,17 @@
 
 #<Plugin mbmon>
 #	Host "127.0.0.1"
 #	Port "411"
 #</Plugin>
 
+#<Plugin md>
+#	Device "/dev/md0"
+#	IgnoreSelected false
+#</Plugin>
+
 #<Plugin memcachec>
 #	<Page "plugin_instance">
 #		Server "localhost"
 #		Key "page_key"
 #		<Match>
 #			Regex "(\\d+) bytes sent"
@@ -795,12 +813,13 @@
 #	DataDir "@prefix@/var/lib/@PACKAGE_NAME@/rrd"
 #	CacheTimeout 120
 #	CacheFlush   900
 #</Plugin>
 
 #<Plugin sensors>
+#	SensorConfigFile "/etc/sensors.conf"
 #	Sensor "it8712-isa-0290/temperature-temp1"
 #	Sensor "it8712-isa-0290/fanspeed-fan3"
 #	Sensor "it8712-isa-0290/voltage-in8"
 #	IgnoreSelected false
 #</Plugin>
 
@@ -843,12 +862,16 @@
 #       Community "more_communities"
 #       Collect "powerplus_voltge_input"
 #       Interval 300
 #   </Host>
 #</Plugin>
 
+#<Plugin "swap">
+#	ReportByDevice false
+#</Plugin>
+
 #<Plugin "table">
 #	<Table "/proc/slabinfo">
 #		Instance "slabinfo"
 #		Separator " "
 #		<Result>
 #			Type gauge
@@ -945,12 +968,24 @@
 #</Plugin>
 
 #<Plugin vmem>
 #	Verbose false
 #</Plugin>
 
+#<Plugin write_graphite>
+#  <Carbon>
+#    Host "localhost"
+#    Port "2003"
+#    Prefix "collectd"
+#    Postfix "collectd"
+#    StoreRates false
+#    AlwaysAppendDS false
+#    EscapeCharacter "_"
+#  </Carbon>
+#</Plugin>
+
 #<Plugin write_http>
 #	<URL "http://example.com/collectd-post">
 #		User "collectd"
 #		Password "weCh3ik0"
 #		VerifyPeer true
 #		VerifyHost true
@@ -965,12 +1000,21 @@
 #		Host "localhost"
 #		Port "6379"
 #		Timeout 1000
 #	</Node>
 #</Plugin>
 
+#<Plugin write_mongodb>
+#	<Node "example">
+#		Host "localhost"
+#		Port "27017"
+#		Timeout 1000
+#		StoreRates false
+#	</Node>
+#</Plugin>
+
 ##############################################################################
 # Filter configuration                                                       #
 #----------------------------------------------------------------------------#
 # The following configures collectd's filtering mechanism. Before changing   #
 # anything in this section, please read the `FILTER CONFIGURATION' section   #
 # in the collectd.conf(5) manual page.                                       #
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.conf.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.conf.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd.conf.pod	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd.conf.pod	2012-04-02 16:04:58.000000000 +0800
@@ -22,38 +22,28 @@
 This config file controls how the system statistics collection daemon
 B<collectd> behaves. The most significant option is B<LoadPlugin>, which
 controls which plugins to load. These plugins ultimately define collectd's
 behavior.
 
 The syntax of this config file is similar to the config file of the famous
-I<Apache> webserver. Each line contains either an option (a key and a list of
-one or more values) or a section-start or -end. Empty lines and everything
-after a non-quoted hash-symbol (C<#>) is ignored. I<Keys> are unquoted
-strings, consisting only of alphanumeric characters and the underscore (C<_>)
-character. Keys are handled case insensitive by I<collectd> itself and all
-plugins included with it. I<Values> can either be an I<unquoted string>, a
-I<quoted string> (enclosed in double-quotes) a I<number> or a I<boolean>
-expression. I<Unquoted strings> consist of only alphanumeric characters and
-underscores (C<_>) and do not need to be quoted. I<Quoted strings> are
-enclosed in double quotes (C<">). You can use the backslash character (C<\>)
-to include double quotes as part of the string. I<Numbers> can be specified in
-decimal and floating point format (using a dot C<.> as decimal separator),
-hexadecimal when using the C<0x> prefix and octal with a leading zero (C<0>).
-I<Boolean> values are either B<true> or B<false>.
-
-Lines may be wrapped by using C<\> as the last character before the newline.
-This allows long lines to be split into multiple lines. Quoted strings may be
-wrapped as well. However, those are treated special in that whitespace at the
-beginning of the following lines will be ignored, which allows for nicely
-indenting the wrapped lines.
-
-The configuration is read and processed in order, i.e. from top to bottom. So
-the plugins are loaded in the order listed in this config file. It is a good
-idea to load any logging plugins first in order to catch messages from plugins
-during configuration. Also, the C<LoadPlugin> option B<must> occur B<before>
-the appropriate C<E<lt>Plugin ...E<gt>> block.
+B<Apache Webserver>. Each line contains either a key-value-pair or a
+section-start or -end. Empty lines and everything after the hash-symbol `#' is
+ignored. Values are either string, enclosed in double-quotes,
+(floating-point-)numbers or a boolean expression, i.E<nbsp>e. either B<true> or
+B<false>. String containing of only alphanumeric characters and underscores do
+not need to be quoted. Lines may be wrapped by using `\' as the last character
+before the newline. This allows long lines to be split into multiple lines.
+Quoted strings may be wrapped as well. However, those are treated special in
+that whitespace at the beginning of the following lines will be ignored, which
+allows for nicely indenting the wrapped lines.
+
+The configuration is read and processed in order, i.E<nbsp>e. from top to
+bottom. So the plugins are loaded in the order listed in this config file. It
+is a good idea to load any logging plugins first in order to catch messages
+from plugins during configuration. Also, the C<LoadPlugin> option B<must> occur
+B<before> the C<E<lt>Plugin ...E<gt>> block.
 
 =head1 GLOBAL OPTIONS
 
 =over 4
 
 =item B<BaseDir> I<Directory>
@@ -490,12 +480,13 @@
 can understand what the collected statistics actually mean.
 
 Synopsis:
 
  <Plugin "bind">
    URL "http://localhost:8053/"
+   ParseTime       false
    OpCodes         true
    QTypes          true
  
    ServerStats     true
    ZoneMaintStats  true
    ResolverStats   false
@@ -516,41 +507,50 @@
 
 =item B<URL> I<URL>
 
 URL from which to retrieve the XML data. If not specified,
 C<http://localhost:8053/> will be used.
 
-=item B<OpCodes> I<true>|I<false>
+=item B<ParseTime> B<true>|B<false>
+
+When set to B<true>, the time provided by BIND will be parsed and used to
+dispatch the values. When set to B<false>, the local time source is queried.
+
+This setting is set to B<true> by default for backwards compatibility; setting
+this to B<false> is I<recommended> to avoid problems with timezones and
+localization.
+
+=item B<OpCodes> B<true>|B<false>
 
 When enabled, statistics about the I<"OpCodes">, for example the number of
 C<QUERY> packets, are collected.
 
 Default: Enabled.
 
-=item B<QTypes> I<true>|I<false>
+=item B<QTypes> B<true>|B<false>
 
 When enabled, the number of I<incoming> queries by query types (for example
 C<A>, C<MX>, C<AAAA>) is collected.
 
 Default: Enabled.
 
-=item B<ServerStats> I<true>|I<false>
+=item B<ServerStats> B<true>|B<false>
 
 Collect global server statistics, such as requests received over IPv4 and IPv6,
 successful queries, and failed updates.
 
 Default: Enabled.
 
-=item B<ZoneMaintStats> I<true>|I<false>
+=item B<ZoneMaintStats> B<true>|B<false>
 
 Collect zone maintenance statistics, mostly information about notifications
 (zone updates) and zone transfers.
 
 Default: Enabled.
 
-=item B<ResolverStats> I<true>|I<false>
+=item B<ResolverStats> B<true>|B<false>
 
 Collect resolver statistics, i.E<nbsp>e. statistics about outgoing requests
 (e.E<nbsp>g. queries over IPv4, lame servers). Since the global resolver
 counters apparently were removed in BIND 9.5.1 and 9.6.0, this is disabled by
 default. Use the B<ResolverStats> option within a B<View "_default"> block
 instead for the same functionality.
@@ -573,27 +573,27 @@
 Within a E<lt>B<View>E<nbsp>I<name>E<gt> block, you can specify which
 information you want to collect about a view. If no B<View> block is
 configured, no detailed view statistics will be collected.
 
 =over 4
 
-=item B<QTypes> I<true>|I<false>
+=item B<QTypes> B<true>|B<false>
 
 If enabled, the number of I<outgoing> queries by query type (e.E<nbsp>g. C<A>,
 C<MX>) is collected.
 
 Default: Enabled.
 
-=item B<ResolverStats> I<true>|I<false>
+=item B<ResolverStats> B<true>|B<false>
 
 Collect resolver statistics, i.E<nbsp>e. statistics about outgoing requests
 (e.E<nbsp>g. queries over IPv4, lame servers).
 
 Default: Enabled.
 
-=item B<CacheRRSets> I<true>|I<false>
+=item B<CacheRRSets> B<true>|B<false>
 
 If enabled, the number of entries (I<"RR sets">) in the view's cache by query
 type is collected. Negative entries (queries which resulted in an error, for
 example names that do not exist) are reported with a leading exclamation mark,
 e.E<nbsp>g. "!A".
 
@@ -1269,12 +1269,47 @@
 this many threads will be started immediately setting this to a very high
 value will waste valuable resources. Defaults to B<5> and will be forced to be
 at most B<16384> to prevent typos and dumb mistakes.
 
 =back
 
+=head2 Plugin C<ethstat>
+
+The I<ethstat plugin> collects information about network interface cards (NICs)
+by talking directly with the underlying kernel driver using L<ioctl(2)>.
+
+B<Synopsis:>
+
+ <Plugin "ethstat">
+   Interface "eth0"
+   Map "rx_csum_offload_errors" "if_rx_errors" "checksum_offload"
+   Map "multicast" "if_multicast"
+ </Plugin>
+
+B<Options:>
+
+=over 4
+
+=item B<Interface> I<Name>
+
+Collect statistical information about interface I<Name>.
+
+=item B<Map> I<Name> I<Type> [I<TypeInstance>]
+
+By default, the plugin will submit values as type C<derive> and I<type
+instance> set to I<Name>, the name of the metric as reported by the driver. If
+an appropriate B<Map> option exists, the given I<Type> and, optionally,
+I<TypeInstance> will be used.
+
+=item B<MappedOnly> B<true>|B<false>
+
+When set to B<true>, only metrics that can be mapped to to a I<type> will be
+collected, all other metrics will be ignored. Defaults to B<false>.
+
+=back
+
 =head2 Plugin C<exec>
 
 Please make sure to read L<collectd-exec(5)> before using this plugin. It
 contains valuable information on when the executable is executed and the
 output that is expected from it.
 
@@ -1819,12 +1854,37 @@
 =item B<Port> I<Port>
 
 TCP-Port to connect to. Defaults to B<411>.
 
 =back
 
+=head2 Plugin C<md>
+
+The C<md plugin> collects information from Linux Software-RAID devices (md).
+
+All reported values are of the type C<md_disks>. Reported type instances are
+I<active>, I<failed> (present but not operational), I<spare> (hot stand-by) and
+I<missing> (physically absent) disks.
+
+=over 4
+
+=item B<Device> I<Device>
+
+Select md devices based on device name. The I<device name> is the basename of
+the device, i.e. the name of the block device without the leading C</dev/>.
+See B<IgnoreSelected> for more details.
+
+=item B<IgnoreSelected> B<true>|B<false>
+
+Invert device selection: If set to B<true>, all md devices B<except> those
+listed using B<Device> are collected. If B<false> (the default), only those
+listed are collected. If no configuration is given, the B<md> plugin will
+collect data from all md devices.
+
+=back
+
 =head2 Plugin C<memcachec>
 
 The C<memcachec plugin> connects to a memcached server, queries one or more
 given I<pages> and parses the returned data according to user specification.
 The I<matches> used are the same as the matches used in the C<curl> and C<tail>
 plugins.
@@ -1940,17 +2000,17 @@
 =item B<RegisterBase> I<Number>
 
 Configures the base register to read from the device. If the option
 B<RegisterType> has been set to B<Uint32> or B<Float>, this and the next
 register will be read (the register number is increased by one).
 
-=item B<RegisterType> B<Uint16>|B<Uint32>|B<Float>
+=item B<RegisterType> B<Int16>|B<Int32>|B<Uint16>|B<Uint32>|B<Float>
 
-Specifies what kind of data is returned by the device. If the type is B<Uint32>
-or B<Float>, two 16E<nbsp>bit registers will be read and the data is combined
-into one value. Defaults to B<Uint16>.
+Specifies what kind of data is returned by the device. If the type is B<Int32>,
+B<Uint32> or B<Float>, two 16E<nbsp>bit registers will be read and the data is
+combined into one value. Defaults to B<Uint16>.
 
 =item B<Type> I<Type>
 
 Specifies the "type" (data set) to use when dispatching the value to
 I<collectd>. Currently, only data sets with exactly one data source are
 supported.
@@ -4175,12 +4235,17 @@
 
 The B<lm_sensors> homepage can be found at
 L<http://secure.netroedge.com/~lm78/>.
 
 =over 4
 
+=item B<SensorConfigFile> I<File>
+
+Read the I<lm_sensors> configuration from I<File>. When unset (recommended),
+the library's default will be used.
+
 =item B<Sensor> I<chip-bus-address/type-feature>
 
 Selects the name of the sensor which you want to collect or ignore, depending
 on the B<IgnoreSelected> below. For example, the option "B<Sensor>
 I<it8712-isa-0290/voltage-in1>" will cause collectd to gather data for the
 voltage sensor I<in1> of the I<it8712> on the isa bus at the address 0290.
@@ -4203,25 +4268,25 @@
 other plugins, its documentation has been moved to an own manpage,
 L<collectd-snmp(5)>. Please see there for details.
 
 =head2 Plugin C<swap>
 
 The I<Swap plugin> collects information about used and available swap space. On
-I<Solaris>, the following options are available:
+I<Linux> and I<Solaris>, the following options are available:
 
 =over 4
 
 =item B<ReportByDevice> B<false>|B<true>
 
-Configures how to report physical swap devices. If set to B<false> is used (the
+Configures how to report physical swap devices. If set to B<false> (the
 default), the summary over all swap devices is reported only, i.e. the globally
 used and available space over all devices. If B<true> is configured, the used
 and available space of each device will be reported separately.
 
-This option is only available if the I<Swap plugin> can use the L<swapctl(2)>
-mechanism under I<Solaris>.
+This option is only available if the I<Swap plugin> can read C</proc/swaps>
+(under Linux) or use the L<swapctl(2)> mechanism (under I<Solaris>).
 
 =back
 
 =head2 Plugin C<syslog>
 
 =over 4
@@ -4232,12 +4297,21 @@
 severity B<notice>, B<warning>, or B<err> will be submitted to the
 syslog-daemon.
 
 Please note that B<debug> is only available if collectd has been compiled with
 debugging support.
 
+=item B<NotifyLevel> B<OKAY>|B<WARNING>|B<FAILURE>
+
+Controls which notifications should be sent to syslog. The default behaviour is
+not to send any. Less severe notifications always imply logging more severe
+notifications: Setting this to B<OKAY> means all notifications will be sent to
+syslog, setting this to B<WARNING> will send B<WARNING> and B<FAILURE>
+notifications but will dismiss B<OKAY> notifications. Setting this option to
+B<FAILURE> will only send failures to syslog.
+
 =back
 
 =head2 Plugin C<table>
 
 The C<table plugin> provides generic means to parse tabular data and dispatch
 user specified values. Values are selected based on column numbers. For
@@ -4782,12 +4856,121 @@
 B<Note>: The traffic collected by this plugin accounts for the amount of
 traffic passing a socket which might be a lot less than the actual on-wire
 traffic (e.E<nbsp>g. due to headers and retransmission). If you want to
 collect on-wire traffic you could, for example, use the logging facilities of
 iptables to feed data for the guest IPs into the iptables plugin.
 
+=head2 Plugin C<write_graphite>
+
+The C<write_graphite> plugin writes data to I<Graphite>, an open-source metrics
+storage and graphing project. The plugin connects to I<Carbon>, the data layer
+of I<Graphite>, and sends data via the "line based" protocol (per default using
+portE<nbsp>2003). The data will be sent in blocks of at most 1428 bytes to
+minimize the number of network packets.
+
+Synopsis:
+
+ <Plugin write_graphite>
+   <Carbon>
+     Host "localhost"
+     Port "2003"
+     Prefix "collectd"
+   </Carbon>
+ </Plugin>
+
+=over 4
+
+=item B<Host> I<Address>
+
+Hostname or address to connect to. Defaults to C<localhost>.
+
+=item B<Port> I<Service>
+
+Service name or port number to connect to. Defaults to C<2003>.
+
+=item B<Prefix> I<String>
+
+When set, I<String> is added in front of the host name. Dots and whitespace are
+I<not> escaped in this string (see B<EscapeCharacter> below).
+
+=item B<Postfix> I<String>
+
+When set, I<String> is appended to the host name. Dots and whitespace are
+I<not> escaped in this string (see B<EscapeCharacter> below).
+
+=item B<EscapeCharacter> I<Char>
+
+I<Carbon> uses the dot (C<.>) as escape character and doesn't allow whitespace
+in the identifier. The B<EscapeCharacter> option determines which character
+dots, whitespace and control characters are replaced with. Defaults to
+underscore (C<_>).
+
+=item B<StoreRates> B<false>|B<true>
+
+If set to B<true> (the default), convert counter values to rates. If set to
+B<false> counter values are stored as is, i.E<nbsp>e. as an increasing integer
+number.
+
+=item B<SeparateInstances> B<false>|B<true>
+
+If set to B<true>, the plugin instance and type instance will be in their own
+path component, for example C<host.cpu.0.cpu.idle>. If set to B<false> (the
+default), the plugin and plugin instance (and likewise the type and type
+instance) are put into once component, for example C<host.cpu-0.cpu-idle>.
+
+=item B<AlwaysAppendDS> B<false>|B<true>
+
+If set the B<true>, append the name of the I<Data Source> (DS) to the "metric"
+identifier. If set to B<false> (the default), this is only done when there is
+more than one DS.
+
+=back
+
+=head2 Plugin C<write_mongodb>
+
+The I<write_mongodb plugin> will send values to I<MongoDB>, a schema-less
+NoSQL database.
+
+B<Synopsis:>
+
+ <Plugin "write_mongodb">
+   <Node "default">
+     Host "localhost"
+     Port "27017"
+     Timeout 1000
+     StoreRates true
+   </Node>
+ </Plugin>
+
+The plugin can send values to multiple instances of I<MongoDB> by specifying
+one B<Node> block for each instance. Within the B<Node> blocks, the following
+options are available:
+
+=over 4
+
+=item B<Host> I<Address>
+
+Hostname or address to connect to. Defaults to C<localhost>.
+
+=item B<Port> I<Service>
+
+Service name or port number to connect to. Defaults to C<27017>.
+
+=item B<Timeout> I<Timeout>
+
+Set the timeout for each operation on I<MongoDB> to I<Timeout> milliseconds.
+Setting this option to zero means no timeout, which is the default.
+
+=item B<StoreRates> B<false>|B<true>
+
+If set to B<true> (the default), convert counter values to rates. If set to
+B<false> counter values are stored as is, i.e. as an increasing integer
+number.
+
+=back
+
 =head2 Plugin C<write_http>
 
 This output plugin submits values to an http server by POST them using the
 PUTVAL plain-text protocol. Each destination you want to post data to needs to
 have one B<URL> block, within which the destination can be configured further,
 for example by specifying authentication data.
@@ -5635,13 +5818,13 @@
 convert counter values to rates.
 
 =back
 
 Please note that these placeholders are B<case sensitive>!
 
-=item B<Severity> B<"FATAL">|B<"WARNING">|B<"OKAY">
+=item B<Severity> B<"FAILURE">|B<"WARNING">|B<"OKAY">
 
 Sets the severity of the message. If omitted, the severity B<"WARNING"> is
 used.
 
 =back
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectdctl.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectdctl.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectdctl.1	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectdctl.1	2012-04-02 16:16:52.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTDCTL 1"
-.TH COLLECTDCTL 1 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTDCTL 1 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectdctl \- Control interface for collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectdctl.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectdctl.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectdctl.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectdctl.c	2012-04-02 16:04:58.000000000 +0800
@@ -482,13 +482,13 @@
 
       values_len = 0;
       value = tmp;
       while (value != 0) {
         char *dot, *endptr;
 
-        tmp = strchr (value, (int)':');
+        tmp = strchr (argv[i], (int)':');
 
         if (tmp != NULL) {
           *tmp = '\0';
           ++tmp;
         }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-email.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-email.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-email.5	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-email.5	2012-04-02 16:16:52.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EMAIL 5"
-.TH COLLECTD-EMAIL 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-EMAIL 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-email \- Documentation of collectd's \f(CW\*(C`email plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-exec.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-exec.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-exec.5	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-exec.5	2012-04-02 16:16:52.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EXEC 5"
-.TH COLLECTD-EXEC 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-EXEC 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-exec \- Documentation of collectd's \f(CW\*(C`exec plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-java.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-java.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-java.5	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-java.5	2012-04-02 16:16:52.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-JAVA 5"
-.TH COLLECTD-JAVA 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-JAVA 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-java \- Documentation of collectd's "java plugin"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectdmon.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectdmon.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectdmon.1	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectdmon.1	2012-04-02 16:16:52.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTDMON 1"
-.TH COLLECTDMON 1 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTDMON 1 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectdmon \- Monitoring daemon for collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-nagios.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-nagios.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-nagios.1	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-nagios.1	2012-04-02 16:16:52.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-NAGIOS 1"
-.TH COLLECTD-NAGIOS 1 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-NAGIOS 1 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-nagios \- Nagios plugin for querying collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-nagios.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-nagios.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-nagios.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-nagios.c	2012-04-02 16:04:58.000000000 +0800
@@ -266,12 +266,73 @@
 			"  percentage:    Apply the ranges to the ratio (in percent) of the first value\n"
 			"                 and the sum of all values."
 			"\n", name);
 	exit (1);
 } /* void usage */
 
+static int do_listval (lcc_connection_t *connection)
+{
+	lcc_identifier_t *ret_ident = NULL;
+	size_t ret_ident_num = 0;
+
+	char *hostname = NULL;
+
+	int status;
+	size_t i;
+
+	status = lcc_listval (connection, &ret_ident, &ret_ident_num);
+	if (status != 0) {
+		printf ("UNKNOWN: %s\n", lcc_strerror (connection));
+		if (ret_ident != NULL)
+			free (ret_ident);
+		return (RET_UNKNOWN);
+	}
+
+	status = lcc_sort_identifiers (connection, ret_ident, ret_ident_num);
+	if (status != 0) {
+		printf ("UNKNOWN: %s\n", lcc_strerror (connection));
+		if (ret_ident != NULL)
+			free (ret_ident);
+		return (RET_UNKNOWN);
+	}
+
+	for (i = 0; i < ret_ident_num; ++i) {
+		char id[1024];
+
+		if ((hostname_g != NULL) && (strcasecmp (hostname_g, ret_ident[i].host)))
+			continue;
+
+		if ((hostname == NULL) || strcasecmp (hostname, ret_ident[i].host))
+		{
+			if (hostname != NULL)
+				free (hostname);
+			hostname = strdup (ret_ident[i].host);
+			printf ("Host: %s\n", hostname);
+		}
+
+		/* empty hostname; not to be printed again */
+		ret_ident[i].host[0] = '\0';
+
+		status = lcc_identifier_to_string (connection,
+				id, sizeof (id), ret_ident + i);
+		if (status != 0) {
+			printf ("ERROR: listval: Failed to convert returned "
+					"identifier to a string: %s\n",
+					lcc_strerror (connection));
+			continue;
+		}
+
+		/* skip over the (empty) hostname and following '/' */
+		printf ("\t%s\n", id + 1);
+	}
+
+	if (ret_ident != NULL)
+		free (ret_ident);
+	return (RET_OKAY);
+} /* int do_listval */
+
 static int do_check_con_none (size_t values_num,
 		double *values, char **values_names)
 {
 	int num_critical = 0;
 	int num_warning  = 0;
 	int num_okay = 0;
@@ -505,40 +566,26 @@
 	printf ("%s: %lf percent |", status_str, percentage);
 	for (i = 0; i < values_num; i++)
 		printf (" %s=%lf;;;;", values_names[i], values[i]);
 	return (status_code);
 } /* int do_check_con_percentage */
 
-static int do_check (void)
+static int do_check (lcc_connection_t *connection)
 {
-	lcc_connection_t *connection;
 	gauge_t *values;
 	char   **values_names;
 	size_t   values_num;
-	char address[1024];
 	char ident_str[1024];
 	lcc_identifier_t ident;
 	size_t i;
 	int status;
 
-	snprintf (address, sizeof (address), "unix:%s", socket_file_g);
-	address[sizeof (address) - 1] = 0;
-
 	snprintf (ident_str, sizeof (ident_str), "%s/%s",
 			hostname_g, value_string_g);
 	ident_str[sizeof (ident_str) - 1] = 0;
 
-	connection = NULL;
-	status = lcc_connect (address, &connection);
-	if (status != 0)
-	{
-		printf ("ERROR: Connecting to daemon at %s failed.\n",
-				socket_file_g);
-		return (RET_CRITICAL);
-	}
-
 	memset (&ident, 0, sizeof (ident));
 	status = lcc_string_to_identifier (connection, &ident, ident_str);
 	if (status != 0)
 	{
 		printf ("ERROR: Creating an identifier failed: %s.\n",
 				lcc_strerror (connection));
@@ -580,12 +627,17 @@
 
 	return (status);
 } /* int do_check */
 
 int main (int argc, char **argv)
 {
+	char address[1024];
+	lcc_connection_t *connection;
+
+	int status;
+
 	range_critical_g.min = NAN;
 	range_critical_g.max = NAN;
 	range_critical_g.invert = 0;
 
 	range_warning_g.min = NAN;
 	range_warning_g.max = NAN;
@@ -661,14 +713,29 @@
 			default:
 				usage (argv[0]);
 		} /* switch (c) */
 	}
 
 	if ((socket_file_g == NULL) || (value_string_g == NULL)
-			|| (hostname_g == NULL))
+			|| ((hostname_g == NULL) && (strcasecmp (value_string_g, "LIST"))))
 	{
 		fprintf (stderr, "Missing required arguments.\n");
 		usage (argv[0]);
 	}
 
-	return (do_check ());
+	snprintf (address, sizeof (address), "unix:%s", socket_file_g);
+	address[sizeof (address) - 1] = 0;
+
+	connection = NULL;
+	status = lcc_connect (address, &connection);
+	if (status != 0)
+	{
+		printf ("ERROR: Connecting to daemon at %s failed.\n",
+				socket_file_g);
+		return (RET_CRITICAL);
+	}
+
+	if (0 == strcasecmp (value_string_g, "LIST"))
+		return (do_listval (connection));
+
+	return (do_check (connection));
 } /* int main */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-perl.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-perl.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-perl.5	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-perl.5	2012-04-02 16:16:53.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-PERL 5"
-.TH COLLECTD-PERL 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-PERL 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-perl \- Documentation of collectd's \f(CW\*(C`perl plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-python.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-python.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-python.5	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-python.5	2012-04-02 16:16:53.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-PYTHON 5"
-.TH COLLECTD-PYTHON 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-PYTHON 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-python \- Documentation of collectd's \f(CW\*(C`python plugin\*(C'\fR
@@ -154,22 +154,22 @@
 The \f(CW\*(C`python plugin\*(C'\fR embeds a Python-interpreter into collectd and provides an
 interface to collectd's plugin system. This makes it possible to write plugins
 for collectd in Python. This is a lot more efficient than executing a
 Python-script every time you want to read a value with the \f(CW\*(C`exec plugin\*(C'\fR (see
 \&\fIcollectd\-exec\fR\|(5)) and provides a lot more functionality, too.
 .PP
-The minimum required Python version is \fI2.3\fR.
+At least python \fIversion 2.3\fR is required.
 .SH "CONFIGURATION"
 .IX Header "CONFIGURATION"
 .IP "\fBLoadPlugin\fR \fIPlugin\fR" 4
 .IX Item "LoadPlugin Plugin"
 Loads the Python plugin \fIPlugin\fR. Unlike most other LoadPlugin lines, this one
 should be a block containing the line \*(L"Globals true\*(R". This will cause collectd
-to export the name of all objects in the Python interpreter for all plugins to
+to export the name of all objects in the python interpreter for all plugins to
 see. If you don't do this or your platform does not support it, the embedded
-interpreter will start anyway but you won't be able to load certain Python
+interpreter will start anyway but you won't be able to load certain python
 modules, e.g. \*(L"time\*(R".
 .IP "\fBEncoding\fR \fIName\fR" 4
 .IX Item "Encoding Name"
 The default encoding for Unicode objects you pass to collectd. If you omit this
 option it will default to \fBascii\fR on \fIPython 2\fR and \fButf\-8\fR on \fIPython 3\fR.
 This is hardcoded in Python and will ignore everything else, including your
@@ -179,30 +179,30 @@
 Appends \fIName\fR to \fBsys.path\fR. You won't be able to import any scripts you
 wrote unless they are located in one of the directories in this list. Please
 note that it only has effect on plugins loaded after this option. You can
 use multiple \fBModulePath\fR lines to add more than one directory.
 .IP "\fBLogTraces\fR \fIbool\fR" 4
 .IX Item "LogTraces bool"
-If a Python script throws an exception it will be logged by collectd with the
+If a python script throws an exception it will be logged by collectd with the
 name of the exception and the message. If you set this option to true it will
 also log the full stacktrace just like the default output of an interactive
-Python interpreter. This should probably be set to false most of the time but
+python interpreter. This should probably be set to false most of the time but
 is very useful for development and debugging of new modules.
 .IP "\fBInteractive\fR \fIbool\fR" 4
 .IX Item "Interactive bool"
-This option will cause the module to launch an interactive Python interpreter
+This option will cause the module to launch an interactive python interpreter
 that reads from and writes to the terminal. Note that collectd will terminate
 right after starting up if you try to run it as a daemon while this option is
-enabled so make sure to start collectd with the \fB\-f\fR option.
+enabled to make sure to start collectd with the \fB\-f\fR option.
 .Sp
 The \fBcollectd\fR module is \fInot\fR imported into the interpreter's globals. You
 have to do it manually. Be sure to read the help text of the module, it can be
 used as a reference guide during coding.
 .Sp
 This interactive session will behave slightly differently from a daemonized
-collectd script as well as from a normal Python interpreter:
+collectd script as well as from a normal python interpreter:
 .RS 4
 .IP "\(bu" 4
 \&\fB1.\fR collectd will try to import the \fBreadline\fR module to give you a decent
 way of entering your commands. The daemonized collectd won't do that.
 .IP "\(bu" 4
 \&\fB2.\fR collectd will block \fI\s-1SIGINT\s0\fR. Pressing \fICtrl+C\fR will usually cause
@@ -210,28 +210,28 @@
 therefore this signal will be blocked. You can still use it to interrupt
 syscalls like sleep and pause but it won't generate a \fIKeyboardInterrupt\fR
 exception either.
 .Sp
 To quit collectd send \fI\s-1EOF\s0\fR (press \fICtrl+D\fR at the beginning of a new line).
 .IP "\(bu" 4
-\&\fB3.\fR collectd handles \fI\s-1SIGCHLD\s0\fR. This means that Python won't be able to
+\&\fB3.\fR collectd handles \fI\s-1SIGCHLD\s0\fR. This means that python won't be able to
 determine the return code of spawned processes with \fIsystem()\fR, \fIpopen()\fR and
-subprocess. This will result in Python not using external programs like less
+subprocess. This will result in python not using external programs like less
 to display help texts. You can override this behavior with the \fB\s-1PAGER\s0\fR
 environment variable, e.g. \fIexport PAGER=less\fR before starting collectd.
-Depending on your version of Python this might or might not result in an
+Depending on your version of python this might or might not result in an
 \&\fBOSError\fR exception which can be ignored.
 .Sp
-If you really need to spawn new processes from Python you can register an init
+If you really need to spawn new processes from python you can register an init
 callback and reset the action for \s-1SIGCHLD\s0 to the default behavior. Please note
 that this \fIwill\fR break the exec plugin. Do not even load the exec plugin if
 you intend to do this!
 .Sp
 There is an example script located in \fBcontrib/python/getsigchld.py\fR  to do
 this. If you import this from \fIcollectd.conf\fR \s-1SIGCHLD\s0 will be handled
-normally and spawning processes from Python will work as intended.
+normally and spawning processes from python will work as intended.
 .RE
 .RS 4
 .RE
 .IP "<\fBModule\fR \fIName\fR> block" 4
 .IX Item "<Module Name> block"
 This block may be used to pass on configuration settings to a Python module.
@@ -239,28 +239,28 @@
 passed to the registered configuration callback. See below for details about
 the \fBConfig\fR class and how to register callbacks.
 .Sp
 The \fIname\fR identifies the callback.
 .SH "STRINGS"
 .IX Header "STRINGS"
-There are a lot of places where strings are sent from collectd to Python and
-from Python to collectd. How exactly this works depends on whether byte or
-unicode strings or Python2 or Python3 are used.
+There are a lot of places where strings are send from collectd to python and
+from python to collectd. How exactly this works depends on wheather byte or
+unicode strings or python2 or python3 are used.
 .PP
 Python2 has \fIstr\fR, which is just bytes, and \fIunicode\fR. Python3 has \fIstr\fR,
 which is a unicode object, and \fIbytes\fR.
 .PP
-When passing strings from Python to collectd all of these object are supported
+When passing strings from python to collectd all of these object are supported
 in all places, however \fIstr\fR should be used if possible. These strings must
 not contain a \s-1NUL\s0 byte. Ignoring this will result in a \fITypeError\fR exception.
 If a byte string was used it will be used as is by collectd. If a unicode
 object was used it will be encoded using the default encoding (see above). If
-this is not possible Python will raise a \fIUnicodeEncodeError\fR exception.
+this is not possible python will raise a \fIUnicodeEncodeError\fR exception.
 .PP
-When passing strings from collectd to Python the behavior depends on the
-Python version used. Python2 will always receive a \fIstr\fR object. Python3 will
+Wenn passing strings from collectd to python the behavior depends on the
+python version used. Python2 will always receive a \fIstr\fR object. Python3 will
 usually receive a \fIstr\fR object as well, however the original string will be
 decoded to unicode using the default encoding. If this fails because the
 string is not a valid sequence for this encoding a \fIbytes\fR object will be
 returned instead.
 .SH "WRITING YOUR OWN PLUGINS"
 .IX Header "WRITING YOUR OWN PLUGINS"
@@ -270,60 +270,60 @@
 of these callback functions and initializing code which registers the
 functions with collectd. See the section \*(L"\s-1EXAMPLES\s0\*(R" below for a really basic
 example. The following types of \fBcallback functions\fR are known to collectd
 (all of them are optional):
 .IP "configuration functions" 4
 .IX Item "configuration functions"
-These are called during configuration if an appropriate
+This type of functions is called during configuration if an appropriate
 \&\fBModule\fR block has been encountered. It is called once for each \fBModule\fR
 block which matches the name of the callback as provided with the
 \&\fBregister_config\fR method \- see below.
 .Sp
 Python thread support has not been initialized at this point so do not use any
 threading functions here!
 .IP "init functions" 4
 .IX Item "init functions"
-These are called once after loading the module and before any
+This type of functions is called once after loading the module and before any
 calls to the read and write functions. It should be used to initialize the
 internal state of the plugin (e.\ g. open sockets, ...). This is the
 earliest point where you may use threads.
 .IP "read functions" 4
 .IX Item "read functions"
-These are used to collect the actual data. It is called once
+This type of function is used to collect the actual data. It is called once
 per interval (see the \fBInterval\fR configuration option of collectd). Usually
 it will call \fBplugin_dispatch_values\fR to dispatch the values to collectd
 which will pass them on to all registered \fBwrite functions\fR. If this function
 throws any kind of exception the plugin will be skipped for an increasing
 amount of time until it returns normally again.
 .IP "write functions" 4
 .IX Item "write functions"
-These are used to write the dispatched values. It is called
+This type of function is used to write the dispatched values. It is called
 once for every value that was dispatched by any plugin.
 .IP "flush functions" 4
 .IX Item "flush functions"
-These are used to flush internal caches of plugins. It is
+This type of function is used to flush internal caches of plugins. It is
 usually triggered by the user only. Any plugin which caches data before
 writing it to disk should provide this kind of callback function.
 .IP "log functions" 4
 .IX Item "log functions"
-These are used to pass messages of plugins or the daemon itself
+This type of function is used to pass messages of plugins or the daemon itself
 to the user.
 .IP "notification function" 4
 .IX Item "notification function"
-These are used to act upon notifications. In general, a
+This type of function is used to act upon notifications. In general, a
 notification is a status message that may be associated with a data instance.
 Usually, a notification is generated by the daemon if a configured threshold
 has been exceeded (see the section \*(L"\s-1THRESHOLD\s0 \s-1CONFIGURATION\s0\*(R" in
 \&\fIcollectd.conf\fR\|(5) for more details), but any plugin may dispatch
 notifications as well.
 .IP "shutdown functions" 4
 .IX Item "shutdown functions"
-These are called once before the daemon shuts down. It should
+This type of function is called once before the daemon shuts down. It should
 be used to clean up the plugin (e.g. close sockets, ...).
 .PP
-Any function (except log functions) may throw an exception in case of
+Any function (except log functions) may set throw an exception in case of any
 errors. The exception will be passed on to the user using collectd's logging
 mechanism. If a log callback throws an exception it will be printed to standard
 error instead.
 .PP
 See the documentation of the various \fBregister_\fR methods in the section
 \&\*(L"\s-1FUNCTIONS\s0\*(R" below for the number and types of arguments passed to each
@@ -390,13 +390,13 @@
 config file. It will always be a string.
 .IP "values" 4
 .IX Item "values"
 This is a tuple (which might be empty) of all value, i.e. words following the
 keyword in any given line in the config file.
 .Sp
-Every item in this tuple will be either a string, a float or a boolean,
+Every item in this tuple will be either a string or a float or a boolean,
 depending on the contents of the configuration file.
 .IP "children" 4
 .IX Item "children"
 This is a tuple of child nodes. For most nodes this will be empty. If this node
 represents a block instead of a single line of the config file it will contain
 all nodes in this block.
@@ -438,13 +438,13 @@
 \&\fIRuntimeError\fR exception.
 .IP "type_instance" 4
 .IX Item "type_instance"
 Type instance string. May be empty.
 .SS "Values"
 .IX Subsection "Values"
-A Value is an object which features a sequence of values. It is based on the
+A Value is an object which features a sequence of values. It is based on then
 \&\fIPluginData\fR type and uses its members to identify the values.
 .PP
 .Vb 1
 \& class Values(PluginData)
 .Ve
 .PP
@@ -542,13 +542,13 @@
 submitted. If you do provide a parameter it will be used instead, without
 altering the member.
 .PP
 Data descriptors defined here:
 .IP "message" 4
 .IX Item "message"
-Some kind of description of what's going on and why this Notification was
+Some kind of description what's going on and why this Notification was
 generated.
 .IP "severity" 4
 .IX Item "severity"
 The severity of this notification. Assign or compare to \fI\s-1NOTIF_FAILURE\s0\fR,
 \&\fI\s-1NOTIF_WARNING\s0\fR or \fI\s-1NOTIF_OKAY\s0\fR.
 .SH "FUNCTIONS"
@@ -567,26 +567,25 @@
 every time it is called. If you omit this parameter no object is passed back to
 your callback, not even None.
 .IP "\(bu" 4
 \&\fIname\fR is an optional identifier for this callback. The default name is
 \&\fBpython\fR.\fImodule\fR. \fImodule\fR is taken from the \fB_\|_module_\|_\fR attribute of
 your callback function. Every callback needs a unique identifier, so if you
-want to register the same callback multiple times in the same module you need to
-specify a name here. Otherwise it's safe to ignore this parameter.
-.IP "\(bu" 4
-\&\fIidentifier\fR is the full identifier assigned to this callback.
+want to register the same callback multiple time in the same module you need to
+specify a name here. Otherwise it's save to ignore this parameter \fIidentifier\fR
+is the full identifier assigned to this callback.
 .RE
 .RS 4
 .Sp
 These functions are called in the various stages of the daemon (see the section
 \&\*(L"\s-1WRITING\s0 \s-1YOUR\s0 \s-1OWN\s0 \s-1PLUGINS\s0\*(R" above) and are passed the following arguments:
 .IP "register_config" 4
 .IX Item "register_config"
 The only argument passed is a \fIConfig\fR object. See above for the layout of this
 data type.
-Note that you cannot receive the whole config files this way, only \fBModule\fR
+Note that you can not receive the whole config files this way, only \fBModule\fR
 blocks inside the Python configuration block. Additionally you will only
 receive blocks where your callback identifier matches \fBpython.\fR\fIblockname\fR.
 .IP "register_init" 4
 .IX Item "register_init"
 The callback will be called without arguments.
 .IP "register_read(callback[, interval][, data][, name]) \-> identifier" 4
@@ -597,13 +596,13 @@
 The callback will be called without arguments.
 .IP "register_shutdown" 4
 .IX Item "register_shutdown"
 The callback will be called without arguments.
 .IP "register_write" 4
 .IX Item "register_write"
-The callback function will be called with one argument passed, which will be a
+The callback function will be called with one arguments passed, which will be a
 \&\fIValues\fR object. For the layout of \fIValues\fR see above.
 If this callback function throws an exception the next call will be delayed by
 an increasing interval.
 .IP "register_flush" 4
 .IX Item "register_flush"
 Like \fBregister_config\fR is important for this callback because it determines
@@ -680,23 +679,23 @@
 .PP
 See the section \*(L"\s-1CLASSES\s0\*(R" above for a complete documentation of the data
 types used by the read, write and match functions.
 .SH "NOTES"
 .IX Header "NOTES"
 .IP "\(bu" 4
-Please feel free to send in new plugins to collectd's mailing list at
+Please feel free to send in new plugins to collectd's mailinglist at
 <collectd\ at\ verplant.org> for review and, possibly,
 inclusion in the main distribution. In the latter case, we will take care of
 keeping the plugin up to date and adapting it to new versions of collectd.
 .Sp
 Before submitting your plugin, please take a look at
 <http://collectd.org/dev\-info.shtml>.
 .SH "CAVEATS"
 .IX Header "CAVEATS"
 .IP "\(bu" 4
-collectd is heavily multi-threaded. Each collectd thread accessing the Python
+collectd is heavily multi-threaded. Each collectd thread accessing the python
 plugin will be mapped to a Python interpreter thread. Any such thread will be
 created and destroyed transparently and on-the-fly.
 .Sp
 Hence, any plugin has to be thread-safe if it provides several entry points
 from collectd (i.\ e. if it registers more than one callback or if a
 registered callback may be called more than once in parallel).
@@ -710,13 +709,13 @@
 compatibility in the Python \s-1API\s0 during the life cycle of one major release.
 However, this cannot be guaranteed at all times. Watch out for warnings
 dispatched by the python plugin after upgrades.
 .SH "KNOWN BUGS"
 .IX Header "KNOWN BUGS"
 .IP "\(bu" 4
-Not all aspects of the collectd \s-1API\s0 are accessible from Python. This includes
+Not all aspects of the collectd \s-1API\s0 are accessible from python. This includes
 but is not limited to filters and data sets.
 .SH "SEE ALSO"
 .IX Header "SEE ALSO"
 \&\fIcollectd\fR\|(1),
 \&\fIcollectd.conf\fR\|(5),
 \&\fIcollectd\-perl\fR\|(5),
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-python.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-python.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-python.pod	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-python.pod	2012-04-02 16:04:58.000000000 +0800
@@ -34,25 +34,25 @@
 The C<python plugin> embeds a Python-interpreter into collectd and provides an
 interface to collectd's plugin system. This makes it possible to write plugins
 for collectd in Python. This is a lot more efficient than executing a
 Python-script every time you want to read a value with the C<exec plugin> (see
 L<collectd-exec(5)>) and provides a lot more functionality, too.
 
-The minimum required Python version is I<2.3>.
+At least python I<version 2.3> is required.
 
 =head1 CONFIGURATION
 
 =over 4
 
 =item B<LoadPlugin> I<Plugin>
 
 Loads the Python plugin I<Plugin>. Unlike most other LoadPlugin lines, this one
 should be a block containing the line "Globals true". This will cause collectd
-to export the name of all objects in the Python interpreter for all plugins to
+to export the name of all objects in the python interpreter for all plugins to
 see. If you don't do this or your platform does not support it, the embedded
-interpreter will start anyway but you won't be able to load certain Python
+interpreter will start anyway but you won't be able to load certain python
 modules, e.g. "time".
 
 =item B<Encoding> I<Name>
 
 The default encoding for Unicode objects you pass to collectd. If you omit this
 option it will default to B<ascii> on I<Python 2> and B<utf-8> on I<Python 3>.
@@ -65,31 +65,31 @@
 wrote unless they are located in one of the directories in this list. Please
 note that it only has effect on plugins loaded after this option. You can
 use multiple B<ModulePath> lines to add more than one directory.
 
 =item B<LogTraces> I<bool>
 
-If a Python script throws an exception it will be logged by collectd with the
+If a python script throws an exception it will be logged by collectd with the
 name of the exception and the message. If you set this option to true it will
 also log the full stacktrace just like the default output of an interactive
-Python interpreter. This should probably be set to false most of the time but
+python interpreter. This should probably be set to false most of the time but
 is very useful for development and debugging of new modules.
 
 =item B<Interactive> I<bool>
 
-This option will cause the module to launch an interactive Python interpreter
+This option will cause the module to launch an interactive python interpreter
 that reads from and writes to the terminal. Note that collectd will terminate
 right after starting up if you try to run it as a daemon while this option is
-enabled so make sure to start collectd with the B<-f> option.
+enabled to make sure to start collectd with the B<-f> option.
 
 The B<collectd> module is I<not> imported into the interpreter's globals. You
 have to do it manually. Be sure to read the help text of the module, it can be
 used as a reference guide during coding.
 
 This interactive session will behave slightly differently from a daemonized
-collectd script as well as from a normal Python interpreter:
+collectd script as well as from a normal python interpreter:
 
 =over 4
 
 =item
 
 B<1.> collectd will try to import the B<readline> module to give you a decent
@@ -104,28 +104,28 @@
 exception either.
 
 To quit collectd send I<EOF> (press I<Ctrl+D> at the beginning of a new line).
 
 =item
 
-B<3.> collectd handles I<SIGCHLD>. This means that Python won't be able to
+B<3.> collectd handles I<SIGCHLD>. This means that python won't be able to
 determine the return code of spawned processes with system(), popen() and
-subprocess. This will result in Python not using external programs like less
+subprocess. This will result in python not using external programs like less
 to display help texts. You can override this behavior with the B<PAGER>
 environment variable, e.g. I<export PAGER=less> before starting collectd.
-Depending on your version of Python this might or might not result in an
+Depending on your version of python this might or might not result in an
 B<OSError> exception which can be ignored.
 
-If you really need to spawn new processes from Python you can register an init
+If you really need to spawn new processes from python you can register an init
 callback and reset the action for SIGCHLD to the default behavior. Please note
 that this I<will> break the exec plugin. Do not even load the exec plugin if
 you intend to do this!
 
 There is an example script located in B<contrib/python/getsigchld.py>  to do
 this. If you import this from I<collectd.conf> SIGCHLD will be handled
-normally and spawning processes from Python will work as intended.
+normally and spawning processes from python will work as intended.
 
 =back
 
 =item E<lt>B<Module> I<Name>E<gt> block
 
 This block may be used to pass on configuration settings to a Python module.
@@ -136,28 +136,28 @@
 The I<name> identifies the callback.
 
 =back
 
 =head1 STRINGS
 
-There are a lot of places where strings are sent from collectd to Python and
-from Python to collectd. How exactly this works depends on whether byte or
-unicode strings or Python2 or Python3 are used.
+There are a lot of places where strings are send from collectd to python and
+from python to collectd. How exactly this works depends on wheather byte or
+unicode strings or python2 or python3 are used.
 
 Python2 has I<str>, which is just bytes, and I<unicode>. Python3 has I<str>,
 which is a unicode object, and I<bytes>.
 
-When passing strings from Python to collectd all of these object are supported
+When passing strings from python to collectd all of these object are supported
 in all places, however I<str> should be used if possible. These strings must
 not contain a NUL byte. Ignoring this will result in a I<TypeError> exception.
 If a byte string was used it will be used as is by collectd. If a unicode
 object was used it will be encoded using the default encoding (see above). If
-this is not possible Python will raise a I<UnicodeEncodeError> exception.
+this is not possible python will raise a I<UnicodeEncodeError> exception.
 
-When passing strings from collectd to Python the behavior depends on the
-Python version used. Python2 will always receive a I<str> object. Python3 will
+Wenn passing strings from collectd to python the behavior depends on the
+python version used. Python2 will always receive a I<str> object. Python3 will
 usually receive a I<str> object as well, however the original string will be
 decoded to unicode using the default encoding. If this fails because the
 string is not a valid sequence for this encoding a I<bytes> object will be
 returned instead.
 
 =head1 WRITING YOUR OWN PLUGINS
@@ -171,69 +171,69 @@
 (all of them are optional):
 
 =over 4
 
 =item configuration functions
 
-These are called during configuration if an appropriate
+This type of functions is called during configuration if an appropriate
 B<Module> block has been encountered. It is called once for each B<Module>
 block which matches the name of the callback as provided with the
 B<register_config> method - see below.
 
 Python thread support has not been initialized at this point so do not use any
 threading functions here!
 
 =item init functions
 
-These are called once after loading the module and before any
+This type of functions is called once after loading the module and before any
 calls to the read and write functions. It should be used to initialize the
 internal state of the plugin (e.E<nbsp>g. open sockets, ...). This is the
 earliest point where you may use threads.
 
 =item read functions
 
-These are used to collect the actual data. It is called once
+This type of function is used to collect the actual data. It is called once
 per interval (see the B<Interval> configuration option of collectd). Usually
 it will call B<plugin_dispatch_values> to dispatch the values to collectd
 which will pass them on to all registered B<write functions>. If this function
 throws any kind of exception the plugin will be skipped for an increasing
 amount of time until it returns normally again.
 
 =item write functions
 
-These are used to write the dispatched values. It is called
+This type of function is used to write the dispatched values. It is called
 once for every value that was dispatched by any plugin.
 
 =item flush functions
 
-These are used to flush internal caches of plugins. It is
+This type of function is used to flush internal caches of plugins. It is
 usually triggered by the user only. Any plugin which caches data before
 writing it to disk should provide this kind of callback function.
 
 =item log functions
 
-These are used to pass messages of plugins or the daemon itself
+This type of function is used to pass messages of plugins or the daemon itself
 to the user.
 
 =item notification function
 
-These are used to act upon notifications. In general, a
+This type of function is used to act upon notifications. In general, a
 notification is a status message that may be associated with a data instance.
 Usually, a notification is generated by the daemon if a configured threshold
 has been exceeded (see the section "THRESHOLD CONFIGURATION" in
 L<collectd.conf(5)> for more details), but any plugin may dispatch
 notifications as well.
 
 =item shutdown functions
 
-These are called once before the daemon shuts down. It should
+This type of function is called once before the daemon shuts down. It should
 be used to clean up the plugin (e.g. close sockets, ...).
 
 =back
 
-Any function (except log functions) may throw an exception in case of
+Any function (except log functions) may set throw an exception in case of any
 errors. The exception will be passed on to the user using collectd's logging
 mechanism. If a log callback throws an exception it will be printed to standard
 error instead.
 
 See the documentation of the various B<register_> methods in the section
 "FUNCTIONS" below for the number and types of arguments passed to each
@@ -303,13 +303,13 @@
 
 =item values
 
 This is a tuple (which might be empty) of all value, i.e. words following the
 keyword in any given line in the config file.
 
-Every item in this tuple will be either a string, a float or a boolean,
+Every item in this tuple will be either a string or a float or a boolean,
 depending on the contents of the configuration file.
 
 =item children
 
 This is a tuple of child nodes. For most nodes this will be empty. If this node
 represents a block instead of a single line of the config file it will contain
@@ -364,13 +364,13 @@
 Type instance string. May be empty.
 
 =back
 
 =head2 Values
 
-A Value is an object which features a sequence of values. It is based on the
+A Value is an object which features a sequence of values. It is based on then
 I<PluginData> type and uses its members to identify the values.
 
  class Values(PluginData)
 
 A Values object used for dispatching values to collectd and receiving values
 from write callbacks.
@@ -492,13 +492,13 @@
 Data descriptors defined here:
 
 =over 4
 
 =item message
 
-Some kind of description of what's going on and why this Notification was
+Some kind of description what's going on and why this Notification was
 generated.
 
 =item severity
 
 The severity of this notification. Assign or compare to I<NOTIF_FAILURE>,
 I<NOTIF_WARNING> or I<NOTIF_OKAY>.
@@ -531,31 +531,28 @@
 
 =item
 
 I<name> is an optional identifier for this callback. The default name is
 B<python>.I<module>. I<module> is taken from the B<__module__> attribute of
 your callback function. Every callback needs a unique identifier, so if you
-want to register the same callback multiple times in the same module you need to
-specify a name here. Otherwise it's safe to ignore this parameter.
-
-=item
-
-I<identifier> is the full identifier assigned to this callback.
+want to register the same callback multiple time in the same module you need to
+specify a name here. Otherwise it's save to ignore this parameter I<identifier>
+is the full identifier assigned to this callback.
 
 =back
 
 These functions are called in the various stages of the daemon (see the section
 L<"WRITING YOUR OWN PLUGINS"> above) and are passed the following arguments:
 
 =over 4
 
 =item register_config
 
 The only argument passed is a I<Config> object. See above for the layout of this
 data type.
-Note that you cannot receive the whole config files this way, only B<Module>
+Note that you can not receive the whole config files this way, only B<Module>
 blocks inside the Python configuration block. Additionally you will only
 receive blocks where your callback identifier matches B<python.>I<blockname>.
 
 =item register_init
 
 The callback will be called without arguments.
@@ -570,13 +567,13 @@
 =item register_shutdown
 
 The callback will be called without arguments.
 
 =item register_write
 
-The callback function will be called with one argument passed, which will be a
+The callback function will be called with one arguments passed, which will be a
 I<Values> object. For the layout of I<Values> see above.
 If this callback function throws an exception the next call will be delayed by
 an increasing interval.
 
 =item register_flush
 
@@ -657,13 +654,13 @@
 =head1 NOTES
 
 =over 4
 
 =item
 
-Please feel free to send in new plugins to collectd's mailing list at
+Please feel free to send in new plugins to collectd's mailinglist at
 E<lt>collectdE<nbsp>atE<nbsp>verplant.orgE<gt> for review and, possibly,
 inclusion in the main distribution. In the latter case, we will take care of
 keeping the plugin up to date and adapting it to new versions of collectd.
 
 Before submitting your plugin, please take a look at
 L<http://collectd.org/dev-info.shtml>.
@@ -673,13 +670,13 @@
 =head1 CAVEATS
 
 =over 4
 
 =item
 
-collectd is heavily multi-threaded. Each collectd thread accessing the Python
+collectd is heavily multi-threaded. Each collectd thread accessing the python
 plugin will be mapped to a Python interpreter thread. Any such thread will be
 created and destroyed transparently and on-the-fly.
 
 Hence, any plugin has to be thread-safe if it provides several entry points
 from collectd (i.E<nbsp>e. if it registers more than one callback or if a
 registered callback may be called more than once in parallel).
@@ -703,13 +700,13 @@
 =head1 KNOWN BUGS
 
 =over 4
 
 =item
 
-Not all aspects of the collectd API are accessible from Python. This includes
+Not all aspects of the collectd API are accessible from python. This includes
 but is not limited to filters and data sets.
 
 =back
 
 =head1 SEE ALSO
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-snmp.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-snmp.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-snmp.5	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-snmp.5	2012-04-02 16:16:53.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-SNMP 5"
-.TH COLLECTD-SNMP 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-SNMP 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-snmp \- Documentation of collectd's \f(CW\*(C`snmp plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-threshold.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-threshold.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-threshold.5	2012-11-11 19:39:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-threshold.5	2012-04-02 16:16:53.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-THRESHOLD 5"
-.TH COLLECTD-THRESHOLD 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-THRESHOLD 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-threshold \- Documentation of collectd's \fIThreshold plugin\fR
@@ -278,12 +278,18 @@
 \&\fBfalse\fR (the default) then a notification is only generated if a value is out
 of range but the previous value was okay.
 .Sp
 This applies to missing values, too: If set to \fBtrue\fR a notification about a
 missing value is generated once every \fBInterval\fR seconds. If set to \fBfalse\fR
 only one such notification is generated until the value appears again.
+.IP "\fBPersistOK\fR \fBtrue\fR|\fBfalse\fR" 4
+.IX Item "PersistOK true|false"
+Sets how \s-1OKAY\s0 notifications act. If set to \fBtrue\fR one notification will be
+generated for each value that is in the acceptable range. If set to \fBfalse\fR
+(the default) then a notification is only generated if a value is in range but
+the previous value was not.
 .IP "\fBPercentage\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "Percentage true|false"
 If set to \fBtrue\fR, the minimum and maximum values given are interpreted as
 percentage value, relative to the other data sources. This is helpful for
 example for the \*(L"df\*(R" type, where you may want to issue a warning when less than
 5\ % of the total space is available. Defaults to \fBfalse\fR.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-threshold.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-threshold.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-threshold.pod	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-threshold.pod	2012-04-02 16:04:58.000000000 +0800
@@ -151,12 +151,19 @@
 of range but the previous value was okay.
 
 This applies to missing values, too: If set to B<true> a notification about a
 missing value is generated once every B<Interval> seconds. If set to B<false>
 only one such notification is generated until the value appears again.
 
+=item B<PersistOK> B<true>|B<false>
+
+Sets how OKAY notifications act. If set to B<true> one notification will be
+generated for each value that is in the acceptable range. If set to B<false>
+(the default) then a notification is only generated if a value is in range but
+the previous value was not.
+
 =item B<Percentage> B<true>|B<false>
 
 If set to B<true>, the minimum and maximum values given are interpreted as
 percentage value, relative to the other data sources. This is helpful for
 example for the "df" type, where you may want to issue a warning when less than
 5E<nbsp>% of the total space is available. Defaults to B<false>.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-unixsock.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-unixsock.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/collectd-unixsock.5	2012-11-11 19:39:10.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/collectd-unixsock.5	2012-04-02 16:16:54.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-UNIXSOCK 5"
-.TH COLLECTD-UNIXSOCK 5 "2012-11-11" "5.0.5" "collectd"
+.TH COLLECTD-UNIXSOCK 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-unixsock \- Documentation of collectd's \f(CW\*(C`unixsock plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/common.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/common.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/common.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/common.c	2012-04-02 16:04:58.000000000 +0800
@@ -545,13 +545,13 @@
 		while (42) {
 			if ((stat (dir, &statbuf) == -1)
 					&& (lstat (dir, &statbuf) == -1))
 			{
 				if (errno == ENOENT)
 				{
-					if (mkdir (dir, S_IRWXU | S_IRWXG | S_IRWXO) == 0)
+					if (mkdir (dir, 0755) == 0)
 						break;
 
 					/* this might happen, if a different thread created
 					 * the directory in the meantime
 					 * => call stat() again to check for S_ISDIR() */
 					if (EEXIST == errno)
@@ -633,29 +633,30 @@
 
 long long get_kstat_value (kstat_t *ksp, char *name)
 {
 	kstat_named_t *kn;
 	long long retval = -1LL;
 
+#ifdef assert
+	assert (ksp != NULL);
+	assert (ksp->ks_type == KSTAT_TYPE_NAMED);
+#else
 	if (ksp == NULL)
 	{
-		ERROR ("get_kstat_value (\"%s\"): ksp is NULL.", name);
+		ERROR ("ERROR: %s:%i: ksp == NULL\n", __FILE__, __LINE__);
 		return (-1LL);
 	}
 	else if (ksp->ks_type != KSTAT_TYPE_NAMED)
 	{
-		ERROR ("get_kstat_value (\"%s\"): ksp->ks_type (%#x) "
-				"is not KSTAT_TYPE_NAMED (%#x).",
-				name,
-				(unsigned int) ksp->ks_type,
-				(unsigned int) KSTAT_TYPE_NAMED);
+		ERROR ("ERROR: %s:%i: ksp->ks_type != KSTAT_TYPE_NAMED\n", __FILE__, __LINE__);
 		return (-1LL);
 	}
+#endif
 
 	if ((kn = (kstat_named_t *) kstat_data_lookup (ksp, name)) == NULL)
-		return (-1LL);
+		return (retval);
 
 	if (kn->data_type == KSTAT_DATA_INT32)
 		retval = (long long) kn->value.i32;
 	else if (kn->data_type == KSTAT_DATA_UINT32)
 		retval = (long long) kn->value.ui32;
 	else if (kn->data_type == KSTAT_DATA_INT64)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/configfile.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/configfile.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/configfile.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/configfile.c	2012-04-02 16:04:58.000000000 +0800
@@ -1091,12 +1091,60 @@
 		return (-1);
 	}
 
 	return (tmp);
 } /* }}} int cf_util_get_port_number */
 
+int cf_util_get_service (const oconfig_item_t *ci, char **ret_string) /* {{{ */
+{
+	int port;
+	char *service;
+	int status;
+
+	if (ci->values_num != 1)
+	{
+		ERROR ("cf_util_get_service: The %s option requires exactly "
+				"one argument.", ci->key);
+		return (-1);
+	}
+
+	if (ci->values[0].type == OCONFIG_TYPE_STRING)
+		return (cf_util_get_string (ci, ret_string));
+	if (ci->values[0].type != OCONFIG_TYPE_NUMBER)
+	{
+		ERROR ("cf_util_get_service: The %s option requires "
+				"exactly one string or numeric argument.",
+				ci->key);
+	}
+
+	port = 0;
+	status = cf_util_get_int (ci, &port);
+	if (status != 0)
+		return (status);
+	else if ((port < 1) || (port > 65535))
+	{
+		ERROR ("cf_util_get_service: The port number given "
+				"for the %s option is out of "
+				"range (%i).", ci->key, port);
+		return (-1);
+	}
+
+	service = malloc (6);
+	if (service == NULL)
+	{
+		ERROR ("cf_util_get_service: Out of memory.");
+		return (-1);
+	}
+	ssnprintf (service, 6, "%i", port);
+
+	sfree (*ret_string);
+	*ret_string = service;
+
+	return (0);
+} /* }}} int cf_util_get_service */
+
 int cf_util_get_cdtime (const oconfig_item_t *ci, cdtime_t *ret_value) /* {{{ */
 {
 	if ((ci == NULL) || (ret_value == NULL))
 		return (EINVAL);
 
 	if ((ci->values_num != 1) || (ci->values[0].type != OCONFIG_TYPE_NUMBER))
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/configfile.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/configfile.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/configfile.h	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/configfile.h	2012-04-02 16:04:58.000000000 +0800
@@ -113,9 +113,15 @@
  * of 1-65535. The string is then converted to a port number using
  * `service_name_to_port_number' and returned.
  * Returns the port number in the range [1-65535] or less than zero upon
  * failure. */
 int cf_util_get_port_number (const oconfig_item_t *ci);
 
+/* Assures that the config option is either a service name (a string) or a port
+ * number (an integer in the appropriate range) and returns a newly allocated
+ * string. If ret_string points to a non-NULL pointer, it is freed before
+ * assigning a new value. */
+int cf_util_get_service (const oconfig_item_t *ci, char **ret_string);
+
 int cf_util_get_cdtime (const oconfig_item_t *ci, cdtime_t *ret_value);
 
 #endif /* defined(CONFIGFILE_H) */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/config.h.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/config.h.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/config.h.in	2012-11-11 19:38:22.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/config.h.in	2012-04-02 16:06:21.000000000 +0800
@@ -353,12 +353,15 @@
 /* Define to 1 if you have the <limits.h> header file. */
 #undef HAVE_LIMITS_H
 
 /* Define to 1 if you have the <linux/config.h> header file. */
 #undef HAVE_LINUX_CONFIG_H
 
+/* Define to 1 if you have the <linux/ethtool.h> header file. */
+#undef HAVE_LINUX_ETHTOOL_H
+
 /* Define to 1 if you have the <linux/gen_stats.h> header file. */
 #undef HAVE_LINUX_GEN_STATS_H
 
 /* Define to 1 if you have the <linux/if.h> header file. */
 #undef HAVE_LINUX_IF_H
 
@@ -385,12 +388,18 @@
 /* Define to 1 if you have the <linux/netfilter/x_tables.h> header file. */
 #undef HAVE_LINUX_NETFILTER_X_TABLES_H
 
 /* Define to 1 if you have the <linux/pkt_sched.h> header file. */
 #undef HAVE_LINUX_PKT_SCHED_H
 
+/* Define to 1 if you have the <linux/raid/md_u.h> header file. */
+#undef HAVE_LINUX_RAID_MD_U_H
+
+/* Define to 1 if you have the <linux/sockios.h> header file. */
+#undef HAVE_LINUX_SOCKIOS_H
+
 /* Define to 1 if you have the <linux/un.h> header file. */
 #undef HAVE_LINUX_UN_H
 
 /* Define to 1 if you have the <linux/wireless.h> header file. */
 #undef HAVE_LINUX_WIRELESS_H
 
@@ -469,12 +478,15 @@
 /* Define to 1 if you have the <mnttab.h> header file. */
 #undef HAVE_MNTTAB_H
 
 /* Define to 1 if you have the <modbus/modbus.h> header file. */
 #undef HAVE_MODBUS_MODBUS_H
 
+/* Define to 1 if you have the <mongo.h> header file. */
+#undef HAVE_MONGO_H
+
 /* Define to 1 if you have the <mysql.h> header file. */
 #undef HAVE_MYSQL_H
 
 /* Define to 1 if you have the <mysql/mysql.h> header file. */
 #undef HAVE_MYSQL_MYSQL_H
 
@@ -502,15 +514,12 @@
 /* Define to 1 if you have the <netinet/in_systm.h> header file. */
 #undef HAVE_NETINET_IN_SYSTM_H
 
 /* Define to 1 if you have the <netinet/ip6.h> header file. */
 #undef HAVE_NETINET_IP6_H
 
-/* Define to 1 if you have the <netinet/ip_compat.h> header file. */
-#undef HAVE_NETINET_IP_COMPAT_H
-
 /* Define to 1 if you have the <netinet/ip.h> header file. */
 #undef HAVE_NETINET_IP_H
 
 /* Define to 1 if you have the <netinet/ip_icmp.h> header file. */
 #undef HAVE_NETINET_IP_ICMP_H
 
@@ -643,12 +652,15 @@
 /* Define to 1 if the email plugin is enabled. */
 #undef HAVE_PLUGIN_EMAIL
 
 /* Define to 1 if the entropy plugin is enabled. */
 #undef HAVE_PLUGIN_ENTROPY
 
+/* Define to 1 if the ethstat plugin is enabled. */
+#undef HAVE_PLUGIN_ETHSTAT
+
 /* Define to 1 if the exec plugin is enabled. */
 #undef HAVE_PLUGIN_EXEC
 
 /* Define to 1 if the filecount plugin is enabled. */
 #undef HAVE_PLUGIN_FILECOUNT
 
@@ -709,12 +721,15 @@
 /* Define to 1 if the match_value plugin is enabled. */
 #undef HAVE_PLUGIN_MATCH_VALUE
 
 /* Define to 1 if the mbmon plugin is enabled. */
 #undef HAVE_PLUGIN_MBMON
 
+/* Define to 1 if the md plugin is enabled. */
+#undef HAVE_PLUGIN_MD
+
 /* Define to 1 if the memcachec plugin is enabled. */
 #undef HAVE_PLUGIN_MEMCACHEC
 
 /* Define to 1 if the memcached plugin is enabled. */
 #undef HAVE_PLUGIN_MEMCACHED
 
@@ -751,12 +766,15 @@
 /* Define to 1 if the notify_email plugin is enabled. */
 #undef HAVE_PLUGIN_NOTIFY_EMAIL
 
 /* Define to 1 if the ntpd plugin is enabled. */
 #undef HAVE_PLUGIN_NTPD
 
+/* Define to 1 if the numa plugin is enabled. */
+#undef HAVE_PLUGIN_NUMA
+
 /* Define to 1 if the nut plugin is enabled. */
 #undef HAVE_PLUGIN_NUT
 
 /* Define to 1 if the olsrd plugin is enabled. */
 #undef HAVE_PLUGIN_OLSRD
 
@@ -883,15 +901,21 @@
 /* Define to 1 if the vserver plugin is enabled. */
 #undef HAVE_PLUGIN_VSERVER
 
 /* Define to 1 if the wireless plugin is enabled. */
 #undef HAVE_PLUGIN_WIRELESS
 
+/* Define to 1 if the write_graphite plugin is enabled. */
+#undef HAVE_PLUGIN_WRITE_GRAPHITE
+
 /* Define to 1 if the write_http plugin is enabled. */
 #undef HAVE_PLUGIN_WRITE_HTTP
 
+/* Define to 1 if the write_mongodb plugin is enabled. */
+#undef HAVE_PLUGIN_WRITE_MONGODB
+
 /* Define to 1 if the write_redis plugin is enabled. */
 #undef HAVE_PLUGIN_WRITE_REDIS
 
 /* Define to 1 if the xmms plugin is enabled. */
 #undef HAVE_PLUGIN_XMMS
 
@@ -1248,15 +1272,24 @@
 /* Define to 1 if you have the <utmpx.h> header file. */
 #undef HAVE_UTMPX_H
 
 /* Define to 1 if you have the <utmp.h> header file. */
 #undef HAVE_UTMP_H
 
+/* Varnish 2 API support */
+#undef HAVE_VARNISH_V2
+
+/* Varnish 3 API support */
+#undef HAVE_VARNISH_V3
+
 /* Define to 1 if you have the <varnish/varnishapi.h> header file. */
 #undef HAVE_VARNISH_VARNISHAPI_H
 
+/* Define to 1 if you have the <varnish/vsc.h> header file. */
+#undef HAVE_VARNISH_VSC_H
+
 /* Define to 1 if you have the <vm/anon.h> header file. */
 #undef HAVE_VM_ANON_H
 
 /* Define to 1 if you have the <wordexp.h> header file. */
 #undef HAVE_WORDEXP_H
 
@@ -1347,18 +1380,12 @@
 /* Define to the version of this package. */
 #undef PACKAGE_VERSION
 
 /* Define to 1 if your version of the 'perfstat' library supports donation */
 #undef PERFSTAT_SUPPORTS_DONATION
 
-/* Define to 1 if function 'rtnl_dump_filter' expects five arguments. */
-#undef RTNL_DUMP_FILTER_FIVE_ARGS
-
-/* Define to 1 if function 'rtnl_dump_filter' expects three arguments. */
-#undef RTNL_DUMP_FILTER_THREE_ARGS
-
 /* Define to 1 if you have the ANSI C header files. */
 #undef STDC_HEADERS
 
 /* Define to 1 if strerror_r returns char *. */
 #undef STRERROR_R_CHAR_P
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/curl_xml.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/curl_xml.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/curl_xml.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/curl_xml.c	2012-04-02 16:04:58.000000000 +0800
@@ -416,14 +416,13 @@
    * somewhere inside this structure. */
   xmlXPathFreeObject (instance_node_obj);
 
   return (0);
 } /* }}} int cx_handle_instance_xpath */
 
-static int  cx_handle_base_xpath (char const *plugin_instance, /* {{{ */
-    char const *host,
+static int  cx_handle_base_xpath (char *plugin_instance, /* {{{ */
     xmlXPathContextPtr xpath_ctx, const data_set_t *ds, 
     char *base_xpath, cx_xpath_t *xpath)
 {
   int total_nodes;
   int i;
 
@@ -459,13 +458,13 @@
   }
 
   /* set the values for the value_list */
   vl.values_len = ds->ds_num;
   sstrncpy (vl.type, xpath->type, sizeof (vl.type));
   sstrncpy (vl.plugin, "curl_xml", sizeof (vl.plugin));
-  sstrncpy (vl.host, (host != NULL) ? host : hostname_g, sizeof (vl.host));
+  sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   if (plugin_instance != NULL)
     sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance)); 
 
   for (i = 0; i < total_nodes; i++)
   {
     int status;
@@ -502,14 +501,13 @@
   {
     /* get the ds */
     xpath = (cx_xpath_t *) le->value;
     ds = plugin_get_ds (xpath->type);
 
     if ( (cx_check_type(ds, xpath) == 0) &&
-         (cx_handle_base_xpath(db->instance, db->host,
-                               xpath_ctx, ds, le->key, xpath) == 0) )
+         (cx_handle_base_xpath(db->instance, xpath_ctx, ds, le->key, xpath) == 0) )
       status = 0; /* we got atleast one success */
 
     le = le->next;
   } /* while (le != NULL) */
 
   return status;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/df.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/df.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/df.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/df.c	2012-04-02 16:04:58.000000000 +0800
@@ -225,14 +225,12 @@
 			}
 		} 
 		else 
 		{
 			if (strcmp (mnt_ptr->dir, "/") == 0)
 			{
-				if (strcmp (mnt_ptr->type, "rootfs") == 0)
-					continue;
 				sstrncpy (disk_name, "root", sizeof (disk_name));
 			}
 			else
 			{
 				int i, len;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/disk.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/disk.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/disk.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/disk.c	2012-04-02 16:04:58.000000000 +0800
@@ -232,22 +232,12 @@
 			sizeof (vl.plugin_instance));
 	sstrncpy (vl.type, type, sizeof (vl.type));
 
 	plugin_dispatch_values (&vl);
 } /* void disk_submit */
 
-#if KERNEL_LINUX
-static counter_t disk_calc_time_incr (counter_t delta_time, counter_t delta_ops)
-{
-	double avg_time = ((double) delta_time) / ((double) delta_ops);
-	double avg_time_incr = CDTIME_T_TO_DOUBLE (interval_g) * avg_time;
-
-	return ((counter_t) (avg_time_incr + .5));
-}
-#endif
-
 #if HAVE_IOKIT_IOKITLIB_H
 static signed long long dict_get_value (CFDictionaryRef dict, const char *key)
 {
 	signed long long val_int;
 	CFNumberRef      val_obj;
 	CFStringRef      key_obj;
@@ -586,17 +576,19 @@
 				diff_write_time = 1 + write_time
 					+ (UINT_MAX - ds->write_time);
 			else
 				diff_write_time = write_time - ds->write_time;
 
 			if (diff_read_ops != 0)
-				ds->avg_read_time += disk_calc_time_incr (
-						diff_read_time, diff_read_ops);
+				ds->avg_read_time += (diff_read_time
+						+ (diff_read_ops / 2))
+					/ diff_read_ops;
 			if (diff_write_ops != 0)
-				ds->avg_write_time += disk_calc_time_incr (
-						diff_write_time, diff_write_ops);
+				ds->avg_write_time += (diff_write_time
+						+ (diff_write_ops / 2))
+					/ diff_write_ops;
 
 			ds->read_ops = read_ops;
 			ds->read_time = read_time;
 			ds->write_ops = write_ops;
 			ds->write_time = write_time;
 		} /* if (is_disk) */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/email.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/email.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/email.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/email.c	2012-04-02 16:04:58.000000000 +0800
@@ -373,13 +373,12 @@
 		pthread_mutex_unlock (&available_mutex);
 
 		pthread_cond_signal (&collector_available);
 	} /* while (1) */
 
 	pthread_exit ((void *)0);
-	return ((void *) 0);
 } /* static void *collect (void *) */
 
 static void *open_connection (void __attribute__((unused)) *arg)
 {
 	struct sockaddr_un addr;
 
@@ -546,15 +545,13 @@
 		}
 
 		pthread_mutex_unlock (&conns_mutex);
 
 		pthread_cond_signal (&conn_available);
 	}
-
-	pthread_exit ((void *) 0);
-	return ((void *) 0);
+	pthread_exit ((void *)0);
 } /* static void *open_connection (void *) */
 
 static int email_init (void)
 {
 	int err = 0;
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src: ethstat.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/exec.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/exec.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/exec.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/exec.c	2012-04-02 16:04:58.000000000 +0800
@@ -632,28 +632,23 @@
       char *pnl;
 
       len = read(fd_err, pbuffer_err, sizeof(buffer_err) - 1 - (pbuffer_err - buffer_err));
 
       if (len < 0)
       {
-        if (errno == EAGAIN || errno == EINTR)
-          continue;
+        if (errno == EAGAIN || errno == EINTR)  continue;
         break;
       }
       else if (len == 0)
       {
         /* We've reached EOF */
-        NOTICE ("exec plugin: Program `%s' has closed STDERR.", pl->exec);
-
-        /* Remove file descriptor form select() set. */
+        NOTICE ("exec plugin: Program `%s' has closed STDERR.",
+            pl->exec);
+        close (fd_err);
         FD_CLR (fd_err, &fdset);
-        copy = fdset;
         highest_fd = fd;
-
-        /* Clean up file descriptor */
-        close (fd_err);
         fd_err = -1;
         continue;
       }
 
       pbuffer_err[len] = '\0';
 
@@ -824,13 +819,12 @@
     pl->flags |= PL_RUNNING;
     pthread_mutex_unlock (&pl_lock);
 
     pthread_attr_init (&attr);
     pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
     pthread_create (&t, &attr, exec_read_one, (void *) pl);
-    pthread_attr_destroy (&attr);
   } /* for (pl) */
 
   return (0);
 } /* int exec_read }}} */
 
 static int exec_notification (const notification_t *n, /* {{{ */
@@ -868,13 +862,12 @@
     pln->n.meta = NULL;
     plugin_notification_meta_copy (&pln->n, n);
 
     pthread_attr_init (&attr);
     pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
     pthread_create (&t, &attr, exec_notification_one, (void *) pln);
-    pthread_attr_destroy (&attr);
   } /* for (pl) */
 
   return (0);
 } /* }}} int exec_notification */
 
 static int exec_shutdown (void) /* {{{ */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/iptables.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/iptables.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/iptables.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/iptables.c	2012-04-02 16:04:58.000000000 +0800
@@ -28,22 +28,14 @@
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
 
 #include <sys/socket.h>
 
-#if OWN_LIBIPTC
-# include "owniptc/libiptc.h"
-# include "owniptc/libip6tc.h"
-
-# define HAVE_IPTC_HANDLE_T 1
-# define HAVE_IP6TC_HANDLE_T 1
-
-#else /* if !OWN_LIBIPTC */
-# include <libiptc/libiptc.h>
-# include <libiptc/libip6tc.h>
+#include <libiptc/libiptc.h>
+#include <libiptc/libip6tc.h>
 
 /*
  * iptc_handle_t was available before libiptc was officially available as a
  * shared library. Note, that when the shared lib was introduced, the API and
  * ABI have changed slightly:
  * 'iptc_handle_t' used to be 'struct iptc_handle *' and most functions used
@@ -51,19 +43,18 @@
  * iptc_handle *' (thus removing one level of pointer indirection).
  *
  * HAVE_IPTC_HANDLE_T is used to determine which API ought to be used. While
  * this is somewhat hacky, I didn't find better way to solve that :-/
  * -tokkee
  */
-# ifndef HAVE_IPTC_HANDLE_T
+#ifndef HAVE_IPTC_HANDLE_T
 typedef struct iptc_handle iptc_handle_t;
-# endif
-# ifndef HAVE_IP6TC_HANDLE_T
+#endif
+#ifndef HAVE_IP6TC_HANDLE_T
 typedef struct ip6tc_handle ip6tc_handle_t;
-# endif
-#endif /* !OWN_LIBIPTC */
+#endif
 
 /*
  * (Module-)Global variables
  */
 
 /*
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/irq.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/irq.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/irq.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/irq.c	2012-04-02 16:04:58.000000000 +0800
@@ -1,9 +1,10 @@
 /**
  * collectd - src/irq.c
  * Copyright (C) 2007  Peter Holik
+ * Copyright (C) 2011  Florian Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; either version 2 of the License, or (at your
  * option) any later version.
  *
@@ -21,12 +22,13 @@
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
+#include "utils_ignorelist.h"
 
 #if !KERNEL_LINUX
 # error "No applicable input method."
 #endif
 
 /*
@@ -36,85 +38,47 @@
 {
 	"Irq",
 	"IgnoreSelected"
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
-static char         **irq_list;
-static unsigned int   irq_list_num = 0;
+static ignorelist_t *ignorelist = NULL;
 
-/* 
- * irq_list_action:
- * 0 => default is to collect selected irqs
- * 1 => ignore selcted irqs
+/*
+ * Private functions
  */
-static int irq_list_action;
-
 static int irq_config (const char *key, const char *value)
 {
+	if (ignorelist == NULL)
+		ignorelist = ignorelist_create (/* invert = */ 1);
+
 	if (strcasecmp (key, "Irq") == 0)
 	{
-		char **temp;
-
-		temp = realloc (irq_list, (irq_list_num + 1) * sizeof (*irq_list));
-		if (temp == NULL)
-		{
-			fprintf (stderr, "irq plugin: Cannot allocate more memory.\n");
-			ERROR ("irq plugin: Cannot allocate more memory.");
-			return (1);
-		}
-		irq_list = temp;
-
-		irq_list[irq_list_num] = strdup (value);
-		if (irq_list[irq_list_num] == NULL)
-		{
-			ERROR ("irq plugin: strdup(3) failed.");
-			return (1);
-		}
-
-		irq_list_num++;
+		ignorelist_add (ignorelist, value);
 	}
 	else if (strcasecmp (key, "IgnoreSelected") == 0)
 	{
+		int invert = 1;
 		if (IS_TRUE (value))
-			irq_list_action = 1;
-		else
-			irq_list_action = 0;
+			invert = 0;
+		ignorelist_set_invert (ignorelist, invert);
 	}
 	else
 	{
 		return (-1);
 	}
-	return (0);
-}
-
-/*
- * Check if this interface/instance should be ignored. This is called from
- * both, `submit' and `write' to give client and server the ability to
- * ignore certain stuff..
- */
-static int check_ignore_irq (const char *irq)
-{
-	unsigned int i;
 
-	if (irq_list_num < 1)
-		return (0);
-
-	for (i = 0; i < irq_list_num; i++)
-		if (strcmp (irq, irq_list[i]) == 0)
-			return (irq_list_action);
-
-	return (1 - irq_list_action);
+	return (0);
 }
 
 static void irq_submit (const char *irq_name, derive_t value)
 {
 	value_t values[1];
 	value_list_t vl = VALUE_LIST_INIT;
 
-	if (check_ignore_irq (irq_name))
+	if (ignorelist_match (ignorelist, irq_name) != 0)
 		return;
 
 	values[0].derive = value;
 
 	vl.values = values;
 	vl.values_len = 1;
@@ -127,36 +91,63 @@
 } /* void irq_submit */
 
 static int irq_read (void)
 {
 	FILE *fh;
 	char buffer[1024];
+	int  cpu_count;
+	char *fields[256];
 
+	/*
+	 * Example content:
+	 *         CPU0       CPU1       CPU2       CPU3
+	 * 0:       2574          1          3          2   IO-APIC-edge      timer
+	 * 1:     102553     158669     218062      70587   IO-APIC-edge      i8042
+	 * 8:          0          0          0          1   IO-APIC-edge      rtc0
+	 */
 	fh = fopen ("/proc/interrupts", "r");
 	if (fh == NULL)
 	{
 		char errbuf[1024];
 		ERROR ("irq plugin: fopen (/proc/interrupts): %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		return (-1);
 	}
 
+	/* Get CPU count from the first line */
+	if(fgets (buffer, sizeof (buffer), fh) != NULL) {
+		cpu_count = strsplit (buffer, fields,
+				STATIC_ARRAY_SIZE (fields));
+	} else {
+		ERROR ("irq plugin: unable to get CPU count from first line "
+				"of /proc/interrupts");
+		return (-1);
+	}
+
 	while (fgets (buffer, sizeof (buffer), fh) != NULL)
 	{
 		char *irq_name;
 		size_t irq_name_len;
 		derive_t irq_value;
 		int i;
-
-		char *fields[64];
 		int fields_num;
+		int irq_values_to_parse;
 
-		fields_num = strsplit (buffer, fields, 64);
+		fields_num = strsplit (buffer, fields,
+				STATIC_ARRAY_SIZE (fields));
 		if (fields_num < 2)
 			continue;
 
+		/* Parse this many numeric fields, skip the rest
+		 * (+1 because first there is a name of irq in each line) */
+		if (fields_num >= cpu_count + 1)
+			irq_values_to_parse = cpu_count;
+		else
+			irq_values_to_parse = fields_num - 1;
+
+		/* First field is irq name and colon */
 		irq_name = fields[0];
 		irq_name_len = strlen (irq_name);
 		if (irq_name_len < 2)
 			continue;
 
 		/* Check if irq name ends with colon.
@@ -165,13 +156,13 @@
 			continue;
 
 		irq_name[irq_name_len - 1] = 0;
 		irq_name_len--;
 
 		irq_value = 0;
-		for (i = 1; i < fields_num; i++)
+		for (i = 1; i <= irq_values_to_parse; i++)
 		{
 			/* Per-CPU value */
 			value_t v;
 			int status;
 
 			status = parse_value (fields[i], &v, DS_TYPE_DERIVE);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/libcollectdclient/client.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/libcollectdclient/client.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/libcollectdclient/client.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/libcollectdclient/client.c	2012-04-02 16:04:58.000000000 +0800
@@ -225,12 +225,59 @@
       break;
     str[str_len - 1] = 0;
     str_len--;
   }
 } /* }}} void lcc_chomp */
 
+static int lcc_identifier_cmp (const void *a, const void *b)
+{
+  const lcc_identifier_t *ident_a, *ident_b;
+
+  int status;
+
+  ident_a = a;
+  ident_b = b;
+
+  status = strcasecmp (ident_a->host, ident_b->host);
+  if (status != 0)
+    return (status);
+
+  status = strcmp (ident_a->plugin, ident_b->plugin);
+  if (status != 0)
+    return (status);
+
+  if ((*ident_a->plugin_instance != '\0') || (*ident_b->plugin_instance != '\0'))
+  {
+    if (*ident_a->plugin_instance == '\0')
+      return (-1);
+    else if (*ident_b->plugin_instance == '\0')
+      return (1);
+
+    status = strcmp (ident_a->plugin_instance, ident_b->plugin_instance);
+    if (status != 0)
+      return (status);
+  }
+
+  status = strcmp (ident_a->type, ident_b->type);
+  if (status != 0)
+    return (status);
+
+  if ((*ident_a->type_instance != '\0') || (*ident_b->type_instance != '\0'))
+  {
+    if (*ident_a->type_instance == '\0')
+      return (-1);
+    else if (*ident_b->type_instance == '\0')
+      return (1);
+
+    status = strcmp (ident_a->type_instance, ident_b->type_instance);
+    if (status != 0)
+      return (status);
+  }
+  return (0);
+} /* }}} int lcc_identifier_cmp */
+
 static void lcc_response_free (lcc_response_t *res) /* {{{ */
 {
   size_t i;
 
   if (res == NULL)
     return;
@@ -1055,7 +1102,20 @@
     SSTRCPY (ident->type_instance, type_instance);
 
   free (string_copy);
   return (0);
 } /* }}} int lcc_string_to_identifier */
 
+int lcc_sort_identifiers (lcc_connection_t *c, /* {{{ */
+    lcc_identifier_t *idents, size_t idents_num)
+{
+  if (idents == NULL)
+  {
+    lcc_set_errno (c, EINVAL);
+    return (-1);
+  }
+
+  qsort (idents, idents_num, sizeof (*idents), lcc_identifier_cmp);
+  return (0);
+} /* }}} int lcc_sort_identifiers */
+
 /* vim: set sw=2 sts=2 et fdm=marker : */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/libcollectdclient/client.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/libcollectdclient/client.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/libcollectdclient/client.h	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/libcollectdclient/client.h	2012-04-02 16:04:58.000000000 +0800
@@ -113,10 +113,13 @@
 
 int lcc_identifier_to_string (lcc_connection_t *c,
     char *string, size_t string_size, const lcc_identifier_t *ident);
 int lcc_string_to_identifier (lcc_connection_t *c,
     lcc_identifier_t *ident, const char *string);
 
+int lcc_sort_identifiers (lcc_connection_t *c,
+    lcc_identifier_t *idents, size_t idents_num);
+
 LCC_END_DECLS
 
 /* vim: set sw=2 sts=2 et : */
 #endif /* LIBCOLLECTD_COLLECTDCLIENT_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/libcollectdclient/lcc_features.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/libcollectdclient/lcc_features.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/libcollectdclient/lcc_features.h	2012-11-11 19:38:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/libcollectdclient/lcc_features.h	2012-04-02 16:06:08.000000000 +0800
@@ -30,18 +30,18 @@
 # define LCC_END_DECLS
 #endif
 
 #define LCC_API_VERSION 0
 
 #define LCC_VERSION_MAJOR 5
-#define LCC_VERSION_MINOR 0
-#define LCC_VERSION_PATCH 5
+#define LCC_VERSION_MINOR 1
+#define LCC_VERSION_PATCH 0
 
 #define LCC_VERSION_EXTRA ""
 
-#define LCC_VERSION_STRING "5.0.5"
+#define LCC_VERSION_STRING "5.1.0"
 
 #define LCC_VERSION_ENCODE(major, minor, patch) \
 	((major) * 10000 + (minor) * 100 + (patch))
 
 #define LCC_VERSION \
 	LCC_VERSION_ENCODE(LCC_VERSION_MAJOR, LCC_VERSION_MINOR, LCC_VERSION_PATCH)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/libcollectdclient/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/libcollectdclient/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/libcollectdclient/Makefile.in	2012-11-11 19:38:32.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/libcollectdclient/Makefile.in	2012-04-02 16:05:30.000000000 +0800
@@ -118,12 +118,14 @@
 BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMODBUS_CFLAGS = @BUILD_WITH_LIBMODBUS_CFLAGS@
 BUILD_WITH_LIBMODBUS_LIBS = @BUILD_WITH_LIBMODBUS_LIBS@
+BUILD_WITH_LIBMONGOC_CPPFLAGS = @BUILD_WITH_LIBMONGOC_CPPFLAGS@
+BUILD_WITH_LIBMONGOC_LDFLAGS = @BUILD_WITH_LIBMONGOC_LDFLAGS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
 BUILD_WITH_LIBOPING_CPPFLAGS = @BUILD_WITH_LIBOPING_CPPFLAGS@
 BUILD_WITH_LIBOPING_LDFLAGS = @BUILD_WITH_LIBOPING_LDFLAGS@
@@ -264,12 +266,14 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
+PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
+PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/liboconfig/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/liboconfig/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/liboconfig/Makefile.in	2012-11-11 19:38:32.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/liboconfig/Makefile.in	2012-04-02 16:05:31.000000000 +0800
@@ -97,12 +97,14 @@
 BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMODBUS_CFLAGS = @BUILD_WITH_LIBMODBUS_CFLAGS@
 BUILD_WITH_LIBMODBUS_LIBS = @BUILD_WITH_LIBMODBUS_LIBS@
+BUILD_WITH_LIBMONGOC_CPPFLAGS = @BUILD_WITH_LIBMONGOC_CPPFLAGS@
+BUILD_WITH_LIBMONGOC_LDFLAGS = @BUILD_WITH_LIBMONGOC_LDFLAGS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
 BUILD_WITH_LIBOPING_CPPFLAGS = @BUILD_WITH_LIBOPING_CPPFLAGS@
 BUILD_WITH_LIBOPING_LDFLAGS = @BUILD_WITH_LIBOPING_LDFLAGS@
@@ -243,12 +245,14 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
+PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
+PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/logfile.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/logfile.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/logfile.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/logfile.c	2012-04-02 16:04:58.000000000 +0800
@@ -50,29 +50,14 @@
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
 static int logfile_config (const char *key, const char *value)
 {
 	if (0 == strcasecmp (key, "LogLevel")) {
-		if ((0 == strcasecmp (value, "emerg"))
-				|| (0 == strcasecmp (value, "alert"))
-				|| (0 == strcasecmp (value, "crit"))
-				|| (0 == strcasecmp (value, "err")))
-			log_level = LOG_ERR;
-		else if (0 == strcasecmp (value, "warning"))
-			log_level = LOG_WARNING;
-		else if (0 == strcasecmp (value, "notice"))
-			log_level = LOG_NOTICE;
-		else if (0 == strcasecmp (value, "info"))
-			log_level = LOG_INFO;
-#if COLLECT_DEBUG
-		else if (0 == strcasecmp (value, "debug"))
-			log_level = LOG_DEBUG;
-#endif /* COLLECT_DEBUG */
-		else
-			return 1;
+		log_level = parse_log_severity(value);
+		if (log_level == -1) return 1; /* to keep previous behaviour */
 	}
 	else if (0 == strcasecmp (key, "File")) {
 		sfree (log_file);
 		log_file = strdup (value);
 	}
 	else if (0 == strcasecmp (key, "Timestamp")) {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/Makefile.am	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/Makefile.am	2012-04-02 16:04:58.000000000 +0800
@@ -1,10 +1,7 @@
 SUBDIRS = libcollectdclient
-if BUILD_WITH_OWN_LIBIPTC
-SUBDIRS += owniptc
-endif
 if BUILD_WITH_OWN_LIBOCONFIG
 SUBDIRS += liboconfig
 endif
 
 if COMPILER_IS_GCC
 AM_CFLAGS = -Wall -Werror
@@ -43,13 +40,13 @@
 		   utils_time.c utils_time.h \
 		   types_list.c types_list.h
 
 collectd_CPPFLAGS =  $(AM_CPPFLAGS) $(LTDLINCL)
 collectd_CFLAGS = $(AM_CFLAGS)
 collectd_LDFLAGS = -export-dynamic
-collectd_LDADD = -lm
+collectd_LDADD =
 collectd_DEPENDENCIES =
 
 # Link to these libraries..
 if BUILD_WITH_LIBRT
 collectd_LDADD += -lrt
 endif
@@ -70,12 +67,13 @@
 endif
 if BUILD_WITH_LIBDEVINFO
 collectd_LDADD += -ldevinfo
 endif
 if BUILD_AIX
 collectd_LDFLAGS += -Wl,-bexpall,-brtllib
+collectd_LDADD += -lm
 endif
 
 # The daemon needs to call sg_init, so we need to link it against libstatgrab,
 # too. -octo
 if BUILD_WITH_LIBSTATGRAB
 collectd_CFLAGS += $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
@@ -377,12 +375,20 @@
 exec_la_LDFLAGS = -module -avoid-version
 exec_la_LIBADD = -lpthread
 collectd_LDADD += "-dlopen" exec.la
 collectd_DEPENDENCIES += exec.la
 endif
 
+if BUILD_PLUGIN_ETHSTAT
+pkglib_LTLIBRARIES += ethstat.la
+ethstat_la_SOURCES = ethstat.c
+ethstat_la_LDFLAGS = -module -avoid-version
+collectd_LDADD += "-dlopen" ethstat.la
+collectd_DEPENDENCIES += ethstat.la
+endif
+
 if BUILD_PLUGIN_FILECOUNT
 pkglib_LTLIBRARIES += filecount.la
 filecount_la_SOURCES = filecount.c
 filecount_la_LDFLAGS = -module -avoid-version
 collectd_LDADD += "-dlopen" filecount.la
 collectd_DEPENDENCIES += filecount.la
@@ -436,18 +442,13 @@
 
 if BUILD_PLUGIN_IPTABLES
 pkglib_LTLIBRARIES += iptables.la
 iptables_la_SOURCES = iptables.c
 iptables_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBIPTC_CPPFLAGS)
 iptables_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBIPTC_LDFLAGS)
-if BUILD_WITH_OWN_LIBIPTC
-iptables_la_LIBADD  = owniptc/libiptc.la
-iptables_la_DEPENDENCIES = owniptc/libiptc.la
-else
 iptables_la_LIBADD = -liptc
-endif
 collectd_LDADD += "-dlopen" iptables.la
 collectd_DEPENDENCIES += iptables.la
 endif
 
 if BUILD_PLUGIN_IPMI
 pkglib_LTLIBRARIES += ipmi.la
@@ -591,12 +592,20 @@
 mbmon_la_LIBADD += -lsocket
 endif
 collectd_LDADD += "-dlopen" mbmon.la
 collectd_DEPENDENCIES += mbmon.la
 endif
 
+if BUILD_PLUGIN_MD
+pkglib_LTLIBRARIES += md.la
+md_la_SOURCES = md.c
+md_la_LDFLAGS = -module -avoid-version
+collectd_LDADD += "-dlopen" md.la
+collectd_DEPENDENCIES += md.la
+endif
+
 if BUILD_PLUGIN_MEMCACHEC
 pkglib_LTLIBRARIES += memcachec.la
 memcachec_la_SOURCES = memcachec.c
 memcachec_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBMEMCACHED_LDFLAGS)
 memcachec_la_CPPFLAGS = $(BUILD_WITH_LIBMEMCACHED_CPPFLAGS)
 memcachec_la_LIBADD = $(BUILD_WITH_LIBMEMCACHED_LIBS)
@@ -768,12 +777,20 @@
 ntpd_la_LIBADD += -lsocket
 endif
 collectd_LDADD += "-dlopen" ntpd.la
 collectd_DEPENDENCIES += ntpd.la
 endif
 
+if BUILD_PLUGIN_NUMA
+pkglib_LTLIBRARIES += numa.la
+numa_la_SOURCES = numa.c
+numa_la_LDFLAGS = -module -avoid-version
+collectd_LDADD += "-dlopen" numa.la
+collectd_DEPENDENCIES += numa.la
+endif
+
 if BUILD_PLUGIN_NUT
 pkglib_LTLIBRARIES += nut.la
 nut_la_SOURCES = nut.c
 nut_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBUPSCLIENT_CFLAGS)
 nut_la_LDFLAGS = -module -avoid-version
 nut_la_LIBADD = -lpthread $(BUILD_WITH_LIBUPSCLIENT_LIBS)
@@ -1234,12 +1251,21 @@
 wireless_la_SOURCES = wireless.c
 wireless_la_LDFLAGS = -module -avoid-version
 collectd_LDADD += "-dlopen" wireless.la
 collectd_DEPENDENCIES += wireless.la
 endif
 
+if BUILD_PLUGIN_WRITE_GRAPHITE
+pkglib_LTLIBRARIES += write_graphite.la
+write_graphite_la_SOURCES = write_graphite.c \
+			utils_format_json.c utils_format_json.h
+write_graphite_la_LDFLAGS = -module -avoid-version
+collectd_LDADD += "-dlopen" write_graphite.la
+collectd_DEPENDENCIES += write_graphite.la
+endif
+
 if BUILD_PLUGIN_WRITE_HTTP
 pkglib_LTLIBRARIES += write_http.la
 write_http_la_SOURCES = write_http.c \
 			utils_format_json.c utils_format_json.h
 write_http_la_LDFLAGS = -module -avoid-version
 write_http_la_CFLAGS = $(AM_CFLAGS)
@@ -1249,12 +1275,22 @@
 write_http_la_CFLAGS += $(BUILD_WITH_LIBCURL_CFLAGS)
 write_http_la_LIBADD += $(BUILD_WITH_LIBCURL_LIBS)
 endif
 collectd_DEPENDENCIES += write_http.la
 endif
 
+if BUILD_PLUGIN_WRITE_MONGODB
+pkglib_LTLIBRARIES += write_mongodb.la
+write_mongodb_la_SOURCES = write_mongodb.c
+write_mongodb_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBMONGOC_CPPFLAGS)
+write_mongodb_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBMONGOC_LDFLAGS)
+write_mongodb_la_LIBADD = -lmongoc
+collectd_LDADD += "-dlopen" write_mongodb.la
+collectd_DEPENDENCIES += write_mongodb.la
+endif
+
 if BUILD_PLUGIN_WRITE_REDIS
 pkglib_LTLIBRARIES += write_redis.la
 write_redis_la_SOURCES = write_redis.c
 write_redis_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBCREDIS_LDFLAGS)
 write_redis_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBCREDIS_CPPFLAGS)
 write_redis_la_LIBADD = -lcredis
@@ -1279,14 +1315,12 @@
 zfs_arc_la_LDFLAGS = -module -avoid-version
 zfs_arc_la_LIBADD = -lkstat
 collectd_LDADD += "-dlopen" zfs_arc.la
 collectd_DEPENDENCIES += zfs_arc.la
 endif
 
-BUILT_SOURCES += $(dist_man_MANS)
-
 dist_man_MANS = collectd.1 \
 		collectd.conf.5 \
 		collectd-email.5 \
 		collectd-exec.5 \
 		collectdctl.1 \
 		collectd-java.5 \
@@ -1333,13 +1367,13 @@
 	@if grep '\<POD ERRORS\>' $@ >/dev/null 2>&1; \
 	then \
 		echo "$@ has some POD errors!"; false; \
 	fi
 
 pinba.pb-c.c pinba.pb-c.h: pinba.proto
-	protoc-c --c_out . pinba.proto
+	protoc-c --c_out $(builddir) pinba.proto
 
 install-exec-hook:
 	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)
 	if test -e $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	then \
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf.pkg-orig; \
@@ -1347,11 +1381,6 @@
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	fi; \
 	$(mkinstalldirs) $(DESTDIR)$(pkgdatadir)
 	$(INSTALL) -m 0644 $(srcdir)/types.db $(DESTDIR)$(pkgdatadir)/types.db;
 	$(INSTALL) -m 0644 $(srcdir)/postgresql_default.conf \
 		$(DESTDIR)$(pkgdatadir)/postgresql_default.conf;
-
-uninstall-hook:
-	rm -f $(DESTDIR)$(pkgdatadir)/types.db;
-	rm -f $(DESTDIR)$(sysconfdir)/collectd.conf
-	rm -f $(DESTDIR)$(pkgdatadir)/postgresql_default.conf;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/Makefile.in	2012-11-11 19:38:32.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/Makefile.in	2012-04-02 16:05:30.000000000 +0800
@@ -32,27 +32,27 @@
 POST_INSTALL = :
 NORMAL_UNINSTALL = :
 PRE_UNINSTALL = :
 POST_UNINSTALL = :
 build_triplet = @build@
 host_triplet = @host@
-@BUILD_WITH_OWN_LIBIPTC_TRUE@am__append_1 = owniptc
-@BUILD_WITH_OWN_LIBOCONFIG_TRUE@am__append_2 = liboconfig
-@BUILD_FEATURE_DAEMON_TRUE@am__append_3 = -DPIDFILE='"${localstatedir}/run/${PACKAGE_NAME}.pid"'
+@BUILD_WITH_OWN_LIBOCONFIG_TRUE@am__append_1 = liboconfig
+@BUILD_FEATURE_DAEMON_TRUE@am__append_2 = -DPIDFILE='"${localstatedir}/run/${PACKAGE_NAME}.pid"'
 sbin_PROGRAMS = collectd$(EXEEXT) collectdmon$(EXEEXT)
 bin_PROGRAMS = collectd-nagios$(EXEEXT) collectdctl$(EXEEXT)
 
 # Link to these libraries..
-@BUILD_WITH_LIBRT_TRUE@am__append_4 = -lrt
-@BUILD_WITH_LIBPOSIX4_TRUE@am__append_5 = -lposix4
-@BUILD_WITH_LIBSOCKET_TRUE@am__append_6 = -lsocket
-@BUILD_WITH_LIBRESOLV_TRUE@am__append_7 = -lresolv
-@BUILD_WITH_LIBPTHREAD_TRUE@am__append_8 = -lpthread
-@BUILD_WITH_LIBKSTAT_TRUE@am__append_9 = -lkstat
-@BUILD_WITH_LIBDEVINFO_TRUE@am__append_10 = -ldevinfo
-@BUILD_AIX_TRUE@am__append_11 = -Wl,-bexpall,-brtllib
+@BUILD_WITH_LIBRT_TRUE@am__append_3 = -lrt
+@BUILD_WITH_LIBPOSIX4_TRUE@am__append_4 = -lposix4
+@BUILD_WITH_LIBSOCKET_TRUE@am__append_5 = -lsocket
+@BUILD_WITH_LIBRESOLV_TRUE@am__append_6 = -lresolv
+@BUILD_WITH_LIBPTHREAD_TRUE@am__append_7 = -lpthread
+@BUILD_WITH_LIBKSTAT_TRUE@am__append_8 = -lkstat
+@BUILD_WITH_LIBDEVINFO_TRUE@am__append_9 = -ldevinfo
+@BUILD_AIX_TRUE@am__append_10 = -Wl,-bexpall,-brtllib
+@BUILD_AIX_TRUE@am__append_11 = -lm
 
 # The daemon needs to call sg_init, so we need to link it against libstatgrab,
 # too. -octo
 @BUILD_WITH_LIBSTATGRAB_TRUE@am__append_12 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
 @BUILD_WITH_LIBSTATGRAB_TRUE@am__append_13 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
 @BUILD_WITH_OWN_LIBOCONFIG_TRUE@am__append_14 = $(LIBLTDL) liboconfig/liboconfig.la
@@ -144,310 +144,325 @@
 @BUILD_PLUGIN_ENTROPY_TRUE@am__append_100 = entropy.la
 @BUILD_PLUGIN_ENTROPY_TRUE@am__append_101 = "-dlopen" entropy.la
 @BUILD_PLUGIN_ENTROPY_TRUE@am__append_102 = entropy.la
 @BUILD_PLUGIN_EXEC_TRUE@am__append_103 = exec.la
 @BUILD_PLUGIN_EXEC_TRUE@am__append_104 = "-dlopen" exec.la
 @BUILD_PLUGIN_EXEC_TRUE@am__append_105 = exec.la
-@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_106 = filecount.la
-@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_107 = "-dlopen" filecount.la
-@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_108 = filecount.la
-@BUILD_PLUGIN_GMOND_TRUE@am__append_109 = gmond.la
-@BUILD_PLUGIN_GMOND_TRUE@am__append_110 = "-dlopen" gmond.la
-@BUILD_PLUGIN_GMOND_TRUE@am__append_111 = gmond.la
-@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_112 = hddtemp.la
-@BUILD_PLUGIN_HDDTEMP_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_113 = -lsocket
-@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_114 = "-dlopen" hddtemp.la
+@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_106 = ethstat.la
+@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_107 = "-dlopen" ethstat.la
+@BUILD_PLUGIN_ETHSTAT_TRUE@am__append_108 = ethstat.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_109 = filecount.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_110 = "-dlopen" filecount.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_111 = filecount.la
+@BUILD_PLUGIN_GMOND_TRUE@am__append_112 = gmond.la
+@BUILD_PLUGIN_GMOND_TRUE@am__append_113 = "-dlopen" gmond.la
+@BUILD_PLUGIN_GMOND_TRUE@am__append_114 = gmond.la
 @BUILD_PLUGIN_HDDTEMP_TRUE@am__append_115 = hddtemp.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_116 = interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_117 = "-dlopen" interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_118 = interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_119 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_120 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_121 = -lkstat
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_122 = -ldevinfo
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_123 = -lperfstat
-@BUILD_PLUGIN_IPTABLES_TRUE@am__append_124 = iptables.la
-@BUILD_PLUGIN_IPTABLES_TRUE@am__append_125 = "-dlopen" iptables.la
-@BUILD_PLUGIN_IPTABLES_TRUE@am__append_126 = iptables.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_127 = ipmi.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_128 = "-dlopen" ipmi.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_129 = ipmi.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_130 = ipvs.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_131 = "-dlopen" ipvs.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_132 = ipvs.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_133 = irq.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_134 = "-dlopen" irq.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_135 = irq.la
-@BUILD_PLUGIN_JAVA_TRUE@am__append_136 = java.la
-@BUILD_PLUGIN_JAVA_TRUE@am__append_137 = "-dlopen" java.la
-@BUILD_PLUGIN_JAVA_TRUE@am__append_138 = java.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_139 = libvirt.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_140 = "-dlopen" libvirt.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_141 = libvirt.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_142 = load.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_143 = "-dlopen" load.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_144 = load.la
-@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_145 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_146 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_147 = -lperfstat
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_148 = logfile.la
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_149 = "-dlopen" logfile.la
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_150 = logfile.la
-@BUILD_PLUGIN_LPAR_TRUE@am__append_151 = lpar.la
-@BUILD_PLUGIN_LPAR_TRUE@am__append_152 = "-dlopen" lpar.la
-@BUILD_PLUGIN_LPAR_TRUE@am__append_153 = lpar.la
-@BUILD_PLUGIN_MADWIFI_TRUE@am__append_154 = madwifi.la
-@BUILD_PLUGIN_MADWIFI_TRUE@am__append_155 = "-dlopen" madwifi.la
-@BUILD_PLUGIN_MADWIFI_TRUE@am__append_156 = madwifi.la
-@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_157 = match_empty_counter.la
-@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_158 = "-dlopen" match_empty_counter.la
-@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_159 = match_empty_counter.la
-@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_160 = match_hashed.la
-@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_161 = "-dlopen" match_hashed.la
-@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_162 = match_hashed.la
-@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_163 = match_regex.la
-@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_164 = "-dlopen" match_regex.la
-@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_165 = match_regex.la
-@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_166 = match_timediff.la
-@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_167 = "-dlopen" match_timediff.la
-@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_168 = match_timediff.la
-@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_169 = match_value.la
-@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_170 = "-dlopen" match_value.la
-@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_171 = match_value.la
-@BUILD_PLUGIN_MBMON_TRUE@am__append_172 = mbmon.la
-@BUILD_PLUGIN_MBMON_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_173 = -lsocket
-@BUILD_PLUGIN_MBMON_TRUE@am__append_174 = "-dlopen" mbmon.la
+@BUILD_PLUGIN_HDDTEMP_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_116 = -lsocket
+@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_117 = "-dlopen" hddtemp.la
+@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_118 = hddtemp.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_119 = interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_120 = "-dlopen" interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_121 = interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_122 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_123 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_124 = -lkstat
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_125 = -ldevinfo
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_126 = -lperfstat
+@BUILD_PLUGIN_IPTABLES_TRUE@am__append_127 = iptables.la
+@BUILD_PLUGIN_IPTABLES_TRUE@am__append_128 = "-dlopen" iptables.la
+@BUILD_PLUGIN_IPTABLES_TRUE@am__append_129 = iptables.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_130 = ipmi.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_131 = "-dlopen" ipmi.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_132 = ipmi.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_133 = ipvs.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_134 = "-dlopen" ipvs.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_135 = ipvs.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_136 = irq.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_137 = "-dlopen" irq.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_138 = irq.la
+@BUILD_PLUGIN_JAVA_TRUE@am__append_139 = java.la
+@BUILD_PLUGIN_JAVA_TRUE@am__append_140 = "-dlopen" java.la
+@BUILD_PLUGIN_JAVA_TRUE@am__append_141 = java.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_142 = libvirt.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_143 = "-dlopen" libvirt.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_144 = libvirt.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_145 = load.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_146 = "-dlopen" load.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_147 = load.la
+@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_148 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_149 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_150 = -lperfstat
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_151 = logfile.la
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_152 = "-dlopen" logfile.la
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_153 = logfile.la
+@BUILD_PLUGIN_LPAR_TRUE@am__append_154 = lpar.la
+@BUILD_PLUGIN_LPAR_TRUE@am__append_155 = "-dlopen" lpar.la
+@BUILD_PLUGIN_LPAR_TRUE@am__append_156 = lpar.la
+@BUILD_PLUGIN_MADWIFI_TRUE@am__append_157 = madwifi.la
+@BUILD_PLUGIN_MADWIFI_TRUE@am__append_158 = "-dlopen" madwifi.la
+@BUILD_PLUGIN_MADWIFI_TRUE@am__append_159 = madwifi.la
+@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_160 = match_empty_counter.la
+@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_161 = "-dlopen" match_empty_counter.la
+@BUILD_PLUGIN_MATCH_EMPTY_COUNTER_TRUE@am__append_162 = match_empty_counter.la
+@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_163 = match_hashed.la
+@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_164 = "-dlopen" match_hashed.la
+@BUILD_PLUGIN_MATCH_HASHED_TRUE@am__append_165 = match_hashed.la
+@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_166 = match_regex.la
+@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_167 = "-dlopen" match_regex.la
+@BUILD_PLUGIN_MATCH_REGEX_TRUE@am__append_168 = match_regex.la
+@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_169 = match_timediff.la
+@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_170 = "-dlopen" match_timediff.la
+@BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@am__append_171 = match_timediff.la
+@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_172 = match_value.la
+@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_173 = "-dlopen" match_value.la
+@BUILD_PLUGIN_MATCH_VALUE_TRUE@am__append_174 = match_value.la
 @BUILD_PLUGIN_MBMON_TRUE@am__append_175 = mbmon.la
-@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_176 = memcachec.la
-@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_177 = "-dlopen" memcachec.la
-@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_178 = memcachec.la
-@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_179 = memcached.la
-@BUILD_PLUGIN_MEMCACHED_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_180 = -lsocket
-@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_181 = "-dlopen" memcached.la
-@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_182 = memcached.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_183 = memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_184 = "-dlopen" memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_185 = memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_186 = -lkstat
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_187 = -ldevinfo
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_188 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_189 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_190 = -lperfstat
-@BUILD_PLUGIN_MODBUS_TRUE@am__append_191 = modbus.la
-@BUILD_PLUGIN_MODBUS_TRUE@am__append_192 = "-dlopen" modbus.la
-@BUILD_PLUGIN_MODBUS_TRUE@am__append_193 = modbus.la
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_194 = multimeter.la
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_195 = "-dlopen" multimeter.la
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_196 = multimeter.la
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_197 = mysql.la
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_198 = "-dlopen" mysql.la
-@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_199 = $(BUILD_WITH_LIBMYSQL_CFLAGS)
-@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_200 = $(BUILD_WITH_LIBMYSQL_LIBS)
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_201 = mysql.la
-@BUILD_PLUGIN_NETAPP_TRUE@am__append_202 = netapp.la
-@BUILD_PLUGIN_NETAPP_TRUE@am__append_203 = "-dlopen" netapp.la
-@BUILD_PLUGIN_NETAPP_TRUE@am__append_204 = netapp.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_205 = netlink.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_206 = "-dlopen" netlink.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_207 = netlink.la
-@BUILD_PLUGIN_NETWORK_TRUE@am__append_208 = network.la
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_209 = -lsocket
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_210 = $(GCRYPT_CPPFLAGS)
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_211 = $(GCRYPT_LDFLAGS)
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_212 = $(GCRYPT_LIBS)
-@BUILD_PLUGIN_NETWORK_TRUE@am__append_213 = "-dlopen" network.la
+@BUILD_PLUGIN_MBMON_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_176 = -lsocket
+@BUILD_PLUGIN_MBMON_TRUE@am__append_177 = "-dlopen" mbmon.la
+@BUILD_PLUGIN_MBMON_TRUE@am__append_178 = mbmon.la
+@BUILD_PLUGIN_MD_TRUE@am__append_179 = md.la
+@BUILD_PLUGIN_MD_TRUE@am__append_180 = "-dlopen" md.la
+@BUILD_PLUGIN_MD_TRUE@am__append_181 = md.la
+@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_182 = memcachec.la
+@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_183 = "-dlopen" memcachec.la
+@BUILD_PLUGIN_MEMCACHEC_TRUE@am__append_184 = memcachec.la
+@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_185 = memcached.la
+@BUILD_PLUGIN_MEMCACHED_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_186 = -lsocket
+@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_187 = "-dlopen" memcached.la
+@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_188 = memcached.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_189 = memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_190 = "-dlopen" memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_191 = memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_192 = -lkstat
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_193 = -ldevinfo
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_194 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_195 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_196 = -lperfstat
+@BUILD_PLUGIN_MODBUS_TRUE@am__append_197 = modbus.la
+@BUILD_PLUGIN_MODBUS_TRUE@am__append_198 = "-dlopen" modbus.la
+@BUILD_PLUGIN_MODBUS_TRUE@am__append_199 = modbus.la
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_200 = multimeter.la
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_201 = "-dlopen" multimeter.la
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_202 = multimeter.la
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_203 = mysql.la
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_204 = "-dlopen" mysql.la
+@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_205 = $(BUILD_WITH_LIBMYSQL_CFLAGS)
+@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_206 = $(BUILD_WITH_LIBMYSQL_LIBS)
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_207 = mysql.la
+@BUILD_PLUGIN_NETAPP_TRUE@am__append_208 = netapp.la
+@BUILD_PLUGIN_NETAPP_TRUE@am__append_209 = "-dlopen" netapp.la
+@BUILD_PLUGIN_NETAPP_TRUE@am__append_210 = netapp.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_211 = netlink.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_212 = "-dlopen" netlink.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_213 = netlink.la
 @BUILD_PLUGIN_NETWORK_TRUE@am__append_214 = network.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_215 = nfs.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_216 = "-dlopen" nfs.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_217 = nfs.la
-@BUILD_PLUGIN_FSCACHE_TRUE@am__append_218 = fscache.la
-@BUILD_PLUGIN_FSCACHE_TRUE@am__append_219 = "-dlopen" fscache.la
-@BUILD_PLUGIN_FSCACHE_TRUE@am__append_220 = fscache.la
-@BUILD_PLUGIN_NGINX_TRUE@am__append_221 = nginx.la
-@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_222 = $(BUILD_WITH_LIBCURL_CFLAGS)
-@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_223 = $(BUILD_WITH_LIBCURL_LIBS)
-@BUILD_PLUGIN_NGINX_TRUE@am__append_224 = "-dlopen" nginx.la
-@BUILD_PLUGIN_NGINX_TRUE@am__append_225 = nginx.la
-@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_226 = notify_desktop.la
-@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_227 = "-dlopen" notify_desktop.la
-@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_228 = notify_desktop.la
-@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_229 = notify_email.la
-@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_230 = "-dlopen" notify_email.la
-@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_231 = notify_email.la
-@BUILD_PLUGIN_NTPD_TRUE@am__append_232 = ntpd.la
-@BUILD_PLUGIN_NTPD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_233 = -lsocket
-@BUILD_PLUGIN_NTPD_TRUE@am__append_234 = "-dlopen" ntpd.la
-@BUILD_PLUGIN_NTPD_TRUE@am__append_235 = ntpd.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_236 = nut.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_237 = "-dlopen" nut.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_238 = nut.la
-@BUILD_PLUGIN_OLSRD_TRUE@am__append_239 = olsrd.la
-@BUILD_PLUGIN_OLSRD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_240 = -lsocket
-@BUILD_PLUGIN_OLSRD_TRUE@am__append_241 = "-dlopen" olsrd.la
-@BUILD_PLUGIN_OLSRD_TRUE@am__append_242 = olsrd.la
-@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_243 = onewire.la
-@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_244 = "-dlopen" onewire.la
-@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_245 = onewire.la
-@BUILD_PLUGIN_OPENVPN_TRUE@am__append_246 = openvpn.la
-@BUILD_PLUGIN_OPENVPN_TRUE@am__append_247 = "-dlopen" openvpn.la
-@BUILD_PLUGIN_OPENVPN_TRUE@am__append_248 = openvpn.la
-@BUILD_PLUGIN_ORACLE_TRUE@am__append_249 = oracle.la
-@BUILD_PLUGIN_ORACLE_TRUE@am__append_250 = "-dlopen" oracle.la
-@BUILD_PLUGIN_ORACLE_TRUE@am__append_251 = oracle.la
-@BUILD_PLUGIN_PERL_TRUE@am__append_252 = perl.la
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_215 = -lsocket
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_216 = $(GCRYPT_CPPFLAGS)
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_217 = $(GCRYPT_LDFLAGS)
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBGCRYPT_TRUE@am__append_218 = $(GCRYPT_LIBS)
+@BUILD_PLUGIN_NETWORK_TRUE@am__append_219 = "-dlopen" network.la
+@BUILD_PLUGIN_NETWORK_TRUE@am__append_220 = network.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_221 = nfs.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_222 = "-dlopen" nfs.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_223 = nfs.la
+@BUILD_PLUGIN_FSCACHE_TRUE@am__append_224 = fscache.la
+@BUILD_PLUGIN_FSCACHE_TRUE@am__append_225 = "-dlopen" fscache.la
+@BUILD_PLUGIN_FSCACHE_TRUE@am__append_226 = fscache.la
+@BUILD_PLUGIN_NGINX_TRUE@am__append_227 = nginx.la
+@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_228 = $(BUILD_WITH_LIBCURL_CFLAGS)
+@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_229 = $(BUILD_WITH_LIBCURL_LIBS)
+@BUILD_PLUGIN_NGINX_TRUE@am__append_230 = "-dlopen" nginx.la
+@BUILD_PLUGIN_NGINX_TRUE@am__append_231 = nginx.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_232 = notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_233 = "-dlopen" notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_234 = notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_235 = notify_email.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_236 = "-dlopen" notify_email.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_237 = notify_email.la
+@BUILD_PLUGIN_NTPD_TRUE@am__append_238 = ntpd.la
+@BUILD_PLUGIN_NTPD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_239 = -lsocket
+@BUILD_PLUGIN_NTPD_TRUE@am__append_240 = "-dlopen" ntpd.la
+@BUILD_PLUGIN_NTPD_TRUE@am__append_241 = ntpd.la
+@BUILD_PLUGIN_NUMA_TRUE@am__append_242 = numa.la
+@BUILD_PLUGIN_NUMA_TRUE@am__append_243 = "-dlopen" numa.la
+@BUILD_PLUGIN_NUMA_TRUE@am__append_244 = numa.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_245 = nut.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_246 = "-dlopen" nut.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_247 = nut.la
+@BUILD_PLUGIN_OLSRD_TRUE@am__append_248 = olsrd.la
+@BUILD_PLUGIN_OLSRD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_249 = -lsocket
+@BUILD_PLUGIN_OLSRD_TRUE@am__append_250 = "-dlopen" olsrd.la
+@BUILD_PLUGIN_OLSRD_TRUE@am__append_251 = olsrd.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_252 = onewire.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_253 = "-dlopen" onewire.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_254 = onewire.la
+@BUILD_PLUGIN_OPENVPN_TRUE@am__append_255 = openvpn.la
+@BUILD_PLUGIN_OPENVPN_TRUE@am__append_256 = "-dlopen" openvpn.la
+@BUILD_PLUGIN_OPENVPN_TRUE@am__append_257 = openvpn.la
+@BUILD_PLUGIN_ORACLE_TRUE@am__append_258 = oracle.la
+@BUILD_PLUGIN_ORACLE_TRUE@am__append_259 = "-dlopen" oracle.la
+@BUILD_PLUGIN_ORACLE_TRUE@am__append_260 = oracle.la
+@BUILD_PLUGIN_PERL_TRUE@am__append_261 = perl.la
 # Work-around for issues #41 and #42 - Perl 5.10 incorrectly introduced
 # __attribute__nonnull__(3) for Perl_load_module().
-@BUILD_PLUGIN_PERL_TRUE@@HAVE_BROKEN_PERL_LOAD_MODULE_TRUE@am__append_253 = -Wno-nonnull
-@BUILD_PLUGIN_PERL_TRUE@am__append_254 = "-dlopen" perl.la
-@BUILD_PLUGIN_PERL_TRUE@am__append_255 = perl.la
-@BUILD_PLUGIN_PINBA_TRUE@am__append_256 = pinba.pb-c.c pinba.pb-c.h
-@BUILD_PLUGIN_PINBA_TRUE@am__append_257 = pinba.pb-c.c pinba.pb-c.h
-@BUILD_PLUGIN_PINBA_TRUE@am__append_258 = pinba.la
-@BUILD_PLUGIN_PINBA_TRUE@am__append_259 = "-dlopen" pinba.la
-@BUILD_PLUGIN_PINBA_TRUE@am__append_260 = pinba.la
-@BUILD_PLUGIN_PING_TRUE@am__append_261 = ping.la
-@BUILD_PLUGIN_PING_TRUE@am__append_262 = "-dlopen" ping.la
-@BUILD_PLUGIN_PING_TRUE@am__append_263 = ping.la
-@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_264 = postgresql.la
-@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_265 = "-dlopen" postgresql.la
-@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_266 = postgresql.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_267 = powerdns.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_268 = "-dlopen" powerdns.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_269 = powerdns.la
-@BUILD_PLUGIN_PYTHON_TRUE@am__append_270 = python.la
-@BUILD_PLUGIN_PYTHON_TRUE@@COMPILER_IS_GCC_TRUE@am__append_271 = -fno-strict-aliasing -Wno-strict-aliasing
-@BUILD_PLUGIN_PYTHON_TRUE@am__append_272 = "-dlopen" python.la
-@BUILD_PLUGIN_PYTHON_TRUE@am__append_273 = python.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_274 = processes.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_275 = "-dlopen" processes.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_276 = processes.la
-@BUILD_PLUGIN_PROCESSES_TRUE@@BUILD_WITH_LIBKVM_GETPROCS_TRUE@am__append_277 = -lkvm
-@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_278 = protocols.la
-@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_279 = "-dlopen" protocols.la
-@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_280 = protocols.la
-@BUILD_PLUGIN_REDIS_TRUE@am__append_281 = redis.la
-@BUILD_PLUGIN_REDIS_TRUE@am__append_282 = "-dlopen" redis.la
-@BUILD_PLUGIN_REDIS_TRUE@am__append_283 = redis.la
-@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_284 = routeros.la
-@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_285 = "-dlopen" routeros.la
-@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_286 = routeros.la
-@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_287 = rrdcached.la
-@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_288 = "-dlopen" rrdcached.la
-@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_289 = rrdcached.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_290 = rrdtool.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_291 = "-dlopen" rrdtool.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_292 = rrdtool.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_293 = sensors.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_294 = "-dlopen" sensors.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_295 = sensors.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_296 = serial.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_297 = "-dlopen" serial.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_298 = serial.la
-@BUILD_PLUGIN_SNMP_TRUE@am__append_299 = snmp.la
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_300 = $(BUILD_WITH_LIBSNMP_CFLAGS)
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_301 = $(BUILD_WITH_LIBSNMP_LIBS)
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_302 = -lpthread
-@BUILD_PLUGIN_SNMP_TRUE@am__append_303 = "-dlopen" snmp.la
-@BUILD_PLUGIN_SNMP_TRUE@am__append_304 = snmp.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_305 = swap.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_306 = "-dlopen" swap.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_307 = swap.la
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_308 = -lkstat
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_309 = -ldevinfo
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE@am__append_310 = -lkvm
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_311 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_312 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_313 = -lperfstat
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_314 = syslog.la
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_315 = "-dlopen" syslog.la
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_316 = syslog.la
-@BUILD_PLUGIN_TABLE_TRUE@am__append_317 = table.la
-@BUILD_PLUGIN_TABLE_TRUE@am__append_318 = "-dlopen" table.la
-@BUILD_PLUGIN_TABLE_TRUE@am__append_319 = table.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_320 = tail.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_321 = "-dlopen" tail.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_322 = tail.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_323 = tape.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_324 = "-dlopen" tape.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_325 = tape.la
-@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_326 = target_notification.la
-@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_327 = "-dlopen" target_notification.la
-@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_328 = target_notification.la
-@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_329 = target_replace.la
-@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_330 = "-dlopen" target_replace.la
-@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_331 = target_replace.la
-@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_332 = target_scale.la
-@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_333 = "-dlopen" target_scale.la
-@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_334 = target_scale.la
-@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_335 = target_set.la
-@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_336 = "-dlopen" target_set.la
-@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_337 = target_set.la
-@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_338 = target_v5upgrade.la
-@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_339 = "-dlopen" target_v5upgrade.la
-@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_340 = target_v5upgrade.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_341 = tcpconns.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_342 = "-dlopen" tcpconns.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_343 = tcpconns.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@@BUILD_WITH_LIBKVM_NLIST_TRUE@am__append_344 = -lkvm
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_345 = teamspeak2.la
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_346 = "-dlopen" teamspeak2.la
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_347 = teamspeak2.la
-@BUILD_PLUGIN_TED_TRUE@am__append_348 = ted.la
-@BUILD_PLUGIN_TED_TRUE@am__append_349 = "-dlopen" ted.la
-@BUILD_PLUGIN_TED_TRUE@am__append_350 = ted.la
-@BUILD_PLUGIN_THERMAL_TRUE@am__append_351 = thermal.la
-@BUILD_PLUGIN_THERMAL_TRUE@am__append_352 = "-dlopen" thermal.la
-@BUILD_PLUGIN_THERMAL_TRUE@am__append_353 = thermal.la
-@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_354 = threshold.la
-@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_355 = "-dlopen" threshold.la
-@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_356 = threshold.la
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_357 = tokyotyrant.la
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_358 = -lsocket
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_359 = "-dlopen" tokyotyrant.la
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_360 = tokyotyrant.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_361 = unixsock.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_362 = "-dlopen" unixsock.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_363 = unixsock.la
-@BUILD_PLUGIN_UPTIME_TRUE@am__append_364 = uptime.la
-@BUILD_PLUGIN_UPTIME_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_365 = -lkstat
-@BUILD_PLUGIN_UPTIME_TRUE@am__append_366 = "-dlopen" uptime.la
-@BUILD_PLUGIN_UPTIME_TRUE@am__append_367 = uptime.la
-@BUILD_PLUGIN_USERS_TRUE@am__append_368 = users.la
-@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_369 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_370 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_USERS_TRUE@am__append_371 = "-dlopen" users.la
-@BUILD_PLUGIN_USERS_TRUE@am__append_372 = users.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_373 = uuid.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_374 = "-dlopen" uuid.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_375 = uuid.la
-@BUILD_PLUGIN_VARNISH_TRUE@am__append_376 = varnish.la
-@BUILD_PLUGIN_VARNISH_TRUE@am__append_377 = "-dlopen" varnish.la
-@BUILD_PLUGIN_VARNISH_TRUE@am__append_378 = varnish.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_379 = vmem.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_380 = "-dlopen" vmem.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_381 = vmem.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_382 = vserver.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_383 = "-dlopen" vserver.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_384 = vserver.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_385 = wireless.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_386 = "-dlopen" wireless.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_387 = wireless.la
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_388 = write_http.la
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_389 = "-dlopen" write_http.la
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_390 = $(BUILD_WITH_LIBCURL_CFLAGS)
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_391 = $(BUILD_WITH_LIBCURL_LIBS)
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_392 = write_http.la
-@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_393 = write_redis.la
-@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_394 = "-dlopen" write_redis.la
-@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_395 = write_redis.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_396 = xmms.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_397 = "-dlopen" xmms.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_398 = xmms.la
-@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_399 = zfs_arc.la
-@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_400 = "-dlopen" zfs_arc.la
-@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_401 = zfs_arc.la
+@BUILD_PLUGIN_PERL_TRUE@@HAVE_BROKEN_PERL_LOAD_MODULE_TRUE@am__append_262 = -Wno-nonnull
+@BUILD_PLUGIN_PERL_TRUE@am__append_263 = "-dlopen" perl.la
+@BUILD_PLUGIN_PERL_TRUE@am__append_264 = perl.la
+@BUILD_PLUGIN_PINBA_TRUE@am__append_265 = pinba.pb-c.c pinba.pb-c.h
+@BUILD_PLUGIN_PINBA_TRUE@am__append_266 = pinba.pb-c.c pinba.pb-c.h
+@BUILD_PLUGIN_PINBA_TRUE@am__append_267 = pinba.la
+@BUILD_PLUGIN_PINBA_TRUE@am__append_268 = "-dlopen" pinba.la
+@BUILD_PLUGIN_PINBA_TRUE@am__append_269 = pinba.la
+@BUILD_PLUGIN_PING_TRUE@am__append_270 = ping.la
+@BUILD_PLUGIN_PING_TRUE@am__append_271 = "-dlopen" ping.la
+@BUILD_PLUGIN_PING_TRUE@am__append_272 = ping.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_273 = postgresql.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_274 = "-dlopen" postgresql.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_275 = postgresql.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_276 = powerdns.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_277 = "-dlopen" powerdns.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_278 = powerdns.la
+@BUILD_PLUGIN_PYTHON_TRUE@am__append_279 = python.la
+@BUILD_PLUGIN_PYTHON_TRUE@@COMPILER_IS_GCC_TRUE@am__append_280 = -fno-strict-aliasing -Wno-strict-aliasing
+@BUILD_PLUGIN_PYTHON_TRUE@am__append_281 = "-dlopen" python.la
+@BUILD_PLUGIN_PYTHON_TRUE@am__append_282 = python.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_283 = processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_284 = "-dlopen" processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_285 = processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@@BUILD_WITH_LIBKVM_GETPROCS_TRUE@am__append_286 = -lkvm
+@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_287 = protocols.la
+@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_288 = "-dlopen" protocols.la
+@BUILD_PLUGIN_PROTOCOLS_TRUE@am__append_289 = protocols.la
+@BUILD_PLUGIN_REDIS_TRUE@am__append_290 = redis.la
+@BUILD_PLUGIN_REDIS_TRUE@am__append_291 = "-dlopen" redis.la
+@BUILD_PLUGIN_REDIS_TRUE@am__append_292 = redis.la
+@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_293 = routeros.la
+@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_294 = "-dlopen" routeros.la
+@BUILD_PLUGIN_ROUTEROS_TRUE@am__append_295 = routeros.la
+@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_296 = rrdcached.la
+@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_297 = "-dlopen" rrdcached.la
+@BUILD_PLUGIN_RRDCACHED_TRUE@am__append_298 = rrdcached.la
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_299 = rrdtool.la
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_300 = "-dlopen" rrdtool.la
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_301 = rrdtool.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_302 = sensors.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_303 = "-dlopen" sensors.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_304 = sensors.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_305 = serial.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_306 = "-dlopen" serial.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_307 = serial.la
+@BUILD_PLUGIN_SNMP_TRUE@am__append_308 = snmp.la
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_309 = $(BUILD_WITH_LIBSNMP_CFLAGS)
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_310 = $(BUILD_WITH_LIBSNMP_LIBS)
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_311 = -lpthread
+@BUILD_PLUGIN_SNMP_TRUE@am__append_312 = "-dlopen" snmp.la
+@BUILD_PLUGIN_SNMP_TRUE@am__append_313 = snmp.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_314 = swap.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_315 = "-dlopen" swap.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_316 = swap.la
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_317 = -lkstat
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_318 = -ldevinfo
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE@am__append_319 = -lkvm
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_320 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_321 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_PERFSTAT_TRUE@am__append_322 = -lperfstat
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_323 = syslog.la
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_324 = "-dlopen" syslog.la
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_325 = syslog.la
+@BUILD_PLUGIN_TABLE_TRUE@am__append_326 = table.la
+@BUILD_PLUGIN_TABLE_TRUE@am__append_327 = "-dlopen" table.la
+@BUILD_PLUGIN_TABLE_TRUE@am__append_328 = table.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_329 = tail.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_330 = "-dlopen" tail.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_331 = tail.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_332 = tape.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_333 = "-dlopen" tape.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_334 = tape.la
+@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_335 = target_notification.la
+@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_336 = "-dlopen" target_notification.la
+@BUILD_PLUGIN_TARGET_NOTIFICATION_TRUE@am__append_337 = target_notification.la
+@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_338 = target_replace.la
+@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_339 = "-dlopen" target_replace.la
+@BUILD_PLUGIN_TARGET_REPLACE_TRUE@am__append_340 = target_replace.la
+@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_341 = target_scale.la
+@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_342 = "-dlopen" target_scale.la
+@BUILD_PLUGIN_TARGET_SCALE_TRUE@am__append_343 = target_scale.la
+@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_344 = target_set.la
+@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_345 = "-dlopen" target_set.la
+@BUILD_PLUGIN_TARGET_SET_TRUE@am__append_346 = target_set.la
+@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_347 = target_v5upgrade.la
+@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_348 = "-dlopen" target_v5upgrade.la
+@BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@am__append_349 = target_v5upgrade.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_350 = tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_351 = "-dlopen" tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_352 = tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@@BUILD_WITH_LIBKVM_NLIST_TRUE@am__append_353 = -lkvm
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_354 = teamspeak2.la
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_355 = "-dlopen" teamspeak2.la
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_356 = teamspeak2.la
+@BUILD_PLUGIN_TED_TRUE@am__append_357 = ted.la
+@BUILD_PLUGIN_TED_TRUE@am__append_358 = "-dlopen" ted.la
+@BUILD_PLUGIN_TED_TRUE@am__append_359 = ted.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_360 = thermal.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_361 = "-dlopen" thermal.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_362 = thermal.la
+@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_363 = threshold.la
+@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_364 = "-dlopen" threshold.la
+@BUILD_PLUGIN_THRESHOLD_TRUE@am__append_365 = threshold.la
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_366 = tokyotyrant.la
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_367 = -lsocket
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_368 = "-dlopen" tokyotyrant.la
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@am__append_369 = tokyotyrant.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_370 = unixsock.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_371 = "-dlopen" unixsock.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_372 = unixsock.la
+@BUILD_PLUGIN_UPTIME_TRUE@am__append_373 = uptime.la
+@BUILD_PLUGIN_UPTIME_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_374 = -lkstat
+@BUILD_PLUGIN_UPTIME_TRUE@am__append_375 = "-dlopen" uptime.la
+@BUILD_PLUGIN_UPTIME_TRUE@am__append_376 = uptime.la
+@BUILD_PLUGIN_USERS_TRUE@am__append_377 = users.la
+@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_378 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_379 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_USERS_TRUE@am__append_380 = "-dlopen" users.la
+@BUILD_PLUGIN_USERS_TRUE@am__append_381 = users.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_382 = uuid.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_383 = "-dlopen" uuid.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_384 = uuid.la
+@BUILD_PLUGIN_VARNISH_TRUE@am__append_385 = varnish.la
+@BUILD_PLUGIN_VARNISH_TRUE@am__append_386 = "-dlopen" varnish.la
+@BUILD_PLUGIN_VARNISH_TRUE@am__append_387 = varnish.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_388 = vmem.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_389 = "-dlopen" vmem.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_390 = vmem.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_391 = vserver.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_392 = "-dlopen" vserver.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_393 = vserver.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_394 = wireless.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_395 = "-dlopen" wireless.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_396 = wireless.la
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_397 = write_graphite.la
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_398 = "-dlopen" write_graphite.la
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am__append_399 = write_graphite.la
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_400 = write_http.la
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_401 = "-dlopen" write_http.la
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_402 = $(BUILD_WITH_LIBCURL_CFLAGS)
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_403 = $(BUILD_WITH_LIBCURL_LIBS)
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@am__append_404 = write_http.la
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_405 = write_mongodb.la
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_406 = "-dlopen" write_mongodb.la
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am__append_407 = write_mongodb.la
+@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_408 = write_redis.la
+@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_409 = "-dlopen" write_redis.la
+@BUILD_PLUGIN_WRITE_REDIS_TRUE@am__append_410 = write_redis.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_411 = xmms.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_412 = "-dlopen" xmms.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_413 = xmms.la
+@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_414 = zfs_arc.la
+@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_415 = "-dlopen" zfs_arc.la
+@BUILD_PLUGIN_ZFS_ARC_TRUE@am__append_416 = zfs_arc.la
 subdir = src
 DIST_COMMON = $(dist_man_MANS) $(srcdir)/Makefile.am \
 	$(srcdir)/Makefile.in $(srcdir)/collectd.conf.in \
 	$(srcdir)/config.h.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 am__aclocal_m4_deps = $(top_srcdir)/configure.in
@@ -682,12 +697,20 @@
 @BUILD_PLUGIN_ENTROPY_TRUE@am_entropy_la_OBJECTS = entropy.lo
 entropy_la_OBJECTS = $(am_entropy_la_OBJECTS)
 entropy_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(entropy_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_ENTROPY_TRUE@am_entropy_la_rpath = -rpath $(pkglibdir)
+ethstat_la_LIBADD =
+am__ethstat_la_SOURCES_DIST = ethstat.c
+@BUILD_PLUGIN_ETHSTAT_TRUE@am_ethstat_la_OBJECTS = ethstat.lo
+ethstat_la_OBJECTS = $(am_ethstat_la_OBJECTS)
+ethstat_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(ethstat_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_ETHSTAT_TRUE@am_ethstat_la_rpath = -rpath $(pkglibdir)
 exec_la_DEPENDENCIES =
 am__exec_la_SOURCES_DIST = exec.c utils_cmd_putnotif.c \
 	utils_cmd_putnotif.h utils_cmd_putval.c utils_cmd_putval.h
 @BUILD_PLUGIN_EXEC_TRUE@am_exec_la_OBJECTS = exec.lo \
 @BUILD_PLUGIN_EXEC_TRUE@	utils_cmd_putnotif.lo \
 @BUILD_PLUGIN_EXEC_TRUE@	utils_cmd_putval.lo
@@ -751,12 +774,13 @@
 @BUILD_PLUGIN_IPMI_TRUE@am_ipmi_la_OBJECTS = ipmi_la-ipmi.lo
 ipmi_la_OBJECTS = $(am_ipmi_la_OBJECTS)
 ipmi_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(ipmi_la_CFLAGS) $(CFLAGS) \
 	$(ipmi_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_IPMI_TRUE@am_ipmi_la_rpath = -rpath $(pkglibdir)
+iptables_la_DEPENDENCIES =
 am__iptables_la_SOURCES_DIST = iptables.c
 @BUILD_PLUGIN_IPTABLES_TRUE@am_iptables_la_OBJECTS =  \
 @BUILD_PLUGIN_IPTABLES_TRUE@	iptables_la-iptables.lo
 iptables_la_OBJECTS = $(am_iptables_la_OBJECTS)
 iptables_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
@@ -887,12 +911,20 @@
 @BUILD_PLUGIN_MBMON_TRUE@am_mbmon_la_OBJECTS = mbmon.lo
 mbmon_la_OBJECTS = $(am_mbmon_la_OBJECTS)
 mbmon_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(mbmon_la_LDFLAGS) \
 	$(LDFLAGS) -o $@
 @BUILD_PLUGIN_MBMON_TRUE@am_mbmon_la_rpath = -rpath $(pkglibdir)
+md_la_LIBADD =
+am__md_la_SOURCES_DIST = md.c
+@BUILD_PLUGIN_MD_TRUE@am_md_la_OBJECTS = md.lo
+md_la_OBJECTS = $(am_md_la_OBJECTS)
+md_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
+	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(md_la_LDFLAGS) \
+	$(LDFLAGS) -o $@
+@BUILD_PLUGIN_MD_TRUE@am_md_la_rpath = -rpath $(pkglibdir)
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_DEPENDENCIES =  \
 @BUILD_PLUGIN_MEMCACHEC_TRUE@	$(am__DEPENDENCIES_1)
 am__memcachec_la_SOURCES_DIST = memcachec.c
 @BUILD_PLUGIN_MEMCACHEC_TRUE@am_memcachec_la_OBJECTS =  \
 @BUILD_PLUGIN_MEMCACHEC_TRUE@	memcachec_la-memcachec.lo
 memcachec_la_OBJECTS = $(am_memcachec_la_OBJECTS)
@@ -1030,12 +1062,20 @@
 @BUILD_PLUGIN_NTPD_TRUE@am_ntpd_la_OBJECTS = ntpd.lo
 ntpd_la_OBJECTS = $(am_ntpd_la_OBJECTS)
 ntpd_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(ntpd_la_LDFLAGS) \
 	$(LDFLAGS) -o $@
 @BUILD_PLUGIN_NTPD_TRUE@am_ntpd_la_rpath = -rpath $(pkglibdir)
+numa_la_LIBADD =
+am__numa_la_SOURCES_DIST = numa.c
+@BUILD_PLUGIN_NUMA_TRUE@am_numa_la_OBJECTS = numa.lo
+numa_la_OBJECTS = $(am_numa_la_OBJECTS)
+numa_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
+	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(numa_la_LDFLAGS) \
+	$(LDFLAGS) -o $@
+@BUILD_PLUGIN_NUMA_TRUE@am_numa_la_rpath = -rpath $(pkglibdir)
 @BUILD_PLUGIN_NUT_TRUE@nut_la_DEPENDENCIES = $(am__DEPENDENCIES_1)
 am__nut_la_SOURCES_DIST = nut.c
 @BUILD_PLUGIN_NUT_TRUE@am_nut_la_OBJECTS = nut_la-nut.lo
 nut_la_OBJECTS = $(am_nut_la_OBJECTS)
 nut_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(nut_la_CFLAGS) $(CFLAGS) \
@@ -1448,12 +1488,24 @@
 @BUILD_PLUGIN_WIRELESS_TRUE@am_wireless_la_OBJECTS = wireless.lo
 wireless_la_OBJECTS = $(am_wireless_la_OBJECTS)
 wireless_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(wireless_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_WIRELESS_TRUE@am_wireless_la_rpath = -rpath $(pkglibdir)
+write_graphite_la_LIBADD =
+am__write_graphite_la_SOURCES_DIST = write_graphite.c \
+	utils_format_json.c utils_format_json.h
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am_write_graphite_la_OBJECTS =  \
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@	write_graphite.lo \
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@	utils_format_json.lo
+write_graphite_la_OBJECTS = $(am_write_graphite_la_OBJECTS)
+write_graphite_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(write_graphite_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@am_write_graphite_la_rpath = -rpath \
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@	$(pkglibdir)
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__DEPENDENCIES_16 = $(am__DEPENDENCIES_1)
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_DEPENDENCIES =  \
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__DEPENDENCIES_16)
 am__write_http_la_SOURCES_DIST = write_http.c utils_format_json.c \
 	utils_format_json.h
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@am_write_http_la_OBJECTS =  \
@@ -1462,12 +1514,21 @@
 write_http_la_OBJECTS = $(am_write_http_la_OBJECTS)
 write_http_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(write_http_la_CFLAGS) \
 	$(CFLAGS) $(write_http_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@am_write_http_la_rpath = -rpath \
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(pkglibdir)
+write_mongodb_la_DEPENDENCIES =
+am__write_mongodb_la_SOURCES_DIST = write_mongodb.c
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am_write_mongodb_la_OBJECTS = write_mongodb_la-write_mongodb.lo
+write_mongodb_la_OBJECTS = $(am_write_mongodb_la_OBJECTS)
+write_mongodb_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(write_mongodb_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@am_write_mongodb_la_rpath = -rpath \
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@	$(pkglibdir)
 write_redis_la_DEPENDENCIES =
 am__write_redis_la_SOURCES_DIST = write_redis.c
 @BUILD_PLUGIN_WRITE_REDIS_TRUE@am_write_redis_la_OBJECTS =  \
 @BUILD_PLUGIN_WRITE_REDIS_TRUE@	write_redis_la-write_redis.lo
 write_redis_la_OBJECTS = $(am_write_redis_la_OBJECTS)
 write_redis_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
@@ -1541,48 +1602,50 @@
 	$(battery_la_SOURCES) $(bind_la_SOURCES) \
 	$(conntrack_la_SOURCES) $(contextswitch_la_SOURCES) \
 	$(cpu_la_SOURCES) $(cpufreq_la_SOURCES) $(csv_la_SOURCES) \
 	$(curl_la_SOURCES) $(curl_json_la_SOURCES) \
 	$(curl_xml_la_SOURCES) $(dbi_la_SOURCES) $(df_la_SOURCES) \
 	$(disk_la_SOURCES) $(dns_la_SOURCES) $(email_la_SOURCES) \
-	$(entropy_la_SOURCES) $(exec_la_SOURCES) \
+	$(entropy_la_SOURCES) $(ethstat_la_SOURCES) $(exec_la_SOURCES) \
 	$(filecount_la_SOURCES) $(fscache_la_SOURCES) \
 	$(gmond_la_SOURCES) $(hddtemp_la_SOURCES) \
 	$(interface_la_SOURCES) $(ipmi_la_SOURCES) \
 	$(iptables_la_SOURCES) $(ipvs_la_SOURCES) $(irq_la_SOURCES) \
 	$(java_la_SOURCES) $(libvirt_la_SOURCES) $(load_la_SOURCES) \
 	$(logfile_la_SOURCES) $(lpar_la_SOURCES) $(madwifi_la_SOURCES) \
 	$(match_empty_counter_la_SOURCES) $(match_hashed_la_SOURCES) \
 	$(match_regex_la_SOURCES) $(match_timediff_la_SOURCES) \
-	$(match_value_la_SOURCES) $(mbmon_la_SOURCES) \
+	$(match_value_la_SOURCES) $(mbmon_la_SOURCES) $(md_la_SOURCES) \
 	$(memcachec_la_SOURCES) $(memcached_la_SOURCES) \
 	$(memory_la_SOURCES) $(modbus_la_SOURCES) \
 	$(multimeter_la_SOURCES) $(mysql_la_SOURCES) \
 	$(netapp_la_SOURCES) $(netlink_la_SOURCES) \
 	$(network_la_SOURCES) $(nfs_la_SOURCES) $(nginx_la_SOURCES) \
 	$(notify_desktop_la_SOURCES) $(notify_email_la_SOURCES) \
-	$(ntpd_la_SOURCES) $(nut_la_SOURCES) $(olsrd_la_SOURCES) \
-	$(onewire_la_SOURCES) $(openvpn_la_SOURCES) \
-	$(oracle_la_SOURCES) $(perl_la_SOURCES) $(pinba_la_SOURCES) \
-	$(ping_la_SOURCES) $(postgresql_la_SOURCES) \
-	$(powerdns_la_SOURCES) $(processes_la_SOURCES) \
-	$(protocols_la_SOURCES) $(python_la_SOURCES) \
-	$(redis_la_SOURCES) $(routeros_la_SOURCES) \
-	$(rrdcached_la_SOURCES) $(rrdtool_la_SOURCES) \
-	$(sensors_la_SOURCES) $(serial_la_SOURCES) $(snmp_la_SOURCES) \
-	$(swap_la_SOURCES) $(syslog_la_SOURCES) $(table_la_SOURCES) \
-	$(tail_la_SOURCES) $(tape_la_SOURCES) \
-	$(target_notification_la_SOURCES) $(target_replace_la_SOURCES) \
-	$(target_scale_la_SOURCES) $(target_set_la_SOURCES) \
-	$(target_v5upgrade_la_SOURCES) $(tcpconns_la_SOURCES) \
-	$(teamspeak2_la_SOURCES) $(ted_la_SOURCES) \
-	$(thermal_la_SOURCES) $(threshold_la_SOURCES) \
-	$(tokyotyrant_la_SOURCES) $(unixsock_la_SOURCES) \
-	$(uptime_la_SOURCES) $(users_la_SOURCES) $(uuid_la_SOURCES) \
-	$(varnish_la_SOURCES) $(vmem_la_SOURCES) $(vserver_la_SOURCES) \
-	$(wireless_la_SOURCES) $(write_http_la_SOURCES) \
+	$(ntpd_la_SOURCES) $(numa_la_SOURCES) $(nut_la_SOURCES) \
+	$(olsrd_la_SOURCES) $(onewire_la_SOURCES) \
+	$(openvpn_la_SOURCES) $(oracle_la_SOURCES) $(perl_la_SOURCES) \
+	$(pinba_la_SOURCES) $(ping_la_SOURCES) \
+	$(postgresql_la_SOURCES) $(powerdns_la_SOURCES) \
+	$(processes_la_SOURCES) $(protocols_la_SOURCES) \
+	$(python_la_SOURCES) $(redis_la_SOURCES) \
+	$(routeros_la_SOURCES) $(rrdcached_la_SOURCES) \
+	$(rrdtool_la_SOURCES) $(sensors_la_SOURCES) \
+	$(serial_la_SOURCES) $(snmp_la_SOURCES) $(swap_la_SOURCES) \
+	$(syslog_la_SOURCES) $(table_la_SOURCES) $(tail_la_SOURCES) \
+	$(tape_la_SOURCES) $(target_notification_la_SOURCES) \
+	$(target_replace_la_SOURCES) $(target_scale_la_SOURCES) \
+	$(target_set_la_SOURCES) $(target_v5upgrade_la_SOURCES) \
+	$(tcpconns_la_SOURCES) $(teamspeak2_la_SOURCES) \
+	$(ted_la_SOURCES) $(thermal_la_SOURCES) \
+	$(threshold_la_SOURCES) $(tokyotyrant_la_SOURCES) \
+	$(unixsock_la_SOURCES) $(uptime_la_SOURCES) \
+	$(users_la_SOURCES) $(uuid_la_SOURCES) $(varnish_la_SOURCES) \
+	$(vmem_la_SOURCES) $(vserver_la_SOURCES) \
+	$(wireless_la_SOURCES) $(write_graphite_la_SOURCES) \
+	$(write_http_la_SOURCES) $(write_mongodb_la_SOURCES) \
 	$(write_redis_la_SOURCES) $(xmms_la_SOURCES) \
 	$(zfs_arc_la_SOURCES) $(collectd_SOURCES) \
 	$(collectd_nagios_SOURCES) $(collectdctl_SOURCES) \
 	$(collectdmon_SOURCES)
 DIST_SOURCES = $(am__amqp_la_SOURCES_DIST) \
 	$(am__apache_la_SOURCES_DIST) $(am__apcups_la_SOURCES_DIST) \
@@ -1593,14 +1656,14 @@
 	$(am__cpu_la_SOURCES_DIST) $(am__cpufreq_la_SOURCES_DIST) \
 	$(am__csv_la_SOURCES_DIST) $(am__curl_la_SOURCES_DIST) \
 	$(am__curl_json_la_SOURCES_DIST) \
 	$(am__curl_xml_la_SOURCES_DIST) $(am__dbi_la_SOURCES_DIST) \
 	$(am__df_la_SOURCES_DIST) $(am__disk_la_SOURCES_DIST) \
 	$(am__dns_la_SOURCES_DIST) $(am__email_la_SOURCES_DIST) \
-	$(am__entropy_la_SOURCES_DIST) $(am__exec_la_SOURCES_DIST) \
-	$(am__filecount_la_SOURCES_DIST) \
+	$(am__entropy_la_SOURCES_DIST) $(am__ethstat_la_SOURCES_DIST) \
+	$(am__exec_la_SOURCES_DIST) $(am__filecount_la_SOURCES_DIST) \
 	$(am__fscache_la_SOURCES_DIST) $(am__gmond_la_SOURCES_DIST) \
 	$(am__hddtemp_la_SOURCES_DIST) \
 	$(am__interface_la_SOURCES_DIST) $(am__ipmi_la_SOURCES_DIST) \
 	$(am__iptables_la_SOURCES_DIST) $(am__ipvs_la_SOURCES_DIST) \
 	$(am__irq_la_SOURCES_DIST) $(am__java_la_SOURCES_DIST) \
 	$(am__libvirt_la_SOURCES_DIST) $(am__load_la_SOURCES_DIST) \
@@ -1608,26 +1671,28 @@
 	$(am__madwifi_la_SOURCES_DIST) \
 	$(am__match_empty_counter_la_SOURCES_DIST) \
 	$(am__match_hashed_la_SOURCES_DIST) \
 	$(am__match_regex_la_SOURCES_DIST) \
 	$(am__match_timediff_la_SOURCES_DIST) \
 	$(am__match_value_la_SOURCES_DIST) \
-	$(am__mbmon_la_SOURCES_DIST) $(am__memcachec_la_SOURCES_DIST) \
+	$(am__mbmon_la_SOURCES_DIST) $(am__md_la_SOURCES_DIST) \
+	$(am__memcachec_la_SOURCES_DIST) \
 	$(am__memcached_la_SOURCES_DIST) $(am__memory_la_SOURCES_DIST) \
 	$(am__modbus_la_SOURCES_DIST) \
 	$(am__multimeter_la_SOURCES_DIST) $(am__mysql_la_SOURCES_DIST) \
 	$(am__netapp_la_SOURCES_DIST) $(am__netlink_la_SOURCES_DIST) \
 	$(am__network_la_SOURCES_DIST) $(am__nfs_la_SOURCES_DIST) \
 	$(am__nginx_la_SOURCES_DIST) \
 	$(am__notify_desktop_la_SOURCES_DIST) \
 	$(am__notify_email_la_SOURCES_DIST) \
-	$(am__ntpd_la_SOURCES_DIST) $(am__nut_la_SOURCES_DIST) \
-	$(am__olsrd_la_SOURCES_DIST) $(am__onewire_la_SOURCES_DIST) \
-	$(am__openvpn_la_SOURCES_DIST) $(am__oracle_la_SOURCES_DIST) \
-	$(am__perl_la_SOURCES_DIST) $(am__pinba_la_SOURCES_DIST) \
-	$(am__ping_la_SOURCES_DIST) $(am__postgresql_la_SOURCES_DIST) \
+	$(am__ntpd_la_SOURCES_DIST) $(am__numa_la_SOURCES_DIST) \
+	$(am__nut_la_SOURCES_DIST) $(am__olsrd_la_SOURCES_DIST) \
+	$(am__onewire_la_SOURCES_DIST) $(am__openvpn_la_SOURCES_DIST) \
+	$(am__oracle_la_SOURCES_DIST) $(am__perl_la_SOURCES_DIST) \
+	$(am__pinba_la_SOURCES_DIST) $(am__ping_la_SOURCES_DIST) \
+	$(am__postgresql_la_SOURCES_DIST) \
 	$(am__powerdns_la_SOURCES_DIST) \
 	$(am__processes_la_SOURCES_DIST) \
 	$(am__protocols_la_SOURCES_DIST) $(am__python_la_SOURCES_DIST) \
 	$(am__redis_la_SOURCES_DIST) $(am__routeros_la_SOURCES_DIST) \
 	$(am__rrdcached_la_SOURCES_DIST) \
 	$(am__rrdtool_la_SOURCES_DIST) $(am__sensors_la_SOURCES_DIST) \
@@ -1646,13 +1711,15 @@
 	$(am__threshold_la_SOURCES_DIST) \
 	$(am__tokyotyrant_la_SOURCES_DIST) \
 	$(am__unixsock_la_SOURCES_DIST) $(am__uptime_la_SOURCES_DIST) \
 	$(am__users_la_SOURCES_DIST) $(am__uuid_la_SOURCES_DIST) \
 	$(am__varnish_la_SOURCES_DIST) $(am__vmem_la_SOURCES_DIST) \
 	$(am__vserver_la_SOURCES_DIST) $(am__wireless_la_SOURCES_DIST) \
+	$(am__write_graphite_la_SOURCES_DIST) \
 	$(am__write_http_la_SOURCES_DIST) \
+	$(am__write_mongodb_la_SOURCES_DIST) \
 	$(am__write_redis_la_SOURCES_DIST) $(am__xmms_la_SOURCES_DIST) \
 	$(am__zfs_arc_la_SOURCES_DIST) $(collectd_SOURCES) \
 	$(collectd_nagios_SOURCES) $(collectdctl_SOURCES) \
 	$(collectdmon_SOURCES)
 RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
 	html-recursive info-recursive install-data-recursive \
@@ -1669,13 +1736,13 @@
   distclean-recursive maintainer-clean-recursive
 AM_RECURSIVE_TARGETS = $(RECURSIVE_TARGETS:-recursive=) \
 	$(RECURSIVE_CLEAN_TARGETS:-recursive=) tags TAGS ctags CTAGS \
 	distdir
 ETAGS = etags
 CTAGS = ctags
-DIST_SUBDIRS = libcollectdclient owniptc liboconfig
+DIST_SUBDIRS = libcollectdclient liboconfig
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 am__relativize = \
   dir0=`pwd`; \
   sed_first='s,^\([^/]*\)/.*$$,\1,'; \
   sed_rest='s,^[^/]*/*,,'; \
   sed_last='s,^.*/\([^/]*\)$$,\1,'; \
@@ -1720,12 +1787,14 @@
 BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMODBUS_CFLAGS = @BUILD_WITH_LIBMODBUS_CFLAGS@
 BUILD_WITH_LIBMODBUS_LIBS = @BUILD_WITH_LIBMODBUS_LIBS@
+BUILD_WITH_LIBMONGOC_CPPFLAGS = @BUILD_WITH_LIBMONGOC_CPPFLAGS@
+BUILD_WITH_LIBMONGOC_LDFLAGS = @BUILD_WITH_LIBMONGOC_LDFLAGS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
 BUILD_WITH_LIBOPING_CPPFLAGS = @BUILD_WITH_LIBOPING_CPPFLAGS@
 BUILD_WITH_LIBOPING_LDFLAGS = @BUILD_WITH_LIBOPING_LDFLAGS@
@@ -1866,12 +1935,14 @@
 PERL = @PERL@
 PERL_BINDINGS = @PERL_BINDINGS@
 PERL_BINDINGS_OPTIONS = @PERL_BINDINGS_OPTIONS@
 PERL_CFLAGS = @PERL_CFLAGS@
 PERL_LDFLAGS = @PERL_LDFLAGS@
 PKG_CONFIG = @PKG_CONFIG@
+PKG_CONFIG_LIBDIR = @PKG_CONFIG_LIBDIR@
+PKG_CONFIG_PATH = @PKG_CONFIG_PATH@
 RANLIB = @RANLIB@
 SED = @SED@
 SET_MAKE = @SET_MAKE@
 SHELL = @SHELL@
 STRIP = @STRIP@
 VERSION = @VERSION@
@@ -1932,19 +2003,19 @@
 sys_symbol_underscore = @sys_symbol_underscore@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
-SUBDIRS = libcollectdclient $(am__append_1) $(am__append_2)
+SUBDIRS = libcollectdclient $(am__append_1)
 @COMPILER_IS_GCC_TRUE@AM_CFLAGS = -Wall -Werror
 AM_CPPFLAGS = -DPREFIX='"${prefix}"' \
 	-DCONFIGFILE='"${sysconfdir}/${PACKAGE_NAME}.conf"' \
 	-DLOCALSTATEDIR='"${localstatedir}"' \
 	-DPKGLOCALSTATEDIR='"${localstatedir}/lib/${PACKAGE_NAME}"' \
-	$(am__append_3) -DPLUGINDIR='"${pkglibdir}"' \
+	$(am__append_2) -DPLUGINDIR='"${pkglibdir}"' \
 	-DPKGDATADIR='"${pkgdatadir}"'
 collectd_SOURCES = collectd.c collectd.h \
 		   common.c common.h \
 		   configfile.c configfile.h \
 		   filter_chain.c filter_chain.h \
 		   meta_data.c meta_data.h \
@@ -1962,88 +2033,92 @@
 		   utils_tail.c utils_tail.h \
 		   utils_time.c utils_time.h \
 		   types_list.c types_list.h
 
 collectd_CPPFLAGS = $(AM_CPPFLAGS) $(LTDLINCL)
 collectd_CFLAGS = $(AM_CFLAGS) $(am__append_12)
-collectd_LDFLAGS = -export-dynamic $(am__append_11)
-collectd_LDADD = -lm $(am__append_4) $(am__append_5) $(am__append_6) \
-	$(am__append_7) $(am__append_8) $(am__append_9) \
-	$(am__append_10) $(am__append_13) $(am__append_14) \
-	$(am__append_16) $(am__append_22) $(am__append_25) \
-	$(am__append_31) $(am__append_34) $(am__append_37) \
-	$(am__append_41) $(am__append_44) $(am__append_47) \
-	$(am__append_50) $(am__append_58) $(am__append_61) \
-	$(am__append_64) $(am__append_67) $(am__append_74) \
-	$(am__append_77) $(am__append_80) $(am__append_83) \
-	$(am__append_92) $(am__append_95) $(am__append_98) \
-	$(am__append_101) $(am__append_104) $(am__append_107) \
-	$(am__append_110) $(am__append_114) $(am__append_117) \
-	$(am__append_125) $(am__append_128) $(am__append_131) \
-	$(am__append_134) $(am__append_137) $(am__append_140) \
-	$(am__append_143) $(am__append_149) $(am__append_152) \
-	$(am__append_155) $(am__append_158) $(am__append_161) \
-	$(am__append_164) $(am__append_167) $(am__append_170) \
-	$(am__append_174) $(am__append_177) $(am__append_181) \
-	$(am__append_184) $(am__append_192) $(am__append_195) \
-	$(am__append_198) $(am__append_203) $(am__append_206) \
-	$(am__append_213) $(am__append_216) $(am__append_219) \
-	$(am__append_224) $(am__append_227) $(am__append_230) \
-	$(am__append_234) $(am__append_237) $(am__append_241) \
-	$(am__append_244) $(am__append_247) $(am__append_250) \
-	$(am__append_254) $(am__append_259) $(am__append_262) \
-	$(am__append_265) $(am__append_268) $(am__append_272) \
-	$(am__append_275) $(am__append_279) $(am__append_282) \
-	$(am__append_285) $(am__append_288) $(am__append_291) \
-	$(am__append_294) $(am__append_297) $(am__append_303) \
-	$(am__append_306) $(am__append_315) $(am__append_318) \
-	$(am__append_321) $(am__append_324) $(am__append_327) \
-	$(am__append_330) $(am__append_333) $(am__append_336) \
-	$(am__append_339) $(am__append_342) $(am__append_346) \
-	$(am__append_349) $(am__append_352) $(am__append_355) \
-	$(am__append_359) $(am__append_362) $(am__append_366) \
-	$(am__append_371) $(am__append_374) $(am__append_377) \
-	$(am__append_380) $(am__append_383) $(am__append_386) \
-	$(am__append_389) $(am__append_394) $(am__append_397) \
-	$(am__append_400)
+collectd_LDFLAGS = -export-dynamic $(am__append_10)
+collectd_LDADD = $(am__append_3) $(am__append_4) $(am__append_5) \
+	$(am__append_6) $(am__append_7) $(am__append_8) \
+	$(am__append_9) $(am__append_11) $(am__append_13) \
+	$(am__append_14) $(am__append_16) $(am__append_22) \
+	$(am__append_25) $(am__append_31) $(am__append_34) \
+	$(am__append_37) $(am__append_41) $(am__append_44) \
+	$(am__append_47) $(am__append_50) $(am__append_58) \
+	$(am__append_61) $(am__append_64) $(am__append_67) \
+	$(am__append_74) $(am__append_77) $(am__append_80) \
+	$(am__append_83) $(am__append_92) $(am__append_95) \
+	$(am__append_98) $(am__append_101) $(am__append_104) \
+	$(am__append_107) $(am__append_110) $(am__append_113) \
+	$(am__append_117) $(am__append_120) $(am__append_128) \
+	$(am__append_131) $(am__append_134) $(am__append_137) \
+	$(am__append_140) $(am__append_143) $(am__append_146) \
+	$(am__append_152) $(am__append_155) $(am__append_158) \
+	$(am__append_161) $(am__append_164) $(am__append_167) \
+	$(am__append_170) $(am__append_173) $(am__append_177) \
+	$(am__append_180) $(am__append_183) $(am__append_187) \
+	$(am__append_190) $(am__append_198) $(am__append_201) \
+	$(am__append_204) $(am__append_209) $(am__append_212) \
+	$(am__append_219) $(am__append_222) $(am__append_225) \
+	$(am__append_230) $(am__append_233) $(am__append_236) \
+	$(am__append_240) $(am__append_243) $(am__append_246) \
+	$(am__append_250) $(am__append_253) $(am__append_256) \
+	$(am__append_259) $(am__append_263) $(am__append_268) \
+	$(am__append_271) $(am__append_274) $(am__append_277) \
+	$(am__append_281) $(am__append_284) $(am__append_288) \
+	$(am__append_291) $(am__append_294) $(am__append_297) \
+	$(am__append_300) $(am__append_303) $(am__append_306) \
+	$(am__append_312) $(am__append_315) $(am__append_324) \
+	$(am__append_327) $(am__append_330) $(am__append_333) \
+	$(am__append_336) $(am__append_339) $(am__append_342) \
+	$(am__append_345) $(am__append_348) $(am__append_351) \
+	$(am__append_355) $(am__append_358) $(am__append_361) \
+	$(am__append_364) $(am__append_368) $(am__append_371) \
+	$(am__append_375) $(am__append_380) $(am__append_383) \
+	$(am__append_386) $(am__append_389) $(am__append_392) \
+	$(am__append_395) $(am__append_398) $(am__append_401) \
+	$(am__append_406) $(am__append_409) $(am__append_412) \
+	$(am__append_415)
 collectd_DEPENDENCIES = $(am__append_15) $(am__append_23) \
 	$(am__append_28) $(am__append_32) $(am__append_35) \
 	$(am__append_38) $(am__append_42) $(am__append_45) \
 	$(am__append_48) $(am__append_51) $(am__append_59) \
 	$(am__append_62) $(am__append_65) $(am__append_70) \
 	$(am__append_75) $(am__append_78) $(am__append_81) \
 	$(am__append_84) $(am__append_93) $(am__append_96) \
 	$(am__append_99) $(am__append_102) $(am__append_105) \
-	$(am__append_108) $(am__append_111) $(am__append_115) \
-	$(am__append_118) $(am__append_126) $(am__append_129) \
+	$(am__append_108) $(am__append_111) $(am__append_114) \
+	$(am__append_118) $(am__append_121) $(am__append_129) \
 	$(am__append_132) $(am__append_135) $(am__append_138) \
-	$(am__append_141) $(am__append_144) $(am__append_150) \
+	$(am__append_141) $(am__append_144) $(am__append_147) \
 	$(am__append_153) $(am__append_156) $(am__append_159) \
 	$(am__append_162) $(am__append_165) $(am__append_168) \
-	$(am__append_171) $(am__append_175) $(am__append_178) \
-	$(am__append_182) $(am__append_185) $(am__append_193) \
-	$(am__append_196) $(am__append_201) $(am__append_204) \
-	$(am__append_207) $(am__append_214) $(am__append_217) \
-	$(am__append_220) $(am__append_225) $(am__append_228) \
-	$(am__append_231) $(am__append_235) $(am__append_238) \
-	$(am__append_242) $(am__append_245) $(am__append_248) \
-	$(am__append_251) $(am__append_255) $(am__append_260) \
-	$(am__append_263) $(am__append_266) $(am__append_269) \
-	$(am__append_273) $(am__append_276) $(am__append_280) \
-	$(am__append_283) $(am__append_286) $(am__append_289) \
+	$(am__append_171) $(am__append_174) $(am__append_178) \
+	$(am__append_181) $(am__append_184) $(am__append_188) \
+	$(am__append_191) $(am__append_199) $(am__append_202) \
+	$(am__append_207) $(am__append_210) $(am__append_213) \
+	$(am__append_220) $(am__append_223) $(am__append_226) \
+	$(am__append_231) $(am__append_234) $(am__append_237) \
+	$(am__append_241) $(am__append_244) $(am__append_247) \
+	$(am__append_251) $(am__append_254) $(am__append_257) \
+	$(am__append_260) $(am__append_264) $(am__append_269) \
+	$(am__append_272) $(am__append_275) $(am__append_278) \
+	$(am__append_282) $(am__append_285) $(am__append_289) \
 	$(am__append_292) $(am__append_295) $(am__append_298) \
-	$(am__append_304) $(am__append_307) $(am__append_316) \
-	$(am__append_319) $(am__append_322) $(am__append_325) \
+	$(am__append_301) $(am__append_304) $(am__append_307) \
+	$(am__append_313) $(am__append_316) $(am__append_325) \
 	$(am__append_328) $(am__append_331) $(am__append_334) \
 	$(am__append_337) $(am__append_340) $(am__append_343) \
-	$(am__append_347) $(am__append_350) $(am__append_353) \
-	$(am__append_356) $(am__append_360) $(am__append_363) \
-	$(am__append_367) $(am__append_372) $(am__append_375) \
-	$(am__append_378) $(am__append_381) $(am__append_384) \
-	$(am__append_387) $(am__append_392) $(am__append_395) \
-	$(am__append_398) $(am__append_401)
+	$(am__append_346) $(am__append_349) $(am__append_352) \
+	$(am__append_356) $(am__append_359) $(am__append_362) \
+	$(am__append_365) $(am__append_369) $(am__append_372) \
+	$(am__append_376) $(am__append_381) $(am__append_384) \
+	$(am__append_387) $(am__append_390) $(am__append_393) \
+	$(am__append_396) $(am__append_399) $(am__append_404) \
+	$(am__append_407) $(am__append_410) $(am__append_413) \
+	$(am__append_416)
 collectdmon_SOURCES = collectdmon.c
 collectdmon_CPPFLAGS = $(AM_CPPFLAGS)
 collectd_nagios_SOURCES = collectd-nagios.c
 collectd_nagios_LDADD = $(am__append_17) $(am__append_18) \
 	libcollectdclient/libcollectdclient.la
 collectd_nagios_DEPENDENCIES = libcollectdclient/libcollectdclient.la
@@ -2056,42 +2131,43 @@
 	$(am__append_39) $(am__append_43) $(am__append_46) \
 	$(am__append_49) $(am__append_52) $(am__append_60) \
 	$(am__append_63) $(am__append_66) $(am__append_71) \
 	$(am__append_76) $(am__append_79) $(am__append_82) \
 	$(am__append_85) $(am__append_94) $(am__append_97) \
 	$(am__append_100) $(am__append_103) $(am__append_106) \
-	$(am__append_109) $(am__append_112) $(am__append_116) \
-	$(am__append_124) $(am__append_127) $(am__append_130) \
+	$(am__append_109) $(am__append_112) $(am__append_115) \
+	$(am__append_119) $(am__append_127) $(am__append_130) \
 	$(am__append_133) $(am__append_136) $(am__append_139) \
-	$(am__append_142) $(am__append_148) $(am__append_151) \
+	$(am__append_142) $(am__append_145) $(am__append_151) \
 	$(am__append_154) $(am__append_157) $(am__append_160) \
 	$(am__append_163) $(am__append_166) $(am__append_169) \
-	$(am__append_172) $(am__append_176) $(am__append_179) \
-	$(am__append_183) $(am__append_191) $(am__append_194) \
-	$(am__append_197) $(am__append_202) $(am__append_205) \
-	$(am__append_208) $(am__append_215) $(am__append_218) \
-	$(am__append_221) $(am__append_226) $(am__append_229) \
-	$(am__append_232) $(am__append_236) $(am__append_239) \
-	$(am__append_243) $(am__append_246) $(am__append_249) \
-	$(am__append_252) $(am__append_258) $(am__append_261) \
-	$(am__append_264) $(am__append_267) $(am__append_270) \
-	$(am__append_274) $(am__append_278) $(am__append_281) \
-	$(am__append_284) $(am__append_287) $(am__append_290) \
+	$(am__append_172) $(am__append_175) $(am__append_179) \
+	$(am__append_182) $(am__append_185) $(am__append_189) \
+	$(am__append_197) $(am__append_200) $(am__append_203) \
+	$(am__append_208) $(am__append_211) $(am__append_214) \
+	$(am__append_221) $(am__append_224) $(am__append_227) \
+	$(am__append_232) $(am__append_235) $(am__append_238) \
+	$(am__append_242) $(am__append_245) $(am__append_248) \
+	$(am__append_252) $(am__append_255) $(am__append_258) \
+	$(am__append_261) $(am__append_267) $(am__append_270) \
+	$(am__append_273) $(am__append_276) $(am__append_279) \
+	$(am__append_283) $(am__append_287) $(am__append_290) \
 	$(am__append_293) $(am__append_296) $(am__append_299) \
-	$(am__append_305) $(am__append_314) $(am__append_317) \
-	$(am__append_320) $(am__append_323) $(am__append_326) \
+	$(am__append_302) $(am__append_305) $(am__append_308) \
+	$(am__append_314) $(am__append_323) $(am__append_326) \
 	$(am__append_329) $(am__append_332) $(am__append_335) \
-	$(am__append_338) $(am__append_341) $(am__append_345) \
-	$(am__append_348) $(am__append_351) $(am__append_354) \
-	$(am__append_357) $(am__append_361) $(am__append_364) \
-	$(am__append_368) $(am__append_373) $(am__append_376) \
-	$(am__append_379) $(am__append_382) $(am__append_385) \
-	$(am__append_388) $(am__append_393) $(am__append_396) \
-	$(am__append_399)
-BUILT_SOURCES = $(am__append_256) $(dist_man_MANS)
-CLEANFILES = $(am__append_257)
+	$(am__append_338) $(am__append_341) $(am__append_344) \
+	$(am__append_347) $(am__append_350) $(am__append_354) \
+	$(am__append_357) $(am__append_360) $(am__append_363) \
+	$(am__append_366) $(am__append_370) $(am__append_373) \
+	$(am__append_377) $(am__append_382) $(am__append_385) \
+	$(am__append_388) $(am__append_391) $(am__append_394) \
+	$(am__append_397) $(am__append_400) $(am__append_405) \
+	$(am__append_408) $(am__append_411) $(am__append_414)
+BUILT_SOURCES = $(am__append_265)
+CLEANFILES = $(am__append_266)
 @BUILD_PLUGIN_AMQP_TRUE@amqp_la_SOURCES = amqp.c \
 @BUILD_PLUGIN_AMQP_TRUE@		  utils_cmd_putval.c utils_cmd_putval.h \
 @BUILD_PLUGIN_AMQP_TRUE@		  utils_format_json.c utils_format_json.h
 
 @BUILD_PLUGIN_AMQP_TRUE@amqp_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBRABBITMQ_LDFLAGS)
 @BUILD_PLUGIN_AMQP_TRUE@amqp_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBRABBITMQ_CPPFLAGS)
@@ -2179,35 +2255,35 @@
 @BUILD_PLUGIN_EXEC_TRUE@exec_la_SOURCES = exec.c \
 @BUILD_PLUGIN_EXEC_TRUE@		  utils_cmd_putnotif.c utils_cmd_putnotif.h \
 @BUILD_PLUGIN_EXEC_TRUE@		  utils_cmd_putval.c utils_cmd_putval.h
 
 @BUILD_PLUGIN_EXEC_TRUE@exec_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_EXEC_TRUE@exec_la_LIBADD = -lpthread
+@BUILD_PLUGIN_ETHSTAT_TRUE@ethstat_la_SOURCES = ethstat.c
+@BUILD_PLUGIN_ETHSTAT_TRUE@ethstat_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_FILECOUNT_TRUE@filecount_la_SOURCES = filecount.c
 @BUILD_PLUGIN_FILECOUNT_TRUE@filecount_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_GMOND_TRUE@gmond_la_SOURCES = gmond.c
 @BUILD_PLUGIN_GMOND_TRUE@gmond_la_CPPFLAGS = $(AM_CPPFLAGS) $(GANGLIA_CPPFLAGS)
 @BUILD_PLUGIN_GMOND_TRUE@gmond_la_LDFLAGS = -module -avoid-version $(GANGLIA_LDFLAGS)
 @BUILD_PLUGIN_GMOND_TRUE@gmond_la_LIBADD = $(GANGLIA_LIBS)
 @BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_SOURCES = hddtemp.c
 @BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_LIBADD = $(am__append_113)
+@BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_LIBADD = $(am__append_116)
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_SOURCES = interface.c
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_119)
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_122)
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LIBADD = $(am__append_120) \
-@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_121) \
-@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_122) \
-@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_123)
+@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LIBADD = $(am__append_123) \
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_124) \
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_125) \
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_126)
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_SOURCES = iptables.c
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBIPTC_CPPFLAGS)
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBIPTC_LDFLAGS)
-@BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_FALSE@iptables_la_LIBADD = -liptc
-@BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_TRUE@iptables_la_LIBADD = owniptc/libiptc.la
-@BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_TRUE@iptables_la_DEPENDENCIES = owniptc/libiptc.la
+@BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_LIBADD = -liptc
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_SOURCES = ipmi.c
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_OPENIPMI_CFLAGS)
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_LIBADD = $(BUILD_WITH_OPENIPMI_LIBS)
 @BUILD_PLUGIN_IPVS_TRUE@ipvs_la_SOURCES = ipvs.c
 @BUILD_PLUGIN_IPVS_TRUE@@IP_VS_H_NEEDS_KERNEL_CFLAGS_TRUE@ipvs_la_CFLAGS = $(AM_CFLAGS) $(KERNEL_CFLAGS)
@@ -2224,16 +2300,16 @@
 @BUILD_PLUGIN_LIBVIRT_TRUE@		$(BUILD_WITH_LIBVIRT_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
 
 @BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_LIBADD = $(BUILD_WITH_LIBVIRT_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
 @BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_LOAD_TRUE@load_la_SOURCES = load.c
 @BUILD_PLUGIN_LOAD_TRUE@load_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_145)
+@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_148)
 @BUILD_PLUGIN_LOAD_TRUE@load_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_LOAD_TRUE@load_la_LIBADD = $(am__append_146) \
-@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_147)
+@BUILD_PLUGIN_LOAD_TRUE@load_la_LIBADD = $(am__append_149) \
+@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_150)
 @BUILD_PLUGIN_LOGFILE_TRUE@logfile_la_SOURCES = logfile.c
 @BUILD_PLUGIN_LOGFILE_TRUE@logfile_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_LPAR_TRUE@lpar_la_SOURCES = lpar.c
 @BUILD_PLUGIN_LPAR_TRUE@lpar_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_LPAR_TRUE@lpar_la_LIBADD = -lperfstat
 @BUILD_PLUGIN_MADWIFI_TRUE@madwifi_la_SOURCES = madwifi.c madwifi.h
@@ -2247,81 +2323,85 @@
 @BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@match_timediff_la_SOURCES = match_timediff.c
 @BUILD_PLUGIN_MATCH_TIMEDIFF_TRUE@match_timediff_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MATCH_VALUE_TRUE@match_value_la_SOURCES = match_value.c
 @BUILD_PLUGIN_MATCH_VALUE_TRUE@match_value_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MBMON_TRUE@mbmon_la_SOURCES = mbmon.c
 @BUILD_PLUGIN_MBMON_TRUE@mbmon_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_MBMON_TRUE@mbmon_la_LIBADD = $(am__append_173)
+@BUILD_PLUGIN_MBMON_TRUE@mbmon_la_LIBADD = $(am__append_176)
+@BUILD_PLUGIN_MD_TRUE@md_la_SOURCES = md.c
+@BUILD_PLUGIN_MD_TRUE@md_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_SOURCES = memcachec.c
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBMEMCACHED_LDFLAGS)
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_CPPFLAGS = $(BUILD_WITH_LIBMEMCACHED_CPPFLAGS)
 @BUILD_PLUGIN_MEMCACHEC_TRUE@memcachec_la_LIBADD = $(BUILD_WITH_LIBMEMCACHED_LIBS)
 @BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_SOURCES = memcached.c
 @BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_LIBADD = $(am__append_180)
+@BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_LIBADD = $(am__append_186)
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_SOURCES = memory.c
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_188)
+@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_194)
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_MEMORY_TRUE@memory_la_LIBADD = $(am__append_186) \
-@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_187) $(am__append_189) \
-@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_190)
+@BUILD_PLUGIN_MEMORY_TRUE@memory_la_LIBADD = $(am__append_192) \
+@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_193) $(am__append_195) \
+@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_196)
 @BUILD_PLUGIN_MODBUS_TRUE@modbus_la_SOURCES = modbus.c
 @BUILD_PLUGIN_MODBUS_TRUE@modbus_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MODBUS_TRUE@modbus_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBMODBUS_CFLAGS)
 @BUILD_PLUGIN_MODBUS_TRUE@modbus_la_LIBADD = $(BUILD_WITH_LIBMODBUS_LIBS)
 @BUILD_PLUGIN_MULTIMETER_TRUE@multimeter_la_SOURCES = multimeter.c
 @BUILD_PLUGIN_MULTIMETER_TRUE@multimeter_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MYSQL_TRUE@mysql_la_SOURCES = mysql.c
 @BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MYSQL_TRUE@mysql_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_MYSQL_TRUE@	$(am__append_199)
-@BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LIBADD = $(am__append_200)
+@BUILD_PLUGIN_MYSQL_TRUE@	$(am__append_205)
+@BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LIBADD = $(am__append_206)
 @BUILD_PLUGIN_NETAPP_TRUE@netapp_la_SOURCES = netapp.c
 @BUILD_PLUGIN_NETAPP_TRUE@netapp_la_CPPFLAGS = $(AM_CPPFLAGS) $(LIBNETAPP_CPPFLAGS)
 @BUILD_PLUGIN_NETAPP_TRUE@netapp_la_LDFLAGS = -module -avoid-version $(LIBNETAPP_LDFLAGS)
 @BUILD_PLUGIN_NETAPP_TRUE@netapp_la_LIBADD = $(LIBNETAPP_LIBS)
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_SOURCES = netlink.c
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBNETLINK_CFLAGS)
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_LIBADD = $(BUILD_WITH_LIBNETLINK_LIBS)
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_SOURCES = network.c network.h \
 @BUILD_PLUGIN_NETWORK_TRUE@		     utils_fbhash.c utils_fbhash.h
 
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_CPPFLAGS = $(AM_CPPFLAGS) \
-@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_210)
+@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_216)
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_LDFLAGS = -module -avoid-version \
-@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_211)
+@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_217)
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_LIBADD = -lpthread \
-@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_209) $(am__append_212)
+@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_215) $(am__append_218)
 @BUILD_PLUGIN_NFS_TRUE@nfs_la_SOURCES = nfs.c
 @BUILD_PLUGIN_NFS_TRUE@nfs_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_FSCACHE_TRUE@fscache_la_SOURCES = fscache.c
 @BUILD_PLUGIN_FSCACHE_TRUE@fscache_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_SOURCES = nginx.c
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_NGINX_TRUE@	$(am__append_222)
-@BUILD_PLUGIN_NGINX_TRUE@nginx_la_LIBADD = $(am__append_223)
+@BUILD_PLUGIN_NGINX_TRUE@	$(am__append_228)
+@BUILD_PLUGIN_NGINX_TRUE@nginx_la_LIBADD = $(am__append_229)
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_SOURCES = notify_desktop.c
 @BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_CFLAGS = $(AM_CFLAGS) $(LIBNOTIFY_CFLAGS)
 @BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_LIBADD = $(LIBNOTIFY_LIBS)
 @BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@notify_email_la_SOURCES = notify_email.c
 @BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@notify_email_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@notify_email_la_LIBADD = -lesmtp -lssl -lcrypto -lpthread -ldl
 @BUILD_PLUGIN_NTPD_TRUE@ntpd_la_SOURCES = ntpd.c
 @BUILD_PLUGIN_NTPD_TRUE@ntpd_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_NTPD_TRUE@ntpd_la_LIBADD = $(am__append_233)
+@BUILD_PLUGIN_NTPD_TRUE@ntpd_la_LIBADD = $(am__append_239)
+@BUILD_PLUGIN_NUMA_TRUE@numa_la_SOURCES = numa.c
+@BUILD_PLUGIN_NUMA_TRUE@numa_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NUT_TRUE@nut_la_SOURCES = nut.c
 @BUILD_PLUGIN_NUT_TRUE@nut_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBUPSCLIENT_CFLAGS)
 @BUILD_PLUGIN_NUT_TRUE@nut_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NUT_TRUE@nut_la_LIBADD = -lpthread $(BUILD_WITH_LIBUPSCLIENT_LIBS)
 @BUILD_PLUGIN_OLSRD_TRUE@olsrd_la_SOURCES = olsrd.c
 @BUILD_PLUGIN_OLSRD_TRUE@olsrd_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_OLSRD_TRUE@olsrd_la_LIBADD = $(am__append_240)
+@BUILD_PLUGIN_OLSRD_TRUE@olsrd_la_LIBADD = $(am__append_249)
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_SOURCES = onewire.c
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_CFLAGS = $(AM_CFLAGS)
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_CPPFLAGS = $(BUILD_WITH_LIBOWCAPI_CPPFLAGS)
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_LIBADD = $(BUILD_WITH_LIBOWCAPI_LIBS)
 @BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_OPENVPN_TRUE@openvpn_la_SOURCES = openvpn.c
@@ -2338,13 +2418,13 @@
 # Despite C99 providing the "bool" type thru stdbool.h, Perl defines its own
 # version of that type if HAS_BOOL is not defined... *sigh*
 @BUILD_PLUGIN_PERL_TRUE@perl_la_CPPFLAGS = $(AM_CPPFLAGS) -DHAS_BOOL=1
 @BUILD_PLUGIN_PERL_TRUE@perl_la_CFLAGS = $(AM_CFLAGS) $(PERL_CFLAGS) \
 @BUILD_PLUGIN_PERL_TRUE@	-DXS_VERSION=\"$(VERSION)\" \
 @BUILD_PLUGIN_PERL_TRUE@	-DVERSION=\"$(VERSION)\" \
-@BUILD_PLUGIN_PERL_TRUE@	$(am__append_253)
+@BUILD_PLUGIN_PERL_TRUE@	$(am__append_262)
 @BUILD_PLUGIN_PERL_TRUE@perl_la_LDFLAGS = -module -avoid-version \
 @BUILD_PLUGIN_PERL_TRUE@		$(PERL_LDFLAGS)
 
 @BUILD_PLUGIN_PINBA_TRUE@pinba_la_SOURCES = pinba.c
 @BUILD_PLUGIN_PINBA_TRUE@pinba_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_PINBA_TRUE@pinba_la_LIBADD = -lprotobuf-c
@@ -2362,18 +2442,18 @@
 @BUILD_PLUGIN_POSTGRESQL_TRUE@postgresql_la_LIBADD = -lpq
 @BUILD_PLUGIN_POWERDNS_TRUE@powerdns_la_SOURCES = powerdns.c
 @BUILD_PLUGIN_POWERDNS_TRUE@powerdns_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_SOURCES = python.c pyconfig.c pyvalues.c cpython.h
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_PYTHON_CPPFLAGS)
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_PYTHON_TRUE@	$(am__append_271)
+@BUILD_PLUGIN_PYTHON_TRUE@	$(am__append_280)
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_PYTHON_LDFLAGS)
 @BUILD_PLUGIN_PYTHON_TRUE@python_la_LIBADD = $(BUILD_WITH_PYTHON_LIBS)
 @BUILD_PLUGIN_PROCESSES_TRUE@processes_la_SOURCES = processes.c
 @BUILD_PLUGIN_PROCESSES_TRUE@processes_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_PROCESSES_TRUE@processes_la_LIBADD = $(am__append_277)
+@BUILD_PLUGIN_PROCESSES_TRUE@processes_la_LIBADD = $(am__append_286)
 @BUILD_PLUGIN_PROTOCOLS_TRUE@protocols_la_SOURCES = protocols.c
 @BUILD_PLUGIN_PROTOCOLS_TRUE@protocols_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_REDIS_TRUE@redis_la_SOURCES = redis.c
 @BUILD_PLUGIN_REDIS_TRUE@redis_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBCREDIS_LDFLAGS)
 @BUILD_PLUGIN_REDIS_TRUE@redis_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBCREDIS_CPPFLAGS)
 @BUILD_PLUGIN_REDIS_TRUE@redis_la_LIBADD = -lcredis
@@ -2395,22 +2475,22 @@
 @BUILD_PLUGIN_SENSORS_TRUE@sensors_la_LIBADD = -lsensors
 @BUILD_PLUGIN_SERIAL_TRUE@serial_la_SOURCES = serial.c
 @BUILD_PLUGIN_SERIAL_TRUE@serial_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_SNMP_TRUE@snmp_la_SOURCES = snmp.c
 @BUILD_PLUGIN_SNMP_TRUE@snmp_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_SNMP_TRUE@snmp_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_300)
-@BUILD_PLUGIN_SNMP_TRUE@snmp_la_LIBADD = $(am__append_301) \
-@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_302)
+@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_309)
+@BUILD_PLUGIN_SNMP_TRUE@snmp_la_LIBADD = $(am__append_310) \
+@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_311)
 @BUILD_PLUGIN_SWAP_TRUE@swap_la_SOURCES = swap.c
 @BUILD_PLUGIN_SWAP_TRUE@swap_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_311)
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_320)
 @BUILD_PLUGIN_SWAP_TRUE@swap_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_SWAP_TRUE@swap_la_LIBADD = $(am__append_308) \
-@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_309) $(am__append_310) \
-@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_312) $(am__append_313)
+@BUILD_PLUGIN_SWAP_TRUE@swap_la_LIBADD = $(am__append_317) \
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_318) $(am__append_319) \
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_321) $(am__append_322)
 @BUILD_PLUGIN_SYSLOG_TRUE@syslog_la_SOURCES = syslog.c
 @BUILD_PLUGIN_SYSLOG_TRUE@syslog_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TABLE_TRUE@table_la_SOURCES = table.c
 @BUILD_PLUGIN_TABLE_TRUE@table_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TAIL_TRUE@tail_la_SOURCES = tail.c
 @BUILD_PLUGIN_TAIL_TRUE@tail_la_LDFLAGS = -module -avoid-version
@@ -2426,44 +2506,44 @@
 @BUILD_PLUGIN_TARGET_SET_TRUE@target_set_la_SOURCES = target_set.c
 @BUILD_PLUGIN_TARGET_SET_TRUE@target_set_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@target_v5upgrade_la_SOURCES = target_v5upgrade.c
 @BUILD_PLUGIN_TARGET_V5UPGRADE_TRUE@target_v5upgrade_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_SOURCES = tcpconns.c
 @BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_LIBADD = $(am__append_344)
+@BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_LIBADD = $(am__append_353)
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@teamspeak2_la_SOURCES = teamspeak2.c
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@teamspeak2_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TED_TRUE@ted_la_SOURCES = ted.c
 @BUILD_PLUGIN_TED_TRUE@ted_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_THERMAL_TRUE@thermal_la_SOURCES = thermal.c
 @BUILD_PLUGIN_THERMAL_TRUE@thermal_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_THRESHOLD_TRUE@threshold_la_SOURCES = threshold.c
 @BUILD_PLUGIN_THRESHOLD_TRUE@threshold_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TOKYOTYRANT_TRUE@tokyotyrant_la_SOURCES = tokyotyrant.c
 @BUILD_PLUGIN_TOKYOTYRANT_TRUE@tokyotyrant_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBTOKYOTYRANT_CPPFLAGS)
 @BUILD_PLUGIN_TOKYOTYRANT_TRUE@tokyotyrant_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBTOKYOTYRANT_LDFLAGS)
 @BUILD_PLUGIN_TOKYOTYRANT_TRUE@tokyotyrant_la_LIBADD = $(BUILD_WITH_LIBTOKYOTYRANT_LIBS) \
-@BUILD_PLUGIN_TOKYOTYRANT_TRUE@	$(am__append_358)
+@BUILD_PLUGIN_TOKYOTYRANT_TRUE@	$(am__append_367)
 @BUILD_PLUGIN_UNIXSOCK_TRUE@unixsock_la_SOURCES = unixsock.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_flush.h utils_cmd_flush.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_getval.h utils_cmd_getval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_listval.h utils_cmd_listval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_putval.h utils_cmd_putval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_putnotif.h utils_cmd_putnotif.c
 
 @BUILD_PLUGIN_UNIXSOCK_TRUE@unixsock_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_UNIXSOCK_TRUE@unixsock_la_LIBADD = -lpthread
 @BUILD_PLUGIN_UPTIME_TRUE@uptime_la_SOURCES = uptime.c
 @BUILD_PLUGIN_UPTIME_TRUE@uptime_la_CFLAGS = $(AM_CFLAGS)
 @BUILD_PLUGIN_UPTIME_TRUE@uptime_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_UPTIME_TRUE@uptime_la_LIBADD = $(am__append_365)
+@BUILD_PLUGIN_UPTIME_TRUE@uptime_la_LIBADD = $(am__append_374)
 @BUILD_PLUGIN_USERS_TRUE@users_la_SOURCES = users.c
 @BUILD_PLUGIN_USERS_TRUE@users_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_USERS_TRUE@	$(am__append_369)
+@BUILD_PLUGIN_USERS_TRUE@	$(am__append_378)
 @BUILD_PLUGIN_USERS_TRUE@users_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_USERS_TRUE@users_la_LIBADD = $(am__append_370)
+@BUILD_PLUGIN_USERS_TRUE@users_la_LIBADD = $(am__append_379)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_SOURCES = uuid.c
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBHAL_CFLAGS)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_LIBADD = $(BUILD_WITH_LIBHAL_LIBS)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_VARNISH_TRUE@varnish_la_SOURCES = varnish.c
 @BUILD_PLUGIN_VARNISH_TRUE@varnish_la_LDFLAGS = -module -avoid-version
@@ -2472,20 +2552,28 @@
 @BUILD_PLUGIN_VMEM_TRUE@vmem_la_SOURCES = vmem.c
 @BUILD_PLUGIN_VMEM_TRUE@vmem_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_VSERVER_TRUE@vserver_la_SOURCES = vserver.c
 @BUILD_PLUGIN_VSERVER_TRUE@vserver_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_WIRELESS_TRUE@wireless_la_SOURCES = wireless.c
 @BUILD_PLUGIN_WIRELESS_TRUE@wireless_la_LDFLAGS = -module -avoid-version
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@write_graphite_la_SOURCES = write_graphite.c \
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@			utils_format_json.c utils_format_json.h
+
+@BUILD_PLUGIN_WRITE_GRAPHITE_TRUE@write_graphite_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_SOURCES = write_http.c \
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@			utils_format_json.c utils_format_json.h
 
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__append_390)
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__append_402)
 @BUILD_PLUGIN_WRITE_HTTP_TRUE@write_http_la_LIBADD =  \
-@BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__append_391)
+@BUILD_PLUGIN_WRITE_HTTP_TRUE@	$(am__append_403)
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@write_mongodb_la_SOURCES = write_mongodb.c
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@write_mongodb_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBMONGOC_CPPFLAGS)
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@write_mongodb_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBMONGOC_LDFLAGS)
+@BUILD_PLUGIN_WRITE_MONGODB_TRUE@write_mongodb_la_LIBADD = -lmongoc
 @BUILD_PLUGIN_WRITE_REDIS_TRUE@write_redis_la_SOURCES = write_redis.c
 @BUILD_PLUGIN_WRITE_REDIS_TRUE@write_redis_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBCREDIS_LDFLAGS)
 @BUILD_PLUGIN_WRITE_REDIS_TRUE@write_redis_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBCREDIS_CPPFLAGS)
 @BUILD_PLUGIN_WRITE_REDIS_TRUE@write_redis_la_LIBADD = -lcredis
 @BUILD_PLUGIN_XMMS_TRUE@xmms_la_SOURCES = xmms.c
 @BUILD_PLUGIN_XMMS_TRUE@xmms_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBXMMS_CFLAGS)
@@ -2642,12 +2730,14 @@
 dns.la: $(dns_la_OBJECTS) $(dns_la_DEPENDENCIES) 
 	$(dns_la_LINK) $(am_dns_la_rpath) $(dns_la_OBJECTS) $(dns_la_LIBADD) $(LIBS)
 email.la: $(email_la_OBJECTS) $(email_la_DEPENDENCIES) 
 	$(email_la_LINK) $(am_email_la_rpath) $(email_la_OBJECTS) $(email_la_LIBADD) $(LIBS)
 entropy.la: $(entropy_la_OBJECTS) $(entropy_la_DEPENDENCIES) 
 	$(entropy_la_LINK) $(am_entropy_la_rpath) $(entropy_la_OBJECTS) $(entropy_la_LIBADD) $(LIBS)
+ethstat.la: $(ethstat_la_OBJECTS) $(ethstat_la_DEPENDENCIES) 
+	$(ethstat_la_LINK) $(am_ethstat_la_rpath) $(ethstat_la_OBJECTS) $(ethstat_la_LIBADD) $(LIBS)
 exec.la: $(exec_la_OBJECTS) $(exec_la_DEPENDENCIES) 
 	$(exec_la_LINK) $(am_exec_la_rpath) $(exec_la_OBJECTS) $(exec_la_LIBADD) $(LIBS)
 filecount.la: $(filecount_la_OBJECTS) $(filecount_la_DEPENDENCIES) 
 	$(filecount_la_LINK) $(am_filecount_la_rpath) $(filecount_la_OBJECTS) $(filecount_la_LIBADD) $(LIBS)
 fscache.la: $(fscache_la_OBJECTS) $(fscache_la_DEPENDENCIES) 
 	$(fscache_la_LINK) $(am_fscache_la_rpath) $(fscache_la_OBJECTS) $(fscache_la_LIBADD) $(LIBS)
@@ -2686,12 +2776,14 @@
 match_timediff.la: $(match_timediff_la_OBJECTS) $(match_timediff_la_DEPENDENCIES) 
 	$(match_timediff_la_LINK) $(am_match_timediff_la_rpath) $(match_timediff_la_OBJECTS) $(match_timediff_la_LIBADD) $(LIBS)
 match_value.la: $(match_value_la_OBJECTS) $(match_value_la_DEPENDENCIES) 
 	$(match_value_la_LINK) $(am_match_value_la_rpath) $(match_value_la_OBJECTS) $(match_value_la_LIBADD) $(LIBS)
 mbmon.la: $(mbmon_la_OBJECTS) $(mbmon_la_DEPENDENCIES) 
 	$(mbmon_la_LINK) $(am_mbmon_la_rpath) $(mbmon_la_OBJECTS) $(mbmon_la_LIBADD) $(LIBS)
+md.la: $(md_la_OBJECTS) $(md_la_DEPENDENCIES) 
+	$(md_la_LINK) $(am_md_la_rpath) $(md_la_OBJECTS) $(md_la_LIBADD) $(LIBS)
 memcachec.la: $(memcachec_la_OBJECTS) $(memcachec_la_DEPENDENCIES) 
 	$(memcachec_la_LINK) $(am_memcachec_la_rpath) $(memcachec_la_OBJECTS) $(memcachec_la_LIBADD) $(LIBS)
 memcached.la: $(memcached_la_OBJECTS) $(memcached_la_DEPENDENCIES) 
 	$(memcached_la_LINK) $(am_memcached_la_rpath) $(memcached_la_OBJECTS) $(memcached_la_LIBADD) $(LIBS)
 memory.la: $(memory_la_OBJECTS) $(memory_la_DEPENDENCIES) 
 	$(memory_la_LINK) $(am_memory_la_rpath) $(memory_la_OBJECTS) $(memory_la_LIBADD) $(LIBS)
@@ -2714,12 +2806,14 @@
 notify_desktop.la: $(notify_desktop_la_OBJECTS) $(notify_desktop_la_DEPENDENCIES) 
 	$(notify_desktop_la_LINK) $(am_notify_desktop_la_rpath) $(notify_desktop_la_OBJECTS) $(notify_desktop_la_LIBADD) $(LIBS)
 notify_email.la: $(notify_email_la_OBJECTS) $(notify_email_la_DEPENDENCIES) 
 	$(notify_email_la_LINK) $(am_notify_email_la_rpath) $(notify_email_la_OBJECTS) $(notify_email_la_LIBADD) $(LIBS)
 ntpd.la: $(ntpd_la_OBJECTS) $(ntpd_la_DEPENDENCIES) 
 	$(ntpd_la_LINK) $(am_ntpd_la_rpath) $(ntpd_la_OBJECTS) $(ntpd_la_LIBADD) $(LIBS)
+numa.la: $(numa_la_OBJECTS) $(numa_la_DEPENDENCIES) 
+	$(numa_la_LINK) $(am_numa_la_rpath) $(numa_la_OBJECTS) $(numa_la_LIBADD) $(LIBS)
 nut.la: $(nut_la_OBJECTS) $(nut_la_DEPENDENCIES) 
 	$(nut_la_LINK) $(am_nut_la_rpath) $(nut_la_OBJECTS) $(nut_la_LIBADD) $(LIBS)
 olsrd.la: $(olsrd_la_OBJECTS) $(olsrd_la_DEPENDENCIES) 
 	$(olsrd_la_LINK) $(am_olsrd_la_rpath) $(olsrd_la_OBJECTS) $(olsrd_la_LIBADD) $(LIBS)
 onewire.la: $(onewire_la_OBJECTS) $(onewire_la_DEPENDENCIES) 
 	$(onewire_la_LINK) $(am_onewire_la_rpath) $(onewire_la_OBJECTS) $(onewire_la_LIBADD) $(LIBS)
@@ -2802,14 +2896,18 @@
 vmem.la: $(vmem_la_OBJECTS) $(vmem_la_DEPENDENCIES) 
 	$(vmem_la_LINK) $(am_vmem_la_rpath) $(vmem_la_OBJECTS) $(vmem_la_LIBADD) $(LIBS)
 vserver.la: $(vserver_la_OBJECTS) $(vserver_la_DEPENDENCIES) 
 	$(vserver_la_LINK) $(am_vserver_la_rpath) $(vserver_la_OBJECTS) $(vserver_la_LIBADD) $(LIBS)
 wireless.la: $(wireless_la_OBJECTS) $(wireless_la_DEPENDENCIES) 
 	$(wireless_la_LINK) $(am_wireless_la_rpath) $(wireless_la_OBJECTS) $(wireless_la_LIBADD) $(LIBS)
+write_graphite.la: $(write_graphite_la_OBJECTS) $(write_graphite_la_DEPENDENCIES) 
+	$(write_graphite_la_LINK) $(am_write_graphite_la_rpath) $(write_graphite_la_OBJECTS) $(write_graphite_la_LIBADD) $(LIBS)
 write_http.la: $(write_http_la_OBJECTS) $(write_http_la_DEPENDENCIES) 
 	$(write_http_la_LINK) $(am_write_http_la_rpath) $(write_http_la_OBJECTS) $(write_http_la_LIBADD) $(LIBS)
+write_mongodb.la: $(write_mongodb_la_OBJECTS) $(write_mongodb_la_DEPENDENCIES) 
+	$(write_mongodb_la_LINK) $(am_write_mongodb_la_rpath) $(write_mongodb_la_OBJECTS) $(write_mongodb_la_LIBADD) $(LIBS)
 write_redis.la: $(write_redis_la_OBJECTS) $(write_redis_la_DEPENDENCIES) 
 	$(write_redis_la_LINK) $(am_write_redis_la_rpath) $(write_redis_la_OBJECTS) $(write_redis_la_LIBADD) $(LIBS)
 xmms.la: $(xmms_la_OBJECTS) $(xmms_la_DEPENDENCIES) 
 	$(xmms_la_LINK) $(am_xmms_la_rpath) $(xmms_la_OBJECTS) $(xmms_la_LIBADD) $(LIBS)
 zfs_arc.la: $(zfs_arc_la_OBJECTS) $(zfs_arc_la_DEPENDENCIES) 
 	$(zfs_arc_la_LINK) $(am_zfs_arc_la_rpath) $(zfs_arc_la_OBJECTS) $(zfs_arc_la_LIBADD) $(LIBS)
@@ -2961,12 +3059,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dbi_la-utils_db_query.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/df.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/disk_la-disk.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dns.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/email.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/entropy.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ethstat.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/exec.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/filecount.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/fscache.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/gmond_la-gmond.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/hddtemp.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/interface_la-interface.Plo@am__quote@
@@ -2983,12 +3082,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/match_empty_counter.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/match_hashed.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/match_regex.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/match_timediff.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/match_value.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mbmon.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/md.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/memcachec_la-memcachec.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/memcached.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/memory_la-memory.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/modbus_la-modbus.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/multimeter.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mysql_la-mysql.Plo@am__quote@
@@ -2998,12 +3098,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/network_la-utils_fbhash.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/nfs.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/nginx_la-nginx.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/notify_desktop_la-notify_desktop.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/notify_email.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ntpd.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/numa.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/nut_la-nut.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/olsrd.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/onewire_la-onewire.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/openvpn_la-openvpn.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/oracle_la-oracle.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/oracle_la-utils_db_query.Plo@am__quote@
@@ -3049,20 +3150,23 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_flush.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_getval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_listval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_putnotif.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_putval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_dns.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_format_json.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_mount.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/uuid_la-uuid.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/varnish_la-varnish.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/vmem.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/vserver.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/wireless.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/write_graphite.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/write_http_la-utils_format_json.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/write_http_la-write_http.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/write_mongodb_la-write_mongodb.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/write_redis_la-write_redis.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/xmms_la-xmms.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/zfs_arc_la-zfs_arc.Plo@am__quote@
 
 .c.o:
 @am__fastdepCC_TRUE@	$(COMPILE) -MT $@ -MD -MP -MF $(DEPDIR)/$*.Tpo -c -o $@ $<
@@ -3495,12 +3599,19 @@
 @am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(write_http_la_CFLAGS) $(CFLAGS) -MT write_http_la-utils_format_json.lo -MD -MP -MF $(DEPDIR)/write_http_la-utils_format_json.Tpo -c -o write_http_la-utils_format_json.lo `test -f 'utils_format_json.c' || echo '$(srcdir)/'`utils_format_json.c
 @am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/write_http_la-utils_format_json.Tpo $(DEPDIR)/write_http_la-utils_format_json.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_format_json.c' object='write_http_la-utils_format_json.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(write_http_la_CFLAGS) $(CFLAGS) -c -o write_http_la-utils_format_json.lo `test -f 'utils_format_json.c' || echo '$(srcdir)/'`utils_format_json.c
 
+write_mongodb_la-write_mongodb.lo: write_mongodb.c
+@am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(write_mongodb_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT write_mongodb_la-write_mongodb.lo -MD -MP -MF $(DEPDIR)/write_mongodb_la-write_mongodb.Tpo -c -o write_mongodb_la-write_mongodb.lo `test -f 'write_mongodb.c' || echo '$(srcdir)/'`write_mongodb.c
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/write_mongodb_la-write_mongodb.Tpo $(DEPDIR)/write_mongodb_la-write_mongodb.Plo
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='write_mongodb.c' object='write_mongodb_la-write_mongodb.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(write_mongodb_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o write_mongodb_la-write_mongodb.lo `test -f 'write_mongodb.c' || echo '$(srcdir)/'`write_mongodb.c
+
 write_redis_la-write_redis.lo: write_redis.c
 @am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(write_redis_la_CFLAGS) $(CFLAGS) -MT write_redis_la-write_redis.lo -MD -MP -MF $(DEPDIR)/write_redis_la-write_redis.Tpo -c -o write_redis_la-write_redis.lo `test -f 'write_redis.c' || echo '$(srcdir)/'`write_redis.c
 @am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/write_redis_la-write_redis.Tpo $(DEPDIR)/write_redis_la-write_redis.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='write_redis.c' object='write_redis_la-write_redis.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(write_redis_la_CFLAGS) $(CFLAGS) -c -o write_redis_la-write_redis.lo `test -f 'write_redis.c' || echo '$(srcdir)/'`write_redis.c
@@ -4194,19 +4305,18 @@
 ps: ps-recursive
 
 ps-am:
 
 uninstall-am: uninstall-binPROGRAMS uninstall-man \
 	uninstall-pkglibLTLIBRARIES uninstall-sbinPROGRAMS
-	@$(NORMAL_INSTALL)
-	$(MAKE) $(AM_MAKEFLAGS) uninstall-hook
+
 uninstall-man: uninstall-man1 uninstall-man5
 
 .MAKE: $(RECURSIVE_CLEAN_TARGETS) $(RECURSIVE_TARGETS) all check \
 	ctags-recursive install install-am install-exec-am \
-	install-strip tags-recursive uninstall-am
+	install-strip tags-recursive
 
 .PHONY: $(RECURSIVE_CLEAN_TARGETS) $(RECURSIVE_TARGETS) CTAGS GTAGS \
 	all all-am check check-am clean clean-binPROGRAMS \
 	clean-generic clean-libtool clean-pkglibLTLIBRARIES \
 	clean-sbinPROGRAMS ctags ctags-recursive distclean \
 	distclean-compile distclean-generic distclean-hdr \
@@ -4219,14 +4329,14 @@
 	install-pkglibLTLIBRARIES install-ps install-ps-am \
 	install-sbinPROGRAMS install-strip installcheck \
 	installcheck-am installdirs installdirs-am maintainer-clean \
 	maintainer-clean-generic mostlyclean mostlyclean-compile \
 	mostlyclean-generic mostlyclean-libtool pdf pdf-am ps ps-am \
 	tags tags-recursive uninstall uninstall-am \
-	uninstall-binPROGRAMS uninstall-hook uninstall-man \
-	uninstall-man1 uninstall-man5 uninstall-pkglibLTLIBRARIES \
+	uninstall-binPROGRAMS uninstall-man uninstall-man1 \
+	uninstall-man5 uninstall-pkglibLTLIBRARIES \
 	uninstall-sbinPROGRAMS
 
 
 .pod.1:
 	pod2man --release=$(VERSION) --center=$(PACKAGE) $< \
 		>.pod2man.tmp.$$$$ 2>/dev/null && mv -f .pod2man.tmp.$$$$ $@ || true
@@ -4241,13 +4351,13 @@
 	@if grep '\<POD ERRORS\>' $@ >/dev/null 2>&1; \
 	then \
 		echo "$@ has some POD errors!"; false; \
 	fi
 
 pinba.pb-c.c pinba.pb-c.h: pinba.proto
-	protoc-c --c_out . pinba.proto
+	protoc-c --c_out $(builddir) pinba.proto
 
 install-exec-hook:
 	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)
 	if test -e $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	then \
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf.pkg-orig; \
@@ -4256,14 +4366,9 @@
 	fi; \
 	$(mkinstalldirs) $(DESTDIR)$(pkgdatadir)
 	$(INSTALL) -m 0644 $(srcdir)/types.db $(DESTDIR)$(pkgdatadir)/types.db;
 	$(INSTALL) -m 0644 $(srcdir)/postgresql_default.conf \
 		$(DESTDIR)$(pkgdatadir)/postgresql_default.conf;
 
-uninstall-hook:
-	rm -f $(DESTDIR)$(pkgdatadir)/types.db;
-	rm -f $(DESTDIR)$(sysconfdir)/collectd.conf
-	rm -f $(DESTDIR)$(pkgdatadir)/postgresql_default.conf;
-
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src: md.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/memcachec.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/memcachec.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/memcachec.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/memcachec.c	2012-04-02 16:04:58.000000000 +0800
@@ -325,13 +325,13 @@
   for (i = 0; i < ci->children_num; i++)
   {
     oconfig_item_t *child = ci->children + i;
 
     if (strcasecmp ("Server", child->key) == 0)
       status = cmc_config_add_string ("Server", &page->server, child);
-    else if (strcasecmp ("Key", child->key) == 0)
+    if (strcasecmp ("Key", child->key) == 0)
       status = cmc_config_add_string ("Key", &page->key, child);
     else if (strcasecmp ("Match", child->key) == 0)
       /* Be liberal with failing matches => don't set `status'. */
       cmc_config_add_match (page, child);
     else
     {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/meta_data.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/meta_data.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/meta_data.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/meta_data.c	2012-04-02 16:04:58.000000000 +0800
@@ -247,13 +247,12 @@
 
 void meta_data_destroy (meta_data_t *md) /* {{{ */
 {
   if (md == NULL)
     return;
 
-  pthread_mutex_destroy(&md->lock);
   md_entry_free (md->head);
   pthread_mutex_destroy (&md->lock);
   free (md);
 } /* }}} void meta_data_destroy */
 
 int meta_data_exists (meta_data_t *md, const char *key) /* {{{ */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/modbus.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/modbus.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/modbus.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/modbus.c	2012-04-02 16:04:58.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/modbus.c
- * Copyright (C) 2010  noris network AG
+ * Copyright (C) 2010,2011  noris network AG
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU Lesser General Public License as published by
  * the Free Software Foundation; only version 2.1 of the License is
  * applicable.
  *
@@ -66,12 +66,14 @@
 
 /*
  * Data structures
  */
 enum mb_register_type_e /* {{{ */
 {
+  REG_TYPE_INT16,
+  REG_TYPE_INT32,
   REG_TYPE_UINT16,
   REG_TYPE_UINT32,
   REG_TYPE_FLOAT
 }; /* }}} */
 typedef enum mb_register_type_e mb_register_type_t;
 
@@ -408,21 +410,23 @@
         "I can only handle data sets with only one data source.",
         data->type, ds->ds_num);
     return (-1);
   }
 
   if ((ds->ds[0].type != DS_TYPE_GAUGE)
+      && (data->register_type != REG_TYPE_INT32)
       && (data->register_type != REG_TYPE_UINT32))
   {
     NOTICE ("Modbus plugin: The data source of type \"%s\" is %s, not gauge. "
         "This will most likely result in problems, because the register type "
         "is not UINT32.", data->type, DS_TYPE_TO_STRING (ds->ds[0].type));
   }
 
   memset (values, 0, sizeof (values));
-  if ((data->register_type == REG_TYPE_UINT32)
+  if ((data->register_type == REG_TYPE_INT32)
+      || (data->register_type == REG_TYPE_UINT32)
       || (data->register_type == REG_TYPE_FLOAT))
     values_num = 2;
   else
     values_num = 1;
 
 #if LEGACY_LIBMODBUS
@@ -499,18 +503,53 @@
     DEBUG ("Modbus plugin: mb_read_data: "
         "Returned float value is %g", (double) float_value);
 
     CAST_TO_VALUE_T (ds, vt, float_value);
     mb_submit (host, slave, data, vt);
   }
+  else if (data->register_type == REG_TYPE_INT32)
+  {
+    union
+    {
+      uint32_t u32;
+      int32_t  i32;
+    } v;
+    value_t vt;
+
+    v.u32 = (((uint32_t) values[0]) << 16)
+      | ((uint32_t) values[1]);
+    DEBUG ("Modbus plugin: mb_read_data: "
+        "Returned int32 value is %"PRIi32, v.i32);
+
+    CAST_TO_VALUE_T (ds, vt, v.i32);
+    mb_submit (host, slave, data, vt);
+  }
+  else if (data->register_type == REG_TYPE_INT16)
+  {
+    union
+    {
+      uint16_t u16;
+      int16_t  i16;
+    } v;
+    value_t vt;
+
+    v.u16 = values[0];
+
+    DEBUG ("Modbus plugin: mb_read_data: "
+        "Returned int16 value is %"PRIi16, v.i16);
+
+    CAST_TO_VALUE_T (ds, vt, v.i16);
+    mb_submit (host, slave, data, vt);
+  }
   else if (data->register_type == REG_TYPE_UINT32)
   {
     uint32_t v32;
     value_t vt;
 
-    v32 = (values[0] << 16) | values[1];
+    v32 = (((uint32_t) values[0]) << 16)
+      | ((uint32_t) values[1]);
     DEBUG ("Modbus plugin: mb_read_data: "
         "Returned uint32 value is %"PRIu32, v32);
 
     CAST_TO_VALUE_T (ds, vt, v32);
     mb_submit (host, slave, data, vt);
   }
@@ -660,12 +699,16 @@
     else if (strcasecmp ("RegisterType", child->key) == 0)
     {
       char tmp[16];
       status = cf_util_get_string_buffer (child, tmp, sizeof (tmp));
       if (status != 0)
         /* do nothing */;
+      else if (strcasecmp ("Int16", tmp) == 0)
+        data.register_type = REG_TYPE_INT16;
+      else if (strcasecmp ("Int32", tmp) == 0)
+        data.register_type = REG_TYPE_INT32;
       else if (strcasecmp ("Uint16", tmp) == 0)
         data.register_type = REG_TYPE_UINT16;
       else if (strcasecmp ("Uint32", tmp) == 0)
         data.register_type = REG_TYPE_UINT32;
       else if (strcasecmp ("Float", tmp) == 0)
         data.register_type = REG_TYPE_FLOAT;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/mysql.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/mysql.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/mysql.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/mysql.c	2012-04-02 16:04:58.000000000 +0800
@@ -189,15 +189,15 @@
 				(db->database != NULL) ? db->database : "<default>");
 
 		memset (&ud, 0, sizeof (ud));
 		ud.data = (void *) db;
 		ud.free_func = mysql_database_free;
 
-		if (db->instance != NULL)
+		if (db->database != NULL)
 			ssnprintf (cb_name, sizeof (cb_name), "mysql-%s",
-					db->instance);
+					db->database);
 		else
 			sstrncpy (cb_name, "mysql", sizeof (cb_name));
 
 		plugin_register_complex_read (/* group = */ NULL, cb_name,
 					      mysql_read,
 					      /* interval = */ NULL, &ud);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/netapp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/netapp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/netapp.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/netapp.c	2012-04-02 16:04:58.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/netapp.c
- * Copyright (C) 2009,2010  Sven Trenkel
+ * Copyright (C) 2009  Sven Trenkel
  *
  * Permission is hereby granted, free of charge, to any person obtaining a
  * copy of this software and associated documentation files (the "Software"),
  * to deal in the Software without restriction, including without limitation
  * the rights to use, copy, modify, merge, publish, distribute, sublicense,
  * and/or sell copies of the Software, and to permit persons to whom the
@@ -2494,13 +2494,13 @@
 			/* transportarg = */ NULL);
 	na_server_set_port(host->srv, host->port);
 	na_server_style(host->srv, NA_STYLE_LOGIN_PASSWORD);
 	na_server_adminuser(host->srv, host->username, host->password);
 	na_server_set_timeout(host->srv, 5 /* seconds */);
 
-	return (0);
+	return 0;
 } /* }}} int cna_init_host */
 
 static int cna_init (void) /* {{{ */
 {
 	char err[256];
 
@@ -2511,58 +2511,30 @@
 		return 1;
 	}
 
 	return (0);
 } /* }}} cna_init */
 
-static int cna_read_internal (host_config_t *host) { /* {{{ */
-	int status;
-
-	status = cna_query_wafl (host);
-	if (status != 0)
-		return (status);
-
-	status = cna_query_disk (host);
-	if (status != 0)
-		return (status);
-
-	status = cna_query_volume_perf (host);
-	if (status != 0)
-		return (status);
-
-	status = cna_query_volume_usage (host);
-	if (status != 0)
-		return (status);
-
-	status = cna_query_system (host);
-	if (status != 0)
-		return (status);
-
-	return 0;
-} /* }}} int cna_read_internal */
-
 static int cna_read (user_data_t *ud) { /* {{{ */
 	host_config_t *host;
 	int status;
 
 	if ((ud == NULL) || (ud->data == NULL))
 		return (-1);
 
 	host = ud->data;
 
 	status = cna_init_host (host);
 	if (status != 0)
 		return (status);
-
-	status = cna_read_internal (host);
-	if (status != 0)
-	{
-		if (host->srv != NULL)
-			na_server_close (host->srv);
-		host->srv = NULL;
-	}
+	
+	cna_query_wafl (host);
+	cna_query_disk (host);
+	cna_query_volume_perf (host);
+	cna_query_volume_usage (host);
+	cna_query_system (host);
 
 	return 0;
 } /* }}} int cna_read */
 
 static int cna_config (oconfig_item_t *ci) { /* {{{ */
 	int i;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/netlink.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/netlink.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/netlink.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/netlink.c	2012-04-02 16:04:58.000000000 +0800
@@ -220,13 +220,13 @@
 	nmh->nlmsg_type);
     return (-1);
   }
 
   msg = NLMSG_DATA (nmh);
 
-  msg_len = nmh->nlmsg_len - NLMSG_LENGTH(sizeof (struct ifinfomsg));
+  msg_len = nmh->nlmsg_len - sizeof (struct ifinfomsg);
   if (msg_len < 0)
   {
     ERROR ("netlink plugin: link_filter: msg_len = %i < 0;", msg_len);
     return (-1);
   }
 
@@ -551,32 +551,30 @@
 
   return (0);
 } /* int ir_init */
 
 static int ir_read (void)
 {
+  struct ifinfomsg im;
   struct tcmsg tm;
   int ifindex;
 
   static const int type_id[] = { RTM_GETQDISC, RTM_GETTCLASS, RTM_GETTFILTER };
   static const char *type_name[] = { "qdisc", "class", "filter" };
 
-  if (rtnl_wilddump_request (&rth, AF_UNSPEC, RTM_GETLINK) < 0)
+  memset (&im, '\0', sizeof (im));
+  im.ifi_type = AF_UNSPEC;
+
+  if (rtnl_dump_request (&rth, RTM_GETLINK, &im, sizeof (im)) < 0)
   {
-    ERROR ("netlink plugin: ir_read: rtnl_wilddump_request failed.");
+    ERROR ("netlink plugin: ir_read: rtnl_dump_request failed.");
     return (-1);
   }
 
-#ifdef RTNL_DUMP_FILTER_FIVE_ARGS
   if (rtnl_dump_filter (&rth, link_filter, /* arg1 = */ NULL,
 	NULL, NULL) != 0)
-#elif defined(RTNL_DUMP_FILTER_THREE_ARGS)
-  if (rtnl_dump_filter (&rth, link_filter, /* arg = */ NULL) != 0)
-#else
-#error "Failed to determine the number of arguments to 'rtnl_dump_filter'!"
-#endif
   {
     ERROR ("netlink plugin: ir_read: rtnl_dump_filter failed.");
     return (-1);
   }
 
   /* `link_filter' will update `iflist' which is used here to iterate over all
@@ -607,20 +605,14 @@
       if (rtnl_dump_request (&rth, type_id[type_index], &tm, sizeof (tm)) < 0)
       {
 	ERROR ("netlink plugin: ir_read: rtnl_dump_request failed.");
 	continue;
       }
 
-#ifdef RTNL_DUMP_FILTER_FIVE_ARGS
       if (rtnl_dump_filter (&rth, qos_filter, (void *) &ifindex,
 	    NULL, NULL) != 0)
-#elif defined(RTNL_DUMP_FILTER_THREE_ARGS)
-      if (rtnl_dump_filter (&rth, qos_filter, /* arg = */ &ifindex) != 0)
-#else
-#error "Failed to determine the number of arguments to 'rtnl_dump_filter'!"
-#endif
       {
 	ERROR ("netlink plugin: ir_read: rtnl_dump_filter failed.");
 	continue;
       }
     } /* for (type_index) */
   } /* for (if_index) */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/network.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/network.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/network.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/network.c	2012-04-02 16:04:58.000000000 +0800
@@ -55,25 +55,13 @@
 #endif
 #if HAVE_NET_IF_H
 # include <net/if.h>
 #endif
 
 #if HAVE_LIBGCRYPT
-# include <pthread.h>
-# if defined __APPLE__
-/* default xcode compiler throws warnings even when deprecated functionality
- * is not used. -Werror breaks the build because of erroneous warnings.
- * http://stackoverflow.com/questions/10556299/compiler-warnings-with-libgcrypt-v1-5-0/12830209#12830209
- */
-#  pragma GCC diagnostic ignored "-Wdeprecated-declarations"
-# endif
 # include <gcrypt.h>
-# if defined __APPLE__
-/* Re enable deprecation warnings */
-#  pragma GCC diagnostic warning "-Wdeprecated-declarations"
-# endif
 GCRY_THREAD_OPTION_PTHREAD_IMPL;
 #endif
 
 #ifndef IPV6_ADD_MEMBERSHIP
 # ifdef IPV6_JOIN_GROUP
 #  define IPV6_ADD_MEMBERSHIP IPV6_JOIN_GROUP
@@ -670,13 +658,13 @@
 {
 	char *packet_ptr;
 	int packet_len;
 
 	part_header_t pkg_head;
 	uint64_t pkg_value;
-
+	
 	int offset;
 
 	packet_len = sizeof (pkg_head) + sizeof (pkg_value);
 
 	if (*ret_buffer_len < packet_len)
 		return (-1);
@@ -1674,13 +1662,13 @@
 
 		if (setsockopt (se->data.client.fd, IPPROTO_IP, optname,
 					&network_config_ttl,
 					sizeof (network_config_ttl)) != 0)
 		{
 			char errbuf[1024];
-			ERROR ("network plugin: setsockopt (ipv4-ttl): %s",
+			ERROR ("setsockopt: %s",
 					sstrerror (errno, errbuf, sizeof (errbuf)));
 			return (-1);
 		}
 	}
 	else if (ai->ai_family == AF_INET6)
 	{
@@ -1695,13 +1683,13 @@
 
 		if (setsockopt (se->data.client.fd, IPPROTO_IPV6, optname,
 					&network_config_ttl,
 					sizeof (network_config_ttl)) != 0)
 		{
 			char errbuf[1024];
-			ERROR ("network plugin: setsockopt(ipv6-ttl): %s",
+			ERROR ("setsockopt: %s",
 					sstrerror (errno, errbuf,
 						sizeof (errbuf)));
 			return (-1);
 		}
 	}
 
@@ -1742,13 +1730,13 @@
 #endif
 
 			if (setsockopt (se->data.client.fd, IPPROTO_IP, IP_MULTICAST_IF,
 						&mreq, sizeof (mreq)) != 0)
 			{
 				char errbuf[1024];
-				ERROR ("network plugin: setsockopt (ipv4-multicast-if): %s",
+				ERROR ("setsockopt: %s",
 						sstrerror (errno, errbuf, sizeof (errbuf)));
 				return (-1);
 			}
 
 			return (0);
 		}
@@ -1761,13 +1749,13 @@
 		{
 			if (setsockopt (se->data.client.fd, IPPROTO_IPV6, IPV6_MULTICAST_IF,
 						&se->interface,
 						sizeof (se->interface)) != 0)
 			{
 				char errbuf[1024];
-				ERROR ("network plugin: setsockopt (ipv6-multicast-if): %s",
+				ERROR ("setsockopt: %s",
 						sstrerror (errno, errbuf,
 							sizeof (errbuf)));
 				return (-1);
 			}
 
 			return (0);
@@ -1787,13 +1775,13 @@
 
 		if (setsockopt (se->data.client.fd, SOL_SOCKET, SO_BINDTODEVICE,
 					interface_name,
 					sizeof(interface_name)) == -1 )
 		{
 			char errbuf[1024];
-			ERROR ("network plugin: setsockopt (bind-if): %s",
+			ERROR ("setsockopt: %s",
 					sstrerror (errno, errbuf, sizeof (errbuf)));
 			return (-1);
 		}
 /* #endif HAVE_IF_INDEXTONAME && SO_BINDTODEVICE */
 
 #else
@@ -1811,24 +1799,20 @@
 
 	return (0);
 } /* }}} network_set_interface */
 
 static int network_bind_socket (int fd, const struct addrinfo *ai, const int interface_idx)
 {
-#if KERNEL_SOLARIS
-	char loop   = 0;
-#else
 	int loop = 0;
-#endif
 	int yes  = 1;
 
 	/* allow multiple sockets to use the same PORT number */
 	if (setsockopt (fd, SOL_SOCKET, SO_REUSEADDR,
 				&yes, sizeof(yes)) == -1) {
                 char errbuf[1024];
-                ERROR ("network plugin: setsockopt (reuseaddr): %s",
+                ERROR ("setsockopt: %s", 
                                 sstrerror (errno, errbuf, sizeof (errbuf)));
 		return (-1);
 	}
 
 	DEBUG ("fd = %i; calling `bind'", fd);
 
@@ -1865,23 +1849,23 @@
 #endif
 
 			if (setsockopt (fd, IPPROTO_IP, IP_MULTICAST_LOOP,
 						&loop, sizeof (loop)) == -1)
 			{
 				char errbuf[1024];
-				ERROR ("network plugin: setsockopt (multicast-loop): %s",
+				ERROR ("setsockopt: %s",
 						sstrerror (errno, errbuf,
 							sizeof (errbuf)));
 				return (-1);
 			}
 
 			if (setsockopt (fd, IPPROTO_IP, IP_ADD_MEMBERSHIP,
 						&mreq, sizeof (mreq)) == -1)
 			{
 				char errbuf[1024];
-				ERROR ("network plugin: setsockopt (add-membership): %s",
+				ERROR ("setsockopt: %s",
 						sstrerror (errno, errbuf,
 							sizeof (errbuf)));
 				return (-1);
 			}
 
 			return (0);
@@ -1913,23 +1897,23 @@
 			mreq.ipv6mr_interface = interface_idx;
 
 			if (setsockopt (fd, IPPROTO_IPV6, IPV6_MULTICAST_LOOP,
 						&loop, sizeof (loop)) == -1)
 			{
 				char errbuf[1024];
-				ERROR ("network plugin: setsockopt (ipv6-multicast-loop): %s",
+				ERROR ("setsockopt: %s",
 						sstrerror (errno, errbuf,
 							sizeof (errbuf)));
 				return (-1);
 			}
 
 			if (setsockopt (fd, IPPROTO_IPV6, IPV6_ADD_MEMBERSHIP,
 						&mreq, sizeof (mreq)) == -1)
 			{
 				char errbuf[1024];
-				ERROR ("network plugin: setsockopt (ipv6-add-membership): %s",
+				ERROR ("setsockopt: %s",
 						sstrerror (errno, errbuf,
 							sizeof (errbuf)));
 				return (-1);
 			}
 
 			return (0);
@@ -1951,13 +1935,13 @@
 
 		if (setsockopt (fd, SOL_SOCKET, SO_BINDTODEVICE,
 					interface_name,
 					sizeof(interface_name)) == -1 )
 		{
 			char errbuf[1024];
-			ERROR ("network plugin: setsockopt (bind-if): %s",
+			ERROR ("setsockopt: %s",
 					sstrerror (errno, errbuf, sizeof (errbuf)));
 			return (-1);
 		}
 	}
 #endif /* HAVE_IF_INDEXTONAME && SO_BINDTODEVICE */
 
@@ -2726,13 +2710,13 @@
 		if (write_part_string (&buffer, &buffer_size, TYPE_TYPE_INSTANCE,
 					vl->type_instance,
 					strlen (vl->type_instance)) != 0)
 			return (-1);
 		sstrncpy (vl_def->type_instance, vl->type_instance, sizeof (vl_def->type_instance));
 	}
-
+	
 	if (write_part_values (&buffer, &buffer_size, ds, vl) != 0)
 		return (-1);
 
 	return (buffer - buffer_orig);
 } /* }}} int add_to_buffer */
 
@@ -3363,23 +3347,15 @@
 	 * nothing more to do (for now, that is). */
 	if (have_init)
 		return (0);
 	have_init = 1;
 
 #if HAVE_LIBGCRYPT
-    /* http://lists.gnupg.org/pipermail/gcrypt-devel/2003-August/000458.html
-     * Because you can't know in a library whether another library has
-     * already initialized the library
-     */
-    if (!gcry_control (GCRYCTL_ANY_INITIALIZATION_P))
-    {
-        gcry_check_version(NULL); /* before calling any other functions */
         gcry_control (GCRYCTL_SET_THREAD_CBS, &gcry_threads_pthread);
         gcry_control (GCRYCTL_INIT_SECMEM, 32768, 0);
         gcry_control (GCRYCTL_INITIALIZATION_FINISHED, 0);
-    }
 #endif
 
 	if (network_config_stats != 0)
 		plugin_register_read ("network", network_stats_read);
 
 	plugin_register_shutdown ("network", network_shutdown);
@@ -3447,13 +3423,13 @@
 		}
 	}
 
 	return (0);
 } /* int network_init */
 
-/*
+/* 
  * The flush option of the network plugin cannot flush individual identifiers.
  * All the values are added to a buffer and sent when the buffer is full, the
  * requested value may or may not be in there, it's not worth finding out. We
  * just send the buffer if `flush'  is called - if the requested value was in
  * there, good. If not, well, then there is nothing to flush.. -octo
  */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/nfs.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/nfs.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/nfs.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/nfs.c	2012-04-02 16:04:58.000000000 +0800
@@ -15,20 +15,21 @@
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
  *   Jason Pepas <cell at ices.utexas.edu>
  *   Florian octo Forster <octo at verplant.org>
+ *   Cosmin Ioiart <cioiart at gmail.com>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 
-#if !KERNEL_LINUX
-# error "No applicable input method."
+#if HAVE_KSTAT_H
+#include <kstat.h>
 #endif
 
 /*
 see /proc/net/rpc/nfs
 see http://www.missioncriticallinux.com/orph/NFS-Statistics
 
@@ -89,16 +90,15 @@
 	"rename",
 	"link",
 	"symlink",
 	"mkdir",
 	"rmdir",
 	"readdir",
-	"fsstat",
-	NULL
+	"fsstat"
 };
-static int nfs2_procedures_names_num = 18;
+static size_t nfs2_procedures_names_num = STATIC_ARRAY_SIZE (nfs2_procedures_names);
 
 static const char *nfs3_procedures_names[] =
 {
 	"null",
 	"getattr",
 	"setattr",
@@ -117,44 +117,95 @@
 	"link",
 	"readdir",
 	"readdirplus",
 	"fsstat",
 	"fsinfo",
 	"pathconf",
+	"commit"
+};
+static size_t nfs3_procedures_names_num = STATIC_ARRAY_SIZE (nfs3_procedures_names);
+
+#if HAVE_LIBKSTAT
+static const char *nfs4_procedures_names[] =
+{
+	"null",
+	"compound",
+	"reserved",
+	"access",
+	"close",
 	"commit",
-	NULL
+	"create",
+	"delegpurge",
+	"delegreturn",
+	"getattr",
+	"getfh",
+	"link",
+	"lock",
+	"lockt",
+	"locku",
+	"lookup",
+	"lookupp",
+	"nverify",
+	"open",
+	"openattr",
+	"open_confirm",
+	"open_downgrade",
+	"putfh",
+	"putpubfh",
+	"putrootfh",
+	"read",
+	"readdir",
+	"readlink",
+	"remove",
+	"rename",
+	"renew",
+	"restorefh",
+	"savefh",
+	"secinfo",
+	"setattr",
+	"setclientid",
+	"setclientid_confirm",
+	"verify",
+	"write"
 };
-static int nfs3_procedures_names_num = 22;
+static size_t nfs4_procedures_names_num = STATIC_ARRAY_SIZE (nfs4_procedures_names);
+#endif
 
-#if HAVE_LIBKSTAT && 0
+#if HAVE_LIBKSTAT
 extern kstat_ctl_t *kc;
 static kstat_t *nfs2_ksp_client;
 static kstat_t *nfs2_ksp_server;
 static kstat_t *nfs3_ksp_client;
 static kstat_t *nfs3_ksp_server;
 static kstat_t *nfs4_ksp_client;
 static kstat_t *nfs4_ksp_server;
 #endif
 
 /* Possibly TODO: NFSv4 statistics */
 
-#if 0
+#if KERNEL_LINUX
+static int nfs_init (void)
+{
+	return (0);
+}
+/* #endif KERNEL_LINUX */
+
+#elif HAVE_LIBKSTAT
 static int nfs_init (void)
 {
-#if HAVE_LIBKSTAT && 0
-	kstat_t *ksp_chain;
+	kstat_t *ksp_chain = NULL;
 
 	nfs2_ksp_client = NULL;
 	nfs2_ksp_server = NULL;
 	nfs3_ksp_client = NULL;
 	nfs3_ksp_server = NULL;
 	nfs4_ksp_client = NULL;
 	nfs4_ksp_server = NULL;
-	
+
 	if (kc == NULL)
-		return;
+		return (-1);
 
 	for (ksp_chain = kc->kc_chain; ksp_chain != NULL;
 			ksp_chain = ksp_chain->ks_next)
 	{
 		if (strncmp (ksp_chain->ks_module, "nfs", 3) != 0)
 			continue;
@@ -168,195 +219,169 @@
 			nfs2_ksp_client = ksp_chain;
 		else if (strncmp (ksp_chain->ks_name, "rfsreqcnt_v3", 12) == 0)
 			nfs3_ksp_client = ksp_chain;
 		else if (strncmp (ksp_chain->ks_name, "rfsreqcnt_v4", 12) == 0)
 			nfs4_ksp_client = ksp_chain;
 	}
-#endif
 
 	return (0);
 } /* int nfs_init */
 #endif
 
-#define BUFSIZE 1024
 static void nfs_procedures_submit (const char *plugin_instance,
-	       	unsigned long long *val, const char **names, int len)
+		const char **type_instances,
+		value_t *values, size_t values_num)
 {
-	value_t values[1];
 	value_list_t vl = VALUE_LIST_INIT;
-	int i;
+	size_t i;
 
-	vl.values = values;
 	vl.values_len = 1;
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "nfs", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, plugin_instance,
 		       	sizeof (vl.plugin_instance));
 	sstrncpy (vl.type, "nfs_procedure", sizeof (vl.type));
 
-	for (i = 0; i < len; i++)
+	for (i = 0; i < values_num; i++)
 	{
-		values[0].derive = val[i];
-		sstrncpy (vl.type_instance, names[i],
+		vl.values = values + i;
+		sstrncpy (vl.type_instance, type_instances[i],
 				sizeof (vl.type_instance));
-		DEBUG ("%s-%s/nfs_procedure-%s = %llu",
-				vl.plugin, vl.plugin_instance,
-				vl.type_instance, val[i]);
-		plugin_dispatch_values (&vl);
+		plugin_dispatch_values_secure (&vl);
 	}
 } /* void nfs_procedures_submit */
 
-static void nfs_read_stats_file (FILE *fh, char *inst)
+#if KERNEL_LINUX
+static int nfs_submit_fields (int nfs_version, const char *instance,
+		char **fields, size_t fields_num,
+		const char **proc_names, size_t proc_names_num)
 {
-	char buffer[BUFSIZE];
-
 	char plugin_instance[DATA_MAX_NAME_LEN];
+	value_t values[fields_num];
+	size_t i;
+
+	if (fields_num != proc_names_num)
+	{
+		WARNING ("nfs plugin: Wrong number of fields for "
+				"NFSv%i %s statistics. Expected %zu, got %zu.",
+				nfs_version, instance,
+				proc_names_num, fields_num);
+		return (EINVAL);
+	}
+
+	ssnprintf (plugin_instance, sizeof (plugin_instance), "v%i%s",
+			nfs_version, instance);
+
+	for (i = 0; i < proc_names_num; i++)
+		(void) parse_value (fields[i], &values[i], DS_TYPE_DERIVE);
+
+	nfs_procedures_submit (plugin_instance, proc_names, values,
+			proc_names_num);
+
+	return (0);
+}
+
+static void nfs_read_linux (FILE *fh, char *inst)
+{
+	char buffer[1024];
 
 	char *fields[48];
-	int numfields = 0;
+	int fields_num = 0;
 
 	if (fh == NULL)
 		return;
 
-	while (fgets (buffer, BUFSIZE, fh) != NULL)
+	while (fgets (buffer, sizeof (buffer), fh) != NULL)
 	{
-		numfields = strsplit (buffer, fields, 48);
+		fields_num = strsplit (buffer,
+				fields, STATIC_ARRAY_SIZE (fields));
 
-		if (((numfields - 2) != nfs2_procedures_names_num)
-				&& ((numfields - 2)
-				       	!= nfs3_procedures_names_num))
+		if (fields_num < 3)
 			continue;
 
 		if (strcmp (fields[0], "proc2") == 0)
 		{
-			int i;
-			unsigned long long *values;
-
-			if ((numfields - 2) != nfs2_procedures_names_num)
-			{
-				WARNING ("nfs plugin: Wrong "
-						"number of fields (= %i) "
-						"for NFSv2 statistics.",
-					       	numfields - 2);
-				continue;
-			}
-
-			ssnprintf (plugin_instance, sizeof (plugin_instance),
-					"v2%s", inst);
-
-			values = (unsigned long long *) malloc (nfs2_procedures_names_num * sizeof (unsigned long long));
-			if (values == NULL)
-			{
-				char errbuf[1024];
-				ERROR ("nfs plugin: malloc "
-						"failed: %s",
-						sstrerror (errno, errbuf, sizeof (errbuf)));
-				continue;
-			}
-
-			for (i = 0; i < nfs2_procedures_names_num; i++)
-				values[i] = atoll (fields[i + 2]);
-
-			nfs_procedures_submit (plugin_instance, values,
+			nfs_submit_fields (/* version = */ 2, inst,
+					fields + 2, (size_t) (fields_num - 2),
 					nfs2_procedures_names,
 					nfs2_procedures_names_num);
-
-			free (values);
 		}
 		else if (strncmp (fields[0], "proc3", 5) == 0)
 		{
-			int i;
-			unsigned long long *values;
-
-			if ((numfields - 2) != nfs3_procedures_names_num)
-			{
-				WARNING ("nfs plugin: Wrong "
-						"number of fields (= %i) "
-						"for NFSv3 statistics.",
-					       	numfields - 2);
-				continue;
-			}
-
-			ssnprintf (plugin_instance, sizeof (plugin_instance),
-					"v3%s", inst);
-
-			values = (unsigned long long *) malloc (nfs3_procedures_names_num * sizeof (unsigned long long));
-			if (values == NULL)
-			{
-				char errbuf[1024];
-				ERROR ("nfs plugin: malloc "
-						"failed: %s",
-						sstrerror (errno, errbuf, sizeof (errbuf)));
-				continue;
-			}
-
-			for (i = 0; i < nfs3_procedures_names_num; i++)
-				values[i] = atoll (fields[i + 2]);
-
-			nfs_procedures_submit (plugin_instance, values,
+			nfs_submit_fields (/* version = */ 3, inst,
+					fields + 2, (size_t) (fields_num - 2),
 					nfs3_procedures_names,
 					nfs3_procedures_names_num);
-
-			free (values);
 		}
-	} /* while (fgets (buffer, BUFSIZE, fh) != NULL) */
-} /* void nfs_read_stats_file */
-#undef BUFSIZE
-
-#if HAVE_LIBKSTAT && 0
-static void nfs2_read_kstat (kstat_t *ksp, char *inst)
-{
-	unsigned long long values[18];
-
-	values[0] = get_kstat_value (ksp, "null");
-	values[1] = get_kstat_value (ksp, "getattr");
-	values[2] = get_kstat_value (ksp, "setattr");
-	values[3] = get_kstat_value (ksp, "root");
-	values[4] = get_kstat_value (ksp, "lookup");
-	values[5] = get_kstat_value (ksp, "readlink");
-	values[6] = get_kstat_value (ksp, "read");
-	values[7] = get_kstat_value (ksp, "wrcache");
-	values[8] = get_kstat_value (ksp, "write");
-	values[9] = get_kstat_value (ksp, "create");
-	values[10] = get_kstat_value (ksp, "remove");
-	values[11] = get_kstat_value (ksp, "rename");
-	values[12] = get_kstat_value (ksp, "link");
-	values[13] = get_kstat_value (ksp, "symlink");
-	values[14] = get_kstat_value (ksp, "mkdir");
-	values[15] = get_kstat_value (ksp, "rmdir");
-	values[16] = get_kstat_value (ksp, "readdir");
-	values[17] = get_kstat_value (ksp, "statfs");
+	} /* while (fgets) */
+} /* void nfs_read_linux */
+#endif /* KERNEL_LINUX */
+
+#if HAVE_LIBKSTAT
+static int nfs_read_kstat (kstat_t *ksp, int nfs_version, char *inst,
+		const char **proc_names, size_t proc_names_num)
+{
+	char plugin_instance[DATA_MAX_NAME_LEN];
+	value_t values[proc_names_num];
+	size_t i;
+
+	if (ksp == NULL)
+		return (EINVAL);
+
+	ssnprintf (plugin_instance, sizeof (plugin_instance), "v%i%s",
+			nfs_version, inst);
 
-	nfs2_procedures_submit (values, inst);
+	kstat_read(kc, ksp, NULL);
+	for (i = 0; i < proc_names_num; i++)
+		values[i].counter = (derive_t) get_kstat_value (ksp, proc_names[i]);
+
+	nfs_procedures_submit (plugin_instance, proc_names, values,
+			proc_names_num);
 }
 #endif
 
+#if KERNEL_LINUX
 static int nfs_read (void)
 {
 	FILE *fh;
 
 	if ((fh = fopen ("/proc/net/rpc/nfs", "r")) != NULL)
 	{
-		nfs_read_stats_file (fh, "client");
+		nfs_read_linux (fh, "client");
 		fclose (fh);
 	}
 
 	if ((fh = fopen ("/proc/net/rpc/nfsd", "r")) != NULL)
 	{
-		nfs_read_stats_file (fh, "server");
+		nfs_read_linux (fh, "server");
 		fclose (fh);
 	}
 
-#if HAVE_LIBKSTAT && 0
-	if (nfs2_ksp_client != NULL)
-		nfs2_read_kstat (nfs2_ksp_client, "client");
-	if (nfs2_ksp_server != NULL)
-		nfs2_read_kstat (nfs2_ksp_server, "server");
-#endif /* defined(HAVE_LIBKSTAT) */
+	return (0);
+}
+/* #endif KERNEL_LINUX */
+
+#elif HAVE_LIBKSTAT
+static int nfs_read (void)
+{
+	nfs_read_kstat (nfs2_ksp_client, /* version = */ 2, "client",
+			nfs2_procedures_names, nfs2_procedures_names_num);
+	nfs_read_kstat (nfs2_ksp_server, /* version = */ 2, "server",
+			nfs2_procedures_names, nfs2_procedures_names_num);
+	nfs_read_kstat (nfs3_ksp_client, /* version = */ 3, "client",
+			nfs3_procedures_names, nfs3_procedures_names_num);
+	nfs_read_kstat (nfs3_ksp_server, /* version = */ 3, "server",
+			nfs3_procedures_names, nfs3_procedures_names_num);
+	nfs_read_kstat (nfs4_ksp_client, /* version = */ 4, "client",
+			nfs4_procedures_names, nfs4_procedures_names_num);
+	nfs_read_kstat (nfs4_ksp_server, /* version = */ 4, "server",
+			nfs4_procedures_names, nfs4_procedures_names_num);
 
 	return (0);
 }
+#endif /* HAVE_LIBKSTAT */
 
 void module_register (void)
 {
+	plugin_register_init ("nfs", nfs_init);
 	plugin_register_read ("nfs", nfs_read);
 } /* void module_register */
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src: numa.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/oracle.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/oracle.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/oracle.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/oracle.c	2012-04-02 16:04:58.000000000 +0800
@@ -83,25 +83,19 @@
 OCIError *oci_error = NULL;
 
 /*
  * Functions
  */
 static void o_report_error (const char *where, /* {{{ */
-    const char *db_name, const char *query_name,
     const char *what, OCIError *eh)
 {
   char buffer[2048];
   sb4 error_code;
   int status;
   unsigned int record_number;
 
-  if (db_name == NULL)
-    db_name = "(none)";
-  if (query_name == NULL)
-    query_name = "(none)";
-
   /* An operation may cause / return multiple errors. Loop until we have
    * handled all errors available (with a fail-save limit of 16). */
   for (record_number = 1; record_number <= 16; record_number++)
   {
     memset (buffer, 0, sizeof (buffer));
     error_code = -1;
@@ -125,20 +119,18 @@
       while ((buffer_length > 0) && (buffer[buffer_length - 1] < 32))
       {
         buffer_length--;
         buffer[buffer_length] = 0;
       }
 
-      ERROR ("oracle plugin: %s (db = %s, query = %s): %s failed: %s",
-          where, db_name, query_name, what, buffer);
+      ERROR ("oracle plugin: %s: %s failed: %s", where, what, buffer);
     }
     else
     {
-      ERROR ("oracle plugin: %s (db = %s, query = %s): %s failed. "
-          "Additionally, OCIErrorGet failed with status %i.",
-          where, db_name, query_name, what, status);
+      ERROR ("oracle plugin: %s: %s failed. Additionally, OCIErrorGet failed with status %i.",
+          where, what, status);
       return;
     }
   }
 } /* }}} void o_report_error */
 
 static void o_database_free (o_database_t *db) /* {{{ */
@@ -432,26 +424,24 @@
     assert (statement != NULL);
 
     status = OCIHandleAlloc (oci_env, (void *) &oci_statement,
         OCI_HTYPE_STMT, /* user_data_size = */ 0, /* user_data = */ NULL);
     if (status != OCI_SUCCESS)
     {
-      o_report_error ("o_read_database_query", db->name,
-          udb_query_get_name (q), "OCIHandleAlloc", oci_error);
+      o_report_error ("o_read_database_query", "OCIHandleAlloc", oci_error);
       oci_statement = NULL;
       return (-1);
     }
 
     status = OCIStmtPrepare (oci_statement, oci_error,
         (text *) statement, (ub4) strlen (statement),
         /* language = */ OCI_NTV_SYNTAX,
         /* mode     = */ OCI_DEFAULT);
     if (status != OCI_SUCCESS)
     {
-      o_report_error ("o_read_database_query", db->name,
-          udb_query_get_name (q), "OCIStmtPrepare", oci_error);
+      o_report_error ("o_read_database_query", "OCIStmtPrepare", oci_error);
       OCIHandleFree (oci_statement, OCI_HTYPE_STMT);
       oci_statement = NULL;
       return (-1);
     }
     udb_query_set_user_data (q, oci_statement);
 
@@ -469,28 +459,29 @@
       /* iters = */ 0,
       /* rowoff = */ 0,
       /* snap_in = */ NULL, /* snap_out = */ NULL,
       /* mode = */ OCI_DEFAULT);
   if (status != OCI_SUCCESS)
   {
-    o_report_error ("o_read_database_query", db->name, udb_query_get_name (q),
-        "OCIStmtExecute", oci_error);
+    DEBUG ("oracle plugin: o_read_database_query: status = %i (%#x)", status, status);
+    o_report_error ("o_read_database_query", "OCIStmtExecute", oci_error);
+    ERROR ("oracle plugin: o_read_database_query: "
+        "Failing statement was: %s", udb_query_get_statement (q));
     return (-1);
   } /* }}} */
 
   /* Acquire the number of columns returned. */
   do /* {{{ */
   {
     ub4 param_counter = 0;
     status = OCIAttrGet (oci_statement, OCI_HTYPE_STMT, /* {{{ */
         &param_counter, /* size pointer = */ NULL, 
         OCI_ATTR_PARAM_COUNT, oci_error);
     if (status != OCI_SUCCESS)
     {
-      o_report_error ("o_read_database_query", db->name,
-          udb_query_get_name (q), "OCIAttrGet", oci_error);
+      o_report_error ("o_read_database_query", "OCIAttrGet", oci_error);
       return (-1);
     } /* }}} */
 
     column_num = (size_t) param_counter;
   } while (0); /* }}} */
 
@@ -562,29 +553,27 @@
 
     status = OCIParamGet (oci_statement, OCI_HTYPE_STMT, oci_error,
         (void *) &oci_param, (ub4) (i + 1));
     if (status != OCI_SUCCESS)
     {
       /* This is probably alright */
-      DEBUG ("oracle plugin: o_read_database_query: status = %#x (= %i);",
-          status, status);
-      o_report_error ("o_read_database_query", db->name,
-          udb_query_get_name (q), "OCIParamGet", oci_error);
+      DEBUG ("oracle plugin: o_read_database_query: status = %#x (= %i);", status, status);
+      o_report_error ("o_read_database_query", "OCIParamGet", oci_error);
       status = OCI_SUCCESS;
       break;
     }
 
     column_name = NULL;
     column_name_length = 0;
     status = OCIAttrGet (oci_param, OCI_DTYPE_PARAM,
         &column_name, &column_name_length, OCI_ATTR_NAME, oci_error);
     if (status != OCI_SUCCESS)
     {
       OCIDescriptorFree (oci_param, OCI_DTYPE_PARAM);
-      o_report_error ("o_read_database_query", db->name,
-          udb_query_get_name (q), "OCIAttrGet (OCI_ATTR_NAME)", oci_error);
+      o_report_error ("o_read_database_query", "OCIAttrGet (OCI_ATTR_NAME)",
+          oci_error);
       continue;
     }
 
     OCIDescriptorFree (oci_param, OCI_DTYPE_PARAM);
     oci_param = NULL;
 
@@ -603,14 +592,13 @@
     status = OCIDefineByPos (oci_statement,
         &oci_defines[i], oci_error, (ub4) (i + 1),
         column_values[i], DATA_MAX_NAME_LEN, SQLT_STR,
         NULL, NULL, NULL, OCI_DEFAULT);
     if (status != OCI_SUCCESS)
     {
-      o_report_error ("o_read_database_query", db->name,
-          udb_query_get_name (q), "OCIDefineByPos", oci_error);
+      o_report_error ("o_read_database_query", "OCIDefineByPos", oci_error);
       continue;
     }
   } /* for (j = 1; j <= param_counter; j++) */
   /* }}} End of the ``define'' stuff. */
 
   status = udb_query_prepare_result (q, prep_area, hostname_g,
@@ -635,14 +623,13 @@
     {
       status = OCI_SUCCESS;
       break;
     }
     else if ((status != OCI_SUCCESS) && (status != OCI_SUCCESS_WITH_INFO))
     {
-      o_report_error ("o_read_database_query", db->name,
-          udb_query_get_name (q), "OCIStmtFetch2", oci_error);
+      o_report_error ("o_read_database_query", "OCIStmtFetch2", oci_error);
       break;
     }
 
     status = udb_query_handle_result (q, prep_area, column_values);
     if (status != 0)
     {
@@ -673,14 +660,13 @@
     server_handle = NULL;
     status = OCIAttrGet ((void *) db->oci_service_context, OCI_HTYPE_SVCCTX, 
         (void *) &server_handle, /* size pointer = */ NULL,
         OCI_ATTR_SERVER, oci_error);
     if (status != OCI_SUCCESS)
     {
-      o_report_error ("o_read_database", db->name, NULL, "OCIAttrGet",
-          oci_error);
+      o_report_error ("o_read_database", "OCIAttrGet", oci_error);
       return (-1);
     }
 
     if (server_handle == NULL)
     {
       connection_status = OCI_SERVER_NOT_CONNECTED;
@@ -690,14 +676,13 @@
       connection_status = 0;
       status = OCIAttrGet ((void *) server_handle, OCI_HTYPE_SERVER,
           (void *) &connection_status, /* size pointer = */ NULL,
           OCI_ATTR_SERVER_STATUS, oci_error);
       if (status != OCI_SUCCESS)
       {
-        o_report_error ("o_read_database", db->name, NULL, "OCIAttrGet",
-            oci_error);
+        o_report_error ("o_read_database", "OCIAttrGet", oci_error);
         return (-1);
       }
     }
 
     if (connection_status != OCI_SERVER_NORMAL)
     {
@@ -714,17 +699,13 @@
         &db->oci_service_context,
         (OraText *) db->username, (ub4) strlen (db->username),
         (OraText *) db->password, (ub4) strlen (db->password),
         (OraText *) db->connect_id, (ub4) strlen (db->connect_id));
     if ((status != OCI_SUCCESS) && (status != OCI_SUCCESS_WITH_INFO))
     {
-      char errfunc[256];
-
-      ssnprintf (errfunc, sizeof (errfunc), "OCILogon(\"%s\")", db->connect_id);
-
-      o_report_error ("o_read_database", db->name, NULL, errfunc, oci_error);
+      o_report_error ("o_read_database", "OCILogon", oci_error);
       DEBUG ("oracle plugin: OCILogon (%s): db->oci_service_context = %p;",
           db->connect_id, db->oci_service_context);
       db->oci_service_context = NULL;
       return (-1);
     }
     else if (status == OCI_SUCCESS_WITH_INFO)
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src: owniptc
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/pinba.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/pinba.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/pinba.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/pinba.c	2012-04-02 16:04:58.000000000 +0800
@@ -614,13 +614,13 @@
   {
     oconfig_item_t *child = ci->children + i;
 
     if (strcasecmp ("Address", child->key) == 0)
       cf_util_get_string (child, &conf_node);
     else if (strcasecmp ("Port", child->key) == 0)
-      cf_util_get_string (child, &conf_service);
+      cf_util_get_service (child, &conf_service);
     else if (strcasecmp ("View", child->key) == 0)
       pinba_config_view (child);
     else
       WARNING ("pinba plugin: Unknown config option: %s", child->key);
   }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/ping.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/ping.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/ping.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/ping.c	2012-04-02 16:04:58.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/ping.c
- * Copyright (C) 2005-2012  Florian octo Forster
+ * Copyright (C) 2005-2009  Florian octo Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -13,20 +13,19 @@
  *
  * You should have received a copy of the GNU General Public License along
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
- *   Florian octo Forster <octo at collectd.org>
+ *   Florian octo Forster <octo at verplant.org>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
-#include "utils_complain.h"
 
 #include <pthread.h>
 #include <netinet/in.h>
 #if HAVE_NETDB_H
 # include <netdb.h> /* NI_MAXHOST */
 #endif
@@ -140,117 +139,24 @@
     ts_dest->tv_nsec = 1000 * tv_end->tv_usec;
   }
 
   time_normalize (ts_dest);
 } /* }}} void time_calc */
 
-static int ping_dispatch_all (pingobj_t *pingobj) /* {{{ */
-{
-  pingobj_iter_t *iter;
-  hostlist_t *hl;
-  int status;
-
-  for (iter = ping_iterator_get (pingobj);
-      iter != NULL;
-      iter = ping_iterator_next (iter))
-  { /* {{{ */
-    char userhost[NI_MAXHOST];
-    double latency;
-    size_t param_size;
-
-    param_size = sizeof (userhost);
-    status = ping_iterator_get_info (iter,
-#ifdef PING_INFO_USERNAME
-        PING_INFO_USERNAME,
-#else
-        PING_INFO_HOSTNAME,
-#endif
-        userhost, &param_size);
-    if (status != 0)
-    {
-      WARNING ("ping plugin: ping_iterator_get_info failed: %s",
-          ping_get_error (pingobj));
-      continue;
-    }
-
-    for (hl = hostlist_head; hl != NULL; hl = hl->next)
-      if (strcmp (userhost, hl->host) == 0)
-        break;
-
-    if (hl == NULL)
-    {
-      WARNING ("ping plugin: Cannot find host %s.", userhost);
-      continue;
-    }
-
-    param_size = sizeof (latency);
-    status = ping_iterator_get_info (iter, PING_INFO_LATENCY,
-        (void *) &latency, &param_size);
-    if (status != 0)
-    {
-      WARNING ("ping plugin: ping_iterator_get_info failed: %s",
-          ping_get_error (pingobj));
-      continue;
-    }
-
-    hl->pkg_sent++;
-    if (latency >= 0.0)
-    {
-      hl->pkg_recv++;
-      hl->latency_total += latency;
-      hl->latency_squared += (latency * latency);
-
-      /* reset missed packages counter */
-      hl->pkg_missed = 0;
-    } else
-      hl->pkg_missed++;
-
-    /* if the host did not answer our last N packages, trigger a resolv. */
-    if (ping_max_missed >= 0 && hl->pkg_missed >= ping_max_missed)
-    { /* {{{ */
-      /* we reset the missed package counter here, since we only want to
-       * trigger a resolv every N packages and not every package _AFTER_ N
-       * missed packages */
-      hl->pkg_missed = 0;
-
-      WARNING ("ping plugin: host %s has not answered %d PING requests,"
-          " triggering resolve", hl->host, ping_max_missed);
-
-      /* we trigger the resolv simply be removeing and adding the host to our
-       * ping object */
-      status = ping_host_remove (pingobj, hl->host);
-      if (status != 0)
-      {
-        WARNING ("ping plugin: ping_host_remove (%s) failed.", hl->host);
-      }
-      else
-      {
-        status = ping_host_add (pingobj, hl->host);
-        if (status != 0)
-          ERROR ("ping plugin: ping_host_add (%s) failed.", hl->host);
-      }
-    } /* }}} ping_max_missed */
-  } /* }}} for (iter) */
-
-  return (0);
-} /* }}} int ping_dispatch_all */
-
 static void *ping_thread (void *arg) /* {{{ */
 {
   static pingobj_t *pingobj = NULL;
 
   struct timeval  tv_begin;
   struct timeval  tv_end;
   struct timespec ts_wait;
   struct timespec ts_int;
 
   hostlist_t *hl;
   int count;
 
-  c_complain_t complaint = C_COMPLAIN_INIT_STATIC;
-
   pthread_mutex_lock (&ping_lock);
 
   pingobj = ping_construct ();
   if (pingobj == NULL)
   {
     ERROR ("ping plugin: ping_construct failed.");
@@ -304,14 +210,14 @@
     ts_int.tv_sec  = (time_t) temp_sec;
     ts_int.tv_nsec = (long) (temp_nsec * 1000000000L);
   }
 
   while (ping_thread_loop > 0)
   {
+    pingobj_iter_t *iter;
     int status;
-    _Bool send_successful = 0;
 
     if (gettimeofday (&tv_begin, NULL) < 0)
     {
       char errbuf[1024];
       ERROR ("ping plugin: gettimeofday failed: %s",
           sstrerror (errno, errbuf, sizeof (errbuf)));
@@ -321,28 +227,104 @@
 
     pthread_mutex_unlock (&ping_lock);
 
     status = ping_send (pingobj);
     if (status < 0)
     {
-      c_complain (LOG_ERR, &complaint, "ping plugin: ping_send failed: %s",
-          ping_get_error (pingobj));
-    }
-    else
-    {
-      c_release (LOG_NOTICE, &complaint, "ping plugin: ping_send succeeded.");
-      send_successful = 1;
+      ERROR ("ping plugin: ping_send failed: %s", ping_get_error (pingobj));
+      pthread_mutex_lock (&ping_lock);
+      ping_thread_error = 1;
+      break;
     }
 
     pthread_mutex_lock (&ping_lock);
 
     if (ping_thread_loop <= 0)
       break;
 
-    if (send_successful)
-      (void) ping_dispatch_all (pingobj);
+    for (iter = ping_iterator_get (pingobj);
+        iter != NULL;
+        iter = ping_iterator_next (iter))
+    { /* {{{ */
+      char userhost[NI_MAXHOST];
+      double latency;
+      size_t param_size;
+
+      param_size = sizeof (userhost);
+      status = ping_iterator_get_info (iter,
+#ifdef PING_INFO_USERNAME
+          PING_INFO_USERNAME,
+#else
+          PING_INFO_HOSTNAME,
+#endif
+          userhost, &param_size);
+      if (status != 0)
+      {
+        WARNING ("ping plugin: ping_iterator_get_info failed: %s",
+            ping_get_error (pingobj));
+        continue;
+      }
+
+      for (hl = hostlist_head; hl != NULL; hl = hl->next)
+        if (strcmp (userhost, hl->host) == 0)
+          break;
+
+      if (hl == NULL)
+      {
+        WARNING ("ping plugin: Cannot find host %s.", userhost);
+        continue;
+      }
+
+      param_size = sizeof (latency);
+      status = ping_iterator_get_info (iter, PING_INFO_LATENCY,
+          (void *) &latency, &param_size);
+      if (status != 0)
+      {
+        WARNING ("ping plugin: ping_iterator_get_info failed: %s",
+            ping_get_error (pingobj));
+        continue;
+      }
+
+      hl->pkg_sent++;
+      if (latency >= 0.0)
+      {
+        hl->pkg_recv++;
+        hl->latency_total += latency;
+        hl->latency_squared += (latency * latency);
+
+        /* reset missed packages counter */
+        hl->pkg_missed = 0;
+      } else
+        hl->pkg_missed++;
+
+      /* if the host did not answer our last N packages, trigger a resolv. */
+      if (ping_max_missed >= 0 && hl->pkg_missed >= ping_max_missed)
+      { /* {{{ */
+        /* we reset the missed package counter here, since we only want to
+         * trigger a resolv every N packages and not every package _AFTER_ N
+         * missed packages */
+        hl->pkg_missed = 0;
+
+        WARNING ("ping plugin: host %s has not answered %d PING requests,"
+          " triggering resolve", hl->host, ping_max_missed);
+
+        /* we trigger the resolv simply be removeing and adding the host to our
+         * ping object */
+        status = ping_host_remove (pingobj, hl->host);
+        if (status != 0)
+        {
+          WARNING ("ping plugin: ping_host_remove (%s) failed.", hl->host);
+        }
+        else
+        {
+          status = ping_host_add (pingobj, hl->host);
+          if (status != 0)
+            WARNING ("ping plugin: ping_host_add (%s) failed.", hl->host);
+        }
+      } /* }}} ping_max_missed */
+    } /* }}} for (iter) */
 
     if (gettimeofday (&tv_end, NULL) < 0)
     {
       char errbuf[1024];
       ERROR ("ping plugin: gettimeofday failed: %s",
           sstrerror (errno, errbuf, sizeof (errbuf)));
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/plugin.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/plugin.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/plugin.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/plugin.c	2012-04-02 16:04:58.000000000 +0800
@@ -1703,12 +1703,50 @@
 		(*callback) (level, msg, &cf->cf_udata);
 
 		le = le->next;
 	}
 } /* void plugin_log */
 
+int parse_log_severity (const char *severity)
+{
+	int log_level = -1;
+
+	if ((0 == strcasecmp (severity, "emerg"))
+			|| (0 == strcasecmp (severity, "alert"))
+			|| (0 == strcasecmp (severity, "crit"))
+			|| (0 == strcasecmp (severity, "err")))
+		log_level = LOG_ERR;
+	else if (0 == strcasecmp (severity, "warning"))
+		log_level = LOG_WARNING;
+	else if (0 == strcasecmp (severity, "notice"))
+		log_level = LOG_NOTICE;
+	else if (0 == strcasecmp (severity, "info"))
+		log_level = LOG_INFO;
+#if COLLECT_DEBUG
+	else if (0 == strcasecmp (severity, "debug"))
+		log_level = LOG_DEBUG;
+#endif /* COLLECT_DEBUG */
+
+	return (log_level);
+} /* int parse_log_severity */
+
+int parse_notif_severity (const char *severity)
+{
+	int notif_severity = -1;
+
+	if (strcasecmp (severity, "FAILURE") == 0)
+		notif_severity = NOTIF_FAILURE;
+	else if (strcmp (severity, "OKAY") == 0)
+		notif_severity = NOTIF_OKAY;
+	else if ((strcmp (severity, "WARNING") == 0)
+			|| (strcmp (severity, "WARN") == 0))
+		notif_severity = NOTIF_WARNING;
+
+	return (notif_severity);
+} /* int parse_notif_severity */
+
 const data_set_t *plugin_get_ds (const char *name)
 {
 	data_set_t *ds;
 
 	if (c_avl_get (data_sets, name, (void *) &ds) != 0)
 	{
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/plugin.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/plugin.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/plugin.h	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/plugin.h	2012-04-02 16:04:58.000000000 +0800
@@ -323,12 +323,16 @@
 
 int plugin_dispatch_notification (const notification_t *notif);
 
 void plugin_log (int level, const char *format, ...)
 	__attribute__ ((format(printf,2,3)));
 
+/* These functions return the parsed severity or less than zero on failure. */
+int parse_log_severity (const char *severity);
+int parse_notif_severity (const char *severity);
+
 #define ERROR(...)   plugin_log (LOG_ERR,     __VA_ARGS__)
 #define WARNING(...) plugin_log (LOG_WARNING, __VA_ARGS__)
 #define NOTICE(...)  plugin_log (LOG_NOTICE,  __VA_ARGS__)
 #define INFO(...)    plugin_log (LOG_INFO,    __VA_ARGS__)
 #if COLLECT_DEBUG
 # define DEBUG(...)  plugin_log (LOG_DEBUG,   __VA_ARGS__)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/postgresql.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/postgresql.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/postgresql.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/postgresql.c	2012-04-02 16:04:58.000000000 +0800
@@ -520,25 +520,12 @@
 	queries = NULL;
 	queries_num = 0;
 
 	return 0;
 } /* c_psql_shutdown */
 
-static int config_set_s (char *name, char **var, const oconfig_item_t *ci)
-{
-	if ((0 != ci->children_num) || (1 != ci->values_num)
-			|| (OCONFIG_TYPE_STRING != ci->values[0].type)) {
-		log_err ("%s expects a single string argument.", name);
-		return 1;
-	}
-
-	sfree (*var);
-	*var = sstrdup (ci->values[0].value.string);
-	return 0;
-} /* config_set_s */
-
 static int config_query_param_add (udb_query_t *q, oconfig_item_t *ci)
 {
 	c_psql_user_data_t *data;
 	const char *param_str;
 
 	c_psql_param_t *tmp;
@@ -615,25 +602,25 @@
 		return -1;
 
 	for (i = 0; i < ci->children_num; ++i) {
 		oconfig_item_t *c = ci->children + i;
 
 		if (0 == strcasecmp (c->key, "Host"))
-			config_set_s ("Host", &db->host, c);
+			cf_util_get_string (c, &db->host);
 		else if (0 == strcasecmp (c->key, "Port"))
-			config_set_s ("Port", &db->port, c);
+			cf_util_get_service (c, &db->port);
 		else if (0 == strcasecmp (c->key, "User"))
-			config_set_s ("User", &db->user, c);
+			cf_util_get_string (c, &db->user);
 		else if (0 == strcasecmp (c->key, "Password"))
-			config_set_s ("Password", &db->password, c);
+			cf_util_get_string (c, &db->password);
 		else if (0 == strcasecmp (c->key, "SSLMode"))
-			config_set_s ("SSLMode", &db->sslmode, c);
+			cf_util_get_string (c, &db->sslmode);
 		else if (0 == strcasecmp (c->key, "KRBSrvName"))
-			config_set_s ("KRBSrvName", &db->krbsrvname, c);
+			cf_util_get_string (c, &db->krbsrvname);
 		else if (0 == strcasecmp (c->key, "Service"))
-			config_set_s ("Service", &db->service, c);
+			cf_util_get_string (c, &db->service);
 		else if (0 == strcasecmp (c->key, "Query"))
 			udb_query_pick_from_list (c, queries, queries_num,
 					&db->queries, &db->queries_num);
 		else if (0 == strcasecmp (c->key, "Interval"))
 			cf_util_get_cdtime (c, &db->interval);
 		else
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/processes.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/processes.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/processes.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/processes.c	2012-04-02 16:04:58.000000000 +0800
@@ -197,13 +197,13 @@
 
 #elif KERNEL_LINUX
 static long pagesize_g;
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_LIBKVM_GETPROCS && HAVE_STRUCT_KINFO_PROC_FREEBSD
-/* no global variables */
+static int pagesize;
 /* #endif HAVE_LIBKVM_GETPROCS && HAVE_STRUCT_KINFO_PROC_FREEBSD */
 
 #elif HAVE_PROCINFO_H
 static  struct procentry64 procentry[MAXPROCENTRY];
 static  struct thrdentry64 thrdentry[MAXTHRDENTRY];
 static int pagesize;
@@ -606,13 +606,13 @@
 	pagesize_g = sysconf(_SC_PAGESIZE);
 	DEBUG ("pagesize_g = %li; CONFIG_HZ = %i;",
 			pagesize_g, CONFIG_HZ);
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_LIBKVM_GETPROCS && HAVE_STRUCT_KINFO_PROC_FREEBSD
-/* no initialization */
+	pagesize = getpagesize();
 /* #endif HAVE_LIBKVM_GETPROCS && HAVE_STRUCT_KINFO_PROC_FREEBSD */
 
 #elif HAVE_PROCINFO_H
 	pagesize = getpagesize();
 #endif /* HAVE_PROCINFO_H */
 
@@ -787,13 +787,13 @@
 
 		errno = 0;
 		endptr = NULL;
 		tmp = strtoll (fields[1], &endptr, /* base = */ 10);
 		if ((errno == 0) && (endptr != fields[1]))
 		{
-			if (strncmp (buffer, "VmData", 6) == 0) 
+			if (strncmp (buffer, "VmData", 6) == 0)
 			{
 				data = tmp;
 			}
 			else if (strncmp (buffer, "VmLib", 5) == 0)
 			{
 				lib = tmp;
@@ -1602,16 +1602,14 @@
 	int blocked  = 0;
 	int idle     = 0;
 	int wait     = 0;
 
 	kvm_t *kd;
 	char errbuf[1024];
-	char cmdline[ARG_MAX];
-	char *cmdline_ptr;
   	struct kinfo_proc *procs;          /* array of processes */
-  	char **argv;
+	struct kinfo_proc *proc_ptr = NULL;
   	int count;                         /* returns number of processes */
 	int i;
 
 	procstat_t *ps_ptr;
 	procstat_entry_t pse;
 
@@ -1636,83 +1634,97 @@
 		return (0);
 	}
 
 	/* Iterate through the processes in kinfo_proc */
 	for (i = 0; i < count; i++)
 	{
-		/* retrieve the arguments */
-		cmdline[0] = 0;
-		cmdline_ptr = NULL;
-
-		argv = kvm_getargv (kd, (const struct kinfo_proc *) &(procs[i]), 0);
-		if (argv != NULL)
-		{
-			int status;
-			int argc;
-
-			argc = 0;
-			while (argv[argc] != NULL)
-				argc++;
-
-			status = strjoin (cmdline, sizeof (cmdline),
-					argv, argc, " ");
-
-			if (status < 0)
-			{
-				WARNING ("processes plugin: Command line did "
-						"not fit into buffer.");
-			}
-			else
-			{
-				cmdline_ptr = &cmdline[0];
-			}
-		}
+		/* Create only one process list entry per _process_, i.e.
+		 * filter out threads (duplicate PID entries). */
+		if ((proc_ptr == NULL) || (proc_ptr->ki_pid != procs[i].ki_pid))
+		{
+			char cmdline[ARG_MAX] = "";
+			_Bool have_cmdline = 0;
+
+			proc_ptr = &(procs[i]);
+			/* Don't probe system processes and processes without arguments */
+			if (((procs[i].ki_flag & P_SYSTEM) == 0)
+					&& (procs[i].ki_args != NULL))
+			{
+				char **argv;
+				int argc;
+				int status;
+
+				/* retrieve the arguments */
+				argv = kvm_getargv (kd, proc_ptr, /* nchr = */ 0);
+				argc = 0;
+				if ((argv != NULL) && (argv[0] != NULL))
+				{
+					while (argv[argc] != NULL)
+						argc++;
 
-		pse.id       = procs[i].ki_pid;
-		pse.age      = 0;
+					status = strjoin (cmdline, sizeof (cmdline), argv, argc, " ");
+					if (status < 0)
+						WARNING ("processes plugin: Command line did not fit into buffer.");
+					else
+						have_cmdline = 1;
+				}
+			} /* if (process has argument list) */
 
-		pse.num_proc = 1;
-		pse.num_lwp  = procs[i].ki_numthreads;
+			pse.id       = procs[i].ki_pid;
+			pse.age      = 0;
 
-		pse.vmem_size = procs[i].ki_size;
-		pse.vmem_rss = procs[i].ki_rssize * getpagesize();
-		pse.vmem_data = procs[i].ki_dsize * getpagesize();
-		pse.vmem_code = procs[i].ki_tsize * getpagesize();
-		pse.stack_size = procs[i].ki_ssize * getpagesize();
-		pse.vmem_minflt = 0;
-		pse.vmem_minflt_counter = procs[i].ki_rusage.ru_minflt;
-		pse.vmem_majflt = 0;
-		pse.vmem_majflt_counter = procs[i].ki_rusage.ru_majflt;
+			pse.num_proc = 1;
+			pse.num_lwp  = procs[i].ki_numthreads;
 
-		pse.cpu_user = 0;
-		pse.cpu_user_counter = procs[i].ki_rusage.ru_utime.tv_sec
-			* 1000
-			+ procs[i].ki_rusage.ru_utime.tv_usec;
-		pse.cpu_system = 0;
-		pse.cpu_system_counter = procs[i].ki_rusage.ru_stime.tv_sec
-			* 1000
-			+ procs[i].ki_rusage.ru_stime.tv_usec;
+			pse.vmem_size = procs[i].ki_size;
+			pse.vmem_rss = procs[i].ki_rssize * pagesize;
+			pse.vmem_data = procs[i].ki_dsize * pagesize;
+			pse.vmem_code = procs[i].ki_tsize * pagesize;
+			pse.stack_size = procs[i].ki_ssize * pagesize;
+			pse.vmem_minflt = 0;
+			pse.vmem_minflt_counter = procs[i].ki_rusage.ru_minflt;
+			pse.vmem_majflt = 0;
+			pse.vmem_majflt_counter = procs[i].ki_rusage.ru_majflt;
+
+			pse.cpu_user = 0;
+			pse.cpu_system = 0;
+			pse.cpu_user_counter = 0;
+			pse.cpu_system_counter = 0;
+			/*
+			 * The u-area might be swapped out, and we can't get
+			 * at it because we have a crashdump and no swap.
+			 * If it's here fill in these fields, otherwise, just
+			 * leave them 0.
+			 */
+			if (procs[i].ki_flag & P_INMEM)
+			{
+				pse.cpu_user_counter = procs[i].ki_rusage.ru_utime.tv_usec
+				       	+ (1000000lu * procs[i].ki_rusage.ru_utime.tv_sec);
+				pse.cpu_system_counter = procs[i].ki_rusage.ru_stime.tv_usec
+					+ (1000000lu * procs[i].ki_rusage.ru_stime.tv_sec);
+			}
+
+			/* no I/O data */
+			pse.io_rchar = -1;
+			pse.io_wchar = -1;
+			pse.io_syscr = -1;
+			pse.io_syscw = -1;
 
-		/* no io data */
-		pse.io_rchar = -1;
-		pse.io_wchar = -1;
-		pse.io_syscr = -1;
-		pse.io_syscw = -1;
+			ps_list_add (procs[i].ki_comm, have_cmdline ? cmdline : NULL, &pse);
+		} /* if ((proc_ptr == NULL) || (proc_ptr->ki_pid != procs[i].ki_pid)) */
 
 		switch (procs[i].ki_stat)
 		{
 			case SSTOP: 	stopped++;	break;
 			case SSLEEP:	sleeping++;	break;
 			case SRUN:	running++;	break;
 			case SIDL:	idle++;		break;
 			case SWAIT:	wait++;		break;
 			case SLOCK:	blocked++;	break;
 			case SZOMB:	zombies++;	break;
 		}
-
-		ps_list_add (procs[i].ki_comm, cmdline_ptr, &pse);
 	}
 
 	kvm_close(kd);
 
 	ps_submit_state ("running",  running);
 	ps_submit_state ("sleeping", sleeping);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/python.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/python.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/python.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/python.c	2012-04-02 16:04:58.000000000 +0800
@@ -279,19 +279,23 @@
 		message = "N/A";
 	Py_BEGIN_ALLOW_THREADS
 	ERROR("Unhandled python exception in %s: %s: %s", context, typename, message);
 	Py_END_ALLOW_THREADS
 	Py_XDECREF(tn);
 	Py_XDECREF(m);
-	if (!cpy_format_exception || !traceback) {
+	if (!cpy_format_exception) {
 		PyErr_Clear();
-		Py_DECREF(type);
+		Py_XDECREF(type);
 		Py_XDECREF(value);
 		Py_XDECREF(traceback);
 		return;
 	}
+	if (!traceback) {
+		PyErr_Clear();
+		return;
+	}
 	list = PyObject_CallFunction(cpy_format_exception, "NNN", type, value, traceback); /* New reference. */
 	if (list)
 		l = PyObject_Length(list);
 	for (i = 0; i < l; ++i) {
 		char *s;
 		PyObject *line;
@@ -306,15 +310,12 @@
 		ERROR("%s", s);
 		Py_END_ALLOW_THREADS
 		free(s);
 	}
 	Py_XDECREF(list);
 	PyErr_Clear();
-	Py_DECREF(type);
-	Py_XDECREF(value);
-	Py_XDECREF(traceback);
 }
 
 static int cpy_read_callback(user_data_t *data) {
 	cpy_callback_t *c = data->data;
 	PyObject *ret;
 
@@ -331,13 +332,13 @@
 	return 0;
 }
 
 static int cpy_write_callback(const data_set_t *ds, const value_list_t *value_list, user_data_t *data) {
 	int i;
 	cpy_callback_t *c = data->data;
-	PyObject *ret, *list, *temp, *dict = NULL;
+	PyObject *ret, *list, *temp, *dict = NULL, *val;
 	Values *v;
 
 	CPY_LOCK_THREADS
 		list = PyList_New(value_list->values_len); /* New reference. */
 		if (list == NULL) {
 			cpy_log_exception("write callback");
@@ -371,13 +372,13 @@
 			if (PyErr_Occurred() != NULL) {
 				cpy_log_exception("value building for write callback");
 				Py_DECREF(list);
 				CPY_RETURN_FROM_THREADS 0;
 			}
 		}
-		dict = PyDict_New();  /* New reference. */
+		dict = PyDict_New();
 		if (value_list->meta) {
 			int i, num;
 			char **table;
 			meta_data_t *meta = value_list->meta;
 
 			num = meta_data_toc(meta, &table);
@@ -390,32 +391,32 @@
 				_Bool b;
 				
 				type = meta_data_type(meta, table[i]);
 				if (type == MD_TYPE_STRING) {
 					if (meta_data_get_string(meta, table[i], &string))
 						continue;
-					temp = cpy_string_to_unicode_or_bytes(string);  /* New reference. */
+					temp = cpy_string_to_unicode_or_bytes(string);
 					free(string);
 					PyDict_SetItemString(dict, table[i], temp);
 					Py_XDECREF(temp);
 				} else if (type == MD_TYPE_SIGNED_INT) {
 					if (meta_data_get_signed_int(meta, table[i], &si))
 						continue;
-					temp = PyObject_CallFunctionObjArgs((void *) &SignedType, PyLong_FromLongLong(si), (void *) 0);  /* New reference. */
+					temp = PyObject_CallFunctionObjArgs((void *) &SignedType, PyLong_FromLongLong(si), (void *) 0);
 					PyDict_SetItemString(dict, table[i], temp);
 					Py_XDECREF(temp);
 				} else if (type == MD_TYPE_UNSIGNED_INT) {
 					if (meta_data_get_unsigned_int(meta, table[i], &ui))
 						continue;
-					temp = PyObject_CallFunctionObjArgs((void *) &UnsignedType, PyLong_FromUnsignedLongLong(ui), (void *) 0);  /* New reference. */
+					temp = PyObject_CallFunctionObjArgs((void *) &UnsignedType, PyLong_FromUnsignedLongLong(ui), (void *) 0);
 					PyDict_SetItemString(dict, table[i], temp);
 					Py_XDECREF(temp);
 				} else if (type == MD_TYPE_DOUBLE) {
 					if (meta_data_get_double(meta, table[i], &d))
 						continue;
-					temp = PyFloat_FromDouble(d);  /* New reference. */
+					temp = PyFloat_FromDouble(d);
 					PyDict_SetItemString(dict, table[i], temp);
 					Py_XDECREF(temp);
 				} else if (type == MD_TYPE_BOOLEAN) {
 					if (meta_data_get_boolean(meta, table[i], &b))
 						continue;
 					if (b)
@@ -424,26 +425,27 @@
 						PyDict_SetItemString(dict, table[i], Py_False);
 				}
 				free(table[i]);
 			}
 			free(table);
 		}
-		v = (Values *) Values_New(); /* New reference. */
+		val = Values_New(); /* New reference. */
+		v = (Values *) val; 
 		sstrncpy(v->data.host, value_list->host, sizeof(v->data.host));
 		sstrncpy(v->data.type, value_list->type, sizeof(v->data.type));
 		sstrncpy(v->data.type_instance, value_list->type_instance, sizeof(v->data.type_instance));
 		sstrncpy(v->data.plugin, value_list->plugin, sizeof(v->data.plugin));
 		sstrncpy(v->data.plugin_instance, value_list->plugin_instance, sizeof(v->data.plugin_instance));
 		v->data.time = CDTIME_T_TO_DOUBLE(value_list->time);
 		v->interval = CDTIME_T_TO_DOUBLE(value_list->interval);
 		Py_CLEAR(v->values);
 		v->values = list;
 		Py_CLEAR(v->meta);
-		v->meta = dict;  /* Steals a reference. */
+		v->meta = dict;
 		ret = PyObject_CallFunctionObjArgs(c->callback, v, c->data, (void *) 0); /* New reference. */
-		Py_XDECREF(v);
+		Py_XDECREF(val);
 		if (ret == NULL) {
 			cpy_log_exception("write callback");
 		} else {
 			Py_DECREF(ret);
 		}
 	CPY_RELEASE_THREADS
@@ -479,17 +481,17 @@
 
 static void cpy_log_callback(int severity, const char *message, user_data_t *data) {
 	cpy_callback_t * c = data->data;
 	PyObject *ret, *text;
 
 	CPY_LOCK_THREADS
-	text = cpy_string_to_unicode_or_bytes(message);  /* New reference. */
+	text = cpy_string_to_unicode_or_bytes(message);
 	if (c->data == NULL)
-		ret = PyObject_CallFunction(c->callback, "iN", severity, text); /* New reference. Steals a reference from "text". */
+		ret = PyObject_CallFunction(c->callback, "iN", severity, text); /* New reference. */
 	else
-		ret = PyObject_CallFunction(c->callback, "iNO", severity, text, c->data); /* New reference. Steals a reference from "text". */
+		ret = PyObject_CallFunction(c->callback, "iNO", severity, text, c->data); /* New reference. */
 
 	if (ret == NULL) {
 		/* FIXME */
 		/* Do we really want to trigger a log callback because a log callback failed?
 		 * Probably not. */
 		PyErr_Print();
@@ -520,19 +522,18 @@
 	CPY_RELEASE_THREADS
 }
 
 static PyObject *cpy_register_generic(cpy_callback_t **list_head, PyObject *args, PyObject *kwds) {
 	char buf[512];
 	cpy_callback_t *c;
-	char *name = NULL;
+	const char *name = NULL;
 	PyObject *callback = NULL, *data = NULL, *mod = NULL;
 	static char *kwlist[] = {"callback", "data", "name", NULL};
 	
 	if (PyArg_ParseTupleAndKeywords(args, kwds, "O|Oet", kwlist, &callback, &data, NULL, &name) == 0) return NULL;
 	if (PyCallable_Check(callback) == 0) {
-		PyMem_Free(name);
 		PyErr_SetString(PyExc_TypeError, "callback needs a be a callable object.");
 		return NULL;
 	}
 	cpy_build_name(buf, sizeof(buf), callback, name);
 
 	Py_INCREF(callback);
@@ -541,27 +542,24 @@
 	c->name = strdup(buf);
 	c->callback = callback;
 	c->data = data;
 	c->next = *list_head;
 	*list_head = c;
 	Py_XDECREF(mod);
-	PyMem_Free(name);
 	return cpy_string_to_unicode_or_bytes(buf);
 }
 
 static PyObject *cpy_flush(cpy_callback_t **list_head, PyObject *args, PyObject *kwds) {
 	int timeout = -1;
-	char *plugin = NULL, *identifier = NULL;
+	const char *plugin = NULL, *identifier = NULL;
 	static char *kwlist[] = {"plugin", "timeout", "identifier", NULL};
 	
 	if (PyArg_ParseTupleAndKeywords(args, kwds, "|etiet", kwlist, NULL, &plugin, &timeout, NULL, &identifier) == 0) return NULL;
 	Py_BEGIN_ALLOW_THREADS
 	plugin_flush(plugin, timeout, identifier);
 	Py_END_ALLOW_THREADS
-	PyMem_Free(plugin);
-	PyMem_Free(identifier);
 	Py_RETURN_NONE;
 }
 
 static PyObject *cpy_register_config(PyObject *self, PyObject *args, PyObject *kwds) {
 	return cpy_register_generic(&cpy_config_callbacks, args, kwds);
 }
@@ -574,24 +572,22 @@
 
 static PyObject *cpy_register_generic_userdata(void *reg, void *handler, PyObject *args, PyObject *kwds) {
 	char buf[512];
 	reg_function_t *register_function = (reg_function_t *) reg;
 	cpy_callback_t *c = NULL;
 	user_data_t *user_data = NULL;
-	char *name = NULL;
+	const char *name = NULL;
 	PyObject *callback = NULL, *data = NULL;
 	static char *kwlist[] = {"callback", "data", "name", NULL};
 	
 	if (PyArg_ParseTupleAndKeywords(args, kwds, "O|Oet", kwlist, &callback, &data, NULL, &name) == 0) return NULL;
 	if (PyCallable_Check(callback) == 0) {
-		PyMem_Free(name);
 		PyErr_SetString(PyExc_TypeError, "callback needs a be a callable object.");
 		return NULL;
 	}
 	cpy_build_name(buf, sizeof(buf), callback, name);
-	PyMem_Free(name);
 	
 	Py_INCREF(callback);
 	Py_XINCREF(data);
 	c = malloc(sizeof(*c));
 	c->name = strdup(buf);
 	c->callback = callback;
@@ -606,25 +602,23 @@
 
 static PyObject *cpy_register_read(PyObject *self, PyObject *args, PyObject *kwds) {
 	char buf[512];
 	cpy_callback_t *c = NULL;
 	user_data_t *user_data = NULL;
 	double interval = 0;
-	char *name = NULL;
+	const char *name = NULL;
 	PyObject *callback = NULL, *data = NULL;
 	struct timespec ts;
 	static char *kwlist[] = {"callback", "interval", "data", "name", NULL};
 	
 	if (PyArg_ParseTupleAndKeywords(args, kwds, "O|dOet", kwlist, &callback, &interval, &data, NULL, &name) == 0) return NULL;
 	if (PyCallable_Check(callback) == 0) {
-		PyMem_Free(name);
 		PyErr_SetString(PyExc_TypeError, "callback needs a be a callable object.");
 		return NULL;
 	}
 	cpy_build_name(buf, sizeof(buf), callback, name);
-	PyMem_Free(name);
 	
 	Py_INCREF(callback);
 	Py_XINCREF(data);
 	c = malloc(sizeof(*c));
 	c->name = strdup(buf);
 	c->callback = callback;
@@ -662,59 +656,54 @@
 
 static PyObject *cpy_register_shutdown(PyObject *self, PyObject *args, PyObject *kwds) {
 	return cpy_register_generic(&cpy_shutdown_callbacks, args, kwds);
 }
 
 static PyObject *cpy_error(PyObject *self, PyObject *args) {
-	char *text;
+	const char *text;
 	if (PyArg_ParseTuple(args, "et", NULL, &text) == 0) return NULL;
 	Py_BEGIN_ALLOW_THREADS
 	plugin_log(LOG_ERR, "%s", text);
 	Py_END_ALLOW_THREADS
-	PyMem_Free(text);
 	Py_RETURN_NONE;
 }
 
 static PyObject *cpy_warning(PyObject *self, PyObject *args) {
-	char *text;
+	const char *text;
 	if (PyArg_ParseTuple(args, "et", NULL, &text) == 0) return NULL;
 	Py_BEGIN_ALLOW_THREADS
 	plugin_log(LOG_WARNING, "%s", text);
 	Py_END_ALLOW_THREADS
-	PyMem_Free(text);
 	Py_RETURN_NONE;
 }
 
 static PyObject *cpy_notice(PyObject *self, PyObject *args) {
-	char *text;
+	const char *text;
 	if (PyArg_ParseTuple(args, "et", NULL, &text) == 0) return NULL;
 	Py_BEGIN_ALLOW_THREADS
 	plugin_log(LOG_NOTICE, "%s", text);
 	Py_END_ALLOW_THREADS
-	PyMem_Free(text);
 	Py_RETURN_NONE;
 }
 
 static PyObject *cpy_info(PyObject *self, PyObject *args) {
-	char *text;
+	const char *text;
 	if (PyArg_ParseTuple(args, "et", NULL, &text) == 0) return NULL;
 	Py_BEGIN_ALLOW_THREADS
 	plugin_log(LOG_INFO, "%s", text);
 	Py_END_ALLOW_THREADS
-	PyMem_Free(text);
 	Py_RETURN_NONE;
 }
 
 static PyObject *cpy_debug(PyObject *self, PyObject *args) {
 #ifdef COLLECT_DEBUG
-	char *text;
+	const char *text;
 	if (PyArg_ParseTuple(args, "et", NULL, &text) == 0) return NULL;
 	Py_BEGIN_ALLOW_THREADS
 	plugin_log(LOG_DEBUG, "%s", text);
 	Py_END_ALLOW_THREADS
-	PyMem_Free(text);
 #endif
 	Py_RETURN_NONE;
 }
 
 static PyObject *cpy_unregister_generic(cpy_callback_t **list_head, PyObject *arg, const char *desc) {
 	char buf[512];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/pyvalues.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/pyvalues.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/pyvalues.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/pyvalues.c	2012-04-02 16:04:58.000000000 +0800
@@ -29,20 +29,12 @@
 
 #include "collectd.h"
 #include "common.h"
 
 #include "cpython.h"
 
-#define FreeAll() do {\
-	PyMem_Free(type);\
-	PyMem_Free(plugin_instance);\
-	PyMem_Free(type_instance);\
-	PyMem_Free(plugin);\
-	PyMem_Free(host);\
-} while(0)
-
 static PyObject *cpy_common_repr(PyObject *s) {
 	PyObject *ret, *tmp;
 	static PyObject *l_type = NULL, *l_type_instance = NULL, *l_plugin = NULL, *l_plugin_instance = NULL;
 	static PyObject *l_host = NULL, *l_time = NULL;
 	PluginData *self = (PluginData *) s;
 	
@@ -148,35 +140,32 @@
 	return (PyObject *) self;
 }
 
 static int PluginData_init(PyObject *s, PyObject *args, PyObject *kwds) {
 	PluginData *self = (PluginData *) s;
 	double time = 0;
-	char *type = NULL, *plugin_instance = NULL, *type_instance = NULL, *plugin = NULL, *host = NULL;
+	const char *type = "", *plugin_instance = "", *type_instance = "", *plugin = "", *host = "";
 	static char *kwlist[] = {"type", "plugin_instance", "type_instance",
 			"plugin", "host", "time", NULL};
 	
 	if (!PyArg_ParseTupleAndKeywords(args, kwds, "|etetetetetd", kwlist, NULL, &type,
 			NULL, &plugin_instance, NULL, &type_instance, NULL, &plugin, NULL, &host, &time))
 		return -1;
 	
-	if (type && plugin_get_ds(type) == NULL) {
+	if (type[0] != 0 && plugin_get_ds(type) == NULL) {
 		PyErr_Format(PyExc_TypeError, "Dataset %s not found", type);
-		FreeAll();
 		return -1;
 	}
 
-	sstrncpy(self->host, host ? host : "", sizeof(self->host));
-	sstrncpy(self->plugin, plugin ? plugin : "", sizeof(self->plugin));
-	sstrncpy(self->plugin_instance, plugin_instance ? plugin_instance : "", sizeof(self->plugin_instance));
-	sstrncpy(self->type, type ? type : "", sizeof(self->type));
-	sstrncpy(self->type_instance, type_instance ? type_instance : "", sizeof(self->type_instance));
+	sstrncpy(self->host, host, sizeof(self->host));
+	sstrncpy(self->plugin, plugin, sizeof(self->plugin));
+	sstrncpy(self->plugin_instance, plugin_instance, sizeof(self->plugin_instance));
+	sstrncpy(self->type, type, sizeof(self->type));
+	sstrncpy(self->type_instance, type_instance, sizeof(self->type_instance));
+	
 	self->time = time;
-
-	FreeAll();
-
 	return 0;
 }
 
 static PyObject *PluginData_repr(PyObject *s) {
 	PyObject *ret;
 	static PyObject *l_closing = NULL;
@@ -361,36 +350,33 @@
 }
 
 static int Values_init(PyObject *s, PyObject *args, PyObject *kwds) {
 	Values *self = (Values *) s;
 	double interval = 0, time = 0;
 	PyObject *values = NULL, *meta = NULL, *tmp;
-	char *type = NULL, *plugin_instance = NULL, *type_instance = NULL, *plugin = NULL, *host = NULL;
+	const char *type = "", *plugin_instance = "", *type_instance = "", *plugin = "", *host = "";
 	static char *kwlist[] = {"type", "values", "plugin_instance", "type_instance",
 			"plugin", "host", "time", "interval", "meta", NULL};
 	
 	if (!PyArg_ParseTupleAndKeywords(args, kwds, "|etOetetetetddO", kwlist,
 			NULL, &type, &values, NULL, &plugin_instance, NULL, &type_instance,
 			NULL, &plugin, NULL, &host, &time, &interval, &meta))
 		return -1;
 	
-	if (type && plugin_get_ds(type) == NULL) {
+	if (type[0] != 0 && plugin_get_ds(type) == NULL) {
 		PyErr_Format(PyExc_TypeError, "Dataset %s not found", type);
-		FreeAll();
 		return -1;
 	}
 
-	sstrncpy(self->data.host, host ? host : "", sizeof(self->data.host));
-	sstrncpy(self->data.plugin, plugin ? plugin : "", sizeof(self->data.plugin));
-	sstrncpy(self->data.plugin_instance, plugin_instance ? plugin_instance : "", sizeof(self->data.plugin_instance));
-	sstrncpy(self->data.type, type ? type : "", sizeof(self->data.type));
-	sstrncpy(self->data.type_instance, type_instance ? type_instance : "", sizeof(self->data.type_instance));
+	sstrncpy(self->data.host, host, sizeof(self->data.host));
+	sstrncpy(self->data.plugin, plugin, sizeof(self->data.plugin));
+	sstrncpy(self->data.plugin_instance, plugin_instance, sizeof(self->data.plugin_instance));
+	sstrncpy(self->data.type, type, sizeof(self->data.type));
+	sstrncpy(self->data.type_instance, type_instance, sizeof(self->data.type_instance));
 	self->data.time = time;
 
-	FreeAll();
-
 	if (values == NULL) {
 		values = PyList_New(0);
 		PyErr_Clear();
 	} else {
 		Py_INCREF(values);
 	}
@@ -501,48 +487,45 @@
 	const data_set_t *ds;
 	int size;
 	value_t *value;
 	value_list_t value_list = VALUE_LIST_INIT;
 	PyObject *values = self->values, *meta = self->meta;
 	double time = self->data.time, interval = self->interval;
-	char *host = NULL, *plugin = NULL, *plugin_instance = NULL, *type = NULL, *type_instance = NULL;
+	const char *host = self->data.host;
+	const char *plugin = self->data.plugin;
+	const char *plugin_instance = self->data.plugin_instance;
+	const char *type = self->data.type;
+	const char *type_instance = self->data.type_instance;
 	
 	static char *kwlist[] = {"type", "values", "plugin_instance", "type_instance",
 			"plugin", "host", "time", "interval", "meta", NULL};
 	if (!PyArg_ParseTupleAndKeywords(args, kwds, "|etOetetetetddO", kwlist,
 			NULL, &type, &values, NULL, &plugin_instance, NULL, &type_instance,
 			NULL, &plugin, NULL, &host, &time, &interval, &meta))
 		return NULL;
 
-	sstrncpy(value_list.host, host ? host : self->data.host, sizeof(value_list.host));
-	sstrncpy(value_list.plugin, plugin ? plugin : self->data.plugin, sizeof(value_list.plugin));
-	sstrncpy(value_list.plugin_instance, plugin_instance ? plugin_instance : self->data.plugin_instance, sizeof(value_list.plugin_instance));
-	sstrncpy(value_list.type, type ? type : self->data.type, sizeof(value_list.type));
-	sstrncpy(value_list.type_instance, type_instance ? type_instance : self->data.type_instance, sizeof(value_list.type_instance));
-	FreeAll();
-	if (value_list.type[0] == 0) {
+	if (type[0] == 0) {
 		PyErr_SetString(PyExc_RuntimeError, "type not set");
-		FreeAll();
 		return NULL;
 	}
-	ds = plugin_get_ds(value_list.type);
+	ds = plugin_get_ds(type);
 	if (ds == NULL) {
-		PyErr_Format(PyExc_TypeError, "Dataset %s not found", value_list.type);
+		PyErr_Format(PyExc_TypeError, "Dataset %s not found", type);
 		return NULL;
 	}
 	if (values == NULL || (PyTuple_Check(values) == 0 && PyList_Check(values) == 0)) {
 		PyErr_Format(PyExc_TypeError, "values must be list or tuple");
 		return NULL;
 	}
 	if (meta != NULL && meta != Py_None && !PyDict_Check(meta)) {
 		PyErr_Format(PyExc_TypeError, "meta must be a dict");
 		return NULL;
 	}
 	size = (int) PySequence_Length(values);
 	if (size != ds->ds_num) {
-		PyErr_Format(PyExc_RuntimeError, "type %s needs %d values, got %i", value_list.type, ds->ds_num, size);
+		PyErr_Format(PyExc_RuntimeError, "type %s needs %d values, got %i", type, ds->ds_num, size);
 		return NULL;
 	}
 	value = malloc(size * sizeof(*value));
 	for (i = 0; i < size; ++i) {
 		PyObject *item, *num;
 		item = PySequence_Fast_GET_ITEM(values, i); /* Borrowed reference. */
@@ -573,25 +556,30 @@
 			if (num != NULL) {
 				value[i].absolute = PyLong_AsUnsignedLongLong(num);
 				Py_XDECREF(num);
 			}
 		} else {
 			free(value);
-			PyErr_Format(PyExc_RuntimeError, "unknown data type %d for %s", ds->ds->type, value_list.type);
+			PyErr_Format(PyExc_RuntimeError, "unknown data type %d for %s", ds->ds->type, type);
 			return NULL;
 		}
 		if (PyErr_Occurred() != NULL) {
 			free(value);
 			return NULL;
 		}
 	}
 	value_list.values = value;
 	value_list.meta = cpy_build_meta(meta);
 	value_list.values_len = size;
 	value_list.time = DOUBLE_TO_CDTIME_T(time);
 	value_list.interval = DOUBLE_TO_CDTIME_T(interval);
+	sstrncpy(value_list.host, host, sizeof(value_list.host));
+	sstrncpy(value_list.plugin, plugin, sizeof(value_list.plugin));
+	sstrncpy(value_list.plugin_instance, plugin_instance, sizeof(value_list.plugin_instance));
+	sstrncpy(value_list.type, type, sizeof(value_list.type));
+	sstrncpy(value_list.type_instance, type_instance, sizeof(value_list.type_instance));
 	if (value_list.host[0] == 0)
 		sstrncpy(value_list.host, hostname_g, sizeof(value_list.host));
 	if (value_list.plugin[0] == 0)
 		sstrncpy(value_list.plugin, "python", sizeof(value_list.plugin));
 	Py_BEGIN_ALLOW_THREADS;
 	ret = plugin_dispatch_values(&value_list);
@@ -610,43 +598,42 @@
 	const data_set_t *ds;
 	int size;
 	value_t *value;
 	value_list_t value_list = VALUE_LIST_INIT;
 	PyObject *values = self->values, *meta = self->meta;
 	double time = self->data.time, interval = self->interval;
-	char *host = NULL, *plugin = NULL, *plugin_instance = NULL, *type = NULL, *type_instance = NULL, *dest = NULL;
+	const char *host = self->data.host;
+	const char *plugin = self->data.plugin;
+	const char *plugin_instance = self->data.plugin_instance;
+	const char *type = self->data.type;
+	const char *type_instance = self->data.type_instance;
+	const char *dest = NULL;
 	
 	static char *kwlist[] = {"destination", "type", "values", "plugin_instance", "type_instance",
 			"plugin", "host", "time", "interval", "meta", NULL};
-	if (!PyArg_ParseTupleAndKeywords(args, kwds, "et|etOetetetetdiO", kwlist, NULL, &dest,
+	if (!PyArg_ParseTupleAndKeywords(args, kwds, "|etOetetetetddO", kwlist,
 			NULL, &type, &values, NULL, &plugin_instance, NULL, &type_instance,
 			NULL, &plugin, NULL, &host, &time, &interval, &meta))
 		return NULL;
 
-	sstrncpy(value_list.host, host ? host : self->data.host, sizeof(value_list.host));
-	sstrncpy(value_list.plugin, plugin ? plugin : self->data.plugin, sizeof(value_list.plugin));
-	sstrncpy(value_list.plugin_instance, plugin_instance ? plugin_instance : self->data.plugin_instance, sizeof(value_list.plugin_instance));
-	sstrncpy(value_list.type, type ? type : self->data.type, sizeof(value_list.type));
-	sstrncpy(value_list.type_instance, type_instance ? type_instance : self->data.type_instance, sizeof(value_list.type_instance));
-	FreeAll();
-	if (value_list.type[0] == 0) {
+	if (type[0] == 0) {
 		PyErr_SetString(PyExc_RuntimeError, "type not set");
 		return NULL;
 	}
-	ds = plugin_get_ds(value_list.type);
+	ds = plugin_get_ds(type);
 	if (ds == NULL) {
-		PyErr_Format(PyExc_TypeError, "Dataset %s not found", value_list.type);
+		PyErr_Format(PyExc_TypeError, "Dataset %s not found", type);
 		return NULL;
 	}
 	if (values == NULL || (PyTuple_Check(values) == 0 && PyList_Check(values) == 0)) {
 		PyErr_Format(PyExc_TypeError, "values must be list or tuple");
 		return NULL;
 	}
 	size = (int) PySequence_Length(values);
 	if (size != ds->ds_num) {
-		PyErr_Format(PyExc_RuntimeError, "type %s needs %d values, got %i", value_list.type, ds->ds_num, size);
+		PyErr_Format(PyExc_RuntimeError, "type %s needs %d values, got %i", type, ds->ds_num, size);
 		return NULL;
 	}
 	value = malloc(size * sizeof(*value));
 	for (i = 0; i < size; ++i) {
 		PyObject *item, *num;
 		item = PySequence_Fast_GET_ITEM(values, i); /* Borrowed reference. */
@@ -677,24 +664,29 @@
 			if (num != NULL) {
 				value[i].absolute = PyLong_AsUnsignedLongLong(num);
 				Py_XDECREF(num);
 			}
 		} else {
 			free(value);
-			PyErr_Format(PyExc_RuntimeError, "unknown data type %d for %s", ds->ds->type, value_list.type);
+			PyErr_Format(PyExc_RuntimeError, "unknown data type %d for %s", ds->ds->type, type);
 			return NULL;
 		}
 		if (PyErr_Occurred() != NULL) {
 			free(value);
 			return NULL;
 		}
 	}
 	value_list.values = value;
 	value_list.values_len = size;
 	value_list.time = DOUBLE_TO_CDTIME_T(time);
 	value_list.interval = DOUBLE_TO_CDTIME_T(interval);
+	sstrncpy(value_list.host, host, sizeof(value_list.host));
+	sstrncpy(value_list.plugin, plugin, sizeof(value_list.plugin));
+	sstrncpy(value_list.plugin_instance, plugin_instance, sizeof(value_list.plugin_instance));
+	sstrncpy(value_list.type, type, sizeof(value_list.type));
+	sstrncpy(value_list.type_instance, type_instance, sizeof(value_list.type_instance));
 	value_list.meta = cpy_build_meta(meta);;
 	if (value_list.host[0] == 0)
 		sstrncpy(value_list.host, hostname_g, sizeof(value_list.host));
 	if (value_list.plugin[0] == 0)
 		sstrncpy(value_list.plugin, "python", sizeof(value_list.plugin));
 	Py_BEGIN_ALLOW_THREADS;
@@ -832,81 +824,78 @@
 		"Notifications can be dispatched at any time and can be received with register_notification.";
 
 static int Notification_init(PyObject *s, PyObject *args, PyObject *kwds) {
 	Notification *self = (Notification *) s;
 	int severity = 0;
 	double time = 0;
-	char *message = NULL;
-	char *type = NULL, *plugin_instance = NULL, *type_instance = NULL, *plugin = NULL, *host = NULL;
+	const char *message = "";
+	const char *type = "", *plugin_instance = "", *type_instance = "", *plugin = "", *host = "";
 	static char *kwlist[] = {"type", "message", "plugin_instance", "type_instance",
 			"plugin", "host", "time", "severity", NULL};
 	
 	if (!PyArg_ParseTupleAndKeywords(args, kwds, "|etetetetetetdi", kwlist,
 			NULL, &type, NULL, &message, NULL, &plugin_instance, NULL, &type_instance,
 			NULL, &plugin, NULL, &host, &time, &severity))
 		return -1;
 	
-	if (type && plugin_get_ds(type) == NULL) {
+	if (type[0] != 0 && plugin_get_ds(type) == NULL) {
 		PyErr_Format(PyExc_TypeError, "Dataset %s not found", type);
-		FreeAll();
-		PyMem_Free(message);
 		return -1;
 	}
 
-	sstrncpy(self->data.host, host ? host : "", sizeof(self->data.host));
-	sstrncpy(self->data.plugin, plugin ? plugin : "", sizeof(self->data.plugin));
-	sstrncpy(self->data.plugin_instance, plugin_instance ? plugin_instance : "", sizeof(self->data.plugin_instance));
-	sstrncpy(self->data.type, type ? type : "", sizeof(self->data.type));
-	sstrncpy(self->data.type_instance, type_instance ? type_instance : "", sizeof(self->data.type_instance));
-	sstrncpy(self->message, message ? message : "", sizeof(self->message));
+	sstrncpy(self->data.host, host, sizeof(self->data.host));
+	sstrncpy(self->data.plugin, plugin, sizeof(self->data.plugin));
+	sstrncpy(self->data.plugin_instance, plugin_instance, sizeof(self->data.plugin_instance));
+	sstrncpy(self->data.type, type, sizeof(self->data.type));
+	sstrncpy(self->data.type_instance, type_instance, sizeof(self->data.type_instance));
 	self->data.time = time;
-	self->severity = severity;
 
-	FreeAll();
-	PyMem_Free(message);
+	sstrncpy(self->message, message, sizeof(self->message));
+	self->severity = severity;
 	return 0;
 }
 
 static PyObject *Notification_dispatch(Notification *self, PyObject *args, PyObject *kwds) {
 	int ret;
 	const data_set_t *ds;
 	notification_t notification;
 	double t = self->data.time;
 	int severity = self->severity;
-	char *host = NULL, *plugin = NULL, *plugin_instance = NULL, *type = NULL, *type_instance = NULL;
-	char *message = NULL;
+	const char *host = self->data.host;
+	const char *plugin = self->data.plugin;
+	const char *plugin_instance = self->data.plugin_instance;
+	const char *type = self->data.type;
+	const char *type_instance = self->data.type_instance;
+	const char *message = self->message;
 	
 	static char *kwlist[] = {"type", "message", "plugin_instance", "type_instance",
 			"plugin", "host", "time", "severity", NULL};
 	if (!PyArg_ParseTupleAndKeywords(args, kwds, "|etetetetetetdi", kwlist,
 			NULL, &type, NULL, &message, NULL, &plugin_instance, NULL, &type_instance,
 			NULL, &plugin, NULL, &host, &t, &severity))
 		return NULL;
 
-	notification.time = DOUBLE_TO_CDTIME_T(t);
-	notification.severity = severity;
-	sstrncpy(notification.message, message ? message : self->message, sizeof(notification.message));
-	sstrncpy(notification.host, host ? host : self->data.host, sizeof(notification.host));
-	sstrncpy(notification.plugin, plugin ? plugin : self->data.plugin, sizeof(notification.plugin));
-	sstrncpy(notification.plugin_instance, plugin_instance ? plugin_instance : self->data.plugin_instance, sizeof(notification.plugin_instance));
-	sstrncpy(notification.type, type ? type : self->data.type, sizeof(notification.type));
-	sstrncpy(notification.type_instance, type_instance ? type_instance : self->data.type_instance, sizeof(notification.type_instance));
-	notification.meta = NULL;
-	FreeAll();
-	PyMem_Free(message);
-
-	if (notification.type[0] == 0) {
+	if (type[0] == 0) {
 		PyErr_SetString(PyExc_RuntimeError, "type not set");
 		return NULL;
 	}
-	ds = plugin_get_ds(notification.type);
+	ds = plugin_get_ds(type);
 	if (ds == NULL) {
-		PyErr_Format(PyExc_TypeError, "Dataset %s not found", notification.type);
+		PyErr_Format(PyExc_TypeError, "Dataset %s not found", type);
 		return NULL;
 	}
 
+	notification.time = DOUBLE_TO_CDTIME_T(t);
+	notification.severity = severity;
+	sstrncpy(notification.message, message, sizeof(notification.message));
+	sstrncpy(notification.host, host, sizeof(notification.host));
+	sstrncpy(notification.plugin, plugin, sizeof(notification.plugin));
+	sstrncpy(notification.plugin_instance, plugin_instance, sizeof(notification.plugin_instance));
+	sstrncpy(notification.type, type, sizeof(notification.type));
+	sstrncpy(notification.type_instance, type_instance, sizeof(notification.type_instance));
+	notification.meta = NULL;
 	if (notification.time == 0)
 		notification.time = cdtime();
 	if (notification.host[0] == 0)
 		sstrncpy(notification.host, hostname_g, sizeof(notification.host));
 	if (notification.plugin[0] == 0)
 		sstrncpy(notification.plugin, "python", sizeof(notification.plugin));
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/redis.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/redis.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/redis.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/redis.c	2012-04-02 16:04:58.000000000 +0800
@@ -25,16 +25,12 @@
 #include "plugin.h"
 #include "configfile.h"
 
 #include <pthread.h>
 #include <credis.h>
 
-#ifndef HOST_NAME_MAX
-# define HOST_NAME_MAX _POSIX_HOST_NAME_MAX
-#endif
-
 #define REDIS_DEF_HOST   "localhost"
 #define REDIS_DEF_PORT    6379
 #define REDIS_DEF_TIMEOUT 2000
 #define MAX_REDIS_NODE_NAME 64
 
 /* Redis plugin configuration example:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/routeros.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/routeros.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/routeros.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/routeros.c	2012-04-02 16:04:58.000000000 +0800
@@ -338,13 +338,13 @@
   {
     oconfig_item_t *child = ci->children + i;
 
     if (strcasecmp ("Host", child->key) == 0)
       status = cf_util_get_string (child, &router_data->node);
     else if (strcasecmp ("Port", child->key) == 0)
-      status = cf_util_get_string (child, &router_data->service);
+      status = cf_util_get_service (child, &router_data->service);
     else if (strcasecmp ("User", child->key) == 0)
       status = cf_util_get_string (child, &router_data->username);
     else if (strcasecmp ("Password", child->key) == 0)
       status = cf_util_get_string (child, &router_data->password);
     else if (strcasecmp ("CollectInterface", child->key) == 0)
       cf_util_get_boolean (child, &router_data->collect_interface);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/rrdcached.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/rrdcached.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/rrdcached.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/rrdcached.c	2012-04-02 16:04:58.000000000 +0800
@@ -28,21 +28,12 @@
 #include <rrd.h>
 #include <rrd_client.h>
 
 /*
  * Private variables
  */
-static const char *config_keys[] =
-{
-  "DaemonAddress",
-  "DataDir",
-  "CreateFiles",
-  "CollectStatistics"
-};
-static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
-
 static char *datadir = NULL;
 static char *daemon_address = NULL;
 static int config_create_files = 1;
 static int config_collect_stats = 1;
 static rrdcreate_config_t rrdcreate_config =
 {
@@ -55,12 +46,20 @@
 	/* timespans_num = */ 0,
 
 	/* consolidation_functions = */ NULL,
 	/* consolidation_functions_num = */ 0
 };
 
+/*
+ * Prototypes.
+ */
+static int rc_write (const data_set_t *ds, const value_list_t *vl,
+    user_data_t __attribute__((unused)) *user_data);
+static int rc_flush (__attribute__((unused)) cdtime_t timeout,
+    const char *identifier, __attribute__((unused)) user_data_t *ud);
+
 static int value_list_to_string (char *buffer, int buffer_len,
     const data_set_t *ds, const value_list_t *vl)
 {
   int offset;
   int status;
   int i;
@@ -159,61 +158,97 @@
   strncpy (buffer + offset, ".rrd", buffer_len - offset);
   buffer[buffer_len - 1] = 0;
 
   return (0);
 } /* int value_list_to_filename */
 
-static int rc_config (const char *key, const char *value)
+static const char *config_get_string (oconfig_item_t *ci)
 {
-  if (strcasecmp ("DataDir", key) == 0)
-  {
-    if (datadir != NULL)
-      free (datadir);
-    datadir = strdup (value);
-    if (datadir != NULL)
+  if ((ci->children_num != 0) || (ci->values_num != 1)
+      || ((ci->values[0].type != OCONFIG_TYPE_STRING)
+        && (ci->values[0].type != OCONFIG_TYPE_BOOLEAN)))
+  {
+    ERROR ("rrdcached plugin: %s expects a single string argument.",
+        ci->key);
+    return (NULL);
+  }
+
+  if (ci->values[0].type == OCONFIG_TYPE_BOOLEAN) {
+    if (ci->values[0].value.boolean)
+      return "true";
+    else
+      return "false";
+  }
+  return (ci->values[0].value.string);
+} /* const char *config_get_string */
+
+static int rc_config (oconfig_item_t *ci)
+{
+  int i;
+
+  for (i = 0; i < ci->children_num; ++i) {
+    const char *key = ci->children[i].key;
+    const char *value = config_get_string (ci->children + i);
+
+    if (value == NULL) /* config_get_strings prints error message */
+      continue;
+
+    if (strcasecmp ("DataDir", key) == 0)
     {
-      int len = strlen (datadir);
-      while ((len > 0) && (datadir[len - 1] == '/'))
+      if (datadir != NULL)
+        free (datadir);
+      datadir = strdup (value);
+      if (datadir != NULL)
       {
-        len--;
-        datadir[len] = '\0';
+        int len = strlen (datadir);
+        while ((len > 0) && (datadir[len - 1] == '/'))
+        {
+          len--;
+          datadir[len] = '\0';
+        }
+        if (len <= 0)
+        {
+          free (datadir);
+          datadir = NULL;
+        }
       }
-      if (len <= 0)
+    }
+    else if (strcasecmp ("DaemonAddress", key) == 0)
+    {
+      sfree (daemon_address);
+      daemon_address = strdup (value);
+      if (daemon_address == NULL)
       {
-        free (datadir);
-        datadir = NULL;
+        ERROR ("rrdcached plugin: strdup failed.");
+        continue;
       }
     }
-  }
-  else if (strcasecmp ("DaemonAddress", key) == 0)
-  {
-    sfree (daemon_address);
-    daemon_address = strdup (value);
-    if (daemon_address == NULL)
+    else if (strcasecmp ("CreateFiles", key) == 0)
     {
-      ERROR ("rrdcached plugin: strdup failed.");
-      return (1);
+      if (IS_FALSE (value))
+        config_create_files = 0;
+      else
+        config_create_files = 1;
+    }
+    else if (strcasecmp ("CollectStatistics", key) == 0)
+    {
+      if (IS_FALSE (value))
+        config_collect_stats = 0;
+      else
+        config_collect_stats = 1;
     }
-  }
-  else if (strcasecmp ("CreateFiles", key) == 0)
-  {
-    if (IS_FALSE (value))
-      config_create_files = 0;
-    else
-      config_create_files = 1;
-  }
-  else if (strcasecmp ("CollectStatistics", key) == 0)
-  {
-    if (IS_FALSE (value))
-      config_collect_stats = 0;
     else
-      config_collect_stats = 1;
+    {
+      WARNING ("rrdcached plugin: Ignoring invalid option %s.", key);
+      continue;
+    }
   }
-  else
-  {
-    return (-1);
+
+  if (daemon_address != NULL) {
+    plugin_register_write ("rrdcached", rc_write, /* user_data = */ NULL);
+    plugin_register_flush ("rrdcached", rc_flush, /* user_data = */ NULL);
   }
   return (0);
 } /* int rc_config */
 
 static int rc_read (void)
 {
@@ -325,13 +360,13 @@
   return (0);
 } /* int rc_init */
 
 static int rc_write (const data_set_t *ds, const value_list_t *vl,
     user_data_t __attribute__((unused)) *user_data)
 {
-  char filename[512];
+  char filename[PATH_MAX];
   char values[512];
   char *values_array[2];
   int status;
 
   if (daemon_address == NULL)
   {
@@ -403,24 +438,57 @@
     return (-1);
   }
 
   return (0);
 } /* int rc_write */
 
+static int rc_flush (__attribute__((unused)) cdtime_t timeout, /* {{{ */
+    const char *identifier,
+    __attribute__((unused)) user_data_t *ud)
+{
+  char filename[PATH_MAX + 1];
+  int status;
+
+  if (identifier == NULL)
+    return (EINVAL);
+
+  if (datadir != NULL)
+    ssnprintf (filename, sizeof (filename), "%s/%s.rrd", datadir, identifier);
+  else
+    ssnprintf (filename, sizeof (filename), "%s.rrd", identifier);
+
+  status = rrdc_connect (daemon_address);
+  if (status != 0)
+  {
+    ERROR ("rrdcached plugin: rrdc_connect (%s) failed with status %i.",
+        daemon_address, status);
+    return (-1);
+  }
+
+  status = rrdc_flush (filename);
+  if (status != 0)
+  {
+    ERROR ("rrdcached plugin: rrdc_flush (%s) failed with status %i.",
+        filename, status);
+    return (-1);
+  }
+  DEBUG ("rrdcached plugin: rrdc_flush (%s): Success.", filename);
+
+  return (0);
+} /* }}} int rc_flush */
+
 static int rc_shutdown (void)
 {
   rrdc_disconnect ();
   return (0);
 } /* int rc_shutdown */
 
 void module_register (void)
 {
-  plugin_register_config ("rrdcached", rc_config,
-      config_keys, config_keys_num);
+  plugin_register_complex_config ("rrdcached", rc_config);
   plugin_register_init ("rrdcached", rc_init);
-  plugin_register_write ("rrdcached", rc_write, /* user_data = */ NULL);
   plugin_register_shutdown ("rrdcached", rc_shutdown);
 } /* void module_register */
 
 /*
  * vim: set sw=2 sts=2 et :
  */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/rrdtool.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/rrdtool.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/rrdtool.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/rrdtool.c	2012-04-02 16:04:58.000000000 +0800
@@ -182,13 +182,13 @@
 	status = rrd_update (new_argc, new_argv);
 	pthread_mutex_unlock (&librrd_lock);
 
 	if (status != 0)
 	{
 		WARNING ("rrdtool plugin: rrd_update_r failed: %s: %s",
-				filename, rrd_get_error ());
+				argv[1], rrd_get_error ());
 	}
 
 	sfree (new_argv);
 
 	return (status);
 } /* int srrd_update */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/sensors.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/sensors.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/sensors.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/sensors.c	2012-04-02 16:04:58.000000000 +0800
@@ -24,12 +24,16 @@
  *   - precise sensor feature selection (chip-bus-address/type-feature)
  *     with ExtendedSensorNaming
  *   - more sensor features (finite list)
  *   - honor sensors.conf's ignored
  *   - config Sensor option
  *   - config IgnoreSelected option
+ *
+ *   Henrique de Moraes Holschuh <hmh at debian.org>
+ *   - use default libsensors config file on API 0x400
+ *   - config SensorConfigFile option
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
@@ -129,13 +133,14 @@
 /* end new naming */
 #endif /* SENSORS_API_VERSION < 0x400 */
 
 static const char *config_keys[] =
 {
 	"Sensor",
-	"IgnoreSelected"
+	"IgnoreSelected",
+	"SensorConfigFile"
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
 #if SENSORS_API_VERSION < 0x400
 typedef struct featurelist
 {
@@ -145,37 +150,34 @@
 	struct featurelist         *next;
 } featurelist_t;
 
 # ifndef SENSORS_CONF_PATH
 #  define SENSORS_CONF_PATH "/etc/sensors.conf"
 # endif
+static char *conffile = SENSORS_CONF_PATH;
 /* #endif SENSORS_API_VERSION < 0x400 */
 
 #elif (SENSORS_API_VERSION >= 0x400) && (SENSORS_API_VERSION < 0x500)
 typedef struct featurelist
 {
 	const sensors_chip_name    *chip;
 	const sensors_feature      *feature;
 	const sensors_subfeature   *subfeature;
 	struct featurelist         *next;
 } featurelist_t;
 
-# ifndef SENSORS_CONF_PATH
-#  define SENSORS_CONF_PATH "/etc/sensors3.conf"
-# endif
+static char *conffile = NULL;
 /* #endif (SENSORS_API_VERSION >= 0x400) && (SENSORS_API_VERSION < 0x500) */
 
 #else /* if SENSORS_API_VERSION >= 0x500 */
 # error "This version of libsensors is not supported yet. Please report this " \
 	"as bug."
 #endif
 
-static const char *conffile = SENSORS_CONF_PATH;
 featurelist_t *first_feature = NULL;
 static ignorelist_t *sensor_list;
-static time_t sensors_config_mtime = 0;
 
 #if SENSORS_API_VERSION < 0x400
 /* full chip name logic borrowed from lm_sensors */
 static int sensors_snprintf_chip_name (char *buf, size_t buf_size,
 		const sensors_chip_name *chip)
 {
@@ -222,13 +224,25 @@
 
 static int sensors_config (const char *key, const char *value)
 {
 	if (sensor_list == NULL)
 		sensor_list = ignorelist_create (1);
 
-	if (strcasecmp (key, "Sensor") == 0)
+	/* TODO: This setting exists for compatibility with old versions of
+	 * lm-sensors. Remove support for those ancient versions in the next
+	 * major release. */
+	if (strcasecmp (key, "SensorConfigFile") == 0)
+	{
+		char *tmp = strdup (value);
+		if (tmp != NULL)
+		{
+			sfree (conffile);
+			conffile = tmp;
+		}
+	}
+	else if (strcasecmp (key, "Sensor") == 0)
 	{
 		if (ignorelist_add (sensor_list, value))
 		{
 			ERROR ("sensors plugin: "
 					"Cannot add value to ignorelist.");
 			return (1);
@@ -265,62 +279,50 @@
 	}
 	first_feature = NULL;
 }
 
 static int sensors_load_conf (void)
 {
-	FILE *fh;
+	static int call_once = 0;
+
+	FILE *fh = NULL;
 	featurelist_t *last_feature = NULL;
 	
 	const sensors_chip_name *chip;
 	int chip_num;
 
-	struct stat statbuf;
 	int status;
-	
-	status = stat (conffile, &statbuf);
-	if (status != 0)
-	{
-		char errbuf[1024];
-		ERROR ("sensors plugin: stat (%s) failed: %s", conffile,
-				sstrerror (errno, errbuf, sizeof (errbuf)));
-		sensors_config_mtime = 0;
-	}
 
-	if ((sensors_config_mtime != 0)
-			&& (sensors_config_mtime == statbuf.st_mtime))
-		return (0);
-
-	if (sensors_config_mtime != 0)
-	{
-		NOTICE ("sensors plugin: Reloading config from %s",
-				conffile);
-		sensors_free_features ();
-		sensors_config_mtime = 0;
-	}
+	if (call_once)
+		return 0;
 
-	fh = fopen (conffile, "r");
-	if (fh == NULL)
+	call_once = 1;
+
+	if (conffile != NULL)
 	{
-		char errbuf[1024];
-		ERROR ("sensors plugin: fopen(%s) failed: %s", conffile,
-				sstrerror (errno, errbuf, sizeof (errbuf)));
-		return (-1);
+		fh = fopen (conffile, "r");
+		if (fh == NULL)
+		{
+			char errbuf[1024];
+			ERROR ("sensors plugin: fopen(%s) failed: %s", conffile,
+					sstrerror (errno, errbuf, sizeof (errbuf)));
+			return (-1);
+		}
 	}
 
 	status = sensors_init (fh);
-	fclose (fh);
+	if (fh)
+		fclose (fh);
+
 	if (status != 0)
 	{
 		ERROR ("sensors plugin: Cannot initialize sensors. "
 				"Data will not be collected.");
 		return (-1);
 	}
 
-	sensors_config_mtime = statbuf.st_mtime;
-
 #if SENSORS_API_VERSION < 0x400
 	chip_num = 0;
 	while ((chip = sensors_get_detected_chips (&chip_num)) != NULL)
 	{
 		int feature_num0 = 0;
 		int feature_num1 = 0;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/snmp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/snmp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/snmp.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/snmp.c	2012-04-02 16:04:58.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/snmp.c
- * Copyright (C) 2007-2012  Florian octo Forster
+ * Copyright (C) 2007  Florian octo Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -13,13 +13,13 @@
  *
  * You should have received a copy of the GNU General Public License along
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
- *   Florian octo Forster <octo at collectd.org>
+ *   Florian octo Forster <octo at verplant.org>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "utils_complain.h"
@@ -76,21 +76,21 @@
 typedef struct host_definition_s host_definition_t;
 
 /* These two types are used to cache values in `csnmp_read_table' to handle
  * gaps in tables. */
 struct csnmp_list_instances_s
 {
-  oid_t suffix;
+  oid subid;
   char instance[DATA_MAX_NAME_LEN];
   struct csnmp_list_instances_s *next;
 };
 typedef struct csnmp_list_instances_s csnmp_list_instances_t;
 
 struct csnmp_table_values_s
 {
-  oid_t suffix;
+  oid subid;
   value_t value;
   struct csnmp_table_values_s *next;
 };
 typedef struct csnmp_table_values_s csnmp_table_values_t;
 
 /*
@@ -103,60 +103,12 @@
  */
 static int csnmp_read_host (user_data_t *ud);
 
 /*
  * Private functions
  */
-static void csnmp_oid_init (oid_t *dst, oid const *src, size_t n)
-{
-  assert (n <= STATIC_ARRAY_LEN (dst->oid));
-  memcpy (dst->oid, src, sizeof (*src) * n);
-  dst->oid_len = n;
-}
-
-static int csnmp_oid_compare (oid_t const *left, oid_t const *right)
-{
-  return (snmp_oid_compare (left->oid, left->oid_len,
-        right->oid, right->oid_len));
-}
-
-static int csnmp_oid_suffix (oid_t *dst, oid_t const *src,
-    oid_t const *root)
-{
-  /* Make sure "src" is in "root"s subtree. */
-  if (src->oid_len <= root->oid_len)
-    return (EINVAL);
-  if (snmp_oid_ncompare (root->oid, root->oid_len,
-        src->oid, src->oid_len,
-        /* n = */ root->oid_len) != 0)
-    return (EINVAL);
-
-  memset (dst, 0, sizeof (*dst));
-  dst->oid_len = src->oid_len - root->oid_len;
-  memcpy (dst->oid, &src->oid[root->oid_len],
-      dst->oid_len * sizeof (dst->oid[0]));
-  return (0);
-}
-
-static int csnmp_oid_to_string (char *buffer, size_t buffer_size,
-    oid_t const *o)
-{
-  char oid_str[MAX_OID_LEN][16];
-  char *oid_str_ptr[MAX_OID_LEN];
-  size_t i;
-
-  for (i = 0; i < o->oid_len; i++)
-  {
-    ssnprintf (oid_str[i], sizeof (oid_str[i]), "%lu", (unsigned long) o->oid[i]);
-    oid_str_ptr[i] = oid_str[i];
-  }
-
-  return (strjoin (buffer, buffer_size,
-        oid_str_ptr, o->oid_len, /* separator = */ "."));
-}
-
 static void csnmp_host_close_session (host_definition_t *host) /* {{{ */
 {
   if (host->sess_handle == NULL)
     return;
 
   snmp_sess_close (host->sess_handle);
@@ -346,13 +298,13 @@
 
 static int csnmp_config_add_data_shift (data_definition_t *dd, oconfig_item_t *ci)
 {
   if ((ci->values_num != 1)
       || (ci->values[0].type != OCONFIG_TYPE_NUMBER))
   {
-    WARNING ("snmp plugin: The `Shift' config option needs exactly one number argument.");
+    WARNING ("snmp plugin: The `Scale' config option needs exactly one number argument.");
     return (-1);
   }
 
   dd->shift = ci->values[0].value.number;
 
   return (0);
@@ -748,13 +700,14 @@
     sfree (errstr);
   }
 } /* void csnmp_host_open_session */
 
 /* TODO: Check if negative values wrap around. Problem: negative temperatures. */
 static value_t csnmp_value_list_to_value (struct variable_list *vl, int type,
-    double scale, double shift)
+    double scale, double shift,
+    const char *host_name, const char *data_name)
 {
   value_t ret;
   uint64_t tmp_unsigned = 0;
   int64_t tmp_signed = 0;
   _Bool defined = 1;
   /* Set to true when the original SNMP type appears to have been signed. */
@@ -800,14 +753,17 @@
 #ifdef ASN_NULL
     if (vl->type == ASN_NULL)
       INFO ("snmp plugin: OID \"%s\" is undefined (type ASN_NULL)",
           oid_buffer);
     else
 #endif
-      WARNING ("snmp plugin: I don't know the ASN type \"%i\" (OID: %s)",
-          (int) vl->type, oid_buffer);
+      WARNING ("snmp plugin: I don't know the ASN type #%i "
+               "(OID: \"%s\", data block \"%s\", host block \"%s\")",
+          (int) vl->type, oid_buffer,
+          (data_name != NULL) ? data_name : "UNKNOWN",
+          (host_name != NULL) ? host_name : "UNKNOWN");
 
     defined = 0;
   }
 
   if (vl->type == ASN_OCTET_STR)
   {
@@ -912,18 +868,16 @@
   /* check all the variables and count how many have left their subtree */
   for (vb = res->variables, i = 0;
       (vb != NULL) && (i < data->values_len);
       vb = vb->next_variable, i++)
   {
     num_checked++;
-
-    if ((vb->type == SNMP_ENDOFMIBVIEW)
-        || (snmp_oid_ncompare (data->values[i].oid,
-            data->values[i].oid_len,
-            vb->name, vb->name_length,
-            data->values[i].oid_len) != 0))
+    if (snmp_oid_ncompare (data->values[i].oid,
+	  data->values[i].oid_len,
+	  vb->name, vb->name_length,
+	  data->values[i].oid_len) != 0)
       num_left_subtree++;
   }
 
   /* check if enough variables have been returned */
   if (i < data->values_len)
   {
@@ -1022,46 +976,35 @@
 
   return ((int) vb->val_len);
 } /* }}} int csnmp_strvbcopy */
 
 static int csnmp_instance_list_add (csnmp_list_instances_t **head,
     csnmp_list_instances_t **tail,
-    struct snmp_pdu const *res,
-    oid_t const *root)
+    const struct snmp_pdu *res,
+    const host_definition_t *hd, const data_definition_t *dd)
 {
   csnmp_list_instances_t *il;
   struct variable_list *vb;
-  oid_t vb_name;
-  int status;
 
   /* Set vb on the last variable */
   for (vb = res->variables;
       (vb != NULL) && (vb->next_variable != NULL);
       vb = vb->next_variable)
     /* do nothing */;
   if (vb == NULL)
     return (-1);
 
-  csnmp_oid_init (&vb_name, vb->name, vb->name_length);
-
-  il = malloc (sizeof (*il));
+  il = (csnmp_list_instances_t *) malloc (sizeof (csnmp_list_instances_t));
   if (il == NULL)
   {
     ERROR ("snmp plugin: malloc failed.");
     return (-1);
   }
-  memset (il, 0, sizeof (*il));
+  il->subid = vb->name[vb->name_length - 1];
   il->next = NULL;
 
-  status = csnmp_oid_suffix (&il->suffix, &vb_name, root);
-  if (status != 0)
-  {
-    sfree (il);
-    return (status);
-  }
-
   /* Get instance name */
   if ((vb->type == ASN_OCTET_STR) || (vb->type == ASN_BIT_STR))
   {
     char *ptr;
 
     csnmp_strvbcopy (il->instance, vb, sizeof (il->instance));
@@ -1074,13 +1017,14 @@
         *ptr = '_';
     }
     DEBUG ("snmp plugin: il->instance = `%s';", il->instance);
   }
   else
   {
-    value_t val = csnmp_value_list_to_value (vb, DS_TYPE_COUNTER, 1.0, 0.0);
+    value_t val = csnmp_value_list_to_value (vb, DS_TYPE_COUNTER,
+        /* scale = */ 1.0, /* shift = */ 0.0, hd->name, dd->name);
     ssnprintf (il->instance, sizeof (il->instance),
         "%llu", val.counter);
   }
 
   /* TODO: Debugging output */
 
@@ -1101,132 +1045,111 @@
   value_list_t vl = VALUE_LIST_INIT;
 
   csnmp_list_instances_t *instance_list_ptr;
   csnmp_table_values_t **value_table_ptr;
 
   int i;
-  _Bool have_more;
-  oid_t current_suffix;
+  oid subid;
+  int have_more;
 
   ds = plugin_get_ds (data->type);
   if (!ds)
   {
     ERROR ("snmp plugin: DataSet `%s' not defined.", data->type);
     return (-1);
   }
   assert (ds->ds_num == data->values_len);
 
   instance_list_ptr = instance_list;
 
-  value_table_ptr = malloc (sizeof (*value_table_ptr) * data->values_len);
+  value_table_ptr = (csnmp_table_values_t **) malloc (sizeof (csnmp_table_values_t *)
+      * data->values_len);
   if (value_table_ptr == NULL)
     return (-1);
   for (i = 0; i < data->values_len; i++)
     value_table_ptr[i] = value_table[i];
 
   vl.values_len = ds->ds_num;
-  vl.values = malloc (sizeof (*vl.values) * vl.values_len);
+  vl.values = (value_t *) malloc (sizeof (value_t) * vl.values_len);
   if (vl.values == NULL)
   {
     ERROR ("snmp plugin: malloc failed.");
     sfree (value_table_ptr);
     return (-1);
   }
 
   sstrncpy (vl.host, host->name, sizeof (vl.host));
   sstrncpy (vl.plugin, "snmp", sizeof (vl.plugin));
 
   vl.interval = host->interval;
 
+  subid = 0;
   have_more = 1;
-  memset (&current_suffix, 0, sizeof (current_suffix));
-  while (have_more)
-  {
-    _Bool suffix_skipped = 0;
 
-    /* Determine next suffix to handle. */
+  while (have_more != 0)
+  {
     if (instance_list != NULL)
     {
+      while ((instance_list_ptr != NULL)
+	  && (instance_list_ptr->subid < subid))
+	instance_list_ptr = instance_list_ptr->next;
+
       if (instance_list_ptr == NULL)
       {
         have_more = 0;
         continue;
       }
-
-      memcpy (&current_suffix, &instance_list_ptr->suffix, sizeof (current_suffix));
-    }
-    else /* no instance configured */
-    {
-      csnmp_table_values_t *ptr = value_table_ptr[0];
-      if (ptr == NULL)
+      else if (instance_list_ptr->subid > subid)
       {
-        have_more = 0;
+	subid = instance_list_ptr->subid;
         continue;
       }
+    } /* if (instance_list != NULL) */
 
-      memcpy (&current_suffix, &ptr->suffix, sizeof (current_suffix));
-    }
-
-    /* Update all the value_table_ptr to point at the entry with the same
-     * trailing partial OID */
     for (i = 0; i < data->values_len; i++)
     {
       while ((value_table_ptr[i] != NULL)
-          && (csnmp_oid_compare (&value_table_ptr[i]->suffix, &current_suffix) < 0))
+	  && (value_table_ptr[i]->subid < subid))
         value_table_ptr[i] = value_table_ptr[i]->next;
 
       if (value_table_ptr[i] == NULL)
       {
         have_more = 0;
         break;
       }
-      else if (csnmp_oid_compare (&value_table_ptr[i]->suffix, &current_suffix) > 0)
+      else if (value_table_ptr[i]->subid > subid)
       {
-        /* This suffix is missing in the subtree. Indicate this with the
-         * "suffix_skipped" flag and try the next instance / suffix. */
-        suffix_skipped = 1;
+	subid = value_table_ptr[i]->subid;
         break;
       }
     } /* for (i = 0; i < columns; i++) */
-
-    if (!have_more)
-      break;
-
-    /* Matching the values failed. Start from the beginning again. */
-    if (suffix_skipped)
-    {
-      if (instance_list != NULL)
-        instance_list_ptr = instance_list_ptr->next;
-      else
-        value_table_ptr[0] = value_table_ptr[0]->next;
-
+    /* The subid has been increased - start scanning from the beginning
+     * again.. */
+    if (i < data->values_len)
       continue;
-    }
 
     /* if we reach this line, all value_table_ptr[i] are non-NULL and are set
      * to the same subid. instance_list_ptr is either NULL or points to the
      * same subid, too. */
 #if COLLECT_DEBUG
     for (i = 1; i < data->values_len; i++)
     {
       assert (value_table_ptr[i] != NULL);
-      assert (csnmp_oid_compare (&value_table_ptr[i-1]->suffix,
-            &value_table_ptr[i]->suffix) == 0);
+      assert (value_table_ptr[i-1]->subid == value_table_ptr[i]->subid);
     }
     assert ((instance_list_ptr == NULL)
-        || (csnmp_oid_compare (&instance_list_ptr->suffix,
-            &value_table_ptr[0]->suffix) == 0));
+	|| (instance_list_ptr->subid == value_table_ptr[0]->subid));
 #endif
 
     sstrncpy (vl.type, data->type, sizeof (vl.type));
 
     {
       char temp[DATA_MAX_NAME_LEN];
 
       if (instance_list_ptr == NULL)
-        csnmp_oid_to_string (temp, sizeof (temp), &current_suffix);
+	ssnprintf (temp, sizeof (temp), "%"PRIu32, (uint32_t) subid);
       else
         sstrncpy (temp, instance_list_ptr->instance, sizeof (temp));
 
       if (data->instance_prefix == NULL)
         sstrncpy (vl.type_instance, temp, sizeof (vl.type_instance));
       else
@@ -1237,17 +1160,14 @@
     for (i = 0; i < data->values_len; i++)
       vl.values[i] = value_table_ptr[i]->value;
 
     /* If we get here `vl.type_instance' and all `vl.values' have been set */
     plugin_dispatch_values (&vl);
 
-    if (instance_list != NULL)
-      instance_list_ptr = instance_list_ptr->next;
-    else
-      value_table_ptr[0] = value_table_ptr[0]->next;
-  } /* while (have_more) */
+    subid++;
+  } /* while (have_more != 0) */
 
   sfree (vl.values);
   sfree (value_table_ptr);
 
   return (0);
 } /* int csnmp_dispatch_table */
@@ -1262,19 +1182,19 @@
   oid_t *oid_list;
   uint32_t oid_list_len;
 
   int status;
   int i;
 
-  /* `value_list_head' and `value_list_tail' implement a linked list for each
-   * value. `instance_list_head' and `instance_list_tail' implement a linked list of
+  /* `value_table' and `value_table_ptr' implement a linked list for each
+   * value. `instance_list' and `instance_list_ptr' implement a linked list of
    * instance names. This is used to jump gaps in the table. */
-  csnmp_list_instances_t *instance_list_head;
-  csnmp_list_instances_t *instance_list_tail;
-  csnmp_table_values_t **value_list_head;
-  csnmp_table_values_t **value_list_tail;
+  csnmp_list_instances_t *instance_list;
+  csnmp_list_instances_t *instance_list_ptr;
+  csnmp_table_values_t **value_table;
+  csnmp_table_values_t **value_table_ptr;
 
   DEBUG ("snmp plugin: csnmp_read_table (host = %s, data = %s)",
       host->name, data->name);
 
   if (host->sess_handle == NULL)
   {
@@ -1307,28 +1227,26 @@
   memcpy (oid_list, data->values, data->values_len * sizeof (oid_t));
   if (data->instance.oid.oid_len > 0)
     memcpy (oid_list + data->values_len, &data->instance.oid, sizeof (oid_t));
   else
     oid_list_len--;
 
-  /* We're going to construct n linked lists, one for each "value".
-   * value_list_head will contain pointers to the heads of these linked lists,
-   * value_list_tail will contain pointers to the tail of the lists. */
-  value_list_head = calloc (data->values_len, sizeof (*value_list_head));
-  value_list_tail = calloc (data->values_len, sizeof (*value_list_tail));
-  if ((value_list_head == NULL) || (value_list_tail == NULL))
+  /* Allocate the `value_table' */
+  value_table = (csnmp_table_values_t **) malloc (sizeof (csnmp_table_values_t *)
+      * 2 * data->values_len);
+  if (value_table == NULL)
   {
-    ERROR ("snmp plugin: csnmp_read_table: calloc failed.");
+    ERROR ("snmp plugin: csnmp_read_table: malloc failed.");
     sfree (oid_list);
-    sfree (value_list_head);
-    sfree (value_list_tail);
     return (-1);
   }
-
-  instance_list_head = NULL;
-  instance_list_tail = NULL;
+  memset (value_table, '\0', sizeof (csnmp_table_values_t *) * 2 * data->values_len);
+  value_table_ptr = value_table + data->values_len;
+  
+  instance_list = NULL;
+  instance_list_ptr = NULL;
 
   status = 0;
   while (status == 0)
   {
     req = snmp_pdu_create (SNMP_MSG_GETNEXT);
     if (req == NULL)
@@ -1382,96 +1300,82 @@
     if (csnmp_check_res_left_subtree (host, data, res) != 0)
     {
       status = 0;
       break;
     }
 
-    /* Copy the OID of the value used as instance to oid_list, if an instance
-     * is configured. */
+    /* if an instance-OID is configured.. */
     if (data->instance.oid.oid_len > 0)
     {
       /* Allocate a new `csnmp_list_instances_t', insert the instance name and
        * add it to the list */
-      if (csnmp_instance_list_add (&instance_list_head, &instance_list_tail,
-            res, &data->instance.oid) != 0)
+      if (csnmp_instance_list_add (&instance_list, &instance_list_ptr,
+	    res, host, data) != 0)
       {
         ERROR ("snmp plugin: csnmp_instance_list_add failed.");
         status = -1;
         break;
       }
 
-      /* The instance OID is added to the list of OIDs to GET from the
-       * snmp agent last, so set vb on the last variable returned and copy
-       * that OID. */
+      /* Set vb on the last variable */
       for (vb = res->variables;
           (vb != NULL) && (vb->next_variable != NULL);
           vb = vb->next_variable)
         /* do nothing */;
       assert (vb != NULL);
 
-      /* Copy the OID of the instance value to oid_list[data->values_len].
-       * "oid_list" is used for the next GETNEXT request. */
+      /* Copy OID to oid_list[data->values_len] */
       memcpy (oid_list[data->values_len].oid, vb->name,
           sizeof (oid) * vb->name_length);
       oid_list[data->values_len].oid_len = vb->name_length;
     }
 
-    /* Iterate over all the (non-instance) values returned by the agent. The
-     * (i < value_len) check will make sure we're not handling the instance OID
-     * twice. */
     for (vb = res->variables, i = 0;
         (vb != NULL) && (i < data->values_len);
         vb = vb->next_variable, i++)
     {
       csnmp_table_values_t *vt;
-      oid_t vb_name;
-      oid_t suffix;
 
-      csnmp_oid_init (&vb_name, vb->name, vb->name_length);
-
-      /* Calculate the current suffix. This is later used to check that the
-       * suffix is increasing. This also checks if we left the subtree */
-      status = csnmp_oid_suffix (&suffix, &vb_name, data->values + i);
-      if (status != 0)
+      /* Check if we left the subtree */
+      if (snmp_oid_ncompare (data->values[i].oid,
+	    data->values[i].oid_len,
+	    vb->name, vb->name_length,
+	    data->values[i].oid_len) != 0)
       {
-        DEBUG ("snmp plugin: host = %s; data = %s; Value %i failed. "
-            "It probably left its subtree.",
+	DEBUG ("snmp plugin: host = %s; data = %s; Value %i left its subtree.",
             host->name, data->name, i);
         continue;
       }
 
-      /* Make sure the OIDs returned by the agent are increasing. Otherwise our
-       * table matching algorithm will get confused. */
-      if ((value_list_tail[i] != NULL)
-          && (csnmp_oid_compare (&suffix, &value_list_tail[i]->suffix) <= 0))
+      if ((value_table_ptr[i] != NULL)
+	  && (vb->name[vb->name_length - 1] <= value_table_ptr[i]->subid))
       {
         DEBUG ("snmp plugin: host = %s; data = %s; i = %i; "
-            "Suffix is not increasing.",
+	    "SUBID is not increasing.",
             host->name, data->name, i);
         continue;
       }
 
-      vt = malloc (sizeof (*vt));
+      vt = (csnmp_table_values_t *) malloc (sizeof (csnmp_table_values_t));
       if (vt == NULL)
       {
         ERROR ("snmp plugin: malloc failed.");
         status = -1;
         break;
       }
-      memset (vt, 0, sizeof (*vt));
 
+      vt->subid = vb->name[vb->name_length - 1];
       vt->value = csnmp_value_list_to_value (vb, ds->ds[i].type,
-          data->scale, data->shift);
-      memcpy (&vt->suffix, &suffix, sizeof (vt->suffix));
+          data->scale, data->shift, host->name, data->name);
       vt->next = NULL;
 
-      if (value_list_tail[i] == NULL)
-        value_list_head[i] = vt;
+      if (value_table_ptr[i] == NULL)
+	value_table[i] = vt;
       else
-        value_list_tail[i]->next = vt;
-      value_list_tail[i] = vt;
+	value_table_ptr[i]->next = vt;
+      value_table_ptr[i] = vt;
 
       /* Copy OID to oid_list[i + 1] */
       memcpy (oid_list[i].oid, vb->name, sizeof (oid) * vb->name_length);
       oid_list[i].oid_len = vb->name_length;
     } /* for (i = data->values_len) */
 
@@ -1482,34 +1386,34 @@
 
   if (res != NULL)
     snmp_free_pdu (res);
   res = NULL;
 
   if (status == 0)
-    csnmp_dispatch_table (host, data, instance_list_head, value_list_head);
+    csnmp_dispatch_table (host, data, instance_list, value_table);
 
   /* Free all allocated variables here */
-  while (instance_list_head != NULL)
+  while (instance_list != NULL)
   {
-    csnmp_list_instances_t *next = instance_list_head->next;
-    sfree (instance_list_head);
-    instance_list_head = next;
+    instance_list_ptr = instance_list->next;
+    sfree (instance_list);
+    instance_list = instance_list_ptr;
   }
 
   for (i = 0; i < data->values_len; i++)
   {
-    while (value_list_head[i] != NULL)
+    csnmp_table_values_t *tmp;
+    while (value_table[i] != NULL)
     {
-      csnmp_table_values_t *next = value_list_head[i]->next;
-      sfree (value_list_head[i]);
-      value_list_head[i] = next;
+      tmp = value_table[i]->next;
+      sfree (value_table[i]);
+      value_table[i] = tmp;
     }
   }
 
-  sfree (value_list_head);
-  sfree (value_list_tail);
+  sfree (value_table);
   sfree (oid_list);
 
   return (0);
 } /* int csnmp_read_table */
 
 static int csnmp_read_value (host_definition_t *host, data_definition_t *data)
@@ -1609,13 +1513,13 @@
 #endif /* COLLECT_DEBUG */
 
     for (i = 0; i < data->values_len; i++)
       if (snmp_oid_compare (data->values[i].oid, data->values[i].oid_len,
             vb->name, vb->name_length) == 0)
         vl.values[i] = csnmp_value_list_to_value (vb, ds->ds[i].type,
-            data->scale, data->shift);
+            data->scale, data->shift, host->name, data->name);
   } /* for (res->variables) */
 
   if (res != NULL)
     snmp_free_pdu (res);
   res = NULL;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/swap.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/swap.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/swap.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/swap.c	2012-04-02 16:04:58.000000000 +0800
@@ -67,25 +67,19 @@
 #endif
 
 #undef  MAX
 #define MAX(x,y) ((x) > (y) ? (x) : (y))
 
 #if KERNEL_LINUX
+# define SWAP_HAVE_CONFIG 1
 /* No global variables */
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS
+# define SWAP_HAVE_CONFIG 1
 static derive_t pagesize;
-
-static const char *config_keys[] =
-{
-	"ReportByDevice"
-};
-static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
-
-static _Bool report_by_device = 0;
 /* #endif HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS */
 
 #elif defined(VM_SWAPUSAGE)
 /* No global variables */
 /* #endif defined(VM_SWAPUSAGE) */
 
@@ -104,13 +98,40 @@
 /*# endif HAVE_PERFSTAT */
 
 #else
 # error "No applicable input method."
 #endif /* HAVE_LIBSTATGRAB */
 
-static int swap_init (void)
+#if SWAP_HAVE_CONFIG
+static const char *config_keys[] =
+{
+	"ReportByDevice"
+};
+static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
+
+static _Bool report_by_device = 0;
+
+static int swap_config (const char *key, const char *value) /* {{{ */
+{
+	if (strcasecmp ("ReportByDevice", key) == 0)
+	{
+		if (IS_TRUE (value))
+			report_by_device = 1;
+		else
+			report_by_device = 0;
+	}
+	else
+	{
+		return (-1);
+	}
+
+	return (0);
+} /* }}} int swap_config */
+#endif /* SWAP_HAVE_CONFIG */
+
+static int swap_init (void) /* {{{ */
 {
 #if KERNEL_LINUX
 	/* No init stuff */
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS
@@ -149,131 +170,226 @@
 
 #elif HAVE_PERFSTAT
 	pagesize = getpagesize();
 #endif /* HAVE_PERFSTAT */
 
 	return (0);
-}
+} /* }}} int swap_init */
 
-static void swap_submit_inst (const char *plugin_instance, /* {{{ */
-		const char *type_instance, derive_t value, unsigned type)
+static void swap_submit (const char *plugin_instance, /* {{{ */
+		const char *type, const char *type_instance,
+		value_t value)
 {
-	value_t values[1];
 	value_list_t vl = VALUE_LIST_INIT;
 
-	switch (type)
-	{
-		case DS_TYPE_GAUGE:
-			values[0].gauge = (gauge_t) value;
-			sstrncpy (vl.type, "swap", sizeof (vl.type));
-			break;
-		case DS_TYPE_DERIVE:
-			values[0].derive = value;
-			sstrncpy (vl.type, "swap_io", sizeof (vl.type));
-			break;
-		default:
-			ERROR ("swap plugin: swap_submit called with wrong"
-				" type");
-	}
+	assert (type != NULL);
 
-	vl.values = values;
+	vl.values = &value;
 	vl.values_len = 1;
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "swap", sizeof (vl.plugin));
 	if (plugin_instance != NULL)
 		sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
-	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	if (type_instance != NULL)
+		sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
 	plugin_dispatch_values (&vl);
 } /* }}} void swap_submit_inst */
 
-static void swap_submit (const char *type_instance, derive_t value, unsigned type)
+static void swap_submit_gauge (const char *plugin_instance, /* {{{ */
+		const char *type_instance, gauge_t value)
 {
-	swap_submit_inst (/* plugin instance = */ NULL,
-			type_instance, value, type);
-}
+	value_t v;
+
+	v.gauge = value;
+	swap_submit (plugin_instance, "swap", type_instance, v);
+} /* }}} void swap_submit_gauge */
 
 #if KERNEL_LINUX
-static int swap_read (void) /* {{{ */
+static void swap_submit_derive (const char *plugin_instance, /* {{{ */
+		const char *type_instance, derive_t value)
+{
+	value_t v;
+
+	v.derive = value;
+	swap_submit (plugin_instance, "swap_io", type_instance, v);
+} /* }}} void swap_submit_derive */
+
+static int swap_read_separate (void) /* {{{ */
 {
 	FILE *fh;
 	char buffer[1024];
 
-	char *fields[8];
-	int numfields;
+	fh = fopen ("/proc/swaps", "r");
+	if (fh == NULL)
+	{
+		char errbuf[1024];
+		WARNING ("swap plugin: fopen (/proc/swaps) failed: %s",
+				sstrerror (errno, errbuf, sizeof (errbuf)));
+		return (-1);
+	}
+
+	while (fgets (buffer, sizeof (buffer), fh) != NULL)
+	{
+		char *fields[8];
+		int numfields;
+		char *endptr;
+
+		char path[PATH_MAX];
+		gauge_t size;
+		gauge_t used;
+		gauge_t free;
+
+		numfields = strsplit (buffer, fields, STATIC_ARRAY_SIZE (fields));
+		if (numfields != 5)
+			continue;
+
+		sstrncpy (path, fields[0], sizeof (path));
+		escape_slashes (path, sizeof (path));
+
+		errno = 0;
+		endptr = NULL;
+		size = strtod (fields[2], &endptr);
+		if ((endptr == fields[2]) || (errno != 0))
+			continue;
+
+		errno = 0;
+		endptr = NULL;
+		used = strtod (fields[3], &endptr);
+		if ((endptr == fields[3]) || (errno != 0))
+			continue;
+
+		if (size < used)
+			continue;
+
+		free = size - used;
 
-	_Bool old_kernel=0;
+		swap_submit_gauge (path, "used", used);
+		swap_submit_gauge (path, "free", free);
+	}
+
+	fclose (fh);
 
-	derive_t swap_used   = 0;
-	derive_t swap_cached = 0;
-	derive_t swap_free   = 0;
-	derive_t swap_total  = 0;
-	derive_t swap_in     = 0;
-	derive_t swap_out    = 0;
+	return (0);
+} /* }}} int swap_read_separate */
 
-	if ((fh = fopen ("/proc/meminfo", "r")) == NULL)
+static int swap_read_combined (void) /* {{{ */
+{
+	FILE *fh;
+	char buffer[1024];
+
+	uint8_t have_data = 0;
+	gauge_t swap_used   = 0.0;
+	gauge_t swap_cached = 0.0;
+	gauge_t swap_free   = 0.0;
+	gauge_t swap_total  = 0.0;
+
+	fh = fopen ("/proc/meminfo", "r");
+	if (fh == NULL)
 	{
 		char errbuf[1024];
-		WARNING ("memory: fopen: %s",
+		WARNING ("swap plugin: fopen (/proc/meminfo) failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		return (-1);
 	}
 
 	while (fgets (buffer, sizeof (buffer), fh) != NULL)
 	{
+		char *fields[8];
+		int numfields;
+
 		numfields = strsplit (buffer, fields, STATIC_ARRAY_SIZE (fields));
 		if (numfields < 2)
 			continue;
 
 		if (strcasecmp (fields[0], "SwapTotal:") == 0)
-			strtoderive (fields[1], &swap_total);
+		{
+			swap_total = strtod (fields[1], /* endptr = */ NULL);
+			have_data |= 0x01;
+		}
 		else if (strcasecmp (fields[0], "SwapFree:") == 0)
-			strtoderive (fields[1], &swap_free);
+		{
+			swap_free = strtod (fields[1], /* endptr = */ NULL);
+			have_data |= 0x02;
+		}
 		else if (strcasecmp (fields[0], "SwapCached:") == 0)
-			strtoderive (fields[1], &swap_cached);
+		{
+			swap_cached = strtod (fields[1], /* endptr = */ NULL);
+			have_data |= 0x04;
+		}
 	}
 
-	if (fclose (fh))
-	{
-		char errbuf[1024];
-		WARNING ("memory: fclose: %s",
-				sstrerror (errno, errbuf, sizeof (errbuf)));
-	}
+	fclose (fh);
 
-	if ((swap_free + swap_cached) > swap_total)
-		return (-1);
+	if (have_data != 0x07)
+		return (ENOENT);
+
+	if (isnan (swap_total)
+			|| (swap_total <= 0.0)
+			|| ((swap_free + swap_cached) > swap_total))
+		return (EINVAL);
 
 	swap_used = swap_total - (swap_free + swap_cached);
 
-	if ((fh = fopen ("/proc/vmstat", "r")) == NULL)
-	{
-		// /proc/vmstat does not exist in kernels <2.6
-		if ((fh = fopen ("/proc/stat", "r")) == NULL )
+	swap_submit_gauge (NULL, "used",   1024.0 * swap_used);
+	swap_submit_gauge (NULL, "free",   1024.0 * swap_free);
+	swap_submit_gauge (NULL, "cached", 1024.0 * swap_cached);
+
+	return (0);
+} /* }}} int swap_read_combined */
+
+static int swap_read_io (void) /* {{{ */
+{
+	FILE *fh;
+	char buffer[1024];
+
+	_Bool old_kernel = 0;
+
+	uint8_t have_data = 0;
+	derive_t swap_in  = 0;
+	derive_t swap_out = 0;
+
+	fh = fopen ("/proc/vmstat", "r");
+	if (fh == NULL)
+	{
+		/* /proc/vmstat does not exist in kernels <2.6 */
+		fh = fopen ("/proc/stat", "r");
+		if (fh == NULL)
 		{
 			char errbuf[1024];
 			WARNING ("swap: fopen: %s",
 					sstrerror (errno, errbuf, sizeof (errbuf)));
 			return (-1);
 		}
 		else
 			old_kernel = 1;
 	}
 
 	while (fgets (buffer, sizeof (buffer), fh) != NULL)
 	{
+		char *fields[8];
+		int numfields;
+
 		numfields = strsplit (buffer, fields, STATIC_ARRAY_SIZE (fields));
 
 		if (!old_kernel)
 		{
 			if (numfields != 2)
 				continue;
 
 			if (strcasecmp ("pswpin", fields[0]) == 0)
+			{
 				strtoderive (fields[1], &swap_in);
+				have_data |= 0x01;
+			}
 			else if (strcasecmp ("pswpout", fields[0]) == 0)
+			{
 				strtoderive (fields[1], &swap_out);
+				have_data |= 0x02;
+			}
 		}
 		else /* if (old_kernel) */
 		{
 			if (numfields != 3)
 				continue;
 
@@ -282,24 +398,31 @@
 				strtoderive (fields[1], &swap_in);
 				strtoderive (fields[2], &swap_out);
 			}
 		}
 	} /* while (fgets) */
 
-	if (fclose (fh))
-	{
-		char errbuf[1024];
-		WARNING ("swap: fclose: %s",
-				sstrerror (errno, errbuf, sizeof (errbuf)));
-	}
+	fclose (fh);
+
+	if (have_data != 0x03)
+		return (ENOENT);
+
+	swap_submit_derive (NULL, "in",  swap_in);
+	swap_submit_derive (NULL, "out", swap_out);
+
+	return (0);
+} /* }}} int swap_read_io */
+
+static int swap_read (void) /* {{{ */
+{
+	if (report_by_device)
+		swap_read_separate ();
+	else
+		swap_read_combined ();
 
-	swap_submit ("used",   1024 * swap_used,   DS_TYPE_GAUGE);
-	swap_submit ("free",   1024 * swap_free,   DS_TYPE_GAUGE);
-	swap_submit ("cached", 1024 * swap_cached, DS_TYPE_GAUGE);
-	swap_submit ("in",  swap_in,  DS_TYPE_DERIVE);
-	swap_submit ("out", swap_out, DS_TYPE_DERIVE);
+	swap_read_io ();
 
 	return (0);
 } /* }}} int swap_read */
 /* #endif KERNEL_LINUX */
 
 /*
@@ -352,15 +475,15 @@
 	 */
 	swap_alloc  = (derive_t) ((ai.ani_max - ai.ani_free) * pagesize);
 	swap_resv   = (derive_t) ((ai.ani_resv + ai.ani_free - ai.ani_max)
 			* pagesize);
 	swap_avail  = (derive_t) ((ai.ani_max - ai.ani_resv) * pagesize);
 
-	swap_submit ("used", swap_alloc, DS_TYPE_GAUGE);
-	swap_submit ("free", swap_avail, DS_TYPE_GAUGE);
-	swap_submit ("reserved", swap_resv, DS_TYPE_GAUGE);
+	swap_submit_gauge (NULL, "used", swap_alloc);
+	swap_submit_gauge (NULL, "free", swap_avail);
+	swap_submit_gauge (NULL, "reserved", swap_resv);
 
 	return (0);
 } /* }}} int swap_read_kstat */
 /* #endif 0 && HAVE_LIBKSTAT */
 
 #elif HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS
@@ -451,31 +574,17 @@
 		{
 			avail += this_avail;
 			total += this_total;
 			continue;
 		}
 
-		/* Okay, using "/" as swap device would be super-weird, but
-		 * we'll handle it anyway to cover all cases. */
-		if (strcmp ("/", s->swt_ent[i].ste_path) == 0)
-			sstrncpy (path, "root", sizeof (path));
-		else
-		{
-			int j;
-
-			s->swt_ent[i].ste_path[PATH_MAX - 1] = 0;
-			/* Don't copy the leading slash */
-			sstrncpy (path, &s->swt_ent[i].ste_path[1], sizeof (path));
-			/* Convert slashes to dashes, just like the "df" plugin. */
-			for (j = 0; path[j] != 0; j++)
-				if (path[j] == '/')
-					path[j] = '-';
-		}
+		sstrncpy (path, s->swt_ent[i].ste_path, sizeof (path));
+		escape_slashes (path, sizeof (path));
 
-		swap_submit_inst (path, "used", this_total - this_avail, DS_TYPE_GAUGE);
-		swap_submit_inst (path, "free", this_avail, DS_TYPE_GAUGE);
+		swap_submit_gauge (path, "used", (gauge_t) (this_total - this_avail));
+		swap_submit_gauge (path, "free", (gauge_t) this_avail);
         } /* for (swap_num) */
 
         if (total < avail)
         {
                 ERROR ("swap plugin: Total swap space (%"PRIi64") "
                                 "is less than free swap space (%"PRIi64").",
@@ -486,38 +595,20 @@
         }
 
 	/* If the "separate" option was specified (report_by_device == 2), all
 	 * values have already been dispatched from within the loop. */
 	if (!report_by_device)
 	{
-		swap_submit ("used", total - avail, DS_TYPE_GAUGE);
-		swap_submit ("free", avail, DS_TYPE_GAUGE);
+		swap_submit_gauge (NULL, "used", (gauge_t) (total - avail));
+		swap_submit_gauge (NULL, "free", (gauge_t) avail);
 	}
 
 	sfree (s_paths);
         sfree (s);
 	return (0);
 } /* }}} int swap_read */
-
-/* Configuration: Present when swapctl or both methods are available. */
-static int swap_config (const char *key, const char *value) /* {{{ */
-{
-	if (strcasecmp ("ReportByDevice", key) == 0)
-	{
-		if (IS_TRUE (value))
-			report_by_device = 1;
-		else
-			report_by_device = 0;
-	}
-	else
-	{
-		return (-1);
-	}
-
-	return (0);
-} /* }}} int swap_config */
 /* #endif HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS */
 
 #elif HAVE_SWAPCTL && HAVE_SWAPCTL_THREE_ARGS
 static int swap_read (void) /* {{{ */
 {
 	struct swapent *swap_entries;
@@ -576,14 +667,14 @@
 		ERROR ("swap plugin: Total swap space (%"PRIu64") "
 				"is less than used swap space (%"PRIu64").",
 				total, used);
 		return (-1);
 	}
 
-	swap_submit ("used", used, DS_TYPE_GAUGE);
-	swap_submit ("free", total - used, DS_TYPE_GAUGE);
+	swap_submit_gauge (NULL, "used", (gauge_t) used);
+	swap_submit_gauge (NULL, "free", (gauge_t) (total - used));
 
 	sfree (swap_entries);
 
 	return (0);
 } /* }}} int swap_read */
 /* #endif HAVE_SWAPCTL && HAVE_SWAPCTL_THREE_ARGS */
@@ -603,14 +694,14 @@
 	sw_usage_len = sizeof (struct xsw_usage);
 
 	if (sysctl (mib, mib_len, &sw_usage, &sw_usage_len, NULL, 0) != 0)
 		return (-1);
 
 	/* The returned values are bytes. */
-	swap_submit ("used", (derive_t) sw_usage.xsu_used, DS_TYPE_GAUGE);
-	swap_submit ("free", (derive_t) sw_usage.xsu_avail, DS_TYPE_GAUGE);
+	swap_submit_gauge (NULL, "used", (gauge_t) sw_usage.xsu_used);
+	swap_submit_gauge (NULL, "free", (gauge_t) sw_usage.xsu_avail);
 
 	return (0);
 } /* }}} int swap_read */
 /* #endif VM_SWAPUSAGE */
 
 #elif HAVE_LIBKVM_GETSWAPINFO
@@ -636,14 +727,14 @@
 
 	total *= (derive_t) kvm_pagesize;
 	used  *= (derive_t) kvm_pagesize;
 
 	free = total - used;
 
-	swap_submit ("used", used, DS_TYPE_GAUGE);
-	swap_submit ("free", free, DS_TYPE_GAUGE);
+	swap_submit_gauge (NULL, "used", (gauge_t) used);
+	swap_submit_gauge (NULL, "free", (gauge_t) free);
 
 	return (0);
 } /* }}} int swap_read */
 /* #endif HAVE_LIBKVM_GETSWAPINFO */
 
 #elif HAVE_LIBSTATGRAB
@@ -653,14 +744,14 @@
 
 	swap = sg_get_swap_stats ();
 
 	if (swap == NULL)
 		return (-1);
 
-	swap_submit ("used", (derive_t) swap->used, DS_TYPE_GAUGE);
-	swap_submit ("free", (derive_t) swap->free, DS_TYPE_GAUGE);
+	swap_submit_gauge (NULL, "used", (gauge_t) swap->used);
+	swap_submit_gauge (NULL, "free", (gauge_t) swap->free);
 
 	return (0);
 } /* }}} int swap_read */
 /* #endif  HAVE_LIBSTATGRAB */
 
 #elif HAVE_PERFSTAT
@@ -670,22 +761,22 @@
 	{
                 char errbuf[1024];
                 WARNING ("memory plugin: perfstat_memory_total failed: %s",
                         sstrerror (errno, errbuf, sizeof (errbuf)));
                 return (-1);
         }
-	swap_submit ("used", (derive_t) (pmemory.pgsp_total - pmemory.pgsp_free) * pagesize, DS_TYPE_GAUGE);
-	swap_submit ("free", (derive_t) pmemory.pgsp_free * pagesize , DS_TYPE_GAUGE);
+	swap_submit_gauge (NULL, "used", (gauge_t) (pmemory.pgsp_total - pmemory.pgsp_free) * pagesize);
+	swap_submit_gauge (NULL, "free", (gauge_t) pmemory.pgsp_free * pagesize );
 
 	return (0);
 } /* }}} int swap_read */
 #endif /* HAVE_PERFSTAT */
 
 void module_register (void)
 {
-#if HAVE_SWAPCTL && HAVE_SWAPCTL_TWO_ARGS
+#if SWAP_HAVE_CONFIG
 	plugin_register_config ("swap", swap_config, config_keys, config_keys_num);
 #endif
 	plugin_register_init ("swap", swap_init);
 	plugin_register_read ("swap", swap_read);
 } /* void module_register */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/syslog.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/syslog.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/syslog.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/syslog.c	2012-04-02 16:04:58.000000000 +0800
@@ -30,43 +30,35 @@
 
 #if COLLECT_DEBUG
 static int log_level = LOG_DEBUG;
 #else
 static int log_level = LOG_INFO;
 #endif /* COLLECT_DEBUG */
+static int notif_severity = 0;
 
 static const char *config_keys[] =
 {
-	"LogLevel"
+	"LogLevel",
+	"NotifyLevel",
 };
 static int config_keys_num = STATIC_ARRAY_SIZE(config_keys);
 
 static int sl_config (const char *key, const char *value)
 {
 	if (strcasecmp (key, "LogLevel") == 0)
 	{
-		if ((strcasecmp (value, "emerg") == 0)
-				|| (strcasecmp (value, "alert") == 0)
-				|| (strcasecmp (value, "crit") == 0)
-				|| (strcasecmp (value, "err") == 0))
-			log_level = LOG_ERR;
-		else if (strcasecmp (value, "warning") == 0)
-			log_level = LOG_WARNING;
-		else if (strcasecmp (value, "notice") == 0)
-			log_level = LOG_NOTICE;
-		else if (strcasecmp (value, "info") == 0)
-			log_level = LOG_INFO;
-#if COLLECT_DEBUG
-		else if (strcasecmp (value, "debug") == 0)
-			log_level = LOG_DEBUG;
-#endif
-		else
+		log_level = parse_log_severity (value);
+		if (log_level < 0)
+			return (1);
+	}
+	else if (strcasecmp (key, "NotifyLevel") == 0)
+	{
+		notif_severity = parse_notif_severity (value);
+		if (notif_severity < 0)
 			return (1);
 	}
-	else
-		return (-1);
 
 	return (0);
 } /* int sl_config */
 
 static void sl_log (int severity, const char *msg,
 		user_data_t __attribute__((unused)) *user_data)
@@ -81,14 +73,80 @@
 {
 	closelog ();
 
 	return (0);
 }
 
+static int sl_notification (const notification_t *n,
+		user_data_t __attribute__((unused)) *user_data)
+{
+	char  buf[1024] = "";
+	size_t offset = 0;
+	int log_severity;
+	char *severity_string;
+	int status;
+
+	if (n->severity > notif_severity)
+		return (0);
+
+	switch (n->severity)
+	{
+		case NOTIF_FAILURE:
+			severity_string = "FAILURE";
+			log_severity = LOG_ERR;
+			break;
+		case NOTIF_WARNING:
+			severity_string = "WARNING";
+			log_severity = LOG_WARNING;
+			break;
+		case NOTIF_OKAY:
+			severity_string = "OKAY";
+			log_severity = LOG_NOTICE;
+			break;
+		default:
+			severity_string = "UNKNOWN";
+			log_severity = LOG_ERR;
+	}
+
+#define BUFFER_ADD(...) do { \
+	status = ssnprintf (&buf[offset], sizeof (buf) - offset, \
+			__VA_ARGS__); \
+	if (status < 1) \
+		return (-1); \
+	else if (((size_t) status) >= (sizeof (buf) - offset)) \
+		return (-ENOMEM); \
+	else \
+		offset += ((size_t) status); \
+} while (0)
+
+#define BUFFER_ADD_FIELD(field) do { \
+	if (n->field[0]) \
+		BUFFER_ADD (", " #field " = %s", n->field); \
+} while (0)
+
+	BUFFER_ADD ("Notification: severity = %s", severity_string);
+	BUFFER_ADD_FIELD (host);
+	BUFFER_ADD_FIELD (plugin);
+	BUFFER_ADD_FIELD (plugin_instance);
+	BUFFER_ADD_FIELD (type);
+	BUFFER_ADD_FIELD (type_instance);
+	BUFFER_ADD_FIELD (message);
+
+#undef BUFFER_ADD_FIELD
+#undef BUFFER_ADD
+
+	buf[sizeof (buf) - 1] = '\0';
+
+	sl_log (log_severity, buf, NULL);
+
+	return (0);
+} /* int sl_notification */
+
 void module_register (void)
 {
 	openlog ("collectd", LOG_CONS | LOG_PID, LOG_DAEMON);
 
 	plugin_register_config ("syslog", sl_config, config_keys, config_keys_num);
 	plugin_register_log ("syslog", sl_log, /* user_data = */ NULL);
+	plugin_register_notification ("syslog", sl_notification, NULL);
 	plugin_register_shutdown ("syslog", sl_shutdown);
 } /* void module_register(void) */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/target_scale.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/target_scale.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/target_scale.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/target_scale.c	2012-04-02 16:04:58.000000000 +0800
@@ -26,12 +26,15 @@
 #include "utils_cache.h"
 
 struct ts_data_s
 {
 	double factor;
 	double offset;
+
+	char **data_sources;
+	size_t data_sources_num;
 };
 typedef struct ts_data_s ts_data_t;
 
 static int ts_invoke_counter (const data_set_t *ds, value_list_t *vl, /* {{{ */
 		ts_data_t *data, int dsrc_index)
 {
@@ -297,23 +300,92 @@
 	*ret = ci->values[0].value.number;
 	DEBUG ("ts_config_set_double: *ret = %g", *ret);
 
 	return (0);
 } /* }}} int ts_config_set_double */
 
+static int ts_config_add_data_source(ts_data_t *data, /* {{{ */
+		oconfig_item_t *ci)
+{
+	size_t new_data_sources_num;
+	char **temp;
+	int i;
+
+	/* Check number of arbuments. */
+	if (ci->values_num < 1)
+	{
+		ERROR ("`value' match: `%s' needs at least one argument.",
+				ci->key);
+		return (-1);
+	}
+
+	/* Check type of arguments */
+	for (i = 0; i < ci->values_num; i++)
+	{
+		if (ci->values[i].type == OCONFIG_TYPE_STRING)
+			continue;
+
+		ERROR ("`value' match: `%s' accepts only string arguments "
+				"(argument %i is a %s).",
+				ci->key, i + 1,
+				(ci->values[i].type == OCONFIG_TYPE_BOOLEAN)
+				? "truth value" : "number");
+		return (-1);
+	}
+
+	/* Allocate space for the char pointers */
+	new_data_sources_num = data->data_sources_num + ((size_t) ci->values_num);
+	temp = (char **) realloc (data->data_sources,
+			new_data_sources_num * sizeof (char *));
+	if (temp == NULL)
+	{
+		ERROR ("`value' match: realloc failed.");
+		return (-1);
+	}
+	data->data_sources = temp;
+
+	/* Copy the strings, allocating memory as needed.  */
+	for (i = 0; i < ci->values_num; i++)
+	{
+		size_t j;
+
+		/* If we get here, there better be memory for us to write to.  */
+		assert (data->data_sources_num < new_data_sources_num);
+
+		j = data->data_sources_num;
+		data->data_sources[j] = sstrdup (ci->values[i].value.string);
+		if (data->data_sources[j] == NULL)
+		{
+			ERROR ("`value' match: sstrdup failed.");
+			continue;
+		}
+		data->data_sources_num++;
+	}
+
+	return (0);
+} /* }}} int ts_config_add_data_source */
+
 static int ts_destroy (void **user_data) /* {{{ */
 {
-	ts_data_t **data;
+	ts_data_t *data;
 
 	if (user_data == NULL)
 		return (-EINVAL);
 
-	data = (ts_data_t **) user_data;
+	data = (ts_data_t *) *user_data;
+
+	if ((data != NULL) && (data->data_sources != NULL))
+	{
+		size_t i;
+		for (i = 0; i < data->data_sources_num; i++)
+			sfree (data->data_sources[i]);
+		sfree (data->data_sources);
+	}
 
-	free (*data);
-	*data = NULL;
+	sfree (data);
+	*user_data = NULL;
 
 	return (0);
 } /* }}} int ts_destroy */
 
 static int ts_create (const oconfig_item_t *ci, void **user_data) /* {{{ */
 {
@@ -338,12 +410,14 @@
 		oconfig_item_t *child = ci->children + i;
 
 		if (strcasecmp ("Factor", child->key) == 0)
 				status = ts_config_set_double (&data->factor, child);
 		else if (strcasecmp ("Offset", child->key) == 0)
 				status = ts_config_set_double (&data->offset, child);
+		else if (strcasecmp ("DataSource", child->key) == 0)
+				status = ts_config_add_data_source(data, child);
 		else
 		{
 			ERROR ("Target `scale': The `%s' configuration option is not understood "
 					"and will be ignored.", child->key);
 			status = 0;
 		}
@@ -390,12 +464,24 @@
 		ERROR ("Target `scale': Invoke: `data' is NULL.");
 		return (-EINVAL);
 	}
 
 	for (i = 0; i < ds->ds_num; i++)
 	{
+		/* If we've got a list of data sources, is it in the list? */
+		if (data->data_sources) {
+			size_t j;
+			for (j = 0; j < data->data_sources_num; j++)
+				if (strcasecmp(ds->ds[i].name, data->data_sources[j]) == 0)
+					break;
+
+			/* No match, ignore */
+			if (j >= data->data_sources_num)
+				continue;
+		}
+
 		if (ds->ds[i].type == DS_TYPE_COUNTER)
 			ts_invoke_counter (ds, vl, data, i);
 		else if (ds->ds[i].type == DS_TYPE_GAUGE)
 			ts_invoke_gauge (ds, vl, data, i);
 		else if (ds->ds[i].type == DS_TYPE_DERIVE)
 			ts_invoke_derive (ds, vl, data, i);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/tcpconns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/tcpconns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/tcpconns.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/tcpconns.c	2012-04-02 16:04:58.000000000 +0800
@@ -62,13 +62,13 @@
 #include "plugin.h"
 
 #if defined(__OpenBSD__) || defined(__NetBSD__)
 #undef HAVE_SYSCTLBYNAME /* force HAVE_LIBKVM_NLIST path */
 #endif
 
-#if !KERNEL_LINUX && !HAVE_SYSCTLBYNAME && !HAVE_LIBKVM_NLIST
+#if !KERNEL_LINUX && !HAVE_SYSCTLBYNAME && !HAVE_LIBKVM_NLIST && !KERNEL_AIX
 # error "No applicable input method."
 #endif
 
 #if KERNEL_LINUX
 /* #endif KERNEL_LINUX */
 
@@ -119,13 +119,18 @@
 # if !defined(HAVE_BSD_NLIST_H) || !HAVE_BSD_NLIST_H
 #  include <nlist.h>
 # else /* HAVE_BSD_NLIST_H */
 #  include <bsd/nlist.h>
 # endif
 # include <kvm.h>
-#endif /* HAVE_LIBKVM_NLIST */
+/* #endif HAVE_LIBKVM_NLIST */
+
+#elif KERNEL_AIX
+# include <arpa/inet.h>
+# include <sys/socketvar.h>
+#endif /* KERNEL_AIX */
 
 #if KERNEL_LINUX
 static const char *tcp_state[] =
 {
   "", /* 0 */
   "ESTABLISHED",
@@ -187,13 +192,55 @@
 static u_long      inpcbtable_off = 0;
 struct inpcbtable *inpcbtable_ptr = NULL;
 
 # define TCP_STATE_LISTEN 1
 # define TCP_STATE_MIN 1
 # define TCP_STATE_MAX 10
-#endif /* HAVE_LIBKVM_NLIST */
+/* #endif HAVE_LIBKVM_NLIST */
+
+#elif KERNEL_AIX
+static const char *tcp_state[] =
+{
+  "CLOSED",
+  "LISTEN",
+  "SYN_SENT",
+  "SYN_RCVD",
+  "ESTABLISHED",
+  "CLOSE_WAIT",
+  "FIN_WAIT_1",
+  "CLOSING",
+  "LAST_ACK",
+  "FIN_WAIT_2",
+  "TIME_WAIT"
+};
+
+# define TCP_STATE_LISTEN 1
+# define TCP_STATE_MIN 0
+# define TCP_STATE_MAX 10
+
+struct netinfo_conn {
+  uint32_t unknow1[2];
+  uint16_t dstport;
+  uint16_t unknow2;
+  struct in6_addr dstaddr;
+  uint16_t srcport;
+  uint16_t unknow3;
+  struct in6_addr srcaddr;
+  uint32_t unknow4[36];
+  uint16_t tcp_state;
+  uint16_t unknow5[7];
+};
+
+struct netinfo_header {
+  unsigned int proto;
+  unsigned int size;
+};
+
+# define NETINFO_TCP 3
+extern int netinfo (int proto, void *data, int *size,  int n);
+#endif /* KERNEL_AIX */
 
 #define PORT_COLLECT_LOCAL  0x01
 #define PORT_COLLECT_REMOTE 0x02
 #define PORT_IS_LISTENING   0x04
 
 typedef struct port_entry_s
@@ -707,24 +754,86 @@
   } /* while (next != head) */
 
   conn_submit_all ();
 
   return (0);
 }
-#endif /* HAVE_LIBKVM_NLIST */
+/* #endif HAVE_LIBKVM_NLIST */
+
+#elif KERNEL_AIX
+
+static int conn_read (void)
+{
+  int size;
+  int i;
+  int nconn;
+  void *data;
+  struct netinfo_header *header;
+  struct netinfo_conn *conn;
+
+  conn_reset_port_entry ();
+
+  size = netinfo(NETINFO_TCP, 0, 0, 0);
+  if (size < 0)
+  {
+    ERROR ("tcpconns plugin: netinfo failed return: %i", size);
+    return (-1);
+  }
+
+  if (size == 0)
+    return (0);
+
+  if ((size - sizeof (struct netinfo_header)) % sizeof (struct netinfo_conn))
+  {
+    ERROR ("tcpconns plugin: invalid buffer size");
+    return (-1);
+  }
+
+  data = malloc(size);
+  if (data == NULL)
+  {
+    ERROR ("tcpconns plugin: malloc failed");
+    return (-1);
+  }
+
+  if (netinfo(NETINFO_TCP, data, &size, 0) < 0)
+  {
+    ERROR ("tcpconns plugin: netinfo failed");
+    free(data);
+    return (-1);
+  }
+
+  header = (struct netinfo_header *)data;
+  nconn = header->size;
+  conn = (struct netinfo_conn *)(data + sizeof(struct netinfo_header));
+
+  for (i=0; i < nconn; conn++, i++)
+  {
+    conn_handle_ports (conn->srcport, conn->dstport, conn->tcp_state);
+  }
+
+  free(data);
+
+  conn_submit_all ();
+
+  return (0);
+}
+#endif /* KERNEL_AIX */
 
 void module_register (void)
 {
 	plugin_register_config ("tcpconns", conn_config,
 			config_keys, config_keys_num);
 #if KERNEL_LINUX
 	plugin_register_init ("tcpconns", conn_init);
 #elif HAVE_SYSCTLBYNAME
 	/* no initialization */
 #elif HAVE_LIBKVM_NLIST
 	plugin_register_init ("tcpconns", conn_init);
+#elif KERNEL_AIX
+	/* no initialization */
 #endif
 	plugin_register_read ("tcpconns", conn_read);
 } /* void module_register */
 
 /*
  * vim: set shiftwidth=2 softtabstop=2 tabstop=8 fdm=marker :
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/threshold.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/threshold.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/threshold.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/threshold.c	2012-04-02 16:04:58.000000000 +0800
@@ -36,12 +36,13 @@
  * Private data structures
  * {{{ */
 #define UT_FLAG_INVERT  0x01
 #define UT_FLAG_PERSIST 0x02
 #define UT_FLAG_PERCENTAGE 0x04
 #define UT_FLAG_INTERESTING 0x08
+#define UT_FLAG_PERSIST_OK 0x10
 typedef struct threshold_s
 {
   char host[DATA_MAX_NAME_LEN];
   char plugin[DATA_MAX_NAME_LEN];
   char plugin_instance[DATA_MAX_NAME_LEN];
   char type[DATA_MAX_NAME_LEN];
@@ -375,12 +376,14 @@
     else if (strcasecmp ("Interesting", option->key) == 0)
       status = cf_util_get_flag (option, &th.flags, UT_FLAG_INTERESTING);
     else if (strcasecmp ("Invert", option->key) == 0)
       status = cf_util_get_flag (option, &th.flags, UT_FLAG_INVERT);
     else if (strcasecmp ("Persist", option->key) == 0)
       status = cf_util_get_flag (option, &th.flags, UT_FLAG_PERSIST);
+    else if (strcasecmp ("PersistOK", option->key) == 0)
+      status = cf_util_get_flag (option, &th.flags, UT_FLAG_PERSIST_OK);
     else if (strcasecmp ("Percentage", option->key) == 0)
       status = cf_util_get_flag (option, &th.flags, UT_FLAG_PERCENTAGE);
     else if (strcasecmp ("Hits", option->key) == 0)
       status = ut_config_type_hits (&th, option);
     else if (strcasecmp ("Hysteresis", option->key) == 0)
       status = ut_config_type_hysteresis (&th, option);
@@ -509,63 +512,12 @@
     if (status != 0)
       break;
   }
 
   return (status);
 } /* int ut_config_host */
-
-int ut_config (oconfig_item_t *ci)
-{
-  int i;
-  int status = 0;
-
-  threshold_t th;
-
-  if (threshold_tree == NULL)
-  {
-    threshold_tree = c_avl_create ((void *) strcmp);
-    if (threshold_tree == NULL)
-    {
-      ERROR ("ut_config: c_avl_create failed.");
-      return (-1);
-    }
-  }
-
-  memset (&th, '\0', sizeof (th));
-  th.warning_min = NAN;
-  th.warning_max = NAN;
-  th.failure_min = NAN;
-  th.failure_max = NAN;
-
-  th.hits = 0;
-  th.hysteresis = 0;
-  th.flags = UT_FLAG_INTERESTING; /* interesting by default */
-    
-  for (i = 0; i < ci->children_num; i++)
-  {
-    oconfig_item_t *option = ci->children + i;
-    status = 0;
-
-    if (strcasecmp ("Type", option->key) == 0)
-      status = ut_config_type (&th, option);
-    else if (strcasecmp ("Plugin", option->key) == 0)
-      status = ut_config_plugin (&th, option);
-    else if (strcasecmp ("Host", option->key) == 0)
-      status = ut_config_host (&th, option);
-    else
-    {
-      WARNING ("threshold values: Option `%s' not allowed here.", option->key);
-      status = -1;
-    }
-
-    if (status != 0)
-      break;
-  }
-
-  return (status);
-} /* int um_config */
 /*
  * End of the functions used to configure threshold values.
  */
 /* }}} */
 
 /*
@@ -591,33 +543,34 @@
   int status;
 
   /* Check if hits matched */
   if ( (th->hits != 0) )
   {
     int hits = uc_get_hits(ds,vl);
-    /* The STATE_OKAY always reset hits, or if hits reaise the limit */
-    if ( (state == STATE_OKAY) || (hits > th->hits) )
+    /* STATE_OKAY resets hits unless PERSIST_OK flag is set. Hits resets if
+     * threshold is hit. */
+    if ( ( (state == STATE_OKAY) && ((th->flags & UT_FLAG_PERSIST_OK) == 0) ) || (hits > th->hits) )
     {
         DEBUG("ut_report_state: reset uc_get_hits = 0");
         uc_set_hits(ds,vl,0); /* reset hit counter and notify */
     } else {
       DEBUG("ut_report_state: th->hits = %d, uc_get_hits = %d",th->hits,uc_get_hits(ds,vl));
       (void) uc_inc_hits(ds,vl,1); /* increase hit counter */
       return (0);
     }
   } /* end check hits */
 
   state_old = uc_get_state (ds, vl);
 
-  /* If the state didn't change, only report if `persistent' is specified and
-   * the state is not `okay'. */
+  /* If the state didn't change, report if `persistent' is specified. If the
+   * state is `okay', then only report if `persist_ok` flag is set. */
   if (state == state_old)
   {
     if ((th->flags & UT_FLAG_PERSIST) == 0)
       return (0);
-    else if (state == STATE_OKAY)
+    else if ( (state == STATE_OKAY) && ((th->flags & UT_FLAG_PERSIST_OK) == 0) )
       return (0);
   }
 
   if (state != state_old)
     uc_set_state (ds, vl, state);
 
@@ -987,12 +940,16 @@
 { /* {{{ */
   threshold_t *th;
   cdtime_t missing_time;
   char identifier[6 * DATA_MAX_NAME_LEN];
   notification_t n;
 
+  /* dispatch notifications for "interesting" values only */
+  if (threshold_tree == NULL)
+    return (0);
+
   th = threshold_search (vl);
   if (th == NULL)
     return (0);
 
   missing_time = cdtime () - vl->time;
   FORMAT_VL (identifier, sizeof (identifier), vl);
@@ -1004,16 +961,70 @@
 
   plugin_dispatch_notification (&n);
 
   return (0);
 } /* }}} int ut_missing */
 
+int ut_config (oconfig_item_t *ci)
+{ /* {{{ */
+  int i;
+  int status = 0;
+
+  threshold_t th;
+
+  if (threshold_tree == NULL)
+  {
+    threshold_tree = c_avl_create ((void *) strcmp);
+    if (threshold_tree == NULL)
+    {
+      ERROR ("ut_config: c_avl_create failed.");
+      return (-1);
+    }
+  }
+
+  memset (&th, '\0', sizeof (th));
+  th.warning_min = NAN;
+  th.warning_max = NAN;
+  th.failure_min = NAN;
+  th.failure_max = NAN;
+
+  th.hits = 0;
+  th.hysteresis = 0;
+  th.flags = UT_FLAG_INTERESTING; /* interesting by default */
+    
+  for (i = 0; i < ci->children_num; i++)
+  {
+    oconfig_item_t *option = ci->children + i;
+    status = 0;
+
+    if (strcasecmp ("Type", option->key) == 0)
+      status = ut_config_type (&th, option);
+    else if (strcasecmp ("Plugin", option->key) == 0)
+      status = ut_config_plugin (&th, option);
+    else if (strcasecmp ("Host", option->key) == 0)
+      status = ut_config_host (&th, option);
+    else
+    {
+      WARNING ("threshold values: Option `%s' not allowed here.", option->key);
+      status = -1;
+    }
+
+    if (status != 0)
+      break;
+  }
+
+  if (c_avl_size (threshold_tree) > 0) {
+    plugin_register_missing ("threshold", ut_missing,
+        /* user data = */ NULL);
+    plugin_register_write ("threshold", ut_check_threshold,
+        /* user data = */ NULL);
+  }
+
+  return (status);
+} /* }}} int um_config */
+
 void module_register (void)
 {
   plugin_register_complex_config ("threshold", ut_config);
-  plugin_register_missing ("threshold", ut_missing,
-      /* user data = */ NULL);
-  plugin_register_write ("threshold", ut_check_threshold,
-      /* user data = */ NULL);
 }
 
 /* vim: set sw=2 ts=8 sts=2 tw=78 et fdm=marker : */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/types.db /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/types.db
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/types.db	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/types.db	2012-04-02 16:04:58.000000000 +0800
@@ -5,12 +5,13 @@
 apache_requests		value:DERIVE:0:U
 apache_scoreboard	value:GAUGE:0:65535
 ath_nodes		value:GAUGE:0:65535
 ath_stat		value:DERIVE:0:U
 bitrate			value:GAUGE:0:4294967295
 bytes			value:GAUGE:0:U
+cache_eviction		value:DERIVE:0:U
 cache_operation		value:DERIVE:0:U
 cache_ratio		value:GAUGE:0:100
 cache_result		value:DERIVE:0:U
 cache_size		value:GAUGE:0:4294967295
 charge			value:GAUGE:0:U
 compression_ratio	value:GAUGE:0:2
@@ -60,12 +61,13 @@
 files			value:GAUGE:0:U
 fork_rate		value:DERIVE:0:U
 frequency		value:GAUGE:0:U
 frequency_offset	value:GAUGE:-1000000:1000000
 fscache_stat		value:DERIVE:0:U
 gauge			value:GAUGE:U:U
+hash_collisions		value:DERIVE:0:U
 http_request_methods	value:DERIVE:0:U
 http_requests		value:DERIVE:0:U
 http_response_codes	value:DERIVE:0:U
 humidity		value:GAUGE:0:100
 if_collisions		value:DERIVE:0:U
 if_dropped		rx:DERIVE:0:U, tx:DERIVE:0:U
@@ -81,19 +83,21 @@
 ipt_bytes		value:DERIVE:0:U
 ipt_packets		value:DERIVE:0:U
 irq			value:DERIVE:0:U
 latency			value:GAUGE:0:65535
 links			value:GAUGE:0:U
 load			shortterm:GAUGE:0:100, midterm:GAUGE:0:100, longterm:GAUGE:0:100
+md_disks		value:GAUGE:0:U
 memcached_command	value:DERIVE:0:U
 memcached_connections	value:GAUGE:0:U
 memcached_items		value:GAUGE:0:U
 memcached_octets	rx:DERIVE:0:U, tx:DERIVE:0:U
 memcached_ops		value:DERIVE:0:U
 memory			value:GAUGE:0:281474976710656
 multimeter		value:GAUGE:U:U
+mutex_operations	value:DERIVE:0:U
 mysql_commands		value:DERIVE:0:U
 mysql_handler		value:DERIVE:0:U
 mysql_locks		value:DERIVE:0:U
 mysql_log_position	value:DERIVE:0:U
 mysql_octets		rx:DERIVE:0:U, tx:DERIVE:0:U
 nfs_procedure		value:DERIVE:0:U
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/types.db.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/types.db.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/types.db.5	2012-11-11 19:39:10.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/types.db.5	2012-04-02 16:16:54.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "TYPES.DB 5"
-.TH TYPES.DB 5 "2012-11-11" "5.0.5" "collectd"
+.TH TYPES.DB 5 "2012-04-02" "5.1.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 types.db \- Data\-set specifications for the system statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/unixsock.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/unixsock.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/unixsock.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/unixsock.c	2012-04-02 16:04:58.000000000 +0800
@@ -202,37 +202,34 @@
 		char errbuf[1024];
 		ERROR ("unixsock plugin: fdopen failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		close (fdin);
 		close (fdout);
 		pthread_exit ((void *) 1);
-		return ((void *) 1);
 	}
 
 	fhout = fdopen (fdout, "w");
 	if (fhout == NULL)
 	{
 		char errbuf[1024];
 		ERROR ("unixsock plugin: fdopen failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		fclose (fhin); /* this closes fdin as well */
 		close (fdout);
 		pthread_exit ((void *) 1);
-		return ((void *) 1);
 	}
 
 	/* change output buffer to line buffered mode */
 	if (setvbuf (fhout, NULL, _IOLBF, 0) != 0)
 	{
 		char errbuf[1024];
 		ERROR ("unixsock plugin: setvbuf failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		fclose (fhin);
 		fclose (fhout);
 		pthread_exit ((void *) 1);
-		return ((void *) 0);
 	}
 
 	while (42)
 	{
 		char buffer[1024];
 		char buffer_copy[1024];
@@ -240,15 +237,12 @@
 		int   fields_num;
 		int   len;
 
 		errno = 0;
 		if (fgets (buffer, sizeof (buffer), fhin) == NULL)
 		{
-			if ((errno == EINTR) || (errno == EAGAIN))
-				continue;
-
 			if (errno != 0)
 			{
 				char errbuf[1024];
 				WARNING ("unixsock plugin: failed to read from socket #%i: %s",
 						fileno (fhin),
 						sstrerror (errno, errbuf, sizeof (errbuf)));
@@ -271,13 +265,12 @@
 		if (fields_num < 1)
 		{
 			fprintf (fhout, "-1 Internal error\n");
 			fclose (fhin);
 			fclose (fhout);
 			pthread_exit ((void *) 1);
-			return ((void *) 1);
 		}
 
 		if (strcasecmp (fields[0], "getval") == 0)
 		{
 			handle_getval (fhout, buffer);
 		}
@@ -322,15 +315,12 @@
 {
 	int  status;
 	int *remote_fd;
 	pthread_t th;
 	pthread_attr_t th_attr;
 
-	pthread_attr_init (&th_attr);
-	pthread_attr_setdetachstate (&th_attr, PTHREAD_CREATE_DETACHED);
-
 	if (us_open_socket () != 0)
 		pthread_exit ((void *) 1);
 
 	while (loop != 0)
 	{
 		DEBUG ("unixsock plugin: Calling accept..");
@@ -343,13 +333,12 @@
 				continue;
 
 			ERROR ("unixsock plugin: accept failed: %s",
 					sstrerror (errno, errbuf, sizeof (errbuf)));
 			close (sock_fd);
 			sock_fd = -1;
-			pthread_attr_destroy (&th_attr);
 			pthread_exit ((void *) 1);
 		}
 
 		remote_fd = (int *) malloc (sizeof (int));
 		if (remote_fd == NULL)
 		{
@@ -360,12 +349,15 @@
 			continue;
 		}
 		*remote_fd = status;
 
 		DEBUG ("Spawning child to handle connection on fd #%i", *remote_fd);
 
+		pthread_attr_init (&th_attr);
+		pthread_attr_setdetachstate (&th_attr, PTHREAD_CREATE_DETACHED);
+
 		status = pthread_create (&th, &th_attr, us_handle_client, (void *) remote_fd);
 		if (status != 0)
 		{
 			char errbuf[1024];
 			WARNING ("unixsock plugin: pthread_create failed: %s",
 					sstrerror (errno, errbuf, sizeof (errbuf)));
@@ -374,13 +366,12 @@
 			continue;
 		}
 	} /* while (loop) */
 
 	close (sock_fd);
 	sock_fd = -1;
-	pthread_attr_destroy (&th_attr);
 
 	status = unlink ((sock_file != NULL) ? sock_file : US_DEFAULT_PATH);
 	if (status != 0)
 	{
 		char errbuf[1024];
 		NOTICE ("unixsock plugin: unlink (%s) failed: %s",
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_avltree.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_avltree.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_avltree.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_avltree.c	2012-04-02 16:04:58.000000000 +0800
@@ -48,12 +48,13 @@
 typedef struct c_avl_node_s c_avl_node_t;
 
 struct c_avl_tree_s
 {
 	c_avl_node_t *root;
 	int (*compare) (const void *, const void *);
+	int size;
 };
 
 struct c_avl_iterator_s
 {
 	c_avl_tree_t *tree;
 	c_avl_node_t *node;
@@ -476,20 +477,19 @@
 
 	if ((t = (c_avl_tree_t *) malloc (sizeof (c_avl_tree_t))) == NULL)
 		return (NULL);
 
 	t->root = NULL;
 	t->compare = compare;
+	t->size = 0;
 
 	return (t);
 }
 
 void c_avl_destroy (c_avl_tree_t *t)
 {
-	if (t == NULL)
-		return;
 	free_node (t->root);
 	free (t);
 }
 
 int c_avl_insert (c_avl_tree_t *t, void *key, void *value)
 {
@@ -552,12 +552,13 @@
 				nptr = nptr->left;
 			}
 		}
 	} /* while (42) */
 
 	verify_tree (t->root);
+	++t->size;
 	return (0);
 } /* int c_avl_insert */
 
 int c_avl_remove (c_avl_tree_t *t, const void *key, void **rkey, void **rvalue)
 {
 	c_avl_node_t *n;
@@ -573,12 +574,13 @@
 		*rkey = n->key;
 	if (rvalue != NULL)
 		*rvalue = n->value;
 
 	status = _remove (t, n);
 	verify_tree (t->root);
+	--t->size;
 	return (status);
 } /* void *c_avl_remove */
 
 int c_avl_get (c_avl_tree_t *t, const void *key, void **value)
 {
 	c_avl_node_t *n;
@@ -709,6 +711,13 @@
 } /* int c_avl_iterator_prev */
 
 void c_avl_iterator_destroy (c_avl_iterator_t *iter)
 {
 	free (iter);
 }
+
+int c_avl_size (c_avl_tree_t *t)
+{
+	if (t == NULL)
+		return (0);
+	return (t->size);
+}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_avltree.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_avltree.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_avltree.h	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_avltree.h	2012-04-02 16:04:58.000000000 +0800
@@ -145,7 +145,22 @@
 
 c_avl_iterator_t *c_avl_get_iterator (c_avl_tree_t *t);
 int c_avl_iterator_next (c_avl_iterator_t *iter, void **key, void **value);
 int c_avl_iterator_prev (c_avl_iterator_t *iter, void **key, void **value);
 void c_avl_iterator_destroy (c_avl_iterator_t *iter);
 
+/*
+ * NAME
+ *   c_avl_size
+ *
+ * DESCRIPTION
+ *   Return the size (number of nodes) of the specified tree.
+ *
+ * PARAMETERS
+ *   `t'        AVL-tree to get the size of.
+ *
+ * RETURN VALUE
+ *   Number of nodes in the tree, 0 if the tree is empty or NULL.
+ */
+int c_avl_size (c_avl_tree_t *t);
+
 #endif /* UTILS_AVLTREE_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_db_query.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_db_query.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_db_query.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_db_query.c	2012-04-02 16:04:58.000000000 +0800
@@ -181,13 +181,13 @@
 
 /*
  * Result private functions
  */
 static int udb_result_submit (udb_result_t *r, /* {{{ */
     udb_result_preparation_area_t *r_area,
-    udb_query_t const *q, udb_query_preparation_area_t *q_area)
+    const udb_query_t const *q, udb_query_preparation_area_t *q_area)
 {
   value_list_t vl = VALUE_LIST_INIT;
   size_t i;
 
   assert (r != NULL);
   assert (r_area->ds != NULL);
@@ -216,13 +216,13 @@
 
   if (q_area->interval > 0)
     vl.interval = q_area->interval;
 
   sstrncpy (vl.host, q_area->host, sizeof (vl.host));
   sstrncpy (vl.plugin, q_area->plugin, sizeof (vl.plugin));
-  sstrncpy (vl.plugin_instance, q_area->db_name, sizeof (vl.plugin_instance));
+  sstrncpy (vl.plugin_instance, q_area->db_name, sizeof (vl.type_instance));
   sstrncpy (vl.type, r->type, sizeof (vl.type));
 
   /* Set vl.type_instance {{{ */
   if (r->instances_num <= 0)
   {
     if (r->instance_prefix == NULL)
@@ -256,13 +256,13 @@
   plugin_dispatch_values (&vl);
 
   sfree (vl.values);
   return (0);
 } /* }}} void udb_result_submit */
 
-static void udb_result_finish_result (udb_result_t const *r, /* {{{ */
+static void udb_result_finish_result (const udb_result_t const *r, /* {{{ */
     udb_result_preparation_area_t *prep_area)
 {
   if ((r == NULL) || (prep_area == NULL))
     return;
 
   prep_area->ds = NULL;
@@ -272,13 +272,13 @@
   sfree (prep_area->values_buffer);
 } /* }}} void udb_result_finish_result */
 
 static int udb_result_handle_result (udb_result_t *r, /* {{{ */
     udb_query_preparation_area_t *q_area,
     udb_result_preparation_area_t *r_area,
-    udb_query_t const *q, char **column_values)
+    const udb_query_t const *q, char **column_values)
 {
   size_t i;
 
   assert (r && q_area && r_area);
 
   for (i = 0; i < r->instances_num; i++)
@@ -287,13 +287,13 @@
   for (i = 0; i < r->values_num; i++)
     r_area->values_buffer[i] = column_values[r_area->values_pos[i]];
 
   return udb_result_submit (r, r_area, q, q_area);
 } /* }}} int udb_result_handle_result */
 
-static int udb_result_prepare_result (udb_result_t const *r, /* {{{ */
+static int udb_result_prepare_result (const udb_result_t const *r, /* {{{ */
     udb_result_preparation_area_t *prep_area,
     char **column_names, size_t column_num)
 {
   size_t i;
 
   if ((r == NULL) || (prep_area == NULL))
@@ -822,13 +822,13 @@
   if ((version < q->min_version) || (version > q->max_version))
     return (0);
 
   return (1);
 } /* }}} int udb_query_check_version */
 
-void udb_query_finish_result (udb_query_t const *q, /* {{{ */
+void udb_query_finish_result (const udb_query_t const *q, /* {{{ */
     udb_query_preparation_area_t *prep_area)
 {
   udb_result_preparation_area_t *r_area;
   udb_result_t *r;
 
   if ((q == NULL) || (prep_area == NULL))
@@ -848,13 +848,13 @@
     if (r_area == NULL)
       break;
     udb_result_finish_result (r, r_area);
   }
 } /* }}} void udb_query_finish_result */
 
-int udb_query_handle_result (udb_query_t const *q, /* {{{ */
+int udb_query_handle_result (const udb_query_t const *q, /* {{{ */
     udb_query_preparation_area_t *prep_area, char **column_values)
 {
   udb_result_preparation_area_t *r_area;
   udb_result_t *r;
   int success;
   int status;
@@ -901,13 +901,13 @@
     return (-1);
   }
 
   return (0);
 } /* }}} int udb_query_handle_result */
 
-int udb_query_prepare_result (udb_query_t const *q, /* {{{ */
+int udb_query_prepare_result (const udb_query_t const *q, /* {{{ */
     udb_query_preparation_area_t *prep_area,
     const char *host, const char *plugin, const char *db_name,
     char **column_names, size_t column_num, cdtime_t interval)
 {
   udb_result_preparation_area_t *r_area;
   udb_result_t *r;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_db_query.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_db_query.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_db_query.h	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_db_query.h	2012-04-02 16:04:58.000000000 +0800
@@ -62,19 +62,19 @@
  *
  * Returns 0 if the query is NOT suitable for `version' and >0 if the
  * query IS suitable.
  */
 int udb_query_check_version (udb_query_t *q, unsigned int version);
 
-int udb_query_prepare_result (udb_query_t const *q,
+int udb_query_prepare_result (const udb_query_t const *q,
     udb_query_preparation_area_t *prep_area,
     const char *host, const char *plugin, const char *db_name,
     char **column_names, size_t column_num, cdtime_t interval);
-int udb_query_handle_result (udb_query_t const *q,
+int udb_query_handle_result (const udb_query_t const *q,
     udb_query_preparation_area_t *prep_area, char **column_values);
-void udb_query_finish_result (udb_query_t const *q,
+void udb_query_finish_result (const udb_query_t const *q,
     udb_query_preparation_area_t *prep_area);
 
 udb_query_preparation_area_t *
 udb_query_allocate_preparation_area (udb_query_t *q);
 void
 udb_query_delete_preparation_area (udb_query_preparation_area_t *q_area);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_dns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_dns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_dns.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_dns.c	2012-04-02 16:04:58.000000000 +0800
@@ -42,18 +42,12 @@
 #if HAVE_NETINET_IN_SYSTM_H
 # include <netinet/in_systm.h>
 #endif
 #if HAVE_NETINET_IN_H
 # include <netinet/in.h>
 #endif
-#if HAVE_NETINET_IP6_H
-# include <netinet/ip6.h>
-#endif
-#if HAVE_NETINET_IP_COMPAT_H
-# include <netinet/ip_compat.h>
-#endif
 #if HAVE_ARPA_INET_H
 # include <arpa/inet.h>
 #endif
 #if HAVE_SYS_SOCKET_H
 # include <sys/socket.h>
 #endif
@@ -121,13 +115,13 @@
 #ifndef PPP_CONTROL_VAL
 # define PPP_CONTROL_VAL 0x03	/* The control byte value */
 #endif
 
 #if HAVE_STRUCT_UDPHDR_UH_DPORT && HAVE_STRUCT_UDPHDR_UH_SPORT
 # define UDP_DEST uh_dport
-# define UDP_SRC  uh_sport
+# define UDP_SRC  uh_dport
 #elif HAVE_STRUCT_UDPHDR_DEST && HAVE_STRUCT_UDPHDR_SOURCE
 # define UDP_DEST dest
 # define UDP_SRC  source
 #else
 # error "`struct udphdr' is unusable."
 #endif
@@ -452,32 +446,33 @@
 handle_ipv6 (struct ip6_hdr *ipv6, int len)
 {
     char buf[PCAP_SNAPLEN];
     unsigned int offset;
     int nexthdr;
 
-    struct in6_addr c_src_addr;
+    struct in6_addr s_addr;
     uint16_t payload_len;
 
     if (0 > len)
 	return (0);
 
     offset = sizeof (struct ip6_hdr);
     nexthdr = ipv6->ip6_nxt;
-    c_src_addr = ipv6->ip6_src;
+    s_addr = ipv6->ip6_src;
     payload_len = ntohs (ipv6->ip6_plen);
 
-    if (ignore_list_match (&c_src_addr))
+    if (ignore_list_match (&s_addr))
 	    return (0);
 
     /* Parse extension headers. This only handles the standard headers, as
      * defined in RFC 2460, correctly. Fragments are discarded. */
     while ((IPPROTO_ROUTING == nexthdr) /* routing header */
 	    || (IPPROTO_HOPOPTS == nexthdr) /* Hop-by-Hop options. */
 	    || (IPPROTO_FRAGMENT == nexthdr) /* fragmentation header. */
 	    || (IPPROTO_DSTOPTS == nexthdr) /* destination options. */
+	    || (IPPROTO_DSTOPTS == nexthdr) /* destination options. */
 	    || (IPPROTO_AH == nexthdr) /* destination options. */
 	    || (IPPROTO_ESP == nexthdr)) /* encapsulating security payload. */
     {
 	struct ip6_ext ext_hdr;
 	uint16_t ext_hdr_len;
 
@@ -529,21 +524,21 @@
 
 static int
 handle_ip(const struct ip *ip, int len)
 {
     char buf[PCAP_SNAPLEN];
     int offset = ip->ip_hl << 2;
-    struct in6_addr c_src_addr;
-    struct in6_addr c_dst_addr;
+    struct in6_addr s_addr;
+    struct in6_addr d_addr;
 
     if (ip->ip_v == 6)
 	return (handle_ipv6 ((void *) ip, len));
 
-    in6_addr_from_buffer (&c_src_addr, &ip->ip_src.s_addr, sizeof (ip->ip_src.s_addr), AF_INET);
-    in6_addr_from_buffer (&c_dst_addr, &ip->ip_dst.s_addr, sizeof (ip->ip_dst.s_addr), AF_INET);
-    if (ignore_list_match (&c_src_addr))
+    in6_addr_from_buffer (&s_addr, &ip->ip_src.s_addr, sizeof (ip->ip_src.s_addr), AF_INET);
+    in6_addr_from_buffer (&d_addr, &ip->ip_dst.s_addr, sizeof (ip->ip_dst.s_addr), AF_INET);
+    if (ignore_list_match (&s_addr))
 	    return (0);
     if (IPPROTO_UDP != ip->ip_p)
 	return 0;
     memcpy(buf, (void *) ip + offset, len - offset);
     if (0 == handle_udp((struct udphdr *) buf, len - offset))
 	return 0;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_fbhash.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_fbhash.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_fbhash.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_fbhash.c	2012-04-02 16:04:58.000000000 +0800
@@ -231,13 +231,12 @@
 
 void fbh_destroy (fbhash_t *h) /* {{{ */
 {
   if (h == NULL)
     return;
 
-  pthread_mutex_destroy (&h->lock);
   free (h->filename);
   fbh_free_tree (h->tree);
 } /* }}} void fbh_destroy */
 
 char *fbh_get (fbhash_t *h, const char *key) /* {{{ */
 {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_rrdcreate.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_rrdcreate.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/utils_rrdcreate.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/utils_rrdcreate.c	2012-04-02 16:04:58.000000000 +0800
@@ -403,15 +403,15 @@
 
   memcpy (argv, ds_def, ds_num * sizeof (char *));
   memcpy (argv + ds_num, rra_def, rra_num * sizeof (char *));
   argv[ds_num + rra_num] = NULL;
 
   last_up = CDTIME_T_TO_TIME_T (vl->time);
-  if (last_up <= 0)
+  if (last_up <= 10)
     last_up = time (NULL);
-  last_up -= 1;
+  last_up -= 10;
 
   if (cfg->stepsize > 0)
     stepsize = cfg->stepsize;
   else
     stepsize = (unsigned long) CDTIME_T_TO_TIME_T (vl->interval);
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/varnish.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/varnish.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/varnish.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/varnish.c	2012-04-02 16:16:34.000000000 +0800
@@ -131,26 +131,37 @@
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
 
 #include <varnish/varnishapi.h>
 
+#if HAVE_VARNISH_V3
+# include <varnish/vsc.h>
+typedef struct VSC_C_main c_varnish_stats_t;
+#endif
+
+#if HAVE_VARNISH_V2
+typedef struct varnish_stats c_varnish_stats_t;
+#endif
+
 /* {{{ user_config_s */
 struct user_config_s {
 	char *instance;
 
 	_Bool collect_cache;
 	_Bool collect_connections;
 	_Bool collect_esi;
 	_Bool collect_backend;
 	_Bool collect_fetch;
 	_Bool collect_hcb;
 	_Bool collect_shm;
-	_Bool collect_sma;
 	_Bool collect_sms;
+#if HAVE_VARNISH_V2
 	_Bool collect_sm;
+	_Bool collect_sma;
+#endif
 	_Bool collect_totals;
 	_Bool collect_workers;
 };
 typedef struct user_config_s user_config_t; /* }}} */
 
 static _Bool have_instance = 0;
@@ -201,207 +212,248 @@
 
 	value.derive = (derive_t) derive_value;
 
 	return (varnish_submit (plugin_instance, category, type, type_instance, value));
 } /* }}} int varnish_submit_derive */
 
-static void varnish_monitor (const user_config_t *conf, struct varnish_stats *VSL_stats) /* {{{ */
+static void varnish_monitor (const user_config_t *conf, /* {{{ */
+		const c_varnish_stats_t *stats)
 {
 	if (conf->collect_cache)
 	{
 		/* Cache hits */
-		varnish_submit_derive (conf->instance, "cache", "cache_result", "hit",     VSL_stats->cache_hit);
+		varnish_submit_derive (conf->instance, "cache", "cache_result", "hit",     stats->cache_hit);
 		/* Cache misses */
-		varnish_submit_derive (conf->instance, "cache", "cache_result", "miss",    VSL_stats->cache_miss);
+		varnish_submit_derive (conf->instance, "cache", "cache_result", "miss",    stats->cache_miss);
 		/* Cache hits for pass */
-		varnish_submit_derive (conf->instance, "cache", "cache_result", "hitpass", VSL_stats->cache_hitpass);
+		varnish_submit_derive (conf->instance, "cache", "cache_result", "hitpass", stats->cache_hitpass);
 	}
 
 	if (conf->collect_connections)
 	{
 		/* Client connections accepted */
-		varnish_submit_derive (conf->instance, "connections", "connections", "accepted", VSL_stats->client_conn);
+		varnish_submit_derive (conf->instance, "connections", "connections", "accepted", stats->client_conn);
 		/* Connection dropped, no sess */
-		varnish_submit_derive (conf->instance, "connections", "connections", "dropped" , VSL_stats->client_drop);
+		varnish_submit_derive (conf->instance, "connections", "connections", "dropped" , stats->client_drop);
 		/* Client requests received    */
-		varnish_submit_derive (conf->instance, "connections", "connections", "received", VSL_stats->client_req);
+		varnish_submit_derive (conf->instance, "connections", "connections", "received", stats->client_req);
 	}
 
 	if (conf->collect_esi)
 	{
-		/* Objects ESI parsed (unlock) */
-		varnish_submit_derive (conf->instance, "esi", "total_operations", "parsed", VSL_stats->esi_parse);
 		/* ESI parse errors (unlock)   */
-		varnish_submit_derive (conf->instance, "esi", "total_operations", "error",  VSL_stats->esi_errors);
+		varnish_submit_derive (conf->instance, "esi", "total_operations", "error",  stats->esi_errors);
+#if HAVE_VARNISH_V2
+		/* Objects ESI parsed (unlock) */
+		varnish_submit_derive (conf->instance, "esi", "total_operations", "parsed", stats->esi_parse);
+#endif
 	}
 
 	if (conf->collect_backend)
 	{
 		/* Backend conn. success       */
-		varnish_submit_derive (conf->instance, "backend", "connections", "success"      , VSL_stats->backend_conn);
+		varnish_submit_derive (conf->instance, "backend", "connections", "success"      , stats->backend_conn);
 		/* Backend conn. not attempted */
-		varnish_submit_derive (conf->instance, "backend", "connections", "not-attempted", VSL_stats->backend_unhealthy);
+		varnish_submit_derive (conf->instance, "backend", "connections", "not-attempted", stats->backend_unhealthy);
 		/* Backend conn. too many      */
-		varnish_submit_derive (conf->instance, "backend", "connections", "too-many"     , VSL_stats->backend_busy);
+		varnish_submit_derive (conf->instance, "backend", "connections", "too-many"     , stats->backend_busy);
 		/* Backend conn. failures      */
-		varnish_submit_derive (conf->instance, "backend", "connections", "failures"     , VSL_stats->backend_fail);
+		varnish_submit_derive (conf->instance, "backend", "connections", "failures"     , stats->backend_fail);
 		/* Backend conn. reuses        */
-		varnish_submit_derive (conf->instance, "backend", "connections", "reuses"       , VSL_stats->backend_reuse);
+		varnish_submit_derive (conf->instance, "backend", "connections", "reuses"       , stats->backend_reuse);
 		/* Backend conn. was closed    */
-		varnish_submit_derive (conf->instance, "backend", "connections", "was-closed"   , VSL_stats->backend_toolate);
+		varnish_submit_derive (conf->instance, "backend", "connections", "was-closed"   , stats->backend_toolate);
 		/* Backend conn. recycles      */
-		varnish_submit_derive (conf->instance, "backend", "connections", "recycled"     , VSL_stats->backend_recycle);
+		varnish_submit_derive (conf->instance, "backend", "connections", "recycled"     , stats->backend_recycle);
+#if HAVE_VARNISH_V2
 		/* Backend conn. unused        */
-		varnish_submit_derive (conf->instance, "backend", "connections", "unused"       , VSL_stats->backend_unused);
+		varnish_submit_derive (conf->instance, "backend", "connections", "unused"       , stats->backend_unused);
+#endif
 	}
 
 	if (conf->collect_fetch)
 	{
 		/* Fetch head                */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "head"       , VSL_stats->fetch_head);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "head"       , stats->fetch_head);
 		/* Fetch with length         */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "length"     , VSL_stats->fetch_length);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "length"     , stats->fetch_length);
 		/* Fetch chunked             */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "chunked"    , VSL_stats->fetch_chunked);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "chunked"    , stats->fetch_chunked);
 		/* Fetch EOF                 */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "eof"        , VSL_stats->fetch_eof);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "eof"        , stats->fetch_eof);
 		/* Fetch bad headers         */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "bad_headers", VSL_stats->fetch_bad);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "bad_headers", stats->fetch_bad);
 		/* Fetch wanted close        */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "close"      , VSL_stats->fetch_close);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "close"      , stats->fetch_close);
 		/* Fetch pre HTTP/1.1 closed */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "oldhttp"    , VSL_stats->fetch_oldhttp);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "oldhttp"    , stats->fetch_oldhttp);
 		/* Fetch zero len            */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "zero"       , VSL_stats->fetch_zero);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "zero"       , stats->fetch_zero);
 		/* Fetch failed              */
-		varnish_submit_derive (conf->instance, "fetch", "http_requests", "failed"     , VSL_stats->fetch_failed);
+		varnish_submit_derive (conf->instance, "fetch", "http_requests", "failed"     , stats->fetch_failed);
 	}
 
 	if (conf->collect_hcb)
 	{
 		/* HCB Lookups without lock */
-		varnish_submit_derive (conf->instance, "hcb", "cache_operation", "lookup_nolock", VSL_stats->hcb_nolock);
+		varnish_submit_derive (conf->instance, "hcb", "cache_operation", "lookup_nolock", stats->hcb_nolock);
 		/* HCB Lookups with lock    */
-		varnish_submit_derive (conf->instance, "hcb", "cache_operation", "lookup_lock",   VSL_stats->hcb_lock);
+		varnish_submit_derive (conf->instance, "hcb", "cache_operation", "lookup_lock",   stats->hcb_lock);
 		/* HCB Inserts              */
-		varnish_submit_derive (conf->instance, "hcb", "cache_operation", "insert",        VSL_stats->hcb_insert);
+		varnish_submit_derive (conf->instance, "hcb", "cache_operation", "insert",        stats->hcb_insert);
 	}
 
 	if (conf->collect_shm)
 	{
 		/* SHM records                 */
-		varnish_submit_derive (conf->instance, "shm", "total_operations", "records"   , VSL_stats->shm_records);
+		varnish_submit_derive (conf->instance, "shm", "total_operations", "records"   , stats->shm_records);
 		/* SHM writes                  */
-		varnish_submit_derive (conf->instance, "shm", "total_operations", "writes"    , VSL_stats->shm_writes);
+		varnish_submit_derive (conf->instance, "shm", "total_operations", "writes"    , stats->shm_writes);
 		/* SHM flushes due to overflow */
-		varnish_submit_derive (conf->instance, "shm", "total_operations", "flushes"   , VSL_stats->shm_flushes);
+		varnish_submit_derive (conf->instance, "shm", "total_operations", "flushes"   , stats->shm_flushes);
 		/* SHM MTX contention          */
-		varnish_submit_derive (conf->instance, "shm", "total_operations", "contention", VSL_stats->shm_cont);
+		varnish_submit_derive (conf->instance, "shm", "total_operations", "contention", stats->shm_cont);
 		/* SHM cycles through buffer   */
-		varnish_submit_derive (conf->instance, "shm", "total_operations", "cycles"    , VSL_stats->shm_cycles);
+		varnish_submit_derive (conf->instance, "shm", "total_operations", "cycles"    , stats->shm_cycles);
 	}
 
+#if HAVE_VARNISH_V2
 	if (conf->collect_sm)
 	{
 		/* allocator requests */
-		varnish_submit_derive (conf->instance, "sm", "total_requests", "nreq",  VSL_stats->sm_nreq);
+		varnish_submit_derive (conf->instance, "sm", "total_requests", "nreq",         stats->sm_nreq);
 		/* outstanding allocations */
-		varnish_submit_gauge (conf->instance,  "sm", "requests", "outstanding", VSL_stats->sm_nobj);
+		varnish_submit_gauge (conf->instance,  "sm", "requests", "outstanding",        stats->sm_nobj);
 		/* bytes allocated */
-		varnish_submit_derive (conf->instance,  "sm", "total_bytes", "allocated",      VSL_stats->sm_balloc);
+		varnish_submit_derive (conf->instance,  "sm", "total_bytes", "allocated",      stats->sm_balloc);
 		/* bytes free */
-		varnish_submit_derive (conf->instance,  "sm", "total_bytes", "free",           VSL_stats->sm_bfree);
+		varnish_submit_derive (conf->instance,  "sm", "total_bytes", "free",           stats->sm_bfree);
 	}
 
 	if (conf->collect_sma)
 	{
 		/* SMA allocator requests */
-		varnish_submit_derive (conf->instance, "sma", "total_requests", "nreq",  VSL_stats->sma_nreq);
+		varnish_submit_derive (conf->instance, "sma", "total_requests", "nreq",    stats->sma_nreq);
 		/* SMA outstanding allocations */
-		varnish_submit_gauge (conf->instance,  "sma", "requests", "outstanding", VSL_stats->sma_nobj);
+		varnish_submit_gauge (conf->instance,  "sma", "requests", "outstanding",   stats->sma_nobj);
 		/* SMA outstanding bytes */
-		varnish_submit_gauge (conf->instance,  "sma", "bytes", "outstanding",    VSL_stats->sma_nbytes);
+		varnish_submit_gauge (conf->instance,  "sma", "bytes", "outstanding",      stats->sma_nbytes);
 		/* SMA bytes allocated */
-		varnish_submit_derive (conf->instance,  "sma", "total_bytes", "allocated",      VSL_stats->sma_balloc);
+		varnish_submit_derive (conf->instance,  "sma", "total_bytes", "allocated", stats->sma_balloc);
 		/* SMA bytes free */
-		varnish_submit_derive (conf->instance,  "sma", "total_bytes", "free" ,          VSL_stats->sma_bfree);
+		varnish_submit_derive (conf->instance,  "sma", "total_bytes", "free" ,     stats->sma_bfree);
 	}
+#endif
 
 	if (conf->collect_sms)
 	{
 		/* SMS allocator requests */
-		varnish_submit_derive (conf->instance, "sms", "total_requests", "allocator", VSL_stats->sms_nreq);
+		varnish_submit_derive (conf->instance, "sms", "total_requests", "allocator", stats->sms_nreq);
 		/* SMS outstanding allocations */
-		varnish_submit_gauge (conf->instance,  "sms", "requests", "outstanding",     VSL_stats->sms_nobj);
+		varnish_submit_gauge (conf->instance,  "sms", "requests", "outstanding",     stats->sms_nobj);
 		/* SMS outstanding bytes */
-		varnish_submit_gauge (conf->instance,  "sms", "bytes", "outstanding",        VSL_stats->sms_nbytes);
+		varnish_submit_gauge (conf->instance,  "sms", "bytes", "outstanding",        stats->sms_nbytes);
 		/* SMS bytes allocated */
-		varnish_submit_derive (conf->instance,  "sms", "total_bytes", "allocated",          VSL_stats->sms_balloc);
+		varnish_submit_derive (conf->instance,  "sms", "total_bytes", "allocated",   stats->sms_balloc);
 		/* SMS bytes freed */
-		varnish_submit_derive (conf->instance,  "sms", "total_bytes", "free",               VSL_stats->sms_bfree);
+		varnish_submit_derive (conf->instance,  "sms", "total_bytes", "free",        stats->sms_bfree);
 	}
 
 	if (conf->collect_totals)
 	{
 		/* Total Sessions */
-		varnish_submit_derive (conf->instance, "totals", "total_sessions", "sessions",  VSL_stats->s_sess);
+		varnish_submit_derive (conf->instance, "totals", "total_sessions", "sessions",  stats->s_sess);
 		/* Total Requests */
-		varnish_submit_derive (conf->instance, "totals", "total_requests", "requests",  VSL_stats->s_req);
+		varnish_submit_derive (conf->instance, "totals", "total_requests", "requests",  stats->s_req);
 		/* Total pipe */
-		varnish_submit_derive (conf->instance, "totals", "total_operations", "pipe",    VSL_stats->s_pipe);
+		varnish_submit_derive (conf->instance, "totals", "total_operations", "pipe",    stats->s_pipe);
 		/* Total pass */
-		varnish_submit_derive (conf->instance, "totals", "total_operations", "pass",    VSL_stats->s_pass);
+		varnish_submit_derive (conf->instance, "totals", "total_operations", "pass",    stats->s_pass);
 		/* Total fetch */
-		varnish_submit_derive (conf->instance, "totals", "total_operations", "fetches", VSL_stats->s_fetch);
+		varnish_submit_derive (conf->instance, "totals", "total_operations", "fetches", stats->s_fetch);
 		/* Total header bytes */
-		varnish_submit_derive (conf->instance, "totals", "total_bytes", "header-bytes", VSL_stats->s_hdrbytes);
+		varnish_submit_derive (conf->instance, "totals", "total_bytes", "header-bytes", stats->s_hdrbytes);
 		/* Total body byte */
-		varnish_submit_derive (conf->instance, "totals", "total_bytes", "body-bytes",   VSL_stats->s_bodybytes);
+		varnish_submit_derive (conf->instance, "totals", "total_bytes", "body-bytes",   stats->s_bodybytes);
 	}
 
 	if (conf->collect_workers)
 	{
 		/* worker threads */
-		varnish_submit_gauge (conf->instance, "workers", "threads", "worker",            VSL_stats->n_wrk);
+		varnish_submit_gauge (conf->instance, "workers", "threads", "worker",             stats->n_wrk);
 		/* worker threads created */
-		varnish_submit_derive (conf->instance, "workers", "total_threads", "created",     VSL_stats->n_wrk_create);
+		varnish_submit_derive (conf->instance, "workers", "total_threads", "created",     stats->n_wrk_create);
 		/* worker threads not created */
-		varnish_submit_derive (conf->instance, "workers", "total_threads", "failed",      VSL_stats->n_wrk_failed);
+		varnish_submit_derive (conf->instance, "workers", "total_threads", "failed",      stats->n_wrk_failed);
 		/* worker threads limited */
-		varnish_submit_derive (conf->instance, "workers", "total_threads", "limited",     VSL_stats->n_wrk_max);
+		varnish_submit_derive (conf->instance, "workers", "total_threads", "limited",     stats->n_wrk_max);
+		/* dropped work requests */
+		varnish_submit_derive (conf->instance, "workers", "total_requests", "dropped",    stats->n_wrk_drop);
+#ifdef HAVE_VARNISH_V2
 		/* queued work requests */
-		varnish_submit_derive (conf->instance, "workers", "total_requests", "queued",     VSL_stats->n_wrk_queue);
+		varnish_submit_derive (conf->instance, "workers", "total_requests", "queued",     stats->n_wrk_queue);
 		/* overflowed work requests */
-		varnish_submit_derive (conf->instance, "workers", "total_requests", "overflowed", VSL_stats->n_wrk_overflow);
-		/* dropped work requests */
-		varnish_submit_derive (conf->instance, "workers", "total_requests", "dropped",    VSL_stats->n_wrk_drop);
+		varnish_submit_derive (conf->instance, "workers", "total_requests", "overflowed", stats->n_wrk_overflow);
+#endif
 	}
 } /* }}} void varnish_monitor */
 
+#if HAVE_VARNISH_V3
 static int varnish_read (user_data_t *ud) /* {{{ */
 {
-	struct varnish_stats *VSL_stats;
+	struct VSM_data *vd;
+	const c_varnish_stats_t *stats;
+
 	user_config_t *conf;
 
 	if ((ud == NULL) || (ud->data == NULL))
 		return (EINVAL);
 
 	conf = ud->data;
 
-	VSL_stats = VSL_OpenStats (conf->instance);
-	if (VSL_stats == NULL)
+	vd = VSM_New();
+	VSC_Setup(vd);
+	if (VSC_Open (vd, /* diag = */ 1))
+	{
+		ERROR ("varnish plugin: Unable to load statistics.");
+
+		return (-1);
+	}
+
+	stats = VSC_Main(vd);
+
+	varnish_monitor (conf, stats);
+	VSM_Close (vd);
+
+	return (0);
+} /* }}} */
+#else /* if HAVE_VARNISH_V2 */
+static int varnish_read (user_data_t *ud) /* {{{ */
+{
+	const c_varnish_stats_t *stats;
+
+	user_config_t *conf;
+
+	if ((ud == NULL) || (ud->data == NULL))
+		return (EINVAL);
+
+	conf = ud->data;
+
+	stats = VSL_OpenStats (conf->instance);
+	if (stats == NULL)
 	{
 		ERROR ("Varnish plugin : unable to load statistics");
 
 		return (-1);
 	}
 
-	varnish_monitor (conf, VSL_stats);
+	varnish_monitor (conf, stats);
 
-    return (0);
+	return (0);
 } /* }}} */
+#endif
 
 static void varnish_config_free (void *ptr) /* {{{ */
 {
 	user_config_t *conf = ptr;
 
 	if (conf == NULL)
@@ -420,17 +472,19 @@
 	conf->collect_cache       = 1;
 	conf->collect_connections = 1;
 	conf->collect_esi         = 0;
 	conf->collect_fetch       = 0;
 	conf->collect_hcb         = 0;
 	conf->collect_shm         = 1;
+#if HAVE_VARNISH_V2
 	conf->collect_sm          = 0;
 	conf->collect_sma         = 0;
+#endif
 	conf->collect_sms         = 0;
 	conf->collect_totals      = 0;
-	
+
 	return (0);
 } /* }}} int varnish_config_apply_default */
 
 static int varnish_init (void) /* {{{ */
 {
 	user_config_t *conf;
@@ -516,18 +570,20 @@
 		else if (strcasecmp ("CollectFetch", child->key) == 0)
 			cf_util_get_boolean (child, &conf->collect_fetch);
 		else if (strcasecmp ("CollectHCB", child->key) == 0)
 			cf_util_get_boolean (child, &conf->collect_hcb);
 		else if (strcasecmp ("CollectSHM", child->key) == 0)
 			cf_util_get_boolean (child, &conf->collect_shm);
-		else if (strcasecmp ("CollectSMA", child->key) == 0)
-			cf_util_get_boolean (child, &conf->collect_sma);
 		else if (strcasecmp ("CollectSMS", child->key) == 0)
 			cf_util_get_boolean (child, &conf->collect_sms);
+#if HAVE_VARNISH_V2
+		else if (strcasecmp ("CollectSMA", child->key) == 0)
+			cf_util_get_boolean (child, &conf->collect_sma);
 		else if (strcasecmp ("CollectSM", child->key) == 0)
 			cf_util_get_boolean (child, &conf->collect_sm);
+#endif
 		else if (strcasecmp ("CollectTotals", child->key) == 0)
 			cf_util_get_boolean (child, &conf->collect_totals);
 		else if (strcasecmp ("CollectWorkers", child->key) == 0)
 			cf_util_get_boolean (child, &conf->collect_workers);
 		else
 		{
@@ -541,15 +597,17 @@
 			&& !conf->collect_connections
 			&& !conf->collect_esi
 			&& !conf->collect_backend
 			&& !conf->collect_fetch
 			&& !conf->collect_hcb
 			&& !conf->collect_shm
-			&& !conf->collect_sma
 			&& !conf->collect_sms
+#if HAVE_VARNISH_V2
+			&& !conf->collect_sma
 			&& !conf->collect_sm
+#endif
 			&& !conf->collect_totals
 			&& !conf->collect_workers)
 	{
 		WARNING ("Varnish plugin: No metric has been configured for "
 				"instance \"%s\". Disabling this instance.",
 				(conf->instance == NULL) ? "localhost" : conf->instance);
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src: write_graphite.c
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src: write_mongodb.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/zfs_arc.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/zfs_arc.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/src/zfs_arc.c	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/src/zfs_arc.c	2012-04-02 16:04:58.000000000 +0800
@@ -1,9 +1,10 @@
 /**
  * collectd - src/zfs_arc.c
  * Copyright (C) 2009  Anthony Dewhurst
+ * Copyright (C) 2012  Aurelien Rougemont
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -14,22 +15,23 @@
  * You should have received a copy of the GNU General Public License along
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
  *   Anthony Dewhurst <dewhurst at gmail>
+ *   Aurelien Rougemont <beorn at gandi.net>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 
 /*
  * Global variables
  */
-
+static kstat_t *ksp;
 extern kstat_ctl_t *kc;
 
 static void za_submit (const char* type, const char* type_instance, value_t* values, int values_len)
 {
 	value_list_t vl = VALUE_LIST_INIT;
 
@@ -49,18 +51,44 @@
 	value_t vv;
 
 	vv.gauge = value;
 	za_submit (type, type_instance, &vv, 1);
 }
 
-static void za_submit_derive (const char* type, const char* type_instance, derive_t dv)
+static int za_read_derive (kstat_t *ksp, const char *kstat_value,
+    const char *type, const char *type_instance)
 {
-	value_t vv;
+  long long tmp;
+  value_t v;
 
-	vv.derive = dv;
-	za_submit (type, type_instance, &vv, 1);
+  tmp = get_kstat_value (ksp, kstat_value);
+  if (tmp == -1LL)
+  {
+    ERROR ("zfs_arc plugin: Reading kstat value \"%s\" failed.", kstat_value);
+    return (-1);
+  }
+
+  v.derive = (derive_t) tmp;
+  za_submit (type, type_instance, /* values = */ &v, /* values_num = */ 1);
+}
+
+static int za_read_gauge (kstat_t *ksp, const char *kstat_value,
+    const char *type, const char *type_instance)
+{
+  long long tmp;
+  value_t v;
+
+  tmp = get_kstat_value (ksp, kstat_value);
+  if (tmp == -1LL)
+  {
+    ERROR ("zfs_arc plugin: Reading kstat value \"%s\" failed.", kstat_value);
+    return (-1);
+  }
+
+  v.gauge = (gauge_t) tmp;
+  za_submit (type, type_instance, /* values = */ &v, /* values_num = */ 1);
 }
 
 static void za_submit_ratio (const char* type_instance, gauge_t hits, gauge_t misses)
 {
 	gauge_t ratio = NAN;
 
@@ -74,59 +102,49 @@
 
 	za_submit_gauge ("cache_ratio", type_instance, ratio);
 }
 
 static int za_read (void)
 {
-	gauge_t  arc_size, l2_size;
-	derive_t demand_data_hits,
-		 demand_metadata_hits,
-		 prefetch_data_hits,
-		 prefetch_metadata_hits,
-		 demand_data_misses,
-		 demand_metadata_misses,
-		 prefetch_data_misses,
-		 prefetch_metadata_misses;
 	gauge_t  arc_hits, arc_misses, l2_hits, l2_misses;
 	value_t  l2_io[2];
-	kstat_t	 *ksp	= NULL;
 
 	get_kstat (&ksp, "zfs", 0, "arcstats");
 	if (ksp == NULL)
 	{
 		ERROR ("zfs_arc plugin: Cannot find zfs:0:arcstats kstat.");
 		return (-1);
 	}
 
 	/* Sizes */
-	arc_size   = get_kstat_value(ksp, "size");
-	l2_size    = get_kstat_value(ksp, "l2_size");
+	za_read_gauge (ksp, "size",    "cache_size", "arc");
+	za_read_gauge (ksp, "l2_size", "cache_size", "L2");
 
-	za_submit_gauge ("cache_size", "arc", arc_size);
-	za_submit_gauge ("cache_size", "L2", l2_size);
+        /* Operations */
+	za_read_derive (ksp, "allocated","cache_operation", "allocated");
+	za_read_derive (ksp, "deleted",  "cache_operation", "deleted");
+	za_read_derive (ksp, "stolen",   "cache_operation", "stolen");
+
+        /* Issue indicators */
+        za_read_derive (ksp, "mutex_miss", "mutex_operation", "miss");
+	za_read_derive (ksp, "hash_collisions", "hash_collisions", "");
+	
+        /* Evictions */
+	za_read_derive (ksp, "evict_l2_cached",     "cache_eviction", "cached");
+	za_read_derive (ksp, "evict_l2_eligible",   "cache_eviction", "eligible");
+	za_read_derive (ksp, "evict_l2_ineligible", "cache_eviction", "ineligible");
 
 	/* Hits / misses */
-	demand_data_hits       = get_kstat_value(ksp, "demand_data_hits");
-	demand_metadata_hits   = get_kstat_value(ksp, "demand_metadata_hits");
-	prefetch_data_hits     = get_kstat_value(ksp, "prefetch_data_hits");
-	prefetch_metadata_hits = get_kstat_value(ksp, "prefetch_metadata_hits");
-
-	demand_data_misses       = get_kstat_value(ksp, "demand_data_misses");
-	demand_metadata_misses   = get_kstat_value(ksp, "demand_metadata_misses");
-	prefetch_data_misses     = get_kstat_value(ksp, "prefetch_data_misses");
-	prefetch_metadata_misses = get_kstat_value(ksp, "prefetch_metadata_misses");
-
-	za_submit_derive ("cache_result", "demand_data-hit",       demand_data_hits);
-	za_submit_derive ("cache_result", "demand_metadata-hit",   demand_metadata_hits);
-	za_submit_derive ("cache_result", "prefetch_data-hit",     prefetch_data_hits);
-	za_submit_derive ("cache_result", "prefetch_metadata-hit", prefetch_metadata_hits);
-
-	za_submit_derive ("cache_result", "demand_data-miss",       demand_data_misses);
-	za_submit_derive ("cache_result", "demand_metadata-miss",   demand_metadata_misses);
-	za_submit_derive ("cache_result", "prefetch_data-miss",     prefetch_data_misses);
-	za_submit_derive ("cache_result", "prefetch_metadata-miss", prefetch_metadata_misses);
+	za_read_derive (ksp, "demand_data_hits",         "cache_result", "demand_data-hit");
+	za_read_derive (ksp, "demand_metadata_hits",     "cache_result", "demand_metadata-hit");
+	za_read_derive (ksp, "prefetch_data_hits",       "cache_result", "prefetch_data-hit");
+	za_read_derive (ksp, "prefetch_metadata_hits",   "cache_result", "prefetch_metadata-hit");
+	za_read_derive (ksp, "demand_data_misses",       "cache_result", "demand_data-miss");
+	za_read_derive (ksp, "demand_metadata_misses",   "cache_result", "demand_metadata-miss");
+	za_read_derive (ksp, "prefetch_data_misses",     "cache_result", "prefetch_data-miss");
+	za_read_derive (ksp, "prefetch_metadata_misses", "cache_result", "prefetch_metadata-miss");
 
 	/* Ratios */
 	arc_hits   = (gauge_t) get_kstat_value(ksp, "hits");
 	arc_misses = (gauge_t) get_kstat_value(ksp, "misses");
 	l2_hits    = (gauge_t) get_kstat_value(ksp, "l2_hits");
 	l2_misses  = (gauge_t) get_kstat_value(ksp, "l2_misses");
@@ -142,12 +160,14 @@
 
 	return (0);
 } /* int za_read */
 
 static int za_init (void) /* {{{ */
 {
+	ksp = NULL;
+
 	/* kstats chain already opened by update_kstat (using *kc), verify everything went fine. */
 	if (kc == NULL)
 	{
 		ERROR ("zfs_arc plugin: kstat chain control structure not available.");
 		return (-1);
 	}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/version-gen.sh /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/version-gen.sh
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.0.5/version-gen.sh	2012-11-11 19:37:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-5.1.0/version-gen.sh	2012-04-02 16:04:58.000000000 +0800
@@ -1,17 +1,17 @@
 #!/usr/bin/env bash
 
-DEFAULT_VERSION="5.0.5.git"
+DEFAULT_VERSION="5.1.0.git"
 
 VERSION="`git describe 2> /dev/null | sed -e 's/^collectd-//'`"
 
 if test -z "$VERSION"; then
 	VERSION="$DEFAULT_VERSION"
 fi
 
 VERSION="`echo \"$VERSION\" | sed -e 's/-/./g'`"
 
-if test "x`uname -s`" = "xAIX" || test "x`uname -s`" = "xSunOS" ; then
+if test "x`uname -s`" = "xAIX" ; then
 	echo "$VERSION\c"
 else 
 	echo -n "$VERSION"
 fi
