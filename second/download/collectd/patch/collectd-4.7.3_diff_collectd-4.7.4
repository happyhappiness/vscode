diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/bindings/java/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/bindings/java/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/bindings/java/Makefile.in	2009-09-13 18:38:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/bindings/java/Makefile.in	2009-10-03 23:48:55.000000000 +0800
@@ -57,12 +57,14 @@
 BUILD_WITH_LIBCURL_LIBS = @BUILD_WITH_LIBCURL_LIBS@
 BUILD_WITH_LIBDBI_CPPFLAGS = @BUILD_WITH_LIBDBI_CPPFLAGS@
 BUILD_WITH_LIBDBI_LDFLAGS = @BUILD_WITH_LIBDBI_LDFLAGS@
 BUILD_WITH_LIBDBI_LIBS = @BUILD_WITH_LIBDBI_LIBS@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
+BUILD_WITH_LIBIPTC_CPPFLAGS = @BUILD_WITH_LIBIPTC_CPPFLAGS@
+BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/bindings/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/bindings/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/bindings/Makefile.in	2009-09-13 18:38:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/bindings/Makefile.in	2009-10-03 23:48:55.000000000 +0800
@@ -98,12 +98,14 @@
 BUILD_WITH_LIBCURL_LIBS = @BUILD_WITH_LIBCURL_LIBS@
 BUILD_WITH_LIBDBI_CPPFLAGS = @BUILD_WITH_LIBDBI_CPPFLAGS@
 BUILD_WITH_LIBDBI_LDFLAGS = @BUILD_WITH_LIBDBI_LDFLAGS@
 BUILD_WITH_LIBDBI_LIBS = @BUILD_WITH_LIBDBI_LIBS@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
+BUILD_WITH_LIBIPTC_CPPFLAGS = @BUILD_WITH_LIBIPTC_CPPFLAGS@
+BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/ChangeLog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/ChangeLog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/ChangeLog	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/ChangeLog	2009-10-03 23:48:47.000000000 +0800
@@ -1,6 +1,17 @@
+2009-10-03, Version 4.7.4
+	* Build system: Issues when building the iptables plugin have been
+	  fixed.
+	* exec plugin: Clear the signal block mask before calling exec(2).
+	* perl plugin: Declare the “environ” variable. This solves build
+	  issues on some platforms.
+	* processes plugin: Remove unnecessary call of realloc(3). Thanks to
+	  Andrés J. Díaz for the patch.
+	* unixsock plugin: Fix a (well hidden) race condition related to file
+	  descriptor handling.
+
 2009-09-13, Version 4.7.3
 	* collectd: Fix a possible but very rare invalid “free” in the caching
 	  code. Thanks to Sebastian Harl for the patch.
 	* collectd: Remove old values when a cache entry is marked as missing.
 	  This way the “GETVAL” command of the UnixSock plugin doesn't return
 	  old, no longer valid values when this happens. Thanks to Andrés J.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/configure	2009-09-13 18:38:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/configure	2009-10-03 23:48:57.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.64 for collectd 4.7.3.
+# Generated by GNU Autoconf 2.64 for collectd 4.7.4.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009 Free Software
 # Foundation, Inc.
 #
 # This configure script is free software; the Free Software Foundation
@@ -697,14 +697,14 @@
 MFLAGS=
 MAKEFLAGS=
 
 # Identity of this package.
 PACKAGE_NAME='collectd'
 PACKAGE_TARNAME='collectd'
-PACKAGE_VERSION='4.7.3'
-PACKAGE_STRING='collectd 4.7.3'
+PACKAGE_VERSION='4.7.4'
+PACKAGE_STRING='collectd 4.7.4'
 PACKAGE_BUGREPORT=''
 PACKAGE_URL=''
 
 ac_unique_file="src/collectd.c"
 enable_option_checking=no
 ac_default_prefix="/opt/collectd"
@@ -1001,12 +1001,14 @@
 BUILD_WITH_JAVA_TRUE
 JAVA_LIBS
 JAVA_LDFLAGS
 JAVA_CFLAGS
 JAVA_CPPFLAGS
 JAVAC
+BUILD_WITH_LIBIPTC_LDFLAGS
+BUILD_WITH_LIBIPTC_CPPFLAGS
 BUILD_WITH_OWN_LIBIPTC_FALSE
 BUILD_WITH_OWN_LIBIPTC_TRUE
 BUILD_WITH_LIBIPTC_FALSE
 BUILD_WITH_LIBIPTC_TRUE
 BUILD_WITH_LIBGCRYPT_FALSE
 BUILD_WITH_LIBGCRYPT_TRUE
@@ -1863,13 +1865,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures collectd 4.7.3 to adapt to many kinds of systems.
+\`configure' configures collectd 4.7.4 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -1933,13 +1935,13 @@
   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of collectd 4.7.3:";;
+     short | recursive ) echo "Configuration of collectd 4.7.4:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-option-checking  ignore unrecognized --enable/--with options
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
@@ -2191,13 +2193,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-collectd configure 4.7.3
+collectd configure 4.7.4
 generated by GNU Autoconf 2.64
 
 Copyright (C) 2009 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
@@ -2911,13 +2913,13 @@
 
 } # ac_fn_c_check_member
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by collectd $as_me 4.7.3, which was
+It was created by collectd $as_me 4.7.4, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 exec 5>>config.log
@@ -3746,13 +3748,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='collectd'
- VERSION='4.7.3'
+ VERSION='4.7.4'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -6687,13 +6689,13 @@
     esac
   fi
   rm -rf conftest*
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 6693 "configure"' > conftest.$ac_ext
+  echo '#line 6695 "configure"' > conftest.$ac_ext
   if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$ac_compile\""; } >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
   $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; then
    if test "$lt_cv_prog_gnu_ld" = yes; then
@@ -8968,17 +8970,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:8974: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:8976: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:8978: \$? = $ac_status" >&5
+   echo "$as_me:8980: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -9258,17 +9260,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9264: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9266: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:9268: \$? = $ac_status" >&5
+   echo "$as_me:9270: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -9362,17 +9364,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9368: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9370: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:9372: \$? = $ac_status" >&5
+   echo "$as_me:9374: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -11400,13 +11402,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 11406 "configure"
+#line 11408 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -11500,13 +11502,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self_static=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 11506 "configure"
+#line 11508 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -13841,17 +13843,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13847: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13849: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:13851: \$? = $ac_status" >&5
+   echo "$as_me:13853: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -13945,17 +13947,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:13951: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:13953: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:13955: \$? = $ac_status" >&5
+   echo "$as_me:13957: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -15543,17 +15545,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:15549: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:15551: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:15553: \$? = $ac_status" >&5
+   echo "$as_me:15555: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -15647,17 +15649,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:15653: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:15655: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:15657: \$? = $ac_status" >&5
+   echo "$as_me:15659: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -17821,17 +17823,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:17827: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:17829: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:17831: \$? = $ac_status" >&5
+   echo "$as_me:17833: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -18111,17 +18113,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18117: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18119: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:18121: \$? = $ac_status" >&5
+   echo "$as_me:18123: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -18215,17 +18217,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18221: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18223: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:18225: \$? = $ac_status" >&5
+   echo "$as_me:18227: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -22165,13 +22167,13 @@
 
 # For ipvs module
 have_net_ip_vs_h="no"
 have_ip_vs_h="no"
 if test "x$ac_system" = "xLinux"
 then
-	SAVE_CFLAGS=$CFLAGS
+	SAVE_CFLAGS="$CFLAGS"
 	CFLAGS="$CFLAGS $KERNEL_CFLAGS"
 
 	for ac_header in net/ip_vs.h
 do :
   ac_fn_c_check_header_mongrel "$LINENO" "net/ip_vs.h" "ac_cv_header_net_ip_vs_h" "$ac_includes_default"
 if test "x$ac_cv_header_net_ip_vs_h" = x""yes; then :
@@ -22193,13 +22195,13 @@
  have_ip_vs_h="yes"
 fi
 
 done
 
 
-	CFLAGS=$SAVE_CFLAGS
+	CFLAGS="$SAVE_CFLAGS"
 fi
 
 # For quota module
 for ac_header in sys/ucred.h
 do :
   ac_fn_c_check_header_compile "$LINENO" "sys/ucred.h" "ac_cv_header_sys_ucred_h" "
@@ -25585,33 +25587,134 @@
 # --with-libiptc {{{
 with_own_libiptc="no"
 
 # Check whether --with-libiptc was given.
 if test "${with_libiptc+set}" = set; then :
   withval=$with_libiptc;
-	if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	if test "x$withval" = "xshipped"
 	then
-		LDFLAGS="$LDFLAGS -L$withval/lib"
-		CPPFLAGS="$CPPFLAGS -I$withval/include"
+		with_own_libiptc="yes"
+		with_libiptc="yes"
+	else if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	then
+		LIBIPTC_CPPFLAGS="$LIBIPTC_CPPFLAGS -I$withval/include"
+		LIBIPTC_LDFLAGS="$LIBIPTC_LDFLAGS -L$withval/lib"
 		with_libiptc="yes"
 	else
 		with_libiptc="$withval"
-	fi
+	fi; fi
 
 else
 
 	if test "x$ac_system" = "xLinux"
 	then
 		with_libiptc="yes"
 	else
 		with_libiptc="no (Linux only)"
 	fi
 
 fi
 
-if test "x$with_libiptc" = "xyes"
+SAVE_CPPFLAGS="$CPPFLAGS"
+SAVE_LDFLAGS="$LDFLAGS"
+CPPFLAGS="$CPPFLAGS $LIBIPTC_CPPFLAGS"
+LDFLAGS="$LDFLAGS $LIBIPTC_LDFLAGS"
+# check whether the header file for libiptc is available.
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xno"
+then
+	for ac_header in libiptc/libiptc.h
+do :
+  ac_fn_c_check_header_mongrel "$LINENO" "libiptc/libiptc.h" "ac_cv_header_libiptc_libiptc_h" "$ac_includes_default"
+if test "x$ac_cv_header_libiptc_libiptc_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBIPTC_LIBIPTC_H 1
+_ACEOF
+
+
+$as_echo "#define HAVE_LIBIPTC_LIBIPTC_H 1" >>confdefs.h
+
+
+else
+
+		with_libiptc="yes"
+		with_own_libiptc="yes"
+
+fi
+
+done
+
+fi
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xno"
+then
+	for ac_header in libiptc/libip6tc.h
+do :
+  ac_fn_c_check_header_mongrel "$LINENO" "libiptc/libip6tc.h" "ac_cv_header_libiptc_libip6tc_h" "$ac_includes_default"
+if test "x$ac_cv_header_libiptc_libip6tc_h" = x""yes; then :
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBIPTC_LIBIP6TC_H 1
+_ACEOF
+
+
+$as_echo "#define HAVE_LIBIPTC_LIBIP6TC_H 1" >>confdefs.h
+
+
+else
+
+		with_libiptc="yes"
+		with_own_libiptc="yes"
+
+fi
+
+done
+
+fi
+# If the header file is available, check for the required type declaractions.
+# They may be missing in old versions of libiptc. In that case, they will be
+# declared in the iptables plugin.
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xno"
+then
+	ac_fn_c_check_type "$LINENO" "iptc_handle_t" "ac_cv_type_iptc_handle_t" "
+#if OWN_LIBIPTC
+# include \"$srcdir/src/owniptc/libiptc.h\"
+# include \"$srcdir/src/owniptc/libip6tc.h\"
+#else
+# include <libiptc/libiptc.h>
+# include <libiptc/libip6tc.h>
+#endif
+
+"
+if test "x$ac_cv_type_iptc_handle_t" = x""yes; then :
+
+cat >>confdefs.h <<_ACEOF
+#define HAVE_IPTC_HANDLE_T 1
+_ACEOF
+
+
+fi
+ac_fn_c_check_type "$LINENO" "ip6tc_handle_t" "ac_cv_type_ip6tc_handle_t" "
+#if OWN_LIBIPTC
+# include \"$srcdir/src/owniptc/libiptc.h\"
+# include \"$srcdir/src/owniptc/libip6tc.h\"
+#else
+# include <libiptc/libiptc.h>
+# include <libiptc/libip6tc.h>
+#endif
+
+"
+if test "x$ac_cv_type_ip6tc_handle_t" = x""yes; then :
+
+cat >>confdefs.h <<_ACEOF
+#define HAVE_IP6TC_HANDLE_T 1
+_ACEOF
+
+
+fi
+
+fi
+# Check for the iptc_init symbol in the library.
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xno"
 then
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for iptc_init in -liptc" >&5
 $as_echo_n "checking for iptc_init in -liptc... " >&6; }
 if test "${ac_cv_lib_iptc_iptc_init+set}" = set; then :
   $as_echo_n "(cached) " >&6
 else
@@ -25657,42 +25760,17 @@
 		with_libiptc="yes"
 		with_own_libiptc="yes"
 
 fi
 
 fi
-if test "x$with_libiptc" = "xyes" -a "x$with_own_libiptc" != "xyes"
-then
-	for ac_header in libiptc/libiptc.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "libiptc/libiptc.h" "ac_cv_header_libiptc_libiptc_h" "$ac_includes_default"
-if test "x$ac_cv_header_libiptc_libiptc_h" = x""yes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBIPTC_LIBIPTC_H 1
-_ACEOF
-
-
-$as_echo "#define HAVE_LIBIPTC_LIBIPTC_H 1" >>confdefs.h
-
-
-else
-
-		with_libiptc="yes"
-		with_own_libiptc="yes"
-
-fi
-
-done
-
-fi
-if test "x$with_libiptc" = "xyes"
+# The system wide version failed for some reason. Check if we have the required
+# headers to build the shipped version.
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	CFLAGS="$CFLAGS $KERNEL_CFLAGS"
-
-	for ac_header in linux/netfilter_ipv4/ip_tables.h linux/netfilter_ipv6/ip6_tables.h
+	for ac_header in linux/netfilter_ipv4/ip_tables.h linux/netfilter_ipv6/ip6_tables.h linux/netfilter/x_tables.h
 do :
   as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
 ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "
 #include \"$srcdir/src/owniptc/ipt_kernel_headers.h\"
 
 "
@@ -25701,21 +25779,19 @@
   cat >>confdefs.h <<_ACEOF
 #define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 else
 
-		with_libiptc="no (Linux iptables headers not found - check KERNEL_DIR)"
+		with_libiptc="no (Linux iptables headers not found)"
 		with_own_libiptc="no"
 
 fi
 
 done
 
-
-	CFLAGS=$SAVE_CFLAGS
 fi
  if test "x$with_libiptc" = "xyes"; then
   BUILD_WITH_LIBIPTC_TRUE=
   BUILD_WITH_LIBIPTC_FALSE='#'
 else
   BUILD_WITH_LIBIPTC_TRUE='#'
@@ -25727,63 +25803,27 @@
   BUILD_WITH_OWN_LIBIPTC_FALSE='#'
 else
   BUILD_WITH_OWN_LIBIPTC_TRUE='#'
   BUILD_WITH_OWN_LIBIPTC_FALSE=
 fi
 
-if test "x$with_own_libiptc" = "xyes"
-then
-
-$as_echo "#define OWN_LIBIPTC 1" >>confdefs.h
-
-fi
 if test "x$with_libiptc" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	CFLAGS="$CFLAGS $KERNEL_CFLAGS"
-
-	ac_fn_c_check_type "$LINENO" "iptc_handle_t" "ac_cv_type_iptc_handle_t" "
-#if OWN_LIBIPTC
-# include \"$srcdir/src/owniptc/libiptc.h\"
-# include \"$srcdir/src/owniptc/libip6tc.h\"
-#else
-# include <libiptc/libiptc.h>
-# include <libiptc/libip6tc.h>
-#endif
-
-"
-if test "x$ac_cv_type_iptc_handle_t" = x""yes; then :
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_IPTC_HANDLE_T 1
-_ACEOF
-
-
-fi
-ac_fn_c_check_type "$LINENO" "ip6tc_handle_t" "ac_cv_type_ip6tc_handle_t" "
-#if OWN_LIBIPTC
-# include \"$srcdir/src/owniptc/libiptc.h\"
-# include \"$srcdir/src/owniptc/libip6tc.h\"
-#else
-# include <libiptc/libiptc.h>
-# include <libiptc/libip6tc.h>
-#endif
-
-"
-if test "x$ac_cv_type_ip6tc_handle_t" = x""yes; then :
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE_IP6TC_HANDLE_T 1
-_ACEOF
+	BUILD_WITH_LIBIPTC_CPPFLAGS="$LIBIPTC_CPPFLAGS"
+	BUILD_WITH_LIBIPTC_LDFLAGS="$LIBIPTC_LDFLAGS"
 
 
 fi
+if test "x$with_own_libiptc" = "xyes"
+then
 
+$as_echo "#define OWN_LIBIPTC 1" >>confdefs.h
 
-	CFLAGS=$SAVE_CFLAGS
 fi
+CPPFLAGS="$SAVE_CPPFLAGS"
+LDFLAGS="$SAVE_LDFLAGS"
 # }}}
 
 # --with-java {{{
 with_java_home="$JAVA_HOME"
 with_java_vmtype="client"
 with_java_cflags=""
@@ -26389,13 +26429,13 @@
  fi
 
 fi
 
 if test "x$with_libnetlink" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
+	SAVE_CFLAGS="$CFLAGS"
 	CFLAGS="$CFLAGS $with_libnetlink_cflags"
 
 	with_libnetlink="no (libnetlink.h not found)"
 
 	for ac_header in libnetlink.h iproute/libnetlink.h linux/libnetlink.h
 do :
@@ -27253,14 +27293,14 @@
 PERL="$perl_interpreter"
 
 
 if test "x$with_libperl" = "xyes" \
 	&& test -n "$perl_interpreter"
 then
-  SAVE_CFLAGS=$CFLAGS
-  SAVE_LDFLAGS=$LDFLAGS
+  SAVE_CFLAGS="$CFLAGS"
+  SAVE_LDFLAGS="$LDFLAGS"
   PERL_CFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ccopts`
   PERL_LDFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ldopts`
   CFLAGS="$CFLAGS $PERL_CFLAGS"
   LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for libperl" >&5
@@ -27310,14 +27350,14 @@
 
 
   else
 	  with_libperl="no"
   fi
 
-  CFLAGS=$SAVE_CFLAGS
-  LDFLAGS=$SAVE_LDFLAGS
+  CFLAGS="$SAVE_CFLAGS"
+  LDFLAGS="$SAVE_LDFLAGS"
 else if test -z "$perl_interpreter"; then
   with_libperl="no (no perl interpreter found)"
   c_cv_have_libperl="no"
 fi; fi
  if test "x$with_libperl" = "xyes"; then
   BUILD_WITH_LIBPERL_TRUE=
@@ -27327,14 +27367,14 @@
   BUILD_WITH_LIBPERL_FALSE=
 fi
 
 
 if test "x$with_libperl" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	SAVE_LDFLAGS=$LDFLAGS
+	SAVE_CFLAGS="$CFLAGS"
+	SAVE_LDFLAGS="$LDFLAGS"
 	CFLAGS="$CFLAGS $PERL_CFLAGS"
 	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if perl supports ithreads" >&5
 $as_echo_n "checking if perl supports ithreads... " >&6; }
 if test "${c_cv_have_perl_ithreads+set}" = set; then :
@@ -27376,20 +27416,20 @@
 	then
 
 $as_echo "#define HAVE_PERL_ITHREADS 1" >>confdefs.h
 
 	fi
 
-	CFLAGS=$SAVE_CFLAGS
-	LDFLAGS=$SAVE_LDFLAGS
+	CFLAGS="$SAVE_CFLAGS"
+	LDFLAGS="$SAVE_LDFLAGS"
 fi
 
 if test "x$with_libperl" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	SAVE_LDFLAGS=$LDFLAGS
+	SAVE_CFLAGS="$CFLAGS"
+	SAVE_LDFLAGS="$LDFLAGS"
 	# trigger an error if Perl_load_module*() uses __attribute__nonnull__(3)
 	# (see issues #41 and #42)
 	CFLAGS="$CFLAGS $PERL_CFLAGS -Wall -Werror"
 	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for broken Perl_load_module()" >&5
@@ -27428,28 +27468,28 @@
     conftest$ac_exeext conftest.$ac_ext
 
 fi
 { $as_echo "$as_me:${as_lineno-$LINENO}: result: $c_cv_have_broken_perl_load_module" >&5
 $as_echo "$c_cv_have_broken_perl_load_module" >&6; }
 
-	CFLAGS=$SAVE_CFLAGS
-	LDFLAGS=$SAVE_LDFLAGS
+	CFLAGS="$SAVE_CFLAGS"
+	LDFLAGS="$SAVE_LDFLAGS"
 fi
  if test "x$c_cv_have_broken_perl_load_module" = "xyes"; then
   HAVE_BROKEN_PERL_LOAD_MODULE_TRUE=
   HAVE_BROKEN_PERL_LOAD_MODULE_FALSE='#'
 else
   HAVE_BROKEN_PERL_LOAD_MODULE_TRUE='#'
   HAVE_BROKEN_PERL_LOAD_MODULE_FALSE=
 fi
 
 
 if test "x$with_libperl" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	SAVE_LDFLAGS=$LDFLAGS
+	SAVE_CFLAGS="$CFLAGS"
+	SAVE_LDFLAGS="$LDFLAGS"
 	CFLAGS="$CFLAGS $PERL_CFLAGS"
 	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	ac_fn_c_check_member "$LINENO" "struct mgvtbl" "svt_local" "ac_cv_member_struct_mgvtbl_svt_local" "
 #include <EXTERN.h>
 #include <perl.h>
@@ -27467,14 +27507,14 @@
 	then
 
 $as_echo "#define HAVE_PERL_STRUCT_MGVTBL_SVT_LOCAL 1" >>confdefs.h
 
 	fi
 
-	CFLAGS=$SAVE_CFLAGS
-	LDFLAGS=$SAVE_LDFLAGS
+	CFLAGS="$SAVE_CFLAGS"
+	LDFLAGS="$SAVE_LDFLAGS"
 fi
 # }}}
 
 # --with-libpq {{{
 with_pg_config="pg_config"
 with_libpq_includedir=""
@@ -35523,13 +35563,13 @@
 
 cat >>$CONFIG_STATUS <<\_ACEOF || ac_write_fail=1
 # Save the log message, to keep $0 and so on meaningful, and to
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by collectd $as_me 4.7.3, which was
+This file was extended by collectd $as_me 4.7.4, which was
 generated by GNU Autoconf 2.64.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -35587,13 +35627,13 @@
 
 Report bugs to the package provider."
 
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
 ac_cs_version="\\
-collectd config.status 4.7.3
+collectd config.status 4.7.4
 configured by $0, generated by GNU Autoconf 2.64,
   with options \\"`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright (C) 2009 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/configure.in	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/configure.in	2009-10-03 23:48:47.000000000 +0800
@@ -342,19 +342,19 @@
 
 # For ipvs module
 have_net_ip_vs_h="no"
 have_ip_vs_h="no"
 if test "x$ac_system" = "xLinux"
 then
-	SAVE_CFLAGS=$CFLAGS
+	SAVE_CFLAGS="$CFLAGS"
 	CFLAGS="$CFLAGS $KERNEL_CFLAGS"
 
 	AC_CHECK_HEADERS(net/ip_vs.h, [have_net_ip_vs_h="yes"])
 	AC_CHECK_HEADERS(ip_vs.h, [have_ip_vs_h="yes"])
 
-	CFLAGS=$SAVE_CFLAGS
+	CFLAGS="$SAVE_CFLAGS"
 fi
 
 # For quota module
 AC_CHECK_HEADERS(sys/ucred.h, [], [],
 [
 #if HAVE_SYS_TYPES_H
@@ -1425,91 +1425,116 @@
 # }}}
 
 # --with-libiptc {{{
 with_own_libiptc="no"
 AC_ARG_WITH(libiptc, [AS_HELP_STRING([--with-libiptc@<:@=PREFIX@:>@], [Path to libiptc.])],
 [
-	if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	if test "x$withval" = "xshipped"
 	then
-		LDFLAGS="$LDFLAGS -L$withval/lib"
-		CPPFLAGS="$CPPFLAGS -I$withval/include"
+		with_own_libiptc="yes"
+		with_libiptc="yes"
+	else if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	then
+		LIBIPTC_CPPFLAGS="$LIBIPTC_CPPFLAGS -I$withval/include"
+		LIBIPTC_LDFLAGS="$LIBIPTC_LDFLAGS -L$withval/lib"
 		with_libiptc="yes"
 	else
 		with_libiptc="$withval"
-	fi
+	fi; fi
 ],
 [
 	if test "x$ac_system" = "xLinux"
 	then
 		with_libiptc="yes"
 	else
 		with_libiptc="no (Linux only)"
 	fi
 ])
-if test "x$with_libiptc" = "xyes"
+SAVE_CPPFLAGS="$CPPFLAGS"
+SAVE_LDFLAGS="$LDFLAGS"
+CPPFLAGS="$CPPFLAGS $LIBIPTC_CPPFLAGS"
+LDFLAGS="$LDFLAGS $LIBIPTC_LDFLAGS"
+# check whether the header file for libiptc is available.
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xno"
 then
-	AC_CHECK_LIB(iptc, iptc_init,
+	AC_CHECK_HEADERS(libiptc/libiptc.h,
 	[
-		AC_DEFINE(HAVE_LIBIPTC, 1, [Define to 1 if you have the iptc library (-liptc).])
+		AC_DEFINE(HAVE_LIBIPTC_LIBIPTC_H, 1, [Define to 1 if you have the <libiptc/libiptc.h> header file.])
 	],
 	[
 		with_libiptc="yes"
 		with_own_libiptc="yes"
 	])
 fi
-if test "x$with_libiptc" = "xyes" -a "x$with_own_libiptc" != "xyes"
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xno"
 then
-	AC_CHECK_HEADERS(libiptc/libiptc.h,
+	AC_CHECK_HEADERS(libiptc/libip6tc.h,
 	[
-		AC_DEFINE(HAVE_LIBIPTC_LIBIPTC_H, 1, [Define to 1 if you have the <libiptc/libiptc.h> header file.])
+		AC_DEFINE(HAVE_LIBIPTC_LIBIP6TC_H, 1, [Define to 1 if you have the <libiptc/libip6tc.h> header file.])
 	],
 	[
 		with_libiptc="yes"
 		with_own_libiptc="yes"
 	])
 fi
-if test "x$with_libiptc" = "xyes"
+# If the header file is available, check for the required type declaractions.
+# They may be missing in old versions of libiptc. In that case, they will be
+# declared in the iptables plugin.
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xno"
 then
-	SAVE_CFLAGS=$CFLAGS
-	CFLAGS="$CFLAGS $KERNEL_CFLAGS"
-
-	AC_CHECK_HEADERS(linux/netfilter_ipv4/ip_tables.h linux/netfilter_ipv6/ip6_tables.h, [],
+	AC_CHECK_TYPES([iptc_handle_t, ip6tc_handle_t], [], [],
+	[
+#if OWN_LIBIPTC
+# include "$srcdir/src/owniptc/libiptc.h"
+# include "$srcdir/src/owniptc/libip6tc.h"
+#else
+# include <libiptc/libiptc.h>
+# include <libiptc/libip6tc.h>
+#endif
+	])
+fi
+# Check for the iptc_init symbol in the library.
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xno"
+then
+	AC_CHECK_LIB(iptc, iptc_init,
+	[
+		AC_DEFINE(HAVE_LIBIPTC, 1, [Define to 1 if you have the iptc library (-liptc).])
+	],
 	[
-		with_libiptc="no (Linux iptables headers not found - check KERNEL_DIR)"
+		with_libiptc="yes"
+		with_own_libiptc="yes"
+	])
+fi
+# The system wide version failed for some reason. Check if we have the required
+# headers to build the shipped version.
+if test "x$with_libiptc" = "xyes" && test "x$with_own_libiptc" = "xyes"
+then
+	AC_CHECK_HEADERS(linux/netfilter_ipv4/ip_tables.h linux/netfilter_ipv6/ip6_tables.h linux/netfilter/x_tables.h, [],
+	[
+		with_libiptc="no (Linux iptables headers not found)"
 		with_own_libiptc="no"
 	],
 	[
 #include "$srcdir/src/owniptc/ipt_kernel_headers.h"
 	])
-
-	CFLAGS=$SAVE_CFLAGS
 fi
 AM_CONDITIONAL(BUILD_WITH_LIBIPTC, test "x$with_libiptc" = "xyes")
 AM_CONDITIONAL(BUILD_WITH_OWN_LIBIPTC, test "x$with_own_libiptc" = "xyes")
-if test "x$with_own_libiptc" = "xyes"
+if test "x$with_libiptc" = "xyes"
 then
-	AC_DEFINE(OWN_LIBIPTC, 1, [Define to 1 if we use the shipped iptc library.])
+	BUILD_WITH_LIBIPTC_CPPFLAGS="$LIBIPTC_CPPFLAGS"
+	BUILD_WITH_LIBIPTC_LDFLAGS="$LIBIPTC_LDFLAGS"
+	AC_SUBST(BUILD_WITH_LIBIPTC_CPPFLAGS)
+	AC_SUBST(BUILD_WITH_LIBIPTC_LDFLAGS)
 fi
-if test "x$with_libiptc" = "xyes"
+if test "x$with_own_libiptc" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	CFLAGS="$CFLAGS $KERNEL_CFLAGS"
-
-	AC_CHECK_TYPES([iptc_handle_t, ip6tc_handle_t], [], [],
-	[
-#if OWN_LIBIPTC
-# include "$srcdir/src/owniptc/libiptc.h"
-# include "$srcdir/src/owniptc/libip6tc.h"
-#else
-# include <libiptc/libiptc.h>
-# include <libiptc/libip6tc.h>
-#endif
-	])
-
-	CFLAGS=$SAVE_CFLAGS
+	AC_DEFINE(OWN_LIBIPTC, 1, [Define to 1 if we use the shipped iptc library.])
 fi
+CPPFLAGS="$SAVE_CPPFLAGS"
+LDFLAGS="$SAVE_LDFLAGS"
 # }}}
 
 # --with-java {{{
 with_java_home="$JAVA_HOME"
 with_java_vmtype="client"
 with_java_cflags=""
@@ -1813,13 +1838,13 @@
  else
 	 with_libnetlink="no (Linux only library)"
  fi
 ])
 if test "x$with_libnetlink" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
+	SAVE_CFLAGS="$CFLAGS"
 	CFLAGS="$CFLAGS $with_libnetlink_cflags"
 
 	with_libnetlink="no (libnetlink.h not found)"
 
 	AC_CHECK_HEADERS(libnetlink.h iproute/libnetlink.h linux/libnetlink.h,
 	[
@@ -2251,14 +2276,14 @@
 
 AC_SUBST(PERL, "$perl_interpreter")
 
 if test "x$with_libperl" = "xyes" \
 	&& test -n "$perl_interpreter"
 then
-  SAVE_CFLAGS=$CFLAGS
-  SAVE_LDFLAGS=$LDFLAGS
+  SAVE_CFLAGS="$CFLAGS"
+  SAVE_LDFLAGS="$LDFLAGS"
 dnl ARCHFLAGS="" -> disable multi -arch on OSX (see Config_heavy.pl:fetch_string)
   PERL_CFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ccopts`
   PERL_LDFLAGS=`ARCHFLAGS="" $perl_interpreter -MExtUtils::Embed -e ldopts`
   CFLAGS="$CFLAGS $PERL_CFLAGS"
   LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
@@ -2289,24 +2314,24 @@
 	  AC_SUBST(PERL_CFLAGS)
 	  AC_SUBST(PERL_LDFLAGS)
   else
 	  with_libperl="no"
   fi
 
-  CFLAGS=$SAVE_CFLAGS
-  LDFLAGS=$SAVE_LDFLAGS
+  CFLAGS="$SAVE_CFLAGS"
+  LDFLAGS="$SAVE_LDFLAGS"
 else if test -z "$perl_interpreter"; then
   with_libperl="no (no perl interpreter found)"
   c_cv_have_libperl="no"
 fi; fi
 AM_CONDITIONAL(BUILD_WITH_LIBPERL, test "x$with_libperl" = "xyes")
 
 if test "x$with_libperl" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	SAVE_LDFLAGS=$LDFLAGS
+	SAVE_CFLAGS="$CFLAGS"
+	SAVE_LDFLAGS="$LDFLAGS"
 	CFLAGS="$CFLAGS $PERL_CFLAGS"
 	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	AC_CACHE_CHECK([if perl supports ithreads],
 		[c_cv_have_perl_ithreads],
 		AC_LINK_IFELSE(
@@ -2328,20 +2353,20 @@
 
 	if test "x$c_cv_have_perl_ithreads" = "xyes"
 	then
 		AC_DEFINE(HAVE_PERL_ITHREADS, 1, [Define if Perl supports ithreads.])
 	fi
 
-	CFLAGS=$SAVE_CFLAGS
-	LDFLAGS=$SAVE_LDFLAGS
+	CFLAGS="$SAVE_CFLAGS"
+	LDFLAGS="$SAVE_LDFLAGS"
 fi
 
 if test "x$with_libperl" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	SAVE_LDFLAGS=$LDFLAGS
+	SAVE_CFLAGS="$CFLAGS"
+	SAVE_LDFLAGS="$LDFLAGS"
 	# trigger an error if Perl_load_module*() uses __attribute__nonnull__(3)
 	# (see issues #41 and #42)
 	CFLAGS="$CFLAGS $PERL_CFLAGS -Wall -Werror"
 	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	AC_CACHE_CHECK([for broken Perl_load_module()],
@@ -2362,22 +2387,22 @@
 			]]),
 			[c_cv_have_broken_perl_load_module="no"],
 			[c_cv_have_broken_perl_load_module="yes"]
 		)
 	)
 
-	CFLAGS=$SAVE_CFLAGS
-	LDFLAGS=$SAVE_LDFLAGS
+	CFLAGS="$SAVE_CFLAGS"
+	LDFLAGS="$SAVE_LDFLAGS"
 fi
 AM_CONDITIONAL(HAVE_BROKEN_PERL_LOAD_MODULE,
 		test "x$c_cv_have_broken_perl_load_module" = "xyes")
 
 if test "x$with_libperl" = "xyes"
 then
-	SAVE_CFLAGS=$CFLAGS
-	SAVE_LDFLAGS=$LDFLAGS
+	SAVE_CFLAGS="$CFLAGS"
+	SAVE_LDFLAGS="$LDFLAGS"
 	CFLAGS="$CFLAGS $PERL_CFLAGS"
 	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	AC_CHECK_MEMBER(
 		[struct mgvtbl.svt_local],
 		[have_struct_mgvtbl_svt_local="yes"],
@@ -2391,14 +2416,14 @@
 	if test "x$have_struct_mgvtbl_svt_local" = "xyes"
 	then
 		AC_DEFINE(HAVE_PERL_STRUCT_MGVTBL_SVT_LOCAL, 1,
 				  [Define if Perl's struct mgvtbl has member svt_local.])
 	fi
 
-	CFLAGS=$SAVE_CFLAGS
-	LDFLAGS=$SAVE_LDFLAGS
+	CFLAGS="$SAVE_CFLAGS"
+	LDFLAGS="$SAVE_LDFLAGS"
 fi
 # }}}
 
 # --with-libpq {{{
 with_pg_config="pg_config"
 with_libpq_includedir=""
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/etc/collection.conf /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/etc/collection.conf
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/etc/collection.conf	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/etc/collection.conf	2009-10-03 23:48:47.000000000 +0800
@@ -112,13 +112,13 @@
 <Type disk_latency>
   Module GenericIO
   DataSources read write
   DSName "read Read "
   DSName write Write
   RRDTitle "Disk Latency for {plugin_instance}"
-  RRDVerticalLabel "microseconds"
+  RRDVerticalLabel "seconds"
   Scale 0.000001
   RRDFormat "%5.1lf %ss"
 </Type>
 <Type disk_octets>
   Module GenericIO
   DataSources read write
@@ -278,12 +278,19 @@
   DSName tx TX
   RRDTitle "Interface Packets ({type_instance})"
   RRDVerticalLabel "Packets per second"
 # RRDOptions ...
   RRDFormat "%5.1lf%s"
 </Type>
+<Type invocations>
+  DataSources value
+  DSName "value Invocations/s"
+  RRDTitle "Invocations ({instance})"
+  RRDVerticalLabel "Invocations/s"
+  RRDFormat "%5.1lf"
+</Type>
 <Type io_octets>
   Module GenericIO
   DataSources rx tx
   DSName "rx Read   "
   DSName "tx Written"
   RRDTitle "IO Traffic ({instance})"
@@ -565,12 +572,26 @@
   DataSources value
   DSName value Temp
   RRDTitle "Temperature ({instance})"
   RRDVerticalLabel "°Celsius"
   RRDFormat "%4.1lf°C"
 </Type>
+<Type threads>
+  DataSources value
+  DSName "value Threads"
+  RRDTitle "Threads ({instance})"
+  RRDVerticalLabel "Threads"
+  RRDFormat "%5.2lf"
+</Type>
+<Type total_requests>
+  DataSources value
+  DSName "value Requests/s"
+  RRDTitle "Requests ({instance})"
+  RRDVerticalLabel "Requests/s"
+  RRDFormat "%6.2lf"
+</Type>
 <Type total_time_in_ms>
   DataSources value
   DSName "value Time"
   RRDTitle "Time {instance}"
   RRDVerticalLabel "Seconds"
   RRDFormat "%6.2lf %ss"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/lib/Collectd/Graph/Common.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/lib/Collectd/Graph/Common.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/lib/Collectd/Graph/Common.pm	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/lib/Collectd/Graph/Common.pm	2009-10-03 23:48:30.000000000 +0800
@@ -262,12 +262,13 @@
 
   opendir ($dh, "$data_dir") or confess ("opendir ($data_dir): $!");
   while (my $entry = readdir ($dh))
   {
     next if ($entry =~ m/^\./);
     next if (!-d "$data_dir/$entry");
+    next if (!-r "$data_dir/$entry" or !-x "$data_dir/$entry");
     push (@ret, sanitize_hostname ($entry));
   }
   closedir ($dh);
 
   if (wantarray ())
   {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/lib/Collectd/Graph/Type/JavaMemory.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/lib/Collectd/Graph/Type/JavaMemory.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/lib/Collectd/Graph/Type/JavaMemory.pm	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/lib/Collectd/Graph/Type/JavaMemory.pm	2009-10-03 23:48:30.000000000 +0800
@@ -89,12 +89,16 @@
   my @ret = ('-t', $rrd_title, @$rrd_opts);
 
   if (defined $obj->{'rrd_vertical'})
   {
     push (@ret, '-v', $obj->{'rrd_vertical'});
   }
+  else
+  {
+    push (@ret, '-v', "Bytes");
+  }
 
   for (@$idents)
   {
     my $ident = $_;
     if ($ident->{'type_instance'})
     {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/lib/Collectd/Graph/TypeLoader.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/lib/Collectd/Graph/TypeLoader.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/lib/Collectd/Graph/TypeLoader.pm	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/lib/Collectd/Graph/TypeLoader.pm	2009-10-03 23:48:30.000000000 +0800
@@ -56,14 +56,15 @@
 
 sub _create_object
 {
   my $module = shift;
   my $obj;
 
-  local $SIG{__WARN__} = sub { print STDERR "WARNING: " . join (', ', @_) . "\n"; };
-  local $SIG{__DIE__} = sub { print STDERR "FATAL: " . join (', ', @_) . "\n"; };
+  # Surpress warnings and error messages caused by the eval.
+  local $SIG{__WARN__} = sub { return (1); print STDERR "WARNING: " . join (', ', @_) . "\n"; };
+  local $SIG{__DIE__}  = sub { return (1); print STDERR "FATAL: "   . join (', ', @_) . "\n"; };
 
   eval <<PERL;
   require $module;
   \$obj = ${module}->new ();
 PERL
   if (!$obj)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/lib/Collectd/Graph/Type.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/lib/Collectd/Graph/Type.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/contrib/collection3/lib/Collectd/Graph/Type.pm	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/contrib/collection3/lib/Collectd/Graph/Type.pm	2009-10-03 23:48:30.000000000 +0800
@@ -247,13 +247,17 @@
   my $plugin = $ident->{'plugin'};
   my $plugin_instance = $ident->{'plugin_instance'};
   my $type = $ident->{'type'};
   my $type_instance = $ident->{'type_instance'};
   my $instance;
 
-  if (defined $type_instance)
+  if ((defined $type_instance) && (defined $plugin_instance))
+  {
+    $instance = "$plugin_instance/$type_instance";
+  }
+  elsif (defined $type_instance)
   {
     $instance = $type_instance;
   }
   elsif (defined $plugin_instance)
   {
     $instance = $plugin_instance;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/Makefile.in	2009-09-13 18:38:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/Makefile.in	2009-10-03 23:48:56.000000000 +0800
@@ -112,12 +112,14 @@
 BUILD_WITH_LIBCURL_LIBS = @BUILD_WITH_LIBCURL_LIBS@
 BUILD_WITH_LIBDBI_CPPFLAGS = @BUILD_WITH_LIBDBI_CPPFLAGS@
 BUILD_WITH_LIBDBI_LDFLAGS = @BUILD_WITH_LIBDBI_LDFLAGS@
 BUILD_WITH_LIBDBI_LIBS = @BUILD_WITH_LIBDBI_LIBS@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
+BUILD_WITH_LIBIPTC_CPPFLAGS = @BUILD_WITH_LIBIPTC_CPPFLAGS@
+BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/README /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/README
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/README	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/README	2009-10-03 23:48:47.000000000 +0800
@@ -30,15 +30,12 @@
       Statistics about Ascent, a free server for the game `World of Warcraft'.
 
     - battery
       Batterycharge, -current and voltage of ACPI and PMU based laptop
       batteries.
 
-    - curl
-      Parse statistics from websites using regular expressions.
-
     - bind
       Name server and resolver statistics from the `statistics-channel'
       interface of BIND 9.5, 9,6 and later.
 
     - conntrack
       Number of nf_conntrack entries.
@@ -47,12 +44,15 @@
       CPU utilization: Time spent in the system, user, nice, idle, and related
       states.
 
     - cpufreq
       CPU frequency (For laptops with speed step or a similar technology)
 
+    - curl
+      Parse statistics from websites using regular expressions.
+
     - dbi
       Executes SQL statements on various databases and interprets the returned
       data.
 
     - df
       Mountpoint usage (Basically the values `df(1)' delivers)
@@ -450,17 +450,22 @@
     Used by the `network' plugin for encryption and authentication.
 
   * libhal (optional)
     If present, the uuid plugin will check for UUID from HAL.
     <http://hal.freedesktop.org/>
 
-  * libiptc (optional, if not found a version shipped with this distribution
-    can be used if the Linux kernel headers are available)
+  * libiptc (optional)
     For querying iptables counters.
     <http://netfilter.org/>
 
+    If not found on the system, a version shipped with this distribution can
+    be used. It requires some Linux headers in /usr/include/linux. You can
+    force the build system to use the shipped version by specifying
+      --with-libiptc=shipped
+    when running the configure script.
+
   * libjvm (optional)
     Library that encapsulates the `Java Virtual Machine' (JVM). This library is
     used by the Java plugin to execute Java bytecode. See “Configuring with
     libjvm” below.
 
   * libmemcached (optional)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd.1	2009-09-13 18:39:19.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd.1	2009-10-03 23:50:01.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD 1"
-.TH COLLECTD 1 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD 1 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd \- System statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd.conf.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd.conf.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd.conf.5	2009-09-13 18:39:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd.conf.5	2009-10-03 23:50:01.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD.CONF 5"
-.TH COLLECTD.CONF 5 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD.CONF 5 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd.conf \- Configuration for the system statistics collection daemon \fBcollectd\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-email.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-email.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-email.5	2009-09-13 18:39:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-email.5	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EMAIL 5"
-.TH COLLECTD-EMAIL 5 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD-EMAIL 5 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-email \- Documentation of collectd's \f(CW\*(C`email plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-exec.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-exec.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-exec.5	2009-09-13 18:39:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-exec.5	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EXEC 5"
-.TH COLLECTD-EXEC 5 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD-EXEC 5 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-exec \- Documentation of collectd's \f(CW\*(C`exec plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-java.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-java.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-java.5	2009-09-13 18:39:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-java.5	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-JAVA 5"
-.TH COLLECTD-JAVA 5 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD-JAVA 5 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-java \- Documentation of collectd's "java plugin"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectdmon.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectdmon.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectdmon.1	2009-09-13 18:39:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectdmon.1	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTDMON 1"
-.TH COLLECTDMON 1 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTDMON 1 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectdmon \- Monitoring daemon for collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-nagios.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-nagios.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-nagios.1	2009-09-13 18:39:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-nagios.1	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-NAGIOS 1"
-.TH COLLECTD-NAGIOS 1 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD-NAGIOS 1 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-nagios \- Nagios plugin for querying collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-perl.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-perl.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-perl.5	2009-09-13 18:39:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-perl.5	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-PERL 5"
-.TH COLLECTD-PERL 5 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD-PERL 5 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-perl \- Documentation of collectd's \f(CW\*(C`perl plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-snmp.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-snmp.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-snmp.5	2009-09-13 18:39:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-snmp.5	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-SNMP 5"
-.TH COLLECTD-SNMP 5 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD-SNMP 5 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-snmp \- Documentation of collectd's \f(CW\*(C`snmp plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-unixsock.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-unixsock.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/collectd-unixsock.5	2009-09-13 18:39:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/collectd-unixsock.5	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-UNIXSOCK 5"
-.TH COLLECTD-UNIXSOCK 5 "2009-09-13" "4.7.3" "collectd"
+.TH COLLECTD-UNIXSOCK 5 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-unixsock \- Documentation of collectd's \f(CW\*(C`unixsock plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/config.h.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/config.h.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/config.h.in	2009-09-13 18:39:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/config.h.in	2009-10-03 23:49:26.000000000 +0800
@@ -205,12 +205,15 @@
 /* Define to 1 if you have 'hal' library */
 #undef HAVE_LIBHAL
 
 /* Define to 1 if you have the iptc library (-liptc). */
 #undef HAVE_LIBIPTC
 
+/* Define to 1 if you have the <libiptc/libip6tc.h> header file. */
+#undef HAVE_LIBIPTC_LIBIP6TC_H
+
 /* Define to 1 if you have the <libiptc/libiptc.h> header file. */
 #undef HAVE_LIBIPTC_LIBIPTC_H
 
 /* Define to 1 if you have the 'kstat' library (-lkstat) */
 #undef HAVE_LIBKSTAT
 
@@ -291,12 +294,15 @@
 #undef HAVE_LINUX_NETFILTER_IPV4_IP_TABLES_H
 
 /* Define to 1 if you have the <linux/netfilter_ipv6/ip6_tables.h> header
    file. */
 #undef HAVE_LINUX_NETFILTER_IPV6_IP6_TABLES_H
 
+/* Define to 1 if you have the <linux/netfilter/x_tables.h> header file. */
+#undef HAVE_LINUX_NETFILTER_X_TABLES_H
+
 /* Define to 1 if you have the <linux/pkt_sched.h> header file. */
 #undef HAVE_LINUX_PKT_SCHED_H
 
 /* Define to 1 if you have the <linux/un.h> header file. */
 #undef HAVE_LINUX_UN_H
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/df.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/df.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/df.c	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/df.c	2009-10-03 23:48:47.000000000 +0800
@@ -124,13 +124,13 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "df", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
-	sstrncpy (vl.type, "df", sizeof (vl.host));
+	sstrncpy (vl.type, "df", sizeof (vl.type));
 	sstrncpy (vl.type_instance, df_name, sizeof (vl.type_instance));
 
 	plugin_dispatch_values (&vl);
 } /* void df_submit */
 
 static int df_read (void)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/exec.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/exec.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/exec.c	2009-09-13 18:38:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/exec.c	2009-10-03 23:48:47.000000000 +0800
@@ -379,12 +379,21 @@
 
   ERROR ("exec plugin: exec failed: %s",
       sstrerror (errno, errbuf, sizeof (errbuf)));
   exit (-1);
 } /* void exec_child }}} */
 
+static void reset_signal_mask (void) /* {{{ */
+{
+  sigset_t ss;
+
+  memset (&ss, 0, sizeof (ss));
+  sigemptyset (&ss);
+  sigprocmask (SIG_SETMASK, &ss, /* old mask = */ NULL);
+} /* }}} void reset_signal_mask */
+
 /*
  * Creates three pipes (one for reading, one for writing and one for errors),
  * forks a child, sets up the pipes so that fd_in is connected to STDIN of
  * the child and fd_out is connected to STDOUT and fd_err is connected to STDERR
  * of the child. Then is calls `exec_child'.
  */
@@ -465,12 +474,15 @@
     if (fd_pipe_err[1] != STDERR_FILENO)
     {
       dup2 (fd_pipe_err[1], STDERR_FILENO);
       close (fd_pipe_err[1]);
     }
 
+    /* Unblock all signals */
+    reset_signal_mask ();
+
     exec_child (pl);
     /* does not return */
   }
 
   close (fd_pipe_in[0]);
   close (fd_pipe_out[1]);
@@ -727,13 +739,14 @@
 
   waitpid (pid, &status, 0);
 
   DEBUG ("exec plugin: Child %i exited with status %i.",
       pid, status);
 
-  plugin_notification_meta_free (n->meta);
+  if (n->meta != NULL)
+    plugin_notification_meta_free (n->meta);
   n->meta = NULL;
   sfree (arg);
   pthread_exit ((void *) 0);
   return (NULL);
 } /* void *exec_notification_one }}} */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/iptables.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/iptables.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/iptables.c	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/iptables.c	2009-10-03 23:48:30.000000000 +0800
@@ -31,16 +31,19 @@
 
 #include <sys/socket.h>
 
 #if OWN_LIBIPTC
 # include "owniptc/libiptc.h"
 # include "owniptc/libip6tc.h"
-#else
+
+# define HAVE_IPTC_HANDLE_T 1
+# define HAVE_IP6TC_HANDLE_T 1
+
+#else /* if !OWN_LIBIPTC */
 # include <libiptc/libiptc.h>
 # include <libiptc/libip6tc.h>
-#endif
 
 /*
  * iptc_handle_t was available before libiptc was officially available as a
  * shared library. Note, that when the shared lib was introduced, the API and
  * ABI have changed slightly:
  * 'iptc_handle_t' used to be 'struct iptc_handle *' and most functions used
@@ -48,18 +51,19 @@
  * iptc_handle *' (thus removing one level of pointer indirection).
  *
  * HAVE_IPTC_HANDLE_T is used to determine which API ought to be used. While
  * this is somewhat hacky, I didn't find better way to solve that :-/
  * -tokkee
  */
-#ifndef HAVE_IPTC_HANDLE_T
+# ifndef HAVE_IPTC_HANDLE_T
 typedef struct iptc_handle iptc_handle_t;
-#endif
-#ifndef HAVE_IP6TC_HANDLE_T
+# endif
+# ifndef HAVE_IP6TC_HANDLE_T
 typedef struct ip6tc_handle ip6tc_handle_t;
-#endif
+# endif
+#endif /* !OWN_LIBIPTC */
 
 /*
  * (Module-)Global variables
  */
 
 /*
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/libcollectdclient/lcc_features.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/libcollectdclient/lcc_features.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/libcollectdclient/lcc_features.h	2009-09-13 18:39:12.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/libcollectdclient/lcc_features.h	2009-10-03 23:49:19.000000000 +0800
@@ -31,17 +31,17 @@
 #endif
 
 #define LCC_API_VERSION 0
 
 #define LCC_VERSION_MAJOR 4
 #define LCC_VERSION_MINOR 7
-#define LCC_VERSION_PATCH 3
+#define LCC_VERSION_PATCH 4
 
 #define LCC_VERSION_EXTRA ""
 
-#define LCC_VERSION_STRING "4.7.3"
+#define LCC_VERSION_STRING "4.7.4"
 
 #define LCC_VERSION_ENCODE(major, minor, patch) \
 	((major) * 10000 + (minor) * 100 + (patch))
 
 #define LCC_VERSION \
 	LCC_VERSION_ENCODE(LCC_VERSION_MAJOR, LCC_VERSION_MINOR, LCC_VERSION_PATCH)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/libcollectdclient/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/libcollectdclient/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/libcollectdclient/Makefile.in	2009-09-13 18:38:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/libcollectdclient/Makefile.in	2009-10-03 23:48:56.000000000 +0800
@@ -108,12 +108,14 @@
 BUILD_WITH_LIBCURL_LIBS = @BUILD_WITH_LIBCURL_LIBS@
 BUILD_WITH_LIBDBI_CPPFLAGS = @BUILD_WITH_LIBDBI_CPPFLAGS@
 BUILD_WITH_LIBDBI_LDFLAGS = @BUILD_WITH_LIBDBI_LDFLAGS@
 BUILD_WITH_LIBDBI_LIBS = @BUILD_WITH_LIBDBI_LIBS@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
+BUILD_WITH_LIBIPTC_CPPFLAGS = @BUILD_WITH_LIBIPTC_CPPFLAGS@
+BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/liboconfig/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/liboconfig/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/liboconfig/Makefile.in	2009-09-13 18:38:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/liboconfig/Makefile.in	2009-10-03 23:48:56.000000000 +0800
@@ -87,12 +87,14 @@
 BUILD_WITH_LIBCURL_LIBS = @BUILD_WITH_LIBCURL_LIBS@
 BUILD_WITH_LIBDBI_CPPFLAGS = @BUILD_WITH_LIBDBI_CPPFLAGS@
 BUILD_WITH_LIBDBI_LDFLAGS = @BUILD_WITH_LIBDBI_LDFLAGS@
 BUILD_WITH_LIBDBI_LIBS = @BUILD_WITH_LIBDBI_LIBS@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
+BUILD_WITH_LIBIPTC_CPPFLAGS = @BUILD_WITH_LIBIPTC_CPPFLAGS@
+BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/Makefile.am	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/Makefile.am	2009-10-03 23:48:47.000000000 +0800
@@ -353,13 +353,14 @@
 endif # !BUILD_WITH_LIBSTATGRAB
 endif # BUILD_PLUGIN_INTERFACE
 
 if BUILD_PLUGIN_IPTABLES
 pkglib_LTLIBRARIES += iptables.la
 iptables_la_SOURCES = iptables.c
-iptables_la_LDFLAGS = -module -avoid-version
+iptables_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBIPTC_CPPFLAGS)
+iptables_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBIPTC_LDFLAGS)
 if BUILD_WITH_OWN_LIBIPTC
 iptables_la_LIBADD  = owniptc/libiptc.la
 iptables_la_DEPENDENCIES = owniptc/libiptc.la
 else
 iptables_la_LIBADD = -liptc
 endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/Makefile.in	2009-09-13 18:38:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/Makefile.in	2009-10-03 23:48:56.000000000 +0800
@@ -615,13 +615,14 @@
 ipmi_la_OBJECTS = $(am_ipmi_la_OBJECTS)
 ipmi_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(ipmi_la_CFLAGS) $(CFLAGS) \
 	$(ipmi_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_IPMI_TRUE@am_ipmi_la_rpath = -rpath $(pkglibdir)
 am__iptables_la_SOURCES_DIST = iptables.c
-@BUILD_PLUGIN_IPTABLES_TRUE@am_iptables_la_OBJECTS = iptables.lo
+@BUILD_PLUGIN_IPTABLES_TRUE@am_iptables_la_OBJECTS =  \
+@BUILD_PLUGIN_IPTABLES_TRUE@	iptables_la-iptables.lo
 iptables_la_OBJECTS = $(am_iptables_la_OBJECTS)
 iptables_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(iptables_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_IPTABLES_TRUE@am_iptables_la_rpath = -rpath $(pkglibdir)
 ipvs_la_LIBADD =
@@ -1355,12 +1356,14 @@
 BUILD_WITH_LIBCURL_LIBS = @BUILD_WITH_LIBCURL_LIBS@
 BUILD_WITH_LIBDBI_CPPFLAGS = @BUILD_WITH_LIBDBI_CPPFLAGS@
 BUILD_WITH_LIBDBI_LDFLAGS = @BUILD_WITH_LIBDBI_LDFLAGS@
 BUILD_WITH_LIBDBI_LIBS = @BUILD_WITH_LIBDBI_LIBS@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
+BUILD_WITH_LIBIPTC_CPPFLAGS = @BUILD_WITH_LIBIPTC_CPPFLAGS@
+BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
@@ -1745,13 +1748,14 @@
 @BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_98)
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LIBADD = $(am__append_99) \
 @BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_100) \
 @BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_101)
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_SOURCES = iptables.c
-@BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_LDFLAGS = -module -avoid-version
+@BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBIPTC_CPPFLAGS)
+@BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBIPTC_LDFLAGS)
 @BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_FALSE@iptables_la_LIBADD = -liptc
 @BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_TRUE@iptables_la_LIBADD = owniptc/libiptc.la
 @BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_TRUE@iptables_la_DEPENDENCIES = owniptc/libiptc.la
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_SOURCES = ipmi.c
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_OPENIPMI_CFLAGS)
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_LDFLAGS = -module -avoid-version
@@ -2385,13 +2389,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/filecount.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/fscache.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/gmond_la-gmond.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/hddtemp.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/interface_la-interface.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ipmi_la-ipmi.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/iptables.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/iptables_la-iptables.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ipvs_la-ipvs.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/irq.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/java_la-java.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libvirt_la-libvirt.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/load_la-load.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/logfile.Plo@am__quote@
@@ -2554,12 +2558,19 @@
 @am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(ipmi_la_CFLAGS) $(CFLAGS) -MT ipmi_la-ipmi.lo -MD -MP -MF $(DEPDIR)/ipmi_la-ipmi.Tpo -c -o ipmi_la-ipmi.lo `test -f 'ipmi.c' || echo '$(srcdir)/'`ipmi.c
 @am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/ipmi_la-ipmi.Tpo $(DEPDIR)/ipmi_la-ipmi.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='ipmi.c' object='ipmi_la-ipmi.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(ipmi_la_CFLAGS) $(CFLAGS) -c -o ipmi_la-ipmi.lo `test -f 'ipmi.c' || echo '$(srcdir)/'`ipmi.c
 
+iptables_la-iptables.lo: iptables.c
+@am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(iptables_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT iptables_la-iptables.lo -MD -MP -MF $(DEPDIR)/iptables_la-iptables.Tpo -c -o iptables_la-iptables.lo `test -f 'iptables.c' || echo '$(srcdir)/'`iptables.c
+@am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/iptables_la-iptables.Tpo $(DEPDIR)/iptables_la-iptables.Plo
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='iptables.c' object='iptables_la-iptables.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(iptables_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o iptables_la-iptables.lo `test -f 'iptables.c' || echo '$(srcdir)/'`iptables.c
+
 ipvs_la-ipvs.lo: ipvs.c
 @am__fastdepCC_TRUE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(ipvs_la_CFLAGS) $(CFLAGS) -MT ipvs_la-ipvs.lo -MD -MP -MF $(DEPDIR)/ipvs_la-ipvs.Tpo -c -o ipvs_la-ipvs.lo `test -f 'ipvs.c' || echo '$(srcdir)/'`ipvs.c
 @am__fastdepCC_TRUE@	$(am__mv) $(DEPDIR)/ipvs_la-ipvs.Tpo $(DEPDIR)/ipvs_la-ipvs.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='ipvs.c' object='ipvs_la-ipvs.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(ipvs_la_CFLAGS) $(CFLAGS) -c -o ipvs_la-ipvs.lo `test -f 'ipvs.c' || echo '$(srcdir)/'`ipvs.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/owniptc/libiptc.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/owniptc/libiptc.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/owniptc/libiptc.c	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/owniptc/libiptc.c	2009-10-03 23:48:30.000000000 +0800
@@ -1486,12 +1486,13 @@
 	/* NOTE: prev is without any influence ! */
 	DEBUGP_C("returning rule %p\n", r);
 	return r->entry;
 }
 
 /* How many rules in this chain? */
+#if 0
 static unsigned int
 TC_NUM_RULES(const char *chain, TC_HANDLE_T *handle)
 {
 	struct chain_head *c;
 	iptc_fn = TC_NUM_RULES;
 	CHECK(*handle);
@@ -1501,13 +1502,15 @@
 		errno = ENOENT;
 		return (unsigned int)-1;
 	}
 	
 	return c->num_rules;
 }
+#endif
 
+#if 0
 static const STRUCT_ENTRY *
 TC_GET_RULE(const char *chain, unsigned int n, TC_HANDLE_T *handle)
 {
 	struct chain_head *c;
 	struct rule_head *r;
 	
@@ -1523,12 +1526,13 @@
 
 	r = iptcc_get_rule_num(c, n);
 	if (!r)
 		return NULL;
 	return r->entry;
 }
+#endif
 
 /* Returns a pointer to the target name of this position. */
 static const char *standard_target_map(int verdict)
 {
 	switch (verdict) {
 		case RETURN:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/owniptc/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/owniptc/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/owniptc/Makefile.am	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/owniptc/Makefile.am	2009-10-03 23:48:30.000000000 +0800
@@ -5,11 +5,10 @@
 if COMPILER_IS_GCC
 AM_CFLAGS = -Wall -Werror
 endif
 
 noinst_LTLIBRARIES = libiptc.la
 
-libiptc_la_CFLAGS = -I$(KERNEL_DIR)/include
 libiptc_la_SOURCES = libip4tc.c libip6tc.c \
 		ipt_kernel_headers.h libip6tc.h libiptc.h linux_list.h \
 		xtables.h libxtc.h
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/owniptc/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/owniptc/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/owniptc/Makefile.in	2009-09-13 18:38:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/owniptc/Makefile.in	2009-10-03 23:48:56.000000000 +0800
@@ -43,17 +43,14 @@
 mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = $(top_builddir)/src/config.h
 CONFIG_CLEAN_FILES =
 CONFIG_CLEAN_VPATH_FILES =
 LTLIBRARIES = $(noinst_LTLIBRARIES)
 libiptc_la_LIBADD =
-am_libiptc_la_OBJECTS = libiptc_la-libip4tc.lo libiptc_la-libip6tc.lo
+am_libiptc_la_OBJECTS = libip4tc.lo libip6tc.lo
 libiptc_la_OBJECTS = $(am_libiptc_la_OBJECTS)
-libiptc_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
-	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(libiptc_la_CFLAGS) \
-	$(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
 DEFAULT_INCLUDES = -I.@am__isrc@ -I$(top_builddir)/src
 depcomp =
 am__depfiles_maybe =
 COMPILE = $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) \
 	$(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS)
 LTCOMPILE = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
@@ -79,12 +76,14 @@
 BUILD_WITH_LIBCURL_LIBS = @BUILD_WITH_LIBCURL_LIBS@
 BUILD_WITH_LIBDBI_CPPFLAGS = @BUILD_WITH_LIBDBI_CPPFLAGS@
 BUILD_WITH_LIBDBI_LDFLAGS = @BUILD_WITH_LIBDBI_LDFLAGS@
 BUILD_WITH_LIBDBI_LIBS = @BUILD_WITH_LIBDBI_LIBS@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
+BUILD_WITH_LIBIPTC_CPPFLAGS = @BUILD_WITH_LIBIPTC_CPPFLAGS@
+BUILD_WITH_LIBIPTC_LDFLAGS = @BUILD_WITH_LIBIPTC_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_CPPFLAGS = @BUILD_WITH_LIBMEMCACHED_CPPFLAGS@
 BUILD_WITH_LIBMEMCACHED_LDFLAGS = @BUILD_WITH_LIBMEMCACHED_LDFLAGS@
 BUILD_WITH_LIBMEMCACHED_LIBS = @BUILD_WITH_LIBMEMCACHED_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
@@ -263,13 +262,12 @@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
 AUTOMAKE_OPTIONS = foreign no-dependencies
 EXTRA_DIST = libiptc.c README.collectd
 @COMPILER_IS_GCC_TRUE@AM_CFLAGS = -Wall -Werror
 noinst_LTLIBRARIES = libiptc.la
-libiptc_la_CFLAGS = -I$(KERNEL_DIR)/include
 libiptc_la_SOURCES = libip4tc.c libip6tc.c \
 		ipt_kernel_headers.h libip6tc.h libiptc.h linux_list.h \
 		xtables.h libxtc.h
 
 all: all-am
 
@@ -312,13 +310,13 @@
 	  dir="`echo $$p | sed -e 's|/[^/]*$$||'`"; \
 	  test "$$dir" != "$$p" || dir=.; \
 	  echo "rm -f \"$${dir}/so_locations\""; \
 	  rm -f "$${dir}/so_locations"; \
 	done
 libiptc.la: $(libiptc_la_OBJECTS) $(libiptc_la_DEPENDENCIES) 
-	$(libiptc_la_LINK)  $(libiptc_la_OBJECTS) $(libiptc_la_LIBADD) $(LIBS)
+	$(LINK)  $(libiptc_la_OBJECTS) $(libiptc_la_LIBADD) $(LIBS)
 
 mostlyclean-compile:
 	-rm -f *.$(OBJEXT)
 
 distclean-compile:
 	-rm -f *.tab.c
@@ -329,18 +327,12 @@
 .c.obj:
 	$(COMPILE) -c `$(CYGPATH_W) '$<'`
 
 .c.lo:
 	$(LTCOMPILE) -c -o $@ $<
 
-libiptc_la-libip4tc.lo: libip4tc.c
-	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libiptc_la_CFLAGS) $(CFLAGS) -c -o libiptc_la-libip4tc.lo `test -f 'libip4tc.c' || echo '$(srcdir)/'`libip4tc.c
-
-libiptc_la-libip6tc.lo: libip6tc.c
-	$(LIBTOOL)  --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(libiptc_la_CFLAGS) $(CFLAGS) -c -o libiptc_la-libip6tc.lo `test -f 'libip6tc.c' || echo '$(srcdir)/'`libip6tc.c
-
 mostlyclean-libtool:
 	-rm -f *.lo
 
 clean-libtool:
 	-rm -rf .libs _libs
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/perl.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/perl.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/perl.c	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/perl.c	2009-10-03 23:48:47.000000000 +0800
@@ -142,12 +142,17 @@
 		if (NULL != (data)->user_data) \
 			sv_free ((data)->user_data); \
 		sfree (data); \
 	} while (0)
 
 /*
+ * Public variable
+ */
+extern char **environ;
+
+/*
  * private variables
  */
 
 /* if perl_threads != NULL perl_threads->head must
  * point to the "base" thread */
 static c_ithread_list_t *perl_threads = NULL;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/processes.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/processes.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/processes.c	2009-09-13 18:38:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/processes.c	2009-10-03 23:48:47.000000000 +0800
@@ -614,82 +614,47 @@
 			ps->vmem_minflt_counter, ps->vmem_majflt_counter,
 		       	ps->cpu_user_counter, ps->cpu_system_counter);
 } /* void ps_submit_proc_list */
 
 /* ------- additional functions for KERNEL_LINUX/HAVE_THREAD_INFO ------- */
 #if KERNEL_LINUX
-static int *ps_read_tasks (int pid)
+static int ps_read_tasks (int pid)
 {
-	int *list = NULL;
-	int  list_size = 1; /* size of allocated space, in elements */
-	int  list_len = 0;  /* number of currently used elements */
-
 	char           dirname[64];
 	DIR           *dh;
 	struct dirent *ent;
+	int count = 0;
 
 	ssnprintf (dirname, sizeof (dirname), "/proc/%i/task", pid);
 
 	if ((dh = opendir (dirname)) == NULL)
 	{
 		DEBUG ("Failed to open directory `%s'", dirname);
-		return (NULL);
+		return (-1);
 	}
 
 	while ((ent = readdir (dh)) != NULL)
 	{
-		if (!isdigit (ent->d_name[0]))
+		if (!isdigit ((int) ent->d_name[0]))
 			continue;
-
-		if ((list_len + 1) >= list_size)
-		{
-			int *new_ptr;
-			int  new_size = 2 * list_size;
-			/* Comes in sizes: 2, 4, 8, 16, ... */
-
-			new_ptr = (int *) realloc (list, (size_t) (sizeof (int) * new_size));
-			if (new_ptr == NULL)
-			{
-				if (list != NULL)
-					free (list);
-				ERROR ("processes plugin: "
-						"Failed to allocate more memory.");
-				return (NULL);
-			}
-
-			list = new_ptr;
-			list_size = new_size;
-
-			memset (list + list_len, 0, sizeof (int) * (list_size - list_len));
-		}
-
-		list[list_len] = atoi (ent->d_name);
-		if (list[list_len] != 0)
-			list_len++;
+		else
+			count++;
 	}
-
 	closedir (dh);
 
-	if (list_len == 0)
-		return (NULL);
-
-	assert (list_len < list_size);
-	assert (list[list_len] == 0);
-
-	return (list);
+	return ((count >= 1) ? count : 1);
 } /* int *ps_read_tasks */
 
 int ps_read_process (int pid, procstat_t *ps, char *state)
 {
 	char  filename[64];
 	char  buffer[1024];
 
 	char *fields[64];
 	char  fields_len;
 
-	int  *tasks;
 	int   i;
 
 	int   ppid;
 	int   name_len;
 
 	long long unsigned cpu_user_counter;
@@ -733,27 +698,20 @@
 
 	if (*state == 'Z')
 	{
 		ps->num_lwp  = 0;
 		ps->num_proc = 0;
 	}
-	else if ((tasks = ps_read_tasks (pid)) == NULL)
-	{
-		/* Kernel 2.4 or so */
-		ps->num_lwp  = 1;
-		ps->num_proc = 1;
-	}
 	else
 	{
-		ps->num_lwp  = 0;
+		if ( (ps->num_lwp = ps_read_tasks (pid)) == -1 )
+		{
+			/* returns -1 => kernel 2.4 */
+			ps->num_lwp = 1;
+		}
 		ps->num_proc = 1;
-		for (i = 0; tasks[i] != 0; i++)
-			ps->num_lwp++;
-
-		free (tasks);
-		tasks = NULL;
 	}
 
 	/* Leave the rest at zero if this is only a zombi */
 	if (ps->num_proc == 0)
 	{
 		DEBUG ("processes plugin: This is only a zombi: pid = %i; "
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/types.db.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/types.db.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/types.db.5	2009-09-13 18:39:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/types.db.5	2009-10-03 23:50:02.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "TYPES.DB 5"
-.TH TYPES.DB 5 "2009-09-13" "4.7.3" "collectd"
+.TH TYPES.DB 5 "2009-10-03" "4.7.4" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 types.db \- Data\-set specifications for the system statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/unixsock.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/unixsock.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/src/unixsock.c	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/src/unixsock.c	2009-10-03 23:48:47.000000000 +0800
@@ -154,38 +154,51 @@
 
 	return (0);
 } /* int us_open_socket */
 
 static void *us_handle_client (void *arg)
 {
-	int fd;
+	int fdin;
+	int fdout;
 	FILE *fhin, *fhout;
 
-	fd = *((int *) arg);
+	fdin = *((int *) arg);
 	free (arg);
 	arg = NULL;
 
-	DEBUG ("unixsock plugin: us_handle_client: Reading from fd #%i", fd);
+	DEBUG ("unixsock plugin: us_handle_client: Reading from fd #%i", fdin);
 
-	fhin  = fdopen (fd, "r");
+	fdout = dup (fdin);
+	if (fdout < 0)
+	{
+		char errbuf[1024];
+		ERROR ("unixsock plugin: dup failed: %s",
+				sstrerror (errno, errbuf, sizeof (errbuf)));
+		close (fdin);
+		pthread_exit ((void *) 1);
+	}
+
+	fhin  = fdopen (fdin, "r");
 	if (fhin == NULL)
 	{
 		char errbuf[1024];
 		ERROR ("unixsock plugin: fdopen failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
-		close (fd);
+		close (fdin);
+		close (fdout);
 		pthread_exit ((void *) 1);
 	}
 
-	fhout = fdopen (fd, "w");
+	fhout = fdopen (fdout, "w");
 	if (fhout == NULL)
 	{
 		char errbuf[1024];
 		ERROR ("unixsock plugin: fdopen failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
-		fclose (fhin); /* this closes fd as well */
+		fclose (fhin); /* this closes fdin as well */
+		close (fdout);
 		pthread_exit ((void *) 1);
 	}
 
 	/* change output buffer to line buffered mode */
 	if (setvbuf (fhout, NULL, _IOLBF, 0) != 0)
 	{
@@ -227,17 +240,18 @@
 			continue;
 
 		sstrncpy (buffer_copy, buffer, sizeof (buffer_copy));
 
 		fields_num = strsplit (buffer_copy, fields,
 				sizeof (fields) / sizeof (fields[0]));
-
 		if (fields_num < 1)
 		{
-			close (fd);
-			break;
+			fprintf (fhout, "-1 Internal error\n");
+			fclose (fhin);
+			fclose (fhout);
+			pthread_exit ((void *) 1);
 		}
 
 		if (strcasecmp (fields[0], "getval") == 0)
 		{
 			handle_getval (fhout, buffer);
 		}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/version-gen.sh /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/version-gen.sh
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.3/version-gen.sh	2009-09-13 18:38:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.7.4/version-gen.sh	2009-10-03 23:48:47.000000000 +0800
@@ -1,9 +1,9 @@
 #!/bin/sh
 
-DEFAULT_VERSION="4.7.3.git"
+DEFAULT_VERSION="4.7.4.git"
 
 VERSION="`git describe 2> /dev/null | sed -e 's/^collectd-//'`"
 
 if test -z "$VERSION"; then
 	VERSION="$DEFAULT_VERSION"
 fi
