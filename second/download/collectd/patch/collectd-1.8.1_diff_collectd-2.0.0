diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/ChangeLog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/ChangeLog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/ChangeLog	2005-09-02 03:38:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/ChangeLog	2005-09-10 22:12:10.000000000 +0800
@@ -1,6 +1,17 @@
+2005-09-09, Version 2.0.0 (Revision 135)
+	* Filenames can no longer be configured at program startup. The only
+	  options as of this version are the directory and ping hosts.
+	* CPU statistics now include Wait-IO. If privided under Linux IRQ and
+	  Soft-IRQ statistics are added to `System'. 
+	* Diskstats now collect read and write bytes, not sectors.
+	* Ping statistics can now be collected for more than one host. There
+	  is no default any more: If no host is given no host will be pinged.
+	* A self-written patch for libping has been applied so it builds
+	  cleanly.
+
 2005-09-01, Version 1.8.1 (Revision 123)
 	* Much improved configure-script: libraries and features may now be
 	  disabled.
 	* More detailed warnings/error messages when RRD update failes.
 
 2005-08-29, Version 1.8.0:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/collectd.spec /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/collectd.spec
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/collectd.spec	2005-09-02 03:26:35.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/collectd.spec	2005-09-10 22:41:43.000000000 +0800
@@ -1,16 +1,16 @@
 Summary:	Statistics collection daemon for filling RRD files.
 Name:           collectd
-Version:	1.8.1
+Version:	2.0.0
 Release:	1
 Source:		http://verplant.org/collectd/%{name}-%{version}.tar.gz
 License:	GPL
 Group:		System Environment/Daemons
 BuildRoot:	%{_tmppath}/%{name}-%{version}-root
-BuildPrereq:	lm_sensors-devel
-Requires:	lm_sensors
+BuildPrereq:	lm_sensors-devel, rrdtool-devel
+Requires:	lm_sensors, rrdtool
 Packager:	Florian octo Forster <octo@verplant.org>
 Vendor:		Florian octo Forster <octo@verplant.org>
 
 %description
 collectd is a small daemon written in C for performance.  It reads various
 system  statistics  and updates  RRD files,  creating  them if neccessary.
@@ -20,13 +20,13 @@
 
 %prep
 rm -rf $RPM_BUILD_ROOT
 %setup
 
 %build
-./configure --prefix=%{_prefix}
+./configure --prefix=%{_prefix} --sbindir=%{_sbindir} --mandir=%{_mandir}
 make
 
 %install
 make install DESTDIR=$RPM_BUILD_ROOT
 mkdir -p $RPM_BUILD_ROOT/etc/default
 cp debian/default $RPM_BUILD_ROOT/etc/default/collectd
@@ -40,17 +40,18 @@
 %files
 %defattr(-,root,root)
 %doc AUTHORS COPYING ChangeLog INSTALL NEWS README
 %doc contrib
 %config /etc/default/collectd
 %attr(0755,root,root) /etc/rc.d/init.d/collectd
-%attr(0755,root,root) /usr/sbin/collectd
+%attr(0755,root,root) %{_sbindir}/collectd
+%attr(0444,root,root) %{_mandir}/man1/*
 %dir /var/lib/collectd
 
 %changelog
-* Mon Sep 01 2005 Florian octo Forster <octo@verplant.org> 1.8.1-1
+* Mon Sep 10 2005 Florian octo Forster <octo@verplant.org> 2.0.0-1
 - New upstream version
 
 * Mon Aug 29 2005 Florian octo Forster <octo@verplant.org> 1.8.0-1
 - New upstream version
 
 * Sun Aug 25 2005 Florian octo Forster <octo@verplant.org> 1.7.0-1
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/configure	2005-09-02 03:38:58.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/configure	2005-09-10 22:11:52.000000000 +0800
@@ -1810,13 +1810,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE=collectd
- VERSION=1.8.1
+ VERSION=2.0.0
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -19160,292 +19160,272 @@
 echo "${ECHO_T}no" >&6
   SET_MAKE="MAKE=${MAKE-make}"
 fi
 
 #AC_PROG_RANLIB
 
-echo "$as_me:$LINENO: checking for kernel type ($host_os)" >&5
-echo $ECHO_N "checking for kernel type ($host_os)... $ECHO_C" >&6
-case $host_os in
-	*linux*)
-
-cat >>confdefs.h <<\_ACEOF
-#define KERNEL_LINUX
-_ACEOF
-
-	ac_system="Linux"
-	;;
-	*solaris*)
-
-cat >>confdefs.h <<\_ACEOF
-#define KERNEL_SOLARIS
-_ACEOF
-
-	ac_system="Solaris"
-	;;
-	*)
-	ac_system="unknown"
-esac
-echo "$as_me:$LINENO: result: $ac_system" >&5
-echo "${ECHO_T}$ac_system" >&6
-
-
-echo "$as_me:$LINENO: checking for socket in -lsocket" >&5
-echo $ECHO_N "checking for socket in -lsocket... $ECHO_C" >&6
-if test "${ac_cv_lib_socket_socket+set}" = set; then
+echo "$as_me:$LINENO: checking for ANSI C header files" >&5
+echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
+if test "${ac_cv_header_stdc+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lsocket  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+#include <stdlib.h>
+#include <stdarg.h>
+#include <string.h>
+#include <float.h>
 
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char socket ();
 int
 main ()
 {
-socket ();
+
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>conftest.er1
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest$ac_exeext'
+	 { ac_try='test -s conftest.$ac_objext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_lib_socket_socket=yes
+  ac_cv_header_stdc=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_lib_socket_socket=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
+ac_cv_header_stdc=no
 fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_socket_socket" >&5
-echo "${ECHO_T}$ac_cv_lib_socket_socket" >&6
-if test $ac_cv_lib_socket_socket = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBSOCKET 1
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+
+if test $ac_cv_header_stdc = yes; then
+  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <string.h>
+
 _ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "memchr" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
+fi
+rm -f conftest*
 
-  LIBS="-lsocket $LIBS"
+fi
+
+if test $ac_cv_header_stdc = yes; then
+  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <stdlib.h>
 
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "free" >/dev/null 2>&1; then
+  :
+else
+  ac_cv_header_stdc=no
 fi
+rm -f conftest*
 
+fi
 
-echo "$as_me:$LINENO: checking for res_search in -lresolv" >&5
-echo $ECHO_N "checking for res_search in -lresolv... $ECHO_C" >&6
-if test "${ac_cv_lib_resolv_res_search+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
+if test $ac_cv_header_stdc = yes; then
+  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
+  if test "$cross_compiling" = yes; then
+  :
 else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lresolv  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern "C"
+#include <ctype.h>
+#if ((' ' & 0x0FF) == 0x020)
+# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
+# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
+#else
+# define ISLOWER(c) \
+		   (('a' <= (c) && (c) <= 'i') \
+		     || ('j' <= (c) && (c) <= 'r') \
+		     || ('s' <= (c) && (c) <= 'z'))
+# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
 #endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char res_search ();
+
+#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
 int
 main ()
 {
-res_search ();
-  ;
-  return 0;
+  int i;
+  for (i = 0; i < 256; i++)
+    if (XOR (islower (i), ISLOWER (i))
+	|| toupper (i) != TOUPPER (i))
+      exit(2);
+  exit (0);
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
+rm -f conftest$ac_exeext
 if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
+  (eval $ac_link) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest$ac_exeext'
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_lib_resolv_res_search=yes
+  :
 else
-  echo "$as_me: failed program was:" >&5
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_lib_resolv_res_search=no
+( exit $ac_status )
+ac_cv_header_stdc=no
 fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
+rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_resolv_res_search" >&5
-echo "${ECHO_T}$ac_cv_lib_resolv_res_search" >&6
-if test $ac_cv_lib_resolv_res_search = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBRESOLV 1
-_ACEOF
-
-  LIBS="-lresolv $LIBS"
-
 fi
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
+echo "${ECHO_T}$ac_cv_header_stdc" >&6
+if test $ac_cv_header_stdc = yes; then
 
+cat >>confdefs.h <<\_ACEOF
+#define STDC_HEADERS 1
+_ACEOF
 
+fi
 
-# Check whether --with-rrdtool or --without-rrdtool was given.
-if test "${with_rrdtool+set}" = set; then
-  withval="$with_rrdtool"
-  	if test "x$withval" != "xno" -a "x$withval" != "xyes"
-	then
-		LDFLAGS="$LDFLAGS -L$withval/lib"
-		CPPFLAGS="$CPPFLAGS -I$withval/include"
-	fi
-
-fi;
-
-echo "$as_me:$LINENO: checking for rrd_update in -lrrd" >&5
-echo $ECHO_N "checking for rrd_update in -lrrd... $ECHO_C" >&6
-if test "${ac_cv_lib_rrd_rrd_update+set}" = set; then
+echo "$as_me:$LINENO: checking for sys/wait.h that is POSIX.1 compatible" >&5
+echo $ECHO_N "checking for sys/wait.h that is POSIX.1 compatible... $ECHO_C" >&6
+if test "${ac_cv_header_sys_wait_h+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lrrd  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern "C"
+#include <sys/types.h>
+#include <sys/wait.h>
+#ifndef WEXITSTATUS
+# define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
 #endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char rrd_update ();
+#ifndef WIFEXITED
+# define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
+#endif
+
 int
 main ()
 {
-rrd_update ();
+  int s;
+  wait (&s);
+  s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>conftest.er1
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest$ac_exeext'
+	 { ac_try='test -s conftest.$ac_objext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_lib_rrd_rrd_update=yes
+  ac_cv_header_sys_wait_h=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_lib_rrd_rrd_update=no
+ac_cv_header_sys_wait_h=no
 fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_rrd_rrd_update" >&5
-echo "${ECHO_T}$ac_cv_lib_rrd_rrd_update" >&6
-if test $ac_cv_lib_rrd_rrd_update = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBRRD 1
-_ACEOF
-
-  LIBS="-lrrd $LIBS"
+echo "$as_me:$LINENO: result: $ac_cv_header_sys_wait_h" >&5
+echo "${ECHO_T}$ac_cv_header_sys_wait_h" >&6
+if test $ac_cv_header_sys_wait_h = yes; then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_SYS_WAIT_H 1
+_ACEOF
 
-else
-  { { echo "$as_me:$LINENO: error: librrd could not be found. Be sure to install rrdtool first!" >&5
-echo "$as_me: error: librrd could not be found. Be sure to install rrdtool first!" >&2;}
-   { (exit 1); exit 1; }; }
 fi
 
-if test "${ac_cv_header_rrd_h+set}" = set; then
-  echo "$as_me:$LINENO: checking for rrd.h" >&5
-echo $ECHO_N "checking for rrd.h... $ECHO_C" >&6
-if test "${ac_cv_header_rrd_h+set}" = set; then
+
+
+for ac_header in fcntl.h unistd.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 fi
-echo "$as_me:$LINENO: result: $ac_cv_header_rrd_h" >&5
-echo "${ECHO_T}$ac_cv_header_rrd_h" >&6
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
   # Is the header compilable?
-echo "$as_me:$LINENO: checking rrd.h usability" >&5
-echo $ECHO_N "checking rrd.h usability... $ECHO_C" >&6
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
-#include <rrd.h>
+#include <$ac_header>
 _ACEOF
 rm -f conftest.$ac_objext
 if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
@@ -19474,21 +19454,21 @@
 fi
 rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
 echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
 echo "${ECHO_T}$ac_header_compiler" >&6
 
 # Is the header present?
-echo "$as_me:$LINENO: checking rrd.h presence" >&5
-echo $ECHO_N "checking rrd.h presence... $ECHO_C" >&6
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-#include <rrd.h>
+#include <$ac_header>
 _ACEOF
 if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
@@ -19516,216 +19496,63 @@
 echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
 echo "${ECHO_T}$ac_header_preproc" >&6
 
 # So?  What about this header?
 case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
   yes:no: )
-    { echo "$as_me:$LINENO: WARNING: rrd.h: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: rrd.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: rrd.h: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: rrd.h: proceeding with the compiler's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
     ac_header_preproc=yes
     ;;
   no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: rrd.h: present but cannot be compiled" >&5
-echo "$as_me: WARNING: rrd.h: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: rrd.h:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: rrd.h:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: rrd.h: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: rrd.h: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: rrd.h:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: rrd.h:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: rrd.h: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: rrd.h: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: rrd.h: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: rrd.h: in the future, the compiler will take precedence" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
     (
       cat <<\_ASBOX
 ## ------------------------------------------ ##
 ## Report this to the AC_PACKAGE_NAME lists.  ##
 ## ------------------------------------------ ##
 _ASBOX
     ) |
       sed "s/^/$as_me: WARNING:     /" >&2
     ;;
 esac
-echo "$as_me:$LINENO: checking for rrd.h" >&5
-echo $ECHO_N "checking for rrd.h... $ECHO_C" >&6
-if test "${ac_cv_header_rrd_h+set}" = set; then
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  ac_cv_header_rrd_h=$ac_header_preproc
-fi
-echo "$as_me:$LINENO: result: $ac_cv_header_rrd_h" >&5
-echo "${ECHO_T}$ac_cv_header_rrd_h" >&6
-
-fi
-if test $ac_cv_header_rrd_h = yes; then
-  :
-else
-  { { echo "$as_me:$LINENO: error: rrd.h could not be found. Be sure to install rrdtool first!" >&5
-echo "$as_me: error: rrd.h could not be found. Be sure to install rrdtool first!" >&2;}
-   { (exit 1); exit 1; }; }
+  eval "$as_ac_Header=\$ac_header_preproc"
 fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 
-
-with_rrdtool="yes"
-
-if test "$ac_system" = "Solaris"
-then
-	with_kstat="yes"
-
-echo "$as_me:$LINENO: checking for kstat_open in -lkstat" >&5
-echo $ECHO_N "checking for kstat_open in -lkstat... $ECHO_C" >&6
-if test "${ac_cv_lib_kstat_kstat_open+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lkstat  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char kstat_open ();
-int
-main ()
-{
-kstat_open ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_kstat_kstat_open=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-ac_cv_lib_kstat_kstat_open=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_kstat_kstat_open" >&5
-echo "${ECHO_T}$ac_cv_lib_kstat_kstat_open" >&6
-if test $ac_cv_lib_kstat_kstat_open = yes; then
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBKSTAT 1
-_ACEOF
-
-  LIBS="-lkstat $LIBS"
-
-else
-  with_kstat="no (not found)"
-fi
-
-
-echo "$as_me:$LINENO: checking for di_init in -ldevinfo" >&5
-echo $ECHO_N "checking for di_init in -ldevinfo... $ECHO_C" >&6
-if test "${ac_cv_lib_devinfo_di_init+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-ldevinfo  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char di_init ();
-int
-main ()
-{
-di_init ();
-  ;
-  return 0;
-}
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_devinfo_di_init=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_lib_devinfo_di_init=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_devinfo_di_init" >&5
-echo "${ECHO_T}$ac_cv_lib_devinfo_di_init" >&6
-if test $ac_cv_lib_devinfo_di_init = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBDEVINFO 1
-_ACEOF
 
-  LIBS="-ldevinfo $LIBS"
-
-fi
+done
 
 
-for ac_header in kstat.h
+for ac_header in signal.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -19863,128 +19690,18 @@
 fi
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
-else
-  with_kstat="no (kstat.h not found)"
 fi
 
 done
 
-else
-	with_kstat="no (Solaris only)"
-fi
-
-
-# Check whether --with-libstatgrab or --without-libstatgrab was given.
-if test "${with_libstatgrab+set}" = set; then
-  withval="$with_libstatgrab"
 
-	# given..
-	if test "x$withval" != "xno"
-	then
-		if test "x$withval" != "xyes"
-		then
-			LDFLAGS="$LDFLAGS -L$withval/lib"
-			CPPFLAGS="$CPPFLAGS -I$withval/include"
-			with_libstatgrab="yes"
-		fi
-	fi
-
-else
-
-	# not given..
-	if test "x$ac_system" != "xunknown"
-	then
-		with_libstatgrab="no"
-	else
-		with_libstatgrab="yes"
-	fi
-
-fi;
-if test "x$with_lm_sensors" = "xyes"
-then
-
-echo "$as_me:$LINENO: checking for sg_init in -lstatgrab" >&5
-echo $ECHO_N "checking for sg_init in -lstatgrab... $ECHO_C" >&6
-if test "${ac_cv_lib_statgrab_sg_init+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lstatgrab  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char sg_init ();
-int
-main ()
-{
-sg_init ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_statgrab_sg_init=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-ac_cv_lib_statgrab_sg_init=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_statgrab_sg_init" >&5
-echo "${ECHO_T}$ac_cv_lib_statgrab_sg_init" >&6
-if test $ac_cv_lib_statgrab_sg_init = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBSTATGRAB 1
-_ACEOF
-
-  LIBS="-lstatgrab $LIBS"
-
-else
-  with_libstatgrab="no (not found)"
-fi
-
-
-for ac_header in statgrab.h
+for ac_header in sys/socket.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -20122,126 +19839,18 @@
 fi
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
-else
-  with_libstatgrab="no (not found)"
 fi
 
 done
 
-fi
-
-
-# Check whether --with-lm-sensors or --without-lm-sensors was given.
-if test "${with_lm_sensors+set}" = set; then
-  withval="$with_lm_sensors"
-
-	# given..
-	if test "x$withval" != "xno"
-	then
-		if test "x$withval" != "xyes"
-		then
-			LDFLAGS="$LDFLAGS -L$withval/lib"
-			CPPFLAGS="$CPPFLAGS -I$withval/include"
-			with_lm_sensors="yes"
-		fi
-	fi
-
-else
-
-	# not given..
-	if test "x$ac_system" = "xLinux"
-	then
-		with_lm_sensors="yes"
-	else
-		with_lm_sensors="no"
-	fi
-
-fi;
-if test "x$with_lm_sensors" = "xyes"
-then
-
-echo "$as_me:$LINENO: checking for sensors_init in -lsensors" >&5
-echo $ECHO_N "checking for sensors_init in -lsensors... $ECHO_C" >&6
-if test "${ac_cv_lib_sensors_sensors_init+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lsensors  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char sensors_init ();
-int
-main ()
-{
-sensors_init ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_lib_sensors_sensors_init=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-ac_cv_lib_sensors_sensors_init=no
-fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_sensors_sensors_init" >&5
-echo "${ECHO_T}$ac_cv_lib_sensors_sensors_init" >&6
-if test $ac_cv_lib_sensors_sensors_init = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBSENSORS 1
-_ACEOF
-
-  LIBS="-lsensors $LIBS"
-
-else
-  with_lm_sensors="no (not found)"
-fi
-
 
-for ac_header in sensors/sensors.h
+for ac_header in sys/select.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -20379,158 +19988,190 @@
 fi
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
-else
-  with_lm_sensors="no (not found)"
 fi
 
 done
 
-fi
-
-#
-# Check for disabled features
-#
-# Check whether --enable-cpu or --disable-cpu was given.
-if test "${enable_cpu+set}" = set; then
-  enableval="$enable_cpu"
-
-else
-  enable_cpu="yes"
-fi;
-if test "x$enable_cpu" = "xno"
-then
-
-cat >>confdefs.h <<\_ACEOF
-#define COLLECT_CPU 0
-_ACEOF
 
+for ac_header in netdb.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 fi
-
-# Check whether --enable-disk or --disable-disk was given.
-if test "${enable_disk+set}" = set; then
-  enableval="$enable_disk"
-
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
-  enable_disk="yes"
-fi;
-if test "x$enable_disk" = "xno"
-then
-
-cat >>confdefs.h <<\_ACEOF
-#define COLLECT_DISK 0
-_ACEOF
-
-fi
-
-# Check whether --enable-load or --disable-load was given.
-if test "${enable_load+set}" = set; then
-  enableval="$enable_load"
-
-else
-  enable_load="yes"
-fi;
-if test "x$enable_load" = "xno"
-then
-
-cat >>confdefs.h <<\_ACEOF
-#define COLLECT_LOAD 0
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
 _ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
+ac_header_compiler=no
 fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
 
-# Check whether --enable-memory or --disable-memory was given.
-if test "${enable_memory+set}" = set; then
-  enableval="$enable_memory"
-
-else
-  enable_memory="yes"
-fi;
-if test "x$enable_memory" = "xno"
-then
-
-cat >>confdefs.h <<\_ACEOF
-#define COLLECT_MEMORY 0
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
 _ACEOF
-
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
 fi
-
-# Check whether --enable-ping or --disable-ping was given.
-if test "${enable_ping+set}" = set; then
-  enableval="$enable_ping"
-
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
 else
-  enable_ping="yes"
-fi;
-if test "x$enable_ping" = "xno"
-then
-
-cat >>confdefs.h <<\_ACEOF
-#define COLLECT_PING 0
-_ACEOF
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
+  ac_header_preproc=no
 fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
 
-# Check whether --enable-sensors or --disable-sensors was given.
-if test "${enable_sensors+set}" = set; then
-  enableval="$enable_sensors"
-
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  enable_sensors=$with_lm_sensors
-fi;
-if test "x$enable_sensors" = "xno"
-then
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 
-cat >>confdefs.h <<\_ACEOF
-#define COLLECT_SENSORS 0
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
-# Check whether --enable-traffic or --disable-traffic was given.
-if test "${enable_traffic+set}" = set; then
-  enableval="$enable_traffic"
-
-else
-  enable_traffic="yes"
-fi;
-if test "x$enable_traffic" = "xno"
-then
+done
 
-cat >>confdefs.h <<\_ACEOF
-#define COLLECT_TRAFFIC 0
-_ACEOF
 
-fi
 
-echo "$as_me:$LINENO: checking for ANSI C header files" >&5
-echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
-if test "${ac_cv_header_stdc+set}" = set; then
+for ac_header in sys/time.h sys/times.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
-  cat >conftest.$ac_ext <<_ACEOF
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <float.h>
-
-int
-main ()
-{
-
-  ;
-  return 0;
-}
+$ac_includes_default
+#include <$ac_header>
 _ACEOF
 rm -f conftest.$ac_objext
 if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
@@ -20547,205 +20188,117 @@
 	 { ac_try='test -s conftest.$ac_objext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_header_stdc=yes
+  ac_header_compiler=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_header_stdc=no
+ac_header_compiler=no
 fi
 rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
 
-if test $ac_cv_header_stdc = yes; then
-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
-  cat >conftest.$ac_ext <<_ACEOF
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-#include <string.h>
-
+#include <$ac_header>
 _ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "memchr" >/dev/null 2>&1; then
-  :
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
 else
-  ac_cv_header_stdc=no
+  ac_cpp_err=yes
 fi
-rm -f conftest*
-
-fi
-
-if test $ac_cv_header_stdc = yes; then
-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <stdlib.h>
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "free" >/dev/null 2>&1; then
-  :
-else
-  ac_cv_header_stdc=no
-fi
-rm -f conftest*
-
-fi
-
-if test $ac_cv_header_stdc = yes; then
-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-  if test "$cross_compiling" = yes; then
-  :
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <ctype.h>
-#if ((' ' & 0x0FF) == 0x020)
-# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#else
-# define ISLOWER(c) \
-		   (('a' <= (c) && (c) <= 'i') \
-		     || ('j' <= (c) && (c) <= 'r') \
-		     || ('s' <= (c) && (c) <= 'z'))
-# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
-#endif
-
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int
-main ()
-{
-  int i;
-  for (i = 0; i < 256; i++)
-    if (XOR (islower (i), ISLOWER (i))
-	|| toupper (i) != TOUPPER (i))
-      exit(2);
-  exit (0);
-}
-_ACEOF
-rm -f conftest$ac_exeext
-if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  :
-else
-  echo "$as_me: program exited with status $ac_status" >&5
-echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-( exit $ac_status )
-ac_cv_header_stdc=no
-fi
-rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
-fi
-fi
-fi
-echo "$as_me:$LINENO: result: $ac_cv_header_stdc" >&5
-echo "${ECHO_T}$ac_cv_header_stdc" >&6
-if test $ac_cv_header_stdc = yes; then
-
-cat >>confdefs.h <<\_ACEOF
-#define STDC_HEADERS 1
-_ACEOF
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
 
+  ac_header_preproc=no
 fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
 
-echo "$as_me:$LINENO: checking for sys/wait.h that is POSIX.1 compatible" >&5
-echo $ECHO_N "checking for sys/wait.h that is POSIX.1 compatible... $ECHO_C" >&6
-if test "${ac_cv_header_sys_wait_h+set}" = set; then
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <sys/types.h>
-#include <sys/wait.h>
-#ifndef WEXITSTATUS
-# define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
-#endif
-#ifndef WIFEXITED
-# define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
-#endif
-
-int
-main ()
-{
-  int s;
-  wait (&s);
-  s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_header_sys_wait_h=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-ac_cv_header_sys_wait_h=no
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+  eval "$as_ac_Header=\$ac_header_preproc"
 fi
-echo "$as_me:$LINENO: result: $ac_cv_header_sys_wait_h" >&5
-echo "${ECHO_T}$ac_cv_header_sys_wait_h" >&6
-if test $ac_cv_header_sys_wait_h = yes; then
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_SYS_WAIT_H 1
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
 fi
 
+done
 
 
-for ac_header in fcntl.h unistd.h
+for ac_header in sys/types.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -20888,13 +20441,13 @@
 
 fi
 
 done
 
 
-for ac_header in signal.h
+for ac_header in sys/resource.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -21037,13 +20590,13 @@
 
 fi
 
 done
 
 
-for ac_header in sys/socket.h
+for ac_header in errno.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -21186,13 +20739,13 @@
 
 fi
 
 done
 
 
-for ac_header in sys/select.h
+for ac_header in arpa/inet.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -21335,13 +20888,13 @@
 
 fi
 
 done
 
 
-for ac_header in netdb.h
+for ac_header in netinet/in.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -21484,14 +21037,13 @@
 
 fi
 
 done
 
 
-
-for ac_header in sys/time.h sys/times.h
+for ac_header in netdb.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -21634,13 +21186,13 @@
 
 fi
 
 done
 
 
-for ac_header in sys/types.h
+for ac_header in syslog.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
@@ -21783,184 +21335,214 @@
 
 fi
 
 done
 
 
-for ac_header in sys/resource.h
-do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
+
+echo "$as_me:$LINENO: checking for ext in -lm" >&5
+echo $ECHO_N "checking for ext in -lm... $ECHO_C" >&6
+if test "${ac_cv_lib_m_ext+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
-  # Is the header compilable?
-echo "$as_me:$LINENO: checking $ac_header usability" >&5
-echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lm  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-$ac_includes_default
-#include <$ac_header>
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char ext ();
+int
+main ()
+{
+ext ();
+  ;
+  return 0;
+}
 _ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
+	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_header_compiler=yes
+  ac_cv_lib_m_ext=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_header_compiler=no
+ac_cv_lib_m_ext=no
 fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_m_ext" >&5
+echo "${ECHO_T}$ac_cv_lib_m_ext" >&6
+if test $ac_cv_lib_m_ext = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBM 1
+_ACEOF
 
-# Is the header present?
-echo "$as_me:$LINENO: checking $ac_header presence" >&5
-echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
+  LIBS="-lm $LIBS"
+
+fi
+
+
+echo "$as_me:$LINENO: checking for an ANSI C-conforming const" >&5
+echo $ECHO_N "checking for an ANSI C-conforming const... $ECHO_C" >&6
+if test "${ac_cv_c_const+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-#include <$ac_header>
+
+int
+main ()
+{
+/* FIXME: Include the comments suggested by Paul. */
+#ifndef __cplusplus
+  /* Ultrix mips cc rejects this.  */
+  typedef int charset[2];
+  const charset x;
+  /* SunOS 4.1.1 cc rejects this.  */
+  char const *const *ccp;
+  char **p;
+  /* NEC SVR4.0.2 mips cc rejects this.  */
+  struct point {int x, y;};
+  static struct point const zero = {0,0};
+  /* AIX XL C 1.02.0.0 rejects this.
+     It does not let you subtract one const X* pointer from another in
+     an arm of an if-expression whose if-part is not a constant
+     expression */
+  const char *g = "string";
+  ccp = &g + (g ? g-g : 0);
+  /* HPUX 7.0 cc rejects these. */
+  ++ccp;
+  p = (char**) ccp;
+  ccp = (char const *const *) p;
+  { /* SCO 3.2v4 cc rejects this.  */
+    char *t;
+    char const *s = 0 ? (char *) 0 : (char const *) 0;
+
+    *t++ = 0;
+  }
+  { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
+    int x[] = {25, 17};
+    const int *foo = &x[0];
+    ++foo;
+  }
+  { /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
+    typedef const int *iptr;
+    iptr p = 0;
+    ++p;
+  }
+  { /* AIX XL C 1.02.0.0 rejects this saying
+       "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
+    struct s { int j; const int *ap[3]; };
+    struct s *b; b->j = 5;
+  }
+  { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
+    const int foo = 10;
+  }
+#endif
+
+  ;
+  return 0;
+}
 _ACEOF
-if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null; then
-  if test -s conftest.err; then
-    ac_cpp_err=$ac_c_preproc_warn_flag
-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-  else
-    ac_cpp_err=
-  fi
-else
-  ac_cpp_err=yes
-fi
-if test -z "$ac_cpp_err"; then
-  ac_header_preproc=yes
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_c_const=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-  ac_header_preproc=no
+ac_cv_c_const=no
 fi
-rm -f conftest.err conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
-    (
-      cat <<\_ASBOX
-## ------------------------------------------ ##
-## Report this to the AC_PACKAGE_NAME lists.  ##
-## ------------------------------------------ ##
-_ASBOX
-    ) |
-      sed "s/^/$as_me: WARNING:     /" >&2
-    ;;
-esac
-echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+echo "$as_me:$LINENO: result: $ac_cv_c_const" >&5
+echo "${ECHO_T}$ac_cv_c_const" >&6
+if test $ac_cv_c_const = no; then
 
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+cat >>confdefs.h <<\_ACEOF
+#define const
 _ACEOF
 
 fi
 
-done
-
-
-for ac_header in errno.h
-do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
+echo "$as_me:$LINENO: checking for pid_t" >&5
+echo $ECHO_N "checking for pid_t... $ECHO_C" >&6
+if test "${ac_cv_type_pid_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
-  # Is the header compilable?
-echo "$as_me:$LINENO: checking $ac_header usability" >&5
-echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 $ac_includes_default
-#include <$ac_header>
+int
+main ()
+{
+if ((pid_t *) 0)
+  return 0;
+if (sizeof (pid_t))
+  return 0;
+  ;
+  return 0;
+}
 _ACEOF
 rm -f conftest.$ac_objext
 if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
@@ -21977,143 +21559,59 @@
 	 { ac_try='test -s conftest.$ac_objext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_header_compiler=yes
+  ac_cv_type_pid_t=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_header_compiler=no
+ac_cv_type_pid_t=no
 fi
 rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6
+fi
+echo "$as_me:$LINENO: result: $ac_cv_type_pid_t" >&5
+echo "${ECHO_T}$ac_cv_type_pid_t" >&6
+if test $ac_cv_type_pid_t = yes; then
+  :
+else
 
-# Is the header present?
-echo "$as_me:$LINENO: checking $ac_header presence" >&5
-echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
+cat >>confdefs.h <<_ACEOF
+#define pid_t int
+_ACEOF
+
+fi
+
+echo "$as_me:$LINENO: checking for size_t" >&5
+echo $ECHO_N "checking for size_t... $ECHO_C" >&6
+if test "${ac_cv_type_size_t+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-#include <$ac_header>
+$ac_includes_default
+int
+main ()
+{
+if ((size_t *) 0)
+  return 0;
+if (sizeof (size_t))
+  return 0;
+  ;
+  return 0;
+}
 _ACEOF
-if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null; then
-  if test -s conftest.err; then
-    ac_cpp_err=$ac_c_preproc_warn_flag
-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-  else
-    ac_cpp_err=
-  fi
-else
-  ac_cpp_err=yes
-fi
-if test -z "$ac_cpp_err"; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-rm -f conftest.err conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
-    (
-      cat <<\_ASBOX
-## ------------------------------------------ ##
-## Report this to the AC_PACKAGE_NAME lists.  ##
-## ------------------------------------------ ##
-_ASBOX
-    ) |
-      sed "s/^/$as_me: WARNING:     /" >&2
-    ;;
-esac
-echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
-
-fi
-
-done
-
-
-for ac_header in arpa/inet.h
-do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
-else
-  # Is the header compilable?
-echo "$as_me:$LINENO: checking $ac_header usability" >&5
-echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$ac_header>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
@@ -22126,139 +21624,56 @@
 	 { ac_try='test -s conftest.$ac_objext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_header_compiler=yes
+  ac_cv_type_size_t=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_header_compiler=no
+ac_cv_type_size_t=no
 fi
 rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6
-
-# Is the header present?
-echo "$as_me:$LINENO: checking $ac_header presence" >&5
-echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$ac_header>
-_ACEOF
-if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null; then
-  if test -s conftest.err; then
-    ac_cpp_err=$ac_c_preproc_warn_flag
-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-  else
-    ac_cpp_err=
-  fi
-else
-  ac_cpp_err=yes
-fi
-if test -z "$ac_cpp_err"; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
 fi
-rm -f conftest.err conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
-    (
-      cat <<\_ASBOX
-## ------------------------------------------ ##
-## Report this to the AC_PACKAGE_NAME lists.  ##
-## ------------------------------------------ ##
-_ASBOX
-    ) |
-      sed "s/^/$as_me: WARNING:     /" >&2
-    ;;
-esac
-echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
+echo "$as_me:$LINENO: result: $ac_cv_type_size_t" >&5
+echo "${ECHO_T}$ac_cv_type_size_t" >&6
+if test $ac_cv_type_size_t = yes; then
+  :
 else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+cat >>confdefs.h <<_ACEOF
+#define size_t unsigned
 _ACEOF
 
 fi
 
-done
-
-
-for ac_header in netinet/in.h
-do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
+echo "$as_me:$LINENO: checking whether time.h and sys/time.h may both be included" >&5
+echo $ECHO_N "checking whether time.h and sys/time.h may both be included... $ECHO_C" >&6
+if test "${ac_cv_header_time+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
-  # Is the header compilable?
-echo "$as_me:$LINENO: checking $ac_header usability" >&5
-echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-$ac_includes_default
-#include <$ac_header>
+#include <sys/types.h>
+#include <sys/time.h>
+#include <time.h>
+
+int
+main ()
+{
+if ((struct tm *) 0)
+return 0;
+  ;
+  return 0;
+}
 _ACEOF
 rm -f conftest.$ac_objext
 if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
@@ -22275,778 +21690,654 @@
 	 { ac_try='test -s conftest.$ac_objext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_header_compiler=yes
+  ac_cv_header_time=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_header_compiler=no
+ac_cv_header_time=no
 fi
 rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_time" >&5
+echo "${ECHO_T}$ac_cv_header_time" >&6
+if test $ac_cv_header_time = yes; then
 
-# Is the header present?
-echo "$as_me:$LINENO: checking $ac_header presence" >&5
-echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
+cat >>confdefs.h <<\_ACEOF
+#define TIME_WITH_SYS_TIME 1
+_ACEOF
+
+fi
+
+
+if test $ac_cv_c_compiler_gnu = yes; then
+    echo "$as_me:$LINENO: checking whether $CC needs -traditional" >&5
+echo $ECHO_N "checking whether $CC needs -traditional... $ECHO_C" >&6
+if test "${ac_cv_prog_gcc_traditional+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+    ac_pattern="Autoconf.*'x'"
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-#include <$ac_header>
+#include <sgtty.h>
+Autoconf TIOCGETP
 _ACEOF
-if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null; then
-  if test -s conftest.err; then
-    ac_cpp_err=$ac_c_preproc_warn_flag
-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-  else
-    ac_cpp_err=
-  fi
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "$ac_pattern" >/dev/null 2>&1; then
+  ac_cv_prog_gcc_traditional=yes
 else
-  ac_cpp_err=yes
+  ac_cv_prog_gcc_traditional=no
 fi
-if test -z "$ac_cpp_err"; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
+rm -f conftest*
 
-  ac_header_preproc=no
-fi
-rm -f conftest.err conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6
 
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
-    (
-      cat <<\_ASBOX
-## ------------------------------------------ ##
-## Report this to the AC_PACKAGE_NAME lists.  ##
-## ------------------------------------------ ##
-_ASBOX
-    ) |
-      sed "s/^/$as_me: WARNING:     /" >&2
-    ;;
-esac
-echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
+  if test $ac_cv_prog_gcc_traditional = no; then
+    cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <termio.h>
+Autoconf TCGETA
+_ACEOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  $EGREP "$ac_pattern" >/dev/null 2>&1; then
+  ac_cv_prog_gcc_traditional=yes
 fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+rm -f conftest*
 
+  fi
 fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
-
+echo "$as_me:$LINENO: result: $ac_cv_prog_gcc_traditional" >&5
+echo "${ECHO_T}$ac_cv_prog_gcc_traditional" >&6
+  if test $ac_cv_prog_gcc_traditional = yes; then
+    CC="$CC -traditional"
+  fi
 fi
 
-done
 
 
-for ac_header in netdb.h
+
+
+
+
+for ac_func in gettimeofday select socket strdup strstr strtol
 do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
-  # Is the header compilable?
-echo "$as_me:$LINENO: checking $ac_header usability" >&5
-echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-$ac_includes_default
-#include <$ac_header>
+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define $ac_func innocuous_$ac_func
+
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
+
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef $ac_func
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+{
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+char (*f) () = $ac_func;
+#endif
+#ifdef __cplusplus
+}
+#endif
+
+int
+main ()
+{
+return f != $ac_func;
+  ;
+  return 0;
+}
 _ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
+	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_header_compiler=yes
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_header_compiler=no
+eval "$as_ac_var=no"
 fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
 
-# Is the header present?
-echo "$as_me:$LINENO: checking $ac_header presence" >&5
-echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
+fi
+done
+
+
+for ac_func in socket
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-#include <$ac_header>
+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define $ac_func innocuous_$ac_func
+
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
+
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef $ac_func
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+{
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+char (*f) () = $ac_func;
+#endif
+#ifdef __cplusplus
+}
+#endif
+
+int
+main ()
+{
+return f != $ac_func;
+  ;
+  return 0;
+}
 _ACEOF
-if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null; then
-  if test -s conftest.err; then
-    ac_cpp_err=$ac_c_preproc_warn_flag
-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-  else
-    ac_cpp_err=
-  fi
-else
-  ac_cpp_err=yes
-fi
-if test -z "$ac_cpp_err"; then
-  ac_header_preproc=yes
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-  ac_header_preproc=no
-fi
-rm -f conftest.err conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
-    (
-      cat <<\_ASBOX
-## ------------------------------------------ ##
-## Report this to the AC_PACKAGE_NAME lists.  ##
-## ------------------------------------------ ##
-_ASBOX
-    ) |
-      sed "s/^/$as_me: WARNING:     /" >&2
-    ;;
-esac
-echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
+eval "$as_ac_var=no"
 fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
-
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
 fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
-fi
-
-done
-
+else
 
-for ac_header in syslog.h
-do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
+echo "$as_me:$LINENO: checking for socket in -lsocket" >&5
+echo $ECHO_N "checking for socket in -lsocket... $ECHO_C" >&6
+if test "${ac_cv_lib_socket_socket+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
-  # Is the header compilable?
-echo "$as_me:$LINENO: checking $ac_header usability" >&5
-echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lsocket  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-$ac_includes_default
-#include <$ac_header>
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char socket ();
+int
+main ()
+{
+socket ();
+  ;
+  return 0;
+}
 _ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
+	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-ac_header_compiler=no
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6
-
-# Is the header present?
-echo "$as_me:$LINENO: checking $ac_header presence" >&5
-echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$ac_header>
-_ACEOF
-if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null; then
-  if test -s conftest.err; then
-    ac_cpp_err=$ac_c_preproc_warn_flag
-    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
-  else
-    ac_cpp_err=
-  fi
-else
-  ac_cpp_err=yes
-fi
-if test -z "$ac_cpp_err"; then
-  ac_header_preproc=yes
+  ac_cv_lib_socket_socket=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-  ac_header_preproc=no
-fi
-rm -f conftest.err conftest.$ac_ext
-echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
-    (
-      cat <<\_ASBOX
-## ------------------------------------------ ##
-## Report this to the AC_PACKAGE_NAME lists.  ##
-## ------------------------------------------ ##
-_ASBOX
-    ) |
-      sed "s/^/$as_me: WARNING:     /" >&2
-    ;;
-esac
-echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$as_ac_Header+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  eval "$as_ac_Header=\$ac_header_preproc"
+ac_cv_lib_socket_socket=no
 fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
-
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
 fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_lib_socket_socket" >&5
+echo "${ECHO_T}$ac_cv_lib_socket_socket" >&6
+if test $ac_cv_lib_socket_socket = yes; then
   cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+#define HAVE_LIBSOCKET 1
 _ACEOF
 
+  LIBS="-lsocket $LIBS"
+
 fi
 
+fi
 done
 
 
-
-echo "$as_me:$LINENO: checking for an ANSI C-conforming const" >&5
-echo $ECHO_N "checking for an ANSI C-conforming const... $ECHO_C" >&6
-if test "${ac_cv_c_const+set}" = set; then
+for ac_func in gethostbyname
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define $ac_func innocuous_$ac_func
 
-int
-main ()
-{
-/* FIXME: Include the comments suggested by Paul. */
-#ifndef __cplusplus
-  /* Ultrix mips cc rejects this.  */
-  typedef int charset[2];
-  const charset x;
-  /* SunOS 4.1.1 cc rejects this.  */
-  char const *const *ccp;
-  char **p;
-  /* NEC SVR4.0.2 mips cc rejects this.  */
-  struct point {int x, y;};
-  static struct point const zero = {0,0};
-  /* AIX XL C 1.02.0.0 rejects this.
-     It does not let you subtract one const X* pointer from another in
-     an arm of an if-expression whose if-part is not a constant
-     expression */
-  const char *g = "string";
-  ccp = &g + (g ? g-g : 0);
-  /* HPUX 7.0 cc rejects these. */
-  ++ccp;
-  p = (char**) ccp;
-  ccp = (char const *const *) p;
-  { /* SCO 3.2v4 cc rejects this.  */
-    char *t;
-    char const *s = 0 ? (char *) 0 : (char const *) 0;
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
 
-    *t++ = 0;
-  }
-  { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
-    int x[] = {25, 17};
-    const int *foo = &x[0];
-    ++foo;
-  }
-  { /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
-    typedef const int *iptr;
-    iptr p = 0;
-    ++p;
-  }
-  { /* AIX XL C 1.02.0.0 rejects this saying
-       "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
-    struct s { int j; const int *ap[3]; };
-    struct s *b; b->j = 5;
-  }
-  { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
-    const int foo = 10;
-  }
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef $ac_func
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+{
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+char (*f) () = $ac_func;
+#endif
+#ifdef __cplusplus
+}
 #endif
 
+int
+main ()
+{
+return f != $ac_func;
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
+	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_c_const=yes
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_c_const=no
+eval "$as_ac_var=no"
 fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:$LINENO: result: $ac_cv_c_const" >&5
-echo "${ECHO_T}$ac_cv_c_const" >&6
-if test $ac_cv_c_const = no; then
-
-cat >>confdefs.h <<\_ACEOF
-#define const
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
-fi
+else
 
-echo "$as_me:$LINENO: checking for pid_t" >&5
-echo $ECHO_N "checking for pid_t... $ECHO_C" >&6
-if test "${ac_cv_type_pid_t+set}" = set; then
+echo "$as_me:$LINENO: checking for gethostbyname in -lnsl" >&5
+echo $ECHO_N "checking for gethostbyname in -lnsl... $ECHO_C" >&6
+if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat >conftest.$ac_ext <<_ACEOF
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lnsl  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-$ac_includes_default
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char gethostbyname ();
 int
 main ()
 {
-if ((pid_t *) 0)
-  return 0;
-if (sizeof (pid_t))
-  return 0;
+gethostbyname ();
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
+	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_type_pid_t=yes
+  ac_cv_lib_nsl_gethostbyname=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_type_pid_t=no
+ac_cv_lib_nsl_gethostbyname=no
 fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: $ac_cv_type_pid_t" >&5
-echo "${ECHO_T}$ac_cv_type_pid_t" >&6
-if test $ac_cv_type_pid_t = yes; then
-  :
-else
-
-cat >>confdefs.h <<_ACEOF
-#define pid_t int
+echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_gethostbyname" >&5
+echo "${ECHO_T}$ac_cv_lib_nsl_gethostbyname" >&6
+if test $ac_cv_lib_nsl_gethostbyname = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBNSL 1
 _ACEOF
 
+  LIBS="-lnsl $LIBS"
+
 fi
 
-echo "$as_me:$LINENO: checking for size_t" >&5
-echo $ECHO_N "checking for size_t... $ECHO_C" >&6
-if test "${ac_cv_type_size_t+set}" = set; then
+fi
+done
+
+
+
+
+
+
+
+
+for ac_func in strchr memcpy strstr strcmp strncmp strncpy strlen
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-$ac_includes_default
+/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
+   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
+#define $ac_func innocuous_$ac_func
+
+/* System header to define __stub macros and hopefully few prototypes,
+    which can conflict with char $ac_func (); below.
+    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
+    <limits.h> exists even on freestanding compilers.  */
+
+#ifdef __STDC__
+# include <limits.h>
+#else
+# include <assert.h>
+#endif
+
+#undef $ac_func
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+{
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char $ac_func ();
+/* The GNU C library defines this for functions which it implements
+    to always fail with ENOSYS.  Some functions are actually named
+    something starting with __ and the normal name is an alias.  */
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
+choke me
+#else
+char (*f) () = $ac_func;
+#endif
+#ifdef __cplusplus
+}
+#endif
+
 int
 main ()
 {
-if ((size_t *) 0)
-  return 0;
-if (sizeof (size_t))
-  return 0;
+return f != $ac_func;
   ;
   return 0;
 }
 _ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
+	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_type_size_t=yes
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_type_size_t=no
+eval "$as_ac_var=no"
 fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:$LINENO: result: $ac_cv_type_size_t" >&5
-echo "${ECHO_T}$ac_cv_type_size_t" >&6
-if test $ac_cv_type_size_t = yes; then
-  :
-else
-
-cat >>confdefs.h <<_ACEOF
-#define size_t unsigned
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 _ACEOF
 
 fi
+done
 
-echo "$as_me:$LINENO: checking whether time.h and sys/time.h may both be included" >&5
-echo $ECHO_N "checking whether time.h and sys/time.h may both be included... $ECHO_C" >&6
-if test "${ac_cv_header_time+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <sys/types.h>
-#include <sys/time.h>
-#include <time.h>
-
-int
-main ()
-{
-if ((struct tm *) 0)
-return 0;
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext
-if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
-  (eval $ac_compile) 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } &&
-	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
-  (eval $ac_try) 2>&5
-  ac_status=$?
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); }; }; then
-  ac_cv_header_time=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-ac_cv_header_time=no
-fi
-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
-fi
-echo "$as_me:$LINENO: result: $ac_cv_header_time" >&5
-echo "${ECHO_T}$ac_cv_header_time" >&6
-if test $ac_cv_header_time = yes; then
-
-cat >>confdefs.h <<\_ACEOF
-#define TIME_WITH_SYS_TIME 1
-_ACEOF
-
-fi
-
-
-if test $ac_cv_c_compiler_gnu = yes; then
-    echo "$as_me:$LINENO: checking whether $CC needs -traditional" >&5
-echo $ECHO_N "checking whether $CC needs -traditional... $ECHO_C" >&6
-if test "${ac_cv_prog_gcc_traditional+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-    ac_pattern="Autoconf.*'x'"
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <sgtty.h>
-Autoconf TIOCGETP
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "$ac_pattern" >/dev/null 2>&1; then
-  ac_cv_prog_gcc_traditional=yes
-else
-  ac_cv_prog_gcc_traditional=no
-fi
-rm -f conftest*
-
-
-  if test $ac_cv_prog_gcc_traditional = no; then
-    cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <termio.h>
-Autoconf TCGETA
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "$ac_pattern" >/dev/null 2>&1; then
-  ac_cv_prog_gcc_traditional=yes
-fi
-rm -f conftest*
-
-  fi
-fi
-echo "$as_me:$LINENO: result: $ac_cv_prog_gcc_traditional" >&5
-echo "${ECHO_T}$ac_cv_prog_gcc_traditional" >&6
-  if test $ac_cv_prog_gcc_traditional = yes; then
-    CC="$CC -traditional"
-  fi
-fi
-
-
-
-
-
-
-
-for ac_func in gettimeofday select socket strdup strstr strtol
-do
-as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for $ac_func" >&5
-echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$as_ac_var+set}\" = set"; then
+
+
+
+for ac_func in strncasecmp strcasecmp strncmp
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:$LINENO: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
@@ -23136,67 +22427,63 @@
 _ACEOF
 
 fi
 done
 
 
-for ac_func in socket
-do
-as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for $ac_func" >&5
-echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$as_ac_var+set}\" = set"; then
+echo "$as_me:$LINENO: checking for kernel type ($host_os)" >&5
+echo $ECHO_N "checking for kernel type ($host_os)... $ECHO_C" >&6
+case $host_os in
+	*linux*)
+
+cat >>confdefs.h <<\_ACEOF
+#define KERNEL_LINUX
+_ACEOF
+
+	ac_system="Linux"
+	;;
+	*solaris*)
+
+cat >>confdefs.h <<\_ACEOF
+#define KERNEL_SOLARIS
+_ACEOF
+
+	ac_system="Solaris"
+	;;
+	*)
+	ac_system="unknown"
+esac
+echo "$as_me:$LINENO: result: $ac_system" >&5
+echo "${ECHO_T}$ac_system" >&6
+
+
+echo "$as_me:$LINENO: checking for socket in -lsocket" >&5
+echo $ECHO_N "checking for socket in -lsocket... $ECHO_C" >&6
+if test "${ac_cv_lib_socket_socket+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat >conftest.$ac_ext <<_ACEOF
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lsocket  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define $ac_func innocuous_$ac_func
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef $ac_func
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
-{
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char $ac_func ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-char (*f) () = $ac_func;
-#endif
-#ifdef __cplusplus
-}
-#endif
-
+char socket ();
 int
 main ()
 {
-return f != $ac_func;
+socket ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
 if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
@@ -23216,38 +22503,42 @@
 	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$as_ac_var=yes"
+  ac_cv_lib_socket_socket=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-eval "$as_ac_var=no"
+ac_cv_lib_socket_socket=no
 fi
 rm -f conftest.err conftest.$ac_objext \
       conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
-if test `eval echo '${'$as_ac_var'}'` = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_lib_socket_socket" >&5
+echo "${ECHO_T}$ac_cv_lib_socket_socket" >&6
+if test $ac_cv_lib_socket_socket = yes; then
   cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+#define HAVE_LIBSOCKET 1
 _ACEOF
 
-else
+  LIBS="-lsocket $LIBS"
 
-echo "$as_me:$LINENO: checking for socket in -lsocket" >&5
-echo $ECHO_N "checking for socket in -lsocket... $ECHO_C" >&6
-if test "${ac_cv_lib_socket_socket+set}" = set; then
+fi
+
+
+echo "$as_me:$LINENO: checking for res_search in -lresolv" >&5
+echo $ECHO_N "checking for res_search in -lresolv... $ECHO_C" >&6
+if test "${ac_cv_lib_resolv_res_search+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lsocket  $LIBS"
+LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
@@ -23255,17 +22546,17 @@
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char socket ();
+char res_search ();
 int
 main ()
 {
-socket ();
+res_search ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
 if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
@@ -23285,93 +22576,72 @@
 	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_lib_socket_socket=yes
+  ac_cv_lib_resolv_res_search=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_lib_socket_socket=no
+ac_cv_lib_resolv_res_search=no
 fi
 rm -f conftest.err conftest.$ac_objext \
       conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_socket_socket" >&5
-echo "${ECHO_T}$ac_cv_lib_socket_socket" >&6
-if test $ac_cv_lib_socket_socket = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_lib_resolv_res_search" >&5
+echo "${ECHO_T}$ac_cv_lib_resolv_res_search" >&6
+if test $ac_cv_lib_resolv_res_search = yes; then
   cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBSOCKET 1
+#define HAVE_LIBRESOLV 1
 _ACEOF
 
-  LIBS="-lsocket $LIBS"
+  LIBS="-lresolv $LIBS"
 
 fi
 
-fi
-done
 
 
-for ac_func in gethostbyname
-do
-as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for $ac_func" >&5
-echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$as_ac_var+set}\" = set"; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define $ac_func innocuous_$ac_func
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
+# Check whether --with-rrdtool or --without-rrdtool was given.
+if test "${with_rrdtool+set}" = set; then
+  withval="$with_rrdtool"
+  	if test "x$withval" != "xno" -a "x$withval" != "xyes"
+	then
+		LDFLAGS="$LDFLAGS -L$withval/lib"
+		CPPFLAGS="$CPPFLAGS -I$withval/include"
+	fi
 
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
+fi;
 
-#undef $ac_func
+echo "$as_me:$LINENO: checking for rrd_update in -lrrd" >&5
+echo $ECHO_N "checking for rrd_update in -lrrd... $ECHO_C" >&6
+if test "${ac_cv_lib_rrd_rrd_update+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lrrd -lm $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
-{
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char $ac_func ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-char (*f) () = $ac_func;
-#endif
-#ifdef __cplusplus
-}
-#endif
-
+char rrd_update ();
 int
 main ()
 {
-return f != $ac_func;
+rrd_update ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
 if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
@@ -23391,38 +22661,196 @@
 	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$as_ac_var=yes"
+  ac_cv_lib_rrd_rrd_update=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-eval "$as_ac_var=no"
+ac_cv_lib_rrd_rrd_update=no
 fi
 rm -f conftest.err conftest.$ac_objext \
       conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
-if test `eval echo '${'$as_ac_var'}'` = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_lib_rrd_rrd_update" >&5
+echo "${ECHO_T}$ac_cv_lib_rrd_rrd_update" >&6
+if test $ac_cv_lib_rrd_rrd_update = yes; then
   cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+#define HAVE_LIBRRD 1
 _ACEOF
 
+  LIBS="-lrrd $LIBS"
+
 else
+  { { echo "$as_me:$LINENO: error: librrd could not be found. Be sure to install rrdtool first!" >&5
+echo "$as_me: error: librrd could not be found. Be sure to install rrdtool first!" >&2;}
+   { (exit 1); exit 1; }; }
+fi
 
-echo "$as_me:$LINENO: checking for gethostbyname in -lnsl" >&5
-echo $ECHO_N "checking for gethostbyname in -lnsl... $ECHO_C" >&6
-if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then
+if test "${ac_cv_header_rrd_h+set}" = set; then
+  echo "$as_me:$LINENO: checking for rrd.h" >&5
+echo $ECHO_N "checking for rrd.h... $ECHO_C" >&6
+if test "${ac_cv_header_rrd_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_rrd_h" >&5
+echo "${ECHO_T}$ac_cv_header_rrd_h" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking rrd.h usability" >&5
+echo $ECHO_N "checking rrd.h usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <rrd.h>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_header_compiler=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking rrd.h presence" >&5
+echo $ECHO_N "checking rrd.h presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <rrd.h>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: rrd.h: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: rrd.h: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: rrd.h: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: rrd.h: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: rrd.h: present but cannot be compiled" >&5
+echo "$as_me: WARNING: rrd.h: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: rrd.h:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: rrd.h:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: rrd.h: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: rrd.h: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: rrd.h:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: rrd.h:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: rrd.h: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: rrd.h: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: rrd.h: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: rrd.h: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for rrd.h" >&5
+echo $ECHO_N "checking for rrd.h... $ECHO_C" >&6
+if test "${ac_cv_header_rrd_h+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_cv_header_rrd_h=$ac_header_preproc
+fi
+echo "$as_me:$LINENO: result: $ac_cv_header_rrd_h" >&5
+echo "${ECHO_T}$ac_cv_header_rrd_h" >&6
+
+fi
+if test $ac_cv_header_rrd_h = yes; then
+  :
+else
+  { { echo "$as_me:$LINENO: error: rrd.h could not be found. Be sure to install rrdtool first!" >&5
+echo "$as_me: error: rrd.h could not be found. Be sure to install rrdtool first!" >&2;}
+   { (exit 1); exit 1; }; }
+fi
+
+
+with_rrdtool="yes"
+
+if test "$ac_system" = "Solaris"
+then
+	with_kstat="yes"
+
+echo "$as_me:$LINENO: checking for kstat_open in -lkstat" >&5
+echo $ECHO_N "checking for kstat_open in -lkstat... $ECHO_C" >&6
+if test "${ac_cv_lib_kstat_kstat_open+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
-LIBS="-lnsl  $LIBS"
+LIBS="-lkstat  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
@@ -23430,17 +22858,17 @@
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char gethostbyname ();
+char kstat_open ();
 int
 main ()
 {
-gethostbyname ();
+kstat_open ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
 if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
@@ -23460,99 +22888,62 @@
 	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_lib_nsl_gethostbyname=yes
+  ac_cv_lib_kstat_kstat_open=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-ac_cv_lib_nsl_gethostbyname=no
+ac_cv_lib_kstat_kstat_open=no
 fi
 rm -f conftest.err conftest.$ac_objext \
       conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: $ac_cv_lib_nsl_gethostbyname" >&5
-echo "${ECHO_T}$ac_cv_lib_nsl_gethostbyname" >&6
-if test $ac_cv_lib_nsl_gethostbyname = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_lib_kstat_kstat_open" >&5
+echo "${ECHO_T}$ac_cv_lib_kstat_kstat_open" >&6
+if test $ac_cv_lib_kstat_kstat_open = yes; then
   cat >>confdefs.h <<_ACEOF
-#define HAVE_LIBNSL 1
+#define HAVE_LIBKSTAT 1
 _ACEOF
 
-  LIBS="-lnsl $LIBS"
-
-fi
+  LIBS="-lkstat $LIBS"
 
+else
+  with_kstat="no (not found)"
 fi
-done
-
-
-
-
-
-
 
 
-for ac_func in strchr memcpy strstr strcmp strncmp strncpy strlen
-do
-as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for $ac_func" >&5
-echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$as_ac_var+set}\" = set"; then
+echo "$as_me:$LINENO: checking for di_init in -ldevinfo" >&5
+echo $ECHO_N "checking for di_init in -ldevinfo... $ECHO_C" >&6
+if test "${ac_cv_lib_devinfo_di_init+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat >conftest.$ac_ext <<_ACEOF
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-ldevinfo  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define $ac_func innocuous_$ac_func
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef $ac_func
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
-{
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char $ac_func ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-char (*f) () = $ac_func;
-#endif
-#ifdef __cplusplus
-}
-#endif
-
+char di_init ();
 int
 main ()
 {
-return f != $ac_func;
+di_init ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
 if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
@@ -23572,135 +22963,817 @@
 	 { ac_try='test -s conftest$ac_exeext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$as_ac_var=yes"
+  ac_cv_lib_devinfo_di_init=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-eval "$as_ac_var=no"
+ac_cv_lib_devinfo_di_init=no
 fi
 rm -f conftest.err conftest.$ac_objext \
       conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
-if test `eval echo '${'$as_ac_var'}'` = yes; then
+echo "$as_me:$LINENO: result: $ac_cv_lib_devinfo_di_init" >&5
+echo "${ECHO_T}$ac_cv_lib_devinfo_di_init" >&6
+if test $ac_cv_lib_devinfo_di_init = yes; then
   cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+#define HAVE_LIBDEVINFO 1
 _ACEOF
 
-fi
-done
-
+  LIBS="-ldevinfo $LIBS"
 
+fi
 
 
-for ac_func in strncasecmp strcasecmp strncmp
+for ac_header in kstat.h
 do
-as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:$LINENO: checking for $ac_func" >&5
-echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$as_ac_var+set}\" = set"; then
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 else
-  cat >conftest.$ac_ext <<_ACEOF
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-/* Define $ac_func to an innocuous variant, in case <limits.h> declares $ac_func.
-   For example, HP-UX 11i <limits.h> declares gettimeofday.  */
-#define $ac_func innocuous_$ac_func
-
-/* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $ac_func (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-
-#undef $ac_func
-
-/* Override any gcc2 internal prototype to avoid an error.  */
-#ifdef __cplusplus
-extern "C"
-{
-#endif
-/* We use char because int might match the return type of a gcc2
-   builtin and then its argument prototype would still apply.  */
-char $ac_func ();
-/* The GNU C library defines this for functions which it implements
-    to always fail with ENOSYS.  Some functions are actually named
-    something starting with __ and the normal name is an alias.  */
-#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
-choke me
-#else
-char (*f) () = $ac_func;
-#endif
-#ifdef __cplusplus
-}
-#endif
-
-int
-main ()
-{
-return f != $ac_func;
-  ;
-  return 0;
-}
+$ac_includes_default
+#include <$ac_header>
 _ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
-  (eval $ac_link) 2>conftest.er1
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } &&
 	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; } &&
-	 { ac_try='test -s conftest$ac_exeext'
+	 { ac_try='test -s conftest.$ac_objext'
   { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$as_ac_var=yes"
+  ac_header_compiler=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-eval "$as_ac_var=no"
+ac_header_compiler=no
 fi
-rm -f conftest.err conftest.$ac_objext \
-      conftest$ac_exeext conftest.$ac_ext
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
 fi
-echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
-if test `eval echo '${'$as_ac_var'}'` = yes; then
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
+else
+  with_kstat="no (kstat.h not found)"
 fi
+
 done
 
+else
+	with_kstat="no (Solaris only)"
+fi
+
+
+# Check whether --with-libstatgrab or --without-libstatgrab was given.
+if test "${with_libstatgrab+set}" = set; then
+  withval="$with_libstatgrab"
+
+	# given..
+	if test "x$withval" != "xno"
+	then
+		if test "x$withval" != "xyes"
+		then
+			LDFLAGS="$LDFLAGS -L$withval/lib"
+			CPPFLAGS="$CPPFLAGS -I$withval/include"
+			with_libstatgrab="yes"
+		fi
+	fi
+
+else
+
+	# not given..
+	if test "x$ac_system" != "xunknown"
+	then
+		with_libstatgrab="no"
+	else
+		with_libstatgrab="yes"
+	fi
+
+fi;
+if test "x$with_lm_sensors" = "xyes"
+then
+
+echo "$as_me:$LINENO: checking for sg_init in -lstatgrab" >&5
+echo $ECHO_N "checking for sg_init in -lstatgrab... $ECHO_C" >&6
+if test "${ac_cv_lib_statgrab_sg_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lstatgrab  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char sg_init ();
+int
+main ()
+{
+sg_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_statgrab_sg_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_lib_statgrab_sg_init=no
+fi
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_statgrab_sg_init" >&5
+echo "${ECHO_T}$ac_cv_lib_statgrab_sg_init" >&6
+if test $ac_cv_lib_statgrab_sg_init = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBSTATGRAB 1
+_ACEOF
+
+  LIBS="-lstatgrab $LIBS"
+
+else
+  with_libstatgrab="no (not found)"
+fi
+
+
+for ac_header in statgrab.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_header_compiler=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+else
+  with_libstatgrab="no (not found)"
+fi
+
+done
+
+fi
+
+
+# Check whether --with-lm-sensors or --without-lm-sensors was given.
+if test "${with_lm_sensors+set}" = set; then
+  withval="$with_lm_sensors"
+
+	# given..
+	if test "x$withval" != "xno"
+	then
+		if test "x$withval" != "xyes"
+		then
+			LDFLAGS="$LDFLAGS -L$withval/lib"
+			CPPFLAGS="$CPPFLAGS -I$withval/include"
+			with_lm_sensors="yes"
+		fi
+	fi
+
+else
+
+	# not given..
+	if test "x$ac_system" = "xLinux"
+	then
+		with_lm_sensors="yes"
+	else
+		with_lm_sensors="no"
+	fi
+
+fi;
+if test "x$with_lm_sensors" = "xyes"
+then
+
+echo "$as_me:$LINENO: checking for sensors_init in -lsensors" >&5
+echo $ECHO_N "checking for sensors_init in -lsensors... $ECHO_C" >&6
+if test "${ac_cv_lib_sensors_sensors_init+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lsensors  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any gcc2 internal prototype to avoid an error.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+/* We use char because int might match the return type of a gcc2
+   builtin and then its argument prototype would still apply.  */
+char sensors_init ();
+int
+main ()
+{
+sensors_init ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (eval echo "$as_me:$LINENO: \"$ac_link\"") >&5
+  (eval $ac_link) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest$ac_exeext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_cv_lib_sensors_sensors_init=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_cv_lib_sensors_sensors_init=no
+fi
+rm -f conftest.err conftest.$ac_objext \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+echo "$as_me:$LINENO: result: $ac_cv_lib_sensors_sensors_init" >&5
+echo "${ECHO_T}$ac_cv_lib_sensors_sensors_init" >&6
+if test $ac_cv_lib_sensors_sensors_init = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define HAVE_LIBSENSORS 1
+_ACEOF
+
+  LIBS="-lsensors $LIBS"
+
+else
+  with_lm_sensors="no (not found)"
+fi
+
+
+for ac_header in sensors/sensors.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+else
+  # Is the header compilable?
+echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+	 { ac_try='test -z "$ac_c_werror_flag"			 || test ! -s conftest.err'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; } &&
+	 { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:$LINENO: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+ac_header_compiler=no
+fi
+rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6
+
+# Is the header present?
+echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (eval echo "$as_me:$LINENO: \"$ac_cpp conftest.$ac_ext\"") >&5
+  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null; then
+  if test -s conftest.err; then
+    ac_cpp_err=$ac_c_preproc_warn_flag
+    ac_cpp_err=$ac_cpp_err$ac_c_werror_flag
+  else
+    ac_cpp_err=
+  fi
+else
+  ac_cpp_err=yes
+fi
+if test -z "$ac_cpp_err"; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+rm -f conftest.err conftest.$ac_ext
+echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+    (
+      cat <<\_ASBOX
+## ------------------------------------------ ##
+## Report this to the AC_PACKAGE_NAME lists.  ##
+## ------------------------------------------ ##
+_ASBOX
+    ) |
+      sed "s/^/$as_me: WARNING:     /" >&2
+    ;;
+esac
+echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+echo "$as_me:$LINENO: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+else
+  with_lm_sensors="no (not found)"
+fi
+
+done
+
+fi
+
+#
+# Check for disabled features
+#
+# Check whether --enable-cpu or --disable-cpu was given.
+if test "${enable_cpu+set}" = set; then
+  enableval="$enable_cpu"
+
+else
+  enable_cpu="yes"
+fi;
+if test "x$enable_cpu" = "xno"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define COLLECT_CPU 0
+_ACEOF
+
+fi
+
+# Check whether --enable-disk or --disable-disk was given.
+if test "${enable_disk+set}" = set; then
+  enableval="$enable_disk"
+
+else
+  enable_disk="yes"
+fi;
+if test "x$enable_disk" = "xno"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define COLLECT_DISK 0
+_ACEOF
+
+fi
+
+# Check whether --enable-load or --disable-load was given.
+if test "${enable_load+set}" = set; then
+  enableval="$enable_load"
+
+else
+  enable_load="yes"
+fi;
+if test "x$enable_load" = "xno"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define COLLECT_LOAD 0
+_ACEOF
+
+fi
+
+# Check whether --enable-memory or --disable-memory was given.
+if test "${enable_memory+set}" = set; then
+  enableval="$enable_memory"
+
+else
+  enable_memory="yes"
+fi;
+if test "x$enable_memory" = "xno"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define COLLECT_MEMORY 0
+_ACEOF
+
+fi
+
+# Check whether --enable-ping or --disable-ping was given.
+if test "${enable_ping+set}" = set; then
+  enableval="$enable_ping"
+
+else
+  enable_ping="yes"
+fi;
+if test "x$enable_ping" = "xno"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define COLLECT_PING 0
+_ACEOF
+
+fi
+
+# Check whether --enable-sensors or --disable-sensors was given.
+if test "${enable_sensors+set}" = set; then
+  enableval="$enable_sensors"
+
+else
+  enable_sensors=$with_lm_sensors
+fi;
+if test "x$enable_sensors" = "xno"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define COLLECT_SENSORS 0
+_ACEOF
+
+fi
+
+# Check whether --enable-traffic or --disable-traffic was given.
+if test "${enable_traffic+set}" = set; then
+  enableval="$enable_traffic"
+
+else
+  enable_traffic="yes"
+fi;
+if test "x$enable_traffic" = "xno"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define COLLECT_TRAFFIC 0
+_ACEOF
+
+fi
 
                               ac_config_files="$ac_config_files Makefile src/libping/Makefile src/Makefile"
 cat >confcache <<\_ACEOF
 # This file is a shell script that caches the results of configure
 # tests run on this system so they can be shared between configure
 # scripts and configure runs, see configure's option --config-cache.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/configure.in	2005-09-02 02:40:40.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/configure.in	2005-09-10 22:09:35.000000000 +0800
@@ -1,21 +1,55 @@
 dnl Process this file with autoconf to produce a configure script.
 AC_INIT(src/collectd.c)
-AM_INIT_AUTOMAKE(collectd, 1.8.1)
+AM_INIT_AUTOMAKE(collectd, 2.0.0)
 AM_CONFIG_HEADER(src/config.h src/libping/config.h)
 AC_LANG(C)
 
 dnl Checks for programs.
 AC_PROG_CC
 AC_PROG_CPP
 AC_PROG_INSTALL
 AC_PROG_LN_S
 AC_PROG_LIBTOOL
 AC_PROG_MAKE_SET
 #AC_PROG_RANLIB
 
+dnl Checks for header files.
+AC_HEADER_STDC
+AC_HEADER_SYS_WAIT
+AC_CHECK_HEADERS(fcntl.h unistd.h)
+AC_CHECK_HEADERS(signal.h)
+AC_CHECK_HEADERS(sys/socket.h)
+AC_CHECK_HEADERS(sys/select.h)
+AC_CHECK_HEADERS(netdb.h)
+AC_CHECK_HEADERS(sys/time.h sys/times.h)
+AC_CHECK_HEADERS(sys/types.h)
+AC_CHECK_HEADERS(sys/resource.h)
+AC_CHECK_HEADERS(errno.h)
+AC_CHECK_HEADERS(arpa/inet.h)
+AC_CHECK_HEADERS(netinet/in.h)
+AC_CHECK_HEADERS(netdb.h)
+AC_CHECK_HEADERS(syslog.h)
+
+dnl Checking for libraries
+AC_CHECK_LIB(m, ext)
+
+dnl Checks for typedefs, structures, and compiler characteristics.
+AC_C_CONST
+AC_TYPE_PID_T
+AC_TYPE_SIZE_T
+AC_HEADER_TIME
+
+dnl Checks for library functions.
+AC_PROG_GCC_TRADITIONAL
+AC_CHECK_FUNCS(gettimeofday select socket strdup strstr strtol)
+AC_CHECK_FUNCS(socket, , AC_CHECK_LIB(socket, socket))
+AC_CHECK_FUNCS(gethostbyname, , AC_CHECK_LIB(nsl, gethostbyname))
+AC_CHECK_FUNCS(strchr memcpy strstr strcmp strncmp strncpy strlen)
+AC_CHECK_FUNCS(strncasecmp strcasecmp strncmp)
+
 AC_MSG_CHECKING([for kernel type ($host_os)])
 case $host_os in
 	*linux*)
 	AC_DEFINE([KERNEL_LINUX], [], [True if program is to be compiled for a Linux kernel])
 	ac_system="Linux"
 	;;
@@ -36,13 +70,13 @@
 [	if test "x$withval" != "xno" -a "x$withval" != "xyes"
 	then
 		LDFLAGS="$LDFLAGS -L$withval/lib"
 		CPPFLAGS="$CPPFLAGS -I$withval/include"
 	fi
 ])
-AC_CHECK_LIB(rrd, rrd_update,, [AC_MSG_ERROR([librrd could not be found. Be sure to install rrdtool first!])])
+AC_CHECK_LIB(rrd, rrd_update,, [AC_MSG_ERROR([librrd could not be found. Be sure to install rrdtool first!])], [-lm])
 AC_CHECK_HEADER(rrd.h,, [AC_MSG_ERROR([rrd.h could not be found. Be sure to install rrdtool first!])])
 with_rrdtool="yes"
 
 if test "$ac_system" = "Solaris"
 then
 	with_kstat="yes"
@@ -151,44 +185,12 @@
 AC_ARG_ENABLE(traffic, AC_HELP_STRING([--disable-traffic], [Disable system traffic statistics]),, [enable_traffic="yes"])
 if test "x$enable_traffic" = "xno"
 then
 	AC_DEFINE(COLLECT_TRAFFIC, 0, [Wether or not to collect network traffic statistics])
 fi
 
-dnl Checks for header files.
-AC_HEADER_STDC
-AC_HEADER_SYS_WAIT
-AC_CHECK_HEADERS(fcntl.h unistd.h)
-AC_CHECK_HEADERS(signal.h)
-AC_CHECK_HEADERS(sys/socket.h)
-AC_CHECK_HEADERS(sys/select.h)
-AC_CHECK_HEADERS(netdb.h)
-AC_CHECK_HEADERS(sys/time.h sys/times.h)
-AC_CHECK_HEADERS(sys/types.h)
-AC_CHECK_HEADERS(sys/resource.h)
-AC_CHECK_HEADERS(errno.h)
-AC_CHECK_HEADERS(arpa/inet.h)
-AC_CHECK_HEADERS(netinet/in.h)
-AC_CHECK_HEADERS(netdb.h)
-AC_CHECK_HEADERS(syslog.h)
-
-
-dnl Checks for typedefs, structures, and compiler characteristics.
-AC_C_CONST
-AC_TYPE_PID_T
-AC_TYPE_SIZE_T
-AC_HEADER_TIME
-
-dnl Checks for library functions.
-AC_PROG_GCC_TRADITIONAL
-AC_CHECK_FUNCS(gettimeofday select socket strdup strstr strtol)
-AC_CHECK_FUNCS(socket, , AC_CHECK_LIB(socket, socket))
-AC_CHECK_FUNCS(gethostbyname, , AC_CHECK_LIB(nsl, gethostbyname))
-AC_CHECK_FUNCS(strchr memcpy strstr strcmp strncmp strncpy strlen)
-AC_CHECK_FUNCS(strncasecmp strcasecmp strncmp)
-
 AC_OUTPUT(Makefile src/libping/Makefile src/Makefile)
 
 cat <<EOF;
 
 Configuration:
   Libraries:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/cpu /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/cpu
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/cpu	2005-07-10 17:06:11.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/cpu	2005-09-09 19:39:17.000000000 +0800
@@ -1,9 +1,9 @@
 #!/bin/sh
 
-FILE="/var/lib/collectd/cpu0.rrd"
+FILE="/var/lib/collectd/cpu-0.rrd"
 HOST=""
 
 if [ -n "$SERVER_NAME" ]; then
 	HOST=$SERVER_NAME
 	echo "Content-Type: image/png";
 	echo "";
@@ -30,27 +30,37 @@
 	"DEF:syst_avg=$FILE:syst:AVERAGE" \
 	"DEF:syst_min=$FILE:syst:MIN" \
 	"DEF:syst_max=$FILE:syst:MAX" \
 	"DEF:idle_avg=$FILE:idle:AVERAGE" \
 	"DEF:idle_min=$FILE:idle:MIN" \
 	"DEF:idle_max=$FILE:idle:MAX" \
-	'CDEF:nice_acc=syst_avg,user_avg,nice_avg,+,+' \
-	'CDEF:user_acc=syst_avg,user_avg,+' \
+	"DEF:wait_avg=$FILE:wait:AVERAGE" \
+	"DEF:wait_min=$FILE:wait:MIN" \
+	"DEF:wait_max=$FILE:wait:MAX" \
+	'CDEF:nice_acc=syst_avg,wait_avg,user_avg,nice_avg,+,+,+' \
+	'CDEF:user_acc=syst_avg,wait_avg,user_avg,+,+' \
+	'CDEF:wait_acc=syst_avg,wait_avg,+' \
 	'CDEF:syst_acc=syst_avg' \
 	'AREA:nice_acc#408040' \
 	'AREA:user_acc#404080' \
+	'AREA:wait_acc#808040' \
 	'AREA:syst_acc#804040' \
-	'LINE1:nice_acc#00FF00:Nice  ' \
+	'LINE1:nice_acc#00FF00:Nice   ' \
 	'GPRINT:nice_min:MIN:%5.1lf%% Min,' \
-	'GPRINT:nice_avg:AVERAGE:%5.1lf%% Average,' \
+	'GPRINT:nice_avg:AVERAGE:%5.1lf%% Avg,' \
 	'GPRINT:nice_max:MAX:%5.1lf%% Max,' \
 	'GPRINT:nice_avg:LAST:%5.1lf%% Last\n' \
-	'LINE1:user_acc#0000FF:User  ' \
+	'LINE1:user_acc#0000FF:User   ' \
 	'GPRINT:user_min:MIN:%5.1lf%% Min,' \
-	'GPRINT:user_avg:AVERAGE:%5.1lf%% Average,' \
+	'GPRINT:user_avg:AVERAGE:%5.1lf%% Avg,' \
 	'GPRINT:user_max:MAX:%5.1lf%% Max,' \
 	'GPRINT:user_avg:LAST:%5.1lf%% Last\n' \
-	'LINE1:syst_acc#FF0000:System' \
+	'LINE1:wait_acc#FFFF00:Wait-IO' \
+	'GPRINT:wait_min:MIN:%5.1lf%% Min,' \
+	'GPRINT:wait_avg:AVERAGE:%5.1lf%% Avg,' \
+	'GPRINT:wait_max:MAX:%5.1lf%% Max,' \
+	'GPRINT:wait_avg:LAST:%5.1lf%% Last\n' \
+	'LINE1:syst_acc#FF0000:System ' \
 	'GPRINT:syst_min:MIN:%5.1lf%% Min,' \
-	'GPRINT:syst_avg:AVERAGE:%5.1lf%% Average,' \
+	'GPRINT:syst_avg:AVERAGE:%5.1lf%% Avg,' \
 	'GPRINT:syst_max:MAX:%5.1lf%% Max,' \
-	'GPRINT:syst_avg:LAST:%5.1lf%% Last'
+	'GPRINT:syst_avg:LAST:%5.1lf%% Last\n'
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/init.d-rh7 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/init.d-rh7
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/init.d-rh7	2005-07-11 00:14:23.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/init.d-rh7	2005-09-10 22:59:42.000000000 +0800
@@ -13,13 +13,13 @@
 
 if [ -n "$DATA_DIR" ]; then
 	ARGS="-d $DATA_DIR"
 fi
 
 if [ -n "$PING_HOST" ]; then
-	ARGS="$ARGS -P $PING_HOST"
+	ARGS="$ARGS -p $PING_HOST"
 fi
 
 start () {
 	echo -n $"Starting $prog: "
 	daemon /usr/sbin/collectd $ARGS
 	RETVAL=$?
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib: iobytes
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib: iosectors
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/load /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/load
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/load	2005-07-10 19:26:41.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/load	2005-09-02 23:31:59.000000000 +0800
@@ -45,11 +45,11 @@
 	'GPRINT:s_avg:LAST:%4.2lf Last\n' \
 	'LINE1:m_avg_neg#0040ff: 5m average' \
 	'GPRINT:m_min:MIN:%4.2lf Min,' \
 	'GPRINT:m_avg:AVERAGE:%4.2lf Average,' \
 	'GPRINT:m_max:MAX:%4.2lf Max,' \
 	'GPRINT:m_avg:LAST:%4.2lf Last\n' \
-	'LINE1:l_avg_neg#ff0000:10m average' \
+	'LINE1:l_avg_neg#ff0000:15m average' \
 	'GPRINT:l_min:MIN:%4.2lf Min,' \
 	'GPRINT:l_avg:AVERAGE:%4.2lf Average,' \
 	'GPRINT:l_max:MAX:%4.2lf Max,' \
-	'GPRINT:l_avg:LAST:%4.2lf Last'
+	'GPRINT:l_avg:LAST:%4.2lf Last\n'
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib: load.old.sh
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/meminfo /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/meminfo
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/meminfo	2005-07-10 19:08:25.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/meminfo	2005-09-02 23:29:18.000000000 +0800
@@ -57,7 +57,7 @@
 	'GPRINT:buff_max:MAX:%5.1lf%s Max,' \
 	'GPRINT:buff_avg:LAST:%5.1lf%s Last\n' \
 	'LINE1:used_acc#ff0000:Used        ' \
 	'GPRINT:used_min:MIN:%5.1lf%s Min,' \
 	'GPRINT:used_avg:AVERAGE:%5.1lf%s Average,' \
 	'GPRINT:used_max:MAX:%5.1lf%s Max,' \
-	'GPRINT:used_avg:LAST:%5.1lf%s Last'
+	'GPRINT:used_avg:LAST:%5.1lf%s Last\n'
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/museum/collection.cgi /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/museum/collection.cgi
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/museum/collection.cgi	2005-08-18 18:37:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/museum/collection.cgi	2005-09-06 00:56:05.000000000 +0800
@@ -100,13 +100,13 @@
 			'GPRINT:s_avg:LAST:%4.2lf Last\n',
 			"LINE1:m_avg_neg#$FullBlue: 5m average",
 			'GPRINT:m_min:MIN:%4.2lf Min,',
 			'GPRINT:m_avg:AVERAGE:%4.2lf Average,',
 			'GPRINT:m_max:MAX:%4.2lf Max,',
 			'GPRINT:m_avg:LAST:%4.2lf Last\n',
-			"LINE1:l_avg_neg#$FullRed:10m average",
+			"LINE1:l_avg_neg#$FullRed:15m average",
 			'GPRINT:l_min:MIN:%4.2lf Min,',
 			'GPRINT:l_avg:AVERAGE:%4.2lf Average,',
 			'GPRINT:l_max:MAX:%4.2lf Max,',
 			'GPRINT:l_avg:LAST:%4.2lf Last'],
 		mails => ['DEF:rawgood={file}:good:AVERAGE',
 			'DEF:rawspam={file}:spam:AVERAGE',
@@ -235,28 +235,38 @@
 			"AREA:temp_min#$Canvas",
 			"LINE1:temp_avg#$FullRed:Value",
 			'GPRINT:temp_min:MIN:%4.1lfC Min,',
 			'GPRINT:temp_avg:AVERAGE:%4.1lfC Average,',
 			'GPRINT:temp_max:MAX:%4.1lfC Max,',
 			'GPRINT:temp_avg:LAST:%4.1lfC Last'],
-		traffic => ['DEF:out={file}:outgoing:AVERAGE',
-			'DEF:inc={file}:incoming:AVERAGE',
-			'CDEF:obit=out,8,*',
-			'CDEF:ibit=inc,8,*',
-			'CDEF:overlap=obit,ibit,GT,ibit,obit,IF',
-			"AREA:obit#$HalfGreen",
-			"AREA:ibit#$HalfBlue",
+		traffic => ['DEF:out_min={file}:outgoing:MIN',
+			'DEF:out_avg={file}:outgoing:AVERAGE',
+			'DEF:out_max={file}:outgoing:MAX',
+			'DEF:inc_min={file}:incoming:MIN',
+			'DEF:inc_avg={file}:incoming:AVERAGE',
+			'DEF:inc_max={file}:incoming:MAX',
+			'CDEF:obit_min=out_min,8,*',
+			'CDEF:obit_avg=out_avg,8,*',
+			'CDEF:obit_max=out_max,8,*',
+			'CDEF:ibit_min=inc_min,8,*',
+			'CDEF:ibit_avg=inc_avg,8,*',
+			'CDEF:ibit_max=inc_max,8,*',
+			'CDEF:overlap=obit_avg,ibit_avg,GT,ibit_avg,obit_avg,IF',
+			"AREA:obit_avg#$HalfGreen",
+			"AREA:ibit_avg#$HalfBlue",
 			"AREA:overlap#$HalfBlueGreen",
-			"LINE1:obit#$FullGreen:Outgoing",
-			'GPRINT:obit:AVERAGE:%5.1lf %sBit/s Average,',
-			'GPRINT:obit:MAX:%5.1lf %sBit/s Max,',
-			'GPRINT:obit:LAST:%5.1lf %sBit/s Last\n',
-			"LINE1:ibit#$FullBlue:Incoming",
-			'GPRINT:ibit:AVERAGE:%5.1lf %sBit/s Average,',
-			'GPRINT:ibit:MAX:%5.1lf %sBit/s Max,',
-			'GPRINT:ibit:LAST:%5.1lf %sBit/s Last'],
+			"LINE1:obit_avg#$FullGreen:Outgoing",
+			#'GPRINT:obit_min:MIN:%5.1lf %sBit/s Min,',
+			'GPRINT:obit_avg:AVERAGE:%5.1lf %sBit/s Average,',
+			'GPRINT:obit_max:MAX:%5.1lf %sBit/s Max,',
+			'GPRINT:obit_avg:LAST:%5.1lf %sBit/s Last\n',
+			"LINE1:ibit_avg#$FullBlue:Incoming",
+			#'GPRINT:ibit_min:MIN:%5.1lf %sBit/s Min,',
+			'GPRINT:ibit_avg:AVERAGE:%5.1lf %sBit/s Average,',
+			'GPRINT:ibit_max:MAX:%5.1lf %sBit/s Max,',
+			'GPRINT:ibit_avg:LAST:%5.1lf %sBit/s Last\n'],
 	};
 }
 
 our $GraphArgs =
 {
 	cpu => ['-t', '{host} cpu{inst} usage', '-v', 'Percent', '-l', '0'],
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/ping /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/ping
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/ping	2005-07-10 17:54:11.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/ping	2005-09-09 19:41:11.000000000 +0800
@@ -1,9 +1,9 @@
 #!/bin/sh
 
-FILE="/var/lib/collectd/ping.rrd"
+FILE="/var/lib/collectd/ping-verplant.org.rrd"
 HOST=""
 
 if [ -n "$SERVER_NAME" ]; then
 	HOST=$SERVER_NAME
 	echo "Content-Type: image/png";
 	echo "";
@@ -22,14 +22,12 @@
 	-c "FRAME#202020" \
 	-c "ARROW#ffffff" \
 	"DEF:ping_avg=$FILE:ping:AVERAGE" \
 	"DEF:ping_min=$FILE:ping:MIN" \
 	"DEF:ping_max=$FILE:ping:MAX" \
 	"AREA:ping_max#804040" \
-	"AREA:ping_avg#408040" \
-	"LINE1:ping_min#00ff00" \
-	"LINE1:ping_max#ff0000" \
-	"LINE1:ping_avg#0000ff:Ping" \
+	"AREA:ping_min#202020" \
+	"LINE1:ping_avg#ff0000:Ping" \
 	"GPRINT:ping_min:MIN:%4.1lf ms Min," \
 	"GPRINT:ping_avg:AVERAGE:%4.1lf ms Average," \
 	"GPRINT:ping_max:MAX:%4.1lf ms Max," \
-	"GPRINT:ping_avg:LAST:%4.1lf ms Last"
+	"GPRINT:ping_avg:LAST:%4.1lf ms Last\l"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/temperature /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/temperature
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/temperature	2005-07-11 00:13:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/temperature	2005-09-02 23:30:01.000000000 +0800
@@ -27,7 +27,7 @@
 	'AREA:temp_max#520000' \
 	'AREA:temp_min#202020' \
 	'LINE1:temp_avg#FF0000:CPU Temperature' \
 	'GPRINT:temp_min:MIN:%4.1lfC Min,' \
 	'GPRINT:temp_avg:AVERAGE:%4.1lfC Average,' \
 	'GPRINT:temp_max:MAX:%4.1lfC Max,' \
-	'GPRINT:temp_avg:LAST:%4.1lfC Last'
+	'GPRINT:temp_avg:LAST:%4.1lfC Last\n'
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/traffic /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/traffic
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/contrib/traffic	2005-07-10 17:40:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/contrib/traffic	2005-09-09 19:37:10.000000000 +0800
@@ -35,15 +35,15 @@
 	'CDEF:inc_max_bit=inc_max,8,*' \
 	'CDEF:overlap=out_avg_bit,inc_avg_bit,GT,inc_avg_bit,out_avg_bit,IF' \
 	'AREA:out_avg_bit#408040' \
 	'AREA:inc_avg_bit#404080' \
 	'AREA:overlap#4080A0' \
 	'LINE1:out_avg_bit#00ff00:Outgoing' \
-	'GPRINT:out_min_bit:MIN:%5.1lf %sb Min,' \
-	'GPRINT:out_avg_bit:AVERAGE:%5.1lf %sb Average,' \
-	'GPRINT:out_max_bit:MAX:%5.1lf %sb Max,' \
-	'GPRINT:out_avg_bit:LAST:%5.1lf %sb Last\n' \
+	'GPRINT:out_min_bit:MIN:%5.1lf%s Min,' \
+	'GPRINT:out_avg_bit:AVERAGE:%5.1lf%s Avg,' \
+	'GPRINT:out_max_bit:MAX:%5.1lf%s Max,' \
+	'GPRINT:out_avg_bit:LAST:%5.1lf%s Last\n' \
 	'LINE1:inc_avg_bit#0000ff:Incoming' \
-	'GPRINT:inc_min_bit:MIN:%5.1lf %sb Min,' \
-	'GPRINT:inc_avg_bit:AVERAGE:%5.1lf %sb Average,' \
-	'GPRINT:inc_max_bit:MAX:%5.1lf %sb Max,' \
-	'GPRINT:inc_avg_bit:LAST:%5.1lf %sb Last'
+	'GPRINT:inc_min_bit:MIN:%5.1lf%s Min,' \
+	'GPRINT:inc_avg_bit:AVERAGE:%5.1lf%s Avg,' \
+	'GPRINT:inc_max_bit:MAX:%5.1lf%s Max,' \
+	'GPRINT:inc_avg_bit:LAST:%5.1lf%s Last\n'
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/debian/changelog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/debian/changelog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/debian/changelog	2005-09-02 03:27:00.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/debian/changelog	2005-09-10 22:11:02.000000000 +0800
@@ -1,6 +1,12 @@
+collectd (2.0.0-1) unstable; urgency=low
+
+  * New upstream version
+
+ -- Florian Forster <octo@verplant.org>  Sat, 10 Sep 2005 16:11:37 +0200
+
 collectd (1.8.1-1) unstable; urgency=low
 
   * New upstream version
 
  -- Florian Forster <octo@verplant.org>  Mon, 01 Sep 2005 21:27:16 +0200
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/debian/init.d /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/debian/init.d
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/debian/init.d	2005-07-09 06:54:17.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/debian/init.d	2005-09-10 22:59:17.000000000 +0800
@@ -1,12 +1,12 @@
 #!/bin/sh
 #
 # collectd	Initscript for collectd
 #		http://verplant.org/collectd/
 # Author:	Florian Forster <octo@verplant.org>
-# Version:	1.0
+# Version:	2.0.0
 #
 
 set -e
 
 PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
 DESC="Statistics collection daemon"
@@ -25,13 +25,13 @@
 
 if [ -n "$DATA_DIR" ]; then
 	ARGS="-d $DATA_DIR"
 fi
 
 if [ -n "$PING_HOST" ]; then
-	ARGS="$ARGS -P $PING_HOST"
+	ARGS="$ARGS -p $PING_HOST"
 fi
 	
 
 #
 #	Function that starts the daemon/service.
 #
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/debian: manpages
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/debian/rules /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/debian/rules
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/debian/rules	2005-07-09 06:13:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/debian/rules	2005-09-10 22:26:34.000000000 +0800
@@ -86,13 +86,13 @@
 #	dh_installemacsen
 #	dh_installpam
 #	dh_installmime
 	dh_installinit
 #	dh_installcron
 #	dh_installinfo
-#	dh_installman
+	dh_installman
 	dh_link
 	dh_strip
 	dh_compress
 	dh_fixperms
 #	dh_perl
 #	dh_python
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/README /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/README
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/README	2005-09-02 03:26:00.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/README	2005-09-10 20:55:35.000000000 +0800
@@ -51,12 +51,14 @@
   * collectd needs to run as user root, since only root can craft ICMP
     packages needed to ping other hosts. collectd should NOT be installed
     setui root since it can be used to overwrite valuable files..
 
   * Sample scripts to generate graphs reside in `contrib/' in the source
     package or somewhere near `/usr/share/doc/collectd' in most distributions.
+    Please be aware that those script are meant as a starting point for your
+    own experiments..
 
   * The RRD-files that collectd creates hold the following data. Use ``rrdtool
     resize'' if you want to cover longer/shorter periods of time.
 
     Resolution | Data points |  Timespan
     -----------+-------------+----------
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src: collectd.1
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/collectd.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/collectd.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/collectd.c	2005-08-28 17:36:12.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/collectd.c	2005-09-10 21:44:27.000000000 +0800
@@ -72,12 +72,37 @@
 		return (-1);
 	}
 
 	return (0);
 }
 
+void init_all (void)
+{
+#if COLLECT_CPU
+	cpu_init ();
+#endif
+#if COLLECT_DISK
+	diskstats_init ();
+#endif
+#if COLLECT_LOAD
+	load_init ();
+#endif
+#if COLLECT_MEMORY
+	mem_init ();
+#endif
+#if COLLECT_PING
+	ping_init ();
+#endif
+#if COLLECT_SENSORS
+	collectd_sensors_init ();
+#endif
+#if COLLECT_TRAFFIC
+	traffic_init ();
+#endif
+} /* init_all */
+
 #ifdef HAVE_LIBKSTAT
 void update_kstat (void)
 {
 	if (kc == NULL)
 	{
 		if ((kc = kstat_open ()) == NULL)
@@ -85,13 +110,16 @@
 	}
 	else
 	{
 		kid_t kid;
 		kid = kstat_chain_update (kc);
 		if (kid > 0)
+		{
 			syslog (LOG_INFO, "kstat chain has been updated");
+			init_all ();
+		}
 		else if (kid < 0)
 			syslog (LOG_ERR, "kstat chain update failed");
 		/* else: everything works as expected */
 	}
 
 	return;
@@ -101,181 +129,74 @@
 void exit_usage (char *name)
 {
 	printf ("Usage: %s [OPTIONS]\n\n"
 			
 			"Available options:\n"
 			"  General:\n"
-			"    -d <dir>        Base directory to use\n"
-			"                    Default: /var/lib/collectd\n\n"
-
-#if COLLECT_CPU
-			"  CPU:\n"
-			"    -c <file>       RRD filename-template for CPU accounting\n"
-			"                    Default: cpu%%d.rrd\n\n"
-#endif
-#if COLLECT_DISK
-			"  Diskstats:\n"
-			"    -k <file>       RRD filename-template for disk accounting\n"
-			"                    Default: disk-%%s.rrd\n"
-			"    -K <file>       RRD filename-template for partition accounting\n"
-			"                    Default: partition-%%s.rrd\n\n"
-#endif /* COLLECT_DISK */
-#if COLLECT_LOAD
-			"  Load:\n"
-			"    -l <file>       RRD file for load accounting\n"
-			"                    Default: load.rrd\n\n"
-#endif
-#if COLLECT_MEMORY
-			"  Memory:\n"
-			"    -m <file>       RRD file for memory accounting\n"
-			"                    Default: meminfo.rrd\n\n"
-#endif /* COLLECT_MEMORY */
+			"    -d <dir>        Base directory to use. Default: /var/lib/collectd\n"
 #if COLLECT_PING
 			"  Ping:\n"
-			"    -p <file>       RRD file for ping accounting\n"
-			"                    Default: ping.rrd\n"
-			"    -P <host>       Host to ping periodically\n"
-			"                    Default: default gateway\n\n"
+			"    -p <host>       Host to ping periodically, may be repeated to ping\n"
+			"                    more than one host.\n"
 #endif /* COLLECT_PING */
-#if COLLECT_SENSORS
-			"  Sensors:\n"
-			"    -s <file>       RRD filename-template for lm_sensors accounting\n"
-			"                    Default: sensors-%%s.rrd\n\n"
-#endif
-#if COLLECT_TRAFFIC
-			"  Traffic:\n"
-			"    -t <file>       RRD filename-template for traffic accounting\n"
-			"                    Default: traffic-%%s.rrd\n\n"
-#endif
-			
-			"%s %s, http://verplant.org/collectd/\n"
+			"\nAvailable modules:\n"
+			"  CPU:       %s\n"
+			"  Disk:      %s\n"
+			"  Load:      %s\n"
+			"  Memory:    %s\n"
+			"  Ping:      %s\n"
+			"  Sensors:   %s\n"
+			"  Traffic:   %s\n"
+			"\n%s %s, http://verplant.org/collectd/\n"
 			"by Florian octo Forster <octo@verplant.org>\n",
-			PACKAGE, PACKAGE, VERSION);
+			PACKAGE,
+			(COLLECT_CPU     ? "yes" : "no"),
+			(COLLECT_DISK    ? "yes" : "no"),
+			(COLLECT_LOAD    ? "yes" : "no"),
+			(COLLECT_MEMORY  ? "yes" : "no"),
+			(COLLECT_PING    ? "yes" : "no"),
+			(COLLECT_SENSORS ? "yes" : "no"),
+			(COLLECT_TRAFFIC ? "yes" : "no"),
+			PACKAGE, VERSION);
 	exit (0);
 }
 
 int main (int argc, char **argv)
 {
 	int sleepingtime;
 	struct sigaction sigIntAction, sigChldAction;
 	pid_t pid;
 	
-#if COLLECT_CPU
-	char *cpu_file = NULL;
-#endif
-#if COLLECT_DISK
-	char *disk_file = NULL;
-	char *partition_file = NULL;
-#endif
-#if COLLECT_LOAD
-	char *load_file = NULL;
-#endif
-#if COLLECT_MEMORY
-	char *mem_file = NULL;
-#endif /* COLLECT_MEMORY */
-#if COLLECT_PING
-	char *ping_file = NULL;
-	char *ping_host = NULL;
-#endif /* COLLECT_PING */
-#if COLLECT_TRAFFIC
-	char *traffic_file = NULL;
-	char *traffic_device = NULL;
-#endif
-#if COLLECT_SENSORS
-	char *sensors_file = NULL;
-#endif
-
 	memset (basedir, '\0', PATH_MAX);
 	
 	openlog (PACKAGE, LOG_CONS | LOG_PID, LOG_DAEMON);
 
 	while (1)
 	{
 		int c;
 
 		c = getopt (argc, argv, "d:"
-#if COLLECT_CPU
-				"c:"
-#endif
-#if COLLECT_DISK
-				"k:K:"
-#endif
-#if COLLECT_LOAD
-				"l:"
-#endif
-#if COLLECT_MEMORY
-				"m:"
-#endif /* COLLECT_MEMORY */
 #if COLLECT_PING
-				"p:P:"
+				"p:"
 #endif /* COLLECT_PING */
-#if COLLECT_SENSORS
-				"s:"
-#endif
-#if COLLECT_TRAFFIC
-				"t:T:"
-#endif
 				"h");
 
 		if (c == -1)
 			break;
 
 		switch (c)
 		{
-#if COLLECT_CPU
-			case 'c':
-				cpu_file = optarg;
-				break;
-#endif
 			case 'd':
 				if (change_basedir (optarg) != 0)
 					exit (1);
 				break;
-
-#if COLLECT_DISK
-			case 'k':
-				disk_file = optarg;
-				break;
-
-			case 'K':
-				partition_file = optarg;
-				break;
-#endif
-#if COLLECT_LOAD
-			case 'l':
-				load_file = optarg;
-				break;
-#endif
-#if COLLECT_MEMORY
-			case 'm':
-				mem_file = optarg;
-				break;
-#endif /* COLLECT_MEMORY */
 #if COLLECT_PING
 			case 'p':
-				ping_file = optarg;
-				break;
-
-			case 'P':
-				ping_host = optarg;
+				ping_add_host (optarg);
 				break;
 #endif /* COLLECT_PING */
-#if COLLECT_SENSORS
-			case 's':
-				sensors_file = optarg;
-				break;
-#endif
-#if COLLECT_TRAFFIC
-			case 't':
-				traffic_file = optarg;
-				break;
-
-			case 'T':
-				traffic_device = optarg;
-				break;
-#endif
 			case 'h':
 			default:
 				exit_usage (argv[0]);
 		}
 				
 	}
@@ -300,33 +221,13 @@
 	{
 		syslog (LOG_ERR, "sg_drop_privileges: %s", sg_str_error (sg_get_error ()));
 		exit (2);
 	}
 #endif
 
-#if COLLECT_CPU
-	cpu_init (cpu_file);
-#endif
-#if COLLECT_DISK
-	diskstats_init (disk_file, partition_file);
-#endif
-#if COLLECT_LOAD
-	load_init (load_file);
-#endif
-#if COLLECT_MEMORY
-	mem_init (mem_file);
-#endif /* COLLECT_MEMORY */
-#if COLLECT_PING
-	ping_init (ping_file, ping_host);
-#endif /* COLLECT_PING */
-#if COLLECT_SENSORS
-	collectd_sensors_init (sensors_file);
-#endif
-#if COLLECT_TRAFFIC
-	traffic_init (traffic_file);
-#endif
+	init_all ();
 
 	sigIntAction.sa_handler = sigIntHandler;
 	sigaction (SIGINT, &sigIntAction, NULL);
 
 	sigChldAction.sa_handler = sigChldHandler;
 	sigaction (SIGCHLD, &sigChldAction, NULL);
@@ -365,16 +266,16 @@
 #endif
 #if COLLECT_LOAD
 		load_update ();
 #endif
 #if COLLECT_MEMORY
 		mem_update ();
-#endif /* COLLECT_MEMORY */
+#endif
 #if COLLECT_PING
 		ping_update ();
-#endif /* COLLECT_PING */
+#endif
 #if COLLECT_SENSORS
 		sensors_update ();
 #endif
 #if COLLECT_TRAFFIC
 		traffic_update ();
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/config.h.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/config.h.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/config.h.in	2005-09-02 03:39:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/config.h.in	2005-09-10 22:12:12.000000000 +0800
@@ -48,12 +48,15 @@
 /* Define to 1 if you have the `devinfo' library (-ldevinfo). */
 #undef HAVE_LIBDEVINFO
 
 /* Define to 1 if you have the `kstat' library (-lkstat). */
 #undef HAVE_LIBKSTAT
 
+/* Define to 1 if you have the `m' library (-lm). */
+#undef HAVE_LIBM
+
 /* Define to 1 if you have the `nsl' library (-lnsl). */
 #undef HAVE_LIBNSL
 
 /* Define to 1 if you have the `resolv' library (-lresolv). */
 #undef HAVE_LIBRESOLV
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/cpu.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/cpu.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/cpu.c	2005-08-28 18:00:43.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/cpu.c	2005-09-10 22:14:30.000000000 +0800
@@ -4,64 +4,73 @@
 
 #ifdef HAVE_LIBKSTAT
 /* colleague tells me that Sun doesn't sell systems with more than 100 or so CPUs.. */
 #define MAX_NUMCPU 256
 extern kstat_ctl_t *kc;
 static kstat_t *ksp[MAX_NUMCPU];
-static int numcpu = 0;
+static int numcpu;
 #endif /* HAVE_LIBKSTAT */
 
-static char *cpu_file = "cpu%d.rrd";
+static char *cpu_file = "cpu-%d.rrd";
 
 static char *ds_def[] =
 {
 	"DS:user:COUNTER:25:0:100",
 	"DS:nice:COUNTER:25:0:100",
 	"DS:syst:COUNTER:25:0:100",
 	"DS:idle:COUNTER:25:0:100",
+	"DS:wait:COUNTER:25:0:100",
 	NULL
 };
-static int ds_num = 4;
+static int ds_num = 5;
 
-void cpu_init (char *new_cpu_file)
+void cpu_init (void)
 {
 #ifdef HAVE_LIBKSTAT
 	kstat_t *ksp_chain;
 
+	numcpu = 0;
+
+	if (kc == NULL)
+		return;
+
 	/* Solaris doesn't count linear.. *sigh* */
 	for (numcpu = 0, ksp_chain = kc->kc_chain;
 			(numcpu < MAX_NUMCPU) && (ksp_chain != NULL);
 			ksp_chain = ksp_chain->ks_next)
 		if (strncmp (ksp_chain->ks_module, "cpu_stat", 8) == 0)
 			ksp[numcpu++] = ksp_chain;
 #endif
 
-	if (new_cpu_file != NULL)
-		cpu_file = new_cpu_file;
+	return;
 }
 
-void rrd_update_cpu (int cpu, long user, long nice, long syst, long idle)
+void rrd_update_cpu (int cpu, unsigned long long user, unsigned long long nice, unsigned long long syst,
+		unsigned long long idle, unsigned long long wait)
 {
 	char filename[64];
-	char buffer[64];
+	char buffer[256];
 
 	if (snprintf (filename, 64, cpu_file, cpu) < 1)
 		return;
+	filename[63] = '\0';
 
-	if (snprintf (buffer, 64, "N:%ld:%ld:%ld:%ld", user, nice, syst, idle) < 1)
+	if (snprintf (buffer, 256, "N:%llu:%llu:%llu:%llu:%llu", user, nice,
+				syst, idle, wait) < 1)
 		return;
+	buffer[255] = '\0';
 
 	rrd_update_file (filename, buffer, ds_def, ds_num);
 }
 
 int cpu_update (void)
 {
-	int cpu;
-	long user, nice, syst, idle;
-
 #ifdef KERNEL_LINUX
+	int cpu;
+	unsigned long long user, nice, syst, idle;
+	unsigned long long wait, intr, sitr; /* sitr == soft interrupt */
 	FILE *fh;
 	char buffer[1024];
 
 	char *fields[64];
 	int numfields;
 
@@ -80,40 +89,58 @@
 
 		numfields = strsplit (buffer, fields, 64);
 		if (numfields < 5)
 			continue;
 
 		cpu = atoi (fields[0] + 3);
-		user = atol (fields[1]);
-		nice = atol (fields[2]);
-		syst = atol (fields[3]);
-		idle = atol (fields[4]);
+		user = atoll (fields[1]);
+		nice = atoll (fields[2]);
+		syst = atoll (fields[3]);
+		idle = atoll (fields[4]);
+
+		if (numfields >= 8)
+		{
+			wait = atoll (fields[5]);
+			intr = atoll (fields[6]);
+			sitr = atoll (fields[7]);
+
+			/* I doubt anyone cares about the time spent in
+			 * interrupt handlers.. */
+			syst += intr + sitr;
+		}
+		else
+		{
+			wait = 0LL;
+		}
 
-		rrd_update_cpu (cpu, user, nice, syst, idle);
+		rrd_update_cpu (cpu, user, nice, syst, idle, wait);
 	}
 
 	fclose (fh);
 /* #endif defined(KERNEL_LINUX) */
 
 #elif defined(HAVE_LIBKSTAT)
+	int cpu;
+	unsigned long long user, syst, idle, wait;
 	static cpu_stat_t cs;
 
 	if (kc == NULL)
 		return (1);
 
 	for (cpu = 0; cpu < numcpu; cpu++)
 	{
 		if (kstat_read (kc, ksp[cpu], &cs) == -1)
 			continue; /* error message? */
 
-		idle = (long) cs.cpu_sysinfo.cpu[CPU_IDLE];
-		user = (long) cs.cpu_sysinfo.cpu[CPU_USER];
-		syst = (long) cs.cpu_sysinfo.cpu[CPU_KERNEL];
-		nice = (long) cs.cpu_sysinfo.cpu[CPU_WAIT]; /* FIXME */
+		idle = (unsigned long long) cs.cpu_sysinfo.cpu[CPU_IDLE];
+		user = (unsigned long long) cs.cpu_sysinfo.cpu[CPU_USER];
+		syst = (unsigned long long) cs.cpu_sysinfo.cpu[CPU_KERNEL];
+		wait = (unsigned long long) cs.cpu_sysinfo.cpu[CPU_WAIT];
 
-		rrd_update_cpu (ksp[cpu]->ks_instance, user, nice, syst, idle);
+		rrd_update_cpu (ksp[cpu]->ks_instance,
+				user, 0LL, syst, idle, wait);
 	}
 #endif /* defined(HAVE_LIBKSTAT) */
 
 	return (0);
 }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/cpu.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/cpu.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/cpu.h	2005-09-02 00:01:40.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/cpu.h	2005-09-08 03:49:14.000000000 +0800
@@ -15,11 +15,11 @@
 #if COLLECT_CPU
 
 #ifdef HAVE_LIBKSTAT
 #include <sys/sysinfo.h>
 #endif /* HAVE_LIBKSTAT */
 
-void cpu_init (char *);
+void cpu_init (void);
 int  cpu_update (void);
 
 #endif /* COLLECT_CPU */
 #endif /* CPU_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/diskstats.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/diskstats.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/diskstats.c	2005-08-29 01:33:00.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/diskstats.c	2005-09-10 22:25:25.000000000 +0800
@@ -1,11 +1,28 @@
 #include "diskstats.h"
 
 #if COLLECT_DISK
 
-#ifdef HAVE_LIBKSTAT
+#ifdef KERNEL_LINUX
+typedef struct diskstats
+{
+	char *name;
+
+	unsigned int read_sectors;
+	unsigned int write_sectors;
+
+	unsigned long long read_bytes;
+	unsigned long long write_bytes;
+
+	struct diskstats *next;
+} diskstats_t;
+
+static diskstats_t *disklist;
+/* KERNEL_LINUX */
+
+#elif defined(HAVE_LIBKSTAT)
 #define MAX_NUMDISK 256
 extern kstat_ctl_t *kc;
 static kstat_t *ksp[MAX_NUMDISK];
 static int numdisk = 0;
 #endif /* HAVE_LIBKSTAT */
 
@@ -13,37 +30,42 @@
 static char *part_filename_template = "partition-%s.rrd";
 
 static char *disk_ds_def[] =
 {
 	"DS:rcount:COUNTER:25:0:U",
 	"DS:rmerged:COUNTER:25:0:U",
-	"DS:rsectors:COUNTER:25:0:U",
+	"DS:rbytes:COUNTER:25:0:U",
 	"DS:rtime:COUNTER:25:0:U",
 	"DS:wcount:COUNTER:25:0:U",
 	"DS:wmerged:COUNTER:25:0:U",
-	"DS:wsectors:COUNTER:25:0:U",
+	"DS:wbytes:COUNTER:25:0:U",
 	"DS:wtime:COUNTER:25:0:U",
 	NULL
 };
 static int disk_ds_num = 8;
 
 static char *part_ds_def[] =
 {
 	"DS:rcount:COUNTER:25:0:U",
-	"DS:rsector:COUNTER:25:0:U",
+	"DS:rbytes:COUNTER:25:0:U",
 	"DS:wcount:COUNTER:25:0:U",
-	"DS:wsector:COUNTER:25:0:U",
+	"DS:wbytes:COUNTER:25:0:U",
 	NULL
 };
 static int part_ds_num = 4;
 
-void diskstats_init (char *new_disk_file, char *new_part_file)
+void diskstats_init (void)
 {
 #ifdef HAVE_LIBKSTAT
 	kstat_t *ksp_chain;
 
+	numdisk = 0;
+
+	if (kc == NULL)
+		return;
+
 	for (numdisk = 0, ksp_chain = kc->kc_chain;
 			(numdisk < MAX_NUMDISK) && (ksp_chain != NULL);
 			ksp_chain = ksp_chain->ks_next)
 	{
 		if (strncmp (ksp_chain->ks_class, "disk", 4)
 				&& strncmp (ksp_chain->ks_class, "partition", 9))
@@ -51,56 +73,59 @@
 		if (ksp_chain->ks_type != KSTAT_TYPE_IO)
 			continue;
 		ksp[numdisk++] = ksp_chain;
 	}
 #endif
 
-	if (new_disk_file != NULL)
-		disk_filename_template = new_disk_file;
-	if (new_part_file != NULL)
-		part_filename_template = new_part_file;
+	return;
 }
 
 void disk_update_rrd (char *disk_name,
-		long long read_count,
-		long long read_merged,
-		long long read_sectors,
-		long long read_time,
-		long long write_count,
-		long long write_merged,
-		long long write_sectors,
-		long long write_time)
+		unsigned long long read_count,
+		unsigned long long read_merged,
+		unsigned long long read_bytes,
+		unsigned long long read_time,
+		unsigned long long write_count,
+		unsigned long long write_merged,
+		unsigned long long write_bytes,
+		unsigned long long write_time)
 {
 	char buffer[1024];
 	char filename[1024];
 
-	snprintf (filename, 1024, disk_filename_template, disk_name);
+	if (snprintf (filename, 1024, disk_filename_template, disk_name) < 1)
+		return;
 	filename[1023] = '\0';
 
-	snprintf (buffer, 1024, "N:%lli:%lli:%lli:%lli:%lli:%lli:%lli:%lli",
-			read_count, read_merged, read_sectors, read_time,
-			write_count, write_merged, write_sectors, write_time);
+	if (snprintf (buffer, 1024,
+				"N:%llu:%llu:%llu:%llu:%llu:%llu:%llu:%llu",
+				read_count, read_merged, read_bytes, read_time,
+				write_count, write_merged, write_bytes,
+				write_time) < 1)
+		return;
 	buffer[1023] = '\0';
 
 	rrd_update_file (filename, buffer, disk_ds_def, disk_ds_num);
 }
 
 void part_update_rrd (char *part_name,
-		long long read_count,
-		long long read_sectors,
-		long long write_count,
-		long long write_sectors)
+		unsigned long long read_count,
+		unsigned long long read_bytes,
+		unsigned long long write_count,
+		unsigned long long write_bytes)
 {
 	char buffer[1024];
 	char filename[1024];
 
-	snprintf (filename, 1024, part_filename_template, part_name);
+	if (snprintf (filename, 1024, part_filename_template, part_name) < 1)
+		return;
 	filename[1023] = '\0';
 
-	snprintf (buffer, 1024, "N:%lli:%lli:%lli:%lli", read_count,
-			read_sectors, write_count, write_sectors);
+	if (snprintf (buffer, 1024, "N:%llu:%llu:%llu:%llu", read_count,
+				read_bytes, write_count, write_bytes) < 1)
+		return;
 	buffer[1023] = '\0';
 
 	rrd_update_file (filename, buffer, part_ds_def, part_ds_num);
 }
 
 int diskstats_update (void)
@@ -114,22 +139,27 @@
 	int numfields;
 	int fieldshift = 0;
 
 	int major = 0;
 	int minor = 0;
 
-	long long read_count    = 0;
-	long long read_merged   = 0;
-	long long read_sectors  = 0;
-	long long read_time     = 0;
-	long long write_count   = 0;
-	long long write_merged  = 0;
-	long long write_sectors = 0;
-	long long write_time    = 0;
+	unsigned int read_sectors;
+	unsigned int write_sectors;
+
+	unsigned long long read_count    = 0;
+	unsigned long long read_merged   = 0;
+	unsigned long long read_bytes    = 0;
+	unsigned long long read_time     = 0;
+	unsigned long long write_count   = 0;
+	unsigned long long write_merged  = 0;
+	unsigned long long write_bytes   = 0;
+	unsigned long long write_time    = 0;
 	int is_disk = 0;
 
+	diskstats_t *ds, *pre_ds;
+
 	if ((fh = fopen ("/proc/diskstats", "r")) == NULL)
 	{
 		if ((fh = fopen ("/proc/partitions", "r")) == NULL)
 			return (1);
 
 		/* Kernel is 2.4.* */
@@ -143,49 +173,93 @@
 		if ((numfields != (14 + fieldshift)) && (numfields != 7))
 			continue;
 
 		major = atoll (fields[0]);
 		minor = atoll (fields[1]);
 
+		if (snprintf (disk_name, 128, "%i-%i", major, minor) < 1)
+			continue;
+		disk_name[127] = '\0';
+
+		for (ds = disklist, pre_ds = disklist; ds != NULL; pre_ds = ds, ds = ds->next)
+			if (strcmp (disk_name, ds->name) == 0)
+				break;
+
+		if (ds == NULL)
+		{
+			if ((ds = (diskstats_t *) calloc (1, sizeof (diskstats_t))) == NULL)
+				continue;
+
+			if ((ds->name = strdup (disk_name)) == NULL)
+			{
+				free (ds);
+				continue;
+			}
+
+			if (pre_ds == NULL)
+				disklist = ds;
+			else
+				pre_ds->next = ds;
+		}
+
 		is_disk = 0;
 		if (numfields == 7)
 		{
 			/* Kernel 2.6, Partition */
 			read_count    = atoll (fields[3]);
-			read_sectors  = atoll (fields[4]);
+			read_sectors  = atoi  (fields[4]);
 			write_count   = atoll (fields[5]);
-			write_sectors = atoll (fields[6]);
+			write_sectors = atoi  (fields[6]);
 		}
 		else if (numfields == (14 + fieldshift))
 		{
-			read_count    = atoll (fields[3 + fieldshift]);
-			read_sectors  = atoll (fields[5 + fieldshift]);
-			write_count   = atoll (fields[7 + fieldshift]);
-			write_sectors = atoll (fields[9 + fieldshift]);
+			read_count  =  atoll (fields[3 + fieldshift]);
+			write_count =  atoll (fields[7 + fieldshift]);
+
+			read_sectors  = atoi (fields[5 + fieldshift]);
+			write_sectors = atoi (fields[9 + fieldshift]);
 
 			if ((fieldshift == 0) || (minor == 0))
 			{
 				is_disk = 1;
-				read_merged   = atoll (fields[4 + fieldshift]);
-				read_time     = atoll (fields[6 + fieldshift]);
-				write_merged  = atoll (fields[8 + fieldshift]);
-				write_time    = atoll (fields[10+ fieldshift]);
+				read_merged  = atoll (fields[4 + fieldshift]);
+				read_time    = atoll (fields[6 + fieldshift]);
+				write_merged = atoll (fields[8 + fieldshift]);
+				write_time   = atoll (fields[10+ fieldshift]);
 			}
 		}
+		else
+		{
+			continue;
+		}
+
+
+		if (read_sectors >= ds->read_sectors)
+			ds->read_bytes += 512 * (read_sectors - ds->read_sectors);
+		else
+			ds->read_bytes += 512 * ((UINT_MAX - ds->read_sectors) + read_sectors);
+
+		if (write_sectors >= ds->write_sectors)
+			ds->write_bytes += 512 * (write_sectors - ds->write_sectors);
+		else
+			ds->write_bytes += 512 * ((UINT_MAX - ds->write_sectors) + write_sectors);
+
+		ds->read_sectors  = read_sectors;
+		ds->write_sectors = write_sectors;
+		read_bytes  = ds->read_bytes;
+		write_bytes = ds->write_bytes;
+
 
 		if ((read_count == 0) && (write_count == 0))
 			continue;
 
-		snprintf (disk_name, 128, "%i-%i", major, minor);
-		disk_name[127] = '\0';
-
 		if (is_disk)
-			disk_update_rrd (disk_name, read_count, read_merged, read_sectors, read_time,
-					write_count, write_merged, write_sectors, write_time);
+			disk_update_rrd (disk_name, read_count, read_merged, read_bytes, read_time,
+					write_count, write_merged, write_bytes, write_time);
 		else
-			part_update_rrd (disk_name, read_count, read_sectors, write_count, write_sectors);
+			part_update_rrd (disk_name, read_count, read_bytes, write_count, write_bytes);
 	}
 
 	fclose (fh);
 /* #endif defined(KERNEL_LINUX) */
 
 #elif defined(HAVE_LIBKSTAT)
@@ -199,13 +273,13 @@
 	{
 		if (kstat_read (kc, ksp[i], &kio) == -1)
 			continue;
 
 		if (strncmp (ksp[i]->ks_class, "disk", 4) == 0)
 			disk_update_rrd (ksp[i]->ks_name,
-					kio.reads,  0LL, kio.nread,   kio.rtime,
+					kio.reads,  0LL, kio.nread,    kio.rtime,
 					kio.writes, 0LL, kio.nwritten, kio.wtime);
 		else if (strncmp (ksp[i]->ks_class, "partition", 9) == 0)
 			part_update_rrd (ksp[i]->ks_name,
 					kio.reads, kio.nread,
 					kio.writes,kio.nwritten);
 	}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/diskstats.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/diskstats.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/diskstats.h	2005-09-02 00:16:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/diskstats.h	2005-09-08 03:49:14.000000000 +0800
@@ -11,11 +11,11 @@
 #define COLLECT_DISK 0
 #endif
 #endif /* !defined(COLLECT_DISK) */
 
 #if COLLECT_DISK
 
-void diskstats_init (char *new_disk_file, char *new_part_file);
+void diskstats_init (void);
 int diskstats_update (void);
 
 #endif /* COLLECT_DISK */
 #endif /* DISKSTATS_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/echo.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/echo.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/echo.c	2005-07-09 01:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/echo.c	2005-09-04 17:57:18.000000000 +0800
@@ -27,45 +27,23 @@
 #include <echo.h>
 #include <util.h>
 #include <stdlib.h>
 #include <stdio.h>  
 #include <errno.h>
 #include <setup.h>
+#include <string.h>
 
-#define MAXLINE  81921
-
-int
-myecho( ECHODATA *E )
-{
-  CONN *C;               /* threadsafe connection */
-  int ret;               /* return conditional    */
-  struct timeval mytime;
- 
-  C = (CONN*)xmalloc( sizeof( CONN )); 
-  C->port    = 7; 
-  C->timeout = ( E->timeout == 0 )?60:E->timeout;  
+#include "memory.h"
 
-  (void) gettimeofday( &mytime, (struct timezone *)NULL);  
-
-  if(( C->sock = JOEsocket( C, E->hostname )) < 0 ){
-    return -1;
-  }
-
-  ret = send_data( C, E->bytes );
-  
-  E->rtt = elapsed_time( &mytime );
-  return ret;
-}
+#define MAXLINE  81921
 
 int 
 send_data( CONN *C, int bytes )
 {
   char buf[MAXLINE];
   char rec[MAXLINE];
-  char c;
-  int  len;
   int  ret;
   int  x, n;
 
   bytes = (bytes>MAXLINE-3)?MAXLINE-3:bytes;
 
   memset( buf, 0, bytes+3 );
@@ -89,29 +67,50 @@
   }
   else
     return -1;
 }
 
 int
+myecho( ECHODATA *E )
+{
+  CONN *C;               /* threadsafe connection */
+  int ret;               /* return conditional    */
+  struct timeval mytime;
+ 
+  C = (CONN*)xmalloc( sizeof( CONN )); 
+  C->port    = 7; 
+  C->timeout = ( E->timeout == 0 )?60:E->timeout;  
+
+  (void) gettimeofday( &mytime, (struct timezone *)NULL);  
+
+  if(( C->sock = JOEsocket( C, E->hostname )) < 0 ){
+    return -1;
+  }
+
+  ret = send_data( C, E->bytes );
+  
+  E->rtt = elapsed_time( &mytime );
+  return ret;
+}
+
+int
 echohost( const char *hostname, int b )
 {
   ECHODATA *E;
-  int ret;
  
   E = (ECHODATA*)xmalloc( sizeof( ECHODATA ));
   E->hostname = (char*)strdup( hostname );
   E->bytes   = b;
   E->timeout = 0;  
   return ( myecho( E ));
 }
  
 int
 echothost( const char *hostname, int b, int t )
 {
   ECHODATA *E;
-  int ret;
  
   E = (ECHODATA*)xmalloc( sizeof( ECHODATA ));
   E->hostname = (char*)strdup( hostname );
   E->bytes   = b;
   E->timeout = t; 
  
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/http.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/http.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/http.c	2005-07-09 01:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/http.c	2005-09-04 17:57:18.000000000 +0800
@@ -30,21 +30,22 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include <errno.h>
 #include <string.h>
 #include <setup.h>
 
+#include "memory.h"
+
 #define MAXFILE 10240
 
 int
 myhttp( HTTPDATA *H )
 {
   CONN    *C;    /* threadsafe connection */
   URL     U;     /* defined in url.h      */
   HEADERS *head; /* HTTP header structure */ 
-  int     ret;   /* return conditional    */
   int     bytes; /* bytes read from srv.  */
   char    *tmp;  /* tmp storage for url   */
   struct  timeval mytime; 
 
   tmp = strdup( H->url ); 
   U = add_url( tmp );
@@ -281,26 +282,24 @@
 }
 
 int
 pinghttp( char *hostname )
 {
   HTTPDATA *H;
-  int ret;
  
   H = (HTTPDATA*)xmalloc( sizeof( HTTPDATA ));
   H->url     = (char*)strdup( hostname );
   H->timeout = 0;
  
   return( myhttp( H )); 
 }
  
 int
 pingthttp( char *hostname, int t )
 {
   HTTPDATA *H;
-  int ret;
  
   H = (HTTPDATA*)xmalloc( sizeof( HTTPDATA ));
   H->url     = (char*)strdup( hostname );
   H->timeout = t;
  
   return( myhttp( H )); 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/Makefile.am	2005-08-18 20:50:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/Makefile.am	2005-09-04 18:06:39.000000000 +0800
@@ -18,18 +18,12 @@
 ## along with this program; if not, write to the Free Software
 ## Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 ##
 
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
-INCLUDES           =
-
-LDFLAGS            =
-
-LIBS               =
- 
 noinst_LTLIBRARIES    = libping.la 
  
 libping_la_LDFLAGS = -version-info 1:0:0
 
 libping_la_SOURCES =  \
 echo.c     echo.h     \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/Makefile.in	2005-09-02 03:38:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/Makefile.in	2005-09-10 22:11:50.000000000 +0800
@@ -97,15 +97,15 @@
 F77 = @F77@
 FFLAGS = @FFLAGS@
 INSTALL_DATA = @INSTALL_DATA@
 INSTALL_PROGRAM = @INSTALL_PROGRAM@
 INSTALL_SCRIPT = @INSTALL_SCRIPT@
 INSTALL_STRIP_PROGRAM = @INSTALL_STRIP_PROGRAM@
-LDFLAGS = 
+LDFLAGS = @LDFLAGS@
 LIBOBJS = @LIBOBJS@
-LIBS = 
+LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@
 LN_S = @LN_S@
 LTLIBOBJS = @LTLIBOBJS@
 MAKEINFO = @MAKEINFO@
 OBJEXT = @OBJEXT@
 PACKAGE = @PACKAGE@
@@ -161,13 +161,12 @@
 program_transform_name = @program_transform_name@
 sbindir = @sbindir@
 sharedstatedir = @sharedstatedir@
 sysconfdir = @sysconfdir@
 target_alias = @target_alias@
 AUTOMAKE_OPTIONS = foreign no-dependencies
-INCLUDES = 
 noinst_LTLIBRARIES = libping.la 
 libping_la_LDFLAGS = -version-info 1:0:0
 libping_la_SOURCES = \
 echo.c     echo.h     \
 http.c     http.h     \
 memory.c   memory.h   \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/memory.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/memory.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/memory.c	2005-07-09 01:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/memory.c	2005-09-04 17:57:18.000000000 +0800
@@ -16,13 +16,15 @@
  *
  * You should have received a copy of the GNU General Public License
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
  *
  */
+#include <stdio.h>
 #include <memory.h>
+#include <strings.h>
 
 /**
  * xrealloc    replaces realloc
  */
 void * 
 xrealloc( void *object, size_t size )
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/ping.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/ping.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/ping.c	2005-07-09 01:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/ping.c	2005-09-04 17:57:18.000000000 +0800
@@ -95,13 +95,13 @@
 send_ping( const char *host, struct sockaddr_in *taddr, struct ping_priv * datum )
 {
   int len;
   int ss;
   unsigned char buf[ HDRLEN + DATALEN ];
 
-  const  proto_buf_len = 1024;
+  const int proto_buf_len = 1024;
   char   proto_buf[proto_buf_len];
   struct protoent *proto = NULL;
   struct protoent proto_datum;
 
   struct hostent  *hp = NULL;
   struct hostent  hent;
@@ -204,18 +204,16 @@
   return 0;
 }
 
 static int 
 recv_ping( struct sockaddr_in *taddr, struct ping_priv * datum )
 {
-  int response;
   int len;
-  int from;
+  socklen_t from;
   int nf, cc;
   unsigned char buf[ HDRLEN + DATALEN ];
-  struct ip          *ip;
   struct icmp        *icp;
   struct sockaddr_in faddr;
   struct timeval to;
   fd_set readset;
 
   to.tv_sec = datum->timo / 100000;
@@ -262,13 +260,12 @@
   return 0;
 }
 
 int 
 myping( const char *hostname, int t , struct ping_priv * datum)
 {
-  int to;
   int err;
   int rrt;
   struct sockaddr_in sa;
   struct timeval mytime;
  
   datum->ident = getpid() & 0xFFFF;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/pop3.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/pop3.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/pop3.c	2005-07-09 01:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/pop3.c	2005-09-04 17:57:18.000000000 +0800
@@ -28,12 +28,13 @@
 #endif/*HAVE_CONFIG_H*/
 
 #include <sock.h>
 #include <util.h>
 #include <stdlib.h>
 #include <stdio.h>
+#include <string.h>
  
 #ifdef HAVE_SYS_TIMES_H
 # include <sys/times.h>
 #endif /*HAVE_SYS_TIMES_H*/
 #if TIME_WITH_SYS_TIME
 # include <sys/time.h>
@@ -46,23 +47,23 @@
 # endif
 #endif /*TIME_WITH_SYS_TIME*/ 
 
 #include <signal.h>
 #include <setjmp.h> 
 
+#include "memory.h"
+
 #define MSGBUF  1024
 
 int send_cmd( CONN *C, char *cmd, char *val );
 
 int
 mypop3( POP3DATA *P )
 {
   CONN *C;
   char buf[MSGBUF];
-  int x;
-  int len  = 0;
   int ret  = 0;
   struct timeval mytime;
 
   C = (CONN*)xmalloc( sizeof( CONN ));
   C->port    =   110;
   C->timeout = ( P->timeout == 0 )?60:P->timeout; 
@@ -91,13 +92,12 @@
 
 int
 send_cmd( CONN *C, char *cmd, char *val )
 {
   char buf[256];
   char rec[MSGBUF];
-  int  len;
 
   if( val )
     snprintf( buf, sizeof( buf ), "%s %s\r\n", cmd, val );
   else
     snprintf( buf, sizeof( buf ), "%s\r\n", cmd );
 
@@ -115,13 +115,12 @@
 }
 
 int 
 pingpop3( const char *hostname )
 {
   POP3DATA *P;
-  int ret;
  
   P = (POP3DATA*)xmalloc( sizeof( POP3DATA ));
   P->hostname = (char*)strdup( hostname );
   P->timeout = 0;
  
   return mypop3( P );
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/smtp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/smtp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/smtp.c	2005-07-09 01:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/smtp.c	2005-09-04 17:57:18.000000000 +0800
@@ -27,12 +27,13 @@
 #include <sock.h>
 #include <smtp.h>
 #include <util.h> 
 #include <stdarg.h>
 #include <stdlib.h>
 #include <stdio.h>
+#include <string.h>
 
 #ifdef HAVE_SYS_TIMES_H
 # include <sys/times.h>
 #endif /*HAVE_SYS_TIMES_H*/
 #if TIME_WITH_SYS_TIME
 # include <sys/time.h>
@@ -41,12 +42,14 @@
 # if HAVE_SYS_TIME_H
 #  include <sys/time.h>
 # else
 #  include <time.h>
 # endif
 #endif /*TIME_WITH_SYS_TIME*/
+
+#include "memory.h"
  
 #define  MSGBUF 2048 
 
 int smtp_cmd( CONN *C, char *format, ... ); 
 
 int
@@ -78,13 +81,12 @@
 int
 smtp_cmd( CONN *C, char *format, ... )
 {
   va_list args;
   char buf[MSGBUF];
   char rec[MSGBUF];
-  int  len;
   int  ret;
   
   bzero( buf, sizeof( buf ));
   bzero( rec, sizeof( rec));  
 
   va_start( args, format );
@@ -110,26 +112,24 @@
 }
 
 int 
 pingsmtp( const char *hostname )
 {
   SMTPDATA *S;
-  int ret;
  
   S = (SMTPDATA*)xmalloc( sizeof( SMTPDATA ));
   S->hostname = (char*)strdup( hostname );
   S->timeout = 0;
  
   return mysmtp( S );
 }
 
 int 
 pingtsmtp( const char *hostname, int t )
 {
   SMTPDATA *S;
-  int ret;
  
   S = (SMTPDATA*)xmalloc( sizeof( SMTPDATA ));
   S->hostname = (char*)strdup( hostname );
   S->timeout = t;
  
   return mysmtp( S );
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/sock.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/sock.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/sock.c	2005-07-09 01:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/sock.c	2005-09-04 17:57:18.000000000 +0800
@@ -20,12 +20,13 @@
  * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
  */
 #ifdef  HAVE_CONFIG_H
 # include <config.h>
 #endif/*HAVE_CONFIG_H*/
 
+#include <stdio.h>
 #include <sock.h>
 #include <fcntl.h>
 
 #ifdef  HAVE_ARPA_INET_H
 # include <arpa/inet.h>
 #endif/*HAVE_ARPA_INET_H*/
@@ -39,14 +40,19 @@
 #endif/*HAVE_NETINET_IN_H*/
  
 #ifdef  HAVE_NETDB_H
 # include <netdb.h>
 #endif/*HAVE_NETDB_H*/
 
+#ifdef  HAVE_SSL
+# include <openssl/rand.h>
+#endif/*HAVE_SSL */
+
 #include <setup.h>
 #include <errno.h>
+#include <string.h>
 
 /** 
  * local prototypes 
  */
 int mknblock( int socket, int nonblock );
 ssize_t socket_write( int sock, const void *vbuf, size_t len );  
@@ -57,34 +63,36 @@
  * returns int, socket handle
  */
 int
 JOEsocket( CONN *C, const char *hn )
 {
   int conn;
-  int serr; 
-  fd_set rs, ws;
   struct timeval timeout;
   int res;
   int herrno;
   int error;
   socklen_t          len;
   struct linger      ling;
   struct sockaddr_in cli; 
   struct hostent     *hp;
   struct hostent     hent; 
+  char hbf[9000]; 
+
 #if defined(_AIX)
   char *aixbuf;
   int  rc;
 #endif/*_AIX*/ 
-  char buf[1024]; 
-  char hbf[9000]; 
-  C->sock = -1;
+
 #ifdef  HAVE_SSL
+  int serr; 
+  char buf[1024]; 
   C->ssl  = NULL;
   C->ctx  = NULL;
 #endif/*HAVE_SSL*/
+
+  C->sock = -1;
   
   if( C->prot == HTTPS ){
     #ifdef HAVE_SSL
       SSL_load_error_strings();
       SSLeay_add_ssl_algorithms();
       C->ctx = SSL_CTX_new( SSLv3_client_method());
@@ -302,17 +310,20 @@
   }
   retval = fcntl( sock, F_SETFL, flags);
   if( retval < 0 ){
     perror("fcntl");
     return -1;
   } 
+  return retval;
 #elif defined( FIONBIO )
   ioctl_t status;
  
   status = nb ? 1 : 0;
   return ioctl( sd, FIONBIO, &status );
+#else
+  return -1;
 #endif
 }  
 
 /**
  * local function
  * returns ssize_t
@@ -345,17 +356,17 @@
  * returns ssize_t
  * writes vbuf to sock
  */
 ssize_t
 ssl_socket_write( CONN *C, const void *vbuf, size_t len )
 {
+#ifdef HAVE_SSL
   size_t      n;
   ssize_t     w;
   const char *buf;
 
-#ifdef HAVE_SSL
   buf = vbuf;
   n   = len;
   while( n > 0 ){
     if(( w = SSL_write( C->ssl, buf, n )) <= 0 ){
       if( errno == EINTR )
         w = 0;
@@ -385,13 +396,12 @@
   return( n > 0 );
 } 
 
 ssize_t
 JOEsocket_read( CONN *C, void *vbuf, size_t len )
 {
-  int type;
   size_t      n;
   ssize_t     r;
   char *buf;
   
   buf = vbuf;
   n   = len;
@@ -433,13 +443,12 @@
  * socket_write wrapper function.
  */
 int
 JOEsocket_write( CONN *C, const void *buf, size_t len )
 {
   int bytes;
-  int type;
 
   if( C->prot == HTTPS ){
     /* handle HTTPS protocol */
     #ifdef HAVE_SSL
     if(( bytes = ssl_socket_write( C, buf, len )) != len ){
       perror( "JOEssl_socket_write: ERROR" );
@@ -466,14 +475,12 @@
  * frees ssl resources if using ssl and
  * closes the connection and the socket.
  */
 void
 JOEclose( CONN *C )
 {
-  int type;
-
   #ifdef  HAVE_SSL
     if( C->prot == HTTPS ){
       SSL_shutdown( C->ssl );
     }
     SSL_free( C->ssl );
     SSL_CTX_free( C->ctx );
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/url.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/url.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/libping/url.c	2005-07-09 01:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/libping/url.c	2005-09-04 17:57:18.000000000 +0800
@@ -23,12 +23,13 @@
 #ifdef  HAVE_CONFIG_H
 # include <config.h>
 #endif/*HAVE_CONFIG_H*/
  
 #include <stdio.h>
 #include <stdlib.h>
+#include <ctype.h>
 #ifdef STDC_HEADERS
 # include <string.h>
 #else
 # ifndef HAVE_STRCHR
 #  define strchr index
 #  define strrchr rindex
@@ -221,19 +222,18 @@
  * populates URL->postdata with POST information
  * returns int
  */
 char *
 process_post_data( char *datap )
 {
-  char *post_data;
-
   for( ; isspace(*datap); datap++ ){
     /* Advance past white space */
   }
   if( *datap == '<' ){
     /* Get Data from file */
+    return NULL;
   }
   else{
     return datap;
   }
 }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/load.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/load.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/load.c	2005-08-29 22:27:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/load.c	2005-09-08 03:49:14.000000000 +0800
@@ -14,20 +14,20 @@
 static int ds_num = 3;
 
 #ifdef HAVE_LIBKSTAT
 static kstat_t *ksp;
 #endif /* HAVE_LIBKSTAT */
 
-void load_init (char *new_load_file)
+void load_init (void)
 {
-	if (new_load_file != NULL)
-		load_file = new_load_file;
-
 #ifdef KERNEL_SOLARIS
-	ksp = NULL;
+	if (get_kstat (&ksp, "unix", 0, "system_misc"))
+		ksp = NULL;
 #endif /* KERNEL_SOLARIS */
+
+	return;
 }
 
 void rrd_update_load (double snum, double mnum, double lnum)
 {
 	char buffer[64];
 
@@ -36,15 +36,14 @@
 
 	rrd_update_file (load_file, buffer, ds_def, ds_num);
 }
 
 int load_update (void)
 {
-	double snum, mnum, lnum;
-
 #ifdef KERNEL_LINUX
+	double snum, mnum, lnum;
 	FILE *loadavg;
 	char buffer[16];
 
 	char *fields[8];
 	int numfields;
 	
@@ -68,37 +67,44 @@
 	if (numfields < 3)
 		return (1);
 
 	snum = atof (fields[0]);
 	mnum = atof (fields[1]);
 	lnum = atof (fields[2]);
+
+	rrd_update_load (snum, mnum, lnum);
 /* #endif KERNEL_LINUX */
 
 #elif defined(HAVE_LIBKSTAT)
-	if (get_kstat (&ksp, "unix", 0, "system_misc"))
-		return (1);
+	double snum, mnum, lnum;
+
+	if (ksp == NULL)
+		return (0);
 
 	snum = ((double) get_kstat_value (ksp, "avenrun_1min")) / FSCALE;
 	mnum = ((double) get_kstat_value (ksp, "avenrun_5min")) / FSCALE;
 	lnum = ((double) get_kstat_value (ksp, "avenrun_15min")) / FSCALE;
 
 	if ((snum < 0) || (mnum < 0) || (lnum < 0))
 		return (1);
+
+	rrd_update_load (snum, mnum, lnum);
 /* #endif HAVE_LIBKSTAT */
 
 #elif defined(HAVE_LIBSTATGRAB)
+	double snum, mnum, lnum;
 	sg_load_stats *ls;
 
 	if ((ls = sg_get_load_stats ()) == NULL)
 		return (1);
 
 	snum = ls->min1;
 	mnum = ls->min5;
 	lnum = ls->min15;
-#endif /* HAVE_LIBSTATGRAB */
 
 	rrd_update_load (snum, mnum, lnum);
+#endif /* HAVE_LIBSTATGRAB */
 
 	return (0);
 }
 
 #endif /* COLLECT_LOAD */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/load.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/load.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/load.h	2005-09-02 00:17:08.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/load.h	2005-09-08 03:49:14.000000000 +0800
@@ -11,11 +11,11 @@
 #define COLLECT_LOAD 0
 #endif
 #endif /* !defined(COLLECT_LOAD) */
 
 #if COLLECT_LOAD
 
-void load_init (char *);
+void load_init (void);
 int load_update (void);
 
 #endif /* COLLECT_LOAD */
 #endif /* LOAD_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/Makefile.am	2005-07-17 17:21:59.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/Makefile.am	2005-09-10 22:09:21.000000000 +0800
@@ -13,10 +13,13 @@
 		   traffic.c traffic.h
 
 collectd_LDADD = libping/libping.la
 
 collectd_DEPENDENCIES = libping/libping.la
 
-install-exec-hook:
-	chown 0    $(DESTDIR)$(sbindir)/collectd
-	chgrp 0    $(DESTDIR)$(sbindir)/collectd
-	chmod 0755 $(DESTDIR)$(sbindir)/collectd
+EXTRA_DIST = collectd.1
+
+instmandir = $(mandir)/man1
+instman_DATA = collectd.1
+
+.pod.1:
+	pod2man --release=$(VERSION) --center=$(PACKAGE) $< >$@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/Makefile.in	2005-09-02 03:38:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/Makefile.in	2005-09-10 22:11:50.000000000 +0800
@@ -44,13 +45,13 @@
 am__aclocal_m4_deps = $(top_srcdir)/configure.in
 am__configure_deps = $(am__aclocal_m4_deps) $(CONFIGURE_DEPENDENCIES) \
 	$(ACLOCAL_M4)
 mkinstalldirs = $(install_sh) -d
 CONFIG_HEADER = config.h $(top_builddir)/src/libping/config.h
 CONFIG_CLEAN_FILES =
-am__installdirs = "$(DESTDIR)$(sbindir)"
+am__installdirs = "$(DESTDIR)$(sbindir)" "$(DESTDIR)$(instmandir)"
 sbinPROGRAMS_INSTALL = $(INSTALL_PROGRAM)
 PROGRAMS = $(sbin_PROGRAMS)
 am_collectd_OBJECTS = collectd.$(OBJEXT) common.$(OBJEXT) \
 	cpu.$(OBJEXT) diskstats.$(OBJEXT) load.$(OBJEXT) \
 	meminfo.$(OBJEXT) ping.$(OBJEXT) sensors.$(OBJEXT) \
 	traffic.$(OBJEXT)
@@ -71,12 +72,20 @@
 RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
 	html-recursive info-recursive install-data-recursive \
 	install-exec-recursive install-info-recursive \
 	install-recursive installcheck-recursive installdirs-recursive \
 	pdf-recursive ps-recursive uninstall-info-recursive \
 	uninstall-recursive
+am__vpath_adj_setup = srcdirstrip=`echo "$(srcdir)" | sed 's|.|.|g'`;
+am__vpath_adj = case $$p in \
+    $(srcdir)/*) f=`echo "$$p" | sed "s|^$$srcdirstrip/||"`;; \
+    *) f=$$p;; \
+  esac;
+am__strip_dir = `echo $$p | sed -e 's|^.*/||'`;
+instmanDATA_INSTALL = $(INSTALL_DATA)
+DATA = $(instman_DATA)
 ETAGS = etags
 CTAGS = ctags
 DIST_SUBDIRS = $(SUBDIRS)
 DISTFILES = $(DIST_COMMON) $(DIST_SOURCES) $(TEXINFOS) $(EXTRA_DIST)
 ACLOCAL = @ACLOCAL@
 AMDEP_FALSE = @AMDEP_FALSE@
@@ -184,17 +193,20 @@
 		   ping.c ping.h \
 		   sensors.c sensors.h \
 		   traffic.c traffic.h
 
 collectd_LDADD = libping/libping.la
 collectd_DEPENDENCIES = libping/libping.la
+EXTRA_DIST = collectd.1
+instmandir = $(mandir)/man1
+instman_DATA = collectd.1
 all: config.h
 	$(MAKE) $(AM_MAKEFLAGS) all-recursive
 
 .SUFFIXES:
-.SUFFIXES: .c .lo .o .obj
+.SUFFIXES: .1 .c .lo .o .obj .pod
 $(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
 	@for dep in $?; do \
 	  case '$(am__configure_deps)' in \
 	    *$$dep*) \
 	      cd $(top_builddir) && $(MAKE) $(AM_MAKEFLAGS) am--refresh \
 		&& exit 0; \
@@ -313,12 +325,29 @@
 clean-libtool:
 	-rm -rf .libs _libs
 
 distclean-libtool:
 	-rm -f libtool
 uninstall-info-am:
+install-instmanDATA: $(instman_DATA)
+	@$(NORMAL_INSTALL)
+	test -z "$(instmandir)" || $(mkdir_p) "$(DESTDIR)$(instmandir)"
+	@list='$(instman_DATA)'; for p in $$list; do \
+	  if test -f "$$p"; then d=; else d="$(srcdir)/"; fi; \
+	  f=$(am__strip_dir) \
+	  echo " $(instmanDATA_INSTALL) '$$d$$p' '$(DESTDIR)$(instmandir)/$$f'"; \
+	  $(instmanDATA_INSTALL) "$$d$$p" "$(DESTDIR)$(instmandir)/$$f"; \
+	done
+
+uninstall-instmanDATA:
+	@$(NORMAL_UNINSTALL)
+	@list='$(instman_DATA)'; for p in $$list; do \
+	  f=$(am__strip_dir) \
+	  echo " rm -f '$(DESTDIR)$(instmandir)/$$f'"; \
+	  rm -f "$(DESTDIR)$(instmandir)/$$f"; \
+	done
 
 # This directory's subdirectories are mostly independent; you can cd
 # into them and run `make' without going through this Makefile.
 # To change the values of `make' variables: instead of editing Makefiles,
 # (1) if the variable is set in `config.status', edit `config.status'
 #     (which will cause the Makefiles to be regenerated when you run `make');
@@ -490,16 +519,16 @@
 	        distdir) \
 	      || exit 1; \
 	  fi; \
 	done
 check-am: all-am
 check: check-recursive
-all-am: Makefile $(PROGRAMS) config.h
+all-am: Makefile $(PROGRAMS) $(DATA) config.h
 installdirs: installdirs-recursive
 installdirs-am:
-	for dir in "$(DESTDIR)$(sbindir)"; do \
+	for dir in "$(DESTDIR)$(sbindir)" "$(DESTDIR)$(instmandir)"; do \
 	  test -z "$$dir" || $(mkdir_p) "$$dir"; \
 	done
 install: install-recursive
 install-exec: install-exec-recursive
 install-data: install-data-recursive
 uninstall: uninstall-recursive
@@ -541,17 +570,15 @@
 html: html-recursive
 
 info: info-recursive
 
 info-am:
 
-install-data-am:
+install-data-am: install-instmanDATA
 
 install-exec-am: install-sbinPROGRAMS
-	@$(NORMAL_INSTALL)
-	$(MAKE) $(AM_MAKEFLAGS) install-exec-hook
 
 install-info: install-info-recursive
 
 install-man:
 
 installcheck-am:
@@ -571,34 +598,33 @@
 pdf-am:
 
 ps: ps-recursive
 
 ps-am:
 
-uninstall-am: uninstall-info-am uninstall-sbinPROGRAMS
+uninstall-am: uninstall-info-am uninstall-instmanDATA \
+	uninstall-sbinPROGRAMS
 
 uninstall-info: uninstall-info-recursive
 
 .PHONY: $(RECURSIVE_TARGETS) CTAGS GTAGS all all-am check check-am \
 	clean clean-generic clean-libtool clean-recursive \
 	clean-sbinPROGRAMS ctags ctags-recursive distclean \
 	distclean-compile distclean-generic distclean-hdr \
 	distclean-libtool distclean-recursive distclean-tags distdir \
 	dvi dvi-am html html-am info info-am install install-am \
 	install-data install-data-am install-exec install-exec-am \
-	install-exec-hook install-info install-info-am install-man \
+	install-info install-info-am install-instmanDATA install-man \
 	install-sbinPROGRAMS install-strip installcheck \
 	installcheck-am installdirs installdirs-am maintainer-clean \
 	maintainer-clean-generic maintainer-clean-recursive \
 	mostlyclean mostlyclean-compile mostlyclean-generic \
 	mostlyclean-libtool mostlyclean-recursive pdf pdf-am ps ps-am \
 	tags tags-recursive uninstall uninstall-am uninstall-info-am \
-	uninstall-sbinPROGRAMS
+	uninstall-instmanDATA uninstall-sbinPROGRAMS
 
 
-install-exec-hook:
-	chown 0    $(DESTDIR)$(sbindir)/collectd
-	chgrp 0    $(DESTDIR)$(sbindir)/collectd
-	chmod 0755 $(DESTDIR)$(sbindir)/collectd
+.pod.1:
+	pod2man --release=$(VERSION) --center=$(PACKAGE) $< >$@
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/meminfo.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/meminfo.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/meminfo.c	2005-09-02 00:32:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/meminfo.c	2005-09-08 03:49:14.000000000 +0800
@@ -16,23 +16,22 @@
 
 #ifdef HAVE_LIBKSTAT
 static int pagesize;
 static kstat_t *ksp;
 #endif /* HAVE_LIBKSTAT */
 
-
-void mem_init (char *new_mem_file)
+void mem_init (void)
 {
 #ifdef HAVE_LIBKSTAT
 	/* getpagesize(3C) tells me this does not fail.. */
 	pagesize = getpagesize ();
-	get_kstat (&ksp, "unix", 0, "system_pages");
+	if (get_kstat (&ksp, "unix", 0, "system_pages"))
+		ksp = NULL;
 #endif /* HAVE_LIBKSTAT */
 
-	if (new_mem_file != NULL)
-		mem_file = new_mem_file;
+	return;
 }
 
 void mem_update_rrd (long long mem_used, long long mem_buffered,
 		long long mem_cached, long long mem_free)
 {
 	char buffer[1024];
@@ -100,13 +99,13 @@
 #elif defined(HAVE_LIBKSTAT)
 	long long mem_used;
 	long long mem_free;
 	long long mem_lock;
 
 	if (ksp == NULL)
-		return (1);
+		return (0);
 
 	mem_used = get_kstat_value (ksp, "pagestotal");
 	mem_free = get_kstat_value (ksp, "pagesfree");
 	mem_lock = get_kstat_value (ksp, "pageslocked");
 
 	if ((mem_used < 0LL) || (mem_free < 0LL) || (mem_lock < 0LL))
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/meminfo.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/meminfo.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/meminfo.h	2005-09-02 00:21:57.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/meminfo.h	2005-09-08 03:49:14.000000000 +0800
@@ -11,11 +11,11 @@
 #define COLLECT_MEMORY 0
 #endif
 #endif /* !defined(COLLECT_MEMORY) */
 
 #if COLLECT_MEMORY
 
-void mem_init (char *mem_file);
+void mem_init (void);
 int mem_update (void);
  
 #endif /* COLLECT_MEMORY */
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/ping.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/ping.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/ping.c	2005-09-02 00:26:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/ping.c	2005-09-08 03:49:14.000000000 +0800
@@ -2,150 +2,103 @@
 
 #if COLLECT_PING
 
 #include <netinet/in.h>
 #include "libping/ping.h"
 
-static char *ping_host;
-static char *ping_file = "ping.rrd";
+#define MAX_PING_HOST 32
+static char *ping_host[MAX_PING_HOST];
+static int   ping_err[MAX_PING_HOST];
+static int   num_ping_host = 0;
+
+static char *file_template = "ping-%s.rrd";
 
 static char *ds_def[] = 
 {
 	"DS:ping:GAUGE:25:0:65535",
 	NULL
 };
 static int ds_num = 1;
 
-void ping_get_gateway (void)
+void ping_init (void)
 {
-#ifdef KERNEL_LINUX
-	FILE *fh;
-	
-	char buffer[1024];
-	long int temp_gate;
-
-	char *fields[8];
-	int numfields;
-
-	ping_host = NULL;
-
-	if ((fh = fopen ("/proc/net/route", "r")) == NULL)
-	{
-		syslog (LOG_ERR, "ping: fopen: %s", strerror (errno));
-		return;
-	}
-
-	if ((ping_host = (char *) malloc (sizeof (char) * 16)) == NULL)
-	{
-		syslog (LOG_ERR, "ping: malloc: %s", strerror (errno));
-		return;
-	}
-	memset (ping_host, '\0', 16);
-
-	while (*ping_host == '\0')
-	{
-		if (fgets (buffer, 1024, fh) == NULL)
-		{
-			free (ping_host);
-			ping_host = NULL;
-			return;
-		}
-
-		numfields = strsplit (buffer, fields, 8);
-		if (numfields < 3)
-			continue;
-		
-		if (strncmp (fields[1], "00000000", 8))
-			continue;
-
-		temp_gate = ntohl (strtol (fields[2], NULL, 16));
-		snprintf (ping_host, 15, "%lu.%lu.%lu.%lu",
-				(temp_gate & 0xff000000) >> 24,
-				(temp_gate & 0x00ff0000) >> 16,
-				(temp_gate & 0x0000ff00) >>  8,
-				(temp_gate & 0x000000ff));
-	}
-		
-	fclose (fh);
-#else
-	ping_host = NULL;
-#endif
+	return;
 }
 
-void ping_init (char *new_ping_file, char *new_ping_host)
+int ping_add_host (char *host)
 {
-	if (new_ping_host != NULL)
-	{
-		ping_host = new_ping_host;
-		syslog (LOG_INFO, "ping: Pinging ``%s''", ping_host);
-	}
-	else
-	{
-		ping_get_gateway ();
-		if (ping_host != NULL)
-			syslog (LOG_INFO, "ping: Pinging default gateway ``%s''", ping_host);
-		else
-			syslog (LOG_WARNING, "ping: Could not find default gateway");
-	}
+	if (num_ping_host >= MAX_PING_HOST)
+		return (-1);
 
-	if (new_ping_file != NULL)
-		ping_file = new_ping_file;
+	if (host == NULL)
+		return (-2);
+
+	ping_host[num_ping_host] = host;
+	ping_err[num_ping_host] = 0x00;
+
+	return (num_ping_host++);
 }
 
-void ping_update_rrd (int ping_time)
+void ping_update_rrd (int ping_time, char *host)
 {
 	char buffer[16];
+	char filename[256];
 
 	snprintf (buffer, 16, "N:%u", ping_time);
+	buffer[15] = '\0';
+
+	if (snprintf (filename, 256, file_template, host) < 0)
+		return;
+	filename[255] = '\0';
 
-	rrd_update_file (ping_file, buffer, ds_def, ds_num);
+	rrd_update_file (filename, buffer, ds_def, ds_num);
 }
 
 int ping_update (void)
 {
 	int ping;
-	static int errorflags = 0x00;
+	int i;
 
-	if (ping_host == NULL)
-		errorflags |= 0x20;
-
-	if (errorflags & 0x30)
-		return (1);
-
-	ping = tpinghost (ping_host);
-
-	switch (ping)
+	for (i = 0; i < num_ping_host; i++)
 	{
-		case 0:
-			if (!(errorflags & 0x01))
-				syslog (LOG_WARNING, "ping: Connection timed out.");
-			errorflags |= 0x01;
-			break;
-
-		case -1:
-			if (!(errorflags & 0x02))
-				syslog (LOG_WARNING, "ping: Host or service is not reachable.");
-			errorflags |= 0x02;
-			break;
-
-		case -2:
-			syslog (LOG_ERR, "ping: Socket error. Ping will be disabled.");
-			errorflags |= 0x10;
-			break;
-
-		case -3:
-			if (!(errorflags & 0x04))
-				syslog (LOG_WARNING, "ping: Connection refused.");
-			errorflags |= 0x04;
-			break;
-
-		default:
-			if (errorflags != 0x00)
-				syslog (LOG_NOTICE, "ping: Back to normal: %ims.", ping);
-			errorflags = 0x00;
-			ping_update_rrd (ping);
-	}
+		if (ping_err[i] & 0x30)
+			continue;
+		
+		ping = tpinghost (ping_host[i]);
+
+		switch (ping)
+		{
+			case 0:
+				if (!(ping_err[i] & 0x01))
+					syslog (LOG_WARNING, "ping %s: Connection timed out.", ping_host[i]);
+				ping_err[i] |= 0x01;
+				break;
+
+			case -1:
+				if (!(ping_err[i] & 0x02))
+					syslog (LOG_WARNING, "ping %s: Host or service is not reachable.", ping_host[i]);
+				ping_err[i] |= 0x02;
+				break;
+
+			case -2:
+				syslog (LOG_ERR, "ping %s: Socket error. Ping will be disabled.", ping_host[i]);
+				ping_err[i] |= 0x10;
+				break;
+
+			case -3:
+				if (!(ping_err[i] & 0x04))
+					syslog (LOG_WARNING, "ping %s: Connection refused.", ping_host[i]);
+				ping_err[i] |= 0x04;
+				break;
+
+			default:
+				if (ping_err[i] != 0x00)
+					syslog (LOG_NOTICE, "ping %s: Back to normal: %ims.", ping_host[i], ping);
+				ping_err[i] = 0x00;
+				ping_update_rrd (ping, ping_host[i]);
+		} /* switch (ping) */
+	} /* for (i = 0; i < num_ping_host; i++) */
 
 	return (0);
 }
 
 #endif /* COLLECT_PING */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/ping.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/ping.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/ping.h	2005-09-02 00:32:03.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/ping.h	2005-09-08 03:49:14.000000000 +0800
@@ -9,11 +9,12 @@
 #define COLLECT_PING 1
 #endif /* defined(HAVE_NETINET_IN_H) */
 #endif /* !defined(COLLECT_PING) */
 
 #if COLLECT_PING
 
-void ping_init (char *ping_file, char *ping_host);
-int ping_update (void);
+void ping_init     (void);
+int  ping_add_host (char *);
+int  ping_update   (void);
 
 #endif /* COLLECT_PING */
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/sensors.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/sensors.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/sensors.c	2005-09-01 21:13:45.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/sensors.c	2005-09-08 03:49:14.000000000 +0800
@@ -17,26 +17,36 @@
 {
 	"DS:value:GAUGE:25:U:U",
 	NULL
 };
 static int ds_num = 1;
 
-void collectd_sensors_init (char *filename)
+void collectd_sensors_init (void)
 {
 	FILE *fh;
 	featurelist_t *last_feature = NULL;
 	featurelist_t *new_feature;
 	
 	const sensors_chip_name *chip;
 	int chip_num;
 
 	const sensors_feature_data *data;
 	int data_num0, data_num1;
 	
-	if (filename != NULL)
-		filename_format = filename;
+	new_feature = first_feature;
+	while (new_feature != NULL)
+	{
+		last_feature = new_feature->next;
+		free (new_feature);
+		new_feature = last_feature;
+	}
+
+#ifdef assert
+	assert (new_feature == NULL);
+	assert (last_feature == NULL);
+#endif
 
 	if ((fh = fopen ("/etc/sensors.conf", "r")) == NULL)
 		return;
 
 	if (sensors_init (fh))
 	{
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/sensors.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/sensors.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/sensors.h	2005-09-02 03:32:58.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/sensors.h	2005-09-08 03:49:14.000000000 +0800
@@ -18,11 +18,11 @@
 #endif /* !defined(COLLECT_SENSORS) */
 
 #if COLLECT_SENSORS
 
 #include <sensors/sensors.h>
 
-void collectd_sensors_init (char *);
+void collectd_sensors_init (void);
 int  sensors_update (void);
 
 #endif /* COLLECT_SENSORS */
 #endif /* SENSORS_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/traffic.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/traffic.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/traffic.c	2005-08-29 23:15:40.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/traffic.c	2005-09-08 23:29:18.000000000 +0800
@@ -16,18 +16,23 @@
 	"DS:incoming:COUNTER:25:0:U",
 	"DS:outgoing:COUNTER:25:0:U",
 	NULL
 };
 static int ds_num = 2;
 
-void traffic_init (char *new_traffic_file)
+void traffic_init (void)
 {
 #ifdef HAVE_LIBKSTAT
 	kstat_t *ksp_chain;
 	kstat_named_t *kn;
-	long long val;
+	unsigned long long val;
+
+	numif = 0;
+
+	if (kc == NULL)
+		return;
 
 	for (numif = 0, ksp_chain = kc->kc_chain;
 			(numif < MAX_NUMIF) && (ksp_chain != NULL);
 			ksp_chain = ksp_chain->ks_next)
 	{
 		if (strncmp (ksp_chain->ks_class, "net", 3))
@@ -38,18 +43,17 @@
 			continue;
 		if ((val = get_kstat_value (ksp_chain, "obytes")) == -1LL)
 			continue;
 		ksp[numif++] = ksp_chain;
 	}
 #endif /* HAVE_LIBKSTAT */
-
-	if (new_traffic_file != NULL)
-		traffic_filename_template = new_traffic_file;
 }
 
-void traffic_update_rrd (char *device, long long incoming, long long outgoing)
+void traffic_update_rrd (char *device,
+		unsigned long long incoming,
+		unsigned long long outgoing)
 {
 	char buffer[128];
 	char filename[128];
 
 	if (snprintf (filename, 128, traffic_filename_template, device) < 1)
 		return;
@@ -62,13 +66,13 @@
 
 int traffic_update (void)
 {
 #ifdef KERNEL_LINUX
 	FILE *fh;
 	char buffer[1024];
-	long long incoming, outgoing;
+	unsigned long long incoming, outgoing;
 	char *device;
 	
 	char *dummy;
 	char *fields[16];
 	int numfields;
 
@@ -105,13 +109,13 @@
 
 	fclose (fh);
 /* #endif KERNEL_LINUX */
 
 #elif defined(HAVE_LIBKSTAT)
 	int i;
-	long long incoming, outgoing;
+	unsigned long long incoming, outgoing;
 
 	if (kc == NULL)
 		return (1);
 
 	for (i = 0; i < numif; i++)
 	{
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/traffic.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/traffic.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/src/traffic.h	2005-09-02 00:19:32.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/src/traffic.h	2005-09-08 03:49:14.000000000 +0800
@@ -11,11 +11,11 @@
 #define COLLECT_TRAFFIC 0
 #endif
 #endif /* !defined(COLLECT_TRAFFIC) */
 
 #if COLLECT_TRAFFIC
 
-void traffic_init (char *traffic_file);
+void traffic_init (void);
 int traffic_update (void);
 
 #endif /* COLLECT_TRAFFIC */
 #endif /* TRAFFIC_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/TODO /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/TODO
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-1.8.1/TODO	2005-09-02 02:41:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-2.0.0/TODO	2005-09-09 19:50:18.000000000 +0800
@@ -1,5 +1,2 @@
 For version 2.*:
-* Change CPU rrd layout: Add DS for wait-io, maybe swap and others..
-* Change diskstats rrd layout: Remove `sectors' and replace with `bytes'. Find
-  out how to calculate bytes from sectors under Linux
-* Ping multiple hosts
+* Write manpage
