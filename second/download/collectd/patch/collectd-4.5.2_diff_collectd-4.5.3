diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/bindings/perl/Collectd/Unixsock.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/bindings/perl/Collectd/Unixsock.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/bindings/perl/Collectd/Unixsock.pm	2009-01-03 05:39:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/bindings/perl/Collectd/Unixsock.pm	2009-02-23 02:30:51.000000000 +0800
@@ -284,13 +284,27 @@
 	if (!ref ($args{'values'}))
 	{
 		$values = $args{'values'};
 	}
 	else
 	{
-		my $time = $args{'time'} ? $args{'time'} : time ();
+		my $time;
+
+		if ("ARRAY" ne ref ($args{'values'}))
+		{
+			cluck ("Invalid `values' argument (expected an array ref)");
+			return;
+		}
+
+		if (! scalar @{$args{'values'}})
+		{
+			cluck ("Empty `values' array");
+			return;
+		}
+
+		$time = $args{'time'} ? $args{'time'} : time ();
 		$values = join (':', $time, map { defined ($_) ? $_ : 'U' } (@{$args{'values'}}));
 	}
 
 	$msg = 'PUTVAL '
 	. _escape_argument ($identifier)
 	. $interval
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/ChangeLog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/ChangeLog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/ChangeLog	2009-01-03 06:17:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/ChangeLog	2009-02-23 02:34:27.000000000 +0800
@@ -1,6 +1,18 @@
+2009-02-22, Version 4.5.3
+	* build system: The check for libupsclient even when `pkg-config' is
+	  not available.
+	* collectd: Fix error handling in the global cache.
+	* Collectd::Unixsock: Error handling has been improved.
+	* ascent plugin: Fix a memory leak. Thanks to Bruno Pr√©mont for his
+	  patch.
+	* ipmi plugin: Fix an off-by-one error which could cause segmentation
+	  faults. Thanks to Peter Holik for his patch.
+	* tcpconns plugin: An endianness problem has been fixed in the *BSD
+	  code. Thanks to "thated" for reporting this.
+
 2009-01-02, Version 4.5.2
 	* build system: Check for `mysql.h' and `mysql/mysql.h', since the
 	  file may be in both locations, especially when the database was
 	  installed in a non-standard path. Thanks to Dusty Doris for
 	  reporting this.
 	* build system: Handle the _POSIX_PTHREAD_SEMANTICS defined, needed by
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/configure	2009-01-03 06:19:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/configure	2009-02-23 02:35:05.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.61 for collectd 4.5.2.
+# Generated by GNU Autoconf 2.61 for collectd 4.5.3.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
 ## --------------------- ##
@@ -723,14 +723,14 @@
 MAKEFLAGS=
 SHELL=${CONFIG_SHELL-/bin/sh}
 
 # Identity of this package.
 PACKAGE_NAME='collectd'
 PACKAGE_TARNAME='collectd'
-PACKAGE_VERSION='4.5.2'
-PACKAGE_STRING='collectd 4.5.2'
+PACKAGE_VERSION='4.5.3'
+PACKAGE_STRING='collectd 4.5.3'
 PACKAGE_BUGREPORT=''
 
 ac_unique_file="src/collectd.c"
 ac_default_prefix="/opt/collectd"
 # Factoring default headers for most tests.
 ac_includes_default="\
@@ -1627,13 +1627,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures collectd 4.5.2 to adapt to many kinds of systems.
+\`configure' configures collectd 4.5.3 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -1697,13 +1697,13 @@
   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of collectd 4.5.2:";;
+     short | recursive ) echo "Configuration of collectd 4.5.3:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
@@ -1816,12 +1816,14 @@
   --with-libesmtp[=PREFIX]
                           Path to libesmtp.
   --with-libperl[=PREFIX] Path to libperl.
   --with-libiptc[=PREFIX] Path to libiptc.
   --with-libnetsnmp[=PREFIX]
                           Path to the Net-SNMPD library.
+  --with-libupsclient[=PREFIX]
+                          Path to the Net-SNMPD library.
   --with-libxmms[=PREFIX] Path to libxmms.
   --with-libnetlink[=PREFIX]
                           Path to libnetlink.
   --with-libpq[=PREFIX]   Path to libpq.
   --with-perl-bindings[=OPTIONS]
                           Options passed to "perl Makefile.PL".
@@ -1912,13 +1914,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-collectd configure 4.5.2
+collectd configure 4.5.3
 generated by GNU Autoconf 2.61
 
 Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
@@ -1926,13 +1928,13 @@
   exit
 fi
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by collectd $as_me 4.5.2, which was
+It was created by collectd $as_me 4.5.3, which was
 generated by GNU Autoconf 2.61.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 exec 5>>config.log
@@ -2619,13 +2621,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='collectd'
- VERSION='4.5.2'
+ VERSION='4.5.3'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -6301,13 +6303,13 @@
     esac
   fi
   rm -rf conftest*
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 6307 "configure"' > conftest.$ac_ext
+  echo '#line 6309 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; then
    if test "$lt_cv_prog_gnu_ld" = yes; then
@@ -9123,17 +9125,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9129: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9131: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:9133: \$? = $ac_status" >&5
+   echo "$as_me:9135: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -9413,17 +9415,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9419: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9421: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:9423: \$? = $ac_status" >&5
+   echo "$as_me:9425: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -9517,17 +9519,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9523: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9525: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:9527: \$? = $ac_status" >&5
+   echo "$as_me:9529: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -11894,13 +11896,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 11900 "configure"
+#line 11902 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -11994,13 +11996,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self_static=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 12000 "configure"
+#line 12002 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -14395,17 +14397,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:14401: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:14403: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:14405: \$? = $ac_status" >&5
+   echo "$as_me:14407: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -14499,17 +14501,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:14505: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:14507: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:14509: \$? = $ac_status" >&5
+   echo "$as_me:14511: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -16097,17 +16099,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:16103: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:16105: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:16107: \$? = $ac_status" >&5
+   echo "$as_me:16109: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -16201,17 +16203,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:16207: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:16209: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:16211: \$? = $ac_status" >&5
+   echo "$as_me:16213: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -18421,17 +18423,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18427: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18429: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:18431: \$? = $ac_status" >&5
+   echo "$as_me:18433: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -18711,17 +18713,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18717: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18719: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:18721: \$? = $ac_status" >&5
+   echo "$as_me:18723: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -18815,17 +18817,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18821: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18823: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:18825: \$? = $ac_status" >&5
+   echo "$as_me:18827: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -36153,38 +36155,107 @@
 	LIBNOTIFY_LIBS=$pkg_cv_LIBNOTIFY_LIBS
         { echo "$as_me:$LINENO: result: yes" >&5
 echo "${ECHO_T}yes" >&6; }
 	with_libnotify="yes"
 fi
 
-with_libupsclient="no (pkg-config isn't available)"
+with_libupsclient_config=""
 with_libupsclient_cflags=""
 with_libupsclient_libs=""
-if test "x$PKG_CONFIG" != "x"
-then
-	pkg-config --exists 'libupsclient' 2>/dev/null
-	if test "$?" = "0"
+
+# Check whether --with-libupsclient was given.
+if test "${with_libupsclient+set}" = set; then
+  withval=$with_libupsclient;
+	if test "x$withval" = "xno"
 	then
-		with_libupsclient="yes"
+		with_libupsclient="no"
+	else if test "x$withval" = "xyes"
+	then
+		with_libupsclient="use_pkgconfig"
 	else
+		if test -x "$withval"
+		then
+			with_libupsclient_config="$withval"
+			with_libupsclient="use_libupsclient_config"
+		else if test -x "$withval/bin/libupsclient-config"
+		then
+			with_libupsclient_config="$withval/bin/net-snmp-config"
+			with_libupsclient="use_libupsclient_config"
+		else
+			{ echo "$as_me:$LINENO: Not checking for libupsclient: Manually configured" >&5
+echo "$as_me: Not checking for libupsclient: Manually configured" >&6;}
+			with_libupsclient_cflags="-I$withval/include"
+			with_libupsclient_libs="-L$withval/lib -lupsclient"
+			with_libupsclient="yes"
+		fi; fi
+	fi; fi
+
+else
+  with_libupsclient="use_pkgconfig"
+fi
+
+
+# configure using libupsclient-config
+if test "x$with_libupsclient" = "xuse_libupsclient_config"
+then
+	{ echo "$as_me:$LINENO: Checking for libupsclient using $with_libupsclient_config" >&5
+echo "$as_me: Checking for libupsclient using $with_libupsclient_config" >&6;}
+	with_libupsclient_cflags="`$with_libupsclient_config --cflags`"
+	if test $? -ne 0
+	then
+		with_libupsclient="no ($with_libupsclient_config failed)"
+	fi
+	with_libupsclient_libs="`$with_libupsclient_config --libs`"
+	if test $? -ne 0
+	then
+		with_libupsclient="no ($with_libupsclient_config failed)"
+	fi
+fi
+if test "x$with_libupsclient" = "xuse_libupsclient_config"
+then
+	with_libupsclient="yes"
+fi
+
+# configure using pkg-config
+if test "x$with_libupsclient" = "xuse_pkgconfig"
+then
+	if test "x$PKG_CONFIG" = "x"
+	then
+		with_libupsclient="no (Don't have pkg-config)"
+	fi
+fi
+if test "x$with_libupsclient" = "xuse_pkgconfig"
+then
+	{ echo "$as_me:$LINENO: Checking for libupsclient using $PKG_CONFIG" >&5
+echo "$as_me: Checking for libupsclient using $PKG_CONFIG" >&6;}
+	$PKG_CONFIG --exists 'libupsclient' 2>/dev/null
+	if test $? -ne 0
+	then
 		with_libupsclient="no (pkg-config doesn't know library)"
 	fi
 fi
-if test "x$with_libupsclient" = "xyes"
+if test "x$with_libupsclient" = "xuse_pkgconfig"
 then
-	with_libupsclient_cflags="`pkg-config --cflags 'libupsclient'`"
+	with_libupsclient_cflags="`$PKG_CONFIG --cflags 'libupsclient'`"
 	if test $? -ne 0
 	then
-		with_libupsclient="no"
+		with_libupsclient="no ($PKG_CONFIG failed)"
 	fi
-	with_libupsclient_libs="`pkg-config --libs 'libupsclient'`"
+	with_libupsclient_libs="`$PKG_CONFIG --libs 'libupsclient'`"
 	if test $? -ne 0
 	then
-		with_libupsclient="no"
+		with_libupsclient="no ($PKG_CONFIG failed)"
 	fi
 fi
+if test "x$with_libupsclient" = "xuse_pkgconfig"
+then
+	with_libupsclient="yes"
+fi
+
+# with_libupsclient_cflags and with_libupsclient_libs are set up now, let's do
+# the actual checks.
 if test "x$with_libupsclient" = "xyes"
 then
 	SAVE_CPPFLAGS="$CPPFLAGS"
 	CPPFLAGS="$CPPFLAGS $with_libupsclient_cflags"
 
 
@@ -42374,13 +42445,13 @@
 exec 6>&1
 
 # Save the log message, to keep $[0] and so on meaningful, and to
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by collectd $as_me 4.5.2, which was
+This file was extended by collectd $as_me 4.5.3, which was
 generated by GNU Autoconf 2.61.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -42427,13 +42498,13 @@
 
 Report bugs to <bug-autoconf@gnu.org>."
 
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF
 ac_cs_version="\\
-collectd config.status 4.5.2
+collectd config.status 4.5.3
 configured by $0, generated by GNU Autoconf 2.61,
   with options \\"`echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright (C) 2006 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/configure.in	2009-01-03 06:18:58.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/configure.in	2009-02-23 02:34:48.000000000 +0800
@@ -1891,38 +1891,99 @@
 AM_CONDITIONAL(BUILD_WITH_LIBNETSNMP, test "x$with_libnetsnmp" = "xyes")
 
 PKG_CHECK_MODULES([LIBNOTIFY], [libnotify],
 		[with_libnotify="yes"],
 		[with_libnotify="no ($LIBNOTIFY_PKG_ERRORS)"])
 
-with_libupsclient="no (pkg-config isn't available)"
+with_libupsclient_config=""
 with_libupsclient_cflags=""
 with_libupsclient_libs=""
-if test "x$PKG_CONFIG" != "x"
-then
-	pkg-config --exists 'libupsclient' 2>/dev/null
-	if test "$?" = "0"
+AC_ARG_WITH(libupsclient, [AS_HELP_STRING([--with-libupsclient@<:@=PREFIX@:>@], [Path to the Net-SNMPD library.])],
+[
+	if test "x$withval" = "xno"
+	then
+		with_libupsclient="no"
+	else if test "x$withval" = "xyes"
 	then
-		with_libupsclient="yes"
+		with_libupsclient="use_pkgconfig"
 	else
+		if test -x "$withval"
+		then
+			with_libupsclient_config="$withval"
+			with_libupsclient="use_libupsclient_config"
+		else if test -x "$withval/bin/libupsclient-config"
+		then
+			with_libupsclient_config="$withval/bin/net-snmp-config"
+			with_libupsclient="use_libupsclient_config"
+		else
+			AC_MSG_NOTICE([Not checking for libupsclient: Manually configured])
+			with_libupsclient_cflags="-I$withval/include"
+			with_libupsclient_libs="-L$withval/lib -lupsclient"
+			with_libupsclient="yes"
+		fi; fi
+	fi; fi
+],
+[with_libupsclient="use_pkgconfig"])
+
+# configure using libupsclient-config
+if test "x$with_libupsclient" = "xuse_libupsclient_config"
+then
+	AC_MSG_NOTICE([Checking for libupsclient using $with_libupsclient_config])
+	with_libupsclient_cflags="`$with_libupsclient_config --cflags`"
+	if test $? -ne 0
+	then
+		with_libupsclient="no ($with_libupsclient_config failed)"
+	fi
+	with_libupsclient_libs="`$with_libupsclient_config --libs`"
+	if test $? -ne 0
+	then
+		with_libupsclient="no ($with_libupsclient_config failed)"
+	fi
+fi
+if test "x$with_libupsclient" = "xuse_libupsclient_config"
+then
+	with_libupsclient="yes"
+fi
+
+# configure using pkg-config
+if test "x$with_libupsclient" = "xuse_pkgconfig"
+then
+	if test "x$PKG_CONFIG" = "x"
+	then
+		with_libupsclient="no (Don't have pkg-config)"
+	fi
+fi
+if test "x$with_libupsclient" = "xuse_pkgconfig"
+then
+	AC_MSG_NOTICE([Checking for libupsclient using $PKG_CONFIG])
+	$PKG_CONFIG --exists 'libupsclient' 2>/dev/null
+	if test $? -ne 0
+	then
 		with_libupsclient="no (pkg-config doesn't know library)"
 	fi
 fi
-if test "x$with_libupsclient" = "xyes"
+if test "x$with_libupsclient" = "xuse_pkgconfig"
 then
-	with_libupsclient_cflags="`pkg-config --cflags 'libupsclient'`"
+	with_libupsclient_cflags="`$PKG_CONFIG --cflags 'libupsclient'`"
 	if test $? -ne 0
 	then
-		with_libupsclient="no"
+		with_libupsclient="no ($PKG_CONFIG failed)"
 	fi
-	with_libupsclient_libs="`pkg-config --libs 'libupsclient'`"
+	with_libupsclient_libs="`$PKG_CONFIG --libs 'libupsclient'`"
 	if test $? -ne 0
 	then
-		with_libupsclient="no"
+		with_libupsclient="no ($PKG_CONFIG failed)"
 	fi
 fi
+if test "x$with_libupsclient" = "xuse_pkgconfig"
+then
+	with_libupsclient="yes"
+fi
+
+# with_libupsclient_cflags and with_libupsclient_libs are set up now, let's do
+# the actual checks.
 if test "x$with_libupsclient" = "xyes"
 then
 	SAVE_CPPFLAGS="$CPPFLAGS"
 	CPPFLAGS="$CPPFLAGS $with_libupsclient_cflags"
 
 	AC_CHECK_HEADERS(upsclient.h, [], [with_libupsclient="no (upsclient.h not found)"])
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/contrib/collection.cgi /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/contrib/collection.cgi
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/contrib/collection.cgi	2009-01-03 05:39:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/contrib/collection.cgi	2009-02-18 23:00:13.000000000 +0800
@@ -2609,19 +2609,34 @@
     "LINE1:avg#$FullBlue:Number",
     'GPRINT:min:MIN:%4.1lf Min,',
     'GPRINT:avg:AVERAGE:%4.1lf Avg,',
     'GPRINT:max:MAX:%4.1lf Max,',
     'GPRINT:avg:LAST:%4.1lf Last\l'
     ],
+    virt_cpu_total => ['-v', 'Milliseconds',
+    'DEF:avg_raw={file}:ns:AVERAGE',
+    'DEF:min_raw={file}:ns:MIN',
+    'DEF:max_raw={file}:ns:MAX',
+    'CDEF:avg=avg_raw,1000000,/',
+    'CDEF:min=min_raw,1000000,/',
+    'CDEF:max=max_raw,1000000,/',
+    "AREA:avg#$HalfBlue",
+    "LINE1:avg#$FullBlue:CPU time",
+    'GPRINT:min:MIN:%4.1lf Min,',
+    'GPRINT:avg:AVERAGE:%4.1lf Avg,',
+    'GPRINT:max:MAX:%4.1lf Max,',
+    'GPRINT:avg:LAST:%4.1lf Last\l'
+    ],
   };
   $GraphDefs->{'if_multicast'} = $GraphDefs->{'ipt_packets'};
   $GraphDefs->{'if_tx_errors'} = $GraphDefs->{'if_rx_errors'};
   $GraphDefs->{'dns_qtype'} = $GraphDefs->{'dns_opcode'};
   $GraphDefs->{'dns_rcode'} = $GraphDefs->{'dns_opcode'};
   $GraphDefs->{'vmpage_io-memory'} = $GraphDefs->{'vmpage_io'};
   $GraphDefs->{'vmpage_io-swap'} = $GraphDefs->{'vmpage_io'};
+  $GraphDefs->{'virt_cpu_total'} = $GraphDefs->{'virt_cpu_total'};
 
   $MetaGraphDefs->{'cpu'} = \&meta_graph_cpu;
   $MetaGraphDefs->{'dns_qtype'} = \&meta_graph_dns;
   $MetaGraphDefs->{'dns_rcode'} = \&meta_graph_dns;
   $MetaGraphDefs->{'if_rx_errors'} = \&meta_graph_if_rx_errors;
   $MetaGraphDefs->{'if_tx_errors'} = \&meta_graph_if_rx_errors;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/contrib/cussh.pl /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/contrib/cussh.pl
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/contrib/cussh.pl	2009-01-03 05:39:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/contrib/cussh.pl	2009-02-23 02:30:52.000000000 +0800
@@ -59,12 +59,13 @@
 	my $cmds = {
 		HELP    => \&cmd_help,
 		PUTVAL  => \&putval,
 		GETVAL  => \&getval,
 		FLUSH   => \&flush,
 		LISTVAL => \&listval,
+		PUTNOTIF => \&putnotif,
 	};
 
 	if (! $sock) {
 		print STDERR "Unable to connect to $path!\n";
 		exit 1;
 	}
@@ -106,19 +107,48 @@
 	}
 
 	$sock->destroy();
 	exit 0;
 }
 
+sub tokenize {
+	my $line     = shift || return;
+	my $line_ptr = $line;
+	my @line     = ();
+
+	my $token_pattern = qr/[^"\s]+|"[^"]+"/;
+
+	while (my ($token) = $line_ptr =~ m/^($token_pattern)\s+/) {
+		$line_ptr = $';
+		push @line, $token;
+	}
+
+	if ($line_ptr =~ m/^$token_pattern$/) {
+		push @line, $line_ptr;
+	}
+	else {
+		my ($token) = split m/ /, $line_ptr, 1;
+		print STDERR "Failed to parse line: $line\n";
+		print STDERR "Parse error near token \"$token\".\n";
+		return;
+	}
+
+	foreach my $l (@line) {
+		if ($l =~ m/^"(.*)"$/) {
+			$l = $1;
+		}
+	}
+	return @line;
+}
+
 sub getid {
 	my $string = shift || return;
 
-	print $$string . $/;
 	my ($h, $p, $pi, $t, $ti) =
-		$$string =~ m#^([^/]+)/([^/-]+)(?:-([^/]+))?/([^/-]+)(?:-([^/]+))?\s*#;
-	$$string = $';
+		$string =~ m#^([^/]+)/([^/-]+)(?:-([^/]+))?/([^/-]+)(?:-([^/]+))?\s*#;
+	$string = $';
 
 	return if ((! $h) || (! $p) || (! $t));
 
 	my %id = ();
 
 	($id{'host'}, $id{'plugin'}, $id{'type'}) = ($h, $p, $t);
@@ -160,57 +190,91 @@
 Available commands:
   HELP
   PUTVAL
   GETVAL
   FLUSH
   LISTVAL
+  PUTNOTIF
 
 See the embedded Perldoc documentation for details. To do that, run:
   perldoc $0
 HELP
 	return 1;
 } # cmd_help
 
-=item B<GETVAL> I<Identifier>
+=item B<PUTVAL> I<Identifier> I<Valuelist>
 
 =cut
 
 sub putval {
 	my $sock = shift || return;
 	my $line = shift || return;
 
-	my $id = getid(\$line);
+	my @line = tokenize($line);
+
+	my $id;
+	my $ret;
+
+	if (! @line) {
+		return;
+	}
+
+	if (scalar(@line) < 2) {
+		print STDERR "Synopsis: PUTVAL <id> <value0> [<value1> ...]" . $/;
+		return;
+	}
+
+	$id = getid($line[0]);
 
 	if (! $id) {
-		print STDERR $sock->{'error'} . $/;
+		print STDERR "Invalid id \"$line[0]\"." . $/;
 		return;
 	}
 
 	my ($time, @values) = split m/:/, $line;
-	return $sock->putval(%$id, time => $time, values => \@values);
+	$ret = $sock->putval(%$id, time => $time, values => \@values);
+
+	if (! $ret) {
+		print STDERR "socket error: " . $sock->{'error'} . $/;
+	}
+	return $ret;
 }
 
-=item B<PUTVAL> I<Identifier> I<Valuelist>
+=item B<GETVAL> I<Identifier>
 
 =cut
 
 sub getval {
 	my $sock = shift || return;
 	my $line = shift || return;
 
-	my $id = getid(\$line);
+	my @line = tokenize($line);
+
+	my $id;
+	my $vals;
+
+	if (! @line) {
+		return;
+	}
+
+	if (scalar(@line) < 1) {
+		print STDERR "Synopsis: GETVAL <id>" . $/;
+		return;
+	}
+
+	$id = getid($line[0]);
 
 	if (! $id) {
-		print STDERR $sock->{'error'} . $/;
+		print STDERR "Invalid id \"$line[0]\"." . $/;
 		return;
 	}
 
-	my $vals = $sock->getval(%$id);
+	$vals = $sock->getval(%$id);
 
 	if (! $vals) {
-		print STDERR $sock->{'error'} . $/;
+		print STDERR "socket error: " . $sock->{'error'} . $/;
 		return;
 	}
 
 	foreach my $key (keys %$vals) {
 		print "\t$key: $vals->{$key}\n";
 	}
@@ -222,21 +286,23 @@
 =cut
 
 sub flush {
 	my $sock = shift || return;
 	my $line = shift;
 
+	my @line = tokenize($line);
+
 	my $res;
 
 	if (! $line) {
 		$res = $sock->flush();
 	}
 	else {
 		my %args = ();
 
-		foreach my $i (split m/ /, $line) {
+		foreach my $i (@line) {
 			my ($option, $value) = $i =~ m/^([^=]+)=(.+)$/;
 			next if (! ($option && $value));
 
 			if ($option eq "plugin") {
 				push @{$args{"plugins"}}, $value;
 			}
@@ -259,40 +325,78 @@
 		}
 
 		$res = $sock->flush(%args);
 	}
 
 	if (! $res) {
-		print STDERR $sock->{'error'} . $/;
-		return;
+		print STDERR "socket error: " . $sock->{'error'} . $/;
 	}
-	return 1;
+	return $res;
 }
 
 =item B<LISTVAL>
 
 =cut
 
 sub listval {
 	my $sock = shift || return;
+	my $line = shift;
 
 	my @res;
 
+	if ($line ne "") {
+		print STDERR "Synopsis: LISTVAL" . $/;
+		return;
+	}
+
 	@res = $sock->listval();
 
 	if (! @res) {
-		print STDERR $sock->{'error'} . $/;
+		print STDERR "socket error: " . $sock->{'error'} . $/;
 		return;
 	}
 
 	foreach my $ident (@res) {
 		print $ident->{'time'} . " " . putid($ident) . $/;
 	}
 	return 1;
 }
 
+=item B<PUTNOTIF> [[B<severity>=I<$severity>] [B<message>=I<$message>] [ ...]]
+
+=cut
+
+sub putnotif {
+	my $sock = shift || return;
+	my $line = shift || return;
+
+	my @line = tokenize($line);
+
+	my $ret;
+
+	my (%values) = ();
+	foreach my $i (@line) {
+		my ($key, $val) = split m/=/, $i, 2;
+		if ($key && $val) {
+			$values{$key} = $val;
+		}
+		else {
+			$values{'message'} = defined($values{'message'})
+				? ($values{'message'} . ' ' . $key)
+				: $key;
+		}
+	}
+	$values{'time'} ||= time();
+
+	$ret = $sock->putnotif(%values);
+	if (! $ret) {
+		print STDERR "socket error: " . $sock->{'error'} . $/;
+	}
+	return $ret;
+}
+
 =back
 
 These commands follow the exact same syntax as described in
 L<collectd-unixsock(5)>.
 
 =head1 SEE ALSO
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/contrib: php-collection
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/ascent.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/ascent.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/ascent.c	2009-01-03 05:39:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/ascent.c	2009-02-23 02:34:27.000000000 +0800
@@ -274,16 +274,18 @@
   else
   {
     char *end_ptr = NULL;
     value = strtod (str_ptr, &end_ptr);
     if (str_ptr == end_ptr)
     {
+      xmlFree(str_ptr);
       ERROR ("ascent plugin: ascent_xml_submit_gauge: strtod failed.");
       return (-1);
     }
   }
+  xmlFree(str_ptr);
 
   return (ascent_submit_gauge (plugin_instance, type, type_instance, value));
 } /* }}} int ascent_xml_submit_gauge */
 
 static int ascent_xml_read_int (xmlDoc *doc, xmlNode *node, /* {{{ */
     int *ret_value)
@@ -303,16 +305,18 @@
   else
   {
     char *end_ptr = NULL;
     value = strtol (str_ptr, &end_ptr, 0);
     if (str_ptr == end_ptr)
     {
+      xmlFree(str_ptr);
       ERROR ("ascent plugin: ascent_xml_read_int: strtol failed.");
       return (-1);
     }
   }
+  xmlFree(str_ptr);
 
   *ret_value = value;
   return (0);
 } /* }}} int ascent_xml_read_int */
 
 static int ascent_xml_sessions_plr (xmlDoc *doc, xmlNode *node, /* {{{ */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd.1	2009-01-03 06:21:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd.1	2009-02-23 02:37:57.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD 1"
-.TH COLLECTD 1 "2008-11-25" "4.5.2" "collectd"
+.TH COLLECTD 1 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd \- System statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd.conf.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd.conf.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd.conf.5	2009-01-03 06:21:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd.conf.5	2009-02-23 02:37:58.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD.CONF 5"
-.TH COLLECTD.CONF 5 "2009-01-02" "4.5.2" "collectd"
+.TH COLLECTD.CONF 5 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd.conf \- Configuration for the system statistics collection daemon \fBcollectd\fR
@@ -986,12 +986,56 @@
 .PD
 Set the \fItimeout\fR, in milliseconds, after which to expire the notification
 for \f(CW\*(C`OKAY\*(C'\fR, \f(CW\*(C`WARNING\*(C'\fR and \f(CW\*(C`FAILURE\*(C'\fR severities respectively. If zero has
 been specified, the displayed notification will not be closed at all \- the
 user has to do so herself. These options default to 5000. If a negative number
 has been specified, the default is used as well.
+.ie n .SS "Plugin ""notify_email"""
+.el .SS "Plugin \f(CWnotify_email\fP"
+.IX Subsection "Plugin notify_email"
+The \fInotify_email\fR plugin uses the \fI\s-1ESMTP\s0\fR library to send notifications to a
+configured email address.
+.PP
+\&\fIlibESMTP\fR is available from <http://www.stafford.uklinux.net/libesmtp/>.
+.PP
+Available configuration options:
+.IP "\fBFrom\fR \fIAddress\fR" 4
+.IX Item "From Address"
+Email address from which the emails should appear to come from.
+.Sp
+Default: \f(CW\*(C`root@localhost\*(C'\fR
+.IP "\fBRecipient\fR \fIAddress\fR" 4
+.IX Item "Recipient Address"
+Configures the email address(es) to which the notifications should be mailed.
+May be repeated to send notifications to multiple addresses.
+.Sp
+At least one \fBRecipient\fR must be present for the plugin to work correctly.
+.IP "\fBSMTPServer\fR \fIHostname\fR" 4
+.IX Item "SMTPServer Hostname"
+Hostname of the \s-1SMTP\s0 server to connect to.
+.Sp
+Default: \f(CW\*(C`localhost\*(C'\fR
+.IP "\fBSMTPPort\fR \fIPort\fR" 4
+.IX Item "SMTPPort Port"
+\&\s-1TCP\s0 port to connect to.
+.Sp
+Default: \f(CW25\fR
+.IP "\fBSMTPUser\fR \fIUsername\fR" 4
+.IX Item "SMTPUser Username"
+Username for \s-1ASMTP\s0 authentication. Optional.
+.IP "\fBSMTPPassword\fR \fIPassword\fR" 4
+.IX Item "SMTPPassword Password"
+Password for \s-1ASMTP\s0 authentication. Optional.
+.IP "\fBSubject\fR \fISubject\fR" 4
+.IX Item "Subject Subject"
+Subject-template to use when sending emails. There must be exactly two
+string-placeholders in the subject, given in the standard \fI\fIprintf\fI\|(3)\fR syntax,
+i.\ e. \f(CW%s\fR. The first will be replaced with the severity, the second
+with the hostname.
+.Sp
+Default: \f(CW\*(C`Collectd notify: %s@%s\*(C'\fR
 .ie n .SS "Plugin ""ntpd"""
 .el .SS "Plugin \f(CWntpd\fP"
 .IX Subsection "Plugin ntpd"
 .IP "\fBHost\fR \fIHostname\fR" 4
 .IX Item "Host Hostname"
 Hostname of the host running \fBntpd\fR. Defaults to \fBlocalhost\fR.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd.conf.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd.conf.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd.conf.pod	2009-01-03 05:39:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd.conf.pod	2009-02-23 02:37:56.000000000 +0800
@@ -1004,12 +1004,67 @@
 been specified, the displayed notification will not be closed at all - the
 user has to do so herself. These options default to 5000. If a negative number
 has been specified, the default is used as well.
 
 =back
 
+=head2 Plugin C<notify_email>
+
+The I<notify_email> plugin uses the I<ESMTP> library to send notifications to a
+configured email address.
+
+I<libESMTP> is available from L<http://www.stafford.uklinux.net/libesmtp/>.
+
+Available configuration options:
+
+=over 4
+
+=item B<From> I<Address>
+
+Email address from which the emails should appear to come from.
+
+Default: C<root@localhost>
+
+=item B<Recipient> I<Address>
+
+Configures the email address(es) to which the notifications should be mailed.
+May be repeated to send notifications to multiple addresses.
+
+At least one B<Recipient> must be present for the plugin to work correctly.
+
+=item B<SMTPServer> I<Hostname>
+
+Hostname of the SMTP server to connect to.
+
+Default: C<localhost>
+
+=item B<SMTPPort> I<Port>
+
+TCP port to connect to.
+
+Default: C<25>
+
+=item B<SMTPUser> I<Username>
+
+Username for ASMTP authentication. Optional.
+
+=item B<SMTPPassword> I<Password>
+
+Password for ASMTP authentication. Optional.
+
+=item B<Subject> I<Subject>
+
+Subject-template to use when sending emails. There must be exactly two
+string-placeholders in the subject, given in the standard I<printf(3)> syntax,
+i.E<nbsp>e. C<%s>. The first will be replaced with the severity, the second
+with the hostname.
+
+Default: C<Collectd notify: %s@%s>
+
+=back
+
 =head2 Plugin C<ntpd>
 
 =over 4
 
 =item B<Host> I<Hostname>
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-email.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-email.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-email.5	2009-01-03 06:21:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-email.5	2009-02-23 02:37:58.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EMAIL 5"
-.TH COLLECTD-EMAIL 5 "2007-10-24" "4.5.2" "collectd"
+.TH COLLECTD-EMAIL 5 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-email \- Documentation of collectd's \f(CW\*(C`email plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-exec.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-exec.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-exec.5	2009-01-03 06:21:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-exec.5	2009-02-23 02:37:58.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EXEC 5"
-.TH COLLECTD-EXEC 5 "2009-01-02" "4.5.2" "collectd"
+.TH COLLECTD-EXEC 5 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-exec \- Documentation of collectd's \f(CW\*(C`exec plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectdmon.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectdmon.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectdmon.1	2009-01-03 06:21:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectdmon.1	2009-02-23 02:37:58.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTDMON 1"
-.TH COLLECTDMON 1 "2008-05-06" "4.5.2" "collectd"
+.TH COLLECTDMON 1 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectdmon \- Monitoring daemon for collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-nagios.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-nagios.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-nagios.1	2009-01-03 06:21:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-nagios.1	2009-02-23 02:37:57.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-NAGIOS 1"
-.TH COLLECTD-NAGIOS 1 "2009-01-02" "4.5.2" "collectd"
+.TH COLLECTD-NAGIOS 1 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-nagios \- Nagios plugin for querying collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-perl.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-perl.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-perl.5	2009-01-03 06:21:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-perl.5	2009-02-23 02:37:58.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-PERL 5"
-.TH COLLECTD-PERL 5 "2009-01-02" "4.5.2" "collectd"
+.TH COLLECTD-PERL 5 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-perl \- Documentation of collectd's \f(CW\*(C`perl plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-snmp.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-snmp.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-snmp.5	2009-01-03 06:21:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-snmp.5	2009-02-23 02:37:58.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-SNMP 5"
-.TH COLLECTD-SNMP 5 "2008-05-06" "4.5.2" "collectd"
+.TH COLLECTD-SNMP 5 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-snmp \- Documentation of collectd's \f(CW\*(C`snmp plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-unixsock.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-unixsock.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/collectd-unixsock.5	2009-01-03 06:21:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/collectd-unixsock.5	2009-02-23 02:37:58.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-UNIXSOCK 5"
-.TH COLLECTD-UNIXSOCK 5 "2009-01-02" "4.5.2" "collectd"
+.TH COLLECTD-UNIXSOCK 5 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-unixsock \- Documentation of collectd's \f(CW\*(C`unixsock plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/ipmi.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/ipmi.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/ipmi.c	2009-01-03 05:39:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/ipmi.c	2009-02-23 02:34:27.000000000 +0800
@@ -210,41 +210,60 @@
 static int sensor_list_add (ipmi_sensor_t *sensor)
 {
   ipmi_sensor_id_t sensor_id;
   c_ipmi_sensor_list_t *list_item;
   c_ipmi_sensor_list_t *list_prev;
 
+  char buffer[DATA_MAX_NAME_LEN];
+  const char *entity_id_string;
   char sensor_name[DATA_MAX_NAME_LEN];
   char *sensor_name_ptr;
-  int sensor_type, len;
+  int sensor_type;
   const char *type;
   ipmi_entity_t *ent = ipmi_sensor_get_entity(sensor);
 
   sensor_id = ipmi_sensor_convert_to_id (sensor);
 
-  memset (sensor_name, 0, sizeof (sensor_name));
-  ipmi_sensor_get_name (sensor, sensor_name, sizeof (sensor_name));
-  sensor_name[sizeof (sensor_name) - 1] = 0;
-
-  len = DATA_MAX_NAME_LEN - strlen(sensor_name);
-  strncat(sensor_name, " ", len--);
-  strncat(sensor_name, ipmi_entity_get_entity_id_string(ent), len);
-
-  sensor_name_ptr = strstr (sensor_name, ").");
-  if (sensor_name_ptr == NULL)
-    sensor_name_ptr = sensor_name;
+  memset (buffer, 0, sizeof (buffer));
+  ipmi_sensor_get_name (sensor, buffer, sizeof (buffer));
+  buffer[sizeof (buffer) - 1] = 0;
+
+  entity_id_string = ipmi_entity_get_entity_id_string (ent);
+
+  if (entity_id_string == NULL)
+    sstrncpy (sensor_name, buffer, sizeof (sensor_name));
   else
-  {
-    char *sensor_name_ptr_id = strstr (sensor_name, "(");
+    ssnprintf (sensor_name, sizeof (sensor_name),
+        "%s %s", buffer, entity_id_string);
 
+  sstrncpy (buffer, sensor_name, sizeof (buffer));
+  sensor_name_ptr = strstr (buffer, ").");
+  if (sensor_name_ptr != NULL)
+  {
+    /* If name is something like "foo (123).bar",
+     * change that to "bar (123)".
+     * Both, sensor_name_ptr and sensor_id_ptr point to memory within the
+     * `buffer' array, which holds a copy of the current `sensor_name'. */
+    char *sensor_id_ptr;
+
+    /* `sensor_name_ptr' points to ").bar". */
+    sensor_name_ptr[1] = 0;
+    /* `buffer' holds "foo (123)\0bar\0". */
     sensor_name_ptr += 2;
-    len = DATA_MAX_NAME_LEN - strlen(sensor_name);
-    strncat(sensor_name, " ", len--);
-    strncat(sensor_name, sensor_name_ptr_id, 
-      MIN(sensor_name_ptr - sensor_name_ptr_id - 1, len));
+    /* `sensor_name_ptr' now points to "bar". */
+
+    sensor_id_ptr = strstr (buffer, "(");
+    if (sensor_id_ptr != NULL)
+    {
+      /* `sensor_id_ptr' now points to "(123)". */
+      ssnprintf (sensor_name, sizeof (sensor_name),
+          "%s %s", sensor_name_ptr, sensor_id_ptr); 
+    }
+    /* else: don't touch sensor_name. */
   }
+  sensor_name_ptr = sensor_name;
 
   /* Both `ignorelist' and `plugin_instance' may be NULL. */
   if (ignorelist_match (ignorelist, sensor_name_ptr) != 0)
     return (0);
 
   /* FIXME: Use rate unit or base unit to scale the value */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/liboconfig/parser.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/liboconfig/parser.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/liboconfig/parser.c	2008-12-20 20:01:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/liboconfig/parser.c	2009-01-17 17:35:56.000000000 +0800
@@ -117,13 +117,13 @@
 
 /* Enabling verbose error messages.  */
 #ifdef YYERROR_VERBOSE
 # undef YYERROR_VERBOSE
 # define YYERROR_VERBOSE 1
 #else
-# define YYERROR_VERBOSE 0
+# define YYERROR_VERBOSE 1
 #endif
 
 /* Enabling the token table.  */
 #ifndef YYTOKEN_TABLE
 # define YYTOKEN_TABLE 0
 #endif
@@ -440,15 +440,15 @@
       -1,    11,    -1,    22,    21,    -1,    21,    -1,    22,    -1
 };
 
 /* YYRLINE[YYN] -- source line where rule number YYN was defined.  */
 static const yytype_uint8 yyrline[] =
 {
-       0,    70,    70,    71,    75,    76,    77,    78,    82,    89,
-      98,   102,   112,   118,   128,   135,   151,   152,   153,   157,
-     167,   184
+       0,    73,    73,    74,    78,    79,    80,    81,    85,    92,
+     101,   105,   115,   121,   131,   138,   154,   155,   156,   160,
+     170,   187
 };
 #endif
 
 #if YYDEBUG || YYERROR_VERBOSE || YYTOKEN_TABLE
 /* YYTNAME[SYMBOL-NUM] -- String name of the symbol SYMBOL-NUM.
    First, the terminals, then, starting at YYNTOKENS, nonterminals.  */
@@ -1366,102 +1366,102 @@
 
 
   YY_REDUCE_PRINT (yyn);
   switch (yyn)
     {
         case 2:
-#line 70 "parser.y"
+#line 73 "parser.y"
     {(yyval.string) = unquote ((yyvsp[(1) - (1)].string));}
     break;
 
   case 3:
-#line 71 "parser.y"
+#line 74 "parser.y"
     {(yyval.string) = strdup ((yyvsp[(1) - (1)].string));}
     break;
 
   case 4:
-#line 75 "parser.y"
+#line 78 "parser.y"
     {(yyval.cv).value.number = (yyvsp[(1) - (1)].number); (yyval.cv).type = OCONFIG_TYPE_NUMBER;}
     break;
 
   case 5:
-#line 76 "parser.y"
+#line 79 "parser.y"
     {(yyval.cv).value.boolean = 1; (yyval.cv).type = OCONFIG_TYPE_BOOLEAN;}
     break;
 
   case 6:
-#line 77 "parser.y"
+#line 80 "parser.y"
     {(yyval.cv).value.boolean = 0; (yyval.cv).type = OCONFIG_TYPE_BOOLEAN;}
     break;
 
   case 7:
-#line 78 "parser.y"
+#line 81 "parser.y"
     {(yyval.cv).value.string = (yyvsp[(1) - (1)].string); (yyval.cv).type = OCONFIG_TYPE_STRING;}
     break;
 
   case 8:
-#line 83 "parser.y"
+#line 86 "parser.y"
     {
 	 (yyval.al) = (yyvsp[(1) - (2)].al);
 	 (yyval.al).argument_num++;
 	 (yyval.al).argument = realloc ((yyval.al).argument, (yyval.al).argument_num * sizeof (oconfig_value_t));
 	 (yyval.al).argument[(yyval.al).argument_num-1] = (yyvsp[(2) - (2)].cv);
 	}
     break;
 
   case 9:
-#line 90 "parser.y"
+#line 93 "parser.y"
     {
 	 (yyval.al).argument = malloc (sizeof (oconfig_value_t));
 	 (yyval.al).argument[0] = (yyvsp[(1) - (1)].cv);
 	 (yyval.al).argument_num = 1;
 	}
     break;
 
   case 10:
-#line 98 "parser.y"
+#line 101 "parser.y"
     {(yyval.string) = strdup ((yyvsp[(1) - (1)].string));}
     break;
 
   case 11:
-#line 103 "parser.y"
+#line 106 "parser.y"
     {
 	 memset (&(yyval.ci), '\0', sizeof ((yyval.ci)));
 	 (yyval.ci).key = (yyvsp[(1) - (3)].string);
 	 (yyval.ci).values = (yyvsp[(2) - (3)].al).argument;
 	 (yyval.ci).values_num = (yyvsp[(2) - (3)].al).argument_num;
 	}
     break;
 
   case 12:
-#line 113 "parser.y"
+#line 116 "parser.y"
     {
 	 memset (&(yyval.ci), '\0', sizeof ((yyval.ci)));
 	 (yyval.ci).key = (yyvsp[(2) - (4)].string);
 	}
     break;
 
   case 13:
-#line 119 "parser.y"
+#line 122 "parser.y"
     {
 	 memset (&(yyval.ci), '\0', sizeof ((yyval.ci)));
 	 (yyval.ci).key = (yyvsp[(2) - (5)].string);
 	 (yyval.ci).values = (yyvsp[(3) - (5)].al).argument;
 	 (yyval.ci).values_num = (yyvsp[(3) - (5)].al).argument_num;
 	}
     break;
 
   case 14:
-#line 129 "parser.y"
+#line 132 "parser.y"
     {
 	 (yyval.string) = (yyvsp[(3) - (5)].string);
 	}
     break;
 
   case 15:
-#line 136 "parser.y"
+#line 139 "parser.y"
     {
 	 if (strcmp ((yyvsp[(1) - (3)].ci).key, (yyvsp[(3) - (3)].string)) != 0)
 	 {
 		printf ("block_begin = %s; block_end = %s;\n", (yyvsp[(1) - (3)].ci).key, (yyvsp[(3) - (3)].string));
 	 	yyerror ("Block not closed..\n");
 		exit (1);
@@ -1471,41 +1471,41 @@
 	 (yyval.ci).children = (yyvsp[(2) - (3)].sl).statement;
 	 (yyval.ci).children_num = (yyvsp[(2) - (3)].sl).statement_num;
 	}
     break;
 
   case 16:
-#line 151 "parser.y"
+#line 154 "parser.y"
     {(yyval.ci) = (yyvsp[(1) - (1)].ci);}
     break;
 
   case 17:
-#line 152 "parser.y"
+#line 155 "parser.y"
     {(yyval.ci) = (yyvsp[(1) - (1)].ci);}
     break;
 
   case 18:
-#line 153 "parser.y"
+#line 156 "parser.y"
     {(yyval.ci).values_num = 0;}
     break;
 
   case 19:
-#line 158 "parser.y"
+#line 161 "parser.y"
     {
 	 (yyval.sl) = (yyvsp[(1) - (2)].sl);
 	 if (((yyvsp[(2) - (2)].ci).values_num > 0) || ((yyvsp[(2) - (2)].ci).children_num > 0))
 	 {
 		 (yyval.sl).statement_num++;
 		 (yyval.sl).statement = realloc ((yyval.sl).statement, (yyval.sl).statement_num * sizeof (oconfig_item_t));
 		 (yyval.sl).statement[(yyval.sl).statement_num-1] = (yyvsp[(2) - (2)].ci);
 	 }
 	}
     break;
 
   case 20:
-#line 168 "parser.y"
+#line 171 "parser.y"
     {
 	 if (((yyvsp[(1) - (1)].ci).values_num > 0) || ((yyvsp[(1) - (1)].ci).children_num > 0))
 	 {
 		 (yyval.sl).statement = malloc (sizeof (oconfig_item_t));
 		 (yyval.sl).statement[0] = (yyvsp[(1) - (1)].ci);
 		 (yyval.sl).statement_num = 1;
@@ -1516,13 +1516,13 @@
 		(yyval.sl).statement_num = 0;
 	 }
 	}
     break;
 
   case 21:
-#line 185 "parser.y"
+#line 188 "parser.y"
     {
 	 ci_root = malloc (sizeof (oconfig_item_t));
 	 memset (ci_root, '\0', sizeof (oconfig_item_t));
 	 ci_root->children = (yyvsp[(1) - (1)].sl).statement;
 	 ci_root->children_num = (yyvsp[(1) - (1)].sl).statement_num;
 	}
@@ -1741,13 +1741,13 @@
 #endif
   /* Make sure YYID is used.  */
   return YYID (yyresult);
 }
 
 
-#line 193 "parser.y"
+#line 196 "parser.y"
 
 static int yyerror (const char *s)
 {
 	char *text;
 
 	if (*yytext == '\n')
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/liboconfig/parser.y /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/liboconfig/parser.y
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/liboconfig/parser.y	2008-12-20 18:15:37.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/liboconfig/parser.y	2009-01-13 21:08:56.000000000 +0800
@@ -62,12 +62,15 @@
 /* statements */
 %type <ci> option
 %type <ci> statement
 %type <sl> statement_list
 %type <ci> entire_file
 
+/* pass an verbose, specific error message to yyerror() */
+%error-verbose
+
 %%
 string:
 	QUOTED_STRING		{$$ = unquote ($1);}
 	| UNQUOTED_STRING	{$$ = strdup ($1);}
 	;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/liboconfig/scanner.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/liboconfig/scanner.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/liboconfig/scanner.c	2009-01-03 06:20:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/liboconfig/scanner.c	2009-02-14 21:01:53.000000000 +0800
@@ -138,13 +138,21 @@
 #define YY_NEW_FILE yyrestart(yyin  )
 
 #define YY_END_OF_BUFFER_CHAR 0
 
 /* Size of default input buffer. */
 #ifndef YY_BUF_SIZE
+#ifdef __ia64__
+/* On IA-64, the buffer size is 16k, not 8k.
+ * Moreover, YY_BUF_SIZE is 2*YY_READ_BUF_SIZE in the general case.
+ * Ditto for the __ia64__ case accordingly.
+ */
+#define YY_BUF_SIZE 32768
+#else
 #define YY_BUF_SIZE 16384
+#endif /* __ia64__ */
 #endif
 
 /* The state buf must be large enough to hold one state per character in the main buffer.
  */
 #define YY_STATE_BUF_SIZE   ((YY_BUF_SIZE + 2) * sizeof(yy_state_type))
 
@@ -647,13 +655,13 @@
 # undef yyterminate
 #endif
 #define yyterminate() \
 	do { free (ml_buffer); ml_buffer = NULL; ml_pos = 0; ml_len = 0; \
 		return YY_NULL; } while (0)
 
-#line 654 "scanner.c"
+#line 662 "scanner.c"
 
 #define INITIAL 0
 #define ML 1
 
 #ifndef YY_NO_UNISTD_H
 /* Special case for "unistd.h", since it is non-ANSI. We include it way
@@ -729,21 +737,26 @@
 #endif
 
 #endif
 
 /* Amount of stuff to slurp up with each read. */
 #ifndef YY_READ_BUF_SIZE
+#ifdef __ia64__
+/* On IA-64, the buffer size is 16k, not 8k */
+#define YY_READ_BUF_SIZE 16384
+#else
 #define YY_READ_BUF_SIZE 8192
+#endif /* __ia64__ */
 #endif
 
 /* Copy whatever the last rule matched to the standard output. */
 #ifndef ECHO
 /* This used to be an fputs(), but since the string might contain NUL's,
  * we now use fwrite().
  */
-#define ECHO fwrite( yytext, yyleng, 1, yyout )
+#define ECHO do { if (fwrite( yytext, yyleng, 1, yyout )) {} } while (0)
 #endif
 
 /* Gets input and stuffs it into "buf".  number of characters read, or YY_NULL,
  * is returned in "result".
  */
 #ifndef YY_INPUT
@@ -835,13 +848,13 @@
 	register yy_state_type yy_current_state;
 	register char *yy_cp, *yy_bp;
 	register int yy_act;
     
 #line 62 "scanner.l"
 
-#line 842 "scanner.c"
+#line 855 "scanner.c"
 
 	if ( !(yy_init) )
 		{
 		(yy_init) = 1;
 
 #ifdef YY_USER_INIT
@@ -1053,13 +1066,13 @@
 	YY_BREAK
 case 18:
 YY_RULE_SETUP
 #line 117 "scanner.l"
 ECHO;
 	YY_BREAK
-#line 1060 "scanner.c"
+#line 1073 "scanner.c"
 case YY_STATE_EOF(INITIAL):
 case YY_STATE_EOF(ML):
 	yyterminate();
 
 	case YY_END_OF_BUFFER:
 		{
@@ -1823,14 +1836,14 @@
     
 	return yy_scan_bytes(yystr,strlen(yystr) );
 }
 
 /** Setup the input buffer state to scan the given bytes. The next call to yylex() will
  * scan from a @e copy of @a bytes.
- * @param bytes the byte buffer to scan
- * @param len the number of bytes in the buffer pointed to by @a bytes.
+ * @param yybytes the byte buffer to scan
+ * @param _yybytes_len the number of bytes in the buffer pointed to by @a bytes.
  * 
  * @return the newly allocated buffer state object.
  */
 YY_BUFFER_STATE yy_scan_bytes  (yyconst char * yybytes, int  _yybytes_len )
 {
 	YY_BUFFER_STATE b;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/tcpconns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/tcpconns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/tcpconns.c	2009-01-03 05:39:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/tcpconns.c	2009-02-23 02:34:27.000000000 +0800
@@ -582,13 +582,14 @@
       continue;
 
     if (((inp->inp_vflag & INP_IPV4) == 0)
 	&& ((inp->inp_vflag & INP_IPV6) == 0))
       continue;
 
-    conn_handle_ports (inp->inp_lport, inp->inp_fport, tp->t_state);
+    conn_handle_ports (ntohs (inp->inp_lport), ntohs (inp->inp_fport),
+	tp->t_state);
   } /* for (in_ptr) */
 
   in_orig = NULL;
   in_ptr = NULL;
   sfree (buffer);
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/types.db.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/types.db.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/types.db.5	2009-01-03 06:21:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/types.db.5	2009-02-23 02:37:58.000000000 +0800
@@ -121,13 +121,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "TYPES.DB 5"
-.TH TYPES.DB 5 "2009-01-02" "4.5.2" "collectd"
+.TH TYPES.DB 5 "2009-02-22" "4.5.3" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 types.db \- Data\-set specifications for the system statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/utils_cache.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/utils_cache.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/src/utils_cache.c	2009-01-03 05:39:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/src/utils_cache.c	2009-02-23 02:34:27.000000000 +0800
@@ -183,12 +183,13 @@
     return (-1);
   }
 
   ce = cache_alloc (ds->ds_num);
   if (ce == NULL)
   {
+    sfree (key_copy);
     ERROR ("uc_insert: cache_alloc (%i) failed.", ds->ds_num);
     return (-1);
   }
 
   sstrncpy (ce->name, key, sizeof (ce->name));
 
@@ -258,12 +259,13 @@
       tmp = (char **) realloc ((void *) keys,
 	  (keys_len + 1) * sizeof (char *));
       if (tmp == NULL)
       {
 	ERROR ("uc_purge: realloc failed.");
 	c_avl_iterator_destroy (iter);
+	pthread_mutex_unlock (&cache_lock);
 	return (-1);
       }
 
       keys = tmp;
       keys[keys_len] = strdup (key);
       if (keys[keys_len] == NULL)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/version-gen.sh /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/version-gen.sh
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.2/version-gen.sh	2009-01-03 06:18:00.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.3/version-gen.sh	2009-02-23 02:34:28.000000000 +0800
@@ -1,9 +1,9 @@
 #!/bin/sh
 
-DEFAULT_VERSION="4.5.2.git"
+DEFAULT_VERSION="4.5.3.git"
 
 VERSION="$( git describe 2> /dev/null | sed -e 's/^collectd-//' )"
 
 if test -z "$VERSION"; then
 	VERSION="$DEFAULT_VERSION"
 fi
