diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/AUTHORS /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/AUTHORS
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/AUTHORS	2009-01-03 04:05:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/AUTHORS	2008-09-04 21:01:09.000000000 +0800
@@ -1,84 +1,100 @@
-This package was written by:
-  Florian octo Forster <octo at verplant.org>
+Permanent project members
+=========================
 
-apcups plugin by:
-  Anthony Gialluca <tonyabg at charter.net>
+Florian "octo" Forster <octo at verplant.org>
+ - Initial author.
 
-cpufreq, multimeter and irq plugin, as well as some bugfixes in the exec plugin
-by:
-  Peter Holik <peter at holik.at>
+Sebastian "tokkee" Harl <sh at tokkee.org>
+ - Bugfixed and enhancments in many places all around the project.
+ - perl plugin.
+ - users plugin.
+ - vserver plugin.
+ - Debian package.
 
-hddtemp plugin by:
-  Vincent Stehlé <vincent.stehle at free.fr>
 
-iptables plugin by:
-  Sjoerd van der Berg <harekiet at gmail.com>
+Contributors (sorted alphabetically)
+====================================
 
-libvirt plugin by:
-  Richard W. M. Jones <rjones at redhat.com>
+Alessandro Iurlano <alessandro.iurlano at gmail.com>
+ - Initial filecount plugin.
 
-mbmon plugin by:
-  Flavio Stanchina <flavio at stanchina.net>
+Alvaro Barcellos <alvaro.barcellos at gmail.com>
+ - Don't-fork patch.
 
-memcached plugin by:
-  Antony Dovgal <tony at daylessday.org>
+Anthony Gialluca <tonyabg at charter.net>
+ - apcups plugin.
 
-nfs plugin by:
-  Jason Pepas <cell at ices.utexas.edu>
+Antony Dovgal <tony at daylessday.org>
+ - memcached plugin.
 
-perl plugin by:
-  Sebastian Harl <sh at tokkee.org>
+Christophe Kalt <collectd at klb.taranis.org>
+ - The version 3 `log' mode.
+ - Many Solaris related hints and fixes.
 
-powerdns plugin and initial `tail' subsystem by:
-  Luke Herberling <collectd at c-ware.com>
+Dan Berrange <berrange at redhat.com>
+ - uuid plugin.
 
-processes plugin by:
-  Lyonel Vincent <lyonel at ezix.org>
+David Bacher <drbacher at gmail.com>
+ - serial plugin.
 
-sensors plugin has been improved by:
-  Luboš Staněk <kolektor at atlas.cz>
+Flavio Stanchina <flavio at stanchina.net>
+ - mbmon plugin.
 
-serial plugin by:
-  David Bacher <drbacher at gmail.com>
+Jason Pepas <cell at ices.utexas.edu>
+ - nfs plugin.
 
-tape plugin by:
-  Scott Garrett <sgarrett at technomancer.com>
+Luboš Staněk <kolektor at atlas.cz>
+ - sensors plugin improvements.
+ - Time and effort to find a nasty bug in the ntpd-plugin.
 
-teamspeak2 plugin by:
-  Stefan Hacker <stefan.hacker at web.de>
+Luke Herberling <collectd at c-ware.com>
+ - powerdns plugin.
+ - Initial `tail' subsystem by:
 
-users plugin by:
-  Sebastian Harl <sh at tokkee.org>
+Lyonel Vincent <lyonel at ezix.org>
+ - processes plugin.
 
-uuid plugin by:
-  Dan Berrange <berrange at redhat.com>
-  Richard W.M. Jones <rjones at redhat.com>
+Michael Stapelberg <michael+git@stapelberg.de>
+ - OpenBSD port of the tcpconns plugin.
 
-vserver plugin by:
-  Sebastian Harl <sh at tokkee.org>
+Niki W. Waibel <niki.waibel at newlogic.com>
+ - Initial autotools fixes.
+ - libltdl code.
+ - getmnt-wizardry.
 
-PID-file patch by:
-  Tommie Gannert <d00-tga at d.kth.se>
+Oleg King <king2 at kaluga.ru>
+ - Added support for the statgrab library to
+   + the cpu plugin,
+   + the disk plugin, and
+   + the users plugin.
 
-Don't-fork-patch by:
-  Alvaro Barcellos <alvaro.barcellos at gmail.com>
+Peter Holik <peter at holik.at>
+ - cpufreq plugin.
+ - multimeter plugin.
+ - irq plugin.
+ - Some bugfixes in the exec plugin.
+ - Notifications in the ipmi plugin.
 
-Many autotools related fixes, libltdl code, getmnt-wizardry and much help has
-contributed:
-  Niki W. Waibel <niki.waibel at newlogic.com>
+Richard W. M. Jones <rjones at redhat.com>
+ - libvirt plugin.
+ - uuid plugin.
 
-The `log' mode has been written by:
-  Christophe Kalt <collectd at klb.taranis.org>
+Scott Garrett <sgarrett at technomancer.com>
+ - tape plugin.
 
-Much time and effort to find a nasty bug in the ntpd-plugin has been
-contributed by:
-  Luboš Staněk <lubek at users.sourceforge.net>
+Sjoerd van der Berg <harekiet at gmail.com>
+ - iptables plugin.
 
-Support for the statgrab library has been added to the cpu, disk and users
-plugins by
-  Oleg King <king2 at kaluga.ru>
+Stefan Hacker <stefan.hacker at web.de>
+ - teamspeak2 plugin.
+
+Tommie Gannert <d00-tga at d.kth.se>
+ - PID-file patch.
+
+Vincent Stehlé <vincent.stehle at free.fr>
+ - hddtemp plugin.
 
 collectd is available at:
   <http://collectd.org/>
 
 Enjoy :)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/bindings/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/bindings/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/bindings/Makefile.in	2009-01-03 04:10:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/bindings/Makefile.in	2008-09-05 16:53:49.000000000 +0800
@@ -55,12 +55,16 @@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
+BUILD_WITH_LIBOWCAPI_CPPFLAGS = @BUILD_WITH_LIBOWCAPI_CPPFLAGS@
+BUILD_WITH_LIBOWCAPI_LIBS = @BUILD_WITH_LIBOWCAPI_LIBS@
+BUILD_WITH_LIBPQ_CPPFLAGS = @BUILD_WITH_LIBPQ_CPPFLAGS@
+BUILD_WITH_LIBPQ_LDFLAGS = @BUILD_WITH_LIBPQ_LDFLAGS@
 BUILD_WITH_LIBRRD_CFLAGS = @BUILD_WITH_LIBRRD_CFLAGS@
 BUILD_WITH_LIBRRD_LDFLAGS = @BUILD_WITH_LIBRRD_LDFLAGS@
 BUILD_WITH_LIBSENSORS_CFLAGS = @BUILD_WITH_LIBSENSORS_CFLAGS@
 BUILD_WITH_LIBSENSORS_LDFLAGS = @BUILD_WITH_LIBSENSORS_LDFLAGS@
 BUILD_WITH_LIBSNMP_CFLAGS = @BUILD_WITH_LIBSNMP_CFLAGS@
 BUILD_WITH_LIBSNMP_LIBS = @BUILD_WITH_LIBSNMP_LIBS@
@@ -107,12 +111,14 @@
 KERNEL_DIR = @KERNEL_DIR@
 LDFLAGS = @LDFLAGS@
 LEX = @LEX@
 LEXLIB = @LEXLIB@
 LEX_OUTPUT_ROOT = @LEX_OUTPUT_ROOT@
 LIBLTDL = @LIBLTDL@
+LIBNOTIFY_CFLAGS = @LIBNOTIFY_CFLAGS@
+LIBNOTIFY_LIBS = @LIBNOTIFY_LIBS@
 LIBOBJS = @LIBOBJS@
 LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@
 LN_S = @LN_S@
 LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/bindings/perl/Collectd/Unixsock.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/bindings/perl/Collectd/Unixsock.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/bindings/perl/Collectd/Unixsock.pm	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/bindings/perl/Collectd/Unixsock.pm	2008-09-04 21:01:09.000000000 +0800
@@ -54,27 +54,38 @@
 #use constant { NOTIF_FAILURE => 1, NOTIF_WARNING => 2, NOTIF_OKAY => 4 };
 
 use Carp (qw(cluck confess));
 use IO::Socket::UNIX;
 use Regexp::Common (qw(number));
 
+our $Debug = 0;
+
 return (1);
 
+sub _debug
+{
+	if (!$Debug)
+	{
+		return;
+	}
+	print @_;
+}
+
 sub _create_socket
 {
 	my $path = shift;
 	my $sock = IO::Socket::UNIX->new (Type => SOCK_STREAM, Peer => $path);
 	if (!$sock)
 	{
 		cluck ("Cannot open UNIX-socket $path: $!");
 		return;
 	}
 	return ($sock);
 } # _create_socket
 
-=head1 VALUE IDENTIFIER
+=head1 VALUE IDENTIFIERS
 
 The values in the collectd are identified using an five-tuple (host, plugin,
 plugin-instance, type, type-instance) where only plugin-instance and
 type-instance may be NULL (or undefined). Many functions expect an
 I<%identifier> hash that has at least the members B<host>, B<plugin>, and
 B<type>, possibly completed by B<plugin_instance> and B<type_instance>.
@@ -131,12 +142,28 @@
 	$ident->{'plugin_instance'} = $plugin_instance if (defined ($plugin_instance));
 	$ident->{'type_instance'} = $type_instance if (defined ($type_instance));
 
 	return ($ident);
 } # _parse_identifier
 
+sub _escape_argument
+{
+	my $string = shift;
+
+	if ($string =~ m/^\w+$/)
+	{
+		return ("$string");
+	}
+
+	$string =~ s#\\#\\\\#g;
+	$string =~ s#"#\\"#g;
+	$string = "\"$string\"";
+
+	return ($string);
+}
+
 =head1 PUBLIC METHODS
 
 =over 4
 
 =item I<$obj> = Collectd::Unixsock->B<new> ([I<$path>]);
 
@@ -172,38 +199,41 @@
 sub getval
 {
 	my $obj = shift;
 	my %args = @_;
 
 	my $status;
-	my $fh = $obj->{'sock'} or confess;
+	my $fh = $obj->{'sock'} or confess ('object has no filehandle');
 	my $msg;
 	my $identifier;
 
 	my $ret = {};
 
 	$identifier = _create_identifier (\%args) or return;
 
-	$msg = "GETVAL $identifier\n";
-	#print "-> $msg";
-	send ($fh, $msg, 0) or confess ("send: $!");
-
-	$msg = undef;
-	recv ($fh, $msg, 1024, 0) or confess ("recv: $!");
-	#print "<- $msg";
+	$msg = 'GETVAL ' . _escape_argument ($identifier) . "\n";
+	_debug "-> $msg";
+	print $fh $msg;
+
+	$msg = <$fh>;
+	chomp ($msg);
+	_debug "<- $msg\n";
 
 	($status, $msg) = split (' ', $msg, 2);
 	if ($status <= 0)
 	{
 		$obj->{'error'} = $msg;
 		return;
 	}
 
-	for (split (' ', $msg))
+	for (my $i = 0; $i < $status; $i++)
 	{
-		my $entry = $_;
+		my $entry = <$fh>;
+		chomp ($entry);
+		_debug "<- $entry\n";
+
 		if ($entry =~ m/^(\w+)=NaN$/)
 		{
 			$ret->{$1} = undef;
 		}
 		elsif ($entry =~ m/^(\w+)=($RE{num}{real})$/)
 		{
@@ -216,14 +246,14 @@
 
 =item I<$obj>-E<gt>B<putval> (I<%identifier>, B<time> =E<gt> I<$time>, B<values> =E<gt> [...]);
 
 Submits a value-list to the daemon. If the B<time> argument is omitted
 C<time()> is used. The required argument B<values> is a reference to an array
 of values that is to be submitted. The number of values must match the number
-of values expected for the given B<type> (see L<VALUE IDENTIFIER>), though this
-is checked by the daemon, not the Perl module. Also, gauge data-sources
+of values expected for the given B<type> (see L<VALUE IDENTIFIERS>), though
+this is checked by the daemon, not the Perl module. Also, gauge data-sources
 (e.E<nbsp>g. system-load) may be C<undef>. Returns true upon success and false
 otherwise.
 
 =cut
 
 sub putval
@@ -237,13 +267,14 @@
 	my $identifier;
 	my $values;
 	my $interval = "";
 
 	if (defined $args{'interval'})
 	{
-		$interval = ' interval=' . $args{'interval'};
+		$interval = ' interval='
+		. _escape_argument ($args{'interval'});
 	}
 
 	$identifier = _create_identifier (\%args) or return;
 	if (!$args{'values'})
 	{
 		cluck ("Need argument `values'");
@@ -257,18 +288,22 @@
 	else
 	{
 		my $time = $args{'time'} ? $args{'time'} : time ();
 		$values = join (':', $time, map { defined ($_) ? $_ : 'U' } (@{$args{'values'}}));
 	}
 
-	$msg = "PUTVAL $identifier$interval $values\n";
-	#print "-> $msg";
-	send ($fh, $msg, 0) or confess ("send: $!");
-	$msg = undef;
-	recv ($fh, $msg, 1024, 0) or confess ("recv: $!");
-	#print "<- $msg";
+	$msg = 'PUTVAL '
+	. _escape_argument ($identifier)
+	. $interval
+	. ' ' . _escape_argument ($values) . "\n";
+	_debug "-> $msg";
+	print $fh $msg;
+
+	$msg = <$fh>;
+	chomp ($msg);
+	_debug "<- $msg\n";
 
 	($status, $msg) = split (' ', $msg, 2);
 	return (1) if ($status == 0);
 
 	$obj->{'error'} = $msg;
 	return;
@@ -287,16 +322,18 @@
 	my $obj = shift;
 	my $msg;
 	my @ret = ();
 	my $status;
 	my $fh = $obj->{'sock'} or confess;
 
-	$msg = "LISTVAL\n";
-	send ($fh, $msg, 0) or confess ("send: $!");
+	_debug "LISTVAL\n";
+	print $fh "LISTVAL\n";
 
 	$msg = <$fh>;
+	chomp ($msg);
+	_debug "<- $msg\n";
 	($status, $msg) = split (' ', $msg, 2);
 	if ($status < 0)
 	{
 		$obj->{'error'} = $msg;
 		return;
 	}
@@ -305,12 +342,13 @@
 	{
 		my $time;
 		my $ident;
 
 		$msg = <$fh>;
 		chomp ($msg);
+		_debug "<- $msg\n";
 
 		($time, $ident) = split (' ', $msg, 2);
 
 		$ident = _parse_identifier ($ident);
 		$ident->{'time'} = int ($time);
 
@@ -359,13 +397,12 @@
 	my %args = @_;
 
 	my $status;
 	my $fh = $obj->{'sock'} or confess;
 
 	my $msg; # message sent to the socket
-	my $opt_msg; # message of the notification
 	
 	if (!$args{'message'})
 	{
 		cluck ("Need argument `message'");
 		return;
 	}
@@ -385,31 +422,31 @@
 
 	if (!$args{'time'})
 	{
 		$args{'time'} = time ();
 	}
 	
-	$opt_msg = $args{'message'};
-	delete ($args{'message'});
-
 	$msg = 'PUTNOTIF '
-	. join (' ', map { $_ . '=' . $args{$_} } (keys %args))
-	. " message=$opt_msg\n";
+	. join (' ', map { $_ . '=' . _escape_argument ($args{$_}) } (keys %args))
+	. "\n";
+
+	_debug "-> $msg";
+	print $fh $msg;
 
-	send ($fh, $msg, 0) or confess ("send: $!");
-	$msg = undef;
-	recv ($fh, $msg, 1024, 0) or confess ("recv: $!");
+	$msg = <$fh>;
+	chomp ($msg);
+	_debug "<- $msg\n";
 
 	($status, $msg) = split (' ', $msg, 2);
 	return (1) if ($status == 0);
 
 	$obj->{'error'} = $msg;
 	return;
 } # putnotif
 
-=item I<$obj>-E<gt>B<flush> (B<timeout> =E<gt> I<$timeout>, B<plugins> =E<gt> [...]);
+=item I<$obj>-E<gt>B<flush> (B<timeout> =E<gt> I<$timeout>, B<plugins> =E<gt> [...], B<identifier>  =E<gt> [...]);
 
 Flush cached data.
 
 Valid options are:
 
 =over 4
@@ -418,13 +455,20 @@
 
 If this option is specified, only data older than I<$timeout> seconds is
 flushed.
 
 =item B<plugins>
 
-If this option is specified, only the selected plugins will be flushed. 
+If this option is specified, only the selected plugins will be flushed. The
+argument is a reference to an array of strings.
+
+=item B<identifier>
+
+If this option is specified, only the given identifier(s) will be flushed. The
+argument is a reference to an array of identifiers. Identifiers, in this case,
+are hash references and have the members as outlined in L<VALUE IDENTIFIERS>.
 
 =back
 
 =cut
 
 sub flush
@@ -434,38 +478,76 @@
 
 	my $fh = $obj->{'sock'} or confess;
 
 	my $status = 0;
 	my $msg    = "FLUSH";
 
-	if ($args{'timeout'})
+	if (defined ($args{'timeout'}))
 	{
 		$msg .= " timeout=" . $args{'timeout'};
 	}
 
 	if ($args{'plugins'})
 	{
 		foreach my $plugin (@{$args{'plugins'}})
 		{
 			$msg .= " plugin=" . $plugin;
 		}
 	}
 
+	if ($args{'identifier'})
+	{
+		for (@{$args{'identifier'}})
+		{
+			my $identifier = $_;
+			my $ident_str;
+
+			if (ref ($identifier) ne 'HASH')
+			{
+				cluck ("The argument of the `identifier' "
+					. "option must be an array reference "
+					. "of hash references.");
+				return;
+			}
+
+			$ident_str = _create_identifier ($identifier);
+			if (!$ident_str)
+			{
+				return;
+			}
+
+			$msg .= ' identifier=' . _escape_argument ($ident_str);
+		}
+	}
+
 	$msg .= "\n";
 
-	send ($fh, $msg, 0) or confess ("send: $!");
-	$msg = undef;
-	recv ($fh, $msg, 1024, 0) or confess ("recv: $!");
+	_debug "-> $msg";
+	print $fh $msg;
+
+	$msg = <$fh>;
+	chomp ($msg);
+	_debug "<- $msg\n";
 
 	($status, $msg) = split (' ', $msg, 2);
 	return (1) if ($status == 0);
 
 	$obj->{'error'} = $msg;
 	return;
 }
 
+sub error
+{
+	my $obj = shift;
+	if ($obj->{'error'})
+	{
+		return ($obj->{'error'});
+	}
+	return;
+}
+
 =item I<$obj>-E<gt>destroy ();
 
 Closes the socket before the object is destroyed. This function is also
 automatically called then the object goes out of scope.
 
 =back
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/bindings/perl/Collectd.pm /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/bindings/perl/Collectd.pm
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/bindings/perl/Collectd.pm	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/bindings/perl/Collectd.pm	2008-09-04 21:01:09.000000000 +0800
@@ -53,12 +53,13 @@
 			TYPE_READ
 			TYPE_WRITE
 			TYPE_SHUTDOWN
 			TYPE_LOG
 			TYPE_NOTIF
 			TYPE_FLUSH
+			TYPE_CONFIG
 			TYPE_DATASET
 	) ],
 	'ds_types' => [ qw(
 			DS_TYPE_COUNTER
 			DS_TYPE_GAUGE
 	) ],
@@ -95,12 +96,13 @@
 our $hostname_g;
 our $interval_g;
 
 Exporter::export_ok_tags ('all');
 
 my @plugins : shared = ();
+my %cf_callbacks : shared = ();
 
 my %types = (
 	TYPE_INIT,     "init",
 	TYPE_READ,     "read",
 	TYPE_WRITE,    "write",
 	TYPE_SHUTDOWN, "shutdown",
@@ -130,12 +132,14 @@
 sub INFO    { _log (scalar caller, LOG_INFO,    shift); }
 sub DEBUG   { _log (scalar caller, LOG_DEBUG,   shift); }
 
 sub plugin_call_all {
 	my $type = shift;
 
+	my %plugins;
+
 	our $cb_name = undef;
 
 	if (! defined $type) {
 		return;
 	}
 
@@ -145,15 +149,19 @@
 
 	if (! defined $plugins[$type]) {
 		ERROR ("Collectd::plugin_call: unknown type \"$type\"");
 		return;
 	}
 
-	lock @plugins;
-	foreach my $plugin (keys %{$plugins[$type]}) {
-		my $p = $plugins[$type]->{$plugin};
+	{
+		lock %{$plugins[$type]};
+		%plugins = %{$plugins[$type]};
+	}
+
+	foreach my $plugin (keys %plugins) {
+		my $p = $plugins{$plugin};
 
 		my $status = 0;
 
 		if ($p->{'wait_left'} > 0) {
 			$p->{'wait_left'} -= $interval_g;
 		}
@@ -235,20 +243,31 @@
 
 	if (! ((defined $type) && (defined $name) && (defined $data))) {
 		ERROR ("Usage: Collectd::plugin_register (type, name, data)");
 		return;
 	}
 
-	if ((! defined $plugins[$type]) && (TYPE_DATASET != $type)) {
+	if ((! defined $plugins[$type]) && (TYPE_DATASET != $type)
+			&& (TYPE_CONFIG != $type)) {
 		ERROR ("Collectd::plugin_register: Invalid type \"$type\"");
 		return;
 	}
 
 	if ((TYPE_DATASET == $type) && ("ARRAY" eq ref $data)) {
 		return plugin_register_data_set ($name, $data);
 	}
+	elsif ((TYPE_CONFIG == $type) && (! ref $data)) {
+		my $pkg = scalar caller;
+
+		if ($data !~ m/^$pkg\:\:/) {
+			$data = $pkg . "::" . $data;
+		}
+
+		lock %cf_callbacks;
+		$cf_callbacks{$name} = $data;
+	}
 	elsif ((TYPE_DATASET != $type) && (! ref $data)) {
 		my $pkg = scalar caller;
 
 		my %p : shared;
 
 		if ($data !~ m/^$pkg\:\:/) {
@@ -258,13 +277,13 @@
 		%p = (
 			wait_time => $interval_g,
 			wait_left => 0,
 			cb_name   => $data,
 		);
 
-		lock @plugins;
+		lock %{$plugins[$type]};
 		$plugins[$type]->{$name} = \%p;
 	}
 	else {
 		ERROR ("Collectd::plugin_register: Invalid data.");
 		return;
 	}
@@ -282,48 +301,125 @@
 		return;
 	}
 
 	if (TYPE_DATASET == $type) {
 		return plugin_unregister_data_set ($name);
 	}
+	elsif (TYPE_CONFIG == $type) {
+		lock %cf_callbacks;
+		delete $cf_callbacks{$name};
+	}
 	elsif (defined $plugins[$type]) {
-		lock @plugins;
+		lock %{$plugins[$type]};
 		delete $plugins[$type]->{$name};
 	}
 	else {
 		ERROR ("Collectd::plugin_unregister: Invalid type.");
 		return;
 	}
 }
 
 sub plugin_flush {
 	my %args = @_;
 
 	my $timeout = -1;
+	my @plugins = ();
+	my @ids     = ();
 
 	DEBUG ("Collectd::plugin_flush:"
 		. (defined ($args{'timeout'}) ? " timeout = $args{'timeout'}" : "")
-		. (defined ($args{'plugins'}) ? " plugins = $args{'plugins'}" : ""));
+		. (defined ($args{'plugins'}) ? " plugins = $args{'plugins'}" : "")
+		. (defined ($args{'identifiers'})
+			? " identifiers = $args{'identifiers'}" : ""));
 
 	if (defined ($args{'timeout'}) && ($args{'timeout'} > 0)) {
 		$timeout = $args{'timeout'};
 	}
 
-	if (! defined $args{'plugins'}) {
-		plugin_flush_all ($timeout);
+	if (defined ($args{'plugins'})) {
+		if ("ARRAY" eq ref ($args{'plugins'})) {
+			@plugins = @{$args{'plugins'}};
+		}
+		else {
+			@plugins = ($args{'plugins'});
+		}
 	}
 	else {
-		if ("ARRAY" eq ref ($args{'plugins'})) {
-			foreach my $plugin (@{$args{'plugins'}}) {
-				plugin_flush_one ($timeout, $plugin);
-			}
+		@plugins = (undef);
+	}
+
+	if (defined ($args{'identifiers'})) {
+		if ("ARRAY" eq ref ($args{'identifiers'})) {
+			@ids = @{$args{'identifiers'}};
 		}
 		else {
-			plugin_flush_one ($timeout, $args{'plugins'});
+			@ids = ($args{'identifiers'});
 		}
 	}
+	else {
+		@ids = (undef);
+	}
+
+	foreach my $plugin (@plugins) {
+		foreach my $id (@ids) {
+			_plugin_flush($plugin, $timeout, $id);
+		}
+	}
+}
+
+sub plugin_flush_one {
+	my $timeout = shift;
+	my $name    = shift;
+
+	WARNING ("Collectd::plugin_flush_one is deprecated - "
+		. "use Collectd::plugin_flush instead.");
+
+	if (! (defined ($timeout) && defined ($name))) {
+		ERROR ("Usage: Collectd::plugin_flush_one(timeout, name)");
+		return;
+	}
+
+	plugin_flush (plugins => $name, timeout => $timeout);
+}
+
+sub plugin_flush_all {
+	my $timeout = shift;
+
+	WARNING ("Collectd::plugin_flush_all is deprecated - "
+		. "use Collectd::plugin_flush instead.");
+
+	if (! defined ($timeout)) {
+		ERROR ("Usage: Collectd::plugin_flush_all(timeout)");
+		return;
+	}
+
+	plugin_flush (timeout => $timeout);
+}
+
+sub _plugin_dispatch_config {
+	my $plugin = shift;
+	my $config = shift;
+
+	our $cb_name = undef;
+
+	if (! (defined ($plugin) && defined ($config))) {
+		return;
+	}
+
+	if (! defined $cf_callbacks{$plugin}) {
+		WARNING ("Found a configuration for the \"$plugin\" plugin, but "
+			. "the plugin isn't loaded or didn't register "
+			. "a configuration callback.");
+		return;
+	}
+
+	{
+		lock %cf_callbacks;
+		$cb_name = $cf_callbacks{$plugin};
+	}
+	call_by_name ($config);
 }
 
 1;
 
 # vim: set sw=4 ts=4 tw=78 noexpandtab :
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/ChangeLog /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/ChangeLog
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/ChangeLog	2009-01-03 04:05:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/ChangeLog	2008-09-04 21:01:09.000000000 +0800
@@ -1,50 +1,36 @@
-2009-01-02, Version 4.4.5
-	* build system: Check for `mysql.h' and `mysql/mysql.h', since the
-	  file may be in both locations, especially when the database was
-	  installed in a non-standard path. Thanks to Dusty Doris for
-	  reporting this.
-	* build system: Handle the _POSIX_PTHREAD_SEMANTICS defined, needed by
-	  Solaris, in the configure script automatically.
-	* collectd.conf(5): Various fixes and clarifications.
-	* apcups plugin: Include "collectd.h" before <stdlib.h>. This solves
-	  portability problems, especially for Solaris.
-	* dns plugin: Fix a portability problem with NetBSD.
-	* network plugin: Fix the handling of `type' in the network protocol.
-	  Due to a programming mistake, only 4 or 8 bytes would be copied to a
-	  much larger buffer. This caused the `type' to be transferred much
-	  more often than necessary. In some cases, e. g. the `cpu' and
-	  `cpufreq' plugins being used at the same time, data may be corrupted
-	  in those files. Thanks to Bruno Prémont for debugging and reporting
-	  this issue.
-	* unixsock plugin: Make sure the initialization function is run only
-	  once. This resolves a file descriptor leak under systems which run
-	  the initialization more than once, such as Solaris.
-
-2008-10-16, Version 4.4.4
-	* build system: Change `--enable-<plugin>' to abort with an error if
-	  dependencies are not met. Thanks to Bruno Prémont for the patch.
-	  Also, the poisoning of various string functions has been restricted
-	  to debug builds.
-	* collectd: Fix a memory leak in the global value cache. With every
-	  *missing* value a couple of bytes would be leaked. Another memory
-	  leak in the configuration handling code has been fixed. Thanks to
-	  Niraj Tolia for reporting these issues.
-	* collectd: Fix an off-by-one error in the ignorelist functionality.
-	  When using regular expressions, the last character would be missing,
-	  possibly matching differently from what one would expect.
-	* collectdmon: Don't block SIGCHLD. This fixes a potential portability
-	  problem.
-	* collectd-nagios: Fix handling of the `-d' option. Thanks to Fabian
-	  Linzberger for reporting the bug.
-	* network plugin: Fix a memory leak in the configuration handling
-	  code. Thanks to Niraj Tolia for reporting this issue.
-	* perl plugin: Log an error message if bootstrapping `Collectd' fails.
-	* tail plugin: Call `clearerr(3)' after reading an EOF. This fixes
-	  problems with some `libc's. Thanks to Matthias Lay for reporting the
-	  bug.
+2008-09-04, Version 4.5.0
+	* collectd: Added the ability to flush certain identifiers.
+	* collectd: The concept of `notification meta data' has been
+	  introduced.
+	* filecount plugin: The new filecount plugin counts the number of
+	  files in a directory and its subdirectories.
+	* ipmi plugin: Sensor names have been changed to ensure unique names.
+	  Notifications upon added and removed sensors can now be generated.
+	* notify_desktop plugin: This new plugin sends notifications to the
+	  X desktop using the structure defined in the `Desktop Notification
+	  Specification'.
+	* notify_email plugin: This new plugin sends out notifications via
+	  email, using the `esmtp' library.
+	* onewire plugin: The new experimental(!) onewire plugin reads values,
+	  such as temperatures, from sensors connected to the computer via the
+	  onewire bus.
+	* perl plugin: Improved synchronized access to internal data structures
+	  and fixed a possible dead-lock.
+	* perl plugin: Added the ability to flush certain identifiers and marked
+	  plugin_flush_all() and plugin_flush_one() as deprecated in favor of
+	  plugin_flush().
+	* perl plugin: Added the ability to configure Perl plugins.
+	* postgresql plugin: The new postgresql plugin collects statistics
+	  about or from a PostgreSQL database.
+	* processes plugin: The `ProcessMatch' option has been added.
+	* rrdtool plugin: Implement throttling of the `update queue' to lessen
+	  IO load.
+	* tcpconns plugin: This plugin has been ported to OpenBSD.
+	* thermal plugin: The new thermal plugin collects system temperatures
+	  using Linux ACPI thermal zone data.
 
 2008-09-01, Version 4.4.3
 	* collectd: Fix a memory leak in the threshold checking code.
 	* memcached plugin: Fix a too short timeout and a related file
 	  descriptor leak.
 	* memory plugin: A typo in the libstatgrab code has been fixed.
@@ -73,13 +59,13 @@
 	* collectd: Fixed min/max output in notifications generated by
 	  threshold checking.
 	* collectd-nagios: Fix the protocol used to communicate with the
 	  daemon.
 	* perl plugin: Fail noisily, but don't shutdown the daemon, if
 	  initialization has errors. An issue with Perl 5.10 has been fixed.
-	* teamspeak2 plugin: Fixed an out of bound array access. Thanks to
+	* teamspeak2 plugin: Fixed an out of bounce array access. Thanks to
 	  René Rebe and Siegmund Gorr for reporting this.
 
 2008-05-06, Version 4.4.0
 	* collectd: Internal code cleanups.
 	* collectd: Added support for a `Flush' command in the unixsock and
 	  exec plugins. This command can be used to force a plugin (or all) to
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/configure	2009-01-03 04:10:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/configure	2008-09-05 16:53:56.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.61 for collectd 4.4.5.
+# Generated by GNU Autoconf 2.61 for collectd 4.5.0.
 #
 # Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 # 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
 ## --------------------- ##
@@ -723,14 +723,14 @@
 MAKEFLAGS=
 SHELL=${CONFIG_SHELL-/bin/sh}
 
 # Identity of this package.
 PACKAGE_NAME='collectd'
 PACKAGE_TARNAME='collectd'
-PACKAGE_VERSION='4.4.5'
-PACKAGE_STRING='collectd 4.4.5'
+PACKAGE_VERSION='4.5.0'
+PACKAGE_STRING='collectd 4.5.0'
 PACKAGE_BUGREPORT=''
 
 ac_unique_file="src/collectd.c"
 ac_default_prefix="/opt/collectd"
 # Factoring default headers for most tests.
 ac_includes_default="\
@@ -908,14 +908,18 @@
 BUILD_WITH_LIBIOKIT_TRUE
 BUILD_WITH_LIBIOKIT_FALSE
 BUILD_WITH_LIBSTATGRAB_TRUE
 BUILD_WITH_LIBSTATGRAB_FALSE
 BUILD_WITH_LIBSTATGRAB_CFLAGS
 BUILD_WITH_LIBSTATGRAB_LDFLAGS
+BUILD_WITH_LIBKVM_GETPROCS_TRUE
+BUILD_WITH_LIBKVM_GETPROCS_FALSE
 BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE
 BUILD_WITH_LIBKVM_GETSWAPINFO_FALSE
+BUILD_WITH_LIBKVM_NLIST_TRUE
+BUILD_WITH_LIBKVM_NLIST_FALSE
 BUILD_WITH_LIBSENSORS_CFLAGS
 BUILD_WITH_LIBSENSORS_LDFLAGS
 BUILD_WITH_LM_SENSORS_TRUE
 BUILD_WITH_LM_SENSORS_FALSE
 BUILD_WITH_LIBMYSQL_CFLAGS
 BUILD_WITH_LIBMYSQL_LIBS
@@ -924,14 +928,18 @@
 BUILD_WITH_OWN_LIBOCONFIG_TRUE
 BUILD_WITH_OWN_LIBOCONFIG_FALSE
 BUILD_WITH_LIBOPING_TRUE
 BUILD_WITH_LIBOPING_FALSE
 BUILD_WITH_OWN_LIBOPING_TRUE
 BUILD_WITH_OWN_LIBOPING_FALSE
+BUILD_WITH_LIBOWCAPI_CPPFLAGS
+BUILD_WITH_LIBOWCAPI_LIBS
 BUILD_WITH_LIBPCAP_TRUE
 BUILD_WITH_LIBPCAP_FALSE
+BUILD_WITH_LIBESMTP_TRUE
+BUILD_WITH_LIBESMTP_FALSE
 PERL
 PERL_CFLAGS
 PERL_LDFLAGS
 BUILD_WITH_LIBPERL_TRUE
 BUILD_WITH_LIBPERL_FALSE
 BUILD_WITH_LIBIPTC_TRUE
@@ -939,24 +947,30 @@
 BUILD_WITH_OWN_LIBIPTC_TRUE
 BUILD_WITH_OWN_LIBIPTC_FALSE
 BUILD_WITH_LIBSNMP_CFLAGS
 BUILD_WITH_LIBSNMP_LIBS
 BUILD_WITH_LIBNETSNMP_TRUE
 BUILD_WITH_LIBNETSNMP_FALSE
+LIBNOTIFY_CFLAGS
+LIBNOTIFY_LIBS
 BUILD_WITH_LIBUPSCLIENT_CFLAGS
 BUILD_WITH_LIBUPSCLIENT_LIBS
 BUILD_WITH_LIBXMMS_CFLAGS
 BUILD_WITH_LIBXMMS_LIBS
 BUILD_WITH_LIBXMMS_TRUE
 BUILD_WITH_LIBXMMS_FALSE
 BUILD_WITH_LIBNETLINK_CFLAGS
 BUILD_WITH_LIBNETLINK_LIBS
 BUILD_WITH_LIBNETLINK_TRUE
 BUILD_WITH_LIBNETLINK_FALSE
 BUILD_WITH_OPENIPMI_CFLAGS
 BUILD_WITH_OPENIPMI_LIBS
+BUILD_WITH_LIBPQ_CPPFLAGS
+BUILD_WITH_LIBPQ_LDFLAGS
+BUILD_WITH_LIBPQ_TRUE
+BUILD_WITH_LIBPQ_FALSE
 BUILD_WITH_LIBXML2_CFLAGS
 BUILD_WITH_LIBXML2_LIBS
 BUILD_WITH_LIBVIRT_CFLAGS
 BUILD_WITH_LIBVIRT_LIBS
 BUILD_FEATURE_DEBUG_TRUE
 BUILD_FEATURE_DEBUG_FALSE
@@ -977,24 +991,28 @@
 BUILD_PLUGIN_CPU_TRUE
 BUILD_PLUGIN_CPU_FALSE
 BUILD_PLUGIN_CPUFREQ_TRUE
 BUILD_PLUGIN_CPUFREQ_FALSE
 BUILD_PLUGIN_CSV_TRUE
 BUILD_PLUGIN_CSV_FALSE
+BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE
+BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE
 BUILD_PLUGIN_DF_TRUE
 BUILD_PLUGIN_DF_FALSE
 BUILD_PLUGIN_DISK_TRUE
 BUILD_PLUGIN_DISK_FALSE
 BUILD_PLUGIN_DNS_TRUE
 BUILD_PLUGIN_DNS_FALSE
 BUILD_PLUGIN_EMAIL_TRUE
 BUILD_PLUGIN_EMAIL_FALSE
 BUILD_PLUGIN_ENTROPY_TRUE
 BUILD_PLUGIN_ENTROPY_FALSE
 BUILD_PLUGIN_EXEC_TRUE
 BUILD_PLUGIN_EXEC_FALSE
+BUILD_PLUGIN_FILECOUNT_TRUE
+BUILD_PLUGIN_FILECOUNT_FALSE
 BUILD_PLUGIN_HDDTEMP_TRUE
 BUILD_PLUGIN_HDDTEMP_FALSE
 BUILD_PLUGIN_INTERFACE_TRUE
 BUILD_PLUGIN_INTERFACE_FALSE
 BUILD_PLUGIN_IPTABLES_TRUE
 BUILD_PLUGIN_IPTABLES_FALSE
@@ -1025,20 +1043,26 @@
 BUILD_PLUGIN_NETWORK_TRUE
 BUILD_PLUGIN_NETWORK_FALSE
 BUILD_PLUGIN_NFS_TRUE
 BUILD_PLUGIN_NFS_FALSE
 BUILD_PLUGIN_NGINX_TRUE
 BUILD_PLUGIN_NGINX_FALSE
+BUILD_PLUGIN_NOTIFY_EMAIL_TRUE
+BUILD_PLUGIN_NOTIFY_EMAIL_FALSE
 BUILD_PLUGIN_NTPD_TRUE
 BUILD_PLUGIN_NTPD_FALSE
 BUILD_PLUGIN_NUT_TRUE
 BUILD_PLUGIN_NUT_FALSE
+BUILD_PLUGIN_ONEWIRE_TRUE
+BUILD_PLUGIN_ONEWIRE_FALSE
 BUILD_PLUGIN_PERL_TRUE
 BUILD_PLUGIN_PERL_FALSE
 BUILD_PLUGIN_PING_TRUE
 BUILD_PLUGIN_PING_FALSE
+BUILD_PLUGIN_POSTGRESQL_TRUE
+BUILD_PLUGIN_POSTGRESQL_FALSE
 BUILD_PLUGIN_POWERDNS_TRUE
 BUILD_PLUGIN_POWERDNS_FALSE
 BUILD_PLUGIN_PROCESSES_TRUE
 BUILD_PLUGIN_PROCESSES_FALSE
 BUILD_PLUGIN_RRDTOOL_TRUE
 BUILD_PLUGIN_RRDTOOL_FALSE
@@ -1057,12 +1081,14 @@
 BUILD_PLUGIN_TAPE_TRUE
 BUILD_PLUGIN_TAPE_FALSE
 BUILD_PLUGIN_TCPCONNS_TRUE
 BUILD_PLUGIN_TCPCONNS_FALSE
 BUILD_PLUGIN_TEAMSPEAK2_TRUE
 BUILD_PLUGIN_TEAMSPEAK2_FALSE
+BUILD_PLUGIN_THERMAL_TRUE
+BUILD_PLUGIN_THERMAL_FALSE
 BUILD_PLUGIN_UNIXSOCK_TRUE
 BUILD_PLUGIN_UNIXSOCK_FALSE
 BUILD_PLUGIN_USERS_TRUE
 BUILD_PLUGIN_USERS_FALSE
 BUILD_PLUGIN_UUID_TRUE
 BUILD_PLUGIN_UUID_FALSE
@@ -1094,13 +1120,15 @@
 CXXCPP
 F77
 FFLAGS
 YACC
 YFLAGS
 PKG_CONFIG
-KERNEL_DIR'
+KERNEL_DIR
+LIBNOTIFY_CFLAGS
+LIBNOTIFY_LIBS'
 ac_subdirs_all='libltdl'
 
 # Initialize some variables set by options.
 ac_init_help=
 ac_init_version=false
 # The variables have the same names as the options, with
@@ -1597,13 +1625,13 @@
 # Report the --help message.
 #
 if test "$ac_init_help" = "long"; then
   # Omit some internal or obsolete options to make the list less imposing.
   # This message is too long to be a string in the A/UX 3.1 sh.
   cat <<_ACEOF
-\`configure' configures collectd 4.4.5 to adapt to many kinds of systems.
+\`configure' configures collectd 4.5.0 to adapt to many kinds of systems.
 
 Usage: $0 [OPTION]... [VAR=VALUE]...
 
 To assign environment variables (e.g., CC, CFLAGS...), specify them as
 VAR=VALUE.  See below for descriptions of some of the useful variables.
 
@@ -1667,13 +1695,13 @@
   --host=HOST       cross-compile to build programs to run on HOST [BUILD]
 _ACEOF
 fi
 
 if test -n "$ac_init_help"; then
   case $ac_init_help in
-     short | recursive ) echo "Configuration of collectd 4.4.5:";;
+     short | recursive ) echo "Configuration of collectd 4.5.0:";;
    esac
   cat <<\_ACEOF
 
 Optional Features:
   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
@@ -1697,18 +1725,20 @@
   --enable-apple_sensors  Apple's hardware sensors
   --enable-ascent         AscentEmu player statistics
   --enable-battery        Battery statistics
   --enable-cpu            CPU usage statistics
   --enable-cpufreq        CPU frequency statistics
   --enable-csv            CSV output plugin
+  --enable-notify_desktop Desktop notifications
   --enable-df             Filesystem usage statistics
   --enable-disk           Disk usage statistics
   --enable-dns            DNS traffic analysis
   --enable-email          EMail statistics
   --enable-entropy        Entropy statistics
   --enable-exec           Execution of external programs
+  --enable-filecount      Count files in directories
   --enable-hddtemp        Query hddtempd
   --enable-interface      Interface traffic statistics
   --enable-iptables       IPTables rule counters
   --enable-ipmi           IPMI sensor statistics
   --enable-ipvs           IPVS connection statistics
   --enable-irq            IRQ statistics
@@ -1721,28 +1751,32 @@
   --enable-multimeter     Read multimeter values
   --enable-mysql          MySQL statistics
   --enable-netlink        Enhanced Linux network statistics
   --enable-network        Network communication plugin
   --enable-nfs            NFS statistics
   --enable-nginx          nginx statistics
+  --enable-notify_email   Email notifier
   --enable-ntpd           NTPd statistics
   --enable-nut            Network UPS tools statistics
+  --enable-onewire        OneWire sensor statistics
   --enable-perl           Embed a Perl interpreter
   --enable-ping           Network latency statistics
+  --enable-postgresql     PostgreSQL database statistics
   --enable-powerdns       PowerDNS statistics
   --enable-processes      Process statistics
   --enable-rrdtool        RRDTool output plugin
   --enable-sensors        lm_sensors statistics
   --enable-serial         serial port traffic
   --enable-snmp           SNMP querying plugin
   --enable-swap           Swap usage statistics
   --enable-syslog         Syslog logging plugin
   --enable-tail           Parsing of logfiles
   --enable-tape           Tape drive statistics
   --enable-tcpconns       TCP connection statistics
   --enable-teamspeak2     TeamSpeak2 server statistics
+  --enable-thermal        Linux ACPI thermal zone statistics
   --enable-unixsock       Unixsock communication plugin
   --enable-users          User statistics
   --enable-uuid           UUID as hostname plugin
   --enable-vmem           Virtual memory statistics
   --enable-vserver        Linux VServer statistics
   --enable-wireless       Wireless statistics
@@ -1771,20 +1805,25 @@
   --with-libmysql[=PREFIX]
                           Path to libmysql.
   --with-liboconfig[=PREFIX]
                           Path to liboconfig.
   --with-liboping[=PREFIX]
                           Path to liboping.
+  --with-libowcapi[=PREFIX]
+                          Path to libowcapi.
   --with-libpcap[=PREFIX] Path to libpcap.
+  --with-libesmtp[=PREFIX]
+                          Path to libesmtp.
   --with-libperl[=PREFIX] Path to libperl.
   --with-libiptc[=PREFIX] Path to libiptc.
   --with-libnetsnmp[=PREFIX]
                           Path to the Net-SNMPD library.
   --with-libxmms[=PREFIX] Path to libxmms.
   --with-libnetlink[=PREFIX]
                           Path to libnetlink.
+  --with-libpq[=PREFIX]   Path to libpq.
   --with-perl-bindings[=OPTIONS]
                           Options passed to "perl Makefile.PL".
 
 Some influential environment variables:
   CC          C compiler command
   CFLAGS      C compiler flags
@@ -1803,12 +1842,16 @@
               the first program found out of: `bison -y', `byacc', `yacc'.
   YFLAGS      The list of arguments that will be passed by default to $YACC.
               This script will default YFLAGS to the empty string to avoid a
               default value of `-d' given by some make applications.
   PKG_CONFIG  path to pkg-config utility
   KERNEL_DIR  path to Linux kernel sources
+  LIBNOTIFY_CFLAGS
+              C compiler flags for LIBNOTIFY, overriding pkg-config
+  LIBNOTIFY_LIBS
+              linker flags for LIBNOTIFY, overriding pkg-config
 
 Use these variables to override the choices made by `configure' or to help
 it to find libraries and programs with nonstandard names/locations.
 
 _ACEOF
 ac_status=$?
@@ -1867,13 +1910,13 @@
   done
 fi
 
 test -n "$ac_init_help" && exit $ac_status
 if $ac_init_version; then
   cat <<\_ACEOF
-collectd configure 4.4.5
+collectd configure 4.5.0
 generated by GNU Autoconf 2.61
 
 Copyright (C) 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001,
 2002, 2003, 2004, 2005, 2006 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
@@ -1881,13 +1924,13 @@
   exit
 fi
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
-It was created by collectd $as_me 4.4.5, which was
+It was created by collectd $as_me 4.5.0, which was
 generated by GNU Autoconf 2.61.  Invocation command line was
 
   $ $0 $@
 
 _ACEOF
 exec 5>>config.log
@@ -2574,13 +2617,13 @@
   fi
 fi
 
 
 # Define the identity of the package.
  PACKAGE='collectd'
- VERSION='4.4.5'
+ VERSION='4.5.0'
 
 
 cat >>confdefs.h <<_ACEOF
 #define PACKAGE "$PACKAGE"
 _ACEOF
 
@@ -6256,13 +6299,13 @@
     esac
   fi
   rm -rf conftest*
   ;;
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 6262 "configure"' > conftest.$ac_ext
+  echo '#line 6305 "configure"' > conftest.$ac_ext
   if { (eval echo "$as_me:$LINENO: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); }; then
    if test "$lt_cv_prog_gnu_ld" = yes; then
@@ -9078,17 +9121,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9084: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9127: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:9088: \$? = $ac_status" >&5
+   echo "$as_me:9131: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -9368,17 +9411,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9374: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9417: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:9378: \$? = $ac_status" >&5
+   echo "$as_me:9421: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -9472,17 +9515,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:9478: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:9521: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:9482: \$? = $ac_status" >&5
+   echo "$as_me:9525: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -11849,13 +11892,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 11855 "configure"
+#line 11898 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -11949,13 +11992,13 @@
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self_static=cross
 else
   lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 11955 "configure"
+#line 11998 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -14350,17 +14393,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:14356: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:14399: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:14360: \$? = $ac_status" >&5
+   echo "$as_me:14403: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -14454,17 +14497,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:14460: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:14503: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:14464: \$? = $ac_status" >&5
+   echo "$as_me:14507: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -16052,17 +16095,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:16058: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:16101: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:16062: \$? = $ac_status" >&5
+   echo "$as_me:16105: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -16156,17 +16199,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:16162: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:16205: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:16166: \$? = $ac_status" >&5
+   echo "$as_me:16209: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -18376,17 +18419,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18382: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18425: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:18386: \$? = $ac_status" >&5
+   echo "$as_me:18429: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -18666,17 +18709,17 @@
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    # The option is referenced via a variable to avoid confusing sed.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18672: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18715: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>conftest.err)
    ac_status=$?
    cat conftest.err >&5
-   echo "$as_me:18676: \$? = $ac_status" >&5
+   echo "$as_me:18719: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s "$ac_outfile"; then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings other than the usual output.
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' >conftest.exp
      $SED '/^$/d; /^ *+/d' conftest.err >conftest.er2
      if test ! -s conftest.er2 || diff conftest.exp conftest.er2 >/dev/null; then
@@ -18770,17 +18813,17 @@
    # Note that $ac_compile itself does not contain backslashes and begins
    # with a dollar sign (not a hyphen), so the echo should work correctly.
    lt_compile=`echo "$ac_compile" | $SED \
    -e 's:.*FLAGS}\{0,1\} :&$lt_compiler_flag :; t' \
    -e 's: [^ ]*conftest\.: $lt_compiler_flag&:; t' \
    -e 's:$: $lt_compiler_flag:'`
-   (eval echo "\"\$as_me:18776: $lt_compile\"" >&5)
+   (eval echo "\"\$as_me:18819: $lt_compile\"" >&5)
    (eval "$lt_compile" 2>out/conftest.err)
    ac_status=$?
    cat out/conftest.err >&5
-   echo "$as_me:18780: \$? = $ac_status" >&5
+   echo "$as_me:18823: \$? = $ac_status" >&5
    if (exit $ac_status) && test -s out/conftest2.$ac_objext
    then
      # The compiler can only warn and ignore the option if not recognized
      # So say no if there are warnings
      $echo "X$_lt_compiler_boilerplate" | $Xsed -e '/^$/d' > out/conftest.exp
      $SED '/^$/d; /^ *+/d' out/conftest.err >out/conftest.er2
@@ -21852,12 +21895,15 @@
 
 	ac_system="Solaris"
 	;;
 	*darwin*)
 	ac_system="Darwin"
 	;;
+	*openbsd*)
+	ac_system="OpenBSD"
+	;;
 	*)
 	ac_system="unknown"
 esac
 { echo "$as_me:$LINENO: result: $ac_system" >&5
 echo "${ECHO_T}$ac_system" >&6; }
 
@@ -21870,17 +21916,12 @@
 	fi
 
 	KERNEL_CFLAGS="-I$KERNEL_DIR/include"
 
 fi
 
-if test "x$ac_system" = "xSolaris"
-then
-	CPPFLAGS="$CPPFLAGS -D_POSIX_PTHREAD_SEMANTICS"
-fi
-
 #
 # Checks for header files.
 #
 { echo "$as_me:$LINENO: checking for ANSI C header files" >&5
 echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6; }
 if test "${ac_cv_header_stdc+set}" = set; then
@@ -22383,13 +22424,14 @@
 
 
 
 
 
 
-for ac_header in stdint.h stdio.h errno.h math.h stdarg.h syslog.h fcntl.h signal.h assert.h sys/types.h sys/socket.h sys/select.h poll.h netdb.h arpa/inet.h sys/resource.h sys/param.h kstat.h regex.h sys/ioctl.h endian.h sys/isa_defs.h
+
+for ac_header in stdio.h stdint.h stdbool.h errno.h math.h stdarg.h syslog.h fcntl.h signal.h assert.h sys/types.h sys/socket.h sys/select.h poll.h netdb.h arpa/inet.h sys/resource.h sys/param.h kstat.h regex.h sys/ioctl.h endian.h sys/isa_defs.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
   { echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
 if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
@@ -23883,13 +23925,12 @@
 fi
 
 done
 
 
 # For the swap module
-have_sys_swap_h="yes"
 
 for ac_header in sys/swap.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 { echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
@@ -23945,25 +23986,17 @@
 echo "${ECHO_T}$ac_res" >&6; }
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
 
-else
-  have_sys_swap_h="no"
 fi
 
 done
 
 
-if test "x$have_sys_swap_h$ac_system" = "xnoSolaris"
-then
-	{ echo "$as_me:$LINENO: Solaris detected and sys/swap.h not found: Try building a 64bit binary." >&5
-echo "$as_me: Solaris detected and sys/swap.h not found: Try building a 64bit binary." >&6;}
-fi
-
 # For load module
 # For the processes plugin
 # For users module
 
 
 
@@ -33064,12 +33097,97 @@
   BUILD_WITH_LIBSTATGRAB_LDFLAGS="$with_libstatgrab_ldflags"
 
 
 fi
 
 with_libkvm="no"
+{ echo "$as_me:$LINENO: checking for kvm_getprocs in -lkvm" >&5
+echo $ECHO_N "checking for kvm_getprocs in -lkvm... $ECHO_C" >&6; }
+if test "${ac_cv_lib_kvm_kvm_getprocs+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lkvm  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char kvm_getprocs ();
+int
+main ()
+{
+return kvm_getprocs ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_lib_kvm_kvm_getprocs=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_lib_kvm_kvm_getprocs=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_kvm_kvm_getprocs" >&5
+echo "${ECHO_T}$ac_cv_lib_kvm_kvm_getprocs" >&6; }
+if test $ac_cv_lib_kvm_kvm_getprocs = yes; then
+  with_kvm_getprocs="yes"
+else
+  with_kvm_getprocs="no"
+fi
+
+if test "x$with_kvm_getprocs" = "xyes"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_LIBKVM_GETPROCS 1
+_ACEOF
+
+	with_libkvm="yes"
+fi
+ if test "x$with_kvm_getprocs" = "xyes"; then
+  BUILD_WITH_LIBKVM_GETPROCS_TRUE=
+  BUILD_WITH_LIBKVM_GETPROCS_FALSE='#'
+else
+  BUILD_WITH_LIBKVM_GETPROCS_TRUE='#'
+  BUILD_WITH_LIBKVM_GETPROCS_FALSE=
+fi
+
+
 { echo "$as_me:$LINENO: checking for kvm_getswapinfo in -lkvm" >&5
 echo $ECHO_N "checking for kvm_getswapinfo in -lkvm... $ECHO_C" >&6; }
 if test "${ac_cv_lib_kvm_kvm_getswapinfo+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
@@ -33149,12 +33267,97 @@
 else
   BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE='#'
   BUILD_WITH_LIBKVM_GETSWAPINFO_FALSE=
 fi
 
 
+{ echo "$as_me:$LINENO: checking for kvm_nlist in -lkvm" >&5
+echo $ECHO_N "checking for kvm_nlist in -lkvm... $ECHO_C" >&6; }
+if test "${ac_cv_lib_kvm_kvm_nlist+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lkvm  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char kvm_nlist ();
+int
+main ()
+{
+return kvm_nlist ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_lib_kvm_kvm_nlist=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_lib_kvm_kvm_nlist=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_kvm_kvm_nlist" >&5
+echo "${ECHO_T}$ac_cv_lib_kvm_kvm_nlist" >&6; }
+if test $ac_cv_lib_kvm_kvm_nlist = yes; then
+  with_kvm_nlist="yes"
+else
+  with_kvm_nlist="no"
+fi
+
+if test "x$with_kvm_nlist" = "xyes"
+then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_LIBKVM_NLIST 1
+_ACEOF
+
+	with_libkvm="yes"
+fi
+ if test "x$with_kvm_nlist" = "xyes"; then
+  BUILD_WITH_LIBKVM_NLIST_TRUE=
+  BUILD_WITH_LIBKVM_NLIST_FALSE='#'
+else
+  BUILD_WITH_LIBKVM_NLIST_TRUE='#'
+  BUILD_WITH_LIBKVM_NLIST_FALSE=
+fi
+
+
 with_sensors_cflags=""
 with_sensors_ldflags=""
 
 # Check whether --with-lm-sensors was given.
 if test "${with_lm_sensors+set}" = set; then
   withval=$with_lm_sensors;
@@ -33471,21 +33674,19 @@
 then
 	with_mysql_cflags=`$with_mysql_config --cflags 2>/dev/null`
 	mysql_config_status=$?
 
 	if test $mysql_config_status -ne 0
 	then
-		with_libmysql="no ($with_mysql_config failed)"
+		with_libmysql="no"
 	else
 		SAVE_CPPFLAGS="$CPPFLAGS"
 		CPPFLAGS="$CPPFLAGS $with_mysql_cflags"
 
-		have_mysql_h="no"
-		have_mysql_mysql_h="no"
 
-for ac_header in mysql.h
+for ac_header in mysql/mysql.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
   { echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
 if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
@@ -33613,178 +33814,31 @@
 
 fi
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
- have_mysql_h="yes"
-fi
-
-done
-
-
-		if test "x$have_mysql_h" = "xno"
-		then
-
-for ac_header in mysql/mysql.h
-do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  { echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ echo "$as_me:$LINENO: checking $ac_header usability" >&5
-echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-$ac_includes_default
-#include <$ac_header>
-_ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  ac_header_compiler=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_header_compiler=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
-echo "${ECHO_T}$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ echo "$as_me:$LINENO: checking $ac_header presence" >&5
-echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-#include <$ac_header>
-_ACEOF
-if { (ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then
-  ac_header_preproc=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-  ac_header_preproc=no
-fi
-
-rm -f conftest.err conftest.$ac_ext
-{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
-echo "${ECHO_T}$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
-  yes:no: )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
-echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
-    ac_header_preproc=yes
-    ;;
-  no:yes:* )
-    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
-echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
-echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
-echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
-echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
-echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
-    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
-echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
 
-    ;;
-esac
-{ echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  eval "$as_ac_Header=\$ac_header_preproc"
-fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-
-fi
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
- have_mysql_mysql_h="yes"
+  with_libmysql="no (mysql/mysql.h not found)"
 fi
 
 done
 
-		fi
-
-		if test "x$have_mysql_h$have_mysql_mysql_h" = "xnono"
-		then
-			with_libmysql="no (mysql.h not found)"
-		fi
 
 		CPPFLAGS="$SAVE_CPPFLAGS"
 	fi
 fi
 if test "x$with_libmysql" = "xyes"
 then
 	with_mysql_libs=`$with_mysql_config --libs 2>/dev/null`
 	mysql_config_status=$?
 
 	if test $mysql_config_status -ne 0
 	then
-		with_libmysql="no ($with_mysql_config failed)"
+		with_libmysql="no"
 	else
 		{ echo "$as_me:$LINENO: checking for mysql_init in -lmysqlclient" >&5
 echo $ECHO_N "checking for mysql_init in -lmysqlclient... $ECHO_C" >&6; }
 if test "${ac_cv_lib_mysqlclient_mysql_init+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
@@ -34124,111 +34178,40 @@
 else
   BUILD_WITH_OWN_LIBOPING_TRUE='#'
   BUILD_WITH_OWN_LIBOPING_FALSE=
 fi
 
 
+with_libowcapi_cppflags=""
+with_libowcapi_libs="-lowcapi"
 
-# Check whether --with-libpcap was given.
-if test "${with_libpcap+set}" = set; then
-  withval=$with_libpcap;
+# Check whether --with-libowcapi was given.
+if test "${with_libowcapi+set}" = set; then
+  withval=$with_libowcapi;
 	if test "x$withval" != "xno" && test "x$withval" != "xyes"
 	then
-		LDFLAGS="$LDFLAGS -L$withval/lib"
-		CPPFLAGS="$CPPFLAGS -I$withval/include"
-		with_libpcap="yes"
+		with_libowcapi_cppflags="-I$withval/include"
+		with_libowcapi_libs="-L$withval/lib -lowcapi"
+		with_libowcapi="yes"
 	else
-		with_libpcap="$withval"
+		with_libowcapi="$withval"
 	fi
 
 else
 
-	with_libpcap="yes"
+	with_libowcapi="yes"
 
 fi
 
-if test "x$with_libpcap" = "xyes"
+if test "x$with_libowcapi" = "xyes"
 then
-	{ echo "$as_me:$LINENO: checking for pcap_open_live in -lpcap" >&5
-echo $ECHO_N "checking for pcap_open_live in -lpcap... $ECHO_C" >&6; }
-if test "${ac_cv_lib_pcap_pcap_open_live+set}" = set; then
-  echo $ECHO_N "(cached) $ECHO_C" >&6
-else
-  ac_check_lib_save_LIBS=$LIBS
-LIBS="-lpcap  $LIBS"
-cat >conftest.$ac_ext <<_ACEOF
-/* confdefs.h.  */
-_ACEOF
-cat confdefs.h >>conftest.$ac_ext
-cat >>conftest.$ac_ext <<_ACEOF
-/* end confdefs.h.  */
-
-/* Override any GCC internal prototype to avoid an error.
-   Use char because int might match the return type of a GCC
-   builtin and then its argument prototype would still apply.  */
-#ifdef __cplusplus
-extern "C"
-#endif
-char pcap_open_live ();
-int
-main ()
-{
-return pcap_open_live ();
-  ;
-  return 0;
-}
-_ACEOF
-rm -f conftest.$ac_objext conftest$ac_exeext
-if { (ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_link") 2>conftest.er1
-  ac_status=$?
-  grep -v '^ *+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:$LINENO: \$? = $ac_status" >&5
-  (exit $ac_status); } && {
-	 test -z "$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       } && test -s conftest$ac_exeext &&
-       $as_test_x conftest$ac_exeext; then
-  ac_cv_lib_pcap_pcap_open_live=yes
-else
-  echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-	ac_cv_lib_pcap_pcap_open_live=no
-fi
-
-rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
-      conftest$ac_exeext conftest.$ac_ext
-LIBS=$ac_check_lib_save_LIBS
-fi
-{ echo "$as_me:$LINENO: result: $ac_cv_lib_pcap_pcap_open_live" >&5
-echo "${ECHO_T}$ac_cv_lib_pcap_pcap_open_live" >&6; }
-if test $ac_cv_lib_pcap_pcap_open_live = yes; then
-
-
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_LIBPCAP 1
-_ACEOF
-
-
-else
-  with_libpcap="no (libpcap not found)"
-fi
+	SAVE_CPPFLAGS="$CPPFLAGS"
+	CPPFLAGS="$with_libowcapi_cppflags"
 
-fi
-if test "x$with_libpcap" = "xyes"
-then
 
-for ac_header in pcap.h
+for ac_header in owcapi.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
 if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
   { echo "$as_me:$LINENO: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
 if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
@@ -34356,119 +34339,54 @@
 
 fi
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<_ACEOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 _ACEOF
-
-
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_PCAP_H 1
-_ACEOF
-
-
+ with_libowcapi="yes"
 else
-  with_libpcap="no (pcap.h not found)"
+  with_libowcapi="no (owcapi.h not found)"
 fi
 
 done
 
-fi
-if test "x$with_libpcap" = "xyes"
-then
-	collect_libpcap=1
-else
-	collect_libpcap=0
-fi
-
-cat >>confdefs.h <<_ACEOF
-#define COLLECT_LIBPCAP $collect_libpcap
-_ACEOF
-
- if test "x$with_libpcap" = "xyes"; then
-  BUILD_WITH_LIBPCAP_TRUE=
-  BUILD_WITH_LIBPCAP_FALSE='#'
-else
-  BUILD_WITH_LIBPCAP_TRUE='#'
-  BUILD_WITH_LIBPCAP_FALSE=
-fi
-
-
-perl_interpreter="perl"
-
-# Check whether --with-libperl was given.
-if test "${with_libperl+set}" = set; then
-  withval=$with_libperl;
-	if test "x$withval" != "xno" && test "x$withval" != "xyes"
-	then
-		LDFLAGS="$LDFLAGS -L$withval/lib"
-		CPPFLAGS="$CPPFLAGS -I$withval/include"
-		perl_interpreter="$withval/bin/perl"
-		with_libperl="yes"
-	else
-		with_libperl="$withval"
-	fi
-
-else
-
-	with_libperl="yes"
-
-fi
-
 
-{ echo "$as_me:$LINENO: checking for perl" >&5
-echo $ECHO_N "checking for perl... $ECHO_C" >&6; }
-perl_interpreter=`which "$perl_interpreter" 2> /dev/null`
-if test -x "$perl_interpreter"
-then
-	{ echo "$as_me:$LINENO: result: yes" >&5
-echo "${ECHO_T}yes" >&6; }
-else
-	perl_interpreter=""
-	{ echo "$as_me:$LINENO: result: no" >&5
-echo "${ECHO_T}no" >&6; }
+	CPPFLAGS="$SAVE_CPPFLAGS"
 fi
-
-PERL="$perl_interpreter"
-
-
-if test "x$with_libperl" = "xyes" \
-	&& test -n "$perl_interpreter"
+if test "x$with_libowcapi" = "xyes"
 then
-  SAVE_CFLAGS=$CFLAGS
-  SAVE_LDFLAGS=$LDFLAGS
-  PERL_CFLAGS=`$perl_interpreter -MExtUtils::Embed -e ccopts`
-  PERL_LDFLAGS=`$perl_interpreter -MExtUtils::Embed -e ldopts`
-  CFLAGS="$CFLAGS $PERL_CFLAGS"
-  LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
+	SAVE_LDFLAGS="$LDFLAGS"
+	SAVE_CPPFLAGS="$CPPFLAGS"
+	LDFLAGS="$with_libowcapi_libs"
+	CPPFLAGS="$with_libowcapi_cppflags"
 
-  { echo "$as_me:$LINENO: checking for libperl" >&5
-echo $ECHO_N "checking for libperl... $ECHO_C" >&6; }
-if test "${have_libperl+set}" = set; then
+	{ echo "$as_me:$LINENO: checking for OW_get in -lowcapi" >&5
+echo $ECHO_N "checking for OW_get in -lowcapi... $ECHO_C" >&6; }
+if test "${ac_cv_lib_owcapi_OW_get+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat >conftest.$ac_ext <<_ACEOF
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lowcapi  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
 
-#include <EXTERN.h>
-#include <perl.h>
-#include <XSUB.h>
-
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char OW_get ();
 int
 main ()
 {
-
-       PerlInterpreter *perl = NULL;
-       Perl_load_module (perl, PERL_LOADMOD_NOIMPORT,
-			 newSVpv ("Collectd::Plugin::FooBar", 24),
-			 Nullsv);
-
+return OW_get ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
 if { (ac_try="$ac_link"
@@ -34485,62 +34403,727 @@
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } && {
 	 test -z "$ac_c_werror_flag" ||
 	 test ! -s conftest.err
        } && test -s conftest$ac_exeext &&
        $as_test_x conftest$ac_exeext; then
-  have_libperl="yes"
+  ac_cv_lib_owcapi_OW_get=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-	have_libperl="no"
-
+	ac_cv_lib_owcapi_OW_get=no
 fi
 
 rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
       conftest$ac_exeext conftest.$ac_ext
-
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_owcapi_OW_get" >&5
+echo "${ECHO_T}$ac_cv_lib_owcapi_OW_get" >&6; }
+if test $ac_cv_lib_owcapi_OW_get = yes; then
+  with_libowcapi="yes"
+else
+  with_libowcapi="no (libowcapi not found)"
 fi
-{ echo "$as_me:$LINENO: result: $have_libperl" >&5
-echo "${ECHO_T}$have_libperl" >&6; }
-
-  if test "x$have_libperl" = "xyes"
-  then
-
-cat >>confdefs.h <<\_ACEOF
-#define HAVE_LIBPERL 1
-_ACEOF
 
 
+	LDFLAGS="$SAVE_LDFLAGS"
+	CPPFLAGS="$SAVE_CPPFLAGS"
+fi
+if test "x$with_libowcapi" = "xyes"
+then
+	BUILD_WITH_LIBOWCAPI_CPPFLAGS="$with_libowcapi_cppflags"
+	BUILD_WITH_LIBOWCAPI_LIBS="$with_libowcapi_libs"
 
-  else
-	  with_libperl="no"
-  fi
 
-  CFLAGS=$SAVE_CFLAGS
-  LDFLAGS=$SAVE_LDFLAGS
-else if test -z "$perl_interpreter"; then
-  with_libperl="no (no perl interpreter found)"
-  have_libperl="no"
-fi; fi
- if test "x$with_libperl" = "xyes"; then
-  BUILD_WITH_LIBPERL_TRUE=
-  BUILD_WITH_LIBPERL_FALSE='#'
-else
-  BUILD_WITH_LIBPERL_TRUE='#'
-  BUILD_WITH_LIBPERL_FALSE=
 fi
 
 
-if test "x$with_libperl" = "xyes"
-then
-	SAVE_CFLAGS=$CFLAGS
-	SAVE_LDFLAGS=$LDFLAGS
-	CFLAGS="$CFLAGS $PERL_CFLAGS"
-	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
+
+# Check whether --with-libpcap was given.
+if test "${with_libpcap+set}" = set; then
+  withval=$with_libpcap;
+	if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	then
+		LDFLAGS="$LDFLAGS -L$withval/lib"
+		CPPFLAGS="$CPPFLAGS -I$withval/include"
+		with_libpcap="yes"
+	else
+		with_libpcap="$withval"
+	fi
+
+else
+
+	with_libpcap="yes"
+
+fi
+
+if test "x$with_libpcap" = "xyes"
+then
+	{ echo "$as_me:$LINENO: checking for pcap_open_live in -lpcap" >&5
+echo $ECHO_N "checking for pcap_open_live in -lpcap... $ECHO_C" >&6; }
+if test "${ac_cv_lib_pcap_pcap_open_live+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lpcap  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char pcap_open_live ();
+int
+main ()
+{
+return pcap_open_live ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_lib_pcap_pcap_open_live=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_lib_pcap_pcap_open_live=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_pcap_pcap_open_live" >&5
+echo "${ECHO_T}$ac_cv_lib_pcap_pcap_open_live" >&6; }
+if test $ac_cv_lib_pcap_pcap_open_live = yes; then
+
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_LIBPCAP 1
+_ACEOF
+
+
+else
+  with_libpcap="no (libpcap not found)"
+fi
+
+fi
+if test "x$with_libpcap" = "xyes"
+then
+
+for ac_header in pcap.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  { echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+else
+  # Is the header compilable?
+{ echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_header_compiler=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6; }
+
+# Is the header present?
+{ echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+
+rm -f conftest.err conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6; }
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+
+    ;;
+esac
+{ echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_PCAP_H 1
+_ACEOF
+
+
+else
+  with_libpcap="no (pcap.h not found)"
+fi
+
+done
+
+fi
+if test "x$with_libpcap" = "xyes"
+then
+	collect_libpcap=1
+else
+	collect_libpcap=0
+fi
+
+cat >>confdefs.h <<_ACEOF
+#define COLLECT_LIBPCAP $collect_libpcap
+_ACEOF
+
+ if test "x$with_libpcap" = "xyes"; then
+  BUILD_WITH_LIBPCAP_TRUE=
+  BUILD_WITH_LIBPCAP_FALSE='#'
+else
+  BUILD_WITH_LIBPCAP_TRUE='#'
+  BUILD_WITH_LIBPCAP_FALSE=
+fi
+
+
+
+# Check whether --with-libesmtp was given.
+if test "${with_libesmtp+set}" = set; then
+  withval=$with_libesmtp;
+	if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	then
+		LDFLAGS="$LDFLAGS -L$withval/lib"
+		CPPFLAGS="$CPPFLAGS -I$withval/include -D_THREAD_SAFE"
+		with_libesmtp="yes"
+	else
+		with_libesmtp="$withval"
+	fi
+
+else
+
+	with_libesmtp="yes"
+
+fi
+
+if test "x$with_libesmtp" = "xyes"
+then
+	{ echo "$as_me:$LINENO: checking for smtp_create_session in -lesmtp" >&5
+echo $ECHO_N "checking for smtp_create_session in -lesmtp... $ECHO_C" >&6; }
+if test "${ac_cv_lib_esmtp_smtp_create_session+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lesmtp  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char smtp_create_session ();
+int
+main ()
+{
+return smtp_create_session ();
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_lib_esmtp_smtp_create_session=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_cv_lib_esmtp_smtp_create_session=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
+fi
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_esmtp_smtp_create_session" >&5
+echo "${ECHO_T}$ac_cv_lib_esmtp_smtp_create_session" >&6; }
+if test $ac_cv_lib_esmtp_smtp_create_session = yes; then
+
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_LIBESMTP 1
+_ACEOF
+
+
+else
+  with_libesmtp="no (libesmtp not found)"
+fi
+
+fi
+if test "x$with_libesmtp" = "xyes"
+then
+
+for ac_header in libesmtp.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  { echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+else
+  # Is the header compilable?
+{ echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_header_compiler=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6; }
+
+# Is the header present?
+{ echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+
+rm -f conftest.err conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6; }
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+
+    ;;
+esac
+{ echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_LIBESMTP_H 1
+_ACEOF
+
+
+else
+  with_libesmtp="no (libesmtp.h not found)"
+fi
+
+done
+
+fi
+if test "x$with_libesmtp" = "xyes"
+then
+	collect_libesmtp=1
+else
+	collect_libesmtp=0
+fi
+
+cat >>confdefs.h <<_ACEOF
+#define COLLECT_LIBESMTP $collect_libesmtp
+_ACEOF
+
+ if test "x$with_libesmtp" = "xyes"; then
+  BUILD_WITH_LIBESMTP_TRUE=
+  BUILD_WITH_LIBESMTP_FALSE='#'
+else
+  BUILD_WITH_LIBESMTP_TRUE='#'
+  BUILD_WITH_LIBESMTP_FALSE=
+fi
+
+
+perl_interpreter="perl"
+
+# Check whether --with-libperl was given.
+if test "${with_libperl+set}" = set; then
+  withval=$with_libperl;
+ 	if test -x "$withval"
+	then
+		perl_interpreter="$withval"
+		with_libperl="yes"
+	else if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	then
+		LDFLAGS="$LDFLAGS -L$withval/lib"
+		CPPFLAGS="$CPPFLAGS -I$withval/include"
+		perl_interpreter="$withval/bin/perl"
+		with_libperl="yes"
+	else
+		with_libperl="$withval"
+	fi; fi
+
+else
+
+	with_libperl="yes"
+
+fi
+
+
+{ echo "$as_me:$LINENO: checking for perl" >&5
+echo $ECHO_N "checking for perl... $ECHO_C" >&6; }
+perl_interpreter=`which "$perl_interpreter" 2> /dev/null`
+if test -x "$perl_interpreter"
+then
+	{ echo "$as_me:$LINENO: result: yes ($perl_interpreter)" >&5
+echo "${ECHO_T}yes ($perl_interpreter)" >&6; }
+else
+	perl_interpreter=""
+	{ echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+fi
+
+PERL="$perl_interpreter"
+
+
+if test "x$with_libperl" = "xyes" \
+	&& test -n "$perl_interpreter"
+then
+  SAVE_CFLAGS=$CFLAGS
+  SAVE_LDFLAGS=$LDFLAGS
+  PERL_CFLAGS=`$perl_interpreter -MExtUtils::Embed -e ccopts`
+  PERL_LDFLAGS=`$perl_interpreter -MExtUtils::Embed -e ldopts`
+  CFLAGS="$CFLAGS $PERL_CFLAGS"
+  LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
+
+  { echo "$as_me:$LINENO: checking for libperl" >&5
+echo $ECHO_N "checking for libperl... $ECHO_C" >&6; }
+if test "${have_libperl+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+
+#define PERL_NO_GET_CONTEXT
+#include <EXTERN.h>
+#include <perl.h>
+#include <XSUB.h>
+
+int
+main ()
+{
+
+       dTHX;
+       load_module (PERL_LOADMOD_NOIMPORT,
+			 newSVpv ("Collectd::Plugin::FooBar", 24),
+			 Nullsv);
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_link") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  have_libperl="yes"
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	have_libperl="no"
+
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+
+fi
+{ echo "$as_me:$LINENO: result: $have_libperl" >&5
+echo "${ECHO_T}$have_libperl" >&6; }
+
+  if test "x$have_libperl" = "xyes"
+  then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_LIBPERL 1
+_ACEOF
+
+
+
+  else
+	  with_libperl="no"
+  fi
+
+  CFLAGS=$SAVE_CFLAGS
+  LDFLAGS=$SAVE_LDFLAGS
+else if test -z "$perl_interpreter"; then
+  with_libperl="no (no perl interpreter found)"
+  have_libperl="no"
+fi; fi
+ if test "x$with_libperl" = "xyes"; then
+  BUILD_WITH_LIBPERL_TRUE=
+  BUILD_WITH_LIBPERL_FALSE='#'
+else
+  BUILD_WITH_LIBPERL_TRUE='#'
+  BUILD_WITH_LIBPERL_FALSE=
+fi
+
+
+if test "x$with_libperl" = "xyes"
+then
+	SAVE_CFLAGS=$CFLAGS
+	SAVE_LDFLAGS=$LDFLAGS
+	CFLAGS="$CFLAGS $PERL_CFLAGS"
+	LDFLAGS="$LDFLAGS $PERL_LDFLAGS"
 
 	{ echo "$as_me:$LINENO: checking if perl supports ithreads" >&5
 echo $ECHO_N "checking if perl supports ithreads... $ECHO_C" >&6; }
 if test "${have_perl_ithreads+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
@@ -35248,12 +35831,84 @@
 else
   BUILD_WITH_LIBNETSNMP_TRUE='#'
   BUILD_WITH_LIBNETSNMP_FALSE=
 fi
 
 
+
+pkg_failed=no
+{ echo "$as_me:$LINENO: checking for LIBNOTIFY" >&5
+echo $ECHO_N "checking for LIBNOTIFY... $ECHO_C" >&6; }
+
+if test -n "$PKG_CONFIG"; then
+    if test -n "$LIBNOTIFY_CFLAGS"; then
+        pkg_cv_LIBNOTIFY_CFLAGS="$LIBNOTIFY_CFLAGS"
+    else
+        if test -n "$PKG_CONFIG" && \
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libnotify\"") >&5
+  ($PKG_CONFIG --exists --print-errors "libnotify") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  pkg_cv_LIBNOTIFY_CFLAGS=`$PKG_CONFIG --cflags "libnotify" 2>/dev/null`
+else
+  pkg_failed=yes
+fi
+    fi
+else
+	pkg_failed=untried
+fi
+if test -n "$PKG_CONFIG"; then
+    if test -n "$LIBNOTIFY_LIBS"; then
+        pkg_cv_LIBNOTIFY_LIBS="$LIBNOTIFY_LIBS"
+    else
+        if test -n "$PKG_CONFIG" && \
+    { (echo "$as_me:$LINENO: \$PKG_CONFIG --exists --print-errors \"libnotify\"") >&5
+  ($PKG_CONFIG --exists --print-errors "libnotify") 2>&5
+  ac_status=$?
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); }; then
+  pkg_cv_LIBNOTIFY_LIBS=`$PKG_CONFIG --libs "libnotify" 2>/dev/null`
+else
+  pkg_failed=yes
+fi
+    fi
+else
+	pkg_failed=untried
+fi
+
+
+
+if test $pkg_failed = yes; then
+
+if $PKG_CONFIG --atleast-pkgconfig-version 0.20; then
+        _pkg_short_errors_supported=yes
+else
+        _pkg_short_errors_supported=no
+fi
+        if test $_pkg_short_errors_supported = yes; then
+	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --short-errors --errors-to-stdout --print-errors "libnotify"`
+        else
+	        LIBNOTIFY_PKG_ERRORS=`$PKG_CONFIG --errors-to-stdout --print-errors "libnotify"`
+        fi
+	# Put the nasty error message in config.log where it belongs
+	echo "$LIBNOTIFY_PKG_ERRORS" >&5
+
+	{ echo "$as_me:$LINENO: result: no" >&5
+echo "${ECHO_T}no" >&6; }
+                with_libnotify="no ($LIBNOTIFY_PKG_ERRORS)"
+elif test $pkg_failed = untried; then
+	with_libnotify="no ($LIBNOTIFY_PKG_ERRORS)"
+else
+	LIBNOTIFY_CFLAGS=$pkg_cv_LIBNOTIFY_CFLAGS
+	LIBNOTIFY_LIBS=$pkg_cv_LIBNOTIFY_LIBS
+        { echo "$as_me:$LINENO: result: yes" >&5
+echo "${ECHO_T}yes" >&6; }
+	with_libnotify="yes"
+fi
+
 with_libupsclient="no (pkg-config isn't available)"
 with_libupsclient_cflags=""
 with_libupsclient_libs=""
 if test "x$PKG_CONFIG" != "x"
 then
 	pkg-config --exists 'libupsclient' 2>/dev/null
@@ -36147,159 +36802,462 @@
 
 fi
  if test "x$with_libnetlink" = "xyes"; then
   BUILD_WITH_LIBNETLINK_TRUE=
   BUILD_WITH_LIBNETLINK_FALSE='#'
 else
-  BUILD_WITH_LIBNETLINK_TRUE='#'
-  BUILD_WITH_LIBNETLINK_FALSE=
+  BUILD_WITH_LIBNETLINK_TRUE='#'
+  BUILD_WITH_LIBNETLINK_FALSE=
+fi
+
+
+with_libopenipmipthread="yes"
+with_libopenipmipthread_cflags=""
+with_libopenipmipthread_libs=""
+
+{ echo "$as_me:$LINENO: checking for pkg-config" >&5
+echo $ECHO_N "checking for pkg-config... $ECHO_C" >&6; }
+temp_result="no"
+if test "x$PKG_CONFIG" = "x"
+then
+	with_libopenipmipthread="no"
+	temp_result="no"
+else
+	temp_result="$PKG_CONFIG"
+fi
+{ echo "$as_me:$LINENO: result: $temp_result" >&5
+echo "${ECHO_T}$temp_result" >&6; }
+
+if test "x$with_libopenipmipthread" = "xyes"
+then
+	{ echo "$as_me:$LINENO: checking for libOpenIPMIpthread" >&5
+echo $ECHO_N "checking for libOpenIPMIpthread... $ECHO_C" >&6; }
+	$PKG_CONFIG --exists OpenIPMIpthread 2>/dev/null
+	if test "$?" != "0"
+	then
+		with_libopenipmipthread="no ($PKG_CONFIG doesn't know OpenIPMIpthread)"
+	fi
+	{ echo "$as_me:$LINENO: result: $with_libopenipmipthread" >&5
+echo "${ECHO_T}$with_libopenipmipthread" >&6; }
+fi
+
+if test "x$with_libopenipmipthread" = "xyes"
+then
+	{ echo "$as_me:$LINENO: checking for libOpenIPMIpthread CFLAGS" >&5
+echo $ECHO_N "checking for libOpenIPMIpthread CFLAGS... $ECHO_C" >&6; }
+	temp_result="`$PKG_CONFIG --cflags OpenIPMIpthread`"
+	if test "$?" = "0"
+	then
+		with_libopenipmipthread_cflags="$temp_result"
+	else
+		with_libopenipmipthread="no ($PKG_CONFIG --cflags OpenIPMIpthread failed)"
+		temp_result="$PKG_CONFIG --cflags OpenIPMIpthread failed"
+	fi
+	{ echo "$as_me:$LINENO: result: $temp_result" >&5
+echo "${ECHO_T}$temp_result" >&6; }
+fi
+
+if test "x$with_libopenipmipthread" = "xyes"
+then
+	{ echo "$as_me:$LINENO: checking for libOpenIPMIpthread LDFLAGS" >&5
+echo $ECHO_N "checking for libOpenIPMIpthread LDFLAGS... $ECHO_C" >&6; }
+	temp_result="`$PKG_CONFIG --libs OpenIPMIpthread`"
+	if test "$?" = "0"
+	then
+		with_libopenipmipthread_ldflags="$temp_result"
+	else
+		with_libopenipmipthread="no ($PKG_CONFIG --libs OpenIPMIpthread failed)"
+		temp_result="$PKG_CONFIG --libs OpenIPMIpthread failed"
+	fi
+	{ echo "$as_me:$LINENO: result: $temp_result" >&5
+echo "${ECHO_T}$temp_result" >&6; }
+fi
+
+if test "x$with_libopenipmipthread" = "xyes"
+then
+	SAVE_CPPFLAGS="$CPPFLAGS"
+	CPPFLAGS="$CPPFLAGS $with_libopenipmipthread_cflags"
+
+
+for ac_header in OpenIPMI/ipmi_smi.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+{ echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <OpenIPMI/ipmiif.h>
+#include <OpenIPMI/ipmi_err.h>
+#include <OpenIPMI/ipmi_posix.h>
+#include <OpenIPMI/ipmi_conn.h>
+
+
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  eval "$as_ac_Header=yes"
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	eval "$as_ac_Header=no"
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
+ with_libopenipmipthread="yes"
+else
+  with_libopenipmipthread="no (OpenIPMI/ipmi_smi.h not found)"
+fi
+
+done
+
+
+	CPPFLAGS="$SAVE_CPPFLAGS"
+fi
+
+if test "x$with_libopenipmipthread" = "xyes"
+then
+	BUILD_WITH_OPENIPMI_CFLAGS="$with_libopenipmipthread_cflags"
+	BUILD_WITH_OPENIPMI_LIBS="$with_libopenipmipthread_ldflags"
+
+
+fi
+
+with_pg_config="pg_config"
+with_libpq_includedir=""
+with_libpq_libdir=""
+with_libpq_cppflags=""
+with_libpq_ldflags=""
+
+# Check whether --with-libpq was given.
+if test "${with_libpq+set}" = set; then
+  withval=$with_libpq;
+	if test "x$withval" = "xno"
+	then
+		with_libpq="no"
+	else if test "x$withval" = "xyes"
+	then
+		with_libpq="yes"
+	else
+		if test -f "$withval" && test -x "$withval";
+		then
+			with_pg_config="$withval"
+		else if test -x "$withval/bin/pg_config"
+		then
+			with_pg_config="$withval/bin/pg_config"
+		fi; fi
+		with_libpq="yes"
+	fi; fi
+
+else
+
+	with_libpq="yes"
+
+fi
+
+if test "x$with_libpq" = "xyes"
+then
+	with_libpq_includedir=`$with_pg_config --includedir 2> /dev/null`
+	pg_config_status=$?
+
+	if test $pg_config_status -eq 0
+	then
+		if test -n "$with_libpq_includedir"; then
+			for dir in $with_libpq_includedir; do
+				with_libpq_cppflags="$with_libpq_cppflags -I$dir"
+			done
+		fi
+	else
+		{ echo "$as_me:$LINENO: WARNING: $with_pg_config returned with status $pg_config_status" >&5
+echo "$as_me: WARNING: $with_pg_config returned with status $pg_config_status" >&2;}
+	fi
+
+	SAVE_CPPFLAGS="$CPPFLAGS"
+	CPPFLAGS="$CPPFLAGS $with_libpq_cppflags"
+
+
+for ac_header in libpq-fe.h
+do
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  { echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
+else
+  # Is the header compilable?
+{ echo "$as_me:$LINENO: checking $ac_header usability" >&5
+echo $ECHO_N "checking $ac_header usability... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+$ac_includes_default
+#include <$ac_header>
+_ACEOF
+rm -f conftest.$ac_objext
+if { (ac_try="$ac_compile"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_compile") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } && {
+	 test -z "$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       } && test -s conftest.$ac_objext; then
+  ac_header_compiler=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+	ac_header_compiler=no
+fi
+
+rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_compiler" >&5
+echo "${ECHO_T}$ac_header_compiler" >&6; }
+
+# Is the header present?
+{ echo "$as_me:$LINENO: checking $ac_header presence" >&5
+echo $ECHO_N "checking $ac_header presence... $ECHO_C" >&6; }
+cat >conftest.$ac_ext <<_ACEOF
+/* confdefs.h.  */
+_ACEOF
+cat confdefs.h >>conftest.$ac_ext
+cat >>conftest.$ac_ext <<_ACEOF
+/* end confdefs.h.  */
+#include <$ac_header>
+_ACEOF
+if { (ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.er1
+  ac_status=$?
+  grep -v '^ *+' conftest.er1 >conftest.err
+  rm -f conftest.er1
+  cat conftest.err >&5
+  echo "$as_me:$LINENO: \$? = $ac_status" >&5
+  (exit $ac_status); } >/dev/null && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }; then
+  ac_header_preproc=yes
+else
+  echo "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+  ac_header_preproc=no
+fi
+
+rm -f conftest.err conftest.$ac_ext
+{ echo "$as_me:$LINENO: result: $ac_header_preproc" >&5
+echo "${ECHO_T}$ac_header_preproc" >&6; }
+
+# So?  What about this header?
+case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in
+  yes:no: )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&5
+echo "$as_me: WARNING: $ac_header: accepted by the compiler, rejected by the preprocessor!" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the compiler's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the compiler's result" >&2;}
+    ac_header_preproc=yes
+    ;;
+  no:yes:* )
+    { echo "$as_me:$LINENO: WARNING: $ac_header: present but cannot be compiled" >&5
+echo "$as_me: WARNING: $ac_header: present but cannot be compiled" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     check for missing prerequisite headers?" >&5
+echo "$as_me: WARNING: $ac_header:     check for missing prerequisite headers?" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: see the Autoconf documentation" >&5
+echo "$as_me: WARNING: $ac_header: see the Autoconf documentation" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&5
+echo "$as_me: WARNING: $ac_header:     section \"Present But Cannot Be Compiled\"" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: proceeding with the preprocessor's result" >&5
+echo "$as_me: WARNING: $ac_header: proceeding with the preprocessor's result" >&2;}
+    { echo "$as_me:$LINENO: WARNING: $ac_header: in the future, the compiler will take precedence" >&5
+echo "$as_me: WARNING: $ac_header: in the future, the compiler will take precedence" >&2;}
+
+    ;;
+esac
+{ echo "$as_me:$LINENO: checking for $ac_header" >&5
+echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
+if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+  eval "$as_ac_Header=\$ac_header_preproc"
 fi
+ac_res=`eval echo '${'$as_ac_Header'}'`
+	       { echo "$as_me:$LINENO: result: $ac_res" >&5
+echo "${ECHO_T}$ac_res" >&6; }
 
+fi
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
+  cat >>confdefs.h <<_ACEOF
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
+_ACEOF
 
-with_libopenipmipthread="yes"
-with_libopenipmipthread_cflags=""
-with_libopenipmipthread_libs=""
-
-{ echo "$as_me:$LINENO: checking for pkg-config" >&5
-echo $ECHO_N "checking for pkg-config... $ECHO_C" >&6; }
-temp_result="no"
-if test "x$PKG_CONFIG" = "x"
-then
-	with_libopenipmipthread="no"
-	temp_result="no"
 else
-	temp_result="$PKG_CONFIG"
+  with_libpq="no (libpq-fe.h not found)"
 fi
-{ echo "$as_me:$LINENO: result: $temp_result" >&5
-echo "${ECHO_T}$temp_result" >&6; }
 
-if test "x$with_libopenipmipthread" = "xyes"
-then
-	{ echo "$as_me:$LINENO: checking for libOpenIPMIpthread" >&5
-echo $ECHO_N "checking for libOpenIPMIpthread... $ECHO_C" >&6; }
-	$PKG_CONFIG --exists OpenIPMIpthread 2>/dev/null
-	if test "$?" != "0"
-	then
-		with_libopenipmipthread="no ($PKG_CONFIG doesn't know OpenIPMIpthread)"
-	fi
-	{ echo "$as_me:$LINENO: result: $with_libopenipmipthread" >&5
-echo "${ECHO_T}$with_libopenipmipthread" >&6; }
-fi
+done
 
-if test "x$with_libopenipmipthread" = "xyes"
-then
-	{ echo "$as_me:$LINENO: checking for libOpenIPMIpthread CFLAGS" >&5
-echo $ECHO_N "checking for libOpenIPMIpthread CFLAGS... $ECHO_C" >&6; }
-	temp_result="`$PKG_CONFIG --cflags OpenIPMIpthread`"
-	if test "$?" = "0"
-	then
-		with_libopenipmipthread_cflags="$temp_result"
-	else
-		with_libopenipmipthread="no ($PKG_CONFIG --cflags OpenIPMIpthread failed)"
-		temp_result="$PKG_CONFIG --cflags OpenIPMIpthread failed"
-	fi
-	{ echo "$as_me:$LINENO: result: $temp_result" >&5
-echo "${ECHO_T}$temp_result" >&6; }
-fi
 
-if test "x$with_libopenipmipthread" = "xyes"
+	CPPFLAGS="$SAVE_CPPFLAGS"
+fi
+if test "x$with_libpq" = "xyes"
 then
-	{ echo "$as_me:$LINENO: checking for libOpenIPMIpthread LDFLAGS" >&5
-echo $ECHO_N "checking for libOpenIPMIpthread LDFLAGS... $ECHO_C" >&6; }
-	temp_result="`$PKG_CONFIG --libs OpenIPMIpthread`"
-	if test "$?" = "0"
+	with_libpq_libdir=`$with_pg_config --libdir 2> /dev/null`
+	pg_config_status=$?
+
+	if test $pg_config_status -eq 0
 	then
-		with_libopenipmipthread_ldflags="$temp_result"
+		if test -n "$with_libpq_libdir"; then
+			for dir in $with_libpq_libdir; do
+				with_libpq_ldflags="$with_libpq_ldflags -L$dir"
+			done
+		fi
 	else
-		with_libopenipmipthread="no ($PKG_CONFIG --libs OpenIPMIpthread failed)"
-		temp_result="$PKG_CONFIG --libs OpenIPMIpthread failed"
+		{ echo "$as_me:$LINENO: WARNING: $with_pg_config returned with status $pg_config_status" >&5
+echo "$as_me: WARNING: $with_pg_config returned with status $pg_config_status" >&2;}
 	fi
-	{ echo "$as_me:$LINENO: result: $temp_result" >&5
-echo "${ECHO_T}$temp_result" >&6; }
-fi
-
-if test "x$with_libopenipmipthread" = "xyes"
-then
-	SAVE_CPPFLAGS="$CPPFLAGS"
-	CPPFLAGS="$CPPFLAGS $with_libopenipmipthread_cflags"
 
+	SAVE_LDFLAGS="$LDFLAGS"
+	LDFLAGS="$LDFLAGS $with_libpq_ldflags"
 
-for ac_header in OpenIPMI/ipmi_smi.h
-do
-as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-{ echo "$as_me:$LINENO: checking for $ac_header" >&5
-echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6; }
-if { as_var=$as_ac_Header; eval "test \"\${$as_var+set}\" = set"; }; then
+	{ echo "$as_me:$LINENO: checking for PQconnectdb in -lpq" >&5
+echo $ECHO_N "checking for PQconnectdb in -lpq... $ECHO_C" >&6; }
+if test "${ac_cv_lib_pq_PQconnectdb+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
-  cat >conftest.$ac_ext <<_ACEOF
+  ac_check_lib_save_LIBS=$LIBS
+LIBS="-lpq  $LIBS"
+cat >conftest.$ac_ext <<_ACEOF
 /* confdefs.h.  */
 _ACEOF
 cat confdefs.h >>conftest.$ac_ext
 cat >>conftest.$ac_ext <<_ACEOF
 /* end confdefs.h.  */
-#include <OpenIPMI/ipmiif.h>
-#include <OpenIPMI/ipmi_err.h>
-#include <OpenIPMI/ipmi_posix.h>
-#include <OpenIPMI/ipmi_conn.h>
-
 
-#include <$ac_header>
+/* Override any GCC internal prototype to avoid an error.
+   Use char because int might match the return type of a GCC
+   builtin and then its argument prototype would still apply.  */
+#ifdef __cplusplus
+extern "C"
+#endif
+char PQconnectdb ();
+int
+main ()
+{
+return PQconnectdb ();
+  ;
+  return 0;
+}
 _ACEOF
-rm -f conftest.$ac_objext
-if { (ac_try="$ac_compile"
+rm -f conftest.$ac_objext conftest$ac_exeext
+if { (ac_try="$ac_link"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval "echo \"\$as_me:$LINENO: $ac_try_echo\"") >&5
-  (eval "$ac_compile") 2>conftest.er1
+  (eval "$ac_link") 2>conftest.er1
   ac_status=$?
   grep -v '^ *+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
   echo "$as_me:$LINENO: \$? = $ac_status" >&5
   (exit $ac_status); } && {
 	 test -z "$ac_c_werror_flag" ||
 	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then
-  eval "$as_ac_Header=yes"
+       } && test -s conftest$ac_exeext &&
+       $as_test_x conftest$ac_exeext; then
+  ac_cv_lib_pq_PQconnectdb=yes
 else
   echo "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-	eval "$as_ac_Header=no"
+	ac_cv_lib_pq_PQconnectdb=no
 fi
 
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest_ipa8_conftest.oo \
+      conftest$ac_exeext conftest.$ac_ext
+LIBS=$ac_check_lib_save_LIBS
 fi
-ac_res=`eval echo '${'$as_ac_Header'}'`
-	       { echo "$as_me:$LINENO: result: $ac_res" >&5
-echo "${ECHO_T}$ac_res" >&6; }
-if test `eval echo '${'$as_ac_Header'}'` = yes; then
-  cat >>confdefs.h <<_ACEOF
-#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
- with_libopenipmipthread="yes"
+{ echo "$as_me:$LINENO: result: $ac_cv_lib_pq_PQconnectdb" >&5
+echo "${ECHO_T}$ac_cv_lib_pq_PQconnectdb" >&6; }
+if test $ac_cv_lib_pq_PQconnectdb = yes; then
+  with_libpq="yes"
 else
-  with_libopenipmipthread="no (OpenIPMI/ipmi_smi.h not found)"
+  with_libpq="no (symbol 'PQconnectdb' not found)"
 fi
 
-done
-
 
-	CPPFLAGS="$SAVE_CPPFLAGS"
+	LDFLAGS="$SAVE_LDFLAGS"
 fi
-
-if test "x$with_libopenipmipthread" = "xyes"
+if test "x$with_libpq" = "xyes"
 then
-	BUILD_WITH_OPENIPMI_CFLAGS="$with_libopenipmipthread_cflags"
-	BUILD_WITH_OPENIPMI_LIBS="$with_libopenipmipthread_ldflags"
+	BUILD_WITH_LIBPQ_CPPFLAGS="$with_libpq_cppflags"
+	BUILD_WITH_LIBPQ_LDFLAGS="$with_libpq_ldflags"
 
 
 fi
+ if test "x$with_libpq" = "xyes"; then
+  BUILD_WITH_LIBPQ_TRUE=
+  BUILD_WITH_LIBPQ_FALSE='#'
+else
+  BUILD_WITH_LIBPQ_TRUE='#'
+  BUILD_WITH_LIBPQ_FALSE=
+fi
+
 
 with_libxml2="no (pkg-config isn't available)"
 with_libxml2_cflags=""
 with_libxml2_ldflags=""
 with_libvirt="no (pkg-config isn't available)"
 with_libvirt_cflags=""
@@ -36937,13 +37895,12 @@
 else
   BUILD_FEATURE_GETIFADDRS_TRUE='#'
   BUILD_FEATURE_GETIFADDRS_FALSE=
 fi
 
 
-dependency_error="no"
 plugin_ascent="no"
 plugin_battery="no"
 plugin_cpu="no"
 plugin_cpufreq="no"
 plugin_df="no"
 plugin_disk="no"
@@ -36960,12 +37917,13 @@
 plugin_perl="no"
 plugin_processes="no"
 plugin_serial="no"
 plugin_swap="no"
 plugin_tape="no"
 plugin_tcpconns="no"
+plugin_thermal="no"
 plugin_users="no"
 plugin_vmem="no"
 plugin_vserver="no"
 plugin_wireless="no"
 
 # Linux
@@ -36982,22 +37940,28 @@
 	plugin_memory="yes"
 	plugin_nfs="yes"
 	plugin_processes="yes"
 	plugin_serial="yes"
 	plugin_swap="yes"
 	plugin_tcpconns="yes"
+	plugin_thermal="yes"
 	plugin_vmem="yes"
 	plugin_vserver="yes"
 	plugin_wireless="yes"
 
 	if test "x$have_net_ip_vs_h" = "xyes" -o "x$have_ip_vs_h" = "xyes"
 	then
 		plugin_ipvs="yes"
 	fi
 fi
 
+if test "x$ac_system" = "xOpenBSD"
+then
+	plugin_tcpconns="yes"
+fi
+
 # Mac OS X devices
 if test "x$with_libiokit" = "xyes"
 then
 	plugin_battery="yes"
 	plugin_disk="yes"
 fi
@@ -37006,18 +37970,14 @@
 if test "x$with_devinfo$with_kstat" = "xyesyes"
 then
 	plugin_cpu="yes"
 	plugin_disk="yes"
 	plugin_interface="yes"
 	plugin_memory="yes"
-	plugin_tape="yes"
-fi
-
-if test "x$have_sys_swap_h$with_kstat$ac_system" = "xyesyesSolaris"
-then
 	plugin_swap="yes"
+	plugin_tape="yes"
 fi
 
 # libstatgrab
 if test "x$with_libstatgrab" = "xyes"
 then
 	plugin_cpu="yes"
@@ -37092,17 +38052,27 @@
 
 if test "x$have_thread_info" = "xyes"
 then
 	plugin_processes="yes"
 fi
 
+if test "x$with_kvm_getprocs" = "xyes"
+then
+	plugin_processes="yes"
+fi
+
 if test "x$with_kvm_getswapinfo" = "xyes"
 then
 	plugin_swap="yes"
 fi
 
+if test "x$with_kvm_nlist" = "xyes"
+then
+	plugin_tcpconns="yes"
+fi
+
 if test "x$have_getutent" = "xyes"
 then
 	plugin_users="yes"
 fi
 if test "x$have_getutxent" = "xyes"
 then
@@ -37135,23 +38105,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libcurl" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_APACHE 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_APACHE_TRUE=
   BUILD_PLUGIN_APACHE_FALSE='#'
 else
   BUILD_PLUGIN_APACHE_TRUE='#'
@@ -37183,23 +38147,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_APCUPS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_APCUPS_TRUE=
   BUILD_PLUGIN_APCUPS_FALSE='#'
 else
   BUILD_PLUGIN_APCUPS_TRUE='#'
@@ -37231,23 +38189,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libiokit" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_APPLE_SENSORS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_APPLE_SENSORS_TRUE=
   BUILD_PLUGIN_APPLE_SENSORS_FALSE='#'
 else
   BUILD_PLUGIN_APPLE_SENSORS_TRUE='#'
@@ -37279,23 +38231,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_ascent" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_ASCENT 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_ASCENT_TRUE=
   BUILD_PLUGIN_ASCENT_FALSE='#'
 else
   BUILD_PLUGIN_ASCENT_TRUE='#'
@@ -37327,23 +38273,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_battery" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_BATTERY 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_BATTERY_TRUE=
   BUILD_PLUGIN_BATTERY_FALSE='#'
 else
   BUILD_PLUGIN_BATTERY_TRUE='#'
@@ -37375,23 +38315,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_cpu" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_CPU 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_CPU_TRUE=
   BUILD_PLUGIN_CPU_FALSE='#'
 else
   BUILD_PLUGIN_CPU_TRUE='#'
@@ -37423,23 +38357,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_cpufreq" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_CPUFREQ 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_CPUFREQ_TRUE=
   BUILD_PLUGIN_CPUFREQ_FALSE='#'
 else
   BUILD_PLUGIN_CPUFREQ_TRUE='#'
@@ -37471,23 +38399,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_CSV 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_CSV_TRUE=
   BUILD_PLUGIN_CSV_FALSE='#'
 else
   BUILD_PLUGIN_CSV_TRUE='#'
@@ -37496,12 +38418,54 @@
 
     enable_csv="$enable_plugin"
 
 
 
     enable_plugin="no"
+    # Check whether --enable-notify_desktop was given.
+if test "${enable_notify_desktop+set}" = set; then
+  enableval=$enable_notify_desktop;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+else
+
+     if test "x$with_libnotify" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_PLUGIN_NOTIFY_DESKTOP 1
+_ACEOF
+
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE=
+  BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE='#'
+else
+  BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE='#'
+  BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE=
+fi
+
+    enable_notify_desktop="$enable_plugin"
+
+
+
+    enable_plugin="no"
     # Check whether --enable-df was given.
 if test "${enable_df+set}" = set; then
   enableval=$enable_df;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -37519,23 +38483,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_df" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_DF 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_DF_TRUE=
   BUILD_PLUGIN_DF_FALSE='#'
 else
   BUILD_PLUGIN_DF_TRUE='#'
@@ -37567,23 +38525,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_disk" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_DISK 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_DISK_TRUE=
   BUILD_PLUGIN_DISK_FALSE='#'
 else
   BUILD_PLUGIN_DISK_TRUE='#'
@@ -37615,23 +38567,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libpcap" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_DNS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_DNS_TRUE=
   BUILD_PLUGIN_DNS_FALSE='#'
 else
   BUILD_PLUGIN_DNS_TRUE='#'
@@ -37663,23 +38609,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_EMAIL 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_EMAIL_TRUE=
   BUILD_PLUGIN_EMAIL_FALSE='#'
 else
   BUILD_PLUGIN_EMAIL_TRUE='#'
@@ -37711,23 +38651,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_entropy" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_ENTROPY 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_ENTROPY_TRUE=
   BUILD_PLUGIN_ENTROPY_FALSE='#'
 else
   BUILD_PLUGIN_ENTROPY_TRUE='#'
@@ -37759,23 +38693,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_EXEC 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_EXEC_TRUE=
   BUILD_PLUGIN_EXEC_FALSE='#'
 else
   BUILD_PLUGIN_EXEC_TRUE='#'
@@ -37784,12 +38712,54 @@
 
     enable_exec="$enable_plugin"
 
 
 
     enable_plugin="no"
+    # Check whether --enable-filecount was given.
+if test "${enable_filecount+set}" = set; then
+  enableval=$enable_filecount;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+else
+
+     if test "xyes" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_PLUGIN_FILECOUNT 1
+_ACEOF
+
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_FILECOUNT_TRUE=
+  BUILD_PLUGIN_FILECOUNT_FALSE='#'
+else
+  BUILD_PLUGIN_FILECOUNT_TRUE='#'
+  BUILD_PLUGIN_FILECOUNT_FALSE=
+fi
+
+    enable_filecount="$enable_plugin"
+
+
+
+    enable_plugin="no"
     # Check whether --enable-hddtemp was given.
 if test "${enable_hddtemp+set}" = set; then
   enableval=$enable_hddtemp;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -37807,23 +38777,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_HDDTEMP 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_HDDTEMP_TRUE=
   BUILD_PLUGIN_HDDTEMP_FALSE='#'
 else
   BUILD_PLUGIN_HDDTEMP_TRUE='#'
@@ -37855,23 +38819,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_interface" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_INTERFACE 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_INTERFACE_TRUE=
   BUILD_PLUGIN_INTERFACE_FALSE='#'
 else
   BUILD_PLUGIN_INTERFACE_TRUE='#'
@@ -37903,23 +38861,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libiptc" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_IPTABLES 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_IPTABLES_TRUE=
   BUILD_PLUGIN_IPTABLES_FALSE='#'
 else
   BUILD_PLUGIN_IPTABLES_TRUE='#'
@@ -37951,23 +38903,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_ipmi" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_IPMI 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_IPMI_TRUE=
   BUILD_PLUGIN_IPMI_FALSE='#'
 else
   BUILD_PLUGIN_IPMI_TRUE='#'
@@ -37999,23 +38945,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_ipvs" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_IPVS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_IPVS_TRUE=
   BUILD_PLUGIN_IPVS_FALSE='#'
 else
   BUILD_PLUGIN_IPVS_TRUE='#'
@@ -38047,23 +38987,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_irq" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_IRQ 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_IRQ_TRUE=
   BUILD_PLUGIN_IRQ_FALSE='#'
 else
   BUILD_PLUGIN_IRQ_TRUE='#'
@@ -38095,23 +39029,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_libvirt" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_LIBVIRT 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_LIBVIRT_TRUE=
   BUILD_PLUGIN_LIBVIRT_FALSE='#'
 else
   BUILD_PLUGIN_LIBVIRT_TRUE='#'
@@ -38143,23 +39071,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_load" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_LOAD 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_LOAD_TRUE=
   BUILD_PLUGIN_LOAD_FALSE='#'
 else
   BUILD_PLUGIN_LOAD_TRUE='#'
@@ -38191,23 +39113,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_LOGFILE 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_LOGFILE_TRUE=
   BUILD_PLUGIN_LOGFILE_FALSE='#'
 else
   BUILD_PLUGIN_LOGFILE_TRUE='#'
@@ -38239,23 +39155,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_MBMON 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_MBMON_TRUE=
   BUILD_PLUGIN_MBMON_FALSE='#'
 else
   BUILD_PLUGIN_MBMON_TRUE='#'
@@ -38287,23 +39197,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_MEMCACHED 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_MEMCACHED_TRUE=
   BUILD_PLUGIN_MEMCACHED_FALSE='#'
 else
   BUILD_PLUGIN_MEMCACHED_TRUE='#'
@@ -38335,23 +39239,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_memory" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_MEMORY 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_MEMORY_TRUE=
   BUILD_PLUGIN_MEMORY_FALSE='#'
 else
   BUILD_PLUGIN_MEMORY_TRUE='#'
@@ -38383,23 +39281,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_multimeter" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_MULTIMETER 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_MULTIMETER_TRUE=
   BUILD_PLUGIN_MULTIMETER_FALSE='#'
 else
   BUILD_PLUGIN_MULTIMETER_TRUE='#'
@@ -38431,23 +39323,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libmysql" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_MYSQL 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_MYSQL_TRUE=
   BUILD_PLUGIN_MYSQL_FALSE='#'
 else
   BUILD_PLUGIN_MYSQL_TRUE='#'
@@ -38479,23 +39365,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libnetlink" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_NETLINK 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_NETLINK_TRUE=
   BUILD_PLUGIN_NETLINK_FALSE='#'
 else
   BUILD_PLUGIN_NETLINK_TRUE='#'
@@ -38527,23 +39407,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_NETWORK 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_NETWORK_TRUE=
   BUILD_PLUGIN_NETWORK_FALSE='#'
 else
   BUILD_PLUGIN_NETWORK_TRUE='#'
@@ -38575,23 +39449,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_nfs" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_NFS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_NFS_TRUE=
   BUILD_PLUGIN_NFS_FALSE='#'
 else
   BUILD_PLUGIN_NFS_TRUE='#'
@@ -38623,23 +39491,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libcurl" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_NGINX 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_NGINX_TRUE=
   BUILD_PLUGIN_NGINX_FALSE='#'
 else
   BUILD_PLUGIN_NGINX_TRUE='#'
@@ -38648,12 +39510,54 @@
 
     enable_nginx="$enable_plugin"
 
 
 
     enable_plugin="no"
+    # Check whether --enable-notify_email was given.
+if test "${enable_notify_email+set}" = set; then
+  enableval=$enable_notify_email;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+else
+
+     if test "x$with_libesmtp" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_PLUGIN_NOTIFY_EMAIL 1
+_ACEOF
+
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_NOTIFY_EMAIL_TRUE=
+  BUILD_PLUGIN_NOTIFY_EMAIL_FALSE='#'
+else
+  BUILD_PLUGIN_NOTIFY_EMAIL_TRUE='#'
+  BUILD_PLUGIN_NOTIFY_EMAIL_FALSE=
+fi
+
+    enable_notify_email="$enable_plugin"
+
+
+
+    enable_plugin="no"
     # Check whether --enable-ntpd was given.
 if test "${enable_ntpd+set}" = set; then
   enableval=$enable_ntpd;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -38671,23 +39575,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_NTPD 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_NTPD_TRUE=
   BUILD_PLUGIN_NTPD_FALSE='#'
 else
   BUILD_PLUGIN_NTPD_TRUE='#'
@@ -38719,23 +39617,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libupsclient" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_NUT 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_NUT_TRUE=
   BUILD_PLUGIN_NUT_FALSE='#'
 else
   BUILD_PLUGIN_NUT_TRUE='#'
@@ -38744,12 +39636,54 @@
 
     enable_nut="$enable_plugin"
 
 
 
     enable_plugin="no"
+    # Check whether --enable-onewire was given.
+if test "${enable_onewire+set}" = set; then
+  enableval=$enable_onewire;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+else
+
+     if test "x$with_libowcapi" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_PLUGIN_ONEWIRE 1
+_ACEOF
+
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_ONEWIRE_TRUE=
+  BUILD_PLUGIN_ONEWIRE_FALSE='#'
+else
+  BUILD_PLUGIN_ONEWIRE_TRUE='#'
+  BUILD_PLUGIN_ONEWIRE_FALSE=
+fi
+
+    enable_onewire="$enable_plugin"
+
+
+
+    enable_plugin="no"
     # Check whether --enable-perl was given.
 if test "${enable_perl+set}" = set; then
   enableval=$enable_perl;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -38767,23 +39701,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_perl" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_PERL 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_PERL_TRUE=
   BUILD_PLUGIN_PERL_FALSE='#'
 else
   BUILD_PLUGIN_PERL_TRUE='#'
@@ -38815,23 +39743,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_liboping" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_PING 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_PING_TRUE=
   BUILD_PLUGIN_PING_FALSE='#'
 else
   BUILD_PLUGIN_PING_TRUE='#'
@@ -38840,12 +39762,54 @@
 
     enable_ping="$enable_plugin"
 
 
 
     enable_plugin="no"
+    # Check whether --enable-postgresql was given.
+if test "${enable_postgresql+set}" = set; then
+  enableval=$enable_postgresql;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+else
+
+     if test "x$with_libpq" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_PLUGIN_POSTGRESQL 1
+_ACEOF
+
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_POSTGRESQL_TRUE=
+  BUILD_PLUGIN_POSTGRESQL_FALSE='#'
+else
+  BUILD_PLUGIN_POSTGRESQL_TRUE='#'
+  BUILD_PLUGIN_POSTGRESQL_FALSE=
+fi
+
+    enable_postgresql="$enable_plugin"
+
+
+
+    enable_plugin="no"
     # Check whether --enable-powerdns was given.
 if test "${enable_powerdns+set}" = set; then
   enableval=$enable_powerdns;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -38863,23 +39827,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_POWERDNS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_POWERDNS_TRUE=
   BUILD_PLUGIN_POWERDNS_FALSE='#'
 else
   BUILD_PLUGIN_POWERDNS_TRUE='#'
@@ -38911,23 +39869,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_processes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_PROCESSES 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_PROCESSES_TRUE=
   BUILD_PLUGIN_PROCESSES_FALSE='#'
 else
   BUILD_PLUGIN_PROCESSES_TRUE='#'
@@ -38959,23 +39911,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_rrdtool" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_RRDTOOL 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_RRDTOOL_TRUE=
   BUILD_PLUGIN_RRDTOOL_FALSE='#'
 else
   BUILD_PLUGIN_RRDTOOL_TRUE='#'
@@ -39007,23 +39953,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_lm_sensors" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_SENSORS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_SENSORS_TRUE=
   BUILD_PLUGIN_SENSORS_FALSE='#'
 else
   BUILD_PLUGIN_SENSORS_TRUE='#'
@@ -39055,23 +39995,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_serial" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_SERIAL 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_SERIAL_TRUE=
   BUILD_PLUGIN_SERIAL_FALSE='#'
 else
   BUILD_PLUGIN_SERIAL_TRUE='#'
@@ -39103,23 +40037,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libnetsnmp" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_SNMP 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_SNMP_TRUE=
   BUILD_PLUGIN_SNMP_FALSE='#'
 else
   BUILD_PLUGIN_SNMP_TRUE='#'
@@ -39151,23 +40079,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_swap" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_SWAP 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_SWAP_TRUE=
   BUILD_PLUGIN_SWAP_FALSE='#'
 else
   BUILD_PLUGIN_SWAP_TRUE='#'
@@ -39199,23 +40121,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$have_syslog" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_SYSLOG 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_SYSLOG_TRUE=
   BUILD_PLUGIN_SYSLOG_FALSE='#'
 else
   BUILD_PLUGIN_SYSLOG_TRUE='#'
@@ -39247,23 +40163,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_TAIL 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_TAIL_TRUE=
   BUILD_PLUGIN_TAIL_FALSE='#'
 else
   BUILD_PLUGIN_TAIL_TRUE='#'
@@ -39295,23 +40205,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_tape" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_TAPE 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_TAPE_TRUE=
   BUILD_PLUGIN_TAPE_FALSE='#'
 else
   BUILD_PLUGIN_TAPE_TRUE='#'
@@ -39343,23 +40247,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_tcpconns" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_TCPCONNS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_TCPCONNS_TRUE=
   BUILD_PLUGIN_TCPCONNS_FALSE='#'
 else
   BUILD_PLUGIN_TCPCONNS_TRUE='#'
@@ -39391,23 +40289,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_TEAMSPEAK2 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_TEAMSPEAK2_TRUE=
   BUILD_PLUGIN_TEAMSPEAK2_FALSE='#'
 else
   BUILD_PLUGIN_TEAMSPEAK2_TRUE='#'
@@ -39416,12 +40308,54 @@
 
     enable_teamspeak2="$enable_plugin"
 
 
 
     enable_plugin="no"
+    # Check whether --enable-thermal was given.
+if test "${enable_thermal+set}" = set; then
+  enableval=$enable_thermal;
+     if test "x$enableval" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+else
+
+     if test "x$plugin_thermal" = "xyes"
+     then
+	     enable_plugin="yes"
+     else
+	     enable_plugin="no"
+     fi
+
+fi
+
+    if test "x$enable_plugin" = "xyes"
+    then
+
+cat >>confdefs.h <<\_ACEOF
+#define HAVE_PLUGIN_THERMAL 1
+_ACEOF
+
+    fi
+     if test "x$enable_plugin" = "xyes"; then
+  BUILD_PLUGIN_THERMAL_TRUE=
+  BUILD_PLUGIN_THERMAL_FALSE='#'
+else
+  BUILD_PLUGIN_THERMAL_TRUE='#'
+  BUILD_PLUGIN_THERMAL_FALSE=
+fi
+
+    enable_thermal="$enable_plugin"
+
+
+
+    enable_plugin="no"
     # Check whether --enable-unixsock was given.
 if test "${enable_unixsock+set}" = set; then
   enableval=$enable_unixsock;
      if test "x$enableval" = "xyes"
      then
 	     enable_plugin="yes"
@@ -39439,23 +40373,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_UNIXSOCK 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_UNIXSOCK_TRUE=
   BUILD_PLUGIN_UNIXSOCK_FALSE='#'
 else
   BUILD_PLUGIN_UNIXSOCK_TRUE='#'
@@ -39487,23 +40415,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_users" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_USERS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_USERS_TRUE=
   BUILD_PLUGIN_USERS_FALSE='#'
 else
   BUILD_PLUGIN_USERS_TRUE='#'
@@ -39535,23 +40457,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "xyes" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_UUID 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_UUID_TRUE=
   BUILD_PLUGIN_UUID_FALSE='#'
 else
   BUILD_PLUGIN_UUID_TRUE='#'
@@ -39583,23 +40499,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_vmem" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_VMEM 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_VMEM_TRUE=
   BUILD_PLUGIN_VMEM_FALSE='#'
 else
   BUILD_PLUGIN_VMEM_TRUE='#'
@@ -39631,23 +40541,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_vserver" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_VSERVER 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_VSERVER_TRUE=
   BUILD_PLUGIN_VSERVER_FALSE='#'
 else
   BUILD_PLUGIN_VSERVER_TRUE='#'
@@ -39679,23 +40583,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$plugin_wireless" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_WIRELESS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_WIRELESS_TRUE=
   BUILD_PLUGIN_WIRELESS_FALSE='#'
 else
   BUILD_PLUGIN_WIRELESS_TRUE='#'
@@ -39727,23 +40625,17 @@
      fi
 
 fi
 
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$with_libxmms" = "xyes"
-	    then
 
 cat >>confdefs.h <<\_ACEOF
 #define HAVE_PLUGIN_XMMS 1
 _ACEOF
 
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
     fi
      if test "x$enable_plugin" = "xyes"; then
   BUILD_PLUGIN_XMMS_TRUE=
   BUILD_PLUGIN_XMMS_FALSE='#'
 else
   BUILD_PLUGIN_XMMS_TRUE='#'
@@ -39987,19 +40879,33 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBSTATGRAB\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_WITH_LIBSTATGRAB\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_WITH_LIBKVM_GETPROCS_TRUE}" && test -z "${BUILD_WITH_LIBKVM_GETPROCS_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBKVM_GETPROCS\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_WITH_LIBKVM_GETPROCS\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE}" && test -z "${BUILD_WITH_LIBKVM_GETSWAPINFO_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBKVM_GETSWAPINFO\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_WITH_LIBKVM_GETSWAPINFO\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_WITH_LIBKVM_NLIST_TRUE}" && test -z "${BUILD_WITH_LIBKVM_NLIST_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBKVM_NLIST\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_WITH_LIBKVM_NLIST\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_WITH_LM_SENSORS_TRUE}" && test -z "${BUILD_WITH_LM_SENSORS_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LM_SENSORS\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_WITH_LM_SENSORS\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40036,12 +40942,19 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBPCAP\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_WITH_LIBPCAP\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_WITH_LIBESMTP_TRUE}" && test -z "${BUILD_WITH_LIBESMTP_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBESMTP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_WITH_LIBESMTP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_WITH_LIBPERL_TRUE}" && test -z "${BUILD_WITH_LIBPERL_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBPERL\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_WITH_LIBPERL\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40078,12 +40991,19 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBNETLINK\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_WITH_LIBNETLINK\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_WITH_LIBPQ_TRUE}" && test -z "${BUILD_WITH_LIBPQ_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_WITH_LIBPQ\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_WITH_LIBPQ\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_FEATURE_DEBUG_TRUE}" && test -z "${BUILD_FEATURE_DEBUG_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_FEATURE_DEBUG\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_FEATURE_DEBUG\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40155,12 +41075,19 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_CSV\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_CSV\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE}" && test -z "${BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_NOTIFY_DESKTOP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_PLUGIN_NOTIFY_DESKTOP\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_PLUGIN_DF_TRUE}" && test -z "${BUILD_PLUGIN_DF_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_DF\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_DF\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40197,12 +41124,19 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_EXEC\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_EXEC\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_PLUGIN_FILECOUNT_TRUE}" && test -z "${BUILD_PLUGIN_FILECOUNT_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_FILECOUNT\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_PLUGIN_FILECOUNT\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_PLUGIN_HDDTEMP_TRUE}" && test -z "${BUILD_PLUGIN_HDDTEMP_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_HDDTEMP\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_HDDTEMP\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40323,12 +41257,19 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_NGINX\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_NGINX\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_PLUGIN_NOTIFY_EMAIL_TRUE}" && test -z "${BUILD_PLUGIN_NOTIFY_EMAIL_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_NOTIFY_EMAIL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_PLUGIN_NOTIFY_EMAIL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_PLUGIN_NTPD_TRUE}" && test -z "${BUILD_PLUGIN_NTPD_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_NTPD\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_NTPD\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40337,12 +41278,19 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_NUT\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_NUT\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_PLUGIN_ONEWIRE_TRUE}" && test -z "${BUILD_PLUGIN_ONEWIRE_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_ONEWIRE\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_PLUGIN_ONEWIRE\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_PLUGIN_PERL_TRUE}" && test -z "${BUILD_PLUGIN_PERL_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_PERL\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_PERL\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40351,12 +41299,19 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_PING\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_PING\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_PLUGIN_POSTGRESQL_TRUE}" && test -z "${BUILD_PLUGIN_POSTGRESQL_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_POSTGRESQL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_PLUGIN_POSTGRESQL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_PLUGIN_POWERDNS_TRUE}" && test -z "${BUILD_PLUGIN_POWERDNS_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_POWERDNS\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_POWERDNS\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40435,12 +41390,19 @@
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_TEAMSPEAK2\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_TEAMSPEAK2\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
 fi
+if test -z "${BUILD_PLUGIN_THERMAL_TRUE}" && test -z "${BUILD_PLUGIN_THERMAL_FALSE}"; then
+  { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_THERMAL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&5
+echo "$as_me: error: conditional \"BUILD_PLUGIN_THERMAL\" was never defined.
+Usually this means the macro was only invoked conditionally." >&2;}
+   { (exit 1); exit 1; }; }
+fi
 if test -z "${BUILD_PLUGIN_UNIXSOCK_TRUE}" && test -z "${BUILD_PLUGIN_UNIXSOCK_FALSE}"; then
   { { echo "$as_me:$LINENO: error: conditional \"BUILD_PLUGIN_UNIXSOCK\" was never defined.
 Usually this means the macro was only invoked conditionally." >&5
 echo "$as_me: error: conditional \"BUILD_PLUGIN_UNIXSOCK\" was never defined.
 Usually this means the macro was only invoked conditionally." >&2;}
    { (exit 1); exit 1; }; }
@@ -40784,13 +41746,13 @@
 exec 6>&1
 
 # Save the log message, to keep $[0] and so on meaningful, and to
 # report actual input values of CONFIG_FILES etc. instead of their
 # values after options handling.
 ac_log="
-This file was extended by collectd $as_me 4.4.5, which was
+This file was extended by collectd $as_me 4.5.0, which was
 generated by GNU Autoconf 2.61.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
   CONFIG_LINKS    = $CONFIG_LINKS
   CONFIG_COMMANDS = $CONFIG_COMMANDS
@@ -40837,13 +41799,13 @@
 
 Report bugs to <bug-autoconf@gnu.org>."
 
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF
 ac_cs_version="\\
-collectd config.status 4.4.5
+collectd config.status 4.5.0
 configured by $0, generated by GNU Autoconf 2.61,
   with options \\"`echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright (C) 2006 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
@@ -41206,14 +42168,18 @@
 BUILD_WITH_LIBIOKIT_TRUE!$BUILD_WITH_LIBIOKIT_TRUE$ac_delim
 BUILD_WITH_LIBIOKIT_FALSE!$BUILD_WITH_LIBIOKIT_FALSE$ac_delim
 BUILD_WITH_LIBSTATGRAB_TRUE!$BUILD_WITH_LIBSTATGRAB_TRUE$ac_delim
 BUILD_WITH_LIBSTATGRAB_FALSE!$BUILD_WITH_LIBSTATGRAB_FALSE$ac_delim
 BUILD_WITH_LIBSTATGRAB_CFLAGS!$BUILD_WITH_LIBSTATGRAB_CFLAGS$ac_delim
 BUILD_WITH_LIBSTATGRAB_LDFLAGS!$BUILD_WITH_LIBSTATGRAB_LDFLAGS$ac_delim
+BUILD_WITH_LIBKVM_GETPROCS_TRUE!$BUILD_WITH_LIBKVM_GETPROCS_TRUE$ac_delim
+BUILD_WITH_LIBKVM_GETPROCS_FALSE!$BUILD_WITH_LIBKVM_GETPROCS_FALSE$ac_delim
 BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE!$BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE$ac_delim
 BUILD_WITH_LIBKVM_GETSWAPINFO_FALSE!$BUILD_WITH_LIBKVM_GETSWAPINFO_FALSE$ac_delim
+BUILD_WITH_LIBKVM_NLIST_TRUE!$BUILD_WITH_LIBKVM_NLIST_TRUE$ac_delim
+BUILD_WITH_LIBKVM_NLIST_FALSE!$BUILD_WITH_LIBKVM_NLIST_FALSE$ac_delim
 BUILD_WITH_LIBSENSORS_CFLAGS!$BUILD_WITH_LIBSENSORS_CFLAGS$ac_delim
 BUILD_WITH_LIBSENSORS_LDFLAGS!$BUILD_WITH_LIBSENSORS_LDFLAGS$ac_delim
 BUILD_WITH_LM_SENSORS_TRUE!$BUILD_WITH_LM_SENSORS_TRUE$ac_delim
 BUILD_WITH_LM_SENSORS_FALSE!$BUILD_WITH_LM_SENSORS_FALSE$ac_delim
 BUILD_WITH_LIBMYSQL_CFLAGS!$BUILD_WITH_LIBMYSQL_CFLAGS$ac_delim
 BUILD_WITH_LIBMYSQL_LIBS!$BUILD_WITH_LIBMYSQL_LIBS$ac_delim
@@ -41222,14 +42188,18 @@
 BUILD_WITH_OWN_LIBOCONFIG_TRUE!$BUILD_WITH_OWN_LIBOCONFIG_TRUE$ac_delim
 BUILD_WITH_OWN_LIBOCONFIG_FALSE!$BUILD_WITH_OWN_LIBOCONFIG_FALSE$ac_delim
 BUILD_WITH_LIBOPING_TRUE!$BUILD_WITH_LIBOPING_TRUE$ac_delim
 BUILD_WITH_LIBOPING_FALSE!$BUILD_WITH_LIBOPING_FALSE$ac_delim
 BUILD_WITH_OWN_LIBOPING_TRUE!$BUILD_WITH_OWN_LIBOPING_TRUE$ac_delim
 BUILD_WITH_OWN_LIBOPING_FALSE!$BUILD_WITH_OWN_LIBOPING_FALSE$ac_delim
+BUILD_WITH_LIBOWCAPI_CPPFLAGS!$BUILD_WITH_LIBOWCAPI_CPPFLAGS$ac_delim
+BUILD_WITH_LIBOWCAPI_LIBS!$BUILD_WITH_LIBOWCAPI_LIBS$ac_delim
 BUILD_WITH_LIBPCAP_TRUE!$BUILD_WITH_LIBPCAP_TRUE$ac_delim
 BUILD_WITH_LIBPCAP_FALSE!$BUILD_WITH_LIBPCAP_FALSE$ac_delim
+BUILD_WITH_LIBESMTP_TRUE!$BUILD_WITH_LIBESMTP_TRUE$ac_delim
+BUILD_WITH_LIBESMTP_FALSE!$BUILD_WITH_LIBESMTP_FALSE$ac_delim
 PERL!$PERL$ac_delim
 PERL_CFLAGS!$PERL_CFLAGS$ac_delim
 PERL_LDFLAGS!$PERL_LDFLAGS$ac_delim
 BUILD_WITH_LIBPERL_TRUE!$BUILD_WITH_LIBPERL_TRUE$ac_delim
 BUILD_WITH_LIBPERL_FALSE!$BUILD_WITH_LIBPERL_FALSE$ac_delim
 BUILD_WITH_LIBIPTC_TRUE!$BUILD_WITH_LIBIPTC_TRUE$ac_delim
@@ -41237,32 +42207,24 @@
 BUILD_WITH_OWN_LIBIPTC_TRUE!$BUILD_WITH_OWN_LIBIPTC_TRUE$ac_delim
 BUILD_WITH_OWN_LIBIPTC_FALSE!$BUILD_WITH_OWN_LIBIPTC_FALSE$ac_delim
 BUILD_WITH_LIBSNMP_CFLAGS!$BUILD_WITH_LIBSNMP_CFLAGS$ac_delim
 BUILD_WITH_LIBSNMP_LIBS!$BUILD_WITH_LIBSNMP_LIBS$ac_delim
 BUILD_WITH_LIBNETSNMP_TRUE!$BUILD_WITH_LIBNETSNMP_TRUE$ac_delim
 BUILD_WITH_LIBNETSNMP_FALSE!$BUILD_WITH_LIBNETSNMP_FALSE$ac_delim
+LIBNOTIFY_CFLAGS!$LIBNOTIFY_CFLAGS$ac_delim
+LIBNOTIFY_LIBS!$LIBNOTIFY_LIBS$ac_delim
 BUILD_WITH_LIBUPSCLIENT_CFLAGS!$BUILD_WITH_LIBUPSCLIENT_CFLAGS$ac_delim
 BUILD_WITH_LIBUPSCLIENT_LIBS!$BUILD_WITH_LIBUPSCLIENT_LIBS$ac_delim
 BUILD_WITH_LIBXMMS_CFLAGS!$BUILD_WITH_LIBXMMS_CFLAGS$ac_delim
 BUILD_WITH_LIBXMMS_LIBS!$BUILD_WITH_LIBXMMS_LIBS$ac_delim
 BUILD_WITH_LIBXMMS_TRUE!$BUILD_WITH_LIBXMMS_TRUE$ac_delim
 BUILD_WITH_LIBXMMS_FALSE!$BUILD_WITH_LIBXMMS_FALSE$ac_delim
 BUILD_WITH_LIBNETLINK_CFLAGS!$BUILD_WITH_LIBNETLINK_CFLAGS$ac_delim
 BUILD_WITH_LIBNETLINK_LIBS!$BUILD_WITH_LIBNETLINK_LIBS$ac_delim
 BUILD_WITH_LIBNETLINK_TRUE!$BUILD_WITH_LIBNETLINK_TRUE$ac_delim
 BUILD_WITH_LIBNETLINK_FALSE!$BUILD_WITH_LIBNETLINK_FALSE$ac_delim
-BUILD_WITH_OPENIPMI_CFLAGS!$BUILD_WITH_OPENIPMI_CFLAGS$ac_delim
-BUILD_WITH_OPENIPMI_LIBS!$BUILD_WITH_OPENIPMI_LIBS$ac_delim
-BUILD_WITH_LIBXML2_CFLAGS!$BUILD_WITH_LIBXML2_CFLAGS$ac_delim
-BUILD_WITH_LIBXML2_LIBS!$BUILD_WITH_LIBXML2_LIBS$ac_delim
-BUILD_WITH_LIBVIRT_CFLAGS!$BUILD_WITH_LIBVIRT_CFLAGS$ac_delim
-BUILD_WITH_LIBVIRT_LIBS!$BUILD_WITH_LIBVIRT_LIBS$ac_delim
-BUILD_FEATURE_DEBUG_TRUE!$BUILD_FEATURE_DEBUG_TRUE$ac_delim
-BUILD_FEATURE_DEBUG_FALSE!$BUILD_FEATURE_DEBUG_FALSE$ac_delim
-BUILD_FEATURE_DAEMON_TRUE!$BUILD_FEATURE_DAEMON_TRUE$ac_delim
-BUILD_FEATURE_DAEMON_FALSE!$BUILD_FEATURE_DAEMON_FALSE$ac_delim
 _ACEOF
 
   if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 97; then
     break
   elif $ac_last_try; then
     { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
@@ -41298,12 +42260,26 @@
 _ACEOF
 
 
 ac_delim='%!_!# '
 for ac_last_try in false false false false false :; do
   cat >conf$$subs.sed <<_ACEOF
+BUILD_WITH_OPENIPMI_CFLAGS!$BUILD_WITH_OPENIPMI_CFLAGS$ac_delim
+BUILD_WITH_OPENIPMI_LIBS!$BUILD_WITH_OPENIPMI_LIBS$ac_delim
+BUILD_WITH_LIBPQ_CPPFLAGS!$BUILD_WITH_LIBPQ_CPPFLAGS$ac_delim
+BUILD_WITH_LIBPQ_LDFLAGS!$BUILD_WITH_LIBPQ_LDFLAGS$ac_delim
+BUILD_WITH_LIBPQ_TRUE!$BUILD_WITH_LIBPQ_TRUE$ac_delim
+BUILD_WITH_LIBPQ_FALSE!$BUILD_WITH_LIBPQ_FALSE$ac_delim
+BUILD_WITH_LIBXML2_CFLAGS!$BUILD_WITH_LIBXML2_CFLAGS$ac_delim
+BUILD_WITH_LIBXML2_LIBS!$BUILD_WITH_LIBXML2_LIBS$ac_delim
+BUILD_WITH_LIBVIRT_CFLAGS!$BUILD_WITH_LIBVIRT_CFLAGS$ac_delim
+BUILD_WITH_LIBVIRT_LIBS!$BUILD_WITH_LIBVIRT_LIBS$ac_delim
+BUILD_FEATURE_DEBUG_TRUE!$BUILD_FEATURE_DEBUG_TRUE$ac_delim
+BUILD_FEATURE_DEBUG_FALSE!$BUILD_FEATURE_DEBUG_FALSE$ac_delim
+BUILD_FEATURE_DAEMON_TRUE!$BUILD_FEATURE_DAEMON_TRUE$ac_delim
+BUILD_FEATURE_DAEMON_FALSE!$BUILD_FEATURE_DAEMON_FALSE$ac_delim
 BUILD_FEATURE_GETIFADDRS_TRUE!$BUILD_FEATURE_GETIFADDRS_TRUE$ac_delim
 BUILD_FEATURE_GETIFADDRS_FALSE!$BUILD_FEATURE_GETIFADDRS_FALSE$ac_delim
 BUILD_PLUGIN_APACHE_TRUE!$BUILD_PLUGIN_APACHE_TRUE$ac_delim
 BUILD_PLUGIN_APACHE_FALSE!$BUILD_PLUGIN_APACHE_FALSE$ac_delim
 BUILD_PLUGIN_APCUPS_TRUE!$BUILD_PLUGIN_APCUPS_TRUE$ac_delim
 BUILD_PLUGIN_APCUPS_FALSE!$BUILD_PLUGIN_APCUPS_FALSE$ac_delim
@@ -41316,24 +42292,28 @@
 BUILD_PLUGIN_CPU_TRUE!$BUILD_PLUGIN_CPU_TRUE$ac_delim
 BUILD_PLUGIN_CPU_FALSE!$BUILD_PLUGIN_CPU_FALSE$ac_delim
 BUILD_PLUGIN_CPUFREQ_TRUE!$BUILD_PLUGIN_CPUFREQ_TRUE$ac_delim
 BUILD_PLUGIN_CPUFREQ_FALSE!$BUILD_PLUGIN_CPUFREQ_FALSE$ac_delim
 BUILD_PLUGIN_CSV_TRUE!$BUILD_PLUGIN_CSV_TRUE$ac_delim
 BUILD_PLUGIN_CSV_FALSE!$BUILD_PLUGIN_CSV_FALSE$ac_delim
+BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE!$BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE$ac_delim
+BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE!$BUILD_PLUGIN_NOTIFY_DESKTOP_FALSE$ac_delim
 BUILD_PLUGIN_DF_TRUE!$BUILD_PLUGIN_DF_TRUE$ac_delim
 BUILD_PLUGIN_DF_FALSE!$BUILD_PLUGIN_DF_FALSE$ac_delim
 BUILD_PLUGIN_DISK_TRUE!$BUILD_PLUGIN_DISK_TRUE$ac_delim
 BUILD_PLUGIN_DISK_FALSE!$BUILD_PLUGIN_DISK_FALSE$ac_delim
 BUILD_PLUGIN_DNS_TRUE!$BUILD_PLUGIN_DNS_TRUE$ac_delim
 BUILD_PLUGIN_DNS_FALSE!$BUILD_PLUGIN_DNS_FALSE$ac_delim
 BUILD_PLUGIN_EMAIL_TRUE!$BUILD_PLUGIN_EMAIL_TRUE$ac_delim
 BUILD_PLUGIN_EMAIL_FALSE!$BUILD_PLUGIN_EMAIL_FALSE$ac_delim
 BUILD_PLUGIN_ENTROPY_TRUE!$BUILD_PLUGIN_ENTROPY_TRUE$ac_delim
 BUILD_PLUGIN_ENTROPY_FALSE!$BUILD_PLUGIN_ENTROPY_FALSE$ac_delim
 BUILD_PLUGIN_EXEC_TRUE!$BUILD_PLUGIN_EXEC_TRUE$ac_delim
 BUILD_PLUGIN_EXEC_FALSE!$BUILD_PLUGIN_EXEC_FALSE$ac_delim
+BUILD_PLUGIN_FILECOUNT_TRUE!$BUILD_PLUGIN_FILECOUNT_TRUE$ac_delim
+BUILD_PLUGIN_FILECOUNT_FALSE!$BUILD_PLUGIN_FILECOUNT_FALSE$ac_delim
 BUILD_PLUGIN_HDDTEMP_TRUE!$BUILD_PLUGIN_HDDTEMP_TRUE$ac_delim
 BUILD_PLUGIN_HDDTEMP_FALSE!$BUILD_PLUGIN_HDDTEMP_FALSE$ac_delim
 BUILD_PLUGIN_INTERFACE_TRUE!$BUILD_PLUGIN_INTERFACE_TRUE$ac_delim
 BUILD_PLUGIN_INTERFACE_FALSE!$BUILD_PLUGIN_INTERFACE_FALSE$ac_delim
 BUILD_PLUGIN_IPTABLES_TRUE!$BUILD_PLUGIN_IPTABLES_TRUE$ac_delim
 BUILD_PLUGIN_IPTABLES_FALSE!$BUILD_PLUGIN_IPTABLES_FALSE$ac_delim
@@ -41364,43 +42344,25 @@
 BUILD_PLUGIN_NETWORK_TRUE!$BUILD_PLUGIN_NETWORK_TRUE$ac_delim
 BUILD_PLUGIN_NETWORK_FALSE!$BUILD_PLUGIN_NETWORK_FALSE$ac_delim
 BUILD_PLUGIN_NFS_TRUE!$BUILD_PLUGIN_NFS_TRUE$ac_delim
 BUILD_PLUGIN_NFS_FALSE!$BUILD_PLUGIN_NFS_FALSE$ac_delim
 BUILD_PLUGIN_NGINX_TRUE!$BUILD_PLUGIN_NGINX_TRUE$ac_delim
 BUILD_PLUGIN_NGINX_FALSE!$BUILD_PLUGIN_NGINX_FALSE$ac_delim
+BUILD_PLUGIN_NOTIFY_EMAIL_TRUE!$BUILD_PLUGIN_NOTIFY_EMAIL_TRUE$ac_delim
+BUILD_PLUGIN_NOTIFY_EMAIL_FALSE!$BUILD_PLUGIN_NOTIFY_EMAIL_FALSE$ac_delim
 BUILD_PLUGIN_NTPD_TRUE!$BUILD_PLUGIN_NTPD_TRUE$ac_delim
 BUILD_PLUGIN_NTPD_FALSE!$BUILD_PLUGIN_NTPD_FALSE$ac_delim
 BUILD_PLUGIN_NUT_TRUE!$BUILD_PLUGIN_NUT_TRUE$ac_delim
 BUILD_PLUGIN_NUT_FALSE!$BUILD_PLUGIN_NUT_FALSE$ac_delim
+BUILD_PLUGIN_ONEWIRE_TRUE!$BUILD_PLUGIN_ONEWIRE_TRUE$ac_delim
+BUILD_PLUGIN_ONEWIRE_FALSE!$BUILD_PLUGIN_ONEWIRE_FALSE$ac_delim
 BUILD_PLUGIN_PERL_TRUE!$BUILD_PLUGIN_PERL_TRUE$ac_delim
 BUILD_PLUGIN_PERL_FALSE!$BUILD_PLUGIN_PERL_FALSE$ac_delim
 BUILD_PLUGIN_PING_TRUE!$BUILD_PLUGIN_PING_TRUE$ac_delim
 BUILD_PLUGIN_PING_FALSE!$BUILD_PLUGIN_PING_FALSE$ac_delim
-BUILD_PLUGIN_POWERDNS_TRUE!$BUILD_PLUGIN_POWERDNS_TRUE$ac_delim
-BUILD_PLUGIN_POWERDNS_FALSE!$BUILD_PLUGIN_POWERDNS_FALSE$ac_delim
-BUILD_PLUGIN_PROCESSES_TRUE!$BUILD_PLUGIN_PROCESSES_TRUE$ac_delim
-BUILD_PLUGIN_PROCESSES_FALSE!$BUILD_PLUGIN_PROCESSES_FALSE$ac_delim
-BUILD_PLUGIN_RRDTOOL_TRUE!$BUILD_PLUGIN_RRDTOOL_TRUE$ac_delim
-BUILD_PLUGIN_RRDTOOL_FALSE!$BUILD_PLUGIN_RRDTOOL_FALSE$ac_delim
-BUILD_PLUGIN_SENSORS_TRUE!$BUILD_PLUGIN_SENSORS_TRUE$ac_delim
-BUILD_PLUGIN_SENSORS_FALSE!$BUILD_PLUGIN_SENSORS_FALSE$ac_delim
-BUILD_PLUGIN_SERIAL_TRUE!$BUILD_PLUGIN_SERIAL_TRUE$ac_delim
-BUILD_PLUGIN_SERIAL_FALSE!$BUILD_PLUGIN_SERIAL_FALSE$ac_delim
-BUILD_PLUGIN_SNMP_TRUE!$BUILD_PLUGIN_SNMP_TRUE$ac_delim
-BUILD_PLUGIN_SNMP_FALSE!$BUILD_PLUGIN_SNMP_FALSE$ac_delim
-BUILD_PLUGIN_SWAP_TRUE!$BUILD_PLUGIN_SWAP_TRUE$ac_delim
-BUILD_PLUGIN_SWAP_FALSE!$BUILD_PLUGIN_SWAP_FALSE$ac_delim
-BUILD_PLUGIN_SYSLOG_TRUE!$BUILD_PLUGIN_SYSLOG_TRUE$ac_delim
-BUILD_PLUGIN_SYSLOG_FALSE!$BUILD_PLUGIN_SYSLOG_FALSE$ac_delim
-BUILD_PLUGIN_TAIL_TRUE!$BUILD_PLUGIN_TAIL_TRUE$ac_delim
-BUILD_PLUGIN_TAIL_FALSE!$BUILD_PLUGIN_TAIL_FALSE$ac_delim
-BUILD_PLUGIN_TAPE_TRUE!$BUILD_PLUGIN_TAPE_TRUE$ac_delim
-BUILD_PLUGIN_TAPE_FALSE!$BUILD_PLUGIN_TAPE_FALSE$ac_delim
-BUILD_PLUGIN_TCPCONNS_TRUE!$BUILD_PLUGIN_TCPCONNS_TRUE$ac_delim
-BUILD_PLUGIN_TCPCONNS_FALSE!$BUILD_PLUGIN_TCPCONNS_FALSE$ac_delim
-BUILD_PLUGIN_TEAMSPEAK2_TRUE!$BUILD_PLUGIN_TEAMSPEAK2_TRUE$ac_delim
+BUILD_PLUGIN_POSTGRESQL_TRUE!$BUILD_PLUGIN_POSTGRESQL_TRUE$ac_delim
 _ACEOF
 
   if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 97; then
     break
   elif $ac_last_try; then
     { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
@@ -41436,13 +42398,39 @@
 _ACEOF
 
 
 ac_delim='%!_!# '
 for ac_last_try in false false false false false :; do
   cat >conf$$subs.sed <<_ACEOF
+BUILD_PLUGIN_POSTGRESQL_FALSE!$BUILD_PLUGIN_POSTGRESQL_FALSE$ac_delim
+BUILD_PLUGIN_POWERDNS_TRUE!$BUILD_PLUGIN_POWERDNS_TRUE$ac_delim
+BUILD_PLUGIN_POWERDNS_FALSE!$BUILD_PLUGIN_POWERDNS_FALSE$ac_delim
+BUILD_PLUGIN_PROCESSES_TRUE!$BUILD_PLUGIN_PROCESSES_TRUE$ac_delim
+BUILD_PLUGIN_PROCESSES_FALSE!$BUILD_PLUGIN_PROCESSES_FALSE$ac_delim
+BUILD_PLUGIN_RRDTOOL_TRUE!$BUILD_PLUGIN_RRDTOOL_TRUE$ac_delim
+BUILD_PLUGIN_RRDTOOL_FALSE!$BUILD_PLUGIN_RRDTOOL_FALSE$ac_delim
+BUILD_PLUGIN_SENSORS_TRUE!$BUILD_PLUGIN_SENSORS_TRUE$ac_delim
+BUILD_PLUGIN_SENSORS_FALSE!$BUILD_PLUGIN_SENSORS_FALSE$ac_delim
+BUILD_PLUGIN_SERIAL_TRUE!$BUILD_PLUGIN_SERIAL_TRUE$ac_delim
+BUILD_PLUGIN_SERIAL_FALSE!$BUILD_PLUGIN_SERIAL_FALSE$ac_delim
+BUILD_PLUGIN_SNMP_TRUE!$BUILD_PLUGIN_SNMP_TRUE$ac_delim
+BUILD_PLUGIN_SNMP_FALSE!$BUILD_PLUGIN_SNMP_FALSE$ac_delim
+BUILD_PLUGIN_SWAP_TRUE!$BUILD_PLUGIN_SWAP_TRUE$ac_delim
+BUILD_PLUGIN_SWAP_FALSE!$BUILD_PLUGIN_SWAP_FALSE$ac_delim
+BUILD_PLUGIN_SYSLOG_TRUE!$BUILD_PLUGIN_SYSLOG_TRUE$ac_delim
+BUILD_PLUGIN_SYSLOG_FALSE!$BUILD_PLUGIN_SYSLOG_FALSE$ac_delim
+BUILD_PLUGIN_TAIL_TRUE!$BUILD_PLUGIN_TAIL_TRUE$ac_delim
+BUILD_PLUGIN_TAIL_FALSE!$BUILD_PLUGIN_TAIL_FALSE$ac_delim
+BUILD_PLUGIN_TAPE_TRUE!$BUILD_PLUGIN_TAPE_TRUE$ac_delim
+BUILD_PLUGIN_TAPE_FALSE!$BUILD_PLUGIN_TAPE_FALSE$ac_delim
+BUILD_PLUGIN_TCPCONNS_TRUE!$BUILD_PLUGIN_TCPCONNS_TRUE$ac_delim
+BUILD_PLUGIN_TCPCONNS_FALSE!$BUILD_PLUGIN_TCPCONNS_FALSE$ac_delim
+BUILD_PLUGIN_TEAMSPEAK2_TRUE!$BUILD_PLUGIN_TEAMSPEAK2_TRUE$ac_delim
 BUILD_PLUGIN_TEAMSPEAK2_FALSE!$BUILD_PLUGIN_TEAMSPEAK2_FALSE$ac_delim
+BUILD_PLUGIN_THERMAL_TRUE!$BUILD_PLUGIN_THERMAL_TRUE$ac_delim
+BUILD_PLUGIN_THERMAL_FALSE!$BUILD_PLUGIN_THERMAL_FALSE$ac_delim
 BUILD_PLUGIN_UNIXSOCK_TRUE!$BUILD_PLUGIN_UNIXSOCK_TRUE$ac_delim
 BUILD_PLUGIN_UNIXSOCK_FALSE!$BUILD_PLUGIN_UNIXSOCK_FALSE$ac_delim
 BUILD_PLUGIN_USERS_TRUE!$BUILD_PLUGIN_USERS_TRUE$ac_delim
 BUILD_PLUGIN_USERS_FALSE!$BUILD_PLUGIN_USERS_FALSE$ac_delim
 BUILD_PLUGIN_UUID_TRUE!$BUILD_PLUGIN_UUID_TRUE$ac_delim
 BUILD_PLUGIN_UUID_FALSE!$BUILD_PLUGIN_UUID_FALSE$ac_delim
@@ -41457,13 +42445,13 @@
 PERL_BINDINGS!$PERL_BINDINGS$ac_delim
 PERL_BINDINGS_OPTIONS!$PERL_BINDINGS_OPTIONS$ac_delim
 LIBOBJS!$LIBOBJS$ac_delim
 LTLIBOBJS!$LTLIBOBJS$ac_delim
 _ACEOF
 
-  if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 19; then
+  if test `sed -n "s/.*$ac_delim\$/X/p" conf$$subs.sed | grep -c X` = 45; then
     break
   elif $ac_last_try; then
     { { echo "$as_me:$LINENO: error: could not make $CONFIG_STATUS" >&5
 echo "$as_me: error: could not make $CONFIG_STATUS" >&2;}
    { (exit 1); exit 1; }; }
   else
@@ -42271,99 +43259,102 @@
 fi
 
 cat <<EOF;
 
 Configuration:
   Libraries:
-    libcurl . . . . . . $with_libcurl
-    libiokit  . . . . . $with_libiokit
-    libiptc . . . . . . $with_libiptc
-    libkstat  . . . . . $with_kstat
-    libkvm  . . . . . . $with_libkvm
-    libmysql  . . . . . $with_libmysql
-    libnetlink  . . . . $with_libnetlink
-    libnetsnmp  . . . . $with_libnetsnmp
-    liboconfig  . . . . $with_liboconfig
-    libopenipmi . . . . $with_libopenipmipthread
-    liboping  . . . . . $with_liboping
-    libpcap . . . . . . $with_libpcap
-    libperl . . . . . . $with_libperl
-    libpthread  . . . . $with_libpthread
-    librrd  . . . . . . $with_rrdtool
-    libsensors  . . . . $with_lm_sensors
-    libstatgrab . . . . $with_libstatgrab
-    libupsclient  . . . $with_libupsclient
-    libvirt . . . . . . $with_libvirt
-    libxml2 . . . . . . $with_libxml2
-    libxmms . . . . . . $with_libxmms
+    libcurl . . . . . . . $with_libcurl
+    libesmtp  . . . . . . $with_libesmtp
+    libiokit  . . . . . . $with_libiokit
+    libiptc . . . . . . . $with_libiptc
+    libkstat  . . . . . . $with_kstat
+    libkvm  . . . . . . . $with_libkvm
+    libmysql  . . . . . . $with_libmysql
+    libnetlink  . . . . . $with_libnetlink
+    libnetsnmp  . . . . . $with_libnetsnmp
+    libnotify . . . . . . $with_libnotify
+    liboconfig  . . . . . $with_liboconfig
+    libopenipmi . . . . . $with_libopenipmipthread
+    liboping  . . . . . . $with_liboping
+    libpcap . . . . . . . $with_libpcap
+    libperl . . . . . . . $with_libperl
+    libpthread  . . . . . $with_libpthread
+    libpq . . . . . . . . $with_libpq
+    librrd  . . . . . . . $with_rrdtool
+    libsensors  . . . . . $with_lm_sensors
+    libstatgrab . . . . . $with_libstatgrab
+    libupsclient  . . . . $with_libupsclient
+    libvirt . . . . . . . $with_libvirt
+    libxml2 . . . . . . . $with_libxml2
+    libxmms . . . . . . . $with_libxmms
 
   Features:
-    daemon mode . . . . $enable_daemon
-    debug . . . . . . . $enable_debug
+    daemon mode . . . . . $enable_daemon
+    debug . . . . . . . . $enable_debug
 
   Bindings:
-    perl  . . . . . . . $with_perl_bindings
+    perl  . . . . . . . . $with_perl_bindings
 
   Modules:
-    apache  . . . . . . $enable_apache
-    apcups  . . . . . . $enable_apcups
-    apple_sensors . . . $enable_apple_sensors
-    ascent  . . . . . . $enable_ascent
-    battery . . . . . . $enable_battery
-    cpu . . . . . . . . $enable_cpu
-    cpufreq . . . . . . $enable_cpufreq
-    csv . . . . . . . . $enable_csv
-    df  . . . . . . . . $enable_df
-    disk  . . . . . . . $enable_disk
-    dns . . . . . . . . $enable_dns
-    email . . . . . . . $enable_email
-    entropy . . . . . . $enable_entropy
-    exec  . . . . . . . $enable_exec
-    hddtemp . . . . . . $enable_hddtemp
-    interface . . . . . $enable_interface
-    iptables  . . . . . $enable_iptables
-    ipmi  . . . . . . . $enable_ipmi
-    ipvs  . . . . . . . $enable_ipvs
-    irq . . . . . . . . $enable_irq
-    libvirt . . . . . . $enable_libvirt
-    load  . . . . . . . $enable_load
-    logfile . . . . . . $enable_logfile
-    mbmon . . . . . . . $enable_mbmon
-    memcached . . . . . $enable_memcached
-    memory  . . . . . . $enable_memory
-    multimeter  . . . . $enable_multimeter
-    mysql . . . . . . . $enable_mysql
-    netlink . . . . . . $enable_netlink
-    network . . . . . . $enable_network
-    nfs . . . . . . . . $enable_nfs
-    nginx . . . . . . . $enable_nginx
-    ntpd  . . . . . . . $enable_ntpd
-    nut . . . . . . . . $enable_nut
-    perl  . . . . . . . $enable_perl
-    ping  . . . . . . . $enable_ping
-    powerdns  . . . . . $enable_powerdns
-    processes . . . . . $enable_processes
-    rrdtool . . . . . . $enable_rrdtool
-    sensors . . . . . . $enable_sensors
-    serial  . . . . . . $enable_serial
-    snmp  . . . . . . . $enable_snmp
-    swap  . . . . . . . $enable_swap
-    syslog  . . . . . . $enable_syslog
-    tail  . . . . . . . $enable_tail
-    tape  . . . . . . . $enable_tape
-    tcpconns  . . . . . $enable_tcpconns
-    teamspeak2  . . . . $enable_teamspeak2
-    unixsock  . . . . . $enable_unixsock
-    users . . . . . . . $enable_users
-    uuid  . . . . . . . $enable_uuid
-    vmem  . . . . . . . $enable_vmem
-    vserver . . . . . . $enable_vserver
-    wireless  . . . . . $enable_wireless
-    xmms  . . . . . . . $enable_xmms
+    apache  . . . . . . . $enable_apache
+    apcups  . . . . . . . $enable_apcups
+    apple_sensors . . . . $enable_apple_sensors
+    ascent  . . . . . . . $enable_ascent
+    battery . . . . . . . $enable_battery
+    cpu . . . . . . . . . $enable_cpu
+    cpufreq . . . . . . . $enable_cpufreq
+    csv . . . . . . . . . $enable_csv
+    df  . . . . . . . . . $enable_df
+    disk  . . . . . . . . $enable_disk
+    dns . . . . . . . . . $enable_dns
+    email . . . . . . . . $enable_email
+    entropy . . . . . . . $enable_entropy
+    exec  . . . . . . . . $enable_exec
+    filecount . . . . . . $enable_filecount
+    hddtemp . . . . . . . $enable_hddtemp
+    interface . . . . . . $enable_interface
+    iptables  . . . . . . $enable_iptables
+    ipmi  . . . . . . . . $enable_ipmi
+    ipvs  . . . . . . . . $enable_ipvs
+    irq . . . . . . . . . $enable_irq
+    libvirt . . . . . . . $enable_libvirt
+    load  . . . . . . . . $enable_load
+    logfile . . . . . . . $enable_logfile
+    mbmon . . . . . . . . $enable_mbmon
+    memcached . . . . . . $enable_memcached
+    memory  . . . . . . . $enable_memory
+    multimeter  . . . . . $enable_multimeter
+    mysql . . . . . . . . $enable_mysql
+    netlink . . . . . . . $enable_netlink
+    network . . . . . . . $enable_network
+    nfs . . . . . . . . . $enable_nfs
+    nginx . . . . . . . . $enable_nginx
+    notify_desktop  . . . $enable_notify_desktop
+    notify_email  . . . . $enable_notify_email
+    ntpd  . . . . . . . . $enable_ntpd
+    nut . . . . . . . . . $enable_nut
+    onewire . . . . . . . $enable_onewire
+    perl  . . . . . . . . $enable_perl
+    ping  . . . . . . . . $enable_ping
+    postgresql  . . . . . $enable_postgresql
+    powerdns  . . . . . . $enable_powerdns
+    processes . . . . . . $enable_processes
+    rrdtool . . . . . . . $enable_rrdtool
+    sensors . . . . . . . $enable_sensors
+    serial  . . . . . . . $enable_serial
+    snmp  . . . . . . . . $enable_snmp
+    swap  . . . . . . . . $enable_swap
+    syslog  . . . . . . . $enable_syslog
+    tail  . . . . . . . . $enable_tail
+    tape  . . . . . . . . $enable_tape
+    tcpconns  . . . . . . $enable_tcpconns
+    teamspeak2  . . . . . $enable_teamspeak2
+    thermal . . . . . . . $enable_thermal
+    unixsock  . . . . . . $enable_unixsock
+    users . . . . . . . . $enable_users
+    uuid  . . . . . . . . $enable_uuid
+    vmem  . . . . . . . . $enable_vmem
+    vserver . . . . . . . $enable_vserver
+    wireless  . . . . . . $enable_wireless
+    xmms  . . . . . . . . $enable_xmms
 
 EOF
-
-if test "x$dependency_error" = "xyes"; then
-	{ { echo "$as_me:$LINENO: error: \"Some plugins are missing dependencies - see above summary for details\"" >&5
-echo "$as_me: error: \"Some plugins are missing dependencies - see above summary for details\"" >&2;}
-   { (exit 1); exit 1; }; }
-fi
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/configure.in	2009-01-03 04:10:40.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/configure.in	2008-09-05 16:53:08.000000000 +0800
@@ -42,12 +42,15 @@
 	AC_DEFINE([KERNEL_SOLARIS], 1, [True if program is to be compiled for a Solaris kernel])
 	ac_system="Solaris"
 	;;
 	*darwin*)
 	ac_system="Darwin"
 	;;
+	*openbsd*)
+	ac_system="OpenBSD"
+	;;
 	*)
 	ac_system="unknown"
 esac
 AC_MSG_RESULT([$ac_system])
 
 if test "x$ac_system" = "xLinux"
@@ -59,25 +62,20 @@
 	fi
 
 	KERNEL_CFLAGS="-I$KERNEL_DIR/include"
 	AC_SUBST(KERNEL_CFLAGS)
 fi
 
-if test "x$ac_system" = "xSolaris"
-then
-	CPPFLAGS="$CPPFLAGS -D_POSIX_PTHREAD_SEMANTICS"
-fi
-
 #
 # Checks for header files.
 #
 AC_HEADER_STDC
 AC_HEADER_SYS_WAIT
 AC_HEADER_DIRENT
 
-AC_CHECK_HEADERS(stdint.h stdio.h errno.h math.h stdarg.h syslog.h fcntl.h signal.h assert.h sys/types.h sys/socket.h sys/select.h poll.h netdb.h arpa/inet.h sys/resource.h sys/param.h kstat.h regex.h sys/ioctl.h endian.h sys/isa_defs.h)
+AC_CHECK_HEADERS(stdio.h stdint.h stdbool.h errno.h math.h stdarg.h syslog.h fcntl.h signal.h assert.h sys/types.h sys/socket.h sys/select.h poll.h netdb.h arpa/inet.h sys/resource.h sys/param.h kstat.h regex.h sys/ioctl.h endian.h sys/isa_defs.h)
 
 # For ping library
 AC_CHECK_HEADERS(netinet/in_systm.h, [], [],
 [#if HAVE_STDINT_H
 # include <stdint.h>
 #endif
@@ -239,28 +237,22 @@
 #if HAVE_IOKIT_IOTYPES_H
 #  include <IOKit/IOTypes.h>
 #endif
 ])
 
 # For the swap module
-have_sys_swap_h="yes"
-AC_CHECK_HEADERS(sys/swap.h, [], [have_sys_swap_h="no"],
+AC_CHECK_HEADERS(sys/swap.h, [], [],
 [
 #if HAVE_SYS_TYPES_H
 #  include <sys/types.h>
 #endif
 #if HAVE_SYS_PARAM_H
 # include <sys/param.h>
 #endif
 ])
 
-if test "x$have_sys_swap_h$ac_system" = "xnoSolaris"
-then
-	AC_MSG_NOTICE([Solaris detected and sys/swap.h not found: Try building a 64bit binary.])
-fi
-
 # For load module
 # For the processes plugin
 # For users module
 AC_CHECK_HEADERS(sys/loadavg.h linux/config.h utmp.h utmpx.h)
 
 # For interface plugin
@@ -1241,21 +1233,39 @@
   BUILD_WITH_LIBSTATGRAB_LDFLAGS="$with_libstatgrab_ldflags"
   AC_SUBST(BUILD_WITH_LIBSTATGRAB_CFLAGS)
   AC_SUBST(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
 fi
 
 with_libkvm="no"
+AC_CHECK_LIB(kvm, kvm_getprocs, [with_kvm_getprocs="yes"], [with_kvm_getprocs="no"])
+if test "x$with_kvm_getprocs" = "xyes"
+then
+	AC_DEFINE(HAVE_LIBKVM_GETPROCS, 1,
+		  [Define to 1 if you have the 'kvm' library with the 'kvm_getprocs' symbol (-lkvm)])
+	with_libkvm="yes"
+fi
+AM_CONDITIONAL(BUILD_WITH_LIBKVM_GETPROCS, test "x$with_kvm_getprocs" = "xyes")
+
 AC_CHECK_LIB(kvm, kvm_getswapinfo, [with_kvm_getswapinfo="yes"], [with_kvm_getswapinfo="no"])
 if test "x$with_kvm_getswapinfo" = "xyes"
 then
 	AC_DEFINE(HAVE_LIBKVM_GETSWAPINFO, 1,
 		  [Define to 1 if you have the 'kvm' library with the 'kvm_getswapinfo' symbol (-lkvm)])
 	with_libkvm="yes"
 fi
 AM_CONDITIONAL(BUILD_WITH_LIBKVM_GETSWAPINFO, test "x$with_kvm_getswapinfo" = "xyes")
 
+AC_CHECK_LIB(kvm, kvm_nlist, [with_kvm_nlist="yes"], [with_kvm_nlist="no"])
+if test "x$with_kvm_nlist" = "xyes"
+then
+	AC_DEFINE(HAVE_LIBKVM_NLIST, 1,
+		  [Define to 1 if you have the 'kvm' library with the 'kvm_nlist' symbol (-lkvm)])
+	with_libkvm="yes"
+fi
+AM_CONDITIONAL(BUILD_WITH_LIBKVM_NLIST, test "x$with_kvm_nlist" = "xyes")
+
 with_sensors_cflags=""
 with_sensors_ldflags=""
 AC_ARG_WITH(lm-sensors, [AS_HELP_STRING([--with-lm-sensors@<:@=PREFIX@:>@], [Path to lm_sensors.])],
 [
 	if test "x$withval" = "xno"
 	then
@@ -1346,42 +1356,30 @@
 then
 	with_mysql_cflags=`$with_mysql_config --cflags 2>/dev/null`
 	mysql_config_status=$?
 
 	if test $mysql_config_status -ne 0
 	then
-		with_libmysql="no ($with_mysql_config failed)"
+		with_libmysql="no"
 	else
 		SAVE_CPPFLAGS="$CPPFLAGS"
 		CPPFLAGS="$CPPFLAGS $with_mysql_cflags"
 
-		have_mysql_h="no"
-		have_mysql_mysql_h="no"
-		AC_CHECK_HEADERS(mysql.h, [have_mysql_h="yes"])
-
-		if test "x$have_mysql_h" = "xno"
-		then
-			AC_CHECK_HEADERS(mysql/mysql.h, [have_mysql_mysql_h="yes"])
-		fi
-
-		if test "x$have_mysql_h$have_mysql_mysql_h" = "xnono"
-		then
-			with_libmysql="no (mysql.h not found)"
-		fi
+		AC_CHECK_HEADERS(mysql/mysql.h, [], [with_libmysql="no (mysql/mysql.h not found)"], [])
 
 		CPPFLAGS="$SAVE_CPPFLAGS"
 	fi
 fi
 if test "x$with_libmysql" = "xyes"
 then
 	with_mysql_libs=`$with_mysql_config --libs 2>/dev/null`
 	mysql_config_status=$?
 
 	if test $mysql_config_status -ne 0
 	then
-		with_libmysql="no ($with_mysql_config failed)"
+		with_libmysql="no"
 	else
 		AC_CHECK_LIB(mysqlclient, mysql_init,
 		 [with_libmysql="yes"],
 		 [with_libmysql="no (symbol 'mysql_init' not found)"],
 		 [$with_mysql_libs])
 	fi
@@ -1490,12 +1488,58 @@
 		CPPFLAGS="$save_CPPFLAGS"
 	])
 fi
 AM_CONDITIONAL(BUILD_WITH_LIBOPING, test "x$with_liboping" = "xyes")
 AM_CONDITIONAL(BUILD_WITH_OWN_LIBOPING, test "x$with_own_liboping" = "xyes")
 
+with_libowcapi_cppflags=""
+with_libowcapi_libs="-lowcapi"
+AC_ARG_WITH(libowcapi, [AS_HELP_STRING([--with-libowcapi@<:@=PREFIX@:>@], [Path to libowcapi.])],
+[
+	if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	then
+		with_libowcapi_cppflags="-I$withval/include"
+		with_libowcapi_libs="-L$withval/lib -lowcapi"
+		with_libowcapi="yes"
+	else
+		with_libowcapi="$withval"
+	fi
+],
+[
+	with_libowcapi="yes"
+])
+if test "x$with_libowcapi" = "xyes"
+then
+	SAVE_CPPFLAGS="$CPPFLAGS"
+	CPPFLAGS="$with_libowcapi_cppflags"
+	
+	AC_CHECK_HEADERS(owcapi.h, [with_libowcapi="yes"], [with_libowcapi="no (owcapi.h not found)"])
+
+	CPPFLAGS="$SAVE_CPPFLAGS"
+fi
+if test "x$with_libowcapi" = "xyes"
+then
+	SAVE_LDFLAGS="$LDFLAGS"
+	SAVE_CPPFLAGS="$CPPFLAGS"
+	LDFLAGS="$with_libowcapi_libs"
+	CPPFLAGS="$with_libowcapi_cppflags"
+	
+	AC_CHECK_LIB(owcapi, OW_get, [with_libowcapi="yes"], [with_libowcapi="no (libowcapi not found)"])
+
+	LDFLAGS="$SAVE_LDFLAGS"
+	CPPFLAGS="$SAVE_CPPFLAGS"
+fi
+if test "x$with_libowcapi" = "xyes"
+then
+	BUILD_WITH_LIBOWCAPI_CPPFLAGS="$with_libowcapi_cppflags"
+	BUILD_WITH_LIBOWCAPI_LIBS="$with_libowcapi_libs"
+	AC_SUBST(BUILD_WITH_LIBOWCAPI_CPPFLAGS)
+	AC_SUBST(BUILD_WITH_LIBOWCAPI_LIBS)
+fi
+
+
 AC_ARG_WITH(libpcap, [AS_HELP_STRING([--with-libpcap@<:@=PREFIX@:>@], [Path to libpcap.])],
 [
 	if test "x$withval" != "xno" && test "x$withval" != "xyes"
 	then
 		LDFLAGS="$LDFLAGS -L$withval/lib"
 		CPPFLAGS="$CPPFLAGS -I$withval/include"
@@ -1528,34 +1572,76 @@
 	collect_libpcap=0
 fi
 AC_DEFINE_UNQUOTED(COLLECT_LIBPCAP, [$collect_libpcap],
 	[Wether or not to use the pcap library])
 AM_CONDITIONAL(BUILD_WITH_LIBPCAP, test "x$with_libpcap" = "xyes")
 
+AC_ARG_WITH(libesmtp, [AS_HELP_STRING([--with-libesmtp@<:@=PREFIX@:>@], [Path to libesmtp.])],
+[
+	if test "x$withval" != "xno" && test "x$withval" != "xyes"
+	then
+		LDFLAGS="$LDFLAGS -L$withval/lib"
+		CPPFLAGS="$CPPFLAGS -I$withval/include -D_THREAD_SAFE"
+		with_libesmtp="yes"
+	else
+		with_libesmtp="$withval"
+	fi
+],
+[
+	with_libesmtp="yes"
+])
+if test "x$with_libesmtp" = "xyes"
+then
+	AC_CHECK_LIB(esmtp, smtp_create_session,
+	[
+		AC_DEFINE(HAVE_LIBESMTP, 1, [Define to 1 if you have the esmtp library (-lesmtp).])
+	], [with_libesmtp="no (libesmtp not found)"])
+fi
+if test "x$with_libesmtp" = "xyes"
+then
+	AC_CHECK_HEADERS(libesmtp.h,
+	[
+		AC_DEFINE(HAVE_LIBESMTP_H, 1, [Define to 1 if you have the <libesmtp.h> header file.])
+	], [with_libesmtp="no (libesmtp.h not found)"])
+fi
+if test "x$with_libesmtp" = "xyes"
+then
+	collect_libesmtp=1
+else
+	collect_libesmtp=0
+fi
+AC_DEFINE_UNQUOTED(COLLECT_LIBESMTP, [$collect_libesmtp],
+	[Wether or not to use the esmtp library])
+AM_CONDITIONAL(BUILD_WITH_LIBESMTP, test "x$with_libesmtp" = "xyes")
+
 perl_interpreter="perl"
 AC_ARG_WITH(libperl, [AS_HELP_STRING([--with-libperl@<:@=PREFIX@:>@], [Path to libperl.])],
 [
-	if test "x$withval" != "xno" && test "x$withval" != "xyes"
+ 	if test -x "$withval"
+	then
+		perl_interpreter="$withval"
+		with_libperl="yes"
+	else if test "x$withval" != "xno" && test "x$withval" != "xyes"
 	then
 		LDFLAGS="$LDFLAGS -L$withval/lib"
 		CPPFLAGS="$CPPFLAGS -I$withval/include"
 		perl_interpreter="$withval/bin/perl"
 		with_libperl="yes"
 	else
 		with_libperl="$withval"
-	fi
+	fi; fi
 ],
 [
 	with_libperl="yes"
 ])
 
 AC_MSG_CHECKING([for perl])
 perl_interpreter=`which "$perl_interpreter" 2> /dev/null`
 if test -x "$perl_interpreter"
 then
-	AC_MSG_RESULT([yes])
+	AC_MSG_RESULT([yes ($perl_interpreter)])
 else
 	perl_interpreter=""
 	AC_MSG_RESULT([no])
 fi
 
 AC_SUBST(PERL, "$perl_interpreter")
@@ -1572,19 +1658,20 @@
 
   AC_CACHE_CHECK([for libperl],
     [have_libperl],
     AC_LINK_IFELSE(
       AC_LANG_PROGRAM(
       [[
+#define PERL_NO_GET_CONTEXT
 #include <EXTERN.h>
 #include <perl.h>
 #include <XSUB.h>
       ]],
       [[
-       PerlInterpreter *perl = NULL;
-       Perl_load_module (perl, PERL_LOADMOD_NOIMPORT,
+       dTHX;
+       load_module (PERL_LOADMOD_NOIMPORT,
 			 newSVpv ("Collectd::Plugin::FooBar", 24),
 			 Nullsv);
       ]]),
       [have_libperl="yes"],
       [have_libperl="no"]
     )
@@ -1768,12 +1855,16 @@
 	BUILD_WITH_LIBSNMP_LIBS="$with_snmp_libs"
 	AC_SUBST(BUILD_WITH_LIBSNMP_CFLAGS)
 	AC_SUBST(BUILD_WITH_LIBSNMP_LIBS)
 fi
 AM_CONDITIONAL(BUILD_WITH_LIBNETSNMP, test "x$with_libnetsnmp" = "xyes")
 
+PKG_CHECK_MODULES([LIBNOTIFY], [libnotify],
+		[with_libnotify="yes"],
+		[with_libnotify="no ($LIBNOTIFY_PKG_ERRORS)"])
+
 with_libupsclient="no (pkg-config isn't available)"
 with_libupsclient_cflags=""
 with_libupsclient_libs=""
 if test "x$PKG_CONFIG" != "x"
 then
 	pkg-config --exists 'libupsclient' 2>/dev/null
@@ -2091,12 +2182,99 @@
 	BUILD_WITH_OPENIPMI_CFLAGS="$with_libopenipmipthread_cflags"
 	BUILD_WITH_OPENIPMI_LIBS="$with_libopenipmipthread_ldflags"
 	AC_SUBST(BUILD_WITH_OPENIPMI_CFLAGS)
 	AC_SUBST(BUILD_WITH_OPENIPMI_LIBS)
 fi
 
+dnl Check for libpq.
+with_pg_config="pg_config"
+with_libpq_includedir=""
+with_libpq_libdir=""
+with_libpq_cppflags=""
+with_libpq_ldflags=""
+AC_ARG_WITH(libpq, [AS_HELP_STRING([--with-libpq@<:@=PREFIX@:>@],
+	[Path to libpq.])],
+[
+	if test "x$withval" = "xno"
+	then
+		with_libpq="no"
+	else if test "x$withval" = "xyes"
+	then
+		with_libpq="yes"
+	else
+		if test -f "$withval" && test -x "$withval";
+		then
+			with_pg_config="$withval"
+		else if test -x "$withval/bin/pg_config"
+		then
+			with_pg_config="$withval/bin/pg_config"
+		fi; fi
+		with_libpq="yes"
+	fi; fi
+],
+[
+	with_libpq="yes"
+])
+if test "x$with_libpq" = "xyes"
+then
+	with_libpq_includedir=`$with_pg_config --includedir 2> /dev/null`
+	pg_config_status=$?
+
+	if test $pg_config_status -eq 0
+	then
+		if test -n "$with_libpq_includedir"; then
+			for dir in $with_libpq_includedir; do
+				with_libpq_cppflags="$with_libpq_cppflags -I$dir"
+			done
+		fi
+	else
+		AC_MSG_WARN([$with_pg_config returned with status $pg_config_status])
+	fi
+
+	SAVE_CPPFLAGS="$CPPFLAGS"
+	CPPFLAGS="$CPPFLAGS $with_libpq_cppflags"
+
+	AC_CHECK_HEADERS(libpq-fe.h, [],
+		[with_libpq="no (libpq-fe.h not found)"], [])
+
+	CPPFLAGS="$SAVE_CPPFLAGS"
+fi
+if test "x$with_libpq" = "xyes"
+then
+	with_libpq_libdir=`$with_pg_config --libdir 2> /dev/null`
+	pg_config_status=$?
+
+	if test $pg_config_status -eq 0
+	then
+		if test -n "$with_libpq_libdir"; then
+			for dir in $with_libpq_libdir; do
+				with_libpq_ldflags="$with_libpq_ldflags -L$dir"
+			done
+		fi
+	else
+		AC_MSG_WARN([$with_pg_config returned with status $pg_config_status])
+	fi
+
+	SAVE_LDFLAGS="$LDFLAGS"
+	LDFLAGS="$LDFLAGS $with_libpq_ldflags"
+
+	AC_CHECK_LIB(pq, PQconnectdb,
+		[with_libpq="yes"],
+		[with_libpq="no (symbol 'PQconnectdb' not found)"])
+
+	LDFLAGS="$SAVE_LDFLAGS"
+fi
+if test "x$with_libpq" = "xyes"
+then
+	BUILD_WITH_LIBPQ_CPPFLAGS="$with_libpq_cppflags"
+	BUILD_WITH_LIBPQ_LDFLAGS="$with_libpq_ldflags"
+	AC_SUBST(BUILD_WITH_LIBPQ_CPPFLAGS)
+	AC_SUBST(BUILD_WITH_LIBPQ_LDFLAGS)
+fi
+AM_CONDITIONAL(BUILD_WITH_LIBPQ, test "x$with_libpq" = "xyes")
+
 dnl Check for libvirt and libxml2 libraries.
 with_libxml2="no (pkg-config isn't available)"
 with_libxml2_cflags=""
 with_libxml2_ldflags=""
 with_libvirt="no (pkg-config isn't available)"
 with_libvirt_cflags=""
@@ -2298,19 +2476,13 @@
      else
 	     enable_plugin="no"
      fi
     ])
     if test "x$enable_plugin" = "xyes"
     then
-	    if test "x$2" = "xyes"
-	    then
-		    AC_DEFINE([HAVE_PLUGIN_]my_toupper([$1]), 1, [Define to 1 if the $1 plugin is enabled.])
-	    else # User passed "yes" but dependency checking yielded "no" => Dependency problem.
-		    dependency_error="yes"
-		    enable_plugin="no (dependency error)"
-	    fi
+	    AC_DEFINE([HAVE_PLUGIN_]my_toupper([$1]), 1, [Define to 1 if the $1 plugin is enabled.])
     fi
     AM_CONDITIONAL([BUILD_PLUGIN_]my_toupper([$1]), test "x$enable_plugin" = "xyes")
     enable_$1="$enable_plugin"
   ]
 )# AC_PLUGIN(name, default, info)
 
@@ -2318,13 +2490,12 @@
 collectd features:])
 # FIXME: Remove these calls to `AC_COLLECTD' and then remove that macro.
 AC_COLLECTD([debug],     [enable],  [feature], [debugging])
 AC_COLLECTD([daemon],    [disable], [feature], [daemon mode])
 AC_COLLECTD([getifaddrs],[enable],  [feature], [getifaddrs under Linux])
 
-dependency_error="no"
 plugin_ascent="no"
 plugin_battery="no"
 plugin_cpu="no"
 plugin_cpufreq="no"
 plugin_df="no"
 plugin_disk="no"
@@ -2341,12 +2512,13 @@
 plugin_perl="no"
 plugin_processes="no"
 plugin_serial="no"
 plugin_swap="no"
 plugin_tape="no"
 plugin_tcpconns="no"
+plugin_thermal="no"
 plugin_users="no"
 plugin_vmem="no"
 plugin_vserver="no"
 plugin_wireless="no"
 
 # Linux
@@ -2363,22 +2535,28 @@
 	plugin_memory="yes"
 	plugin_nfs="yes"
 	plugin_processes="yes"
 	plugin_serial="yes"
 	plugin_swap="yes"
 	plugin_tcpconns="yes"
+	plugin_thermal="yes"
 	plugin_vmem="yes"
 	plugin_vserver="yes"
 	plugin_wireless="yes"
 
 	if test "x$have_net_ip_vs_h" = "xyes" -o "x$have_ip_vs_h" = "xyes"
 	then
 		plugin_ipvs="yes"
 	fi
 fi
 
+if test "x$ac_system" = "xOpenBSD"
+then
+	plugin_tcpconns="yes"
+fi
+
 # Mac OS X devices
 if test "x$with_libiokit" = "xyes"
 then
 	plugin_battery="yes"
 	plugin_disk="yes"
 fi
@@ -2387,18 +2565,14 @@
 if test "x$with_devinfo$with_kstat" = "xyesyes"
 then
 	plugin_cpu="yes"
 	plugin_disk="yes"
 	plugin_interface="yes"
 	plugin_memory="yes"
-	plugin_tape="yes"
-fi
-
-if test "x$have_sys_swap_h$with_kstat$ac_system" = "xyesyesSolaris"
-then
 	plugin_swap="yes"
+	plugin_tape="yes"
 fi
 
 # libstatgrab
 if test "x$with_libstatgrab" = "xyes"
 then
 	plugin_cpu="yes"
@@ -2473,17 +2647,27 @@
 
 if test "x$have_thread_info" = "xyes"
 then
 	plugin_processes="yes"
 fi
 
+if test "x$with_kvm_getprocs" = "xyes"
+then
+	plugin_processes="yes"
+fi
+
 if test "x$with_kvm_getswapinfo" = "xyes"
 then
 	plugin_swap="yes"
 fi
 
+if test "x$with_kvm_nlist" = "xyes"
+then
+	plugin_tcpconns="yes"
+fi
+
 if test "x$have_getutent" = "xyes"
 then
 	plugin_users="yes"
 fi
 if test "x$have_getutxent" = "xyes"
 then
@@ -2500,18 +2684,20 @@
 AC_PLUGIN([apple_sensors], [$with_libiokit],   [Apple's hardware sensors])
 AC_PLUGIN([ascent],      [$plugin_ascent],     [AscentEmu player statistics])
 AC_PLUGIN([battery],     [$plugin_battery],    [Battery statistics])
 AC_PLUGIN([cpu],         [$plugin_cpu],        [CPU usage statistics])
 AC_PLUGIN([cpufreq],     [$plugin_cpufreq],    [CPU frequency statistics])
 AC_PLUGIN([csv],         [yes],                [CSV output plugin])
+AC_PLUGIN([notify_desktop], [$with_libnotify], [Desktop notifications])
 AC_PLUGIN([df],          [$plugin_df],         [Filesystem usage statistics])
 AC_PLUGIN([disk],        [$plugin_disk],       [Disk usage statistics])
 AC_PLUGIN([dns],         [$with_libpcap],      [DNS traffic analysis])
 AC_PLUGIN([email],       [yes],                [EMail statistics])
 AC_PLUGIN([entropy],     [$plugin_entropy],    [Entropy statistics])
 AC_PLUGIN([exec],        [yes],                [Execution of external programs])
+AC_PLUGIN([filecount],   [yes],                [Count files in directories])
 AC_PLUGIN([hddtemp],     [yes],                [Query hddtempd])
 AC_PLUGIN([interface],   [$plugin_interface],  [Interface traffic statistics])
 AC_PLUGIN([iptables],    [$with_libiptc],      [IPTables rule counters])
 AC_PLUGIN([ipmi],        [$plugin_ipmi],       [IPMI sensor statistics])
 AC_PLUGIN([ipvs],        [$plugin_ipvs],       [IPVS connection statistics])
 AC_PLUGIN([irq],         [$plugin_irq],        [IRQ statistics])
@@ -2524,28 +2710,32 @@
 AC_PLUGIN([multimeter],  [$plugin_multimeter], [Read multimeter values])
 AC_PLUGIN([mysql],       [$with_libmysql],     [MySQL statistics])
 AC_PLUGIN([netlink],     [$with_libnetlink],   [Enhanced Linux network statistics])
 AC_PLUGIN([network],     [yes],                [Network communication plugin])
 AC_PLUGIN([nfs],         [$plugin_nfs],        [NFS statistics])
 AC_PLUGIN([nginx],       [$with_libcurl],      [nginx statistics])
+AC_PLUGIN([notify_email], [$with_libesmtp],    [Email notifier])
 AC_PLUGIN([ntpd],        [yes],                [NTPd statistics])
 AC_PLUGIN([nut],         [$with_libupsclient], [Network UPS tools statistics])
+AC_PLUGIN([onewire],     [$with_libowcapi],    [OneWire sensor statistics])
 AC_PLUGIN([perl],        [$plugin_perl],       [Embed a Perl interpreter])
 AC_PLUGIN([ping],        [$with_liboping],     [Network latency statistics])
+AC_PLUGIN([postgresql],  [$with_libpq],        [PostgreSQL database statistics])
 AC_PLUGIN([powerdns],    [yes],                [PowerDNS statistics])
 AC_PLUGIN([processes],   [$plugin_processes],  [Process statistics])
 AC_PLUGIN([rrdtool],     [$with_rrdtool],      [RRDTool output plugin])
 AC_PLUGIN([sensors],     [$with_lm_sensors],   [lm_sensors statistics])
 AC_PLUGIN([serial],      [$plugin_serial],     [serial port traffic])
 AC_PLUGIN([snmp],        [$with_libnetsnmp],   [SNMP querying plugin])
 AC_PLUGIN([swap],        [$plugin_swap],       [Swap usage statistics])
 AC_PLUGIN([syslog],      [$have_syslog],       [Syslog logging plugin])
 AC_PLUGIN([tail],        [yes],                [Parsing of logfiles])
 AC_PLUGIN([tape],        [$plugin_tape],       [Tape drive statistics])
 AC_PLUGIN([tcpconns],    [$plugin_tcpconns],   [TCP connection statistics])
 AC_PLUGIN([teamspeak2],  [yes],                [TeamSpeak2 server statistics])
+AC_PLUGIN([thermal],     [$plugin_thermal],    [Linux ACPI thermal zone statistics])
 AC_PLUGIN([unixsock],    [yes],                [Unixsock communication plugin])
 AC_PLUGIN([users],       [$plugin_users],      [User statistics])
 AC_PLUGIN([uuid],        [yes],                [UUID as hostname plugin])
 AC_PLUGIN([vmem],        [$plugin_vmem],       [Virtual memory statistics])
 AC_PLUGIN([vserver],     [$plugin_vserver],    [Linux VServer statistics])
 AC_PLUGIN([wireless],    [$plugin_wireless],   [Wireless statistics])
@@ -2621,97 +2811,102 @@
 fi
 
 cat <<EOF;
 
 Configuration:
   Libraries:
-    libcurl . . . . . . $with_libcurl
-    libiokit  . . . . . $with_libiokit
-    libiptc . . . . . . $with_libiptc
-    libkstat  . . . . . $with_kstat
-    libkvm  . . . . . . $with_libkvm
-    libmysql  . . . . . $with_libmysql
-    libnetlink  . . . . $with_libnetlink
-    libnetsnmp  . . . . $with_libnetsnmp
-    liboconfig  . . . . $with_liboconfig
-    libopenipmi . . . . $with_libopenipmipthread
-    liboping  . . . . . $with_liboping
-    libpcap . . . . . . $with_libpcap
-    libperl . . . . . . $with_libperl
-    libpthread  . . . . $with_libpthread
-    librrd  . . . . . . $with_rrdtool
-    libsensors  . . . . $with_lm_sensors
-    libstatgrab . . . . $with_libstatgrab
-    libupsclient  . . . $with_libupsclient
-    libvirt . . . . . . $with_libvirt
-    libxml2 . . . . . . $with_libxml2
-    libxmms . . . . . . $with_libxmms
+    libcurl . . . . . . . $with_libcurl
+    libesmtp  . . . . . . $with_libesmtp
+    libiokit  . . . . . . $with_libiokit
+    libiptc . . . . . . . $with_libiptc
+    libkstat  . . . . . . $with_kstat
+    libkvm  . . . . . . . $with_libkvm
+    libmysql  . . . . . . $with_libmysql
+    libnetlink  . . . . . $with_libnetlink
+    libnetsnmp  . . . . . $with_libnetsnmp
+    libnotify . . . . . . $with_libnotify
+    liboconfig  . . . . . $with_liboconfig
+    libopenipmi . . . . . $with_libopenipmipthread
+    liboping  . . . . . . $with_liboping
+    libpcap . . . . . . . $with_libpcap
+    libperl . . . . . . . $with_libperl
+    libpthread  . . . . . $with_libpthread
+    libpq . . . . . . . . $with_libpq
+    librrd  . . . . . . . $with_rrdtool
+    libsensors  . . . . . $with_lm_sensors
+    libstatgrab . . . . . $with_libstatgrab
+    libupsclient  . . . . $with_libupsclient
+    libvirt . . . . . . . $with_libvirt
+    libxml2 . . . . . . . $with_libxml2
+    libxmms . . . . . . . $with_libxmms
 
   Features:
-    daemon mode . . . . $enable_daemon
-    debug . . . . . . . $enable_debug
+    daemon mode . . . . . $enable_daemon
+    debug . . . . . . . . $enable_debug
 
   Bindings:
-    perl  . . . . . . . $with_perl_bindings
+    perl  . . . . . . . . $with_perl_bindings
 
   Modules:
-    apache  . . . . . . $enable_apache
-    apcups  . . . . . . $enable_apcups
-    apple_sensors . . . $enable_apple_sensors
-    ascent  . . . . . . $enable_ascent
-    battery . . . . . . $enable_battery
-    cpu . . . . . . . . $enable_cpu
-    cpufreq . . . . . . $enable_cpufreq
-    csv . . . . . . . . $enable_csv
-    df  . . . . . . . . $enable_df
-    disk  . . . . . . . $enable_disk
-    dns . . . . . . . . $enable_dns
-    email . . . . . . . $enable_email
-    entropy . . . . . . $enable_entropy
-    exec  . . . . . . . $enable_exec
-    hddtemp . . . . . . $enable_hddtemp
-    interface . . . . . $enable_interface
-    iptables  . . . . . $enable_iptables
-    ipmi  . . . . . . . $enable_ipmi
-    ipvs  . . . . . . . $enable_ipvs
-    irq . . . . . . . . $enable_irq
-    libvirt . . . . . . $enable_libvirt
-    load  . . . . . . . $enable_load
-    logfile . . . . . . $enable_logfile
-    mbmon . . . . . . . $enable_mbmon
-    memcached . . . . . $enable_memcached
-    memory  . . . . . . $enable_memory
-    multimeter  . . . . $enable_multimeter
-    mysql . . . . . . . $enable_mysql
-    netlink . . . . . . $enable_netlink
-    network . . . . . . $enable_network
-    nfs . . . . . . . . $enable_nfs
-    nginx . . . . . . . $enable_nginx
-    ntpd  . . . . . . . $enable_ntpd
-    nut . . . . . . . . $enable_nut
-    perl  . . . . . . . $enable_perl
-    ping  . . . . . . . $enable_ping
-    powerdns  . . . . . $enable_powerdns
-    processes . . . . . $enable_processes
-    rrdtool . . . . . . $enable_rrdtool
-    sensors . . . . . . $enable_sensors
-    serial  . . . . . . $enable_serial
-    snmp  . . . . . . . $enable_snmp
-    swap  . . . . . . . $enable_swap
-    syslog  . . . . . . $enable_syslog
-    tail  . . . . . . . $enable_tail
-    tape  . . . . . . . $enable_tape
-    tcpconns  . . . . . $enable_tcpconns
-    teamspeak2  . . . . $enable_teamspeak2
-    unixsock  . . . . . $enable_unixsock
-    users . . . . . . . $enable_users
-    uuid  . . . . . . . $enable_uuid
-    vmem  . . . . . . . $enable_vmem
-    vserver . . . . . . $enable_vserver
-    wireless  . . . . . $enable_wireless
-    xmms  . . . . . . . $enable_xmms
+    apache  . . . . . . . $enable_apache
+    apcups  . . . . . . . $enable_apcups
+    apple_sensors . . . . $enable_apple_sensors
+    ascent  . . . . . . . $enable_ascent
+    battery . . . . . . . $enable_battery
+    cpu . . . . . . . . . $enable_cpu
+    cpufreq . . . . . . . $enable_cpufreq
+    csv . . . . . . . . . $enable_csv
+    df  . . . . . . . . . $enable_df
+    disk  . . . . . . . . $enable_disk
+    dns . . . . . . . . . $enable_dns
+    email . . . . . . . . $enable_email
+    entropy . . . . . . . $enable_entropy
+    exec  . . . . . . . . $enable_exec
+    filecount . . . . . . $enable_filecount
+    hddtemp . . . . . . . $enable_hddtemp
+    interface . . . . . . $enable_interface
+    iptables  . . . . . . $enable_iptables
+    ipmi  . . . . . . . . $enable_ipmi
+    ipvs  . . . . . . . . $enable_ipvs
+    irq . . . . . . . . . $enable_irq
+    libvirt . . . . . . . $enable_libvirt
+    load  . . . . . . . . $enable_load
+    logfile . . . . . . . $enable_logfile
+    mbmon . . . . . . . . $enable_mbmon
+    memcached . . . . . . $enable_memcached
+    memory  . . . . . . . $enable_memory
+    multimeter  . . . . . $enable_multimeter
+    mysql . . . . . . . . $enable_mysql
+    netlink . . . . . . . $enable_netlink
+    network . . . . . . . $enable_network
+    nfs . . . . . . . . . $enable_nfs
+    nginx . . . . . . . . $enable_nginx
+    notify_desktop  . . . $enable_notify_desktop
+    notify_email  . . . . $enable_notify_email
+    ntpd  . . . . . . . . $enable_ntpd
+    nut . . . . . . . . . $enable_nut
+    onewire . . . . . . . $enable_onewire
+    perl  . . . . . . . . $enable_perl
+    ping  . . . . . . . . $enable_ping
+    postgresql  . . . . . $enable_postgresql
+    powerdns  . . . . . . $enable_powerdns
+    processes . . . . . . $enable_processes
+    rrdtool . . . . . . . $enable_rrdtool
+    sensors . . . . . . . $enable_sensors
+    serial  . . . . . . . $enable_serial
+    snmp  . . . . . . . . $enable_snmp
+    swap  . . . . . . . . $enable_swap
+    syslog  . . . . . . . $enable_syslog
+    tail  . . . . . . . . $enable_tail
+    tape  . . . . . . . . $enable_tape
+    tcpconns  . . . . . . $enable_tcpconns
+    teamspeak2  . . . . . $enable_teamspeak2
+    thermal . . . . . . . $enable_thermal
+    unixsock  . . . . . . $enable_unixsock
+    users . . . . . . . . $enable_users
+    uuid  . . . . . . . . $enable_uuid
+    vmem  . . . . . . . . $enable_vmem
+    vserver . . . . . . . $enable_vserver
+    wireless  . . . . . . $enable_wireless
+    xmms  . . . . . . . . $enable_xmms
 
 EOF
-
-if test "x$dependency_error" = "xyes"; then
-	AC_MSG_ERROR("Some plugins are missing dependencies - see above summary for details")
-fi
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/collection3/bin/graph.cgi /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/collection3/bin/graph.cgi
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/collection3/bin/graph.cgi	2008-11-25 21:04:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/collection3/bin/graph.cgi	2008-09-04 21:00:54.000000000 +0800
@@ -17,29 +17,12 @@
 use Collectd::Graph::Type ();
 
 our $Debug = param ('debug');
 our $Begin = param ('begin');
 our $End = param ('end');
 our $GraphWidth = param ('width');
-our $OutputFormat = 'PNG';
-our $ContentType = 'image/png';
-
-if (param ('format'))
-{
-  my $temp = param ('format') || '';
-  $temp = uc ($temp);
-
-  if ($temp =~ m/^(PNG|SVG|EPS|PDF)$/)
-  {
-    $OutputFormat = $temp;
-
-    if ($OutputFormat eq 'SVG') { $ContentType = 'image/svg+xml'; }
-    elsif ($OutputFormat eq 'EPS') { $ContentType = 'image/eps'; }
-    elsif ($OutputFormat eq 'PDF') { $ContentType = 'application/pdf'; }
-  }
-}
 
 if ($Debug)
 {
   print <<HTTP;
 Content-Type: text/plain
 
@@ -155,13 +138,13 @@
 flush_files ($files,
     begin => $Begin,
     end => $End,
     addr => gc_get_scalar ('UnixSockAddr', undef),
     interval => gc_get_scalar ('Interval', 10));
 
-print STDOUT header (-Content_type => $ContentType,
+print STDOUT header (-Content_type => 'image/png',
   -Last_Modified => epoch_to_rfc1123 ($obj->getLastModified ()),
   -Expires => epoch_to_rfc1123 ($expires));
 
 if ($Debug)
 {
   print "\$expires = $expires;\n";
@@ -187,13 +170,13 @@
   else
   {
     @timesel = ('-s', $Begin); # End is implicitely `now'.
   }
 
   $| = 1;
-  RRDs::graph ('-', '-a', $OutputFormat, '--width', $GraphWidth, @timesel, @$args);
+  RRDs::graph ('-', '-a', 'PNG', '--width', $GraphWidth, @timesel, @$args);
   if (my $err = RRDs::error ())
   {
     print STDERR "RRDs::graph failed: $err\n";
     exit (1);
   }
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/collection3/etc/collection.conf /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/collection3/etc/collection.conf
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/collection3/etc/collection.conf	2008-11-25 21:04:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/collection3/etc/collection.conf	2008-09-04 21:00:54.000000000 +0800
@@ -1,24 +1,8 @@
 GraphWidth 400
-#UnixSockAddr "/var/run/collectd-unixsock"
-<Type apache_bytes>
-  DataSources count
-  DSName "count Bytes/s"
-  RRDTitle "Apache Traffic"
-  RRDVerticalLabel "Bytes/s"
-  RRDFormat "%5.1lf%s"
-  Color count 0000ff
-</Type>
-<Type apache_requests>
-  DataSources count
-  DSName "count Requests/s"
-  RRDTitle "Apache Traffic"
-  RRDVerticalLabel "Requests/s"
-  RRDFormat "%5.2lf"
-  Color count 00d000
-</Type>
+UnixSockAddr "/var/run/collectd-unixsock"
 <Type apache_scoreboard>
   Module GenericStacked
   DataSources count
   RRDTitle "Apache scoreboard on {hostname}"
   RRDVerticalLabel "Slots"
   RRDFormat "%6.2lf"
@@ -84,43 +68,43 @@
 </Type>
 <Type disk_octets>
   Module GenericIO
   DataSources read write
   DSName "read Read   "
   DSName write Written
-  RRDTitle "Disk Traffic ({instance})"
+  RRDTitle "Disk Traffic ({plugin_instance})"
   RRDVerticalLabel "Bytes per second"
 # RRDOptions ...
   RRDFormat "%5.1lf%s"
 </Type>
 <Type disk_ops>
   Module GenericIO
   DataSources read write
   DSName "read Read   "
   DSName write Written
-  RRDTitle "Disk Operations ({instance})"
+  RRDTitle "Disk Operations ({plugin_instance})"
   RRDVerticalLabel "Operations per second"
 # RRDOptions ...
   RRDFormat "%5.1lf"
 </Type>
 <Type disk_merged>
   Module GenericIO
   DataSources read write
   DSName "read Read   "
   DSName write Written
-  RRDTitle "Disk Merged Operations ({instance})"
+  RRDTitle "Disk Merged Operations ({plugin_instance})"
   RRDVerticalLabel "Merged operations/s"
 # RRDOptions ...
   RRDFormat "%5.1lf"
 </Type>
 <Type disk_time>
   Module GenericIO
   DataSources read write
   DSName "read Read   "
   DSName write Written
-  RRDTitle "Disk time per operation ({instance})"
+  RRDTitle "Disk time per operation ({plugin_instance})"
   RRDVerticalLabel "Avg. Time/Op"
 # RRDOptions ...
   RRDFormat "%5.1lf%ss"
   Scale 0.001
 </Type>
 <Type entropy>
@@ -251,133 +235,12 @@
   Order free cached buffered used
   Color free      00e000
   Color cached    0000ff
   Color buffered  ffb000
   Color used      ff0000
 </Type>
-<Type mysql_commands>
-  Module GenericStacked
-  DataSources value
-  RRDTitle "MySQL commands"
-  RRDVerticalLabel "Invocations"
-  RRDFormat "%6.2lf"
-
-  DSName admin_commands admin_commands
-  DSName alter_table alter_table
-  DSName begin begin
-  DSName change_db change_db
-  DSName check check
-  DSName commit commit
-  DSName create_db create_db
-  DSName create_table create_table
-  DSName delete delete
-  DSName drop_db drop_db
-  DSName drop_table drop_table
-  DSName flush flush
-  DSName grant grant
-  DSName insert insert
-  DSName insert_select insert_select
-  DSName lock_tables lock_tables
-  DSName optimize optimize
-  DSName rename_table rename_table
-  DSName replace replace
-  DSName revoke revoke
-  DSName select select
-  DSName set_option set_option
-  DSName show_create_table show_create_table
-  DSName show_databases show_databases
-  DSName show_fields show_fields
-  DSName show_keys show_keys
-  DSName show_master_status show_master_status
-  DSName show_processlist show_processlist
-  DSName show_slave_hosts show_slave_hosts
-  DSName show_status show_status
-  DSName show_tables show_tables
-  DSName show_triggers show_triggers
-  DSName show_variables show_variables
-  DSName unlock_tables unlock_tables
-  DSName update update
-  DSName update_multi update_multi
-
-  Order admin_commands alter_table begin change_db check commit create_db create_table delete drop_db drop_table flush grant insert insert_select lock_tables optimize rename_table replace revoke select set_option show_create_table show_databases show_fields show_keys show_master_status show_processlist show_slave_hosts show_status show_tables show_triggers show_variables unlock_tables update update_multi
-
-  Color admin_commands ff0000
-  Color alter_table ff002a
-  Color begin ff0055
-  Color change_db ff007f
-  Color check ff00aa
-  Color commit ff00d4
-  Color create_db ff00ff
-  Color create_table d400ff
-  Color delete aa00ff
-  Color drop_db 7f00ff
-  Color drop_table 5400ff
-  Color flush 2a00ff
-  Color grant 0000ff
-  Color insert 002aff
-  Color insert_select 0055ff
-  Color lock_tables 007fff
-  Color optimize 00a9ff
-  Color rename_table 00d4ff
-  Color replace 00ffff
-  Color revoke 00ffd4
-  Color select 00ffa9
-  Color set_option 00ff7f
-  Color show_create_table 00ff55
-  Color show_databases 00ff2a
-  Color show_fields 00ff00
-  Color show_keys 2aff00
-  Color show_master_status 54ff00
-  Color show_processlist 7fff00
-  Color show_slave_hosts aaff00
-  Color show_status d4ff00
-  Color show_tables ffff00
-  Color show_triggers ffd400
-  Color show_variables ffaa00
-  Color unlock_tables ff7f00
-  Color update ff5400
-  Color update_multi ff2a00
-</Type>
-<Type mysql_handler>
-  Module GenericStacked
-  DataSources value
-  RRDTitle "MySQL handler"
-  RRDVerticalLabel "Invocations"
-  RRDFormat "%6.2lf"
-  DSName commit commit
-  DSName delete delete
-  DSName read_first read_first
-  DSName read_key read_key
-  DSName read_next read_next
-  DSName read_prev read_prev
-  DSName read_rnd read_rnd
-  DSName read_rnd_next read_rnd_next
-  DSName update update
-  DSName write write
-  Order commit delete read_first read_key read_next read_prev read_rnd read_rnd_next update write
-  Color commit ff0000
-  Color delete ff0099
-  Color read_first cc00ff
-  Color read_key 3200ff
-  Color read_next 0065ff
-  Color read_prev 00ffff
-  Color read_rnd 00ff65
-  Color read_rnd_next 33ff00
-  Color update cbff00
-  Color write ff9800
-</Type>
-<Type mysql_octets>
-  Module GenericIO
-  DataSources rx tx
-  DSName rx RX
-  DSName tx TX
-  RRDTitle "MySQL Traffic"
-  RRDVerticalLabel "Bits per second"
-  RRDFormat "%5.1lf%s"
-  Scale 8
-</Type>
 <Type percent>
   DataSources percent
   DSName percent Percent
   RRDTitle "Percent ({type_instance})"
   RRDVerticalLabel "Percent"
   RRDFormat "%4.1lf%%"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/collection.cgi /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/collection.cgi
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/collection.cgi	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/collection.cgi	2008-09-04 21:01:09.000000000 +0800
@@ -1013,24 +1013,12 @@
     "LINE1:avg#$FullBlue:Charge",
     'GPRINT:min:MIN:%5.1lf%sAh Min,',
     'GPRINT:avg:AVERAGE:%5.1lf%sAh Avg,',
     'GPRINT:max:MAX:%5.1lf%sAh Max,',
     'GPRINT:avg:LAST:%5.1lf%sAh Last\l'
     ],
-    connections => ['-v', 'Connections',
-    'DEF:avg={file}:value:AVERAGE',
-    'DEF:min={file}:value:MIN',
-    'DEF:max={file}:value:MAX',
-    "AREA:max#$HalfBlue",
-    "AREA:min#$Canvas",
-    "LINE1:avg#$FullBlue:Connections",
-    'GPRINT:min:MIN:%4.1lf Min,',
-    'GPRINT:avg:AVERAGE:%4.1lf Avg,',
-    'GPRINT:max:MAX:%4.1lf Max,',
-    'GPRINT:avg:LAST:%4.1lf Last\l'
-    ],
     cpu => ['-v', 'CPU load',
     'DEF:avg={file}:value:AVERAGE',
     'DEF:min={file}:value:MIN',
     'DEF:max={file}:value:MAX',
     "AREA:max#$HalfBlue",
     "AREA:min#$Canvas",
@@ -1608,95 +1596,12 @@
     "LINE1:negspam#$FullRed:Spam mails",
     'GPRINT:spam:AVERAGE:%4.1lf Avg,',
     'GPRINT:spam:MAX:%4.1lf Max,',
     'GPRINT:spam:LAST:%4.1lf Last',
     'HRULE:0#000000'
     ],
-    memcached_command => ['-v', 'Commands',
-    'DEF:avg={file}:value:AVERAGE',
-    'DEF:min={file}:value:MIN',
-    'DEF:max={file}:value:MAX',
-    "AREA:max#$HalfBlue",
-    "AREA:min#$Canvas",
-    "LINE1:avg#$FullBlue:Commands",
-    'GPRINT:min:MIN:%5.1lf%s Min,',
-    'GPRINT:avg:AVERAGE:%5.1lf Avg,',
-    'GPRINT:max:MAX:%5.1lf Max,',
-    'GPRINT:avg:LAST:%5.1lf Last\l'
-    ],
-    memcached_connections => ['-v', 'Connections',
-    'DEF:avg={file}:value:AVERAGE',
-    'DEF:min={file}:value:MIN',
-    'DEF:max={file}:value:MAX',
-    "AREA:max#$HalfBlue",
-    "AREA:min#$Canvas",
-    "LINE1:avg#$FullBlue:Connections",
-    'GPRINT:min:MIN:%4.1lf Min,',
-    'GPRINT:avg:AVERAGE:%4.1lf Avg,',
-    'GPRINT:max:MAX:%4.1lf Max,',
-    'GPRINT:avg:LAST:%4.1lf Last\l'
-    ],
-    memcached_items => ['-v', 'Items',
-    'DEF:avg={file}:value:AVERAGE',
-    'DEF:min={file}:value:MIN',
-    'DEF:max={file}:value:MAX',
-    "AREA:max#$HalfBlue",
-    "AREA:min#$Canvas",
-    "LINE1:avg#$FullBlue:Items",
-    'GPRINT:min:MIN:%4.1lf Min,',
-    'GPRINT:avg:AVERAGE:%4.1lf Avg,',
-    'GPRINT:max:MAX:%4.1lf Max,',
-    'GPRINT:avg:LAST:%4.1lf Last\l'
-    ],
-    memcached_octets => ['-v', 'Bits/s',
-    'DEF:out_min={file}:tx:MIN',
-    'DEF:out_avg={file}:tx:AVERAGE',
-    'DEF:out_max={file}:tx:MAX',
-    'DEF:inc_min={file}:rx:MIN',
-    'DEF:inc_avg={file}:rx:AVERAGE',
-    'DEF:inc_max={file}:rx:MAX',
-    'CDEF:mytime=out_avg,TIME,TIME,IF',
-    'CDEF:sample_len_raw=mytime,PREV(mytime),-',
-    'CDEF:sample_len=sample_len_raw,UN,0,sample_len_raw,IF',
-    'CDEF:out_avg_sample=out_avg,UN,0,out_avg,IF,sample_len,*',
-    'CDEF:out_avg_sum=PREV,UN,0,PREV,IF,out_avg_sample,+',
-    'CDEF:inc_avg_sample=inc_avg,UN,0,inc_avg,IF,sample_len,*',
-    'CDEF:inc_avg_sum=PREV,UN,0,PREV,IF,inc_avg_sample,+',
-    'CDEF:out_bit_min=out_min,8,*',
-    'CDEF:out_bit_avg=out_avg,8,*',
-    'CDEF:out_bit_max=out_max,8,*',
-    'CDEF:inc_bit_min=inc_min,8,*',
-    'CDEF:inc_bit_avg=inc_avg,8,*',
-    'CDEF:inc_bit_max=inc_max,8,*',
-    'CDEF:overlap=out_bit_avg,inc_bit_avg,GT,inc_bit_avg,out_bit_avg,IF',
-    "AREA:out_bit_avg#$HalfGreen",
-    "AREA:inc_bit_avg#$HalfBlue",
-    "AREA:overlap#$HalfBlueGreen",
-    "LINE1:out_bit_avg#$FullGreen:Written",
-    'GPRINT:out_bit_avg:AVERAGE:%5.1lf%s Avg,',
-    'GPRINT:out_bit_max:MAX:%5.1lf%s Max,',
-    'GPRINT:out_bit_avg:LAST:%5.1lf%s Last',
-    'GPRINT:out_avg_sum:LAST:(ca. %5.1lf%sB Total)\l',
-    "LINE1:inc_bit_avg#$FullBlue:Read   ",
-    'GPRINT:inc_bit_avg:AVERAGE:%5.1lf%s Avg,',
-    'GPRINT:inc_bit_max:MAX:%5.1lf%s Max,',
-    'GPRINT:inc_bit_avg:LAST:%5.1lf%s Last',
-    'GPRINT:inc_avg_sum:LAST:(ca. %5.1lf%sB Total)\l'
-    ],
-    memcached_ops => ['-v', 'Ops',
-    'DEF:avg={file}:value:AVERAGE',
-    'DEF:min={file}:value:MIN',
-    'DEF:max={file}:value:MAX',
-    "AREA:max#$HalfBlue",
-    "AREA:min#$Canvas",
-    "LINE1:avg#$FullBlue:Ops",
-    'GPRINT:min:MIN:%4.1lf Min,',
-    'GPRINT:avg:AVERAGE:%4.1lf Avg,',
-    'GPRINT:max:MAX:%4.1lf Max,',
-    'GPRINT:avg:LAST:%4.1lf Last\l'
-    ],
     memory => ['-b', '1024', '-v', 'Bytes',
     'DEF:avg={file}:value:AVERAGE',
     'DEF:min={file}:value:MIN',
     'DEF:max={file}:value:MAX',
     "AREA:max#$HalfBlue",
     "AREA:min#$Canvas",
@@ -2045,12 +1950,82 @@
     "AREA:ping_min#$Canvas",
     "LINE1:ping_avg#$FullBlue:Ping",
     'GPRINT:ping_min:MIN:%4.1lf ms Min,',
     'GPRINT:ping_avg:AVERAGE:%4.1lf ms Avg,',
     'GPRINT:ping_max:MAX:%4.1lf ms Max,',
     'GPRINT:ping_avg:LAST:%4.1lf ms Last'],
+    pg_blks => ['DEF:pg_blks_avg={file}:value:AVERAGE',
+    'DEF:pg_blks_min={file}:value:MIN',
+    'DEF:pg_blks_max={file}:value:MAX',
+    "AREA:pg_blks_max#$HalfBlue",
+    "AREA:pg_blks_min#$Canvas",
+    "LINE1:pg_blks_avg#$FullBlue:Blocks",
+    'GPRINT:pg_blks_min:MIN:%4.1lf%s Min,',
+    'GPRINT:pg_blks_avg:AVERAGE:%4.1lf%s Avg,',
+    'GPRINT:pg_blks_max:MAX:%4.1lf%s Max,',
+    'GPRINT:pg_blks_avg:LAST:%4.1lf%s Last'],
+    pg_db_size => ['DEF:pg_db_size_avg={file}:value:AVERAGE',
+    'DEF:pg_db_size_min={file}:value:MIN',
+    'DEF:pg_db_size_max={file}:value:MAX',
+    "AREA:pg_db_size_max#$HalfBlue",
+    "AREA:pg_db_size_min#$Canvas",
+    "LINE1:pg_db_size_avg#$FullBlue:Bytes",
+    'GPRINT:pg_db_size_min:MIN:%4.1lf%s Min,',
+    'GPRINT:pg_db_size_avg:AVERAGE:%4.1lf%s Avg,',
+    'GPRINT:pg_db_size_max:MAX:%4.1lf%s Max,',
+    'GPRINT:pg_db_size_avg:LAST:%4.1lf%s Last'],
+    pg_n_tup_c => ['DEF:pg_n_tup_avg={file}:value:AVERAGE',
+    'DEF:pg_n_tup_min={file}:value:MIN',
+    'DEF:pg_n_tup_max={file}:value:MAX',
+    "AREA:pg_n_tup_max#$HalfBlue",
+    "AREA:pg_n_tup_min#$Canvas",
+    "LINE1:pg_n_tup_avg#$FullBlue:Tuples",
+    'GPRINT:pg_n_tup_min:MIN:%4.1lf%s Min,',
+    'GPRINT:pg_n_tup_avg:AVERAGE:%4.1lf%s Avg,',
+    'GPRINT:pg_n_tup_max:MAX:%4.1lf%s Max,',
+    'GPRINT:pg_n_tup_avg:LAST:%4.1lf%s Last'],
+    pg_n_tup_g => ['DEF:pg_n_tup_avg={file}:value:AVERAGE',
+    'DEF:pg_n_tup_min={file}:value:MIN',
+    'DEF:pg_n_tup_max={file}:value:MAX',
+    "AREA:pg_n_tup_max#$HalfBlue",
+    "AREA:pg_n_tup_min#$Canvas",
+    "LINE1:pg_n_tup_avg#$FullBlue:Tuples",
+    'GPRINT:pg_n_tup_min:MIN:%4.1lf%s Min,',
+    'GPRINT:pg_n_tup_avg:AVERAGE:%4.1lf%s Avg,',
+    'GPRINT:pg_n_tup_max:MAX:%4.1lf%s Max,',
+    'GPRINT:pg_n_tup_avg:LAST:%4.1lf%s Last'],
+    pg_numbackends => ['DEF:pg_numbackends_avg={file}:value:AVERAGE',
+    'DEF:pg_numbackends_min={file}:value:MIN',
+    'DEF:pg_numbackends_max={file}:value:MAX',
+    "AREA:pg_numbackends_max#$HalfBlue",
+    "AREA:pg_numbackends_min#$Canvas",
+    "LINE1:pg_numbackends_avg#$FullBlue:Backends",
+    'GPRINT:pg_numbackends_min:MIN:%4.1lf%s Min,',
+    'GPRINT:pg_numbackends_avg:AVERAGE:%4.1lf%s Avg,',
+    'GPRINT:pg_numbackends_max:MAX:%4.1lf%s Max,',
+    'GPRINT:pg_numbackends_avg:LAST:%4.1lf%s Last'],
+    pg_scan => ['DEF:pg_scan_avg={file}:value:AVERAGE',
+    'DEF:pg_scan_min={file}:value:MIN',
+    'DEF:pg_scan_max={file}:value:MAX',
+    "AREA:pg_scan_max#$HalfBlue",
+    "AREA:pg_scan_min#$Canvas",
+    "LINE1:pg_scan_avg#$FullBlue:Scans",
+    'GPRINT:pg_scan_min:MIN:%4.1lf%s Min,',
+    'GPRINT:pg_scan_avg:AVERAGE:%4.1lf%s Avg,',
+    'GPRINT:pg_scan_max:MAX:%4.1lf%s Max,',
+    'GPRINT:pg_scan_avg:LAST:%4.1lf%s Last'],
+    pg_xact => ['DEF:pg_xact_avg={file}:value:AVERAGE',
+    'DEF:pg_xact_min={file}:value:MIN',
+    'DEF:pg_xact_max={file}:value:MAX',
+    "AREA:pg_xact_max#$HalfBlue",
+    "AREA:pg_xact_min#$Canvas",
+    "LINE1:pg_xact_avg#$FullBlue:Transactions",
+    'GPRINT:pg_xact_min:MIN:%4.1lf%s Min,',
+    'GPRINT:pg_xact_avg:AVERAGE:%4.1lf%s Avg,',
+    'GPRINT:pg_xact_max:MAX:%4.1lf%s Max,',
+    'GPRINT:pg_xact_avg:LAST:%4.1lf%s Last'],
     power => ['-v', 'Watt',
     'DEF:avg={file}:value:AVERAGE',
     'DEF:min={file}:value:MIN',
     'DEF:max={file}:value:MAX',
     "AREA:max#$HalfBlue",
     "AREA:min#$Canvas",
@@ -2471,87 +2446,17 @@
     "LINE1:avg#$FullBlue:Processes",
     'GPRINT:min:MIN:%5.1lf Min,',
     'GPRINT:avg:AVERAGE:%5.1lf Avg.,',
     'GPRINT:max:MAX:%5.1lf Max,',
     'GPRINT:avg:LAST:%5.1lf Last\l',
     ],
-    vmpage_number => ['-v', 'Pages',
-    'DEF:avg={file}:value:AVERAGE',
-    'DEF:min={file}:value:MIN',
-    'DEF:max={file}:value:MAX',
-    "AREA:max#$HalfBlue",
-    "AREA:min#$Canvas",
-    "LINE1:avg#$FullBlue:Number",
-    'GPRINT:min:MIN:%4.1lf Min,',
-    'GPRINT:avg:AVERAGE:%4.1lf Avg,',
-    'GPRINT:max:MAX:%4.1lf Max,',
-    'GPRINT:avg:LAST:%4.1lf Last\l'
-    ],
-    vmpage_faults => [
-    "DEF:minf_avg={file}:minflt:AVERAGE",
-    "DEF:minf_min={file}:minflt:MIN",
-    "DEF:minf_max={file}:minflt:MAX",
-    "DEF:majf_avg={file}:majflt:AVERAGE",
-    "DEF:majf_min={file}:majflt:MIN",
-    "DEF:majf_max={file}:majflt:MAX",
-    'CDEF:overlap=majf_avg,minf_avg,GT,minf_avg,majf_avg,IF',
-    "AREA:majf_avg#$HalfGreen",
-    "AREA:minf_avg#$HalfBlue",
-    "AREA:overlap#$HalfBlueGreen",
-    "LINE1:majf_avg#$FullGreen:Major",
-    'GPRINT:majf_min:MIN:%5.1lf%s Min,',
-    'GPRINT:majf_avg:AVERAGE:%5.1lf%s Avg,',
-    'GPRINT:majf_max:MAX:%5.1lf%s Max,',
-    'GPRINT:majf_avg:LAST:%5.1lf%s Last\l',
-    "LINE1:minf_avg#$FullBlue:Minor",
-    'GPRINT:minf_min:MIN:%5.1lf%s Min,',
-    'GPRINT:minf_avg:AVERAGE:%5.1lf%s Avg,',
-    'GPRINT:minf_max:MAX:%5.1lf%s Max,',
-    'GPRINT:minf_avg:LAST:%5.1lf%s Last\l'
-    ],
-    vmpage_io => [
-    "DEF:rpag_avg={file}:in:AVERAGE",
-    "DEF:rpag_min={file}:in:MIN",
-    "DEF:rpag_max={file}:in:MAX",
-    "DEF:wpag_avg={file}:out:AVERAGE",
-    "DEF:wpag_min={file}:out:MIN",
-    "DEF:wpag_max={file}:out:MAX",
-    'CDEF:overlap=wpag_avg,rpag_avg,GT,rpag_avg,wpag_avg,IF',
-    "AREA:wpag_avg#$HalfGreen",
-    "AREA:rpag_avg#$HalfBlue",
-    "AREA:overlap#$HalfBlueGreen",
-    "LINE1:wpag_avg#$FullGreen:OUT",
-    'GPRINT:wpag_min:MIN:%5.1lf%s Min,',
-    'GPRINT:wpag_avg:AVERAGE:%5.1lf%s Avg,',
-    'GPRINT:wpag_max:MAX:%5.1lf%s Max,',
-    'GPRINT:wpag_avg:LAST:%5.1lf%s Last\l',
-    "LINE1:rpag_avg#$FullBlue:IN ",
-    'GPRINT:rpag_min:MIN:%5.1lf%s Min,',
-    'GPRINT:rpag_avg:AVERAGE:%5.1lf%s Avg,',
-    'GPRINT:rpag_max:MAX:%5.1lf%s Max,',
-    'GPRINT:rpag_avg:LAST:%5.1lf%s Last\l'
-    ],
-    vmpage_action => ['-v', 'Pages',
-    'DEF:avg={file}:value:AVERAGE',
-    'DEF:min={file}:value:MIN',
-    'DEF:max={file}:value:MAX',
-    "AREA:max#$HalfBlue",
-    "AREA:min#$Canvas",
-    "LINE1:avg#$FullBlue:Number",
-    'GPRINT:min:MIN:%4.1lf Min,',
-    'GPRINT:avg:AVERAGE:%4.1lf Avg,',
-    'GPRINT:max:MAX:%4.1lf Max,',
-    'GPRINT:avg:LAST:%4.1lf Last\l'
-    ],
   };
   $GraphDefs->{'if_multicast'} = $GraphDefs->{'ipt_packets'};
   $GraphDefs->{'if_tx_errors'} = $GraphDefs->{'if_rx_errors'};
   $GraphDefs->{'dns_qtype'} = $GraphDefs->{'dns_opcode'};
   $GraphDefs->{'dns_rcode'} = $GraphDefs->{'dns_opcode'};
-  $GraphDefs->{'vmpage_io-memory'} = $GraphDefs->{'vmpage_io'};
-  $GraphDefs->{'vmpage_io-swap'} = $GraphDefs->{'vmpage_io'};
 
   $MetaGraphDefs->{'cpu'} = \&meta_graph_cpu;
   $MetaGraphDefs->{'dns_qtype'} = \&meta_graph_dns;
   $MetaGraphDefs->{'dns_rcode'} = \&meta_graph_dns;
   $MetaGraphDefs->{'if_rx_errors'} = \&meta_graph_if_rx_errors;
   $MetaGraphDefs->{'if_tx_errors'} = \&meta_graph_if_rx_errors;
@@ -2559,14 +2464,12 @@
   $MetaGraphDefs->{'nfs_procedure'} = \&meta_graph_nfs_procedure;
   $MetaGraphDefs->{'ps_state'} = \&meta_graph_ps_state;
   $MetaGraphDefs->{'swap'} = \&meta_graph_swap;
   $MetaGraphDefs->{'mysql_commands'} = \&meta_graph_mysql_commands;
   $MetaGraphDefs->{'mysql_handler'} = \&meta_graph_mysql_commands;
   $MetaGraphDefs->{'tcp_connections'} = \&meta_graph_tcp_connections;
-  $MetaGraphDefs->{'vmpage_number'} = \&meta_graph_vmpage_number;
-  $MetaGraphDefs->{'vmpage_action'} = \&meta_graph_vmpage_action;
 } # load_graph_definitions
 
 sub meta_graph_generic_stack
 {
   confess ("Wrong number of arguments") if (@_ != 2);
 
@@ -3162,134 +3065,7 @@
       }
     );
   } # for (@$type_instances)
 
   return (meta_graph_generic_stack ($opts, $sources));
 } # meta_graph_tcp_connections
-
-sub meta_graph_vmpage_number
-{
-  confess ("Wrong number of arguments") if (@_ != 5);
-
-  my $host = shift;
-  my $plugin = shift;
-  my $plugin_instance = shift;
-  my $type = shift;
-  my $type_instances = shift;
-
-  my $opts = {};
-  my $sources = [];
-
-  $opts->{'title'} = "$host/$plugin"
-  . (defined ($plugin_instance) ? "-$plugin_instance" : '') . "/$type";
-  $opts->{'number_format'} = '%6.2lf';
-
-  $opts->{'rrd_opts'} = ['-v', 'Pages'];
-
-  my @files = ();
-
-  $opts->{'colors'} =
-  {
-    anon_pages	  => '00e000',
-    bounce	  => '00e0ff',
-    dirty	  => '00e0a0',
-    file_pages	  => 'f000f0',
-    mapped	  => 'f000a0',
-    page_table_pages	  => 'ffb000',
-    slab	  => '0000f0',
-    unstable	  => '0000a0',
-    writeback	  => 'ff0000',
-  };
-
-  _custom_sort_arrayref ($type_instances,
-    [reverse qw(anon_pages bounce dirty file_pages mapped page_table_pages slab unstable writeback)]);
-
-  for (@$type_instances)
-  {
-    my $inst = $_;
-    my $file = '';
-    my $title = $opts->{'title'};
-
-    for (@DataDirs)
-    {
-      if (-e "$_/$title-$inst.rrd")
-      {
-	$file = "$_/$title-$inst.rrd";
-	last;
-      }
-    }
-    confess ("No file found for $title") if ($file eq '');
-
-    push (@$sources,
-      {
-	name => $inst,
-	file => $file
-      }
-    );
-  } # for (@$type_instances)
-
-  return (meta_graph_generic_stack ($opts, $sources));
-} # meta_graph_vmpage_number
-
-sub meta_graph_vmpage_action
-{
-  confess ("Wrong number of arguments") if (@_ != 5);
-
-  my $host = shift;
-  my $plugin = shift;
-  my $plugin_instance = shift;
-  my $type = shift;
-  my $type_instances = shift;
-
-  my $opts = {};
-  my $sources = [];
-
-  $opts->{'title'} = "$host/$plugin"
-  . (defined ($plugin_instance) ? "-$plugin_instance" : '') . "/$type";
-  $opts->{'number_format'} = '%6.2lf';
-
-  $opts->{'rrd_opts'} = ['-v', 'Pages'];
-
-  my @files = ();
-
-  $opts->{'colors'} =
-  {
-    activate	  => '00e000',
-    deactivate	  => '00e0ff',
-    free	  => '00e0a0',
-    alloc	  => 'f000f0',
-    refill	  => 'f000a0',
-    scan_direct	  => 'ffb000',
-    scan_kswapd	  => '0000f0',
-    steal	  => '0000a0',
-  };
-
-  _custom_sort_arrayref ($type_instances,
-    [reverse qw(activate deactivate alloc free refill scan_direct scan_kswapd steal)]);
-
-  for (@$type_instances)
-  {
-    my $inst = $_;
-    my $file = '';
-    my $title = $opts->{'title'};
-
-    for (@DataDirs)
-    {
-      if (-e "$_/$title-$inst.rrd")
-      {
-	$file = "$_/$title-$inst.rrd";
-	last;
-      }
-    }
-    confess ("No file found for $title") if ($file eq '');
-
-    push (@$sources,
-      {
-	name => $inst,
-	file => $file
-      }
-    );
-  } # for (@$type_instances)
-
-  return (meta_graph_generic_stack ($opts, $sources));
-} # meta_graph_vmpage_action
 # vim: shiftwidth=2:softtabstop=2:tabstop=8
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/cussh.pl /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/cussh.pl
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/cussh.pl	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/cussh.pl	2008-09-04 21:01:09.000000000 +0800
@@ -240,12 +240,21 @@
 			if ($option eq "plugin") {
 				push @{$args{"plugins"}}, $value;
 			}
 			elsif ($option eq "timeout") {
 				$args{"timeout"} = $value;
 			}
+			elsif ($option eq "identifier") {
+				my $id = getid (\$value);
+				if (!$id)
+				{
+					print STDERR "Not a valid identifier: \"$value\"\n";
+					next;
+				}
+				push @{$args{"identifier"}}, $id;
+			}
 			else {
 				print STDERR "Invalid option \"$option\".\n";
 				return;
 			}
 		}
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib: ds_to_color.px
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/examples/myplugin.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/examples/myplugin.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/examples/myplugin.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/examples/myplugin.c	2008-09-04 21:01:09.000000000 +0800
@@ -95,14 +95,14 @@
 	/* do the magic to read the data */
 	values[0].gauge = random ();
 
 	vl.values     = values;
 	vl.values_len = 1;
 	vl.time       = time (NULL);
-	strcpy (vl.host, hostname_g);
-	strcpy (vl.plugin, "myplugin");
+	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
+	sstrncpy (vl.plugin, "myplugin", sizeof (vl.plugin));
 	/* optionally set vl.plugin_instance and vl.type_instance to reasonable
 	 * values (default: "") */
 
 	/* dispatch the values to collectd which passes them on to all registered
 	 * write functions - the first argument is used to lookup the data set
 	 * definition (it is strongly recommended to use a type defined in the
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/exec-munin.px /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/exec-munin.px
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/contrib/exec-munin.px	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/contrib/exec-munin.px	2008-05-06 20:30:12.000000000 +0800
@@ -27,13 +27,14 @@
 our $Scripts = [];
 our $Interval = 300;
 
 main ();
 exit (0);
 
-# Configuration {{{
+# Configuration
+# {{{
 
 =head1 CONFIGURATION
 
 This script reads it's configuration from F</etc/exec-munin.conf>. The
 configuration is read using C<Config::General> which understands a Apache-like
 config syntax, so it's very similar to the F<collectd.conf> syntax, too.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/Makefile.in	2009-01-03 04:10:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/Makefile.in	2008-09-05 16:53:52.000000000 +0800
@@ -82,12 +82,16 @@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
+BUILD_WITH_LIBOWCAPI_CPPFLAGS = @BUILD_WITH_LIBOWCAPI_CPPFLAGS@
+BUILD_WITH_LIBOWCAPI_LIBS = @BUILD_WITH_LIBOWCAPI_LIBS@
+BUILD_WITH_LIBPQ_CPPFLAGS = @BUILD_WITH_LIBPQ_CPPFLAGS@
+BUILD_WITH_LIBPQ_LDFLAGS = @BUILD_WITH_LIBPQ_LDFLAGS@
 BUILD_WITH_LIBRRD_CFLAGS = @BUILD_WITH_LIBRRD_CFLAGS@
 BUILD_WITH_LIBRRD_LDFLAGS = @BUILD_WITH_LIBRRD_LDFLAGS@
 BUILD_WITH_LIBSENSORS_CFLAGS = @BUILD_WITH_LIBSENSORS_CFLAGS@
 BUILD_WITH_LIBSENSORS_LDFLAGS = @BUILD_WITH_LIBSENSORS_LDFLAGS@
 BUILD_WITH_LIBSNMP_CFLAGS = @BUILD_WITH_LIBSNMP_CFLAGS@
 BUILD_WITH_LIBSNMP_LIBS = @BUILD_WITH_LIBSNMP_LIBS@
@@ -134,12 +138,14 @@
 KERNEL_DIR = @KERNEL_DIR@
 LDFLAGS = @LDFLAGS@
 LEX = @LEX@
 LEXLIB = @LEXLIB@
 LEX_OUTPUT_ROOT = @LEX_OUTPUT_ROOT@
 LIBLTDL = @LIBLTDL@
+LIBNOTIFY_CFLAGS = @LIBNOTIFY_CFLAGS@
+LIBNOTIFY_LIBS = @LIBNOTIFY_LIBS@
 LIBOBJS = @LIBOBJS@
 LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@
 LN_S = @LN_S@
 LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/README /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/README
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/README	2009-01-03 04:05:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/README	2008-09-04 21:01:09.000000000 +0800
@@ -59,12 +59,15 @@
       Amount of entropy available to the system.
 
     - exec
       Values gathered by a custom program or script.
       See collectd-exec(5).
 
+    - filecount
+      Count the number of files in directories.
+
     - hddtemp
       Harddisk temperatures using hddtempd.
 
     - interface
       Interface traffic: Number of octets, packets and errors for each
       interface.
@@ -129,21 +132,29 @@
       NTP daemon statistics: Local clock drift, offset to peers, etc.
 
     - nut
       Network UPS tools: UPS current, voltage, power, charge, utilisation,
       temperature, etc. See upsd(8).
 
+    - onewire (EXPERIMENTAL!)
+      Read onewire sensors using the owcapu library of the owfs project.
+      Please read in collectd.conf(5) why this plugin is experimental.
+
     - perl
       The perl plugin implements a Perl-interpreter into collectd. You can
       write your own plugins in Perl and return arbitrary values using this
       API. See collectd-perl(5).
 
     - ping
       Network latency: Time to reach the default gateway or another given
       host.
 
+    - postgresql
+      PostgreSQL database statistics: active server connections, transaction
+      numbers, block IO, table row manipulations.
+
     - processes
       Process counts: Number of running, sleeping, zombie, ... processes.
 
     - sensors
       System sensors, accessed using lm_sensors: Voltages, temperatures and
       fan rotation speeds.
@@ -227,12 +238,22 @@
 
     - syslog
       Logs to the standard UNIX logging mechanism, syslog.
 
   * Notifications can be handled by the following plugins:
 
+    - notify_desktop
+      Send a desktop notification to a notification daemon, as defined in
+      the Desktop Notification Specification. To actually display the
+      notifications, notification-daemon is required.
+      See http://www.galago-project.org/specs/notification/.
+
+    - notify_email
+      Send an E-mail with the notification message to the configured
+      recipients.
+
     - exec
       Execute a program or script to handle the notification.
       See collectd-exec(5).
 
     - logfile
       Writes the notification message to a file or STDOUT/STDERR.
@@ -312,15 +333,22 @@
   * A POSIX-threads (pthread) implementation.
     Since gathering some statistics is slow (network connections, slow devices,
     etc) the collectd is parallelized. The POSIX threads interface is being
     used and should be found in various implementations for hopefully all
     platforms.
 
+  * CoreFoundation.framework and IOKit.framework (optional)
+    For compiling on Darwin in general and the `apple_sensors' plugin in
+    particular.
+
   * libcurl (optional)
     If you want to use the `apache', `ascent', or `nginx' plugin.
 
+  * libesmtp (optional)
+    For the `notify_email' plugin.
+
   * libhal (optional)
     If present, the uuid plugin will check for UUID from HAL.
 
   * libiptc (optional)
     For querying iptables counters.
 
@@ -330,55 +358,61 @@
   * libnetlink (optional)
     Used, obviously, for the `netlink' plugin.
 
   * libnetsnmp (optional)
     For the `snmp' plugin.
 
+  * libnotify (optional)
+    For the `notify_desktop' plugin.
+
   * liboping (optional, if not found a version shipped with this distribution
     can be used)
     Used by the `ping' plugin to send and receive ICMP packets.
 
+  * libowcapi (optional)
+    Used by the `onewire' plugin to read values from onewire sensors (or the
+    owserver(1) daemon).
+
   * libpcap (optional)
     Used to capture packets by the `dns' plugin.
 
   * libperl (optional)
     Obviously used by the `perl' plugin. The library has to be compiled with
     ithread support (introduced in Perl 5.6.0).
 
+  * libpq (optional)
+    The PostgreSQL C client library used by the `postgresql' plugin.
+
   * librrd (optional; headers and library; rrdtool 1.0 and 1.2 both work fine)
     If built without `librrd' the resulting binary will be `client only', i.e.
     will send its values via multicast and not create any RRD files itself.
     Alternatively you can chose to write CSV-files (Comma Separated Values)
     instead.
 
+  * librt, libsocket, libkstat, libdevinfo (optional)
+    Various standard Solaris libraries which provide system functions.
+
   * libsensors (optional)
     To read from `lm_sensors', see the `sensors' plugin.
 
-  * libstatgrab may be used to collect statistics on systems other than Linux
-    and/or Solaris. Note that CPU- and disk-statistics, while being provided
-    by this library, are not supported in collectd right now..
+  * libstatgrab (optional) may be used to collect statistics on systems other
+    than Linux and/or Solaris. Note that CPU- and disk-statistics, while being
+    provided by this library, are not supported in collectd right now..
     <http://www.i-scream.org/libstatgrab/> 
 
   * libupsclient/nut (optional)
     For the `nut' plugin which queries nut's `upsd'.
 
-  * libxmms (optional)
-
-  * librt, libsocket, libkstat, libdevinfo
-    Various standard Solaris libraries which provide system functions.
-
-  * CoreFoundation.framework and IOKit.framework
-    For compiling on Darwin in general and the `apple_sensors' plugin in
-    particular.
-
   * libvirt (optional)
     Collect statistics from virtual machines.
 
   * libxml2 (optional)
     Parse XML data. This is needed for the `ascent' and `libvirt' plugins.
 
+  * libxmms (optional)
+
 
 Configuring / Compiling / Installing
 ------------------------------------
 
   To configure, build and install collectd with the default settings, run
   `./configure && make && make install'.  For detailed, generic instructions
@@ -386,17 +420,15 @@
   run `./configure --help'.
   
   By default, the configure script will check for all build dependencies and
   disable all plugins whose requirements cannot be fulfilled (any other plugin
   will be enabled). To enable a plugin, install missing dependencies (see
   section `Prerequisites' above) and rerun `configure'. If you specify the
-  `--enable-<plugin>' configure option, the script will fail if the depen-
-  dencies for the specified plugin are not met. If you specify the
-  `--disable-<plugin>' configure option, the plugin will not be built. Both
-  options are meant for package maintainers and should not be used in everyday
-  situations.
+  `--enable-<plugin>' configure option, you can force the plugin to be built.
+  This will most likely fail though unless you're working in a very unusual
+  setup and you really know what you're doing.
 
   By default, collectd will be installed into `/opt/collectd'. You can adjust
   this setting by specifying the `--prefix' configure option - see INSTALL for
   details. If you pass DESTDIR=<path> to `make install', <path> will be
   prefixed to all installation directories. This might be useful when creating
   packages for collectd.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/apache.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/apache.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/apache.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/apache.c	2008-09-04 21:01:10.000000000 +0800
@@ -143,22 +143,21 @@
 	curl_easy_setopt (curl, CURLOPT_ERRORBUFFER, apache_curl_error);
 
 	if (user != NULL)
 	{
 		int status;
 
-		status = snprintf (credentials, sizeof (credentials), "%s:%s",
+		status = ssnprintf (credentials, sizeof (credentials), "%s:%s",
 				user, (pass == NULL) ? "" : pass);
 		if (status >= sizeof (credentials))
 		{
 			ERROR ("apache plugin: init: Returning an error "
 					"because the credentials have been "
 					"truncated.");
 			return (-1);
 		}
-		credentials[sizeof (credentials) - 1] = '\0';
 
 		curl_easy_setopt (curl, CURLOPT_USERPWD, credentials);
 	}
 
 	curl_easy_setopt (curl, CURLOPT_URL, url);
 
@@ -199,21 +198,19 @@
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "apache", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 
 	if (type_instance != NULL)
-	{
-		strncpy (vl.type_instance, type_instance,
+		sstrncpy (vl.type_instance, type_instance,
 				sizeof (vl.type_instance));
-		vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-	}
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void submit_counter */
 
 static void submit_gauge (const char *type, const char *type_instance,
 		gauge_t value)
 {
 	value_t values[1];
@@ -224,21 +221,19 @@
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "apache", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 
 	if (type_instance != NULL)
-	{
-		strncpy (vl.type_instance, type_instance,
+		sstrncpy (vl.type_instance, type_instance,
 				sizeof (vl.type_instance));
-		vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-	}
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void submit_counter */
 
 static void submit_scoreboard (char *buf)
 {
 	/*
 	 * Scoreboard Key:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/apcups.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/apcups.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/apcups.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/apcups.c	2008-09-04 21:01:10.000000000 +0800
@@ -21,12 +21,19 @@
  * MA 02111-1307, USA.
  *
  * Authors:
  *   Anthony Gialluca <tonyabg at charter.net>
  **/
 
+/*
+ * FIXME: Don't know why but without this here atof() was not returning
+ * correct values for me. This is behavior that I don't understand and
+ * should be examined in closer detail.
+ */
+#include <stdlib.h>
+
 #include "collectd.h"
 #include "common.h"      /* rrd_update_file */
 #include "plugin.h"      /* plugin_register, plugin_submit */
 #include "configfile.h"  /* cf_register */
 
 #if HAVE_SYS_TYPES_H
@@ -114,14 +121,13 @@
 	struct addrinfo *ai_return;
 	struct addrinfo *ai_list;
 
 	assert ((port > 0x00000000) && (port <= 0x0000FFFF));
 
 	/* Convert the port to a string */
-	snprintf (port_str, 8, "%i", port);
-	port_str[7] = '\0';
+	ssnprintf (port_str, sizeof (port_str), "%i", port);
 
 	/* Resolve name */
 	memset ((void *) &ai_hints, '\0', sizeof (ai_hints));
 	ai_hints.ai_family   = AF_INET; /* XXX: Change this to `AF_UNSPEC' if apcupsd can handle IPv6 */
 	ai_hints.ai_socktype = SOCK_STREAM;
 
@@ -366,15 +372,16 @@
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "apcups", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
-	strncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static void apc_submit (struct apc_detail_s *apcups_detail)
 {
 	apc_submit_generic ("voltage",    "input",   apcups_detail->linev);
 	apc_submit_generic ("voltage",    "output",  apcups_detail->outputv);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/apple_sensors.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/apple_sensors.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/apple_sensors.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/apple_sensors.c	2008-09-04 21:01:10.000000000 +0800
@@ -88,15 +88,16 @@
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "apple_sensors", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int as_read (void)
 {
 	kern_return_t   status;
 	io_iterator_t   iterator;
@@ -143,30 +144,30 @@
 					CFSTR ("type"),
 					&property))
 			continue;
 		if (CFGetTypeID (property) != CFStringGetTypeID ())
 			continue;
 		if (!CFStringGetCString (property,
-					type, 128,
+					type, sizeof (type),
 					kCFStringEncodingASCII))
 			continue;
-		type[127] = '\0';
+		type[sizeof (type) - 1] = '\0';
 
 		/* Copy the sensor location. This will be used as `instance'. */
 		property = NULL;
 		if (!CFDictionaryGetValueIfPresent (prop_dict,
 					CFSTR ("location"),
 					&property))
 			continue;
 		if (CFGetTypeID (property) != CFStringGetTypeID ())
 			continue;
 		if (!CFStringGetCString (property,
-					inst, 128,
+					inst, sizeof (inst),
 					kCFStringEncodingASCII))
 			continue;
-		inst[127] = '\0';
+		inst[sizeof (inst) - 1] = '\0';
 		for (i = 0; i < 128; i++)
 		{
 			if (inst[i] == '\0')
 				break;
 			else if (isalnum (inst[i]))
 				inst[i] = (char) tolower (inst[i]);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ascent.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ascent.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ascent.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ascent.c	2008-09-04 21:01:10.000000000 +0800
@@ -88,16 +88,18 @@
   int level;
   int latency;
 };
 typedef struct player_info_s player_info_t;
 #define PLAYER_INFO_STATIC_INIT { -1, -1, -1, -1, -1 }
 
-static char *url    = NULL;
-static char *user   = NULL;
-static char *pass   = NULL;
-static char *cacert = NULL;
+static char *url         = NULL;
+static char *user        = NULL;
+static char *pass        = NULL;
+static char *verify_peer = NULL;
+static char *verify_host = NULL;
+static char *cacert      = NULL;
 
 static CURL *curl = NULL;
 
 static char  *ascent_buffer = NULL;
 static size_t ascent_buffer_size = 0;
 static size_t ascent_buffer_fill = 0;
@@ -105,12 +107,14 @@
 
 static const char *config_keys[] =
 {
   "URL",
   "User",
   "Password",
+  "VerifyPeer",
+  "VerifyHost",
   "CACert"
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
 static int ascent_submit_gauge (const char *plugin_instance, /* {{{ */
     const char *type, const char *type_instance, gauge_t value)
@@ -127,16 +131,18 @@
   sstrncpy (vl.plugin, "ascent", sizeof (vl.plugin));
 
   if (plugin_instance != NULL)
     sstrncpy (vl.plugin_instance, plugin_instance,
         sizeof (vl.plugin_instance));
 
+  sstrncpy (vl.type, type, sizeof (vl.type));
+
   if (type_instance != NULL)
     sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-  plugin_dispatch_values (type, &vl);
+  plugin_dispatch_values (&vl);
   return (0);
 } /* }}} int ascent_submit_gauge */
 
 static size_t ascent_curl_callback (void *buf, size_t size, size_t nmemb, /* {{{ */
     void *stream)
 {
@@ -495,12 +501,16 @@
   if (strcasecmp (key, "URL") == 0)
     return (config_set (&url, value));
   else if (strcasecmp (key, "User") == 0)
     return (config_set (&user, value));
   else if (strcasecmp (key, "Password") == 0)
     return (config_set (&pass, value));
+  else if (strcasecmp (key, "VerifyPeer") == 0)
+    return (config_set (&verify_peer, value));
+  else if (strcasecmp (key, "VerifyHost") == 0)
+    return (config_set (&verify_host, value));
   else if (strcasecmp (key, "CACert") == 0)
     return (config_set (&cacert, value));
   else
     return (-1);
 } /* }}} int ascent_config */
 
@@ -531,27 +541,36 @@
   curl_easy_setopt (curl, CURLOPT_ERRORBUFFER, ascent_curl_error);
 
   if (user != NULL)
   {
     int status;
 
-    status = snprintf (credentials, sizeof (credentials), "%s:%s",
+    status = ssnprintf (credentials, sizeof (credentials), "%s:%s",
         user, (pass == NULL) ? "" : pass);
     if (status >= sizeof (credentials))
     {
       ERROR ("ascent plugin: ascent_init: Returning an error because the "
           "credentials have been truncated.");
       return (-1);
     }
-    credentials[sizeof (credentials) - 1] = '\0';
 
     curl_easy_setopt (curl, CURLOPT_USERPWD, credentials);
   }
 
   curl_easy_setopt (curl, CURLOPT_URL, url);
 
+  if ((verify_peer == NULL) || (strcmp (verify_peer, "true") == 0))
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 1);
+  else
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 0);
+
+  if ((verify_host == NULL) || (strcmp (verify_host, "true") == 0))
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 2);
+  else
+    curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 0);
+
   if (cacert != NULL)
     curl_easy_setopt (curl, CURLOPT_CAINFO, cacert);
 
   return (0);
 } /* }}} int ascent_init */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/battery.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/battery.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/battery.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/battery.c	2008-09-04 21:01:11.000000000 +0800
@@ -58,12 +58,13 @@
 	/* No global variables */
 /* #endif HAVE_IOKIT_IOKITLIB_H || HAVE_IOKIT_PS_IOPOWERSOURCES_H */
 
 #elif KERNEL_LINUX
 static int   battery_pmu_num = 0;
 static char *battery_pmu_file = "/proc/pmu/battery_%i";
+static const char *battery_acpi_dir = "/proc/acpi/battery";
 #endif /* KERNEL_LINUX */
 
 static int battery_init (void)
 {
 #if HAVE_IOKIT_IOKITLIB_H || HAVE_IOKIT_PS_IOPOWERSOURCES_H
 	/* No init neccessary */
@@ -72,13 +73,13 @@
 #elif KERNEL_LINUX
 	int len;
 	char filename[128];
 
 	for (battery_pmu_num = 0; ; battery_pmu_num++)
 	{
-		len = snprintf (filename, sizeof (filename), battery_pmu_file, battery_pmu_num);
+		len = ssnprintf (filename, sizeof (filename), battery_pmu_file, battery_pmu_num);
 
 		if ((len < 0) || ((unsigned int)len >= sizeof (filename)))
 			break;
 
 		if (access (filename, R_OK))
 			break;
@@ -98,14 +99,15 @@
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "battery", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void battery_submit */
 
 #if HAVE_IOKIT_PS_IOPOWERSOURCES_H || HAVE_IOKIT_IOKITLIB_H
 double dict_get_double (CFDictionaryRef dict, char *key_string)
 {
 	double      val_double;
@@ -309,12 +311,106 @@
 	}
 
 	IOObjectRelease (iterator);
 }
 #endif /* HAVE_IOKIT_IOKITLIB_H */
 
+#if KERNEL_LINUX
+static int battery_read_acpi (const char *dir, const char *name,
+		void *user_data)
+{
+	double  current = INVALID_VALUE;
+	double  voltage = INVALID_VALUE;
+	double  charge  = INVALID_VALUE;
+	double *valptr = NULL;
+	int charging = 0;
+
+	char filename[256];
+	FILE *fh;
+
+	char buffer[1024];
+	char *fields[8];
+	int numfields;
+	char *endptr;
+	int len;
+
+	len = ssnprintf (filename, sizeof (filename), "%s/%s/state", battery_acpi_dir, name);
+
+	if ((len < 0) || ((unsigned int)len >= sizeof (filename)))
+		return -1;
+
+	if ((fh = fopen (filename, "r")) == NULL) {
+		char errbuf[1024];
+		ERROR ("Cannot open `%s': %s", filename,
+			sstrerror (errno, errbuf, sizeof (errbuf)));
+		return -1;
+	}
+
+	/*
+	 * [11:00] <@tokkee> $ cat /proc/acpi/battery/BAT1/state
+	 * [11:00] <@tokkee> present:                 yes
+	 * [11:00] <@tokkee> capacity state:          ok
+	 * [11:00] <@tokkee> charging state:          charging
+	 * [11:00] <@tokkee> present rate:            1724 mA
+	 * [11:00] <@tokkee> remaining capacity:      4136 mAh
+	 * [11:00] <@tokkee> present voltage:         12428 mV
+	 */
+	while (fgets (buffer, sizeof (buffer), fh) != NULL)
+	{
+		numfields = strsplit (buffer, fields, 8);
+
+		if (numfields < 3)
+			continue;
+
+		if ((strcmp (fields[0], "charging") == 0)
+				&& (strcmp (fields[1], "state:") == 0))
+		{
+			if (strcmp (fields[2], "charging") == 0)
+				charging = 1;
+			else
+				charging = 0;
+			continue;
+		}
+
+		if ((strcmp (fields[0], "present") == 0)
+				&& (strcmp (fields[1], "rate:") == 0))
+			valptr = &current;
+		else if ((strcmp (fields[0], "remaining") == 0)
+				&& (strcmp (fields[1], "capacity:") == 0))
+			valptr = &charge;
+		else if ((strcmp (fields[0], "present") == 0)
+				&& (strcmp (fields[1], "voltage:") == 0))
+			valptr = &voltage;
+		else
+			continue;
+
+		endptr = NULL;
+		errno  = 0;
+		*valptr = strtod (fields[2], &endptr) / 1000.0;
+
+		if ((fields[2] == endptr) || (errno != 0))
+			*valptr = INVALID_VALUE;
+	} /* while (fgets (buffer, sizeof (buffer), fh) != NULL) */
+
+	fclose (fh);
+
+	if ((current != INVALID_VALUE) && (charging == 0))
+			current *= -1;
+
+	if (charge != INVALID_VALUE)
+		battery_submit ("0", "charge", charge);
+	if (current != INVALID_VALUE)
+		battery_submit ("0", "current", current);
+	if (voltage != INVALID_VALUE)
+		battery_submit ("0", "voltage", voltage);
+
+	return 0;
+}
+#endif /* KERNEL_LINUX */
+
+
 static int battery_read (void)
 {
 #if HAVE_IOKIT_IOKITLIB_H || HAVE_IOKIT_PS_IOPOWERSOURCES_H
 	double charge  = INVALID_VALUE; /* Current charge in Ah */
 	double current = INVALID_VALUE; /* Current in A */
 	double voltage = INVALID_VALUE; /* Voltage in V */
@@ -356,17 +452,17 @@
 		char    batnum_str[256];
 		double  current = INVALID_VALUE;
 		double  voltage = INVALID_VALUE;
 		double  charge  = INVALID_VALUE;
 		double *valptr = NULL;
 
-		len = snprintf (filename, sizeof (filename), battery_pmu_file, i);
+		len = ssnprintf (filename, sizeof (filename), battery_pmu_file, i);
 		if ((len < 0) || ((unsigned int)len >= sizeof (filename)))
 			continue;
 
-		len = snprintf (batnum_str, sizeof (batnum_str), "%i", i);
+		len = ssnprintf (batnum_str, sizeof (batnum_str), "%i", i);
 		if ((len < 0) || ((unsigned int)len >= sizeof (batnum_str)))
 			continue;
 
 		if ((fh = fopen (filename, "r")) == NULL)
 			continue;
 
@@ -408,117 +504,15 @@
 		if (current != INVALID_VALUE)
 			battery_submit ("0", "current", current);
 		if (voltage != INVALID_VALUE)
 			battery_submit ("0", "voltage", voltage);
 	}
 
-	if (access ("/proc/acpi/battery", R_OK | X_OK) == 0)
-	{
-		double  current = INVALID_VALUE;
-		double  voltage = INVALID_VALUE;
-		double  charge  = INVALID_VALUE;
-		double *valptr = NULL;
-		int charging = 0;
-
-		struct dirent *ent;
-		DIR *dh;
-
-		if ((dh = opendir ("/proc/acpi/battery")) == NULL)
-		{
-			char errbuf[1024];
-			ERROR ("Cannot open `/proc/acpi/battery': %s",
-					sstrerror (errno, errbuf, sizeof (errbuf)));
-			return (-1);
-		}
-
-		while ((ent = readdir (dh)) != NULL)
-		{
-			if (ent->d_name[0] == '.')
-				continue;
-
-			len = snprintf (filename, sizeof (filename),
-					"/proc/acpi/battery/%s/state",
-					ent->d_name);
-			if ((len < 0) || ((unsigned int)len >= sizeof (filename)))
-				continue;
-
-			if ((fh = fopen (filename, "r")) == NULL)
-			{
-				char errbuf[1024];
-				ERROR ("Cannot open `%s': %s", filename,
-						sstrerror (errno, errbuf,
-							sizeof (errbuf)));
-				continue;
-			}
-
-			/*
-			 * [11:00] <@tokkee> $ cat /proc/acpi/battery/BAT1/state
-			 * [11:00] <@tokkee> present:                 yes
-			 * [11:00] <@tokkee> capacity state:          ok
-			 * [11:00] <@tokkee> charging state:          charging
-			 * [11:00] <@tokkee> present rate:            1724 mA
-			 * [11:00] <@tokkee> remaining capacity:      4136 mAh
-			 * [11:00] <@tokkee> present voltage:         12428 mV
-			 */
-			while (fgets (buffer, sizeof (buffer), fh) != NULL)
-			{
-				numfields = strsplit (buffer, fields, 8);
-
-				if (numfields < 3)
-					continue;
-
-				if ((strcmp (fields[0], "present") == 0)
-						&& (strcmp (fields[1], "rate:") == 0))
-					valptr = &current;
-				else if ((strcmp (fields[0], "remaining") == 0)
-						&& (strcmp (fields[1], "capacity:") == 0))
-					valptr = &charge;
-				else if ((strcmp (fields[0], "present") == 0)
-						&& (strcmp (fields[1], "voltage:") == 0))
-					valptr = &voltage;
-				else
-					valptr = NULL;
-
-				if ((strcmp (fields[0], "charging") == 0)
-						&& (strcmp (fields[1], "state:") == 0))
-				{
-					if (strcmp (fields[2], "charging") == 0)
-						charging = 1;
-					else
-						charging = 0;
-				}
-
-				if (valptr != NULL)
-				{
-					char *endptr;
-
-					endptr = NULL;
-					errno  = 0;
-
-					*valptr = strtod (fields[2], &endptr) / 1000.0;
-
-					if ((fields[2] == endptr) || (errno != 0))
-						*valptr = INVALID_VALUE;
-				}
-			} /* while (fgets (buffer, sizeof (buffer), fh) != NULL) */
-
-			fclose (fh);
-
-			if ((current != INVALID_VALUE) && (charging == 0))
-					current *= -1;
-
-			if (charge != INVALID_VALUE)
-				battery_submit ("0", "charge", charge);
-			if (current != INVALID_VALUE)
-				battery_submit ("0", "current", current);
-			if (voltage != INVALID_VALUE)
-				battery_submit ("0", "voltage", voltage);
-		}
+	walk_directory (battery_acpi_dir, battery_read_acpi,
+			/* user_data = */ NULL);
 
-		closedir (dh);
-	}
 #endif /* KERNEL_LINUX */
 
 	return (0);
 }
 
 void module_register (void)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.1	2008-12-03 06:27:02.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.1	2008-09-05 16:58:50.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD 1"
-.TH COLLECTD 1 "2008-11-25" "4.5.1.18.g68ab7da" "collectd"
+.TH COLLECTD 1 "2008-09-04" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd \- System statistics collection daemon
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.c	2008-09-04 21:01:11.000000000 +0800
@@ -47,13 +47,13 @@
 
 static int loop = 0;
 
 static void *do_flush (void *arg)
 {
 	INFO ("Flushing all data.");
-	plugin_flush_all (-1);
+	plugin_flush (NULL, -1, NULL);
 	INFO ("Finished flushing all data.");
 	pthread_exit (NULL);
 	return NULL;
 }
 
 static void sig_int_handler (int signal)
@@ -87,14 +87,13 @@
 	struct addrinfo *ai_ptr;
 	int status;
 
 	str = global_option_get ("Hostname");
 	if (str != NULL)
 	{
-		strncpy (hostname_g, str, sizeof (hostname_g));
-		hostname_g[sizeof (hostname_g) - 1] = '\0';
+		sstrncpy (hostname_g, str, sizeof (hostname_g));
 		return (0);
 	}
 
 	if (gethostname (hostname_g, sizeof (hostname_g)) != 0)
 	{
 		fprintf (stderr, "`gethostname' failed and no "
@@ -124,14 +123,13 @@
 
 	for (ai_ptr = ai_list; ai_ptr != NULL; ai_ptr = ai_ptr->ai_next)
 	{
 		if (ai_ptr->ai_canonname == NULL)
 			continue;
 
-		strncpy (hostname_g, ai_ptr->ai_canonname, sizeof (hostname_g));
-		hostname_g[sizeof (hostname_g) - 1] = '\0';
+		sstrncpy (hostname_g, ai_ptr->ai_canonname, sizeof (hostname_g));
 		break;
 	}
 
 	freeaddrinfo (ai_list);
 	return (0);
 } /* int init_hostname */
@@ -243,13 +241,13 @@
 } /* static void update_kstat (void) */
 #endif /* HAVE_LIBKSTAT */
 
 /* TODO
  * Remove all settings but `-f' and `-C'
  */
-static void exit_usage (int status)
+static void exit_usage (void)
 {
 	printf ("Usage: "PACKAGE" [OPTIONS]\n\n"
 			
 			"Available options:\n"
 			"  General:\n"
 			"    -C <file>       Configuration file.\n"
@@ -265,14 +263,14 @@
 			"  Config-File       "CONFIGFILE"\n"
 			"  PID-File          "PIDFILE"\n"
 			"  Data-Directory    "PKGLOCALSTATEDIR"\n"
 			"\n"PACKAGE" "VERSION", http://collectd.org/\n"
 			"by Florian octo Forster <octo@verplant.org>\n"
 			"for contributions see `AUTHORS'\n");
-	exit (status);
-} /* static void exit_usage (int status) */
+	exit (0);
+} /* static void exit_usage (char *name) */
 
 static int do_init (void)
 {
 #if HAVE_LIBKSTAT
 	kc = NULL;
 	update_kstat ();
@@ -435,22 +433,17 @@
 				break;
 			case 'f':
 				daemonize = 0;
 				break;
 #endif /* COLLECT_DAEMON */
 			case 'h':
-				exit_usage (0);
-				break;
 			default:
-				exit_usage (1);
+				exit_usage ();
 		} /* switch (c) */
 	} /* while (1) */
 
-	if (optind < argc)
-		exit_usage (1);
-
 	/*
 	 * Read options from the config file, the environment and the command
 	 * line (in that order, with later options overwriting previous ones in
 	 * general).
 	 * Also, this will automatically load modules.
 	 */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.conf.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.conf.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.conf.5	2009-01-03 05:21:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.conf.5	2008-09-05 16:58:51.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD.CONF 5"
-.TH COLLECTD.CONF 5 "2009-01-02" "4.4.5" "collectd"
+.TH COLLECTD.CONF 5 "2008-09-04" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd.conf \- Configuration for the system statistics collection daemon \fBcollectd\fR
@@ -157,13 +165,17 @@
 The syntax of this config file is similar to the config file of the famous
 \&\fBApache Webserver\fR. Each line contains either a key-value-pair or a
 section-start or \-end. Empty lines and everything after the hash-symbol `#' is
 ignored. Values are either string, enclosed in double-quotes,
 (floating\-point\-)numbers or a boolean expression, i.\ e. either \fBtrue\fR or
 \&\fBfalse\fR. String containing of only alphanumeric characters and underscores do
-not need to be quoted.
+not need to be quoted. Lines may be wrapped by using `\e' as the last character
+before the newline. This allows long lines to be split into multiple lines.
+Quoted strings may be wrapped as well. However, those are treated special in
+that whitespace at the beginning of the following lines will be ignored, which
+allows for nicely indenting the wrapped lines.
 .PP
 The configuration is read and processed in order, i.\ e. from top to
 bottom. So the plugins are loaded in the order listed in this config file. It
 is a good idea to load any logging plugins first in order to catch messages
 from plugins during configuration. Also, the \f(CW\*(C`LoadPlugin\*(C'\fR option \fBmust\fR occur
 \&\fBbefore\fR the \f(CW\*(C`<Plugin ...>\*(C'\fR block.
@@ -250,14 +262,14 @@
 collect data from. These plugins are listed below as well, even if they don't
 require any configuration within collectd's configfile.
 .PP
 A list of all plugins and a short summary for each plugin can be found in the
 \&\fI\s-1README\s0\fR file shipped with the sourcecode and hopefully binary packets as
 well.
-.ie n .SS "Plugin ""apache"""
-.el .SS "Plugin \f(CWapache\fP"
+.ie n .Sh "Plugin ""apache"""
+.el .Sh "Plugin \f(CWapache\fP"
 .IX Subsection "Plugin apache"
 To configure the \f(CW\*(C`apache\*(C'\fR\-plugin you first need to configure the Apache
 webserver correctly. The Apache-plugin \f(CW\*(C`mod_status\*(C'\fR needs to be loaded and
 working and the \f(CW\*(C`ExtendedStatus\*(C'\fR directive needs to be \fBenabled\fR. You can use
 the following snipped to base your Apache config upon:
 .PP
@@ -299,25 +311,25 @@
 connecting to a \s-1SSL\s0 enabled server. Enabled by default.
 .IP "\fBCACert\fR \fIFile\fR" 4
 .IX Item "CACert File"
 File that holds one or more \s-1SSL\s0 certificates. If you want to use \s-1HTTPS\s0 you will
 possibly need this option. What \s-1CA\s0 certificates come bundled with \f(CW\*(C`libcurl\*(C'\fR
 and are checked by default depends on the distribution you use.
-.ie n .SS "Plugin ""apcups"""
-.el .SS "Plugin \f(CWapcups\fP"
+.ie n .Sh "Plugin ""apcups"""
+.el .Sh "Plugin \f(CWapcups\fP"
 .IX Subsection "Plugin apcups"
 .IP "\fBHost\fR \fIHostname\fR" 4
 .IX Item "Host Hostname"
 Hostname of the host running \fBapcupsd\fR. Defaults to \fBlocalhost\fR. Please note
 that IPv6 support has been disabled unless someone can confirm or decline that
 \&\fBapcupsd\fR can handle it.
 .IP "\fBPort\fR \fIPort\fR" 4
 .IX Item "Port Port"
 TCP-Port to connect to. Defaults to \fB3551\fR.
-.ie n .SS "Plugin ""ascent"""
-.el .SS "Plugin \f(CWascent\fP"
+.ie n .Sh "Plugin ""ascent"""
+.el .Sh "Plugin \f(CWascent\fP"
 .IX Subsection "Plugin ascent"
 This plugin collects information about an Ascent server, a free server for the
 \&\*(L"World of Warcraft\*(R" game. This plugin gathers the information by fetching the
 \&\s-1XML\s0 status page using \f(CW\*(C`libcurl\*(C'\fR and parses it using \f(CW\*(C`libxml2\*(C'\fR.
 .PP
 The configuration options are the same as for the \f(CW\*(C`apache\*(C'\fR plugin above:
@@ -327,39 +339,50 @@
 .IP "\fBUser\fR \fIUsername\fR" 4
 .IX Item "User Username"
 Optional user name needed for authentication.
 .IP "\fBPassword\fR \fIPassword\fR" 4
 .IX Item "Password Password"
 Optional password needed for authentication.
+.IP "\fBVerifyPeer\fR \fBtrue|false\fR" 4
+.IX Item "VerifyPeer true|false"
+Enable or disable peer \s-1SSL\s0 certificate verification. See
+<http://curl.haxx.se/docs/sslcerts.html> for details. Enabled by default.
+.IP "\fBVerifyHost\fR \fBtrue|false\fR" 4
+.IX Item "VerifyHost true|false"
+Enable or disable peer host name verification. If enabled, the plugin checks
+if the \f(CW\*(C`Common Name\*(C'\fR or a \f(CW\*(C`Subject Alternate Name\*(C'\fR field of the \s-1SSL\s0
+certificate matches the host name provided by the \fB\s-1URL\s0\fR option. If this
+identity check fails, the connection is aborted. Obviously, only works when
+connecting to a \s-1SSL\s0 enabled server. Enabled by default.
 .IP "\fBCACert\fR \fIFile\fR" 4
 .IX Item "CACert File"
 File that holds one or more \s-1SSL\s0 certificates. If you want to use \s-1HTTPS\s0 you will
 possibly need this option. What \s-1CA\s0 certificates come bundled with \f(CW\*(C`libcurl\*(C'\fR
 and are checked by default depends on the distribution you use.
-.ie n .SS "Plugin ""cpufreq"""
-.el .SS "Plugin \f(CWcpufreq\fP"
+.ie n .Sh "Plugin ""cpufreq"""
+.el .Sh "Plugin \f(CWcpufreq\fP"
 .IX Subsection "Plugin cpufreq"
 This plugin doesn't have any options. It reads
 \&\fI/sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq\fR (for the first \s-1CPU\s0
 installed) to get the current \s-1CPU\s0 frequency. If this file does not exist make
 sure \fBcpufreqd\fR (<http://cpufreqd.sourceforge.net/>) or a similar tool is
 installed and an \*(L"cpu governor\*(R" (that's a kernel module) is loaded.
-.ie n .SS "Plugin ""csv"""
-.el .SS "Plugin \f(CWcsv\fP"
+.ie n .Sh "Plugin ""csv"""
+.el .Sh "Plugin \f(CWcsv\fP"
 .IX Subsection "Plugin csv"
 .IP "\fBDataDir\fR \fIDirectory\fR" 4
 .IX Item "DataDir Directory"
 Set the directory to store CSV-files under. Per default CSV-files are generated
 beneath the daemon's working directory, i.\ e. the \fBBaseDir\fR.
 .IP "\fBStoreRates\fR \fBtrue|false\fR" 4
 .IX Item "StoreRates true|false"
 If set to \fBtrue\fR, convert counter values to rates. If set to \fBfalse\fR (the
 default) counter values are stored as is, i.\ e. as an increasing integer
 number.
-.ie n .SS "Plugin ""df"""
-.el .SS "Plugin \f(CWdf\fP"
+.ie n .Sh "Plugin ""df"""
+.el .Sh "Plugin \f(CWdf\fP"
 .IX Subsection "Plugin df"
 .IP "\fBDevice\fR \fIDevice\fR" 4
 .IX Item "Device Device"
 Select partitions based on the devicename.
 .IP "\fBMountPoint\fR \fIDirectory\fR" 4
 .IX Item "MountPoint Directory"
@@ -370,14 +393,14 @@
 .IP "\fBIgnoreSelected\fR \fItrue\fR|\fIfalse\fR" 4
 .IX Item "IgnoreSelected true|false"
 Invert the selection: If set to true, all partitions \fBexcept\fR the ones that
 match any one of the criteria are collected. By default only selected
 partitions are collected if a selection is made. If no selection is configured
 at all, \fBall\fR partitions are selected.
-.ie n .SS "Plugin ""disk"""
-.el .SS "Plugin \f(CWdisk\fP"
+.ie n .Sh "Plugin ""disk"""
+.el .Sh "Plugin \f(CWdisk\fP"
 .IX Subsection "Plugin disk"
 The \f(CW\*(C`disk\*(C'\fR plugin collects information about the usage of physical disks and
 logical disks (partitions). Values collected are the number of octets written
 to and read from a disk or partition, the number of read/write operations
 issued to the disk and a rather complex \*(L"time\*(R" it took for these commands to be
 issued.
@@ -400,26 +423,26 @@
 Sets whether selected disks, i.\ e. the ones matches by any of the \fBDisk\fR
 statements, are ignored or if all other disks are ignored. The behavior
 (hopefully) is intuitive: If no \fBDisk\fR option is configured, all disks are
 collected. If at least one \fBDisk\fR option is given and no \fBIgnoreSelected\fR or
 set to \fBfalse\fR, \fBonly\fR matching disks will be collected. If \fBIgnoreSelected\fR
 is set to \fBtrue\fR, all disks are collected \fBexcept\fR the ones matched.
-.ie n .SS "Plugin ""dns"""
-.el .SS "Plugin \f(CWdns\fP"
+.ie n .Sh "Plugin ""dns"""
+.el .Sh "Plugin \f(CWdns\fP"
 .IX Subsection "Plugin dns"
 .IP "\fBInterface\fR \fIInterface\fR" 4
 .IX Item "Interface Interface"
 The dns plugin uses \fBlibpcap\fR to capture dns traffic and analyses it. This
 option sets the interface that should be used. If this option is not set, or
 set to \*(L"any\*(R", the plugin will try to get packets from \fBall\fR interfaces. This
 may not work on certain platforms, such as Mac\ \s-1OS\s0\ X.
 .IP "\fBIgnoreSource\fR \fIIP-address\fR" 4
 .IX Item "IgnoreSource IP-address"
 Ignore packets that originate from this address.
-.ie n .SS "Plugin ""email"""
-.el .SS "Plugin \f(CWemail\fP"
+.ie n .Sh "Plugin ""email"""
+.el .Sh "Plugin \f(CWemail\fP"
 .IX Subsection "Plugin email"
 .IP "\fBSocketFile\fR \fIPath\fR" 4
 .IX Item "SocketFile Path"
 Sets the socket-file which is to be created.
 .IP "\fBSocketGroup\fR \fIGroup\fR" 4
 .IX Item "SocketGroup Group"
@@ -433,14 +456,14 @@
 .IP "\fBMaxConns\fR \fINumber\fR" 4
 .IX Item "MaxConns Number"
 Sets the maximum number of connections that can be handled in parallel. Since
 this many threads will be started immediately setting this to a very high
 value will waste valuable resources. Defaults to \fB5\fR and will be forced to be
 at most \fB16384\fR to prevent typos and dumb mistakes.
-.ie n .SS "Plugin ""exec"""
-.el .SS "Plugin \f(CWexec\fP"
+.ie n .Sh "Plugin ""exec"""
+.el .Sh "Plugin \f(CWexec\fP"
 .IX Subsection "Plugin exec"
 Please make sure to read \fIcollectd\-exec\fR\|(5) before using this plugin. It
 contains valuable information on when the executable is executed and the
 output that is expected from it.
 .IP "\fBExec\fR \fIUser\fR[:[\fIGroup\fR]] \fIExecutable\fR [\fI<arg>\fR [\fI<arg>\fR ...]]" 4
 .IX Item "Exec User[:[Group]] Executable [<arg> [<arg> ...]]"
@@ -464,14 +487,81 @@
 values may be changed. If you want to be absolutely sure that something is
 passed as-is please enclose it in quotes.
 .Sp
 The \fBExec\fR and \fBNotificationExec\fR statements change the semantics of the
 programs executed, i.\ e. the data passed to them and the response
 expected from them. This is documented in great detail in \fIcollectd\-exec\fR\|(5).
-.ie n .SS "Plugin ""hddtemp"""
-.el .SS "Plugin \f(CWhddtemp\fP"
+.ie n .Sh "Plugin ""filecount"""
+.el .Sh "Plugin \f(CWfilecount\fP"
+.IX Subsection "Plugin filecount"
+The \f(CW\*(C`filecount\*(C'\fR plugin counts the number of files in a certain directory (and
+its subdirectories) and their combined size. The configuration is very straight
+forward:
+.PP
+.Vb 12
+\&  <Plugin "filecount">
+\&    <Directory "/var/qmail/queue/mess">
+\&      Instance "qmail\-message"
+\&    </Directory>
+\&    <Directory "/var/qmail/queue/todo">
+\&      Instance "qmail\-todo"
+\&    </Directory>
+\&    <Directory "/var/lib/php5">
+\&      Instance "php5\-sessions"
+\&      Name "sess_*"
+\&    </Directory>
+\&  </Plugin>
+.Ve
+.PP
+The example above counts the number of files in QMail's queue directories and
+the number of \s-1PHP5\s0 sessions. Jfiy: The \*(L"todo\*(R" queue holds the messages that
+QMail has not yet looked at, the \*(L"message\*(R" queue holds the messages that were
+classified into \*(L"local\*(R" and \*(L"remote\*(R".
+.PP
+As you can see, the configuration consists of one or more \f(CW\*(C`Directory\*(C'\fR blocks,
+each of which specifies a directory in which to count the files. Within those
+blocks, the following options are recognized:
+.IP "\fBInstance\fR \fIInstance\fR" 4
+.IX Item "Instance Instance"
+Sets the plugin instance to \fIInstance\fR. That instance name must be unique, but
+it's your responsibility, the plugin doesn't check for that. If not given, the
+instance is set to the directory name with all slashes replaced by underscores
+and all leading underscores removed.
+.IP "\fBName\fR \fIPattern\fR" 4
+.IX Item "Name Pattern"
+Only count files that match \fIPattern\fR, where \fIPattern\fR is a shell-like
+wildcard as understood by \fIfnmatch\fR\|(3). Only the \fBfilename\fR is checked
+against the pattern, not the entire path. In case this makes it easier for you:
+This option has been named after the \fB\-name\fR parameter to \fIfind\fR\|(1).
+.IP "\fBMTime\fR \fIAge\fR" 4
+.IX Item "MTime Age"
+Count only files of a specific age: If \fIAge\fR is greater than zero, only files
+that haven't been touched in the last \fIAge\fR seconds are counted. If \fIAge\fR is
+a negative number, this is inversed. For example, if \fB\-60\fR is specified, only
+files that have been modified in the last minute will be counted.
+.Sp
+The number can also be followed by a \*(L"multiplier\*(R" to easily specify a larger
+timespan. When given in this notation, the argument must in quoted, i.\ e.
+must be passed as string. So the \fB\-60\fR could also be written as \fB\*(L"\-1m\*(R"\fR (one
+minute). Valid multipliers are \f(CW\*(C`s\*(C'\fR (second), \f(CW\*(C`m\*(C'\fR (minute), \f(CW\*(C`h\*(C'\fR (hour), \f(CW\*(C`d\*(C'\fR
+(day), \f(CW\*(C`w\*(C'\fR (week), and \f(CW\*(C`y\*(C'\fR (year). There is no \*(L"month\*(R" multiplier. You can
+also specify fractional numbers, e.\ g. \fB\*(L"0.5d\*(R"\fR is identical to
+\&\fB\*(L"12h\*(R"\fR.
+.IP "\fBSize\fR \fISize\fR" 4
+.IX Item "Size Size"
+Count only files of a specific size. When \fISize\fR is a positive number, only
+files that are at least this big are counted. If \fISize\fR is a negative number,
+this is inversed, i.\ e. only files smaller than the absolute value of
+\&\fISize\fR are counted.
+.Sp
+As with the \fBMTime\fR option, a \*(L"multiplier\*(R" may be added. For a detailed
+description see above. Valid multipliers here are \f(CW\*(C`b\*(C'\fR (byte), \f(CW\*(C`k\*(C'\fR (kilobyte),
+\&\f(CW\*(C`m\*(C'\fR (megabyte), \f(CW\*(C`g\*(C'\fR (gigabyte), \f(CW\*(C`t\*(C'\fR (terabyte), and \f(CW\*(C`p\*(C'\fR (petabyte). Please
+note that there are 1000 bytes in a kilobyte, not 1024.
+.ie n .Sh "Plugin ""hddtemp"""
+.el .Sh "Plugin \f(CWhddtemp\fP"
 .IX Subsection "Plugin hddtemp"
 To get values from \fBhddtemp\fR collectd connects to \fBlocalhost\fR (127.0.0.1),
 port \fB7634/tcp\fR. The \fBHost\fR and \fBPort\fR options can be used to change these
 default values, see below. \f(CW\*(C`hddtemp\*(C'\fR has to be running to work correctly. If
 \&\f(CW\*(C`hddtemp\*(C'\fR is not running timeouts may appear which may interfere with other
 statistics..
@@ -487,14 +577,14 @@
 .IP "\fBTranslateDevicename\fR \fItrue\fR|\fIfalse\fR" 4
 .IX Item "TranslateDevicename true|false"
 If enabled, translate the disk names to major/minor device numbers
 (e.\ g. \*(L"8\-0\*(R" for /dev/sda). For backwards compatibility this defaults to
 \&\fItrue\fR but it's recommended to disable it as it will probably be removed in
 the next major version.
-.ie n .SS "Plugin ""interface"""
-.el .SS "Plugin \f(CWinterface\fP"
+.ie n .Sh "Plugin ""interface"""
+.el .Sh "Plugin \f(CWinterface\fP"
 .IX Subsection "Plugin interface"
 .IP "\fBInterface\fR \fIInterface\fR" 4
 .IX Item "Interface Interface"
 Select this interface. By default these interfaces will then be collected. For
 a more detailed description see \fBIgnoreSelected\fR below.
 .IP "\fBIgnoreSelected\fR \fItrue\fR|\fIfalse\fR" 4
@@ -502,29 +592,40 @@
 If no configuration if given, the \fBtraffic\fR\-plugin will collect data from
 all interfaces. This may not be practical, especially for loopback\- and
 similar interfaces. Thus, you can use the \fBInterface\fR\-option to pick the
 interfaces you're interested in. Sometimes, however, it's easier/preferred
 to collect all interfaces \fIexcept\fR a few ones. This option enables you to
 do that: By setting \fBIgnoreSelected\fR to \fItrue\fR the effect of
-\&\fBInterface\fR is inversed: All selected interfaces are ignored and all
+\&\fBInterface\fR is inverted: All selected interfaces are ignored and all
 other interfaces are collected.
-.ie n .SS "Plugin ""ipmi"""
-.el .SS "Plugin \f(CWipmi\fP"
+.ie n .Sh "Plugin ""ipmi"""
+.el .Sh "Plugin \f(CWipmi\fP"
 .IX Subsection "Plugin ipmi"
 .IP "\fBSensor\fR \fISensor\fR" 4
 .IX Item "Sensor Sensor"
 Selects sensors to collect or to ignore, depending on \fBIgnoreSelected\fR.
 .IP "\fBIgnoreSelected\fR \fItrue\fR|\fIfalse\fR" 4
 .IX Item "IgnoreSelected true|false"
 If no configuration if given, the \fBipmi\fR plugin will collect data from all
 sensors found of type \*(L"temperature\*(R", \*(L"voltage\*(R", \*(L"current\*(R" and \*(L"fanspeed\*(R".
 This option enables you to do that: By setting \fBIgnoreSelected\fR to \fItrue\fR
 the effect of \fBSensor\fR is inverted: All selected sensors are ignored and
 all other sensors are collected.
-.ie n .SS "Plugin ""iptables"""
-.el .SS "Plugin \f(CWiptables\fP"
+.IP "\fBNotifySensorAdd\fR \fItrue\fR|\fIfalse\fR" 4
+.IX Item "NotifySensorAdd true|false"
+If a sensor appears after initialization time of a minute a notification
+is sent.
+.IP "\fBNotifySensorRemove\fR \fItrue\fR|\fIfalse\fR" 4
+.IX Item "NotifySensorRemove true|false"
+If a sensor disappears a notification is sent.
+.IP "\fBNotifySensorNotPresent\fR \fItrue\fR|\fIfalse\fR" 4
+.IX Item "NotifySensorNotPresent true|false"
+If you have for example dual power supply and one of them is (un)plugged then
+a notification is sent.
+.ie n .Sh "Plugin ""iptables"""
+.el .Sh "Plugin \f(CWiptables\fP"
 .IX Subsection "Plugin iptables"
 .IP "\fBChain\fR \fITable\fR \fIChain\fR [\fIComment|Number\fR [\fIName\fR]]" 4
 .IX Item "Chain Table Chain [Comment|Number [Name]]"
 Select the rules to count. If only \fITable\fR and \fIChain\fR are given, this plugin
 will collect the counters of all rules which have a comment-match. The comment
 is then used as type-instance.
@@ -532,30 +633,30 @@
 If \fIComment\fR or \fINumber\fR is given, only the rule with the matching comment or
 the \fIn\fRth rule will be collected. Again, the comment (or the number) will be
 used as the type-instance.
 .Sp
 If \fIName\fR is supplied, it will be used as the type-instance instead of the
 comment or the number.
-.ie n .SS "Plugin ""irq"""
-.el .SS "Plugin \f(CWirq\fP"
+.ie n .Sh "Plugin ""irq"""
+.el .Sh "Plugin \f(CWirq\fP"
 .IX Subsection "Plugin irq"
 .IP "\fBIrq\fR \fIIrq\fR" 4
 .IX Item "Irq Irq"
 Select this irq. By default these irqs will then be collected. For a more
 detailed description see \fBIgnoreSelected\fR below.
 .IP "\fBIgnoreSelected\fR \fItrue\fR|\fIfalse\fR" 4
 .IX Item "IgnoreSelected true|false"
 If no configuration if given, the \fBirq\fR\-plugin will collect data from all
 irqs. This may not be practical, especially if no interrupts happen. Thus, you
 can use the \fBIrq\fR\-option to pick the interrupt you're interested in.
 Sometimes, however, it's easier/preferred to collect all interrupts \fIexcept\fR a
 few ones. This option enables you to do that: By setting \fBIgnoreSelected\fR to
-\&\fItrue\fR the effect of \fBIrq\fR is inversed: All selected interrupts are ignored
+\&\fItrue\fR the effect of \fBIrq\fR is inverted: All selected interrupts are ignored
 and all other interrupts are collected.
-.ie n .SS "Plugin ""libvirt"""
-.el .SS "Plugin \f(CWlibvirt\fP"
+.ie n .Sh "Plugin ""libvirt"""
+.el .Sh "Plugin \f(CWlibvirt\fP"
 .IX Subsection "Plugin libvirt"
 This plugin allows \s-1CPU\s0, disk and network load to be collected for virtualized
 guests on the machine. This means that these characteristics can be collected
 for guest systems without installing any software on them \- collectd only runs
 on the hosting system. The statistics are collected through libvirt
 (<http://libvirt.org/>).
@@ -623,14 +724,14 @@
 \&\fBhostname\fR means to use the global \fBHostname\fR setting, which is probably not
 useful on its own because all guests will appear to have the same name.
 .Sp
 You can also specify combinations of these fields. For example \fBname uuid\fR
 means to concatenate the guest name and \s-1UUID\s0 (with a literal colon character
 between, thus \fI\*(L"foo:1234\-1234\-1234\-1234\*(R"\fR).
-.ie n .SS "Plugin ""logfile"""
-.el .SS "Plugin \f(CWlogfile\fP"
+.ie n .Sh "Plugin ""logfile"""
+.el .Sh "Plugin \f(CWlogfile\fP"
 .IX Subsection "Plugin logfile"
 .IP "\fBLogLevel\fR \fBdebug|info|notice|warning|err\fR" 4
 .IX Item "LogLevel debug|info|notice|warning|err"
 Sets the log-level. If, for example, set to \fBnotice\fR, then all events with
 severity \fBnotice\fR, \fBwarning\fR, or \fBerr\fR will be written to the logfile.
 .Sp
@@ -642,14 +743,14 @@
 \&\fBstderr\fR can be used to write to the standard output and standard error
 channels, respectively. This, of course, only makes much sense when collectd is
 running in foreground\- or non-daemon-mode.
 .IP "\fBTimestamp\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "Timestamp true|false"
 Prefix all lines printed by the current time. Defaults to \fBtrue\fR.
-.ie n .SS "Plugin ""mbmon"""
-.el .SS "Plugin \f(CWmbmon\fP"
+.ie n .Sh "Plugin ""mbmon"""
+.el .Sh "Plugin \f(CWmbmon\fP"
 .IX Subsection "Plugin mbmon"
 The \f(CW\*(C`mbmon plugin\*(C'\fR uses mbmon to retrieve temperature, voltage, etc.
 .PP
 Be default collectd connects to \fBlocalhost\fR (127.0.0.1), port \fB411/tcp\fR. The
 \&\fBHost\fR and \fBPort\fR options can be used to change these values, see below.
 \&\f(CW\*(C`mbmon\*(C'\fR has to be running to work correctly. If \f(CW\*(C`mbmon\*(C'\fR is not running
@@ -661,57 +762,55 @@
 .IP "\fBHost\fR \fIHostname\fR" 4
 .IX Item "Host Hostname"
 Hostname to connect to. Defaults to \fB127.0.0.1\fR.
 .IP "\fBPort\fR \fIPort\fR" 4
 .IX Item "Port Port"
 TCP-Port to connect to. Defaults to \fB411\fR.
-.ie n .SS "Plugin ""memcached"""
-.el .SS "Plugin \f(CWmemcached\fP"
+.ie n .Sh "Plugin ""memcached"""
+.el .Sh "Plugin \f(CWmemcached\fP"
 .IX Subsection "Plugin memcached"
 The \f(CW\*(C`memcached plugin\*(C'\fR connects to a memcached server and queries statistics
 about cache utilization, memory and bandwidth used.
 <http://www.danga.com/memcached/>
 .IP "\fBHost\fR \fIHostname\fR" 4
 .IX Item "Host Hostname"
 Hostname to connect to. Defaults to \fB127.0.0.1\fR.
 .IP "\fBPort\fR \fIPort\fR" 4
 .IX Item "Port Port"
 TCP-Port to connect to. Defaults to \fB11211\fR.
-.ie n .SS "Plugin ""mysql"""
-.el .SS "Plugin \f(CWmysql\fP"
+.ie n .Sh "Plugin ""mysql"""
+.el .Sh "Plugin \f(CWmysql\fP"
 .IX Subsection "Plugin mysql"
 The \f(CW\*(C`mysql plugin\*(C'\fR requires \fBmysqlclient\fR to be installed. It connects to the
 database when started and keeps the connection up as long as possible. When the
 connection is interrupted for whatever reason it will try to re-connect. The
 plugin will complaint loudly in case anything goes wrong.
 .PP
-This plugin issues the MySQL \f(CW\*(C`SHOW STATUS\*(C'\fR command and collects information
-about MySQL network traffic, executed statements, requests, the query cache
-and threads by evaluating the \f(CW\*(C`Bytes_{received,sent}\*(C'\fR, \f(CW\*(C`Com_*\*(C'\fR,
-\&\f(CW\*(C`Handler_*\*(C'\fR, \f(CW\*(C`Qcache_*\*(C'\fR and \f(CW\*(C`Threads_*\*(C'\fR return values. Please refer to the
-\&\fBMySQL reference manual\fR, \fI5.1.6. Server Status Variables\fR for an
-explanation of these values.
+This plugin issues \f(CW\*(C`SHOW STATUS\*(C'\fR and evaluates \f(CW\*(C`Bytes_{received,sent}\*(C'\fR,
+\&\f(CW\*(C`Com_*\*(C'\fR and \f(CW\*(C`Handler_*\*(C'\fR which correspond to \fImysql_octets.rrd\fR,
+\&\fImysql_commands\-*.rrd\fR and \fImysql_handler\-*.rrd\fR. Also, the values of
+\&\f(CW\*(C`Qcache_*\*(C'\fR are put in \fImysql_qcache.rrd\fR and values of \f(CW\*(C`Threads_*\*(C'\fR are put
+in \fImysql_threads.rrd\fR. Please refer to the \fBMySQL reference manual\fR,
+\&\fI5.2.4. Server Status Variables\fR for an explanation of these values.
 .PP
 Use the following options to configure the plugin:
 .IP "\fBHost\fR \fIHostname\fR" 4
 .IX Item "Host Hostname"
 Hostname of the database server. Defaults to \fBlocalhost\fR.
 .IP "\fBUser\fR \fIUsername\fR" 4
 .IX Item "User Username"
-Username to use when connecting to the database. The user does not have to be
-granted any privileges (which is synonym to granting the \f(CW\*(C`USAGE\*(C'\fR privilege).
-Any existing MySQL user will do.
+Username to use when connecting to the database.
 .IP "\fBPassword\fR \fIPassword\fR" 4
 .IX Item "Password Password"
 Password needed to log into the database.
 .IP "\fBDatabase\fR \fIDatabase\fR" 4
 .IX Item "Database Database"
 Select this database. Defaults to \fIno database\fR which is a perfectly reasonable
 option for what this plugin does.
-.ie n .SS "Plugin ""netlink"""
-.el .SS "Plugin \f(CWnetlink\fP"
+.ie n .Sh "Plugin ""netlink"""
+.el .Sh "Plugin \f(CWnetlink\fP"
 .IX Subsection "Plugin netlink"
 The \f(CW\*(C`netlink\*(C'\fR plugin uses a netlink socket to query the Linux kernel about
 statistics of various interface and routing aspects.
 .IP "\fBInterface\fR \fIInterface\fR" 4
 .IX Item "Interface Interface"
 .PD 0
@@ -780,16 +879,16 @@
 .Ve
 .IP "\fBIgnoreSelected\fR" 4
 .IX Item "IgnoreSelected"
 The behaviour is the same as with all other similar plugins: If nothing is
 selected at all, everything is collected. If some things are selected using the
 options described above, only these statistics are collected. If you set
-\&\fBIgnoreSelected\fR to \fBtrue\fR, this behavior is inversed, i.\ e. the
+\&\fBIgnoreSelected\fR to \fBtrue\fR, this behavior is inverted, i.\ e. the
 specified statistics will not be collected.
-.ie n .SS "Plugin ""network"""
-.el .SS "Plugin \f(CWnetwork\fP"
+.ie n .Sh "Plugin ""network"""
+.el .Sh "Plugin \f(CWnetwork\fP"
 .IX Subsection "Plugin network"
 .IP "\fBListen\fR \fIHost\fR [\fIPort\fR]" 4
 .IX Item "Listen Host [Port]"
 .PD 0
 .IP "\fBServer\fR \fIHost\fR [\fIPort\fR]" 4
 .IX Item "Server Host [Port]"
@@ -834,14 +933,14 @@
 the last value being sent or received. Every \fISeconds\fR seconds the plugin
 searches and removes all entries that are older than \fISeconds\fR seconds, thus
 freeing the unused memory again. Since this process is somewhat expensive and
 normally doesn't do much, this value should not be too small. The default is
 1800 seconds, but setting this to 86400 seconds (one day) will not do much harm
 either.
-.ie n .SS "Plugin ""nginx"""
-.el .SS "Plugin \f(CWnginx\fP"
+.ie n .Sh "Plugin ""nginx"""
+.el .Sh "Plugin \f(CWnginx\fP"
 .IX Subsection "Plugin nginx"
 This plugin collects the number of connections and requests handled by the
 \&\f(CW\*(C`nginx daemon\*(C'\fR (speak: engine\ X), a \s-1HTTP\s0 and mail server/proxy. It
 queries the page provided by the \f(CW\*(C`ngx_http_stub_status_module\*(C'\fR module, which
 isn't compiled by default. Please refer to
 <http://wiki.codemongers.com/NginxStubStatusModule> for more information on
@@ -870,14 +969,37 @@
 connecting to a \s-1SSL\s0 enabled server. Enabled by default.
 .IP "\fBCACert\fR \fIFile\fR" 4
 .IX Item "CACert File"
 File that holds one or more \s-1SSL\s0 certificates. If you want to use \s-1HTTPS\s0 you will
 possibly need this option. What \s-1CA\s0 certificates come bundled with \f(CW\*(C`libcurl\*(C'\fR
 and are checked by default depends on the distribution you use.
-.ie n .SS "Plugin ""ntpd"""
-.el .SS "Plugin \f(CWntpd\fP"
+.ie n .Sh "Plugin ""notify_desktop"""
+.el .Sh "Plugin \f(CWnotify_desktop\fP"
+.IX Subsection "Plugin notify_desktop"
+This plugin sends a desktop notification to a notification daemon, as defined
+in the Desktop Notification Specification. To actually display the
+notifications, \fBnotification-daemon\fR is required and \fBcollectd\fR has to be
+able to access the X server.
+.PP
+The Desktop Notification Specification can be found at
+<http://www.galago\-project.org/specs/notification/>.
+.IP "\fBOkayTimeout\fR \fItimeout\fR" 4
+.IX Item "OkayTimeout timeout"
+.PD 0
+.IP "\fBWarningTimeout\fR \fItimeout\fR" 4
+.IX Item "WarningTimeout timeout"
+.IP "\fBFailureTimeout\fR \fItimeout\fR" 4
+.IX Item "FailureTimeout timeout"
+.PD
+Set the \fItimeout\fR, in milliseconds, after which to expire the notification
+for \f(CW\*(C`OKAY\*(C'\fR, \f(CW\*(C`WARNING\*(C'\fR and \f(CW\*(C`FAILURE\*(C'\fR severities respectively. If zero has
+been specified, the displayed notification will not be closed at all \- the
+user has to do so herself. These options default to 5000. If a negative number
+has been specified, the default is used as well.
+.ie n .Sh "Plugin ""ntpd"""
+.el .Sh "Plugin \f(CWntpd\fP"
 .IX Subsection "Plugin ntpd"
 .IP "\fBHost\fR \fIHostname\fR" 4
 .IX Item "Host Hostname"
 Hostname of the host running \fBntpd\fR. Defaults to \fBlocalhost\fR.
 .IP "\fBPort\fR \fIPort\fR" 4
 .IX Item "Port Port"
@@ -885,36 +1007,294 @@
 .IP "\fBReverseLookups\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "ReverseLookups true|false"
 Sets wether or not to perform reverse lookups on peers. Since the name or
 IP-address may be used in a filename it is recommended to disable reverse
 lookups. The default is to do reverse lookups to preserve backwards
 compatibility, though.
-.ie n .SS "Plugin ""nut"""
-.el .SS "Plugin \f(CWnut\fP"
+.ie n .Sh "Plugin ""nut"""
+.el .Sh "Plugin \f(CWnut\fP"
 .IX Subsection "Plugin nut"
 .IP "\fB\s-1UPS\s0\fR \fIupsname\fR\fB@\fR\fIhostname\fR[\fB:\fR\fIport\fR]" 4
 .IX Item "UPS upsname@hostname[:port]"
 Add a \s-1UPS\s0 to collect data from. The format is identical to the one accepted by
 \&\fIupsc\fR\|(8).
-.ie n .SS "Plugin ""perl"""
-.el .SS "Plugin \f(CWperl\fP"
+.ie n .Sh "Plugin ""onewire"""
+.el .Sh "Plugin \f(CWonewire\fP"
+.IX Subsection "Plugin onewire"
+\&\fB\s-1EXPERIMENTAL\s0!\fR See notes below.
+.PP
+The \f(CW\*(C`onewire\*(C'\fR plugin uses the \fBowcapi\fR library from the \fBowfs\fR project
+<http://owfs.org/> to read sensors connected via the onewire bus.
+.PP
+Currently only temperature sensors (sensors with the family code \f(CW10\fR,
+e.\ g. \s-1DS1820\s0, \s-1DS18S20\s0, \s-1DS1920\s0) can be read. If you have other sensors you
+would like to have included, please send a sort request to the mailing list.
+.PP
+Hubs (the \s-1DS2409\s0 chips) are working, but read the note, why this plugin is
+experimental, below.
+.IP "\fBDevice\fR \fIDevice\fR" 4
+.IX Item "Device Device"
+Sets the device to read the values from. This can either be a \*(L"real\*(R" hardware
+device, such as a serial port or an \s-1USB\s0 port, or the address of the
+\&\fIowserver\fR\|(1) socket, usually \fBlocalhost:4304\fR.
+.Sp
+Though the documentation claims to automatically recognize the given address
+format, with version\ 2.7p4 we had to specify the type explicitly. So
+with that version, the following configuration worked for us:
+.Sp
+.Vb 3
+\&  <Plugin onewire>
+\&    Device "\-s localhost:4304"
+\&  </Plugin>
+.Ve
+.Sp
+This directive is \fBrequired\fR and does not have a default value.
+.IP "\fBSensor\fR \fISensor\fR" 4
+.IX Item "Sensor Sensor"
+Selects sensors to collect or to ignore, depending on \fBIgnoreSelected\fR, see
+below. Sensors are specified without the family byte at the beginning, to you'd
+use \f(CW\*(C`F10FCA000800\*(C'\fR, and \fBnot\fR include the leading \f(CW10.\fR family byte and
+point.
+.IP "\fBIgnoreSelected\fR \fItrue\fR|\fIfalse\fR" 4
+.IX Item "IgnoreSelected true|false"
+If no configuration if given, the \fBonewire\fR plugin will collect data from all
+sensors found. This may not be practical, especially if sensors are added and
+removed regularly. Sometimes, however, it's easier/preferred to collect only
+specific sensors or all sensors \fIexcept\fR a few specified ones. This option
+enables you to do that: By setting \fBIgnoreSelected\fR to \fItrue\fR the effect of
+\&\fBSensor\fR is inverted: All selected interfaces are ignored and all other
+interfaces are collected.
+.PP
+\&\fB\s-1EXPERIMENTAL\s0!\fR The \f(CW\*(C`onewire\*(C'\fR plugin is experimental, because it doesn't yet
+work with big setups. It works with one sensor being attached to one
+controller, but as soon as you throw in a couple more senors and maybe a hub
+or two, reading all values will take more than ten seconds (the default
+interval). We will probably add some separate thread for reading the sensors
+and some cache or something like that, but it's not done yet. We will try to
+maintain backwards compatibility in the future, but we can't probmise. So in
+short: If it works for you: Great! But kaap in mind that the config \fImight\fR
+change, though this is unlikely. Oh, and if you want to help improving this
+plugin, just send a short notice to the mailing list. Thanks\ :)
+.ie n .Sh "Plugin ""perl"""
+.el .Sh "Plugin \f(CWperl\fP"
 .IX Subsection "Plugin perl"
 This plugin embeds a Perl-interpreter into collectd and provides an interface
 to collectd's plugin system. See \fIcollectd\-perl\fR\|(5) for its documentation.
-.ie n .SS "Plugin ""ping"""
-.el .SS "Plugin \f(CWping\fP"
+.ie n .Sh "Plugin ""ping"""
+.el .Sh "Plugin \f(CWping\fP"
 .IX Subsection "Plugin ping"
 .IP "\fBHost\fR \fIIP-address\fR" 4
 .IX Item "Host IP-address"
 Host to ping periodically. This option may be repeated several times to ping
 multiple hosts.
 .IP "\fB\s-1TTL\s0\fR \fI0\-255\fR" 4
 .IX Item "TTL 0-255"
 Sets the Time-To-Live of generated \s-1ICMP\s0 packets.
-.ie n .SS "Plugin ""powerdns"""
-.el .SS "Plugin \f(CWpowerdns\fP"
+.ie n .Sh "Plugin ""postgresql"""
+.el .Sh "Plugin \f(CWpostgresql\fP"
+.IX Subsection "Plugin postgresql"
+The \f(CW\*(C`postgresql\*(C'\fR plugin queries statistics from PostgreSQL databases. It
+keeps a persistent connection to all configured databases and tries to
+reconnect if the connection has been interrupted. A database is configured by
+specifying a \fBDatabase\fR block as described below. The default statistics are
+collected from PostgreSQL's \fBstatistics collector\fR which thus has to be
+enabled for this plugin to work correctly. This should usually be the case by
+default. See the section \*(L"The Statistics Collector\*(R" of the \fBPostgreSQL
+Documentation\fR for details.
+.PP
+By specifying custom database queries using a \fBQuery\fR block as described
+below, you may collect any data that is available from some PostgreSQL
+database. This way, you are able to access statistics of external daemons
+which are available in a PostgreSQL database or use future or special
+statistics provided by PostgreSQL without the need to upgrade your collectd
+installation.
+.PP
+The \fBPostgreSQL Documentation\fR manual can be found at
+<http://www.postgresql.org/docs/manuals/>.
+.PP
+.Vb 7
+\&  <Plugin postgresql>
+\&    <Query magic>
+\&      Query "SELECT magic, spells FROM wizard WHERE host = $1;"
+\&      Param hostname
+\&      Column gauge magic
+\&      Column counter spells
+\&    </Query>
+\&
+\&    <Database foo>
+\&      Host "hostname"
+\&      Port "5432"
+\&      User "username"
+\&      Password "secret"
+\&      SSLMode "prefer"
+\&      KRBSrvName "kerberos_service_name"
+\&      Query magic
+\&    </Database>
+\&    <Database bar>
+\&      Service "service_name"
+\&    </Database>
+\&  </Plugin>
+.Ve
+.PP
+The \fBQuery\fR block defines one database query which may later be used by a
+database definition. It accepts a single mandatory argument which specifies
+the name of the query. The names of all queries have to be unique. The
+following configuration options are available to define the query:
+.IP "\fBQuery\fR \fIsql query\fR" 4
+.IX Item "Query sql query"
+Specify the \fIsql query\fR which the plugin should execute. The string may
+contain the tokens \fB\f(CB$1\fB\fR, \fB\f(CB$2\fB\fR, etc. which are used to reference the first,
+second, etc. parameter. The value of the parameters is specified by the
+\&\fBParam\fR configuration option \- see below for details. To include a literal
+\&\fB$\fR character followed by a number, surround it with single quotes (\fB'\fR).
+.Sp
+Any \s-1SQL\s0 command which may return data (such as \f(CW\*(C`SELECT\*(C'\fR or \f(CW\*(C`SHOW\*(C'\fR) is
+allowed. Note, however, that only a single command may be used. Semicolons are
+allowed as long as a single non-empty command has been specified only.
+.IP "\fBParam\fR \fIhostname\fR|\fIdatabase\fR|\fIusername\fR" 4
+.IX Item "Param hostname|database|username"
+Specify the parameters which should be passed to the \s-1SQL\s0 query. The parameters
+are referred to in the \s-1SQL\s0 query as \fB\f(CB$1\fB\fR, \fB\f(CB$2\fB\fR, etc. in the same order as
+they appear in the configuration file. The value of the parameter is
+determined depending on the value of the \fBParam\fR option as follows:
+.RS 4
+.IP "\fIhostname\fR" 4
+.IX Item "hostname"
+The configured hostname of the database connection. If a \s-1UNIX\s0 domain socket is
+used, the parameter expands to \*(L"localhost\*(R".
+.IP "\fIdatabase\fR" 4
+.IX Item "database"
+The name of the database of the current connection.
+.IP "\fIusername\fR" 4
+.IX Item "username"
+The username used to connect to the database.
+.RE
+.RS 4
+.Sp
+Please note that parameters are only supported by PostgreSQL's protocol
+version 3 and above which was introduced in version 7.4 of PostgreSQL.
+.RE
+.IP "\fBColumn\fR \fItype\fR [\fItype instance\fR]" 4
+.IX Item "Column type [type instance]"
+Specify the \fItype\fR and optional \fItype instance\fR used to dispatch the value
+of each result column. Detailed information about types and their
+configuration can be found in \fItypes.db\fR\|(5). The number and order of the
+\&\fBColumn\fR options has to match the columns of the query result.
+.IP "\fBMinPGVersion\fR \fIversion\fR" 4
+.IX Item "MinPGVersion version"
+.PD 0
+.IP "\fBMaxPGVersion\fR \fIversion\fR" 4
+.IX Item "MaxPGVersion version"
+.PD
+Specify the minimum or maximum version of PostgreSQL that this query should be
+used with. Some statistics might only be available with certain versions of
+PostgreSQL. This allows you to specify multiple queries with the same name but
+which apply to different versions, thus allowing you to use the same
+configuration in a heterogeneous environment.
+.Sp
+The \fIversion\fR has to be specified as the concatenation of the major, minor
+and patch-level versions, each represented as two-decimal-digit numbers. For
+example, version 8.2.3 will become 80203.
+.PP
+The following predefined queries are available (the definitions can be found
+in the \fIpostgresql_default.conf\fR file which, by default, is available at
+\&\f(CW\*(C`\f(CIprefix\f(CW/share/collectd/\*(C'\fR):
+.IP "\fBbackends\fR" 4
+.IX Item "backends"
+This query collects the number of backends, i.\ e. the number of
+connected clients.
+.IP "\fBtransactions\fR" 4
+.IX Item "transactions"
+This query collects the numbers of committed and rolled-back transactions of
+the user tables.
+.IP "\fBqueries\fR" 4
+.IX Item "queries"
+This query collects the numbers of various table modifications (i.\ e.
+insertions, updates, deletions) of the user tables.
+.IP "\fBquery_plans\fR" 4
+.IX Item "query_plans"
+This query collects the numbers of various table scans and returned tuples of
+the user tables.
+.IP "\fBtable_states\fR" 4
+.IX Item "table_states"
+This query collects the numbers of live and dead rows in the user tables.
+.IP "\fBdisk_io\fR" 4
+.IX Item "disk_io"
+This query collects disk block access counts for user tables.
+.IP "\fBdisk_usage\fR" 4
+.IX Item "disk_usage"
+This query collects the on-disk size of the database in bytes.
+.PP
+The \fBDatabase\fR block defines one PostgreSQL database for which to collect
+statistics. It accepts a single mandatory argument which specifies the
+database name. None of the other options are required. PostgreSQL will use
+default values as documented in the section \*(L"\s-1CONNECTING\s0 \s-1TO\s0 A \s-1DATABASE\s0\*(R" in the
+\&\fIpsql\fR\|(1) manpage. However, be aware that those defaults may be influenced by
+the user collectd is run as and special environment variables. See the manpage
+for details.
+.IP "\fBHost\fR \fIhostname\fR" 4
+.IX Item "Host hostname"
+Specify the hostname or \s-1IP\s0 of the PostgreSQL server to connect to. If the
+value begins with a slash, it is interpreted as the directory name in which to
+look for the \s-1UNIX\s0 domain socket.
+.Sp
+This option is also used to determine the hostname that is associated with a
+collected data set. If it has been omitted or either begins with with a slash
+or equals \fBlocalhost\fR it will be replaced with the global hostname definition
+of collectd. Any other value will be passed literally to collectd when
+dispatching values. Also see the global \fBHostname\fR and \fBFQDNLookup\fR options.
+.IP "\fBPort\fR \fIport\fR" 4
+.IX Item "Port port"
+Specify the \s-1TCP\s0 port or the local \s-1UNIX\s0 domain socket file extension of the
+server.
+.IP "\fBUser\fR \fIusername\fR" 4
+.IX Item "User username"
+Specify the username to be used when connecting to the server.
+.IP "\fBPassword\fR \fIpassword\fR" 4
+.IX Item "Password password"
+Specify the password to be used when connecting to the server.
+.IP "\fBSSLMode\fR \fIdisable\fR|\fIallow\fR|\fIprefer\fR|\fIrequire\fR" 4
+.IX Item "SSLMode disable|allow|prefer|require"
+Specify whether to use an \s-1SSL\s0 connection when contacting the server. The
+following modes are supported:
+.RS 4
+.IP "\fIdisable\fR" 4
+.IX Item "disable"
+Do not use \s-1SSL\s0 at all.
+.IP "\fIallow\fR" 4
+.IX Item "allow"
+First, try to connect without using \s-1SSL\s0. If that fails, try using \s-1SSL\s0.
+.IP "\fIprefer\fR (default)" 4
+.IX Item "prefer (default)"
+First, try to connect using \s-1SSL\s0. If that fails, try without using \s-1SSL\s0.
+.IP "\fIrequire\fR" 4
+.IX Item "require"
+Use \s-1SSL\s0 only.
+.RE
+.RS 4
+.RE
+.IP "\fBKRBSrvName\fR \fIkerberos_service_name\fR" 4
+.IX Item "KRBSrvName kerberos_service_name"
+Specify the Kerberos service name to use when authenticating with Kerberos 5
+or \s-1GSSAPI\s0. See the sections \*(L"Kerberos authentication\*(R" and \*(L"\s-1GSSAPI\s0\*(R" of the
+\&\fBPostgreSQL Documentation\fR for details.
+.IP "\fBService\fR \fIservice_name\fR" 4
+.IX Item "Service service_name"
+Specify the PostgreSQL service name to use for additional parameters. That
+service has to be defined in \fIpg_service.conf\fR and holds additional
+connection parameters. See the section \*(L"The Connection Service File\*(R" in the
+\&\fBPostgreSQL Documentation\fR for details.
+.IP "\fBQuery\fR \fIquery\fR" 4
+.IX Item "Query query"
+Specify a \fIquery\fR which should be executed for the database connection. This
+may be any of the predefined or user-defined queries. If no such option is
+given, it defaults to \*(L"backends\*(R", \*(L"transactions\*(R", \*(L"queries\*(R", \*(L"query_plans\*(R",
+\&\*(L"table_states\*(R", \*(L"disk_io\*(R" and \*(L"disk_usage\*(R". Else, the specified queries are
+used only.
+.ie n .Sh "Plugin ""powerdns"""
+.el .Sh "Plugin \f(CWpowerdns\fP"
 .IX Subsection "Plugin powerdns"
 The \f(CW\*(C`powerdns\*(C'\fR plugin queries statistics from an authoritative PowerDNS
 nameserver and/or a PowerDNS recursor. Since both offer a wide variety of
 values, many of which are probably meaningless to most users, but may be useful
 for some. So you may chose which values to collect, but if you don't, some
 reasonable defaults will be collected.
@@ -1026,35 +1406,35 @@
 .Sp
 In this case please file a bug report with the collectd team.
 .RE
 .IP "\fBSocket\fR \fIPath\fR" 4
 .IX Item "Socket Path"
 Configures the path to the \s-1UNIX\s0 domain socket to be used when connecting to the
-daemon. By default \f(CW\*(C`${localstatedir}/run/pdns.controlsocket\*(C'\fR will be used for
-an authoritative server and \f(CW\*(C`${localstatedir}/run/pdns_recursor.controlsocket\*(C'\fR
-will be used for the recursor.
+daemon. By default \f(CW\*(C`/var/run/pdns.controlsocket\*(C'\fR will be used for an
+authoritative server and \f(CW\*(C`/var/run/pdns_recursor.controlsocket\*(C'\fR will be used
+for the recursor.
 .RE
 .RS 4
 .RE
 .IP "\fBLocalSocket\fR \fIPath\fR" 4
 .IX Item "LocalSocket Path"
 Querying the recursor is done using \s-1UDP\s0. When using \s-1UDP\s0 over \s-1UNIX\s0 domain
 sockets, the client socket needs a name in the file system, too. You can set
 this local name to \fIPath\fR using the \fBLocalSocket\fR option. The default is
 \&\f(CW\*(C`\f(CIprefix\f(CW/var/run/collectd\-powerdns\*(C'\fR.
-.ie n .SS "Plugin ""processes"""
-.el .SS "Plugin \f(CWprocesses\fP"
+.ie n .Sh "Plugin ""processes"""
+.el .Sh "Plugin \f(CWprocesses\fP"
 .IX Subsection "Plugin processes"
 .IP "\fBProcess\fR \fIName\fR" 4
 .IX Item "Process Name"
 Select more detailed statistics of processes matching this name. The statistics
 collected for these selected processes are size of the resident segment size
 (\s-1RSS\s0), user\- and system-time used, number of processes and number of threads,
 and minor and major pagefaults.
-.ie n .SS "Plugin ""rrdtool"""
-.el .SS "Plugin \f(CWrrdtool\fP"
+.ie n .Sh "Plugin ""rrdtool"""
+.el .Sh "Plugin \f(CWrrdtool\fP"
 .IX Subsection "Plugin rrdtool"
 You can use the settings \fBStepSize\fR, \fBHeartBeat\fR, \fBRRARows\fR, and \fB\s-1XFF\s0\fR to
 fine-tune your RRD-files. Please read \fIrrdcreate\fR\|(1) if you encounter problems
 using these settings. If you don't want to dive into the depths of RRDTool, you
 can safely ignore these settings.
 .IP "\fBDataDir\fR \fIDirectory\fR" 4
@@ -1097,13 +1477,13 @@
 For more information on how RRA-sizes are calculated see \fBRRARows\fR above.
 .IP "\fB\s-1XFF\s0\fR \fIFactor\fR" 4
 .IX Item "XFF Factor"
 Set the \*(L"XFiles Factor\*(R". The default is 0.1. If unsure, don't set this option.
 .IP "\fBCacheFlush\fR \fISeconds\fR" 4
 .IX Item "CacheFlush Seconds"
-When the \f(CW\*(C`rrdtool plugin\*(C'\fR uses a cache (by setting \fBCacheTimeout\fR, see below)
+When the \f(CW\*(C`rrdtool\*(C'\fR plugin uses a cache (by setting \fBCacheTimeout\fR, see below)
 it writes all values for a certain RRD-file if the oldest value is older than
 (or equal to) the number of seconds specified. If some RRD-file is not updated
 anymore for some reason (the computer was shut down, the network is broken,
 etc.) some values may still be in the cache. If \fBCacheFlush\fR is set, then the
 entire cache is searched for entries older than \fBCacheTimeout\fR seconds and
 written to disk every \fISeconds\fR seconds. Since this is kind of expensive and
@@ -1114,14 +1494,37 @@
 .IX Item "CacheTimeout Seconds"
 If this option is set to a value greater than zero, the \f(CW\*(C`rrdtool plugin\*(C'\fR will
 save values in a cache, as described above. Writing multiple values at once
 reduces IO-operations and thus lessens the load produced by updating the files.
 The trade off is that the graphs kind of \*(L"drag behind\*(R" and that more memory is
 used.
-.ie n .SS "Plugin ""sensors"""
-.el .SS "Plugin \f(CWsensors\fP"
+.IP "\fBWritesPerSecond\fR \fBUpdates\fR" 4
+.IX Item "WritesPerSecond Updates"
+When collecting many statistics with collectd and the \f(CW\*(C`rrdtool\*(C'\fR plugin, you
+will run serious performance problems. The \fBCacheFlush\fR setting and the
+internal update queue assert that collectd continues to work just fine even
+under heavy load, but the system may become very unresponsive and slow. This is
+a problem especially if create graphs from the \s-1RRD\s0 files on the same machine,
+for example using the \f(CW\*(C`graph.cgi\*(C'\fR script included in the
+\&\f(CW\*(C`contrib/collection3/\*(C'\fR directory.
+.Sp
+This setting is designed for very large setups. Setting this option to a value
+between 25 and 80 updates per second, depending on your hardware, will leave
+the server responsive enough to draw graphs even while all the cached values
+are written to disk. Flushed values, i.\ e. values that are forced to disk
+by the \fB\s-1FLUSH\s0\fR command, are \fBnot\fR effected by this limit. They are still
+written as fast as possible, so that web frontends have up to date data when
+generating graphs.
+.Sp
+For example: If you have 100,000 \s-1RRD\s0 files and set \fBWritesPerSecond\fR to 30
+updates per second, writing all values to disk will take approximately
+56\ minutes. Together with the flushing ability that's integrated into
+\&\*(L"collection3\*(R" you'll end up with a responsive and fast system, up to date
+graphs and basically a \*(L"backup\*(R" of your values every hour.
+.ie n .Sh "Plugin ""sensors"""
+.el .Sh "Plugin \f(CWsensors\fP"
 .IX Subsection "Plugin sensors"
 The \f(CW\*(C`sensors plugin\*(C'\fR uses \fBlm_sensors\fR to retrieve sensor-values. This means
 that all the needed modules have to be loaded and lm_sensors has to be
 configured (most likely by editing \fI/etc/sensors.conf\fR. Read
 \&\fIsensors.conf\fR\|(5) for details.
 .PP
@@ -1137,33 +1540,33 @@
 .IX Item "IgnoreSelected true|false"
 If no configuration if given, the \fBsensors\fR\-plugin will collect data from all
 sensors. This may not be practical, especially for uninteresting sensors.
 Thus, you can use the \fBSensor\fR\-option to pick the sensors you're interested
 in. Sometimes, however, it's easier/preferred to collect all sensors \fIexcept\fR a
 few ones. This option enables you to do that: By setting \fBIgnoreSelected\fR to
-\&\fItrue\fR the effect of \fBSensor\fR is inversed: All selected sensors are ignored
+\&\fItrue\fR the effect of \fBSensor\fR is inverted: All selected sensors are ignored
 and all other sensors are collected.
-.ie n .SS "Plugin ""snmp"""
-.el .SS "Plugin \f(CWsnmp\fP"
+.ie n .Sh "Plugin ""snmp"""
+.el .Sh "Plugin \f(CWsnmp\fP"
 .IX Subsection "Plugin snmp"
 Since the configuration of the \f(CW\*(C`snmp plugin\*(C'\fR is a little more complicated than
 other plugins, its documentation has been moved to an own manpage,
 \&\fIcollectd\-snmp\fR\|(5). Please see there for details.
-.ie n .SS "Plugin ""syslog"""
-.el .SS "Plugin \f(CWsyslog\fP"
+.ie n .Sh "Plugin ""syslog"""
+.el .Sh "Plugin \f(CWsyslog\fP"
 .IX Subsection "Plugin syslog"
 .IP "\fBLogLevel\fR \fBdebug|info|notice|warning|err\fR" 4
 .IX Item "LogLevel debug|info|notice|warning|err"
 Sets the log-level. If, for example, set to \fBnotice\fR, then all events with
 severity \fBnotice\fR, \fBwarning\fR, or \fBerr\fR will be submitted to the
 syslog-daemon.
 .Sp
 Please note that \fBdebug\fR is only available if collectd has been compiled with
 debugging support.
-.ie n .SS "Plugin ""tail"""
-.el .SS "Plugin \f(CWtail\fP"
+.ie n .Sh "Plugin ""tail"""
+.el .Sh "Plugin \f(CWtail\fP"
 .IX Subsection "Plugin tail"
 The \f(CW\*(C`tail plugin\*(C'\fR plugins follows logfiles, just like \fItail\fR\|(1) does, parses
 each line and dispatches found values. What is matched can be configured by the
 user using (extended) regular expressions, as described in \fIregex\fR\|(7).
 .PP
 .Vb 10
@@ -1251,14 +1654,14 @@
 .IX Item "Type Type"
 Sets the type used to dispatch this value. Detailed information about types and
 their configuration can be found in \fItypes.db\fR\|(5).
 .IP "\fBInstance\fR \fITypeInstance\fR" 4
 .IX Item "Instance TypeInstance"
 This optional setting sets the type instance to use.
-.ie n .SS "Plugin ""teamspeak2"""
-.el .SS "Plugin \f(CWteamspeak2\fP"
+.ie n .Sh "Plugin ""teamspeak2"""
+.el .Sh "Plugin \f(CWteamspeak2\fP"
 .IX Subsection "Plugin teamspeak2"
 The \f(CW\*(C`teamspeak2 plugin\*(C'\fR connects to the query port of a teamspeak2 server and
 polls interesting global and virtual server data. The plugin can query only one
 physical server but unlimited virtual servers. You can use the following
 options to configure it:
 .IP "\fBHost\fR \fIhostname/ip\fR" 4
@@ -1279,14 +1682,14 @@
 \&  Server "8767"
 .Ve
 .Sp
 This option, although numeric, needs to be a string, i.\ e. you \fBmust\fR
 use quotes around it! If no such statement is given only global information
 will be collected.
-.ie n .SS "Plugin ""tcpconns"""
-.el .SS "Plugin \f(CWtcpconns\fP"
+.ie n .Sh "Plugin ""tcpconns"""
+.el .Sh "Plugin \f(CWtcpconns\fP"
 .IX Subsection "Plugin tcpconns"
 The \f(CW\*(C`tcpconns plugin\*(C'\fR counts the number of currently established \s-1TCP\s0
 connections based on the local port and/or the remote port. Since there may be
 a lot of connections the default if to count all connections with a local port,
 for which a listening socket is opened. You can use the following options to
 fine-tune the ports you are interested in:
@@ -1310,14 +1713,34 @@
 Count the connections to a specific remote port. This is useful to see how
 much a remote service is used. This is most useful if you want to know how many
 connections a local service has opened to remote services, e.\ g. how many
 connections a mail server or news server has to other mail or news servers, or
 how many connections a web proxy holds to web servers. You have to give the
 port in numeric form.
-.ie n .SS "Plugin ""unixsock"""
-.el .SS "Plugin \f(CWunixsock\fP"
+.ie n .Sh "Plugin ""thermal"""
+.el .Sh "Plugin \f(CWthermal\fP"
+.IX Subsection "Plugin thermal"
+.IP "\fBForceUseProcfs\fR \fItrue\fR|\fIfalse\fR" 4
+.IX Item "ForceUseProcfs true|false"
+By default, the \f(CW\*(C`thermal\*(C'\fR plugin tries to read the statistics from the Linux
+\&\f(CW\*(C`sysfs\*(C'\fR interface. If that is not available, the plugin falls back to the
+\&\f(CW\*(C`procfs\*(C'\fR interface. By setting this option to \fItrue\fR, you can force the
+plugin to use the latter. This option defaults to \fIfalse\fR.
+.IP "\fBDevice\fR \fIDevice\fR" 4
+.IX Item "Device Device"
+Selects the name of the thermal device that you want to collect or ignore,
+depending on the value of the \fBIgnoreSelected\fR option. This option may be
+used multiple times to specify a list of devices.
+.IP "\fBIgnoreSelected\fR \fItrue\fR|\fIfalse\fR" 4
+.IX Item "IgnoreSelected true|false"
+Invert the selection: If set to true, all devices \fBexcept\fR the ones that
+match the device names specified by the \fBDevice\fR option are collected. By
+default only selected devices are collected if a selection is made. If no
+selection is configured at all, \fBall\fR devices are selected.
+.ie n .Sh "Plugin ""unixsock"""
+.el .Sh "Plugin \f(CWunixsock\fP"
 .IX Subsection "Plugin unixsock"
 .IP "\fBSocketFile\fR \fIPath\fR" 4
 .IX Item "SocketFile Path"
 Sets the socket-file which is to be created.
 .IP "\fBSocketGroup\fR \fIGroup\fR" 4
 .IX Item "SocketGroup Group"
@@ -1325,14 +1748,14 @@
 created. Defaults to \fBcollectd\fR.
 .IP "\fBSocketPerms\fR \fIPermissions\fR" 4
 .IX Item "SocketPerms Permissions"
 Change the file permissions of the UNIX-socket after it has been created. The
 permissions must be given as a numeric, octal value as you would pass to
 \&\fIchmod\fR\|(1). Defaults to \fB0770\fR.
-.ie n .SS "Plugin ""uuid"""
-.el .SS "Plugin \f(CWuuid\fP"
+.ie n .Sh "Plugin ""uuid"""
+.el .Sh "Plugin \f(CWuuid\fP"
 .IX Subsection "Plugin uuid"
 This plugin, if loaded, causes the Hostname to be taken from the machine's
 \&\s-1UUID\s0. The \s-1UUID\s0 is a universally unique designation for the machine, usually
 taken from the machine's \s-1BIOS\s0. This is most useful if the machine is running in
 a virtual environment such as Xen, in which case the \s-1UUID\s0 is preserved across
 shutdowns and migration.
@@ -1349,27 +1772,27 @@
 Check for \s-1UUID\s0 from Xen hypervisor.
 .PP
 If no \s-1UUID\s0 can be found then the hostname is not modified.
 .IP "\fBUUIDFile\fR \fIPath\fR" 4
 .IX Item "UUIDFile Path"
 Take the \s-1UUID\s0 from the given file (default \fI/etc/uuid\fR).
-.ie n .SS "Plugin ""vmem"""
-.el .SS "Plugin \f(CWvmem\fP"
+.ie n .Sh "Plugin ""vmem"""
+.el .Sh "Plugin \f(CWvmem\fP"
 .IX Subsection "Plugin vmem"
 The \f(CW\*(C`vmem\*(C'\fR plugin collects information about the usage of virtual memory.
 Since the statistics provided by the Linux kernel are very detailed, they are
 collected very detailed. However, to get all the details, you have to switch
 them on manually. Most people just want an overview over, such as the number of
 pages read from swap space.
 .IP "\fBVerbose\fR \fBtrue\fR|\fBfalse\fR" 4
 .IX Item "Verbose true|false"
 Enables verbose collection of information. This will start collecting page
 \&\*(L"actions\*(R", e.\ g. page allocations, (de)activations, steals and so on.
 Part of these statistics are collected on a \*(L"per zone\*(R" basis.
-.ie n .SS "Plugin ""vserver"""
-.el .SS "Plugin \f(CWvserver\fP"
+.ie n .Sh "Plugin ""vserver"""
+.el .Sh "Plugin \f(CWvserver\fP"
 .IX Subsection "Plugin vserver"
 This plugin doesn't have any options. \fBVServer\fR support is only available for
 Linux. It cannot yet be found in a vanilla kernel, though. To make use of this
 plugin you need a kernel that has \fBVServer\fR support built in, i.\ e. you
 need to apply the patches and compile your own kernel, which will then provide
 the \fI/proc/virtual\fR filesystem that is required by this plugin.
@@ -1396,15 +1819,12 @@
 \&\*(L"interesting\*(R". As a consequence collectd will issue a notification if they are
 not received for twice the last timeout of the values. If, for example, some
 hosts sends it's \s-1CPU\s0 statistics to the server every 60 seconds, a notification
 will be dispatched after about 120 seconds. It may take a little longer because
 the timeout is checked only once each \fBInterval\fR on the server.
 .PP
-When a value comes within range again or is received after it was missing, an
-\&\*(L"OKAY-notification\*(R" is dispatched.
-.PP
 Here is a configuration example to get you started. Read below for more
 information.
 .PP
 .Vb 9
 \& <Threshold>
 \&   <Type "foo">
@@ -1505,11 +1925,12 @@
 \&\fIcollectd\-perl\fR\|(5),
 \&\fIcollectd\-unixsock\fR\|(5),
 \&\fItypes.db\fR\|(5),
 \&\fIhddtemp\fR\|(8),
 kstat(3KSTAT),
 \&\fImbmon\fR\|(1),
+\&\fIpsql\fR\|(1),
 \&\fIrrdtool\fR\|(1),
 \&\fIsensors\fR\|(1)
 .SH "AUTHOR"
 .IX Header "AUTHOR"
 Florian Forster <octo@verplant.org>
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.conf.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.conf.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.conf.in	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.conf.in	2008-09-04 21:01:11.000000000 +0800
@@ -37,12 +37,13 @@
 @BUILD_PLUGIN_DF_TRUE@LoadPlugin df
 @BUILD_PLUGIN_DISK_TRUE@LoadPlugin disk
 @BUILD_PLUGIN_DNS_TRUE@LoadPlugin dns
 @BUILD_PLUGIN_EMAIL_TRUE@LoadPlugin email
 @BUILD_PLUGIN_ENTROPY_TRUE@LoadPlugin entropy
 @BUILD_PLUGIN_EXEC_TRUE@LoadPlugin exec
+@BUILD_PLUGIN_FILECOUNT_TRUE@LoadPlugin filecount
 @BUILD_PLUGIN_HDDTEMP_TRUE@LoadPlugin hddtemp
 @BUILD_PLUGIN_INTERFACE_TRUE@LoadPlugin interface
 @BUILD_PLUGIN_IPTABLES_TRUE@LoadPlugin iptables
 @BUILD_PLUGIN_IPMI_TRUE@LoadPlugin ipmi
 @BUILD_PLUGIN_IPVS_TRUE@LoadPlugin ipvs
 @BUILD_PLUGIN_IRQ_TRUE@LoadPlugin irq
@@ -54,27 +55,32 @@
 @BUILD_PLUGIN_MULTIMETER_TRUE@LoadPlugin multimeter
 @BUILD_PLUGIN_MYSQL_TRUE@LoadPlugin mysql
 @BUILD_PLUGIN_NETLINK_TRUE@LoadPlugin netlink
 @BUILD_PLUGIN_NETWORK_TRUE@LoadPlugin network
 @BUILD_PLUGIN_NFS_TRUE@LoadPlugin nfs
 @BUILD_PLUGIN_NGINX_TRUE@LoadPlugin nginx
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@LoadPlugin notify_desktop
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@LoadPlugin notify_email
 @BUILD_PLUGIN_NTPD_TRUE@LoadPlugin ntpd
 @BUILD_PLUGIN_NUT_TRUE@LoadPlugin nut
+@BUILD_PLUGIN_ONEWIRE_TRUE@LoadPlugin onewire
 @BUILD_PLUGIN_PERL_TRUE@LoadPlugin perl
 @BUILD_PLUGIN_PING_TRUE@LoadPlugin ping
+@BUILD_PLUGIN_POSTGRESQL_TRUE@LoadPlugin postgresql
 @BUILD_PLUGIN_POWERDNS_TRUE@LoadPlugin powerdns
 @BUILD_PLUGIN_PROCESSES_TRUE@LoadPlugin processes
 @BUILD_PLUGIN_RRDTOOL_TRUE@LoadPlugin rrdtool
 @BUILD_PLUGIN_SENSORS_TRUE@LoadPlugin sensors
 @BUILD_PLUGIN_SERIAL_TRUE@LoadPlugin serial
 @BUILD_PLUGIN_SNMP_TRUE@LoadPlugin snmp
 @BUILD_PLUGIN_SWAP_TRUE@LoadPlugin swap
 @BUILD_PLUGIN_TAIL_TRUE@LoadPlugin tail
 @BUILD_PLUGIN_TAPE_TRUE@LoadPlugin tape
 @BUILD_PLUGIN_TCPCONNS_TRUE@LoadPlugin tcpconns
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@LoadPlugin teamspeak2
+@BUILD_PLUGIN_THERMAL_TRUE@LoadPlugin thermal
 @BUILD_PLUGIN_UNIXSOCK_TRUE@LoadPlugin unixsock
 @BUILD_PLUGIN_USERS_TRUE@LoadPlugin users
 @BUILD_PLUGIN_UUID_TRUE@LoadPlugin uuid
 @BUILD_PLUGIN_VMEM_TRUE@LoadPlugin vmem
 @BUILD_PLUGIN_VSERVER_TRUE@LoadPlugin vserver
 @BUILD_PLUGIN_WIRELESS_TRUE@LoadPlugin wireless
@@ -131,12 +137,21 @@
 
 #<Plugin exec>
 #	Exec "user:group" "/path/to/exec"
 #	NotificationExec "user:group" "/path/to/exec"
 #</Plugin>
 
+#<Plugin filecount>
+#	<Directory "/path/to/dir">
+#		Instance "foodir"
+#		Name "*.conf"
+#		MTime "-5m"
+#		Size "+10k"
+#	</Directory>
+#</Plugin>
+
 @BUILD_PLUGIN_HDDTEMP_TRUE@<Plugin hddtemp>
 #	Host "127.0.0.1"
 #	Port "7634"
 @BUILD_PLUGIN_HDDTEMP_TRUE@	TranslateDevicename false
 @BUILD_PLUGIN_HDDTEMP_TRUE@</Plugin>
 
@@ -206,34 +221,83 @@
 #	URL "http://localhost/status?auto"
 #	User "www-user"
 #	Password "secret"
 #	CACert "/etc/ssl/ca.crt"
 #</Plugin>
 
+#<Plugin notify_desktop>
+#	OkayTimeout 1000
+#	WarningTimeout 5000
+#	FailureTimeout 0
+#</Plugin>
+
+#<Plugin notify_email>
+#       SMTPServer "localhost"
+#	SMTPPort 25
+#	SMTPUser "my-username"
+#	SMTPPassword "my-password"
+#	From "collectd@main0server.com"
+#	# <WARNING/FAILURE/OK> on <hostname>. beware! do not use not more than two %s in this string!!!
+#	Subject "Aaaaaa!! %s on %s!!!!!"
+#	Recipient "email1@domain1.net"
+#	Recipient "email2@domain2.com"
+#</Plugin>
+
 #<Plugin ntpd>
 #	Host "localhost"
 #	Port 123
 #	ReverseLookups false
 #</Plugin>
 
 #<Plugin nut>
 #	UPS "upsname@hostname:port"
 #</Plugin>
 
+#<Plugin onewire>
+#	Device "-s localhost:4304"
+#	Sensor "F10FCA000800"
+#	IgnoreSelected false
+#</Plugin>
+
 #<Plugin perl>
 #	IncludeDir "/my/include/path"
 #	BaseName "Collectd::Plugin"
 #	EnableDebugger ""
 #	LoadPlugin foo
 #</Plugin>
 
 #<Plugin ping>
 #	Host "host.foo.bar"
 #	TTL 255
 #</Plugin>
 
+#<Plugin postgresql>
+#	<Query magic>
+#		Query "SELECT magic, spells FROM wizard WHERE host = $1;"
+#		Param hostname
+#		Column gauge magic
+#		Column counter spells
+#	</Query>
+#
+#	<Database foo>
+#		Host "hostname"
+#		Port 5432
+#		User "username"
+#		Password "secret"
+#
+#		SSLMode "prefer"
+#		KRBSrvName "kerberos_service_name"
+#
+#		Query magic
+#	</Database>
+#
+#	<Database bar>
+#		Service "service_name"
+#	</Database>
+#</Plugin>
+
 #<Plugin powerdns>
 #  <Server "server_name">
 #    Collect "latency"
 #    Collect "udp-answers" "udp-queries"
 #    Socket "/var/run/pdns.controlsocket"
 #  </Server>
@@ -313,13 +377,13 @@
 #      Type "ipt_bytes"
 #      Instance "total"
 #    </Match>
 #    <Match>
 #      Regex "\\<R=local_user\\>"
 #      DSType "CounterInc"
-#      Type "counter"
+#      Type "email_count"
 #      Instance "local_user"
 #    </Match>
 #  </File>
 #</Plugin>
 
 #<Plugin tcpconns>
@@ -331,12 +395,18 @@
 #<Plugin teamspeak2>
 #	Host "127.0.0.1"
 #	Port "51234"
 #	Server "8767"
 #</Plugin>
 
+#<Plugin thermal>
+#	ForceUseProcfs false
+#	Device "THRM"
+#	IgnoreSelected false
+#</Plugin>
+
 #<Plugin unixsock>
 #	SocketFile "@prefix@/var/run/@PACKAGE_NAME@-unixsock"
 #	SocketGroup "collectd"
 #	SocketPerms "0660"
 #</Plugin>
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.conf.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.conf.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.conf.pod	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.conf.pod	2008-09-04 21:01:11.000000000 +0800
@@ -27,13 +27,17 @@
 The syntax of this config file is similar to the config file of the famous
 B<Apache Webserver>. Each line contains either a key-value-pair or a
 section-start or -end. Empty lines and everything after the hash-symbol `#' is
 ignored. Values are either string, enclosed in double-quotes,
 (floating-point-)numbers or a boolean expression, i.E<nbsp>e. either B<true> or
 B<false>. String containing of only alphanumeric characters and underscores do
-not need to be quoted.
+not need to be quoted. Lines may be wrapped by using `\' as the last character
+before the newline. This allows long lines to be split into multiple lines.
+Quoted strings may be wrapped as well. However, those are treated special in
+that whitespace at the beginning of the following lines will be ignored, which
+allows for nicely indenting the wrapped lines.
 
 The configuration is read and processed in order, i.E<nbsp>e. from top to
 bottom. So the plugins are loaded in the order listed in this config file. It
 is a good idea to load any logging plugins first in order to catch messages
 from plugins during configuration. Also, the C<LoadPlugin> option B<must> occur
 B<before> the C<E<lt>Plugin ...E<gt>> block.
@@ -229,12 +233,25 @@
 Optional user name needed for authentication.
 
 =item B<Password> I<Password>
 
 Optional password needed for authentication.
 
+=item B<VerifyPeer> B<true|false>
+
+Enable or disable peer SSL certificate verification. See
+L<http://curl.haxx.se/docs/sslcerts.html> for details. Enabled by default.
+
+=item B<VerifyHost> B<true|false>
+
+Enable or disable peer host name verification. If enabled, the plugin checks
+if the C<Common Name> or a C<Subject Alternate Name> field of the SSL
+certificate matches the host name provided by the B<URL> option. If this
+identity check fails, the connection is aborted. Obviously, only works when
+connecting to a SSL enabled server. Enabled by default.
+
 =item B<CACert> I<File>
 
 File that holds one or more SSL certificates. If you want to use HTTPS you will
 possibly need this option. What CA certificates come bundled with C<libcurl>
 and are checked by default depends on the distribution you use.
 
@@ -400,12 +417,85 @@
 The B<Exec> and B<NotificationExec> statements change the semantics of the
 programs executed, i.E<nbsp>e. the data passed to them and the response
 expected from them. This is documented in great detail in L<collectd-exec(5)>.
 
 =back
 
+=head2 Plugin C<filecount>
+
+The C<filecount> plugin counts the number of files in a certain directory (and
+its subdirectories) and their combined size. The configuration is very straight
+forward:
+
+  <Plugin "filecount">
+    <Directory "/var/qmail/queue/mess">
+      Instance "qmail-message"
+    </Directory>
+    <Directory "/var/qmail/queue/todo">
+      Instance "qmail-todo"
+    </Directory>
+    <Directory "/var/lib/php5">
+      Instance "php5-sessions"
+      Name "sess_*"
+    </Directory>
+  </Plugin>
+
+The example above counts the number of files in QMail's queue directories and
+the number of PHP5 sessions. Jfiy: The "todo" queue holds the messages that
+QMail has not yet looked at, the "message" queue holds the messages that were
+classified into "local" and "remote".
+
+As you can see, the configuration consists of one or more C<Directory> blocks,
+each of which specifies a directory in which to count the files. Within those
+blocks, the following options are recognized:
+
+=over 4
+
+=item B<Instance> I<Instance>
+
+Sets the plugin instance to I<Instance>. That instance name must be unique, but
+it's your responsibility, the plugin doesn't check for that. If not given, the
+instance is set to the directory name with all slashes replaced by underscores
+and all leading underscores removed.
+
+=item B<Name> I<Pattern>
+
+Only count files that match I<Pattern>, where I<Pattern> is a shell-like
+wildcard as understood by L<fnmatch(3)>. Only the B<filename> is checked
+against the pattern, not the entire path. In case this makes it easier for you:
+This option has been named after the B<-name> parameter to L<find(1)>.
+
+=item B<MTime> I<Age>
+
+Count only files of a specific age: If I<Age> is greater than zero, only files
+that haven't been touched in the last I<Age> seconds are counted. If I<Age> is
+a negative number, this is inversed. For example, if B<-60> is specified, only
+files that have been modified in the last minute will be counted.
+
+The number can also be followed by a "multiplier" to easily specify a larger
+timespan. When given in this notation, the argument must in quoted, i.E<nbsp>e.
+must be passed as string. So the B<-60> could also be written as B<"-1m"> (one
+minute). Valid multipliers are C<s> (second), C<m> (minute), C<h> (hour), C<d>
+(day), C<w> (week), and C<y> (year). There is no "month" multiplier. You can
+also specify fractional numbers, e.E<nbsp>g. B<"0.5d"> is identical to
+B<"12h">.
+
+=item B<Size> I<Size>
+
+Count only files of a specific size. When I<Size> is a positive number, only
+files that are at least this big are counted. If I<Size> is a negative number,
+this is inversed, i.E<nbsp>e. only files smaller than the absolute value of
+I<Size> are counted.
+
+As with the B<MTime> option, a "multiplier" may be added. For a detailed
+description see above. Valid multipliers here are C<b> (byte), C<k> (kilobyte),
+C<m> (megabyte), C<g> (gigabyte), C<t> (terabyte), and C<p> (petabyte). Please
+note that there are 1000 bytes in a kilobyte, not 1024.
+
+=back
+
 =head2 Plugin C<hddtemp>
 
 To get values from B<hddtemp> collectd connects to B<localhost> (127.0.0.1),
 port B<7634/tcp>. The B<Host> and B<Port> options can be used to change these
 default values, see below. C<hddtemp> has to be running to work correctly. If
 C<hddtemp> is not running timeouts may appear which may interfere with other
@@ -447,13 +537,13 @@
 If no configuration if given, the B<traffic>-plugin will collect data from
 all interfaces. This may not be practical, especially for loopback- and
 similar interfaces. Thus, you can use the B<Interface>-option to pick the
 interfaces you're interested in. Sometimes, however, it's easier/preferred
 to collect all interfaces I<except> a few ones. This option enables you to
 do that: By setting B<IgnoreSelected> to I<true> the effect of
-B<Interface> is inversed: All selected interfaces are ignored and all
+B<Interface> is inverted: All selected interfaces are ignored and all
 other interfaces are collected.
 
 =back
 
 =head2 Plugin C<ipmi>
 
@@ -468,12 +558,26 @@
 If no configuration if given, the B<ipmi> plugin will collect data from all
 sensors found of type "temperature", "voltage", "current" and "fanspeed".
 This option enables you to do that: By setting B<IgnoreSelected> to I<true>
 the effect of B<Sensor> is inverted: All selected sensors are ignored and
 all other sensors are collected.
 
+=item B<NotifySensorAdd> I<true>|I<false>
+
+If a sensor appears after initialization time of a minute a notification
+is sent.
+
+=item B<NotifySensorRemove> I<true>|I<false>
+
+If a sensor disappears a notification is sent.
+
+=item B<NotifySensorNotPresent> I<true>|I<false>
+
+If you have for example dual power supply and one of them is (un)plugged then
+a notification is sent.
+
 =back
 
 =head2 Plugin C<iptables>
 
 =over 4
 
@@ -505,13 +609,13 @@
 
 If no configuration if given, the B<irq>-plugin will collect data from all
 irqs. This may not be practical, especially if no interrupts happen. Thus, you
 can use the B<Irq>-option to pick the interrupt you're interested in.
 Sometimes, however, it's easier/preferred to collect all interrupts I<except> a
 few ones. This option enables you to do that: By setting B<IgnoreSelected> to
-I<true> the effect of B<Irq> is inversed: All selected interrupts are ignored
+I<true> the effect of B<Irq> is inverted: All selected interrupts are ignored
 and all other interrupts are collected.
 
 =back
 
 =head2 Plugin C<libvirt>
 
@@ -662,32 +766,30 @@
 
 The C<mysql plugin> requires B<mysqlclient> to be installed. It connects to the
 database when started and keeps the connection up as long as possible. When the
 connection is interrupted for whatever reason it will try to re-connect. The
 plugin will complaint loudly in case anything goes wrong.
 
-This plugin issues the MySQL C<SHOW STATUS> command and collects information
-about MySQL network traffic, executed statements, requests, the query cache
-and threads by evaluating the C<Bytes_{received,sent}>, C<Com_*>,
-C<Handler_*>, C<Qcache_*> and C<Threads_*> return values. Please refer to the
-B<MySQL reference manual>, I<5.1.6. Server Status Variables> for an
-explanation of these values.
+This plugin issues C<SHOW STATUS> and evaluates C<Bytes_{received,sent}>,
+C<Com_*> and C<Handler_*> which correspond to F<mysql_octets.rrd>,
+F<mysql_commands-*.rrd> and F<mysql_handler-*.rrd>. Also, the values of
+C<Qcache_*> are put in F<mysql_qcache.rrd> and values of C<Threads_*> are put
+in F<mysql_threads.rrd>. Please refer to the B<MySQL reference manual>,
+I<5.2.4. Server Status Variables> for an explanation of these values.
 
 Use the following options to configure the plugin:
 
 =over 4
 
 =item B<Host> I<Hostname>
 
 Hostname of the database server. Defaults to B<localhost>.
 
 =item B<User> I<Username>
 
-Username to use when connecting to the database. The user does not have to be
-granted any privileges (which is synonym to granting the C<USAGE> privilege).
-Any existing MySQL user will do.
+Username to use when connecting to the database.
 
 =item B<Password> I<Password>
 
 Password needed to log into the database.
 
 =item B<Database> I<Database>
@@ -766,13 +868,13 @@
 
 =item B<IgnoreSelected>
 
 The behaviour is the same as with all other similar plugins: If nothing is
 selected at all, everything is collected. If some things are selected using the
 options described above, only these statistics are collected. If you set
-B<IgnoreSelected> to B<true>, this behavior is inversed, i.E<nbsp>e. the
+B<IgnoreSelected> to B<true>, this behavior is inverted, i.E<nbsp>e. the
 specified statistics will not be collected.
 
 =back
 
 =head2 Plugin C<network>
 
@@ -874,12 +976,38 @@
 File that holds one or more SSL certificates. If you want to use HTTPS you will
 possibly need this option. What CA certificates come bundled with C<libcurl>
 and are checked by default depends on the distribution you use.
 
 =back
 
+=head2 Plugin C<notify_desktop>
+
+This plugin sends a desktop notification to a notification daemon, as defined
+in the Desktop Notification Specification. To actually display the
+notifications, B<notification-daemon> is required and B<collectd> has to be
+able to access the X server.
+
+The Desktop Notification Specification can be found at
+L<http://www.galago-project.org/specs/notification/>.
+
+=over 4
+
+=item B<OkayTimeout> I<timeout>
+
+=item B<WarningTimeout> I<timeout>
+
+=item B<FailureTimeout> I<timeout>
+
+Set the I<timeout>, in milliseconds, after which to expire the notification
+for C<OKAY>, C<WARNING> and C<FAILURE> severities respectively. If zero has
+been specified, the displayed notification will not be closed at all - the
+user has to do so herself. These options default to 5000. If a negative number
+has been specified, the default is used as well.
+
+=back
+
 =head2 Plugin C<ntpd>
 
 =over 4
 
 =item B<Host> I<Hostname>
 
@@ -906,12 +1034,74 @@
 
 Add a UPS to collect data from. The format is identical to the one accepted by
 L<upsc(8)>.
 
 =back
 
+=head2 Plugin C<onewire>
+
+B<EXPERIMENTAL!> See notes below.
+
+The C<onewire> plugin uses the B<owcapi> library from the B<owfs> project
+L<http://owfs.org/> to read sensors connected via the onewire bus.
+
+Currently only temperature sensors (sensors with the family code C<10>,
+e.E<nbsp>g. DS1820, DS18S20, DS1920) can be read. If you have other sensors you
+would like to have included, please send a sort request to the mailing list.
+
+Hubs (the DS2409 chips) are working, but read the note, why this plugin is
+experimental, below.
+
+=over 4
+
+=item B<Device> I<Device>
+
+Sets the device to read the values from. This can either be a "real" hardware
+device, such as a serial port or an USB port, or the address of the
+L<owserver(1)> socket, usually B<localhost:4304>.
+
+Though the documentation claims to automatically recognize the given address
+format, with versionE<nbsp>2.7p4 we had to specify the type explicitly. So
+with that version, the following configuration worked for us:
+
+  <Plugin onewire>
+    Device "-s localhost:4304"
+  </Plugin>
+
+This directive is B<required> and does not have a default value.
+
+=item B<Sensor> I<Sensor>
+
+Selects sensors to collect or to ignore, depending on B<IgnoreSelected>, see
+below. Sensors are specified without the family byte at the beginning, to you'd
+use C<F10FCA000800>, and B<not> include the leading C<10.> family byte and
+point.
+
+=item B<IgnoreSelected> I<true>|I<false>
+
+If no configuration if given, the B<onewire> plugin will collect data from all
+sensors found. This may not be practical, especially if sensors are added and
+removed regularly. Sometimes, however, it's easier/preferred to collect only
+specific sensors or all sensors I<except> a few specified ones. This option
+enables you to do that: By setting B<IgnoreSelected> to I<true> the effect of
+B<Sensor> is inverted: All selected interfaces are ignored and all other
+interfaces are collected.
+
+=back
+
+B<EXPERIMENTAL!> The C<onewire> plugin is experimental, because it doesn't yet
+work with big setups. It works with one sensor being attached to one
+controller, but as soon as you throw in a couple more senors and maybe a hub
+or two, reading all values will take more than ten seconds (the default
+interval). We will probably add some separate thread for reading the sensors
+and some cache or something like that, but it's not done yet. We will try to
+maintain backwards compatibility in the future, but we can't probmise. So in
+short: If it works for you: Great! But kaap in mind that the config I<might>
+change, though this is unlikely. Oh, and if you want to help improving this
+plugin, just send a short notice to the mailing list. ThanksE<nbsp>:)
+
 =head2 Plugin C<perl>
 
 This plugin embeds a Perl-interpreter into collectd and provides an interface
 to collectd's plugin system. See L<collectd-perl(5)> for its documentation.
 
 =head2 Plugin C<ping>
@@ -926,12 +1116,247 @@
 =item B<TTL> I<0-255>
 
 Sets the Time-To-Live of generated ICMP packets.
 
 =back
 
+=head2 Plugin C<postgresql>
+
+The C<postgresql> plugin queries statistics from PostgreSQL databases. It
+keeps a persistent connection to all configured databases and tries to
+reconnect if the connection has been interrupted. A database is configured by
+specifying a B<Database> block as described below. The default statistics are
+collected from PostgreSQL's B<statistics collector> which thus has to be
+enabled for this plugin to work correctly. This should usually be the case by
+default. See the section "The Statistics Collector" of the B<PostgreSQL
+Documentation> for details.
+
+By specifying custom database queries using a B<Query> block as described
+below, you may collect any data that is available from some PostgreSQL
+database. This way, you are able to access statistics of external daemons
+which are available in a PostgreSQL database or use future or special
+statistics provided by PostgreSQL without the need to upgrade your collectd
+installation.
+
+The B<PostgreSQL Documentation> manual can be found at
+L<http://www.postgresql.org/docs/manuals/>.
+
+  <Plugin postgresql>
+    <Query magic>
+      Query "SELECT magic, spells FROM wizard WHERE host = $1;"
+      Param hostname
+      Column gauge magic
+      Column counter spells
+    </Query>
+
+    <Database foo>
+      Host "hostname"
+      Port "5432"
+      User "username"
+      Password "secret"
+      SSLMode "prefer"
+      KRBSrvName "kerberos_service_name"
+      Query magic
+    </Database>
+    <Database bar>
+      Service "service_name"
+    </Database>
+  </Plugin>
+
+The B<Query> block defines one database query which may later be used by a
+database definition. It accepts a single mandatory argument which specifies
+the name of the query. The names of all queries have to be unique. The
+following configuration options are available to define the query:
+
+=over 4
+
+=item B<Query> I<sql query>
+
+Specify the I<sql query> which the plugin should execute. The string may
+contain the tokens B<$1>, B<$2>, etc. which are used to reference the first,
+second, etc. parameter. The value of the parameters is specified by the
+B<Param> configuration option - see below for details. To include a literal
+B<$> character followed by a number, surround it with single quotes (B<'>).
+
+Any SQL command which may return data (such as C<SELECT> or C<SHOW>) is
+allowed. Note, however, that only a single command may be used. Semicolons are
+allowed as long as a single non-empty command has been specified only.
+
+=item B<Param> I<hostname>|I<database>|I<username>
+
+Specify the parameters which should be passed to the SQL query. The parameters
+are referred to in the SQL query as B<$1>, B<$2>, etc. in the same order as
+they appear in the configuration file. The value of the parameter is
+determined depending on the value of the B<Param> option as follows:
+
+=over 4
+
+=item I<hostname>
+
+The configured hostname of the database connection. If a UNIX domain socket is
+used, the parameter expands to "localhost".
+
+=item I<database>
+
+The name of the database of the current connection.
+
+=item I<username>
+
+The username used to connect to the database.
+
+=back
+
+Please note that parameters are only supported by PostgreSQL's protocol
+version 3 and above which was introduced in version 7.4 of PostgreSQL.
+
+=item B<Column> I<type> [I<type instance>]
+
+Specify the I<type> and optional I<type instance> used to dispatch the value
+of each result column. Detailed information about types and their
+configuration can be found in L<types.db(5)>. The number and order of the
+B<Column> options has to match the columns of the query result.
+
+=item B<MinPGVersion> I<version>
+
+=item B<MaxPGVersion> I<version>
+
+Specify the minimum or maximum version of PostgreSQL that this query should be
+used with. Some statistics might only be available with certain versions of
+PostgreSQL. This allows you to specify multiple queries with the same name but
+which apply to different versions, thus allowing you to use the same
+configuration in a heterogeneous environment.
+
+The I<version> has to be specified as the concatenation of the major, minor
+and patch-level versions, each represented as two-decimal-digit numbers. For
+example, version 8.2.3 will become 80203.
+
+=back
+
+The following predefined queries are available (the definitions can be found
+in the F<postgresql_default.conf> file which, by default, is available at
+C<I<prefix>/share/collectd/>):
+
+=over 4
+
+=item B<backends>
+
+This query collects the number of backends, i.E<nbsp>e. the number of
+connected clients.
+
+=item B<transactions>
+
+This query collects the numbers of committed and rolled-back transactions of
+the user tables.
+
+=item B<queries>
+
+This query collects the numbers of various table modifications (i.E<nbsp>e.
+insertions, updates, deletions) of the user tables.
+
+=item B<query_plans>
+
+This query collects the numbers of various table scans and returned tuples of
+the user tables.
+
+=item B<table_states>
+
+This query collects the numbers of live and dead rows in the user tables.
+
+=item B<disk_io>
+
+This query collects disk block access counts for user tables.
+
+=item B<disk_usage>
+
+This query collects the on-disk size of the database in bytes.
+
+=back
+
+The B<Database> block defines one PostgreSQL database for which to collect
+statistics. It accepts a single mandatory argument which specifies the
+database name. None of the other options are required. PostgreSQL will use
+default values as documented in the section "CONNECTING TO A DATABASE" in the
+L<psql(1)> manpage. However, be aware that those defaults may be influenced by
+the user collectd is run as and special environment variables. See the manpage
+for details.
+
+=over 4
+
+=item B<Host> I<hostname>
+
+Specify the hostname or IP of the PostgreSQL server to connect to. If the
+value begins with a slash, it is interpreted as the directory name in which to
+look for the UNIX domain socket.
+
+This option is also used to determine the hostname that is associated with a
+collected data set. If it has been omitted or either begins with with a slash
+or equals B<localhost> it will be replaced with the global hostname definition
+of collectd. Any other value will be passed literally to collectd when
+dispatching values. Also see the global B<Hostname> and B<FQDNLookup> options.
+
+=item B<Port> I<port>
+
+Specify the TCP port or the local UNIX domain socket file extension of the
+server.
+
+=item B<User> I<username>
+
+Specify the username to be used when connecting to the server.
+
+=item B<Password> I<password>
+
+Specify the password to be used when connecting to the server.
+
+=item B<SSLMode> I<disable>|I<allow>|I<prefer>|I<require>
+
+Specify whether to use an SSL connection when contacting the server. The
+following modes are supported:
+
+=over 4
+
+=item I<disable>
+
+Do not use SSL at all.
+
+=item I<allow>
+
+First, try to connect without using SSL. If that fails, try using SSL.
+
+=item I<prefer> (default)
+
+First, try to connect using SSL. If that fails, try without using SSL.
+
+=item I<require>
+
+Use SSL only.
+
+=back
+
+=item B<KRBSrvName> I<kerberos_service_name>
+
+Specify the Kerberos service name to use when authenticating with Kerberos 5
+or GSSAPI. See the sections "Kerberos authentication" and "GSSAPI" of the
+B<PostgreSQL Documentation> for details.
+
+=item B<Service> I<service_name>
+
+Specify the PostgreSQL service name to use for additional parameters. That
+service has to be defined in F<pg_service.conf> and holds additional
+connection parameters. See the section "The Connection Service File" in the
+B<PostgreSQL Documentation> for details.
+
+=item B<Query> I<query>
+
+Specify a I<query> which should be executed for the database connection. This
+may be any of the predefined or user-defined queries. If no such option is
+given, it defaults to "backends", "transactions", "queries", "query_plans",
+"table_states", "disk_io" and "disk_usage". Else, the specified queries are
+used only.
+
+=back
+
 =head2 Plugin C<powerdns>
 
 The C<powerdns> plugin queries statistics from an authoritative PowerDNS
 nameserver and/or a PowerDNS recursor. Since both offer a wide variety of
 values, many of which are probably meaningless to most users, but may be useful
 for some. So you may chose which values to collect, but if you don't, some
@@ -1044,15 +1469,15 @@
 
 In this case please file a bug report with the collectd team.
 
 =item B<Socket> I<Path>
 
 Configures the path to the UNIX domain socket to be used when connecting to the
-daemon. By default C<${localstatedir}/run/pdns.controlsocket> will be used for
-an authoritative server and C<${localstatedir}/run/pdns_recursor.controlsocket>
-will be used for the recursor.
+daemon. By default C</var/run/pdns.controlsocket> will be used for an
+authoritative server and C</var/run/pdns_recursor.controlsocket> will be used
+for the recursor.
 
 =back
 
 =item B<LocalSocket> I<Path>
 
 Querying the recursor is done using UDP. When using UDP over UNIX domain
@@ -1130,13 +1555,13 @@
 =item B<XFF> I<Factor>
 
 Set the "XFiles Factor". The default is 0.1. If unsure, don't set this option.
 
 =item B<CacheFlush> I<Seconds>
 
-When the C<rrdtool plugin> uses a cache (by setting B<CacheTimeout>, see below)
+When the C<rrdtool> plugin uses a cache (by setting B<CacheTimeout>, see below)
 it writes all values for a certain RRD-file if the oldest value is older than
 (or equal to) the number of seconds specified. If some RRD-file is not updated
 anymore for some reason (the computer was shut down, the network is broken,
 etc.) some values may still be in the cache. If B<CacheFlush> is set, then the
 entire cache is searched for entries older than B<CacheTimeout> seconds and
 written to disk every I<Seconds> seconds. Since this is kind of expensive and
@@ -1149,12 +1574,36 @@
 If this option is set to a value greater than zero, the C<rrdtool plugin> will
 save values in a cache, as described above. Writing multiple values at once
 reduces IO-operations and thus lessens the load produced by updating the files.
 The trade off is that the graphs kind of "drag behind" and that more memory is
 used.
 
+=item B<WritesPerSecond> B<Updates>
+
+When collecting many statistics with collectd and the C<rrdtool> plugin, you
+will run serious performance problems. The B<CacheFlush> setting and the
+internal update queue assert that collectd continues to work just fine even
+under heavy load, but the system may become very unresponsive and slow. This is
+a problem especially if create graphs from the RRD files on the same machine,
+for example using the C<graph.cgi> script included in the
+C<contrib/collection3/> directory.
+
+This setting is designed for very large setups. Setting this option to a value
+between 25 and 80 updates per second, depending on your hardware, will leave
+the server responsive enough to draw graphs even while all the cached values
+are written to disk. Flushed values, i.E<nbsp>e. values that are forced to disk
+by the B<FLUSH> command, are B<not> effected by this limit. They are still
+written as fast as possible, so that web frontends have up to date data when
+generating graphs.
+
+For example: If you have 100,000 RRD files and set B<WritesPerSecond> to 30
+updates per second, writing all values to disk will take approximately
+56E<nbsp>minutes. Together with the flushing ability that's integrated into
+"collection3" you'll end up with a responsive and fast system, up to date
+graphs and basically a "backup" of your values every hour.
+
 =back
 
 =head2 Plugin C<sensors>
 
 The C<sensors plugin> uses B<lm_sensors> to retrieve sensor-values. This means
 that all the needed modules have to be loaded and lm_sensors has to be
@@ -1177,13 +1626,13 @@
 
 If no configuration if given, the B<sensors>-plugin will collect data from all
 sensors. This may not be practical, especially for uninteresting sensors.
 Thus, you can use the B<Sensor>-option to pick the sensors you're interested
 in. Sometimes, however, it's easier/preferred to collect all sensors I<except> a
 few ones. This option enables you to do that: By setting B<IgnoreSelected> to
-I<true> the effect of B<Sensor> is inversed: All selected sensors are ignored
+I<true> the effect of B<Sensor> is inverted: All selected sensors are ignored
 and all other sensors are collected.
 
 =back
 
 =head2 Plugin C<snmp>
 
@@ -1380,12 +1829,38 @@
 connections a mail server or news server has to other mail or news servers, or
 how many connections a web proxy holds to web servers. You have to give the
 port in numeric form.
 
 =back
 
+=head2 Plugin C<thermal>
+
+=over 4
+
+=item B<ForceUseProcfs> I<true>|I<false>
+
+By default, the C<thermal> plugin tries to read the statistics from the Linux
+C<sysfs> interface. If that is not available, the plugin falls back to the
+C<procfs> interface. By setting this option to I<true>, you can force the
+plugin to use the latter. This option defaults to I<false>.
+
+=item B<Device> I<Device>
+
+Selects the name of the thermal device that you want to collect or ignore,
+depending on the value of the B<IgnoreSelected> option. This option may be
+used multiple times to specify a list of devices.
+
+=item B<IgnoreSelected> I<true>|I<false>
+
+Invert the selection: If set to true, all devices B<except> the ones that
+match the device names specified by the B<Device> option are collected. By
+default only selected devices are collected if a selection is made. If no
+selection is configured at all, B<all> devices are selected.
+
+=back
+
 =head2 Plugin C<unixsock>
 
 =over 4
 
 =item B<SocketFile> I<Path>
 
@@ -1494,15 +1969,12 @@
 "interesting". As a consequence collectd will issue a notification if they are
 not received for twice the last timeout of the values. If, for example, some
 hosts sends it's CPU statistics to the server every 60 seconds, a notification
 will be dispatched after about 120 seconds. It may take a little longer because
 the timeout is checked only once each B<Interval> on the server.
 
-When a value comes within range again or is received after it was missing, an
-"OKAY-notification" is dispatched.
-
 Here is a configuration example to get you started. Read below for more
 information.
 
  <Threshold>
    <Type "foo">
      WarningMin    0.00
@@ -1607,12 +2079,13 @@
 L<collectd-perl(5)>,
 L<collectd-unixsock(5)>,
 L<types.db(5)>,
 L<hddtemp(8)>,
 L<kstat(3KSTAT)>,
 L<mbmon(1)>,
+L<psql(1)>,
 L<rrdtool(1)>,
 L<sensors(1)>
 
 =head1 AUTHOR
 
 Florian Forster E<lt>octo@verplant.orgE<gt>
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-email.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-email.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-email.5	2008-10-17 04:46:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-email.5	2008-09-05 16:58:51.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.18 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EMAIL 5"
-.TH COLLECTD-EMAIL 5 "2007-10-24" "4.5.1" "collectd"
+.TH COLLECTD-EMAIL 5 "2007-10-24" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-email \- Documentation of collectd's \f(CW\*(C`email plugin\*(C'\fR
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-exec.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-exec.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-exec.5	2009-01-03 05:21:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-exec.5	2008-09-05 16:58:51.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-EXEC 5"
-.TH COLLECTD-EXEC 5 "2009-01-02" "4.4.5" "collectd"
+.TH COLLECTD-EXEC 5 "2008-09-04" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-exec \- Documentation of collectd's \f(CW\*(C`exec plugin\*(C'\fR
@@ -202,13 +210,14 @@
 (i.\ e. data-set) passed to collectd. A large list of predefined
 data-sets is available in the \fBtypes.db\fR file. See \fItypes.db\fR\|(5) for a
 description of the format of this file.
 .Sp
 The \fIOptionList\fR is an optional list of \fIOptions\fR, where each option if a
 key-value-pair. A list of currently understood options can be found below, all
-other options will be ignored.
+other options will be ignored. Values that contain spaces must be quoted with
+double quotes.
 .Sp
 \&\fIValuelist\fR is a colon-separated list of the time and the values, each either
 an integer if the data-source is a counter, or a double if the data-source is
 of type \*(L"gauge\*(R". You can submit an undefined gauge-value by using \fBU\fR. When
 submitting \fBU\fR to a counter the behavior is undefined. The time is given as
 epoch (i.\ e. standard \s-1UNIX\s0 time).
@@ -254,16 +263,15 @@
 .Sp
 Valid options are:
 .RS 4
 .IP "\fBmessage=\fR\fIMessage\fR (\fB\s-1REQUIRED\s0\fR)" 4
 .IX Item "message=Message (REQUIRED)"
 Sets the message of the notification. This is the message that will be made
-accessible to the user, so it should contain some useful information. This
-option must be the last option because the rest of the line will be its value,
-even if there are spaces and equal-signs following it! This option is
-mandatory.
+accessible to the user, so it should contain some useful information. As with
+all options: If the message includes spaces, it must be quoted with double
+quotes. This option is mandatory.
 .IP "\fBseverity=failure\fR|\fBwarning\fR|\fBokay\fR (\fB\s-1REQUIRED\s0\fR)" 4
 .IX Item "severity=failure|warning|okay (REQUIRED)"
 Sets the severity of the notification. This option is mandatory.
 .IP "\fBtime=\fR\fITime\fR (\fB\s-1REQUIRED\s0\fR)" 4
 .IX Item "time=Time (REQUIRED)"
 Sets the time of the notification. The time is given as \*(L"epoch\*(R", i.\ e. as
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-exec.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-exec.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-exec.pod	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-exec.pod	2008-09-04 21:01:11.000000000 +0800
@@ -82,13 +82,14 @@
 (i.E<nbsp>e. data-set) passed to collectd. A large list of predefined
 data-sets is available in the B<types.db> file. See L<types.db(5)> for a
 description of the format of this file.
 
 The I<OptionList> is an optional list of I<Options>, where each option if a
 key-value-pair. A list of currently understood options can be found below, all
-other options will be ignored.
+other options will be ignored. Values that contain spaces must be quoted with
+double quotes.
 
 I<Valuelist> is a colon-separated list of the time and the values, each either
 an integer if the data-source is a counter, or a double if the data-source is
 of type "gauge". You can submit an undefined gauge-value by using B<U>. When
 submitting B<U> to a counter the behavior is undefined. The time is given as
 epoch (i.E<nbsp>e. standard UNIX time).
@@ -136,16 +137,15 @@
 
 =over 4
 
 =item B<message=>I<Message> (B<REQUIRED>)
 
 Sets the message of the notification. This is the message that will be made
-accessible to the user, so it should contain some useful information. This
-option must be the last option because the rest of the line will be its value,
-even if there are spaces and equal-signs following it! This option is
-mandatory.
+accessible to the user, so it should contain some useful information. As with
+all options: If the message includes spaces, it must be quoted with double
+quotes. This option is mandatory.
 
 =item B<severity=failure>|B<warning>|B<okay> (B<REQUIRED>)
 
 Sets the severity of the notification. This option is mandatory.
 
 =item B<time=>I<Time> (B<REQUIRED>)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd.h	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd.h	2008-09-04 21:01:12.000000000 +0800
@@ -53,12 +53,15 @@
 #if HAVE_INTTYPES_H
 # include <inttypes.h>
 #endif
 #if HAVE_STDINT_H
 # include <stdint.h>
 #endif
+#if HAVE_STDBOOL_H
+# include <stdbool.h>
+#endif
 #if HAVE_UNISTD_H
 # include <unistd.h>
 #endif
 #if HAVE_SYS_WAIT_H
 # include <sys/wait.h>
 #endif
@@ -233,35 +236,39 @@
 #endif
 
 #ifndef PLUGINDIR
 #define PLUGINDIR PREFIX "/lib/" PACKAGE_NAME
 #endif
 
+#ifndef PKGDATADIR
+#define PKGDATADIR PREFIX "/share/" PACKAGE_NAME
+#endif
+
 #ifndef COLLECTD_GRP_NAME
 # define COLLECTD_GRP_NAME "collectd"
 #endif
 
 #define STATIC_ARRAY_LEN(array) (sizeof (array) / sizeof ((array)[0]))
 
 /* Remove GNU specific __attribute__ settings when using another compiler */
 #if !__GNUC__
 # define __attribute__(x) /**/
 #endif
 
-#if defined(COLLECT_DEBUG) && COLLECT_DEBUG && defined(__GNUC__) && __GNUC__
+#if __GNUC__
 # pragma GCC poison strcpy strcat strtok
 #endif
 
 /* 
  * Special hack for the perl plugin: Because the later included perl.h defines
  * a macro which is never used, but contains `sprintf', we cannot poison that
  * identifies just yet. The parl plugin will do that itself once perl.h is
  * included.
  */
 #ifndef DONT_POISON_SPRINTF_YET
-# if defined(COLLECT_DEBUG) && COLLECT_DEBUG && defined(__GNUC__) && __GNUC__
+# if __GNUC__
 #  pragma GCC poison sprintf
 # endif
 #endif
 
 extern char hostname_g[];
 extern int  interval_g;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectdmon.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectdmon.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectdmon.1	2008-10-17 04:46:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectdmon.1	2008-09-05 16:58:53.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.18 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTDMON 1"
-.TH COLLECTDMON 1 "2008-05-06" "4.5.1" "collectd"
+.TH COLLECTDMON 1 "2008-05-06" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectdmon \- Monitoring daemon for collectd
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectdmon.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectdmon.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectdmon.c	2008-11-25 21:04:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectdmon.c	2008-05-06 20:30:12.000000000 +0800
@@ -328,12 +328,18 @@
 
 	if (0 != sigaction (SIGHUP, &sa, NULL)) {
 		syslog (LOG_ERR, "Error: sigaction() failed: %s", strerror (errno));
 		return 1;
 	}
 
+	sigaddset (&sa.sa_mask, SIGCHLD);
+	if (0 != sigprocmask (SIG_BLOCK, &sa.sa_mask, NULL)) {
+		syslog (LOG_ERR, "Error: sigprocmask() failed: %s", strerror (errno));
+		return 1;
+	}
+
 	while (0 == loop) {
 		int status = 0;
 
 		if (0 != collectd_start (collectd_argv)) {
 			syslog (LOG_ERR, "Error: failed to start collectd.");
 			break;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-nagios.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-nagios.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-nagios.1	2009-01-03 05:21:18.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-nagios.1	2008-09-05 16:58:50.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-NAGIOS 1"
-.TH COLLECTD-NAGIOS 1 "2009-01-02" "4.4.5" "collectd"
+.TH COLLECTD-NAGIOS 1 "2007-10-27" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-nagios \- Nagios plugin for querying collectd
@@ -162,13 +170,13 @@
 Each \fIvalue_spec\fR may be made of multiple \*(L"data sources\*(R". With this option you
 can select one or more data sources. To select multiple data sources simply
 specify this option again. If multiple data sources are examined they are
 handled according to the consolidation function given with the \fB\-g\fR option.
 .IP "\fB\-g\fR \fBnone\fR\fI|\fR\fBaverage\fR\fI|\fR\fBsum\fR" 4
 .IX Item "-g none|average|sum"
-When multiple data sources are selected from a value spec, they can be handled
+When multiple data sources are selected from a value spec they can be handled
 differently depending on this option. The values of the following meaning:
 .RS 4
 .IP "\fBnone\fR" 4
 .IX Item "none"
 No consolidation if done and the warning and critical regions are applied to
 each value independently.
@@ -186,35 +194,25 @@
 .PD 0
 .IP "\fB\-w\fR \fIrange\fR" 4
 .IX Item "-w range"
 .PD
 Set the critical (\fB\-c\fR) and warning (\fB\-w\fR) ranges. These options mostly
 follow the normal syntax of Nagios plugins. The general format is
-"\fImin\fR\fB:\fR\fImax\fR". If a value is smaller than \fImin\fR or bigger than \fImax\fR, a
-\&\fIwarning\fR or \fIcritical\fR status is returned, otherwise the status is
-\&\fIsuccess\fR.
-.Sp
-The tilde sign (\fB~\fR) can be used to explicitly specify infinity. If \fB~\fR is
-used as a \fImin\fR value, negative infinity is used. In case of \fImax\fR, it is
-interpreted as positive infinity.
-.Sp
-If the first character of the \fIrange\fR is the at\ sign (\fB@\fR), the meaning
-of the range will be inverted. I.\ e. all values \fIwithin\fR the range will
-yield a \fIwarning\fR or \fIcritical\fR status, while all values \fIoutside\fR the range
-will result in a \fIsuccess\fR status.
-.Sp
-\&\fImin\fR (and the colon) may be omitted,
-\&\fImin\fR is then assumed to be zero. If \fImax\fR (but not the trailing colon) is
-omitted, \fImax\fR is assumed to be positive infinity.
+"\fImin\fR\fB:\fR\fImax\fR". If a value if smaller than \fImin\fR or bigger than \fImax\fR a
+warning or critical is returned, otherwise okay is returned. \fImin\fR (and the
+colon) may be omitted and are then assumed to be zero. If \fImax\fR (but not the
+colon) is omitted \fImax\fR is set to positive infinity. If either \fImin\fR or
+\&\fImax\fR if set to \fB~\fR they are set to negative and positive infinity,
+respectively.
 .SH "RETURN VALUE"
 .IX Header "RETURN VALUE"
-As usual for Nagios plugins, this program writes a short, one line status
+As usual for Nagios plugins this program writes a short, one line status
 message to \s-1STDOUT\s0 and signals success or failure with it's return value. It
-exits with a return value of \fB0\fR for \fIsuccess\fR, \fB1\fR for \fIwarning\fR and \fB2\fR
-for \fIcritical\fR. If the values are not available or some other error occurred,
-it returns \fB3\fR for \fIunknown\fR.
+exists with a return value of \fB0\fR for success or \fB1\fR or \fB2\fR for warning and
+critical, respectively. If the values is not available or some other error
+occurred it returns \fB3\fR for \*(L"unknown\*(R".
 .SH "SEE ALSO"
 .IX Header "SEE ALSO"
 \&\fIcollectd\fR\|(1),
 \&\fIcollectd.conf\fR\|(5),
 \&\fIcollectd\-unixsock\fR\|(5),
 <http://nagios.org/>
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-nagios.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-nagios.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-nagios.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-nagios.c	2008-09-04 21:00:54.000000000 +0800
@@ -147,13 +147,12 @@
 
 	int values_num;
 	double *values;
 	char **values_names;
 
 	int i;
-	int j;
 
 	fd = socket (PF_UNIX, SOCK_STREAM, 0);
 	if (fd < 0)
 	{
 		fprintf (stderr, "socket failed: %s\n",
 				strerror (errno));
@@ -227,64 +226,37 @@
 	{
 		fprintf (stderr, "malloc failed: %s\n",
 				strerror (errno));
 		free (values);
 		return (-1);
 	}
-	memset (values_names, 0, values_num * sizeof (char *));
 
-	i = 0; /* index of the values returned by the server */
-	j = 0; /* number of values in `values_names' and `values' */
+	i = 0;
 	while (fgets (buffer, sizeof (buffer), fh_in) != NULL)
 	{
-		do /* while (0) */
-		{
-			char *key;
-			char *value;
-			char *endptr;
-
-			key = buffer;
-
-			value = strchr (key, '=');
-			if (value == NULL)
-			{
-				fprintf (stderr, "Cannot parse line: %s\n", buffer);
-				break;
-			}
-			*value = 0;
-			value++;
-
-			if (ignore_ds (key) != 0)
-				break;
-
-			endptr = NULL;
-			errno = 0;
-			values[j] = strtod (value, &endptr);
-			if ((endptr == value) || (errno != 0))
-			{
-				fprintf (stderr, "Could not parse buffer "
-						"as number: %s\n", value);
-				break;
-			}
-
-			values_names[j] = strdup (key);
-			if (values_names[j] == NULL)
-			{
-				fprintf (stderr, "strdup failed.\n");
-				break;
-			}
-			j++;
-		} while (0);
+		char *key;
+		char *value;
+
+		key = buffer;
+
+		value = strchr (key, '=');
+		if (value == NULL)
+			continue;
+		*value = '\0'; value++;
+
+		if (ignore_ds (key) != 0)
+			continue;
+
+		values_names[i] = strdup (key);
+		values[i] = atof (value);
 
 		i++;
 		if (i >= values_num)
 			break;
 	}
-	/* Set `values_num' to the number of values actually stored in the
-	 * array. */
-	values_num = j;
+	values_num = i;
 
 	fclose (fh_in); fh_in = NULL; fd = -1;
 	fclose (fh_out); fh_out = NULL;
 
 	*ret_values_num = values_num;
 	*ret_values = values;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-nagios.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-nagios.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-nagios.pod	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-nagios.pod	2007-10-27 16:57:24.000000000 +0800
@@ -42,13 +42,13 @@
 can select one or more data sources. To select multiple data sources simply
 specify this option again. If multiple data sources are examined they are
 handled according to the consolidation function given with the B<-g> option.
 
 =item B<-g> B<none>I<|>B<average>I<|>B<sum>
 
-When multiple data sources are selected from a value spec, they can be handled
+When multiple data sources are selected from a value spec they can be handled
 differently depending on this option. The values of the following meaning:
 
 =over 4
 
 =item B<none>
 
@@ -68,38 +68,28 @@
 =item B<-c> I<range>
 
 =item B<-w> I<range>
 
 Set the critical (B<-c>) and warning (B<-w>) ranges. These options mostly
 follow the normal syntax of Nagios plugins. The general format is
-"I<min>B<:>I<max>". If a value is smaller than I<min> or bigger than I<max>, a
-I<warning> or I<critical> status is returned, otherwise the status is
-I<success>.
-
-The tilde sign (B<~>) can be used to explicitly specify infinity. If B<~> is
-used as a I<min> value, negative infinity is used. In case of I<max>, it is
-interpreted as positive infinity.
-
-If the first character of the I<range> is the atE<nbsp>sign (B<@>), the meaning
-of the range will be inverted. I.E<nbsp>e. all values I<within> the range will
-yield a I<warning> or I<critical> status, while all values I<outside> the range
-will result in a I<success> status.
-
-I<min> (and the colon) may be omitted,
-I<min> is then assumed to be zero. If I<max> (but not the trailing colon) is
-omitted, I<max> is assumed to be positive infinity.
+"I<min>B<:>I<max>". If a value if smaller than I<min> or bigger than I<max> a
+warning or critical is returned, otherwise okay is returned. I<min> (and the
+colon) may be omitted and are then assumed to be zero. If I<max> (but not the
+colon) is omitted I<max> is set to positive infinity. If either I<min> or
+I<max> if set to B<~> they are set to negative and positive infinity,
+respectively.
 
 =back
 
 =head1 RETURN VALUE
 
-As usual for Nagios plugins, this program writes a short, one line status
+As usual for Nagios plugins this program writes a short, one line status
 message to STDOUT and signals success or failure with it's return value. It
-exits with a return value of B<0> for I<success>, B<1> for I<warning> and B<2>
-for I<critical>. If the values are not available or some other error occurred,
-it returns B<3> for I<unknown>. 
+exists with a return value of B<0> for success or B<1> or B<2> for warning and
+critical, respectively. If the values is not available or some other error
+occurred it returns B<3> for "unknown". 
 
 =head1 SEE ALSO
 
 L<collectd(1)>,
 L<collectd.conf(5)>,
 L<collectd-unixsock(5)>,
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-perl.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-perl.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-perl.5	2009-01-03 05:21:19.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-perl.5	2008-09-05 16:58:52.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,29 +129,33 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-PERL 5"
-.TH COLLECTD-PERL 5 "2009-01-02" "4.4.5" "collectd"
+.TH COLLECTD-PERL 5 "2008-09-04" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-perl \- Documentation of collectd's \f(CW\*(C`perl plugin\*(C'\fR
 .SH "SYNOPSIS"
 .IX Header "SYNOPSIS"
-.Vb 8
+.Vb 7
 \&  LoadPlugin perl
 \&  # ...
 \&  <Plugin perl>
 \&    IncludeDir "/path/to/perl/plugins"
 \&    BaseName "Collectd::Plugin"
 \&    EnableDebugger ""
 \&    LoadPlugin "FooBar"
+\&
+\&    <Plugin FooBar>
+\&      Foo "Bar"
+\&    </Plugin>
 \&  </Plugin>
 .Ve
 .SH "DESCRIPTION"
 .IX Header "DESCRIPTION"
 The \f(CW\*(C`perl plugin\*(C'\fR embeds a Perl-interpreter into collectd and provides an
 interface to collectd's plugin system. This makes it possible to write plugins
@@ -158,12 +170,21 @@
 do in a Perl program. As a side effect, the first occurrence of this option
 causes the Perl-interpreter to be initialized.
 .IP "\fBBaseName\fR \fIName\fR" 4
 .IX Item "BaseName Name"
 Prepends \fIName\fR\fB::\fR to all plugin names loaded after this option. This is
 provided for convenience to keep plugin names short.
+.IP "<\fBPlugin\fR \fIName\fR> block" 4
+.IX Item "<Plugin Name> block"
+This block may be used to pass on configuration settings to a Perl plugin. The
+configuration is converted into a config-item data type which is passed to the
+registered configuration callback. See below for details about the config-item
+data type and how to register callbacks.
+.Sp
+The \fIname\fR identifies the callback. It is used literally and independent of
+the \fBBaseName\fR setting.
 .IP "\fBEnableDebugger\fR \fIPackage\fR[=\fIoption\fR,...]" 4
 .IX Item "EnableDebugger Package[=option,...]"
 Run collectd under the control of the Perl source debugger. If \fIPackage\fR is
 not the empty string, control is passed to the debugging, profiling, or
 tracing module installed as Devel::\fIPackage\fR. A comma-separated list of
 options may be specified after the \*(L"=\*(R" character. Please note that you may not
@@ -186,12 +207,18 @@
 \&\fBdispatch functions\fR which call the appropriate \fBcallback functions\fR
 registered by the plugins. Any plugin basically consists of the implementation
 of these callback functions and initializing code which registers the
 functions with collectd. See the section \*(L"\s-1EXAMPLES\s0\*(R" below for a really basic
 example. The following types of \fBcallback functions\fR are known to collectd
 (all of them are optional):
+.IP "configuration functions" 4
+.IX Item "configuration functions"
+This type of functions is called during configuration if an appropriate
+\&\fBPlugin\fR block has been encountered. It is called once for each \fBPlugin\fR
+block which matches the name of the callback as provided with the
+\&\fBplugin_register\fR method \- see below.
 .IP "init functions" 4
 .IX Item "init functions"
 This type of functions is called once after loading the module and before any
 calls to the read and write functions. It should be used to initialize the
 internal state of the plugin (e.\ g. open sockets, ...). If the return
 value evaluates to \fBfalse\fR, the plugin will be disabled.
@@ -243,12 +270,26 @@
 an appropriate \fBLoadPlugin\fR option to the configuration file. After
 restarting collectd you're done.
 .SH "DATA TYPES"
 .IX Header "DATA TYPES"
 The following complex types are used to pass values between the Perl plugin
 and collectd:
+.IP "Config-Item" 4
+.IX Item "Config-Item"
+A config-item is one structure which keeps the informations provided in the
+configuration file. The array of children keeps one entry for each
+configuration option. Each such entry is another config-item structure, which
+may nest further if nested blocks are used.
+.Sp
+.Vb 5
+\&  {
+\&    key      => key,
+\&    values   => [ val1, val2, ... ],
+\&    children => [ { ... }, { ... }, ... ]
+\&  }
+.Ve
 .IP "Data-Set" 4
 .IX Item "Data-Set"
 A data-set is a list of one or more data-sources. Each data-source defines a
 name, type, min\- and max-value and the data-set wraps them up into one
 structure. The general layout looks like this:
 .Sp
@@ -265,18 +306,19 @@
 A value-list is one structure which features an array of values and fields to
 identify the values, i.\ e. time and host, plugin name and
 plugin-instance as well as a type and type-instance. Since the \*(L"type\*(R" is not
 included in the value-list but is passed as an extra argument, the general
 layout looks like this:
 .Sp
-.Vb 8
+.Vb 9
 \&  {
 \&    values => [123, 0.5],
 \&    time   => time (),
 \&    host   => $hostname_g,
 \&    plugin => \*(Aqmyplugin\*(Aq,
+\&    type   => \*(Aqmyplugin\*(Aq,
 \&    plugin_instance => \*(Aq\*(Aq,
 \&    type_instance   => \*(Aq\*(Aq
 \&  }
 .Ve
 .IP "Notification" 4
 .IX Item "Notification"
@@ -302,15 +344,17 @@
 .IP "\fBplugin_register\fR (\fItype\fR, \fIname\fR, \fIdata\fR)" 4
 .IX Item "plugin_register (type, name, data)"
 Registers a callback-function or data-set.
 .Sp
 \&\fItype\fR can be one of:
 .RS 4
+.IP "\s-1TYPE_CONFIG\s0" 4
+.IX Item "TYPE_CONFIG"
+.PD 0
 .IP "\s-1TYPE_INIT\s0" 4
 .IX Item "TYPE_INIT"
-.PD 0
 .IP "\s-1TYPE_READ\s0" 4
 .IX Item "TYPE_READ"
 .IP "\s-1TYPE_WRITE\s0" 4
 .IX Item "TYPE_WRITE"
 .IP "\s-1TYPE_FLUSH\s0" 4
 .IX Item "TYPE_FLUSH"
@@ -346,12 +390,16 @@
 pointer instead) because Perl does not support to share references to
 subroutines between threads.
 .Sp
 These functions are called in the various stages of the daemon (see the
 section \*(L"\s-1WRITING\s0 \s-1YOUR\s0 \s-1OWN\s0 \s-1PLUGINS\s0\*(R" above) and are passed the following
 arguments:
+.IP "\s-1TYPE_CONFIG\s0" 4
+.IX Item "TYPE_CONFIG"
+The only argument passed is \fIconfig-item\fR. See above for the layout of this
+data type.
 .IP "\s-1TYPE_INIT\s0" 4
 .IX Item "TYPE_INIT"
 .PD 0
 .IP "\s-1TYPE_READ\s0" 4
 .IX Item "TYPE_READ"
 .IP "\s-1TYPE_SHUTDOWN\s0" 4
@@ -361,14 +409,15 @@
 .IP "\s-1TYPE_WRITE\s0" 4
 .IX Item "TYPE_WRITE"
 The arguments passed are \fItype\fR, \fIdata-set\fR, and \fIvalue-list\fR. \fItype\fR is a
 string. For the layout of \fIdata-set\fR and \fIvalue-list\fR see above.
 .IP "\s-1TYPE_FLUSH\s0" 4
 .IX Item "TYPE_FLUSH"
-The only argument passed is \fItimeout\fR which indicates that only data older
-than \fItimeout\fR seconds is to be flushed.
+The arguments passed are \fItimeout\fR and \fIidentifier\fR. \fItimeout\fR indicates
+that only data older than \fItimeout\fR seconds is to be flushed. \fIidentifier\fR
+specifies which values are to be flushed.
 .IP "\s-1TYPE_LOG\s0" 4
 .IX Item "TYPE_LOG"
 The arguments are \fIlog-level\fR and \fImessage\fR. The log level is small for
 important messages and high for less important messages. The least important
 level is \fB\s-1LOG_DEBUG\s0\fR, the most important level is \fB\s-1LOG_ERR\s0\fR. In between there
 are (from least to most important): \fB\s-1LOG_INFO\s0\fR, \fB\s-1LOG_NOTICE\s0\fR, and
@@ -381,31 +430,47 @@
 .RS 4
 .RE
 .IP "\fBplugin_unregister\fR (\fItype\fR, \fIplugin\fR)" 4
 .IX Item "plugin_unregister (type, plugin)"
 Removes a callback or data-set from collectd's internal list of
 functions\ / datasets.
-.IP "\fBplugin_dispatch_values\fR (\fItype\fR, \fIvalue-list\fR)" 4
-.IX Item "plugin_dispatch_values (type, value-list)"
-Submits a \fIvalue-list\fR of type \fItype\fR to the daemon. If the data-set \fItype\fR
+.IP "\fBplugin_dispatch_values\fR (\fIvalue-list\fR)" 4
+.IX Item "plugin_dispatch_values (value-list)"
+Submits a \fIvalue-list\fR to the daemon. If the data-set identified by
+\&\fIvalue-list\fR\->{\fItype\fR}
 is found (and the number of values matches the number of data-sources) then the
 type, data-set and value-list is passed to all write-callbacks that are
 registered with the daemon.
-.IP "\fBplugin_flush\fR ([\fBtimeout\fR => \fItimeout\fR,] [\fBplugins\fR => \fI...\fR])" 4
-.IX Item "plugin_flush ([timeout => timeout,] [plugins => ...])"
-Flush one or more plugins. \fItimeout\fR is passed on to the registered
-flush-callbacks. If omitted, \f(CW\*(C`\-1\*(C'\fR is used. If the \fIplugins\fR argument has
-been specified, only named plugins will be flushed. The argument's value may
-either be a string or a reference to an array of strings.
+.Sp
+\&\fBNote\fR: Prior to version 4.4 of collectd, the data-set type used to be passed
+as the first argument to \fBplugin_register\fR. This syntax is still supported
+for backwards compatibility but has been deprecated and will be removed in
+some future version of collectd.
+.IP "\fBplugin_flush\fR ([\fBtimeout\fR => \fItimeout\fR][, \fBplugins\fR => \fI...\fR][, \fBidentifiers\fR => \fI...\fR])" 4
+.IX Item "plugin_flush ([timeout => timeout][, plugins => ...][, identifiers => ...])"
+Flush one or more plugins. \fItimeout\fR and the specified \fIidentifiers\fR are
+passed on to the registered flush-callbacks. If omitted, the timeout defaults
+to \f(CW\*(C`\-1\*(C'\fR. The identifier defaults to the undefined value. If the \fIplugins\fR
+argument has been specified, only named plugins will be flushed. The value of
+the \fBplugins\fR and \fBidentifiers\fR arguments may either be a string or a
+reference to an array of strings.
 .IP "\fBplugin_flush_one\fR (\fItimeout\fR, \fIplugin\fR)" 4
 .IX Item "plugin_flush_one (timeout, plugin)"
 This is identical to using "plugin_flush (timeout => \fItimeout\fR, plugins
 => \fIplugin\fR".
+.Sp
+\&\fBNote\fR: Starting with version 4.5 of collectd, \fBplugin_flush_one\fR has been
+deprecated and will be removed in some future version of collectd. Use
+\&\fBplugin_flush\fR instead.
 .IP "\fBplugin_flush_all\fR (\fItimeout\fR)" 4
 .IX Item "plugin_flush_all (timeout)"
 This is identical to using "plugin_flush (timeout => \fItimeout\fR)".
+.Sp
+\&\fBNote\fR: Starting with version 4.5 of collectd, \fBplugin_flush_all\fR has been
+deprecated and will be removed in some future version of collectd. Use
+\&\fBplugin_flush\fR instead.
 .IP "\fBplugin_dispatch_notification\fR (\fInotification\fR)" 4
 .IX Item "plugin_dispatch_notification (notification)"
 Submits a \fInotification\fR to the daemon which will then pass it to all
 notification-callbacks that are registered.
 .IP "\fBplugin_log\fR (\fIlog-level\fR, \fImessage\fR)" 4
 .IX Item "plugin_log (log-level, message)"
@@ -457,24 +522,28 @@
 .RE
 .RS 4
 .RE
 .IP "\fB:types\fR" 4
 .IX Item ":types"
 .RS 4
+.IP "\fB\s-1TYPE_CONFIG\s0\fR" 4
+.IX Item "TYPE_CONFIG"
 .IP "\fB\s-1TYPE_INIT\s0\fR" 4
 .IX Item "TYPE_INIT"
 .IP "\fB\s-1TYPE_READ\s0\fR" 4
 .IX Item "TYPE_READ"
 .IP "\fB\s-1TYPE_WRITE\s0\fR" 4
 .IX Item "TYPE_WRITE"
 .IP "\fB\s-1TYPE_FLUSH\s0\fR" 4
 .IX Item "TYPE_FLUSH"
 .IP "\fB\s-1TYPE_SHUTDOWN\s0\fR" 4
 .IX Item "TYPE_SHUTDOWN"
 .IP "\fB\s-1TYPE_LOG\s0\fR" 4
 .IX Item "TYPE_LOG"
+.IP "\fB\s-1TYPE_DATASET\s0\fR" 4
+.IX Item "TYPE_DATASET"
 .RE
 .RS 4
 .RE
 .IP "\fB:ds_types\fR" 4
 .IX Item ":ds_types"
 .RS 4
@@ -614,12 +683,18 @@
 across different threads.
 .IP "\(bu" 4
 Each plugin is usually only loaded once and kept in memory for performance
 reasons. Therefore, \s-1END\s0 blocks are only executed once when collectd shuts
 down. You should not rely on \s-1END\s0 blocks anyway \- use \fBshutdown functions\fR
 instead.
+.IP "\(bu" 4
+The perl plugin exports the internal \s-1API\s0 of collectd which is considered
+unstable and subject to change at any time. We try hard to not break backwards
+compatibility in the Perl \s-1API\s0 during the life cycle of one major release.
+However, this cannot be guaranteed at all times. Watch out for warnings
+dispatched by the perl plugin after upgrades.
 .SH "KNOWN BUGS"
 .IX Header "KNOWN BUGS"
 .IP "\(bu" 4
 Currently, it is not possible to flush a single Perl plugin only. You can
 either flush all Perl plugins or none at all and you have to use \f(CW\*(C`perl\*(C'\fR as
 plugin name when doing so.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-perl.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-perl.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-perl.pod	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-perl.pod	2008-09-04 21:01:11.000000000 +0800
@@ -8,12 +8,16 @@
   # ...
   <Plugin perl>
     IncludeDir "/path/to/perl/plugins"
     BaseName "Collectd::Plugin"
     EnableDebugger ""
     LoadPlugin "FooBar"
+
+    <Plugin FooBar>
+      Foo "Bar"
+    </Plugin>
   </Plugin>
 
 =head1 DESCRIPTION
 
 The C<perl plugin> embeds a Perl-interpreter into collectd and provides an
 interface to collectd's plugin system. This makes it possible to write plugins
@@ -33,12 +37,22 @@
 
 =item B<BaseName> I<Name>
 
 Prepends I<Name>B<::> to all plugin names loaded after this option. This is
 provided for convenience to keep plugin names short.
 
+=item E<lt>B<Plugin> I<Name>E<gt> block
+
+This block may be used to pass on configuration settings to a Perl plugin. The
+configuration is converted into a config-item data type which is passed to the
+registered configuration callback. See below for details about the config-item
+data type and how to register callbacks.
+
+The I<name> identifies the callback. It is used literally and independent of
+the B<BaseName> setting.
+
 =item B<EnableDebugger> I<Package>[=I<option>,...]
 
 Run collectd under the control of the Perl source debugger. If I<Package> is
 not the empty string, control is passed to the debugging, profiling, or
 tracing module installed as Devel::I<Package>. A comma-separated list of
 options may be specified after the "=" character. Please note that you may not
@@ -68,12 +82,19 @@
 functions with collectd. See the section "EXAMPLES" below for a really basic
 example. The following types of B<callback functions> are known to collectd
 (all of them are optional):
 
 =over 4
 
+=item configuration functions
+
+This type of functions is called during configuration if an appropriate
+B<Plugin> block has been encountered. It is called once for each B<Plugin>
+block which matches the name of the callback as provided with the
+B<plugin_register> method - see below.
+
 =item init functions
 
 This type of functions is called once after loading the module and before any
 calls to the read and write functions. It should be used to initialize the
 internal state of the plugin (e.E<nbsp>g. open sockets, ...). If the return
 value evaluates to B<false>, the plugin will be disabled.
@@ -137,12 +158,25 @@
 
 The following complex types are used to pass values between the Perl plugin
 and collectd:
 
 =over 4
 
+=item Config-Item
+
+A config-item is one structure which keeps the informations provided in the
+configuration file. The array of children keeps one entry for each
+configuration option. Each such entry is another config-item structure, which
+may nest further if nested blocks are used.
+
+  {
+    key      => key,
+    values   => [ val1, val2, ... ],
+    children => [ { ... }, { ... }, ... ]
+  }
+
 =item Data-Set
 
 A data-set is a list of one or more data-sources. Each data-source defines a
 name, type, min- and max-value and the data-set wraps them up into one
 structure. The general layout looks like this:
 
@@ -163,12 +197,13 @@
 
   {
     values => [123, 0.5],
     time   => time (),
     host   => $hostname_g,
     plugin => 'myplugin',
+    type   => 'myplugin',
     plugin_instance => '',
     type_instance   => ''
   }
 
 =item Notification
 
@@ -200,12 +235,14 @@
 Registers a callback-function or data-set.
 
 I<type> can be one of:
 
 =over 4
 
+=item TYPE_CONFIG
+
 =item TYPE_INIT
 
 =item TYPE_READ
 
 =item TYPE_WRITE
 
@@ -244,12 +281,17 @@
 These functions are called in the various stages of the daemon (see the
 section "WRITING YOUR OWN PLUGINS" above) and are passed the following
 arguments:
 
 =over 4
 
+=item TYPE_CONFIG
+
+The only argument passed is I<config-item>. See above for the layout of this
+data type.
+
 =item TYPE_INIT
 
 =item TYPE_READ
 
 =item TYPE_SHUTDOWN
 
@@ -259,14 +301,15 @@
 
 The arguments passed are I<type>, I<data-set>, and I<value-list>. I<type> is a
 string. For the layout of I<data-set> and I<value-list> see above.
 
 =item TYPE_FLUSH
 
-The only argument passed is I<timeout> which indicates that only data older
-than I<timeout> seconds is to be flushed.
+The arguments passed are I<timeout> and I<identifier>. I<timeout> indicates
+that only data older than I<timeout> seconds is to be flushed. I<identifier>
+specifies which values are to be flushed.
 
 =item TYPE_LOG
 
 The arguments are I<log-level> and I<message>. The log level is small for
 important messages and high for less important messages. The least important
 level is B<LOG_DEBUG>, the most important level is B<LOG_ERR>. In between there
@@ -282,35 +325,52 @@
 
 =item B<plugin_unregister> (I<type>, I<plugin>)
 
 Removes a callback or data-set from collectd's internal list of
 functionsE<nbsp>/ datasets.
 
-=item B<plugin_dispatch_values> (I<type>, I<value-list>)
+=item B<plugin_dispatch_values> (I<value-list>)
 
-Submits a I<value-list> of type I<type> to the daemon. If the data-set I<type>
+Submits a I<value-list> to the daemon. If the data-set identified by
+I<value-list>->{I<type>}
 is found (and the number of values matches the number of data-sources) then the
 type, data-set and value-list is passed to all write-callbacks that are
 registered with the daemon.
 
-=item B<plugin_flush> ([B<timeout> => I<timeout>,] [B<plugins> => I<...>])
-
-Flush one or more plugins. I<timeout> is passed on to the registered
-flush-callbacks. If omitted, C<-1> is used. If the I<plugins> argument has
-been specified, only named plugins will be flushed. The argument's value may
-either be a string or a reference to an array of strings.
+B<Note>: Prior to version 4.4 of collectd, the data-set type used to be passed
+as the first argument to B<plugin_register>. This syntax is still supported
+for backwards compatibility but has been deprecated and will be removed in
+some future version of collectd.
+
+=item B<plugin_flush> ([B<timeout> => I<timeout>][, B<plugins> => I<...>][,
+B<identifiers> => I<...>])
+
+Flush one or more plugins. I<timeout> and the specified I<identifiers> are
+passed on to the registered flush-callbacks. If omitted, the timeout defaults
+to C<-1>. The identifier defaults to the undefined value. If the I<plugins>
+argument has been specified, only named plugins will be flushed. The value of
+the B<plugins> and B<identifiers> arguments may either be a string or a
+reference to an array of strings.
 
 =item B<plugin_flush_one> (I<timeout>, I<plugin>)
 
 This is identical to using "plugin_flush (timeout =E<gt> I<timeout>, plugins
 =E<gt> I<plugin>".
 
+B<Note>: Starting with version 4.5 of collectd, B<plugin_flush_one> has been
+deprecated and will be removed in some future version of collectd. Use
+B<plugin_flush> instead.
+
 =item B<plugin_flush_all> (I<timeout>)
 
 This is identical to using "plugin_flush (timeout =E<gt> I<timeout>)".
 
+B<Note>: Starting with version 4.5 of collectd, B<plugin_flush_all> has been
+deprecated and will be removed in some future version of collectd. Use
+B<plugin_flush> instead.
+
 =item B<plugin_dispatch_notification> (I<notification>)
 
 Submits a I<notification> to the daemon which will then pass it to all
 notification-callbacks that are registered.
 
 =item B<plugin_log> (I<log-level>, I<message>)
@@ -374,24 +434,28 @@
 =back
 
 =item B<:types>
 
 =over 4
 
+=item B<TYPE_CONFIG>
+
 =item B<TYPE_INIT>
 
 =item B<TYPE_READ>
 
 =item B<TYPE_WRITE>
 
 =item B<TYPE_FLUSH>
 
 =item B<TYPE_SHUTDOWN>
 
 =item B<TYPE_LOG>
 
+=item B<TYPE_DATASET>
+
 =back
 
 =item B<:ds_types>
 
 =over 4
 
@@ -536,12 +600,20 @@
 
 Each plugin is usually only loaded once and kept in memory for performance
 reasons. Therefore, END blocks are only executed once when collectd shuts
 down. You should not rely on END blocks anyway - use B<shutdown functions>
 instead.
 
+=item
+
+The perl plugin exports the internal API of collectd which is considered
+unstable and subject to change at any time. We try hard to not break backwards
+compatibility in the Perl API during the life cycle of one major release.
+However, this cannot be guaranteed at all times. Watch out for warnings
+dispatched by the perl plugin after upgrades.
+
 =back
 
 =head1 KNOWN BUGS
 
 =over 4
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-snmp.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-snmp.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-snmp.5	2008-10-17 04:46:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-snmp.5	2008-09-05 16:58:52.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.18 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-SNMP 5"
-.TH COLLECTD-SNMP 5 "2008-05-06" "4.5.1" "collectd"
+.TH COLLECTD-SNMP 5 "2008-05-06" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-snmp \- Documentation of collectd's \f(CW\*(C`snmp plugin\*(C'\fR
@@ -198,13 +206,13 @@
 .PP
 Since the \f(CW\*(C`Net\-SNMP\*(C'\fR library is used you can use all the environment variables
 that are interpreted by that package. See \fIsnmpcmd\fR\|(1) for more details.
 .PP
 There are two types of blocks that can be contained in the
 \&\f(CW\*(C`<Plugin\ snmp>\*(C'\fR block: \fBData\fR and \fBHost\fR:
-.SS "The \fBData\fP block"
+.Sh "The \fBData\fP block"
 .IX Subsection "The Data block"
 The \fBData\fR block defines a list of values or a table of values that are to be
 queried. The following options can be set:
 .IP "\fBType\fR \fItype\fR" 4
 .IX Item "Type type"
 collectd's type that is to be used, e.\ g. \*(L"if_octets\*(R" for interface
@@ -303,13 +311,13 @@
 \&\fIValue\fR is added to gauge-values returned by the SNMP-agent after they have
 been multiplied by any \fBScale\fR value. If, for example, a thermometer returns
 degrees Kelvin you could specify a shift of \fB273.15\fR here to store values in
 degrees Celsius. The default value is is course \fB0.0\fR.
 .Sp
 This value is not applied to counter-values.
-.SS "The Host block"
+.Sh "The Host block"
 .IX Subsection "The Host block"
 The \fBHost\fR block defines which hosts to query, which \s-1SNMP\s0 community and
 version to use and which of the defined \fBData\fR to query.
 .PP
 The argument passed to the \fBHost\fR block is used as the hostname in the data
 stored by collectd.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-unixsock.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-unixsock.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-unixsock.5	2009-01-03 05:21:19.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-unixsock.5	2008-09-05 16:58:52.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "COLLECTD-UNIXSOCK 5"
-.TH COLLECTD-UNIXSOCK 5 "2009-01-02" "4.4.5" "collectd"
+.TH COLLECTD-UNIXSOCK 5 "2008-09-04" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 collectd\-unixsock \- Documentation of collectd's \f(CW\*(C`unixsock plugin\*(C'\fR
@@ -215,13 +223,14 @@
 plugin within collectd. \fItype\fR identifies the type and number of values
 (i.\ e. data-set) passed to collectd. A large list of predefined
 data-sets is available in the \fBtypes.db\fR file.
 .Sp
 The \fIOptionList\fR is an optional list of \fIOptions\fR, where each option is a
 key-value-pair. A list of currently understood options can be found below, all
-other options will be ignored.
+other options will be ignored. Values that contain spaces must be quoted with
+double quotes.
 .Sp
 \&\fIValuelist\fR is a colon-separated list of the time and the values, each either
 an integer if the data-source is a counter, or a double if the data-source is
 of type \*(L"gauge\*(R". You can submit an undefined gauge-value by using \fBU\fR. When
 submitting \fBU\fR to a counter the behavior is undefined. The time is given as
 epoch (i.\ e. standard \s-1UNIX\s0 time).
@@ -259,16 +268,15 @@
 .Sp
 Valid options are:
 .RS 4
 .IP "\fBmessage=\fR\fIMessage\fR (\fB\s-1REQUIRED\s0\fR)" 4
 .IX Item "message=Message (REQUIRED)"
 Sets the message of the notification. This is the message that will be made
-accessible to the user, so it should contain some useful information. This
-option must be the last option because the rest of the line will be its value,
-even if there are spaces and equal-signs following it! This option is
-mandatory.
+accessible to the user, so it should contain some useful information. As with
+all options: If the message includes spaces, it must be quoted with double
+quotes. This option is mandatory.
 .IP "\fBseverity=failure\fR|\fBwarning\fR|\fBokay\fR (\fB\s-1REQUIRED\s0\fR)" 4
 .IX Item "severity=failure|warning|okay (REQUIRED)"
 Sets the severity of the notification. This option is mandatory.
 .IP "\fBtime=\fR\fITime\fR (\fB\s-1REQUIRED\s0\fR)" 4
 .IX Item "time=Time (REQUIRED)"
 Sets the time of the notification. The time is given as \*(L"epoch\*(R", i.\ e. as
@@ -299,40 +307,48 @@
 .RS 4
 .Sp
 Example:
   \-> | \s-1PUTNOTIF\s0 type=temperature severity=warning time=1201094702 message=The roof is on fire!
   <\- | 0 Success
 .RE
-.IP "\fB\s-1FLUSH\s0\fR [\fBtimeout=\fR\fITimeout\fR] [\fBplugin=\fR\fIPlugin\fR [...]]" 4
-.IX Item "FLUSH [timeout=Timeout] [plugin=Plugin [...]]"
+.IP "\fB\s-1FLUSH\s0\fR [\fBtimeout=\fR\fITimeout\fR] [\fBplugin=\fR\fIPlugin\fR [...]] [\fBidentifier=\fR\fIIdent\fR [...]]" 4
+.IX Item "FLUSH [timeout=Timeout] [plugin=Plugin [...]] [identifier=Ident [...]]"
 Flushes all cached data older than \fITimeout\fR seconds. If no timeout has been
-specified, it defaults to \-1 which causes all data to be flushed. \fBtimeout\fR
-may be specified multiple times \- each occurrence applies to plugins listed
-afterwards.
+specified, it defaults to \-1 which causes all data to be flushed.
 .Sp
-If specified, only specific plugins are flushed. Otherwise all plugins
-providing a flush callback are flushed.
+If the \fBplugin\fR option has been specified, only the \fIPlugin\fR plugin will be
+flushed. You can have multiple \fBplugin\fR options to flush multiple plugins in
+one go. If the \fBplugin\fR option is not given all plugins providing a flush
+callback will be flushed.
+.Sp
+If the \fBidentifier\fR option is given only the specified values will be flushed.
+This is meant to be used by graphing or displaying frontends which want to have
+the lastest values for a specific graph. Again, you can specify the
+\&\fBidentifier\fR option multiple times to flush several values. If this option is
+not specified at all, all values will be flushed.
 .Sp
 Example:
-  \-> | \s-1FLUSH\s0
-  <\- | 0 Done
-.SS "Identifiers"
+  \-> | \s-1FLUSH\s0 plugin=rrdtool identifier=localhost/df/df\-root identifier=localhost/df/df\-var
+  <\- | 0 Done: 2 successful, 0 errors
+.Sh "Identifiers"
 .IX Subsection "Identifiers"
 Value or value-lists are identified in a uniform fashion:
 .PP
 \&\fIHostname\fR/\fIPlugin\fR/\fIType\fR
 .PP
 Where \fIPlugin\fR and \fIType\fR are both either of type "\fIName\fR\*(L" or
-\&\*(R"\fIName\fR\-\fIInstance\fR". This sounds more complicated than it is, so here are
+\&\*(R"\fIName\fR\-\fIInstance\fR". If the identifier includes spaces, it must be quoted
+using double quotes. This sounds more complicated than it is, so here are
 some examples:
 .PP
-.Vb 4
+.Vb 5
 \&  myhost/cpu\-0/cpu\-user
 \&  myhost/load/load
 \&  myhost/memory/memory\-used
 \&  myhost/disk\-sda/disk_octets
+\&  "myups/snmp/temperature\-Outlet 1"
 .Ve
 .SH "ABSTRACTION LAYER"
 .IX Header "ABSTRACTION LAYER"
 \&\fBcollectd\fR ships the Perl-Module Collectd::Unixsock which
 provides an abstraction layer over the actual socket connection. It can be
 found in the directory \fIbindings/perl/\fR in the source distribution or
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-unixsock.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-unixsock.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/collectd-unixsock.pod	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/collectd-unixsock.pod	2008-09-04 21:01:11.000000000 +0800
@@ -91,13 +91,14 @@
 plugin within collectd. I<type> identifies the type and number of values
 (i.E<nbsp>e. data-set) passed to collectd. A large list of predefined
 data-sets is available in the B<types.db> file.
 
 The I<OptionList> is an optional list of I<Options>, where each option is a
 key-value-pair. A list of currently understood options can be found below, all
-other options will be ignored.
+other options will be ignored. Values that contain spaces must be quoted with
+double quotes.
 
 I<Valuelist> is a colon-separated list of the time and the values, each either
 an integer if the data-source is a counter, or a double if the data-source is
 of type "gauge". You can submit an undefined gauge-value by using B<U>. When
 submitting B<U> to a counter the behavior is undefined. The time is given as
 epoch (i.E<nbsp>e. standard UNIX time).
@@ -139,16 +140,15 @@
 
 =over 4
 
 =item B<message=>I<Message> (B<REQUIRED>)
 
 Sets the message of the notification. This is the message that will be made
-accessible to the user, so it should contain some useful information. This
-option must be the last option because the rest of the line will be its value,
-even if there are spaces and equal-signs following it! This option is
-mandatory.
+accessible to the user, so it should contain some useful information. As with
+all options: If the message includes spaces, it must be quoted with double
+quotes. This option is mandatory.
 
 =item B<severity=failure>|B<warning>|B<okay> (B<REQUIRED>)
 
 Sets the severity of the notification. This option is mandatory.
 
 =item B<time=>I<Time> (B<REQUIRED>)
@@ -180,42 +180,50 @@
 =back
 
 Example:
   -> | PUTNOTIF type=temperature severity=warning time=1201094702 message=The roof is on fire!
   <- | 0 Success
 
-=item B<FLUSH> [B<timeout=>I<Timeout>] [B<plugin=>I<Plugin> [...]]
+=item B<FLUSH> [B<timeout=>I<Timeout>] [B<plugin=>I<Plugin> [...]] [B<identifier=>I<Ident> [...]]
 
 Flushes all cached data older than I<Timeout> seconds. If no timeout has been
-specified, it defaults to -1 which causes all data to be flushed. B<timeout>
-may be specified multiple times - each occurrence applies to plugins listed
-afterwards.
+specified, it defaults to -1 which causes all data to be flushed.
 
-If specified, only specific plugins are flushed. Otherwise all plugins
-providing a flush callback are flushed.
+If the B<plugin> option has been specified, only the I<Plugin> plugin will be
+flushed. You can have multiple B<plugin> options to flush multiple plugins in
+one go. If the B<plugin> option is not given all plugins providing a flush
+callback will be flushed.
+
+If the B<identifier> option is given only the specified values will be flushed.
+This is meant to be used by graphing or displaying frontends which want to have
+the lastest values for a specific graph. Again, you can specify the
+B<identifier> option multiple times to flush several values. If this option is
+not specified at all, all values will be flushed.
 
 Example:
-  -> | FLUSH
-  <- | 0 Done
+  -> | FLUSH plugin=rrdtool identifier=localhost/df/df-root identifier=localhost/df/df-var
+  <- | 0 Done: 2 successful, 0 errors
 
 =back
 
 =head2 Identifiers
 
 Value or value-lists are identified in a uniform fashion:
 
 I<Hostname>/I<Plugin>/I<Type>
 
 Where I<Plugin> and I<Type> are both either of type "I<Name>" or
-"I<Name>-I<Instance>". This sounds more complicated than it is, so here are
+"I<Name>-I<Instance>". If the identifier includes spaces, it must be quoted
+using double quotes. This sounds more complicated than it is, so here are
 some examples:
 
   myhost/cpu-0/cpu-user
   myhost/load/load
   myhost/memory/memory-used
   myhost/disk-sda/disk_octets
+  "myups/snmp/temperature-Outlet 1"
 
 =head1 ABSTRACTION LAYER
 
 B<collectd> ships the Perl-Module L<Collectd::Unixsock> which
 provides an abstraction layer over the actual socket connection. It can be
 found in the directory F<bindings/perl/> in the source distribution or
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/common.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/common.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/common.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/common.c	2008-09-04 21:01:12.000000000 +0800
@@ -58,12 +58,25 @@
 	strncpy (dest, src, n);
 	dest[n - 1] = '\0';
 
 	return (dest);
 } /* char *sstrncpy */
 
+int ssnprintf (char *dest, size_t n, const char *format, ...)
+{
+	int ret = 0;
+	va_list ap;
+
+	va_start (ap, format);
+	ret = vsnprintf (dest, n, format, ap);
+	dest[n - 1] = '\0';
+	va_end (ap);
+
+	return (ret);
+} /* int ssnprintf */
+
 char *sstrdup (const char *s)
 {
 	char *r;
 
 	if (s == NULL)
 		return (NULL);
@@ -88,43 +101,42 @@
 	{
 		char *temp;
 
 		pthread_mutex_lock (&strerror_r_lock);
 
 		temp = strerror (errnum);
-		strncpy (buf, temp, buflen);
+		sstrncpy (buf, temp, buflen);
 
 		pthread_mutex_unlock (&strerror_r_lock);
 	}
 /* #endif !HAVE_STRERROR_R */
 
 #elif STRERROR_R_CHAR_P
 	{
 		char *temp;
 		temp = strerror_r (errnum, buf, buflen);
 		if (buf[0] == '\0')
 		{
 			if ((temp != NULL) && (temp != buf) && (temp[0] != '\0'))
-				strncpy (buf, temp, buflen);
+				sstrncpy (buf, temp, buflen);
 			else
-				strncpy (buf, "strerror_r did not return "
+				sstrncpy (buf, "strerror_r did not return "
 						"an error message", buflen);
 		}
 	}
 /* #endif STRERROR_R_CHAR_P */
 
 #else
 	if (strerror_r (errnum, buf, buflen) != 0)
 	{
-		snprintf (buf, buflen, "Error #%i; "
+		ssnprintf (buf, buflen, "Error #%i; "
 				"Additionally, strerror_r failed.",
 				errnum);
 	}
 #endif /* STRERROR_R_CHAR_P */
 
-	buf[buflen - 1] = '\0';
 	return (buf);
 } /* char *sstrerror */
 
 void *smalloc (size_t size)
 {
 	void *r;
@@ -373,13 +385,13 @@
 	 */
 	if (file_orig == NULL)
 		return (-1);
 
 	if ((len = strlen (file_orig)) < 1)
 		return (-1);
-	else if (len >= 512)
+	else if (len >= sizeof (file_copy))
 		return (-1);
 
 	/*
 	 * If `file_orig' ends in a slash the last component is a directory,
 	 * otherwise it's a file. Act accordingly..
 	 */
@@ -388,14 +400,13 @@
 	if (file_orig[0] == '/')
 		path_is_absolute = 1;
 
 	/*
 	 * Create a copy for `strtok_r' to destroy
 	 */
-	strncpy (file_copy, file_orig, 512);
-	file_copy[511] = '\0';
+	sstrncpy (file_copy, file_orig, sizeof (file_copy));
 
 	/*
 	 * Break into components. This will eat up several slashes in a row and
 	 * remove leading and trailing slashes..
 	 */
 	ptr = file_copy;
@@ -474,14 +485,13 @@
 {
 	char ident[128];
 	
 	if (kc == NULL)
 		return (-1);
 
-	snprintf (ident, 128, "%s,%i,%s", module, instance, name);
-	ident[127] = '\0';
+	ssnprintf (ident, sizeof (ident), "%s,%i,%s", module, instance, name);
 
 	if (*ksp_ptr == NULL)
 	{
 		if ((*ksp_ptr = kstat_lookup (kc, module, instance, name)) == NULL)
 		{
 			ERROR ("Cound not find kstat %s", ident);
@@ -524,18 +534,18 @@
 #ifdef assert
 	assert (ksp != NULL);
 	assert (ksp->ks_type == KSTAT_TYPE_NAMED);
 #else
 	if (ksp == NULL)
 	{
-		ERROR ("ERROR: %s:%i: ksp == NULL\n", __FILE__, __LINE__);
+		fprintf (stderr, "ERROR: %s:%i: ksp == NULL\n", __FILE__, __LINE__);
 		return (-1LL);
 	}
 	else if (ksp->ks_type != KSTAT_TYPE_NAMED)
 	{
-		ERROR ("ERROR: %s:%i: ksp->ks_type != KSTAT_TYPE_NAMED\n", __FILE__, __LINE__);
+		fprintf (stderr, "ERROR: %s:%i: ksp->ks_type != KSTAT_TYPE_NAMED\n", __FILE__, __LINE__);
 		return (-1LL);
 	}
 #endif
 
 	if ((kn = (kstat_named_t *) kstat_data_lookup (ksp, name)) == NULL)
 		return (retval);
@@ -660,27 +670,27 @@
 	assert (plugin != NULL);
 	assert (type != NULL);
 
 	if ((plugin_instance == NULL) || (strlen (plugin_instance) == 0))
 	{
 		if ((type_instance == NULL) || (strlen (type_instance) == 0))
-			status = snprintf (ret, ret_len, "%s/%s/%s",
+			status = ssnprintf (ret, ret_len, "%s/%s/%s",
 					hostname, plugin, type);
 		else
-			status = snprintf (ret, ret_len, "%s/%s/%s-%s",
+			status = ssnprintf (ret, ret_len, "%s/%s/%s-%s",
 					hostname, plugin, type,
 					type_instance);
 	}
 	else
 	{
 		if ((type_instance == NULL) || (strlen (type_instance) == 0))
-			status = snprintf (ret, ret_len, "%s/%s-%s/%s",
+			status = ssnprintf (ret, ret_len, "%s/%s-%s/%s",
 					hostname, plugin, plugin_instance,
 					type);
 		else
-			status = snprintf (ret, ret_len, "%s/%s-%s/%s-%s",
+			status = ssnprintf (ret, ret_len, "%s/%s-%s/%s-%s",
 					hostname, plugin, plugin_instance,
 					type, type_instance);
 	}
 
 	if ((status < 1) || (status >= ret_len))
 		return (-1);
@@ -835,29 +845,78 @@
 {
 	memset (n, '\0', sizeof (notification_t));
 
 	n->severity = severity;
 
 	if (message != NULL)
-		strncpy (n->message, message, sizeof (n->message));
+		sstrncpy (n->message, message, sizeof (n->message));
 	if (host != NULL)
-		strncpy (n->host, host, sizeof (n->host));
+		sstrncpy (n->host, host, sizeof (n->host));
 	if (plugin != NULL)
-		strncpy (n->plugin, plugin, sizeof (n->plugin));
+		sstrncpy (n->plugin, plugin, sizeof (n->plugin));
 	if (plugin_instance != NULL)
-		strncpy (n->plugin_instance, plugin_instance,
+		sstrncpy (n->plugin_instance, plugin_instance,
 				sizeof (n->plugin_instance));
 	if (type != NULL)
-		strncpy (n->type, type, sizeof (n->type));
+		sstrncpy (n->type, type, sizeof (n->type));
 	if (type_instance != NULL)
-		strncpy (n->type_instance, type_instance,
+		sstrncpy (n->type_instance, type_instance,
 				sizeof (n->type_instance));
 
-	n->message[sizeof (n->message) - 1] = '\0';
-	n->host[sizeof (n->host) - 1] = '\0';
-	n->plugin[sizeof (n->plugin) - 1] = '\0';
-	n->plugin_instance[sizeof (n->plugin_instance) - 1] = '\0';
-	n->type[sizeof (n->type) - 1] = '\0';
-	n->type_instance[sizeof (n->type_instance) - 1] = '\0';
-
 	return (0);
 } /* int notification_init */
+
+int walk_directory (const char *dir, dirwalk_callback_f callback,
+		void *user_data)
+{
+	struct dirent *ent;
+	DIR *dh;
+	int success;
+	int failure;
+
+	success = 0;
+	failure = 0;
+
+	if ((dh = opendir (dir)) == NULL)
+	{
+		char errbuf[1024];
+		ERROR ("walk_directory: Cannot open '%s': %s", dir,
+				sstrerror (errno, errbuf, sizeof (errbuf)));
+		return -1;
+	}
+
+	while ((ent = readdir (dh)) != NULL)
+	{
+		int status;
+
+		if (ent->d_name[0] == '.')
+			continue;
+
+		status = (*callback) (dir, ent->d_name, user_data);
+		if (status != 0)
+			failure++;
+		else
+			success++;
+	}
+
+	closedir (dh);
+
+	if ((success == 0) && (failure > 0))
+		return (-1);
+	return (0);
+}
+
+int read_file_contents (const char *filename, char *buf, int bufsize)
+{
+	FILE *fh;
+	int n;
+
+	if ((fh = fopen (filename, "r")) == NULL)
+		return -1;
+
+	n = fread(buf, 1, bufsize, fh);
+	fclose(fh);
+
+	return n;
+}
+
+
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/common.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/common.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/common.h	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/common.h	2008-09-04 21:01:13.000000000 +0800
@@ -38,12 +38,13 @@
 		(ptr) = NULL; \
 	} while (0)
 
 #define STATIC_ARRAY_SIZE(a) (sizeof (a) / sizeof (*(a)))
 
 char *sstrncpy (char *dest, const char *src, size_t n);
+int ssnprintf (char *dest, size_t n, const char *format, ...);
 char *sstrdup(const char *s);
 void *smalloc(size_t size);
 char *sstrerror (int errnum, char *buf, size_t buflen);
 
 /*
  * NAME
@@ -198,7 +199,14 @@
 		const char *plugin, const char *plugin_instance,
 		const char *type, const char *type_instance);
 #define NOTIFICATION_INIT_VL(n, vl, ds) \
 	notification_init (n, NOTIF_FAILURE, NULL, \
 			(vl)->host, (vl)->plugin, (vl)->plugin_instance, \
 			(ds)->type, (vl)->type_instance)
+
+typedef int (*dirwalk_callback_f)(const char *dirname, const char *filename,
+		void *user_data);
+int walk_directory (const char *dir, dirwalk_callback_f callback,
+		void *user_data);
+int read_file_contents (const char *filename, char *buf, int bufsize);
+
 #endif /* COMMON_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/configfile.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/configfile.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/configfile.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/configfile.c	2008-09-04 21:01:13.000000000 +0800
@@ -179,14 +179,13 @@
 		return (-1);
 	if (ci->values[0].type == OCONFIG_TYPE_STRING)
 		return (global_option_set (ci->key, ci->values[0].value.string));
 	else if (ci->values[0].type == OCONFIG_TYPE_NUMBER)
 	{
 		char tmp[128];
-		snprintf (tmp, sizeof (tmp), "%lf", ci->values[0].value.number);
-		tmp[127] = '\0';
+		ssnprintf (tmp, sizeof (tmp), "%lf", ci->values[0].value.number);
 		return (global_option_set (ci->key, tmp));
 	}
 	else if (ci->values[0].type == OCONFIG_TYPE_BOOLEAN)
 	{
 		if (ci->values[0].value.boolean)
 			return (global_option_set (ci->key, "true"));
@@ -255,32 +254,32 @@
 
 	for (i = 0; i < ci->values_num; i++)
 	{
 		int status = -1;
 
 		if (ci->values[i].type == OCONFIG_TYPE_STRING)
-			status = snprintf (buffer_ptr, buffer_free, " %s",
+			status = ssnprintf (buffer_ptr, buffer_free, " %s",
 					ci->values[i].value.string);
 		else if (ci->values[i].type == OCONFIG_TYPE_NUMBER)
-			status = snprintf (buffer_ptr, buffer_free, " %lf",
+			status = ssnprintf (buffer_ptr, buffer_free, " %lf",
 					ci->values[i].value.number);
 		else if (ci->values[i].type == OCONFIG_TYPE_BOOLEAN)
-			status = snprintf (buffer_ptr, buffer_free, " %s",
+			status = ssnprintf (buffer_ptr, buffer_free, " %s",
 					ci->values[i].value.boolean
 					? "true" : "false");
 
 		if ((status < 0) || (status >= buffer_free))
 			return (-1);
 		buffer_free -= status;
 		buffer_ptr  += status;
 	}
 	/* skip the initial space */
 	buffer_ptr = buffer + 1;
 
 	return (cf_dispatch (plugin, ci->key, buffer_ptr));
-} /* int dispatch_value_plugin */
+} /* int plugin_conf_dispatch */
 
 static int dispatch_value (const oconfig_item_t *ci)
 {
 	int ret = -2;
 	int i;
 
@@ -545,13 +544,13 @@
 		char   name[1024];
 		char **tmp;
 
 		if ((de->d_name[0] == '.') || (de->d_name[0] == '\0'))
 			continue;
 
-		status = snprintf (name, sizeof (name), "%s/%s",
+		status = ssnprintf (name, sizeof (name), "%s/%s",
 				dir, de->d_name);
 		if (status >= sizeof (name))
 		{
 			ERROR ("configfile: Not including `%s/%s' because its"
 					" name is too long.",
 					dir, de->d_name);
@@ -885,14 +884,10 @@
 		if (conf->children[i].children == NULL)
 			dispatch_value (conf->children + i);
 		else
 			dispatch_block (conf->children + i);
 	}
 
-	oconfig_free (conf);
-
-	/* Read the default types.db if no `TypesDB' option was given. */
 	if (cf_default_typesdb)
-		read_types_list (PLUGINDIR"/types.db");
-
+		read_types_list (PLUGINDIR"/types.db"); /* FIXME: Configure path */
 	return (0);
 } /* int cf_read */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/config.h.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/config.h.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/config.h.in	2009-01-03 05:20:49.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/config.h.in	2008-09-05 16:56:58.000000000 +0800
@@ -6,12 +6,15 @@
 /* wether or not to enable feature debugging */
 #undef COLLECT_DEBUG
 
 /* wether or not to enable feature getifaddrs under Linux */
 #undef COLLECT_GETIFADDRS
 
+/* Wether or not to use the esmtp library */
+#undef COLLECT_LIBESMTP
+
 /* Wether or not to use the pcap library */
 #undef COLLECT_LIBPCAP
 
 /* Define if endianflip is needed to convert to x86 representation. */
 #undef FP_LAYOUT_NEED_ENDIANFLIP
 
@@ -163,12 +166,18 @@
 /* Define to 1 if `wtime' is member of `kstat_io_t'. */
 #undef HAVE_KSTAT_IO_T_WTIME
 
 /* Define to 1 if you have the <kvm.h> header file. */
 #undef HAVE_KVM_H
 
+/* Define to 1 if you have the esmtp library (-lesmtp). */
+#undef HAVE_LIBESMTP
+
+/* Define to 1 if you have the <libesmtp.h> header file. */
+#undef HAVE_LIBESMTP_H
+
 /* Define to 1 if you have the <libgen.h> header file. */
 #undef HAVE_LIBGEN_H
 
 /* Define to 1 if you have 'hal' library */
 #undef HAVE_LIBHAL
 
@@ -178,25 +187,36 @@
 /* Define to 1 if you have the <libiptc/libiptc.h> header file. */
 #undef HAVE_LIBIPTC_LIBIPTC_H
 
 /* Define to 1 if you have the 'kstat' library (-lkstat) */
 #undef HAVE_LIBKSTAT
 
+/* Define to 1 if you have the 'kvm' library with the 'kvm_getprocs' symbol
+   (-lkvm) */
+#undef HAVE_LIBKVM_GETPROCS
+
 /* Define to 1 if you have the 'kvm' library with the 'kvm_getswapinfo' symbol
    (-lkvm) */
 #undef HAVE_LIBKVM_GETSWAPINFO
 
+/* Define to 1 if you have the 'kvm' library with the 'kvm_nlist' symbol
+   (-lkvm) */
+#undef HAVE_LIBKVM_NLIST
+
 /* Define to 1 if you have the <libnetlink.h> header file. */
 #undef HAVE_LIBNETLINK_H
 
 /* Define to 1 if you have the pcap library (-lpcap). */
 #undef HAVE_LIBPCAP
 
 /* Define if libperl is present and usable. */
 #undef HAVE_LIBPERL
 
+/* Define to 1 if you have the <libpq-fe.h> header file. */
+#undef HAVE_LIBPQ_FE_H
+
 /* Wether or not to use pthread (POSIX threads) library */
 #undef HAVE_LIBPTHREAD
 
 /* Define to 1 if you have the 'resolv' library (-lresolv). */
 #undef HAVE_LIBRESOLV
 
@@ -316,15 +336,12 @@
 /* Define to 1 if you have the <mntent.h> header file. */
 #undef HAVE_MNTENT_H
 
 /* Define to 1 if you have the <mnttab.h> header file. */
 #undef HAVE_MNTTAB_H
 
-/* Define to 1 if you have the <mysql.h> header file. */
-#undef HAVE_MYSQL_H
-
 /* Define to 1 if you have the <mysql/mysql.h> header file. */
 #undef HAVE_MYSQL_MYSQL_H
 
 /* Define to 1 if you have the `nanosleep' function. */
 #undef HAVE_NANOSLEEP
 
@@ -388,12 +405,15 @@
 /* Define to 1 if you have the <OpenIPMI/ipmi_smi.h> header file. */
 #undef HAVE_OPENIPMI_IPMI_SMI_H
 
 /* Define to 1 if you have the `openlog' function. */
 #undef HAVE_OPENLOG
 
+/* Define to 1 if you have the <owcapi.h> header file. */
+#undef HAVE_OWCAPI_H
+
 /* Define to 1 if you have the <paths.h> header file. */
 #undef HAVE_PATHS_H
 
 /* Define to 1 if you have the <pcap.h> header file. */
 #undef HAVE_PCAP_H
 
@@ -439,12 +459,15 @@
 /* Define to 1 if the entropy plugin is enabled. */
 #undef HAVE_PLUGIN_ENTROPY
 
 /* Define to 1 if the exec plugin is enabled. */
 #undef HAVE_PLUGIN_EXEC
 
+/* Define to 1 if the filecount plugin is enabled. */
+#undef HAVE_PLUGIN_FILECOUNT
+
 /* Define to 1 if the hddtemp plugin is enabled. */
 #undef HAVE_PLUGIN_HDDTEMP
 
 /* Define to 1 if the interface plugin is enabled. */
 #undef HAVE_PLUGIN_INTERFACE
 
@@ -493,24 +516,36 @@
 /* Define to 1 if the nfs plugin is enabled. */
 #undef HAVE_PLUGIN_NFS
 
 /* Define to 1 if the nginx plugin is enabled. */
 #undef HAVE_PLUGIN_NGINX
 
+/* Define to 1 if the notify_desktop plugin is enabled. */
+#undef HAVE_PLUGIN_NOTIFY_DESKTOP
+
+/* Define to 1 if the notify_email plugin is enabled. */
+#undef HAVE_PLUGIN_NOTIFY_EMAIL
+
 /* Define to 1 if the ntpd plugin is enabled. */
 #undef HAVE_PLUGIN_NTPD
 
 /* Define to 1 if the nut plugin is enabled. */
 #undef HAVE_PLUGIN_NUT
 
+/* Define to 1 if the onewire plugin is enabled. */
+#undef HAVE_PLUGIN_ONEWIRE
+
 /* Define to 1 if the perl plugin is enabled. */
 #undef HAVE_PLUGIN_PERL
 
 /* Define to 1 if the ping plugin is enabled. */
 #undef HAVE_PLUGIN_PING
 
+/* Define to 1 if the postgresql plugin is enabled. */
+#undef HAVE_PLUGIN_POSTGRESQL
+
 /* Define to 1 if the powerdns plugin is enabled. */
 #undef HAVE_PLUGIN_POWERDNS
 
 /* Define to 1 if the processes plugin is enabled. */
 #undef HAVE_PLUGIN_PROCESSES
 
@@ -541,12 +576,15 @@
 /* Define to 1 if the tcpconns plugin is enabled. */
 #undef HAVE_PLUGIN_TCPCONNS
 
 /* Define to 1 if the teamspeak2 plugin is enabled. */
 #undef HAVE_PLUGIN_TEAMSPEAK2
 
+/* Define to 1 if the thermal plugin is enabled. */
+#undef HAVE_PLUGIN_THERMAL
+
 /* Define to 1 if the unixsock plugin is enabled. */
 #undef HAVE_PLUGIN_UNIXSOCK
 
 /* Define to 1 if the users plugin is enabled. */
 #undef HAVE_PLUGIN_USERS
 
@@ -622,12 +660,15 @@
 /* Define to 1 if you have the `statvfs' function. */
 #undef HAVE_STATVFS
 
 /* Define to 1 if you have the <stdarg.h> header file. */
 #undef HAVE_STDARG_H
 
+/* Define to 1 if you have the <stdbool.h> header file. */
+#undef HAVE_STDBOOL_H
+
 /* Define to 1 if you have the <stdint.h> header file. */
 #undef HAVE_STDINT_H
 
 /* Define to 1 if you have the <stdio.h> header file. */
 #undef HAVE_STDIO_H
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/cpu.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/cpu.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/cpu.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/cpu.c	2008-09-04 21:01:13.000000000 +0800
@@ -179,18 +179,18 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "cpu", sizeof (vl.plugin));
-	snprintf (vl.plugin_instance, sizeof (vl.type_instance),
+	ssnprintf (vl.plugin_instance, sizeof (vl.type_instance),
 			"%i", cpu_num);
-	vl.plugin_instance[DATA_MAX_NAME_LEN - 1] = '\0';
+	sstrncpy (vl.type, "cpu", sizeof (vl.type));
 	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("cpu", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int cpu_read (void)
 {
 #if PROCESSOR_CPU_LOAD_INFO || PROCESSOR_TEMPERATURE
 	int cpu;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/cpufreq.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/cpufreq.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/cpufreq.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/cpufreq.c	2008-09-04 21:01:14.000000000 +0800
@@ -34,13 +34,13 @@
 	char filename[256];
 
 	num_cpu = 0;
 
 	while (1)
 	{
-		status = snprintf (filename, sizeof (filename),
+		status = ssnprintf (filename, sizeof (filename),
 				"/sys/devices/system/cpu/cpu%d/cpufreq/"
 				"scaling_cur_freq", num_cpu);
 		if ((status < 1) || ((unsigned int)status >= sizeof (filename)))
 			break;
 
 		if (access (filename, R_OK))
@@ -67,16 +67,17 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "cpufreq", sizeof (vl.plugin));
-	snprintf (vl.type_instance, sizeof (vl.type_instance),
+	sstrncpy (vl.type, "cpufreq", sizeof (vl.type));
+	ssnprintf (vl.type_instance, sizeof (vl.type_instance),
 			"%i", cpu_num);
 
-	plugin_dispatch_values ("cpufreq", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int cpufreq_read (void)
 {
         int status;
 	unsigned long long val;
@@ -84,13 +85,13 @@
 	FILE *fp;
 	char filename[256];
 	char buffer[16];
 
 	for (i = 0; i < num_cpu; i++)
 	{
-		status = snprintf (filename, sizeof (filename),
+		status = ssnprintf (filename, sizeof (filename),
 				"/sys/devices/system/cpu/cpu%d/cpufreq/"
 				"scaling_cur_freq", i);
 		if ((status < 1) || ((unsigned int)status >= sizeof (filename)))
 			return (-1);
 
 		if ((fp = fopen (filename, "r")) == NULL)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/csv.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/csv.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/csv.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/csv.c	2008-09-04 21:01:14.000000000 +0800
@@ -42,15 +42,17 @@
 {
 	int offset;
 	int status;
 	int i;
 	gauge_t *rates = NULL;
 
+	assert (0 == strcmp (ds->type, vl->type));
+
 	memset (buffer, '\0', buffer_len);
 
-	status = snprintf (buffer, buffer_len, "%u", (unsigned int) vl->time);
+	status = ssnprintf (buffer, buffer_len, "%u", (unsigned int) vl->time);
 	if ((status < 1) || (status >= buffer_len))
 		return (-1);
 	offset = status;
 
 	for (i = 0; i < ds->ds_num; i++)
 	{
@@ -59,13 +61,13 @@
 			return (-1);
 
 		if (ds->ds[i].type == DS_TYPE_COUNTER)
 		{
 			if (store_rates == 0)
 			{
-				status = snprintf (buffer + offset,
+				status = ssnprintf (buffer + offset,
 						buffer_len - offset,
 						",%llu",
 						vl->values[i].counter);
 			}
 			else /* if (store_rates == 1) */
 			{
@@ -74,20 +76,20 @@
 				if (rates == NULL)
 				{
 					WARNING ("csv plugin: "
 							"uc_get_rate failed.");
 					return (-1);
 				}
-				status = snprintf (buffer + offset,
+				status = ssnprintf (buffer + offset,
 						buffer_len - offset,
 						",%lf", rates[i]);
 			}
 		}
 		else /* if (ds->ds[i].type == DS_TYPE_GAUGE) */
 		{
-			status = snprintf (buffer + offset, buffer_len - offset,
+			status = ssnprintf (buffer + offset, buffer_len - offset,
 					",%lf", vl->values[i].gauge);
 		}
 
 		if ((status < 1) || (status >= (buffer_len - offset)))
 		{
 			sfree (rates);
@@ -104,43 +106,45 @@
 static int value_list_to_filename (char *buffer, int buffer_len,
 		const data_set_t *ds, const value_list_t *vl)
 {
 	int offset = 0;
 	int status;
 
+	assert (0 == strcmp (ds->type, vl->type));
+
 	if (datadir != NULL)
 	{
-		status = snprintf (buffer + offset, buffer_len - offset,
+		status = ssnprintf (buffer + offset, buffer_len - offset,
 				"%s/", datadir);
 		if ((status < 1) || (status >= buffer_len - offset))
 			return (-1);
 		offset += status;
 	}
 
-	status = snprintf (buffer + offset, buffer_len - offset,
+	status = ssnprintf (buffer + offset, buffer_len - offset,
 			"%s/", vl->host);
 	if ((status < 1) || (status >= buffer_len - offset))
 		return (-1);
 	offset += status;
 
 	if (strlen (vl->plugin_instance) > 0)
-		status = snprintf (buffer + offset, buffer_len - offset,
+		status = ssnprintf (buffer + offset, buffer_len - offset,
 				"%s-%s/", vl->plugin, vl->plugin_instance);
 	else
-		status = snprintf (buffer + offset, buffer_len - offset,
+		status = ssnprintf (buffer + offset, buffer_len - offset,
 				"%s/", vl->plugin);
 	if ((status < 1) || (status >= buffer_len - offset))
 		return (-1);
 	offset += status;
 
 	if (strlen (vl->type_instance) > 0)
-		status = snprintf (buffer + offset, buffer_len - offset,
-				"%s-%s", ds->type, vl->type_instance);
+		status = ssnprintf (buffer + offset, buffer_len - offset,
+				"%s-%s", vl->type, vl->type_instance);
 	else
-		status = snprintf (buffer + offset, buffer_len - offset,
-				"%s", ds->type);
+		status = ssnprintf (buffer + offset, buffer_len - offset,
+				"%s", vl->type);
 	if ((status < 1) || (status >= buffer_len - offset))
 		return (-1);
 	offset += status;
 
 	{
 		time_t now;
@@ -239,12 +243,17 @@
 	char         values[512];
 	FILE        *csv;
 	int          csv_fd;
 	struct flock fl;
 	int          status;
 
+	if (0 != strcmp (ds->type, vl->type)) {
+		ERROR ("csv plugin: DS type does not match value list type");
+		return -1;
+	}
+
 	if (value_list_to_filename (filename, sizeof (filename), ds, vl) != 0)
 		return (-1);
 
 	DEBUG ("csv plugin: csv_write: filename = %s;", filename);
 
 	if (value_list_to_string (values, sizeof (values), ds, vl) != 0)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/df.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/df.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/df.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/df.c	2008-09-04 21:01:14.000000000 +0800
@@ -125,15 +125,16 @@
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "df", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
-	strncpy (vl.type_instance, df_name, sizeof (vl.type_instance));
+	sstrncpy (vl.type, "df", sizeof (vl.host));
+	sstrncpy (vl.type_instance, df_name, sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("df", &vl);
+	plugin_dispatch_values (&vl);
 } /* void df_submit */
 
 static int df_read (void)
 {
 #if HAVE_STATVFS
 	struct statvfs statbuf;
@@ -170,19 +171,19 @@
 		blocksize = BLOCKSIZE(statbuf);
 		df_free = statbuf.f_bfree * blocksize;
 		df_used = (statbuf.f_blocks - statbuf.f_bfree) * blocksize;
 
 		if (strcmp (mnt_ptr->dir, "/") == 0)
 		{
-			strncpy (mnt_name, "root", sizeof (mnt_name));
+			sstrncpy (mnt_name, "root", sizeof (mnt_name));
 		}
 		else
 		{
 			int i, len;
 
-			strncpy (mnt_name, mnt_ptr->dir + 1, sizeof (mnt_name));
+			sstrncpy (mnt_name, mnt_ptr->dir + 1, sizeof (mnt_name));
 			len = strlen (mnt_name);
 
 			for (i = 0; i < len; i++)
 				if (mnt_name[i] == '/')
 					mnt_name[i] = '-';
 		}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/disk.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/disk.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/disk.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/disk.c	2008-09-04 21:01:14.000000000 +0800
@@ -212,16 +212,17 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "disk", sizeof (vl.plugin));
-	strncpy (vl.plugin_instance, plugin_instance,
+	sstrncpy (vl.plugin_instance, plugin_instance,
 			sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void disk_submit */
 
 #if HAVE_IOKIT_IOKITLIB_H
 static signed long long dict_get_value (CFDictionaryRef dict, const char *key)
 {
 	signed long long val_int;
@@ -372,13 +373,14 @@
 		 * instantiated. It is one of the statistic entries listed
 		 * under the top-level kIOBlockStorageDriverStatisticsKey
 		 * property table. It has an OSNumber value. */
 		write_tme = dict_get_value (stats_dict,
 				kIOBlockStorageDriverStatisticsTotalWriteTimeKey);
 
-		if (snprintf (disk_name, 64, "%i-%i", disk_major, disk_minor) >= 64)
+		if (ssnprintf (disk_name, sizeof (disk_name),
+				"%i-%i", disk_major, disk_minor) >= sizeof (disk_name))
 		{
 			DEBUG ("snprintf (major, minor) failed.");
 			CFRelease (child_dict);
 			IOObjectRelease (disk_child);
 			CFRelease (props_dict);
 			IOObjectRelease (disk);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/dns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/dns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/dns.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/dns.c	2008-09-04 21:01:14.000000000 +0800
@@ -298,15 +298,16 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "dns", sizeof (vl.plugin));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void submit_counter */
 
 static void submit_octets (counter_t queries, counter_t responses)
 {
 	value_t values[2];
 	value_list_t vl = VALUE_LIST_INIT;
@@ -316,14 +317,15 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "dns", sizeof (vl.plugin));
+	sstrncpy (vl.type, "dns_octets", sizeof (vl.type));
 
-	plugin_dispatch_values ("dns_octets", &vl);
+	plugin_dispatch_values (&vl);
 } /* void submit_counter */
 
 static int dns_read (void)
 {
 	unsigned int keys[T_MAX];
 	unsigned int values[T_MAX];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/email.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/email.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/email.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/email.c	2008-09-04 21:01:14.000000000 +0800
@@ -184,24 +184,18 @@
 		long int tmp = strtol (value, NULL, 0);
 
 		if (tmp < 1) {
 			fprintf (stderr, "email plugin: `MaxConns' was set to invalid "
 					"value %li, will use default %i.\n",
 					tmp, MAX_CONNS);
-			ERROR ("email plugin: `MaxConns' was set to invalid "
-					"value %li, will use default %i.\n",
-					tmp, MAX_CONNS);
 			max_conns = MAX_CONNS;
 		}
 		else if (tmp > MAX_CONNS_LIMIT) {
 			fprintf (stderr, "email plugin: `MaxConns' was set to invalid "
 					"value %li, will use hardcoded limit %i.\n",
 					tmp, MAX_CONNS_LIMIT);
-			ERROR ("email plugin: `MaxConns' was set to invalid "
-					"value %li, will use hardcoded limit %i.\n",
-					tmp, MAX_CONNS_LIMIT);
 			max_conns = MAX_CONNS_LIMIT;
 		}
 		else {
 			max_conns = (int)tmp;
 		}
 	}
@@ -393,15 +387,13 @@
 		log_err ("socket() failed: %s",
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		pthread_exit ((void *)1);
 	}
 
 	addr.sun_family = AF_UNIX;
-
-	strncpy (addr.sun_path, path, (size_t)(UNIX_PATH_MAX - 1));
-	addr.sun_path[UNIX_PATH_MAX - 1] = '\0';
+	sstrncpy (addr.sun_path, path, (size_t)(UNIX_PATH_MAX - 1));
 
 	errno = 0;
 	if (-1 == bind (connector_socket, (struct sockaddr *)&addr,
 				offsetof (struct sockaddr_un, sun_path)
 					+ strlen(addr.sun_path))) {
 		char errbuf[1024];
@@ -658,15 +650,16 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "email", sizeof (vl.plugin));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void email_submit */
 
 /* Copy list l1 to list l2. l2 may partly exist already, but it is assumed
  * that neither the order nor the name of any element of either list is
  * changed and no elements are deleted. The values of l1 are reset to zero
  * after they have been copied to l2. */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/entropy.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/entropy.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/entropy.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/entropy.c	2008-09-04 21:01:14.000000000 +0800
@@ -38,16 +38,15 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "entropy", sizeof (vl.plugin));
-	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
-	sstrncpy (vl.type_instance, "", sizeof (vl.type_instance));
+	sstrncpy (vl.type, "entropy", sizeof (vl.type));
 
-	plugin_dispatch_values ("entropy", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int entropy_read (void)
 {
 	double entropy;
 	FILE *fh;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/exec.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/exec.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/exec.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/exec.c	2008-09-04 21:01:14.000000000 +0800
@@ -167,16 +167,15 @@
   }
   memset (pl->argv, '\0', ci->values_num * sizeof (char *));
 
   {
     char *tmp = strrchr (ci->values[1].value.string, '/');
     if (tmp == NULL)
-      strncpy (buffer, ci->values[1].value.string, sizeof (buffer));
+      sstrncpy (buffer, ci->values[1].value.string, sizeof (buffer));
     else
-      strncpy (buffer, tmp + 1, sizeof (buffer));
-    buffer[sizeof (buffer) - 1] = '\0';
+      sstrncpy (buffer, tmp + 1, sizeof (buffer));
   }
   pl->argv[0] = strdup (buffer);
   if (pl->argv[0] == NULL)
   {
     ERROR ("exec plugin: malloc failed.");
     sfree (pl->argv);
@@ -193,23 +192,22 @@
       pl->argv[i] = strdup (ci->values[i + 1].value.string);
     }
     else
     {
       if (ci->values[i + 1].type == OCONFIG_TYPE_NUMBER)
       {
-	snprintf (buffer, sizeof (buffer), "%lf",
+	ssnprintf (buffer, sizeof (buffer), "%lf",
 	    ci->values[i + 1].value.number);
       }
       else
       {
 	if (ci->values[i + 1].value.boolean)
-	  strncpy (buffer, "true", sizeof (buffer));
+	  sstrncpy (buffer, "true", sizeof (buffer));
 	else
-	  strncpy (buffer, "false", sizeof (buffer));
+	  sstrncpy (buffer, "false", sizeof (buffer));
       }
-      buffer[sizeof (buffer) - 1] = '\0';
 
       pl->argv[i] = strdup (buffer);
     }
 
     if (pl->argv[i] == NULL)
     {
@@ -489,25 +487,25 @@
 
   return (pid);
 } /* int fork_child }}} */
 
 static int parse_line (char *buffer) /* {{{ */
 {
-  char *fields[256];
-  int fields_num;
-
-  fields[0] = "PUTVAL";
-  fields_num = strsplit (buffer, fields + 1, STATIC_ARRAY_SIZE(fields) - 1);
-
-  if (strcasecmp (fields[1], "putval") == 0)
-    return (handle_putval (stdout, fields + 1, fields_num));
-  else if (strcasecmp (fields[1], "putnotif") == 0)
-    return (handle_putnotif (stdout, fields + 1, fields_num));
-
-  /* compatibility code */
-  return (handle_putval (stdout, fields, fields_num + 1));
+  if (strncasecmp ("PUTVAL", buffer, strlen ("PUTVAL")) == 0)
+    return (handle_putval (stdout, buffer));
+  else if (strncasecmp ("PUTNOTIF", buffer, strlen ("PUTNOTIF")) == 0)
+    return (handle_putnotif (stdout, buffer));
+  else
+  {
+    /* For backwards compatibility */
+    char tmp[1220];
+    /* Let's annoy the user a bit.. */
+    INFO ("exec plugin: Prepending `PUTVAL' to this line: %s", buffer);
+    ssnprintf (tmp, sizeof (tmp), "PUTVAL %s", buffer);
+    return (handle_putval (stdout, tmp));
+  }
 } /* int parse_line }}} */
 
 static void *exec_read_one (void *arg) /* {{{ */
 {
   program_list_t *pl = (program_list_t *) arg;
   int fd, fd_err, highest_fd;
@@ -636,13 +634,14 @@
   return (NULL);
 } /* void *exec_read_one }}} */
 
 static void *exec_notification_one (void *arg) /* {{{ */
 {
   program_list_t *pl = ((program_list_and_notification_t *) arg)->pl;
-  const notification_t *n = &((program_list_and_notification_t *) arg)->n;
+  notification_t *n = &((program_list_and_notification_t *) arg)->n;
+  notification_meta_t *meta;
   int fd;
   FILE *fh;
   int pid;
   int status;
   const char *severity;
 
@@ -685,22 +684,38 @@
     fprintf (fh, "PluginInstance: %s\n", n->plugin_instance);
   if (strlen (n->type) > 0)
     fprintf (fh, "Type: %s\n", n->type);
   if (strlen (n->type_instance) > 0)
     fprintf (fh, "TypeInstance: %s\n", n->type_instance);
 
+  for (meta = n->meta; meta != NULL; meta = meta->next)
+  {
+    if (meta->type == NM_TYPE_STRING)
+      fprintf (fh, "%s: %s\n", meta->name, meta->value_string);
+    else if (meta->type == NM_TYPE_SIGNED_INT)
+      fprintf (fh, "%s: %"PRIi64"\n", meta->name, meta->value_signed_int);
+    else if (meta->type == NM_TYPE_UNSIGNED_INT)
+      fprintf (fh, "%s: %"PRIu64"\n", meta->name, meta->value_unsigned_int);
+    else if (meta->type == NM_TYPE_DOUBLE)
+      fprintf (fh, "%s: %e\n", meta->name, meta->value_double);
+    else if (meta->type == NM_TYPE_BOOLEAN)
+      fprintf (fh, "%s: %s\n", meta->name,
+	  meta->value_boolean ? "true" : "false");
+  }
+
   fprintf (fh, "\n%s\n", n->message);
 
   fflush (fh);
   fclose (fh);
 
   waitpid (pid, &status, 0);
 
   DEBUG ("exec plugin: Child %i exited with status %i.",
       pid, status);
 
+  plugin_notification_meta_free (n);
   sfree (arg);
   pthread_exit ((void *) 0);
   return (NULL);
 } /* void *exec_notification_one }}} */
 
 static int exec_init (void) /* {{{ */
@@ -771,12 +786,17 @@
       continue;
     }
 
     pln->pl = pl;
     memcpy (&pln->n, n, sizeof (notification_t));
 
+    /* Set the `meta' member to NULL, otherwise `plugin_notification_meta_copy'
+     * will run into an endless loop. */
+    pln->n.meta = NULL;
+    plugin_notification_meta_copy (&pln->n, n);
+
     pthread_attr_init (&attr);
     pthread_attr_setdetachstate (&attr, PTHREAD_CREATE_DETACHED);
     pthread_create (&t, &attr, exec_notification_one, (void *) pln);
   } /* for (pl) */
 
   return (0);
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: filecount.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/hddtemp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/hddtemp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/hddtemp.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/hddtemp.c	2008-09-04 21:01:14.000000000 +0800
@@ -220,17 +220,16 @@
 		hddtemp_host = strdup (value);
 	}
 	else if (strcasecmp (key, "Port") == 0)
 	{
 		int port = (int) (atof (value));
 		if ((port > 0) && (port <= 65535))
-			snprintf (hddtemp_port, sizeof (hddtemp_port),
+			ssnprintf (hddtemp_port, sizeof (hddtemp_port),
 					"%i", port);
 		else
-			strncpy (hddtemp_port, value, sizeof (hddtemp_port));
-		hddtemp_port[sizeof (hddtemp_port) - 1] = '\0';
+			sstrncpy (hddtemp_port, value, sizeof (hddtemp_port));
 	}
 	else if (strcasecmp (key, "TranslateDevicename") == 0)
 	{
 		if ((strcasecmp ("true", value) == 0)
 				|| (strcasecmp ("yes", value) == 0)
 				|| (strcasecmp ("on", value) == 0))
@@ -427,13 +426,13 @@
 		return (strdup (drive));
 	}
 
 	if ((ret = (char *) malloc (128 * sizeof (char))) == NULL)
 		return (NULL);
 
-	if (snprintf (ret, 128, "%i-%i", list->major, list->minor) >= 128)
+	if (ssnprintf (ret, 128, "%i-%i", list->major, list->minor) >= 128)
 	{
 		free (ret);
 		return (NULL);
 	}
 
 	return (ret);
@@ -448,15 +447,16 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "hddtemp", sizeof (vl.plugin));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.type, "temperature", sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("temperature", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int hddtemp_read (void)
 {
 	char buf[1024];
 	char *fields[128];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/interface.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/interface.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/interface.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/interface.c	2008-09-04 21:01:14.000000000 +0800
@@ -196,15 +196,16 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "interface", sizeof (vl.plugin));
-	strncpy (vl.type_instance, dev, sizeof (vl.type_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, dev, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void if_submit */
 
 static int interface_read (void)
 {
 #if HAVE_GETIFADDRS
 	struct ifaddrs *if_list;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ipmi.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ipmi.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ipmi.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ipmi.c	2008-09-04 21:01:14.000000000 +0800
@@ -1,9 +1,10 @@
 /**
  * collectd - src/ipmi.c
  * Copyright (C) 2008  Florian octo Forster
+ * Copyright (C) 2008  Peter Holik
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -14,12 +15,13 @@
  * You should have received a copy of the GNU General Public License along
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
  *   Florian octo Forster <octo at verplant.org>
+ *   Peter Holik <peter at holik.at>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "utils_ignorelist.h"
@@ -38,33 +40,44 @@
 struct c_ipmi_sensor_list_s;
 typedef struct c_ipmi_sensor_list_s c_ipmi_sensor_list_t;
 
 struct c_ipmi_sensor_list_s
 {
   ipmi_sensor_id_t sensor_id;
+  char sensor_name[DATA_MAX_NAME_LEN];
+  char sensor_type[DATA_MAX_NAME_LEN];
+  int sensor_not_present;
   c_ipmi_sensor_list_t *next;
 };
 
 /*
  * Module global variables
  */
 static pthread_mutex_t sensor_list_lock = PTHREAD_MUTEX_INITIALIZER;
 static c_ipmi_sensor_list_t *sensor_list = NULL;
 
+static int c_ipmi_init_in_progress = 0;
 static int c_ipmi_active = 0;
 static pthread_t thread_id = (pthread_t) 0;
 
 static const char *config_keys[] =
 {
 	"Sensor",
-	"IgnoreSelected"
+	"IgnoreSelected",
+	"NotifySensorAdd",
+	"NotifySensorRemove",
+	"NotifySensorNotPresent"
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
 static ignorelist_t *ignorelist = NULL;
 
+static int c_ipmi_nofiy_add = 0;
+static int c_ipmi_nofiy_remove = 0;
+static int c_ipmi_nofiy_notpresent = 0;
+
 /*
  * Misc private functions
  */
 static void c_ipmi_error (const char *func, int status)
 {
   char errbuf[4096];
@@ -103,56 +116,140 @@
     ipmi_states_t *states,
     void *user_data)
 {
   value_t values[1];
   value_list_t vl = VALUE_LIST_INIT;
 
-  char sensor_name[IPMI_SENSOR_NAME_LEN];
-  char *sensor_name_ptr;
-  int sensor_type;
-  const char *type;
-
-  memset (sensor_name, 0, sizeof (sensor_name));
-  ipmi_sensor_get_name (sensor, sensor_name, sizeof (sensor_name));
-  sensor_name[sizeof (sensor_name) - 1] = 0;
-
-  sensor_name_ptr = strstr (sensor_name, ").");
-  if (sensor_name_ptr == NULL)
-    sensor_name_ptr = sensor_name;
-  else
-    sensor_name_ptr += 2;
+  c_ipmi_sensor_list_t *list_item = (c_ipmi_sensor_list_t *)user_data;
 
   if (err != 0)
   {
-    INFO ("ipmi plugin: sensor_read_handler: Removing sensor %s, "
-        "because it failed with status %#x.",
-        sensor_name_ptr, err);
-    sensor_list_remove (sensor);
+    if ((err & 0xff) == IPMI_NOT_PRESENT_CC)
+    {
+      if (list_item->sensor_not_present == 0)
+      {
+        list_item->sensor_not_present = 1;
+
+        INFO ("ipmi plugin: sensor_read_handler: sensor %s "
+            "not present.", list_item->sensor_name);
+
+        if (c_ipmi_nofiy_notpresent)
+        {
+          notification_t n = { NOTIF_WARNING, time(NULL), "", "", "ipmi",
+            "", "", "", NULL };
+
+          sstrncpy (n.host, hostname_g, sizeof (n.host));
+          sstrncpy (n.type_instance, list_item->sensor_name,
+              sizeof (n.type_instance));
+          sstrncpy (n.type, list_item->sensor_type, sizeof (n.type));
+          ssnprintf (n.message, sizeof (n.message),
+              "sensor %s not present", list_item->sensor_name);
+
+          plugin_dispatch_notification (&n);
+        }
+      }
+    }
+    else
+    {
+      INFO ("ipmi plugin: sensor_read_handler: Removing sensor %s, "
+          "because it failed with status %#x.",
+          list_item->sensor_name, err);
+      sensor_list_remove (sensor);
+    }
     return;
   }
+  else if (list_item->sensor_not_present == 1)
+  {
+    list_item->sensor_not_present = 0;
+
+    INFO ("ipmi plugin: sensor_read_handler: sensor %s present.",
+        list_item->sensor_name);
+
+    if (c_ipmi_nofiy_notpresent)
+    {
+      notification_t n = { NOTIF_OKAY, time(NULL), "", "", "ipmi",
+        "", "", "", NULL };
+
+      sstrncpy (n.host, hostname_g, sizeof (n.host));
+      sstrncpy (n.type_instance, list_item->sensor_name,
+          sizeof (n.type_instance));
+      sstrncpy (n.type, list_item->sensor_type, sizeof (n.type));
+      ssnprintf (n.message, sizeof (n.message),
+          "sensor %s present", list_item->sensor_name);
+
+      plugin_dispatch_notification (&n);
+    }
+  }
 
   if (value_present != IPMI_BOTH_VALUES_PRESENT)
   {
     INFO ("ipmi plugin: sensor_read_handler: Removing sensor %s, "
         "because it provides %s. If you need this sensor, "
         "please file a bug report.",
-        sensor_name_ptr,
+        list_item->sensor_name,
         (value_present == IPMI_RAW_VALUE_PRESENT)
         ? "only the raw value"
         : "no value");
     sensor_list_remove (sensor);
     return;
   }
 
-  /* Both `ignorelist' and `plugin_instance' may be NULL. */
-  if (ignorelist_match (ignorelist, sensor_name_ptr) != 0)
+  values[0].gauge = value;
+
+  vl.values = values;
+  vl.values_len = 1;
+  vl.time = time (NULL);
+
+  sstrncpy (vl.host, hostname_g, sizeof (vl.host));
+  sstrncpy (vl.plugin, "ipmi", sizeof (vl.plugin));
+  sstrncpy (vl.type, list_item->sensor_type, sizeof (vl.type));
+  sstrncpy (vl.type_instance, list_item->sensor_name, sizeof (vl.type_instance));
+
+  plugin_dispatch_values (&vl);
+} /* void sensor_read_handler */
+
+static int sensor_list_add (ipmi_sensor_t *sensor)
+{
+  ipmi_sensor_id_t sensor_id;
+  c_ipmi_sensor_list_t *list_item;
+  c_ipmi_sensor_list_t *list_prev;
+
+  char sensor_name[DATA_MAX_NAME_LEN];
+  char *sensor_name_ptr;
+  int sensor_type, len;
+  const char *type;
+  ipmi_entity_t *ent = ipmi_sensor_get_entity(sensor);
+
+  sensor_id = ipmi_sensor_convert_to_id (sensor);
+
+  memset (sensor_name, 0, sizeof (sensor_name));
+  ipmi_sensor_get_name (sensor, sensor_name, sizeof (sensor_name));
+  sensor_name[sizeof (sensor_name) - 1] = 0;
+
+  len = DATA_MAX_NAME_LEN - strlen(sensor_name);
+  strncat(sensor_name, " ", len--);
+  strncat(sensor_name, ipmi_entity_get_entity_id_string(ent), len);
+
+  sensor_name_ptr = strstr (sensor_name, ").");
+  if (sensor_name_ptr == NULL)
+    sensor_name_ptr = sensor_name;
+  else
   {
-    sensor_list_remove (sensor);
-    return;
+    char *sensor_name_ptr_id = strstr (sensor_name, "(");
+
+    sensor_name_ptr += 2;
+    len = DATA_MAX_NAME_LEN - strlen(sensor_name);
+    strncat(sensor_name, " ", len--);
+    strncat(sensor_name, sensor_name_ptr_id, 
+      MIN(sensor_name_ptr - sensor_name_ptr_id - 1, len));
   }
 
+  /* Both `ignorelist' and `plugin_instance' may be NULL. */
+  if (ignorelist_match (ignorelist, sensor_name_ptr) != 0)
+    return (0);
+
   /* FIXME: Use rate unit or base unit to scale the value */
 
   sensor_type = ipmi_sensor_get_sensor_type (sensor);
   switch (sensor_type)
   {
     case IPMI_SENSOR_TYPE_TEMPERATURE:
@@ -171,44 +268,22 @@
       type = "fanspeed";
       break;
 
     default:
       {
         const char *sensor_type_str;
-        
+
         sensor_type_str = ipmi_sensor_get_sensor_type_string (sensor);
-        INFO ("ipmi plugin: sensor_read_handler: Removing sensor %s, "
+        INFO ("ipmi plugin: sensor_list_add: Ignore sensor %s, "
             "because I don't know how to handle its type (%#x, %s). "
             "If you need this sensor, please file a bug report.",
             sensor_name_ptr, sensor_type, sensor_type_str);
-        sensor_list_remove (sensor);
-        return;
+        return (-1);
       }
   } /* switch (sensor_type) */
 
-  values[0].gauge = value;
-
-  vl.values = values;
-  vl.values_len = 1;
-  vl.time = time (NULL);
-
-  sstrncpy (vl.host, hostname_g, sizeof (vl.host));
-  sstrncpy (vl.plugin, "ipmi", sizeof (vl.plugin));
-  sstrncpy (vl.type_instance, sensor_name_ptr, sizeof (vl.type_instance));
-
-  plugin_dispatch_values (type, &vl);
-} /* void sensor_read_handler */
-
-static int sensor_list_add (ipmi_sensor_t *sensor)
-{
-  ipmi_sensor_id_t sensor_id;
-  c_ipmi_sensor_list_t *list_item;
-  c_ipmi_sensor_list_t *list_prev;
-
-  sensor_id = ipmi_sensor_convert_to_id (sensor);
-
   pthread_mutex_lock (&sensor_list_lock);
 
   list_prev = NULL;
   for (list_item = sensor_list;
       list_item != NULL;
       list_item = list_item->next)
@@ -235,14 +310,33 @@
 
   if (list_prev != NULL)
     list_prev->next = list_item;
   else
     sensor_list = list_item;
 
+  sstrncpy (list_item->sensor_name, sensor_name_ptr,
+            sizeof (list_item->sensor_name));
+  sstrncpy (list_item->sensor_type, type, sizeof (list_item->sensor_type));
+
   pthread_mutex_unlock (&sensor_list_lock);
 
+  if (c_ipmi_nofiy_add && (c_ipmi_init_in_progress == 0))
+  {
+    notification_t n = { NOTIF_OKAY, time(NULL), "", "", "ipmi",
+                         "", "", "", NULL };
+
+    sstrncpy (n.host, hostname_g, sizeof (n.host));
+    sstrncpy (n.type_instance, list_item->sensor_name,
+              sizeof (n.type_instance));
+    sstrncpy (n.type, list_item->sensor_type, sizeof (n.type));
+    ssnprintf (n.message, sizeof (n.message),
+              "sensor %s added", list_item->sensor_name);
+
+    plugin_dispatch_notification (&n);
+  }
+
   return (0);
 } /* int sensor_list_add */
 
 static int sensor_list_remove (ipmi_sensor_t *sensor)
 {
   ipmi_sensor_id_t sensor_id;
@@ -276,12 +370,27 @@
 
   list_prev = NULL;
   list_item->next = NULL;
 
   pthread_mutex_unlock (&sensor_list_lock);
 
+  if (c_ipmi_nofiy_remove && c_ipmi_active)
+  {
+    notification_t n = { NOTIF_WARNING, time(NULL), "", "",
+                         "ipmi", "", "", "", NULL };
+
+    sstrncpy (n.host, hostname_g, sizeof (n.host));
+    sstrncpy (n.type_instance, list_item->sensor_name,
+              sizeof (n.type_instance));
+    sstrncpy (n.type, list_item->sensor_type, sizeof (n.type));
+    ssnprintf (n.message, sizeof (n.message),
+              "sensor %s removed", list_item->sensor_name);
+
+    plugin_dispatch_notification (&n);
+  }
+
   free (list_item);
   return (0);
 } /* int sensor_list_remove */
 
 static int sensor_list_read_all (void)
 {
@@ -291,13 +400,13 @@
 
   for (list_item = sensor_list;
       list_item != NULL;
       list_item = list_item->next)
   {
     ipmi_sensor_id_get_reading (list_item->sensor_id,
-        sensor_read_handler, /* user data = */ NULL);
+        sensor_read_handler, /* user data = */ list_item);
   } /* for (list_item) */
 
   pthread_mutex_unlock (&sensor_list_lock);
 
   return (0);
 } /* int sensor_list_read_all */
@@ -382,13 +491,13 @@
     unsigned int port_num,
     int still_connected,
     void *user_data)
 {
   int status;
 
-  DEBUG ("domain_connection_change_handler (domain = %p, err = %i, "
+  printf ("domain_connection_change_handler (domain = %p, err = %i, "
       "conn_num = %u, port_num = %u, still_connected = %i, "
       "user_data = %p);\n",
       (void *) domain, err, conn_num, port_num, still_connected, user_data);
 
   status = ipmi_domain_add_entity_update_handler (domain,
       domain_entity_update_handler, /* user data = */ NULL);
@@ -449,13 +558,13 @@
   int status;
   os_handler_t *os_handler = NULL;
 
   status = thread_init (&os_handler);
   if (status != 0)
   {
-    ERROR ("ipmi plugin: thread_init failed.\n");
+    fprintf (stderr, "ipmi plugin: thread_init failed.\n");
     return ((void *) -1);
   }
 
   while (c_ipmi_active != 0)
   {
     struct timeval tv = { 1, 0 };
@@ -484,24 +593,48 @@
     if ((strcasecmp ("True", value) == 0)
 	|| (strcasecmp ("Yes", value) == 0)
 	|| (strcasecmp ("On", value) == 0))
       invert = 0;
     ignorelist_set_invert (ignorelist, invert);
   }
+  else if (strcasecmp ("NotifySensorAdd", key) == 0)
+  {
+    if ((strcasecmp ("True", value) == 0)
+        || (strcasecmp ("Yes", value) == 0)
+        || (strcasecmp ("On", value) == 0))
+      c_ipmi_nofiy_add = 1;
+  }
+  else if (strcasecmp ("NotifySensorRemove", key) == 0)
+  {
+    if ((strcasecmp ("True", value) == 0)
+        || (strcasecmp ("Yes", value) == 0)
+        || (strcasecmp ("On", value) == 0))
+      c_ipmi_nofiy_remove = 1;
+  }
+  else if (strcasecmp ("NotifySensorNotPresent", key) == 0)
+  {
+    if ((strcasecmp ("True", value) == 0)
+        || (strcasecmp ("Yes", value) == 0)
+        || (strcasecmp ("On", value) == 0))
+      c_ipmi_nofiy_notpresent = 1;
+  }
   else
   {
     return (-1);
   }
 
   return (0);
 } /* int c_ipmi_config */
 
 static int c_ipmi_init (void)
 {
   int status;
 
+  /* Don't send `ADD' notifications during startup (~ 1 minute) */
+  c_ipmi_init_in_progress = 1 + (60 / interval_g);
+
   c_ipmi_active = 1;
 
   status = pthread_create (&thread_id, /* attr = */ NULL, thread_main,
       /* user data = */ NULL);
   if (status != 0)
   {
@@ -520,13 +653,18 @@
   {
     INFO ("ipmi plugin: c_ipmi_read: I'm not active, returning false.");
     return (-1);
   }
 
   sensor_list_read_all ();
-  
+
+  if (c_ipmi_init_in_progress > 0)
+    c_ipmi_init_in_progress--;
+  else
+    c_ipmi_init_in_progress = 0;
+
   return (0);
 } /* int c_ipmi_read */
 
 static int c_ipmi_shutdown (void)
 {
   c_ipmi_active = 0;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/iptables.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/iptables.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/iptables.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/iptables.c	2008-09-04 21:01:14.000000000 +0800
@@ -111,24 +111,22 @@
 		if ((unsigned int)table_len >= sizeof(temp.table))
 		{
 			ERROR ("Table `%s' too long.", table);
 			free (value_copy);
 			return (1);
 		}
-		strncpy (temp.table, table, table_len);
-		temp.table[table_len] = '\0';
+		sstrncpy (temp.table, table, table_len);
 
 		chain_len = strlen (chain);
 		if ((unsigned int)chain_len >= sizeof(temp.chain))
 		{
 			ERROR ("Chain `%s' too long.", chain);
 			free (value_copy);
 			return (1);
 		}
-		strncpy (temp.chain, chain, chain_len);
-		temp.chain[chain_len] = '\0'; 
+		sstrncpy (temp.chain, chain, chain_len);
 
 		if (fields_num >= 3)
 		{
 		    char *comment = fields[2];
 		    int   rule = atoi (comment);
 
@@ -151,13 +149,13 @@
 		else
 		{
 		    temp.rule_type = RTYPE_COMMENT_ALL;
 		}
 
 		if (fields_num >= 4)
-		    strncpy (temp.name, fields[3], sizeof (temp.name) - 1);
+		    sstrncpy (temp.name, fields[3], sizeof (temp.name));
 
 		free (value_copy);
 		value_copy = NULL;
 		table = NULL;
 		chain = NULL;
 
@@ -221,37 +219,38 @@
     vl.values = values;
     vl.values_len = 1;
     vl.time = time (NULL);
     sstrncpy (vl.host, hostname_g, sizeof (vl.host));
     sstrncpy (vl.plugin, "iptables", sizeof (vl.plugin));
 
-    status = snprintf (vl.plugin_instance, sizeof (vl.plugin_instance),
+    status = ssnprintf (vl.plugin_instance, sizeof (vl.plugin_instance),
 	    "%s-%s", chain->table, chain->chain);
     if ((status < 1) || ((unsigned int)status >= sizeof (vl.plugin_instance)))
 	return (0);
 
     if (chain->name[0] != '\0')
     {
-	strncpy (vl.type_instance, chain->name, sizeof (vl.type_instance));
+	sstrncpy (vl.type_instance, chain->name, sizeof (vl.type_instance));
     }
     else
     {
 	if (chain->rule_type == RTYPE_NUM)
-	    snprintf (vl.type_instance, sizeof (vl.type_instance),
+	    ssnprintf (vl.type_instance, sizeof (vl.type_instance),
 		    "%i", chain->rule.num);
 	else
-	    strncpy (vl.type_instance, (char *) match->data,
+	    sstrncpy (vl.type_instance, (char *) match->data,
 		    sizeof (vl.type_instance));
     }
-    vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
 
+    sstrncpy (vl.type, "ipt_bytes", sizeof (vl.type));
     values[0].counter = (counter_t) entry->counters.bcnt;
-    plugin_dispatch_values ("ipt_bytes", &vl);
+    plugin_dispatch_values (&vl);
 
+    sstrncpy (vl.type, "ipt_packets", sizeof (vl.type));
     values[0].counter = (counter_t) entry->counters.pcnt;
-    plugin_dispatch_values ("ipt_packets", &vl);
+    plugin_dispatch_values (&vl);
 
     return (0);
 } /* void submit_match */
 
 static void submit_chain( iptc_handle_t *handle, ip_chain_t *chain ) {
     const struct ipt_entry *entry;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ipvs.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ipvs.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ipvs.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ipvs.c	2008-09-04 21:01:14.000000000 +0800
@@ -188,13 +188,13 @@
 		return 0;
 
 	addr.s_addr = se->addr;
 
 	/* inet_ntoa() returns a pointer to a statically allocated buffer
 	 * I hope non-glibc systems behave the same */
-	len = snprintf (pi, size, "%s_%s%u", inet_ntoa (addr),
+	len = ssnprintf (pi, size, "%s_%s%u", inet_ntoa (addr),
 			(se->protocol == IPPROTO_TCP) ? "TCP" : "UDP",
 			ntohs (se->port));
 
 	if ((0 > len) || (size <= len)) {
 		log_err ("plugin instance truncated: %s", pi);
 		return -1;
@@ -212,13 +212,13 @@
 		return 0;
 
 	addr.s_addr = de->addr;
 
 	/* inet_ntoa() returns a pointer to a statically allocated buffer
 	 * I hope non-glibc systems behave the same */
-	len = snprintf (ti, size, "%s_%u", inet_ntoa (addr),
+	len = ssnprintf (ti, size, "%s_%u", inet_ntoa (addr),
 			ntohs (de->port));
 
 	if ((0 > len) || (size <= len)) {
 		log_err ("type instance truncated: %s", ti);
 		return -1;
 	}
@@ -238,15 +238,17 @@
 	vl.time     = time (NULL);
 	vl.interval = interval_g;
 
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "ipvs", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, pi, sizeof (vl.plugin_instance));
-	sstrncpy (vl.type_instance, (NULL != ti) ? ti : "total", sizeof (vl.type_instance));
+	sstrncpy (vl.type, "connections", sizeof (vl.type));
+	sstrncpy (vl.type_instance, (NULL != ti) ? ti : "total",
+		sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("connections", &vl);
+	plugin_dispatch_values (&vl);
 	return;
 } /* cipvs_submit_connections */
 
 static void cipvs_submit_if (char *pi, char *t, char *ti,
 		counter_t rx, counter_t tx)
 {
@@ -262,24 +264,26 @@
 	vl.time     = time (NULL);
 	vl.interval = interval_g;
 
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "ipvs", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, pi, sizeof (vl.plugin_instance));
-	sstrncpy (vl.type_instance, (NULL != ti) ? ti : "total", sizeof (vl.type_instance));
+	sstrncpy (vl.type, t, sizeof (vl.type));
+	sstrncpy (vl.type_instance, (NULL != ti) ? ti : "total",
+		sizeof (vl.type_instance));
 
-	plugin_dispatch_values (t, &vl);
+	plugin_dispatch_values (&vl);
 	return;
 } /* cipvs_submit_if */
 
 static void cipvs_submit_dest (char *pi, struct ip_vs_dest_entry *de) {
 	struct ip_vs_stats_user stats = de->stats;
 
 	char ti[DATA_MAX_NAME_LEN];
 
-	if (0 != get_ti (de, ti, sizeof (ti)))
+	if (0 != get_ti (de, ti, DATA_MAX_NAME_LEN))
 		return;
 
 	cipvs_submit_connections (pi, ti, stats.conns);
 	cipvs_submit_if (pi, "if_packets", ti, stats.inpkts, stats.outpkts);
 	cipvs_submit_if (pi, "if_octets", ti, stats.inbytes, stats.outbytes);
 	return;
@@ -291,13 +295,13 @@
 	struct ip_vs_get_dests  *dests = ipvs_get_dests (se);
 
 	char pi[DATA_MAX_NAME_LEN];
 
 	int i = 0;
 
-	if (0 != get_pi (se, pi, sizeof (pi)))
+	if (0 != get_pi (se, pi, DATA_MAX_NAME_LEN))
 		return;
 
 	cipvs_submit_connections (pi, NULL, stats.conns);
 	cipvs_submit_if (pi, "if_packets", NULL, stats.inpkts, stats.outpkts);
 	cipvs_submit_if (pi, "if_octets", NULL, stats.inbytes, stats.outbytes);
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/irq.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/irq.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/irq.c	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/irq.c	2008-09-04 21:01:14.000000000 +0800
@@ -131,19 +131,20 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "irq", sizeof (vl.plugin));
+	sstrncpy (vl.type, "irq", sizeof (vl.type));
 
-	status = snprintf (vl.type_instance, sizeof (vl.type_instance),
+	status = ssnprintf (vl.type_instance, sizeof (vl.type_instance),
 			"%u", irq);
 	if ((status < 1) || ((unsigned int)status >= sizeof (vl.type_instance)))
 		return;
 
-	plugin_dispatch_values ("irq", &vl);
+	plugin_dispatch_values (&vl);
 } /* void irq_submit */
 
 static int irq_read (void)
 {
 #undef BUFSIZE
 #define BUFSIZE 256
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/libiptc/libip6tc.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/libiptc/libip6tc.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/libiptc/libip6tc.c	2008-11-25 21:04:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/libiptc/libip6tc.c	2008-09-04 21:00:54.000000000 +0800
@@ -128,13 +128,13 @@
 #define ALIGN			IP6T_ALIGN
 #define RETURN			IP6T_RETURN
 
 #include "libiptc.c"
 
 #define BIT6(a, l) \
- ((ntohl(a->s6_addr32[(l) / 32]) >> (31 - ((l) & 31))) & 1)
+ ((ntohl(a->in6_u.u6_addr32[(l) / 32]) >> (31 - ((l) & 31))) & 1)
 
 int
 ipv6_prefix_length(const struct in6_addr *a)
 {
 	int l, i;
 	for (l = 0; l < 128; l++) {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/libiptc/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/libiptc/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/libiptc/Makefile.in	2009-01-03 04:10:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/libiptc/Makefile.in	2008-09-05 16:53:52.000000000 +0800
@@ -77,12 +77,16 @@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
+BUILD_WITH_LIBOWCAPI_CPPFLAGS = @BUILD_WITH_LIBOWCAPI_CPPFLAGS@
+BUILD_WITH_LIBOWCAPI_LIBS = @BUILD_WITH_LIBOWCAPI_LIBS@
+BUILD_WITH_LIBPQ_CPPFLAGS = @BUILD_WITH_LIBPQ_CPPFLAGS@
+BUILD_WITH_LIBPQ_LDFLAGS = @BUILD_WITH_LIBPQ_LDFLAGS@
 BUILD_WITH_LIBRRD_CFLAGS = @BUILD_WITH_LIBRRD_CFLAGS@
 BUILD_WITH_LIBRRD_LDFLAGS = @BUILD_WITH_LIBRRD_LDFLAGS@
 BUILD_WITH_LIBSENSORS_CFLAGS = @BUILD_WITH_LIBSENSORS_CFLAGS@
 BUILD_WITH_LIBSENSORS_LDFLAGS = @BUILD_WITH_LIBSENSORS_LDFLAGS@
 BUILD_WITH_LIBSNMP_CFLAGS = @BUILD_WITH_LIBSNMP_CFLAGS@
 BUILD_WITH_LIBSNMP_LIBS = @BUILD_WITH_LIBSNMP_LIBS@
@@ -129,12 +133,14 @@
 KERNEL_DIR = @KERNEL_DIR@
 LDFLAGS = @LDFLAGS@
 LEX = @LEX@
 LEXLIB = @LEXLIB@
 LEX_OUTPUT_ROOT = @LEX_OUTPUT_ROOT@
 LIBLTDL = @LIBLTDL@
+LIBNOTIFY_CFLAGS = @LIBNOTIFY_CFLAGS@
+LIBNOTIFY_LIBS = @LIBNOTIFY_LIBS@
 LIBOBJS = @LIBOBJS@
 LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@
 LN_S = @LN_S@
 LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/Makefile.in	2009-01-03 04:10:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/Makefile.in	2008-09-05 16:53:52.000000000 +0800
@@ -85,12 +85,16 @@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
+BUILD_WITH_LIBOWCAPI_CPPFLAGS = @BUILD_WITH_LIBOWCAPI_CPPFLAGS@
+BUILD_WITH_LIBOWCAPI_LIBS = @BUILD_WITH_LIBOWCAPI_LIBS@
+BUILD_WITH_LIBPQ_CPPFLAGS = @BUILD_WITH_LIBPQ_CPPFLAGS@
+BUILD_WITH_LIBPQ_LDFLAGS = @BUILD_WITH_LIBPQ_LDFLAGS@
 BUILD_WITH_LIBRRD_CFLAGS = @BUILD_WITH_LIBRRD_CFLAGS@
 BUILD_WITH_LIBRRD_LDFLAGS = @BUILD_WITH_LIBRRD_LDFLAGS@
 BUILD_WITH_LIBSENSORS_CFLAGS = @BUILD_WITH_LIBSENSORS_CFLAGS@
 BUILD_WITH_LIBSENSORS_LDFLAGS = @BUILD_WITH_LIBSENSORS_LDFLAGS@
 BUILD_WITH_LIBSNMP_CFLAGS = @BUILD_WITH_LIBSNMP_CFLAGS@
 BUILD_WITH_LIBSNMP_LIBS = @BUILD_WITH_LIBSNMP_LIBS@
@@ -137,12 +141,14 @@
 KERNEL_DIR = @KERNEL_DIR@
 LDFLAGS = @LDFLAGS@
 LEX = @LEX@
 LEXLIB = @LEXLIB@
 LEX_OUTPUT_ROOT = @LEX_OUTPUT_ROOT@
 LIBLTDL = @LIBLTDL@
+LIBNOTIFY_CFLAGS = @LIBNOTIFY_CFLAGS@
+LIBNOTIFY_LIBS = @LIBNOTIFY_LIBS@
 LIBOBJS = @LIBOBJS@
 LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@
 LN_S = @LN_S@
 LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/parser.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/parser.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/parser.c	2008-12-20 20:01:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/parser.c	2008-07-06 20:52:40.000000000 +0800
@@ -117,13 +117,13 @@
 
 /* Enabling verbose error messages.  */
 #ifdef YYERROR_VERBOSE
 # undef YYERROR_VERBOSE
 # define YYERROR_VERBOSE 1
 #else
-# define YYERROR_VERBOSE 0
+# define YYERROR_VERBOSE 1
 #endif
 
 /* Enabling the token table.  */
 #ifndef YYTOKEN_TABLE
 # define YYTOKEN_TABLE 0
 #endif
@@ -440,15 +440,15 @@
       -1,    11,    -1,    22,    21,    -1,    21,    -1,    22,    -1
 };
 
 /* YYRLINE[YYN] -- source line where rule number YYN was defined.  */
 static const yytype_uint8 yyrline[] =
 {
-       0,    70,    70,    71,    75,    76,    77,    78,    82,    89,
-      98,   102,   112,   118,   128,   135,   151,   152,   153,   157,
-     167,   184
+       0,    73,    73,    74,    78,    79,    80,    81,    85,    92,
+     101,   105,   115,   121,   131,   138,   154,   155,   156,   160,
+     170,   187
 };
 #endif
 
 #if YYDEBUG || YYERROR_VERBOSE || YYTOKEN_TABLE
 /* YYTNAME[SYMBOL-NUM] -- String name of the symbol SYMBOL-NUM.
    First, the terminals, then, starting at YYNTOKENS, nonterminals.  */
@@ -1366,102 +1366,102 @@
 
 
   YY_REDUCE_PRINT (yyn);
   switch (yyn)
     {
         case 2:
-#line 70 "parser.y"
+#line 73 "parser.y"
     {(yyval.string) = unquote ((yyvsp[(1) - (1)].string));}
     break;
 
   case 3:
-#line 71 "parser.y"
+#line 74 "parser.y"
     {(yyval.string) = strdup ((yyvsp[(1) - (1)].string));}
     break;
 
   case 4:
-#line 75 "parser.y"
+#line 78 "parser.y"
     {(yyval.cv).value.number = (yyvsp[(1) - (1)].number); (yyval.cv).type = OCONFIG_TYPE_NUMBER;}
     break;
 
   case 5:
-#line 76 "parser.y"
+#line 79 "parser.y"
     {(yyval.cv).value.boolean = 1; (yyval.cv).type = OCONFIG_TYPE_BOOLEAN;}
     break;
 
   case 6:
-#line 77 "parser.y"
+#line 80 "parser.y"
     {(yyval.cv).value.boolean = 0; (yyval.cv).type = OCONFIG_TYPE_BOOLEAN;}
     break;
 
   case 7:
-#line 78 "parser.y"
+#line 81 "parser.y"
     {(yyval.cv).value.string = (yyvsp[(1) - (1)].string); (yyval.cv).type = OCONFIG_TYPE_STRING;}
     break;
 
   case 8:
-#line 83 "parser.y"
+#line 86 "parser.y"
     {
 	 (yyval.al) = (yyvsp[(1) - (2)].al);
 	 (yyval.al).argument_num++;
 	 (yyval.al).argument = realloc ((yyval.al).argument, (yyval.al).argument_num * sizeof (oconfig_value_t));
 	 (yyval.al).argument[(yyval.al).argument_num-1] = (yyvsp[(2) - (2)].cv);
 	}
     break;
 
   case 9:
-#line 90 "parser.y"
+#line 93 "parser.y"
     {
 	 (yyval.al).argument = malloc (sizeof (oconfig_value_t));
 	 (yyval.al).argument[0] = (yyvsp[(1) - (1)].cv);
 	 (yyval.al).argument_num = 1;
 	}
     break;
 
   case 10:
-#line 98 "parser.y"
+#line 101 "parser.y"
     {(yyval.string) = strdup ((yyvsp[(1) - (1)].string));}
     break;
 
   case 11:
-#line 103 "parser.y"
+#line 106 "parser.y"
     {
 	 memset (&(yyval.ci), '\0', sizeof ((yyval.ci)));
 	 (yyval.ci).key = (yyvsp[(1) - (3)].string);
 	 (yyval.ci).values = (yyvsp[(2) - (3)].al).argument;
 	 (yyval.ci).values_num = (yyvsp[(2) - (3)].al).argument_num;
 	}
     break;
 
   case 12:
-#line 113 "parser.y"
+#line 116 "parser.y"
     {
 	 memset (&(yyval.ci), '\0', sizeof ((yyval.ci)));
 	 (yyval.ci).key = (yyvsp[(2) - (4)].string);
 	}
     break;
 
   case 13:
-#line 119 "parser.y"
+#line 122 "parser.y"
     {
 	 memset (&(yyval.ci), '\0', sizeof ((yyval.ci)));
 	 (yyval.ci).key = (yyvsp[(2) - (5)].string);
 	 (yyval.ci).values = (yyvsp[(3) - (5)].al).argument;
 	 (yyval.ci).values_num = (yyvsp[(3) - (5)].al).argument_num;
 	}
     break;
 
   case 14:
-#line 129 "parser.y"
+#line 132 "parser.y"
     {
 	 (yyval.string) = (yyvsp[(3) - (5)].string);
 	}
     break;
 
   case 15:
-#line 136 "parser.y"
+#line 139 "parser.y"
     {
 	 if (strcmp ((yyvsp[(1) - (3)].ci).key, (yyvsp[(3) - (3)].string)) != 0)
 	 {
 		printf ("block_begin = %s; block_end = %s;\n", (yyvsp[(1) - (3)].ci).key, (yyvsp[(3) - (3)].string));
 	 	yyerror ("Block not closed..\n");
 		exit (1);
@@ -1471,41 +1471,41 @@
 	 (yyval.ci).children = (yyvsp[(2) - (3)].sl).statement;
 	 (yyval.ci).children_num = (yyvsp[(2) - (3)].sl).statement_num;
 	}
     break;
 
   case 16:
-#line 151 "parser.y"
+#line 154 "parser.y"
     {(yyval.ci) = (yyvsp[(1) - (1)].ci);}
     break;
 
   case 17:
-#line 152 "parser.y"
+#line 155 "parser.y"
     {(yyval.ci) = (yyvsp[(1) - (1)].ci);}
     break;
 
   case 18:
-#line 153 "parser.y"
+#line 156 "parser.y"
     {(yyval.ci).values_num = 0;}
     break;
 
   case 19:
-#line 158 "parser.y"
+#line 161 "parser.y"
     {
 	 (yyval.sl) = (yyvsp[(1) - (2)].sl);
 	 if (((yyvsp[(2) - (2)].ci).values_num > 0) || ((yyvsp[(2) - (2)].ci).children_num > 0))
 	 {
 		 (yyval.sl).statement_num++;
 		 (yyval.sl).statement = realloc ((yyval.sl).statement, (yyval.sl).statement_num * sizeof (oconfig_item_t));
 		 (yyval.sl).statement[(yyval.sl).statement_num-1] = (yyvsp[(2) - (2)].ci);
 	 }
 	}
     break;
 
   case 20:
-#line 168 "parser.y"
+#line 171 "parser.y"
     {
 	 if (((yyvsp[(1) - (1)].ci).values_num > 0) || ((yyvsp[(1) - (1)].ci).children_num > 0))
 	 {
 		 (yyval.sl).statement = malloc (sizeof (oconfig_item_t));
 		 (yyval.sl).statement[0] = (yyvsp[(1) - (1)].ci);
 		 (yyval.sl).statement_num = 1;
@@ -1516,13 +1516,13 @@
 		(yyval.sl).statement_num = 0;
 	 }
 	}
     break;
 
   case 21:
-#line 185 "parser.y"
+#line 188 "parser.y"
     {
 	 ci_root = malloc (sizeof (oconfig_item_t));
 	 memset (ci_root, '\0', sizeof (oconfig_item_t));
 	 ci_root->children = (yyvsp[(1) - (1)].sl).statement;
 	 ci_root->children_num = (yyvsp[(1) - (1)].sl).statement_num;
 	}
@@ -1741,13 +1741,13 @@
 #endif
   /* Make sure YYID is used.  */
   return YYID (yyresult);
 }
 
 
-#line 193 "parser.y"
+#line 196 "parser.y"
 
 static int yyerror (const char *s)
 {
 	char *text;
 
 	if (*yytext == '\n')
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/parser.y /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/parser.y
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/parser.y	2008-12-20 18:15:37.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/parser.y	2008-05-06 20:30:12.000000000 +0800
@@ -62,12 +62,15 @@
 /* statements */
 %type <ci> option
 %type <ci> statement
 %type <sl> statement_list
 %type <ci> entire_file
 
+/* pass an verbose, specific error message to yyerror() */
+%error-verbose
+
 %%
 string:
 	QUOTED_STRING		{$$ = unquote ($1);}
 	| UNQUOTED_STRING	{$$ = strdup ($1);}
 	;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/scanner.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/scanner.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/scanner.c	2009-01-03 05:20:51.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/scanner.c	2008-09-04 21:08:52.000000000 +0800
@@ -373,52 +373,54 @@
 	(yytext_ptr) = yy_bp; \
 	yyleng = (size_t) (yy_cp - yy_bp); \
 	(yy_hold_char) = *yy_cp; \
 	*yy_cp = '\0'; \
 	(yy_c_buf_p) = yy_cp;
 
-#define YY_NUM_RULES 13
-#define YY_END_OF_BUFFER 14
+#define YY_NUM_RULES 18
+#define YY_END_OF_BUFFER 19
 /* This struct is not used in this scanner,
    but its presence is necessary. */
 struct yy_trans_info
 	{
 	flex_int32_t yy_verify;
 	flex_int32_t yy_nxt;
 	};
-static yyconst flex_int16_t yy_accept[98] =
+static yyconst flex_int16_t yy_accept[118] =
     {   0,
-        0,    0,   14,   13,    1,    3,   13,    2,   13,   13,
-        4,   10,   10,   10,   10,    5,    6,   12,   12,   12,
-       12,   12,   12,    0,   11,    0,    2,    0,   10,   10,
-        0,   10,   10,   12,   12,   10,   10,   10,   10,   12,
-        8,   12,    7,   12,   12,    0,    0,   10,   10,   10,
-       10,   10,   12,   12,    0,    0,   10,   10,   10,   12,
-       10,    0,    0,    0,    0,    0,    0,    0,    0,    9,
-        9,    9,    9,    0,    9,    9,    9,    9,    9,    9,
-        9,    9,    9,    9,    9,    9,    9,    9,    9,    9,
-        9,    9,    9,    9,    9,    9,    0
+        0,    0,    0,    0,   19,   18,    1,    4,   18,   18,
+        2,   18,   18,    5,   11,   11,   11,   11,    6,    7,
+       13,   18,   13,   13,   13,   13,   13,   18,   15,    4,
+        0,   12,    0,    2,    0,   11,   11,    0,   11,   11,
+       13,   13,   11,   11,   11,   11,    3,    0,   13,    9,
+       13,    8,   13,   13,    0,   17,    0,   15,    0,   14,
+        0,    0,   11,   11,   11,   11,   11,   13,   13,    0,
+       16,    0,   14,    0,    0,   11,   11,   11,   13,   16,
+       11,    0,    0,    0,    0,    0,    0,    0,    0,   10,
+       10,   10,   10,    0,   10,   10,   10,   10,   10,   10,
 
+       10,   10,   10,   10,   10,   10,   10,   10,   10,   10,
+       10,   10,   10,   10,   10,   10,    0
     } ;
 
 static yyconst flex_int32_t yy_ec[256] =
     {   0,
         1,    1,    1,    1,    1,    1,    1,    2,    2,    3,
+        1,    1,    4,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
-        1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
-        1,    2,    1,    4,    5,    1,    1,    1,    1,    1,
-        1,    1,    6,    1,    6,    7,    8,    9,   10,   11,
-       12,   13,   14,   15,   16,   17,   17,   18,    1,   19,
-        1,   20,    1,    1,   21,   21,   21,   21,   22,   21,
-       23,   23,   23,   23,   23,   23,   23,   23,   23,   23,
-       23,   23,   23,   23,   23,   23,   23,   24,   23,   23,
-        1,   25,    1,    1,   23,    1,   26,   21,   21,   21,
-
-       27,   28,   23,   23,   23,   23,   23,   29,   23,   30,
-       31,   23,   23,   32,   33,   34,   35,   23,   23,   24,
-       36,   23,    1,    1,    1,    1,    1,    1,    1,    1,
+        1,    2,    1,    5,    6,    1,    1,    1,    1,    1,
+        1,    1,    7,    1,    7,    8,    9,   10,   11,   12,
+       13,   14,   15,   16,   17,   18,   18,   19,    1,   20,
+        1,   21,    1,    1,   22,   22,   22,   22,   23,   22,
+       24,   24,   24,   24,   24,   24,   24,   24,   24,   24,
+       24,   24,   24,   24,   24,   24,   24,   25,   24,   24,
+        1,   26,    1,    1,   24,    1,   27,   22,   22,   22,
+
+       28,   29,   24,   24,   24,   24,   24,   30,   24,   31,
+       32,   24,   24,   33,   34,   35,   36,   24,   24,   25,
+       37,   24,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
@@ -429,156 +431,172 @@
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1
     } ;
 
-static yyconst flex_int32_t yy_meta[37] =
+static yyconst flex_int32_t yy_meta[38] =
     {   0,
-        1,    1,    2,    1,    1,    1,    3,    1,    4,    5,
-        5,    5,    5,    5,    6,    6,    6,    7,    1,    1,
-        1,    8,    1,    1,    1,    1,    8,    1,    1,    1,
-        1,    1,    1,    1,    1,    1
+        1,    1,    2,    1,    1,    1,    1,    3,    1,    4,
+        5,    5,    5,    5,    5,    6,    6,    6,    7,    1,
+        1,    1,    8,    1,    1,    1,    1,    8,    1,    1,
+        1,    1,    1,    1,    1,    1,    1
     } ;
 
-static yyconst flex_int16_t yy_base[124] =
+static yyconst flex_int16_t yy_base[147] =
     {   0,
-        0,    0,  363,  364,  364,  364,   33,    0,  355,    0,
-      364,   52,   80,   96,  105,  364,  364,  113,  335,  329,
-       10,  327,  331,   35,  364,    0,    0,    0,  350,   19,
-       33,   46,  124,    0,  140,    0,    0,   32,  349,  326,
-        0,  326,    0,  318,  291,   46,  284,   50,  138,  170,
-      189,    0,  243,  234,    0,   45,    0,    0,   83,  178,
-        0,  189,  171,  197,  152,   92,  151,  140,  139,  126,
-      114,  206,  103,  126,   34,   33,   27,    0,  216,    0,
-        0,    0,  225,    0,    0,    0,    0,  234,  179,    0,
-        0,    0,    0,  178,  364,  364,  364,  251,  259,  265,
-
-      268,  274,  279,  283,  288,  291,  295,  299,  302,  306,
-      308,  312,  315,  318,  322,  325,  328,  331,  334,  337,
-      340,  343,  346
+        0,    0,  415,  414,  415,  418,  418,  418,  411,   33,
+        0,  405,    0,  418,   52,   80,   96,  105,  418,  418,
+      113,   36,  385,  379,   12,  377,  381,   45,  406,  418,
+       46,  418,   41,    0,    0,  399,   19,   42,   48,  124,
+        0,  140,    0,    0,   83,  398,  418,  402,  374,    0,
+      374,    0,  366,  339,   52,  418,   45,  337,  117,  418,
+      156,  287,  158,  170,  191,  210,    0,  193,  185,  174,
+      418,  184,  185,    0,   92,    0,    0,  128,  169,  186,
+        0,  184,  180,  218,  172,  173,  152,  140,  139,  123,
+      114,  227,   42,  178,   39,   36,   27,    0,  237,    0,
+
+        0,    0,  246,    0,    0,    0,    0,  255,  205,    0,
+        0,    0,    0,  258,  418,  418,  418,  276,  284,  292,
+      298,  301,  307,  315,  320,  326,  332,  337,  340,  344,
+      348,  351,  355,  357,  361,  364,  367,  371,  374,  377,
+      380,  383,  386,  389,  392,  395
     } ;
 
-static yyconst flex_int16_t yy_def[124] =
+static yyconst flex_int16_t yy_def[147] =
     {   0,
-       97,    1,   97,   97,   97,   97,   98,   99,  100,  101,
-       97,   97,   12,   13,   14,   97,   97,   14,   18,   18,
-       18,   18,   18,   98,   97,  102,   99,  101,  100,  101,
-      103,   12,   12,   18,   97,   15,   15,   15,   33,   18,
-       18,   18,   18,   18,   18,   98,   97,  101,  104,   97,
-       50,   35,   18,   18,  105,  106,   51,   51,   51,   18,
-      105,   97,  107,   97,  108,  109,  108,  108,  110,   97,
-      111,   97,  112,  113,  112,  112,  114,  115,   97,  116,
-      117,  118,   97,  119,  120,  121,  122,   97,   88,  123,
-      123,  123,  123,  123,   97,   97,    0,   97,   97,   97,
-
-       97,   97,   97,   97,   97,   97,   97,   97,   97,   97,
-       97,   97,   97,   97,   97,   97,   97,   97,   97,   97,
-       97,   97,   97
+      117,    1,  118,  118,  117,  117,  117,  117,  117,  119,
+      120,  121,  122,  117,  117,   15,   16,   17,  117,  117,
+       17,  117,   21,   21,   21,   21,   21,  123,  117,  117,
+      119,  117,  124,  120,  122,  121,  122,  125,   15,   15,
+       21,  117,   18,   18,   18,   40,  117,  117,   21,   21,
+       21,   21,   21,   21,  123,  117,  126,  117,  119,  117,
+      119,  117,  122,  127,  117,   65,   42,   21,   21,  123,
+      117,  123,  119,  128,  129,   66,   66,   66,   21,  123,
+      128,  117,  130,  117,  131,  132,  131,  131,  133,  117,
+      134,  117,  135,  136,  135,  135,  137,  138,  117,  139,
+
+      140,  141,  117,  142,  143,  144,  145,  117,  108,  146,
+      146,  146,  146,  146,  117,  117,    0,  117,  117,  117,
+      117,  117,  117,  117,  117,  117,  117,  117,  117,  117,
+      117,  117,  117,  117,  117,  117,  117,  117,  117,  117,
+      117,  117,  117,  117,  117,  117
     } ;
 
-static yyconst flex_int16_t yy_nxt[401] =
+static yyconst flex_int16_t yy_nxt[456] =
     {   0,
-        4,    5,    6,    7,    8,    9,   10,   11,   12,   13,
-       14,   15,   15,   15,   15,   15,   15,    4,   16,   17,
-       18,   18,   18,   18,    4,   18,   18,   19,   18,   20,
-       21,   18,   18,   22,   18,   23,   25,   42,   25,   43,
-       47,   48,   49,   50,   74,   47,   33,   33,   33,   25,
-       74,   74,   28,   62,   63,   64,   56,   26,   31,   26,
-       32,   32,   32,   32,   32,   32,   32,   32,   33,   34,
-       26,   47,   34,   34,   34,   35,   47,   34,   34,   34,
-       34,   34,   34,   34,   34,   34,   34,   34,   36,   36,
-       36,   36,   36,   36,   36,   36,   36,   30,   30,   30,
-
-       70,   71,   72,   34,   37,   37,   37,   37,   37,   38,
-       39,   39,   39,   39,   39,   39,   39,   39,   39,   97,
-       74,   34,   34,   34,   34,   34,   34,   34,   34,   34,
-       28,   74,   33,   33,   33,   33,   33,   33,   33,   33,
-       79,   80,   80,   74,   56,   66,   66,   34,   52,   52,
-       52,   52,   52,   52,   52,   52,   52,   66,   66,   47,
-       52,   52,   34,   34,   47,   52,   52,   52,   34,   34,
-       34,   34,   34,   34,   34,   34,   56,   66,   58,   58,
-       58,   58,   58,   59,   48,   48,   48,   95,   95,   95,
-       95,   47,   97,   97,   97,   66,   47,   48,   48,   48,
-
-       48,   48,   48,   66,   41,   68,   68,   68,   68,   68,
-       69,   62,   62,   62,   76,   76,   76,   76,   76,   77,
-       70,   70,   70,   74,   82,   82,   82,   82,   82,   83,
-       84,   84,   84,   87,   87,   87,   87,   87,   88,   89,
-       89,   89,   93,   93,   93,   94,   95,   95,   95,   95,
-       95,   24,   24,   24,   24,   24,   24,   24,   24,   27,
-       43,   27,   27,   27,   27,   27,   27,   29,   29,   29,
-       29,   30,   30,   30,   46,   60,   46,   46,   46,   46,
-       46,   46,   51,   51,   51,   57,   57,   57,   57,   55,
-       57,   61,   61,   61,   65,   65,   65,   67,   67,   67,
-
-       67,   62,   62,   62,   62,   73,   73,   73,   62,   62,
-       62,   75,   75,   75,   75,   70,   70,   70,   70,   78,
-       78,   70,   70,   43,   70,   81,   81,   81,   84,   84,
-       84,   85,   85,   85,   86,   86,   86,   89,   89,   89,
-       90,   90,   90,   91,   91,   91,   92,   92,   92,   96,
-       96,   96,   54,   41,   53,   31,   28,   45,   44,   41,
-       40,   28,   97,    3,   97,   97,   97,   97,   97,   97,
-       97,   97,   97,   97,   97,   97,   97,   97,   97,   97,
-       97,   97,   97,   97,   97,   97,   97,   97,   97,   97,
-       97,   97,   97,   97,   97,   97,   97,   97,   97,   97
-
+        6,    7,    8,    9,   10,   11,   12,   13,   14,   15,
+       16,   17,   18,   18,   18,   18,   18,   18,    6,   19,
+       20,   21,   21,   21,   21,   22,   21,   21,   23,   21,
+       24,   25,   21,   21,   26,   21,   27,   32,   47,   48,
+       51,   62,   52,   60,   61,   94,   62,   71,   72,   56,
+       32,   63,   64,   65,   94,   35,   56,   94,   33,   38,
+       94,   39,   39,   39,   39,   39,   39,   39,   39,   40,
+       57,   33,   41,   41,   41,   41,   42,   57,   41,   41,
+       41,   41,   41,   41,   41,   41,   41,   41,   41,   43,
+       43,   43,   43,   43,   43,   43,   43,   43,   40,   40,
+
+       40,   82,   83,   84,   41,   44,   44,   44,   44,   44,
+       45,   46,   46,   46,   46,   46,   46,   46,   46,   46,
+      117,   32,   41,   41,   41,   41,   41,   41,   41,   41,
+       41,   35,   94,   40,   40,   40,   40,   40,   40,   40,
+       40,   94,   33,   37,   37,   37,   86,   86,   41,   67,
+       67,   67,   67,   67,   67,   67,   67,   67,   73,   86,
+       32,   67,   67,   41,   41,   75,   67,   67,   67,   41,
+       41,   41,   41,   41,   41,   41,   41,   75,   56,   86,
+       62,   33,   90,   91,   92,   62,   80,   86,   56,   32,
+       56,   86,   62,   99,  100,  100,   50,   62,   75,   57,
+
+       77,   77,   77,   77,   77,   78,   63,   63,   63,   57,
+       33,   57,   52,   62,  115,  115,  115,  115,   62,   63,
+       63,   63,   63,   63,   63,   86,   79,   88,   88,   88,
+       88,   88,   89,   82,   82,   82,   96,   96,   96,   96,
+       96,   97,   90,   90,   90,   94,  102,  102,  102,  102,
+      102,  103,  104,  104,  104,  107,  107,  107,  107,  107,
+      108,  109,  109,  109,  113,  113,  113,  114,  115,  115,
+      115,  115,  115,  117,  117,  117,   28,   28,   28,   28,
+       28,   28,   28,   28,   31,   31,   31,   31,   31,   31,
+       31,   31,   34,   74,   34,   34,   34,   34,   34,   34,
+
+       36,   36,   36,   36,   37,   37,   37,   55,   55,   55,
+       55,   55,   55,   55,   55,   59,   59,   59,   59,   59,
+       59,   59,   59,   66,   66,   66,   70,   70,   70,   70,
+       70,   70,   70,   70,   76,   76,   76,   76,   58,   76,
+       81,   81,   81,   85,   85,   85,   87,   87,   87,   87,
+       82,   82,   82,   82,   93,   93,   93,   82,   82,   82,
+       95,   95,   95,   95,   90,   90,   90,   90,   98,   98,
+       90,   90,   52,   90,  101,  101,  101,  104,  104,  104,
+      105,  105,  105,  106,  106,  106,  109,  109,  109,  110,
+      110,  110,  111,  111,  111,  112,  112,  112,  116,  116,
+
+      116,   69,   50,   68,   47,   38,   35,   58,   54,   53,
+       50,   49,   35,   30,  117,   29,    6,    5,  117,  117,
+      117,  117,  117,  117,  117,  117,  117,  117,  117,  117,
+      117,  117,  117,  117,  117,  117,  117,  117,  117,  117,
+      117,  117,  117,  117,  117,  117,  117,  117,  117,  117,
+      117,  117,  117,  117,  117
     } ;
 
-static yyconst flex_int16_t yy_chk[401] =
+static yyconst flex_int16_t yy_chk[456] =
     {   0,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
         1,    1,    1,    1,    1,    1,    1,    1,    1,    1,
-        1,    1,    1,    1,    1,    1,    7,   21,   24,   21,
-       30,   31,   31,   31,   77,   30,   38,   38,   38,   46,
-       76,   75,   32,   56,   56,   56,   48,    7,   12,   24,
-       12,   12,   12,   12,   12,   12,   12,   12,   12,   32,
-       46,   48,   12,   12,   12,   12,   48,   12,   12,   12,
-       12,   12,   12,   12,   12,   12,   12,   12,   13,   13,
-       13,   13,   13,   13,   13,   13,   13,   59,   59,   59,
-
-       66,   66,   66,   13,   14,   14,   14,   14,   14,   14,
-       14,   14,   14,   15,   15,   15,   15,   15,   15,   18,
-       73,   18,   18,   18,   18,   18,   18,   18,   18,   18,
-       33,   71,   33,   33,   33,   33,   33,   33,   33,   33,
-       74,   74,   74,   70,   49,   69,   68,   33,   35,   35,
-       35,   35,   35,   35,   35,   35,   35,   67,   65,   49,
-       35,   35,   35,   35,   49,   35,   35,   35,   35,   35,
-       35,   35,   35,   35,   35,   35,   50,   63,   50,   50,
-       50,   50,   50,   50,   50,   50,   50,   89,   89,   89,
-       89,   50,   94,   94,   94,   62,   50,   51,   51,   51,
-
-       51,   51,   51,   64,   60,   64,   64,   64,   64,   64,
-       64,   64,   64,   64,   72,   72,   72,   72,   72,   72,
-       72,   72,   72,   72,   79,   79,   79,   79,   79,   79,
-       79,   79,   79,   83,   83,   83,   83,   83,   83,   83,
-       83,   83,   88,   88,   88,   88,   88,   88,   88,   88,
-       88,   98,   98,   98,   98,   98,   98,   98,   98,   99,
-       54,   99,   99,   99,   99,   99,   99,  100,  100,  100,
-      100,  101,  101,  101,  102,   53,  102,  102,  102,  102,
-      102,  102,  103,  103,  103,  104,  104,  104,  104,   47,
-      104,  105,  105,  105,  106,  106,  106,  107,  107,  107,
-
-      107,  108,  108,  108,  108,  109,  109,  109,  110,  110,
-      110,  111,  111,  111,  111,  112,  112,  112,  112,  113,
-      113,  114,  114,   45,  114,  115,  115,  115,  116,  116,
-      116,  117,  117,  117,  118,  118,  118,  119,  119,  119,
-      120,  120,  120,  121,  121,  121,  122,  122,  122,  123,
-      123,  123,   44,   42,   40,   39,   29,   23,   22,   20,
-       19,    9,    3,   97,   97,   97,   97,   97,   97,   97,
-       97,   97,   97,   97,   97,   97,   97,   97,   97,   97,
-       97,   97,   97,   97,   97,   97,   97,   97,   97,   97,
-       97,   97,   97,   97,   97,   97,   97,   97,   97,   97
-
+        1,    1,    1,    1,    1,    1,    1,   10,   22,   22,
+       25,   37,   25,   33,   33,   97,   37,   57,   57,   28,
+       31,   38,   38,   38,   96,   39,   55,   95,   10,   15,
+       93,   15,   15,   15,   15,   15,   15,   15,   15,   15,
+       28,   31,   39,   15,   15,   15,   15,   55,   15,   15,
+       15,   15,   15,   15,   15,   15,   15,   15,   15,   16,
+       16,   16,   16,   16,   16,   16,   16,   16,   45,   45,
+
+       45,   75,   75,   75,   16,   17,   17,   17,   17,   17,
+       17,   17,   17,   17,   18,   18,   18,   18,   18,   18,
+       21,   59,   21,   21,   21,   21,   21,   21,   21,   21,
+       21,   40,   91,   40,   40,   40,   40,   40,   40,   40,
+       40,   90,   59,   78,   78,   78,   89,   88,   40,   42,
+       42,   42,   42,   42,   42,   42,   42,   42,   61,   87,
+       61,   42,   42,   42,   42,   63,   42,   42,   42,   42,
+       42,   42,   42,   42,   42,   42,   42,   64,   70,   85,
+       63,   61,   86,   86,   86,   63,   72,   83,   72,   73,
+       80,   82,   64,   94,   94,   94,   79,   64,   65,   70,
+
+       65,   65,   65,   65,   65,   65,   65,   65,   65,   72,
+       73,   80,   69,   65,  109,  109,  109,  109,   65,   66,
+       66,   66,   66,   66,   66,   84,   68,   84,   84,   84,
+       84,   84,   84,   84,   84,   84,   92,   92,   92,   92,
+       92,   92,   92,   92,   92,   92,   99,   99,   99,   99,
+       99,   99,   99,   99,   99,  103,  103,  103,  103,  103,
+      103,  103,  103,  103,  108,  108,  108,  108,  108,  108,
+      108,  108,  108,  114,  114,  114,  118,  118,  118,  118,
+      118,  118,  118,  118,  119,  119,  119,  119,  119,  119,
+      119,  119,  120,   62,  120,  120,  120,  120,  120,  120,
+
+      121,  121,  121,  121,  122,  122,  122,  123,  123,  123,
+      123,  123,  123,  123,  123,  124,  124,  124,  124,  124,
+      124,  124,  124,  125,  125,  125,  126,  126,  126,  126,
+      126,  126,  126,  126,  127,  127,  127,  127,   58,  127,
+      128,  128,  128,  129,  129,  129,  130,  130,  130,  130,
+      131,  131,  131,  131,  132,  132,  132,  133,  133,  133,
+      134,  134,  134,  134,  135,  135,  135,  135,  136,  136,
+      137,  137,   54,  137,  138,  138,  138,  139,  139,  139,
+      140,  140,  140,  141,  141,  141,  142,  142,  142,  143,
+      143,  143,  144,  144,  144,  145,  145,  145,  146,  146,
+
+      146,   53,   51,   49,   48,   46,   36,   29,   27,   26,
+       24,   23,   12,    9,    5,    4,    3,  117,  117,  117,
+      117,  117,  117,  117,  117,  117,  117,  117,  117,  117,
+      117,  117,  117,  117,  117,  117,  117,  117,  117,  117,
+      117,  117,  117,  117,  117,  117,  117,  117,  117,  117,
+      117,  117,  117,  117,  117
     } ;
 
 /* Table of booleans, true if rule could match eol. */
-static yyconst flex_int32_t yy_rule_can_match_eol[14] =
+static yyconst flex_int32_t yy_rule_can_match_eol[19] =
     {   0,
-0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0,     };
+0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0,     };
 
 static yy_state_type yy_last_accepting_state;
 static char *yy_last_accepting_cpos;
 
 extern int yy_flex_debug;
 int yy_flex_debug = 0;
@@ -592,12 +610,13 @@
 #define YY_RESTORE_YY_MORE_OFFSET
 char *yytext;
 #line 1 "scanner.l"
 /**
  * oconfig - src/scanner.l
  * Copyright (C) 2007  Florian octo Forster <octo at verplant.org>
+ * Copyright (C) 2008  Sebastian tokkee Harl <sh at tokkee.org>
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but WITHOUT
@@ -606,20 +625,38 @@
  * more details.
  *
  * You should have received a copy of the GNU General Public License along with
  * this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  */
-#line 20 "scanner.l"
+#line 21 "scanner.l"
 #include <stdlib.h>
 #include "oconfig.h"
 #include "aux_types.h"
 #include "parser.h"
-#line 618 "scanner.c"
+
+/* multiline string buffer */
+static char *ml_buffer = NULL;
+static int   ml_pos    = 0;
+static int   ml_len    = 0;
+
+#define ml_free (ml_len - ml_pos)
+
+static void ml_append (char *);
+
+#ifdef yyterminate
+# undef yyterminate
+#endif
+#define yyterminate() \
+	do { free (ml_buffer); ml_buffer = NULL; ml_pos = 0; ml_len = 0; \
+		return YY_NULL; } while (0)
+
+#line 654 "scanner.c"
 
 #define INITIAL 0
+#define ML 1
 
 #ifndef YY_NO_UNISTD_H
 /* Special case for "unistd.h", since it is non-ANSI. We include it way
  * down here because we want the user's section 1 to have been scanned first.
  * The user has a chance to override it with an option.
  */
@@ -783,25 +820,28 @@
 /* Code executed at the end of each rule. */
 #ifndef YY_BREAK
 #define YY_BREAK break;
 #endif
 
 #define YY_RULE_SETUP \
+	if ( yyleng > 0 ) \
+		YY_CURRENT_BUFFER_LVALUE->yy_at_bol = \
+				(yytext[yyleng - 1] == '\n'); \
 	YY_USER_ACTION
 
 /** The main scanner function which does all the work.
  */
 YY_DECL
 {
 	register yy_state_type yy_current_state;
 	register char *yy_cp, *yy_bp;
 	register int yy_act;
     
-#line 42 "scanner.l"
+#line 62 "scanner.l"
 
-#line 802 "scanner.c"
+#line 842 "scanner.c"
 
 	if ( !(yy_init) )
 		{
 		(yy_init) = 1;
 
 #ifdef YY_USER_INIT
@@ -836,31 +876,32 @@
 		/* yy_bp points to the position in yy_ch_buf of the start of
 		 * the current run.
 		 */
 		yy_bp = yy_cp;
 
 		yy_current_state = (yy_start);
+		yy_current_state += YY_AT_BOL();
 yy_match:
 		do
 			{
 			register YY_CHAR yy_c = yy_ec[YY_SC_TO_UI(*yy_cp)];
 			if ( yy_accept[yy_current_state] )
 				{
 				(yy_last_accepting_state) = yy_current_state;
 				(yy_last_accepting_cpos) = yy_cp;
 				}
 			while ( yy_chk[yy_base[yy_current_state] + yy_c] != yy_current_state )
 				{
 				yy_current_state = (int) yy_def[yy_current_state];
-				if ( yy_current_state >= 98 )
+				if ( yy_current_state >= 118 )
 					yy_c = yy_meta[(unsigned int) yy_c];
 				}
 			yy_current_state = yy_nxt[yy_base[yy_current_state] + (unsigned int) yy_c];
 			++yy_cp;
 			}
-		while ( yy_base[yy_current_state] != 364 );
+		while ( yy_base[yy_current_state] != 418 );
 
 yy_find_action:
 		yy_act = yy_accept[yy_current_state];
 		if ( yy_act == 0 )
 			{ /* have to back up */
 			yy_cp = (yy_last_accepting_cpos);
@@ -889,77 +930,138 @@
 			*yy_cp = (yy_hold_char);
 			yy_cp = (yy_last_accepting_cpos);
 			yy_current_state = (yy_last_accepting_state);
 			goto yy_find_action;
 
 case 1:
-#line 44 "scanner.l"
+#line 64 "scanner.l"
 case 2:
 YY_RULE_SETUP
-#line 44 "scanner.l"
+#line 64 "scanner.l"
 {/* ignore */}
 	YY_BREAK
 case 3:
 /* rule 3 can match eol */
 YY_RULE_SETUP
-#line 46 "scanner.l"
-{return (EOL);}
+#line 66 "scanner.l"
+{/* continue line */}
 	YY_BREAK
 case 4:
+/* rule 4 can match eol */
 YY_RULE_SETUP
-#line 47 "scanner.l"
-{return (SLASH);}
+#line 68 "scanner.l"
+{return (EOL);}
 	YY_BREAK
 case 5:
 YY_RULE_SETUP
-#line 48 "scanner.l"
-{return (OPENBRAC);}
+#line 69 "scanner.l"
+{return (SLASH);}
 	YY_BREAK
 case 6:
 YY_RULE_SETUP
-#line 49 "scanner.l"
-{return (CLOSEBRAC);}
+#line 70 "scanner.l"
+{return (OPENBRAC);}
 	YY_BREAK
 case 7:
 YY_RULE_SETUP
-#line 50 "scanner.l"
-{yylval.boolean = 1; return (TRUE);}
+#line 71 "scanner.l"
+{return (CLOSEBRAC);}
 	YY_BREAK
 case 8:
 YY_RULE_SETUP
-#line 51 "scanner.l"
-{yylval.boolean = 0; return (FALSE);}
+#line 72 "scanner.l"
+{yylval.boolean = 1; return (TRUE);}
 	YY_BREAK
 case 9:
 YY_RULE_SETUP
-#line 53 "scanner.l"
-{yylval.string = yytext; return (UNQUOTED_STRING);}
+#line 73 "scanner.l"
+{yylval.boolean = 0; return (FALSE);}
 	YY_BREAK
 case 10:
 YY_RULE_SETUP
-#line 55 "scanner.l"
-{yylval.number = strtod (yytext, NULL); return (NUMBER);}
+#line 75 "scanner.l"
+{yylval.string = yytext; return (UNQUOTED_STRING);}
 	YY_BREAK
 case 11:
-/* rule 11 can match eol */
 YY_RULE_SETUP
-#line 57 "scanner.l"
-{yylval.string = yytext; return (QUOTED_STRING);}
+#line 77 "scanner.l"
+{yylval.number = strtod (yytext, NULL); return (NUMBER);}
 	YY_BREAK
 case 12:
+/* rule 12 can match eol */
 YY_RULE_SETUP
-#line 58 "scanner.l"
-{yylval.string = yytext; return (UNQUOTED_STRING);}
+#line 79 "scanner.l"
+{yylval.string = yytext; return (QUOTED_STRING);}
 	YY_BREAK
 case 13:
 YY_RULE_SETUP
-#line 59 "scanner.l"
+#line 80 "scanner.l"
+{yylval.string = yytext; return (UNQUOTED_STRING);}
+	YY_BREAK
+case 14:
+/* rule 14 can match eol */
+YY_RULE_SETUP
+#line 82 "scanner.l"
+{
+	int len = strlen (yytext);
+
+	ml_pos = 0;
+
+	/* remove "\\<EOL>" */
+	if ('\r' == yytext[len - 2])
+		len -= 3;
+	else
+		len -= 2;
+	yytext[len] = '\0';
+
+	ml_append (yytext);
+	BEGIN (ML);
+}
+	YY_BREAK
+case 15:
+YY_RULE_SETUP
+#line 97 "scanner.l"
+{/* remove leading white-space */}
+	YY_BREAK
+case 16:
+/* rule 16 can match eol */
+YY_RULE_SETUP
+#line 98 "scanner.l"
+{
+	int len = strlen (yytext);
+
+	/* remove "\\<EOL>" */
+	if ('\r' == yytext[len - 2])
+		len -= 3;
+	else
+		len -= 2;
+	yytext[len] = '\0';
+
+	ml_append(yytext);
+}
+	YY_BREAK
+case 17:
+/* rule 17 can match eol */
+YY_RULE_SETUP
+#line 110 "scanner.l"
+{
+	ml_append(yytext);
+	yylval.string = ml_buffer;
+
+	BEGIN (INITIAL);
+	return (QUOTED_STRING);
+}
+	YY_BREAK
+case 18:
+YY_RULE_SETUP
+#line 117 "scanner.l"
 ECHO;
 	YY_BREAK
-#line 959 "scanner.c"
+#line 1060 "scanner.c"
 case YY_STATE_EOF(INITIAL):
+case YY_STATE_EOF(ML):
 	yyterminate();
 
 	case YY_END_OF_BUFFER:
 		{
 		/* Amount of text matched not including the EOB char. */
 		int yy_amount_of_matched_text = (int) (yy_cp - (yytext_ptr)) - 1;
@@ -1232,25 +1334,26 @@
     static yy_state_type yy_get_previous_state (void)
 {
 	register yy_state_type yy_current_state;
 	register char *yy_cp;
     
 	yy_current_state = (yy_start);
+	yy_current_state += YY_AT_BOL();
 
 	for ( yy_cp = (yytext_ptr) + YY_MORE_ADJ; yy_cp < (yy_c_buf_p); ++yy_cp )
 		{
 		register YY_CHAR yy_c = (*yy_cp ? yy_ec[YY_SC_TO_UI(*yy_cp)] : 1);
 		if ( yy_accept[yy_current_state] )
 			{
 			(yy_last_accepting_state) = yy_current_state;
 			(yy_last_accepting_cpos) = yy_cp;
 			}
 		while ( yy_chk[yy_base[yy_current_state] + yy_c] != yy_current_state )
 			{
 			yy_current_state = (int) yy_def[yy_current_state];
-			if ( yy_current_state >= 98 )
+			if ( yy_current_state >= 118 )
 				yy_c = yy_meta[(unsigned int) yy_c];
 			}
 		yy_current_state = yy_nxt[yy_base[yy_current_state] + (unsigned int) yy_c];
 		}
 
 	return yy_current_state;
@@ -1272,17 +1375,17 @@
 		(yy_last_accepting_state) = yy_current_state;
 		(yy_last_accepting_cpos) = yy_cp;
 		}
 	while ( yy_chk[yy_base[yy_current_state] + yy_c] != yy_current_state )
 		{
 		yy_current_state = (int) yy_def[yy_current_state];
-		if ( yy_current_state >= 98 )
+		if ( yy_current_state >= 118 )
 			yy_c = yy_meta[(unsigned int) yy_c];
 		}
 	yy_current_state = yy_nxt[yy_base[yy_current_state] + (unsigned int) yy_c];
-	yy_is_jam = (yy_current_state == 97);
+	yy_is_jam = (yy_current_state == 117);
 
 	return yy_is_jam ? 0 : yy_current_state;
 }
 
     static void yyunput (int c, register char * yy_bp )
 {
@@ -1392,13 +1495,14 @@
 		}
 
 	c = *(unsigned char *) (yy_c_buf_p);	/* cast for 8-bit char's */
 	*(yy_c_buf_p) = '\0';	/* preserve yytext */
 	(yy_hold_char) = *++(yy_c_buf_p);
 
-	if ( c == '\n' )
+	YY_CURRENT_BUFFER_LVALUE->yy_at_bol = (c == '\n');
+	if ( YY_CURRENT_BUFFER_LVALUE->yy_at_bol )
 		   
     yylineno++;
 ;
 
 	return c;
 }
@@ -1962,10 +2066,30 @@
 {
 	free( (char *) ptr );	/* see yyrealloc() for (char *) cast */
 }
 
 #define YYTABLES_NAME "yytables"
 
-#line 59 "scanner.l"
+#line 117 "scanner.l"
+
+
+static void ml_append (char *string)
+{
+	int len = strlen (string);
+	int s;
+
+	if (ml_free <= len) {
+		ml_len += len - ml_free + 1;
+		ml_buffer = (char *)realloc (ml_buffer, ml_len);
+		if (NULL == ml_buffer)
+			YY_FATAL_ERROR ("out of dynamic memory in ml_append");
+	}
 
+	s = snprintf (ml_buffer + ml_pos, ml_free, "%s", string);
+	if ((0 > s) || (ml_free <= s))
+		YY_FATAL_ERROR ("failed to write to multiline buffer");
+
+	ml_pos += s;
+	return;
+} /* ml_append */
 
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/scanner.l /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/scanner.l
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboconfig/scanner.l	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboconfig/scanner.l	2008-09-04 21:01:14.000000000 +0800
@@ -1,9 +1,10 @@
 /**
  * oconfig - src/scanner.l
  * Copyright (C) 2007  Florian octo Forster <octo at verplant.org>
+ * Copyright (C) 2008  Sebastian tokkee Harl <sh at tokkee.org>
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but WITHOUT
@@ -18,17 +19,36 @@
 
 %{
 #include <stdlib.h>
 #include "oconfig.h"
 #include "aux_types.h"
 #include "parser.h"
+
+/* multiline string buffer */
+static char *ml_buffer = NULL;
+static int   ml_pos    = 0;
+static int   ml_len    = 0;
+
+#define ml_free (ml_len - ml_pos)
+
+static void ml_append (char *);
+
+#ifdef yyterminate
+# undef yyterminate
+#endif
+#define yyterminate() \
+	do { free (ml_buffer); ml_buffer = NULL; ml_pos = 0; ml_len = 0; \
+		return YY_NULL; } while (0)
 %}
 %option yylineno
 %option noyywrap
+%x ML
 WHITE_SPACE [\ \t\b]
-QUOTED_STRING \"([^\\"]+|\\.)*\"
+NON_WHITE_SPACE [^\ \t\b]
+EOL (\r\n|\n)
+QUOTED_STRING ([^\\"]+|\\.)*
 UNQUOTED_STRING [0-9A-Za-z_]+
 HEX_NUMBER 0[xX][0-9a-fA-F]+
 OCT_NUMBER 0[0-7]+
 DEC_NUMBER [\+\-]?[0-9]+
 FLOAT_NUMBER [\+\-]?[0-9]*\.[0-9]+([eE][\+\-][0-9]+)?
 NUMBER ({FLOAT_NUMBER}|{HEX_NUMBER}|{OCT_NUMBER}|{DEC_NUMBER})
@@ -40,20 +60,78 @@
 IPV4_ADDR {IP_BYTE}\.{IP_BYTE}\.{IP_BYTE}\.{IP_BYTE}(:{PORT})?
 
 %%
 {WHITE_SPACE}		|
 {COMMENT}		{/* ignore */}
 
-\n			{return (EOL);}
+\\{EOL}			{/* continue line */}
+
+{EOL}			{return (EOL);}
 "/"			{return (SLASH);}
 "<"			{return (OPENBRAC);}
 ">"			{return (CLOSEBRAC);}
 {BOOL_TRUE}		{yylval.boolean = 1; return (TRUE);}
 {BOOL_FALSE}		{yylval.boolean = 0; return (FALSE);}
 
 {IPV4_ADDR}		{yylval.string = yytext; return (UNQUOTED_STRING);}
 
 {NUMBER}		{yylval.number = strtod (yytext, NULL); return (NUMBER);}
 
-{QUOTED_STRING}		{yylval.string = yytext; return (QUOTED_STRING);}
+\"{QUOTED_STRING}\"	{yylval.string = yytext; return (QUOTED_STRING);}
 {UNQUOTED_STRING}	{yylval.string = yytext; return (UNQUOTED_STRING);}
+
+\"{QUOTED_STRING}\\{EOL} {
+	int len = strlen (yytext);
+
+	ml_pos = 0;
+
+	/* remove "\\<EOL>" */
+	if ('\r' == yytext[len - 2])
+		len -= 3;
+	else
+		len -= 2;
+	yytext[len] = '\0';
+
+	ml_append (yytext);
+	BEGIN (ML);
+}
+<ML>^{WHITE_SPACE}+ {/* remove leading white-space */}
+<ML>{NON_WHITE_SPACE}{QUOTED_STRING}\\{EOL} {
+	int len = strlen (yytext);
+
+	/* remove "\\<EOL>" */
+	if ('\r' == yytext[len - 2])
+		len -= 3;
+	else
+		len -= 2;
+	yytext[len] = '\0';
+
+	ml_append(yytext);
+}
+<ML>{NON_WHITE_SPACE}{QUOTED_STRING}\" {
+	ml_append(yytext);
+	yylval.string = ml_buffer;
+
+	BEGIN (INITIAL);
+	return (QUOTED_STRING);
+}
 %%
+static void ml_append (char *string)
+{
+	int len = strlen (string);
+	int s;
+
+	if (ml_free <= len) {
+		ml_len += len - ml_free + 1;
+		ml_buffer = (char *)realloc (ml_buffer, ml_len);
+		if (NULL == ml_buffer)
+			YY_FATAL_ERROR ("out of dynamic memory in ml_append");
+	}
+
+	s = snprintf (ml_buffer + ml_pos, ml_free, "%s", string);
+	if ((0 > s) || (ml_free <= s))
+		YY_FATAL_ERROR ("failed to write to multiline buffer");
+
+	ml_pos += s;
+	return;
+} /* ml_append */
+
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboping/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboping/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/liboping/Makefile.in	2009-01-03 04:10:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/liboping/Makefile.in	2008-09-05 16:53:52.000000000 +0800
@@ -79,12 +79,16 @@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
+BUILD_WITH_LIBOWCAPI_CPPFLAGS = @BUILD_WITH_LIBOWCAPI_CPPFLAGS@
+BUILD_WITH_LIBOWCAPI_LIBS = @BUILD_WITH_LIBOWCAPI_LIBS@
+BUILD_WITH_LIBPQ_CPPFLAGS = @BUILD_WITH_LIBPQ_CPPFLAGS@
+BUILD_WITH_LIBPQ_LDFLAGS = @BUILD_WITH_LIBPQ_LDFLAGS@
 BUILD_WITH_LIBRRD_CFLAGS = @BUILD_WITH_LIBRRD_CFLAGS@
 BUILD_WITH_LIBRRD_LDFLAGS = @BUILD_WITH_LIBRRD_LDFLAGS@
 BUILD_WITH_LIBSENSORS_CFLAGS = @BUILD_WITH_LIBSENSORS_CFLAGS@
 BUILD_WITH_LIBSENSORS_LDFLAGS = @BUILD_WITH_LIBSENSORS_LDFLAGS@
 BUILD_WITH_LIBSNMP_CFLAGS = @BUILD_WITH_LIBSNMP_CFLAGS@
 BUILD_WITH_LIBSNMP_LIBS = @BUILD_WITH_LIBSNMP_LIBS@
@@ -131,12 +135,14 @@
 KERNEL_DIR = @KERNEL_DIR@
 LDFLAGS = @LDFLAGS@
 LEX = @LEX@
 LEXLIB = @LEXLIB@
 LEX_OUTPUT_ROOT = @LEX_OUTPUT_ROOT@
 LIBLTDL = @LIBLTDL@
+LIBNOTIFY_CFLAGS = @LIBNOTIFY_CFLAGS@
+LIBNOTIFY_LIBS = @LIBNOTIFY_LIBS@
 LIBOBJS = @LIBOBJS@
 LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@
 LN_S = @LN_S@
 LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/libvirt.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/libvirt.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/libvirt.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/libvirt.c	2008-09-04 21:01:14.000000000 +0800
@@ -631,13 +631,13 @@
     n = sizeof (char) * (strlen (domname) + strlen (devpath) + 2);
     name = malloc (n);
     if (name == NULL) {
         ERROR ("libvirt plugin: malloc failed.");
         return 0;
     }
-    snprintf (name, n, "%s:%s", domname, devpath);
+    ssnprintf (name, n, "%s:%s", domname, devpath);
     r = ignorelist_match (il, name);
     free (name);
     return r;
 }
 
 static void
@@ -649,14 +649,13 @@
     char  *host_ptr;
     size_t host_len;
 
     vl->time = t;
     vl->interval = interval_g;
 
-    strncpy (vl->plugin, "libvirt", sizeof (vl->plugin));
-    vl->plugin[sizeof (vl->plugin) - 1] = '\0';
+    sstrncpy (vl->plugin, "libvirt", sizeof (vl->plugin));
 
     vl->host[0] = '\0';
     host_ptr = vl->host;
     host_len = sizeof (vl->host);
 
     /* Construct the hostname field according to HostnameFormat. */
@@ -703,13 +702,15 @@
 
     values[0].counter = cpu_time;
 
     vl.values = values;
     vl.values_len = 1;
 
-    plugin_dispatch_values (type, &vl);
+    sstrncpy (vl.type, type, sizeof (vl.type));
+
+    plugin_dispatch_values (&vl);
 }
 
 static void
 vcpu_submit (counter_t cpu_time,
              time_t t,
              virDomainPtr dom, int vcpu_nr, const char *type)
@@ -720,16 +721,16 @@
     init_value_list (&vl, t, dom);
 
     values[0].counter = cpu_time;
     vl.values = values;
     vl.values_len = 1;
 
-    snprintf (vl.type_instance, sizeof (vl.type_instance), "%d", vcpu_nr);
-    vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
+    sstrncpy (vl.type, type, sizeof (vl.type));
+    ssnprintf (vl.type_instance, sizeof (vl.type_instance), "%d", vcpu_nr);
 
-    plugin_dispatch_values (type, &vl);
+    plugin_dispatch_values (&vl);
 }
 
 static void
 submit_counter2 (const char *type, counter_t v0, counter_t v1,
              time_t t,
              virDomainPtr dom, const char *devname)
@@ -741,16 +742,16 @@
 
     values[0].counter = v0;
     values[1].counter = v1;
     vl.values = values;
     vl.values_len = 2;
 
-    strncpy (vl.type_instance, devname, sizeof (vl.type_instance));
-    vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
+    sstrncpy (vl.type, type, sizeof (vl.type));
+    sstrncpy (vl.type_instance, devname, sizeof (vl.type_instance));
 
-    plugin_dispatch_values (type, &vl);
+    plugin_dispatch_values (&vl);
 } /* void submit_counter2 */
 
 static int
 lv_shutdown (void)
 {
     free_block_devices ();
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/load.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/load.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/load.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/load.c	2008-09-04 21:01:14.000000000 +0800
@@ -50,14 +50,15 @@
 
 	vl.values = values;
 	vl.values_len = STATIC_ARRAY_SIZE (values);
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "load", sizeof (vl.plugin));
+	sstrncpy (vl.type, "load", sizeof (vl.type));
 
-	plugin_dispatch_values ("load", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int load_read (void)
 {
 #if defined(HAVE_GETLOADAVG)
 	double load[3];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/logfile.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/logfile.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/logfile.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/logfile.c	2008-09-04 21:01:14.000000000 +0800
@@ -155,25 +155,25 @@
 {
 	char  buf[1024] = "";
 	char *buf_ptr = buf;
 	int   buf_len = sizeof (buf);
 	int status;
 
-	status = snprintf (buf_ptr, buf_len, "Notification: severity = %s",
+	status = ssnprintf (buf_ptr, buf_len, "Notification: severity = %s",
 			(n->severity == NOTIF_FAILURE) ? "FAILURE"
 			: ((n->severity == NOTIF_WARNING) ? "WARNING"
 				: ((n->severity == NOTIF_OKAY) ? "OKAY" : "UNKNOWN")));
 	if (status > 0)
 	{
 		buf_ptr += status;
 		buf_len -= status;
 	}
 
 #define APPEND(bufptr, buflen, key, value) \
 	if ((buflen > 0) && (strlen (value) > 0)) { \
-		int status = snprintf (bufptr, buflen, ", %s = %s", key, value); \
+		int status = ssnprintf (bufptr, buflen, ", %s = %s", key, value); \
 		if (status > 0) { \
 			bufptr += status; \
 			buflen -= status; \
 		} \
 	}
 	APPEND (buf_ptr, buf_len, "host", n->host);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/Makefile.am	2009-01-03 04:05:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/Makefile.am	2008-09-04 21:01:09.000000000 +0800
@@ -18,33 +18,35 @@
 AM_CPPFLAGS += -DLOCALSTATEDIR='"${localstatedir}"'
 AM_CPPFLAGS += -DPKGLOCALSTATEDIR='"${localstatedir}/lib/${PACKAGE_NAME}"'
 if BUILD_FEATURE_DAEMON
 AM_CPPFLAGS += -DPIDFILE='"${localstatedir}/run/${PACKAGE_NAME}.pid"'
 endif
 AM_CPPFLAGS += -DPLUGINDIR='"${pkglibdir}"'
+AM_CPPFLAGS += -DPKGDATADIR='"${pkgdatadir}"'
 
 sbin_PROGRAMS = collectd collectdmon
 bin_PROGRAMS = collectd-nagios
 
 collectd_SOURCES = collectd.c collectd.h \
 		   common.c common.h \
 		   configfile.c configfile.h \
 		   plugin.c plugin.h \
 		   utils_avltree.c utils_avltree.h \
 		   utils_cache.c utils_cache.h \
+		   utils_complain.c utils_complain.h \
 		   utils_ignorelist.c utils_ignorelist.h \
 		   utils_llist.c utils_llist.h \
 		   utils_tail_match.c utils_tail_match.h \
 		   utils_match.c utils_match.h \
 		   utils_mount.c utils_mount.h \
 		   utils_tail.c utils_tail.h \
 		   utils_threshold.c utils_threshold.h \
 		   types_list.c types_list.h
 
 collectd_CPPFLAGS =  $(AM_CPPFLAGS) $(LTDLINCL)
-collectd_CFLAGS =
+collectd_CFLAGS = $(AM_CFLAGS)
 collectd_LDFLAGS = -export-dynamic
 collectd_LDADD =
 collectd_DEPENDENCIES =
 
 # Link to these libraries..
 if BUILD_WITH_LIBRT
@@ -92,13 +94,13 @@
 pkglib_LTLIBRARIES = 
 
 if BUILD_PLUGIN_APACHE
 pkglib_LTLIBRARIES += apache.la
 apache_la_SOURCES = apache.c
 apache_la_LDFLAGS = -module -avoid-version
-apache_la_CFLAGS =
+apache_la_CFLAGS = $(AM_CFLAGS)
 apache_la_LIBADD =
 collectd_LDADD += "-dlopen" apache.la
 if BUILD_WITH_LIBCURL
 apache_la_CFLAGS += $(BUILD_WITH_LIBCURL_CFLAGS)
 apache_la_LIBADD += $(BUILD_WITH_LIBCURL_LIBS)
 endif
@@ -125,15 +127,16 @@
 endif
 
 if BUILD_PLUGIN_ASCENT
 pkglib_LTLIBRARIES += ascent.la
 ascent_la_SOURCES = ascent.c
 ascent_la_LDFLAGS = -module -avoid-version
-ascent_la_CFLAGS = $(BUILD_WITH_LIBCURL_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
+ascent_la_CFLAGS = $(AM_CFLAGS) \
+		$(BUILD_WITH_LIBCURL_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
 ascent_la_LIBADD = $(BUILD_WITH_LIBCURL_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
-collectd_LDADD += "-dlopen" ascent.la
+collectd_LDADD += "-dlopen" apache.la
 collectd_DEPENDENCIES += ascent.la
 endif
 
 if BUILD_PLUGIN_BATTERY
 pkglib_LTLIBRARIES += battery.la
 battery_la_SOURCES = battery.c
@@ -145,13 +148,13 @@
 collectd_DEPENDENCIES += battery.la
 endif
 
 if BUILD_PLUGIN_CPU
 pkglib_LTLIBRARIES += cpu.la
 cpu_la_SOURCES = cpu.c
-cpu_la_CFLAGS =
+cpu_la_CFLAGS = $(AM_CFLAGS)
 cpu_la_LDFLAGS = -module -avoid-version
 cpu_la_LIBADD = 
 if BUILD_WITH_LIBKSTAT
 cpu_la_LDFLAGS += -lkstat
 endif
 if BUILD_WITH_LIBDEVINFO
@@ -189,13 +192,13 @@
 collectd_DEPENDENCIES += df.la
 endif
 
 if BUILD_PLUGIN_DISK
 pkglib_LTLIBRARIES += disk.la
 disk_la_SOURCES = disk.c
-disk_la_CFLAGS =
+disk_la_CFLAGS = $(AM_CFLAGS)
 disk_la_LDFLAGS = -module -avoid-version
 disk_la_LIBADD = 
 if BUILD_WITH_LIBKSTAT
 disk_la_LDFLAGS += -lkstat
 endif
 if BUILD_WITH_LIBDEVINFO
@@ -239,22 +242,31 @@
 collectd_DEPENDENCIES += entropy.la
 endif
 
 if BUILD_PLUGIN_EXEC
 pkglib_LTLIBRARIES += exec.la
 exec_la_SOURCES = exec.c \
+		  utils_parse_option.h utils_parse_option.c \
 		  utils_cmd_putnotif.c utils_cmd_putnotif.h \
 		  utils_cmd_putval.c utils_cmd_putval.h
 exec_la_LDFLAGS = -module -avoid-version
 if BUILD_WITH_LIBPTHREAD
 exec_la_LDFLAGS += -lpthread
 endif
 collectd_LDADD += "-dlopen" exec.la
 collectd_DEPENDENCIES += exec.la
 endif
 
+if BUILD_PLUGIN_FILECOUNT
+pkglib_LTLIBRARIES += filecount.la
+filecount_la_SOURCES = filecount.c
+filecount_la_LDFLAGS = -module -avoid-version
+collectd_LDADD += "-dlopen" filecount.la
+collectd_DEPENDENCIES += filecount.la
+endif
+
 if BUILD_PLUGIN_HDDTEMP
 pkglib_LTLIBRARIES += hddtemp.la
 hddtemp_la_SOURCES = hddtemp.c
 hddtemp_la_LDFLAGS = -module -avoid-version
 if BUILD_WITH_LIBSOCKET
 hddtemp_la_LDFLAGS += -lsocket
@@ -263,13 +275,13 @@
 collectd_DEPENDENCIES += hddtemp.la
 endif
 
 if BUILD_PLUGIN_INTERFACE
 pkglib_LTLIBRARIES += interface.la
 interface_la_SOURCES = interface.c
-interface_la_CFLAGS =
+interface_la_CFLAGS = $(AM_CFLAGS)
 interface_la_LDFLAGS = -module -avoid-version
 interface_la_LIBADD =
 collectd_LDADD += "-dlopen" interface.la
 collectd_DEPENDENCIES += interface.la
 if BUILD_WITH_LIBSTATGRAB
 interface_la_CFLAGS += $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
@@ -298,13 +310,13 @@
 collectd_DEPENDENCIES += iptables.la
 endif
 
 if BUILD_PLUGIN_IPMI
 pkglib_LTLIBRARIES += ipmi.la
 ipmi_la_SOURCES = ipmi.c
-ipmi_la_CFLAGS = $(BUILD_WITH_OPENIPMI_CFLAGS)
+ipmi_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_OPENIPMI_CFLAGS)
 ipmi_la_LDFLAGS = -module -avoid-version
 ipmi_la_LIBADD = $(BUILD_WITH_OPENIPMI_LIBS)
 collectd_LDADD += "-dlopen" ipmi.la
 collectd_DEPENDENCIES += ipmi.la
 endif
 
@@ -325,23 +337,24 @@
 collectd_DEPENDENCIES += irq.la
 endif
 
 if BUILD_PLUGIN_LIBVIRT
 pkglib_LTLIBRARIES += libvirt.la
 libvirt_la_SOURCES = libvirt.c
-libvirt_la_CFLAGS = $(BUILD_WITH_LIBVIRT_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
+libvirt_la_CFLAGS = $(AM_CFLAGS) \
+		$(BUILD_WITH_LIBVIRT_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
 libvirt_la_LIBADD = $(BUILD_WITH_LIBVIRT_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
 libvirt_la_LDFLAGS = -module -avoid-version
 collectd_LDADD += "-dlopen" libvirt.la
 collectd_DEPENDENCIES += libvirt.la
 endif
 
 if BUILD_PLUGIN_LOAD
 pkglib_LTLIBRARIES += load.la
 load_la_SOURCES = load.c
-load_la_CFLAGS =
+load_la_CFLAGS = $(AM_CFLAGS)
 load_la_LDFLAGS = -module -avoid-version
 load_la_LIBADD =
 collectd_LDADD += "-dlopen" load.la
 collectd_DEPENDENCIES += load.la
 if BUILD_WITH_LIBSTATGRAB
 load_la_CFLAGS += $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
@@ -369,25 +382,24 @@
 endif
 
 if BUILD_PLUGIN_MEMCACHED
 pkglib_LTLIBRARIES += memcached.la
 memcached_la_SOURCES = memcached.c
 memcached_la_LDFLAGS = -module -avoid-version
-memcached_la_CFLAGS =
 memcached_la_LIBADD =
 if BUILD_WITH_LIBSOCKET
 memcached_la_LDFLAGS += -lsocket
 endif
 collectd_LDADD += "-dlopen" memcached.la
 collectd_DEPENDENCIES += memcached.la
 endif
 
 if BUILD_PLUGIN_MEMORY
 pkglib_LTLIBRARIES += memory.la
 memory_la_SOURCES = memory.c
-memory_la_CFLAGS =
+memory_la_CFLAGS = $(AM_CFLAGS)
 memory_la_LDFLAGS = -module -avoid-version
 memory_la_LIBADD =
 collectd_LDADD += "-dlopen" memory.la
 collectd_DEPENDENCIES += memory.la
 if BUILD_WITH_LIBKSTAT
 memory_la_LIBADD += -lkstat
@@ -410,13 +422,13 @@
 endif
 
 if BUILD_PLUGIN_MYSQL
 pkglib_LTLIBRARIES += mysql.la
 mysql_la_SOURCES = mysql.c
 mysql_la_LDFLAGS = -module -avoid-version
-mysql_la_CFLAGS =
+mysql_la_CFLAGS = $(AM_CFLAGS)
 mysql_la_LIBADD =
 collectd_LDADD += "-dlopen" mysql.la
 if BUILD_WITH_LIBMYSQL
 mysql_la_CFLAGS += $(BUILD_WITH_LIBMYSQL_CFLAGS)
 mysql_la_LIBADD += $(BUILD_WITH_LIBMYSQL_LIBS)
 endif
@@ -424,13 +436,13 @@
 endif
 
 if BUILD_PLUGIN_NETLINK
 pkglib_LTLIBRARIES += netlink.la
 netlink_la_SOURCES = netlink.c
 netlink_la_LDFLAGS = -module -avoid-version
-netlink_la_CFLAGS = $(BUILD_WITH_LIBNETLINK_CFLAGS)
+netlink_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBNETLINK_CFLAGS)
 netlink_la_LIBADD = $(BUILD_WITH_LIBNETLINK_LIBS)
 collectd_LDADD += "-dlopen" netlink.la
 collectd_DEPENDENCIES += netlink.la
 endif
 
 if BUILD_PLUGIN_NETWORK
@@ -466,12 +478,29 @@
 nginx_la_LIBADD += $(BUILD_WITH_LIBCURL_LIBS)
 endif
 collectd_LDADD += "-dlopen" nginx.la
 collectd_DEPENDENCIES += nginx.la
 endif
 
+if BUILD_PLUGIN_NOTIFY_DESKTOP
+pkglib_LTLIBRARIES += notify_desktop.la
+notify_desktop_la_SOURCES = notify_desktop.c
+notify_desktop_la_CFLAGS = $(AM_CFLAGS) $(LIBNOTIFY_CFLAGS)
+notify_desktop_la_LDFLAGS = -module -avoid-version $(LIBNOTIFY_LIBS)
+collectd_LDADD += "-dlopen" notify_desktop.la
+collectd_DEPENDENCIES += notify_desktop.la
+endif
+
+if BUILD_PLUGIN_NOTIFY_EMAIL
+pkglib_LTLIBRARIES += notify_email.la
+notify_email_la_SOURCES = notify_email.c
+notify_email_la_LDFLAGS = -L/usr/local/lib -lesmtp -lssl -lcrypto -pthread -module -avoid-version
+collectd_LDADD += "-dlopen" notify_email.la
+collectd_DEPENDENCIES += notify_email.la
+endif
+
 if BUILD_PLUGIN_NTPD
 pkglib_LTLIBRARIES += ntpd.la
 ntpd_la_SOURCES = ntpd.c
 ntpd_la_LDFLAGS = -module -avoid-version
 if BUILD_WITH_LIBSOCKET
 ntpd_la_LDFLAGS += -lsocket
@@ -486,20 +515,34 @@
 nut_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBUPSCLIENT_CFLAGS)
 nut_la_LDFLAGS = -module -avoid-version -lpthread $(BUILD_WITH_LIBUPSCLIENT_LIBS)
 collectd_LDADD += "-dlopen" nut.la
 collectd_DEPENDENCIES += nut.la
 endif
 
+if BUILD_PLUGIN_ONEWIRE
+pkglib_LTLIBRARIES += onewire.la
+onewire_la_SOURCES = onewire.c
+onewire_la_CFLAGS = $(AM_CFLAGS)
+onewire_la_CPPFLAGS = $(BUILD_WITH_LIBOWCAPI_CPPFLAGS)
+onewire_la_LIBADD = $(BUILD_WITH_LIBOWCAPI_LIBS)
+onewire_la_LDFLAGS = -module -avoid-version
+collectd_LDADD += "-dlopen" onewire.la
+collectd_DEPENDENCIES += onewire.la
+endif
+
 if BUILD_PLUGIN_PERL
 pkglib_LTLIBRARIES += perl.la
 perl_la_SOURCES = perl.c
+# Despite C99 providing the "bool" type thru stdbool.h, Perl defines its own
+# version of that type if HAS_BOOL is not defined... *sigh*
+perl_la_CPPFLAGS = $(AM_CPPFLAGS) -DHAS_BOOL=1
 perl_la_CFLAGS  = $(AM_CFLAGS) \
-		  $(PERL_CFLAGS) \
-		  -DXS_VERSION=\"$(VERSION)\" -DVERSION=\"$(VERSION)\"
+		$(PERL_CFLAGS) \
+		-DXS_VERSION=\"$(VERSION)\" -DVERSION=\"$(VERSION)\"
 perl_la_LDFLAGS = -module -avoid-version \
-		  $(PERL_LDFLAGS)
+		$(PERL_LDFLAGS)
 collectd_LDADD += "-dlopen" perl.la
 collectd_DEPENDENCIES += perl.la
 endif
 
 if BUILD_PLUGIN_PING
 pkglib_LTLIBRARIES += ping.la
@@ -512,42 +555,56 @@
 ping_la_LDFLAGS += -loping
 endif
 collectd_LDADD += "-dlopen" ping.la
 collectd_DEPENDENCIES += ping.la
 endif
 
+if BUILD_PLUGIN_POSTGRESQL
+pkglib_LTLIBRARIES += postgresql.la
+postgresql_la_SOURCES = postgresql.c
+postgresql_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBPQ_CPPFLAGS)
+postgresql_la_LDFLAGS = -module -avoid-version \
+		$(BUILD_WITH_LIBPQ_LDFLAGS) -lpq
+collectd_LDADD += "-dlopen" postgresql.la
+collectd_DEPENDENCIES += postgresql.la
+endif
+
 if BUILD_PLUGIN_POWERDNS
 pkglib_LTLIBRARIES += powerdns.la
 powerdns_la_SOURCES = powerdns.c
 powerdns_la_LDFLAGS = -module -avoid-version
 collectd_LDADD += "-dlopen" powerdns.la
 collectd_DEPENDENCIES += powerdns.la
 endif
 
 if BUILD_PLUGIN_PROCESSES
 pkglib_LTLIBRARIES += processes.la
 processes_la_SOURCES = processes.c
 processes_la_LDFLAGS = -module -avoid-version
+processes_la_LIBADD =
 collectd_LDADD += "-dlopen" processes.la
 collectd_DEPENDENCIES += processes.la
+if BUILD_WITH_LIBKVM_GETPROCS
+processes_la_LIBADD += -lkvm
+endif
 endif
 
 if BUILD_PLUGIN_RRDTOOL
 pkglib_LTLIBRARIES += rrdtool.la
 rrdtool_la_SOURCES = rrdtool.c
 rrdtool_la_LDFLAGS = -module -avoid-version
-rrdtool_la_CFLAGS = $(BUILD_WITH_LIBRRD_CFLAGS)
+rrdtool_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBRRD_CFLAGS)
 rrdtool_la_LIBADD = $(BUILD_WITH_LIBRRD_LDFLAGS)
 collectd_LDADD += "-dlopen" rrdtool.la
 collectd_DEPENDENCIES += rrdtool.la
 endif
 
 if BUILD_PLUGIN_SENSORS
 pkglib_LTLIBRARIES += sensors.la
 sensors_la_SOURCES = sensors.c
-sensors_la_CFLAGS = $(BUILD_WITH_LIBSENSORS_CFLAGS)
+sensors_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBSENSORS_CFLAGS)
 sensors_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBSENSORS_LDFLAGS)
 sensors_la_LIBADD = -lsensors
 collectd_LDADD += "-dlopen" sensors.la
 collectd_DEPENDENCIES += sensors.la
 endif
 
@@ -560,13 +617,13 @@
 endif
 
 if BUILD_PLUGIN_SNMP
 pkglib_LTLIBRARIES += snmp.la
 snmp_la_SOURCES = snmp.c
 snmp_la_LDFLAGS = -module -avoid-version
-snmp_la_CFLAGS =
+snmp_la_CFLAGS = $(AM_CFLAGS)
 snmp_la_LIBADD =
 if BUILD_WITH_LIBNETSNMP
 snmp_la_CFLAGS += $(BUILD_WITH_LIBSNMP_CFLAGS)
 snmp_la_LIBADD += $(BUILD_WITH_LIBSNMP_LIBS)
 endif
 if BUILD_WITH_LIBPTHREAD
@@ -576,13 +633,13 @@
 collectd_DEPENDENCIES += snmp.la
 endif
 
 if BUILD_PLUGIN_SWAP
 pkglib_LTLIBRARIES += swap.la
 swap_la_SOURCES = swap.c
-swap_la_CFLAGS =
+swap_la_CFLAGS = $(AM_CFLAGS)
 swap_la_LDFLAGS = -module -avoid-version
 swap_la_LIBADD =
 collectd_LDADD += "-dlopen" swap.la
 collectd_DEPENDENCIES += swap.la
 if BUILD_WITH_LIBKSTAT
 swap_la_LIBADD += -lkstat
@@ -624,27 +681,40 @@
 endif
 
 if BUILD_PLUGIN_TCPCONNS
 pkglib_LTLIBRARIES += tcpconns.la
 tcpconns_la_SOURCES = tcpconns.c
 tcpconns_la_LDFLAGS = -module -avoid-version
+tcpconns_la_LIBADD =
 collectd_LDADD += "-dlopen" tcpconns.la
 collectd_DEPENDENCIES += tcpconns.la
+if BUILD_WITH_LIBKVM_NLIST
+tcpconns_la_LIBADD += -lkvm
+endif
 endif
 
 if BUILD_PLUGIN_TEAMSPEAK2
 pkglib_LTLIBRARIES += teamspeak2.la
 teamspeak2_la_SOURCES = teamspeak2.c
 teamspeak2_la_LDFLAGS = -module -avoid-version
 collectd_LDADD += "-dlopen" teamspeak2.la
 collectd_DEPENDENCIES += teamspeak2.la
 endif
 
+if BUILD_PLUGIN_THERMAL
+pkglib_LTLIBRARIES += thermal.la
+thermal_la_SOURCES = thermal.c
+thermal_la_LDFLAGS = -module -avoid-version
+collectd_LDADD += "-dlopen" thermal.la
+collectd_DEPENDENCIES += thermal.la
+endif
+
 if BUILD_PLUGIN_UNIXSOCK
 pkglib_LTLIBRARIES += unixsock.la
 unixsock_la_SOURCES = unixsock.c \
+		      utils_parse_option.h utils_parse_option.c \
 		      utils_cmd_flush.h utils_cmd_flush.c \
 		      utils_cmd_getval.h utils_cmd_getval.c \
 		      utils_cmd_listval.h utils_cmd_listval.c \
 		      utils_cmd_putval.h utils_cmd_putval.c \
 		      utils_cmd_putnotif.h utils_cmd_putnotif.c
 unixsock_la_LDFLAGS = -module -avoid-version -lpthread
@@ -652,13 +722,13 @@
 collectd_DEPENDENCIES += unixsock.la
 endif
 
 if BUILD_PLUGIN_USERS
 pkglib_LTLIBRARIES += users.la
 users_la_SOURCES = users.c
-users_la_CFLAGS =
+users_la_CFLAGS = $(AM_CFLAGS)
 users_la_LDFLAGS = -module -avoid-version
 users_la_LIBADD =
 if BUILD_WITH_LIBSTATGRAB
 users_la_CFLAGS += $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
 users_la_LIBADD += $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
 endif
@@ -718,23 +788,36 @@
 #collectd_1_SOURCES = collectd.pod
 
 EXTRA_DIST = types.db
 
 EXTRA_DIST += collectd-email.pod collectd-exec.pod collectd-nagios.pod \
 	collectd-perl.pod collectd-snmp.pod collectd-unixsock.pod \
-	collectd.conf.pod collectd.pod collectdmon.pod types.db.pod
+	collectd.conf.pod collectd.pod collectdmon.pod types.db.pod \
+	postgresql_default.conf
 
 .pod.1:
-	pod2man --release=$(VERSION) --center=$(PACKAGE) $< >.pod2man.tmp 2>/dev/null && mv -f .pod2man.tmp $@ || true
+	pod2man --release=$(VERSION) --center=$(PACKAGE) $< \
+		>.pod2man.tmp 2>/dev/null && mv -f .pod2man.tmp $@ || true
+	if grep '\<POD ERRORS\>' $@ >/dev/null 2>&1; \
+	then \
+		echo "$@ has some POD errors!"; false; \
+	fi
 
 .pod.5:
-	pod2man --section=5 --release=$(VERSION) --center=$(PACKAGE) $< >.pod2man.tmp 2>/dev/null && mv -f .pod2man.tmp $@ || true
+	pod2man --section=5 --release=$(VERSION) --center=$(PACKAGE) $< \
+		>.pod2man.tmp 2>/dev/null && mv -f .pod2man.tmp $@ || true
+	if grep '\<POD ERRORS\>' $@ >/dev/null 2>&1; \
+	then \
+		echo "$@ has some POD errors!"; false; \
+	fi
 
 install-exec-hook:
 	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)
 	if test -e $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	then \
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf.pkg-orig; \
 	else \
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	fi; \
 	cp -f $(srcdir)/types.db $(DESTDIR)$(pkglibdir)/;
+	$(INSTALL) -D -m 0644 $(srcdir)/postgresql_default.conf \
+		$(DESTDIR)$(pkgdatadir)/postgresql_default.conf;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/Makefile.in	2009-01-03 04:10:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/Makefile.in	2008-09-05 16:53:51.000000000 +0800
@@ -66,13 +66,13 @@
 @BUILD_PLUGIN_APCUPS_TRUE@am__append_24 = "-dlopen" apcups.la
 @BUILD_PLUGIN_APCUPS_TRUE@am__append_25 = apcups.la
 @BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_26 = apple_sensors.la
 @BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_27 = "-dlopen" apple_sensors.la
 @BUILD_PLUGIN_APPLE_SENSORS_TRUE@am__append_28 = apple_sensors.la
 @BUILD_PLUGIN_ASCENT_TRUE@am__append_29 = ascent.la
-@BUILD_PLUGIN_ASCENT_TRUE@am__append_30 = "-dlopen" ascent.la
+@BUILD_PLUGIN_ASCENT_TRUE@am__append_30 = "-dlopen" apache.la
 @BUILD_PLUGIN_ASCENT_TRUE@am__append_31 = ascent.la
 @BUILD_PLUGIN_BATTERY_TRUE@am__append_32 = battery.la
 @BUILD_PLUGIN_BATTERY_TRUE@@BUILD_WITH_LIBIOKIT_TRUE@am__append_33 = -lIOKit
 @BUILD_PLUGIN_BATTERY_TRUE@am__append_34 = "-dlopen" battery.la
 @BUILD_PLUGIN_BATTERY_TRUE@am__append_35 = battery.la
 @BUILD_PLUGIN_CPU_TRUE@am__append_36 = cpu.la
@@ -110,167 +110,187 @@
 @BUILD_PLUGIN_ENTROPY_TRUE@am__append_68 = "-dlopen" entropy.la
 @BUILD_PLUGIN_ENTROPY_TRUE@am__append_69 = entropy.la
 @BUILD_PLUGIN_EXEC_TRUE@am__append_70 = exec.la
 @BUILD_PLUGIN_EXEC_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_71 = -lpthread
 @BUILD_PLUGIN_EXEC_TRUE@am__append_72 = "-dlopen" exec.la
 @BUILD_PLUGIN_EXEC_TRUE@am__append_73 = exec.la
-@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_74 = hddtemp.la
-@BUILD_PLUGIN_HDDTEMP_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_75 = -lsocket
-@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_76 = "-dlopen" hddtemp.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_74 = filecount.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_75 = "-dlopen" filecount.la
+@BUILD_PLUGIN_FILECOUNT_TRUE@am__append_76 = filecount.la
 @BUILD_PLUGIN_HDDTEMP_TRUE@am__append_77 = hddtemp.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_78 = interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_79 = "-dlopen" interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@am__append_80 = interface.la
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_81 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_82 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_83 = -lkstat
-@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_84 = -ldevinfo
-@BUILD_PLUGIN_IPTABLES_TRUE@am__append_85 = iptables.la
-@BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_FALSE@am__append_86 = -liptc
-@BUILD_PLUGIN_IPTABLES_TRUE@am__append_87 = "-dlopen" iptables.la
+@BUILD_PLUGIN_HDDTEMP_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_78 = -lsocket
+@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_79 = "-dlopen" hddtemp.la
+@BUILD_PLUGIN_HDDTEMP_TRUE@am__append_80 = hddtemp.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_81 = interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_82 = "-dlopen" interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@am__append_83 = interface.la
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_84 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_85 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_86 = -lkstat
+@BUILD_PLUGIN_INTERFACE_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@@BUILD_WITH_LIBSTATGRAB_FALSE@am__append_87 = -ldevinfo
 @BUILD_PLUGIN_IPTABLES_TRUE@am__append_88 = iptables.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_89 = ipmi.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_90 = "-dlopen" ipmi.la
-@BUILD_PLUGIN_IPMI_TRUE@am__append_91 = ipmi.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_92 = ipvs.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_93 = "-dlopen" ipvs.la
-@BUILD_PLUGIN_IPVS_TRUE@am__append_94 = ipvs.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_95 = irq.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_96 = "-dlopen" irq.la
-@BUILD_PLUGIN_IRQ_TRUE@am__append_97 = irq.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_98 = libvirt.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_99 = "-dlopen" libvirt.la
-@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_100 = libvirt.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_101 = load.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_102 = "-dlopen" load.la
-@BUILD_PLUGIN_LOAD_TRUE@am__append_103 = load.la
-@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_104 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_105 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_106 = logfile.la
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_107 = "-dlopen" logfile.la
-@BUILD_PLUGIN_LOGFILE_TRUE@am__append_108 = logfile.la
-@BUILD_PLUGIN_MBMON_TRUE@am__append_109 = mbmon.la
-@BUILD_PLUGIN_MBMON_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_110 = -lsocket
-@BUILD_PLUGIN_MBMON_TRUE@am__append_111 = "-dlopen" mbmon.la
+@BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_FALSE@am__append_89 = -liptc
+@BUILD_PLUGIN_IPTABLES_TRUE@am__append_90 = "-dlopen" iptables.la
+@BUILD_PLUGIN_IPTABLES_TRUE@am__append_91 = iptables.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_92 = ipmi.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_93 = "-dlopen" ipmi.la
+@BUILD_PLUGIN_IPMI_TRUE@am__append_94 = ipmi.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_95 = ipvs.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_96 = "-dlopen" ipvs.la
+@BUILD_PLUGIN_IPVS_TRUE@am__append_97 = ipvs.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_98 = irq.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_99 = "-dlopen" irq.la
+@BUILD_PLUGIN_IRQ_TRUE@am__append_100 = irq.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_101 = libvirt.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_102 = "-dlopen" libvirt.la
+@BUILD_PLUGIN_LIBVIRT_TRUE@am__append_103 = libvirt.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_104 = load.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_105 = "-dlopen" load.la
+@BUILD_PLUGIN_LOAD_TRUE@am__append_106 = load.la
+@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_107 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_LOAD_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_108 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_109 = logfile.la
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_110 = "-dlopen" logfile.la
+@BUILD_PLUGIN_LOGFILE_TRUE@am__append_111 = logfile.la
 @BUILD_PLUGIN_MBMON_TRUE@am__append_112 = mbmon.la
-@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_113 = memcached.la
-@BUILD_PLUGIN_MEMCACHED_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_114 = -lsocket
-@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_115 = "-dlopen" memcached.la
+@BUILD_PLUGIN_MBMON_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_113 = -lsocket
+@BUILD_PLUGIN_MBMON_TRUE@am__append_114 = "-dlopen" mbmon.la
+@BUILD_PLUGIN_MBMON_TRUE@am__append_115 = mbmon.la
 @BUILD_PLUGIN_MEMCACHED_TRUE@am__append_116 = memcached.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_117 = memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_118 = "-dlopen" memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@am__append_119 = memory.la
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_120 = -lkstat
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_121 = -ldevinfo
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_122 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_123 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_124 = multimeter.la
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_125 = "-dlopen" multimeter.la
-@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_126 = multimeter.la
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_127 = mysql.la
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_128 = "-dlopen" mysql.la
-@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_129 = $(BUILD_WITH_LIBMYSQL_CFLAGS)
-@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_130 = $(BUILD_WITH_LIBMYSQL_LIBS)
-@BUILD_PLUGIN_MYSQL_TRUE@am__append_131 = mysql.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_132 = netlink.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_133 = "-dlopen" netlink.la
-@BUILD_PLUGIN_NETLINK_TRUE@am__append_134 = netlink.la
-@BUILD_PLUGIN_NETWORK_TRUE@am__append_135 = network.la
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_136 = -lsocket
-@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_137 = -lpthread
-@BUILD_PLUGIN_NETWORK_TRUE@am__append_138 = "-dlopen" network.la
-@BUILD_PLUGIN_NETWORK_TRUE@am__append_139 = network.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_140 = nfs.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_141 = "-dlopen" nfs.la
-@BUILD_PLUGIN_NFS_TRUE@am__append_142 = nfs.la
-@BUILD_PLUGIN_NGINX_TRUE@am__append_143 = nginx.la
-@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_144 = $(BUILD_WITH_LIBCURL_CFLAGS)
-@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_145 = $(BUILD_WITH_LIBCURL_LIBS)
-@BUILD_PLUGIN_NGINX_TRUE@am__append_146 = "-dlopen" nginx.la
-@BUILD_PLUGIN_NGINX_TRUE@am__append_147 = nginx.la
-@BUILD_PLUGIN_NTPD_TRUE@am__append_148 = ntpd.la
-@BUILD_PLUGIN_NTPD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_149 = -lsocket
-@BUILD_PLUGIN_NTPD_TRUE@am__append_150 = "-dlopen" ntpd.la
-@BUILD_PLUGIN_NTPD_TRUE@am__append_151 = ntpd.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_152 = nut.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_153 = "-dlopen" nut.la
-@BUILD_PLUGIN_NUT_TRUE@am__append_154 = nut.la
-@BUILD_PLUGIN_PERL_TRUE@am__append_155 = perl.la
-@BUILD_PLUGIN_PERL_TRUE@am__append_156 = "-dlopen" perl.la
-@BUILD_PLUGIN_PERL_TRUE@am__append_157 = perl.la
-@BUILD_PLUGIN_PING_TRUE@am__append_158 = ping.la
-@BUILD_PLUGIN_PING_TRUE@@BUILD_WITH_OWN_LIBOPING_FALSE@am__append_159 = -loping
-@BUILD_PLUGIN_PING_TRUE@am__append_160 = "-dlopen" ping.la
-@BUILD_PLUGIN_PING_TRUE@am__append_161 = ping.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_162 = powerdns.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_163 = "-dlopen" powerdns.la
-@BUILD_PLUGIN_POWERDNS_TRUE@am__append_164 = powerdns.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_165 = processes.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_166 = "-dlopen" processes.la
-@BUILD_PLUGIN_PROCESSES_TRUE@am__append_167 = processes.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_168 = rrdtool.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_169 = "-dlopen" rrdtool.la
-@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_170 = rrdtool.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_171 = sensors.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_172 = "-dlopen" sensors.la
-@BUILD_PLUGIN_SENSORS_TRUE@am__append_173 = sensors.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_174 = serial.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_175 = "-dlopen" serial.la
-@BUILD_PLUGIN_SERIAL_TRUE@am__append_176 = serial.la
-@BUILD_PLUGIN_SNMP_TRUE@am__append_177 = snmp.la
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_178 = $(BUILD_WITH_LIBSNMP_CFLAGS)
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_179 = $(BUILD_WITH_LIBSNMP_LIBS)
-@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_180 = -lpthread
-@BUILD_PLUGIN_SNMP_TRUE@am__append_181 = "-dlopen" snmp.la
-@BUILD_PLUGIN_SNMP_TRUE@am__append_182 = snmp.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_183 = swap.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_184 = "-dlopen" swap.la
-@BUILD_PLUGIN_SWAP_TRUE@am__append_185 = swap.la
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_186 = -lkstat
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_187 = -ldevinfo
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE@am__append_188 = -lkvm
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_189 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_190 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_191 = syslog.la
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_192 = "-dlopen" syslog.la
-@BUILD_PLUGIN_SYSLOG_TRUE@am__append_193 = syslog.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_194 = tail.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_195 = "-dlopen" tail.la
-@BUILD_PLUGIN_TAIL_TRUE@am__append_196 = tail.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_197 = tape.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_198 = "-dlopen" tape.la
-@BUILD_PLUGIN_TAPE_TRUE@am__append_199 = tape.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_200 = tcpconns.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_201 = "-dlopen" tcpconns.la
-@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_202 = tcpconns.la
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_203 = teamspeak2.la
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_204 = "-dlopen" teamspeak2.la
-@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_205 = teamspeak2.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_206 = unixsock.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_207 = "-dlopen" unixsock.la
-@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_208 = unixsock.la
-@BUILD_PLUGIN_USERS_TRUE@am__append_209 = users.la
-@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_210 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
-@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_211 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
-@BUILD_PLUGIN_USERS_TRUE@am__append_212 = "-dlopen" users.la
-@BUILD_PLUGIN_USERS_TRUE@am__append_213 = users.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_214 = uuid.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_215 = "-dlopen" uuid.la
-@BUILD_PLUGIN_UUID_TRUE@am__append_216 = uuid.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_217 = vmem.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_218 = "-dlopen" vmem.la
-@BUILD_PLUGIN_VMEM_TRUE@am__append_219 = vmem.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_220 = vserver.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_221 = "-dlopen" vserver.la
-@BUILD_PLUGIN_VSERVER_TRUE@am__append_222 = vserver.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_223 = wireless.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_224 = "-dlopen" wireless.la
-@BUILD_PLUGIN_WIRELESS_TRUE@am__append_225 = wireless.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_226 = xmms.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_227 = "-dlopen" xmms.la
-@BUILD_PLUGIN_XMMS_TRUE@am__append_228 = xmms.la
+@BUILD_PLUGIN_MEMCACHED_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_117 = -lsocket
+@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_118 = "-dlopen" memcached.la
+@BUILD_PLUGIN_MEMCACHED_TRUE@am__append_119 = memcached.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_120 = memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_121 = "-dlopen" memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@am__append_122 = memory.la
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_123 = -lkstat
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_124 = -ldevinfo
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_125 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_126 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_127 = multimeter.la
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_128 = "-dlopen" multimeter.la
+@BUILD_PLUGIN_MULTIMETER_TRUE@am__append_129 = multimeter.la
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_130 = mysql.la
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_131 = "-dlopen" mysql.la
+@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_132 = $(BUILD_WITH_LIBMYSQL_CFLAGS)
+@BUILD_PLUGIN_MYSQL_TRUE@@BUILD_WITH_LIBMYSQL_TRUE@am__append_133 = $(BUILD_WITH_LIBMYSQL_LIBS)
+@BUILD_PLUGIN_MYSQL_TRUE@am__append_134 = mysql.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_135 = netlink.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_136 = "-dlopen" netlink.la
+@BUILD_PLUGIN_NETLINK_TRUE@am__append_137 = netlink.la
+@BUILD_PLUGIN_NETWORK_TRUE@am__append_138 = network.la
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_139 = -lsocket
+@BUILD_PLUGIN_NETWORK_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_140 = -lpthread
+@BUILD_PLUGIN_NETWORK_TRUE@am__append_141 = "-dlopen" network.la
+@BUILD_PLUGIN_NETWORK_TRUE@am__append_142 = network.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_143 = nfs.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_144 = "-dlopen" nfs.la
+@BUILD_PLUGIN_NFS_TRUE@am__append_145 = nfs.la
+@BUILD_PLUGIN_NGINX_TRUE@am__append_146 = nginx.la
+@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_147 = $(BUILD_WITH_LIBCURL_CFLAGS)
+@BUILD_PLUGIN_NGINX_TRUE@@BUILD_WITH_LIBCURL_TRUE@am__append_148 = $(BUILD_WITH_LIBCURL_LIBS)
+@BUILD_PLUGIN_NGINX_TRUE@am__append_149 = "-dlopen" nginx.la
+@BUILD_PLUGIN_NGINX_TRUE@am__append_150 = nginx.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_151 = notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_152 = "-dlopen" notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am__append_153 = notify_desktop.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_154 = notify_email.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_155 = "-dlopen" notify_email.la
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am__append_156 = notify_email.la
+@BUILD_PLUGIN_NTPD_TRUE@am__append_157 = ntpd.la
+@BUILD_PLUGIN_NTPD_TRUE@@BUILD_WITH_LIBSOCKET_TRUE@am__append_158 = -lsocket
+@BUILD_PLUGIN_NTPD_TRUE@am__append_159 = "-dlopen" ntpd.la
+@BUILD_PLUGIN_NTPD_TRUE@am__append_160 = ntpd.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_161 = nut.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_162 = "-dlopen" nut.la
+@BUILD_PLUGIN_NUT_TRUE@am__append_163 = nut.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_164 = onewire.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_165 = "-dlopen" onewire.la
+@BUILD_PLUGIN_ONEWIRE_TRUE@am__append_166 = onewire.la
+@BUILD_PLUGIN_PERL_TRUE@am__append_167 = perl.la
+@BUILD_PLUGIN_PERL_TRUE@am__append_168 = "-dlopen" perl.la
+@BUILD_PLUGIN_PERL_TRUE@am__append_169 = perl.la
+@BUILD_PLUGIN_PING_TRUE@am__append_170 = ping.la
+@BUILD_PLUGIN_PING_TRUE@@BUILD_WITH_OWN_LIBOPING_FALSE@am__append_171 = -loping
+@BUILD_PLUGIN_PING_TRUE@am__append_172 = "-dlopen" ping.la
+@BUILD_PLUGIN_PING_TRUE@am__append_173 = ping.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_174 = postgresql.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_175 = "-dlopen" postgresql.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am__append_176 = postgresql.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_177 = powerdns.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_178 = "-dlopen" powerdns.la
+@BUILD_PLUGIN_POWERDNS_TRUE@am__append_179 = powerdns.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_180 = processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_181 = "-dlopen" processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@am__append_182 = processes.la
+@BUILD_PLUGIN_PROCESSES_TRUE@@BUILD_WITH_LIBKVM_GETPROCS_TRUE@am__append_183 = -lkvm
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_184 = rrdtool.la
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_185 = "-dlopen" rrdtool.la
+@BUILD_PLUGIN_RRDTOOL_TRUE@am__append_186 = rrdtool.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_187 = sensors.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_188 = "-dlopen" sensors.la
+@BUILD_PLUGIN_SENSORS_TRUE@am__append_189 = sensors.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_190 = serial.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_191 = "-dlopen" serial.la
+@BUILD_PLUGIN_SERIAL_TRUE@am__append_192 = serial.la
+@BUILD_PLUGIN_SNMP_TRUE@am__append_193 = snmp.la
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_194 = $(BUILD_WITH_LIBSNMP_CFLAGS)
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBNETSNMP_TRUE@am__append_195 = $(BUILD_WITH_LIBSNMP_LIBS)
+@BUILD_PLUGIN_SNMP_TRUE@@BUILD_WITH_LIBPTHREAD_TRUE@am__append_196 = -lpthread
+@BUILD_PLUGIN_SNMP_TRUE@am__append_197 = "-dlopen" snmp.la
+@BUILD_PLUGIN_SNMP_TRUE@am__append_198 = snmp.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_199 = swap.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_200 = "-dlopen" swap.la
+@BUILD_PLUGIN_SWAP_TRUE@am__append_201 = swap.la
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKSTAT_TRUE@am__append_202 = -lkstat
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBDEVINFO_TRUE@am__append_203 = -ldevinfo
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBKVM_GETSWAPINFO_TRUE@am__append_204 = -lkvm
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_205 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_SWAP_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_206 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_207 = syslog.la
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_208 = "-dlopen" syslog.la
+@BUILD_PLUGIN_SYSLOG_TRUE@am__append_209 = syslog.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_210 = tail.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_211 = "-dlopen" tail.la
+@BUILD_PLUGIN_TAIL_TRUE@am__append_212 = tail.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_213 = tape.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_214 = "-dlopen" tape.la
+@BUILD_PLUGIN_TAPE_TRUE@am__append_215 = tape.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_216 = tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_217 = "-dlopen" tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@am__append_218 = tcpconns.la
+@BUILD_PLUGIN_TCPCONNS_TRUE@@BUILD_WITH_LIBKVM_NLIST_TRUE@am__append_219 = -lkvm
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_220 = teamspeak2.la
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_221 = "-dlopen" teamspeak2.la
+@BUILD_PLUGIN_TEAMSPEAK2_TRUE@am__append_222 = teamspeak2.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_223 = thermal.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_224 = "-dlopen" thermal.la
+@BUILD_PLUGIN_THERMAL_TRUE@am__append_225 = thermal.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_226 = unixsock.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_227 = "-dlopen" unixsock.la
+@BUILD_PLUGIN_UNIXSOCK_TRUE@am__append_228 = unixsock.la
+@BUILD_PLUGIN_USERS_TRUE@am__append_229 = users.la
+@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_230 = $(BUILD_WITH_LIBSTATGRAB_CFLAGS)
+@BUILD_PLUGIN_USERS_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__append_231 = $(BUILD_WITH_LIBSTATGRAB_LDFLAGS)
+@BUILD_PLUGIN_USERS_TRUE@am__append_232 = "-dlopen" users.la
+@BUILD_PLUGIN_USERS_TRUE@am__append_233 = users.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_234 = uuid.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_235 = "-dlopen" uuid.la
+@BUILD_PLUGIN_UUID_TRUE@am__append_236 = uuid.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_237 = vmem.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_238 = "-dlopen" vmem.la
+@BUILD_PLUGIN_VMEM_TRUE@am__append_239 = vmem.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_240 = vserver.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_241 = "-dlopen" vserver.la
+@BUILD_PLUGIN_VSERVER_TRUE@am__append_242 = vserver.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_243 = wireless.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_244 = "-dlopen" wireless.la
+@BUILD_PLUGIN_WIRELESS_TRUE@am__append_245 = wireless.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_246 = xmms.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_247 = "-dlopen" xmms.la
+@BUILD_PLUGIN_XMMS_TRUE@am__append_248 = xmms.la
 subdir = src
 DIST_COMMON = $(dist_man_MANS) $(srcdir)/Makefile.am \
 	$(srcdir)/Makefile.in $(srcdir)/collectd.conf.in \
 	$(srcdir)/config.h.in
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 am__aclocal_m4_deps = $(top_srcdir)/configure.in
@@ -401,22 +421,33 @@
 entropy_la_OBJECTS = $(am_entropy_la_OBJECTS)
 entropy_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(entropy_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_ENTROPY_TRUE@am_entropy_la_rpath = -rpath $(pkglibdir)
 exec_la_LIBADD =
-am__exec_la_SOURCES_DIST = exec.c utils_cmd_putnotif.c \
-	utils_cmd_putnotif.h utils_cmd_putval.c utils_cmd_putval.h
+am__exec_la_SOURCES_DIST = exec.c utils_parse_option.h \
+	utils_parse_option.c utils_cmd_putnotif.c utils_cmd_putnotif.h \
+	utils_cmd_putval.c utils_cmd_putval.h
 @BUILD_PLUGIN_EXEC_TRUE@am_exec_la_OBJECTS = exec.lo \
+@BUILD_PLUGIN_EXEC_TRUE@	utils_parse_option.lo \
 @BUILD_PLUGIN_EXEC_TRUE@	utils_cmd_putnotif.lo \
 @BUILD_PLUGIN_EXEC_TRUE@	utils_cmd_putval.lo
 exec_la_OBJECTS = $(am_exec_la_OBJECTS)
 exec_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(exec_la_LDFLAGS) \
 	$(LDFLAGS) -o $@
 @BUILD_PLUGIN_EXEC_TRUE@am_exec_la_rpath = -rpath $(pkglibdir)
+filecount_la_LIBADD =
+am__filecount_la_SOURCES_DIST = filecount.c
+@BUILD_PLUGIN_FILECOUNT_TRUE@am_filecount_la_OBJECTS = filecount.lo
+filecount_la_OBJECTS = $(am_filecount_la_OBJECTS)
+filecount_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(filecount_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_FILECOUNT_TRUE@am_filecount_la_rpath = -rpath \
+@BUILD_PLUGIN_FILECOUNT_TRUE@	$(pkglibdir)
 hddtemp_la_LIBADD =
 am__hddtemp_la_SOURCES_DIST = hddtemp.c
 @BUILD_PLUGIN_HDDTEMP_TRUE@am_hddtemp_la_OBJECTS = hddtemp.lo
 hddtemp_la_OBJECTS = $(am_hddtemp_la_OBJECTS)
 hddtemp_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
@@ -500,18 +531,17 @@
 mbmon_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(mbmon_la_LDFLAGS) \
 	$(LDFLAGS) -o $@
 @BUILD_PLUGIN_MBMON_TRUE@am_mbmon_la_rpath = -rpath $(pkglibdir)
 memcached_la_DEPENDENCIES =
 am__memcached_la_SOURCES_DIST = memcached.c
-@BUILD_PLUGIN_MEMCACHED_TRUE@am_memcached_la_OBJECTS =  \
-@BUILD_PLUGIN_MEMCACHED_TRUE@	memcached_la-memcached.lo
+@BUILD_PLUGIN_MEMCACHED_TRUE@am_memcached_la_OBJECTS = memcached.lo
 memcached_la_OBJECTS = $(am_memcached_la_OBJECTS)
 memcached_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
-	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(memcached_la_CFLAGS) \
-	$(CFLAGS) $(memcached_la_LDFLAGS) $(LDFLAGS) -o $@
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(memcached_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_MEMCACHED_TRUE@am_memcached_la_rpath = -rpath \
 @BUILD_PLUGIN_MEMCACHED_TRUE@	$(pkglibdir)
 @BUILD_PLUGIN_MEMORY_TRUE@@BUILD_WITH_LIBSTATGRAB_TRUE@am__DEPENDENCIES_7 = $(am__DEPENDENCIES_1)
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_DEPENDENCIES =  \
 @BUILD_PLUGIN_MEMORY_TRUE@	$(am__DEPENDENCIES_1) \
 @BUILD_PLUGIN_MEMORY_TRUE@	$(am__DEPENDENCIES_1) \
@@ -576,12 +606,32 @@
 @BUILD_PLUGIN_NGINX_TRUE@am_nginx_la_OBJECTS = nginx_la-nginx.lo
 nginx_la_OBJECTS = $(am_nginx_la_OBJECTS)
 nginx_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(nginx_la_CFLAGS) $(CFLAGS) \
 	$(nginx_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_NGINX_TRUE@am_nginx_la_rpath = -rpath $(pkglibdir)
+notify_desktop_la_LIBADD =
+am__notify_desktop_la_SOURCES_DIST = notify_desktop.c
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am_notify_desktop_la_OBJECTS = notify_desktop_la-notify_desktop.lo
+notify_desktop_la_OBJECTS = $(am_notify_desktop_la_OBJECTS)
+notify_desktop_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) \
+	$(notify_desktop_la_CFLAGS) $(CFLAGS) \
+	$(notify_desktop_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@am_notify_desktop_la_rpath = -rpath \
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@	$(pkglibdir)
+notify_email_la_LIBADD =
+am__notify_email_la_SOURCES_DIST = notify_email.c
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am_notify_email_la_OBJECTS =  \
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@	notify_email.lo
+notify_email_la_OBJECTS = $(am_notify_email_la_OBJECTS)
+notify_email_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(notify_email_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@am_notify_email_la_rpath = -rpath \
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@	$(pkglibdir)
 ntpd_la_LIBADD =
 am__ntpd_la_SOURCES_DIST = ntpd.c
 @BUILD_PLUGIN_NTPD_TRUE@am_ntpd_la_OBJECTS = ntpd.lo
 ntpd_la_OBJECTS = $(am_ntpd_la_OBJECTS)
 ntpd_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(ntpd_la_LDFLAGS) \
@@ -592,12 +642,22 @@
 @BUILD_PLUGIN_NUT_TRUE@am_nut_la_OBJECTS = nut_la-nut.lo
 nut_la_OBJECTS = $(am_nut_la_OBJECTS)
 nut_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(nut_la_CFLAGS) $(CFLAGS) \
 	$(nut_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_NUT_TRUE@am_nut_la_rpath = -rpath $(pkglibdir)
+@BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_DEPENDENCIES =  \
+@BUILD_PLUGIN_ONEWIRE_TRUE@	$(am__DEPENDENCIES_1)
+am__onewire_la_SOURCES_DIST = onewire.c
+@BUILD_PLUGIN_ONEWIRE_TRUE@am_onewire_la_OBJECTS =  \
+@BUILD_PLUGIN_ONEWIRE_TRUE@	onewire_la-onewire.lo
+onewire_la_OBJECTS = $(am_onewire_la_OBJECTS)
+onewire_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(onewire_la_CFLAGS) \
+	$(CFLAGS) $(onewire_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_ONEWIRE_TRUE@am_onewire_la_rpath = -rpath $(pkglibdir)
 perl_la_LIBADD =
 am__perl_la_SOURCES_DIST = perl.c
 @BUILD_PLUGIN_PERL_TRUE@am_perl_la_OBJECTS = perl_la-perl.lo
 perl_la_OBJECTS = $(am_perl_la_OBJECTS)
 perl_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(perl_la_CFLAGS) $(CFLAGS) \
@@ -607,21 +667,32 @@
 @BUILD_PLUGIN_PING_TRUE@am_ping_la_OBJECTS = ping.lo
 ping_la_OBJECTS = $(am_ping_la_OBJECTS)
 ping_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(ping_la_LDFLAGS) \
 	$(LDFLAGS) -o $@
 @BUILD_PLUGIN_PING_TRUE@am_ping_la_rpath = -rpath $(pkglibdir)
+postgresql_la_LIBADD =
+am__postgresql_la_SOURCES_DIST = postgresql.c
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am_postgresql_la_OBJECTS =  \
+@BUILD_PLUGIN_POSTGRESQL_TRUE@	postgresql_la-postgresql.lo
+postgresql_la_OBJECTS = $(am_postgresql_la_OBJECTS)
+postgresql_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(postgresql_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_POSTGRESQL_TRUE@am_postgresql_la_rpath = -rpath \
+@BUILD_PLUGIN_POSTGRESQL_TRUE@	$(pkglibdir)
 powerdns_la_LIBADD =
 am__powerdns_la_SOURCES_DIST = powerdns.c
 @BUILD_PLUGIN_POWERDNS_TRUE@am_powerdns_la_OBJECTS = powerdns.lo
 powerdns_la_OBJECTS = $(am_powerdns_la_OBJECTS)
 powerdns_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(powerdns_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_POWERDNS_TRUE@am_powerdns_la_rpath = -rpath $(pkglibdir)
-processes_la_LIBADD =
+@BUILD_PLUGIN_PROCESSES_TRUE@processes_la_DEPENDENCIES =  \
+@BUILD_PLUGIN_PROCESSES_TRUE@	$(am__DEPENDENCIES_1)
 am__processes_la_SOURCES_DIST = processes.c
 @BUILD_PLUGIN_PROCESSES_TRUE@am_processes_la_OBJECTS = processes.lo
 processes_la_OBJECTS = $(am_processes_la_OBJECTS)
 processes_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(processes_la_LDFLAGS) $(LDFLAGS) -o $@
@@ -697,13 +768,14 @@
 @BUILD_PLUGIN_TAPE_TRUE@am_tape_la_OBJECTS = tape.lo
 tape_la_OBJECTS = $(am_tape_la_OBJECTS)
 tape_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) \
 	--mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) $(tape_la_LDFLAGS) \
 	$(LDFLAGS) -o $@
 @BUILD_PLUGIN_TAPE_TRUE@am_tape_la_rpath = -rpath $(pkglibdir)
-tcpconns_la_LIBADD =
+@BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_DEPENDENCIES =  \
+@BUILD_PLUGIN_TCPCONNS_TRUE@	$(am__DEPENDENCIES_1)
 am__tcpconns_la_SOURCES_DIST = tcpconns.c
 @BUILD_PLUGIN_TCPCONNS_TRUE@am_tcpconns_la_OBJECTS = tcpconns.lo
 tcpconns_la_OBJECTS = $(am_tcpconns_la_OBJECTS)
 tcpconns_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(tcpconns_la_LDFLAGS) $(LDFLAGS) -o $@
@@ -715,18 +787,28 @@
 teamspeak2_la_OBJECTS = $(am_teamspeak2_la_OBJECTS)
 teamspeak2_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
 	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
 	$(teamspeak2_la_LDFLAGS) $(LDFLAGS) -o $@
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@am_teamspeak2_la_rpath = -rpath \
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@	$(pkglibdir)
+thermal_la_LIBADD =
+am__thermal_la_SOURCES_DIST = thermal.c
+@BUILD_PLUGIN_THERMAL_TRUE@am_thermal_la_OBJECTS = thermal.lo
+thermal_la_OBJECTS = $(am_thermal_la_OBJECTS)
+thermal_la_LINK = $(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) \
+	$(LIBTOOLFLAGS) --mode=link $(CCLD) $(AM_CFLAGS) $(CFLAGS) \
+	$(thermal_la_LDFLAGS) $(LDFLAGS) -o $@
+@BUILD_PLUGIN_THERMAL_TRUE@am_thermal_la_rpath = -rpath $(pkglibdir)
 unixsock_la_LIBADD =
-am__unixsock_la_SOURCES_DIST = unixsock.c utils_cmd_flush.h \
-	utils_cmd_flush.c utils_cmd_getval.h utils_cmd_getval.c \
-	utils_cmd_listval.h utils_cmd_listval.c utils_cmd_putval.h \
-	utils_cmd_putval.c utils_cmd_putnotif.h utils_cmd_putnotif.c
+am__unixsock_la_SOURCES_DIST = unixsock.c utils_parse_option.h \
+	utils_parse_option.c utils_cmd_flush.h utils_cmd_flush.c \
+	utils_cmd_getval.h utils_cmd_getval.c utils_cmd_listval.h \
+	utils_cmd_listval.c utils_cmd_putval.h utils_cmd_putval.c \
+	utils_cmd_putnotif.h utils_cmd_putnotif.c
 @BUILD_PLUGIN_UNIXSOCK_TRUE@am_unixsock_la_OBJECTS = unixsock.lo \
+@BUILD_PLUGIN_UNIXSOCK_TRUE@	utils_parse_option.lo \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@	utils_cmd_flush.lo \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@	utils_cmd_getval.lo \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@	utils_cmd_listval.lo \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@	utils_cmd_putval.lo \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@	utils_cmd_putnotif.lo
 unixsock_la_OBJECTS = $(am_unixsock_la_OBJECTS)
@@ -788,12 +870,13 @@
 sbinPROGRAMS_INSTALL = $(INSTALL_PROGRAM)
 PROGRAMS = $(bin_PROGRAMS) $(sbin_PROGRAMS)
 am_collectd_OBJECTS = collectd-collectd.$(OBJEXT) \
 	collectd-common.$(OBJEXT) collectd-configfile.$(OBJEXT) \
 	collectd-plugin.$(OBJEXT) collectd-utils_avltree.$(OBJEXT) \
 	collectd-utils_cache.$(OBJEXT) \
+	collectd-utils_complain.$(OBJEXT) \
 	collectd-utils_ignorelist.$(OBJEXT) \
 	collectd-utils_llist.$(OBJEXT) \
 	collectd-utils_tail_match.$(OBJEXT) \
 	collectd-utils_match.$(OBJEXT) collectd-utils_mount.$(OBJEXT) \
 	collectd-utils_tail.$(OBJEXT) \
 	collectd-utils_threshold.$(OBJEXT) \
@@ -830,64 +913,72 @@
 	$(LDFLAGS) -o $@
 SOURCES = $(apache_la_SOURCES) $(apcups_la_SOURCES) \
 	$(apple_sensors_la_SOURCES) $(ascent_la_SOURCES) \
 	$(battery_la_SOURCES) $(cpu_la_SOURCES) $(cpufreq_la_SOURCES) \
 	$(csv_la_SOURCES) $(df_la_SOURCES) $(disk_la_SOURCES) \
 	$(dns_la_SOURCES) $(email_la_SOURCES) $(entropy_la_SOURCES) \
-	$(exec_la_SOURCES) $(hddtemp_la_SOURCES) \
-	$(interface_la_SOURCES) $(ipmi_la_SOURCES) \
-	$(iptables_la_SOURCES) $(ipvs_la_SOURCES) $(irq_la_SOURCES) \
-	$(libvirt_la_SOURCES) $(load_la_SOURCES) $(logfile_la_SOURCES) \
-	$(mbmon_la_SOURCES) $(memcached_la_SOURCES) \
-	$(memory_la_SOURCES) $(multimeter_la_SOURCES) \
-	$(mysql_la_SOURCES) $(netlink_la_SOURCES) \
-	$(network_la_SOURCES) $(nfs_la_SOURCES) $(nginx_la_SOURCES) \
-	$(ntpd_la_SOURCES) $(nut_la_SOURCES) $(perl_la_SOURCES) \
-	$(ping_la_SOURCES) $(powerdns_la_SOURCES) \
-	$(processes_la_SOURCES) $(rrdtool_la_SOURCES) \
-	$(sensors_la_SOURCES) $(serial_la_SOURCES) $(snmp_la_SOURCES) \
-	$(swap_la_SOURCES) $(syslog_la_SOURCES) $(tail_la_SOURCES) \
-	$(tape_la_SOURCES) $(tcpconns_la_SOURCES) \
-	$(teamspeak2_la_SOURCES) $(unixsock_la_SOURCES) \
+	$(exec_la_SOURCES) $(filecount_la_SOURCES) \
+	$(hddtemp_la_SOURCES) $(interface_la_SOURCES) \
+	$(ipmi_la_SOURCES) $(iptables_la_SOURCES) $(ipvs_la_SOURCES) \
+	$(irq_la_SOURCES) $(libvirt_la_SOURCES) $(load_la_SOURCES) \
+	$(logfile_la_SOURCES) $(mbmon_la_SOURCES) \
+	$(memcached_la_SOURCES) $(memory_la_SOURCES) \
+	$(multimeter_la_SOURCES) $(mysql_la_SOURCES) \
+	$(netlink_la_SOURCES) $(network_la_SOURCES) $(nfs_la_SOURCES) \
+	$(nginx_la_SOURCES) $(notify_desktop_la_SOURCES) \
+	$(notify_email_la_SOURCES) $(ntpd_la_SOURCES) \
+	$(nut_la_SOURCES) $(onewire_la_SOURCES) $(perl_la_SOURCES) \
+	$(ping_la_SOURCES) $(postgresql_la_SOURCES) \
+	$(powerdns_la_SOURCES) $(processes_la_SOURCES) \
+	$(rrdtool_la_SOURCES) $(sensors_la_SOURCES) \
+	$(serial_la_SOURCES) $(snmp_la_SOURCES) $(swap_la_SOURCES) \
+	$(syslog_la_SOURCES) $(tail_la_SOURCES) $(tape_la_SOURCES) \
+	$(tcpconns_la_SOURCES) $(teamspeak2_la_SOURCES) \
+	$(thermal_la_SOURCES) $(unixsock_la_SOURCES) \
 	$(users_la_SOURCES) $(uuid_la_SOURCES) $(vmem_la_SOURCES) \
 	$(vserver_la_SOURCES) $(wireless_la_SOURCES) \
 	$(xmms_la_SOURCES) $(collectd_SOURCES) \
 	$(collectd_nagios_SOURCES) $(collectdmon_SOURCES)
 DIST_SOURCES = $(am__apache_la_SOURCES_DIST) \
 	$(am__apcups_la_SOURCES_DIST) \
 	$(am__apple_sensors_la_SOURCES_DIST) \
 	$(am__ascent_la_SOURCES_DIST) $(am__battery_la_SOURCES_DIST) \
 	$(am__cpu_la_SOURCES_DIST) $(am__cpufreq_la_SOURCES_DIST) \
 	$(am__csv_la_SOURCES_DIST) $(am__df_la_SOURCES_DIST) \
 	$(am__disk_la_SOURCES_DIST) $(am__dns_la_SOURCES_DIST) \
 	$(am__email_la_SOURCES_DIST) $(am__entropy_la_SOURCES_DIST) \
-	$(am__exec_la_SOURCES_DIST) $(am__hddtemp_la_SOURCES_DIST) \
+	$(am__exec_la_SOURCES_DIST) $(am__filecount_la_SOURCES_DIST) \
+	$(am__hddtemp_la_SOURCES_DIST) \
 	$(am__interface_la_SOURCES_DIST) $(am__ipmi_la_SOURCES_DIST) \
 	$(am__iptables_la_SOURCES_DIST) $(am__ipvs_la_SOURCES_DIST) \
 	$(am__irq_la_SOURCES_DIST) $(am__libvirt_la_SOURCES_DIST) \
 	$(am__load_la_SOURCES_DIST) $(am__logfile_la_SOURCES_DIST) \
 	$(am__mbmon_la_SOURCES_DIST) $(am__memcached_la_SOURCES_DIST) \
 	$(am__memory_la_SOURCES_DIST) \
 	$(am__multimeter_la_SOURCES_DIST) $(am__mysql_la_SOURCES_DIST) \
 	$(am__netlink_la_SOURCES_DIST) $(am__network_la_SOURCES_DIST) \
 	$(am__nfs_la_SOURCES_DIST) $(am__nginx_la_SOURCES_DIST) \
+	$(am__notify_desktop_la_SOURCES_DIST) \
+	$(am__notify_email_la_SOURCES_DIST) \
 	$(am__ntpd_la_SOURCES_DIST) $(am__nut_la_SOURCES_DIST) \
-	$(am__perl_la_SOURCES_DIST) $(am__ping_la_SOURCES_DIST) \
+	$(am__onewire_la_SOURCES_DIST) $(am__perl_la_SOURCES_DIST) \
+	$(am__ping_la_SOURCES_DIST) $(am__postgresql_la_SOURCES_DIST) \
 	$(am__powerdns_la_SOURCES_DIST) \
 	$(am__processes_la_SOURCES_DIST) \
 	$(am__rrdtool_la_SOURCES_DIST) $(am__sensors_la_SOURCES_DIST) \
 	$(am__serial_la_SOURCES_DIST) $(am__snmp_la_SOURCES_DIST) \
 	$(am__swap_la_SOURCES_DIST) $(am__syslog_la_SOURCES_DIST) \
 	$(am__tail_la_SOURCES_DIST) $(am__tape_la_SOURCES_DIST) \
 	$(am__tcpconns_la_SOURCES_DIST) \
 	$(am__teamspeak2_la_SOURCES_DIST) \
-	$(am__unixsock_la_SOURCES_DIST) $(am__users_la_SOURCES_DIST) \
-	$(am__uuid_la_SOURCES_DIST) $(am__vmem_la_SOURCES_DIST) \
-	$(am__vserver_la_SOURCES_DIST) $(am__wireless_la_SOURCES_DIST) \
-	$(am__xmms_la_SOURCES_DIST) $(collectd_SOURCES) \
-	$(collectd_nagios_SOURCES) $(collectdmon_SOURCES)
+	$(am__thermal_la_SOURCES_DIST) $(am__unixsock_la_SOURCES_DIST) \
+	$(am__users_la_SOURCES_DIST) $(am__uuid_la_SOURCES_DIST) \
+	$(am__vmem_la_SOURCES_DIST) $(am__vserver_la_SOURCES_DIST) \
+	$(am__wireless_la_SOURCES_DIST) $(am__xmms_la_SOURCES_DIST) \
+	$(collectd_SOURCES) $(collectd_nagios_SOURCES) \
+	$(collectdmon_SOURCES)
 RECURSIVE_TARGETS = all-recursive check-recursive dvi-recursive \
 	html-recursive info-recursive install-data-recursive \
 	install-dvi-recursive install-exec-recursive \
 	install-html-recursive install-info-recursive \
 	install-pdf-recursive install-ps-recursive install-recursive \
 	installcheck-recursive installdirs-recursive pdf-recursive \
@@ -914,12 +1005,16 @@
 BUILD_WITH_LIBHAL_CFLAGS = @BUILD_WITH_LIBHAL_CFLAGS@
 BUILD_WITH_LIBHAL_LIBS = @BUILD_WITH_LIBHAL_LIBS@
 BUILD_WITH_LIBMYSQL_CFLAGS = @BUILD_WITH_LIBMYSQL_CFLAGS@
 BUILD_WITH_LIBMYSQL_LIBS = @BUILD_WITH_LIBMYSQL_LIBS@
 BUILD_WITH_LIBNETLINK_CFLAGS = @BUILD_WITH_LIBNETLINK_CFLAGS@
 BUILD_WITH_LIBNETLINK_LIBS = @BUILD_WITH_LIBNETLINK_LIBS@
+BUILD_WITH_LIBOWCAPI_CPPFLAGS = @BUILD_WITH_LIBOWCAPI_CPPFLAGS@
+BUILD_WITH_LIBOWCAPI_LIBS = @BUILD_WITH_LIBOWCAPI_LIBS@
+BUILD_WITH_LIBPQ_CPPFLAGS = @BUILD_WITH_LIBPQ_CPPFLAGS@
+BUILD_WITH_LIBPQ_LDFLAGS = @BUILD_WITH_LIBPQ_LDFLAGS@
 BUILD_WITH_LIBRRD_CFLAGS = @BUILD_WITH_LIBRRD_CFLAGS@
 BUILD_WITH_LIBRRD_LDFLAGS = @BUILD_WITH_LIBRRD_LDFLAGS@
 BUILD_WITH_LIBSENSORS_CFLAGS = @BUILD_WITH_LIBSENSORS_CFLAGS@
 BUILD_WITH_LIBSENSORS_LDFLAGS = @BUILD_WITH_LIBSENSORS_LDFLAGS@
 BUILD_WITH_LIBSNMP_CFLAGS = @BUILD_WITH_LIBSNMP_CFLAGS@
 BUILD_WITH_LIBSNMP_LIBS = @BUILD_WITH_LIBSNMP_LIBS@
@@ -966,12 +1061,14 @@
 KERNEL_DIR = @KERNEL_DIR@
 LDFLAGS = @LDFLAGS@
 LEX = @LEX@
 LEXLIB = @LEXLIB@
 LEX_OUTPUT_ROOT = @LEX_OUTPUT_ROOT@
 LIBLTDL = @LIBLTDL@
+LIBNOTIFY_CFLAGS = @LIBNOTIFY_CFLAGS@
+LIBNOTIFY_LIBS = @LIBNOTIFY_LIBS@
 LIBOBJS = @LIBOBJS@
 LIBS = @LIBS@
 LIBTOOL = @LIBTOOL@
 LN_S = @LN_S@
 LTDLINCL = @LTDLINCL@
 LTLIBOBJS = @LTLIBOBJS@
@@ -1055,273 +1152,318 @@
 SUBDIRS = $(am__append_1) $(am__append_2) $(am__append_3)
 @COMPILER_IS_GCC_TRUE@AM_CFLAGS = -Wall -Werror
 AM_CPPFLAGS = -DPREFIX='"${prefix}"' \
 	-DCONFIGFILE='"${sysconfdir}/${PACKAGE_NAME}.conf"' \
 	-DLOCALSTATEDIR='"${localstatedir}"' \
 	-DPKGLOCALSTATEDIR='"${localstatedir}/lib/${PACKAGE_NAME}"' \
-	$(am__append_4) -DPLUGINDIR='"${pkglibdir}"'
+	$(am__append_4) -DPLUGINDIR='"${pkglibdir}"' \
+	-DPKGDATADIR='"${pkgdatadir}"'
 collectd_SOURCES = collectd.c collectd.h \
 		   common.c common.h \
 		   configfile.c configfile.h \
 		   plugin.c plugin.h \
 		   utils_avltree.c utils_avltree.h \
 		   utils_cache.c utils_cache.h \
+		   utils_complain.c utils_complain.h \
 		   utils_ignorelist.c utils_ignorelist.h \
 		   utils_llist.c utils_llist.h \
 		   utils_tail_match.c utils_tail_match.h \
 		   utils_match.c utils_match.h \
 		   utils_mount.c utils_mount.h \
 		   utils_tail.c utils_tail.h \
 		   utils_threshold.c utils_threshold.h \
 		   types_list.c types_list.h
 
 collectd_CPPFLAGS = $(AM_CPPFLAGS) $(LTDLINCL)
-collectd_CFLAGS = $(am__append_11)
+collectd_CFLAGS = $(AM_CFLAGS) $(am__append_11)
 collectd_LDFLAGS = -export-dynamic
 collectd_LDADD = $(am__append_5) $(am__append_6) $(am__append_7) \
 	$(am__append_8) $(am__append_9) $(am__append_10) \
 	$(am__append_12) $(am__append_13) $(am__append_15) \
 	$(am__append_18) $(am__append_24) $(am__append_27) \
 	$(am__append_30) $(am__append_34) $(am__append_41) \
 	$(am__append_44) $(am__append_47) $(am__append_50) \
 	$(am__append_58) $(am__append_61) $(am__append_65) \
-	$(am__append_68) $(am__append_72) $(am__append_76) \
-	$(am__append_79) $(am__append_87) $(am__append_90) \
+	$(am__append_68) $(am__append_72) $(am__append_75) \
+	$(am__append_79) $(am__append_82) $(am__append_90) \
 	$(am__append_93) $(am__append_96) $(am__append_99) \
-	$(am__append_102) $(am__append_107) $(am__append_111) \
-	$(am__append_115) $(am__append_118) $(am__append_125) \
-	$(am__append_128) $(am__append_133) $(am__append_138) \
-	$(am__append_141) $(am__append_146) $(am__append_150) \
-	$(am__append_153) $(am__append_156) $(am__append_160) \
-	$(am__append_163) $(am__append_166) $(am__append_169) \
-	$(am__append_172) $(am__append_175) $(am__append_181) \
-	$(am__append_184) $(am__append_192) $(am__append_195) \
-	$(am__append_198) $(am__append_201) $(am__append_204) \
-	$(am__append_207) $(am__append_212) $(am__append_215) \
-	$(am__append_218) $(am__append_221) $(am__append_224) \
-	$(am__append_227)
+	$(am__append_102) $(am__append_105) $(am__append_110) \
+	$(am__append_114) $(am__append_118) $(am__append_121) \
+	$(am__append_128) $(am__append_131) $(am__append_136) \
+	$(am__append_141) $(am__append_144) $(am__append_149) \
+	$(am__append_152) $(am__append_155) $(am__append_159) \
+	$(am__append_162) $(am__append_165) $(am__append_168) \
+	$(am__append_172) $(am__append_175) $(am__append_178) \
+	$(am__append_181) $(am__append_185) $(am__append_188) \
+	$(am__append_191) $(am__append_197) $(am__append_200) \
+	$(am__append_208) $(am__append_211) $(am__append_214) \
+	$(am__append_217) $(am__append_221) $(am__append_224) \
+	$(am__append_227) $(am__append_232) $(am__append_235) \
+	$(am__append_238) $(am__append_241) $(am__append_244) \
+	$(am__append_247)
 collectd_DEPENDENCIES = $(am__append_14) $(am__append_21) \
 	$(am__append_25) $(am__append_28) $(am__append_31) \
 	$(am__append_35) $(am__append_42) $(am__append_45) \
 	$(am__append_48) $(am__append_51) $(am__append_59) \
 	$(am__append_62) $(am__append_66) $(am__append_69) \
-	$(am__append_73) $(am__append_77) $(am__append_80) \
-	$(am__append_88) $(am__append_91) $(am__append_94) \
+	$(am__append_73) $(am__append_76) $(am__append_80) \
+	$(am__append_83) $(am__append_91) $(am__append_94) \
 	$(am__append_97) $(am__append_100) $(am__append_103) \
-	$(am__append_108) $(am__append_112) $(am__append_116) \
-	$(am__append_119) $(am__append_126) $(am__append_131) \
-	$(am__append_134) $(am__append_139) $(am__append_142) \
-	$(am__append_147) $(am__append_151) $(am__append_154) \
-	$(am__append_157) $(am__append_161) $(am__append_164) \
-	$(am__append_167) $(am__append_170) $(am__append_173) \
-	$(am__append_176) $(am__append_182) $(am__append_185) \
-	$(am__append_193) $(am__append_196) $(am__append_199) \
-	$(am__append_202) $(am__append_205) $(am__append_208) \
-	$(am__append_213) $(am__append_216) $(am__append_219) \
-	$(am__append_222) $(am__append_225) $(am__append_228)
+	$(am__append_106) $(am__append_111) $(am__append_115) \
+	$(am__append_119) $(am__append_122) $(am__append_129) \
+	$(am__append_134) $(am__append_137) $(am__append_142) \
+	$(am__append_145) $(am__append_150) $(am__append_153) \
+	$(am__append_156) $(am__append_160) $(am__append_163) \
+	$(am__append_166) $(am__append_169) $(am__append_173) \
+	$(am__append_176) $(am__append_179) $(am__append_182) \
+	$(am__append_186) $(am__append_189) $(am__append_192) \
+	$(am__append_198) $(am__append_201) $(am__append_209) \
+	$(am__append_212) $(am__append_215) $(am__append_218) \
+	$(am__append_222) $(am__append_225) $(am__append_228) \
+	$(am__append_233) $(am__append_236) $(am__append_239) \
+	$(am__append_242) $(am__append_245) $(am__append_248)
 collectdmon_SOURCES = collectdmon.c
 collectdmon_CPPFLAGS = $(AM_CPPFLAGS)
 collectd_nagios_SOURCES = collectd-nagios.c
 collectd_nagios_LDFLAGS = $(am__append_16)
 pkglib_LTLIBRARIES = $(am__append_17) $(am__append_22) \
 	$(am__append_26) $(am__append_29) $(am__append_32) \
 	$(am__append_36) $(am__append_43) $(am__append_46) \
 	$(am__append_49) $(am__append_52) $(am__append_60) \
 	$(am__append_63) $(am__append_67) $(am__append_70) \
-	$(am__append_74) $(am__append_78) $(am__append_85) \
-	$(am__append_89) $(am__append_92) $(am__append_95) \
-	$(am__append_98) $(am__append_101) $(am__append_106) \
-	$(am__append_109) $(am__append_113) $(am__append_117) \
-	$(am__append_124) $(am__append_127) $(am__append_132) \
-	$(am__append_135) $(am__append_140) $(am__append_143) \
-	$(am__append_148) $(am__append_152) $(am__append_155) \
-	$(am__append_158) $(am__append_162) $(am__append_165) \
-	$(am__append_168) $(am__append_171) $(am__append_174) \
-	$(am__append_177) $(am__append_183) $(am__append_191) \
-	$(am__append_194) $(am__append_197) $(am__append_200) \
-	$(am__append_203) $(am__append_206) $(am__append_209) \
-	$(am__append_214) $(am__append_217) $(am__append_220) \
-	$(am__append_223) $(am__append_226)
+	$(am__append_74) $(am__append_77) $(am__append_81) \
+	$(am__append_88) $(am__append_92) $(am__append_95) \
+	$(am__append_98) $(am__append_101) $(am__append_104) \
+	$(am__append_109) $(am__append_112) $(am__append_116) \
+	$(am__append_120) $(am__append_127) $(am__append_130) \
+	$(am__append_135) $(am__append_138) $(am__append_143) \
+	$(am__append_146) $(am__append_151) $(am__append_154) \
+	$(am__append_157) $(am__append_161) $(am__append_164) \
+	$(am__append_167) $(am__append_170) $(am__append_174) \
+	$(am__append_177) $(am__append_180) $(am__append_184) \
+	$(am__append_187) $(am__append_190) $(am__append_193) \
+	$(am__append_199) $(am__append_207) $(am__append_210) \
+	$(am__append_213) $(am__append_216) $(am__append_220) \
+	$(am__append_223) $(am__append_226) $(am__append_229) \
+	$(am__append_234) $(am__append_237) $(am__append_240) \
+	$(am__append_243) $(am__append_246)
 @BUILD_PLUGIN_APACHE_TRUE@apache_la_SOURCES = apache.c
 @BUILD_PLUGIN_APACHE_TRUE@apache_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_APACHE_TRUE@apache_la_CFLAGS = $(am__append_19)
+@BUILD_PLUGIN_APACHE_TRUE@apache_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_APACHE_TRUE@	$(am__append_19)
 @BUILD_PLUGIN_APACHE_TRUE@apache_la_LIBADD = $(am__append_20)
 @BUILD_PLUGIN_APCUPS_TRUE@apcups_la_SOURCES = apcups.c
 @BUILD_PLUGIN_APCUPS_TRUE@apcups_la_LDFLAGS = -module -avoid-version \
 @BUILD_PLUGIN_APCUPS_TRUE@	$(am__append_23)
 @BUILD_PLUGIN_APPLE_SENSORS_TRUE@apple_sensors_la_SOURCES = apple_sensors.c
 @BUILD_PLUGIN_APPLE_SENSORS_TRUE@apple_sensors_la_LDFLAGS = -module -avoid-version -lIOKit
 @BUILD_PLUGIN_ASCENT_TRUE@ascent_la_SOURCES = ascent.c
 @BUILD_PLUGIN_ASCENT_TRUE@ascent_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_ASCENT_TRUE@ascent_la_CFLAGS = $(BUILD_WITH_LIBCURL_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
+@BUILD_PLUGIN_ASCENT_TRUE@ascent_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_ASCENT_TRUE@		$(BUILD_WITH_LIBCURL_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
+
 @BUILD_PLUGIN_ASCENT_TRUE@ascent_la_LIBADD = $(BUILD_WITH_LIBCURL_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
 @BUILD_PLUGIN_BATTERY_TRUE@battery_la_SOURCES = battery.c
 @BUILD_PLUGIN_BATTERY_TRUE@battery_la_LDFLAGS = -module -avoid-version \
 @BUILD_PLUGIN_BATTERY_TRUE@	$(am__append_33)
 @BUILD_PLUGIN_CPU_TRUE@cpu_la_SOURCES = cpu.c
-@BUILD_PLUGIN_CPU_TRUE@cpu_la_CFLAGS = $(am__append_39)
+@BUILD_PLUGIN_CPU_TRUE@cpu_la_CFLAGS = $(AM_CFLAGS) $(am__append_39)
 @BUILD_PLUGIN_CPU_TRUE@cpu_la_LDFLAGS = -module -avoid-version \
 @BUILD_PLUGIN_CPU_TRUE@	$(am__append_37) $(am__append_38)
 @BUILD_PLUGIN_CPU_TRUE@cpu_la_LIBADD = $(am__append_40)
 @BUILD_PLUGIN_CPUFREQ_TRUE@cpufreq_la_SOURCES = cpufreq.c
 @BUILD_PLUGIN_CPUFREQ_TRUE@cpufreq_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_CSV_TRUE@csv_la_SOURCES = csv.c
 @BUILD_PLUGIN_CSV_TRUE@csv_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_DF_TRUE@df_la_SOURCES = df.c
 @BUILD_PLUGIN_DF_TRUE@df_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_DISK_TRUE@disk_la_SOURCES = disk.c
-@BUILD_PLUGIN_DISK_TRUE@disk_la_CFLAGS = $(am__append_56)
+@BUILD_PLUGIN_DISK_TRUE@disk_la_CFLAGS = $(AM_CFLAGS) $(am__append_56)
 @BUILD_PLUGIN_DISK_TRUE@disk_la_LDFLAGS = -module -avoid-version \
 @BUILD_PLUGIN_DISK_TRUE@	$(am__append_53) $(am__append_54) \
 @BUILD_PLUGIN_DISK_TRUE@	$(am__append_55)
 @BUILD_PLUGIN_DISK_TRUE@disk_la_LIBADD = $(am__append_57)
 @BUILD_PLUGIN_DNS_TRUE@dns_la_SOURCES = dns.c utils_dns.c utils_dns.h
 @BUILD_PLUGIN_DNS_TRUE@dns_la_LDFLAGS = -module -avoid-version -lpcap -lpthread
 @BUILD_PLUGIN_EMAIL_TRUE@email_la_SOURCES = email.c
 @BUILD_PLUGIN_EMAIL_TRUE@email_la_LDFLAGS = -module -avoid-version \
 @BUILD_PLUGIN_EMAIL_TRUE@	$(am__append_64)
 @BUILD_PLUGIN_ENTROPY_TRUE@entropy_la_SOURCES = entropy.c
 @BUILD_PLUGIN_ENTROPY_TRUE@entropy_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_EXEC_TRUE@exec_la_SOURCES = exec.c \
+@BUILD_PLUGIN_EXEC_TRUE@		  utils_parse_option.h utils_parse_option.c \
 @BUILD_PLUGIN_EXEC_TRUE@		  utils_cmd_putnotif.c utils_cmd_putnotif.h \
 @BUILD_PLUGIN_EXEC_TRUE@		  utils_cmd_putval.c utils_cmd_putval.h
 
 @BUILD_PLUGIN_EXEC_TRUE@exec_la_LDFLAGS = -module -avoid-version \
 @BUILD_PLUGIN_EXEC_TRUE@	$(am__append_71)
+@BUILD_PLUGIN_FILECOUNT_TRUE@filecount_la_SOURCES = filecount.c
+@BUILD_PLUGIN_FILECOUNT_TRUE@filecount_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_SOURCES = hddtemp.c
 @BUILD_PLUGIN_HDDTEMP_TRUE@hddtemp_la_LDFLAGS = -module -avoid-version \
-@BUILD_PLUGIN_HDDTEMP_TRUE@	$(am__append_75)
+@BUILD_PLUGIN_HDDTEMP_TRUE@	$(am__append_78)
 @BUILD_PLUGIN_INTERFACE_TRUE@interface_la_SOURCES = interface.c
-@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_CFLAGS = $(am__append_81)
-@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LDFLAGS = -module \
-@BUILD_PLUGIN_INTERFACE_TRUE@	-avoid-version $(am__append_83) \
+@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_CFLAGS = $(AM_CFLAGS) \
 @BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_84)
-@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LIBADD = $(am__append_82)
+@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LDFLAGS = -module \
+@BUILD_PLUGIN_INTERFACE_TRUE@	-avoid-version $(am__append_86) \
+@BUILD_PLUGIN_INTERFACE_TRUE@	$(am__append_87)
+@BUILD_PLUGIN_INTERFACE_TRUE@interface_la_LIBADD = $(am__append_85)
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_SOURCES = iptables.c
 @BUILD_PLUGIN_IPTABLES_TRUE@iptables_la_LDFLAGS = -module \
-@BUILD_PLUGIN_IPTABLES_TRUE@	-avoid-version $(am__append_86)
+@BUILD_PLUGIN_IPTABLES_TRUE@	-avoid-version $(am__append_89)
 @BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_TRUE@iptables_la_LIBADD = libiptc/libiptc.la
 @BUILD_PLUGIN_IPTABLES_TRUE@@BUILD_WITH_OWN_LIBIPTC_TRUE@iptables_la_DEPENDENCIES = libiptc/libiptc.la
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_SOURCES = ipmi.c
-@BUILD_PLUGIN_IPMI_TRUE@ipmi_la_CFLAGS = $(BUILD_WITH_OPENIPMI_CFLAGS)
+@BUILD_PLUGIN_IPMI_TRUE@ipmi_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_OPENIPMI_CFLAGS)
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_IPMI_TRUE@ipmi_la_LIBADD = $(BUILD_WITH_OPENIPMI_LIBS)
 @BUILD_PLUGIN_IPVS_TRUE@ipvs_la_SOURCES = ipvs.c
 @BUILD_PLUGIN_IPVS_TRUE@ipvs_la_CFLAGS = $(KERNEL_CFLAGS)
 @BUILD_PLUGIN_IPVS_TRUE@ipvs_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_IRQ_TRUE@irq_la_SOURCES = irq.c
 @BUILD_PLUGIN_IRQ_TRUE@irq_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_SOURCES = libvirt.c
-@BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_CFLAGS = $(BUILD_WITH_LIBVIRT_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
+@BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_LIBVIRT_TRUE@		$(BUILD_WITH_LIBVIRT_CFLAGS) $(BUILD_WITH_LIBXML2_CFLAGS)
+
 @BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_LIBADD = $(BUILD_WITH_LIBVIRT_LIBS) $(BUILD_WITH_LIBXML2_LIBS)
 @BUILD_PLUGIN_LIBVIRT_TRUE@libvirt_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_LOAD_TRUE@load_la_SOURCES = load.c
-@BUILD_PLUGIN_LOAD_TRUE@load_la_CFLAGS = $(am__append_104)
+@BUILD_PLUGIN_LOAD_TRUE@load_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_LOAD_TRUE@	$(am__append_107)
 @BUILD_PLUGIN_LOAD_TRUE@load_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_LOAD_TRUE@load_la_LIBADD = $(am__append_105)
+@BUILD_PLUGIN_LOAD_TRUE@load_la_LIBADD = $(am__append_108)
 @BUILD_PLUGIN_LOGFILE_TRUE@logfile_la_SOURCES = logfile.c
 @BUILD_PLUGIN_LOGFILE_TRUE@logfile_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MBMON_TRUE@mbmon_la_SOURCES = mbmon.c
 @BUILD_PLUGIN_MBMON_TRUE@mbmon_la_LDFLAGS = -module -avoid-version \
-@BUILD_PLUGIN_MBMON_TRUE@	$(am__append_110)
+@BUILD_PLUGIN_MBMON_TRUE@	$(am__append_113)
 @BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_SOURCES = memcached.c
 @BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_LDFLAGS = -module \
-@BUILD_PLUGIN_MEMCACHED_TRUE@	-avoid-version $(am__append_114)
-@BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_CFLAGS = 
+@BUILD_PLUGIN_MEMCACHED_TRUE@	-avoid-version $(am__append_117)
 @BUILD_PLUGIN_MEMCACHED_TRUE@memcached_la_LIBADD = 
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_SOURCES = memory.c
-@BUILD_PLUGIN_MEMORY_TRUE@memory_la_CFLAGS = $(am__append_122)
+@BUILD_PLUGIN_MEMORY_TRUE@memory_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_125)
 @BUILD_PLUGIN_MEMORY_TRUE@memory_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_MEMORY_TRUE@memory_la_LIBADD = $(am__append_120) \
-@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_121) $(am__append_123)
+@BUILD_PLUGIN_MEMORY_TRUE@memory_la_LIBADD = $(am__append_123) \
+@BUILD_PLUGIN_MEMORY_TRUE@	$(am__append_124) $(am__append_126)
 @BUILD_PLUGIN_MULTIMETER_TRUE@multimeter_la_SOURCES = multimeter.c
 @BUILD_PLUGIN_MULTIMETER_TRUE@multimeter_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_MYSQL_TRUE@mysql_la_SOURCES = mysql.c
 @BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_MYSQL_TRUE@mysql_la_CFLAGS = $(am__append_129)
-@BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LIBADD = $(am__append_130)
+@BUILD_PLUGIN_MYSQL_TRUE@mysql_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_MYSQL_TRUE@	$(am__append_132)
+@BUILD_PLUGIN_MYSQL_TRUE@mysql_la_LIBADD = $(am__append_133)
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_SOURCES = netlink.c
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_NETLINK_TRUE@netlink_la_CFLAGS = $(BUILD_WITH_LIBNETLINK_CFLAGS)
+@BUILD_PLUGIN_NETLINK_TRUE@netlink_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBNETLINK_CFLAGS)
 @BUILD_PLUGIN_NETLINK_TRUE@netlink_la_LIBADD = $(BUILD_WITH_LIBNETLINK_LIBS)
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_SOURCES = network.c network.h
 @BUILD_PLUGIN_NETWORK_TRUE@network_la_LDFLAGS = -module -avoid-version \
-@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_136) $(am__append_137)
+@BUILD_PLUGIN_NETWORK_TRUE@	$(am__append_139) $(am__append_140)
 @BUILD_PLUGIN_NFS_TRUE@nfs_la_SOURCES = nfs.c
 @BUILD_PLUGIN_NFS_TRUE@nfs_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_SOURCES = nginx.c
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_NGINX_TRUE@	$(am__append_144)
-@BUILD_PLUGIN_NGINX_TRUE@nginx_la_LIBADD = $(am__append_145)
+@BUILD_PLUGIN_NGINX_TRUE@	$(am__append_147)
+@BUILD_PLUGIN_NGINX_TRUE@nginx_la_LIBADD = $(am__append_148)
 @BUILD_PLUGIN_NGINX_TRUE@nginx_la_LDFLAGS = -module -avoid-version
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_SOURCES = notify_desktop.c
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_CFLAGS = $(AM_CFLAGS) $(LIBNOTIFY_CFLAGS)
+@BUILD_PLUGIN_NOTIFY_DESKTOP_TRUE@notify_desktop_la_LDFLAGS = -module -avoid-version $(LIBNOTIFY_LIBS)
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@notify_email_la_SOURCES = notify_email.c
+@BUILD_PLUGIN_NOTIFY_EMAIL_TRUE@notify_email_la_LDFLAGS = -L/usr/local/lib -lesmtp -lssl -lcrypto -pthread -module -avoid-version
 @BUILD_PLUGIN_NTPD_TRUE@ntpd_la_SOURCES = ntpd.c
 @BUILD_PLUGIN_NTPD_TRUE@ntpd_la_LDFLAGS = -module -avoid-version \
-@BUILD_PLUGIN_NTPD_TRUE@	$(am__append_149)
+@BUILD_PLUGIN_NTPD_TRUE@	$(am__append_158)
 @BUILD_PLUGIN_NUT_TRUE@nut_la_SOURCES = nut.c
 @BUILD_PLUGIN_NUT_TRUE@nut_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBUPSCLIENT_CFLAGS)
 @BUILD_PLUGIN_NUT_TRUE@nut_la_LDFLAGS = -module -avoid-version -lpthread $(BUILD_WITH_LIBUPSCLIENT_LIBS)
+@BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_SOURCES = onewire.c
+@BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_CFLAGS = $(AM_CFLAGS)
+@BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_CPPFLAGS = $(BUILD_WITH_LIBOWCAPI_CPPFLAGS)
+@BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_LIBADD = $(BUILD_WITH_LIBOWCAPI_LIBS)
+@BUILD_PLUGIN_ONEWIRE_TRUE@onewire_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_PERL_TRUE@perl_la_SOURCES = perl.c
+# Despite C99 providing the "bool" type thru stdbool.h, Perl defines its own
+# version of that type if HAS_BOOL is not defined... *sigh*
+@BUILD_PLUGIN_PERL_TRUE@perl_la_CPPFLAGS = $(AM_CPPFLAGS) -DHAS_BOOL=1
 @BUILD_PLUGIN_PERL_TRUE@perl_la_CFLAGS = $(AM_CFLAGS) \
-@BUILD_PLUGIN_PERL_TRUE@		  $(PERL_CFLAGS) \
-@BUILD_PLUGIN_PERL_TRUE@		  -DXS_VERSION=\"$(VERSION)\" -DVERSION=\"$(VERSION)\"
+@BUILD_PLUGIN_PERL_TRUE@		$(PERL_CFLAGS) \
+@BUILD_PLUGIN_PERL_TRUE@		-DXS_VERSION=\"$(VERSION)\" -DVERSION=\"$(VERSION)\"
 
 @BUILD_PLUGIN_PERL_TRUE@perl_la_LDFLAGS = -module -avoid-version \
-@BUILD_PLUGIN_PERL_TRUE@		  $(PERL_LDFLAGS)
+@BUILD_PLUGIN_PERL_TRUE@		$(PERL_LDFLAGS)
 
 @BUILD_PLUGIN_PING_TRUE@ping_la_SOURCES = ping.c
 @BUILD_PLUGIN_PING_TRUE@ping_la_LDFLAGS = -module -avoid-version \
-@BUILD_PLUGIN_PING_TRUE@	$(am__append_159)
+@BUILD_PLUGIN_PING_TRUE@	$(am__append_171)
 @BUILD_PLUGIN_PING_TRUE@@BUILD_WITH_OWN_LIBOPING_TRUE@ping_la_LIBADD = liboping/liboping.la
 @BUILD_PLUGIN_PING_TRUE@@BUILD_WITH_OWN_LIBOPING_TRUE@ping_la_DEPENDENCIES = liboping/liboping.la
+@BUILD_PLUGIN_POSTGRESQL_TRUE@postgresql_la_SOURCES = postgresql.c
+@BUILD_PLUGIN_POSTGRESQL_TRUE@postgresql_la_CPPFLAGS = $(AM_CPPFLAGS) $(BUILD_WITH_LIBPQ_CPPFLAGS)
+@BUILD_PLUGIN_POSTGRESQL_TRUE@postgresql_la_LDFLAGS = -module -avoid-version \
+@BUILD_PLUGIN_POSTGRESQL_TRUE@		$(BUILD_WITH_LIBPQ_LDFLAGS) -lpq
+
 @BUILD_PLUGIN_POWERDNS_TRUE@powerdns_la_SOURCES = powerdns.c
 @BUILD_PLUGIN_POWERDNS_TRUE@powerdns_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_PROCESSES_TRUE@processes_la_SOURCES = processes.c
 @BUILD_PLUGIN_PROCESSES_TRUE@processes_la_LDFLAGS = -module -avoid-version
+@BUILD_PLUGIN_PROCESSES_TRUE@processes_la_LIBADD = $(am__append_183)
 @BUILD_PLUGIN_RRDTOOL_TRUE@rrdtool_la_SOURCES = rrdtool.c
 @BUILD_PLUGIN_RRDTOOL_TRUE@rrdtool_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_RRDTOOL_TRUE@rrdtool_la_CFLAGS = $(BUILD_WITH_LIBRRD_CFLAGS)
+@BUILD_PLUGIN_RRDTOOL_TRUE@rrdtool_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBRRD_CFLAGS)
 @BUILD_PLUGIN_RRDTOOL_TRUE@rrdtool_la_LIBADD = $(BUILD_WITH_LIBRRD_LDFLAGS)
 @BUILD_PLUGIN_SENSORS_TRUE@sensors_la_SOURCES = sensors.c
-@BUILD_PLUGIN_SENSORS_TRUE@sensors_la_CFLAGS = $(BUILD_WITH_LIBSENSORS_CFLAGS)
+@BUILD_PLUGIN_SENSORS_TRUE@sensors_la_CFLAGS = $(AM_CFLAGS) $(BUILD_WITH_LIBSENSORS_CFLAGS)
 @BUILD_PLUGIN_SENSORS_TRUE@sensors_la_LDFLAGS = -module -avoid-version $(BUILD_WITH_LIBSENSORS_LDFLAGS)
 @BUILD_PLUGIN_SENSORS_TRUE@sensors_la_LIBADD = -lsensors
 @BUILD_PLUGIN_SERIAL_TRUE@serial_la_SOURCES = serial.c
 @BUILD_PLUGIN_SERIAL_TRUE@serial_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_SNMP_TRUE@snmp_la_SOURCES = snmp.c
 @BUILD_PLUGIN_SNMP_TRUE@snmp_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_SNMP_TRUE@snmp_la_CFLAGS = $(am__append_178)
-@BUILD_PLUGIN_SNMP_TRUE@snmp_la_LIBADD = $(am__append_179) \
-@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_180)
+@BUILD_PLUGIN_SNMP_TRUE@snmp_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_194)
+@BUILD_PLUGIN_SNMP_TRUE@snmp_la_LIBADD = $(am__append_195) \
+@BUILD_PLUGIN_SNMP_TRUE@	$(am__append_196)
 @BUILD_PLUGIN_SWAP_TRUE@swap_la_SOURCES = swap.c
-@BUILD_PLUGIN_SWAP_TRUE@swap_la_CFLAGS = $(am__append_189)
+@BUILD_PLUGIN_SWAP_TRUE@swap_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_205)
 @BUILD_PLUGIN_SWAP_TRUE@swap_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_SWAP_TRUE@swap_la_LIBADD = $(am__append_186) \
-@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_187) $(am__append_188) \
-@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_190)
+@BUILD_PLUGIN_SWAP_TRUE@swap_la_LIBADD = $(am__append_202) \
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_203) $(am__append_204) \
+@BUILD_PLUGIN_SWAP_TRUE@	$(am__append_206)
 @BUILD_PLUGIN_SYSLOG_TRUE@syslog_la_SOURCES = syslog.c
 @BUILD_PLUGIN_SYSLOG_TRUE@syslog_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TAIL_TRUE@tail_la_SOURCES = tail.c
 @BUILD_PLUGIN_TAIL_TRUE@tail_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_TAPE_TRUE@tape_la_SOURCES = tape.c
 @BUILD_PLUGIN_TAPE_TRUE@tape_la_LDFLAGS = -module -avoid-version -lkstat -ldevinfo
 @BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_SOURCES = tcpconns.c
 @BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_LDFLAGS = -module -avoid-version
+@BUILD_PLUGIN_TCPCONNS_TRUE@tcpconns_la_LIBADD = $(am__append_219)
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@teamspeak2_la_SOURCES = teamspeak2.c
 @BUILD_PLUGIN_TEAMSPEAK2_TRUE@teamspeak2_la_LDFLAGS = -module -avoid-version
+@BUILD_PLUGIN_THERMAL_TRUE@thermal_la_SOURCES = thermal.c
+@BUILD_PLUGIN_THERMAL_TRUE@thermal_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_UNIXSOCK_TRUE@unixsock_la_SOURCES = unixsock.c \
+@BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_parse_option.h utils_parse_option.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_flush.h utils_cmd_flush.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_getval.h utils_cmd_getval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_listval.h utils_cmd_listval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_putval.h utils_cmd_putval.c \
 @BUILD_PLUGIN_UNIXSOCK_TRUE@		      utils_cmd_putnotif.h utils_cmd_putnotif.c
 
 @BUILD_PLUGIN_UNIXSOCK_TRUE@unixsock_la_LDFLAGS = -module -avoid-version -lpthread
 @BUILD_PLUGIN_USERS_TRUE@users_la_SOURCES = users.c
-@BUILD_PLUGIN_USERS_TRUE@users_la_CFLAGS = $(am__append_210)
+@BUILD_PLUGIN_USERS_TRUE@users_la_CFLAGS = $(AM_CFLAGS) \
+@BUILD_PLUGIN_USERS_TRUE@	$(am__append_230)
 @BUILD_PLUGIN_USERS_TRUE@users_la_LDFLAGS = -module -avoid-version
-@BUILD_PLUGIN_USERS_TRUE@users_la_LIBADD = $(am__append_211)
+@BUILD_PLUGIN_USERS_TRUE@users_la_LIBADD = $(am__append_231)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_SOURCES = uuid.c
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_CFLAGS = $(BUILD_WITH_LIBHAL_CFLAGS)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_LIBADD = $(BUILD_WITH_LIBHAL_LIBS)
 @BUILD_PLUGIN_UUID_TRUE@uuid_la_LDFLAGS = -module -avoid-version
 @BUILD_PLUGIN_VMEM_TRUE@vmem_la_SOURCES = vmem.c
 @BUILD_PLUGIN_VMEM_TRUE@vmem_la_LDFLAGS = -module -avoid-version
@@ -1339,13 +1481,13 @@
 
 
 #collectd_1_SOURCES = collectd.pod
 EXTRA_DIST = types.db collectd-email.pod collectd-exec.pod \
 	collectd-nagios.pod collectd-perl.pod collectd-snmp.pod \
 	collectd-unixsock.pod collectd.conf.pod collectd.pod \
-	collectdmon.pod types.db.pod
+	collectdmon.pod types.db.pod postgresql_default.conf
 all: config.h
 	$(MAKE) $(AM_MAKEFLAGS) all-recursive
 
 .SUFFIXES:
 .SUFFIXES: .1 .5 .c .lo .o .obj .pod
 $(srcdir)/Makefile.in:  $(srcdir)/Makefile.am  $(am__configure_deps)
@@ -1448,12 +1590,14 @@
 email.la: $(email_la_OBJECTS) $(email_la_DEPENDENCIES) 
 	$(email_la_LINK) $(am_email_la_rpath) $(email_la_OBJECTS) $(email_la_LIBADD) $(LIBS)
 entropy.la: $(entropy_la_OBJECTS) $(entropy_la_DEPENDENCIES) 
 	$(entropy_la_LINK) $(am_entropy_la_rpath) $(entropy_la_OBJECTS) $(entropy_la_LIBADD) $(LIBS)
 exec.la: $(exec_la_OBJECTS) $(exec_la_DEPENDENCIES) 
 	$(exec_la_LINK) $(am_exec_la_rpath) $(exec_la_OBJECTS) $(exec_la_LIBADD) $(LIBS)
+filecount.la: $(filecount_la_OBJECTS) $(filecount_la_DEPENDENCIES) 
+	$(filecount_la_LINK) $(am_filecount_la_rpath) $(filecount_la_OBJECTS) $(filecount_la_LIBADD) $(LIBS)
 hddtemp.la: $(hddtemp_la_OBJECTS) $(hddtemp_la_DEPENDENCIES) 
 	$(hddtemp_la_LINK) $(am_hddtemp_la_rpath) $(hddtemp_la_OBJECTS) $(hddtemp_la_LIBADD) $(LIBS)
 interface.la: $(interface_la_OBJECTS) $(interface_la_DEPENDENCIES) 
 	$(interface_la_LINK) $(am_interface_la_rpath) $(interface_la_OBJECTS) $(interface_la_LIBADD) $(LIBS)
 ipmi.la: $(ipmi_la_OBJECTS) $(ipmi_la_DEPENDENCIES) 
 	$(ipmi_la_LINK) $(am_ipmi_la_rpath) $(ipmi_la_OBJECTS) $(ipmi_la_LIBADD) $(LIBS)
@@ -1484,20 +1628,28 @@
 network.la: $(network_la_OBJECTS) $(network_la_DEPENDENCIES) 
 	$(network_la_LINK) $(am_network_la_rpath) $(network_la_OBJECTS) $(network_la_LIBADD) $(LIBS)
 nfs.la: $(nfs_la_OBJECTS) $(nfs_la_DEPENDENCIES) 
 	$(nfs_la_LINK) $(am_nfs_la_rpath) $(nfs_la_OBJECTS) $(nfs_la_LIBADD) $(LIBS)
 nginx.la: $(nginx_la_OBJECTS) $(nginx_la_DEPENDENCIES) 
 	$(nginx_la_LINK) $(am_nginx_la_rpath) $(nginx_la_OBJECTS) $(nginx_la_LIBADD) $(LIBS)
+notify_desktop.la: $(notify_desktop_la_OBJECTS) $(notify_desktop_la_DEPENDENCIES) 
+	$(notify_desktop_la_LINK) $(am_notify_desktop_la_rpath) $(notify_desktop_la_OBJECTS) $(notify_desktop_la_LIBADD) $(LIBS)
+notify_email.la: $(notify_email_la_OBJECTS) $(notify_email_la_DEPENDENCIES) 
+	$(notify_email_la_LINK) $(am_notify_email_la_rpath) $(notify_email_la_OBJECTS) $(notify_email_la_LIBADD) $(LIBS)
 ntpd.la: $(ntpd_la_OBJECTS) $(ntpd_la_DEPENDENCIES) 
 	$(ntpd_la_LINK) $(am_ntpd_la_rpath) $(ntpd_la_OBJECTS) $(ntpd_la_LIBADD) $(LIBS)
 nut.la: $(nut_la_OBJECTS) $(nut_la_DEPENDENCIES) 
 	$(nut_la_LINK) $(am_nut_la_rpath) $(nut_la_OBJECTS) $(nut_la_LIBADD) $(LIBS)
+onewire.la: $(onewire_la_OBJECTS) $(onewire_la_DEPENDENCIES) 
+	$(onewire_la_LINK) $(am_onewire_la_rpath) $(onewire_la_OBJECTS) $(onewire_la_LIBADD) $(LIBS)
 perl.la: $(perl_la_OBJECTS) $(perl_la_DEPENDENCIES) 
 	$(perl_la_LINK) $(am_perl_la_rpath) $(perl_la_OBJECTS) $(perl_la_LIBADD) $(LIBS)
 ping.la: $(ping_la_OBJECTS) $(ping_la_DEPENDENCIES) 
 	$(ping_la_LINK) $(am_ping_la_rpath) $(ping_la_OBJECTS) $(ping_la_LIBADD) $(LIBS)
+postgresql.la: $(postgresql_la_OBJECTS) $(postgresql_la_DEPENDENCIES) 
+	$(postgresql_la_LINK) $(am_postgresql_la_rpath) $(postgresql_la_OBJECTS) $(postgresql_la_LIBADD) $(LIBS)
 powerdns.la: $(powerdns_la_OBJECTS) $(powerdns_la_DEPENDENCIES) 
 	$(powerdns_la_LINK) $(am_powerdns_la_rpath) $(powerdns_la_OBJECTS) $(powerdns_la_LIBADD) $(LIBS)
 processes.la: $(processes_la_OBJECTS) $(processes_la_DEPENDENCIES) 
 	$(processes_la_LINK) $(am_processes_la_rpath) $(processes_la_OBJECTS) $(processes_la_LIBADD) $(LIBS)
 rrdtool.la: $(rrdtool_la_OBJECTS) $(rrdtool_la_DEPENDENCIES) 
 	$(rrdtool_la_LINK) $(am_rrdtool_la_rpath) $(rrdtool_la_OBJECTS) $(rrdtool_la_LIBADD) $(LIBS)
@@ -1516,12 +1668,14 @@
 tape.la: $(tape_la_OBJECTS) $(tape_la_DEPENDENCIES) 
 	$(tape_la_LINK) $(am_tape_la_rpath) $(tape_la_OBJECTS) $(tape_la_LIBADD) $(LIBS)
 tcpconns.la: $(tcpconns_la_OBJECTS) $(tcpconns_la_DEPENDENCIES) 
 	$(tcpconns_la_LINK) $(am_tcpconns_la_rpath) $(tcpconns_la_OBJECTS) $(tcpconns_la_LIBADD) $(LIBS)
 teamspeak2.la: $(teamspeak2_la_OBJECTS) $(teamspeak2_la_DEPENDENCIES) 
 	$(teamspeak2_la_LINK) $(am_teamspeak2_la_rpath) $(teamspeak2_la_OBJECTS) $(teamspeak2_la_LIBADD) $(LIBS)
+thermal.la: $(thermal_la_OBJECTS) $(thermal_la_DEPENDENCIES) 
+	$(thermal_la_LINK) $(am_thermal_la_rpath) $(thermal_la_OBJECTS) $(thermal_la_LIBADD) $(LIBS)
 unixsock.la: $(unixsock_la_OBJECTS) $(unixsock_la_DEPENDENCIES) 
 	$(unixsock_la_LINK) $(am_unixsock_la_rpath) $(unixsock_la_OBJECTS) $(unixsock_la_LIBADD) $(LIBS)
 users.la: $(users_la_OBJECTS) $(users_la_DEPENDENCIES) 
 	$(users_la_LINK) $(am_users_la_rpath) $(users_la_OBJECTS) $(users_la_LIBADD) $(LIBS)
 uuid.la: $(uuid_la_OBJECTS) $(uuid_la_DEPENDENCIES) 
 	$(uuid_la_LINK) $(am_uuid_la_rpath) $(uuid_la_OBJECTS) $(uuid_la_LIBADD) $(LIBS)
@@ -1615,12 +1769,13 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-configfile.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-nagios.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-plugin.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-types_list.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_avltree.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_cache.Po@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_complain.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_ignorelist.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_llist.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_match.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_mount.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_tail.Po@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/collectd-utils_tail_match.Po@am__quote@
@@ -1632,54 +1787,61 @@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/df.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/disk_la-disk.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/dns.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/email.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/entropy.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/exec.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/filecount.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/hddtemp.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/interface_la-interface.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ipmi_la-ipmi.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/iptables.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ipvs_la-ipvs.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/irq.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/libvirt_la-libvirt.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/load_la-load.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/logfile.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mbmon.Plo@am__quote@
-@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/memcached_la-memcached.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/memcached.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/memory_la-memory.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/multimeter.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/mysql_la-mysql.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/netlink_la-netlink.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/network.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/nfs.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/nginx_la-nginx.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/notify_desktop_la-notify_desktop.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/notify_email.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ntpd.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/nut_la-nut.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/onewire_la-onewire.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/perl_la-perl.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/ping.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/postgresql_la-postgresql.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/powerdns.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/processes.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/rrdtool_la-rrdtool.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/sensors_la-sensors.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/serial.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/snmp_la-snmp.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/swap_la-swap.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/syslog.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tail.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tape.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/tcpconns.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/teamspeak2.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/thermal.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/unixsock.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/users_la-users.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_flush.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_getval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_listval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_putnotif.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_cmd_putval.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_dns.Plo@am__quote@
+@AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/utils_parse_option.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/uuid_la-uuid.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/vmem.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/vserver.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/wireless.Plo@am__quote@
 @AMDEP_TRUE@@am__include@ @am__quote@./$(DEPDIR)/xmms_la-xmms.Plo@am__quote@
 
@@ -1764,19 +1926,12 @@
 @am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(load_la_CFLAGS) $(CFLAGS) -MT load_la-load.lo -MD -MP -MF $(DEPDIR)/load_la-load.Tpo -c -o load_la-load.lo `test -f 'load.c' || echo '$(srcdir)/'`load.c
 @am__fastdepCC_TRUE@	mv -f $(DEPDIR)/load_la-load.Tpo $(DEPDIR)/load_la-load.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='load.c' object='load_la-load.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(load_la_CFLAGS) $(CFLAGS) -c -o load_la-load.lo `test -f 'load.c' || echo '$(srcdir)/'`load.c
 
-memcached_la-memcached.lo: memcached.c
-@am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(memcached_la_CFLAGS) $(CFLAGS) -MT memcached_la-memcached.lo -MD -MP -MF $(DEPDIR)/memcached_la-memcached.Tpo -c -o memcached_la-memcached.lo `test -f 'memcached.c' || echo '$(srcdir)/'`memcached.c
-@am__fastdepCC_TRUE@	mv -f $(DEPDIR)/memcached_la-memcached.Tpo $(DEPDIR)/memcached_la-memcached.Plo
-@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='memcached.c' object='memcached_la-memcached.lo' libtool=yes @AMDEPBACKSLASH@
-@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
-@am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(memcached_la_CFLAGS) $(CFLAGS) -c -o memcached_la-memcached.lo `test -f 'memcached.c' || echo '$(srcdir)/'`memcached.c
-
 memory_la-memory.lo: memory.c
 @am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(memory_la_CFLAGS) $(CFLAGS) -MT memory_la-memory.lo -MD -MP -MF $(DEPDIR)/memory_la-memory.Tpo -c -o memory_la-memory.lo `test -f 'memory.c' || echo '$(srcdir)/'`memory.c
 @am__fastdepCC_TRUE@	mv -f $(DEPDIR)/memory_la-memory.Tpo $(DEPDIR)/memory_la-memory.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='memory.c' object='memory_la-memory.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(memory_la_CFLAGS) $(CFLAGS) -c -o memory_la-memory.lo `test -f 'memory.c' || echo '$(srcdir)/'`memory.c
@@ -1799,25 +1954,46 @@
 @am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(nginx_la_CFLAGS) $(CFLAGS) -MT nginx_la-nginx.lo -MD -MP -MF $(DEPDIR)/nginx_la-nginx.Tpo -c -o nginx_la-nginx.lo `test -f 'nginx.c' || echo '$(srcdir)/'`nginx.c
 @am__fastdepCC_TRUE@	mv -f $(DEPDIR)/nginx_la-nginx.Tpo $(DEPDIR)/nginx_la-nginx.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='nginx.c' object='nginx_la-nginx.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(nginx_la_CFLAGS) $(CFLAGS) -c -o nginx_la-nginx.lo `test -f 'nginx.c' || echo '$(srcdir)/'`nginx.c
 
+notify_desktop_la-notify_desktop.lo: notify_desktop.c
+@am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(notify_desktop_la_CFLAGS) $(CFLAGS) -MT notify_desktop_la-notify_desktop.lo -MD -MP -MF $(DEPDIR)/notify_desktop_la-notify_desktop.Tpo -c -o notify_desktop_la-notify_desktop.lo `test -f 'notify_desktop.c' || echo '$(srcdir)/'`notify_desktop.c
+@am__fastdepCC_TRUE@	mv -f $(DEPDIR)/notify_desktop_la-notify_desktop.Tpo $(DEPDIR)/notify_desktop_la-notify_desktop.Plo
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='notify_desktop.c' object='notify_desktop_la-notify_desktop.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(notify_desktop_la_CFLAGS) $(CFLAGS) -c -o notify_desktop_la-notify_desktop.lo `test -f 'notify_desktop.c' || echo '$(srcdir)/'`notify_desktop.c
+
 nut_la-nut.lo: nut.c
 @am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(nut_la_CFLAGS) $(CFLAGS) -MT nut_la-nut.lo -MD -MP -MF $(DEPDIR)/nut_la-nut.Tpo -c -o nut_la-nut.lo `test -f 'nut.c' || echo '$(srcdir)/'`nut.c
 @am__fastdepCC_TRUE@	mv -f $(DEPDIR)/nut_la-nut.Tpo $(DEPDIR)/nut_la-nut.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='nut.c' object='nut_la-nut.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(nut_la_CFLAGS) $(CFLAGS) -c -o nut_la-nut.lo `test -f 'nut.c' || echo '$(srcdir)/'`nut.c
 
+onewire_la-onewire.lo: onewire.c
+@am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(onewire_la_CPPFLAGS) $(CPPFLAGS) $(onewire_la_CFLAGS) $(CFLAGS) -MT onewire_la-onewire.lo -MD -MP -MF $(DEPDIR)/onewire_la-onewire.Tpo -c -o onewire_la-onewire.lo `test -f 'onewire.c' || echo '$(srcdir)/'`onewire.c
+@am__fastdepCC_TRUE@	mv -f $(DEPDIR)/onewire_la-onewire.Tpo $(DEPDIR)/onewire_la-onewire.Plo
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='onewire.c' object='onewire_la-onewire.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(onewire_la_CPPFLAGS) $(CPPFLAGS) $(onewire_la_CFLAGS) $(CFLAGS) -c -o onewire_la-onewire.lo `test -f 'onewire.c' || echo '$(srcdir)/'`onewire.c
+
 perl_la-perl.lo: perl.c
-@am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(perl_la_CFLAGS) $(CFLAGS) -MT perl_la-perl.lo -MD -MP -MF $(DEPDIR)/perl_la-perl.Tpo -c -o perl_la-perl.lo `test -f 'perl.c' || echo '$(srcdir)/'`perl.c
+@am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(perl_la_CPPFLAGS) $(CPPFLAGS) $(perl_la_CFLAGS) $(CFLAGS) -MT perl_la-perl.lo -MD -MP -MF $(DEPDIR)/perl_la-perl.Tpo -c -o perl_la-perl.lo `test -f 'perl.c' || echo '$(srcdir)/'`perl.c
 @am__fastdepCC_TRUE@	mv -f $(DEPDIR)/perl_la-perl.Tpo $(DEPDIR)/perl_la-perl.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='perl.c' object='perl_la-perl.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
-@am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(perl_la_CFLAGS) $(CFLAGS) -c -o perl_la-perl.lo `test -f 'perl.c' || echo '$(srcdir)/'`perl.c
+@am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(perl_la_CPPFLAGS) $(CPPFLAGS) $(perl_la_CFLAGS) $(CFLAGS) -c -o perl_la-perl.lo `test -f 'perl.c' || echo '$(srcdir)/'`perl.c
+
+postgresql_la-postgresql.lo: postgresql.c
+@am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(postgresql_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -MT postgresql_la-postgresql.lo -MD -MP -MF $(DEPDIR)/postgresql_la-postgresql.Tpo -c -o postgresql_la-postgresql.lo `test -f 'postgresql.c' || echo '$(srcdir)/'`postgresql.c
+@am__fastdepCC_TRUE@	mv -f $(DEPDIR)/postgresql_la-postgresql.Tpo $(DEPDIR)/postgresql_la-postgresql.Plo
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='postgresql.c' object='postgresql_la-postgresql.lo' libtool=yes @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(postgresql_la_CPPFLAGS) $(CPPFLAGS) $(AM_CFLAGS) $(CFLAGS) -c -o postgresql_la-postgresql.lo `test -f 'postgresql.c' || echo '$(srcdir)/'`postgresql.c
 
 rrdtool_la-rrdtool.lo: rrdtool.c
 @am__fastdepCC_TRUE@	$(LIBTOOL) --tag=CC $(AM_LIBTOOLFLAGS) $(LIBTOOLFLAGS) --mode=compile $(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(AM_CPPFLAGS) $(CPPFLAGS) $(rrdtool_la_CFLAGS) $(CFLAGS) -MT rrdtool_la-rrdtool.lo -MD -MP -MF $(DEPDIR)/rrdtool_la-rrdtool.Tpo -c -o rrdtool_la-rrdtool.lo `test -f 'rrdtool.c' || echo '$(srcdir)/'`rrdtool.c
 @am__fastdepCC_TRUE@	mv -f $(DEPDIR)/rrdtool_la-rrdtool.Tpo $(DEPDIR)/rrdtool_la-rrdtool.Plo
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='rrdtool.c' object='rrdtool_la-rrdtool.lo' libtool=yes @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
@@ -1946,12 +2122,26 @@
 @am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectd_CPPFLAGS) $(CPPFLAGS) $(collectd_CFLAGS) $(CFLAGS) -MT collectd-utils_cache.obj -MD -MP -MF $(DEPDIR)/collectd-utils_cache.Tpo -c -o collectd-utils_cache.obj `if test -f 'utils_cache.c'; then $(CYGPATH_W) 'utils_cache.c'; else $(CYGPATH_W) '$(srcdir)/utils_cache.c'; fi`
 @am__fastdepCC_TRUE@	mv -f $(DEPDIR)/collectd-utils_cache.Tpo $(DEPDIR)/collectd-utils_cache.Po
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_cache.c' object='collectd-utils_cache.obj' libtool=no @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectd_CPPFLAGS) $(CPPFLAGS) $(collectd_CFLAGS) $(CFLAGS) -c -o collectd-utils_cache.obj `if test -f 'utils_cache.c'; then $(CYGPATH_W) 'utils_cache.c'; else $(CYGPATH_W) '$(srcdir)/utils_cache.c'; fi`
 
+collectd-utils_complain.o: utils_complain.c
+@am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectd_CPPFLAGS) $(CPPFLAGS) $(collectd_CFLAGS) $(CFLAGS) -MT collectd-utils_complain.o -MD -MP -MF $(DEPDIR)/collectd-utils_complain.Tpo -c -o collectd-utils_complain.o `test -f 'utils_complain.c' || echo '$(srcdir)/'`utils_complain.c
+@am__fastdepCC_TRUE@	mv -f $(DEPDIR)/collectd-utils_complain.Tpo $(DEPDIR)/collectd-utils_complain.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_complain.c' object='collectd-utils_complain.o' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectd_CPPFLAGS) $(CPPFLAGS) $(collectd_CFLAGS) $(CFLAGS) -c -o collectd-utils_complain.o `test -f 'utils_complain.c' || echo '$(srcdir)/'`utils_complain.c
+
+collectd-utils_complain.obj: utils_complain.c
+@am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectd_CPPFLAGS) $(CPPFLAGS) $(collectd_CFLAGS) $(CFLAGS) -MT collectd-utils_complain.obj -MD -MP -MF $(DEPDIR)/collectd-utils_complain.Tpo -c -o collectd-utils_complain.obj `if test -f 'utils_complain.c'; then $(CYGPATH_W) 'utils_complain.c'; else $(CYGPATH_W) '$(srcdir)/utils_complain.c'; fi`
+@am__fastdepCC_TRUE@	mv -f $(DEPDIR)/collectd-utils_complain.Tpo $(DEPDIR)/collectd-utils_complain.Po
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_complain.c' object='collectd-utils_complain.obj' libtool=no @AMDEPBACKSLASH@
+@AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
+@am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectd_CPPFLAGS) $(CPPFLAGS) $(collectd_CFLAGS) $(CFLAGS) -c -o collectd-utils_complain.obj `if test -f 'utils_complain.c'; then $(CYGPATH_W) 'utils_complain.c'; else $(CYGPATH_W) '$(srcdir)/utils_complain.c'; fi`
+
 collectd-utils_ignorelist.o: utils_ignorelist.c
 @am__fastdepCC_TRUE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectd_CPPFLAGS) $(CPPFLAGS) $(collectd_CFLAGS) $(CFLAGS) -MT collectd-utils_ignorelist.o -MD -MP -MF $(DEPDIR)/collectd-utils_ignorelist.Tpo -c -o collectd-utils_ignorelist.o `test -f 'utils_ignorelist.c' || echo '$(srcdir)/'`utils_ignorelist.c
 @am__fastdepCC_TRUE@	mv -f $(DEPDIR)/collectd-utils_ignorelist.Tpo $(DEPDIR)/collectd-utils_ignorelist.Po
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	source='utils_ignorelist.c' object='collectd-utils_ignorelist.o' libtool=no @AMDEPBACKSLASH@
 @AMDEP_TRUE@@am__fastdepCC_FALSE@	DEPDIR=$(DEPDIR) $(CCDEPMODE) $(depcomp) @AMDEPBACKSLASH@
 @am__fastdepCC_FALSE@	$(CC) $(DEFS) $(DEFAULT_INCLUDES) $(INCLUDES) $(collectd_CPPFLAGS) $(CPPFLAGS) $(collectd_CFLAGS) $(CFLAGS) -c -o collectd-utils_ignorelist.o `test -f 'utils_ignorelist.c' || echo '$(srcdir)/'`utils_ignorelist.c
@@ -2464,23 +2654,35 @@
 	uninstall-binPROGRAMS uninstall-man uninstall-man1 \
 	uninstall-man5 uninstall-pkglibLTLIBRARIES \
 	uninstall-sbinPROGRAMS
 
 
 .pod.1:
-	pod2man --release=$(VERSION) --center=$(PACKAGE) $< >.pod2man.tmp 2>/dev/null && mv -f .pod2man.tmp $@ || true
+	pod2man --release=$(VERSION) --center=$(PACKAGE) $< \
+		>.pod2man.tmp 2>/dev/null && mv -f .pod2man.tmp $@ || true
+	if grep '\<POD ERRORS\>' $@ >/dev/null 2>&1; \
+	then \
+		echo "$@ has some POD errors!"; false; \
+	fi
 
 .pod.5:
-	pod2man --section=5 --release=$(VERSION) --center=$(PACKAGE) $< >.pod2man.tmp 2>/dev/null && mv -f .pod2man.tmp $@ || true
+	pod2man --section=5 --release=$(VERSION) --center=$(PACKAGE) $< \
+		>.pod2man.tmp 2>/dev/null && mv -f .pod2man.tmp $@ || true
+	if grep '\<POD ERRORS\>' $@ >/dev/null 2>&1; \
+	then \
+		echo "$@ has some POD errors!"; false; \
+	fi
 
 install-exec-hook:
 	$(mkinstalldirs) $(DESTDIR)$(sysconfdir)
 	if test -e $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	then \
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf.pkg-orig; \
 	else \
 		$(INSTALL) -m 0640 collectd.conf $(DESTDIR)$(sysconfdir)/collectd.conf; \
 	fi; \
 	cp -f $(srcdir)/types.db $(DESTDIR)$(pkglibdir)/;
+	$(INSTALL) -D -m 0644 $(srcdir)/postgresql_default.conf \
+		$(DESTDIR)$(pkgdatadir)/postgresql_default.conf;
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
 .NOEXPORT:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/mbmon.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/mbmon.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/mbmon.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/mbmon.c	2008-09-04 21:01:14.000000000 +0800
@@ -227,15 +227,16 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "mbmon", sizeof (vl.plugin));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void mbmon_submit */
 
 /* Trim trailing whitespace from a string. */
 static void trim_spaces (char *s)
 {
 	size_t l;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/memcached.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/memcached.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/memcached.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/memcached.c	2008-09-04 21:01:14.000000000 +0800
@@ -209,17 +209,16 @@
 			free (memcached_host);
 		}
 		memcached_host = strdup (value);
 	} else if (strcasecmp (key, "Port") == 0) {
 		int port = (int) (atof (value));
 		if ((port > 0) && (port <= 65535)) {
-			snprintf (memcached_port, sizeof (memcached_port), "%i", port);
+			ssnprintf (memcached_port, sizeof (memcached_port), "%i", port);
 		} else {
-			strncpy (memcached_port, value, sizeof (memcached_port));
+			sstrncpy (memcached_port, value, sizeof (memcached_port));
 		}
-		memcached_port[sizeof (memcached_port) - 1] = '\0';
 	} else {
 		return -1;
 	}
 
 	return 0;
 }
@@ -235,19 +234,17 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "memcached", sizeof (vl.plugin));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 	if (type_inst != NULL)
-	{
-		strncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
-		vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-	}
+		sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void memcached_submit_cmd */
 /* }}} */
 
 static void submit_counter2 (const char *type, const char *type_inst,
 		counter_t value0, counter_t value1) /* {{{ */
 {
@@ -259,19 +256,17 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "memcached", sizeof (vl.plugin));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 	if (type_inst != NULL)
-	{
-		strncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
-		vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-	}
+		sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void memcached_submit_cmd */
 /* }}} */
 
 static void submit_gauge (const char *type, const char *type_inst,
 		gauge_t value) /* {{{ */
 {
@@ -282,19 +277,17 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "memcached", sizeof (vl.plugin));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 	if (type_inst != NULL)
-	{
-		strncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
-		vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-	}
+		sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 }
 /* }}} */
 
 static void submit_gauge2 (const char *type, const char *type_inst,
 		gauge_t value0, gauge_t value1) /* {{{ */
 {
@@ -306,19 +299,17 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "memcached", sizeof (vl.plugin));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 	if (type_inst != NULL)
-	{
-		strncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
-		vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-	}
+		sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 }
 /* }}} */
 
 static int memcached_read (void) /* {{{ */
 {
 	char buf[1024];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/memory.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/memory.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/memory.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/memory.c	2008-09-04 21:01:14.000000000 +0800
@@ -108,16 +108,16 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "memory", sizeof (vl.plugin));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
-	vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
+	sstrncpy (vl.type, "memory", sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("memory", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int memory_read (void)
 {
 #if HAVE_HOST_STATISTICS
 	kern_return_t status;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/multimeter.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/multimeter.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/multimeter.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/multimeter.c	2008-09-04 21:01:14.000000000 +0800
@@ -83,18 +83,13 @@
 			char *range;
 			int status;
 			fd_set rfds;
     			struct timeval timeout;
     			struct timeval time_now;
 
-			status = swrite (fd, "D", 1);
-			if (status < 0)
-			{
-				ERROR ("multimeter plugin: swrite failed.");
-				return (-1);
-			}
+			write(fd, "D", 1);
 
 			FD_ZERO(&rfds);
 			FD_SET(fd, &rfds);
 
 			if (gettimeofday (&time_now, NULL) < 0)
 	                {
@@ -220,14 +215,15 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "multimeter", sizeof (vl.plugin));
+	sstrncpy (vl.type, "multimeter", sizeof (vl.type));
 
-	plugin_dispatch_values ("multimeter", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int multimeter_read (void)
 {
 	double value;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/mysql.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/mysql.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/mysql.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/mysql.c	2008-09-04 21:01:14.000000000 +0800
@@ -21,15 +21,13 @@
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
 
-#ifdef HAVE_MYSQL_H
-#include <mysql.h>
-#elif defined(HAVE_MYSQL_MYSQL_H)
+#ifdef HAVE_MYSQL_MYSQL_H
 #include <mysql/mysql.h>
 #endif
 
 /* TODO: Understand `Select_*' and possibly do that stuff as well.. */
 
 static const char *config_keys[] =
@@ -127,15 +125,16 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "mysql", sizeof (vl.plugin));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void counter_submit */
 
 static void qcache_submit (counter_t hits, counter_t inserts,
 		counter_t not_cached, counter_t lowmem_prunes,
 		gauge_t queries_in_cache)
 {
@@ -150,14 +149,15 @@
 
 	vl.values = values;
 	vl.values_len = 5;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "mysql", sizeof (vl.plugin));
+	sstrncpy (vl.type, "mysql_qcache", sizeof (vl.type));
 
-	plugin_dispatch_values ("mysql_qcache", &vl);
+	plugin_dispatch_values (&vl);
 } /* void qcache_submit */
 
 static void threads_submit (gauge_t running, gauge_t connected, gauge_t cached,
 		counter_t created)
 {
 	value_t values[4];
@@ -170,14 +170,15 @@
 
 	vl.values = values;
 	vl.values_len = 4;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "mysql", sizeof (vl.plugin));
+	sstrncpy (vl.type, "mysql_threads", sizeof (vl.type));
 
-	plugin_dispatch_values ("mysql_threads", &vl);
+	plugin_dispatch_values (&vl);
 } /* void threads_submit */
 
 static void traffic_submit (counter_t rx, counter_t tx)
 {
 	value_t values[2];
 	value_list_t vl = VALUE_LIST_INIT;
@@ -187,14 +188,15 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "mysql", sizeof (vl.plugin));
+	sstrncpy (vl.type, "mysql_octets", sizeof (vl.type));
 
-	plugin_dispatch_values ("mysql_octets", &vl);
+	plugin_dispatch_values (&vl);
 } /* void traffic_submit */
 
 static int mysql_read (void)
 {
 	MYSQL     *con;
 	MYSQL_RES *res;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/netlink.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/netlink.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/netlink.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/netlink.c	2008-09-04 21:01:14.000000000 +0800
@@ -170,18 +170,19 @@
 
   vl.values = values;
   vl.values_len = 1;
   vl.time = time (NULL);
   sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   sstrncpy (vl.plugin, "netlink", sizeof (vl.plugin));
-  strncpy (vl.plugin_instance, dev, sizeof (vl.plugin_instance));
+  sstrncpy (vl.plugin_instance, dev, sizeof (vl.plugin_instance));
+  sstrncpy (vl.type, type, sizeof (vl.type));
 
   if (type_instance != NULL)
-    strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+    sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-  plugin_dispatch_values (type, &vl);
+  plugin_dispatch_values (&vl);
 } /* void submit_one */
 
 static void submit_two (const char *dev, const char *type,
     const char *type_instance,
     counter_t rx, counter_t tx)
 {
@@ -193,22 +194,23 @@
 
   vl.values = values;
   vl.values_len = 2;
   vl.time = time (NULL);
   sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   sstrncpy (vl.plugin, "netlink", sizeof (vl.plugin));
-  strncpy (vl.plugin_instance, dev, sizeof (vl.plugin_instance));
+  sstrncpy (vl.plugin_instance, dev, sizeof (vl.plugin_instance));
+  sstrncpy (vl.type, type, sizeof (vl.type));
 
   if (type_instance != NULL)
-    strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+    sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-  plugin_dispatch_values (type, &vl);
+  plugin_dispatch_values (&vl);
 } /* void submit_two */
 
 static int link_filter (const struct sockaddr_nl *sa,
-    const struct nlmsghdr *nmh, void *args)
+    struct nlmsghdr *nmh, void *args)
 {
   struct ifinfomsg *msg;
   int msg_len;
   struct rtattr *attrs[IFLA_MAX + 1];
   struct rtnl_link_stats *stats;
 
@@ -312,13 +314,13 @@
   }
 
   return (0);
 } /* int link_filter */
 
 static int qos_filter (const struct sockaddr_nl *sa,
-    const struct nlmsghdr *nmh, void *args)
+    struct nlmsghdr *nmh, void *args)
 {
   struct tcmsg *msg;
   int msg_len;
   struct rtattr *attrs[TCA_MAX + 1];
 
   int wanted_ifindex = *((int *) args);
@@ -359,13 +361,13 @@
     return (0);
   }
 
   if (msg->tcm_ifindex >= iflist_len)
   {
     ERROR ("netlink plugin: qos_filter: msg->tcm_ifindex = %i "
-	">= iflist_len = %zu",
+	">= iflist_len = %i",
 	msg->tcm_ifindex, iflist_len);
     return (-1);
   }
 
   dev = iflist[msg->tcm_ifindex];
   if (dev == NULL)
@@ -392,17 +394,16 @@
     uint32_t numberic_id;
 
     numberic_id = msg->tcm_handle;
     if (strcmp (tc_type, "filter") == 0)
       numberic_id = msg->tcm_parent;
 
-    snprintf (tc_inst, sizeof (tc_inst), "%s-%x:%x",
+    ssnprintf (tc_inst, sizeof (tc_inst), "%s-%x:%x",
 	(const char *) RTA_DATA (attrs[TCA_KIND]),
 	numberic_id >> 16,
 	numberic_id & 0x0000FFFF);
-    tc_inst[sizeof (tc_inst) - 1] = '\0';
   }
 
   DEBUG ("netlink plugin: qos_filter: got %s for %s (%i).",
       tc_type, dev, msg->tcm_ifindex);
   
   if (check_ignorelist (dev, tc_type, tc_inst))
@@ -418,15 +419,14 @@
 
     if (attrs_stats[TCA_STATS_BASIC])
     {
       struct gnet_stats_basic bs;
       char type_instance[DATA_MAX_NAME_LEN];
 
-      snprintf (type_instance, sizeof (type_instance), "%s-%s",
+      ssnprintf (type_instance, sizeof (type_instance), "%s-%s",
 	  tc_type, tc_inst);
-      type_instance[sizeof (type_instance) - 1] = '\0';
 
       memset (&bs, '\0', sizeof (bs));
       memcpy (&bs, RTA_DATA (attrs_stats[TCA_STATS_BASIC]),
 	  MIN (RTA_PAYLOAD (attrs_stats[TCA_STATS_BASIC]), sizeof(bs)));
 
       submit_one (dev, "ipt_bytes", type_instance, bs.bytes);
@@ -440,15 +440,14 @@
 #if HAVE_TCA_STATS
   if (attrs[TCA_STATS] != NULL)
   {
     struct tc_stats ts;
     char type_instance[DATA_MAX_NAME_LEN];
 
-    snprintf (type_instance, sizeof (type_instance), "%s-%s",
+    ssnprintf (type_instance, sizeof (type_instance), "%s-%s",
 	tc_type, tc_inst);
-    type_instance[sizeof (type_instance) - 1] = '\0';
 
     memset(&ts, '\0', sizeof (ts));
     memcpy(&ts, RTA_DATA (attrs[TCA_STATS]),
 	MIN (RTA_PAYLOAD (attrs[TCA_STATS]), sizeof (ts)));
 
     submit_one (dev, "ipt_bytes", type_instance, ts.bytes);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/network.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/network.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/network.c	2009-01-03 04:05:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/network.c	2008-09-04 21:01:14.000000000 +0800
@@ -243,23 +243,23 @@
 	DEBUG ("network plugin: cache_flush: Removed %i %s",
 			keys_num, (keys_num == 1) ? "entry" : "entries");
 	cache_flush_last = curtime;
 	return (0);
 } /* int cache_flush */
 
-static int cache_check (const char *type, const value_list_t *vl)
+static int cache_check (const value_list_t *vl)
 {
 	char key[1024];
 	time_t *value = NULL;
 	int retval = -1;
 
 	if (cache_tree == NULL)
 		return (-1);
 
 	if (format_name (key, sizeof (key), vl->host, vl->plugin,
-				vl->plugin_instance, type, vl->type_instance))
+				vl->plugin_instance, vl->type, vl->type_instance))
 		return (-1);
 
 	pthread_mutex_lock (&cache_lock);
 
 	if (c_avl_get (cache_tree, key, (void *) &value) == 0)
 	{
@@ -675,20 +675,18 @@
 
 static int parse_packet (void *buffer, int buffer_len)
 {
 	int status;
 
 	value_list_t vl = VALUE_LIST_INIT;
-	char type[DATA_MAX_NAME_LEN];
 	notification_t n;
 
 	DEBUG ("network plugin: parse_packet: buffer = %p; buffer_len = %i;",
 			buffer, buffer_len);
 
 	memset (&vl, '\0', sizeof (vl));
-	memset (&type, '\0', sizeof (type));
 	memset (&n, '\0', sizeof (n));
 	status = 0;
 
 	while ((status == 0) && (0 < buffer_len)
 			&& ((unsigned int) buffer_len > sizeof (part_header_t)))
 	{
@@ -719,16 +717,16 @@
 			if (status != 0)
 				break;
 
 			if ((vl.time > 0)
 					&& (strlen (vl.host) > 0)
 					&& (strlen (vl.plugin) > 0)
-					&& (strlen (type) > 0)
-					&& (cache_check (type, &vl) == 0))
+					&& (strlen (vl.type) > 0)
+					&& (cache_check (&vl) == 0))
 			{
-				plugin_dispatch_values (type, &vl);
+				plugin_dispatch_values (&vl);
 			}
 			else
 			{
 				DEBUG ("network plugin: parse_packet:"
 						" NOT dispatching values");
 			}
@@ -779,15 +777,15 @@
 						vl.plugin_instance,
 						sizeof (n.plugin_instance));
 		}
 		else if (pkg_type == TYPE_TYPE)
 		{
 			status = parse_part_string (&buffer, &buffer_len,
-					type, sizeof (type));
+					vl.type, sizeof (vl.type));
 			if (status == 0)
-				sstrncpy (n.type, type, sizeof (n.type));
+				sstrncpy (n.type, vl.type, sizeof (n.type));
 		}
 		else if (pkg_type == TYPE_TYPE_INSTANCE)
 		{
 			status = parse_part_string (&buffer, &buffer_len,
 					vl.type_instance,
 					sizeof (vl.type_instance));
@@ -1392,13 +1390,13 @@
 			break;
 		} /* while (42) */
 	} /* for (sending_sockets) */
 } /* void network_send_buffer */
 
 static int add_to_buffer (char *buffer, int buffer_size,
-		value_list_t *vl_def, char *type_def, size_t type_def_size,
+		value_list_t *vl_def, char *type_def,
 		const data_set_t *ds, const value_list_t *vl)
 {
 	char *buffer_orig = buffer;
 
 	if (strcmp (vl_def->host, vl->host) != 0)
 	{
@@ -1438,18 +1436,18 @@
 					vl->plugin_instance,
 					strlen (vl->plugin_instance)) != 0)
 			return (-1);
 		sstrncpy (vl_def->plugin_instance, vl->plugin_instance, sizeof (vl_def->plugin_instance));
 	}
 
-	if (strcmp (type_def, ds->type) != 0)
+	if (strcmp (type_def, vl->type) != 0)
 	{
 		if (write_part_string (&buffer, &buffer_size, TYPE_TYPE,
-					ds->type, strlen (ds->type)) != 0)
+					vl->type, strlen (vl->type)) != 0)
 			return (-1);
-		sstrncpy (type_def, ds->type, type_def_size);
+		sstrncpy (type_def, vl->type, sizeof (type_def));
 	}
 
 	if (strcmp (vl_def->type_instance, vl->type_instance) != 0)
 	{
 		if (write_part_string (&buffer, &buffer_size, TYPE_TYPE_INSTANCE,
 					vl->type_instance,
@@ -1480,23 +1478,22 @@
 {
 	int status;
 
 	/* If the value is already in the cache, we have received it via the
 	 * network. We write it again if forwarding is activated. It's then in
 	 * the cache and should we receive it again we will ignore it. */
-	status = cache_check (ds->type, vl);
+	status = cache_check (vl);
 	if ((network_config_forward == 0)
 			&& (status != 0))
 		return (0);
 
 	pthread_mutex_lock (&send_buffer_lock);
 
 	status = add_to_buffer (send_buffer_ptr,
 			sizeof (send_buffer) - send_buffer_fill,
-			&send_buffer_vl,
-		       	send_buffer_type, sizeof (send_buffer_type),
+			&send_buffer_vl, send_buffer_type,
 			ds, vl);
 	if (status >= 0)
 	{
 		/* status == bytes added to the buffer */
 		send_buffer_fill += status;
 		send_buffer_ptr  += status;
@@ -1504,14 +1501,13 @@
 	else
 	{
 		flush_buffer ();
 
 		status = add_to_buffer (send_buffer_ptr,
 				sizeof (send_buffer) - send_buffer_fill,
-				&send_buffer_vl,
-			       	send_buffer_type, sizeof (send_buffer_type),
+				&send_buffer_vl, send_buffer_type,
 				ds, vl);
 
 		if (status >= 0)
 		{
 			send_buffer_fill += status;
 			send_buffer_ptr  += status;
@@ -1549,30 +1545,25 @@
 			return (1);
 
 		service = NET_DEFAULT_PORT;
 		fields_num = strsplit (val_cpy, fields, 3);
 		if ((fields_num != 1)
 				&& (fields_num != 2))
-		{
-			sfree (val_cpy);
 			return (1);
-		}
 		else if (fields_num == 2)
 		{
 			if ((service = strchr (fields[1], '.')) != NULL)
 				*service = '\0';
 			service = fields[1];
 		}
 		node = fields[0];
 
 		if (strcasecmp ("Listen", key) == 0)
 			network_add_listen_socket (node, service);
 		else
 			network_add_sending_socket (node, service);
-
-		sfree (val_cpy);
 	}
 	else if (strcasecmp ("TimeToLive", key) == 0)
 	{
 		int tmp = atoi (val);
 		if ((tmp > 0) && (tmp < 256))
 			network_config_ttl = tmp;
@@ -1771,13 +1762,20 @@
 						sizeof (errbuf)));
 		}
 	}
 	return (0);
 } /* int network_init */
 
-static int network_flush (int timeout)
+/* 
+ * The flush option of the network plugin cannot flush individual identifiers.
+ * All the values are added to a buffer and sent when the buffer is full, the
+ * requested value may or may not be in there, it's not worth finding out. We
+ * just send the buffer if `flush'  is called - if the requested value was in
+ * there, good. If not, well, then there is nothing to flush.. -octo
+ */
+static int network_flush (int timeout, const char *identifier)
 {
 	pthread_mutex_lock (&send_buffer_lock);
 
 	if (((time (NULL) - cache_flush_last) >= timeout)
 			&& (send_buffer_fill > 0))
 	{
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/nfs.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/nfs.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/nfs.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/nfs.c	2008-09-04 21:01:14.000000000 +0800
@@ -187,24 +187,25 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "nfs", sizeof (vl.plugin));
-	strncpy (vl.plugin_instance, plugin_instance,
+	sstrncpy (vl.plugin_instance, plugin_instance,
 		       	sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, "nfs_procedure", sizeof (vl.type));
 
 	for (i = 0; i < len; i++)
 	{
 		values[0].counter = val[i];
-		strncpy (vl.type_instance, names[i],
+		sstrncpy (vl.type_instance, names[i],
 				sizeof (vl.type_instance));
 		DEBUG ("%s-%s/nfs_procedure-%s = %llu",
 				vl.plugin, vl.plugin_instance,
 				vl.type_instance, val[i]);
-		plugin_dispatch_values ("nfs_procedure", &vl);
+		plugin_dispatch_values (&vl);
 	}
 } /* void nfs_procedures_submit */
 
 static void nfs_read_stats_file (FILE *fh, char *inst)
 {
 	char buffer[BUFSIZE];
@@ -237,15 +238,14 @@
 						"number of fields (= %i) "
 						"for NFSv2 statistics.",
 					       	numfields - 2);
 				continue;
 			}
 
-			snprintf (plugin_instance, sizeof (plugin_instance),
+			ssnprintf (plugin_instance, sizeof (plugin_instance),
 					"v2%s", inst);
-			plugin_instance[DATA_MAX_NAME_LEN - 1] = '\0';
 
 			values = (unsigned long long *) malloc (nfs2_procedures_names_num * sizeof (unsigned long long));
 			if (values == NULL)
 			{
 				char errbuf[1024];
 				ERROR ("nfs plugin: malloc "
@@ -274,15 +274,14 @@
 						"number of fields (= %i) "
 						"for NFSv3 statistics.",
 					       	numfields - 2);
 				continue;
 			}
 
-			snprintf (plugin_instance, sizeof (plugin_instance),
+			ssnprintf (plugin_instance, sizeof (plugin_instance),
 					"v3%s", inst);
-			plugin_instance[DATA_MAX_NAME_LEN - 1] = '\0';
 
 			values = (unsigned long long *) malloc (nfs3_procedures_names_num * sizeof (unsigned long long));
 			if (values == NULL)
 			{
 				char errbuf[1024];
 				ERROR ("nfs plugin: malloc "
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/nginx.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/nginx.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/nginx.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/nginx.c	2008-09-04 21:01:14.000000000 +0800
@@ -119,13 +119,14 @@
   curl_easy_setopt (curl, CURLOPT_WRITEFUNCTION, nginx_curl_callback);
   curl_easy_setopt (curl, CURLOPT_USERAGENT, PACKAGE_NAME"/"PACKAGE_VERSION);
   curl_easy_setopt (curl, CURLOPT_ERRORBUFFER, nginx_curl_error);
 
   if (user != NULL)
   {
-    if (snprintf (credentials, 1024, "%s:%s", user, pass == NULL ? "" : pass) >= 1024)
+    if (ssnprintf (credentials, sizeof (credentials),
+	  "%s:%s", user, pass == NULL ? "" : pass) >= sizeof (credentials))
     {
       ERROR ("nginx plugin: Credentials would have been truncated.");
       return (-1);
     }
 
     curl_easy_setopt (curl, CURLOPT_USERPWD, credentials);
@@ -177,20 +178,18 @@
   vl.values = values;
   vl.values_len = 1;
   vl.time = time (NULL);
   sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   sstrncpy (vl.plugin, "nginx", sizeof (vl.plugin));
   sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
+  sstrncpy (vl.type, type, sizeof (vl.type));
 
   if (inst != NULL)
-  {
-    strncpy (vl.type_instance, inst, sizeof (vl.type_instance));
-    vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-  }
+    sstrncpy (vl.type_instance, inst, sizeof (vl.type_instance));
 
-  plugin_dispatch_values (type, &vl);
+  plugin_dispatch_values (&vl);
 } /* void submit */
 
 static int nginx_read (void)
 {
   int i;
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: notify_desktop.c
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: notify_email.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ntpd.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ntpd.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ntpd.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ntpd.c	2008-09-04 21:01:14.000000000 +0800
@@ -266,17 +266,16 @@
 			return (1);
 	}
 	else if (strcasecmp (key, "Port") == 0)
 	{
 		int port = (int) (atof (value));
 		if ((port > 0) && (port <= 65535))
-			snprintf (ntpd_port, sizeof (ntpd_port),
+			ssnprintf (ntpd_port, sizeof (ntpd_port),
 					"%i", port);
 		else
-			strncpy (ntpd_port, value, sizeof (ntpd_port));
-		ntpd_port[sizeof (ntpd_port) - 1] = '\0';
+			sstrncpy (ntpd_port, value, sizeof (ntpd_port));
 	}
 	else if (strcasecmp (key, "ReverseLookups") == 0)
 	{
 		if ((strcasecmp (value, "True") == 0)
 				|| (strcasecmp (value, "Yes") == 0)
 				|| (strcasecmp (value, "On") == 0))
@@ -302,15 +301,16 @@
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "ntpd", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
-	strncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_inst, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 }
 
 /* returns `tv0 - tv1' in milliseconds or 0 if `tv1 > tv0' */
 static int timeval_sub (const struct timeval *tv0, const struct timeval *tv1)
 {
 	int sec;
@@ -871,22 +871,22 @@
 			char *addr_str;
 
 			refclock_id = (ntohl (ptr->srcadr) >> 8) & 0x000000FF;
 
 			if (refclock_id < refclock_names_num)
 			{
-				strncpy (peername, refclock_names[refclock_id],
+				sstrncpy (peername, refclock_names[refclock_id],
 						sizeof (peername));
 			}
 			else
 			{
 				memset ((void *) &addr_obj, '\0', sizeof (addr_obj));
 				addr_obj.s_addr = ptr->srcadr;
 				addr_str = inet_ntoa (addr_obj);
 
-				strncpy (peername, addr_str, sizeof (peername));
+				sstrncpy (peername, addr_str, sizeof (peername));
 			}
 		}
 		else /* Normal network host. */
 		{
 			struct sockaddr_storage sa;
 			socklen_t sa_len;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/nut.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/nut.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/nut.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/nut.c	2008-09-04 21:01:14.000000000 +0800
@@ -121,26 +121,23 @@
 
   values[0].gauge = value;
 
   vl.values = values;
   vl.values_len = STATIC_ARRAY_SIZE (values);
   vl.time = time (NULL);
-  strncpy (vl.host,
+  sstrncpy (vl.host,
       (strcasecmp (ups->hostname, "localhost") == 0)
       ? hostname_g
       : ups->hostname,
       sizeof (vl.host));
   sstrncpy (vl.plugin, "nut", sizeof (vl.plugin));
-  strncpy (vl.plugin_instance, ups->upsname, sizeof (vl.plugin_instance));
-  strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+  sstrncpy (vl.plugin_instance, ups->upsname, sizeof (vl.plugin_instance));
+  sstrncpy (vl.type, type, sizeof (vl.type));
+  sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-  vl.host[sizeof (vl.host) - 1] = '\0';
-  vl.plugin_instance[sizeof (vl.plugin_instance) - 1] = '\0';
-  vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-
-  plugin_dispatch_values (type, &vl);
+  plugin_dispatch_values (&vl);
 } /* void nut_submit */
 
 static int nut_read_one (nut_ups_t *ups)
 {
   const char *query[3] = {"VAR", ups->upsname, NULL};
   unsigned int query_num = 2;
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: onewire.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/perl.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/perl.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/perl.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/perl.c	2008-09-04 21:01:14.000000000 +0800
@@ -33,13 +33,13 @@
 
 #include "configfile.h"
 
 #include <EXTERN.h>
 #include <perl.h>
 
-#if defined(COLLECT_DEBUG) && COLLECT_DEBUG && defined(__GNUC__) && __GNUC__
+#if __GNUC__
 # pragma GCC poison sprintf
 #endif
 
 #include <XSUB.h>
 
 /* Some versions of Perl define their own version of DEBUG... :-/ */
@@ -68,12 +68,13 @@
 #define PLUGIN_LOG      4
 #define PLUGIN_NOTIF    5
 #define PLUGIN_FLUSH    6
 
 #define PLUGIN_TYPES    7
 
+#define PLUGIN_CONFIG   254
 #define PLUGIN_DATASET  255
 
 #define log_debug(...) DEBUG ("perl: " __VA_ARGS__)
 #define log_info(...) INFO ("perl: " __VA_ARGS__)
 #define log_warn(...) WARNING ("perl: " __VA_ARGS__)
 #define log_err(...) ERROR ("perl: " __VA_ARGS__)
@@ -81,14 +82,13 @@
 /* this is defined in DynaLoader.a */
 void boot_DynaLoader (PerlInterpreter *, CV *);
 
 static XS (Collectd_plugin_register_ds);
 static XS (Collectd_plugin_unregister_ds);
 static XS (Collectd_plugin_dispatch_values);
-static XS (Collectd_plugin_flush_one);
-static XS (Collectd_plugin_flush_all);
+static XS (Collectd__plugin_flush);
 static XS (Collectd_plugin_dispatch_notification);
 static XS (Collectd_plugin_log);
 static XS (Collectd_call_by_name);
 
 /*
  * private data types
@@ -136,14 +136,13 @@
 	XS ((*f));
 } api[] =
 {
 	{ "Collectd::plugin_register_data_set",   Collectd_plugin_register_ds },
 	{ "Collectd::plugin_unregister_data_set", Collectd_plugin_unregister_ds },
 	{ "Collectd::plugin_dispatch_values",     Collectd_plugin_dispatch_values },
-	{ "Collectd::plugin_flush_one",           Collectd_plugin_flush_one },
-	{ "Collectd::plugin_flush_all",           Collectd_plugin_flush_all },
+	{ "Collectd::_plugin_flush",              Collectd__plugin_flush },
 	{ "Collectd::plugin_dispatch_notification",
 		Collectd_plugin_dispatch_notification },
 	{ "Collectd::plugin_log",                 Collectd_plugin_log },
 	{ "Collectd::call_by_name",               Collectd_call_by_name },
 	{ "", NULL }
 };
@@ -157,12 +156,13 @@
 	{ "Collectd::TYPE_READ",       PLUGIN_READ },
 	{ "Collectd::TYPE_WRITE",      PLUGIN_WRITE },
 	{ "Collectd::TYPE_SHUTDOWN",   PLUGIN_SHUTDOWN },
 	{ "Collectd::TYPE_LOG",        PLUGIN_LOG },
 	{ "Collectd::TYPE_NOTIF",      PLUGIN_NOTIF },
 	{ "Collectd::TYPE_FLUSH",      PLUGIN_FLUSH },
+	{ "Collectd::TYPE_CONFIG",     PLUGIN_CONFIG },
 	{ "Collectd::TYPE_DATASET",    PLUGIN_DATASET },
 	{ "Collectd::DS_TYPE_COUNTER", DS_TYPE_COUNTER },
 	{ "Collectd::DS_TYPE_GAUGE",   DS_TYPE_GAUGE },
 	{ "Collectd::LOG_ERR",         LOG_ERR },
 	{ "Collectd::LOG_WARNING",     LOG_WARNING },
 	{ "Collectd::LOG_NOTICE",      LOG_NOTICE },
@@ -213,14 +213,13 @@
 	SV **tmp = NULL;
 
 	if ((NULL == hash) || (NULL == ds))
 		return -1;
 
 	if (NULL != (tmp = hv_fetch (hash, "name", 4, 0))) {
-		strncpy (ds->name, SvPV_nolen (*tmp), DATA_MAX_NAME_LEN);
-		ds->name[DATA_MAX_NAME_LEN - 1] = '\0';
+		sstrncpy (ds->name, SvPV_nolen (*tmp), sizeof (ds->name));
 	}
 	else {
 		log_err ("hv2data_source: No DS name given.");
 		return -1;
 	}
 
@@ -376,12 +375,16 @@
 
 	if ('\0' != vl->plugin_instance[0])
 		if (NULL == hv_store (hash, "plugin_instance", 15,
 				newSVpv (vl->plugin_instance, 0), 0))
 			return -1;
 
+	if ('\0' != vl->type[0])
+		if (NULL == hv_store (hash, "type", 4, newSVpv (vl->type, 0), 0))
+			return -1;
+
 	if ('\0' != vl->type_instance[0])
 		if (NULL == hv_store (hash, "type_instance", 13,
 				newSVpv (vl->type_instance, 0), 0))
 			return -1;
 	return 0;
 } /* static int value2av (value_list_t *, data_set_t *, HV *) */
@@ -420,25 +423,99 @@
 		if (NULL == hv_store (hash, "type_instance", 13,
 				newSVpv (n->type_instance, 0), 0))
 			return -1;
 	return 0;
 } /* static int notification2hv (notification_t *, HV *) */
 
+static int oconfig_item2hv (pTHX_ oconfig_item_t *ci, HV *hash)
+{
+	int i;
+
+	AV *values;
+	AV *children;
+
+	if (NULL == hv_store (hash, "key", 3, newSVpv (ci->key, 0), 0))
+		return -1;
+
+	values = newAV ();
+	if (0 < ci->values_num)
+		av_extend (values, ci->values_num);
+
+	if (NULL == hv_store (hash, "values", 6, newRV_noinc ((SV *)values), 0)) {
+		av_clear (values);
+		av_undef (values);
+		return -1;
+	}
+
+	for (i = 0; i < ci->values_num; ++i) {
+		SV *value;
+
+		switch (ci->values[i].type) {
+			case OCONFIG_TYPE_STRING:
+				value = newSVpv (ci->values[i].value.string, 0);
+				break;
+			case OCONFIG_TYPE_NUMBER:
+				value = newSVnv ((NV)ci->values[i].value.number);
+				break;
+			case OCONFIG_TYPE_BOOLEAN:
+				value = ci->values[i].value.boolean ? &PL_sv_yes : &PL_sv_no;
+				break;
+			default:
+				log_err ("oconfig_item2hv: Invalid value type %i.",
+						ci->values[i].type);
+				value = &PL_sv_undef;
+		}
+
+		if (NULL == av_store (values, i, value)) {
+			sv_free (value);
+			return -1;
+		}
+	}
+
+	/* ignoring 'parent' member which is uninteresting in this case */
+
+	children = newAV ();
+	if (0 < ci->children_num)
+		av_extend (children, ci->children_num);
+
+	if (NULL == hv_store (hash, "children", 8, newRV_noinc ((SV *)children), 0)) {
+		av_clear (children);
+		av_undef (children);
+		return -1;
+	}
+
+	for (i = 0; i < ci->children_num; ++i) {
+		HV *child = newHV ();
+
+		if (0 != oconfig_item2hv (aTHX_ ci->children + i, child)) {
+			hv_clear (child);
+			hv_undef (child);
+			return -1;
+		}
+
+		if (NULL == av_store (children, i, newRV_noinc ((SV *)child))) {
+			hv_clear (child);
+			hv_undef (child);
+			return -1;
+		}
+	}
+	return 0;
+} /* static int oconfig_item2hv (pTHX_ oconfig_item_t *, HV *) */
+
 /*
  * Internal functions.
  */
 
 static char *get_module_name (char *buf, size_t buf_len, const char *module) {
 	int status = 0;
 	if (base_name[0] == '\0')
-		status = snprintf (buf, buf_len, "%s", module);
+		status = ssnprintf (buf, buf_len, "%s", module);
 	else
-		status = snprintf (buf, buf_len, "%s::%s", base_name, module);
+		status = ssnprintf (buf, buf_len, "%s::%s", base_name, module);
 	if ((status < 0) || ((unsigned int)status >= buf_len))
 		return (NULL);
-	buf[buf_len - 1] = '\0';
 	return (buf);
 } /* char *get_module_name */
 
 /*
  * Add a plugin's data set definition.
  */
@@ -478,14 +555,13 @@
 
 		log_debug ("pplugin_register_data_set: "
 				"DS.name = \"%s\", DS.type = %i, DS.min = %f, DS.max = %f",
 				ds[i].name, ds[i].type, ds[i].min, ds[i].max);
 	}
 
-	strncpy (set->type, name, DATA_MAX_NAME_LEN);
-	set->type[DATA_MAX_NAME_LEN - 1] = '\0';
+	sstrncpy (set->type, name, sizeof (set->type));
 
 	set->ds_num = len + 1;
 	set->ds = ds;
 
 	ret = plugin_register_data_set (set);
 
@@ -514,23 +590,30 @@
  *   host   => $host,
  *   plugin => $plugin,
  *   plugin_instance => $pinstance,
  *   type_instance   => $tinstance,
  * }
  */
-static int pplugin_dispatch_values (pTHX_ char *name, HV *values)
+static int pplugin_dispatch_values (pTHX_ HV *values)
 {
 	value_list_t list = VALUE_LIST_INIT;
 	value_t      *val = NULL;
 
 	SV **tmp = NULL;
 
 	int ret = 0;
 
-	if ((NULL == name) || (NULL == values))
+	if (NULL == values)
+		return -1;
+
+	if (NULL == (tmp = hv_fetch (values, "type", 4, 0))) {
+		log_err ("pplugin_dispatch_values: No type given.");
 		return -1;
+	}
+
+	sstrncpy (list.type, SvPV_nolen (*tmp), sizeof (list.type));
 
 	if ((NULL == (tmp = hv_fetch (values, "values", 6, 0)))
 			|| (! (SvROK (*tmp) && (SVt_PVAV == SvTYPE (SvRV (*tmp)))))) {
 		log_err ("pplugin_dispatch_values: No valid values given.");
 		return -1;
 	}
@@ -541,13 +624,14 @@
 
 		if (len <= 0)
 			return -1;
 
 		val = (value_t *)smalloc (len * sizeof (value_t));
 
-		list.values_len = av2value (aTHX_ name, (AV *)SvRV (*tmp), val, len);
+		list.values_len = av2value (aTHX_ list.type, (AV *)SvRV (*tmp),
+				val, len);
 		list.values = val;
 
 		if (-1 == list.values_len) {
 			sfree (val);
 			return -1;
 		}
@@ -558,35 +642,30 @@
 	}
 	else {
 		list.time = time (NULL);
 	}
 
 	if (NULL != (tmp = hv_fetch (values, "host", 4, 0))) {
-		strncpy (list.host, SvPV_nolen (*tmp), DATA_MAX_NAME_LEN);
-		list.host[DATA_MAX_NAME_LEN - 1] = '\0';
+		sstrncpy (list.host, SvPV_nolen (*tmp), sizeof (list.host));
 	}
 	else {
 		sstrncpy (list.host, hostname_g, sizeof (list.host));
 	}
 
-	if (NULL != (tmp = hv_fetch (values, "plugin", 6, 0))) {
-		strncpy (list.plugin, SvPV_nolen (*tmp), DATA_MAX_NAME_LEN);
-		list.plugin[DATA_MAX_NAME_LEN - 1] = '\0';
-	}
+	if (NULL != (tmp = hv_fetch (values, "plugin", 6, 0)))
+		sstrncpy (list.plugin, SvPV_nolen (*tmp), sizeof (list.plugin));
 
-	if (NULL != (tmp = hv_fetch (values, "plugin_instance", 15, 0))) {
-		strncpy (list.plugin_instance, SvPV_nolen (*tmp), DATA_MAX_NAME_LEN);
-		list.plugin_instance[DATA_MAX_NAME_LEN - 1] = '\0';
-	}
+	if (NULL != (tmp = hv_fetch (values, "plugin_instance", 15, 0)))
+		sstrncpy (list.plugin_instance, SvPV_nolen (*tmp),
+				sizeof (list.plugin_instance));
+
+	if (NULL != (tmp = hv_fetch (values, "type_instance", 13, 0)))
+		sstrncpy (list.type_instance, SvPV_nolen (*tmp),
+				sizeof (list.type_instance));
 
-	if (NULL != (tmp = hv_fetch (values, "type_instance", 13, 0))) {
-		strncpy (list.type_instance, SvPV_nolen (*tmp), DATA_MAX_NAME_LEN);
-		list.type_instance[DATA_MAX_NAME_LEN - 1] = '\0';
-	}
-
-	ret = plugin_dispatch_values (name, &list);
+	ret = plugin_dispatch_values (&list);
 
 	sfree (val);
 	return ret;
 } /* static int pplugin_dispatch_values (char *, HV *) */
 
 /*
@@ -623,37 +702,31 @@
 	if (NULL != (tmp = hv_fetch (notif, "time", 4, 0)))
 		n.time = (time_t)SvIV (*tmp);
 	else
 		n.time = time (NULL);
 
 	if (NULL != (tmp = hv_fetch (notif, "message", 7, 0)))
-		strncpy (n.message, SvPV_nolen (*tmp), sizeof (n.message));
-	n.message[sizeof (n.message) - 1] = '\0';
+		sstrncpy (n.message, SvPV_nolen (*tmp), sizeof (n.message));
 
 	if (NULL != (tmp = hv_fetch (notif, "host", 4, 0)))
-		strncpy (n.host, SvPV_nolen (*tmp), sizeof (n.host));
+		sstrncpy (n.host, SvPV_nolen (*tmp), sizeof (n.host));
 	else
-		strncpy (n.host, hostname_g, sizeof (n.host));
-	n.host[sizeof (n.host) - 1] = '\0';
+		sstrncpy (n.host, hostname_g, sizeof (n.host));
 
 	if (NULL != (tmp = hv_fetch (notif, "plugin", 6, 0)))
-		strncpy (n.plugin, SvPV_nolen (*tmp), sizeof (n.plugin));
-	n.plugin[sizeof (n.plugin) - 1] = '\0';
+		sstrncpy (n.plugin, SvPV_nolen (*tmp), sizeof (n.plugin));
 
 	if (NULL != (tmp = hv_fetch (notif, "plugin_instance", 15, 0)))
-		strncpy (n.plugin_instance, SvPV_nolen (*tmp),
+		sstrncpy (n.plugin_instance, SvPV_nolen (*tmp),
 				sizeof (n.plugin_instance));
-	n.plugin_instance[sizeof (n.plugin_instance) - 1] = '\0';
 
 	if (NULL != (tmp = hv_fetch (notif, "type", 4, 0)))
-		strncpy (n.type, SvPV_nolen (*tmp), sizeof (n.type));
-	n.type[sizeof (n.type) - 1] = '\0';
+		sstrncpy (n.type, SvPV_nolen (*tmp), sizeof (n.type));
 
 	if (NULL != (tmp = hv_fetch (notif, "type_instance", 13, 0)))
-		strncpy (n.type_instance, SvPV_nolen (*tmp), sizeof (n.type_instance));
-	n.type_instance[sizeof (n.type_instance) - 1] = '\0';
+		sstrncpy (n.type_instance, SvPV_nolen (*tmp), sizeof (n.type_instance));
 	return plugin_dispatch_notification (&n);
 } /* static int pplugin_dispatch_notification (HV *) */
 
 /*
  * Call all working functions of the given type.
  */
@@ -696,12 +769,13 @@
 		 * $_[2] =
 		 * {
 		 *   values => [ $v1, ... ],
 		 *   time   => $time,
 		 *   host   => $hostname,
 		 *   plugin => $plugin,
+		 *   type   => $type,
 		 *   plugin_instance => $instance,
 		 *   type_instance   => $type_instance
 		 * };
 		 */
 		data_set_t   *ds;
 		value_list_t *vl;
@@ -767,14 +841,16 @@
 
 		XPUSHs (sv_2mortal (newRV_noinc ((SV *)notif)));
 	}
 	else if (PLUGIN_FLUSH == type) {
 		/*
 		 * $_[0] = $timeout;
+		 * $_[1] = $identifier;
 		 */
 		XPUSHs (sv_2mortal (newSViv (va_arg (ap, int))));
+		XPUSHs (sv_2mortal (newSVpv (va_arg (ap, char *), 0)));
 	}
 
 	PUTBACK;
 
 	retvals = call_pv ("Collectd::plugin_call_all", G_SCALAR);
 
@@ -871,93 +947,98 @@
  *
  * values:
  *   value list to submit
  */
 static XS (Collectd_plugin_dispatch_values)
 {
-	SV *values = NULL;
+	SV *values     = NULL;
+	int values_idx = 0;
 
 	int ret = 0;
 
 	dXSARGS;
 
-	if (2 != items) {
-		log_err ("Usage: Collectd::plugin_dispatch_values(name, values)");
+	if (2 == items) {
+		log_warn ("Collectd::plugin_dispatch_values with two arguments "
+				"is deprecated - pass the type through values->{type}.");
+		values_idx = 1;
+	}
+	else if (1 != items) {
+		log_err ("Usage: Collectd::plugin_dispatch_values(values)");
 		XSRETURN_EMPTY;
 	}
 
-	log_debug ("Collectd::plugin_dispatch_values: "
-			"name = \"%s\", values=\"%s\"",
-			SvPV_nolen (ST (0)), SvPV_nolen (ST (1)));
+	log_debug ("Collectd::plugin_dispatch_values: values=\"%s\"",
+			SvPV_nolen (ST (values_idx)));
 
-	values = ST (1);
+	values = ST (values_idx);
 
 	if (! (SvROK (values) && (SVt_PVHV == SvTYPE (SvRV (values))))) {
 		log_err ("Collectd::plugin_dispatch_values: Invalid values.");
 		XSRETURN_EMPTY;
 	}
 
-	if ((NULL == ST (0)) || (NULL == values))
+	if (((2 == items) && (NULL == ST (0))) || (NULL == values))
 		XSRETURN_EMPTY;
 
-	ret = pplugin_dispatch_values (aTHX_ SvPV_nolen (ST (0)),
-			(HV *)SvRV (values));
+	if ((2 == items) && (NULL == hv_store ((HV *)SvRV (values), "type", 4,
+			newSVsv (ST (0)), 0))) {
+		log_err ("Collectd::plugin_dispatch_values: Could not store type.");
+		XSRETURN_EMPTY;
+	}
+
+	ret = pplugin_dispatch_values (aTHX_ (HV *)SvRV (values));
 
 	if (0 == ret)
 		XSRETURN_YES;
 	else
 		XSRETURN_EMPTY;
 } /* static XS (Collectd_plugin_dispatch_values) */
 
 /*
- * Collectd::plugin_flush_one (timeout, name).
+ * Collectd::_plugin_flush (plugin, timeout, identifier).
+ *
+ * plugin:
+ *   name of the plugin to flush
  *
  * timeout:
  *   timeout to use when flushing the data
  *
- * name:
- *   name of the plugin to flush
+ * identifier:
+ *   data-set identifier to flush
  */
-static XS (Collectd_plugin_flush_one)
+static XS (Collectd__plugin_flush)
 {
+	char *plugin  = NULL;
+	int   timeout = -1;
+	char *id      = NULL;
+
 	dXSARGS;
 
-	if (2 != items) {
-		log_err ("Usage: Collectd::plugin_flush_one(timeout, name)");
+	if (3 != items) {
+		log_err ("Usage: Collectd::_plugin_flush(plugin, timeout, id)");
 		XSRETURN_EMPTY;
 	}
 
-	log_debug ("Collectd::plugin_flush_one: timeout = %i, name = \"%s\"",
-			(int)SvIV (ST (0)), SvPV_nolen (ST (1)));
-
-	if (0 == plugin_flush_one ((int)SvIV (ST (0)), SvPV_nolen (ST (1))))
-		XSRETURN_YES;
-	else
-		XSRETURN_EMPTY;
-} /* static XS (Collectd_plugin_flush_one) */
+	if (SvOK (ST (0)))
+		plugin = SvPV_nolen (ST (0));
 
-/*
- * Collectd::plugin_flush_all (timeout).
- *
- * timeout:
- *   timeout to use when flushing the data
- */
-static XS (Collectd_plugin_flush_all)
-{
-	dXSARGS;
+	if (SvOK (ST (1)))
+		timeout = (int)SvIV (ST (1));
 
-	if (1 != items) {
-		log_err ("Usage: Collectd::plugin_flush_all(timeout)");
-		XSRETURN_EMPTY;
-	}
+	if (SvOK (ST (2)))
+		id = SvPV_nolen (ST (2));
 
-	log_debug ("Collectd::plugin_flush_all: timeout = %i", (int)SvIV (ST (0)));
+	log_debug ("Collectd::_plugin_flush: plugin = \"%s\", timeout = %i, "
+			"id = \"%s\"", plugin, timeout, id);
 
-	plugin_flush_all ((int)SvIV (ST (0)));
-	XSRETURN_YES;
-} /* static XS (Collectd_plugin_flush_all) */
+	if (0 == plugin_flush (plugin, timeout, id))
+		XSRETURN_YES;
+	else
+		XSRETURN_EMPTY;
+} /* static XS (Collectd__plugin_flush) */
 
 /*
  * Collectd::plugin_dispatch_notification (notif).
  *
  * notif:
  *   notification to dispatch
@@ -1258,13 +1339,13 @@
 
 		aTHX = t->interp;
 	}
 	return pplugin_call_all (aTHX_ PLUGIN_NOTIF, notif);
 } /* static int perl_notify (const notification_t *) */
 
-static int perl_flush (const int timeout)
+static int perl_flush (int timeout, const char *identifier)
 {
 	dTHX;
 
 	if (NULL == perl_threads)
 		return 0;
 
@@ -1274,13 +1355,13 @@
 		pthread_mutex_lock (&perl_threads->mutex);
 		t = c_ithread_create (perl_threads->head->interp);
 		pthread_mutex_unlock (&perl_threads->mutex);
 
 		aTHX = t->interp;
 	}
-	return pplugin_call_all (aTHX_ PLUGIN_FLUSH, timeout);
+	return pplugin_call_all (aTHX_ PLUGIN_FLUSH, timeout, identifier);
 } /* static int perl_flush (const int) */
 
 static int perl_shutdown (void)
 {
 	c_ithread_t *t = NULL;
 
@@ -1355,14 +1436,13 @@
 	return 0;
 } /* static int g_pv_get (pTHX_ SV *, MAGIC *) */
 
 static int g_pv_set (pTHX_ SV *var, MAGIC *mg)
 {
 	char *pv = mg->mg_ptr;
-	strncpy (pv, SvPV_nolen (var), DATA_MAX_NAME_LEN);
-	pv[DATA_MAX_NAME_LEN - 1] = '\0';
+	sstrncpy (pv, SvPV_nolen (var), DATA_MAX_NAME_LEN);
 	return 0;
 } /* static int g_pv_set (pTHX_ SV *, MAGIC *) */
 
 static int g_iv_get (pTHX_ SV *var, MAGIC *mg)
 {
 	int *iv = (int *)mg->mg_ptr;
@@ -1478,15 +1558,13 @@
 
 	perl_construct (aTHX);
 
 	PL_exit_flags |= PERL_EXIT_DESTRUCT_END;
 
 	if (0 != perl_parse (aTHX_ xs_init, argc, argv, NULL)) {
-		SV *err = get_sv ("@", 1);
-		log_err ("init_pi: Unable to bootstrap Collectd: %s",
-				SvPV_nolen (err));
+		log_err ("init_pi: Unable to bootstrap Collectd.");
 
 		perl_destruct (perl_threads->head->interp);
 		perl_free (perl_threads->head->interp);
 		sfree (perl_threads);
 
 		pthread_key_delete (perl_thr_key);
@@ -1559,14 +1637,13 @@
 		return 1;
 	}
 
 	value = ci->values[0].value.string;
 
 	log_debug ("perl_config: Setting plugin basename to \"%s\"", value);
-	strncpy (base_name, value, sizeof (base_name));
-	base_name[sizeof (base_name) - 1] = '\0';
+	sstrncpy (base_name, value, sizeof (base_name));
 	return 0;
 } /* static int perl_config_basename (oconfig_item_it *) */
 
 /*
  * EnableDebugger "<Package>"|""
  */
@@ -1643,12 +1720,68 @@
 		av_unshift (GvAVn (PL_incgv), 1);
 		av_store (GvAVn (PL_incgv), 0, newSVpv (value, strlen (value)));
 	}
 	return 0;
 } /* static int perl_config_includedir (oconfig_item_it *) */
 
+/*
+ * <Plugin> block
+ */
+static int perl_config_plugin (pTHX_ oconfig_item_t *ci)
+{
+	int retvals = 0;
+	int ret     = 0;
+
+	char *plugin;
+	HV   *config;
+
+	dSP;
+
+	if ((1 != ci->values_num) || (OCONFIG_TYPE_STRING != ci->values[0].type)) {
+		log_err ("LoadPlugin expects a single string argument.");
+		return 1;
+	}
+
+	plugin = ci->values[0].value.string;
+	config = newHV ();
+
+	if (0 != oconfig_item2hv (aTHX_ ci, config)) {
+		hv_clear (config);
+		hv_undef (config);
+
+		log_err ("Unable to convert configuration to a Perl hash value.");
+		config = Nullhv;
+	}
+
+	ENTER;
+	SAVETMPS;
+
+	PUSHMARK (SP);
+
+	XPUSHs (sv_2mortal (newSVpv (plugin, 0)));
+	XPUSHs (sv_2mortal (newRV_noinc ((SV *)config)));
+
+	PUTBACK;
+
+	retvals = call_pv ("Collectd::_plugin_dispatch_config", G_SCALAR);
+
+	SPAGAIN;
+	if (0 < retvals) {
+		SV *tmp = POPs;
+		if (! SvTRUE (tmp))
+			ret = -1;
+	}
+	else
+		ret = -1;
+
+	PUTBACK;
+	FREETMPS;
+	LEAVE;
+	return ret;
+} /* static int perl_config_plugin (oconfig_item_it *) */
+
 static int perl_config (oconfig_item_t *ci)
 {
 	int i = 0;
 
 	dTHXa (NULL);
 
@@ -1663,12 +1796,14 @@
 		else if (0 == strcasecmp (c->key, "BaseName"))
 			perl_config_basename (aTHX_ c);
 		else if (0 == strcasecmp (c->key, "EnableDebugger"))
 			perl_config_enabledebugger (aTHX_ c);
 		else if (0 == strcasecmp (c->key, "IncludeDir"))
 			perl_config_includedir (aTHX_ c);
+		else if (0 == strcasecmp (c->key, "Plugin"))
+			perl_config_plugin (aTHX_ c);
 		else
 			log_warn ("Ignoring unknown config key \"%s\".", c->key);
 	}
 	return 0;
 } /* static int perl_config (oconfig_item_t *) */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ping.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ping.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/ping.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/ping.c	2008-09-04 21:01:14.000000000 +0800
@@ -186,15 +186,16 @@
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "ping", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
-	strncpy (vl.type_instance, host, sizeof (vl.type_instance));
+	sstrncpy (vl.type_instance, host, sizeof (vl.type_instance));
+	sstrncpy (vl.type, "ping", sizeof (vl.type));
 
-	plugin_dispatch_values ("ping", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int ping_read (void)
 {
 	pingobj_iter_t *iter;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/plugin.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/plugin.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/plugin.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/plugin.c	2008-09-04 21:01:14.000000000 +0800
@@ -18,12 +18,13 @@
  * Authors:
  *   Florian octo Forster <octo at verplant.org>
  *   Sebastian Harl <sh at tokkee.org>
  **/
 
 #include "collectd.h"
+#include "utils_complain.h"
 
 #include <ltdl.h>
 
 #if HAVE_PTHREAD_H
 # include <pthread.h>
 #endif
@@ -325,13 +326,14 @@
 
 	dir = plugin_get_dir ();
 	ret = 1;
 
 	/* `cpu' should not match `cpufreq'. To solve this we add `.so' to the
 	 * type when matching the filename */
-	if (snprintf (typename, BUFSIZE, "%s.so", type) >= BUFSIZE)
+	if (ssnprintf (typename, sizeof (typename),
+			"%s.so", type) >= sizeof (typename))
 	{
 		WARNING ("snprintf: truncated: `%s.so'", type);
 		return (-1);
 	}
 	typename_len = strlen (typename);
 
@@ -345,13 +347,14 @@
 
 	while ((de = readdir (dh)) != NULL)
 	{
 		if (strncasecmp (de->d_name, typename, typename_len))
 			continue;
 
-		if (snprintf (filename, BUFSIZE, "%s/%s", dir, de->d_name) >= BUFSIZE)
+		if (ssnprintf (filename, sizeof (filename),
+				"%s/%s", dir, de->d_name) >= sizeof (filename))
 		{
 			WARNING ("snprintf: truncated: `%s/%s'", dir, de->d_name);
 			continue;
 		}
 
 		if (lstat (filename, &statbuf) == -1)
@@ -436,13 +439,14 @@
 int plugin_register_write (const char *name,
 		int (*callback) (const data_set_t *ds, const value_list_t *vl))
 {
 	return (register_callback (&list_write, name, (void *) callback));
 } /* int plugin_register_write */
 
-int plugin_register_flush (const char *name, int (*callback) (const int))
+int plugin_register_flush (const char *name,
+		int (*callback) (const int timeout, const char *identifier))
 {
 	return (register_callback (&list_flush, name, (void *) callback));
 } /* int plugin_register_flush */
 
 int plugin_register_shutdown (char *name,
 		int (*callback) (void))
@@ -658,48 +662,37 @@
 
 	DEBUG ("plugin: plugin_read_all: Signalling `read_cond'");
 	pthread_cond_broadcast (&read_cond);
 	pthread_mutex_unlock (&read_lock);
 } /* void plugin_read_all */
 
-int plugin_flush_one (int timeout, const char *name)
+int plugin_flush (const char *plugin, int timeout, const char *identifier)
 {
-	int (*callback) (int);
-	llentry_t *le;
-	int status;
-
-	if (list_flush == NULL)
-		return (-1);
-
-	le = llist_search (list_flush, name);
-	if (le == NULL)
-		return (-1);
-	callback = (int (*) (int)) le->value;
-
-	status = (*callback) (timeout);
-
-	return (status);
-} /* int plugin_flush_ont */
-
-void plugin_flush_all (int timeout)
-{
-	int (*callback) (int);
-	llentry_t *le;
+  int (*callback) (int timeout, const char *identifier);
+  llentry_t *le;
 
-	if (list_flush == NULL)
-		return;
-
-	le = llist_head (list_flush);
-	while (le != NULL)
-	{
-		callback = (int (*) (int)) le->value;
-		le = le->next;
+  if (list_flush == NULL)
+    return (0);
 
-		(*callback) (timeout);
-	}
-} /* void plugin_flush_all */
+  le = llist_head (list_flush);
+  while (le != NULL)
+  {
+    if ((plugin != NULL)
+        && (strcmp (plugin, le->key) != 0))
+    {
+      le = le->next;
+      continue;
+    }
+
+    callback = (int (*) (int, const char *)) le->value;
+    (*callback) (timeout, identifier);
+
+    le = le->next;
+  }
+  return (0);
+} /* int plugin_flush */
 
 void plugin_shutdown_all (void)
 {
 	int (*callback) (void);
 	llentry_t *le;
 
@@ -720,48 +713,61 @@
 		le = le->next;
 
 		(*callback) ();
 	}
 } /* void plugin_shutdown_all */
 
-int plugin_dispatch_values (const char *name, value_list_t *vl)
+int plugin_dispatch_values (value_list_t *vl)
 {
+	static c_complain_t no_write_complaint = C_COMPLAIN_INIT;
+
 	int (*callback) (const data_set_t *, const value_list_t *);
 	data_set_t *ds;
 	llentry_t *le;
 
-	if (list_write == NULL)
-	{
-		ERROR ("plugin_dispatch_values: No write callback has been "
-				"registered. Please load at least one plugin "
-				"that provides a write function.");
+	if ((vl == NULL) || (*vl->type == '\0')) {
+		ERROR ("plugin_dispatch_values: Invalid value list.");
 		return (-1);
 	}
 
+	if (list_write == NULL)
+		c_complain_once (LOG_WARNING, &no_write_complaint,
+				"plugin_dispatch_values: No write callback has been "
+				"registered. Please load at least one output plugin, "
+				"if you want the collected data to be stored.");
+
 	if (data_sets == NULL)
 	{
 		ERROR ("plugin_dispatch_values: No data sets registered. "
 				"Could the types database be read? Check "
 				"your `TypesDB' setting!");
 		return (-1);
 	}
 
-	if (c_avl_get (data_sets, name, (void *) &ds) != 0)
+	if (c_avl_get (data_sets, vl->type, (void *) &ds) != 0)
 	{
-		INFO ("plugin_dispatch_values: Dataset not found: %s", name);
+		INFO ("plugin_dispatch_values: Dataset not found: %s", vl->type);
 		return (-1);
 	}
 
 	DEBUG ("plugin_dispatch_values: time = %u; interval = %i; "
 			"host = %s; "
 			"plugin = %s; plugin_instance = %s; "
 			"type = %s; type_instance = %s;",
 			(unsigned int) vl->time, vl->interval,
 			vl->host,
 			vl->plugin, vl->plugin_instance,
-			ds->type, vl->type_instance);
+			vl->type, vl->type_instance);
+
+#if COLLECT_DEBUG
+	assert (0 == strcmp (ds->type, vl->type));
+#else
+	if (0 != strcmp (ds->type, vl->type))
+		WARNING ("plugin_dispatch_values: (ds->type = %s) != (vl->type = %s)",
+				ds->type, vl->type);
+#endif
 
 #if COLLECT_DEBUG
 	assert (ds->ds_num == vl->values_len);
 #else
 	if (ds->ds_num != vl->values_len)
 	{
@@ -773,12 +779,13 @@
 	}
 #endif
 
 	escape_slashes (vl->host, sizeof (vl->host));
 	escape_slashes (vl->plugin, sizeof (vl->plugin));
 	escape_slashes (vl->plugin_instance, sizeof (vl->plugin_instance));
+	escape_slashes (vl->type, sizeof (vl->type));
 	escape_slashes (vl->type_instance, sizeof (vl->type_instance));
 
 	/* Update the value cache */
 	uc_update (ds, vl);
 	ut_check_threshold (ds, vl);
 
@@ -820,13 +827,13 @@
 
 	return (0);
 } /* int plugin_dispatch_notification */
 
 void plugin_log (int level, const char *format, ...)
 {
-	char msg[1024];
+	char msg[512];
 	va_list ap;
 
 	void (*callback) (int, const char *);
 	llentry_t *le;
 
 	if (list_log == NULL)
@@ -835,14 +842,14 @@
 #if !COLLECT_DEBUG
 	if (level >= LOG_DEBUG)
 		return;
 #endif
 
 	va_start (ap, format);
-	vsnprintf (msg, sizeof (msg), format, ap);
-	msg[sizeof (msg) - 1] = '\0';
+	vsnprintf (msg, 512, format, ap);
+	msg[511] = '\0';
 	va_end (ap);
 
 	le = llist_head (list_log);
 	while (le != NULL)
 	{
 		callback = (void (*) (int, const char *)) le->value;
@@ -861,6 +868,182 @@
 		DEBUG ("No such dataset registered: %s", name);
 		return (NULL);
 	}
 
 	return (ds);
 } /* data_set_t *plugin_get_ds */
+
+static int plugin_notification_meta_add (notification_t *n,
+    const char *name,
+    enum notification_meta_type_e type,
+    const void *value)
+{
+  notification_meta_t *meta;
+  notification_meta_t *tail;
+
+  if ((n == NULL) || (name == NULL) || (value == NULL))
+  {
+    ERROR ("plugin_notification_meta_add: A pointer is NULL!");
+    return (-1);
+  }
+
+  meta = (notification_meta_t *) malloc (sizeof (notification_meta_t));
+  if (meta == NULL)
+  {
+    ERROR ("plugin_notification_meta_add: malloc failed.");
+    return (-1);
+  }
+  memset (meta, 0, sizeof (notification_meta_t));
+
+  sstrncpy (meta->name, name, sizeof (meta->name));
+  meta->type = type;
+
+  switch (type)
+  {
+    case NM_TYPE_STRING:
+    {
+      meta->value_string = strdup ((const char *) value);
+      if (meta->value_string == NULL)
+      {
+        ERROR ("plugin_notification_meta_add: strdup failed.");
+        sfree (meta);
+        return (-1);
+      }
+      break;
+    }
+    case NM_TYPE_SIGNED_INT:
+    {
+      meta->value_signed_int = *((int64_t *) value);
+      break;
+    }
+    case NM_TYPE_UNSIGNED_INT:
+    {
+      meta->value_unsigned_int = *((uint64_t *) value);
+      break;
+    }
+    case NM_TYPE_DOUBLE:
+    {
+      meta->value_double = *((double *) value);
+      break;
+    }
+    case NM_TYPE_BOOLEAN:
+    {
+      meta->value_boolean = *((bool *) value);
+      break;
+    }
+    default:
+    {
+      ERROR ("plugin_notification_meta_add: Unknown type: %i", type);
+      sfree (meta);
+      return (-1);
+    }
+  } /* switch (type) */
+
+  meta->next = NULL;
+  tail = n->meta;
+  while ((tail != NULL) && (tail->next != NULL))
+    tail = tail->next;
+
+  if (tail == NULL)
+    n->meta = meta;
+  else
+    tail->next = meta;
+
+  return (0);
+} /* int plugin_notification_meta_add */
+
+int plugin_notification_meta_add_string (notification_t *n,
+    const char *name,
+    const char *value)
+{
+  return (plugin_notification_meta_add (n, name, NM_TYPE_STRING, value));
+}
+
+int plugin_notification_meta_add_signed_int (notification_t *n,
+    const char *name,
+    int64_t value)
+{
+  return (plugin_notification_meta_add (n, name, NM_TYPE_SIGNED_INT, &value));
+}
+
+int plugin_notification_meta_add_unsigned_int (notification_t *n,
+    const char *name,
+    uint64_t value)
+{
+  return (plugin_notification_meta_add (n, name, NM_TYPE_UNSIGNED_INT, &value));
+}
+
+int plugin_notification_meta_add_double (notification_t *n,
+    const char *name,
+    double value)
+{
+  return (plugin_notification_meta_add (n, name, NM_TYPE_DOUBLE, &value));
+}
+
+int plugin_notification_meta_add_boolean (notification_t *n,
+    const char *name,
+    bool value)
+{
+  return (plugin_notification_meta_add (n, name, NM_TYPE_BOOLEAN, &value));
+}
+
+int plugin_notification_meta_copy (notification_t *dst,
+    const notification_t *src)
+{
+  notification_meta_t *meta;
+
+  assert (dst != NULL);
+  assert (src != NULL);
+  assert (dst != src);
+  assert ((src->meta == NULL) || (src->meta != dst->meta));
+
+  for (meta = src->meta; meta != NULL; meta = meta->next)
+  {
+    if (meta->type == NM_TYPE_STRING)
+      plugin_notification_meta_add_string (dst, meta->name,
+          meta->value_string);
+    else if (meta->type == NM_TYPE_SIGNED_INT)
+      plugin_notification_meta_add_signed_int (dst, meta->name,
+          meta->value_signed_int);
+    else if (meta->type == NM_TYPE_UNSIGNED_INT)
+      plugin_notification_meta_add_unsigned_int (dst, meta->name,
+          meta->value_unsigned_int);
+    else if (meta->type == NM_TYPE_DOUBLE)
+      plugin_notification_meta_add_double (dst, meta->name,
+          meta->value_double);
+    else if (meta->type == NM_TYPE_BOOLEAN)
+      plugin_notification_meta_add_boolean (dst, meta->name,
+          meta->value_boolean);
+  }
+
+  return (0);
+} /* int plugin_notification_meta_copy */
+
+int plugin_notification_meta_free (notification_t *n)
+{
+  notification_meta_t *this;
+  notification_meta_t *next;
+
+  if (n == NULL)
+  {
+    ERROR ("plugin_notification_meta_free: n == NULL!");
+    return (-1);
+  }
+
+  this = n->meta;
+  n->meta = NULL;
+  while (this != NULL)
+  {
+    next = this->next;
+
+    if (this->type == NM_TYPE_STRING)
+    {
+      free ((char *)this->value_string);
+      this->value_string = NULL;
+    }
+    sfree (this);
+
+    this = next;
+  }
+
+  return (0);
+} /* int plugin_notification_meta_free */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/plugin.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/plugin.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/plugin.h	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/plugin.h	2008-09-04 21:01:14.000000000 +0800
@@ -71,18 +71,19 @@
 	int      values_len;
 	time_t   time;
 	int      interval;
 	char     host[DATA_MAX_NAME_LEN];
 	char     plugin[DATA_MAX_NAME_LEN];
 	char     plugin_instance[DATA_MAX_NAME_LEN];
+	char     type[DATA_MAX_NAME_LEN];
 	char     type_instance[DATA_MAX_NAME_LEN];
 };
 typedef struct value_list_s value_list_t;
 
-#define VALUE_LIST_INIT { NULL, 0, 0, interval_g, "localhost", "", "", "" }
-#define VALUE_LIST_STATIC { NULL, 0, 0, 0, "localhost", "", "", "" }
+#define VALUE_LIST_INIT { NULL, 0, 0, interval_g, "localhost", "", "", "", "" }
+#define VALUE_LIST_STATIC { NULL, 0, 0, 0, "localhost", "", "", "", "" }
 
 struct data_source_s
 {
 	char   name[DATA_MAX_NAME_LEN];
 	int    type;
 	double min;
@@ -95,22 +96,47 @@
 	char           type[DATA_MAX_NAME_LEN];
 	int            ds_num;
 	data_source_t *ds;
 };
 typedef struct data_set_s data_set_t;
 
+enum notification_meta_type_e
+{
+	NM_TYPE_STRING,
+	NM_TYPE_SIGNED_INT,
+	NM_TYPE_UNSIGNED_INT,
+	NM_TYPE_DOUBLE,
+	NM_TYPE_BOOLEAN
+};
+
+typedef struct notification_meta_s
+{
+	char name[DATA_MAX_NAME_LEN];
+	enum notification_meta_type_e type;
+	union
+	{
+		const char *value_string;
+		int64_t value_signed_int;
+		uint64_t value_unsigned_int;
+		double value_double;
+		bool value_boolean;
+	};
+	struct notification_meta_s *next;
+} notification_meta_t;
+
 typedef struct notification_s
 {
 	int    severity;
 	time_t time;
 	char   message[NOTIF_MAX_MSG_LEN];
 	char   host[DATA_MAX_NAME_LEN];
 	char   plugin[DATA_MAX_NAME_LEN];
 	char   plugin_instance[DATA_MAX_NAME_LEN];
 	char   type[DATA_MAX_NAME_LEN];
 	char   type_instance[DATA_MAX_NAME_LEN];
+	notification_meta_t *meta;
 } notification_t;
 
 /*
  * NAME
  *  plugin_set_dir
  *
@@ -147,16 +173,15 @@
  *  No attempt is made to re-load an already loaded module.
  */
 int plugin_load (const char *name);
 
 void plugin_init_all (void);
 void plugin_read_all (void);
-void plugin_flush_all (int timeout);
 void plugin_shutdown_all (void);
 
-int plugin_flush_one (int timeout, const char *name);
+int plugin_flush (const char *plugin, int timeout, const char *identifier);
 
 /*
  * The `plugin_register_*' functions are used to make `config', `init',
  * `read', `write' and `shutdown' functions known to the plugin
  * infrastructure. Also, the data-formats are made public like this.
  */
@@ -169,13 +194,13 @@
 		int (*callback) (void));
 int plugin_register_read (const char *name,
 		int (*callback) (void));
 int plugin_register_write (const char *name,
 		int (*callback) (const data_set_t *ds, const value_list_t *vl));
 int plugin_register_flush (const char *name,
-		int (*callback) (const int));
+		int (*callback) (const int timeout, const char *identifier));
 int plugin_register_shutdown (char *name,
 		int (*callback) (void));
 int plugin_register_data_set (const data_set_t *ds);
 int plugin_register_log (char *name,
 		void (*callback) (int, const char *));
 int plugin_register_notification (const char *name,
@@ -201,17 +226,16 @@
  *  This function is called by reading processes with the values they've
  *  aquired. The function fetches the data-set definition (that has been
  *  registered using `plugin_register_data_set') and calls _all_ registered
  *  write-functions.
  *
  * ARGUMENTS
- *  `name'      Name/type of the data-set that describe the values in `vl'.
  *  `vl'        Value list of the values that have been read by a `read'
  *              function.
  */
-int plugin_dispatch_values (const char *name, value_list_t *vl);
+int plugin_dispatch_values (value_list_t *vl);
 
 int plugin_dispatch_notification (const notification_t *notif);
 
 void plugin_log (int level, const char *format, ...)
 	__attribute__ ((format(printf,2,3)));
 
@@ -224,7 +248,28 @@
 #else /* COLLECT_DEBUG */
 # define DEBUG(...)  /* noop */
 #endif /* ! COLLECT_DEBUG */
 
 const data_set_t *plugin_get_ds (const char *name);
 
+int plugin_notification_meta_add_string (notification_t *n,
+    const char *name,
+    const char *value);
+int plugin_notification_meta_add_signed_int (notification_t *n,
+    const char *name,
+    int64_t value);
+int plugin_notification_meta_add_unsigned_int (notification_t *n,
+    const char *name,
+    uint64_t value);
+int plugin_notification_meta_add_double (notification_t *n,
+    const char *name,
+    double value);
+int plugin_notification_meta_add_boolean (notification_t *n,
+    const char *name,
+    bool value);
+
+int plugin_notification_meta_copy (notification_t *dst,
+    const notification_t *src);
+
+int plugin_notification_meta_free (notification_t *n);
+
 #endif /* PLUGIN_H */
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: postgresql.c
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: postgresql_default.conf
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/powerdns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/powerdns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/powerdns.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/powerdns.c	2008-09-04 21:01:14.000000000 +0800
@@ -42,16 +42,16 @@
 
 #ifndef UNIX_PATH_MAX
 # define UNIX_PATH_MAX sizeof (((struct sockaddr_un *)0)->sun_path)
 #endif
 #define FUNC_ERROR(func) do { char errbuf[1024]; ERROR ("powerdns plugin: %s failed: %s", func, sstrerror (errno, errbuf, sizeof (errbuf))); } while (0)
 
-#define SERVER_SOCKET  LOCALSTATEDIR"/run/pdns.controlsocket"
+#define SERVER_SOCKET  "/var/run/pdns.controlsocket"
 #define SERVER_COMMAND "SHOW *"
 
-#define RECURSOR_SOCKET  LOCALSTATEDIR"/run/pdns_recursor.controlsocket"
+#define RECURSOR_SOCKET  "/var/run/pdns_recursor.controlsocket"
 #define RECURSOR_COMMAND "get noerror-answers nxdomain-answers " \
   "servfail-answers sys-msec user-msec qa-latency cache-entries cache-hits " \
   "cache-misses questions"
 
 struct list_item_s;
 typedef struct list_item_s list_item_t;
@@ -317,17 +317,18 @@
 
   vl.values = values;
   vl.values_len = 1;
   vl.time = time (NULL);
   sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   sstrncpy (vl.plugin, "powerdns", sizeof (vl.plugin));
+  sstrncpy (vl.type, type, sizeof (vl.type));
   if (type_instance != NULL)
     sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
   sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
 
-  plugin_dispatch_values (type, &vl);
+  plugin_dispatch_values (&vl);
 } /* }}} static void submit */
 
 static int powerdns_get_data_dgram (list_item_t *item, /* {{{ */
     char **ret_buffer,
     size_t *ret_buffer_size)
 {
@@ -346,16 +347,15 @@
     FUNC_ERROR ("socket");
     return (-1);
   }
 
   memset (&sa_unix, 0, sizeof (sa_unix));
   sa_unix.sun_family = AF_UNIX;
-  strncpy (sa_unix.sun_path,
+  sstrncpy (sa_unix.sun_path,
       (local_sockpath != NULL) ? local_sockpath : PDNS_LOCAL_SOCKPATH,
       sizeof (sa_unix.sun_path));
-  sa_unix.sun_path[sizeof (sa_unix.sun_path) - 1] = 0;
 
   status = unlink (sa_unix.sun_path);
   if ((status != 0) && (errno != ENOENT))
   {
     FUNC_ERROR ("unlink");
     close (sd);
@@ -857,13 +857,14 @@
       ERROR ("powerdns plugin: socket_temp == NULL.");
       status = -1;
       break;
     }
 
     item->sockaddr.sun_family = AF_UNIX;
-    sstrncpy (item->sockaddr.sun_path, socket_temp, UNIX_PATH_MAX);
+    sstrncpy (item->sockaddr.sun_path, socket_temp,
+      sizeof (item->sockaddr.sun_path));
 
     e = llentry_create (item->instance, item);
     if (e == NULL)
     {
       ERROR ("powerdns plugin: llentry_create failed.");
       status = -1;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/processes.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/processes.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/processes.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/processes.c	2008-09-04 21:01:22.000000000 +0800
@@ -1,10 +1,11 @@
 /**
  * collectd - src/processes.c
  * Copyright (C) 2005  Lyonel Vincent
- * Copyright (C) 2006-2007  Florian Forster (Mach code)
+ * Copyright (C) 2006-2008  Florian Forster (Mach code)
+ * Copyright (C) 2008  Oleg King
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; either version 2 of the License, or (at your
  * option) any later version.
  *
@@ -17,12 +18,13 @@
  * with this program; if not, write to the Free Software Foundation, Inc.,
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Authors:
  *   Lyonel Vincent <lyonel at ezix.org>
  *   Florian octo Forster <octo at verplant.org>
+ *   Oleg King <king2 at kaluga.ru>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 #include "configfile.h"
@@ -79,24 +81,38 @@
 #  endif
 #  ifndef CONFIG_HZ
 #    define CONFIG_HZ 100
 #  endif
 /* #endif KERNEL_LINUX */
 
+#elif HAVE_LIBKVM_GETPROCS
+#  include <kvm.h>
+#  include <sys/user.h>
+#  include <sys/proc.h>
+#  if HAVE_SYS_SYSCTL_H
+#    include <sys/sysctl.h>
+#  endif
+/* #endif HAVE_LIBKVM_GETPROCS */
+
 #else
 # error "No applicable input method."
 #endif
 
+#if HAVE_REGEX_H
+# include <regex.h>
+#endif
+
 #define BUFSIZE 256
 
 static const char *config_keys[] =
 {
 	"Process",
+	"ProcessMatch",
 	NULL
 };
-static int config_keys_num = 1;
+static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
 typedef struct procstat_entry_s
 {
 	unsigned long id;
 	unsigned long age;
 
@@ -118,12 +134,15 @@
 } procstat_entry_t;
 
 #define PROCSTAT_NAME_LEN 256
 typedef struct procstat
 {
 	char          name[PROCSTAT_NAME_LEN];
+#if HAVE_REGEX_H
+	regex_t *re;
+#endif
 
 	unsigned long num_proc;
 	unsigned long num_lwp;
 	unsigned long vmem_rss;
 
 	unsigned long vmem_minflt_counter;
@@ -145,166 +164,245 @@
 static processor_set_name_array_t pset_list;
 static mach_msg_type_number_t     pset_list_len;
 /* #endif HAVE_THREAD_INFO */
 
 #elif KERNEL_LINUX
 static long pagesize_g;
-#endif /* KERNEL_LINUX */
+/* #endif KERNEL_LINUX */
 
-static void ps_list_register (const char *name)
+#elif HAVE_LIBKVM_GETPROCS
+/* no global variables */
+#endif /* HAVE_LIBKVM_GETPROCS */
+
+/* put name of process from config to list_head_g tree
+   list_head_g is a list of 'procstat_t' structs with
+   processes names we want to watch */
+static void ps_list_register (const char *name, const char *regexp)
 {
 	procstat_t *new;
 	procstat_t *ptr;
+	int status;
 
-	if ((new = (procstat_t *) malloc (sizeof (procstat_t))) == NULL)
+	new = (procstat_t *) malloc (sizeof (procstat_t));
+	if (new == NULL)
+	{
+		ERROR ("processes plugin: ps_list_register: malloc failed.");
 		return;
+	}
 	memset (new, 0, sizeof (procstat_t));
-	strncpy (new->name, name, PROCSTAT_NAME_LEN);
+	sstrncpy (new->name, name, sizeof (new->name));
 
+#if HAVE_REGEX_H
+	if (regexp != NULL)
+	{
+		DEBUG ("ProcessMatch: adding \"%s\" as criteria to process %s.", regexp, name);
+		new->re = (regex_t *) malloc (sizeof (regex_t));
+		if (new->re == NULL)
+		{
+			ERROR ("processes plugin: ps_list_register: malloc failed.");
+			sfree (new);
+			return;
+		}
+
+		status = regcomp (new->re, regexp, REG_EXTENDED | REG_NOSUB);
+		if (status != 0)
+		{
+			DEBUG ("ProcessMatch: compiling the regular expression \"%s\" failed.", regexp);
+			sfree(new->re);
+			return;
+		}
+	}
+#else
+	if (regexp != NULL)
+	{
+		ERROR ("processes plugin: ps_list_register: "
+				"Regular expression \"%s\" found in config "
+				"file, but support for regular expressions "
+				"has been dispabled at compile time.",
+				regexp);
+		sfree (new);
+		return;
+	}
+#endif
+	
 	for (ptr = list_head_g; ptr != NULL; ptr = ptr->next)
 	{
 		if (strcmp (ptr->name, name) == 0)
+		{
+			WARNING ("processes plugin: You have configured more "
+					"than one `Process' or "
+					"`ProcessMatch' with the same name. "
+					"All but the first setting will be "
+					"ignored.");
+			sfree (new->re);
+			sfree (new);
 			return;
+		}
+
 		if (ptr->next == NULL)
 			break;
 	}
 
 	if (ptr == NULL)
 		list_head_g = new;
 	else
 		ptr->next = new;
-}
+} /* void ps_list_register */
 
-static procstat_t *ps_list_search (const char *name)
+/* try to match name against entry, returns 1 if success */
+static int ps_list_match (const char *name, const char *cmdline, procstat_t *ps)
 {
-	procstat_t *ptr;
+#if HAVE_REGEX_H
+	if (ps->re != NULL)
+	{
+		int status;
+		const char *str;
 
-	for (ptr = list_head_g; ptr != NULL; ptr = ptr->next)
-		if (strcmp (ptr->name, name) == 0)
-			break;
+		str = cmdline;
+		if ((str == NULL) || (str[0] == 0))
+			str = name;
+
+		assert (str != NULL);
+
+		status = regexec (ps->re, str,
+				/* nmatch = */ 0,
+				/* pmatch = */ NULL,
+				/* eflags = */ 0);
+		if (status == 0)
+			return (1);
+	}
+	else
+#endif
+	if (strcmp (ps->name, name) == 0)
+		return (1);
 
-	return (ptr);
-}
+	return (0);
+} /* int ps_list_match */
 
-static void ps_list_add (const char *name, procstat_entry_t *entry)
+/* add process entry to 'instances' of process 'name' (or refresh it) */
+static void ps_list_add (const char *name, const char *cmdline, procstat_entry_t *entry)
 {
 	procstat_t *ps;
 	procstat_entry_t *pse;
 
 	if (entry->id == 0)
 		return;
 
-	if ((ps = ps_list_search (name)) == NULL)
-		return;
-
-	for (pse = ps->instances; pse != NULL; pse = pse->next)
-		if ((pse->id == entry->id) || (pse->next == NULL))
-			break;
-
-	if ((pse == NULL) || (pse->id != entry->id))
+	for (ps = list_head_g; ps != NULL; ps = ps->next)
 	{
-		procstat_entry_t *new;
-
-		new = (procstat_entry_t *) malloc (sizeof (procstat_entry_t));
-		if (new == NULL)
-			return;
-		memset (new, 0, sizeof (procstat_entry_t));
-		new->id = entry->id;
-
-		if (pse == NULL)
-			ps->instances = new;
-		else
-			pse->next = new;
+		if ((ps_list_match (name, cmdline, ps)) == 0)
+			continue;
 
-		pse = new;
-	}
+		for (pse = ps->instances; pse != NULL; pse = pse->next)
+			if ((pse->id == entry->id) || (pse->next == NULL))
+				break;
 
-	pse->age = 0;
-	pse->num_proc = entry->num_proc;
-	pse->num_lwp  = entry->num_lwp;
-	pse->vmem_rss = entry->vmem_rss;
+		if ((pse == NULL) || (pse->id != entry->id))
+		{
+			procstat_entry_t *new;
+			
+			new = (procstat_entry_t *) malloc (sizeof (procstat_entry_t));
+			if (new == NULL)
+				return;
+			memset (new, 0, sizeof (procstat_entry_t));
+			new->id = entry->id;
+			
+			if (pse == NULL)
+				ps->instances = new;
+			else
+				pse->next = new;
 
-	ps->num_proc += pse->num_proc;
-	ps->num_lwp  += pse->num_lwp;
-	ps->vmem_rss += pse->vmem_rss;
+			pse = new;
+		}
 
-	if ((entry->vmem_minflt_counter == 0)
-			&& (entry->vmem_majflt_counter == 0))
-	{
-		pse->vmem_minflt_counter += entry->vmem_minflt;
-		pse->vmem_minflt = entry->vmem_minflt;
+		pse->age = 0;
+		pse->num_proc = entry->num_proc;
+		pse->num_lwp  = entry->num_lwp;
+		pse->vmem_rss = entry->vmem_rss;
+
+		ps->num_proc += pse->num_proc;
+		ps->num_lwp  += pse->num_lwp;
+		ps->vmem_rss += pse->vmem_rss;
 
-		pse->vmem_majflt_counter += entry->vmem_majflt;
-		pse->vmem_majflt = entry->vmem_majflt;
-	}
-	else
-	{
-		if (entry->vmem_minflt_counter < pse->vmem_minflt_counter)
+		if ((entry->vmem_minflt_counter == 0)
+				&& (entry->vmem_majflt_counter == 0))
 		{
-			pse->vmem_minflt = entry->vmem_minflt_counter
-				+ (ULONG_MAX - pse->vmem_minflt_counter);
-		}
-		else
-		{
-			pse->vmem_minflt = entry->vmem_minflt_counter - pse->vmem_minflt_counter;
-		}
-		pse->vmem_minflt_counter = entry->vmem_minflt_counter;
+			pse->vmem_minflt_counter += entry->vmem_minflt;
+			pse->vmem_minflt = entry->vmem_minflt;
 
-		if (entry->vmem_majflt_counter < pse->vmem_majflt_counter)
-		{
-			pse->vmem_majflt = entry->vmem_majflt_counter
-				+ (ULONG_MAX - pse->vmem_majflt_counter);
+			pse->vmem_majflt_counter += entry->vmem_majflt;
+			pse->vmem_majflt = entry->vmem_majflt;
 		}
 		else
 		{
-			pse->vmem_majflt = entry->vmem_majflt_counter - pse->vmem_majflt_counter;
+			if (entry->vmem_minflt_counter < pse->vmem_minflt_counter)
+			{
+				pse->vmem_minflt = entry->vmem_minflt_counter
+					+ (ULONG_MAX - pse->vmem_minflt_counter);
+			}
+			else
+			{
+				pse->vmem_minflt = entry->vmem_minflt_counter - pse->vmem_minflt_counter;
+			}
+			pse->vmem_minflt_counter = entry->vmem_minflt_counter;
+			
+			if (entry->vmem_majflt_counter < pse->vmem_majflt_counter)
+			{
+				pse->vmem_majflt = entry->vmem_majflt_counter
+					+ (ULONG_MAX - pse->vmem_majflt_counter);
+			}
+			else
+			{
+				pse->vmem_majflt = entry->vmem_majflt_counter - pse->vmem_majflt_counter;
+			}
+			pse->vmem_majflt_counter = entry->vmem_majflt_counter;
 		}
-		pse->vmem_majflt_counter = entry->vmem_majflt_counter;
-	}
 
-	ps->vmem_minflt_counter += pse->vmem_minflt;
-	ps->vmem_majflt_counter += pse->vmem_majflt;
+		ps->vmem_minflt_counter += pse->vmem_minflt;
+		ps->vmem_majflt_counter += pse->vmem_majflt;
 
-	if ((entry->cpu_user_counter == 0)
-			&& (entry->cpu_system_counter == 0))
-	{
-		pse->cpu_user_counter += entry->cpu_user;
-		pse->cpu_user = entry->cpu_user;
-
-		pse->cpu_system_counter += entry->cpu_system;
-		pse->cpu_system = entry->cpu_system;
-	}
-	else
-	{
-		if (entry->cpu_user_counter < pse->cpu_user_counter)
+		if ((entry->cpu_user_counter == 0)
+				&& (entry->cpu_system_counter == 0))
 		{
-			pse->cpu_user = entry->cpu_user_counter
-				+ (ULONG_MAX - pse->cpu_user_counter);
-		}
-		else
-		{
-			pse->cpu_user = entry->cpu_user_counter - pse->cpu_user_counter;
-		}
-		pse->cpu_user_counter = entry->cpu_user_counter;
+			pse->cpu_user_counter += entry->cpu_user;
+			pse->cpu_user = entry->cpu_user;
 
-		if (entry->cpu_system_counter < pse->cpu_system_counter)
-		{
-			pse->cpu_system = entry->cpu_system_counter
-				+ (ULONG_MAX - pse->cpu_system_counter);
+			pse->cpu_system_counter += entry->cpu_system;
+			pse->cpu_system = entry->cpu_system;
 		}
 		else
 		{
-			pse->cpu_system = entry->cpu_system_counter - pse->cpu_system_counter;
+			if (entry->cpu_user_counter < pse->cpu_user_counter)
+			{
+				pse->cpu_user = entry->cpu_user_counter
+					+ (ULONG_MAX - pse->cpu_user_counter);
+			}
+			else
+			{
+				pse->cpu_user = entry->cpu_user_counter - pse->cpu_user_counter;
+			}
+			pse->cpu_user_counter = entry->cpu_user_counter;
+			
+			if (entry->cpu_system_counter < pse->cpu_system_counter)
+			{
+				pse->cpu_system = entry->cpu_system_counter
+					+ (ULONG_MAX - pse->cpu_system_counter);
+			}
+			else
+			{
+				pse->cpu_system = entry->cpu_system_counter - pse->cpu_system_counter;
+			}
+			pse->cpu_system_counter = entry->cpu_system_counter;
 		}
-		pse->cpu_system_counter = entry->cpu_system_counter;
-	}
 
-	ps->cpu_user_counter   += pse->cpu_user;
-	ps->cpu_system_counter += pse->cpu_system;
+		ps->cpu_user_counter   += pse->cpu_user;
+		ps->cpu_system_counter += pse->cpu_system;
+	}
 }
 
+/* remove old entries from instances of processes in list_head_g */
 static void ps_list_reset (void)
 {
 	procstat_t *ps;
 	procstat_entry_t *pse;
 	procstat_entry_t *pse_prev;
 
@@ -344,17 +442,37 @@
 				pse = pse->next;
 			}
 		} /* while (pse != NULL) */
 	} /* for (ps = list_head_g; ps != NULL; ps = ps->next) */
 }
 
+/* put all pre-defined 'Process' names from config to list_head_g tree */
 static int ps_config (const char *key, const char *value)
 {
 	if (strcasecmp (key, "Process") == 0)
 	{
-		ps_list_register (value);
+		ps_list_register (value, NULL);
+	}
+	else if (strcasecmp (key, "ProcessMatch") == 0)
+	{
+		char *new_val;
+		char *fields[3];
+		int fields_num;
+
+		new_val = strdup (value);
+		if (new_val == NULL)
+			return (1);
+		fields_num = strsplit (new_val, fields,
+				STATIC_ARRAY_SIZE (fields));
+		if (fields_num != 2)
+		{
+			sfree (new_val);
+			return (1);
+		}
+		ps_list_register (fields[0], fields[1]);
+		sfree (new_val);
 	}
 	else
 	{
 		return (-1);
 	}
 
@@ -391,17 +509,22 @@
 /* #endif HAVE_THREAD_INFO */
 
 #elif KERNEL_LINUX
 	pagesize_g = sysconf(_SC_PAGESIZE);
 	DEBUG ("pagesize_g = %li; CONFIG_HZ = %i;",
 			pagesize_g, CONFIG_HZ);
-#endif /* KERNEL_LINUX */
+/* #endif KERNEL_LINUX */
+
+#elif HAVE_LIBKVM_GETPROCS
+/* no initialization */
+#endif /* HAVE_LIBKVM_GETPROCS */
 
 	return (0);
 } /* int ps_init */
 
+/* submit global state (e.g.: qty of zombies, running, etc..) */
 static void ps_submit_state (const char *state, double value)
 {
 	value_t values[1];
 	value_list_t vl = VALUE_LIST_INIT;
 
 	values[0].gauge = value;
@@ -409,69 +532,75 @@
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "processes", sizeof (vl.plugin));
 	sstrncpy (vl.plugin_instance, "", sizeof (vl.plugin_instance));
-	strncpy (vl.type_instance, state, sizeof (vl.type_instance));
+	sstrncpy (vl.type, "ps_state", sizeof (vl.type));
+	sstrncpy (vl.type_instance, state, sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("ps_state", &vl);
+	plugin_dispatch_values (&vl);
 }
 
+/* submit info about specific process (e.g.: memory taken, cpu usage, etc..) */
 static void ps_submit_proc_list (procstat_t *ps)
 {
 	value_t values[2];
 	value_list_t vl = VALUE_LIST_INIT;
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "processes", sizeof (vl.plugin));
-	strncpy (vl.plugin_instance, ps->name, sizeof (vl.plugin_instance));
+	sstrncpy (vl.plugin_instance, ps->name, sizeof (vl.plugin_instance));
 
+	sstrncpy (vl.type, "ps_rss", sizeof (vl.type));
 	vl.values[0].gauge = ps->vmem_rss;
 	vl.values_len = 1;
-	plugin_dispatch_values ("ps_rss", &vl);
+	plugin_dispatch_values (&vl);
 
+	sstrncpy (vl.type, "ps_cputime", sizeof (vl.type));
 	vl.values[0].counter = ps->cpu_user_counter;
 	vl.values[1].counter = ps->cpu_system_counter;
 	vl.values_len = 2;
-	plugin_dispatch_values ("ps_cputime", &vl);
+	plugin_dispatch_values (&vl);
 
+	sstrncpy (vl.type, "ps_count", sizeof (vl.type));
 	vl.values[0].gauge = ps->num_proc;
 	vl.values[1].gauge = ps->num_lwp;
 	vl.values_len = 2;
-	plugin_dispatch_values ("ps_count", &vl);
+	plugin_dispatch_values (&vl);
 
+	sstrncpy (vl.type, "ps_pagefaults", sizeof (vl.type));
 	vl.values[0].counter = ps->vmem_minflt_counter;
 	vl.values[1].counter = ps->vmem_majflt_counter;
 	vl.values_len = 2;
-	plugin_dispatch_values ("ps_pagefaults", &vl);
+	plugin_dispatch_values (&vl);
 
 	DEBUG ("name = %s; num_proc = %lu; num_lwp = %lu; vmem_rss = %lu; "
 			"vmem_minflt_counter = %lu; vmem_majflt_counter = %lu; "
 			"cpu_user_counter = %lu; cpu_system_counter = %lu;",
 			ps->name, ps->num_proc, ps->num_lwp, ps->vmem_rss,
 			ps->vmem_minflt_counter, ps->vmem_majflt_counter,
 		       	ps->cpu_user_counter, ps->cpu_system_counter);
 } /* void ps_submit_proc_list */
 
+/* ------- additional functions for KERNEL_LINUX/HAVE_THREAD_INFO ------- */
 #if KERNEL_LINUX
 static int *ps_read_tasks (int pid)
 {
 	int *list = NULL;
 	int  list_size = 1; /* size of allocated space, in elements */
 	int  list_len = 0;  /* number of currently used elements */
 
 	char           dirname[64];
 	DIR           *dh;
 	struct dirent *ent;
 
-	snprintf (dirname, 64, "/proc/%i/task", pid);
-	dirname[63] = '\0';
+	ssnprintf (dirname, sizeof (dirname), "/proc/%i/task", pid);
 
 	if ((dh = opendir (dirname)) == NULL)
 	{
 		DEBUG ("Failed to open directory `%s'", dirname);
 		return (NULL);
 	}
@@ -520,13 +649,12 @@
 } /* int *ps_read_tasks */
 
 int ps_read_process (int pid, procstat_t *ps, char *state)
 {
 	char  filename[64];
 	char  buffer[1024];
-	FILE *fh;
 
 	char *fields[64];
 	char  fields_len;
 
 	int  *tasks;
 	int   i;
@@ -537,25 +665,18 @@
 	long long unsigned cpu_user_counter;
 	long long unsigned cpu_system_counter;
 	long long unsigned vmem_rss;
 
 	memset (ps, 0, sizeof (procstat_t));
 
-	snprintf (filename, 64, "/proc/%i/stat", pid);
-	filename[63] = '\0';
+	ssnprintf (filename, sizeof (filename), "/proc/%i/stat", pid);
 
-	if ((fh = fopen (filename, "r")) == NULL)
+	i = read_file_contents (filename, buffer, sizeof(buffer) - 1);
+	if (i <= 0)
 		return (-1);
-
-	if (fgets (buffer, 1024, fh) == NULL)
-	{
-		fclose (fh);
-		return (-1);
-	}
-
-	fclose (fh);
+	buffer[i] = 0;
 
 	fields_len = strsplit (buffer, fields, 64);
 	if (fields_len < 24)
 	{
 		DEBUG ("processes plugin: ps_read_process (pid = %i):"
 				" `%s' has only %i fields..",
@@ -660,13 +781,15 @@
 	 * `top' does it, because it is a lot of work and only used when
 	 * debugging. -octo */
 
 	return (0);
 }
 #endif /* HAVE_THREAD_INFO */
+/* ------- end of additional functions for KERNEL_LINUX/HAVE_THREAD_INFO ------- */
 
+/* do actual readings from kernel */
 static int ps_read (void)
 {
 #if HAVE_THREAD_INFO
 	kern_return_t            status;
 
 	int                      pset;
@@ -728,13 +851,19 @@
 		for (task = 0; task < task_list_len; task++)
 		{
 			ps = NULL;
 			if (mach_get_task_name (task_list[task],
 						&task_pid,
 						task_name, PROCSTAT_NAME_LEN) == 0)
-				ps = ps_list_search (task_name);
+			{
+				/* search for at least one match */
+				for (ps = list_head_g; ps != NULL; ps = ps->next)
+					/* FIXME: cmdline should be here instead of NULL */
+					if (ps_list_match (task_name, NULL, ps) == 1)
+						break;
+			}
 
 			/* Collect more detailed statistics for this process */
 			if (ps != NULL)
 			{
 				task_basic_info_data_t        task_basic_info;
 				mach_msg_type_number_t        task_basic_info_len;
@@ -886,13 +1015,14 @@
 				if (status != KERN_SUCCESS)
 					ERROR ("mach_port_deallocate failed: %s",
 							mach_error_string (status));
 			}
 
 			if (ps != NULL)
-				ps_list_add (task_name, &pse);
+				/* FIXME: cmdline should be here instead of NULL */
+				ps_list_add (task_name, NULL, &pse);
 		} /* for (task_list) */
 
 		if ((status = vm_deallocate (port_task_self,
 				(vm_address_t) task_list,
 				task_list_len * sizeof (task_t))) != KERN_SUCCESS)
 		{
@@ -989,13 +1119,14 @@
 			case 'D': blocked++;  break;
 			case 'Z': zombies++;  break;
 			case 'T': stopped++;  break;
 			case 'W': paging++;   break;
 		}
 
-		ps_list_add (ps.name, &pse);
+		/* FIXME: cmdline should be here instead of NULL */
+		ps_list_add (ps.name, NULL, &pse);
 	}
 
 	closedir (proc);
 
 	ps_submit_state ("running",  running);
 	ps_submit_state ("sleeping", sleeping);
@@ -1003,13 +1134,135 @@
 	ps_submit_state ("stopped",  stopped);
 	ps_submit_state ("paging",   paging);
 	ps_submit_state ("blocked",  blocked);
 
 	for (ps_ptr = list_head_g; ps_ptr != NULL; ps_ptr = ps_ptr->next)
 		ps_submit_proc_list (ps_ptr);
-#endif /* KERNEL_LINUX */
+/* #endif KERNEL_LINUX */
+
+#elif HAVE_LIBKVM_GETPROCS
+	int running  = 0;
+	int sleeping = 0;
+	int zombies  = 0;
+	int stopped  = 0;
+	int blocked  = 0;
+	int idle     = 0;
+	int wait     = 0;
+
+	kvm_t *kd;
+	char errbuf[1024];
+	char cmdline[ARG_MAX];
+	char *cmdline_ptr;
+  	struct kinfo_proc *procs;          /* array of processes */
+  	char **argv;
+  	int count;                         /* returns number of processes */
+	int i;
+
+	procstat_t *ps_ptr;
+	procstat_entry_t pse;
+
+	ps_list_reset ();
+
+	/* Open the kvm interface, get a descriptor */
+	kd = kvm_open (NULL, NULL, NULL, 0, errbuf);
+	if (kd == NULL)
+	{
+		ERROR ("processes plugin: Cannot open kvm interface: %s",
+				errbuf);
+		return (0);
+	}
+
+	/* Get the list of processes. */
+	procs = kvm_getprocs(kd, KERN_PROC_ALL, 0, &count);
+	if (procs == NULL)
+	{
+		kvm_close (kd);
+		ERROR ("processes plugin: Cannot get kvm processes list: %s",
+				kvm_geterr(kd));
+		return (0);
+	}
+
+	/* Iterate through the processes in kinfo_proc */
+	for (i = 0; i < count; i++)
+	{
+		/* retrieve the arguments */
+		cmdline[0] = 0;
+		cmdline_ptr = NULL;
+
+		argv = kvm_getargv (kd, (const struct kinfo_proc *) &(procs[i]), 0);
+		if (argv != NULL)
+		{
+			int status;
+			int argc;
+
+			argc = 0;
+			while (argv[argc] != NULL)
+				argc++;
+
+			status = strjoin (cmdline, sizeof (cmdline),
+					argv, argc, " ");
+
+			if (status < 0)
+			{
+				WARNING ("processes plugin: Command line did "
+						"not fit into buffer.");
+			}
+			else
+			{
+				cmdline_ptr = &cmdline[0];
+			}
+		}
+
+		pse.id       = procs[i].ki_pid;
+		pse.age      = 0;
+
+		pse.num_proc = 1;
+		pse.num_lwp  = procs[i].ki_numthreads;
+
+		pse.vmem_rss = procs[i].ki_rssize * getpagesize();
+		pse.vmem_minflt = 0;
+		pse.vmem_minflt_counter = procs[i].ki_rusage.ru_minflt;
+		pse.vmem_majflt = 0;
+		pse.vmem_majflt_counter = procs[i].ki_rusage.ru_majflt;
+
+		pse.cpu_user = 0;
+		pse.cpu_user_counter = procs[i].ki_rusage.ru_utime.tv_sec
+			* 1000
+			+ procs[i].ki_rusage.ru_utime.tv_usec;
+		pse.cpu_system = 0;
+		pse.cpu_system_counter = procs[i].ki_rusage.ru_stime.tv_sec
+			* 1000
+			+ procs[i].ki_rusage.ru_stime.tv_usec;
+
+		switch (procs[i].ki_stat)
+		{
+			case SSTOP: 	stopped++;	break;
+			case SSLEEP:	sleeping++;	break;
+			case SRUN:	running++;	break;
+			case SIDL:	idle++;		break;
+			case SWAIT:	wait++;		break;
+			case SLOCK:	blocked++;	break;
+			case SZOMB:	zombies++;	break;
+		}
+
+		ps_list_add (procs[i].ki_comm, cmdline_ptr, &pse);
+	}
+
+	kvm_close(kd);
+
+	ps_submit_state ("running",  running);
+	ps_submit_state ("sleeping", sleeping);
+	ps_submit_state ("zombies",  zombies);
+	ps_submit_state ("stopped",  stopped);
+	ps_submit_state ("blocked",  blocked);
+	ps_submit_state ("idle",     idle);
+	ps_submit_state ("wait",     wait);
+
+	for (ps_ptr = list_head_g; ps_ptr != NULL; ps_ptr = ps_ptr->next)
+		ps_submit_proc_list (ps_ptr);
+#endif /* HAVE_LIBKVM_GETPROCS */
 
 	return (0);
 } /* int ps_read */
 
 void module_register (void)
 {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/rrdtool.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/rrdtool.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/rrdtool.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/rrdtool.c	2008-09-04 21:01:14.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/rrdtool.c
- * Copyright (C) 2006,2007  Florian octo Forster
+ * Copyright (C) 2006-2008  Florian octo Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -39,17 +39,25 @@
 	char **values;
 	time_t first_value;
 	time_t last_value;
 	enum
 	{
 		FLAG_NONE   = 0x00,
-		FLAG_QUEUED = 0x01
+		FLAG_QUEUED = 0x01,
+		FLAG_FLUSHQ = 0x02
 	} flags;
 };
 typedef struct rrd_cache_s rrd_cache_t;
 
+enum rrd_queue_dir_e
+{
+  QUEUE_INSERT_FRONT,
+  QUEUE_INSERT_BACK
+};
+typedef enum rrd_queue_dir_e rrd_queue_dir_t;
+
 struct rrd_queue_s
 {
 	char *filename;
 	struct rrd_queue_s *next;
 };
 typedef struct rrd_queue_s rrd_queue_t;
@@ -84,35 +92,39 @@
 	"CacheFlush",
 	"DataDir",
 	"StepSize",
 	"HeartBeat",
 	"RRARows",
 	"RRATimespan",
-	"XFF"
+	"XFF",
+	"WritesPerSecond"
 };
 static int config_keys_num = STATIC_ARRAY_SIZE (config_keys);
 
 /* If datadir is zero, the daemon's basedir is used. If stepsize or heartbeat
  * is zero a default, depending on the `interval' member of the value list is
  * being used. */
 static char   *datadir   = NULL;
 static int     stepsize  = 0;
 static int     heartbeat = 0;
 static int     rrarows   = 1200;
 static double  xff       = 0.1;
+static double  write_rate = 0.0;
 
 /* XXX: If you need to lock both, cache_lock and queue_lock, at the same time,
  * ALWAYS lock `cache_lock' first! */
 static int         cache_timeout = 0;
 static int         cache_flush_timeout = 0;
 static time_t      cache_flush_last;
 static c_avl_tree_t *cache = NULL;
 static pthread_mutex_t cache_lock = PTHREAD_MUTEX_INITIALIZER;
 
 static rrd_queue_t    *queue_head = NULL;
 static rrd_queue_t    *queue_tail = NULL;
+static rrd_queue_t    *flushq_head = NULL;
+static rrd_queue_t    *flushq_tail = NULL;
 static pthread_t       queue_thread = 0;
 static pthread_mutex_t queue_lock = PTHREAD_MUTEX_INITIALIZER;
 static pthread_cond_t  queue_cond = PTHREAD_COND_INITIALIZER;
 
 #if !HAVE_THREADSAFE_LIBRRD
 static pthread_mutex_t librrd_lock = PTHREAD_MUTEX_INITIALIZER;
@@ -208,13 +220,13 @@
 
 		for (j = 0; j < rra_types_num; j++)
 		{
 			if (rra_num >= rra_max)
 				break;
 
-			if (snprintf (buffer, sizeof (buffer), "RRA:%s:%3.1f:%u:%u",
+			if (ssnprintf (buffer, sizeof (buffer), "RRA:%s:%3.1f:%u:%u",
 						rra_types[j], xff,
 						cdp_len, cdp_num) >= sizeof (buffer))
 			{
 				ERROR ("rra_get: Buffer would have been truncated.");
 				continue;
 			}
@@ -285,28 +297,22 @@
 
 		if (isnan (d->min))
 		{
 			sstrncpy (min, "U", sizeof (min));
 		}
 		else
-		{
-			snprintf (min, sizeof (min), "%lf", d->min);
-			min[sizeof (min) - 1] = '\0';
-		}
+			ssnprintf (min, sizeof (min), "%lf", d->min);
 
 		if (isnan (d->max))
 		{
 			sstrncpy (max, "U", sizeof (max));
 		}
 		else
-		{
-			snprintf (max, sizeof (max), "%lf", d->max);
-			max[sizeof (max) - 1] = '\0';
-		}
+			ssnprintf (max, sizeof (max), "%lf", d->max);
 
-		status = snprintf (buffer, sizeof (buffer),
+		status = ssnprintf (buffer, sizeof (buffer),
 				"DS:%s:%s:%i:%s:%s",
 				d->name, type,
 				(heartbeat > 0) ? heartbeat : (2 * vl->interval),
 				min, max);
 		if ((status < 1) || (status >= sizeof (buffer)))
 			break;
@@ -332,13 +338,13 @@
 	*ret = ds_def;
 	return (ds_num);
 }
 
 #if HAVE_THREADSAFE_LIBRRD
 static int srrd_create (char *filename, unsigned long pdp_step, time_t last_up,
-		int argc, char **argv)
+		int argc, const char **argv)
 {
 	int status;
 
 	optind = 0; /* bug in librrd? */
 	rrd_clear_error ();
 
@@ -350,13 +356,14 @@
 				filename, rrd_get_error ());
 	}
 
 	return (status);
 } /* int srrd_create */
 
-static int srrd_update (char *filename, char *template, int argc, char **argv)
+static int srrd_update (char *filename, char *template,
+		int argc, const char **argv)
 {
 	int status;
 
 	optind = 0; /* bug in librrd? */
 	rrd_clear_error ();
 
@@ -371,13 +378,13 @@
 	return (status);
 } /* int srrd_update */
 /* #endif HAVE_THREADSAFE_LIBRRD */
 
 #else /* !HAVE_THREADSAFE_LIBRRD */
 static int srrd_create (char *filename, unsigned long pdp_step, time_t last_up,
-		int argc, char **argv)
+		int argc, const char **argv)
 {
 	int status;
 
 	int new_argc;
 	char **new_argv;
 
@@ -392,16 +399,14 @@
 		return (-1);
 	}
 
 	if (last_up == 0)
 		last_up = time (NULL) - 10;
 
-	snprintf (pdp_step_str, sizeof (pdp_step_str), "%lu", pdp_step);
-	pdp_step_str[sizeof (pdp_step_str) - 1] = '\0';
-	snprintf (last_up_str, sizeof (last_up_str), "%u", (unsigned int) last_up);
-	last_up_str[sizeof (last_up_str) - 1] = '\0';
+	ssnprintf (pdp_step_str, sizeof (pdp_step_str), "%lu", pdp_step);
+	ssnprintf (last_up_str, sizeof (last_up_str), "%u", (unsigned int) last_up);
 
 	new_argv[0] = "create";
 	new_argv[1] = filename;
 	new_argv[2] = "-s";
 	new_argv[3] = pdp_step_str;
 	new_argv[4] = "-b";
@@ -425,13 +430,14 @@
 
 	sfree (new_argv);
 
 	return (status);
 } /* int srrd_create */
 
-static int srrd_update (char *filename, char *template, int argc, char **argv)
+static int srrd_update (char *filename, char *template,
+		int argc, const char **argv)
 {
 	int status;
 
 	int new_argc;
 	char **new_argv;
 
@@ -510,13 +516,13 @@
 	argv[ds_num + rra_num] = NULL;
 
 	assert (vl->time > 10);
 	status = srrd_create (filename,
 			(stepsize > 0) ? stepsize : vl->interval,
 			vl->time - 10,
-			argc, argv);
+			argc, (const char **)argv);
 
 	free (argv);
 	ds_free (ds_num, ds_def);
 	rra_free (rra_num, rra_def);
 
 	return (status);
@@ -528,28 +534,28 @@
 	int offset;
 	int status;
 	int i;
 
 	memset (buffer, '\0', buffer_len);
 
-	status = snprintf (buffer, buffer_len, "%u", (unsigned int) vl->time);
+	status = ssnprintf (buffer, buffer_len, "%u", (unsigned int) vl->time);
 	if ((status < 1) || (status >= buffer_len))
 		return (-1);
 	offset = status;
 
 	for (i = 0; i < ds->ds_num; i++)
 	{
 		if ((ds->ds[i].type != DS_TYPE_COUNTER)
 				&& (ds->ds[i].type != DS_TYPE_GAUGE))
 			return (-1);
 
 		if (ds->ds[i].type == DS_TYPE_COUNTER)
-			status = snprintf (buffer + offset, buffer_len - offset,
+			status = ssnprintf (buffer + offset, buffer_len - offset,
 					":%llu", vl->values[i].counter);
 		else
-			status = snprintf (buffer + offset, buffer_len - offset,
+			status = ssnprintf (buffer + offset, buffer_len - offset,
 					":%lf", vl->values[i].gauge);
 
 		if ((status < 1) || (status >= (buffer_len - offset)))
 			return (-1);
 
 		offset += status;
@@ -563,79 +569,136 @@
 {
 	int offset = 0;
 	int status;
 
 	if (datadir != NULL)
 	{
-		status = snprintf (buffer + offset, buffer_len - offset,
+		status = ssnprintf (buffer + offset, buffer_len - offset,
 				"%s/", datadir);
 		if ((status < 1) || (status >= buffer_len - offset))
 			return (-1);
 		offset += status;
 	}
 
-	status = snprintf (buffer + offset, buffer_len - offset,
+	status = ssnprintf (buffer + offset, buffer_len - offset,
 			"%s/", vl->host);
 	if ((status < 1) || (status >= buffer_len - offset))
 		return (-1);
 	offset += status;
 
 	if (strlen (vl->plugin_instance) > 0)
-		status = snprintf (buffer + offset, buffer_len - offset,
+		status = ssnprintf (buffer + offset, buffer_len - offset,
 				"%s-%s/", vl->plugin, vl->plugin_instance);
 	else
-		status = snprintf (buffer + offset, buffer_len - offset,
+		status = ssnprintf (buffer + offset, buffer_len - offset,
 				"%s/", vl->plugin);
 	if ((status < 1) || (status >= buffer_len - offset))
 		return (-1);
 	offset += status;
 
 	if (strlen (vl->type_instance) > 0)
-		status = snprintf (buffer + offset, buffer_len - offset,
-				"%s-%s.rrd", ds->type, vl->type_instance);
+		status = ssnprintf (buffer + offset, buffer_len - offset,
+				"%s-%s.rrd", vl->type, vl->type_instance);
 	else
-		status = snprintf (buffer + offset, buffer_len - offset,
-				"%s.rrd", ds->type);
+		status = ssnprintf (buffer + offset, buffer_len - offset,
+				"%s.rrd", vl->type);
 	if ((status < 1) || (status >= buffer_len - offset))
 		return (-1);
 	offset += status;
 
 	return (0);
 } /* int value_list_to_filename */
 
 static void *rrd_queue_thread (void *data)
 {
+        struct timeval tv_next_update;
+        struct timeval tv_now;
+
+        gettimeofday (&tv_next_update, /* timezone = */ NULL);
+
 	while (42)
 	{
 		rrd_queue_t *queue_entry;
 		rrd_cache_t *cache_entry;
 		char **values;
 		int    values_num;
 		int    i;
 
+                pthread_mutex_lock (&queue_lock);
+                /* Wait for values to arrive */
+                while (true)
+                {
+                  struct timespec ts_wait;
+                  int status;
+
+                  while ((flushq_head == NULL) && (queue_head == NULL)
+                      && (do_shutdown == 0))
+                    pthread_cond_wait (&queue_cond, &queue_lock);
+
+                  if ((flushq_head == NULL) && (queue_head == NULL))
+                    break;
+
+                  /* Don't delay if there's something to flush */
+                  if (flushq_head != NULL)
+                    break;
+
+                  /* Don't delay if we're shutting down */
+                  if (do_shutdown != 0)
+                    break;
+
+                  /* Don't delay if no delay was configured. */
+                  if (write_rate <= 0.0)
+                    break;
+
+                  gettimeofday (&tv_now, /* timezone = */ NULL);
+                  status = timeval_sub_timespec (&tv_next_update, &tv_now,
+                      &ts_wait);
+                  /* We're good to go */
+                  if (status != 0)
+                    break;
+
+                  /* We're supposed to wait a bit with this update, so we'll
+                   * wait for the next addition to the queue or to the end of
+                   * the wait period - whichever comes first. */
+                  ts_wait.tv_sec = tv_next_update.tv_sec;
+                  ts_wait.tv_nsec = 1000 * tv_next_update.tv_usec;
+
+                  status = pthread_cond_timedwait (&queue_cond, &queue_lock,
+                      &ts_wait);
+                  if (status == ETIMEDOUT)
+                    break;
+                } /* while (true) */
+
 		/* XXX: If you need to lock both, cache_lock and queue_lock, at
 		 * the same time, ALWAYS lock `cache_lock' first! */
 
-		/* wait until an entry is available */
-		pthread_mutex_lock (&queue_lock);
-		while ((queue_head == NULL) && (do_shutdown == 0))
-			pthread_cond_wait (&queue_cond, &queue_lock);
-
 		/* We're in the shutdown phase */
-		if (queue_head == NULL)
+                if ((flushq_head == NULL) && (queue_head == NULL))
 		{
-			pthread_mutex_unlock (&queue_lock);
-			break;
+                  pthread_mutex_unlock (&queue_lock);
+                  break;
 		}
 
-		/* Dequeue the first entry */
-		queue_entry = queue_head;
-		if (queue_head == queue_tail)
-			queue_head = queue_tail = NULL;
-		else
-			queue_head = queue_head->next;
+                if (flushq_head != NULL)
+                {
+                  /* Dequeue the first flush entry */
+                  queue_entry = flushq_head;
+                  if (flushq_head == flushq_tail)
+                    flushq_head = flushq_tail = NULL;
+                  else
+                    flushq_head = flushq_head->next;
+                }
+                else /* if (queue_head != NULL) */
+                {
+                  /* Dequeue the first regular entry */
+                  queue_entry = queue_head;
+                  if (queue_head == queue_tail)
+                    queue_head = queue_tail = NULL;
+                  else
+                    queue_head = queue_head->next;
+                }
 
 		/* Unlock the queue again */
 		pthread_mutex_unlock (&queue_lock);
 
 		/* We now need the cache lock so the entry isn't updated while
 		 * we make a copy of it's values */
@@ -649,14 +712,29 @@
 		cache_entry->values = NULL;
 		cache_entry->values_num = 0;
 		cache_entry->flags = FLAG_NONE;
 
 		pthread_mutex_unlock (&cache_lock);
 
+		/* Update `tv_next_update' */
+		if (write_rate > 0.0) 
+                {
+                  gettimeofday (&tv_now, /* timezone = */ NULL);
+                  tv_next_update.tv_sec = tv_now.tv_sec;
+                  tv_next_update.tv_usec = tv_now.tv_usec
+                    + ((suseconds_t) (1000000 * write_rate));
+                  while (tv_next_update.tv_usec > 1000000)
+                  {
+                    tv_next_update.tv_sec++;
+                    tv_next_update.tv_usec -= 1000000;
+                  }
+                }
+
 		/* Write the values to the RRD-file */
-		srrd_update (queue_entry->filename, NULL, values_num, values);
+		srrd_update (queue_entry->filename, NULL,
+				values_num, (const char **)values);
 		DEBUG ("rrdtool plugin: queue thread: Wrote %i values to %s",
 				values_num, queue_entry->filename);
 
 		for (i = 0; i < values_num; i++)
 		{
 			sfree (values[i]);
@@ -672,42 +750,85 @@
 	pthread_mutex_unlock (&cache_lock);
 
 	pthread_exit ((void *) 0);
 	return ((void *) 0);
 } /* void *rrd_queue_thread */
 
-static int rrd_queue_cache_entry (const char *filename)
+static int rrd_queue_enqueue (const char *filename,
+    rrd_queue_t **head, rrd_queue_t **tail)
 {
-	rrd_queue_t *queue_entry;
+  rrd_queue_t *queue_entry;
 
-	queue_entry = (rrd_queue_t *) malloc (sizeof (rrd_queue_t));
-	if (queue_entry == NULL)
-		return (-1);
+  queue_entry = (rrd_queue_t *) malloc (sizeof (rrd_queue_t));
+  if (queue_entry == NULL)
+    return (-1);
 
-	queue_entry->filename = strdup (filename);
-	if (queue_entry->filename == NULL)
-	{
-		free (queue_entry);
-		return (-1);
-	}
+  queue_entry->filename = strdup (filename);
+  if (queue_entry->filename == NULL)
+  {
+    free (queue_entry);
+    return (-1);
+  }
 
-	queue_entry->next = NULL;
+  queue_entry->next = NULL;
 
-	pthread_mutex_lock (&queue_lock);
-	if (queue_tail == NULL)
-		queue_head = queue_entry;
-	else
-		queue_tail->next = queue_entry;
-	queue_tail = queue_entry;
-	pthread_cond_signal (&queue_cond);
-	pthread_mutex_unlock (&queue_lock);
+  pthread_mutex_lock (&queue_lock);
 
-	DEBUG ("rrdtool plugin: Put `%s' into the update queue", filename);
+  if (*tail == NULL)
+    *head = queue_entry;
+  else
+    (*tail)->next = queue_entry;
+  *tail = queue_entry;
 
-	return (0);
-} /* int rrd_queue_cache_entry */
+  pthread_cond_signal (&queue_cond);
+  pthread_mutex_unlock (&queue_lock);
+
+  return (0);
+} /* int rrd_queue_enqueue */
+
+static int rrd_queue_dequeue (const char *filename,
+    rrd_queue_t **head, rrd_queue_t **tail)
+{
+  rrd_queue_t *this;
+  rrd_queue_t *prev;
+
+  pthread_mutex_lock (&queue_lock);
+
+  prev = NULL;
+  this = *head;
+
+  while (this != NULL)
+  {
+    if (strcmp (this->filename, filename) == 0)
+      break;
+    
+    prev = this;
+    this = this->next;
+  }
+
+  if (this == NULL)
+  {
+    pthread_mutex_unlock (&queue_lock);
+    return (-1);
+  }
+
+  if (prev == NULL)
+    *head = this->next;
+  else
+    prev->next = this->next;
+
+  if (this->next == NULL)
+    *tail = prev;
+
+  pthread_mutex_unlock (&queue_lock);
+
+  sfree (this->filename);
+  sfree (this);
+
+  return (0);
+} /* int rrd_queue_dequeue */
 
 static void rrd_cache_flush (int timeout)
 {
 	rrd_cache_t *rc;
 	time_t       now;
 
@@ -723,19 +844,22 @@
 	now = time (NULL);
 
 	/* Build a list of entries to be flushed */
 	iter = c_avl_get_iterator (cache);
 	while (c_avl_iterator_next (iter, (void *) &key, (void *) &rc) == 0)
 	{
-		if (rc->flags == FLAG_QUEUED)
+		if (rc->flags != FLAG_NONE)
 			continue;
 		else if ((now - rc->first_value) < timeout)
 			continue;
 		else if (rc->values_num > 0)
 		{
-			if (rrd_queue_cache_entry (key) == 0)
+			int status;
+
+			status = rrd_queue_enqueue (key, &queue_head,  &queue_tail);
+			if (status == 0)
 				rc->flags = FLAG_QUEUED;
 		}
 		else /* ancient and no values -> waste of memory */
 		{
 			char **tmp = (char **) realloc ((void *) keys,
 					(keys_num + 1) * sizeof (char *));
@@ -775,12 +899,69 @@
 
 	sfree (keys);
 
 	cache_flush_last = now;
 } /* void rrd_cache_flush */
 
+static int rrd_cache_flush_identifier (int timeout, const char *identifier)
+{
+  rrd_cache_t *rc;
+  time_t now;
+  int status;
+  char key[2048];
+
+  if (identifier == NULL)
+  {
+    rrd_cache_flush (timeout);
+    return (0);
+  }
+
+  now = time (NULL);
+
+  if (datadir == NULL)
+    snprintf (key, sizeof (key), "%s.rrd",
+        identifier);
+  else
+    snprintf (key, sizeof (key), "%s/%s.rrd",
+        datadir, identifier);
+  key[sizeof (key) - 1] = 0;
+
+  status = c_avl_get (cache, key, (void *) &rc);
+  if (status != 0)
+  {
+    WARNING ("rrdtool plugin: rrd_cache_flush_identifier: "
+        "c_avl_get (%s) failed. Does that file really exist?",
+        key);
+    return (status);
+  }
+
+  if (rc->flags == FLAG_FLUSHQ)
+  {
+    status = 0;
+  }
+  else if (rc->flags == FLAG_QUEUED)
+  {
+    rrd_queue_dequeue (key, &queue_head, &queue_tail);
+    status = rrd_queue_enqueue (key, &flushq_head, &flushq_tail);
+    if (status == 0)
+      rc->flags = FLAG_FLUSHQ;
+  }
+  else if ((now - rc->first_value) < timeout)
+  {
+    status = 0;
+  }
+  else if (rc->values_num > 0)
+  {
+    status = rrd_queue_enqueue (key, &flushq_head, &flushq_tail);
+    if (status == 0)
+      rc->flags = FLAG_FLUSHQ;
+  }
+
+  return (status);
+} /* int rrd_cache_flush_identifier */
+
 static int rrd_cache_insert (const char *filename,
 		const char *value, time_t value_time)
 {
 	rrd_cache_t *rc = NULL;
 	int new_rc = 0;
 	char **values_new;
@@ -861,23 +1042,26 @@
 		}
 
 		c_avl_insert (cache, cache_key, rc);
 	}
 
 	DEBUG ("rrdtool plugin: rrd_cache_insert: file = %s; "
-			"values_num = %i; age = %u;",
+			"values_num = %i; age = %lu;",
 			filename, rc->values_num,
-			rc->last_value - rc->first_value);
+			(unsigned long)(rc->last_value - rc->first_value));
 
 	if ((rc->last_value - rc->first_value) >= cache_timeout)
 	{
 		/* XXX: If you need to lock both, cache_lock and queue_lock, at
 		 * the same time, ALWAYS lock `cache_lock' first! */
-		if (rc->flags != FLAG_QUEUED)
+		if (rc->flags == FLAG_NONE)
 		{
-			if (rrd_queue_cache_entry (filename) == 0)
+			int status;
+
+			status = rrd_queue_enqueue (filename, &queue_head, &queue_tail);
+			if (status == 0)
 				rc->flags = FLAG_QUEUED;
 		}
 		else
 		{
 			DEBUG ("rrdtool plugin: `%s' is already queued.", filename);
 		}
@@ -910,12 +1093,17 @@
 {
 	struct stat  statbuf;
 	char         filename[512];
 	char         values[512];
 	int          status;
 
+	if (0 != strcmp (ds->type, vl->type)) {
+		ERROR ("rrdtool plugin: DS type does not match value list type");
+		return -1;
+	}
+
 	if (value_list_to_filename (filename, sizeof (filename), ds, vl) != 0)
 		return (-1);
 
 	if (value_list_to_string (values, sizeof (values), ds, vl) != 0)
 		return (-1);
 
@@ -944,22 +1132,23 @@
 
 	status = rrd_cache_insert (filename, values, vl->time);
 
 	return (status);
 } /* int rrd_write */
 
-static int rrd_flush (const int timeout)
+static int rrd_flush (int timeout, const char *identifier)
 {
 	pthread_mutex_lock (&cache_lock);
 
 	if (cache == NULL) {
 		pthread_mutex_unlock (&cache_lock);
 		return (0);
 	}
 
-	rrd_cache_flush (timeout);
+	rrd_cache_flush_identifier (timeout, identifier);
+
 	pthread_mutex_unlock (&cache_lock);
 	return (0);
 } /* int rrd_flush */
 
 static int rrd_config (const char *key, const char *value)
 {
@@ -967,27 +1156,23 @@
 	{
 		int tmp = atoi (value);
 		if (tmp < 0)
 		{
 			fprintf (stderr, "rrdtool: `CacheTimeout' must "
 					"be greater than 0.\n");
-			ERROR ("rrdtool: `CacheTimeout' must "
-					"be greater than 0.\n");
 			return (1);
 		}
 		cache_timeout = tmp;
 	}
 	else if (strcasecmp ("CacheFlush", key) == 0)
 	{
 		int tmp = atoi (value);
 		if (tmp < 0)
 		{
 			fprintf (stderr, "rrdtool: `CacheFlush' must "
 					"be greater than 0.\n");
-			ERROR ("rrdtool: `CacheFlush' must "
-					"be greater than 0.\n");
 			return (1);
 		}
 		cache_flush_timeout = tmp;
 	}
 	else if (strcasecmp ("DataDir", key) == 0)
 	{
@@ -1025,14 +1210,12 @@
 	{
 		int tmp = atoi (value);
 		if (tmp <= 0)
 		{
 			fprintf (stderr, "rrdtool: `RRARows' must "
 					"be greater than 0.\n");
-			ERROR ("rrdtool: `RRARows' must "
-					"be greater than 0.\n");
 			return (1);
 		}
 		rrarows = tmp;
 	}
 	else if (strcasecmp ("RRATimespan", key) == 0)
 	{
@@ -1053,13 +1236,12 @@
 			
 			tmp_alloc = realloc (rra_timespans_custom,
 					sizeof (int) * (rra_timespans_custom_num + 1));
 			if (tmp_alloc == NULL)
 			{
 				fprintf (stderr, "rrdtool: realloc failed.\n");
-				ERROR ("rrdtool: realloc failed.\n");
 				free (value_copy);
 				return (1);
 			}
 			rra_timespans_custom = tmp_alloc;
 			rra_timespans_custom[rra_timespans_custom_num] = atoi (ptr);
 			if (rra_timespans_custom[rra_timespans_custom_num] != 0)
@@ -1077,18 +1259,35 @@
 	{
 		double tmp = atof (value);
 		if ((tmp < 0.0) || (tmp >= 1.0))
 		{
 			fprintf (stderr, "rrdtool: `XFF' must "
 					"be in the range 0 to 1 (exclusive).");
-			ERROR ("rrdtool: `XFF' must "
-					"be in the range 0 to 1 (exclusive).");
 			return (1);
 		}
 		xff = tmp;
 	}
+	else if (strcasecmp ("WritesPerSecond", key) == 0)
+	{
+		double wps = atof (value);
+
+		if (wps < 0.0)
+		{
+			fprintf (stderr, "rrdtool: `WritesPerSecond' must be "
+					"greater than or equal to zero.");
+			return (1);
+		}
+		else if (wps == 0.0)
+		{
+			write_rate = 0.0;
+		}
+		else
+		{
+			write_rate = 1.0 / wps;
+		}
+	}
 	else
 	{
 		return (-1);
 	}
 	return (0);
 } /* int rrd_config */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/sensors.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/sensors.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/sensors.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/sensors.c	2008-09-04 21:01:14.000000000 +0800
@@ -179,13 +179,13 @@
 		const sensors_chip_name *chip)
 {
 	int status = -1;
 
 	if (chip->bus == SENSORS_CHIP_NAME_BUS_ISA)
 	{
-		status = snprintf (buf, buf_size,
+		status = ssnprintf (buf, buf_size,
 				"%s-isa-%04x",
 				chip->prefix,
 				chip->addr);
 	}
 	else if (chip->bus == SENSORS_CHIP_NAME_BUS_DUMMY)
 	{
@@ -477,17 +477,16 @@
 	char match_key[1024];
 	int status;
 
 	value_t values[1];
 	value_list_t vl = VALUE_LIST_INIT;
 
-	status = snprintf (match_key, sizeof (match_key), "%s/%s-%s",
+	status = ssnprintf (match_key, sizeof (match_key), "%s/%s-%s",
 			plugin_instance, type, type_instance);
 	if (status < 1)
 		return;
-	match_key[sizeof (match_key) - 1] = '\0';
 
 	if (sensor_list != NULL)
 	{
 		DEBUG ("sensors plugin: Checking ignorelist for `%s'", match_key);
 		if (ignorelist_match (sensor_list, match_key))
 			return;
@@ -496,23 +495,20 @@
 	values[0].gauge = val;
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 
-	strncpy (vl.host, hostname_g, sizeof (vl.host));
-	vl.host[sizeof (vl.host) - 1] = '\0';
-	strncpy (vl.plugin, "sensors", sizeof (vl.plugin));
-	vl.plugin[sizeof (vl.plugin) - 1] = '\0';
-	strncpy (vl.plugin_instance, plugin_instance,
+	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
+	sstrncpy (vl.plugin, "sensors", sizeof (vl.plugin));
+	sstrncpy (vl.plugin_instance, plugin_instance,
 			sizeof (vl.plugin_instance));
-	vl.plugin_instance[sizeof (vl.plugin_instance) - 1] = '\0';
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
-	vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void sensors_submit */
 
 static int sensors_read (void)
 {
 	featurelist_t *fl;
 
@@ -533,17 +529,15 @@
 			continue;
 
 		status = sensors_snprintf_chip_name (plugin_instance,
 				sizeof (plugin_instance), fl->chip);
 		if (status < 0)
 			continue;
-		plugin_instance[sizeof (plugin_instance) - 1] = '\0';
 
-		strncpy (type_instance, fl->data->name,
+		sstrncpy (type_instance, fl->data->name,
 				sizeof (type_instance));
-		type_instance[sizeof (type_instance) - 1] = '\0';
 
 		sensors_submit (plugin_instance,
 				sensor_type_name_map[fl->type],
 				type_instance,
 				value);
 	} /* for fl = first_feature .. NULL */
@@ -564,17 +558,15 @@
 			continue;
 
 		status = sensors_snprintf_chip_name (plugin_instance,
 				sizeof (plugin_instance), fl->chip);
 		if (status < 0)
 			continue;
-		plugin_instance[sizeof (plugin_instance) - 1] = '\0';
 
-		strncpy (type_instance, fl->feature->name,
+		sstrncpy (type_instance, fl->feature->name,
 				sizeof (type_instance));
-		type_instance[sizeof (type_instance) - 1] = '\0';
 
 		if (fl->feature->type == SENSORS_FEATURE_IN)
 			type = "voltage";
 		else if (fl->feature->type
 				== SENSORS_FEATURE_FAN)
 			type = "fanspeed";
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/serial.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/serial.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/serial.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/serial.c	2008-09-04 21:01:14.000000000 +0800
@@ -40,16 +40,17 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "serial", sizeof (vl.plugin));
-	strncpy (vl.type_instance, type_instance,
+	sstrncpy (vl.type, "serial_octets", sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance,
 			sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("serial_octets", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static int serial_read (void)
 {
 	FILE *fh;
 	char buffer[1024];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/snmp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/snmp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/snmp.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/snmp.c	2008-09-04 21:01:14.000000000 +0800
@@ -195,13 +195,14 @@
       return (-1);
     }
   }
   else
   {
     /* Instance is a simple string */
-    strncpy (dd->instance.string, ci->values[0].value.string, DATA_MAX_NAME_LEN - 1);
+    sstrncpy (dd->instance.string, ci->values[0].value.string,
+	sizeof (dd->instance.string));
   }
 
   return (0);
 } /* int csnmp_config_add_data_instance */
 
 static int csnmp_config_add_data_instance_prefix (data_definition_t *dd,
@@ -713,19 +714,48 @@
   {
     temp = (uint32_t) vl->val.counter64->high;
     temp = temp << 32;
     temp += (uint32_t) vl->val.counter64->low;
     DEBUG ("snmp plugin: Parsed int64 value is %"PRIu64".", temp);
   }
+  else if (vl->type == ASN_OCTET_STR)
+  {
+    /* We'll handle this later.. */
+  }
   else
   {
     WARNING ("snmp plugin: I don't know the ASN type `%i'", (int) vl->type);
     defined = 0;
   }
 
-  if (type == DS_TYPE_COUNTER)
+  if (vl->type == ASN_OCTET_STR)
+  {
+    char *string;
+    char *endptr;
+
+    string = (char *) vl->val.string;
+    endptr = NULL;
+
+    if (string != NULL)
+    {
+      if (type == DS_TYPE_COUNTER)
+	ret.counter = (counter_t) strtoll (string, &endptr, /* base = */ 0);
+      else if (type == DS_TYPE_GAUGE)
+	ret.gauge = (gauge_t) strtod (string, &endptr);
+    }
+
+    /* Check if an error occurred */
+    if ((string == NULL) || (endptr == string))
+    {
+      if (type == DS_TYPE_COUNTER)
+	ret.counter = 0;
+      else if (type == DS_TYPE_GAUGE)
+	ret.gauge = NAN;
+    }
+  }
+  else if (type == DS_TYPE_COUNTER)
   {
     ret.counter = temp;
   }
   else if (type == DS_TYPE_GAUGE)
   {
     ret.gauge = NAN;
@@ -826,21 +856,21 @@
   /* Get instance name */
   if ((vb->type == ASN_OCTET_STR) || (vb->type == ASN_BIT_STR))
   {
     char *ptr;
     size_t instance_len;
 
+    memset (il->instance, 0, sizeof (il->instance));
     instance_len = sizeof (il->instance) - 1;
     if (instance_len > vb->val_len)
       instance_len = vb->val_len;
 
-    strncpy (il->instance, (char *) ((vb->type == ASN_OCTET_STR)
+    sstrncpy (il->instance, (char *) ((vb->type == ASN_OCTET_STR)
 	  ? vb->val.string
 	  : vb->val.bitstring),
-	instance_len);
-    il->instance[instance_len] = '\0';
+	instance_len + 1);
 
     for (ptr = il->instance; *ptr != '\0'; ptr++)
     {
       if ((*ptr > 0) && (*ptr < 32))
 	*ptr = ' ';
       else if (*ptr == '/')
@@ -848,16 +878,15 @@
     }
     DEBUG ("snmp plugin: il->instance = `%s';", il->instance);
   }
   else
   {
     value_t val = csnmp_value_list_to_value (vb, DS_TYPE_COUNTER, 1.0, 0.0);
-    snprintf (il->instance, sizeof (il->instance),
+    ssnprintf (il->instance, sizeof (il->instance),
 	"%llu", val.counter);
   }
-  il->instance[sizeof (il->instance) - 1] = '\0';
 
   /* TODO: Debugging output */
 
   if (*head == NULL)
     *head = il;
   else
@@ -904,14 +933,13 @@
   {
     ERROR ("snmp plugin: malloc failed.");
     sfree (value_table_ptr);
     return (-1);
   }
 
-  strncpy (vl.host, host->name, sizeof (vl.host));
-  vl.host[sizeof (vl.host) - 1] = '\0';
+  sstrncpy (vl.host, host->name, sizeof (vl.host));
   sstrncpy (vl.plugin, "snmp", sizeof (vl.plugin));
 
   vl.interval = host->interval;
   vl.time = time (NULL);
 
   subid = 0;
@@ -969,36 +997,34 @@
       assert (value_table_ptr[i-1]->subid == value_table_ptr[i]->subid);
     }
     assert ((instance_list_ptr == NULL)
 	|| (instance_list_ptr->subid == value_table_ptr[0]->subid));
 #endif
 
+    sstrncpy (vl.type, data->type, sizeof (vl.type));
+
     {
       char temp[DATA_MAX_NAME_LEN];
 
       if (instance_list_ptr == NULL)
-	snprintf (temp, sizeof (temp), "%u",
-	    (uint32_t) subid);
+	ssnprintf (temp, sizeof (temp), "%u", (uint32_t) subid);
       else
-	strncpy (temp, instance_list_ptr->instance,
-	    sizeof (temp));
-      temp[sizeof (temp) - 1] = '\0';
+	sstrncpy (temp, instance_list_ptr->instance, sizeof (temp));
 
       if (data->instance_prefix == NULL)
-	strncpy (vl.type_instance, temp, sizeof (vl.type_instance));
+	sstrncpy (vl.type_instance, temp, sizeof (vl.type_instance));
       else
-	snprintf (vl.type_instance, sizeof (vl.type_instance), "%s%s",
+	ssnprintf (vl.type_instance, sizeof (vl.type_instance), "%s%s",
 	    data->instance_prefix, temp);
-      vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
     }
 
     for (i = 0; i < data->values_len; i++)
       vl.values[i] = value_table_ptr[i]->value;
 
     /* If we get here `vl.type_instance' and all `vl.values' have been set */
-    plugin_dispatch_values (data->type, &vl);
+    plugin_dispatch_values (&vl);
 
     subid++;
   } /* while (have_more != 0) */
 
   sfree (vl.values);
   sfree (value_table_ptr);
@@ -1289,17 +1315,16 @@
     if (ds->ds[i].type == DS_TYPE_COUNTER)
       vl.values[i].counter = 0;
     else
       vl.values[i].gauge = NAN;
   }
 
-  strncpy (vl.host, host->name, sizeof (vl.host));
-  vl.host[sizeof (vl.host) - 1] = '\0';
+  sstrncpy (vl.host, host->name, sizeof (vl.host));
   sstrncpy (vl.plugin, "snmp", sizeof (vl.plugin));
-  strncpy (vl.type_instance, data->instance.string, sizeof (vl.type_instance));
-  vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
+  sstrncpy (vl.type, data->type, sizeof (vl.type));
+  sstrncpy (vl.type_instance, data->instance.string, sizeof (vl.type_instance));
 
   vl.interval = host->interval;
 
   req = snmp_pdu_create (SNMP_MSG_GET);
   if (req == NULL)
   {
@@ -1351,14 +1376,14 @@
   } /* for (res->variables) */
 
   if (res != NULL)
     snmp_free_pdu (res);
   res = NULL;
 
-  DEBUG ("snmp plugin: -> plugin_dispatch_values (%s, &vl);", data->type);
-  plugin_dispatch_values (data->type, &vl);
+  DEBUG ("snmp plugin: -> plugin_dispatch_values (&vl);");
+  plugin_dispatch_values (&vl);
   sfree (vl.values);
 
   return (0);
 } /* int csnmp_read_value */
 
 static int csnmp_read_host (host_definition_t *host)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/swap.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/swap.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/swap.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/swap.c	2008-09-04 21:01:14.000000000 +0800
@@ -123,15 +123,16 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "swap", sizeof (vl.plugin));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.type, "swap", sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("swap", &vl);
+	plugin_dispatch_values (&vl);
 } /* void swap_submit */
 
 static int swap_read (void)
 {
 #if KERNEL_LINUX
 	FILE *fh;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/tape.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/tape.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/tape.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/tape.c	2008-09-04 21:01:14.000000000 +0800
@@ -68,16 +68,17 @@
 
 	vl.values = values;
 	vl.values_len = 2;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "tape", sizeof (vl.plugin));
-	strncpy (vl.plugin_instance, plugin_instance,
+	sstrncpy (vl.plugin_instance, plugin_instance,
 			sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void tape_submit */
 
 static int tape_read (void)
 {
 
 #if HAVE_KSTAT_IO_T_WRITES && HAVE_KSTAT_IO_T_NWRITES && HAVE_KSTAT_IO_T_WTIME
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/tcpconns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/tcpconns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/tcpconns.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/tcpconns.c	2008-09-04 21:01:14.000000000 +0800
@@ -16,17 +16,53 @@
  * 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
  *
  * Author:
  *   Florian octo Forster <octo at verplant.org>
  **/
 
+/**
+ * Code within `HAVE_LIBKVM_NLIST' blocks is provided under the following
+ * license:
+ *
+ * $collectd: parts of tcpconns.c, 2008/08/08 03:48:30 Michael Stapelberg $
+ * $OpenBSD: inet.c,v 1.100 2007/06/19 05:28:30 ray Exp $
+ * $NetBSD: inet.c,v 1.14 1995/10/03 21:42:37 thorpej Exp $
+ *
+ * Copyright (c) 1983, 1988, 1993
+ *      The Regents of the University of California.  All rights reserved.
+ *
+ * Redistribution and use in source and binary forms, with or without
+ * modification, are permitted provided that the following conditions
+ * are met:
+ * 1. Redistributions of source code must retain the above copyright
+ *    notice, this list of conditions and the following disclaimer.
+ * 2. Redistributions in binary form must reproduce the above copyright
+ *    notice, this list of conditions and the following disclaimer in the
+ *    documentation and/or other materials provided with the distribution.
+ * 3. Neither the name of the University nor the names of its contributors
+ *    may be used to endorse or promote products derived from this software
+ *    without specific prior written permission.
+ *
+ * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+ * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+ * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+ * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+ * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+ * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+ * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+ * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+ * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+ * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+ * SUCH DAMAGE.
+ */
+
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 
-#if !KERNEL_LINUX && !HAVE_SYSCTLBYNAME
+#if !KERNEL_LINUX && !HAVE_SYSCTLBYNAME && !HAVE_LIBKVM_NLIST
 # error "No applicable input method."
 #endif
 
 #if KERNEL_LINUX
 /* #endif KERNEL_LINUX */
 
@@ -54,13 +90,31 @@
 # include <netinet/in_pcb.h>
 # include <netinet/ip_var.h>
 # include <netinet/tcp.h>
 # include <netinet/tcpip.h>
 # include <netinet/tcp_seq.h>
 # include <netinet/tcp_var.h>
-#endif /* HAVE_SYSCTLBYNAME */
+/* #endif HAVE_SYSCTLBYNAME */
+
+/* This is for OpenBSD and possibly NetBSD. */
+#elif HAVE_LIBKVM_NLIST
+# include <sys/queue.h>
+# include <sys/socket.h>
+# include <net/route.h>
+# include <netinet/in.h>
+# include <netinet/in_systm.h>
+# include <netinet/ip.h>
+# include <netinet/in_pcb.h>
+# include <netinet/tcp.h>
+# include <netinet/tcp_timer.h>
+# include <netinet/tcp_var.h>
+# include <netdb.h>
+# include <arpa/inet.h>
+# include <nlist.h>
+# include <kvm.h>
+#endif /* HAVE_LIBKVM_NLIST */
 
 #if KERNEL_LINUX
 static const char *tcp_state[] =
 {
   "", /* 0 */
   "ESTABLISHED",
@@ -97,13 +151,38 @@
   "TIME_WAIT"
 };
 
 # define TCP_STATE_LISTEN 1
 # define TCP_STATE_MIN 0
 # define TCP_STATE_MAX 10
-#endif /* HAVE_SYSCTLBYNAME */
+/* #endif HAVE_SYSCTLBYNAME */
+
+#elif HAVE_LIBKVM_NLIST
+static const char *tcp_state[] =
+{
+  "CLOSED",
+  "LISTEN",
+  "SYN_SENT",
+  "SYN_RECV",
+  "ESTABLISHED",
+  "CLOSE_WAIT",
+  "FIN_WAIT1",
+  "CLOSING",
+  "LAST_ACK",
+  "FIN_WAIT2",
+  "TIME_WAIT"
+};
+
+static kvm_t *kvmd;
+static u_long      inpcbtable_off = 0;
+struct inpcbtable *inpcbtable_ptr = NULL;
+
+# define TCP_STATE_LISTEN 1
+# define TCP_STATE_MIN 1
+# define TCP_STATE_MAX 10
+#endif /* HAVE_LIBKVM_NLIST */
 
 #define PORT_COLLECT_LOCAL  0x01
 #define PORT_COLLECT_REMOTE 0x02
 #define PORT_IS_LISTENING   0x04
 
 typedef struct port_entry_s
@@ -134,45 +213,42 @@
 
   vl.values = values;
   vl.values_len = 1;
   vl.time = time (NULL);
   sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   sstrncpy (vl.plugin, "tcpconns", sizeof (vl.plugin));
+  sstrncpy (vl.type, "tcp_connections", sizeof (vl.type));
 
   if (((port_collect_listening != 0) && (pe->flags & PORT_IS_LISTENING))
       || (pe->flags & PORT_COLLECT_LOCAL))
   {
-    snprintf (vl.plugin_instance, sizeof (vl.plugin_instance),
+    ssnprintf (vl.plugin_instance, sizeof (vl.plugin_instance),
 	"%"PRIu16"-local", pe->port);
-    vl.plugin_instance[sizeof (vl.plugin_instance) - 1] = '\0';
 
     for (i = 1; i <= TCP_STATE_MAX; i++)
     {
       vl.values[0].gauge = pe->count_local[i];
 
-      strncpy (vl.type_instance, tcp_state[i], sizeof (vl.type_instance));
-      vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
+      sstrncpy (vl.type_instance, tcp_state[i], sizeof (vl.type_instance));
 
-      plugin_dispatch_values ("tcp_connections", &vl);
+      plugin_dispatch_values (&vl);
     }
   }
 
   if (pe->flags & PORT_COLLECT_REMOTE)
   {
-    snprintf (vl.plugin_instance, sizeof (vl.plugin_instance),
+    ssnprintf (vl.plugin_instance, sizeof (vl.plugin_instance),
 	"%"PRIu16"-remote", pe->port);
-    vl.plugin_instance[sizeof (vl.plugin_instance) - 1] = '\0';
 
     for (i = 1; i <= TCP_STATE_MAX; i++)
     {
       vl.values[0].gauge = pe->count_remote[i];
 
-      strncpy (vl.type_instance, tcp_state[i], sizeof (vl.type_instance));
-      vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
+      sstrncpy (vl.type_instance, tcp_state[i], sizeof (vl.type_instance));
 
-      plugin_dispatch_values ("tcp_connections", &vl);
+      plugin_dispatch_values (&vl);
     }
   }
 } /* void conn_submit */
 
 static void conn_submit_all (void)
 {
@@ -360,13 +436,16 @@
 
   return (0);
 } /* int conn_read_file */
 /* #endif KERNEL_LINUX */
 
 #elif HAVE_SYSCTLBYNAME
-#endif /* HAVE_SYSCTLBYNAME */
+/* #endif HAVE_SYSCTLBYNAME */
+
+#elif HAVE_LIBKVM_NLIST
+#endif /* HAVE_LIBKVM_NLIST */
 
 static int conn_config (const char *key, const char *value)
 {
   if (strcasecmp (key, "ListeningPorts") == 0)
   {
     if ((strcasecmp (value, "Yes") == 0)
@@ -514,21 +593,125 @@
   sfree (buffer);
 
   conn_submit_all ();
 
   return (0);
 } /* int conn_read */
-#endif /* HAVE_SYSCTLBYNAME */
+/* #endif HAVE_SYSCTLBYNAME */
+
+#elif HAVE_LIBKVM_NLIST
+static int kread (u_long addr, void *buf, int size)
+{
+  int status;
+
+  status = kvm_read (kvmd, addr, buf, size);
+  if (status != size)
+  {
+    ERROR ("tcpconns plugin: kvm_read failed (got %i, expected %i): %s\n",
+	status, size, kvm_geterr (kvmd));
+    return (-1);
+  }
+  return (0);
+} /* int kread */
+
+static int conn_init (void)
+{
+  char buf[_POSIX2_LINE_MAX];
+  struct nlist nl[] =
+  {
+#define N_TCBTABLE 0
+    { "_tcbtable" },
+    { "" }
+  };
+  int status;
+
+  kvmd = kvm_openfiles (NULL, NULL, NULL, O_RDONLY, buf);
+  if (kvmd == NULL)
+  {
+    ERROR ("tcpconns plugin: kvm_openfiles failed: %s", buf);
+    return (-1);
+  }
+
+  status = kvm_nlist (kvmd, nl);
+  if (status < 0)
+  {
+    ERROR ("tcpconns plugin: kvm_nlist failed with status %i.", status);
+    return (-1);
+  }
+
+  if (nl[N_TCBTABLE].n_type == 0)
+  {
+    ERROR ("tcpconns plugin: Error looking up kernel's namelist: "
+	"N_TCBTABLE is invalid.");
+    return (-1);
+  }
+
+  inpcbtable_off = (u_long) nl[N_TCBTABLE].n_value;
+  inpcbtable_ptr = (struct inpcbtable *) nl[N_TCBTABLE].n_value;
+
+  return (0);
+} /* int conn_init */
+
+static int conn_read (void)
+{
+  struct inpcbtable table;
+  struct inpcb *head;
+  struct inpcb *next;
+  struct inpcb inpcb;
+  struct tcpcb tcpcb;
+  int status;
+
+  conn_reset_port_entry ();
+
+  /* Read the pcbtable from the kernel */
+  status = kread (inpcbtable_off, &table, sizeof (table));
+  if (status != 0)
+    return (-1);
+
+  /* Get the `head' pcb */
+  head = (struct inpcb *) &(inpcbtable_ptr->inpt_queue);
+  /* Get the first pcb */
+  next = CIRCLEQ_FIRST (&table.inpt_queue);
+
+  while (next != head)
+  {
+    /* Read the pcb pointed to by `next' into `inpcb' */
+    kread ((u_long) next, &inpcb, sizeof (inpcb));
+
+    /* Advance `next' */
+    next = CIRCLEQ_NEXT (&inpcb, inp_queue);
+
+    /* Ignore sockets, that are not connected. */
+    if (!(inpcb.inp_flags & INP_IPV6)
+	&& (inet_lnaof(inpcb.inp_laddr) == INADDR_ANY))
+      continue;
+    if ((inpcb.inp_flags & INP_IPV6)
+	&& IN6_IS_ADDR_UNSPECIFIED (&inpcb.inp_laddr6))
+      continue;
+
+    kread ((u_long) inpcb.inp_ppcb, &tcpcb, sizeof (tcpcb));
+    conn_handle_ports (ntohs(inpcb.inp_lport), ntohs(inpcb.inp_fport), tcpcb.t_state);
+  } /* while (next != head) */
+
+  conn_submit_all ();
+
+  return (0);
+}
+#endif /* HAVE_LIBKVM_NLIST */
 
 void module_register (void)
 {
 	plugin_register_config ("tcpconns", conn_config,
 			config_keys, config_keys_num);
 #if KERNEL_LINUX
 	plugin_register_init ("tcpconns", conn_init);
+#elif HAVE_SYSCTLBYNAME
+	/* no initialization */
+#elif HAVE_LIBKVM_NLIST
+	plugin_register_init ("tcpconns", conn_init);
 #endif
 	plugin_register_read ("tcpconns", conn_read);
 } /* void module_register */
 
 /*
- * vim: set shiftwidth=2 softtabstop=2 tabstop=8 :
+ * vim: set shiftwidth=2 softtabstop=2 tabstop=8 fdm=marker :
  */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/teamspeak2.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/teamspeak2.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/teamspeak2.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/teamspeak2.c	2008-09-04 21:01:15.000000000 +0800
@@ -133,18 +133,20 @@
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "teamspeak2", sizeof (vl.plugin));
 
 	if (plugin_instance != NULL)
 		sstrncpy (vl.plugin_instance, plugin_instance,
 				sizeof (vl.plugin_instance));
-	
+
+	sstrncpy (vl.type, type, sizeof (vl.type));
+
 	if (type_instance != NULL)
 		sstrncpy (vl.type_instance, type_instance,
 				sizeof (vl.type_instance));
 	
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void tss2_submit_gauge */
 
 static void tss2_submit_io (const char *plugin_instance, const char *type,
 		counter_t rx, counter_t tx)
 {
 	/*
@@ -162,14 +164,16 @@
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "teamspeak2", sizeof (vl.plugin));
 
 	if (plugin_instance != NULL)
 		sstrncpy (vl.plugin_instance, plugin_instance,
 				sizeof (vl.plugin_instance));
-	
-	plugin_dispatch_values (type, &vl);
+
+	sstrncpy (vl.type, type, sizeof (vl.type));
+
+	plugin_dispatch_values (&vl);
 } /* void tss2_submit_gauge */
 
 static void tss2_close_socket (void)
 {
 	/*
 	 * Closes all sockets
@@ -369,14 +373,13 @@
 	 */
 	char command[128];
 	char response[128];
 	int status;
 
 	/* Send request */
-	snprintf (command, sizeof (command), "sel %i\r\n", vserver->port);
-	command[sizeof (command) - 1] = 0;
+	ssnprintf (command, sizeof (command), "sel %i\r\n", vserver->port);
 
 	status = tss2_send_request (write_fh, command);
 	if (status != 0)
 	{
 		ERROR ("teamspeak2 plugin: tss2_send_request (%s) failed.", command);
 		return (-1);
@@ -524,15 +527,14 @@
 
 		status = tss2_send_request (write_fh, "gi\r\n");
 	}
 	else
 	{
 		/* Request server information */
-		snprintf (plugin_instance, sizeof (plugin_instance), "vserver%i",
+		ssnprintf (plugin_instance, sizeof (plugin_instance), "vserver%i",
 				vserver->port);
-		plugin_instance[sizeof (plugin_instance) - 1] = 0;
 
 		/* Select the server */
 		status = tss2_select_vserver (read_fh, write_fh, vserver);
 		if (status != 0)
 			return (status);
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: thermal.c
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/types.db /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/types.db
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/types.db	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/types.db	2008-09-04 21:01:15.000000000 +0800
@@ -1,11 +1,12 @@
 apache_bytes		count:COUNTER:0:134217728
 apache_connections	count:GAUGE:0:65535
 apache_requests		count:COUNTER:0:134217728
 apache_scoreboard	count:GAUGE:0:65535
 bitrate			value:GAUGE:0:4294967295
+bytes			value:GAUGE:0:U
 cache_result		value:COUNTER:0:4294967295
 cache_size              value:GAUGE:0:4294967295
 charge			value:GAUGE:0:U
 connections		value:COUNTER:0:U
 counter			value:COUNTER:U:U
 cpufreq			value:GAUGE:0:U
@@ -25,12 +26,13 @@
 dns_rcode		value:COUNTER:0:65535
 email_check		value:GAUGE:0:U
 email_count		value:GAUGE:0:U
 email_size		value:GAUGE:0:U
 entropy			entropy:GAUGE:0:4294967295
 fanspeed		value:GAUGE:0:U
+files			value:GAUGE:0:U
 frequency		frequency:GAUGE:0:U
 frequency_offset	ppm:GAUGE:-1000000:1000000
 gauge			value:GAUGE:U:U
 humidity		value:GAUGE:0:100
 if_collisions		value:COUNTER:0:4294967295
 if_dropped		rx:COUNTER:0:4294967295, tx:COUNTER:0:4294967295
@@ -60,25 +62,31 @@
 mysql_qcache		hits:COUNTER:0:U, inserts:COUNTER:0:U, not_cached:COUNTER:0:U, lowmem_prunes:COUNTER:0:U, queries_in_cache:GAUGE:0:U
 mysql_threads		running:GAUGE:0:U, connected:GAUGE:0:U, cached:GAUGE:0:U, created:COUNTER:0:U
 nfs_procedure		value:COUNTER:0:4294967295
 nginx_connections	value:GAUGE:0:U
 nginx_requests		value:COUNTER:0:134217728
 percent			percent:GAUGE:0:100.1
+pg_blks			value:COUNTER:0:U
+pg_db_size		value:GAUGE:0:U
+pg_n_tup_c		value:COUNTER:0:U
+pg_n_tup_g		value:GAUGE:0:U
+pg_numbackends		value:GAUGE:0:U
+pg_scan			value:COUNTER:0:U
+pg_xact			value:COUNTER:0:U
 ping			ping:GAUGE:0:65535
 players			value:GAUGE:0:1000000
 power			value:GAUGE:0:U
 ps_count		processes:GAUGE:0:1000000, threads:GAUGE:0:1000000
 ps_cputime		user:COUNTER:0:16000000, syst:COUNTER:0:16000000
 ps_pagefaults		minflt:COUNTER:0:9223372036854775807, majflt:COUNTER:0:9223372036854775807
 ps_rss			value:GAUGE:0:9223372036854775807
 ps_state		value:GAUGE:0:65535
 serial_octets		rx:COUNTER:0:4294967295, tx:COUNTER:0:4294967295
 signal_noise		value:GAUGE:U:0
 signal_power		value:GAUGE:U:0
 signal_quality		value:GAUGE:0:U
-spam_check		value:GAUGE:0:U
 spam_score		value:GAUGE:U:U
 swap			value:GAUGE:0:1099511627776
 tcp_connections		value:GAUGE:0:4294967295
 temperature		value:GAUGE:-273.15:U
 time_dispersion		seconds:GAUGE:-1000000:1000000
 timeleft		timeleft:GAUGE:0:3600
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/types.db.5 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/types.db.5
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/types.db.5	2009-01-03 05:21:19.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/types.db.5	2008-09-05 16:58:53.000000000 +0800
@@ -1,10 +1,18 @@
-.\" Automatically generated by Pod::Man 2.1801 (Pod::Simple 3.05)
+.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
 .\"
 .\" Standard preamble:
 .\" ========================================================================
+.de Sh \" Subsection heading
+.br
+.if t .Sp
+.ne 5
+.PP
+\fB\\$1\fR
+.PP
+..
 .de Sp \" Vertical space (when we can't use .PP)
 .if t .sp .5v
 .if n .sp
 ..
 .de Vb \" Begin verbatim text
 .ft CW
@@ -42,13 +50,13 @@
 .\"
 .\" Escape single quotes in literal strings from groff's Unicode transform.
 .ie \n(.g .ds Aq \(aq
 .el       .ds Aq '
 .\"
 .\" If the F register is turned on, we'll generate index entries on stderr for
-.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
+.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
 .\" entries marked with X<> in POD.  Of course, you'll have to process the
 .\" output yourself in some meaningful fashion.
 .ie \nF \{\
 .    de IX
 .    tm Index:\\$1\t\\n%\t"\\$2"
 ..
@@ -121,13 +129,13 @@
 .    ds Ae AE
 .\}
 .rm #[ #] #H #V #F C
 .\" ========================================================================
 .\"
 .IX Title "TYPES.DB 5"
-.TH TYPES.DB 5 "2009-01-02" "4.4.5" "collectd"
+.TH TYPES.DB 5 "2008-05-06" "4.5.0" "collectd"
 .\" For nroff, turn off justification.  Always turn off hyphenation; it makes
 .\" way too many mistakes in technical documents.
 .if n .ad l
 .nh
 .SH "NAME"
 types.db \- Data\-set specifications for the system statistics collection daemon
@@ -155,26 +163,15 @@
 data stored for this data-source. If \fBU\fR is specified for either the min or
 max value, it will be set to unknown, meaning that no range checks will
 happen. See \fIrrdcreate\fR\|(1) for more details.
 .SH "FILES"
 .IX Header "FILES"
 The location of the types.db file is defined by the \fBTypesDB\fR configuration
-option (see \fIcollectd.conf\fR\|(5)).
-.SH "CUSTOM TYPES"
-.IX Header "CUSTOM TYPES"
-If you want to specify custom types, you should do so by specifying a custom
-file in addition to the default one (see \s-1FILES\s0) above. You can do that by
-having multiple \fBTypesDB\fR statements in your configuration file or by
-specifying more than one file in one line.
-.PP
-For example:
-.PP
-.Vb 2
-\& TypesDB "/opt/collectd/share/collectd/types.db"
-\& TypesDB "/opt/collectd/etc/types.db.custom"
-.Ve
+option (see \fIcollectd.conf\fR\|(5)). If you want to specify custom data-sets, you
+should do so by using a custom file specified as an additional argument to the
+\&\fBTypesDB\fR option.
 .SH "SEE ALSO"
 .IX Header "SEE ALSO"
 \&\fIcollectd\fR\|(1),
 \&\fIcollectd.conf\fR\|(5),
 \&\fIrrdcreate\fR\|(1)
 .SH "AUTHOR"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/types.db.pod /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/types.db.pod
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/types.db.pod	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/types.db.pod	2008-05-06 20:30:13.000000000 +0800
@@ -26,25 +26,15 @@
 max value, it will be set to unknown, meaning that no range checks will
 happen. See L<rrdcreate(1)> for more details.
 
 =head1 FILES
 
 The location of the types.db file is defined by the B<TypesDB> configuration
-option (see L<collectd.conf(5)>).
-
-=head1 CUSTOM TYPES
-
-If you want to specify custom types, you should do so by specifying a custom
-file in addition to the default one (see L<FILES>) above. You can do that by
-having multiple B<TypesDB> statements in your configuration file or by
-specifying more than one file in one line.
-
-For example:
-
- TypesDB "/opt/collectd/share/collectd/types.db"
- TypesDB "/opt/collectd/etc/types.db.custom"
+option (see L<collectd.conf(5)>). If you want to specify custom data-sets, you
+should do so by using a custom file specified as an additional argument to the
+B<TypesDB> option.
 
 =head1 SEE ALSO
 
 L<collectd(1)>,
 L<collectd.conf(5)>,
 L<rrdcreate(1)>
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/types_list.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/types_list.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/types_list.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/types_list.c	2008-09-04 21:01:15.000000000 +0800
@@ -31,13 +31,13 @@
   char *saveptr;
   char *fields[8];
   int   fields_num;
 
   if (buf_len < 11)
   {
-    ERROR ("parse_ds: (buf_len = %u) < 11", buf_len);
+    ERROR ("parse_ds: (buf_len = %zu) < 11", buf_len);
     return (-1);
   }
 
   if (buf[buf_len - 1] == ',')
   {
     buf_len--;
@@ -59,14 +59,13 @@
   if (fields_num != 4)
   {
     ERROR ("parse_ds: (fields_num = %i) != 4", fields_num);
     return (-1);
   }
 
-  strncpy (dsrc->name, fields[0], sizeof (dsrc->name));
-  dsrc->name[sizeof (dsrc->name) - 1] = '\0';
+  sstrncpy (dsrc->name, fields[0], sizeof (dsrc->name));
 
   if (strcasecmp (fields[1], "GAUGE") == 0)
     dsrc->type = DS_TYPE_GAUGE;
   else if (strcasecmp (fields[1], "COUNTER") == 0)
     dsrc->type = DS_TYPE_COUNTER;
   else
@@ -102,14 +101,13 @@
   ds = (data_set_t *) malloc (sizeof (data_set_t));
   if (ds == NULL)
     return;
 
   memset (ds, '\0', sizeof (data_set_t));
 
-  strncpy (ds->type, fields[0], sizeof (ds->type));
-  ds->type[sizeof (ds->type) - 1] = '\0';
+  sstrncpy (ds->type, fields[0], sizeof (ds->type));
 
   ds->ds_num = fields_num - 1;
   ds->ds = (data_source_t *) calloc (ds->ds_num, sizeof (data_source_t));
   if (ds->ds == NULL)
     return;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/unixsock.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/unixsock.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/unixsock.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/unixsock.c	2008-09-04 21:01:15.000000000 +0800
@@ -83,14 +83,14 @@
 				sstrerror (errno, errbuf, sizeof (errbuf)));
 		return (-1);
 	}
 
 	memset (&sa, '\0', sizeof (sa));
 	sa.sun_family = AF_UNIX;
-	strncpy (sa.sun_path, (sock_file != NULL) ? sock_file : US_DEFAULT_PATH,
-			sizeof (sa.sun_path) - 1);
+	sstrncpy (sa.sun_path, (sock_file != NULL) ? sock_file : US_DEFAULT_PATH,
+			sizeof (sa.sun_path));
 	/* unlink (sa.sun_path); */
 
 	DEBUG ("unixsock plugin: socket path = %s", sa.sun_path);
 
 	status = bind (sock_fd, (struct sockaddr *) &sa, sizeof (sa));
 	if (status != 0)
@@ -156,21 +156,18 @@
 } /* int us_open_socket */
 
 static void *us_handle_client (void *arg)
 {
 	int fd;
 	FILE *fhin, *fhout;
-	char buffer[1024];
-	char *fields[128];
-	int   fields_num;
 
 	fd = *((int *) arg);
 	free (arg);
 	arg = NULL;
 
-	DEBUG ("Reading from fd #%i", fd);
+	DEBUG ("unixsock plugin: us_handle_client: Reading from fd #%i", fd);
 
 	fhin  = fdopen (fd, "r");
 	if (fhin == NULL)
 	{
 		char errbuf[1024];
 		ERROR ("unixsock plugin: fdopen failed: %s",
@@ -199,13 +196,17 @@
 		fclose (fhout);
 		pthread_exit ((void *) 1);
 	}
 
 	while (42)
 	{
-		int len;
+		char buffer[1024];
+		char buffer_copy[1024];
+		char *fields[128];
+		int   fields_num;
+		int   len;
 
 		errno = 0;
 		if (fgets (buffer, sizeof (buffer), fhin) == NULL)
 		{
 			if (errno != 0)
 			{
@@ -222,42 +223,42 @@
 				&& ((buffer[len - 1] == '\n') || (buffer[len - 1] == '\r')))
 			buffer[--len] = '\0';
 
 		if (len == 0)
 			continue;
 
-		DEBUG ("fgets -> buffer = %s; len = %i;", buffer, len);
+		sstrncpy (buffer_copy, buffer, sizeof (buffer_copy));
 
-		fields_num = strsplit (buffer, fields,
+		fields_num = strsplit (buffer_copy, fields,
 				sizeof (fields) / sizeof (fields[0]));
 
 		if (fields_num < 1)
 		{
 			close (fd);
 			break;
 		}
 
 		if (strcasecmp (fields[0], "getval") == 0)
 		{
-			handle_getval (fhout, fields, fields_num);
+			handle_getval (fhout, buffer);
 		}
 		else if (strcasecmp (fields[0], "putval") == 0)
 		{
-			handle_putval (fhout, fields, fields_num);
+			handle_putval (fhout, buffer);
 		}
 		else if (strcasecmp (fields[0], "listval") == 0)
 		{
-			handle_listval (fhout, fields, fields_num);
+			handle_listval (fhout, buffer);
 		}
 		else if (strcasecmp (fields[0], "putnotif") == 0)
 		{
-			handle_putnotif (fhout, fields, fields_num);
+			handle_putnotif (fhout, buffer);
 		}
 		else if (strcasecmp (fields[0], "flush") == 0)
 		{
-			handle_flush (fhout, fields, fields_num);
+			handle_flush (fhout, buffer);
 		}
 		else
 		{
 			if (fprintf (fhout, "-1 Unknown command: %s\n", fields[0]) < 0)
 			{
 				char errbuf[1024];
@@ -266,13 +267,13 @@
 						sstrerror (errno, errbuf, sizeof (errbuf)));
 				break;
 			}
 		}
 	} /* while (fgets) */
 
-	DEBUG ("Exiting..");
+	DEBUG ("unixsock plugin: us_handle_client: Exiting..");
 	fclose (fhin);
 	fclose (fhout);
 
 	pthread_exit ((void *) 0);
 	return ((void *) 0);
 } /* void *us_handle_client */
@@ -379,21 +380,14 @@
 
 	return (0);
 } /* int us_config */
 
 static int us_init (void)
 {
-	static int have_init = 0;
-
 	int status;
 
-	/* Initialize only once. */
-	if (have_init != 0)
-		return (0);
-	have_init = 1;
-
 	loop = 1;
 
 	status = pthread_create (&listen_thread, NULL, us_server_thread, NULL);
 	if (status != 0)
 	{
 		char errbuf[1024];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/users.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/users.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/users.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/users.c	2008-09-04 21:01:15.000000000 +0800
@@ -48,14 +48,15 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "users", sizeof (vl.plugin));
+	sstrncpy (vl.type, "users", sizeof (vl.plugin));
 
-	plugin_dispatch_values ("users", &vl);
+	plugin_dispatch_values (&vl);
 } /* void users_submit */
 
 static int users_read (void)
 {
 #if HAVE_GETUTXENT
 	unsigned int users = 0;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cache.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cache.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cache.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cache.c	2008-09-04 21:01:15.000000000 +0800
@@ -153,19 +153,18 @@
     ce->state = STATE_OKAY;
     pthread_mutex_unlock (&cache_lock);
     sfree (name_copy);
     return (-1);
   }
 
-  snprintf (n.message, sizeof (n.message),
+  ssnprintf (n.message, sizeof (n.message),
       "%s has not been updated for %i seconds.", name,
       (int) (n.time - ce->last_update));
 
   pthread_mutex_unlock (&cache_lock);
 
-  n.message[sizeof (n.message) - 1] = '\0';
   plugin_dispatch_notification (&n);
 
   return (0);
 } /* int uc_send_notification */
 
 static int uc_insert (const data_set_t *ds, const value_list_t *vl,
@@ -296,13 +295,12 @@
 	  (void *) &key, (void *) &ce);
       if (status != 0)
       {
 	ERROR ("uc_check_timeout: c_avl_remove (%s) failed.", keys[i]);
       }
       sfree (keys[i]);
-      sfree (key);
       cache_free (ce);
     }
     else if (status == 1) /* persist */
     {
       DEBUG ("uc_check_timeout: %s is missing, sending notification.",
 	  keys[i]);
@@ -323,13 +321,13 @@
 	    keys[i]);
 	ce->state = STATE_MISSING;
       }
     }
     else
     {
-      WARNING ("uc_check_timeout: ut_check_interesting (%s) returned ",
+      WARNING ("uc_check_timeout: ut_check_interesting (%s) returned "
 	  "invalid status %i.",
 	  keys[i], status);
     }
   } /* for (keys[i]) */
 
   c_avl_iterator_destroy (iter);
@@ -448,16 +446,15 @@
   memset (&n, '\0', sizeof (n));
   NOTIFICATION_INIT_VL (&n, vl, ds);
 
   n.severity = NOTIF_OKAY;
   n.time = vl->time;
 
-  snprintf (n.message, sizeof (n.message),
+  ssnprintf (n.message, sizeof (n.message),
       "Received a value for %s. It was missing for %u seconds.",
       name, (unsigned int) update_delay);
-  n.message[sizeof (n.message) - 1] = '\0';
 
   plugin_dispatch_notification (&n);
 
   return (0);
 } /* int uc_update */
 
@@ -522,13 +519,13 @@
 
   /* This is important - the caller has no other way of knowing how many
    * values are returned. */
   if (ret_num != ds->ds_num)
   {
     ERROR ("utils_cache: uc_get_rate: ds[%s] has %i values, "
-	"but uc_get_rate_by_name returned %i.",
+	"but uc_get_rate_by_name returned %zu.",
 	ds->type, ds->ds_num, ret_num);
     sfree (ret);
     return (NULL);
   }
 
   return (ret);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_flush.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_flush.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_flush.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_flush.c	2008-09-04 21:01:15.000000000 +0800
@@ -21,77 +21,157 @@
  *   Florian "octo" Forster <octo at verplant.org>
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
+#include "utils_parse_option.h"
 
 #define print_to_socket(fh, ...) \
 	if (fprintf (fh, __VA_ARGS__) < 0) { \
 		char errbuf[1024]; \
 		WARNING ("handle_flush: failed to write to socket #%i: %s", \
 				fileno (fh), sstrerror (errno, errbuf, sizeof (errbuf))); \
 		return -1; \
 	}
 
-int handle_flush (FILE *fh, char **fields, int fields_num)
+static int add_to_array (char ***array, int *array_num, char *value)
+{
+	char **temp;
+
+	temp = (char **) realloc (*array, sizeof (char *) * (*array_num + 1));
+	if (temp == NULL)
+		return (-1);
+
+	*array = temp;
+	(*array)[*array_num] = value;
+	(*array_num)++;
+
+	return (0);
+} /* int add_to_array */
+
+int handle_flush (FILE *fh, char *buffer)
 {
 	int success = 0;
 	int error   = 0;
 
 	int timeout = -1;
+	char **plugins = NULL;
+	int plugins_num = 0;
+	char **identifiers = NULL;
+	int identifiers_num = 0;
 
 	int i;
 
-	for (i = 1; i < fields_num; i++)
+	if ((fh == NULL) || (buffer == NULL))
+		return (-1);
+
+	DEBUG ("utils_cmd_flush: handle_flush (fh = %p, buffer = %s);",
+			(void *) fh, buffer);
+
+	if (strncasecmp ("FLUSH", buffer, strlen ("FLUSH")) != 0)
 	{
-		char *option = fields[i];
-		int   status = 0;
+		print_to_socket (fh, "-1 Cannot parse command.\n");
+		return (-1);
+	}
+	buffer += strlen ("FLUSH");
 
-		if (strncasecmp ("plugin=", option, strlen ("plugin=")) == 0)
+	while (*buffer != 0)
+	{
+		char *opt_key;
+		char *opt_value;
+		int status;
+
+		opt_key = NULL;
+		opt_value = NULL;
+		status = parse_option (&buffer, &opt_key, &opt_value);
+		if (status != 0)
 		{
-			char *plugin = option + strlen ("plugin=");
+			print_to_socket (fh, "-1 Parsing options failed.\n");
+			sfree (plugins);
+			sfree (identifiers);
+			return (-1);
+		}
 
-			if (0 == plugin_flush_one (timeout, plugin))
-				++success;
-			else
-				++error;
+		if (strcasecmp ("plugin", opt_key) == 0)
+		{
+			add_to_array (&plugins, &plugins_num, opt_value);
 		}
-		else if (strncasecmp ("timeout=", option, strlen ("timeout=")) == 0)
+		else if (strcasecmp ("identifier", opt_key) == 0)
 		{
-			char *endptr = NULL;
-			char *value  = option + strlen ("timeout=");
-
+			add_to_array (&identifiers, &identifiers_num, opt_value);
+		}
+		else if (strcasecmp ("timeout", opt_key) == 0)
+		{
+			char *endptr;
+			
 			errno = 0;
-			timeout = strtol (value, &endptr, 0);
+			endptr = NULL;
+			timeout = strtol (opt_value, &endptr, 0);
 
-			if ((endptr == value) || (0 != errno))
-				status = -1;
-			else if (0 >= timeout)
+			if ((endptr == opt_value) || (errno != 0))
+			{
+				print_to_socket (fh, "-1 Invalid value for option `timeout': "
+						"%s\n", opt_value);
+				sfree (plugins);
+				sfree (identifiers);
+				return (-1);
+			}
+			else if (timeout <= 0)
 				timeout = -1;
 		}
 		else
-			status = -1;
-
-		if (status != 0)
 		{
-			print_to_socket (fh, "-1 Cannot parse option %s\n", option);
+			print_to_socket (fh, "-1 Cannot parse option %s\n", opt_key);
+			sfree (plugins);
+			sfree (identifiers);
 			return (-1);
 		}
+	} /* while (*buffer != 0) */
+
+	/* Add NULL entries for `any plugin' and/or `any value' if nothing was
+	 * specified. */
+	if (plugins_num == 0)
+		add_to_array (&plugins, &plugins_num, NULL);
+
+	if (identifiers_num == 0)
+		add_to_array (&identifiers, &identifiers_num, NULL);
+
+	for (i = 0; i < plugins_num; i++)
+	{
+		char *plugin;
+		int j;
+
+		plugin = plugins[i];
+
+		for (j = 0; j < identifiers_num; j++)
+		{
+			char *identifier;
+			int status;
+
+			identifier = identifiers[j];
+			status = plugin_flush (plugin, timeout, identifier);
+			if (status == 0)
+				success++;
+			else
+				error++;
+		}
 	}
 
 	if ((success + error) > 0)
 	{
 		print_to_socket (fh, "0 Done: %i successful, %i errors\n",
 				success, error);
 	}
 	else
 	{
-		plugin_flush_all (timeout);
+		plugin_flush (NULL, timeout, NULL);
 		print_to_socket (fh, "0 Done\n");
 	}
 
+	sfree (plugins);
+	sfree (identifiers);
 	return (0);
 } /* int handle_flush */
 
 /* vim: set sw=4 ts=4 tw=78 noexpandtab : */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_flush.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_flush.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_flush.h	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_flush.h	2008-09-04 21:01:15.000000000 +0800
@@ -19,12 +19,12 @@
  *   Sebastian "tokkee" Harl <sh at tokkee.org>
  **/
 
 #ifndef UTILS_CMD_FLUSH_H
 #define UTILS_CMD_FLUSH_H 1
 
-int handle_flush (FILE *fh, char **fields, int fields_num);
+int handle_flush (FILE *fh, char *buffer);
 
 #endif /* UTILS_CMD_FLUSH_H */
 
 /* vim: set sw=4 ts=4 tw=78 noexpandtab : */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_getval.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_getval.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_getval.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_getval.c	2008-09-04 21:01:15.000000000 +0800
@@ -21,80 +21,104 @@
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 
 #include "utils_cache.h"
+#include "utils_parse_option.h"
 
 #define print_to_socket(fh, ...) \
   if (fprintf (fh, __VA_ARGS__) < 0) { \
     char errbuf[1024]; \
     WARNING ("handle_getval: failed to write to socket #%i: %s", \
 	fileno (fh), sstrerror (errno, errbuf, sizeof (errbuf))); \
     return -1; \
   }
 
-int handle_getval (FILE *fh, char **fields, int fields_num)
+int handle_getval (FILE *fh, char *buffer)
 {
+  char *command;
+  char *identifier;
+  char *identifier_copy;
+
   char *hostname;
   char *plugin;
   char *plugin_instance;
   char *type;
   char *type_instance;
   gauge_t *values;
   size_t values_num;
 
-  char *identifier_copy;
-
   const data_set_t *ds;
 
   int   status;
   int   i;
 
-  if (fields_num != 2)
+  if ((fh == NULL) || (buffer == NULL))
+    return (-1);
+
+  DEBUG ("utils_cmd_getval: handle_getval (fh = %p, buffer = %s);",
+      (void *) fh, buffer);
+
+  command = NULL;
+  status = parse_string (&buffer, &command);
+  if (status != 0)
   {
-    DEBUG ("unixsock plugin: Wrong number of fields: %i", fields_num);
-    print_to_socket (fh, "-1 Wrong number of fields: Got %i, expected 2.\n",
-	fields_num);
+    print_to_socket (fh, "-1 Cannot parse command.\n");
     return (-1);
   }
-  DEBUG ("unixsock plugin: Got query for `%s'", fields[1]);
+  assert (command != NULL);
 
-  if (strlen (fields[1]) < strlen ("h/p/t"))
+  if (strcasecmp ("GETVAL", command) != 0)
   {
-    print_to_socket (fh, "-1 Invalied identifier, %s\n", fields[1]);
+    print_to_socket (fh, "-1 Unexpected command: `%s'.\n", command);
+    return (-1);
+  }
+
+  identifier = NULL;
+  status = parse_string (&buffer, &identifier);
+  if (status != 0)
+  {
+    print_to_socket (fh, "-1 Cannot parse identifier.\n");
+    return (-1);
+  }
+  assert (identifier != NULL);
+
+  if (*buffer != 0)
+  {
+    print_to_socket (fh, "-1 Garbage after end of command: %s\n", buffer);
     return (-1);
   }
 
   /* parse_identifier() modifies its first argument,
    * returning pointers into it */
-  identifier_copy = sstrdup (fields[1]);
+  identifier_copy = sstrdup (identifier);
 
   status = parse_identifier (identifier_copy, &hostname,
       &plugin, &plugin_instance,
       &type, &type_instance);
   if (status != 0)
   {
-    DEBUG ("unixsock plugin: Cannot parse `%s'", fields[1]);
-    print_to_socket (fh, "-1 Cannot parse identifier.\n");
+    DEBUG ("handle_getval: Cannot parse identifier `%s'.", identifier);
+    print_to_socket (fh, "-1 Cannot parse identifier `%s'.\n", identifier);
     sfree (identifier_copy);
     return (-1);
   }
 
   ds = plugin_get_ds (type);
   if (ds == NULL)
   {
-    DEBUG ("unixsock plugin: plugin_get_ds (%s) == NULL;", type);
+    DEBUG ("handle_getval: plugin_get_ds (%s) == NULL;", type);
     print_to_socket (fh, "-1 Type `%s' is unknown.\n", type);
     sfree (identifier_copy);
     return (-1);
   }
 
   values = NULL;
   values_num = 0;
-  status = uc_get_rate_by_name (fields[1], &values, &values_num);
+  status = uc_get_rate_by_name (identifier, &values, &values_num);
   if (status != 0)
   {
     print_to_socket (fh, "-1 No such value\n");
     sfree (identifier_copy);
     return (-1);
   }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_getval.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_getval.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_getval.h	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_getval.h	2008-09-04 21:01:15.000000000 +0800
@@ -19,11 +19,11 @@
  *   Florian octo Forster <octo at verplant.org>
  **/
 
 #ifndef UTILS_CMD_GETVAL_H
 #define UTILS_CMD_GETVAL_H 1
 
-int handle_getval (FILE *fh, char **fields, int fields_num);
+int handle_getval (FILE *fh, char *buffer);
 
 #endif /* UTILS_CMD_GETVAL_H */
 
 /* vim: set sw=2 sts=2 ts=8 : */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_listval.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_listval.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_listval.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_listval.c	2008-09-04 21:01:15.000000000 +0800
@@ -22,35 +22,52 @@
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 
 #include "utils_cmd_listval.h"
 #include "utils_cache.h"
+#include "utils_parse_option.h"
 
 #define print_to_socket(fh, ...) \
   if (fprintf (fh, __VA_ARGS__) < 0) { \
     char errbuf[1024]; \
     WARNING ("handle_listval: failed to write to socket #%i: %s", \
 	fileno (fh), sstrerror (errno, errbuf, sizeof (errbuf))); \
     return -1; \
   }
 
-int handle_listval (FILE *fh, char **fields, int fields_num)
+int handle_listval (FILE *fh, char *buffer)
 {
+  char *command;
   char **names = NULL;
   time_t *times = NULL;
   size_t number = 0;
   size_t i;
   int status;
 
-  if (fields_num != 1)
+  DEBUG ("utils_cmd_listval: handle_listval (fh = %p, buffer = %s);",
+      (void *) fh, buffer);
+
+  command = NULL;
+  status = parse_string (&buffer, &command);
+  if (status != 0)
+  {
+    print_to_socket (fh, "-1 Cannot parse command.\n");
+    return (-1);
+  }
+  assert (command != NULL);
+
+  if (strcasecmp ("LISTVAL", command) != 0)
+  {
+    print_to_socket (fh, "-1 Unexpected command: `%s'.\n", command);
+    return (-1);
+  }
+
+  if (*buffer != 0)
   {
-    DEBUG ("command listval: us_handle_listval: Wrong number of fields: %i",
-	fields_num);
-    print_to_socket (fh, "-1 Wrong number of fields: Got %i, expected 1.\n",
-	fields_num);
+    print_to_socket (fh, "-1 Garbage after end of command: %s\n", buffer);
     return (-1);
   }
 
   status = uc_get_names (&names, &times, &number);
   if (status != 0)
   {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_listval.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_listval.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_listval.h	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_listval.h	2008-09-04 21:01:15.000000000 +0800
@@ -19,11 +19,11 @@
  *   Florian octo Forster <octo at verplant.org>
  **/
 
 #ifndef UTILS_CMD_LISTVAL_H
 #define UTILS_CMD_LISTVAL_H 1
 
-int handle_listval (FILE *fh, char **fields, int fields_num);
+int handle_listval (FILE *fh, char *buffer);
 
 #endif /* UTILS_CMD_LISTVAL_H */
 
 /* vim: set sw=2 sts=2 ts=8 : */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_putnotif.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_putnotif.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_putnotif.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_putnotif.c	2008-09-04 21:01:15.000000000 +0800
@@ -20,64 +20,63 @@
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 
+#include "utils_parse_option.h"
+
 #define print_to_socket(fh, ...) \
   if (fprintf (fh, __VA_ARGS__) < 0) { \
     char errbuf[1024]; \
     WARNING ("handle_putnotif: failed to write to socket #%i: %s", \
 	fileno (fh), sstrerror (errno, errbuf, sizeof (errbuf))); \
     return -1; \
   }
 
-static int parse_option_severity (notification_t *n, char *value)
+static int set_option_severity (notification_t *n, const char *value)
 {
   if (strcasecmp (value, "Failure") == 0)
     n->severity = NOTIF_FAILURE;
   else if (strcasecmp (value, "Warning") == 0)
     n->severity = NOTIF_WARNING;
   else if (strcasecmp (value, "Okay") == 0)
     n->severity = NOTIF_OKAY;
   else
     return (-1);
 
   return (0);
-} /* int parse_option_severity */
+} /* int set_option_severity */
 
-static int parse_option_time (notification_t *n, char *value)
+static int set_option_time (notification_t *n, const char *value)
 {
   time_t tmp;
   
   tmp = (time_t) atoi (value);
   if (tmp <= 0)
     return (-1);
 
   n->time = tmp;
 
   return (0);
-} /* int parse_option_time */
+} /* int set_option_time */
 
-static int parse_option (notification_t *n, char *buffer)
+static int set_option (notification_t *n, const char *option, const char *value)
 {
-  char *option = buffer;
-  char *value;
-
-  if ((n == NULL) || (option == NULL))
+  if ((n == NULL) || (option == NULL) || (value == NULL))
     return (-1);
 
-  value = strchr (option, '=');
-  if (value == NULL)
-    return (-1);
-  *value = '\0'; value++;
+  DEBUG ("utils_cmd_putnotif: set_option (option = %s, value = %s);",
+      option, value);
 
   if (strcasecmp ("severity", option) == 0)
-    return (parse_option_severity (n, value));
+    return (set_option_severity (n, value));
   else if (strcasecmp ("time", option) == 0)
-    return (parse_option_time (n, value));
+    return (set_option_time (n, value));
+  else if (strcasecmp ("message", option) == 0)
+    sstrncpy (n->message, value, sizeof (n->message));
   else if (strcasecmp ("host", option) == 0)
     sstrncpy (n->host, value, sizeof (n->host));
   else if (strcasecmp ("plugin", option) == 0)
     sstrncpy (n->plugin, value, sizeof (n->plugin));
   else if (strcasecmp ("plugin_instance", option) == 0)
     sstrncpy (n->plugin_instance, value, sizeof (n->plugin_instance));
@@ -86,67 +85,61 @@
   else if (strcasecmp ("type_instance", option) == 0)
     sstrncpy (n->type_instance, value, sizeof (n->type_instance));
   else
     return (1);
 
   return (0);
-} /* int parse_option */
+} /* int set_option */
 
-static int parse_message (notification_t *n, char **fields, int fields_num)
+int handle_putnotif (FILE *fh, char *buffer)
 {
+  char *command;
+  notification_t n;
   int status;
 
-  /* Strip off the leading `message=' */
-  fields[0] += strlen ("message=");
-
-  status = strjoin (n->message, sizeof (n->message), fields, fields_num, " ");
-  if (status < 0)
+  if ((fh == NULL) || (buffer == NULL))
     return (-1);
 
-  return (0);
-} /* int parse_message */
+  DEBUG ("utils_cmd_putnotif: handle_putnotif (fh = %p, buffer = %s);",
+      (void *) fh, buffer);
 
-int handle_putnotif (FILE *fh, char **fields, int fields_num)
-{
-  notification_t n;
-  int status;
-  int i;
+  command = NULL;
+  status = parse_string (&buffer, &command);
+  if (status != 0)
+  {
+    print_to_socket (fh, "-1 Cannot parse command.\n");
+    return (-1);
+  }
+  assert (command != NULL);
 
-  /* Required fields: `PUTNOTIF', severity, time, message */
-  if (fields_num < 4)
+  if (strcasecmp ("PUTNOTIF", command) != 0)
   {
-    DEBUG ("cmd putnotif: Wrong number of fields: %i", fields_num);
-    print_to_socket (fh, "-1 Wrong number of fields: Got %i, "
-	"expected at least 4.\n",
-	fields_num);
+    print_to_socket (fh, "-1 Unexpected command: `%s'.\n", command);
     return (-1);
   }
 
   memset (&n, '\0', sizeof (n));
 
   status = 0;
-  for (i = 1; i < fields_num; i++)
+  while (*buffer != 0)
   {
-    if (strncasecmp (fields[i], "message=", strlen ("message=")) == 0)
+    char *key;
+    char *value;
+
+    status = parse_option (&buffer, &key, &value);
+    if (status != 0)
     {
-      status = parse_message (&n, fields + i, fields_num - i);
-      if (status != 0)
-      {
-	print_to_socket (fh, "-1 Error parsing the message. Have you hit the "
-	    "limit of %u bytes?\n", (unsigned int) sizeof (n.message));
-      }
+      print_to_socket (fh, "-1 Malformed option.\n");
       break;
     }
-    else
+
+    status = set_option (&n, key, value);
+    if (status != 0)
     {
-      status = parse_option (&n, fields[i]);
-      if (status != 0)
-      {
-	print_to_socket (fh, "-1 Error parsing option `%s'\n", fields[i]);
-	break;
-      }
+      print_to_socket (fh, "-1 Error parsing option `%s'\n", key);
+      break;
     }
   } /* for (i) */
 
   /* Check for required fields and complain if anything is missing. */
   if ((status == 0) && (n.severity == 0))
   {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_putnotif.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_putnotif.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_putnotif.h	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_putnotif.h	2008-09-04 21:01:15.000000000 +0800
@@ -19,11 +19,11 @@
  *   Florian octo Forster <octo at verplant.org>
  **/
 
 #ifndef UTILS_CMD_PUTNOTIF_H
 #define UTILS_CMD_PUTNOTIF_H 1
 
-int handle_putnotif (FILE *fh, char **fields, int fields_num);
+int handle_putnotif (FILE *fh, char *buffer);
 
 /* vim: set shiftwidth=2 softtabstop=2 tabstop=8 : */
 
 #endif /* UTILS_CMD_PUTNOTIF_H */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_putval.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_putval.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_putval.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_putval.c	2008-09-04 21:01:15.000000000 +0800
@@ -1,9 +1,9 @@
 /**
  * collectd - src/utils_cms_putval.c
- * Copyright (C) 2007  Florian octo Forster
+ * Copyright (C) 2007,2008  Florian octo Forster
  *
  * This program is free software; you can redistribute it and/or modify it
  * under the terms of the GNU General Public License as published by the
  * Free Software Foundation; only version 2 of the License is applicable.
  *
  * This program is distributed in the hope that it will be useful, but
@@ -20,22 +20,23 @@
  **/
 
 #include "collectd.h"
 #include "common.h"
 #include "plugin.h"
 
+#include "utils_parse_option.h"
+
 #define print_to_socket(fh, ...) \
 	if (fprintf (fh, __VA_ARGS__) < 0) { \
 		char errbuf[1024]; \
 		WARNING ("handle_putval: failed to write to socket #%i: %s", \
 				fileno (fh), sstrerror (errno, errbuf, sizeof (errbuf))); \
 		return -1; \
 	}
 
 static int parse_value (const data_set_t *ds, value_list_t *vl,
-		const char *type,
 	       	FILE *fh, char *buffer)
 {
 	char *dummy;
 	char *ptr;
 	char *saveptr;
 	int i;
@@ -87,77 +88,97 @@
 		print_to_socket (fh, "-1 Number of values incorrect: "
 				"Got %i, expected %i.\n",
 			       	i, vl->values_len);
 		return (-1);
 	}
 
-	plugin_dispatch_values (type, vl);
+	plugin_dispatch_values (vl);
 	return (0);
 } /* int parse_value */
 
-static int parse_option (value_list_t *vl, char *buffer)
+static int set_option (value_list_t *vl, const char *key, const char *value)
 {
-	char *option = buffer;
-	char *value;
-
-	if ((vl == NULL) || (option == NULL))
-		return (-1);
-
-	value = strchr (option, '=');
-	if (value == NULL)
+	if ((vl == NULL) || (key == NULL) || (value == NULL))
 		return (-1);
-	*value = '\0'; value++;
 
-	if (strcasecmp ("interval", option) == 0)
+	if (strcasecmp ("interval", key) == 0)
 	{
-		vl->interval = atoi (value);
-		if (vl->interval <= 0)
-			vl->interval = interval_g;
+		int tmp;
+		char *endptr;
+
+		endptr = NULL;
+		errno = 0;
+		tmp = strtol (value, &endptr, 0);
+
+		if ((errno == 0) && (endptr != NULL)
+				&& (endptr != value) && (tmp > 0))
+			vl->interval = tmp;
 	}
 	else
 		return (1);
 
 	return (0);
 } /* int parse_option */
 
-int handle_putval (FILE *fh, char **fields, int fields_num)
+int handle_putval (FILE *fh, char *buffer)
 {
+	char *command;
+	char *identifier;
 	char *hostname;
 	char *plugin;
 	char *plugin_instance;
 	char *type;
 	char *type_instance;
 	int   status;
-	int   i;
+	int   values_submitted;
 
 	char *identifier_copy;
 
 	const data_set_t *ds;
 	value_list_t vl = VALUE_LIST_INIT;
 
-	if (fields_num < 3)
+	DEBUG ("utils_cmd_putval: handle_putval (fh = %p, buffer = %s);",
+			(void *) fh, buffer);
+
+	command = NULL;
+	status = parse_string (&buffer, &command);
+	if (status != 0)
+	{
+		print_to_socket (fh, "-1 Cannot parse command.\n");
+		return (-1);
+	}
+	assert (command != NULL);
+
+	if (strcasecmp ("PUTVAL", command) != 0)
+	{
+		print_to_socket (fh, "-1 Unexpected command: `%s'.\n", command);
+		return (-1);
+	}
+
+	identifier = NULL;
+	status = parse_string (&buffer, &identifier);
+	if (status != 0)
 	{
-		DEBUG ("cmd putval: Wrong number of fields: %i",
-			       	fields_num);
-		print_to_socket (fh, "-1 Wrong number of fields: Got %i, "
-				"expected at least 3.\n",
-				fields_num);
+		print_to_socket (fh, "-1 Cannot parse identifier.\n");
 		return (-1);
 	}
+	assert (identifier != NULL);
 
 	/* parse_identifier() modifies its first argument,
 	 * returning pointers into it */
-	identifier_copy = sstrdup (fields[1]);
+	identifier_copy = sstrdup (identifier);
 
 	status = parse_identifier (identifier_copy, &hostname,
 			&plugin, &plugin_instance,
 			&type, &type_instance);
 	if (status != 0)
 	{
-		DEBUG ("cmd putval: Cannot parse `%s'", fields[1]);
-		print_to_socket (fh, "-1 Cannot parse identifier.\n");
+		DEBUG ("handle_putval: Cannot parse identifier `%s'.",
+				identifier);
+		print_to_socket (fh, "-1 Cannot parse identifier `%s'.\n",
+				identifier);
 		sfree (identifier_copy);
 		return (-1);
 	}
 
 	if ((strlen (hostname) >= sizeof (vl.host))
 			|| (strlen (plugin) >= sizeof (vl.plugin))
@@ -170,65 +191,85 @@
 		sfree (identifier_copy);
 		return (-1);
 	}
 
 	sstrncpy (vl.host, hostname, sizeof (vl.host));
 	sstrncpy (vl.plugin, plugin, sizeof (vl.plugin));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 	if (plugin_instance != NULL)
 		sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
 	if (type_instance != NULL)
 		sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
 	ds = plugin_get_ds (type);
 	if (ds == NULL) {
+		print_to_socket (fh, "-1 Type `%s' isn't defined.\n", type);
 		sfree (identifier_copy);
 		return (-1);
 	}
 
+	/* Free identifier_copy */
+	hostname = NULL;
+	plugin = NULL; plugin_instance = NULL;
+	type = NULL;   type_instance = NULL;
+	sfree (identifier_copy);
+
 	vl.values_len = ds->ds_num;
 	vl.values = (value_t *) malloc (vl.values_len * sizeof (value_t));
 	if (vl.values == NULL)
 	{
 		print_to_socket (fh, "-1 malloc failed.\n");
-		sfree (identifier_copy);
 		return (-1);
 	}
 
 	/* All the remaining fields are part of the optionlist. */
-	for (i = 2; i < fields_num; i++)
+	values_submitted = 0;
+	while (*buffer != 0)
 	{
-		if (strchr (fields[i], ':') != NULL)
+		char *string = NULL;
+		char *value  = NULL;
+
+		status = parse_option (&buffer, &string, &value);
+		if (status < 0)
 		{
-			/* It's parse_value's job to write an error to `fh'.
-			 * This is not the case with `parse_option below.
-			 * Neither will write an success message. */
-			if (parse_value (ds, &vl, type, fh, fields[i]) != 0)
-				break;
+			/* parse_option failed, buffer has been modified.
+			 * => we need to abort */
+			print_to_socket (fh, "-1 Misformatted option.\n");
+			return (-1);
 		}
-		else if (strchr (fields[i], '=') != NULL)
+		else if (status == 0)
 		{
-			if (parse_option (&vl, fields[i]) != 0)
-			{
-				print_to_socket (fh, "-1 Error parsing option `%s'\n",
-						fields[i]);
-				break;
-			}
+			assert (string != NULL);
+			assert (value != NULL);
+			set_option (&vl, string, value);
+			continue;
 		}
-		else
+		/* else: parse_option but buffer has not been modified. This is
+		 * the default if no `=' is found.. */
+
+		status = parse_string (&buffer, &string);
+		if (status != 0)
 		{
-			WARNING ("cmd putval: handle_putval: "
-					"Cannot parse field #%i `%s'; "
-					"Ignoring it.\n",
-					i, fields[i]);
+			print_to_socket (fh, "-1 Misformatted value.\n");
+			return (-1);
 		}
-	}
+		assert (string != NULL);
+
+		status = parse_value (ds, &vl, fh, string);
+		if (status != 0)
+		{
+			/* An error has already been printed. */
+			return (-1);
+		}
+		values_submitted++;
+	} /* while (*buffer != 0) */
 	/* Done parsing the options. */
 
-	if (i == fields_num)
-		print_to_socket (fh, "0 Success\n");
+	print_to_socket (fh, "0 Success: %i %s been dispatched.\n",
+			values_submitted,
+			(values_submitted == 1) ? "value has" : "values have");
 
 	sfree (vl.values); 
-	sfree (identifier_copy);
 
 	return (0);
 } /* int handle_putval */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_putval.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_putval.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_cmd_putval.h	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_cmd_putval.h	2008-09-04 21:01:15.000000000 +0800
@@ -19,9 +19,9 @@
  *   Florian octo Forster <octo at verplant.org>
  **/
 
 #ifndef UTILS_CMD_PUTVAL_H
 #define UTILS_CMD_PUTVAL_H 1
 
-int handle_putval (FILE *fh, char **fields, int fields_num);
+int handle_putval (FILE *fh, char *buffer);
 
 #endif /* UTILS_CMD_PUTVAL_H */
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: utils_complain.c
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: utils_complain.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_dns.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_dns.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_dns.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_dns.c	2008-09-04 21:01:15.000000000 +0800
@@ -31,13 +31,13 @@
  * Authors:
  *   The Measurement Factory, Inc. <http://www.measurement-factory.com/>
  *   Florian octo Forster <octo at verplant.org>
  */
 
 #include "collectd.h"
-#include "plugin.h"
+#include "common.h"
 
 #if HAVE_NETINET_IN_SYSTM_H
 # include <netinet/in_systm.h>
 #endif
 #if HAVE_NETINET_IN_H
 # include <netinet/in.h>
@@ -352,12 +352,13 @@
 
     memcpy(&us, buf + 0, 2);
     qh.id = ntohs(us);
 
     memcpy(&us, buf + 2, 2);
     us = ntohs(us);
+    fprintf (stderr, "Bytes 0, 1: 0x%04hx\n", us);
     qh.qr = (us >> 15) & 0x01;
     qh.opcode = (us >> 11) & 0x0F;
     qh.aa = (us >> 10) & 0x01;
     qh.tc = (us >> 9) & 0x01;
     qh.rd = (us >> 8) & 0x01;
     qh.ra = (us >> 7) & 0x01;
@@ -381,19 +382,19 @@
     offset = 12;
     memset(qh.qname, '\0', MAX_QNAME_SZ);
     x = rfc1035NameUnpack(buf, len, &offset, qh.qname, MAX_QNAME_SZ);
     if (0 != x)
 	return 0;
     if ('\0' == qh.qname[0])
-	strncpy (qh.qname, ".", sizeof (qh.qname));
+	sstrncpy (qh.qname, ".", sizeof (qh.qname));
     while ((t = strchr(qh.qname, '\n')))
 	*t = ' ';
     while ((t = strchr(qh.qname, '\r')))
 	*t = ' ';
     for (t = qh.qname; *t; t++)
-	*t = tolower((int) *t);
+	*t = tolower(*t);
 
     memcpy(&us, buf + offset, 2);
     qh.qtype = ntohs(us);
     memcpy(&us, buf + offset + 2, 2);
     qh.qclass = ntohs(us);
 
@@ -645,13 +646,13 @@
 
 /* public function */
 void handle_pcap(u_char *udata, const struct pcap_pkthdr *hdr, const u_char *pkt)
 {
     int status;
 
-    DEBUG ("handle_pcap (udata = %p, hdr = %p, pkt = %p): hdr->caplen = %i\n",
+    fprintf (stderr, "handle_pcap (udata = %p, hdr = %p, pkt = %p): hdr->caplen = %i\n",
 		    (void *) udata, (void *) hdr, (void *) pkt,
 		    hdr->caplen);
 
     if (hdr->caplen < ETHER_HDR_LEN)
 	return;
 
@@ -682,13 +683,13 @@
 #endif
 	case DLT_NULL:
 	    status = handle_null (pkt, hdr->caplen);
 	    break;
 
 	default:
-	    ERROR ("handle_pcap: unsupported data link type %d\n",
+	    fprintf (stderr, "unsupported data link type %d\n",
 		    pcap_datalink(pcap_obj));
 	    status = 0;
 	    break;
     } /* switch (pcap_datalink(pcap_obj)) */
 
     if (0 == status)
@@ -812,14 +813,13 @@
 	    case T_AXFR:	return ("AXFR");
 	    case T_MAILB:	return ("MAILB");
 	    case T_MAILA:	return ("MAILA");
 	    case T_ANY:		return ("ANY"); /* ... 255 */
 #endif /* __BIND >= 19950621 */
 	    default:
-		    snprintf (buf, 32, "#%i", t);
-		    buf[31] = '\0';
+		    ssnprintf (buf, sizeof (buf), "#%i", t);
 		    return (buf);
     }; /* switch (t) */
     /* NOTREACHED */
     return (NULL);
 }
 
@@ -840,13 +840,13 @@
 	return "Notify";
 	break;
     case 5:
 	return "Update";
 	break;
     default:
-	snprintf(buf, 30, "Opcode%d", o);
+	ssnprintf(buf, sizeof (buf), "Opcode%d", o);
 	return buf;
     }
     /* NOTREACHED */
 }
 
 const char *rcode_str (int rcode)
@@ -884,14 +884,13 @@
 		case NXRRSET:	    return ("NXRRSET");
 		case NOTAUTH:	    return ("NOTAUTH");
 		case NOTZONE:	    return ("NOTZONE");
 #endif  /* RFC2136 rcodes */
 #endif /* __BIND >= 19950621 */
 		default:
-			snprintf (buf, 32, "RCode%i", rcode);
-			buf[31] = '\0';
+			ssnprintf (buf, sizeof (buf), "RCode%i", rcode);
 			return (buf);
 	}
 	/* Never reached */
 	return (NULL);
 } /* const char *rcode_str (int rcode) */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_ignorelist.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_ignorelist.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_ignorelist.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_ignorelist.c	2008-09-04 21:01:15.000000000 +0800
@@ -303,19 +303,17 @@
 
 #if HAVE_REGEX_H
 	/* regex string is enclosed in "/.../" */
 	if ((entry_len > 2) && (entry[0] == '/') && entry[entry_len - 1] == '/')
 	{
 		char *entry_copy;
-		size_t entry_copy_size;
 
 		/* We need to copy `entry' since it's const */
-		entry_copy_size = entry_len - 1;
-		entry_copy = smalloc (entry_copy_size);
-		strncpy (entry_copy, entry + 1, entry_copy_size);
-		entry_copy[entry_copy_size - 1] = 0;
+		entry_copy = smalloc (entry_len);
+		memset (entry_copy, '\0', entry_len);
+		sstrncpy (entry_copy, entry + 1, entry_len - 2);
 
 		DEBUG("I'm about to add regex entry: %s", entry_copy);
 		ret = ignorelist_append_regex(il, entry_copy);
 		sfree (entry_copy);
 	}
 	else
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_mount.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_mount.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_mount.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_mount.c	2008-09-04 21:01:15.000000000 +0800
@@ -257,13 +257,13 @@
 			* Perhaps this directory should be specifiable by option.
 			* One might for example have /devlabel with links to /dev
 			* for the devices that may be accessed in this way.
 			* (This is useful, if the cdrom on /dev/hdc must not
 			* be accessed.)
 			*/
-				snprintf(device, sizeof(device), "%s/%s",
+				ssnprintf(device, sizeof(device), "%s/%s",
 					DEVLABELDIR, ptname);
 				if(!get_label_uuid(device, &label, uuid)) {
 					uuidcache_addentry(sstrdup(device),
 						label, uuid);
 				}
 			}
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: utils_parse_option.c
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src: utils_parse_option.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_tail.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_tail.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_tail.c	2008-11-25 21:04:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_tail.c	2008-09-04 21:00:55.000000000 +0800
@@ -159,13 +159,12 @@
       return (status);
   }
   assert (obj->fh != NULL);
 
   /* Try to read from the filehandle. If that succeeds, everything appears to
    * be fine and we can return. */
-  clearerr (obj->fh);
   if (fgets (buf, buflen, obj->fh) != NULL)
   {
     buf[buflen - 1] = 0;
     return (0);
   }
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_tail_match.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_tail_match.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_tail_match.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_tail_match.c	2008-09-04 21:01:15.000000000 +0800
@@ -82,16 +82,17 @@
   vl.values_len = 1;
   vl.time = time (NULL);
   sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   sstrncpy (vl.plugin, data->plugin, sizeof (vl.plugin));
   sstrncpy (vl.plugin_instance, data->plugin_instance,
       sizeof (vl.plugin_instance));
+  sstrncpy (vl.type, data->type, sizeof (vl.type));
   sstrncpy (vl.type_instance, data->type_instance,
       sizeof (vl.type_instance));
 
-  plugin_dispatch_values (data->type, &vl);
+  plugin_dispatch_values (&vl);
 
   if (match_value->ds_type & UTILS_MATCH_DS_TYPE_GAUGE)
   {
     match_value->value.gauge = NAN;
     match_value->values_num = 0;
   }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_threshold.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_threshold.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/utils_threshold.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/utils_threshold.c	2008-09-04 21:01:15.000000000 +0800
@@ -181,15 +181,14 @@
   {
     WARNING ("threshold values: The `Instance' option needs exactly one "
 	"string argument.");
     return (-1);
   }
 
-  strncpy (th->type_instance, ci->values[0].value.string,
+  sstrncpy (th->type_instance, ci->values[0].value.string,
       sizeof (th->type_instance));
-  th->type_instance[sizeof (th->type_instance) - 1] = '\0';
 
   return (0);
 } /* int ut_config_type_instance */
 
 static int ut_config_type_max (threshold_t *th, oconfig_item_t *ci)
 {
@@ -281,14 +280,13 @@
   {
     WARNING ("threshold values: The `Type' block needs at least one option.");
     return (-1);
   }
 
   memcpy (&th, th_orig, sizeof (th));
-  strncpy (th.type, ci->values[0].value.string, sizeof (th.type));
-  th.type[sizeof (th.type) - 1] = '\0';
+  sstrncpy (th.type, ci->values[0].value.string, sizeof (th.type));
 
   th.warning_min = NAN;
   th.warning_max = NAN;
   th.failure_min = NAN;
   th.failure_max = NAN;
 
@@ -337,15 +335,14 @@
   {
     WARNING ("threshold values: The `Instance' option needs exactly one "
 	"string argument.");
     return (-1);
   }
 
-  strncpy (th->plugin_instance, ci->values[0].value.string,
+  sstrncpy (th->plugin_instance, ci->values[0].value.string,
       sizeof (th->plugin_instance));
-  th->plugin_instance[sizeof (th->plugin_instance) - 1] = '\0';
 
   return (0);
 } /* int ut_config_plugin_instance */
 
 static int ut_config_plugin (const threshold_t *th_orig, oconfig_item_t *ci)
 {
@@ -366,14 +363,13 @@
     WARNING ("threshold values: The `Plugin' block needs at least one nested "
 	"block.");
     return (-1);
   }
 
   memcpy (&th, th_orig, sizeof (th));
-  strncpy (th.plugin, ci->values[0].value.string, sizeof (th.plugin));
-  th.plugin[sizeof (th.plugin) - 1] = '\0';
+  sstrncpy (th.plugin, ci->values[0].value.string, sizeof (th.plugin));
 
   for (i = 0; i < ci->children_num; i++)
   {
     oconfig_item_t *option = ci->children + i;
     status = 0;
 
@@ -414,14 +410,13 @@
     WARNING ("threshold values: The `Host' block needs at least one nested "
 	"block.");
     return (-1);
   }
 
   memcpy (&th, th_orig, sizeof (th));
-  strncpy (th.host, ci->values[0].value.string, sizeof (th.host));
-  th.host[sizeof (th.host) - 1] = '\0';
+  sstrncpy (th.host, ci->values[0].value.string, sizeof (th.host));
 
   for (i = 0; i < ci->children_num; i++)
   {
     oconfig_item_t *option = ci->children + i;
     status = 0;
 
@@ -498,52 +493,51 @@
 } /* int um_config */
 /*
  * End of the functions used to configure threshold values.
  */
 /* }}} */
 
-static threshold_t *threshold_search (const data_set_t *ds,
-    const value_list_t *vl)
+static threshold_t *threshold_search (const value_list_t *vl)
 {
   threshold_t *th;
 
   if ((th = threshold_get (vl->host, vl->plugin, vl->plugin_instance,
-	  ds->type, vl->type_instance)) != NULL)
+	  vl->type, vl->type_instance)) != NULL)
     return (th);
   else if ((th = threshold_get (vl->host, vl->plugin, vl->plugin_instance,
-	  ds->type, NULL)) != NULL)
+	  vl->type, NULL)) != NULL)
     return (th);
   else if ((th = threshold_get (vl->host, vl->plugin, NULL,
-	  ds->type, vl->type_instance)) != NULL)
+	  vl->type, vl->type_instance)) != NULL)
     return (th);
   else if ((th = threshold_get (vl->host, vl->plugin, NULL,
-	  ds->type, NULL)) != NULL)
+	  vl->type, NULL)) != NULL)
     return (th);
   else if ((th = threshold_get (vl->host, "", NULL,
-	  ds->type, vl->type_instance)) != NULL)
+	  vl->type, vl->type_instance)) != NULL)
     return (th);
   else if ((th = threshold_get (vl->host, "", NULL,
-	  ds->type, NULL)) != NULL)
+	  vl->type, NULL)) != NULL)
     return (th);
   else if ((th = threshold_get ("", vl->plugin, vl->plugin_instance,
-	  ds->type, vl->type_instance)) != NULL)
+	  vl->type, vl->type_instance)) != NULL)
     return (th);
   else if ((th = threshold_get ("", vl->plugin, vl->plugin_instance,
-	  ds->type, NULL)) != NULL)
+	  vl->type, NULL)) != NULL)
     return (th);
   else if ((th = threshold_get ("", vl->plugin, NULL,
-	  ds->type, vl->type_instance)) != NULL)
+	  vl->type, vl->type_instance)) != NULL)
     return (th);
   else if ((th = threshold_get ("", vl->plugin, NULL,
-	  ds->type, NULL)) != NULL)
+	  vl->type, NULL)) != NULL)
     return (th);
   else if ((th = threshold_get ("", "", NULL,
-	  ds->type, vl->type_instance)) != NULL)
+	  vl->type, vl->type_instance)) != NULL)
     return (th);
   else if ((th = threshold_get ("", "", NULL,
-	  ds->type, NULL)) != NULL)
+	  vl->type, NULL)) != NULL)
     return (th);
 
   return (NULL);
 } /* threshold_t *threshold_search */
 
 /*
@@ -594,41 +588,49 @@
     n.severity = NOTIF_WARNING;
   else
     n.severity = NOTIF_FAILURE;
 
   n.time = vl->time;
 
-  status = snprintf (buf, bufsize, "Host %s, plugin %s",
+  status = ssnprintf (buf, bufsize, "Host %s, plugin %s",
       vl->host, vl->plugin);
   buf += status;
   bufsize -= status;
 
   if (vl->plugin_instance[0] != '\0')
   {
-    status = snprintf (buf, bufsize, " (instance %s)",
+    status = ssnprintf (buf, bufsize, " (instance %s)",
 	vl->plugin_instance);
     buf += status;
     bufsize -= status;
   }
 
-  status = snprintf (buf, bufsize, " type %s", ds->type);
+  status = ssnprintf (buf, bufsize, " type %s", vl->type);
   buf += status;
   bufsize -= status;
 
   if (vl->type_instance[0] != '\0')
   {
-    status = snprintf (buf, bufsize, " (instance %s)",
+    status = ssnprintf (buf, bufsize, " (instance %s)",
 	vl->type_instance);
     buf += status;
     bufsize -= status;
   }
 
+  plugin_notification_meta_add_string (&n, "DataSource",
+      ds->ds[ds_index].name);
+  plugin_notification_meta_add_double (&n, "CurrentValue", values[ds_index]);
+  plugin_notification_meta_add_double (&n, "WarningMin", th->warning_min);
+  plugin_notification_meta_add_double (&n, "WarningMax", th->warning_max);
+  plugin_notification_meta_add_double (&n, "FailureMin", th->failure_min);
+  plugin_notification_meta_add_double (&n, "FailureMax", th->failure_max);
+
   /* Send an okay notification */
   if (state == STATE_OKAY)
   {
-    status = snprintf (buf, bufsize, ": All data sources are within range again.");
+    status = ssnprintf (buf, bufsize, ": All data sources are within range again.");
     buf += status;
     bufsize -= status;
   }
   else
   {
     double min;
@@ -638,43 +640,44 @@
     max = (state == STATE_ERROR) ? th->failure_max : th->warning_max;
 
     if (th->flags & UT_FLAG_INVERT)
     {
       if (!isnan (min) && !isnan (max))
       {
-	status = snprintf (buf, bufsize, ": Data source \"%s\" is currently "
+	status = ssnprintf (buf, bufsize, ": Data source \"%s\" is currently "
 	    "%f. That is within the %s region of %f and %f.",
 	    ds->ds[ds_index].name, values[ds_index],
 	    (state == STATE_ERROR) ? "failure" : "warning",
 	    min, max);
       }
       else
       {
-	status = snprintf (buf, bufsize, ": Data source \"%s\" is currently "
+	status = ssnprintf (buf, bufsize, ": Data source \"%s\" is currently "
 	    "%f. That is %s the %s threshold of %f.",
 	    ds->ds[ds_index].name, values[ds_index],
 	    isnan (min) ? "below" : "above",
 	    (state == STATE_ERROR) ? "failure" : "warning",
 	    isnan (min) ? max : min);
       }
     }
     else /* is not inverted */
     {
-      status = snprintf (buf, bufsize, ": Data source \"%s\" is currently "
+      status = ssnprintf (buf, bufsize, ": Data source \"%s\" is currently "
 	  "%f. That is %s the %s threshold of %f.",
 	  ds->ds[ds_index].name, values[ds_index],
 	  (values[ds_index] < min) ? "below" : "above",
 	  (state == STATE_ERROR) ? "failure" : "warning",
 	  (values[ds_index] < min) ? min : max);
     }
     buf += status;
     bufsize -= status;
   }
 
   plugin_dispatch_notification (&n);
 
+  plugin_notification_meta_free (&n);
   return (0);
 } /* }}} int ut_report_state */
 
 /*
  * int ut_check_one_data_source
  *
@@ -780,13 +783,13 @@
   if (threshold_tree == NULL)
     return (0);
 
   /* Is this lock really necessary? So far, thresholds are only inserted at
    * startup. -octo */
   pthread_mutex_lock (&threshold_lock);
-  th = threshold_search (ds, vl);
+  th = threshold_search (vl);
   pthread_mutex_unlock (&threshold_lock);
   if (th == NULL)
     return (0);
 
   DEBUG ("ut_check_threshold: Found matching threshold(s)");
 
@@ -863,33 +866,25 @@
     return (-1);
   }
 
   memset (&ds, '\0', sizeof (ds));
   memset (&vl, '\0', sizeof (vl));
 
-  strncpy (vl.host, host, sizeof (vl.host));
-  vl.host[sizeof (vl.host) - 1] = '\0';
-  strncpy (vl.plugin, plugin, sizeof (vl.plugin));
-  vl.plugin[sizeof (vl.plugin) - 1] = '\0';
+  sstrncpy (vl.host, host, sizeof (vl.host));
+  sstrncpy (vl.plugin, plugin, sizeof (vl.plugin));
   if (plugin_instance != NULL)
-  {
-    strncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
-    vl.plugin_instance[sizeof (vl.plugin_instance) - 1] = '\0';
-  }
-  strncpy (ds.type, type, sizeof (ds.type));
-  ds.type[sizeof (ds.type) - 1] = '\0';
+    sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
+  sstrncpy (ds.type, type, sizeof (ds.type));
+  sstrncpy (vl.type, type, sizeof (vl.type));
   if (type_instance != NULL)
-  {
-    strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
-    vl.type_instance[sizeof (vl.type_instance) - 1] = '\0';
-  }
+    sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
   sfree (name_copy);
   host = plugin = plugin_instance = type = type_instance = NULL;
 
-  th = threshold_search (&ds, &vl);
+  th = threshold_search (&vl);
   if (th == NULL)
     return (0);
   if ((th->flags & UT_FLAG_PERSIST) == 0)
     return (1);
   return (2);
 } /* int ut_check_interesting */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/uuid.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/uuid.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/uuid.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/uuid.c	2008-09-04 21:01:15.000000000 +0800
@@ -254,14 +254,13 @@
 static int
 uuid_init (void)
 {
     char *uuid = uuid_get_local ();
 
     if (uuid) {
-        strncpy (hostname_g, uuid, DATA_MAX_NAME_LEN);
-        hostname_g[DATA_MAX_NAME_LEN-1] = '\0';
+        sstrncpy (hostname_g, uuid, DATA_MAX_NAME_LEN);
         sfree (uuid);
         return 0;
     }
 
     WARNING ("uuid: could not read UUID using any known method");
     return 0;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/vmem.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/vmem.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/vmem.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/vmem.c	2008-09-04 21:01:15.000000000 +0800
@@ -47,16 +47,17 @@
 
   vl.time = time (NULL);
   sstrncpy (vl.host, hostname_g, sizeof (vl.host));
   sstrncpy (vl.plugin, "vmem", sizeof (vl.plugin));
   if (plugin_instance != NULL)
     sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
+  sstrncpy (vl.type, type, sizeof (vl.type));
   if (type_instance != NULL)
     sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-  plugin_dispatch_values (type, &vl);
+  plugin_dispatch_values (&vl);
 } /* void vmem_submit */
 
 static void submit_two (const char *plugin_instance, const char *type,
     const char *type_instance, counter_t c0, counter_t c1)
 {
   value_t values[2];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/vserver.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/vserver.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/vserver.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/vserver.c	2008-09-04 21:01:15.000000000 +0800
@@ -56,16 +56,17 @@
 
 	vl.values = values;
 	vl.values_len = STATIC_ARRAY_SIZE (values);
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "vserver", sizeof (vl.plugin));
-	strncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, "if_octets", sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values ("if_octets", &vl);
+	plugin_dispatch_values (&vl);
 } /* void traffic_submit */
 
 static void load_submit (const char *plugin_instance,
 		gauge_t snum, gauge_t mnum, gauge_t lnum)
 {
 	value_t values[3];
@@ -77,15 +78,16 @@
 
 	vl.values = values;
 	vl.values_len = STATIC_ARRAY_SIZE (values);
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "vserver", sizeof (vl.plugin));
-	strncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
+	sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, "load", sizeof (vl.type));
 
-	plugin_dispatch_values ("load", &vl);
+	plugin_dispatch_values (&vl);
 }
 
 static void submit_gauge (const char *plugin_instance, const char *type,
 		const char *type_instance, gauge_t value)
 
 {
@@ -96,16 +98,17 @@
 
 	vl.values = values;
 	vl.values_len = STATIC_ARRAY_SIZE (values);
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "vserver", sizeof (vl.plugin));
-	strncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
-	strncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
+	sstrncpy (vl.plugin_instance, plugin_instance, sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
+	sstrncpy (vl.type_instance, type_instance, sizeof (vl.type_instance));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void submit_gauge */
 
 static inline long long __get_sock_bytes(const char *s)
 {
 	while (s[0] != '/')
 		++s;
@@ -182,14 +185,15 @@
 		}
 		
 		if (!S_ISDIR (statbuf.st_mode))
 			continue;
 
 		/* socket message accounting */
-		len = snprintf (file, BUFSIZE, PROCDIR "/%s/cacct", dent->d_name);
-		if ((len < 0) || (len >= BUFSIZE))
+		len = ssnprintf (file, sizeof (file),
+				PROCDIR "/%s/cacct", dent->d_name);
+		if ((len < 0) || (len >= sizeof (file)))
 			continue;
 
 		if (NULL == (fh = fopen (file, "r")))
 		{
 			char errbuf[1024];
 			ERROR ("Cannot open '%s': %s", file,
@@ -229,14 +233,15 @@
 		{
 			fclose (fh);
 			fh = NULL;
 		}
 
 		/* thread information and load */
-		len = snprintf (file, BUFSIZE, PROCDIR "/%s/cvirt", dent->d_name);
-		if ((len < 0) || (len >= BUFSIZE))
+		len = ssnprintf (file, sizeof (file),
+				PROCDIR "/%s/cvirt", dent->d_name);
+		if ((len < 0) || (len >= sizeof (file)))
 			continue;
 
 		if (NULL == (fh = fopen (file, "r")))
 		{
 			char errbuf[1024];
 			ERROR ("Cannot open '%s': %s", file,
@@ -281,14 +286,15 @@
 		{
 			fclose (fh);
 			fh = NULL;
 		}
 
 		/* processes and memory usage */
-		len = snprintf (file, BUFSIZE, PROCDIR "/%s/limit", dent->d_name);
-		if ((len < 0) || (len >= BUFSIZE))
+		len = ssnprintf (file, sizeof (file),
+				PROCDIR "/%s/limit", dent->d_name);
+		if ((len < 0) || (len >= sizeof (file)))
 			continue;
 
 		if (NULL == (fh = fopen (file, "r")))
 		{
 			char errbuf[1024];
 			ERROR ("Cannot open '%s': %s", file,
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/wireless.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/wireless.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/wireless.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/wireless.c	2008-09-04 21:01:15.000000000 +0800
@@ -55,16 +55,17 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "wireless", sizeof (vl.plugin));
-	strncpy (vl.plugin_instance, plugin_instance,
+	sstrncpy (vl.plugin_instance, plugin_instance,
 			sizeof (vl.plugin_instance));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void wireless_submit */
 
 #define POWER_MIN -90.0
 #define POWER_MAX -50.0
 static double wireless_percent_to_power (double quality)
 {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/xmms.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/xmms.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/src/xmms.c	2009-01-03 04:05:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/src/xmms.c	2008-09-04 21:01:15.000000000 +0800
@@ -36,14 +36,15 @@
 
 	vl.values = values;
 	vl.values_len = 1;
 	vl.time = time (NULL);
 	sstrncpy (vl.host, hostname_g, sizeof (vl.host));
 	sstrncpy (vl.plugin, "xmms", sizeof (vl.plugin));
+	sstrncpy (vl.type, type, sizeof (vl.type));
 
-	plugin_dispatch_values (type, &vl);
+	plugin_dispatch_values (&vl);
 } /* void cxmms_submit */
 
 int cxmms_read (void)
 {
   gint rate;
   gint freq;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/TODO /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/TODO
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/TODO	2009-01-03 04:05:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/TODO	2008-09-04 21:01:09.000000000 +0800
@@ -1,11 +1,9 @@
-For version 4.4:
-* PowerDNS plugin
-
-For version 4.3:
-* unixsock plugin: Remove the custom cache if possible.
+* Parse options/identifiers with spaces in them correctly.
+* Figure out what to do with the onewire plugin.
+* Custom notification messages?
 
 src/battery.c: commend not working code.
 
 Wishlist:
 * Update the RPM specfile to
   - build `collectd-apache'
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/version-gen.sh /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/version-gen.sh
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.4.5/version-gen.sh	2009-01-03 04:05:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/collectd/repos/collectd-4.5.0/version-gen.sh	2008-09-04 21:01:15.000000000 +0800
@@ -1,9 +1,9 @@
 #!/bin/sh
 
-DEFAULT_VERSION="4.4.5.git"
+DEFAULT_VERSION="4.5.0.git"
 
 VERSION="$( git describe 2> /dev/null | sed -e 's/^collectd-//' )"
 
 if test -z "$VERSION"; then
 	VERSION="$DEFAULT_VERSION"
 fi
