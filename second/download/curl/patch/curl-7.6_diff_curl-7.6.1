diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/acconfig.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/acconfig.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/acconfig.h	2001-01-23 07:55:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/acconfig.h	2001-02-07 17:21:34.000000000 +0800
@@ -36,6 +36,10 @@
 
 /* Define if you have the Kerberos4 libraries (including -ldes) */
 #undef KRB4
 
 /* Define if you want to enable IPv6 support */
 #undef ENABLE_IPV6
+
+/* Define this to 'int' if ssize_t is not an available typedefed type */
+#undef ssize_t
+
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/CHANGES /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/CHANGES
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/CHANGES	2001-01-27 23:39:39.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/CHANGES	2001-02-13 21:34:32.000000000 +0800
@@ -3,12 +3,123 @@
                              / __| | | | |_) | |    
                             | (__| |_| |  _ <| |___ 
                              \___|\___/|_| \_\_____|
 
                                History of Changes
 
+Version 7.6.1
+
+Daniel (9 February 2001)
+- Frank Reid and Cain Hopwood provided information and research around a HTTPS
+  PUT/upload problem we seem to have. No solution found yet.
+
+Daniel (8 February 2001)
+- An interesting discussion is how to specify an empty password without having
+  curl ask for it interactively? The current implmentation takes an empty
+  password as a request for a password prompt. However, I still want to
+  support a blank user field. Thus, today if you enter "-u :" (without user
+  and password) curl will prompt for the password. Tricky. How would you
+  specify you want the prompt otherwise?
+
+- Made the netrc parse result possible to use for other protocols than FTP and
+  HTTP (such as the upcoming TELNET fixes).
+
+- The previously mentioned "MSVC++ problems" turned out to be a non-issue.
+
+- Added a HTTP file upload code example in the docs/examples/ section on
+  request.
+
+- Adjusted the FTP response fix slightly.
+
+Version 7.6.1-pre3
+
+Daniel (7 February 2001)
+- SM found a flaw in the response reading function for FTP that could make
+  libcurl not get out of the loop properly when it should, if libcurl got -1
+  returned when reading the socket.
+
+- I found a similar mistake in http.c when using a proxy and reading the
+  results from the proxy connection.
+
+Daniel (6 February 2001)
+- A friendly person named "SM" (nntp at iname.com) pointed out that the VC
+  makefile in src/ needed the libpath set for the debug build to work.
+
+- Daniel Gehriger stepped in to assist with the VC++ stuff Robert Weaver
+  brought up yesterday.
+
+Daniel (5 February 2001)
+- Jun-ichiro itojun Hagino brought a big patch that brings IPv6-awareness to
+  a bunch of different areas within libcurl.
+
+- Robert Weaver told me about the problems the MS VC++ 6.0 compiler has with
+  the 'static' keyword on a number of libcurl functions. I might need to add a
+  patch that redefines static when libcurl is compiled with that compiler.
+  How do I know when VC++ compiles, anyone?
+
+Daniel (4 February 2001)
+- curl_getinfo() was extended with two new options:
+  CURLINFO_CONTENT_LENGTH_DOWNLOAD and CURLINFO_CONTENT_LENGTH_UPLOAD. They
+  return the full assumed content length of the transfer in the given
+  direction. The CURLINFO_CONTENT_LENGTH_DOWNLOAD will be the Content-Length:
+  size of a HTTP download. Added descriptions to the man page as well. This
+  was done after discussions with Bob Schader.
+
+Daniel (3 February 2001)
+- Ingo Ralf Blum provided another fix that makes curl build under the more
+  recent cygwin installations. It seems they've changed the preset defines to
+  not include WIN32 anymore.
+
+Version 7.6.1-pre2
+
+Daniel (31 January 2001)
+- Curl_read() and curl_read() now return a ssize_t for the size, as it had to
+  be able to return -1. The telnet support crashed due to this and there was a
+  possibility to weird behaviour all over. Linus Nielsen Feltzing helped me
+  find this.
+
+- Added a configure.in check for a working getaddrinfo() if IPv6 is requested.
+  I also made the configure script feature --enable-debug which sets a couple
+  of compiler options when used. It assumes gcc.
+
+Daniel (30 January 2001)
+- I finally took a stab at the long-term FIXME item I've had on myself, and
+  now libcurl will properly work when doing a HTTP range-request that follows
+  a Location:. Previously that would make libcurl fail saying that the server
+  doesn't seem to support range requests.
+
+Daniel (29 January 2001)
+- I added a test case for the HTTP PUT resume thing (test case 33).
+
+Version 7.6.1-pre1
+
+Daniel (29 January 2001)
+- Yet another Content-Range change. Ok now? Bob Schader checks from his end 
+  and it works for him.
+
+Daniel (27 January 2001)
+- So the HTTP PUT resume fix wasn't good. There should appearantly be a
+  Content-Range header when resuming a PUT.
+
+- I noticed I broke the download-check that verifies that a resumed HTTP
+  download is actually resumed. It got broke because my new 'httpreq' field
+  in the main curl struct. I should get slapped. I added a test case for
+  this now, so I won't be able to ruin this again without noticing.
+
+- Added a test case for content-length verifying when downloading HTTP.
+
+- Made the progress meter title say if the transfer is being transfered. It
+  makes the output slightly better for resumes.
+
+- When dealing with Location: and HTTP return codes, libcurl will not attempt
+  to follow the spirit of RFC2616 better. It means that when POSTing to a
+  URL that is being following to a second place, the standard will judge on
+  what to do. All HTTP codes except 303 and 305 will cause curl to make a
+  second POST operation. 303 will make a GET and 305 is not yet supported.
+
+  I also wrote two test cases for this POST/GET/Location stuff.
 
 Version 7.6
 
 Daniel (26 January 2001)
 - Lots of mails back and forth with Bob Schader finally made me add a small
   piece of code in the HTTP engine so that HTTP upload resume works. You can
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/config.h.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/config.h.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/config.h.in	2001-01-23 22:38:19.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/config.h.in	2001-02-07 17:22:19.000000000 +0800
@@ -49,14 +49,14 @@
 /* Define if you need the _REENTRANT define for some functions */
 #undef NEED_REENTRANT
 
 /* Define if you have the Kerberos4 libraries (including -ldes) */
 #undef KRB4
 
-/* Define if you want to enable IPv6 support */
-#undef ENABLE_IPV6
+/* Define this to 'int' if ssize_t is not an available typedefed type */
+#undef ssize_t
 
 /* The number of bytes in a long double.  */
 #undef SIZEOF_LONG_DOUBLE
 
 /* The number of bytes in a long long.  */
 #undef SIZEOF_LONG_LONG
@@ -136,12 +136,15 @@
 /* Define if you have the strftime function.  */
 #undef HAVE_STRFTIME
 
 /* Define if you have the stricmp function.  */
 #undef HAVE_STRICMP
 
+/* Define if you have the strlcat function.  */
+#undef HAVE_STRLCAT
+
 /* Define if you have the strlcpy function.  */
 #undef HAVE_STRLCPY
 
 /* Define if you have the strstr function.  */
 #undef HAVE_STRSTR
 
@@ -307,9 +310,15 @@
 /* Define to make ftello visible on some hosts (e.g. HP-UX 10.20). */
 #undef _LARGEFILE_SOURCE
 
 /* Define for large files, on AIX-style hosts. */
 #undef _LARGE_FILES
 
+/* Define if getaddrinfo exists and works */
+#undef HAVE_GETADDRINFO
+
+/* Define if you want to enable IPv6 support */
+#undef ENABLE_IPV6
+
 /* Set to explicitly specify we don't want to use thread-safe functions */
 #undef DISABLED_THREADSAFE
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/configure	2001-01-25 20:28:51.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/configure	2001-02-07 17:49:41.000000000 +0800
@@ -21,12 +21,15 @@
   --with-gnu-ld           assume the C compiler uses GNU ld [default=no]"
 ac_help="$ac_help
   --disable-libtool-lock  avoid locking (might break parallel builds)"
 ac_help="$ac_help
   --disable-largefile     omit support for large files"
 ac_help="$ac_help
+  --enable-debug		Enable pedantic debug options
+  --disable-debug		Disable debug options"
+ac_help="$ac_help
   --enable-ipv6		Enable ipv6 (with ipv4) support
   --disable-ipv6		Disable ipv6 support"
 ac_help="$ac_help
   --with-krb4-includes[=DIR]   Specify location of kerberos4 headers"
 ac_help="$ac_help
   --with-krb4-libs[=DIR]   Specify location of kerberos4 libs"
@@ -580,13 +583,13 @@
 # AIX /bin/install
 # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
 # AFS /usr/afsws/bin/install, which mishandles nonexistent args
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
 echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
-echo "configure:587: checking for a BSD compatible install" >&5
+echo "configure:590: checking for a BSD compatible install" >&5
 if test -z "$INSTALL"; then
 if eval "test \"`echo '$''{'ac_cv_path_install'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
     IFS="${IFS= 	}"; ac_save_IFS="$IFS"; IFS=":"
   for ac_dir in $PATH; do
@@ -633,13 +636,13 @@
 
 test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL_PROGRAM}'
 
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
 echo $ac_n "checking whether build environment is sane""... $ac_c" 1>&6
-echo "configure:640: checking whether build environment is sane" >&5
+echo "configure:643: checking whether build environment is sane" >&5
 # Just in case
 sleep 1
 echo timestamp > conftestfile
 # Do `set' in a subshell so we don't clobber the current shell's
 # arguments.  Must try -L first in case configure is actually a
 # symlink; some systems play weird games with the mod time of symlinks
@@ -690,13 +693,13 @@
   program_transform_name="s,\$\$,${program_suffix},; $program_transform_name"
 
 # sed with no file args requires a program.
 test "$program_transform_name" = "" && program_transform_name="s,x,x,"
 
 echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
-echo "configure:697: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo "configure:700: checking whether ${MAKE-make} sets \${MAKE}" >&5
 set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftestmake <<\EOF
 all:
@@ -736,65 +739,65 @@
 EOF
 
 
 
 missing_dir=`cd $ac_aux_dir && pwd`
 echo $ac_n "checking for working aclocal""... $ac_c" 1>&6
-echo "configure:743: checking for working aclocal" >&5
+echo "configure:746: checking for working aclocal" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (aclocal --version) < /dev/null > /dev/null 2>&1; then
    ACLOCAL=aclocal
    echo "$ac_t""found" 1>&6
 else
    ACLOCAL="$missing_dir/missing aclocal"
    echo "$ac_t""missing" 1>&6
 fi
 
 echo $ac_n "checking for working autoconf""... $ac_c" 1>&6
-echo "configure:756: checking for working autoconf" >&5
+echo "configure:759: checking for working autoconf" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (autoconf --version) < /dev/null > /dev/null 2>&1; then
    AUTOCONF=autoconf
    echo "$ac_t""found" 1>&6
 else
    AUTOCONF="$missing_dir/missing autoconf"
    echo "$ac_t""missing" 1>&6
 fi
 
 echo $ac_n "checking for working automake""... $ac_c" 1>&6
-echo "configure:769: checking for working automake" >&5
+echo "configure:772: checking for working automake" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (automake --version) < /dev/null > /dev/null 2>&1; then
    AUTOMAKE=automake
    echo "$ac_t""found" 1>&6
 else
    AUTOMAKE="$missing_dir/missing automake"
    echo "$ac_t""missing" 1>&6
 fi
 
 echo $ac_n "checking for working autoheader""... $ac_c" 1>&6
-echo "configure:782: checking for working autoheader" >&5
+echo "configure:785: checking for working autoheader" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (autoheader --version) < /dev/null > /dev/null 2>&1; then
    AUTOHEADER=autoheader
    echo "$ac_t""found" 1>&6
 else
    AUTOHEADER="$missing_dir/missing autoheader"
    echo "$ac_t""missing" 1>&6
 fi
 
 echo $ac_n "checking for working makeinfo""... $ac_c" 1>&6
-echo "configure:795: checking for working makeinfo" >&5
+echo "configure:798: checking for working makeinfo" >&5
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (makeinfo --version) < /dev/null > /dev/null 2>&1; then
    MAKEINFO=makeinfo
    echo "$ac_t""found" 1>&6
@@ -877,13 +880,13 @@
 # Make sure we can run config.sub.
 if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
 else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
 fi
 
 echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:884: checking host system type" >&5
+echo "configure:887: checking host system type" >&5
 
 host_alias=$host
 case "$host_alias" in
 NONE)
   case $nonopt in
   NONE)
@@ -898,13 +901,13 @@
 host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
 host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
 host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
 echo "$ac_t""$host" 1>&6
 
 echo $ac_n "checking build system type""... $ac_c" 1>&6
-echo "configure:905: checking build system type" >&5
+echo "configure:908: checking build system type" >&5
 
 build_alias=$build
 case "$build_alias" in
 NONE)
   case $nonopt in
   NONE) build_alias=$host_alias ;;
@@ -918,13 +921,13 @@
 build_os=`echo $build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
 echo "$ac_t""$build" 1>&6
 
 # Extract the first word of "ranlib", so it can be a program name with args.
 set dummy ranlib; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:925: checking for $ac_word" >&5
+echo "configure:928: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$RANLIB"; then
   ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
 else
@@ -948,13 +951,13 @@
   echo "$ac_t""no" 1>&6
 fi
 
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:955: checking for $ac_word" >&5
+echo "configure:958: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -978,13 +981,13 @@
 fi
 
 if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:985: checking for $ac_word" >&5
+echo "configure:988: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -1029,13 +1032,13 @@
   if test -z "$CC"; then
     case "`uname -s`" in
     *win32* | *WIN32*)
       # Extract the first word of "cl", so it can be a program name with args.
 set dummy cl; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1036: checking for $ac_word" >&5
+echo "configure:1039: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -1061,29 +1064,29 @@
     esac
   fi
   test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
 fi
 
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:1068: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
+echo "configure:1071: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
 ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cc_cross
 
 cat > conftest.$ac_ext << EOF
 
-#line 1079 "configure"
+#line 1082 "configure"
 #include "confdefs.h"
 
 main(){return(0);}
 EOF
-if { (eval echo configure:1084: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1087: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cc_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
     ac_cv_prog_cc_cross=no
   else
     ac_cv_prog_cc_cross=yes
@@ -1103,27 +1106,27 @@
 
 echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
 if test $ac_cv_prog_cc_works = no; then
   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:1110: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:1113: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
 cross_compiling=$ac_cv_prog_cc_cross
 
 echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:1115: checking whether we are using GNU C" >&5
+echo "configure:1118: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.c <<EOF
 #ifdef __GNUC__
   yes;
 #endif
 EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1124: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1127: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gcc=yes
 else
   ac_cv_prog_gcc=no
 fi
 fi
 
@@ -1136,13 +1139,13 @@
 fi
 
 ac_test_CFLAGS="${CFLAGS+set}"
 ac_save_CFLAGS="$CFLAGS"
 CFLAGS=
 echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:1143: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:1146: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   echo 'void f(){}' > conftest.c
 if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
   ac_cv_prog_cc_g=yes
@@ -1179,13 +1182,13 @@
 fi
 
 ac_prog=ld
 if test "$ac_cv_prog_gcc" = yes; then
   # Check if gcc -print-prog-name=ld gives a path.
   echo $ac_n "checking for ld used by GCC""... $ac_c" 1>&6
-echo "configure:1186: checking for ld used by GCC" >&5
+echo "configure:1189: checking for ld used by GCC" >&5
   ac_prog=`($CC -print-prog-name=ld) 2>&5`
   case "$ac_prog" in
     # Accept absolute paths.
     [\\/]* | [A-Za-z]:[\\/]*)
       re_direlt='/[^/][^/]*/\.\./'
       # Canonicalize the path of ld
@@ -1203,16 +1206,16 @@
     # If it is relative, then search for the first ld in PATH.
     with_gnu_ld=unknown
     ;;
   esac
 elif test "$with_gnu_ld" = yes; then
   echo $ac_n "checking for GNU ld""... $ac_c" 1>&6
-echo "configure:1210: checking for GNU ld" >&5
+echo "configure:1213: checking for GNU ld" >&5
 else
   echo $ac_n "checking for non-GNU ld""... $ac_c" 1>&6
-echo "configure:1213: checking for non-GNU ld" >&5
+echo "configure:1216: checking for non-GNU ld" >&5
 fi
 if eval "test \"`echo '$''{'ac_cv_path_LD'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -z "$LD"; then
   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}${PATH_SEPARATOR-:}"
@@ -1241,13 +1244,13 @@
   echo "$ac_t""$LD" 1>&6
 else
   echo "$ac_t""no" 1>&6
 fi
 test -z "$LD" && { echo "configure: error: no acceptable ld found in \$PATH" 1>&2; exit 1; }
 echo $ac_n "checking if the linker ($LD) is GNU ld""... $ac_c" 1>&6
-echo "configure:1248: checking if the linker ($LD) is GNU ld" >&5
+echo "configure:1251: checking if the linker ($LD) is GNU ld" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gnu_ld'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   # I'd rather use --version here, but apparently some GNU ld's only accept -v.
 if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
   ac_cv_prog_gnu_ld=yes
@@ -1257,13 +1260,13 @@
 fi
 
 echo "$ac_t""$ac_cv_prog_gnu_ld" 1>&6
 
 
 echo $ac_n "checking for BSD-compatible nm""... $ac_c" 1>&6
-echo "configure:1264: checking for BSD-compatible nm" >&5
+echo "configure:1267: checking for BSD-compatible nm" >&5
 if eval "test \"`echo '$''{'ac_cv_path_NM'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$NM"; then
   # Let the user override the test.
   ac_cv_path_NM="$NM"
@@ -1293,13 +1296,13 @@
 fi
 
 NM="$ac_cv_path_NM"
 echo "$ac_t""$NM" 1>&6
 
 echo $ac_n "checking whether ln -s works""... $ac_c" 1>&6
-echo "configure:1300: checking whether ln -s works" >&5
+echo "configure:1303: checking whether ln -s works" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_LN_S'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   rm -f conftestdata
 if ln -s X conftestdata 2>/dev/null
 then
@@ -1342,14 +1345,14 @@
 
 # Some flags need to be propagated to the compiler or linker for good
 # libtool support.
 case "$lt_target" in
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 1349 "configure"' > conftest.$ac_ext
-  if { (eval echo configure:1350: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+  echo '#line 1352 "configure"' > conftest.$ac_ext
+  if { (eval echo configure:1353: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
     case "`/usr/bin/file conftest.o`" in
     *32-bit*)
       LD="${LD-ld} -32"
       ;;
     *N32*)
       LD="${LD-ld} -n32"
@@ -1364,25 +1367,25 @@
 
 *-*-sco3.2v5*)
   # On SCO OpenServer 5, we need -belf to get full-featured binaries.
   SAVE_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -belf"
   echo $ac_n "checking whether the C compiler needs -belf""... $ac_c" 1>&6
-echo "configure:1371: checking whether the C compiler needs -belf" >&5
+echo "configure:1374: checking whether the C compiler needs -belf" >&5
 if eval "test \"`echo '$''{'lt_cv_cc_needs_belf'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 1376 "configure"
+#line 1379 "configure"
 #include "confdefs.h"
 
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1383: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1386: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   lt_cv_cc_needs_belf=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -1485,13 +1488,13 @@
 # Make sure we can run config.sub.
 if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
 else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
 fi
 
 echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:1492: checking host system type" >&5
+echo "configure:1495: checking host system type" >&5
 
 host_alias=$host
 case "$host_alias" in
 NONE)
   case $nonopt in
   NONE)
@@ -1506,13 +1509,13 @@
 host_cpu=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
 host_vendor=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
 host_os=`echo $host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
 echo "$ac_t""$host" 1>&6
 
 echo $ac_n "checking target system type""... $ac_c" 1>&6
-echo "configure:1513: checking target system type" >&5
+echo "configure:1516: checking target system type" >&5
 
 target_alias=$target
 case "$target_alias" in
 NONE)
   case $nonopt in
   NONE) target_alias=$host_alias ;;
@@ -1527,13 +1530,13 @@
 echo "$ac_t""$target" 1>&6
 
 
 # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1534: checking for $ac_word" >&5
+echo "configure:1537: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -1557,13 +1560,13 @@
 fi
 
 if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1564: checking for $ac_word" >&5
+echo "configure:1567: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -1608,13 +1611,13 @@
   if test -z "$CC"; then
     case "`uname -s`" in
     *win32* | *WIN32*)
       # Extract the first word of "cl", so it can be a program name with args.
 set dummy cl; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:1615: checking for $ac_word" >&5
+echo "configure:1618: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -1640,29 +1643,29 @@
     esac
   fi
   test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
 fi
 
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works""... $ac_c" 1>&6
-echo "configure:1647: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
+echo "configure:1650: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) works" >&5
 
 ac_ext=c
 # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS conftest.$ac_ext 1>&5'
 ac_link='${CC-cc} -o conftest${ac_exeext} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS 1>&5'
 cross_compiling=$ac_cv_prog_cc_cross
 
 cat > conftest.$ac_ext << EOF
 
-#line 1658 "configure"
+#line 1661 "configure"
 #include "confdefs.h"
 
 main(){return(0);}
 EOF
-if { (eval echo configure:1663: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:1666: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   ac_cv_prog_cc_works=yes
   # If we can't run a trivial program, we are probably using a cross compiler.
   if (./conftest; exit) 2>/dev/null; then
     ac_cv_prog_cc_cross=no
   else
     ac_cv_prog_cc_cross=yes
@@ -1682,27 +1685,27 @@
 
 echo "$ac_t""$ac_cv_prog_cc_works" 1>&6
 if test $ac_cv_prog_cc_works = no; then
   { echo "configure: error: installation or configuration problem: C compiler cannot create executables." 1>&2; exit 1; }
 fi
 echo $ac_n "checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler""... $ac_c" 1>&6
-echo "configure:1689: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
+echo "configure:1692: checking whether the C compiler ($CC $CFLAGS $LDFLAGS) is a cross-compiler" >&5
 echo "$ac_t""$ac_cv_prog_cc_cross" 1>&6
 cross_compiling=$ac_cv_prog_cc_cross
 
 echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
-echo "configure:1694: checking whether we are using GNU C" >&5
+echo "configure:1697: checking whether we are using GNU C" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.c <<EOF
 #ifdef __GNUC__
   yes;
 #endif
 EOF
-if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1703: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
+if { ac_try='${CC-cc} -E conftest.c'; { (eval echo configure:1706: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
   ac_cv_prog_gcc=yes
 else
   ac_cv_prog_gcc=no
 fi
 fi
 
@@ -1715,13 +1718,13 @@
 fi
 
 ac_test_CFLAGS="${CFLAGS+set}"
 ac_save_CFLAGS="$CFLAGS"
 CFLAGS=
 echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
-echo "configure:1722: checking whether ${CC-cc} accepts -g" >&5
+echo "configure:1725: checking whether ${CC-cc} accepts -g" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_cc_g'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   echo 'void f(){}' > conftest.c
 if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
   ac_cv_prog_cc_g=yes
@@ -1748,13 +1751,13 @@
     CFLAGS=
   fi
 fi
 
 
 echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
-echo "configure:1755: checking how to run the C preprocessor" >&5
+echo "configure:1758: checking how to run the C preprocessor" >&5
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
 fi
 if test -z "$CPP"; then
 if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
@@ -1763,53 +1766,53 @@
     # This must be in double quotes, not single quotes, because CPP may get
   # substituted into the Makefile and "${CC-cc}" will confuse make.
   CPP="${CC-cc} -E"
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp.
   cat > conftest.$ac_ext <<EOF
-#line 1770 "configure"
+#line 1773 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1776: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1779: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
 else
   echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   CPP="${CC-cc} -E -traditional-cpp"
   cat > conftest.$ac_ext <<EOF
-#line 1787 "configure"
+#line 1790 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1793: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1796: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
 else
   echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   CPP="${CC-cc} -nologo -E"
   cat > conftest.$ac_ext <<EOF
-#line 1804 "configure"
+#line 1807 "configure"
 #include "confdefs.h"
 #include <assert.h>
 Syntax Error
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:1810: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:1813: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   :
 else
   echo "$ac_err" >&5
   echo "configure: failed program was:" >&5
@@ -1828,15 +1831,15 @@
 else
   ac_cv_prog_CPP="$CPP"
 fi
 echo "$ac_t""$CPP" 1>&6
 
 echo $ac_n "checking for AIX""... $ac_c" 1>&6
-echo "configure:1835: checking for AIX" >&5
+echo "configure:1838: checking for AIX" >&5
 cat > conftest.$ac_ext <<EOF
-#line 1837 "configure"
+#line 1840 "configure"
 #include "confdefs.h"
 #ifdef _AIX
   yes
 #endif
 
 EOF
@@ -1861,49 +1864,49 @@
   :
 fi
 
    if test "$enable_largefile" != no; then
 
      echo $ac_n "checking for special C compiler options needed for large files""... $ac_c" 1>&6
-echo "configure:1868: checking for special C compiler options needed for large files" >&5
+echo "configure:1871: checking for special C compiler options needed for large files" >&5
 if eval "test \"`echo '$''{'ac_cv_sys_largefile_CC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_cv_sys_largefile_CC=no
         if test "$GCC" != yes; then
 	  # IRIX 6.2 and later do not support large files by default,
 	  # so use the C compiler's -n32 option if that helps.
 	  cat > conftest.$ac_ext <<EOF
-#line 1877 "configure"
+#line 1880 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
     int a[(off_t) 9223372036854775807 == 9223372036854775807 ? 1 : -1];
   
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1886: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1889: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   :
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   ac_save_CC="$CC"
 	     CC="$CC -n32"
 	     cat > conftest.$ac_ext <<EOF
-#line 1895 "configure"
+#line 1898 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
     int a[(off_t) 9223372036854775807 == 9223372036854775807 ? 1 : -1];
   
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1904: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1907: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_sys_largefile_CC=' -n32'
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
 fi
@@ -1917,49 +1920,49 @@
 echo "$ac_t""$ac_cv_sys_largefile_CC" 1>&6
      if test "$ac_cv_sys_largefile_CC" != no; then
        CC="$CC$ac_cv_sys_largefile_CC"
      fi
 
      echo $ac_n "checking for _FILE_OFFSET_BITS value needed for large files""... $ac_c" 1>&6
-echo "configure:1924: checking for _FILE_OFFSET_BITS value needed for large files" >&5
+echo "configure:1927: checking for _FILE_OFFSET_BITS value needed for large files" >&5
 if eval "test \"`echo '$''{'ac_cv_sys_file_offset_bits'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_cv_sys_file_offset_bits=no
       cat > conftest.$ac_ext <<EOF
-#line 1930 "configure"
+#line 1933 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
     int a[(off_t) 9223372036854775807 == 9223372036854775807 ? 1 : -1];
   
 
         
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1941: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1944: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   :
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   cat > conftest.$ac_ext <<EOF
-#line 1948 "configure"
+#line 1951 "configure"
 #include "confdefs.h"
 #define _FILE_OFFSET_BITS 64
 #include <sys/types.h>
     int a[(off_t) 9223372036854775807 == 9223372036854775807 ? 1 : -1];
   
 
 	   
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:1960: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:1963: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_sys_file_offset_bits=64
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
 fi
@@ -1973,49 +1976,49 @@
      cat >> confdefs.h <<EOF
 #define _FILE_OFFSET_BITS $ac_cv_sys_file_offset_bits
 EOF
 
    fi
      echo $ac_n "checking for _LARGEFILE_SOURCE value needed for large files""... $ac_c" 1>&6
-echo "configure:1980: checking for _LARGEFILE_SOURCE value needed for large files" >&5
+echo "configure:1983: checking for _LARGEFILE_SOURCE value needed for large files" >&5
 if eval "test \"`echo '$''{'ac_cv_sys_largefile_source'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_cv_sys_largefile_source=no
       cat > conftest.$ac_ext <<EOF
-#line 1986 "configure"
+#line 1989 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
     int a[(off_t) 9223372036854775807 == 9223372036854775807 ? 1 : -1];
   
 #include <stdio.h>
         
 int main() {
 return !ftello;
 ; return 0; }
 EOF
-if { (eval echo configure:1997: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2000: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   :
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   cat > conftest.$ac_ext <<EOF
-#line 2004 "configure"
+#line 2007 "configure"
 #include "confdefs.h"
 #define _LARGEFILE_SOURCE 1
 #include <sys/types.h>
     int a[(off_t) 9223372036854775807 == 9223372036854775807 ? 1 : -1];
   
 #include <stdio.h>
 	   
 int main() {
 return !ftello;
 ; return 0; }
 EOF
-if { (eval echo configure:2016: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2019: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_sys_largefile_source=1
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
 fi
@@ -2029,49 +2032,49 @@
      cat >> confdefs.h <<EOF
 #define _LARGEFILE_SOURCE $ac_cv_sys_largefile_source
 EOF
 
    fi
      echo $ac_n "checking for _LARGE_FILES value needed for large files""... $ac_c" 1>&6
-echo "configure:2036: checking for _LARGE_FILES value needed for large files" >&5
+echo "configure:2039: checking for _LARGE_FILES value needed for large files" >&5
 if eval "test \"`echo '$''{'ac_cv_sys_large_files'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_cv_sys_large_files=no
       cat > conftest.$ac_ext <<EOF
-#line 2042 "configure"
+#line 2045 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
     int a[(off_t) 9223372036854775807 == 9223372036854775807 ? 1 : -1];
   
 
         
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:2053: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2056: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   :
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   cat > conftest.$ac_ext <<EOF
-#line 2060 "configure"
+#line 2063 "configure"
 #include "confdefs.h"
 #define _LARGE_FILES 1
 #include <sys/types.h>
     int a[(off_t) 9223372036854775807 == 9223372036854775807 ? 1 : -1];
   
 
 	   
 int main() {
 
 ; return 0; }
 EOF
-if { (eval echo configure:2072: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:2075: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_sys_large_files=1
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
 fi
@@ -2088,13 +2091,13 @@
 
    fi
    fi
   
 
 echo $ac_n "checking whether ${MAKE-make} sets \${MAKE}""... $ac_c" 1>&6
-echo "configure:2095: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo "configure:2098: checking whether ${MAKE-make} sets \${MAKE}" >&5
 set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftestmake <<\EOF
 all:
@@ -2115,47 +2118,68 @@
 else
   echo "$ac_t""no" 1>&6
   SET_MAKE="MAKE=${MAKE-make}"
 fi
 
 
+echo $ac_n "checking whether to enable debug options""... $ac_c" 1>&6
+echo "configure:2126: checking whether to enable debug options" >&5
+# Check whether --enable-debug or --disable-debug was given.
+if test "${enable_debug+set}" = set; then
+  enableval="$enable_debug"
+   case "$enableval" in
+  no)
+       echo "$ac_t""no" 1>&6
+       ;;
+  *)   echo "$ac_t""yes" 1>&6
+
+    CPPFLAGS="$CPPFLAGS -DMALLOCDEBUG"
+    CFLAGS="-Wall -pedantic -g" 
+       ;;
+  esac 
+else
+  echo "$ac_t""no" 1>&6
+
+fi
+
+
+
+
+
+
 
 
 
 
 
 
 
 
 
 echo $ac_n "checking whether to enable ipv6""... $ac_c" 1>&6
-echo "configure:2132: checking whether to enable ipv6" >&5
+echo "configure:2160: checking whether to enable ipv6" >&5
 # Check whether --enable-ipv6 or --disable-ipv6 was given.
 if test "${enable_ipv6+set}" = set; then
   enableval="$enable_ipv6"
    case "$enableval" in
   no)
        echo "$ac_t""no" 1>&6
        ipv6=no
        ;;
   *)   echo "$ac_t""yes" 1>&6
-       cat >> confdefs.h <<\EOF
-#define ENABLE_IPV6 1
-EOF
-
        ipv6=yes
        ;;
   esac 
 else
   if test "$cross_compiling" = yes; then
   echo "$ac_t""no" 1>&6
   ipv6=no
 
 else
   cat > conftest.$ac_ext <<EOF
-#line 2156 "configure"
+#line 2180 "configure"
 #include "confdefs.h"
  /* is AF_INET6 available? */
 #include <sys/types.h>
 #include <sys/socket.h>
 main()
 {
@@ -2163,19 +2187,15 @@
    exit(1);
  else
    exit(0);
 }
 
 EOF
-if { (eval echo configure:2170: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:2194: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   echo "$ac_t""yes" 1>&6
-  cat >> confdefs.h <<\EOF
-#define ENABLE_IPV6 1
-EOF
-
   ipv6=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   echo "$ac_t""no" 1>&6
@@ -2184,20 +2204,91 @@
 rm -fr conftest*
 fi
 
 fi
 
 
+if test "$ipv6" = "yes"; then
+  
+  echo $ac_n "checking for working getaddrinfo""... $ac_c" 1>&6
+echo "configure:2214: checking for working getaddrinfo" >&5
+if eval "test \"`echo '$''{'ac_cv_working_getaddrinfo'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  
+  if test "$cross_compiling" = yes; then
+  
+  ac_cv_working_getaddrinfo="yes"
+
+else
+  cat > conftest.$ac_ext <<EOF
+#line 2225 "configure"
+#include "confdefs.h"
+
+#include <netdb.h>
+#include <sys/types.h>
+#include <sys/socket.h>
+
+void main(void) {
+    struct addrinfo hints, *ai;
+    int error;
+
+    memset(&hints, 0, sizeof(hints));
+    hints.ai_family = AF_UNSPEC;
+    hints.ai_socktype = SOCK_STREAM;
+    error = getaddrinfo("127.0.0.1", "8080", &hints, &ai);
+    if (error) {
+        exit(1);
+    }
+    else {
+        exit(0);
+    }
+}
+
+EOF
+if { (eval echo configure:2249: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+then
+  
+  ac_cv_working_getaddrinfo="yes"
+
+else
+  echo "configure: failed program was:" >&5
+  cat conftest.$ac_ext >&5
+  rm -fr conftest*
+  
+  ac_cv_working_getaddrinfo="no"
+
+fi
+rm -fr conftest*
+fi
+
+fi
+
+echo "$ac_t""$ac_cv_working_getaddrinfo" 1>&6
+if test "$ac_cv_working_getaddrinfo" = "yes"; then
+  cat >> confdefs.h <<\EOF
+#define HAVE_GETADDRINFO 1
+EOF
+
+  cat >> confdefs.h <<\EOF
+#define ENABLE_IPV6 1
+EOF
+
+fi
+
+fi
+
+
 
 echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
-echo "configure:2193: checking for gethostbyname" >&5
+echo "configure:2284: checking for gethostbyname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2198 "configure"
+#line 2289 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostbyname(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2214,13 +2305,13 @@
 #else
 gethostbyname();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:2221: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2312: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostbyname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2232,32 +2323,32 @@
 if eval "test \"`echo '$ac_cv_func_'gethostbyname`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   :
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for gethostbyname in -lnsl""... $ac_c" 1>&6
-echo "configure:2239: checking for gethostbyname in -lnsl" >&5
+echo "configure:2330: checking for gethostbyname in -lnsl" >&5
 ac_lib_var=`echo nsl'_'gethostbyname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lnsl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2247 "configure"
+#line 2338 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char gethostbyname();
 
 int main() {
 gethostbyname()
 ; return 0; }
 EOF
-if { (eval echo configure:2258: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2349: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2283,18 +2374,18 @@
 
 fi
 
 
 if test "$ac_cv_lib_nsl_gethostbyname" != "yes" -a "$ac_cv_func_gethostbyname" != "yes"; then
     echo $ac_n "checking for gethostbyname""... $ac_c" 1>&6
-echo "configure:2290: checking for gethostbyname" >&5
+echo "configure:2381: checking for gethostbyname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostbyname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2295 "configure"
+#line 2386 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostbyname(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2311,13 +2402,13 @@
 #else
 gethostbyname();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:2318: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2409: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostbyname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2329,32 +2420,32 @@
 if eval "test \"`echo '$ac_cv_func_'gethostbyname`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   :
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for gethostbyname in -lsocket""... $ac_c" 1>&6
-echo "configure:2336: checking for gethostbyname in -lsocket" >&5
+echo "configure:2427: checking for gethostbyname in -lsocket" >&5
 ac_lib_var=`echo socket'_'gethostbyname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2344 "configure"
+#line 2435 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char gethostbyname();
 
 int main() {
 gethostbyname()
 ; return 0; }
 EOF
-if { (eval echo configure:2355: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2446: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2381,24 +2472,24 @@
 fi
 
 fi
 
 if test "$ac_cv_lib_nsl_gethostbyname" = "$ac_cv_func_gethostbyname"; then
   echo $ac_n "checking trying both nsl and socket libs""... $ac_c" 1>&6
-echo "configure:2388: checking trying both nsl and socket libs" >&5
+echo "configure:2479: checking trying both nsl and socket libs" >&5
   my_ac_save_LIBS=$LIBS
   LIBS="-lnsl -lsocket $LIBS"
   cat > conftest.$ac_ext <<EOF
-#line 2392 "configure"
+#line 2483 "configure"
 #include "confdefs.h"
 
 int main() {
 gethostbyname();
 ; return 0; }
 EOF
-if { (eval echo configure:2399: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2490: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   my_ac_link_result=success
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2413,18 +2504,18 @@
   else
     echo "$ac_t""yes" 1>&6
   fi
 fi
 
 echo $ac_n "checking for strcasecmp""... $ac_c" 1>&6
-echo "configure:2420: checking for strcasecmp" >&5
+echo "configure:2511: checking for strcasecmp" >&5
 if eval "test \"`echo '$''{'ac_cv_func_strcasecmp'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2425 "configure"
+#line 2516 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char strcasecmp(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2441,13 +2532,13 @@
 #else
 strcasecmp();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:2448: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2539: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_strcasecmp=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2459,32 +2550,32 @@
 if eval "test \"`echo '$ac_cv_func_'strcasecmp`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   :
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for strcasecmp in -lresolve""... $ac_c" 1>&6
-echo "configure:2466: checking for strcasecmp in -lresolve" >&5
+echo "configure:2557: checking for strcasecmp in -lresolve" >&5
 ac_lib_var=`echo resolve'_'strcasecmp | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lresolve  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2474 "configure"
+#line 2565 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char strcasecmp();
 
 int main() {
 strcasecmp()
 ; return 0; }
 EOF
-if { (eval echo configure:2485: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2576: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2510,32 +2601,32 @@
 
 fi
 
 
 if test "$ac_cv_lib_resolve_strcasecmp" = "$ac_cv_func_strcasecmp"; then
   echo $ac_n "checking for strcasecmp in -lresolve""... $ac_c" 1>&6
-echo "configure:2517: checking for strcasecmp in -lresolve" >&5
+echo "configure:2608: checking for strcasecmp in -lresolve" >&5
 ac_lib_var=`echo resolve'_'strcasecmp | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lresolve -lnsl $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2525 "configure"
+#line 2616 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char strcasecmp();
 
 int main() {
 strcasecmp()
 ; return 0; }
 EOF
-if { (eval echo configure:2536: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2627: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2552,18 +2643,18 @@
   echo "$ac_t""no" 1>&6
 fi
 
 fi
 
 echo $ac_n "checking for connect""... $ac_c" 1>&6
-echo "configure:2559: checking for connect" >&5
+echo "configure:2650: checking for connect" >&5
 if eval "test \"`echo '$''{'ac_cv_func_connect'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2564 "configure"
+#line 2655 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char connect(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2580,13 +2671,13 @@
 #else
 connect();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:2587: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2678: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_connect=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2598,32 +2689,32 @@
 if eval "test \"`echo '$ac_cv_func_'connect`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   :
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for connect in -lsocket""... $ac_c" 1>&6
-echo "configure:2605: checking for connect in -lsocket" >&5
+echo "configure:2696: checking for connect in -lsocket" >&5
 ac_lib_var=`echo socket'_'connect | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lsocket  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2613 "configure"
+#line 2704 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char connect();
 
 int main() {
 connect()
 ; return 0; }
 EOF
-if { (eval echo configure:2624: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2715: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2648,18 +2739,18 @@
 fi
 
 fi
 
 
 echo $ac_n "checking for gethostname""... $ac_c" 1>&6
-echo "configure:2655: checking for gethostname" >&5
+echo "configure:2746: checking for gethostname" >&5
 if eval "test \"`echo '$''{'ac_cv_func_gethostname'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2660 "configure"
+#line 2751 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostname(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2676,13 +2767,13 @@
 #else
 gethostname();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:2683: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2774: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_gethostname=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2694,32 +2785,32 @@
 if eval "test \"`echo '$ac_cv_func_'gethostname`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   :
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for gethostname in -lucb""... $ac_c" 1>&6
-echo "configure:2701: checking for gethostname in -lucb" >&5
+echo "configure:2792: checking for gethostname in -lucb" >&5
 ac_lib_var=`echo ucb'_'gethostname | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lucb  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2709 "configure"
+#line 2800 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char gethostname();
 
 int main() {
 gethostname()
 ; return 0; }
 EOF
-if { (eval echo configure:2720: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2811: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2744,18 +2835,18 @@
 fi
 
 fi
 
 
 echo $ac_n "checking for dlopen""... $ac_c" 1>&6
-echo "configure:2751: checking for dlopen" >&5
+echo "configure:2842: checking for dlopen" >&5
 if eval "test \"`echo '$''{'ac_cv_func_dlopen'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2756 "configure"
+#line 2847 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char dlopen(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -2772,13 +2863,13 @@
 #else
 dlopen();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:2779: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2870: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_dlopen=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2790,32 +2881,32 @@
 if eval "test \"`echo '$ac_cv_func_'dlopen`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   :
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for dlopen in -ldl""... $ac_c" 1>&6
-echo "configure:2797: checking for dlopen in -ldl" >&5
+echo "configure:2888: checking for dlopen in -ldl" >&5
 ac_lib_var=`echo dl'_'dlopen | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-ldl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2805 "configure"
+#line 2896 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char dlopen();
 
 int main() {
 dlopen()
 ; return 0; }
 EOF
-if { (eval echo configure:2816: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:2907: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2882,49 +2973,53 @@
   want_krb4="yes"
  
 fi
 
 
 echo $ac_n "checking if Kerberos4 support is requested""... $ac_c" 1>&6
-echo "configure:2889: checking if Kerberos4 support is requested" >&5
+echo "configure:2980: checking if Kerberos4 support is requested" >&5
 
 if test "$want_krb4" = yes
 then
+  if test "$ipv6" = "yes"; then
+    echo krb4 is not compatible with IPv6
+    exit 1
+  fi
   echo "$ac_t""yes" 1>&6
 
   
   echo $ac_n "checking where to look for Kerberos4""... $ac_c" 1>&6
-echo "configure:2897: checking where to look for Kerberos4" >&5
+echo "configure:2992: checking where to look for Kerberos4" >&5
   if test X"$OPT_KRB4" = Xyes
   then
     echo "$ac_t""defaults" 1>&6
   else
     echo "$ac_t""libs in $KRB4LIB, headers in $KRB4INC" 1>&6
   fi
 
     echo $ac_n "checking for des_pcbc_encrypt in -ldes""... $ac_c" 1>&6
-echo "configure:2906: checking for des_pcbc_encrypt in -ldes" >&5
+echo "configure:3001: checking for des_pcbc_encrypt in -ldes" >&5
 ac_lib_var=`echo des'_'des_pcbc_encrypt | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-ldes  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 2914 "configure"
+#line 3009 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char des_pcbc_encrypt();
 
 int main() {
 des_pcbc_encrypt()
 ; return 0; }
 EOF
-if { (eval echo configure:2925: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3020: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -2938,23 +3033,23 @@
   echo "$ac_t""yes" 1>&6
   
     for ac_hdr in des.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:2945: checking for $ac_hdr" >&5
+echo "configure:3040: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2950 "configure"
+#line 3045 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:2955: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3050: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
 else
   echo "$ac_err" >&5
@@ -2976,18 +3071,18 @@
   echo "$ac_t""no" 1>&6
 fi
 done
 
 
         echo $ac_n "checking for res_search""... $ac_c" 1>&6
-echo "configure:2983: checking for res_search" >&5
+echo "configure:3078: checking for res_search" >&5
 if eval "test \"`echo '$''{'ac_cv_func_res_search'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 2988 "configure"
+#line 3083 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char res_search(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3004,13 +3099,13 @@
 #else
 res_search();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:3011: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3106: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_res_search=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3022,32 +3117,32 @@
 if eval "test \"`echo '$ac_cv_func_'res_search`\" = yes"; then
   echo "$ac_t""yes" 1>&6
   :
 else
   echo "$ac_t""no" 1>&6
 echo $ac_n "checking for res_search in -lresolv""... $ac_c" 1>&6
-echo "configure:3029: checking for res_search in -lresolv" >&5
+echo "configure:3124: checking for res_search in -lresolv" >&5
 ac_lib_var=`echo resolv'_'res_search | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lresolv  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3037 "configure"
+#line 3132 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char res_search();
 
 int main() {
 res_search()
 ; return 0; }
 EOF
-if { (eval echo configure:3048: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3143: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3072,32 +3167,32 @@
 fi
 
 fi
 
 
         echo $ac_n "checking for krb_net_read in -lkrb""... $ac_c" 1>&6
-echo "configure:3079: checking for krb_net_read in -lkrb" >&5
+echo "configure:3174: checking for krb_net_read in -lkrb" >&5
 ac_lib_var=`echo krb'_'krb_net_read | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lkrb  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3087 "configure"
+#line 3182 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char krb_net_read();
 
 int main() {
 krb_net_read()
 ; return 0; }
 EOF
-if { (eval echo configure:3098: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3193: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3111,23 +3206,23 @@
   echo "$ac_t""yes" 1>&6
   
             for ac_hdr in krb.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3118: checking for $ac_hdr" >&5
+echo "configure:3213: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3123 "configure"
+#line 3218 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3128: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3223: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
 else
   echo "$ac_err" >&5
@@ -3153,18 +3248,18 @@
 
             LIBS="-lkrb -ldes $LIBS"
 
                   for ac_func in krb_get_our_ip_for_realm
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3160: checking for $ac_func" >&5
+echo "configure:3255: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3165 "configure"
+#line 3260 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3181,13 +3276,13 @@
 #else
 $ac_func();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:3188: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3283: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3214,18 +3309,18 @@
 EOF
 
 
             for ac_func in strlcpy
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3221: checking for $ac_func" >&5
+echo "configure:3316: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3226 "configure"
+#line 3321 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3242,13 +3337,13 @@
 #else
 $ac_func();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:3249: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3298,44 +3393,44 @@
 then
   echo "configure: warning: SSL/https support disabled" 1>&2  
 else
 
   
   echo $ac_n "checking where to look for SSL""... $ac_c" 1>&6
-echo "configure:3305: checking where to look for SSL" >&5
+echo "configure:3400: checking where to look for SSL" >&5
   if test X"$OPT_SSL" = Xoff
   then
   	echo "$ac_t""defaults (or given in environment)" 1>&6
   else
 	test X"$OPT_SSL" = Xyes && OPT_SSL=/usr/local/ssl
                 LDFLAGS="$LDFLAGS -L$OPT_SSL/lib"
 	CPPFLAGS="$CPPFLAGS -I$OPT_SSL/include/openssl -I$OPT_SSL/include"
 	echo "$ac_t""$OPT_SSL" 1>&6
   fi
 
     echo $ac_n "checking for CRYPTO_lock in -lcrypto""... $ac_c" 1>&6
-echo "configure:3317: checking for CRYPTO_lock in -lcrypto" >&5
+echo "configure:3412: checking for CRYPTO_lock in -lcrypto" >&5
 ac_lib_var=`echo crypto'_'CRYPTO_lock | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lcrypto  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3325 "configure"
+#line 3420 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char CRYPTO_lock();
 
 int main() {
 CRYPTO_lock()
 ; return 0; }
 EOF
-if { (eval echo configure:3336: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3431: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3359,32 +3454,32 @@
   echo "$ac_t""no" 1>&6
 fi
 
 
   if test $ac_cv_lib_crypto_CRYPTO_lock = yes; then
             echo $ac_n "checking for SSL_connect in -lssl""... $ac_c" 1>&6
-echo "configure:3366: checking for SSL_connect in -lssl" >&5
+echo "configure:3461: checking for SSL_connect in -lssl" >&5
 ac_lib_var=`echo ssl'_'SSL_connect | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3374 "configure"
+#line 3469 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char SSL_connect();
 
 int main() {
 SSL_connect()
 ; return 0; }
 EOF
-if { (eval echo configure:3385: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3480: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3408,36 +3503,36 @@
   echo "$ac_t""no" 1>&6
 fi
 
 
     if test "$ac_cv_lib_ssl_SSL_connect" != yes; then
                 echo $ac_n "checking for ssl with RSAglue/rsaref libs in use""... $ac_c" 1>&6
-echo "configure:3415: checking for ssl with RSAglue/rsaref libs in use" >&5;
+echo "configure:3510: checking for ssl with RSAglue/rsaref libs in use" >&5;
         OLIBS=$LIBS
         LIBS="$LIBS -lRSAglue -lrsaref"
         echo $ac_n "checking for SSL_connect in -lssl""... $ac_c" 1>&6
-echo "configure:3419: checking for SSL_connect in -lssl" >&5
+echo "configure:3514: checking for SSL_connect in -lssl" >&5
 ac_lib_var=`echo ssl'_'SSL_connect | sed 'y%./+-%__p_%'`
 if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   ac_save_LIBS="$LIBS"
 LIBS="-lssl  $LIBS"
 cat > conftest.$ac_ext <<EOF
-#line 3427 "configure"
+#line 3522 "configure"
 #include "confdefs.h"
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
     builtin and then its argument prototype would still apply.  */
 char SSL_connect();
 
 int main() {
 SSL_connect()
 ; return 0; }
 EOF
-if { (eval echo configure:3438: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3533: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_lib_$ac_lib_var=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3472,23 +3567,23 @@
 
 
         for ac_hdr in openssl/x509.h openssl/rsa.h openssl/crypto.h openssl/pem.h openssl/ssl.h openssl/err.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3479: checking for $ac_hdr" >&5
+echo "configure:3574: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3484 "configure"
+#line 3579 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3489: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3584: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
 else
   echo "$ac_err" >&5
@@ -3514,23 +3609,23 @@
 
     if test $ac_cv_header_openssl_x509_h = no; then
       for ac_hdr in x509.h rsa.h crypto.h pem.h ssl.h err.h
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:3521: checking for $ac_hdr" >&5
+echo "configure:3616: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3526 "configure"
+#line 3621 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:3531: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:3626: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
 else
   echo "$ac_err" >&5
@@ -3559,18 +3654,18 @@
 
   
   for ac_func in RAND_status \
                   RAND_screen 
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3566: checking for $ac_func" >&5
+echo "configure:3661: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3571 "configure"
+#line 3666 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3587,13 +3682,13 @@
 #else
 $ac_func();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:3594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3689: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3642,18 +3737,18 @@
 else
 
     
       for ac_func in gethostbyname_r
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3649: checking for $ac_func" >&5
+echo "configure:3744: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3654 "configure"
+#line 3749 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3670,13 +3765,13 @@
 #else
 $ac_func();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:3677: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:3772: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3690,18 +3785,18 @@
     ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
   cat >> confdefs.h <<EOF
 #define $ac_tr_func 1
 EOF
  
     echo $ac_n "checking if gethostbyname_r takes 3 arguments""... $ac_c" 1>&6
-echo "configure:3697: checking if gethostbyname_r takes 3 arguments" >&5
+echo "configure:3792: checking if gethostbyname_r takes 3 arguments" >&5
     if test "$cross_compiling" = yes; then
   ac_cv_gethostbyname_args=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 3702 "configure"
+#line 3797 "configure"
 #include "confdefs.h"
 
 #include <string.h>
 #include <sys/types.h>
 #include <netdb.h>
 
@@ -3713,13 +3808,13 @@
 int rc;
 memset(&h, 0, sizeof(struct hostent));
 memset(&hdata, 0, sizeof(struct hostent_data));
 rc = gethostbyname_r(name, &h, &hdata);
 exit (rc != 0 ? 1 : 0); }
 EOF
-if { (eval echo configure:3720: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3815: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
       echo "$ac_t""yes" 1>&6
       cat >> confdefs.h <<\EOF
 #define HAVE_GETHOSTBYNAME_R_3 1
 EOF
@@ -3729,18 +3824,18 @@
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
       echo "$ac_t""no" 1>&6
       echo $ac_n "checking if gethostbyname_r with -D_REENTRANT takes 3 arguments""... $ac_c" 1>&6
-echo "configure:3736: checking if gethostbyname_r with -D_REENTRANT takes 3 arguments" >&5
+echo "configure:3831: checking if gethostbyname_r with -D_REENTRANT takes 3 arguments" >&5
       if test "$cross_compiling" = yes; then
   ac_cv_gethostbyname_args=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 3741 "configure"
+#line 3836 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
 
 #include <string.h>
 #include <sys/types.h>
@@ -3754,13 +3849,13 @@
 int rc;
 memset(&h, 0, sizeof(struct hostent));
 memset(&hdata, 0, sizeof(struct hostent_data));
 rc = gethostbyname_r(name, &h, &hdata);
 exit (rc != 0 ? 1 : 0); }
 EOF
-if { (eval echo configure:3761: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3856: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
 	echo "$ac_t""yes" 1>&6
 	cat >> confdefs.h <<\EOF
 #define HAVE_GETHOSTBYNAME_R_3 1
 EOF
@@ -3774,18 +3869,18 @@
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
 	echo "$ac_t""no" 1>&6
 	echo $ac_n "checking if gethostbyname_r takes 5 arguments""... $ac_c" 1>&6
-echo "configure:3781: checking if gethostbyname_r takes 5 arguments" >&5
+echo "configure:3876: checking if gethostbyname_r takes 5 arguments" >&5
 	if test "$cross_compiling" = yes; then
   ac_cv_gethostbyname_args=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 3786 "configure"
+#line 3881 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 
 int
@@ -3795,13 +3890,13 @@
 char *name = "localhost";
 char buffer[8192];
 int h_errno;
 hp = gethostbyname_r(name, &h, buffer, 8192, &h_errno);
 exit (hp == NULL ? 1 : 0); }
 EOF
-if { (eval echo configure:3802: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3897: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
 	  echo "$ac_t""yes" 1>&6
 	  cat >> confdefs.h <<\EOF
 #define HAVE_GETHOSTBYNAME_R_5 1
 EOF
@@ -3811,18 +3906,18 @@
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
   
 	  echo "$ac_t""no" 1>&6
 	  echo $ac_n "checking if gethostbyname_r takes 6 arguments""... $ac_c" 1>&6
-echo "configure:3818: checking if gethostbyname_r takes 6 arguments" >&5
+echo "configure:3913: checking if gethostbyname_r takes 6 arguments" >&5
 	  if test "$cross_compiling" = yes; then
   ac_cv_gethostbyname_args=0
 else
   cat > conftest.$ac_ext <<EOF
-#line 3823 "configure"
+#line 3918 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 
 int
@@ -3833,13 +3928,13 @@
 char buf[8192];
 int rc;
 int h_errno;
 rc = gethostbyname_r(name, &h, buf, 8192, &hp, &h_errno);
 exit (rc != 0 ? 1 : 0); }
 EOF
-if { (eval echo configure:3840: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:3935: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   
 	    echo "$ac_t""yes" 1>&6
 	    cat >> confdefs.h <<\EOF
 #define HAVE_GETHOSTBYNAME_R_6 1
 EOF
@@ -3877,18 +3972,18 @@
 
 
     
       for ac_func in gethostbyaddr_r
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:3884: checking for $ac_func" >&5
+echo "configure:3979: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 3889 "configure"
+#line 3984 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -3905,13 +4000,13 @@
 #else
 $ac_func();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:3912: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4007: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -3925,15 +4020,15 @@
     ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
   cat >> confdefs.h <<EOF
 #define $ac_tr_func 1
 EOF
  
     echo $ac_n "checking if gethostbyaddr_r takes 5 arguments""... $ac_c" 1>&6
-echo "configure:3932: checking if gethostbyaddr_r takes 5 arguments" >&5
+echo "configure:4027: checking if gethostbyaddr_r takes 5 arguments" >&5
     cat > conftest.$ac_ext <<EOF
-#line 3934 "configure"
+#line 4029 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 int main() {
 
@@ -3943,13 +4038,13 @@
 struct hostent h;
 struct hostent_data hdata;
 int rc;
 rc = gethostbyaddr_r(address, length, type, &h, &hdata);
 ; return 0; }
 EOF
-if { (eval echo configure:3950: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4045: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
       echo "$ac_t""yes" 1>&6
       cat >> confdefs.h <<\EOF
 #define HAVE_GETHOSTBYADDR_R_5 1
 EOF
@@ -3959,15 +4054,15 @@
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   
       echo "$ac_t""no" 1>&6
       echo $ac_n "checking if gethostbyaddr_r with -D_REENTRANT takes 5 arguments""... $ac_c" 1>&6
-echo "configure:3966: checking if gethostbyaddr_r with -D_REENTRANT takes 5 arguments" >&5
+echo "configure:4061: checking if gethostbyaddr_r with -D_REENTRANT takes 5 arguments" >&5
       cat > conftest.$ac_ext <<EOF
-#line 3968 "configure"
+#line 4063 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
 #include <sys/types.h>
 #include <netdb.h>
 int main() {
@@ -3978,13 +4073,13 @@
 struct hostent h;
 struct hostent_data hdata;
 int rc;
 rc = gethostbyaddr_r(address, length, type, &h, &hdata);
 ; return 0; }
 EOF
-if { (eval echo configure:3985: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4080: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 	echo "$ac_t""yes" 1>&6
 	cat >> confdefs.h <<\EOF
 #define HAVE_GETHOSTBYADDR_R_5 1
 EOF
@@ -3998,15 +4093,15 @@
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   
 	echo "$ac_t""no" 1>&6
 	echo $ac_n "checking if gethostbyaddr_r takes 7 arguments""... $ac_c" 1>&6
-echo "configure:4005: checking if gethostbyaddr_r takes 7 arguments" >&5
+echo "configure:4100: checking if gethostbyaddr_r takes 7 arguments" >&5
 	cat > conftest.$ac_ext <<EOF
-#line 4007 "configure"
+#line 4102 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 int main() {
 
@@ -4019,13 +4114,13 @@
 struct hostent * hp;
 
 hp = gethostbyaddr_r(address, length, type, &h,
                      buffer, 8192, &h_errnop);
 ; return 0; }
 EOF
-if { (eval echo configure:4026: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4121: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 	  echo "$ac_t""yes" 1>&6
 	  cat >> confdefs.h <<\EOF
 #define HAVE_GETHOSTBYADDR_R_7 1
 EOF
@@ -4035,15 +4130,15 @@
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
   
 	  echo "$ac_t""no" 1>&6
 	  echo $ac_n "checking if gethostbyaddr_r takes 8 arguments""... $ac_c" 1>&6
-echo "configure:4042: checking if gethostbyaddr_r takes 8 arguments" >&5
+echo "configure:4137: checking if gethostbyaddr_r takes 8 arguments" >&5
 	  cat > conftest.$ac_ext <<EOF
-#line 4044 "configure"
+#line 4139 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 int main() {
 
@@ -4057,13 +4152,13 @@
 int rc;
 
 rc = gethostbyaddr_r(address, length, type, &h,
                      buffer, 8192, &hp, &h_errnop);
 ; return 0; }
 EOF
-if { (eval echo configure:4064: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4159: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   
 	    echo "$ac_t""yes" 1>&6
 	    cat >> confdefs.h <<\EOF
 #define HAVE_GETHOSTBYADDR_R_8 1
 EOF
@@ -4094,18 +4189,18 @@
 
 
     
     for ac_func in inet_ntoa_r
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4101: checking for $ac_func" >&5
+echo "configure:4196: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4106 "configure"
+#line 4201 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4122,13 +4217,13 @@
 #else
 $ac_func();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:4129: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4224: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -4142,15 +4237,15 @@
     ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
   cat >> confdefs.h <<EOF
 #define $ac_tr_func 1
 EOF
  
     echo $ac_n "checking whether inet_ntoa_r is declared""... $ac_c" 1>&6
-echo "configure:4149: checking whether inet_ntoa_r is declared" >&5
+echo "configure:4244: checking whether inet_ntoa_r is declared" >&5
     cat > conftest.$ac_ext <<EOF
-#line 4151 "configure"
+#line 4246 "configure"
 #include "confdefs.h"
 
 #include <arpa/inet.h>
 EOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "inet_ntoa_r" >/dev/null 2>&1; then
@@ -4163,15 +4258,15 @@
       echo "$ac_t""yes" 1>&6
 else
   rm -rf conftest*
   
       echo "$ac_t""no" 1>&6
       echo $ac_n "checking whether inet_ntoa_r with -D_REENTRANT is declared""... $ac_c" 1>&6
-echo "configure:4170: checking whether inet_ntoa_r with -D_REENTRANT is declared" >&5
+echo "configure:4265: checking whether inet_ntoa_r with -D_REENTRANT is declared" >&5
       cat > conftest.$ac_ext <<EOF
-#line 4172 "configure"
+#line 4267 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
 #include <arpa/inet.h>
 EOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
@@ -4205,18 +4300,18 @@
 
 
     
     for ac_func in localtime_r
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4212: checking for $ac_func" >&5
+echo "configure:4307: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4217 "configure"
+#line 4312 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4233,13 +4328,13 @@
 #else
 $ac_func();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:4240: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4335: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -4253,15 +4348,15 @@
     ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
   cat >> confdefs.h <<EOF
 #define $ac_tr_func 1
 EOF
  
     echo $ac_n "checking whether localtime_r is declared""... $ac_c" 1>&6
-echo "configure:4260: checking whether localtime_r is declared" >&5
+echo "configure:4355: checking whether localtime_r is declared" >&5
     cat > conftest.$ac_ext <<EOF
-#line 4262 "configure"
+#line 4357 "configure"
 #include "confdefs.h"
 
 #include <time.h>
 EOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "localtime_r" >/dev/null 2>&1; then
@@ -4270,15 +4365,15 @@
       echo "$ac_t""yes" 1>&6
 else
   rm -rf conftest*
   
       echo "$ac_t""no" 1>&6
       echo $ac_n "checking whether localtime_r with -D_REENTRANT is declared""... $ac_c" 1>&6
-echo "configure:4277: checking whether localtime_r with -D_REENTRANT is declared" >&5
+echo "configure:4372: checking whether localtime_r with -D_REENTRANT is declared" >&5
       cat > conftest.$ac_ext <<EOF
-#line 4279 "configure"
+#line 4374 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
 #include <time.h>
 EOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
@@ -4307,26 +4402,26 @@
 
 
 fi
 
 
 echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
-echo "configure:4314: checking for ANSI C header files" >&5
+echo "configure:4409: checking for ANSI C header files" >&5
 if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4319 "configure"
+#line 4414 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
 #include <float.h>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4327: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:4422: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   ac_cv_header_stdc=yes
 else
   echo "$ac_err" >&5
@@ -4337,13 +4432,13 @@
 fi
 rm -f conftest*
 
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 4344 "configure"
+#line 4439 "configure"
 #include "confdefs.h"
 #include <string.h>
 EOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "memchr" >/dev/null 2>&1; then
   :
@@ -4355,13 +4450,13 @@
 
 fi
 
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
 cat > conftest.$ac_ext <<EOF
-#line 4362 "configure"
+#line 4457 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 EOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "free" >/dev/null 2>&1; then
   :
@@ -4376,24 +4471,24 @@
 if test $ac_cv_header_stdc = yes; then
   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
 if test "$cross_compiling" = yes; then
   :
 else
   cat > conftest.$ac_ext <<EOF
-#line 4383 "configure"
+#line 4478 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
 #define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
 #define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
 int main () { int i; for (i = 0; i < 256; i++)
 if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
 exit (0); }
 
 EOF
-if { (eval echo configure:4394: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:4489: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   :
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
@@ -4440,23 +4535,23 @@
         time.h \
         io.h \
 
 do
 ac_safe=`echo "$ac_hdr" | sed 'y%./+-%__p_%'`
 echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
-echo "configure:4447: checking for $ac_hdr" >&5
+echo "configure:4542: checking for $ac_hdr" >&5
 if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4452 "configure"
+#line 4547 "configure"
 #include "confdefs.h"
 #include <$ac_hdr>
 EOF
 ac_try="$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
-{ (eval echo configure:4457: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
+{ (eval echo configure:4552: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
 ac_err=`grep -v '^ *+' conftest.out | grep -v "^conftest.${ac_ext}\$"`
 if test -z "$ac_err"; then
   rm -rf conftest*
   eval "ac_cv_header_$ac_safe=yes"
 else
   echo "$ac_err" >&5
@@ -4479,18 +4574,18 @@
 fi
 done
 
 
 
 echo $ac_n "checking for working const""... $ac_c" 1>&6
-echo "configure:4486: checking for working const" >&5
+echo "configure:4581: checking for working const" >&5
 if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4491 "configure"
+#line 4586 "configure"
 #include "confdefs.h"
 
 int main() {
 
 /* Ultrix mips cc rejects this.  */
 typedef int charset[2]; const charset x;
@@ -4533,13 +4628,13 @@
 { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
   const int foo = 10;
 }
 
 ; return 0; }
 EOF
-if { (eval echo configure:4540: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4635: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_c_const=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -4554,18 +4649,18 @@
 #define const 
 EOF
 
 fi
 
 echo $ac_n "checking for size_t""... $ac_c" 1>&6
-echo "configure:4561: checking for size_t" >&5
+echo "configure:4656: checking for size_t" >&5
 if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4566 "configure"
+#line 4661 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #if STDC_HEADERS
 #include <stdlib.h>
 #include <stddef.h>
 #endif
@@ -4587,27 +4682,27 @@
 #define size_t unsigned
 EOF
 
 fi
 
 echo $ac_n "checking whether time.h and sys/time.h may both be included""... $ac_c" 1>&6
-echo "configure:4594: checking whether time.h and sys/time.h may both be included" >&5
+echo "configure:4689: checking whether time.h and sys/time.h may both be included" >&5
 if eval "test \"`echo '$''{'ac_cv_header_time'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4599 "configure"
+#line 4694 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/time.h>
 #include <time.h>
 int main() {
 struct tm *tp;
 ; return 0; }
 EOF
-if { (eval echo configure:4608: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4703: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_header_time=yes
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -4626,32 +4721,32 @@
 
 
 # mprintf() checks:
 
 # check for 'long double'
 echo $ac_n "checking size of long double""... $ac_c" 1>&6
-echo "configure:4633: checking size of long double" >&5
+echo "configure:4728: checking size of long double" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_double'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test "$cross_compiling" = yes; then
   ac_cv_sizeof_long_double=8
 else
   cat > conftest.$ac_ext <<EOF
-#line 4641 "configure"
+#line 4736 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
   if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(long double));
   exit(0);
 }
 EOF
-if { (eval echo configure:4652: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:4747: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_double=`cat conftestval`
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
@@ -4666,32 +4761,32 @@
 #define SIZEOF_LONG_DOUBLE $ac_cv_sizeof_long_double
 EOF
 
 
 # check for 'long long'
 echo $ac_n "checking size of long long""... $ac_c" 1>&6
-echo "configure:4673: checking size of long long" >&5
+echo "configure:4768: checking size of long long" >&5
 if eval "test \"`echo '$''{'ac_cv_sizeof_long_long'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test "$cross_compiling" = yes; then
   ac_cv_sizeof_long_long=4
 else
   cat > conftest.$ac_ext <<EOF
-#line 4681 "configure"
+#line 4776 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main()
 {
   FILE *f=fopen("conftestval", "w");
   if (!f) exit(1);
   fprintf(f, "%d\n", sizeof(long long));
   exit(0);
 }
 EOF
-if { (eval echo configure:4692: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
+if { (eval echo configure:4787: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext} && (./conftest; exit) 2>/dev/null
 then
   ac_cv_sizeof_long_long=`cat conftestval`
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -fr conftest*
@@ -4705,20 +4800,55 @@
 cat >> confdefs.h <<EOF
 #define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
 EOF
 
 
 
+# check for ssize_t
+echo $ac_n "checking for ssize_t""... $ac_c" 1>&6
+echo "configure:4809: checking for ssize_t" >&5
+if eval "test \"`echo '$''{'ac_cv_type_ssize_t'+set}'`\" = set"; then
+  echo $ac_n "(cached) $ac_c" 1>&6
+else
+  cat > conftest.$ac_ext <<EOF
+#line 4814 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#if STDC_HEADERS
+#include <stdlib.h>
+#include <stddef.h>
+#endif
+EOF
+if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+  egrep "(^|[^a-zA-Z_0-9])ssize_t[^a-zA-Z_0-9]" >/dev/null 2>&1; then
+  rm -rf conftest*
+  ac_cv_type_ssize_t=yes
+else
+  rm -rf conftest*
+  ac_cv_type_ssize_t=no
+fi
+rm -f conftest*
+
+fi
+echo "$ac_t""$ac_cv_type_ssize_t" 1>&6
+if test $ac_cv_type_ssize_t = no; then
+  cat >> confdefs.h <<\EOF
+#define ssize_t int
+EOF
+
+fi
+
+
 
 # Make sure we can run config.sub.
 if ${CONFIG_SHELL-/bin/sh} $ac_config_sub sun4 >/dev/null 2>&1; then :
 else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
 fi
 
 echo $ac_n "checking host system type""... $ac_c" 1>&6
-echo "configure:4719: checking host system type" >&5
+echo "configure:4849: checking host system type" >&5
 
 host_alias=$host
 case "$host_alias" in
 NONE)
   case $nonopt in
   NONE)
@@ -4738,18 +4868,18 @@
 cat >> confdefs.h <<EOF
 #define OS "${host}"
 EOF
 
 
 echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
-echo "configure:4745: checking return type of signal handlers" >&5
+echo "configure:4875: checking return type of signal handlers" >&5
 if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4750 "configure"
+#line 4880 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
 #ifdef signal
 #undef signal
 #endif
@@ -4760,13 +4890,13 @@
 #endif
 
 int main() {
 int i;
 ; return 0; }
 EOF
-if { (eval echo configure:4767: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
+if { (eval echo configure:4897: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
   rm -rf conftest*
   ac_cv_type_signal=void
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -4800,22 +4930,23 @@
                 tcgetattr \
                 perror \
                 closesocket \
                 setvbuf \
                 sigaction \
                 signal \
-                getpass_r
+                getpass_r \
+                strlcat
 
 do
 echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
-echo "configure:4811: checking for $ac_func" >&5
+echo "configure:4942: checking for $ac_func" >&5
 if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   cat > conftest.$ac_ext <<EOF
-#line 4816 "configure"
+#line 4947 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func(); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 /* We use char because int might match the return type of a gcc2
@@ -4832,13 +4963,13 @@
 #else
 $ac_func();
 #endif
 
 ; return 0; }
 EOF
-if { (eval echo configure:4839: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
+if { (eval echo configure:4970: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; } && test -s conftest${ac_exeext}; then
   rm -rf conftest*
   eval "ac_cv_func_$ac_func=yes"
 else
   echo "configure: failed program was:" >&5
   cat conftest.$ac_ext >&5
   rm -rf conftest*
@@ -4868,13 +4999,13 @@
   { echo "configure: error: Can't work without an existing socket() function" 1>&2; exit 1; }
 fi
 
 # Extract the first word of "perl", so it can be a program name with args.
 set dummy perl; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:4875: checking for $ac_word" >&5
+echo "configure:5006: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_PERL'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   case "$PERL" in
   /*)
   ac_cv_path_PERL="$PERL" # Let the user override the test with a path.
@@ -4907,13 +5038,13 @@
 
 for ac_prog in gnroff nroff
 do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:4914: checking for $ac_word" >&5
+echo "configure:5045: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_path_NROFF'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   case "$NROFF" in
   /*)
   ac_cv_path_NROFF="$NROFF" # Let the user override the test with a path.
@@ -4949,13 +5080,13 @@
 
 for ac_prog in 'bison -y' byacc
 do
 # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
 echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
-echo "configure:4956: checking for $ac_word" >&5
+echo "configure:5087: checking for $ac_word" >&5
 if eval "test \"`echo '$''{'ac_cv_prog_YACC'+set}'`\" = set"; then
   echo $ac_n "(cached) $ac_c" 1>&6
 else
   if test -n "$YACC"; then
   ac_cv_prog_YACC="$YACC" # Let the user override the test.
 else
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/configure.in	2001-01-25 20:28:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/configure.in	2001-02-07 17:49:06.000000000 +0800
@@ -1,7 +1,7 @@
-dnl $Id: configure.in,v 1.49 2001/01/25 12:28:46 bagder Exp $
+dnl $Id: configure.in,v 1.53 2001/02/07 09:49:06 bagder Exp $
 dnl Process this file with autoconf to produce a configure script.
 AC_INIT(lib/urldata.h)
 AM_CONFIG_HEADER(config.h src/config.h)
 
 VERSION=`sed -ne 's/^#define LIBCURL_VERSION "\(.*\)"/\1/p' ${srcdir}/include/curl/curl.h`
 AM_INIT_AUTOMAKE(curl,$VERSION)
@@ -23,12 +23,72 @@
 AC_SYS_LARGEFILE
 
 dnl The install stuff has already been taken care of by the automake stuff
 dnl AC_PROG_INSTALL
 AC_PROG_MAKE_SET
 
+dnl ************************************************************
+dnl lame option to switch on debug options
+dnl
+AC_MSG_CHECKING([whether to enable debug options])
+AC_ARG_ENABLE(debug,
+[  --enable-debug		Enable pedantic debug options
+  --disable-debug		Disable debug options],
+[ case "$enableval" in
+  no)
+       AC_MSG_RESULT(no)
+       ;;
+  *)   AC_MSG_RESULT(yes)
+
+    CPPFLAGS="$CPPFLAGS -DMALLOCDEBUG"
+    CFLAGS="-Wall -pedantic -g" 
+       ;;
+  esac ],
+       AC_MSG_RESULT(no)
+)
+
+
+dnl
+dnl check for working getaddrinfo()
+dnl
+AC_DEFUN(CURL_CHECK_WORKING_GETADDRINFO,[
+  AC_CACHE_CHECK(for working getaddrinfo, ac_cv_working_getaddrinfo,[
+  AC_TRY_RUN( [
+#include <netdb.h>
+#include <sys/types.h>
+#include <sys/socket.h>
+
+void main(void) {
+    struct addrinfo hints, *ai;
+    int error;
+
+    memset(&hints, 0, sizeof(hints));
+    hints.ai_family = AF_UNSPEC;
+    hints.ai_socktype = SOCK_STREAM;
+    error = getaddrinfo("127.0.0.1", "8080", &hints, &ai);
+    if (error) {
+        exit(1);
+    }
+    else {
+        exit(0);
+    }
+}
+],[
+  ac_cv_working_getaddrinfo="yes"
+],[
+  ac_cv_working_getaddrinfo="no"
+],[
+  ac_cv_working_getaddrinfo="yes"
+])])
+if test "$ac_cv_working_getaddrinfo" = "yes"; then
+  AC_DEFINE(HAVE_GETADDRINFO, 1, [Define if getaddrinfo exists and works])
+  AC_DEFINE(ENABLE_IPV6, 1, [Define if you want to enable IPv6 support])
+fi
+])
+
+
 AC_DEFUN(CURL_CHECK_LOCALTIME_R,
 [
   dnl check for a few thread-safe functions
   AC_CHECK_FUNCS(localtime_r,[
     AC_MSG_CHECKING(whether localtime_r is declared)
     AC_EGREP_CPP(localtime_r,[
@@ -248,13 +308,12 @@
 [ case "$enableval" in
   no)
        AC_MSG_RESULT(no)
        ipv6=no
        ;;
   *)   AC_MSG_RESULT(yes)
-       AC_DEFINE(ENABLE_IPV6)
        ipv6=yes
        ;;
   esac ],
 
   AC_TRY_RUN([ /* is AF_INET6 available? */
 #include <sys/types.h>
@@ -265,20 +324,24 @@
    exit(1);
  else
    exit(0);
 }
 ],
   AC_MSG_RESULT(yes)
-  AC_DEFINE(ENABLE_IPV6)
   ipv6=yes,
   AC_MSG_RESULT(no)
   ipv6=no,
   AC_MSG_RESULT(no)
   ipv6=no
 ))
 
+if test "$ipv6" = "yes"; then
+  CURL_CHECK_WORKING_GETADDRINFO
+fi
+
+
 dnl **********************************************************************
 dnl Checks for libraries.
 dnl **********************************************************************
 
 dnl gethostbyname in the nsl lib?
 AC_CHECK_FUNC(gethostbyname, , AC_CHECK_LIB(nsl, gethostbyname))
@@ -362,12 +425,16 @@
  ])
 
 AC_MSG_CHECKING([if Kerberos4 support is requested])
 
 if test "$want_krb4" = yes
 then
+  if test "$ipv6" = "yes"; then
+    echo krb4 is not compatible with IPv6
+    exit 1
+  fi
   AC_MSG_RESULT(yes)
 
   dnl Check for & handle argument to --with-krb4
 
   AC_MSG_CHECKING(where to look for Kerberos4)
   if test X"$OPT_KRB4" = Xyes
@@ -589,12 +656,15 @@
 
 # check for 'long double'
 AC_CHECK_SIZEOF(long double, 8)
 # check for 'long long'
 AC_CHECK_SIZEOF(long long, 4)
 
+# check for ssize_t
+AC_CHECK_TYPE(ssize_t, int)
+
 dnl Get system canonical name
 AC_CANONICAL_HOST
 AC_DEFINE_UNQUOTED(OS, "${host}")
 
 dnl Checks for library functions.
 dnl AC_PROG_GCC_TRADITIONAL
@@ -619,13 +689,14 @@
                 tcgetattr \
                 perror \
                 closesocket \
                 setvbuf \
                 sigaction \
                 signal \
-                getpass_r
+                getpass_r \
+                strlcat
 )
 
 dnl removed 'getpass' check on October 26, 2000
 
 if test "$ac_cv_func_select" != "yes"; then
   AC_MSG_ERROR(Can't work without an existing select() function)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/config-win32.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/config-win32.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/config-win32.h	2000-06-14 22:13:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/config-win32.h	2001-02-07 17:21:18.000000000 +0800
@@ -20,12 +20,15 @@
 /* Define as the return type of signal handlers (int or void).  */
 /*#define RETSIGTYPE void */
 
 /* Define to `unsigned' if <sys/types.h> doesn't define.  */
 /* #undef size_t */
 
+/* Define this to 'int' if ssize_t is not an available typedefed type */
+#define ssize_t int
+
 /* Define if you have the ANSI C header files.  */
 #define STDC_HEADERS 1
 
 /* Define if you can safely include both <sys/time.h> and <time.h>.  */
 /* #define TIME_WITH_SYS_TIME 1 */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/curl.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/curl.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/curl.1	2001-01-24 22:45:06.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/curl.1	2001-02-06 06:50:25.000000000 +0800
@@ -785,12 +785,13 @@
  - T. Bharath <TBharath@responsenetworks.com>
  - Alexander Kourakos <awk@users.sourceforge.net>
  - James Griffiths <griffiths_james@yahoo.com>
  - Loic Dachary <loic@senga.org>
  - Robert Weaver <robert.weaver@sabre.com>
  - Ingo Ralf Blum <ingoralfblum@ingoralfblum.com>
+ - Jun-ichiro itojun Hagino <itojun@iijlab.net>
 
 .SH WWW
 http://curl.haxx.se
 .SH FTP
 ftp://ftp.sunet.se/pub/www/utilities/curl/
 .SH "SEE ALSO"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/curl_easy_getinfo.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/curl_easy_getinfo.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/curl_easy_getinfo.3	2000-11-22 22:57:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/curl_easy_getinfo.3	2001-02-05 04:07:15.000000000 +0800
@@ -1,11 +1,11 @@
 .\" You can view this file with:
 .\" nroff -man [file]
 .\" Written by daniel@haxx.se
 .\"
-.TH curl_easy_init 3 "22 November 2000" "Curl 7.5" "libcurl Manual"
+.TH curl_easy_init 3 "4 February 2001" "Curl 7.6.1" "libcurl Manual"
 .SH NAME
 curl_easy_getinfo - Extract information from a curl session (added in 7.4)
 .SH SYNOPSIS
 .B #include <curl/easy.h>
 .sp
 .BI "CURLcode curl_easy_getinfo(CURL *curl, CURLINFO info, ... );"
@@ -78,12 +78,20 @@
 than one request if FOLLOWLOCATION is true.
 .TP
 .B CURLINFO_SSL_VERIFYRESULT
 Pass a pointer to a long to receive the result of the certification
 verification that was requested (using the CURLOPT_SSL_VERIFYPEER option to
 curl_easy_setopt). (Added in 7.4.2)
+.TP
+.B CURLINFO_CONTENT_LENGTH_DOWNLOAD
+Pass a pointer to a double to receive the content-length of the download.
+(Added in 7.6.1)
+.TP
+.B CURLINFO_CONTENT_LENGTH_UPLOAD
+Pass a pointer to a double to receive the specified size of the upload.
+(Added in 7.6.1)
 .PP
 
 .SH RETURN VALUE
 If the operation was successful, CURLE_OK is returned. Otherwise an
 appropriate error code will be returned.
 .SH "SEE ALSO"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/curl_easy_setopt.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/curl_easy_setopt.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/curl_easy_setopt.3	2001-01-11 07:20:04.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/curl_easy_setopt.3	2001-02-02 15:22:07.000000000 +0800
@@ -1,11 +1,11 @@
 .\" You can view this file with:
 .\" nroff -man [file]
 .\" Written by daniel@haxx.se
 .\"
-.TH curl_easy_setopt 3 "28 November 2000" "Curl 7.5" "libcurl Manual"
+.TH curl_easy_setopt 3 "2 February 2001" "Curl 7.5" "libcurl Manual"
 .SH NAME
 curl_easy_setopt - Set curl easy-session options
 .SH SYNOPSIS
 .B #include <curl/easy.h>
 .sp
 .BI "CURLcode curl_easy_setopt(CURL *" handle ", CURLoption "option ", ...);
@@ -32,12 +32,18 @@
 .TP 0.8i
 .B CURLOPT_FILE
 Data pointer to pass instead of FILE * to the file write function. Note that
 if you specify the
 .I CURLOPT_WRITEFUNCTION
 , this is the pointer you'll get as input.
+
+NOTE: If you're using libcurl as a win32 .DLL, you MUST use a
+.I CURLOPT_WRITEFUNCTION
+if you set the
+.I CURLOPT_FILE
+option.
 .TP
 .B CURLOPT_WRITEFUNCTION
 Function pointer that should use match the following prototype:
 .BI "size_t function( void *ptr, size_t size, size_t nmemb, FILE *stream);"
 This function gets called by libcurl as soon as there is received data that
 needs to be written down. The size of the data pointed to by
@@ -50,12 +56,18 @@
 .TP
 .B CURLOPT_INFILE
 Data pointer to pass instead of FILE * to the file read function. Note that if
 you specify the
 .I CURLOPT_READFUNCTION
 , this is the pointer you'll get as input.
+
+NOTE: If you're using libcurl as a win32 .DLL, you MUST use a
+.I CURLOPT_READFUNCTION
+if you set the
+.I CURLOPT_INFILE
+option.
 .TP
 .B CURLOPT_READFUNCTION
 Function pointer that should use match the following prototype:
 .BI "size_t function( void *ptr, size_t size, size_t nmemb, FILE *stream);"
 This function gets called by libcurl as soon as it needs to read data in order
 to send it to the peer. The data area pointed at by the pointer
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/curl_formparse.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/curl_formparse.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/curl_formparse.3	2000-06-20 23:34:41.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/curl_formparse.3	2001-02-08 16:14:54.000000000 +0800
@@ -1,17 +1,17 @@
 .\" You can view this file with:
 .\" nroff -man [file]
 .\" Written by daniel@haxx.se
 .\"
-.TH curl_formparse 3 "6 June 2000" "Curl 7.0" "libcurl Manual"
+.TH curl_formparse 3 "8 February 2001" "Curl 7.0" "libcurl Manual"
 .SH NAME
 curl_formparse - add a section to a multipart/formdata HTTP POST
 .SH SYNOPSIS
 .B #include <curl/curl.h>
 .sp
-.BI "CURLcode *curl_formparse(char *" string, "struct HttpPost **" firstitem,
+.BI "CURLcode curl_formparse(char *" string, "struct HttpPost **" firstitem,
 .BI "struct HttpPost ** "lastitem ");"
 .ad
 .SH DESCRIPTION
 curl_formparse() is used to append sections when building a multipart/formdata
 HTTP POST. Append one section at a time until you've added all the sections
 you want included and then you pass the
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/examples/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/examples/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/examples/Makefile.am	2001-01-08 22:36:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/examples/Makefile.am	2001-02-08 16:26:54.000000000 +0800
@@ -1,11 +1,11 @@
 #
-# $Id: Makefile.am,v 1.1 2001/01/08 14:36:34 bagder Exp $
+# $Id: Makefile.am,v 1.2 2001/02/08 08:26:54 bagder Exp $
 #
 
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
 EXTRA_DIST = 
-	README curlgtk.c sepheaders.c simple.c
+	README curlgtk.c sepheaders.c simple.c postit.c
 
 all:
 	@echo "done"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/examples/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/examples/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/examples/Makefile.in	2001-01-27 23:41:58.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/examples/Makefile.in	2001-02-13 21:35:54.000000000 +0800
@@ -8,13 +8,13 @@
 # This program is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
 #
-# $Id: Makefile.am,v 1.1 2001/01/08 14:36:34 bagder Exp $
+# $Id: Makefile.am,v 1.2 2001/02/08 08:26:54 bagder Exp $
 #
 
 
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -176,13 +176,13 @@
 installcheck-am installcheck install-exec-am install-exec \
 install-data-am install-data install-am install uninstall-am uninstall \
 all-redirect all-am all installdirs mostlyclean-generic \
 distclean-generic clean-generic maintainer-clean-generic clean \
 mostlyclean distclean maintainer-clean
 
-	README curlgtk.c sepheaders.c simple.c
+	README curlgtk.c sepheaders.c simple.c postit.c
 
 all:
 	@echo "done"
 
 # Tell versions [3.59,3.63) of GNU make to not export all variables.
 # Otherwise a system limit (for SysV at least) may be exceeded.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/FAQ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/FAQ
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/FAQ	2001-01-22 16:37:39.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/FAQ	2001-02-12 16:54:54.000000000 +0800
@@ -1,7 +1,7 @@
-Updated: January 22, 2001 (http://curl.haxx.se/docs/faq.shtml)
+Updated: February 12, 2001 (http://curl.haxx.se/docs/faq.shtml)
                                   _   _ ____  _     
                               ___| | | |  _ \| |    
                              / __| | | | |_) | |    
                             | (__| |_| |  _ <| |___ 
                              \___|\___/|_| \_\_____|
 
@@ -27,12 +27,14 @@
   3.3 Why doesn't my posting using -F work?
   3.4 How do I tell curl to run custom FTP commands?
   3.5 How can I disable the Pragma: nocache header?
   3.6 Does curl support javascript, ASP, XML, XHTML or HTML version Y?
   3.7 Can I use curl to delete/rename a file through FTP?
   3.8 How do I tell curl to follow HTTP redirects?
+  3.9 How do I use curl in PHP?
+  3.10 What about SOAP, WEBDAV, XML-RPC or similar protocols over HTTP?
 
  4. Running Problems
   4.1 Problems connecting to SSL servers.
   4.2 Why do I get problems when I use & or % in the URL?
   4.3 How can I use {, }, [ or ] to specify multiple URLs?
   4.4 Why do I get downloaded data even though the web page doesn't exist?
@@ -49,13 +51,14 @@
 
  5. libcurl Issues
   5.1 Is libcurl thread-safe?
   5.2 How can I receive all data into a large memory chunk?
   5.3 How do I fetch multiple files with libcurl?
   5.4 Does libcurl do Winsock initing on win32 systems?
-  5.5 Does CURLOPT_FILE work on win32 ?
+  5.5 Does CURLOPT_FILE and CURLOPT_INFILE work on win32 ?
+  5.6 What about Keep-Alive or persistant connections?
 
  6. License Issues
   6.1 I have a GPL program, can I use the libcurl library?
   6.2 I have a closed-source program, can I use the libcurl library?
   6.3 I have a BSD licensed program, can I use the libcurl library?
   6.4 I have a program that uses LGPL libraries, can I use libcurl?
@@ -101,14 +104,14 @@
   script (or write a new program that interfaces libcurl) and do it.
 
   Curl is not a PHP tool, even though it works perfectly well when used from
   or with PHP.
 
   Curl is not a single-OS program. Curl exists, compiles, builds and runs
-  under a wide range of operating systems, including all modern Unixes,
-  Windows, Amiga, BeOS, OS/2, OS X, QNX etc.
+  under a wide range of operating systems, including all modern Unixes (and a
+  bunch of older ones too), Windows, Amiga, BeOS, OS/2, OS X, QNX etc.
 
   1.4 When will you make curl do XXXX ?
 
   I love suggestions of what to change in order to make curl and libcurl
   better. I do however believe in a few rules when it comes to the future of
   curl:
@@ -225,13 +228,13 @@
   Try the -C option.
 
   3.3. Why doesn't my posting using -F work?
 
   You can't simply use -F or -d at your choice. The web server that will
   receive your post assumes one of the formats. If the form you're trying to
-  "fake" sets the type to 'multipart/form-data', than and only then you must
+  "fake" sets the type to 'multipart/form-data', then and only then you must
   use the -F type. In all the most common cases, you should use -d which then
   causes a posting with the type 'application/x-www-form-urlencoded'.
 
   I have described this in some detail in the README.curl file, and if you
   don't understand it the first time, read it again before you post questions
   about this to the mailing list. I would also suggest that you read through
@@ -276,12 +279,35 @@
   Curl does not follow so-called redirects by default. The Location: header
   that informs the client about this is only interpreted if you're using the
   -L/--location option. As in:
 
      curl -L http://redirector.com
 
+  3.9 How do I use curl in PHP?
+
+  PHP4 has the ability to use libcurl as an internal module if built with that
+  option enabled. You then get a set of extra functions that can be used
+  within your PHP programs. You find all details about those functions in the
+  curl section in the PHP manual, see the online version at:
+
+        http://www.php.net/manual/ref.curl.php
+
+  PHP also offers the option to run a command line, and then you can of course
+  invoke the curl tool using a command line. This is the way to use curl if
+  you're using PHP3 or PHP4 built without curl module support.
+
+  3.10 What about SOAP, WEBDAV, XML-RPC or similar protocols over HTTP?
+
+  Curl adheres to the HTTP spec, which basically means you can play with *any*
+  protocol that is built ontop of HTTP. Protocols such as SOAP, WEBDAV and
+  XML-RPC are all such ones. You can use -X to set custom requests and -H to
+  set custom headers (or replace internally generated ones).
+
+  Using libcurl or PHP's curl modules is just as fine and you'd just use the
+  proper library options to do the same.
+
 4. Running Problems
 
   4.1. Problems connecting to SSL servers.
 
   It took a very long time before I could sort out why curl had problems
   to connect to certain SSL servers when using SSLeay or OpenSSL v0.9+.
@@ -307,12 +333,15 @@
 
      curl 'http://www.altavista.com/cgi-bin/query?text=yes&q=curl'
 
   In win32, the standard DOS shell treats the %-letter specially and you may
   need to quote the string properly when % is used in it.
 
+  Also note that if you want the literal %-letter to be part of the data you
+  pass in a POST using -d/--data you must encode it as '%25'.
+
   4.3. How can I use {, }, [ or ] to specify multiple URLs?
 
   Because those letters have a special meaning to the shell, and to be used in
   a URL specified to curl you must quote them.
 
   An example that downloads two URLs (sequentially) would do:
@@ -405,13 +434,14 @@
   operating system name and version and complete instructions how to repeat
   the bug.
 
   4.9. Curl can't authenticate to the server that requires NTLM?
 
   NTLM is a Microsoft proprietary protocol. Unfortunately, curl does not
-  currently support that.
+  currently support that. Proprietary formats are evil. You should not use
+  such ones.
 
 5. libcurl Issues
 
   5.1. Is libcurl thread-safe?
 
   Yes.
@@ -470,24 +500,34 @@
   On win32 systems, you need to init the winsock stuff manually, libcurl will
   not do that for you. WSAStartup() and WSACleanup() should be used
   accordingly. The reason for this is of course that a single application may
   use several different libraries and parts, and there's no reason for every
   single library to do this.
 
-  5.5 Does CURLOPT_FILE work on win32 ?
+  5.5 Does CURLOPT_FILE and CURLOPT_INFILE work on win32 ?
 
   Yes, but you cannot open a FILE * and pass the pointer to a DLL and have
-  that DLL use the FILE *. You must use CURLOPT_WRITEFUNCTION as well to set a
-  function that writes the file, even if that simply writes the data to the
-  specified FILE*.
+  that DLL use the FILE *. If you set CURLOPT_FILE you must also use
+  CURLOPT_WRITEFUNCTION as well to set a function that writes the file, even
+  if that simply writes the data to the specified FILE*. Similarly, if you use
+  CURLOPT_INFILE you must also specify CURLOPT_READFUNCTION.
+
+  (Provided by Joel DeYoung and Bob Schader)
+
+  5.6 What about Keep-Alive or persistant connections?
+
+  This is closely related to issue 5.3. Since libcurl has no real support
+  for doing multiple file transfers, there's no support for Keep-Alive or
+  persistant connections either.
 
-  (provided by Joel DeYoung)
+  This is of course subject to change as soon as libcurl gets support for
+  multiple files. Feel free to join in and make this change happen sooner!
 
 6. License Issues
 
-  NOTE: This section is now updated to concern curl 7.5.2 or later!
+  NOTE: This section concerns curl 7.5.2 or later!
 
   Curl and libcurl are released under a MIT/X derivate license *or* the MPL,
   the Mozilla Public License. To get a really good answer to your license
   conflict questions, you should study the MPL and MIT/X licenses and the
   license you are about to use and check for clashes yourself. This section is
   just a brief summary for the cases we get the most questions. (Parts of this
@@ -499,40 +539,40 @@
 
   Since libcurl may be distributed under the MIT/X derivate license, it can be
   used together with GPL in any software.
 
   6.2. I have a closed-source program, can I use the libcurl library?
 
-  Yes.
+  Yes!
 
-  libcurl does not put any restrictions on the program that uses the
-  library.
+  libcurl does not put any restrictions on the program that uses the library.
 
   6.3. I have a BSD licensed program, can I use the libcurl library?
 
-  Yes.
+  Yes!
 
-  libcurl does not put any restrictions on the program that uses the
-  library.
+  libcurl does not put any restrictions on the program that uses the library.
 
   6.4. I have a program that uses LGPL libraries, can I use libcurl?
 
-  Yes.
+  Yes!
 
-  The LGPL license don't clash with other licenses.
+  The LGPL license doesn't clash with other licenses.
 
   6.5. Can I modify curl/libcurl for my program and keep the changes secret?
 
-  Yes.
+  Yes!
 
   The MIT/X derivate license practically allows you to do almost anything with
   the sources, on the condition that the copyright texts in the sources are
   left intact.
 
   6.6. Can you please change the curl/libcurl license to XXXX?
 
-  No. We carefully picked this license years ago and a large amount of people
-  have contributed with source code knowing that this is the license we
-  use. This license puts the restrictions we want on curl/libcurl and it does
-  not spread to other programs or libraries that use it. The recent dual
-  license modification should make it possible for everyone to use libcurl or
-  curl in their projects, no matter what license they already have in use.
+  No.
+
+  We carefully picked this license years ago and a large amount of people have
+  contributed with source code knowing that this is the license we use. This
+  license puts the restrictions we want on curl/libcurl and it does not spread
+  to other programs or libraries that use it. The recent dual license
+  modification should make it possible for everyone to use libcurl or curl in
+  their projects, no matter what license they already have in use.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/INSTALL /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/INSTALL
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/INSTALL	2001-01-16 06:39:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/INSTALL	2001-02-05 17:36:12.000000000 +0800
@@ -81,15 +81,16 @@
    To make sure everything runs as supposed, run the test suite:
 
      make test
 
    KNOWN PROBLEMS
 
-     If you happen to have autoconf installed, but a version older than
-     2.12 you will get into trouble. Then you can still build curl by
-     issuing these commands: (from Ralph Beckmann)
+     If you happen to have autoconf installed, but a version older than 2.12
+     you will get into trouble. Then you can still build curl by issuing these
+     commands (note that this requires curl to be built staticly): (from Ralph
+     Beckmann)
 
        ./configure [...]
        cd lib; make; cd ..
        cd src; make; cd ..
        cp src/curl elsewhere/bin/
 
@@ -136,12 +137,20 @@
           --with-krb4[=DIR]            where to look for Kerberos4
 
      In most cases, /usr/athena is the install prefix and then it works with
 
        ./configure --with-krb4=/usr/athena
 
+     If your system support shared libraries, but you want to built a static
+     version only, you can disable building the shared version by using:
+
+       ./configure --disable-shared
+
+     If you're a curl developer and use gcc, you might want to enable more
+     debug options with the --enable-debug option.
+
 Win32
 =====
  
    Without SSL:
 
       MingW32 (GCC-2.95) style
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/MANUAL /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/MANUAL
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/docs/MANUAL	2000-11-30 16:07:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/docs/MANUAL	2001-02-06 17:59:44.000000000 +0800
@@ -723,12 +723,31 @@
 
         curl --krb4 private ftp://krb4site.com -u username:fakepwd
 
   There's no use for a password on the -u switch, but a blank one will make
   curl ask for one and you already entered the real password to kauth.
 
+TELNET
+
+  The curl telnet support is basic and very easy to use. Curl passes all data
+  passed to it on stdin to the remote server. Connect to a remote telnet
+  server using a command line similar to:
+
+        curl telnet://remote.server.com
+
+  And enter the data to pass to the server on stdin. The result will be sent
+  to stdout or to the file you specify with -o.
+
+  You might want the -N/--no-buffer option to switch off the buffered output
+  for slow connections or similar.
+
+  NOTE: the telnet protocol does not specify any way to login with a specified
+  user and password so curl can't do that automatically. To do that, you need
+  to track when the login prompt is received and send the username and
+  password accordingly.
+
 MAILING LIST
 
   We have an open mailing list to discuss curl, its development and things
   relevant to this.
 
   To subscribe, mail curl-request@contactor.se with "subscribe <fill in your
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/include/curl/curl.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/include/curl/curl.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/include/curl/curl.h	2001-01-27 23:39:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/include/curl/curl.h	2001-02-13 21:35:18.000000000 +0800
@@ -17,13 +17,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: curl.h,v 1.46 2001/01/25 13:48:28 bagder Exp $
+ * $Id: curl.h,v 1.52 2001/02/07 09:49:06 bagder Exp $
  *****************************************************************************/
 
 #include <stdio.h>
 /* The include stuff here is mainly for time_t! */
 #ifdef vms
 # include <types.h>
@@ -449,14 +449,14 @@
 char *curl_getenv(char *variable);
 
 /* Returns a static ascii string of the libcurl version. */
 char *curl_version(void);
 
 /* This is the version number */
-#define LIBCURL_VERSION "7.6"
-#define LIBCURL_VERSION_NUM 0x070600
+#define LIBCURL_VERSION "7.6.1"
+#define LIBCURL_VERSION_NUM 0x070601
 
 /* linked-list structure for the CURLOPT_QUOTE option (and other) */
 struct curl_slist {
 	char			*data;
 	struct curl_slist	*next;
 };
@@ -551,13 +551,13 @@
  *
  * result = curl_close(curl);
  */
 CURLcode curl_close(CURL *curl); /* the opposite of curl_open() */
 
 CURLcode curl_read(CURLconnect *c_conn, char *buf, size_t buffersize,
-                   size_t *n);
+                   ssize_t *n);
 CURLcode curl_write(CURLconnect *c_conn, char *buf, size_t amount,
                     size_t *n);
 
 /*
  * NAME curl_connect()
  *
@@ -673,13 +673,16 @@
   CURLINFO_SPEED_UPLOAD     = CURLINFO_DOUBLE + 10,
   CURLINFO_HEADER_SIZE      = CURLINFO_LONG   + 11,
   CURLINFO_REQUEST_SIZE     = CURLINFO_LONG   + 12,
   CURLINFO_SSL_VERIFYRESULT = CURLINFO_LONG   + 13,
   CURLINFO_FILETIME         = CURLINFO_LONG   + 14,
 
-  CURLINFO_LASTONE          = 15
+  CURLINFO_CONTENT_LENGTH_DOWNLOAD   = CURLINFO_DOUBLE + 15,
+  CURLINFO_CONTENT_LENGTH_UPLOAD     = CURLINFO_DOUBLE + 16,
+
+  CURLINFO_LASTONE          = 17
 } CURLINFO;
 
 /*
  * NAME curl_getinfo()
  *
  * DESCRIPTION
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/ftp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/ftp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/ftp.c	2001-01-25 20:17:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/ftp.c	2001-02-13 21:34:16.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: ftp.c,v 1.45 2001/01/25 12:17:07 bagder Exp $
+ * $Id: ftp.c,v 1.52 2001/02/13 13:34:16 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <stdio.h>
 #include <string.h>
@@ -218,13 +218,13 @@
 
 int Curl_GetFTPResponse(int sockfd, char *buf,
                         struct connectdata *conn,
                         int *ftpcode)
 {
   int nread;
-  size_t keepon=TRUE;
+  ssize_t keepon=TRUE;
   char *ptr;
   int timeout = 3600; /* in seconds */
   struct timeval interval;
   fd_set rkeepfd;
   fd_set readfd;
   struct UrlData *data = conn->data;
@@ -279,12 +279,16 @@
          * This code previously didn't use the kerberos sec_read() code
          * to read, but when we use Curl_read() it may do so. Do confirm
          * that this is still ok and then remove this comment!
          */
         if(CURLE_OK != Curl_read(conn, sockfd, ptr, 1, &keepon))
           keepon = FALSE;
+        else if(keepon <= 0) {
+          error = SELECT_ERROR;
+          failf(data, "Connection aborted");
+        }
         else if ((*ptr == '\n') || (*ptr == '\r'))
           keepon = FALSE;
       }
       if(keepon) {
         nread++;
         ptr++;
@@ -538,15 +542,12 @@
         }
       }
       qitem = qitem->next;
     }
   }
 
-  free(ftp);
-  data->proto.ftp=NULL; /* it is gone */
-
   return CURLE_OK;
 }
 
 
 
 static
@@ -561,12 +562,15 @@
   int portsock=-1;
   struct sockaddr_in serv_addr;
   char hostent_buf[8192];
 #if defined (HAVE_INET_NTOA_R)
   char ntoa_buf[64];
 #endif
+#ifdef ENABLE_IPV6
+  struct addrinfo *ai;
+#endif
 
   struct curl_slist *qitem; /* QUOTE item */
   /* the ftp struct is already inited in ftp_connect() */
   struct FTP *ftp = data->proto.ftp;
 
   long *bytecountp = ftp->bytecountp;
@@ -699,12 +703,184 @@
 
     return CURLE_OK;
   }
 
   /* We have chosen to use the PORT command */
   if(data->bits.ftp_use_port) {
+#ifdef ENABLE_IPV6
+    struct addrinfo hints, *res, *ai;
+    struct sockaddr_storage ss;
+    int sslen;
+    char hbuf[NI_MAXHOST];
+    char *localaddr;
+    struct sockaddr *sa=(struct sockaddr *)&ss;
+#ifdef NI_WITHSCOPEID
+    const int niflags = NI_NUMERICHOST | NI_NUMERICSERV | NI_WITHSCOPEID;
+#else
+    const int niflags = NI_NUMERICHOST | NI_NUMERICSERV;
+#endif
+    unsigned char *ap;
+    unsigned char *pp;
+    int alen, plen;
+    char portmsgbuf[4096], tmp[4096];
+    char *p;
+    char *mode[] = { "EPRT", "LPRT", "PORT", NULL };
+    char **modep;
+
+    /*
+     * we should use Curl_if2ip?  given pickiness of recent ftpd,
+     * I believe we should use the same address as the control connection.
+     */
+    sslen = sizeof(ss);
+    if (getsockname(data->firstsocket, (struct sockaddr *)&ss, &sslen) < 0)
+      return CURLE_FTP_PORT_FAILED;
+
+    if (getnameinfo((struct sockaddr *)&ss, sslen, hbuf, sizeof(hbuf), NULL, 0,
+	niflags))
+      return CURLE_FTP_PORT_FAILED;
+
+    memset(&hints, 0, sizeof(hints));
+    hints.ai_family = sa->sa_family;
+    /*hints.ai_family = ss.ss_family;
+      this way can be used if sockaddr_storage is properly defined, as glibc 
+      2.1.X doesn't do*/
+    hints.ai_socktype = SOCK_STREAM;
+    hints.ai_flags = AI_PASSIVE;
+    if (getaddrinfo(hbuf, "0", &hints, &res))
+      return CURLE_FTP_PORT_FAILED;
+
+    portsock = -1;
+    for (ai = res; ai; ai = ai->ai_next) {
+      portsock = socket(ai->ai_family, ai->ai_socktype, ai->ai_protocol);
+      if (portsock < 0)
+	continue;
+
+      if (bind(portsock, ai->ai_addr, ai->ai_addrlen) < 0) {
+	close(portsock);
+	portsock = -1;
+	continue;
+      }
+
+      if (listen(portsock, 1) < 0) {
+	close(portsock);
+	portsock = -1;
+	continue;
+      }
+
+      break;
+    }
+    if (portsock < 0) {
+      failf(data, strerror(errno));
+      freeaddrinfo(res);
+      return CURLE_FTP_PORT_FAILED;
+    }
+
+    sslen = sizeof(ss);
+    if (getsockname(portsock, sa, &sslen) < 0) {
+      failf(data, strerror(errno));
+      freeaddrinfo(res);
+      return CURLE_FTP_PORT_FAILED;
+    }
+
+    for (modep = mode; modep && *modep; modep++) {
+      int lprtaf, eprtaf;
+
+      switch (sa->sa_family) {
+      case AF_INET:
+	ap = (char *)&((struct sockaddr_in *)&ss)->sin_addr;
+	alen = sizeof(((struct sockaddr_in *)&ss)->sin_addr);
+	pp = (char *)&((struct sockaddr_in *)&ss)->sin_port;
+	plen = sizeof(((struct sockaddr_in *)&ss)->sin_port);
+	lprtaf = 4;
+	eprtaf = 1;
+	break;
+      case AF_INET6:
+	ap = (char *)&((struct sockaddr_in6 *)&ss)->sin6_addr;
+	alen = sizeof(((struct sockaddr_in6 *)&ss)->sin6_addr);
+	pp = (char *)&((struct sockaddr_in6 *)&ss)->sin6_port;
+	plen = sizeof(((struct sockaddr_in6 *)&ss)->sin6_port);
+	lprtaf = 6;
+	eprtaf = 2;
+	break;
+      default:
+	ap = pp = NULL;
+	lprtaf = eprtaf = -1;
+	break;
+      }
+
+      if (strcmp(*modep, "EPRT") == 0) {
+	if (eprtaf < 0)
+	  continue;
+	if (getnameinfo((struct sockaddr *)&ss, sslen,
+	    portmsgbuf, sizeof(portmsgbuf), tmp, sizeof(tmp), niflags))
+	  continue;
+	/* do not transmit IPv6 scope identifier to the wire */
+	if (sa->sa_family == AF_INET6) {
+	  char *q = strchr(portmsgbuf, '%');
+	  if (q)
+	    *q = '\0';
+	}
+	ftpsendf(data->firstsocket, conn, "%s |%d|%s|%s|", *modep, eprtaf,
+	    portmsgbuf, tmp);
+      } else if (strcmp(*modep, "LPRT") == 0 || strcmp(*modep, "PORT") == 0) {
+	int i;
+
+        if (strcmp(*modep, "LPRT") == 0 && lprtaf < 0)
+	  continue;
+        if (strcmp(*modep, "PORT") == 0 && sa->sa_family != AF_INET)
+	  continue;
+
+	portmsgbuf[0] = '\0';
+        if (strcmp(*modep, "LPRT") == 0) {
+	  snprintf(tmp, sizeof(tmp), "%d,%d", lprtaf, alen);
+	  if (strlcat(portmsgbuf, tmp, sizeof(portmsgbuf)) >= sizeof(portmsgbuf)) {
+	    goto again;
+	  }
+	}
+	for (i = 0; i < alen; i++) {
+	  if (portmsgbuf[0])
+	    snprintf(tmp, sizeof(tmp), ",%u", ap[i]);
+	  else
+	    snprintf(tmp, sizeof(tmp), "%u", ap[i]);
+	  if (strlcat(portmsgbuf, tmp, sizeof(portmsgbuf)) >= sizeof(portmsgbuf)) {
+	    goto again;
+	  }
+	}
+        if (strcmp(*modep, "LPRT") == 0) {
+	  snprintf(tmp, sizeof(tmp), ",%d", plen);
+	  if (strlcat(portmsgbuf, tmp, sizeof(portmsgbuf)) >= sizeof(portmsgbuf))
+	    goto again;
+	}
+	for (i = 0; i < plen; i++) {
+	  snprintf(tmp, sizeof(tmp), ",%u", pp[i]);
+	  if (strlcat(portmsgbuf, tmp, sizeof(portmsgbuf)) >= sizeof(portmsgbuf)) {
+	    goto again;
+	  }
+	}
+	ftpsendf(data->firstsocket, conn, "%s %s", *modep, portmsgbuf);
+      }
+
+      nread = Curl_GetFTPResponse(data->firstsocket, buf, conn, &ftpcode);
+      if (nread < 0)
+	return CURLE_OPERATION_TIMEOUTED;
+
+      if (ftpcode != 200) {
+	failf(data, "Server does not grok %s", *modep);
+	continue;
+      } else
+	      break;
+again:;
+    }
+
+    if (!*modep) {
+      close(portsock);
+      freeaddrinfo(res);
+      return CURLE_FTP_PORT_FAILED;
+    }
+
+#else
     struct sockaddr_in sa;
     struct hostent *h=NULL;
     char *hostdataptr=NULL;
     size_t size;
     unsigned short porttouse;
     char myhost[256] = "";
@@ -806,32 +982,49 @@
       return CURLE_OPERATION_TIMEOUTED;
 
     if(ftpcode != 200) {
       failf(data, "Server does not grok PORT, try without it!");
       return CURLE_FTP_PORT_FAILED;
     }     
+#endif /* ENABLE_IPV6 */
   }
   else { /* we use the PASV command */
+#if 0
+    char *mode[] = { "EPSV", "LPSV", "PASV", NULL };
+    int results[] = { 229, 228, 227, 0 };
+#else
+    char *mode[] = { "PASV", NULL };
+    int results[] = { 227, 0 };
+#endif
+    int modeoff;
 
-    ftpsendf(data->firstsocket, conn, "PASV");
+    for (modeoff = 0; mode[modeoff]; modeoff++) {
+      ftpsendf(data->firstsocket, conn, mode[modeoff]);
+      nread = Curl_GetFTPResponse(data->firstsocket, buf, conn, &ftpcode);
+      if(nread < 0)
+	return CURLE_OPERATION_TIMEOUTED;
 
-    nread = Curl_GetFTPResponse(data->firstsocket, buf, conn, &ftpcode);
-    if(nread < 0)
-      return CURLE_OPERATION_TIMEOUTED;
+      if (ftpcode == results[modeoff])
+	break;
+    }
 
-    if(ftpcode != 227) {
+    if (!mode[modeoff]) {
       failf(data, "Odd return code after PASV");
       return CURLE_FTP_WEIRD_PASV_REPLY;
     }
-    else {
+    else if (strcmp(mode[modeoff], "PASV") == 0) {
       int ip[4];
       int port[2];
       unsigned short newport; /* remote port, not necessary the local one */
       unsigned short connectport; /* the local port connect() should use! */
       char newhost[32];
+#ifdef ENABLE_IPV6
+      struct addrinfo *res;
+#else
       struct hostent *he;
+#endif
       char *str=buf,*ip_addr;
       char *hostdataptr=NULL;
 
       /*
        * New 227-parser June 3rd 1999.
        * It now scans for a sequence of six comma-separated numbers and
@@ -860,26 +1053,84 @@
       if(data->bits.httpproxy) {
         /*
          * This is a tunnel through a http proxy and we need to connect to the
          * proxy again here. We already have the name info for it since the
          * previous lookup.
          */
+#ifdef ENABLE_IPV6
+        res = conn->res;
+#else
         he = conn->hp;
+#endif
         connectport =
           (unsigned short)data->port; /* we connect to the proxy's port */
       }
       else {
         /* normal, direct, ftp connection */
+#ifdef ENABLE_IPV6
+        res = Curl_getaddrinfo(data, newhost, newport);
+        if(!res)
+#else
         he = Curl_gethost(data, newhost, &hostdataptr);
-        if(!he) {
+        if(!he)
+#endif
+        {
           failf(data, "Can't resolve new host %s", newhost);
           return CURLE_FTP_CANT_GET_HOST;
         }
         connectport = newport; /* we connect to the remote port */
       }
 	
+#ifdef ENABLE_IPV6
+      data->secondarysocket = -1;
+      for (ai = res; ai; ai = ai->ai_next) {
+	/* XXX for now, we can do IPv4 only */
+	if (ai->ai_family != AF_INET)
+	  continue;
+
+	data->secondarysocket = socket(ai->ai_family, ai->ai_socktype,
+	    ai->ai_protocol);
+	if (data->secondarysocket < 0)
+	  continue;
+
+	if(data->bits.verbose) {
+	  char hbuf[NI_MAXHOST];
+	  char nbuf[NI_MAXHOST];
+	  char sbuf[NI_MAXSERV];
+#ifdef NI_WITHSCOPEID
+	  const int niflags = NI_NUMERICHOST | NI_NUMERICSERV | NI_WITHSCOPEID;
+#else
+	  const int niflags = NI_NUMERICHOST | NI_NUMERICSERV;
+#endif
+	  if (getnameinfo(res->ai_addr, res->ai_addrlen, nbuf, sizeof(nbuf),
+	      sbuf, sizeof(sbuf), niflags)) {
+	    snprintf(nbuf, sizeof(nbuf), "?");
+	    snprintf(sbuf, sizeof(sbuf), "?");
+	  }
+	  if (getnameinfo(res->ai_addr, res->ai_addrlen, hbuf, sizeof(hbuf),
+	      NULL, 0, 0)) {
+	    infof(data, "Connecting to %s port %s\n", nbuf, sbuf);
+	  } else {
+	    infof(data, "Connecting to %s (%s) port %s\n", hbuf, nbuf, sbuf);
+	  }
+	}
+
+	if (connect(data->secondarysocket, ai->ai_addr, ai->ai_addrlen) < 0) {
+	  close(data->secondarysocket);
+	  data->secondarysocket = -1;
+	  continue;
+	}
+
+	break;
+      }
+
+      if (data->secondarysocket < 0) {
+	failf(data, strerror(errno));
+        return CURLE_FTP_CANT_RECONNECT;
+      }
+#else
       data->secondarysocket = socket(AF_INET, SOCK_STREAM, 0);
 
       memset((char *) &serv_addr, '\0', sizeof(serv_addr));
       memcpy((char *)&(serv_addr.sin_addr), he->h_addr, he->h_length);
       serv_addr.sin_family = he->h_addrtype;
 
@@ -968,20 +1219,23 @@
         default:
           failf(data, "Can't connect to ftp server");
           break;
         }
         return CURLE_FTP_CANT_RECONNECT;
       }
+#endif /*ENABLE_IPV6*/
 
       if (data->bits.tunnel_thru_httpproxy) {
         /* We want "seamless" FTP operations through HTTP proxy tunnel */
         result = Curl_ConnectHTTPProxyTunnel(conn, data->secondarysocket,
                                              newhost, newport);
         if(CURLE_OK != result)
           return result;
       }
+    } else {
+      return CURLE_FTP_CANT_RECONNECT;
     }
   }
   /* we have the (new) data connection ready */
   infof(data, "Connected the data stream!\n");
 
   if(data->bits.upload) {
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib: getenv.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/getinfo.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/getinfo.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/getinfo.c	2001-01-03 17:29:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/getinfo.c	2001-02-05 04:03:30.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: getinfo.c,v 1.6 2001/01/03 09:29:34 bagder Exp $
+ * $Id: getinfo.c,v 1.7 2001/02/04 20:03:30 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <curl/curl.h>
 
@@ -100,11 +100,17 @@
   case CURLINFO_SPEED_UPLOAD:
     *param_doublep = data->progress.ulspeed;
     break;
   case CURLINFO_SSL_VERIFYRESULT:
     *param_longp = data->ssl.certverifyresult;
     break;
+  case CURLINFO_CONTENT_LENGTH_DOWNLOAD:
+    *param_doublep = data->progress.size_dl;
+    break;
+  case CURLINFO_CONTENT_LENGTH_UPLOAD:
+    *param_doublep = data->progress.size_ul;
+    break;
   default:
     return CURLE_BAD_FUNCTION_ARGUMENT;
   }
   return CURLE_OK;
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/hostip.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/hostip.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/hostip.c	2001-01-05 18:11:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/hostip.c	2001-02-06 07:04:44.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: hostip.c,v 1.20 2001/01/05 10:11:42 bagder Exp $
+ * $Id: hostip.c,v 1.21 2001/02/05 23:04:44 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <string.h>
 #include <errno.h>
@@ -80,12 +80,35 @@
   paddr = (unsigned char *)&num;
   sprintf(addr, "%u.%u.%u.%u", paddr[0], paddr[1], paddr[2], paddr[3]);
 #endif
   return (addr);
 }
 
+#ifdef ENABLE_IPV6
+struct addrinfo *Curl_getaddrinfo(struct UrlData *data,
+			       char *hostname,
+			       int port)
+{
+  struct addrinfo hints, *res;
+  int error;
+  char sbuf[NI_MAXSERV];
+
+  memset(&hints, 0, sizeof(hints));
+  hints.ai_family = PF_UNSPEC;
+  hints.ai_socktype = SOCK_STREAM;
+  hints.ai_flags = AI_CANONNAME;
+  snprintf(sbuf, sizeof(sbuf), "%d", port);
+  error = getaddrinfo(hostname, sbuf, &hints, &res);
+  if (error) {
+    infof(data, "getaddrinfo(3) failed for %s\n", hostname);
+    return NULL;
+  }
+  return res;
+}
+#endif
+
 /* The original code to this function was once stolen from the Dancer source
    code, written by Bjorn Reese, it has since been patched and modified
    considerably. */
 
 #ifndef INADDR_NONE
 #define INADDR_NONE (unsigned long) ~0
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/hostip.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/hostip.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/hostip.h	2001-01-05 18:11:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/hostip.h	2001-02-06 07:04:44.000000000 +0800
@@ -17,14 +17,19 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: hostip.h,v 1.7 2001/01/05 10:11:42 bagder Exp $
+ * $Id: hostip.h,v 1.8 2001/02/05 23:04:44 bagder Exp $
  *****************************************************************************/
 
+struct addrinfo;
+struct addrinfo *Curl_getaddrinfo(struct UrlData *data,
+                             char *hostname,
+                             int port);
+
 struct hostent *Curl_gethost(struct UrlData *data,
                              char *hostname,
                              char **bufp);
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/http.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/http.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/http.c	2001-01-26 23:49:39.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/http.c	2001-02-13 21:34:16.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: http.c,v 1.43 2001/01/26 15:49:39 bagder Exp $
+ * $Id: http.c,v 1.48 2001/02/13 13:34:16 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -211,35 +211,36 @@
  * Read everything until a newline.
  */
 
 static
 int GetLine(int sockfd, char *buf, struct connectdata *conn)
 {
-  size_t nread;
+  ssize_t nread;
   int read_rc=1;
   char *ptr;
   struct UrlData *data=conn->data;
 
   ptr=buf;
 
   /* get us a full line, terminated with a newline */
   for(nread=0;
       (nread<BUFSIZE) && read_rc;
       nread++, ptr++) {
     if((CURLE_OK != Curl_read(conn, sockfd, ptr, 1, &nread)) ||
+       (nread <= 0) ||
        (*ptr == '\n'))
       break;
   }
   *ptr=0; /* zero terminate */
-
+  
   if(data->bits.verbose) {
     fputs("< ", data->err);
     fwrite(buf, 1, nread, data->err);
     fputs("\n", data->err);
   }
-  return nread;
+  return nread>0?nread:0;
 }
 
 
 
 /*
  * This function checks the linked list of custom HTTP headers for a particular
@@ -371,15 +372,12 @@
     data->in = http->in; /* restore */
   }
   else if(data->bits.http_put) {
     *bytecount = http->readbytecount + http->writebytecount;
   }
 
-  free(http);
-  data->proto.http=NULL; /* it is gone */
-
   return CURLE_OK;
 }
 
 
 CURLcode Curl_http(struct connectdata *conn)
 {
@@ -426,15 +424,12 @@
         data->ptr_userpwd = aprintf( "Authorization: Basic %s\015\012",
                                      authorization);
         free(authorization);
       }
     }
   }
-  if((data->bits.set_range) && !checkheaders(data, "Range:")) {
-    data->ptr_rangeline = aprintf("Range: bytes=%s\015\012", data->range);
-  }
   if((data->bits.http_set_referer) && !checkheaders(data, "Referer:")) {
     data->ptr_ref = aprintf("Referer: %s\015\012", data->referer);
   }
   if(data->cookie && !checkheaders(data, "Cookie:")) {
     data->ptr_cookie = aprintf("Cookie: %s\015\012", data->cookie);
   }
@@ -525,12 +520,40 @@
           return CURLE_PARTIAL_FILE;
         }
       }
       /* we've passed, proceed as normal */
     }
   }
+  if(data->bits.set_range) {
+    /*
+     * A range is selected. We use different headers whether we're downloading
+     * or uploading and we always let customized headers override our internal
+     * ones if any such are specified.
+     */
+    if((data->httpreq == HTTPREQ_GET) &&
+       !checkheaders(data, "Range:")) {
+      data->ptr_rangeline = aprintf("Range: bytes=%s\r\n", data->range);
+    }
+    else if((data->httpreq != HTTPREQ_GET) &&
+            !checkheaders(data, "Content-Range:")) {
+
+      if(data->resume_from) {
+        /* This is because "resume" was selected */
+        long total_expected_size= data->resume_from + data->infilesize;
+        data->ptr_rangeline = aprintf("Content-Range: bytes %s%ld/%ld\r\n",
+                                      data->range, total_expected_size-1,
+                                      total_expected_size);
+      }
+      else {
+        /* Range was selected and then we just pass the incoming range and 
+           append total size */
+        data->ptr_rangeline = aprintf("Content-Range: bytes %s/%d\r\n",
+                                      data->range, data->infilesize);
+      }
+    }
+  }
 
   do {
     send_buffer *req_buffer;
     struct curl_slist *headers=data->headers;
 
     /* initialize a dynamic send-buffer */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/if2ip.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/if2ip.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/if2ip.h	2001-01-05 18:11:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/if2ip.h	2001-02-05 03:00:27.000000000 +0800
@@ -17,17 +17,17 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: if2ip.h,v 1.6 2001/01/05 10:11:42 bagder Exp $
+ * $Id: if2ip.h,v 1.7 2001/02/04 19:00:27 bagder Exp $
  *****************************************************************************/
 #include "setup.h"
 
-#if ! defined(WIN32) && ! defined(__BEOS__)
+#if ! defined(WIN32) && ! defined(__BEOS__) && !defined(__CYGWIN32__)
 extern char *Curl_if2ip(char *interface, char *buf, int buf_size);
 #else
 #define Curl_if2ip(a,b,c) NULL
 #endif
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/Makefile.am	2001-01-17 21:22:27.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/Makefile.am	2001-02-12 16:21:45.000000000 +0800
@@ -1,8 +1,8 @@
 #
-# $Id: Makefile.am,v 1.16 2001/01/17 13:22:27 bagder Exp $
+# $Id: Makefile.am,v 1.17 2001/02/12 08:21:45 bagder Exp $
 #
 
 AUTOMAKE_OPTIONS = foreign
 
 EXTRA_DIST = getdate.y \
        Makefile.b32 Makefile.b32.resp Makefile.m32 Makefile.vc6 \
@@ -52,13 +52,13 @@
 cookie.c       formdata.h     http.c         sendf.c        \
 cookie.h       ftp.c          http.h         sendf.h        url.c \
 dict.c         ftp.h          if2ip.c        speedcheck.c   url.h \
 dict.h         getdate.c      if2ip.h        speedcheck.h   urldata.h \
 getdate.h      ldap.c         ssluse.c       version.c \
 getenv.c       ldap.h         ssluse.h       \
-escape.c       getenv.h       mprintf.c      telnet.c       \
+escape.c       mprintf.c      telnet.c       \
 escape.h       getpass.c      netrc.c        telnet.h       \
 getinfo.c transfer.c strequal.c strequal.h easy.c \
 security.h security.c krb4.c krb4.h memdebug.c memdebug.h inet_ntoa_r.h
 
 noinst_HEADERS = setup.h transfer.h
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/Makefile.in	2001-01-27 23:41:59.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/Makefile.in	2001-02-13 21:35:55.000000000 +0800
@@ -8,13 +8,13 @@
 # This program is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
 #
-# $Id: Makefile.am,v 1.16 2001/01/17 13:22:27 bagder Exp $
+# $Id: Makefile.am,v 1.17 2001/02/12 08:21:45 bagder Exp $
 #
 
 
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -115,13 +115,13 @@
 # increment age.
 #
 # 6.If any interfaces have been removed since the last public release, then
 # set age to 0.
 #
 
-libcurl_la_SOURCES =  arpa_telnet.h  file.c         getpass.h      netrc.h        timeval.c base64.c       file.h         hostip.c       progress.c     timeval.h base64.h       formdata.c     hostip.h       progress.h     cookie.c       formdata.h     http.c         sendf.c        cookie.h       ftp.c          http.h         sendf.h        url.c dict.c         ftp.h          if2ip.c        speedcheck.c   url.h dict.h         getdate.c      if2ip.h        speedcheck.h   urldata.h getdate.h      ldap.c         ssluse.c       version.c getenv.c       ldap.h         ssluse.h       escape.c       getenv.h       mprintf.c      telnet.c       escape.h       getpass.c      netrc.c        telnet.h       getinfo.c transfer.c strequal.c strequal.h easy.c security.h security.c krb4.c krb4.h memdebug.c memdebug.h inet_ntoa_r.h
+libcurl_la_SOURCES =  arpa_telnet.h  file.c         getpass.h      netrc.h        timeval.c base64.c       file.h         hostip.c       progress.c     timeval.h base64.h       formdata.c     hostip.h       progress.h     cookie.c       formdata.h     http.c         sendf.c        cookie.h       ftp.c          http.h         sendf.h        url.c dict.c         ftp.h          if2ip.c        speedcheck.c   url.h dict.h         getdate.c      if2ip.h        speedcheck.h   urldata.h getdate.h      ldap.c         ssluse.c       version.c getenv.c       ldap.h         ssluse.h       escape.c       mprintf.c      telnet.c       escape.h       getpass.c      netrc.c        telnet.h       getinfo.c transfer.c strequal.c strequal.h easy.c security.h security.c krb4.c krb4.h memdebug.c memdebug.h inet_ntoa_r.h
 
 
 noinst_HEADERS = setup.h transfer.h
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = ../config.h ../src/config.h
 CONFIG_CLEAN_FILES = 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/netrc.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/netrc.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/netrc.c	2001-01-05 18:11:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/netrc.c	2001-02-07 16:36:23.000000000 +0800
@@ -15,22 +15,23 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: netrc.c,v 1.8 2001/01/05 10:11:42 bagder Exp $
+ * $Id: netrc.c,v 1.9 2001/02/07 08:36:23 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 
-#include "getenv.h"
+#include <curl/curl.h>
+
 #include "strequal.h"
 
 /* Debug this single source file with:
    'make netrc' then run './netrc'!
 
    Oh, make sure you have a .netrc file too ;-)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/progress.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/progress.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/progress.c	2001-01-25 20:32:40.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/progress.c	2001-01-28 04:22:50.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: progress.c,v 1.22 2001/01/25 12:32:40 bagder Exp $
+ * $Id: progress.c,v 1.23 2001/01/27 18:23:59 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <string.h>
 
@@ -200,12 +200,15 @@
   if(data->progress.flags & PGRS_HIDE)
     ; /* We do enter this function even if we don't wanna see anything, since
          this is were lots of the calculations are being made that will be used
          even when not displayed! */
   else if(!(data->progress.flags & PGRS_HEADERS_OUT)) {
     if (!data->progress.callback) {
+      if(data->resume_from)
+        fprintf(data->err, "** Resuming transfer from byte position %d\n",
+                data->resume_from);
       fprintf(data->err,
               "  %% Total    %% Received %% Xferd  Average Speed          Time             Curr.\n"
               "                                 Dload  Upload Total    Current  Left    Speed\n");
     }
     data->progress.flags |= PGRS_HEADERS_OUT; /* headers are shown */
   }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/sendf.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/sendf.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/sendf.c	2001-01-25 20:20:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/sendf.c	2001-02-12 16:22:39.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: sendf.c,v 1.17 2001/01/25 12:20:30 bagder Exp $
+ * $Id: sendf.c,v 1.18 2001/01/31 13:54:13 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <stdio.h>
 #include <stdarg.h>
@@ -195,16 +195,16 @@
 /*
  * Internal read-from-socket function. This is meant to deal with plain
  * sockets, SSL sockets and kerberos sockets.
  */
 CURLcode Curl_read(struct connectdata *conn, int sockfd,
                    char *buf, size_t buffersize,
-                   size_t *n)
+                   ssize_t *n)
 {
   struct UrlData *data = conn->data;
-  size_t nread;
+  ssize_t nread;
 
 #ifdef USE_SSLEAY
   if (data->ssl.use) {
     int loop=100; /* just a precaution to never loop endlessly */
     while(loop--) {
       nread = SSL_read(data->ssl.handle, buf, buffersize);
@@ -231,13 +231,13 @@
 /*
  * The public read function reads from the 'sockfd' file descriptor only.
  * Use the Curl_read() internally when you want to specify fd.
  */
 
 CURLcode curl_read(CURLconnect *c_conn, char *buf, size_t buffersize,
-                   size_t *n)
+                   ssize_t *n)
 {
   struct connectdata *conn = (struct connectdata *)c_conn;
 
   if(!n || !conn || (conn->handle != STRUCT_CONNECT))
     return CURLE_FAILED_INIT;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/sendf.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/sendf.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/sendf.h	2001-01-25 20:20:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/sendf.h	2001-01-31 21:54:13.000000000 +0800
@@ -17,13 +17,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: sendf.h,v 1.10 2001/01/25 12:20:30 bagder Exp $
+ * $Id: sendf.h,v 1.11 2001/01/31 13:54:13 bagder Exp $
  *****************************************************************************/
 
 size_t Curl_sendf(int fd, struct connectdata *, char *fmt, ...);
 void Curl_infof(struct UrlData *, char *fmt, ...);
 void Curl_failf(struct UrlData *, char *fmt, ...);
 
@@ -44,13 +44,13 @@
 CURLcode Curl_client_write(struct UrlData *data, int type, char *ptr,
                            size_t len);
 
 /* internal read-function, does plain socket, SSL and krb4 */
 CURLcode Curl_read(struct connectdata *conn, int sockfd,
                    char *buf, size_t buffersize,
-                   size_t *n);
+                   ssize_t *n);
 /* internal write-function, does plain socket, SSL and krb4 */
 CURLcode Curl_write(struct connectdata *conn, int sockfd,
                     void *mem, size_t len,
                     size_t *written);
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/strequal.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/strequal.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/strequal.c	2001-01-05 18:11:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/strequal.c	2001-02-06 17:12:39.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: strequal.c,v 1.8 2001/01/05 10:11:42 bagder Exp $
+ * $Id: strequal.c,v 1.11 2001/02/06 09:12:39 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <string.h>
 
@@ -63,6 +63,47 @@
     second++;
   }
   return toupper(*first) == toupper(*second);
 #endif
 }
 
+#ifndef HAVE_STRLCAT
+/*
+ * The strlcat() function appends the NUL-terminated string src to the end
+ * of dst. It will append at most size - strlen(dst) - 1 bytes, NUL-termi-
+ * nating the result.
+ *
+ * The strlcpy() and strlcat() functions return the total length of the
+ * string they tried to create.  For strlcpy() that means the length of src.
+ * For strlcat() that means the initial length of dst plus the length of
+ * src. While this may seem somewhat confusing it was done to make trunca-
+ * tion detection simple.
+ *
+ * 
+ */
+size_t strlcat(char *dst, const char *src, size_t siz)
+{
+  char *d = dst;
+  const char *s = src;
+  size_t n = siz;
+  size_t dlen;
+
+  /* Find the end of dst and adjust bytes left but don't go past end */
+  while (n-- != 0 && *d != '\0')
+    d++;
+  dlen = d - dst;
+  n = siz - dlen;
+
+  if (n == 0)
+    return(dlen + strlen(s));
+  while (*s != '\0') {
+    if (n != 1) {
+      *d++ = *s;
+      n--;
+    }
+    s++;
+  }
+  *d = '\0';
+
+  return(dlen + (s - src));	/* count does not include NUL */
+}
+#endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/telnet.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/telnet.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/telnet.c	2001-01-25 20:22:17.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/telnet.c	2001-01-31 23:05:44.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: telnet.c,v 1.11 2001/01/25 12:22:17 bagder Exp $
+ * $Id: telnet.c,v 1.13 2001/01/31 15:05:44 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -830,13 +830,13 @@
   int sockfd = data->firstsocket;
   fd_set readfd;
   fd_set keepfd;
 
   bool keepon = TRUE;
   char *buf = data->buffer;
-  size_t nread;
+  ssize_t nread;
 
   init_telnet(data);
    
   FD_ZERO (&readfd);		/* clear it */
   FD_SET (sockfd, &readfd);
   FD_SET (1, &readfd);
@@ -869,23 +869,25 @@
       
           Curl_write(conn, data->firstsocket, outbuf,
                      out_count, &bytes_written);
         }
       }
 
-      if(FD_ISSET(sockfd, &readfd))
+      if(FD_ISSET(sockfd, &readfd)) {
         Curl_read(conn, sockfd, buf, BUFSIZE - 1, &nread);
 
-      /* if we receive 0 or less here, the server closed the connection and
-         we bail out from this! */
-      if (nread <= 0) {
-        keepon = FALSE;
-        break;
-      }
+        /* if we receive 0 or less here, the server closed the connection and
+           we bail out from this! */
+        if (nread <= 0) {
+          keepon = FALSE;
+          break;
+        }
 
-      telrcv(data, (unsigned char *)buf, nread);
+        telrcv(data, (unsigned char *)buf, nread);
+      }
     }
   }
-  return CURLE_OK;
+  /* mark this as "no further transfer wanted" */
+  return Curl_Transfer(conn, -1, -1, FALSE, NULL, -1, NULL);
 }
 
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/transfer.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/transfer.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/transfer.c	2001-01-26 23:50:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/transfer.c	2001-02-13 21:32:36.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: transfer.c,v 1.4 2001/01/26 15:50:56 bagder Exp $
+ * $Id: transfer.c,v 1.9 2001/02/07 08:36:23 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -79,13 +79,12 @@
 
 #include "urldata.h"
 #include <curl/curl.h>
 #include <curl/types.h>
 #include "netrc.h"
 
-#include "getenv.h"
 #include "hostip.h"
 #include "transfer.h"
 #include "sendf.h"
 #include "speedcheck.h"
 #include "getpass.h"
 #include "progress.h"
@@ -106,13 +105,13 @@
 /* Parts of this function was written by the friendly Mark Butler
    <butlerm@xmission.com>. */
 
 CURLcode static
 _Transfer(struct connectdata *c_conn)
 {
-  size_t nread;                 /* number of bytes read */
+  ssize_t nread;                /* number of bytes read */
   int bytecount = 0;            /* total number of bytes read */
   int writebytecount = 0;       /* number of bytes written */
   long contentlength=0;         /* size of incoming data */
   struct timeval start = Curl_tvnow();
   struct timeval now = start;   /* current time */
   bool header = TRUE;		/* incoming data has HTTP header */
@@ -158,12 +157,18 @@
 #define KEEP_READ  1
 #define KEEP_WRITE 2
 
   Curl_pgrsTime(data, TIMER_PRETRANSFER);
   Curl_speedinit(data);
 
+  if((conn->sockfd == -1) &&
+     (conn->writesockfd == -1)) {
+    /* nothing to read, nothing to write, we're already OK! */
+    return CURLE_OK;
+  }
+
   if (!conn->getheader) {
     header = FALSE;
     if(conn->size > 0)
       Curl_pgrsSetDownloadSize(data, conn->size);
   }
   /* we want header and/or body, if neither then don't do this! */
@@ -441,27 +446,27 @@
             
             if(0 == bodywrites) {
               /* These checks are only made the first time we are about to
                  write a chunk of the body */
               if(conn->protocol&PROT_HTTP) {
                 /* HTTP-only checks */
-                if (data->resume_from &&
-                    !content_range &&
-                    (data->httpreq==HTTPREQ_GET)) {
+                if (data->newurl) {
+                  /* abort after the headers if "follow Location" is set */
+                  infof (data, "Follow to new URL: %s\n", data->newurl);
+                  return CURLE_OK;
+                }
+                else if (data->resume_from &&
+                         !content_range &&
+                         (data->httpreq==HTTPREQ_GET)) {
                   /* we wanted to resume a download, although the server
                      doesn't seem to support this and we did this with a GET
                      (if it wasn't a GET we did a POST or PUT resume) */
                   failf (data, "HTTP server doesn't seem to support "
                          "byte ranges. Cannot resume.");
                   return CURLE_HTTP_RANGE_ERROR;
                 }
-                else if (data->newurl) {
-                  /* abort after the headers if "follow Location" is set */
-                  infof (data, "Follow to new URL: %s\n", data->newurl);
-                  return CURLE_OK;
-                }
                 else if(data->timecondition && !data->range) {
                   /* A time condition has been set AND no ranges have been
                      requested. This seems to be what chapter 13.3.4 of
                      RFC 2616 defines to be the correct action for a
                      HTTP/1.1 client */
                   if((timeofdoc > 0) && (data->timevalue > 0)) {
@@ -722,19 +727,54 @@
       
         /* TBD: set the URL with curl_setopt() */
         data->url = data->newurl;
         data->newurl = NULL; /* don't show! */
         data->bits.urlstringalloc = TRUE; /* the URL is allocated */
 
-        /* Disable both types of POSTs, since doing a second POST when
-           following isn't what anyone would want! */
-        data->bits.http_post = FALSE;
-        data->bits.http_formpost = FALSE;
-
         infof(data, "Follows Location: to new URL: '%s'\n", data->url);
 
+        /*
+         * We get here when the HTTP code is 300-399. We need to perform
+         * differently based on exactly what return code there was.
+         * Discussed on the curl mailing list and posted about on the 26th
+         * of January 2001.
+         */
+        switch(data->progress.httpcode) {
+        case 300: /* Multiple Choices */
+        case 301: /* Moved Permanently */
+        case 302: /* Found */
+        case 306: /* Not used */
+        case 307: /* Temporary Redirect */
+        default:  /* for all unknown ones */
+          /* These are explicitly mention since I've checked RFC2616 and they
+           * seem to be OK to POST to.
+           */
+          break;
+        case 303: /* See Other */
+          /* Disable both types of POSTs, since doing a second POST when
+           * following isn't what anyone would want! */
+          data->bits.http_post = FALSE;
+          data->bits.http_formpost = FALSE;
+          data->httpreq = HTTPREQ_GET; /* enfore GET request */
+          infof(data, "Disables POST\n");
+          break;
+        case 304: /* Not Modified */
+          /* 304 means we did a conditional request and it was "Not modified".
+           * We shouldn't get any Location: header in this response!
+           */
+          break;
+        case 305: /* Use Proxy */
+          /* (quote from RFC2616, section 10.3.6):
+           * "The requested resource MUST be accessed through the proxy given
+           * by the Location field. The Location field gives the URI of the
+           * proxy.  The recipient is expected to repeat this single request
+           * via the proxy. 305 responses MUST only be generated by origin
+           * servers."
+           */
+          break;
+        }
         curl_disconnect(c_connect);
         continue;
       }
 
       curl_disconnect(c_connect);
     }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/url.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/url.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/url.c	2001-01-26 23:52:01.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/url.c	2001-02-13 21:34:16.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: url.c,v 1.76 2001/01/26 15:52:01 bagder Exp $
+ * $Id: url.c,v 1.83 2001/02/13 13:34:16 bagder Exp $
  *****************************************************************************/
 
 /* -- WIN32 approved -- */
 
 #include "setup.h"
 
@@ -77,13 +77,12 @@
 #endif
 
 #include "urldata.h"
 #include "netrc.h"
 
 #include "formdata.h"
-#include "getenv.h"
 #include "base64.h"
 #include "ssluse.h"
 #include "hostip.h"
 #include "if2ip.h"
 #include "transfer.h"
 #include "sendf.h"
@@ -336,16 +335,20 @@
     break;
   case CURLOPT_FAILONERROR:
     data->bits.http_fail_on_error = va_arg(param, long)?TRUE:FALSE;
     break;
   case CURLOPT_UPLOAD:
     data->bits.upload = va_arg(param, long)?TRUE:FALSE;
+    if(data->bits.upload)
+      /* If this is HTTP, PUT is what's needed to "upload" */
+      data->httpreq = HTTPREQ_PUT;
     break;
   case CURLOPT_POST:
     data->bits.http_post = va_arg(param, long)?TRUE:FALSE;
-    data->httpreq = HTTPREQ_POST;
+    if(data->bits.http_post)
+      data->httpreq = HTTPREQ_POST;
     break;
   case CURLOPT_FILETIME:
     data->bits.get_filetime = va_arg(param, long)?TRUE:FALSE;
     break;
   case CURLOPT_FTPLISTONLY:
     data->bits.ftp_list_only = va_arg(param, long)?TRUE:FALSE;
@@ -361,13 +364,14 @@
     break;
   case CURLOPT_FTPASCII:
     data->bits.ftp_ascii = va_arg(param, long)?TRUE:FALSE;
     break;
   case CURLOPT_PUT:
     data->bits.http_put = va_arg(param, long)?TRUE:FALSE;
-    data->httpreq = HTTPREQ_PUT;
+    if(data->bits.http_put)
+      data->httpreq = HTTPREQ_PUT;
     break;
   case CURLOPT_MUTE:
     data->bits.mute = va_arg(param, long)?TRUE:FALSE;
     break;
   case CURLOPT_TIMECONDITION:
     data->timecondition = va_arg(param, long);
@@ -403,18 +407,20 @@
     break;
   case CURLOPT_HTTPHEADER:
     data->headers = va_arg(param, struct curl_slist *);
     break;
   case CURLOPT_CUSTOMREQUEST:
     data->customrequest = va_arg(param, char *);
-    data->httpreq = HTTPREQ_CUSTOM;
+    if(data->customrequest)
+      data->httpreq = HTTPREQ_CUSTOM;
     break;
   case CURLOPT_HTTPPOST:
     data->httppost = va_arg(param, struct HttpPost *);
     data->bits.http_formpost = data->httppost?1:0;
-    data->httpreq = HTTPREQ_POST_FORM;
+    if(data->bits.http_formpost)
+      data->httpreq = HTTPREQ_POST_FORM;
     break;
   case CURLOPT_INFILE:
     data->in = va_arg(param, FILE *);
     break;
   case CURLOPT_INFILESIZE:
     data->infilesize = va_arg(param, long);
@@ -552,14 +558,23 @@
 CURLcode curl_disconnect(CURLconnect *c_connect)
 {
   struct connectdata *conn = c_connect;
 
   struct UrlData *data = conn->data;
 
+  if(data->proto.generic)
+    free(data->proto.generic);
+  data->proto.generic=NULL; /* it is gone */
+
+#ifdef ENABLE_IPV6
+  if(conn->res) /* host name info */
+    freeaddrinfo(conn->res);
+#else
   if(conn->hostent_buf) /* host name info */
     free(conn->hostent_buf);
+#endif
 
   if(conn->path) /* the URL path part */
     free(conn->path);
 
   free(conn); /* free the connection oriented data */
 
@@ -579,12 +594,15 @@
   struct connectdata *conn;
   char endbracket;
 #ifdef HAVE_SIGACTION
   struct sigaction sigact;
 #endif
   int urllen;
+#ifdef ENABLE_IPV6
+  struct addrinfo *ai;
+#endif
 
   /*************************************************************
    * Check input data
    *************************************************************/
 
   if(!data || (data->handle != STRUCT_OPEN))
@@ -731,13 +749,13 @@
     data->passwd[0]=0;
 
     if(*data->userpwd != ':') {
       /* the name is given, get user+password */
       sscanf(data->userpwd, "%127[^:]:%127[^\n]",
              data->user, data->passwd);
-      }
+    }
     else
       /* no name given, get the password only */
       sscanf(data->userpwd+1, "%127[^\n]", data->passwd);
 
     /* check for password, if no ask for one */
     if( !data->passwd[0] ) {
@@ -1069,21 +1087,21 @@
    *************************************************************/
   if(data->bits.use_netrc) {
     if(Curl_parsenetrc(data->hostname, data->user, data->passwd)) {
       infof(data, "Couldn't find host %s in the .netrc file, using defaults",
             data->hostname);
     }
+    else
+      data->bits.user_passwd = 1; /* enable user+password */
+
     /* weather we failed or not, we don't know which fields that were filled
        in anyway */
     if(!data->user[0])
       strcpy(data->user, CURL_DEFAULT_USER);
     if(!data->passwd[0])
       strcpy(data->passwd, CURL_DEFAULT_PASSWORD);
-    if(conn->protocol&PROT_HTTP) {
-      data->bits.user_passwd = 1; /* enable user+password */
-    }
   }
   else if(!(data->bits.user_passwd) &&
 	  (conn->protocol & (PROT_FTP|PROT_HTTP)) ) {
     /* This is a FTP or HTTP URL, and we haven't got the user+password in
      * the extra parameter, we will now try to extract the possible
      * user+password pair in a string like:
@@ -1179,19 +1197,29 @@
   if(!data->bits.httpproxy) {
     /* If not connecting via a proxy, extract the port from the URL, if it is
      * there, thus overriding any defaults that might have been set above. */
     data->port =  data->remote_port; /* it is the same port */
 
     /* Connect to target host right on */
+#ifdef ENABLE_IPV6
+    conn->res = Curl_getaddrinfo(data, conn->name, data->port);
+    if(!conn->res)
+#else
     conn->hp = Curl_gethost(data, conn->name, &conn->hostent_buf);
-    if(!conn->hp) {
+    if(!conn->hp)
+#endif
+    {
       failf(data, "Couldn't resolve host '%s'", conn->name);
       return CURLE_COULDNT_RESOLVE_HOST;
     }
   }
   else {
+#ifdef ENABLE_IPV6
+    failf(data, "proxy yet to be supported");
+    return CURLE_OUT_OF_MEMORY;
+#else
     char *prox_portno;
     char *endofprot;
 
     /* We need to make a duplicate of the proxy so that we can modify the
        string safely. */
     char *proxydup=strdup(data->proxy);
@@ -1234,34 +1262,38 @@
     if(!conn->hp) {
       failf(data, "Couldn't resolve proxy '%s'", proxyptr);
       return CURLE_COULDNT_RESOLVE_PROXY;
     }
 
     free(proxydup); /* free the duplicate pointer and not the modified */
+#endif
   }
   Curl_pgrsTime(data, TIMER_NAMELOOKUP);
 
+#ifndef ENABLE_IPV6
   data->firstsocket = socket(AF_INET, SOCK_STREAM, 0);
 
   memset((char *) &conn->serv_addr, '\0', sizeof(conn->serv_addr));
   memcpy((char *)&(conn->serv_addr.sin_addr),
          conn->hp->h_addr, conn->hp->h_length);
   conn->serv_addr.sin_family = conn->hp->h_addrtype;
   conn->serv_addr.sin_port = htons(data->port);
+#endif
 
 #if !defined(WIN32)||defined(__CYGWIN32__)
   /* We don't generally like checking for OS-versions, we should make this
      HAVE_XXXX based, although at the moment I don't have a decent test for
      this! */
 
 #ifdef HAVE_INET_NTOA
 
 #ifndef INADDR_NONE
 #define INADDR_NONE (unsigned long) ~0
 #endif
 
+#ifndef ENABLE_IPV6
   /*************************************************************
    * Select device to bind socket to
    *************************************************************/
   if (data->device && (strlen(data->device)<255)) {
     struct sockaddr_in sa;
     struct hostent *h=NULL;
@@ -1364,16 +1396,37 @@
     if(hostdataptr)
       free(hostdataptr); /* allocated by Curl_gethost() */
 
   } /* end of device selection support */
 #endif  /* end of HAVE_INET_NTOA */
 #endif /* end of not WIN32 */
+#endif /*ENABLE_IPV6*/
 
   /*************************************************************
    * Connect to server/proxy
    *************************************************************/
+#ifdef ENABLE_IPV6
+  data->firstsocket = -1;
+  for (ai = conn->res; ai; ai = ai->ai_next) {
+    data->firstsocket = socket(ai->ai_family, ai->ai_socktype, ai->ai_protocol);
+    if (data->firstsocket < 0)
+      continue;
+
+    if (connect(data->firstsocket, ai->ai_addr, ai->ai_addrlen) < 0) {
+      close(data->firstsocket);
+      data->firstsocket = -1;
+      continue;
+    }
+
+    break;
+  }
+  if (data->firstsocket < 0) {
+    failf(data, strerror(errno));
+    return CURLE_COULDNT_CONNECT;
+  }
+#else
   if (connect(data->firstsocket,
               (struct sockaddr *) &(conn->serv_addr),
               sizeof(conn->serv_addr)
               ) < 0) {
     switch(errno) {
 #ifdef ECONNREFUSED
@@ -1416,12 +1469,13 @@
     default:
       failf(data, "Can't connect to server: %d", errno);
       break;
     }
     return CURLE_COULDNT_CONNECT;
   }
+#endif
 
   /*************************************************************
    * Proxy authentication
    *************************************************************/
   if(data->bits.proxy_user_passwd) {
     char *authorization;
@@ -1463,17 +1517,37 @@
   Curl_pgrsTime(data, TIMER_CONNECT); /* we're connected */
 
   conn->now = Curl_tvnow(); /* time this *after* the connect is done */
   conn->bytecount = 0;
   
   /* Figure out the ip-number and display the first host name it shows: */
+#ifdef ENABLE_IPV6
+  {
+    char hbuf[NI_MAXHOST];
+#ifdef NI_WITHSCOPEID
+    const int niflags = NI_NUMERICHOST | NI_WITHSCOPEID;
+#else
+    const int niflags = NI_NUMERICHOST;
+#endif
+    if (getnameinfo(ai->ai_addr, ai->ai_addrlen, hbuf, sizeof(hbuf), NULL, 0,
+	niflags)) {
+      snprintf(hbuf, sizeof(hbuf), "?");
+    }
+    if (ai->ai_canonname) {
+      infof(data, "Connected to %s (%s)\n", ai->ai_canonname, hbuf);
+    } else {
+      infof(data, "Connected to %s\n", hbuf);
+    }
+  }
+#else
   {
     struct in_addr in;
     (void) memcpy(&in.s_addr, *conn->hp->h_addr_list, sizeof (in.s_addr));
     infof(data, "Connected to %s (%s)\n", conn->hp->h_name, inet_ntoa(in));
   }
+#endif
 
 #ifdef __EMX__
   /* 20000330 mgs
    * the check is quite a hack...
    * we're calling _fsetmode to fix the problem with fwrite converting newline
    * characters (you get mangled text files, and corrupted binary files when
@@ -1499,14 +1573,19 @@
     /* We're not allowed to return failure with memory left allocated
        in the connectdata struct, free those here */
     conn = (struct connectdata *)*in_connect;
     if(conn) {
       if(conn->path)
         free(conn->path);
+#ifdef ENABLE_IPV6
+      if(conn->res)
+        freeaddrinfo(conn->res);
+#else
       if(conn->hostent_buf)
         free(conn->hostent_buf);
+#endif
       free(conn);
       *in_connect=NULL;
     }
   }
   return code;
 }
@@ -1566,13 +1645,19 @@
   struct connectdata *conn = in_conn;
   CURLcode result;
 
   if(!conn || (conn->handle!= STRUCT_CONNECT)) {
     return CURLE_BAD_FUNCTION_ARGUMENT;
   }
-  if(conn->state != CONN_INIT) {
+  switch(conn->state) {
+  case CONN_INIT:
+  case CONN_DONE:
+    /* these two states are OK */
+    break;
+  default:
+    /* anything else is bad */
     return CURLE_BAD_CALLING_ORDER;
   }
 
   if(conn->curl_do) {
     /* generic protocol-specific function pointer set in curl_connect() */
     result = conn->curl_do(conn);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/urldata.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/urldata.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/lib/urldata.h	2001-01-26 23:52:01.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/lib/urldata.h	2001-02-06 07:04:44.000000000 +0800
@@ -17,13 +17,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: urldata.h,v 1.39 2001/01/26 15:52:01 bagder Exp $
+ * $Id: urldata.h,v 1.40 2001/02/05 23:04:44 bagder Exp $
  *****************************************************************************/
 
 /* This file is for lib internal stuff */
 
 #include "setup.h"
 
@@ -156,15 +156,19 @@
 #define PROT_FTP     (1<<4)
 #define PROT_TELNET  (1<<5)
 #define PROT_DICT    (1<<6)
 #define PROT_LDAP    (1<<7)
 #define PROT_FILE    (1<<8)
 
+#ifdef ENABLE_IPV6
+  struct addrinfo *res;
+#else
   char *hostent_buf; /* pointer to allocated memory for name info */
   struct hostent *hp;
   struct sockaddr_in serv_addr;
+#endif
   char proto[64];  /* store the protocol string in this buffer */
   char gname[257]; /* store the hostname in this buffer */
   char *name;      /* host name pointer to fool around with */
   char *path;      /* allocated buffer to store the URL's path part in */
   char *ppath;
   long bytecount;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/src/hugehelp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/src/hugehelp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/src/hugehelp.c	2001-01-25 19:11:31.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/src/hugehelp.c	2001-02-07 17:53:09.000000000 +0800
@@ -964,12 +964,13 @@
 "      - T. Bharath <TBharath@responsenetworks.com>\n"
 "      - Alexander Kourakos <awk@users.sourceforge.net>\n"
 "      - James Griffiths <griffiths_james@yahoo.com>\n"
 "      - Loic Dachary <loic@senga.org>\n"
 "      - Robert Weaver <robert.weaver@sabre.com>\n"
 "      - Ingo Ralf Blum <ingoralfblum@ingoralfblum.com>\n"
+"      - Jun-ichiro itojun Hagino <itojun@iijlab.net>\n"
 "\n"
 "WWW\n"
 "     http://curl.haxx.se\n"
 "\n"
 "FTP\n"
 "     ftp://ftp.sunet.se/pub/www/utilities/curl/\n"
@@ -1105,16 +1106,16 @@
 "\n"
 "        curl -t ftp://ftp.upload.com/myfile\n"
 "\n"
 "  Upload data from a specified file, login with user and password:\n"
 "\n"
 "        curl -T uploadfile -u user:passwd ftp://ftp.upload.com/myfile\n"
-"\n"
-"  Upload a local file to the remote site, and use the local file name remote\n"
 );
  puts(
+"\n"
+"  Upload a local file to the remote site, and use the local file name remote\n"
 "  too:\n"
 " \n"
 "        curl -T uploadfile -u user:passwd ftp://ftp.upload.com/\n"
 "\n"
 "  Upload a local file to get appended to the remote file using ftp:\n"
 "\n"
@@ -1358,19 +1359,19 @@
 "   Time Current  - time passed since the invoke\n"
 "   Time Left     - expected time left to completetion\n"
 "   Curr.Speed    - the average transfer speed the last 5 seconds (the first\n"
 "                   5 seconds of a transfer is based on less time of course.)\n"
 "\n"
 "  The -# option will display a totally different progress bar that doesn't\n"
+);
+ puts(
 "  need much explanation!\n"
 "\n"
 "SPEED LIMIT\n"
 "\n"
 "  Curl offers the user to set conditions regarding transfer speed that must\n"
-);
- puts(
 "  be met to let the transfer keep going. By using the switch -y and -Y you\n"
 "  can make curl abort transfers if the transfer speed doesn't exceed your\n"
 "  given lowest limit for a specified time.\n"
 "\n"
 "  To let curl abandon downloading this page if its slower than 3000 bytes per\n"
 "  second for 1 minute, run:\n"
@@ -1648,16 +1649,16 @@
 "\n"
 "ENVIRONMENT VARIABLES\n"
 "\n"
 "  Curl reads and understands the following environment variables:\n"
 "\n"
 "        HTTP_PROXY, HTTPS_PROXY, FTP_PROXY, GOPHER_PROXY\n"
-"\n"
-"  They should be set for protocol-specific proxies. General proxy should be\n"
 );
  puts(
+"\n"
+"  They should be set for protocol-specific proxies. General proxy should be\n"
 "  set with\n"
 "        \n"
 "        ALL_PROXY\n"
 "\n"
 "  A comma-separated list of host names that shouldn't go through any proxy is\n"
 "  set in (only an asterisk, '*' matches all hosts)\n"
@@ -1708,12 +1709,31 @@
 "\n"
 "        curl --krb4 private ftp://krb4site.com -u username:fakepwd\n"
 "\n"
 "  There's no use for a password on the -u switch, but a blank one will make\n"
 "  curl ask for one and you already entered the real password to kauth.\n"
 "\n"
+"TELNET\n"
+"\n"
+"  The curl telnet support is basic and very easy to use. Curl passes all data\n"
+"  passed to it on stdin to the remote server. Connect to a remote telnet\n"
+"  server using a command line similar to:\n"
+"\n"
+"        curl telnet://remote.server.com\n"
+"\n"
+"  And enter the data to pass to the server on stdin. The result will be sent\n"
+"  to stdout or to the file you specify with -o.\n"
+"\n"
+"  You might want the -N/--no-buffer option to switch off the buffered output\n"
+"  for slow connections or similar.\n"
+"\n"
+"  NOTE: the telnet protocol does not specify any way to login with a specified\n"
+"  user and password so curl can't do that automatically. To do that, you need\n"
+"  to track when the login prompt is received and send the username and\n"
+"  password accordingly.\n"
+"\n"
 "MAILING LIST\n"
 "\n"
 "  We have an open mailing list to discuss curl, its development and things\n"
 "  relevant to this.\n"
 "\n"
 "  To subscribe, mail curl-request@contactor.se with \"subscribe <fill in your\n"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/src/main.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/src/main.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/src/main.c	2001-01-24 22:44:05.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/src/main.c	2001-01-29 15:26:50.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: main.c,v 1.67 2001/01/24 14:44:05 bagder Exp $
+ * $Id: main.c,v 1.68 2001/01/29 07:26:50 bagder Exp $
  *****************************************************************************/
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 #include <stdarg.h>
@@ -106,13 +106,15 @@
 #define CONF_FTPLISTONLY (1<<16) /* Use NLST when listing ftp dir */
 #define CONF_FTPAPPEND (1<<20) /* Append instead of overwrite on upload! */
 #define CONF_NETRC    (1<<22)  /* read user+password from .netrc */
 #define CONF_FOLLOWLOCATION (1<<23) /* use Location: Luke! */
 #define CONF_GETTEXT  (1<<24) /* use ASCII/text for transfer */
 #define CONF_HTTPPOST (1<<25) /* multipart/form-data HTTP POST */
+#if 0
 #define CONF_PUT      (1<<27) /* PUT the input file */
+#endif
 #define CONF_MUTE     (1<<28) /* force NOPROGRESS */
 
 #ifndef HAVE_STRDUP
 /* Ultrix doesn't have strdup(), so make a quick clone: */
 char *strdup(char *str)
 {
@@ -1746,13 +1748,15 @@
                          config->conf&CONF_FTPLISTONLY);
         curl_easy_setopt(curl, CURLOPT_FTPAPPEND, config->conf&CONF_FTPAPPEND);
         curl_easy_setopt(curl, CURLOPT_NETRC, config->conf&CONF_NETRC);
         curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION,
                          config->conf&CONF_FOLLOWLOCATION);
         curl_easy_setopt(curl, CURLOPT_TRANSFERTEXT, config->conf&CONF_GETTEXT);
+#if 0
         curl_easy_setopt(curl, CURLOPT_PUT, config->conf&CONF_PUT);
+#endif
         curl_easy_setopt(curl, CURLOPT_MUTE, config->conf&CONF_MUTE);
         curl_easy_setopt(curl, CURLOPT_USERPWD, config->userpwd);
         curl_easy_setopt(curl, CURLOPT_PROXYUSERPWD, config->proxyuserpwd);
         curl_easy_setopt(curl, CURLOPT_RANGE, config->range);
         curl_easy_setopt(curl, CURLOPT_ERRORBUFFER, errorbuffer);
         curl_easy_setopt(curl, CURLOPT_TIMEOUT, config->timeout);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/src/Makefile.vc6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/src/Makefile.vc6
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/src/Makefile.vc6	2000-12-11 16:14:43.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/src/Makefile.vc6	2001-02-06 15:14:09.000000000 +0800
@@ -14,13 +14,13 @@
 ## Release
 CCR = cl.exe /MD /O2 /D "NDEBUG"
 LINKR = link.exe /incremental:no /libpath:"../lib"
 
 ## Debug
 CCD = cl.exe /MDd /Gm /ZI /Od /D "_DEBUG" /GZ
-LINKD = link.exe /incremental:yes /debug
+LINKD = link.exe /incremental:yes /debug /libpath:"../lib"
 
 CFLAGS = /I "../include" /nologo /W3 /GX /D "WIN32" /D "_CONSOLE" /D "_MBCS" /YX /FD /c
 LFLAGS = /nologo /out:$(PROGRAM_NAME) /subsystem:console /machine:I386
 LINKLIBS = wsock32.lib libcurl.lib
 LINKLIBS_DEBUG = wsock32.lib libcurld.lib
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/src/version.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/src/version.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/src/version.h	2001-01-27 23:39:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/src/version.h	2001-02-13 21:35:18.000000000 +0800
@@ -1,3 +1,3 @@
 #define CURL_NAME "curl"
-#define CURL_VERSION "7.6"
+#define CURL_VERSION "7.6.1"
 #define CURL_ID CURL_NAME " " CURL_VERSION " (" OS ") "
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: command29.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: command30.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: command31.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: command32.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: command33.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: error30.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: extra33.txt
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/tests/data/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/tests/data/Makefile.am	2001-01-23 00:04:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data/Makefile.am	2001-01-29 22:36:28.000000000 +0800
@@ -53,7 +53,13 @@
 command9.txt      name15.txt        prot6.txt \
 error111.txt      name16.txt        prot7.txt \
 command26.txt  prot26.txt     command27.txt  prot27.txt \
 name26.txt     reply26.txt    name27.txt     stdout27.txt \
 command28.txt  name28.txt     prot28.txt     reply28.txt \
 command120.txt  name120.txt     prot120.txt     reply120.txt \
-command121.txt  name121.txt     prot121.txt     reply121.txt
+command121.txt  name121.txt     prot121.txt     reply121.txt \
+command29.txt  error30.txt  name30.txt  prot30.txt   reply30.txt \
+command30.txt  name29.txt   prot29.txt  reply29.txt \
+command31.txt  name32.txt  reply31.txt      reply32.txt \
+command32.txt  prot31.txt  reply310001.txt  reply320001.txt \
+name31.txt     prot32.txt  reply310002.txt  reply320002.txt \
+command33.txt  extra33.txt    name33.txt     prot33.txt     reply33.txt
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/tests/data/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/tests/data/Makefile.in	2001-01-27 23:41:59.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data/Makefile.in	2001-02-13 21:35:56.000000000 +0800
@@ -70,13 +70,13 @@
 PACKAGE = @PACKAGE@
 PERL = @PERL@
 RANLIB = @RANLIB@
 VERSION = @VERSION@
 YACC = @YACC@
 
-EXTRA_DIST = command1.txt      error113.txt      name17.txt        prot8.txt command10.txt     error114.txt      name18.txt        prot9.txt command100.txt    error115.txt      name19.txt        reply1.txt command101.txt    error116.txt      name2.txt         reply10.txt command102.txt    error117.txt      name20.txt        reply100.txt command103.txt    error118.txt      name200.txt       reply101.txt command104.txt    error119.txt      name201.txt       reply102.txt command105.txt    error19.txt       name21.txt        reply103.txt command106.txt    error20.txt       name22.txt        reply104.txt command107.txt    error201.txt      name23.txt        reply105.txt command108.txt    error21.txt       name24.txt        reply106.txt command109.txt    error23.txt       name25.txt        reply11.txt command11.txt     error24.txt       name3.txt         reply110.txt command110.txt    error25.txt       name4.txt         reply110001.txt command111.txt    ftpd113.txt       name5.txt         reply110002.txt command112.txt    ftpd114.txt       name6.txt         reply12.txt command113.txt    ftpd115.txt       name7.txt         reply13.txt command114.txt    ftpd116.txt       name8.txt         reply14.txt command115.txt    ftpd117.txt       name9.txt         reply15.txt command116.txt    ftpd118.txt       prot1.txt         reply16.txt command117.txt    name1.txt         prot10.txt        reply17.txt command118.txt    name10.txt        prot100.txt       reply2.txt command119.txt    name100.txt       prot101.txt       reply200.txt command12.txt     name101.txt       prot102.txt       reply22.txt command13.txt     name102.txt       prot103.txt       reply24.txt command14.txt     name103.txt       prot104.txt       reply25.txt command15.txt     name104.txt       prot105.txt       reply3.txt command16.txt     name105.txt       prot106.txt       reply4.txt command17.txt     name106.txt       prot107.txt       reply5.txt command18.txt     name107.txt       prot108.txt       reply6.txt command19.txt     name108.txt       prot109.txt       reply7.txt command2.txt      name109.txt       prot11.txt        reply8.txt command20.txt     name11.txt        prot110.txt       reply9.txt command200.txt    name110.txt       prot112.txt       stdin17.txt command201.txt    name111.txt       prot12.txt        stdout107.txt command21.txt     name112.txt       prot13.txt        stdout108.txt command22.txt     name113.txt       prot14.txt        stdout109.txt command23.txt     name114.txt       prot15.txt        stdout110.txt command24.txt     name115.txt       prot16.txt        stdout112.txt command25.txt     name116.txt       prot17.txt        stdout15.txt command3.txt      name117.txt       prot18.txt        stdout18.txt command4.txt      name118.txt       prot2.txt         upload107.txt command5.txt      name119.txt       prot22.txt        upload108.txt command6.txt      name12.txt        prot3.txt         upload109.txt command7.txt      name13.txt        prot4.txt         upload112.txt command8.txt      name14.txt        prot5.txt command9.txt      name15.txt        prot6.txt error111.txt      name16.txt        prot7.txt command26.txt  prot26.txt     command27.txt  prot27.txt name26.txt     reply26.txt    name27.txt     stdout27.txt command28.txt  name28.txt     prot28.txt     reply28.txt command120.txt  name120.txt     prot120.txt     reply120.txt command121.txt  name121.txt     prot121.txt     reply121.txt
+EXTRA_DIST = command1.txt      error113.txt      name17.txt        prot8.txt command10.txt     error114.txt      name18.txt        prot9.txt command100.txt    error115.txt      name19.txt        reply1.txt command101.txt    error116.txt      name2.txt         reply10.txt command102.txt    error117.txt      name20.txt        reply100.txt command103.txt    error118.txt      name200.txt       reply101.txt command104.txt    error119.txt      name201.txt       reply102.txt command105.txt    error19.txt       name21.txt        reply103.txt command106.txt    error20.txt       name22.txt        reply104.txt command107.txt    error201.txt      name23.txt        reply105.txt command108.txt    error21.txt       name24.txt        reply106.txt command109.txt    error23.txt       name25.txt        reply11.txt command11.txt     error24.txt       name3.txt         reply110.txt command110.txt    error25.txt       name4.txt         reply110001.txt command111.txt    ftpd113.txt       name5.txt         reply110002.txt command112.txt    ftpd114.txt       name6.txt         reply12.txt command113.txt    ftpd115.txt       name7.txt         reply13.txt command114.txt    ftpd116.txt       name8.txt         reply14.txt command115.txt    ftpd117.txt       name9.txt         reply15.txt command116.txt    ftpd118.txt       prot1.txt         reply16.txt command117.txt    name1.txt         prot10.txt        reply17.txt command118.txt    name10.txt        prot100.txt       reply2.txt command119.txt    name100.txt       prot101.txt       reply200.txt command12.txt     name101.txt       prot102.txt       reply22.txt command13.txt     name102.txt       prot103.txt       reply24.txt command14.txt     name103.txt       prot104.txt       reply25.txt command15.txt     name104.txt       prot105.txt       reply3.txt command16.txt     name105.txt       prot106.txt       reply4.txt command17.txt     name106.txt       prot107.txt       reply5.txt command18.txt     name107.txt       prot108.txt       reply6.txt command19.txt     name108.txt       prot109.txt       reply7.txt command2.txt      name109.txt       prot11.txt        reply8.txt command20.txt     name11.txt        prot110.txt       reply9.txt command200.txt    name110.txt       prot112.txt       stdin17.txt command201.txt    name111.txt       prot12.txt        stdout107.txt command21.txt     name112.txt       prot13.txt        stdout108.txt command22.txt     name113.txt       prot14.txt        stdout109.txt command23.txt     name114.txt       prot15.txt        stdout110.txt command24.txt     name115.txt       prot16.txt        stdout112.txt command25.txt     name116.txt       prot17.txt        stdout15.txt command3.txt      name117.txt       prot18.txt        stdout18.txt command4.txt      name118.txt       prot2.txt         upload107.txt command5.txt      name119.txt       prot22.txt        upload108.txt command6.txt      name12.txt        prot3.txt         upload109.txt command7.txt      name13.txt        prot4.txt         upload112.txt command8.txt      name14.txt        prot5.txt command9.txt      name15.txt        prot6.txt error111.txt      name16.txt        prot7.txt command26.txt  prot26.txt     command27.txt  prot27.txt name26.txt     reply26.txt    name27.txt     stdout27.txt command28.txt  name28.txt     prot28.txt     reply28.txt command120.txt  name120.txt     prot120.txt     reply120.txt command121.txt  name121.txt     prot121.txt     reply121.txt command29.txt  error30.txt  name30.txt  prot30.txt   reply30.txt command30.txt  name29.txt   prot29.txt  reply29.txt command31.txt  name32.txt  reply31.txt      reply32.txt command32.txt  prot31.txt  reply310001.txt  reply320001.txt name31.txt     prot32.txt  reply310002.txt  reply320002.txt command33.txt  extra33.txt    name33.txt     prot33.txt     reply33.txt
 
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = ../../config.h ../../src/config.h
 CONFIG_CLEAN_FILES = 
 DIST_COMMON =  Makefile.am Makefile.in
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: name29.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: name30.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: name31.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: name32.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: name33.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: prot29.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: prot30.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: prot31.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: prot32.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: prot33.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply29.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply30.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply310001.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply310002.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply31.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply320001.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply320002.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply32.txt
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/data: reply33.txt
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/tests/httpserver.pl /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/httpserver.pl
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/tests/httpserver.pl	2000-11-17 23:12:37.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/httpserver.pl	2001-01-28 04:22:51.000000000 +0800
@@ -116,13 +116,13 @@
             #
             my $testnum;
             if($path =~ /.*\/(\d*)/) {
                 $testnum=$1;
 
                 if($verbose) {
-                    print STDERR "sending reply $testnum\n";
+                    print STDERR "OUT: sending reply $testnum\n";
                 }
             }
             else {
                 $testnum=0;
             }
             open(INPUT, ">log/server.input");
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/tests/runtests.pl /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/runtests.pl
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6/tests/runtests.pl	2001-01-25 19:07:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.6.1/tests/runtests.pl	2001-01-29 23:07:28.000000000 +0800
@@ -1,8 +1,8 @@
 #!/usr/bin/perl
-# $Id: runtests.pl,v 1.18 2001/01/08 22:18:30 bagder Exp $
+# $Id: runtests.pl,v 1.20 2001/01/29 15:07:28 bagder Exp $
 #
 # Main curl test script, in perl to run on more platforms
 #
 #######################################################################
 # These should be the only variables that might be needed to get edited:
 
@@ -46,12 +46,13 @@
 #######################################################################
 # variables the command line options may set
 #
 
 my $short;
 my $verbose;
+my $debugprotocol;
 my $anyway;
 
 #######################################################################
 # Return the pid of the server as found in the given pid file
 #
 sub serverpid {
@@ -106,13 +107,14 @@
     else {
         $STATUS="httpd (no pid file) not running";
         $RUNNING=0;
     }
 
     if ($RUNNING != 1) {
-        system("perl $srcdir/httpserver.pl $HOSTPORT &");
+        my $flag=$debugprotocol?"-v ":"";
+        system("perl $srcdir/httpserver.pl $flag $HOSTPORT &");
         sleep 1; # give it a little time to start
     }
     else {
         print "$STATUS\n";
 
         # verify that our server is one one running on this port:
@@ -147,13 +149,14 @@
     else {
         $STATUS="ftpd (no pid file) not running";
         $RUNNING=0;
     }
 
     if ($RUNNING != 1) {
-        system("perl $srcdir/ftpserver.pl $FTPPORT &");
+        my $flag=$debugprotocol?"-v ":"";
+        system("perl $srcdir/ftpserver.pl $flag $FTPPORT &");
         sleep 1; # give it a little time to start
     }
     else {
         print "$STATUS\n";
 
         # verify that our server is one one running on this port:
@@ -501,12 +504,14 @@
     }
 
     # remove the stdout and stderr files
     unlink($STDOUT);
     unlink($STDERR);
 
+    unlink("$LOGDIR/upload.$NUMBER");  # remove upload leftovers
+    unlink($CURLOUT); # remove the downloaded results
     unlink($FTPDCMD); # remove the instructions for this test
 
     if($memory_debug) {
         if(! -f $memdump) {
             print "\n** ALERT! memory debuggin without any output file?\n";
         }
@@ -548,12 +553,16 @@
 my @testthis;
 do {
     if ($ARGV[0] eq "-v") {
         # verbose output
         $verbose=1;
     }
+    elsif ($ARGV[0] eq "-d") {
+        # have the servers display protocol output 
+        $debugprotocol=1;
+    }
     elsif($ARGV[0] eq "-s") {
         # short output
         $short=1;
     }
     elsif($ARGV[0] eq "-a") {
         # continue anyway, even if a test fail
@@ -561,12 +570,13 @@
     }
     elsif($ARGV[0] eq "-h") {
         # show help text
         print <<EOHELP
 Usage: runtests.pl [-h][-s][-v][numbers]
   -a       continue even if a test fails
+  -d       display server debug info
   -h       this help text
   -s       short output
   -v       verbose output
   [num]    as string like "5 6 9" to run those tests only
 EOHELP
     ;
