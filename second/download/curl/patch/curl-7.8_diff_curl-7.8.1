Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1: acinclude.m4
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/aclocal.m4 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/aclocal.m4
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/aclocal.m4	2001-05-31 16:58:43.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/aclocal.m4	2001-08-20 15:19:07.000000000 +0800
@@ -7,12 +7,338 @@
 
 dnl This program is distributed in the hope that it will be useful,
 dnl but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 dnl even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 dnl PARTICULAR PURPOSE.
 
+dnl Check for socklen_t: historically on BSD it is an int, and in
+dnl POSIX 1g it is a type of its own, but some platforms use different
+dnl types for the argument to getsockopt, getpeername, etc.  So we
+dnl have to test to find something that will work.
+AC_DEFUN([TYPE_SOCKLEN_T],
+[
+   AC_CHECK_TYPE([socklen_t], ,[
+      AC_MSG_CHECKING([for socklen_t equivalent])
+      AC_CACHE_VAL([curl_cv_socklen_t_equiv],
+      [
+         # Systems have either "struct sockaddr *" or
+         # "void *" as the second argument to getpeername
+         curl_cv_socklen_t_equiv=
+         for arg2 in "struct sockaddr" void; do
+            for t in int size_t unsigned long "unsigned long"; do
+               AC_TRY_COMPILE([
+                  #include <sys/types.h>
+                  #include <sys/socket.h>
+
+                  int getpeername (int, $arg2 *, $t *);
+               ],[
+                  $t len;
+                  getpeername(0,0,&len);
+               ],[
+                  curl_cv_socklen_t_equiv="$t"
+                  break
+               ])
+            done
+         done
+
+         if test "x$curl_cv_socklen_t_equiv" = x; then
+            AC_MSG_ERROR([Cannot find a type to use in place of socklen_t])
+         fi
+      ])
+      AC_MSG_RESULT($curl_cv_socklen_t_equiv)
+      AC_DEFINE_UNQUOTED(socklen_t, $curl_cv_socklen_t_equiv,
+			[type to use in place of socklen_t if not defined])],
+      [#include <sys/types.h>
+#include <sys/socket.h>])
+])
+
+dnl ************************************************************
+dnl check for "localhost", if it doesn't exist, we can't do the
+dnl gethostbyname_r tests!
+dnl 
+
+AC_DEFUN(CURL_CHECK_WORKING_RESOLVER,[
+AC_MSG_CHECKING([if "localhost" resolves])
+AC_TRY_RUN([
+#include <string.h>
+#include <sys/types.h>
+#include <netdb.h>
+
+int
+main () {
+struct hostent *h;
+h = gethostbyname("localhost");
+exit (h == NULL ? 1 : 0); }],[
+      AC_MSG_RESULT(yes)],[
+      AC_MSG_RESULT(no)
+      AC_MSG_ERROR([can't figure out gethostbyname_r() since localhost doesn't resolve])
+
+      ]
+)
+])
+
+dnl ************************************************************
+dnl check for working getaddrinfo()
+dnl
+AC_DEFUN(CURL_CHECK_WORKING_GETADDRINFO,[
+  AC_CACHE_CHECK(for working getaddrinfo, ac_cv_working_getaddrinfo,[
+  AC_TRY_RUN( [
+#include <netdb.h>
+#include <sys/types.h>
+#include <sys/socket.h>
+
+void main(void) {
+    struct addrinfo hints, *ai;
+    int error;
+
+    memset(&hints, 0, sizeof(hints));
+    hints.ai_family = AF_UNSPEC;
+    hints.ai_socktype = SOCK_STREAM;
+    error = getaddrinfo("127.0.0.1", "8080", &hints, &ai);
+    if (error) {
+        exit(1);
+    }
+    else {
+        exit(0);
+    }
+}
+],[
+  ac_cv_working_getaddrinfo="yes"
+],[
+  ac_cv_working_getaddrinfo="no"
+],[
+  ac_cv_working_getaddrinfo="yes"
+])])
+if test "$ac_cv_working_getaddrinfo" = "yes"; then
+  AC_DEFINE(HAVE_GETADDRINFO, 1, [Define if getaddrinfo exists and works])
+  AC_DEFINE(ENABLE_IPV6, 1, [Define if you want to enable IPv6 support])
+
+  IPV6_ENABLED=1
+  AC_SUBST(IPV6_ENABLED)
+fi
+])
+
+
+AC_DEFUN(CURL_CHECK_LOCALTIME_R,
+[
+  dnl check for a few thread-safe functions
+  AC_CHECK_FUNCS(localtime_r,[
+    AC_MSG_CHECKING(whether localtime_r is declared)
+    AC_EGREP_CPP(localtime_r,[
+#include <time.h>],[
+      AC_MSG_RESULT(yes)],[
+      AC_MSG_RESULT(no)
+      AC_MSG_CHECKING(whether localtime_r with -D_REENTRANT is declared)
+      AC_EGREP_CPP(localtime_r,[
+#define _REENTRANT
+#include <time.h>],[
+	AC_DEFINE(NEED_REENTRANT)
+	AC_MSG_RESULT(yes)],
+	AC_MSG_RESULT(no))])])
+])
+
+AC_DEFUN(CURL_CHECK_INET_NTOA_R,
+[
+  dnl determine if function definition for inet_ntoa_r exists.
+  AC_CHECK_FUNCS(inet_ntoa_r,[
+    AC_MSG_CHECKING(whether inet_ntoa_r is declared)
+    AC_EGREP_CPP(inet_ntoa_r,[
+#include <arpa/inet.h>],[
+      AC_DEFINE(HAVE_INET_NTOA_R_DECL)
+      AC_MSG_RESULT(yes)],[
+      AC_MSG_RESULT(no)
+      AC_MSG_CHECKING(whether inet_ntoa_r with -D_REENTRANT is declared)
+      AC_EGREP_CPP(inet_ntoa_r,[
+#define _REENTRANT
+#include <arpa/inet.h>],[
+	AC_DEFINE(HAVE_INET_NTOA_R_DECL)
+	AC_DEFINE(NEED_REENTRANT)
+	AC_MSG_RESULT(yes)],
+	AC_MSG_RESULT(no))])])
+
+])
+
+AC_DEFUN(CURL_CHECK_GETHOSTBYADDR_R,
+[
+  dnl check for number of arguments to gethostbyaddr_r. it might take
+  dnl either 5, 7, or 8 arguments.
+  AC_CHECK_FUNCS(gethostbyaddr_r,[
+    AC_MSG_CHECKING(if gethostbyaddr_r takes 5 arguments)
+    AC_TRY_COMPILE([
+#include <sys/types.h>
+#include <netdb.h>],[
+char * address;
+int length;
+int type;
+struct hostent h;
+struct hostent_data hdata;
+int rc;
+rc = gethostbyaddr_r(address, length, type, &h, &hdata);],[
+      AC_MSG_RESULT(yes)
+      AC_DEFINE(HAVE_GETHOSTBYADDR_R_5)
+      ac_cv_gethostbyaddr_args=5],[
+      AC_MSG_RESULT(no)
+      AC_MSG_CHECKING(if gethostbyaddr_r with -D_REENTRANT takes 5 arguments)
+      AC_TRY_COMPILE([
+#define _REENTRANT
+#include <sys/types.h>
+#include <netdb.h>],[
+char * address;
+int length;
+int type;
+struct hostent h;
+struct hostent_data hdata;
+int rc;
+rc = gethostbyaddr_r(address, length, type, &h, &hdata);],[
+	AC_MSG_RESULT(yes)
+	AC_DEFINE(HAVE_GETHOSTBYADDR_R_5)
+	AC_DEFINE(NEED_REENTRANT)
+	ac_cv_gethostbyaddr_args=5],[
+	AC_MSG_RESULT(no)
+	AC_MSG_CHECKING(if gethostbyaddr_r takes 7 arguments)
+	AC_TRY_COMPILE([
+#include <sys/types.h>
+#include <netdb.h>],[
+char * address;
+int length;
+int type;
+struct hostent h;
+char buffer[8192];
+int h_errnop;
+struct hostent * hp;
+
+hp = gethostbyaddr_r(address, length, type, &h,
+                     buffer, 8192, &h_errnop);],[
+	  AC_MSG_RESULT(yes)
+	  AC_DEFINE(HAVE_GETHOSTBYADDR_R_7)
+	  ac_cv_gethostbyaddr_args=7],[
+	  AC_MSG_RESULT(no)
+	  AC_MSG_CHECKING(if gethostbyaddr_r takes 8 arguments)
+	  AC_TRY_COMPILE([
+#include <sys/types.h>
+#include <netdb.h>],[
+char * address;
+int length;
+int type;
+struct hostent h;
+char buffer[8192];
+int h_errnop;
+struct hostent * hp;
+int rc;
+
+rc = gethostbyaddr_r(address, length, type, &h,
+                     buffer, 8192, &hp, &h_errnop);],[
+	    AC_MSG_RESULT(yes)
+	    AC_DEFINE(HAVE_GETHOSTBYADDR_R_8)
+	    ac_cv_gethostbyaddr_args=8],[
+	    AC_MSG_RESULT(no)
+	    have_missing_r_funcs="$have_missing_r_funcs gethostbyaddr_r"])])])])])
+
+
+])
+
+AC_DEFUN(CURL_CHECK_GETHOSTBYNAME_R,
+[
+  dnl check for number of arguments to gethostbyname_r. it might take
+  dnl either 3, 5, or 6 arguments.
+  AC_CHECK_FUNCS(gethostbyname_r,[
+    AC_MSG_CHECKING(if gethostbyname_r takes 3 arguments)
+    AC_TRY_RUN([
+#include <string.h>
+#include <sys/types.h>
+#include <netdb.h>
+
+int
+main () {
+struct hostent h;
+struct hostent_data hdata;
+char *name = "localhost";
+int rc;
+memset(&h, 0, sizeof(struct hostent));
+memset(&hdata, 0, sizeof(struct hostent_data));
+rc = gethostbyname_r(name, &h, &hdata);
+exit (rc != 0 ? 1 : 0); }],[
+      AC_MSG_RESULT(yes)
+      AC_DEFINE(HAVE_GETHOSTBYNAME_R_3)
+      ac_cv_gethostbyname_args=3],[
+      AC_MSG_RESULT(no)
+      AC_MSG_CHECKING(if gethostbyname_r with -D_REENTRANT takes 3 arguments)
+      AC_TRY_RUN([
+#define _REENTRANT
+
+#include <string.h>
+#include <sys/types.h>
+#include <netdb.h>
+
+int
+main () {
+struct hostent h;
+struct hostent_data hdata;
+char *name = "localhost";
+int rc;
+memset(&h, 0, sizeof(struct hostent));
+memset(&hdata, 0, sizeof(struct hostent_data));
+rc = gethostbyname_r(name, &h, &hdata);
+exit (rc != 0 ? 1 : 0); }],[
+	AC_MSG_RESULT(yes)
+	AC_DEFINE(HAVE_GETHOSTBYNAME_R_3)
+	AC_DEFINE(NEED_REENTRANT)
+	ac_cv_gethostbyname_args=3],[
+	AC_MSG_RESULT(no)
+	AC_MSG_CHECKING(if gethostbyname_r takes 5 arguments)
+	AC_TRY_RUN([
+#include <sys/types.h>
+#include <netdb.h>
+
+int
+main () {
+struct hostent *hp;
+struct hostent h;
+char *name = "localhost";
+char buffer[8192];
+int h_errno;
+hp = gethostbyname_r(name, &h, buffer, 8192, &h_errno);
+exit (hp == NULL ? 1 : 0); }],[
+	  AC_MSG_RESULT(yes)
+	  AC_DEFINE(HAVE_GETHOSTBYNAME_R_5)
+          ac_cv_gethostbyname_args=5],[
+	  AC_MSG_RESULT(no)
+	  AC_MSG_CHECKING(if gethostbyname_r takes 6 arguments)
+	  AC_TRY_RUN([
+#include <sys/types.h>
+#include <netdb.h>
+
+int
+main () {
+struct hostent h;
+struct hostent *hp;
+char *name = "localhost";
+char buf[8192];
+int rc;
+int h_errno;
+rc = gethostbyname_r(name, &h, buf, 8192, &hp, &h_errno);
+exit (rc != 0 ? 1 : 0); }],[
+	    AC_MSG_RESULT(yes)
+	    AC_DEFINE(HAVE_GETHOSTBYNAME_R_6)
+            ac_cv_gethostbyname_args=6],[
+	    AC_MSG_RESULT(no)
+	    have_missing_r_funcs="$have_missing_r_funcs gethostbyname_r"],
+	    [ac_cv_gethostbyname_args=0])],
+	  [ac_cv_gethostbyname_args=0])],
+	[ac_cv_gethostbyname_args=0])],
+      [ac_cv_gethostbyname_args=0])])
+
+if test "$ac_cv_func_gethostbyname_r" = "yes"; then
+  if test "$ac_cv_gethostbyname_args" = "0"; then
+    dnl there's a gethostbyname_r() function, but we don't know how
+    dnl many arguments it wants!
+    AC_MSG_ERROR([couldn't figure out how to use gethostbyname_r()])
+  fi
+fi
+])
+
 # Like AC_CONFIG_HEADER, but automatically create stamp file.
 
 AC_DEFUN(AM_CONFIG_HEADER,
 [AC_PREREQ([2.12])
 AC_CONFIG_HEADER([$1])
 dnl When config.status generates a header, we must update the stamp-h file.
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1: build_vms.com
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/CHANGES /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/CHANGES
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/CHANGES	2001-06-07 17:32:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/CHANGES	2001-08-20 15:08:44.000000000 +0800
@@ -3,12 +3,216 @@
                              / __| | | | |_) | |    
                             | (__| |_| |  _ <| |___ 
                              \___|\___/|_| \_\_____|
 
                                History of Changes
 
+Daniel (20 August 2001)
+- Brad pointed out that we ship two extra libtool files in the tarballs that
+  we really don't need to! Removing them makes the gz-archive about 60K
+  smaller!
+
+- Albert Chin brought fixes for the configure script to detect socklen_t
+  properly as well as moving lots of our custom autoconf macros to
+  acinclude.m4.
+
+Daniel (19 August 2001)
+- Moonesamy improved his -G feature for host names only URLs...
+
+Daniel (17 August 2001)
+- Finally cleaned up the kerberos code to use Curl_ prefixes on all global
+  symbols and to not use global variables.
+
+Version 7.8.1-pre6
+
+Daniel (16 August 2001)
+- S. Moonesamy added the -G option to curl, that converts the data specified
+  with -d to a GET request. Default action when using -d is POST. When -G is
+  used, the -d specified data will be appended to the URL with a '?'
+  separator. As suggested previously by Kevin Roth.
+
+- curl-config --libs should now display all linker options required to link
+  with libcurl. It includes the path and options for libcurl itself.
+  curl-config --cflags displays the compiler option(s) needed to compile
+  source files that use libcurl functions. Basically, that sets the include
+  path correct.
+
+Daniel (15 August 2001)
+- Arkadiusz Miskiewicz pointed out a mistake in how IPv6-style IP-addresses
+  were parsed and used. (RFC2732-format)
+
+- Bug #12733 over on php.net identified a problem in libcurl that made it core
+  dump if you used CURLOPT_POST without setting any data to post with
+  CURLOPT_POSTFIELDS! This is no longer the case. Not using CURLOPT_POSTFIELDS
+  now equals setting it to no data at all.
+
+- Ramana Mokkapati reported that curl with '-w %{http_code}' didn't work
+  properly when used for multiple URLs on a single command line. Indeed, the
+  variable was not reset between the requests. This is now fixed.
+
+- David James fixed the Borland makefile so that libcurl still compiles and
+  builds with that compiler.
+
+Daniel (14 August 2001)
+- Oops. I ruined Nico's socklen_t define in config-vms.h, corrected it now.
+
+- An older item not mentioned here before: CURL_GLOBAL_WIN32 is a define for
+  windows users to curl_global_init(), that makes libcurl init the winsock
+  stuff. If libcurl is all socket stuff you do, then allowing it to fiddle
+  with this is a comfortable shortcut to fame.
+
+Version 7.8.1-pre5
+
+Daniel (14 August 2001)
+- Nico Baggus provided more feedback from his VMS porting efforts and a few
+  minor changes were necessary.
+
+- I modified configure.in so that --enable-debug sets more picky gcc options.
+  I then removed almost all the new warnings that appeared, and by doing so I
+  corrected the size_t-treated-as-signed problem that has been discussed on
+  the mailing list previously. I also removed a bunch of the just recently
+  added #ifdef VMS lines.
+
+- I removed the use of a global variable in the SSL code. It was once
+  necessary but hasn't been needed since OpenSSL 0.9.4. The old code should
+  (hopefully) still work if libcurl is built against an ancient version of
+  OpenSSL.
+
+Daniel (13 August 2001)
+- Peter Todd posted a patch that now allows non-file rc1867-style form posts
+  to be larger than 4K.
+
+Daniel (10 August 2001)
+- S. Moonesamy fixed bugs for building debug and SSL lib in VC makefile
+
+Daniel (9 August 2001)
+- The redirected error stream was closed before the curl_easy_cleanup() call
+  was made, and when VERBOSE was enabled, the cleanup function tried to use
+  the stream. It could lead to a segmentation fault. Also, the stream was
+  closed even if we looped to get more files.  Corrects Dustin Boswell's bug
+  report #441610
+
+- Now generates the release configure script with autoconf 2.52
+
+Version 7.8.1-pre4
+
+Daniel (8 August 2001)
+- curl -E uses a colon to separate a file name from a passphrase. This turned
+  out really bad for the windows people who wants to include a drive letter in
+  the file name like "c:\cert.pem". There's now a win32 work-around
+  implemented that tries work around that, when the colon seems to be used for
+  this kind of construct.
+
+- Patrick Bihan-Faou introduced CURLOPT_SSL_VERIFYHOST, which makes curl
+  verify the server's CN field when talking https://. If --cacert is not used,
+  any failures in matching is only displayed as information (-v).
+
+Daniel (7 August 2001)
+- Wrote up nine more test cases, more or less converted from the former test
+  suite.
+
+Daniel (6 August 2001)
+- Heikki Korpela posted a patch that makes 'curl-config --libs' include the
+  directory in which libcurl itself is installed in. While this wasn't my
+  initial intention with this option, it makes sense and makes linking with
+  libcurl easier.
+
+- Stefan Ulrich pointed out to us that other tools and libraries treat file://
+  URLs with only one slash after the host name slighly different than libcurl
+  does. Since all the others seem to agree, we better follow them.
+
+- Nico Baggus provided us with a huge set of fixes to make curl compile and
+  build under OpenVMS.
+
+Version 7.8.1-pre3
+
+Daniel (6 August 2001)
+- Jonathan Hseu noticed that you couldn't get a header callback unless you
+  set CURLOPT_WRITEHEADER to non-NULL, even if you didn't care about that
+  data. This is now fixed.
+
+Daniel (5 August 2001)
+- Sergio Ballestrero provided a patch for reading responses from NCSA httpd
+  1.5.x servers, as they return really screwed up response headers when asked
+  for with HTTP 1.1.
+
+- curl_escape() no longer treats already encoded characters in the input
+  string especially.
+
+Daniel (3 August 2001)
+- I replaced the former lib/arpa_telnet.h file with one I wrote myself, to
+  avoid the BSD annoucement clause of the license in the former file.
+
+- Andrew Francis provided a new version of base64.c to work around the license
+  boiler plate that came with the previous one. I patched it, but the glory
+  should go to Andrew for his heads up.
+
+- Tomasz Lacki noticed that when you do repeated transfers with libcurl you
+  couldn't always reliably change HTTP request. This has now been fixed and a
+  new libcurl option was added: CURLOPT_HTTPGET, that can force the HTTP
+  requestr (back) to GET.
+
+- Linus Nielsen Feltzing pointed out that httpsserver.pl wasn't included in
+  release archives. It should be now.
+
+Daniel (2 August 2001)
+- Frank Keeney pointed out a manual mistake for certificate convertions.
+
+- Tomasz Lacki pointed out a problem in the transfer loop that could make the
+  select() loop use far too much CPU.
+
+- Pawel A. Gajda pointed out an output mistake done when using libcurl's
+  progress callback.
+
+Daniel (29 June 2001)
+- Naveen Noel noticed that the Borland library makefile wasn't updated.
+
+- Nic Roets brought a fix for the certificate verification when using SSL.
+
+Daniel (27 June 2001)
+- Made the FTP tests run OK even on machines running curl IPv6-enabled.
+
+- Troy Engel corrected some RPM package details.
+
+Version 7.8.1-pre2
+
+Daniel (25 June 2001)
+- Björn Stenberg correctly identified a problem that occurred when downloading
+  several files with curl, and using resume. The first file's resume index was
+  then used for all files, resulting in weird results...
+
+- Anton Kalmykov provided a fix that makes curl work with form field names
+  with spaces like when -F is used.
+
+Version 7.8.1-pre1
+
+Daniel (20 June 2001)
+- Mike Bytnar provided a fine report that proved that the --with-ssl option
+  for configure needed tweaking. It no longer searches the default directories
+  for OpenSSL libs or directories when a specified path is given.
+
+Daniel (19 June 2001)
+- When an FTP transfer is cut off during transfer, curl could present a truly
+  garbaged error message and in worst case dump core. Thanks to detailed
+  reports from Shawn Poulson we nailed this.
+
+Daniel (12 June 2001)
+- Salvador Dávila provided a fix for FTP range downloads.
+
+- Added a few more test cases from the former test suite to the new file
+  format. We're now at a total of 26 tests.
+
+Daniel (11 June 2001)
+- libcurl's version-info was wrong, as noted by both Domenico Andreoli and
+  David Odin.
+
+Daniel (7 June 2001)
+- Jörn fixed the curl_unescape duplicate entry in lib/libcurl.def
+
+- I made SSL certificate failure messages to be more detailed.
+
 Version 7.8
 
 Daniel (7 June 2001)
 - SDavila provided a resumed download fix.
 
 Version 7.8-pre4
@@ -983,1388 +1187,6 @@
 - Renamed README.libcurl to LIBCURL
 
 - Changed headers in all sources files to the new dual license concept of
   curl: use the MIT/X derivate license *or* MPL. The LEGAL file was updated
   accordingly and the MPL 1.1 and MIT/X derivate licenses are now part of the
   release archive.
-
-Daniel (30 December 2000)
-- Made all FTP commands get sent with the trailing CRLF in one single write()
-  as splitting them up seems to confuse at least some firewalls (FW-1 being
-  one major).
-
-Daniel (19 December 2000)
-- Added file desrciptor and FILE handle leak detection to the memdebug system
-  and thus I found and removed a file descriptor leakage in the ftp parts
-  that happened when you did PORTed downloads.
-
-- Added an include <stdio.h> in <curl/curl.h> since it uses FILE *.
-
-Daniel (12 December 2000)
-- Multiple URL downloads with -O was still bugging. Not anymore I think or
-  hope, or at least I've tried... :-O
-
-- Francois Petitjean fixed another -O problem
-
-Version 7.5.1
-
-Daniel (11 December 2000)
-- Cleaned up a few of the makefiles to use unix-style newlines only. As Kevin
-  P Roth found out, at least one CVS client behaved wrongly when it found
-  different newline conventions within the same file.
-
-- Albert Chin-A-Young corrected the LDFLAGS use in the configure script for
-  the SSL stuff.
-
-Daniel (6 December 2000)
-- Massimo Squillace correctly described how libcurl could use session ids when
-  doing SSL connections.
-
-- James Griffiths found out that curl would crash if the file you specify with
-  -o is shorter than the URL! This took some hours to fully hunt down, but it
-  is fixed now.
-
-Daniel (5 December 2000)
-- Jaepil Kim sent us makefiles that build curl using the free windows borland
-  compiler. The root makefile now accepts 'make borland' to build curl with
-  that compiler.
-
-- Stefan Radman pointed out that the test makefiles didn't use the PERL
-  variable that the configure scripts figure out. Actually, you still need
-  perl in the path for the test suite to run ok.
-
-- Rich Gray found numerous portability problems:
-  * The SCO compiler got an error on the getpass_r() prototype in getpass.h
-    since the curl one differed from the SCO one
-  * The HPUX compiler got an error because of how curl did the sigaction
-    stuff and used a define HPUX doesn't have (or need).
-  * A few more problems remain to be researched.
-
-- Paul Harrington experienced a core dump using https. Not much details yet.
-
-Daniel (4 December 2000)
-- Jörn Hartroth fixed a problem with multiple URLs and -o/-O.
-
-Version 7.5
-
-Daniel (1 December 2000)
-- Craig Davison gave us his updates on the VC++ makefiles, so now curl should
-  build fine with the Microsoft compiler on windows too.
-
-- Fixed the libcurl versioning so that we don't ruin old programs when
-  releasing new shared library interfaces.
-
-Daniel (30 November 2000)
-- Renamed docs/README.curl to docs/MANUAL to better reflect what the document
-  actually contains.
-
-Daniel (29 November 2000)
-- I removed a bunch of '#if 0' sections from the code. They only make things
-  harder to follow. After all, we do have all older versions in the CVS.
-
-Version 7.5-pre5
-
-Daniel (28 November 2000)
-- I filled in more error codes in the man page error code list that had been
-  lagging.
-
-- James Griffiths mailed me a fine patch that introduces the CURLOPT_MAXREDIRS
-  libcurl option. When used, it'll prevent location following more than the
-  set number of times. It is useful to break out of endless redirect-loops.
-
-Daniel (27 November 2000)
-- Added two test cases for file://.
-
-Daniel (22 November 2000)
-- Added the libcurl CURLOPT_FILETIME setopt, when set it tries to get the
-  modified time of the remote document. This is a special option since it
-  involves an extra set of commands on FTP servers. (Using the MDTM command
-  which is not in the RFC959)
-
-  curl_easy_getinfo() got a corresponding CURLINFO_FILETIME to get the time
-  after a transfer. It'll return a zero if CURLOPT_FILETIME wasn't used or if
-  the time wasn't possible to get.
-
-  --head/-I used on a FTP server will now present a 'Last-Modified:' header
-  if curl could get the time of the specified file.
-
-- Added the option '--cacert [file]' to curl, which allows a specified PEM
-  file to be used to verify the peer's certificate when doing HTTPS
-  connections. This has been requested, rather recently by Hulka Bohuslav but
-  others have asked for it before as well.
-
-Daniel (21 November 2000)
-- Numerous fixes the test suite has brought into the daylight:
-
-   * curl_unescape() could return a too long string
-   * on ftp transfer failures, there could be memory leaks
-   * ftp CWD could use bad directory names
-   * memdebug now uses the mprintf() routines for better portability
-   * free(NULL) removed when doing resumed transfers
-
-- Added a bunch of test cases for FTP.
-
-- General cleanups to make less warnings with gcc -Wall -pedantic.
-
-- I made the tests/ftpserver.pl work with the most commonly used ftp
-  operations. PORT, PASV, RETR, STOR, LIST, SIZE, USER, PASS all work now. Now
-  all I have to do is integrate the ftp server doings in the runtests.pl
-  script so that ftp tests can be run the same way http tests already run.
-
-Daniel (20 November 2000)
-- Made libcurl capable of dealing with any-length URLs. The former limit of
-  4096 bytes was a bit annoying when people wanted to use curl to really make
-  life tough on a web server. Now, the command line limit is the most annoying
-  but that can be circumvented by using a config file.
-
-  NOTE: there is still a 4096-byte limit on URLs extracted from Location:
-  headers.
-
-- Corrected the spelling of 'resolve' in two error messages.
-
-- Alexander Kourakos posted a bug report and a patch that corrected it! It
-  turned out that lynx and wget support lowercase environment variable names
-  where curl only looked for the uppercase versions. Now curl will use the
-  lowercase versions if they exist, but if they don't, it'll use the uppercase
-  versions.
-
-Daniel (17 November 2000)
-- curl_formfree() was added. How come no one missed that one before? I ran the
-  test suite with the malloc debug enabled and got lots of "nice" warnings on
-  memory leaks. The most serious one was this. There were also leaks in the
-  cookie handling, and a few errors when curl failed to connect and similar
-  things. More tests cases were added to cover up and to verify that these
-  problems have been removed.
-
-- Mucho updated config file parser (I'm dead tired of all the bug reports and
-  weird behaviour I get on the former one). It works slightly differently now,
-  although I doubt many people will notice the differences. The main
-  difference being that if you use options that require parameters, they must
-  both be specified on the same line. With this new parser, you can also
-  specify long options without '--' and you may separate options and
-  parameters with : or =. It makes a config file line could look like:
-
-        user-agent = "foobar and something"
-
-  Parameters within quotes may contain spaces. Without quotes, they're
-  expected to be a single non-space word.
-
-  Had to patch the command line argument parser a little to make this work.
-
-- Added --url as an option to allow the URL to be specified this way. It makes
-  way nicer config files. The previous way of specifying URLs in the config
-  file doesn't work anymore.
-
-Daniel (15 November 2000)
-- Using certain characters in usernames or passwords for HTTP authentication
-  failed. This was due to the mprintf() that had a silly check for letters,
-  and if they weren't isprint() they weren't outputed "as-is". This caused
-  passwords and usernames using '§' (for example) to fail.
-
-Version 7.4.2
-
-Daniel (15 November 2000)
-- 'tests/runtests.pl' now sorts the test cases properly when 'all' is used.
-
-Daniel (14 November 2000)
-- I fell over the draft-ietf-ftpext-mlst-12.txt Internet Draft titled
-  "Extensions to FTP" that contains a defined way how the ftp command SIZE
-  could be assumed to work.
-
-- Laurent Papier posted a bug report about using "-C -" and FTP uploading a
-  file that isn't prsent on the server. The server might then return a 550 and
-  curl will fail. Should it instead as Laurent Papier suggests, start
-  uploading from the beginning as a normal upload?
-
-Daniel (13 November 2000)
-- Fixed a crash with the followlocation counter.
-
-- While writing test cases for the test suite, I discovered an old limitation
-  that prevented -o and -T to be used at the same time. I removed this
-  immediately as this has no relevance in the current libcurl.
-  
-- Chris Faherty fixed a free-twice problem in lib/file.c
-
-- I fixed the perl http server problem in the test suite.
-
-Version 7.4.2 pre4
-
-Daniel (10 November 2000)
-- I've (finally) started working on the curl test suite. It is in the new
-  tests/ directory. It requires sh and perl. There's a TCP server in perl and
-  most of the other stuff running a pretty simple shell script.
-
-  I've only made four test cases so far, but it proves the system can work.
-
-- Laurent Papier noticed that curl didn't set TYPE when doing --head checks
-  for sizes on FTP servers. Some servers seem to return different sizes
-  depending on whether ASCII or BINARY is used!
-
-- Laurent Papier detected that if you appended a FTP upload and everything was
-  already uploaded, curl would hang.
-
-- Angus Mackay's getpass_r() in lib/getpass.c is now compliant with the
-  getpass_r() function it seems some systems actually have.
-  
-- Venkataramana Mokkapati detected a bug in the cookie parser and corrected
-  it.  If the cookie was set for the full host name (domain=full.host.com),
-  the cookie was never sent back because of a faulty length comparison between
-  the set domain length and the current host name.
-
-Daniel (9 November 2000)
-- Added a configure check for gethostbyname in -lsocket (OS/2 seems to need
-  it). Added a check for RSAglue/rsaref for the cases where libcrypto is found
-  but libssl isn't. I haven't verified this fix yet though, as I have no
-  system that requires those libs to build.
-  
-Version 7.4.2 pre3
-
-Daniel (7 November 2000)
-- Removed perror() outputs from getpass.c. Angus Mackay also agreed to a
-  slightly modified license of the getpass.c file as the prototype was changed.
-
-Daniel (6 November 2000)
-- Added possibility to set a password callback to use instead of the built-in.
-  They're controled with curl_easy_setopt() of course, the tags are
-  CURLOPT_PASSWDFUNCTION and CURLOPT_PASSWDDATA.
-
-- Used T. Bharath's thinking and fixed the timers that showed terribly wrong
-  times when location: headers were followed.
-
-- Emmanuel Tychon discovered that curl didn't really like user names only in
-  the URL. I corrected this and I also fixed the since long living problem
-  with URL encoded user names and passwords in the URLs. They should work now.
-  
-Daniel (2 November 2000)
-- When I added --interface, the new error code that was added with it was
-  inserted in the wrong place and thus all error codes from 35 and upwards got
-  increased one step. This is now corrected, we're back at the previous
-  numbers. All new exit codes should be added at the end.
-
-Daniel (1 November 2000)
-- Added a check for signal() in the configure script so that if sigaction()
-  isn't present, we can use signal() instead.
-
-- I'm having a license discussion going on privately. The issue is yet again
-  GPL-licensed programs that have problems with MPL. I am leaning towards
-  making a kind of dual-license that will solve this once and for all...
-
-Daniel (31 October 2000)
-- Added the packages/ directory. I intend to let this contain some docs and
-  templates on how to generate custom-format packages for various platforms.
-  I've now removed the RPM related curl.spec files from the archive root.
-
-Daniel (30 October 2000)
-- T. Bharath brought a set of patches that bring new functionality to
-  curl_easy_getinfo() and curl_easy_setopt(). Now you can request peer
-  certificate verification with the *setopt() CURLOPT_SSL_VERIFYPEER option
-  and then use the CURLOPT_CAINFO to set the certificate to verify the remote
-  peer against. After an such an operation with a verification request, the
-  *_getinfo() option CURLINFO_SSL_VERIFYRESULT will return information about
-  whether the verification succeeded or not.  
-
-Daniel (27 October 2000)
-- Georg Horn brought us a splendid patch that solves the long-standing
-  annoying problem with timeouts that made curl exit with silly exit codes
-  (which as been commented out lately). This solution is sigaction() based and
-  of course then only works for unixes (and only those unixes that actually
-  have the sigaction() function).
-
-Daniel (26 October 2000)
-- Björn Stenberg supplied a patch that fixed the flaw mentioned by Kevin Roth
-  that made the password get echoed when prompted for interactively. The
-  getpass() function (now known as my_getpass()) was also fixed to not use any
-  static buffers. This also means we cannot use the "standard" getpass()
-  function even for those systems that have it, since it isn't thread-safe.
-  
-- Kevin Roth found out that if you'd write a config file with '-v url', the
-  url would not be used as "default URL" as documented, although if you wrote
-  it 'url -v' it worked! This has been corrected now.
-
-- Kevin Roth's idea of using multiple -d options on the same command line was
-  just brilliant, and I couldn't really think of any reason why we shouldn't
-  support it! The append function always append '&' and then the new -d
-  chunk. This enables constructs like the following:
-
-        curl -d name=daniel -d age=unknown foobarsite.com
-
-Daniel (24 October 2000)
-- I fixed the lib/memdebug.c source so that it compiles on Linux and other
-  systems. It will be useful one day when someone else but me wants to run the
-  memory debugging system.
-
-Daniel (23 October 2000)
-- I modified the maketgz and configure scripts, so that the configure script
-  will fetch the version number from the include/curl/curl.h header files, and
-  then the maketgz doesn't have to rebuild the configure script when I build
-  release-archives.
-
-- Björn Stenberg and Linus Nielsen correctly pointed out that curl was silly
-  enough to not allow @-letters in passwords when they were specified with the
-  -u or -U flags (CURLOPT_USERPWD and CURLOPT_PROXYUSERPWD). This also
-  suggests that curl probably should url-decode the password piece of an URL
-  so that you could pass an encoded @-letter there...
-  
-Daniel (20 October 2000)
-- Yet another http server barfed on curl's request that include the port
-  number in the Host: header always. I now only include the port number if it
-  isn't the default (80 for HTTP, 443 for HTTPS). www.perl.com turned out to
-  run one of those nasty servers.
-
-- The PHP4 module for curl had problems with referer that seems to have been
-  corrected just yesterday. (Sterling Hughes of the PHP team confirmed this)
-
-Daniel (17 October 2000)
-- Vladimir Oblomov reported that the -Y and -y options didn't work. They
-  didn't work for me either. This once again proves we should have that test
-  suite...
-  
-- I finally changed the error message libcurl returns if you try a https://
-  URL when the library wasn't build with SSL enabled. It will now return this
-  error:
-        "libcurl was built with SSL disabled, https: not supported!"
-
-  I really hope it will make it a bit clearer to users where the actual
-  problem lies.
-
-Version 7.4.1
-
-Daniel (16 October 2000)
-- I forgot to remove some of the malloc debug defines from the makefiles in
-  the release archive (of course).
-
-Version 7.4
-
-Daniel (16 October 2000)
-- The buffer overflow mentioned below was posted to bugtraq on Friday 13th.
-
-Daniel (12 October 2000)
-- Colin Robert Phipps elegantly corrected a buffer overflow. It could be used
-  by an evil ftp server to crash curl. I took the opportunity of replacing a
-  few other sprintf()s into snprintf()s as well.
-
-Daniel (11 October 2000)
-- Found some more memory leaks. This new simple memory debugger has turned out
-  really useful!
-
-Version 7.4 pre6
-
-Daniel (9 October 2000)
-- Florian Koenig pointed out that the bool typedef in the curl/curl.h include
-  file was breaking PHP 4.0.3 compiling. The bool typedef is not used in the
-  public interface and was wrongly inserted in that header file.
-
-- Jörg Hartroth corrected a minor memory leak in the src/urlglob.c stuff. It
-  didn't harm anyone since the memory is free()ed on exit anyway.
-
-- Corrected the src/main.c. We use the _MPRINTF_REPLACE #define to use our
-  libcurl-printf() functions. This gives us snprintf() et al on all
-  platforms. I converted the allocated useragent string to one that uses a
-  local buffer.
-
-- I've set an #if 0 section around the Content-Transfer-Encoding header
-  generated in lib/formdata.c. This will hopefully make curl do more
-  PHP-friendly multi-part posts.
-
-Version 7.4 pre5
-
-Daniel (9 October 2000)
-- Nico Baggus found out that curl's ability to force a ASCII download when
-  using FTP was no longer working! I corrected this. This problem was probably
-  introduced when I redesigned libcurl for version 7.
-
-- Georg Horn provided a source example that proved a memory leak in libcurl.
-  I added simple memory debugging facilities and now we can make libcurl log
-  all memory fiddling functions. An additional perl script is used to analyze
-  the output logfile and to match malloc()s with free()s etc. The memory leak
-  Georg found turned out to be the main cookie struct that cookie_cleanup()
-  didn't free! The perl script is named memanalyze.pl and it is available in
-  the CVS respository, not in the release archive.
-
-Daniel (8 October 2000)
-- Georg Horn found a GetHost() problem. It turned out it never assigned the
-  pointer in the third argument properly! This could make a crash, or at best
-  a memory leak!
-
-Version 7.4 pre4
-
-Daniel (6 October 2000)
-- Is the -F post following the RFC 1867 spec? We had this dicussion on the
-  mailing list since it appears curl can't post -F form posts to a PHP
-  receiver... I've been in touch with the PHP developers about this.
-
-- Domenico Andreoli found out that the long option '--proxy' wasn't working
-  anymore! The option parser got confused when I added the --proxytunnel for
-  7.3. This was indeed a very old flaw that hasn't turned up until now...
-
-- Jörn Hartroth provided patches, updated makefiles and two new files for DLL
-  stuff on win32. He also pointed out that lib source files were compiled with
-  -I../src which isn't only wrong but plain stupid!
-
-- Troels Walsted Hansen fixed a problem with HTTP resume. Curl previously used
-  a local variable badly, that could lead to crashes.
-
-Version 7.4 pre3
-
-Daniel (4 October 2000)
-- More docs written. The curl_easy_getinfo.3 man page is now pretty accurate,
-  as is the -w section in curl.1. I added two options to enable the user to
-  get information about the received headers' size and the size of the HTTP
-  request. T. Bharath requested them.
-  
-Daniel (3 October 2000)
-- Corrected a sever free() before use in the new add_buffer_send()! ;-)
-
-Version 7.4 pre2
-
-Daniel (3 October 2000)
-- Jason S. Priebe sent me patches that changed the way curl issues HTTP
-  requests. The entire request is now issued in one single shot. It didn't do
-  this previously, and it has turned out that since the common browsers do it
-  this way, some sites have turned out to work with browsers but not with
-  curl! Although this is not a client-side problem, we want to be able to
-  fully emulate browsers, and thus we have now adjusted the networking layer
-  to slightly more appear as a browser. I adjusted Jason's patch, the faults
-  are probably mine.
-
-Daniel (2 October 2000)
-- Anyone who ever uploaded data with curl on a slow link has noticed that the
-  progess meter is updated very infrequently. That is due to the large buffer
-  size curl is using. It reads 50Kb and sends it, updates the progress meter
-  and loops. 50Kb is very much on a slow link, although it is pretty neat to
-  use on a fast one.
-
-  I've now made an adjustment that makes curl use a 2Kb buffer for uploads to
-  start with. If curl's average upload speed is faster than buffer size bytes
-  per second, curl will increase the used buffer size up to max 50Kb. It
-  should make the progress meter work better.
-  
-Version 7.4 pre1
-
-Daniel (29 September 2000)
-- Ripped out the -w stuff from the library and put in the curl tool. It gets
-  all the relevant info from the library using the new curl_easy_getinfo()
-  function.
-
-- brad at openbsd.org mailed me a patch that corrected my kerberos mistake and
-  removed a compiler warning from hostip.c that OpenBSD people get.
-
-Daniel (28 September 2000)
-- Of course (I should probably get punished somehow) I didn't properly correct
-  the #include lines for the base64 stuff in the kerberos sources in the just
-  released 7.3 package. They still include the *_krb.h files! Now, the error
-  is sooo very easy to spot and fix so I won't bother with a quick bug fix
-  release. I'll post a patch whenever one is needed instead. It'll be
-  available in the CVS in a few minutes anyway.
-
-Version 7.3
-
-Daniel (28 September 2000)
-- Removed the base64_krb.[ch] files. They've now replaced the former
-  base64.[ch] files.
-
-Daniel (26 September 2000)
-- Updated some docs.
-
-- I changed the OpenSSL fix to work with older versions as well. The posted
-  patch was only working with 0.9.6 and no older ones.
-  
-Version 7.3-pre8
-
-Daniel (25 September 2000)
-- Erdmut Pfeifer informed us that curl didn't build with OpenSSL 0.9.6 and
-  showed us what needed to get patched in order to make it build properly
-  again.
-
-- Dirk Kruschewski found a bug in the cookie parser. I made an alternative
-  approach to the solution Dirk himself suggested. The bug made a cookie
-  header that didn't end with a trailing semicolon to not get parsed.
-
-- I've marked -c and -t deprecated now. If you use any of them, curl will tell
-  you to use "-C -" or "-T -" instead. I don't think occupying two letters for
-  nearly identical functions is good use. Also, -T - kind of follows the curl
-  tradition of using - for stdin where a file name is expected.
-
-Daniel (23 September 2000)
-- Martin Hedenfalk provided the patch that finally made the krb4 ftp upload
-  work!
-
-Daniel (21 September 2000)
-- The kerberos code is not quite thread-safe yet. There are a few more globals
-  that need to be take care of. Let's get the upload working first!
-
-Daniel (20 September 2000)
-- Richard Prescott solved another name lookup buffer size problem. I took this
-  opportunity to rewrite the GetHost() function. With these large buffer
-  sizes, I think keeping them as local arrays quickly turn ugly. I now use
-  malloc() to get the buffer memory. Thanks to this, I now can realloc() to a
-  large buffer in case of demand (errno == ERANGE) in case a solution like
-  that would become necessary. I still want to avoid that kind of nastiness.
-
-- Tried to compile and run curl on Linux for alpha and FreeBSD for alpha. Went
-  as smooth as it could.
-
-- Added a docs/examples directory with two tiny example sources that show how
-  to use libcurl. I hope users will supply me with more useful examples
-  further on.
-
-- Applied a patch by Jörn Hartroth to no longer use the word 'inteface' in the
-  config struct in the src/main.c file since certain compilers have that word
-  "reservered".  I figure that is some kind of C++ decease.
-
-- Updated the curl.1 man page with --interface and --krb4.
-
-- Modified the base64Encode() function to work like the kerberos one, so that
-  I could remove the use of that. There is no need for *two* base64 encoding
-  functions! ;-)
-
-Version 7.3pre5
-
-Daniel (19 September 2000)
-- The kerberos4-layer source code that is much "influenced" by the original
-  krb4 source code, through yafc into curl, was using quite a lot of global
-  variables. libcurl can't work properly with globals like that why I had to
-  clean up almost every function in the new security.c to make them use
-  connection specific variables instead of the globals. I just hope I didn't
-  destroy anything now... :-) configure updated, version string now reflects
-  krb4 built-in. It almost works now. Only uploads are still being naughty.
-
-Version 7.3pre3
-
-Daniel (18 September 2000)
-- Martin Hedenfalk supplied a major patch that introduces krb4-ftp support to
-  curl. Martin is the primary author of the ftp client named yafc and he did
-  not hesitate to help us implement this when I asked him. Many and sincere
-  thanks to a splendid effort. It didn't even take many hours!
-
-- Stephen Kick supplied a big patch that introduces the --interface flag to
-  the curl tool and CURLOPT_INTERFACE for libcurl. It allows you to specify an
-  outgoing interface to use for your request. This may not work on all
-  platforms. This needs testing.
-
-- Richard Prescott noticed that curl on Tru64 unix could core dumped if the
-  name didn't resolve properly. This was due to the GetHost() function not
-  returning an error even though it failed on some platforms!
-
-Daniel (15 September 2000)
-- Updated all sorts of documents in regards to the new proxytunnel support.
-
-Version 7.3pre2
-
-Daniel (15 September 2000)
-- Kai-Uwe Rommel pointed out a problem in the httpproxytunnel stuff for ftp.
-  Adjusted it. Added better info message when setting up the tunnel and the
-  pasv message when doing the second connect.
-  
-Version 7.3pre1
-
-Daniel (15 September 2000)
-- libcurl now allows "httpproxytunnel" to an arbitrary host and port name. The
-  second connection on ftp needed that.
-
-- TheArtOfHTTPScripting was corrected all over. I both type and spell really
-  bad at times!
-  
-Daniel (14 September 2000)
-- -p/--proxytunnel was added to 'curl'. It uses the new
-  CURLOPT_HTTPPROXYTUNNEL libcurl option that allows "any" protocol to tunnel
-  through the specified http proxy. At the moment, this should work with ftp.
-
-Daniel (13 September 2000)
-- Jochen Schaeuble found that file:// didn't work as expected. Corrected this
-  and mailed the patch to the mailing list.
-
-Daniel (7 September 2000)
-- I changed the #define T() in curl.h since it turned out it wasn't really
-  a good symbol to use (when you compiled PHP with curl as a module, that
-  define collided with some IMAP define or something). This was posted to the
-  PHP bug tracker.
-
-- I added extern "C" stuff in two header files to better allow libcurl usage
-  in C++ sorces. Discussions on the libcurl list with Danny Horswell lead to
-  this.
-
-Version 7.2.1
-
-Daniel (31 August 2000)
-- Albert Chin-A-Young fixed the configure script *again* and now it seems to
-  detect Linux name resolving properly! (heard that before?)
-
-- Troels Walsted Hansen pointed out that downloading a file containing the
-  letter '+' from an ftp server didn't work. It did work from HTTP though and
-  the reason was my lame URL decoder.
-
-- I happened to notice that -I didn't at all work on ftp anymore. I corrected
-  that.
-
-Version 7.2
-
-Daniel (30 August 2000)
-- Understanding AIX is a hard task. I believe I'll never figure out why they
-  solve things so differently from the other unixes. Now, I'm left with the
-  AIX 4.3 run-time warnings about duplicate symbols that according to this
-  article (http://www.geocrawler.com/archives/3/405/1999/9/0/2593428/) is a
-  libtool flaw. I tried the mentioned patch, although that stops the linking
-  completely.
-
-  So, if I select to ignore the ld warnings there are compiler warnings that
-  fill the screen pretty bad when curl compiles. It turns out that if I want
-  to '#include <arpa/inet.h>', I can get tid of the warnings by include the
-  following three include files before that one:
-
-        #include <net/if_dl.h>
-        #include <sys/mbuf.h>
-        #include <netinet/if_ether.h>
-
-  Now, is it really sane to add those include files before arpa/inet.h in all
-  the source files that include it?
-
-  Thanks to Albert Chin-A-Young at thewrittenword.com who gave me the AIX
-  login to try everything on.
-
-Daniel (24 August 2000)
-- Jan Schmidt supplied us a new VC6 makefile for Windows as the previous one
-  was not up to date but lacked several object files.
-
-- More work on the naming.
-
-- Albert Chin-A-Young provided a configure-check for large file support, as
-  some systems seem to need that for them to work. Had to change the position
-  for the config.h include file in every .c file in the libcurl dir...
-
-- As suggested on the mailing list (by Troy Engel), I did use a --data-binary
-  option instead of the messy way I've left described below. It seems to
-  work. The libcurl fix remained the same as yesterday.
-
-Daniel (23 August 2000)
-- Back on the -d stripping newlines thing. The 'plain post' thing was added
-  when I had no thought of that one could actually post binary data with
-  it. Now, I have to add this functionality in a graceful manner and I think
-  I've managed to come up with a way: '-d @file;binary' will thus post the
-  file binary, exactly as its contents are. It is implemented with a new
-  *setopt() option (CURLOPT_POSTFIELDSIZE) to set the postfield size, since
-  libcurl can't strlen() the data in these cases.
-
-- Albert Chin-A-Young made some very serious efforts and all the name
-  resolving problems seem to have been sorted out now on all the platforms
-  that previously showed them. I'll make another release now anyday because of
-  this.
-
-- The FAQ was much enhanced when it comes to the licensing issues thanks to
-  Bjorn Reese.
-
-Daniel (21 August 2000)
-- Rick Welykochy pointed out a problem when you use -d to post and you want to
-  keep the newlines, as curl strips them off as a bonus before posting...
-  This needs to be addressed.
-
-Version 7.1.1
-
-Daniel (21 August 2000)
-- Got more people involved in the gethostbyname_r() mess. Caolan McNamara sent
-  me configure-code that turned out to be very similar to my existing tests
-  which only make me more sure I'm on the right path. I changed the order of
-  the tests slightly, as it seems that some compilers don't yell error if a
-  function is used with too many parameters. Thus, the first tested function
-  will seem ok... Let's hope more compilers think of too-few parameters as bad
-  manners, as we're now trying the functions in that order; fewer first. I
-  should also add that Lars Hecking mailed me and volunteered to run tests on
-  a few odd systems. Coalan is keeping his work over at
-  http://www.csn.ul.ie/~caolan/publink/gethostbyname_r/. Might be handy in the
-  future as well.
-
-Daniel (18 August 2000)
-- I noticed I hadn't increased the name lookup buffer in lib/ftp.c. I don't
-  think this is the reason for the continued trouble though.
-
-Daniel (17 August 2000)
-- Fred Noz corrected my stupid mistakes in the gethostbyname_r() fluff. It
-  should affect some AIX, Digital Unix and HPUX 10 systems.
-
-Daniel (15 August 2000)
-- Mathieu Legare compiled and build 7.1 without errors on both AIX 4.2 as well
-  as AIX 4.3. Now why did problems occur before?
-
-- Fred Noz reported a -w/--write-out bug that caused it to malfunction when
-  used combined with multiple URL retrievales. All but the first display got
-  screwed up!
-
-Daniel (11 August 2000)
-- Jason Priebe and an anonymous friend found some host names the Linux version
-  of curl could not resolve. It turned out the buffer used to retrieve that
-  information was too small. Fixed. One could argue about the usefulness of
-  not having the slightest trace of a man page for gethostbyname_r() on my
-  Linux Redhat installation...
-
-Daniel (10 August 2000)
-- Balaji S Rao was first in line to note the missing possibility to replace
-  the Content-Type: and Content-Length: headers when doing -d posts. I added
-  the possibility just now. It seems some people wants to do standard posts
-  using custom Content-Types.
-
-Daniel (8 August 2000)
-- Mike Dowell correctly discovered that curl did not approve of URLs with no
-  user name but password. As in 'http://:foo@haxx.se'. I corrected this.
-
-Version 7.1
-
-Daniel (7 August 2000)
-- My AIX 4 fix does not work. I need help from a AIX 4 hacker.
-
-- I added my new document in the docs directory. It is aimed to become a sort
-  of tutorial on how to do HTTP scripting with curl.
-
-Daniel (4 August 2000)
-- Working with Rich Gray on compiling curl for lots of different platforms.
-  My fix for AIX 3.2 was not good enough and was slightly changed, I had to
-  move an include file before another, as is now described in the source.
-
-  AIX 4.2 (4.X?) has different gethostbyname_r() and gethostbyaddr_r()
-  functions that the configure script didn't check for and thus the compile
-  broke with an error. I have now changed the gethostbyname_r() check in the
-  configure file to support all three versions of both these functions. My
-  implementation that uses the AIX-style is though not yet verified and I may
-  get problems to fix it if it turns out to bug since I don't have access to
-  any system using that.
-
-  For problems like that, I made the configure script allow --disable-thread
-  to completely switch off the check for threadsafe versions of a few
-  functions and thus go with the "good old versions" that tend to work
-  although will break thread-safeness for libcurl. Most people won't use
-  libcurl for other things than curl though, and curl doesn't need a
-  thread-safe lib.
-
-- Working on my big tutorial about HTTP scripting with curl.
-
-Daniel (1 August 2000)
-- Rich Gray spotted a problem in src/setup.h caused by a #define strequal()
-  that was just a left-over from passed times. The strequal() is now a true
-  function supplied by libcurl for a portable case insensitive string
-  comparison. I added the prototypes in include/curl.h and removed the
-  now obsolete #define.
-
-- Igor Khristophorov made a fix to allow resumed download from Sun's
-  JavaWebServer/1.1.1. It seems that their server sends bad Content-Range
-  headers.
-
-- The makefiles forced a static library build, which is bad since we now use
-  libtool and thus have excellent shared library support! Albert Chin-A-Young
-  found out.
-
-Version 7.0.11beta
-
-Daniel (1 August 2000)
-- Albert Chin-A-Young pointed out that 'make install' did not properly create
-  the header include directory, why it failed to install the header files as
-  it should. Automake isn't really equipped to deal with subdirectories
-  without Makefiles in any nice way. I had to run ahead and add Makefiles in
-  both include and include/curl before I managed to create a top-level
-  makefile that succeeds in install everything properly!
-
-- Ok, no more "features" added now. Let's just verify that there's no major
-  flaws added now.
-
-Daniel (31 July 2000)
-- Both Jeff Schasny and Ketil Froyn asked me how to tell curl not to send one
-  of those internally generated headers. They didn't settle with the blank
-  ones you could tell curl to use. I rewrote the header-replace stuff a
-  little. Now, if you replace an internal header with your own and that new
-  one is a blank header you will only remove the internal one and not get any
-  blank. I couldn't figure out any case when you want that blank header.
-
-Daniel (29 July 2000)
-- It struck me that the lib used localtime() which is not thread-safe, so now
-  I use localtime_r() in the systems that has it.
-
-- I went through this entire document and removed all email addresses and left
-  names only. I've really made an effort to always note who brought be bug
-  reports or fixes, but more and more people ask me to remove the email
-  addresses since they become victims for spams this way. Gordon Beaton got me
-  working on this.
-
-Daniel (27 July 2000)
-- Jörn Hartroth found out that when you specified a HTTP proxy in an
-  environment variable and used -L, curl failed in the second fetch. I
-  corrected this problem and posted a patch to the list. No need for an extra
-  beta release just for this.
-
-Version 7.0.10beta
-
-Daniel (27 July 2000)
-- So, libtool replaced two of my files with symbolic links and I forgot to add
-  the two new libtool files to the release archive (and they were added as
-  symlinks as well!) This of course lead to that the configure script failed
-  on 7.0.9...
-
-Version 7.0.9beta
-
-Daniel (25 July 2000)
-- Kristian Köhntopp <kris at koehntopp.de> brought a fix that makes libcurl
-  libtoolified, just as we've wanted for a while now. He also made the
-  recently added man pages get installed properly on 'make install' and some
-  other nice cleanups.
-
-- In a discussion with Eetu Ojanen it struck me that if we use curl to get a
-  page using a password, and that page then sends a Location: to another
-  server that curl follows, curl will send the user name and password to that
-  server as well.
-
-  Now, I'll never be able to make curl do Location: following all that perfect
-  and you're all sooner or later required to write a script to do several
-  fetches when you're doing advanced stuff, but now I've modified curl to at
-  least *only* send the user name and password to the original server. Which
-  means that if get a page from server A with a password, that forwards curl
-  to server B, curl won't use the password there. If server B then forwards
-  curl back to server A again, the password will be used again.
-
-  This is not a perfect implementation, as in a browser case it would only use
-  the password if the left-prefix of the first path is the same. I just think
-  that this fix prevents a somewhat lurky "security hole".
-
-  As a side-note in this subject: HTTP passwords are sent in cleartext and
-  will never be considered to be safe or secure. Use HTTPS for that.
-
-- As discussed on the mailing list, I converted the FTP response reading
-  function into using select() which then allows timeouts (even under win32!)
-  if the command-reply session gets too slow or dies completely. I made a
-  default timeout on 3600 seconds unless anything else is specified, since I
-  don't think anyone wants to wait more than that for a single character to
-  get received...
-
-- Torsten Foertsch <torsten.foertsch at gmx.net> brought a set of fixes for
-  the rfc1867 form posts. He introduced 'name=<file' which brings a means to
-  suuply very large text chunks read from the given file name. It differs from
-  'name=@file' in the way that this latter thing is marked in the uploaded
-  contents as a file upload, while the first is just text (as in a input or
-  textarea field). Torsten also corrected a bug that would happen if you used
-  %s or similar in a -F file name.
-
-- As discovered by Nico Baggus <Nico.Baggus at mail.ing.nl>, when transferring
-  files to/from FTP using type ASCII curl should not expect the transfer to be
-  the exact size reported by the server as the file size. Since ASCII may very
-  well mean that the content is translated while transfered, the final size
-  may very well differ. Therefor, curl now ignores the file size when doing
-  ASCII transfers in FTP.
-
-Daniel (24 July 2000)
-- Added CURLOPT_PROXYPORT to the curl_easy_setopt() call to allow the proxy
-  port number to be set separately from the proxy host name.
-
-- Andrew <andrew at ugh.net.au> pointed out a netrc manual bug.
-
-- The FTP transfer code now accepts a 250-code as well as the previously
-  accepted 226, after a successful file transfer. Mohan <mnair at
-  evergreen-funds.com> pointed this out.
-
-- The check for *both* nsl and socket was never added in the v7 configure.in
-  when I moved the main branch. I re-added that check to configure.in. This was
-  discovered by Rich Gray.
-
-- Howard, Blaise <Blaise.Howard at factiva.com> pointed out a missing free() in
-  curl_disconnect() which of course meant libcurl ate memory.
-
-- Brian E. Gallew noted that the HTTP 'Host:' header curl sent did not
-  properly include the port number if non-default ports were used. This should
-  now have been fixed.
-
-- HTTP connect errors now return errors earlier. This was most notably causing
-  problems when the HTTPS certificate had problems and later caused a crash.
-  Many thanks to Gregory Nicholls <gnicholls at level8.com> for discovering
-  and suggesting a fix...
-
-Daniel (21 June 2000)
-- After a "bug report" I received where the user was using both -F and -I in a
-  HTTP request (it severly confused the library I should add), I added some
-  checks to src/main.c that prevents setting more than one HTTP request
-  command, no matter what the user wants! ;-)
-
-Version 7.0.8beta
-
-Daniel (20 June 2000)
-- I did a major replace in many files to use the new curl domain haxx.se
-  instead of the previous one.
-
-- As Eetu Ojanen suggested, I finally took the step and now libcurl no longer
-  makes a POST after it has followed a location. When the initial POST has
-  been done, it'll turned into a GET for the further requests. This is only
-  interesting when using -L/--location *and* doing a POST at the same time.
-
-  While messing with this, I added another weird feature I call 'auto
-  referer'. If you append ';auto' to the right of a given referer string (or
-  only use that string as referer), libcurl will automatically set the
-  previoud URL as refered when it follows a Location: and gets a succeeding
-  document.
-
-- My hero Rich Gray found the very obscure FTP bug that happened to him only
-  when passing through a particular firewall and using the PORT command. It
-  turned out that PORT was the only command in the lib/ftp.c source that
-  didn't send a proper \r\n sequence but instead used the faulty \n which as
-  it seemed is supported by most major ftp servers... :-O
-
-Version 7.0.7beta
-
-Daniel (16 June 2000)
-- I had avoided this long enough now, so I moved the alternative progress bar
-  stuff from the lib and added it to the client code. This is now using the
-  recently added progress callback and it seems to work pretty much like
-  before. Since it is only one progress bar and you and download and upload at
-  the same time, this bar shows the combined progress of both directions. This
-  code was just ported from the old place to this, Lars is still our saviour!
-  ;-) This also made the documentation more accurate since I never removed
-  this function from any docs! Although I now removed the CURLOPT_PROGRESSMODE
-  from the library since the lib has only one internal progress meter and it
-  will never get another. It is although likely that the internal one also
-  will be moved to the client code in the future (when I have other means of
-  getting the writeout data and move that too to the client).
-
-- I took the opportunity to verify that standard progress meter works and I
-  found out it didn't get inited properly. Grrr. I corrected that as well.
-
-Daniel (15 June 2000)
-- I thought I'd better verify that the -F option still works in v7 and of
-  course it didn't... :-/ Anyway, I had the problems I could discover
-  corrected. About one month of beta testing and not a single person has used
-  this feature with v7?
-
-- Björn correctly pointed out that the --progress-bar still doesn't work in
-  v7. Hm.
-
-Daniel (14 June 2000)
-- Tim Tassonis discovered that curl 7 didn't handle normal http POST as it
-  should. I corrected this.
-
-Version 7.0.6beta
-
-Daniel (14 June 2000)
-- Björn Stenberg pointed out several problems (related to win32 compiling):
-  lib/strequal.c had a bad #ifdef for one of the string comparisons (win32)
-  src/main.c had several minor problems
-  lib/makefile.m32 had getpass.[co] twice
-  src/config-win32.h lacked the HAVE_FCNTL_H define
-  both config-win32.h files now only set the HAVE_UNISTD_H define if the
-  define MINGW32 is set, and I modified src/makefile.m32 and lib/makefile.m32
-  to set it.
-
-Version 7.0.5beta
-
-Daniel (14 June 2000)
-- Applied Luong Dinh Dung's comments about a few win32 compile problems.
-
-- Applied Björn Stenberg's suggested fix that turns the win32 stdout to
-  binary. It won't do it if the -B / --use-ascii option is used. That option
-  is now an extended version of the previous -B /--ftp--ascii. The flag was
-  already in use be the ldap as well so the new name fits pretty good. The
-  libcyrl CURLOPT_TRANSFERTEXT was also introduced as an alias to the now
-  obsolete CURLOPT_FTPASCII. Can't verify this fix myself as I have no win32
-  compiler around.
-
-Daniel (13 June 2000)
-- Luong Dinh Dung <dung at sch.bme.hu> found a problem in curl_easy_cleanup()
-  since it free()ed the main curl struct *twice*. This is now corrected.
-
-Daniel (9 June 2000)
-- Updated the RESOURCES file, added a README.win32 file.
-
-Daniel (8 June 2000)
-- So I finally added the progress callback to the *setopt() options and it
-  should work now. I don't have the energy to write any test program for it
-  right now.
-- Made the callback function typedefs public in curl/curl.h for comfort. Just
-  in case anyone wanna fiddle with such pointers.
-- Updated the curl_easy_setopt() man page accordingly.
-
-Version 7.0.4beta
-
-Daniel (2 June 2000)
-- I noticed that when doing Location: following, we lost custom headers in all
-  but the first request.
-- Removed the 'HttpPost' struct and moved the header stuff to the more generic
-  curl_slist.
-- Added some better slist-cleanups in src/main.c
-
-Version 7.0.3beta
-
-Daniel (31 May 2000)
-- So I discovered that I released the 7.0.2beta without it being able to
-  compile under Linux. gethostbyname_r() and gethostbyaddr_r() turned out to
-  feature a different amount of arguments on different systems so I had to add
-  a configure check for this and adjust the code slightly.
-
-Version 7.0.2beta
-
-Daniel (29 May 2000)
-- Corrected the bits.* assignments when using CURLOPT options that only
-  toggles one of those bits.
-
-- Applied the huge patches from David LeBlanc <dleblanc at qnx.com> that add
-  usage of the gethostbyname_r() and similar functions in case they're around,
-  since that make libcurl much better threadsafe in many systems (such as
-  solaris). I added the checks for these functions to the configure script.
-
-  I can't explain why, but the inet_ntoa_r() function did not appear in my
-  Solaris include files, I had to add my own include file for this for now.
-
-Daniel (22 May 2000)
-- Jörn Hartroth brought me fixes to make the win32 version compile properly as
-  well as a rename of the 'interface' field in the urldata struct, as it seems
-  to be reserved in some gcc versions!
-
-- Rich Gray struck back with yet some portability reports. Data General DG/UX
-  needed a little fix in lib/ldap.c since it doesn't have RTLD_GLOBAL defined.
-  More fixes are expected as a result of Richies very helpful work.
-
-Version 7.0.1beta
-
-Daniel (21 May 2000)
-- Updated lots of #defines, enums and variable type names in the library. No
-  more weird URG or URLTAG prefixes. All types and names should be curl-
-  prefixed to avoid name space clashes. The FLAGS-parameter to the former
-  curl_urlget() has been converted into a bunch of flags to use in separate
-  setopt calls. I'm still focusing on the easy-interface, as the curl tool is
-  now using that.
-
-- Bjorn Reese has provided me with an asynchronous name resolver that I plan
-  to use in upcoming versions of curl to be able to gracefully timeout name
-  lookups.
-
-Version 7.0beta
-
-Daniel (18 May 2000)
-- Introduced LIBCURL_VERSION_NUM to the curl.h include file to better allow
-  source codes to be dependent on the lib version. This define is now set to
-  a dexadecimal number, with 8 bits each for major number, minor number and
-  patch number. In other words, version 1.2.3 would make it 0x010203. It also
-  makes a larger number a newer version.
-
-Daniel (17 May 2000)
-- Martin Kammerhofer correctly pointed out several flaws in the FTP range
-  option. I corrected them.
-- Removed the win32 winsock init crap from the lib to the src/main.c file
-  in the application instead. They can't be in the lib, especially not for
-  multithreaded purposes.
-
-Daniel (16 May 2000)
-- Rewrote the src/main.c source to use the new easy-interface to libcurl 7.
-  There is still more work to do, but the first step is now taken.
-  <curl/easy.h> is the include file to use.
-
-Daniel (14 May 2000)
-- FTP URLs are now treated slightly different, more according to RFC 1738.
-- FTP sessions are now performed differently, with CWD commands to change
-  directory instead of RETR/STOR/LIST with the full path. Discussions with
-  Rich Gray made me notice these problems.
-- Janne Johansson discovered and corrected a buffer overflow in the
-  src/usrglob.c file.
-- I had to add a lib/strequal.c file for doing case insensitive string
-  compares on all platforms.
-
-Daniel (8 May 2000):
-- Been working lots on the new lib.
-- Together with Rich Gray, I've tried to adjust the configure script to work
-  better on the NCR MP-RAS Unix.
-
-Daniel (2 May 2000):
-- Albert Chin-A-Young pointed out that I had a few too many instructions in
-  configure.in that didn't do any good.
-
-Daniel (24 April 2000):
-- Added a new paragraph to the FAQ about what to do when configure can't
-  find OpenSSL even though it is installed. Supplied by Bob Allison
-
-Daniel (12 April 2000):
-- Started messing around big-time to convert the old library interface to a
-  better one...
-
-Daniel (8 April 2000):
-- Made the progress bar look better for file sizes between 9999 kilobytes
-  and 100 megabytes. They're now displayed XX.XM.
-- I also noticed that ftp fetches through HTTP proxies didn't add the user
-  agent string. It does now.
-- Habibie <habibie at MailandNews.com> supplied a pretty good way to build RPMs
-  on a Linux machine. It still a) requires me to be root to do it, b) leaves
-  the rpm packages laying at some odd place on my disk c) doesn't work to
-  build the ssl version of curl since I didn't install openssl from an rpm
-  package so now the rpm crap thinks I don't have openssl and refuses to build
-  a package that depends on ssl... Did I mention I don't get along with RPM?
-- Once again I received a bug report about autoconf not setting -L prior to -l
-  on the command line when checking for libs. In this case it made the native
-  cc compiler on Solaris 7 to fail the OpenSSL check. This has previously been
-  reported to cause problems on HP-UX and is a known flaw in autoconf 2.13. It
-  is a pity there's no newer release around...
-
-Daniel (4 April 2000):
-- Marco G. Salvagno supplied me with two fixes that
-  appearantly makes the OS/2 port work better with multiple URLs.
-
-Daniel (2 April 2000):
-- Another Location: fix. This time, when curl connected to a port and then
-  followed a location with an absolute URL to another port, it misbehaved.
-
-Daniel (27 March 2000):
-- H. Daphne Luong pointed out that curl was wrongly
-  messing up the proxy string when fetching a document through a http proxy,
-  which screwed up multiple fetches such as in location: followings.
-
-Daniel (23 March 2000):
-- Marco G. Salvagno corrected my badly applied patch he
-  actually already told me about!
-
-- H. Daphne Luong brought me a fix that now makes curl
-  ignore select() errors in the download if errno is EINTR, which turns out to
-  happen every now and then when using libcurl multi-threaded...
-
-Daniel (22 March 2000):
-- Wham Bang supplied a couple of win32 fixes. HAVE_UNAME
-  was accidentally #defined in config-win32.h, which it shouldn't have been.
-  The HAVE_UNISTD_H is not defined when compiling with the Makefile.vc6
-  makefile for MS VC++.
-
-Daniel (21 March 2000):
-- I removed the AC_PROG_INSTALL macro from configure.in, since it appears that
-  one of the AM_* macros searches for a BSD compatible install already. Janne
-  Johansson made me aware of this.
-
-Version 6.5.2
-
-Daniel (21 March 2000):
-- Paul Harrington quickly pointed out to me that 6.5.1
-  crashes hard. I upload 6.5.2 now as quickly as possible! The problem was
-  the -D adjustments in src/main.c.
-
-Version 6.5.1
-
-Daniel (20 March 2000):
-- An anonymous post on sourceforge correctly pointed out a possible buffer
-  overflow in the curl_unescape() function for URL conversions. The main
-  problem with this bug is that the ftp download uses that function and this
-  single- byte overflow could lead to very odd bugs (as one reported by Janne
-  Johansson).
-
-Daniel (19 March 2000):
-- Marco G. Salvagno supplied me with a series of patches
-  that now allows curl to get compiled on OS/2. It even includes a section in
-  the INSTALL file. Very nice job!
-
-Daniel (17 March 2000):
-- Wham Bang supplied a patch for the lib/Makefile.vc6
-  file. We still need some fixes for the config-win32.h since it appears that
-  VC++ and mingw32 have different opinions about (at least) unistd.h's
-  existence.
-
-Daniel (15 March 2000):
-- I modified the -D/--dump-header workings so that it doesn't write anything
-  to the file until it needs to. This way, you can actually use -b and -D
-  on the same file if you want repeated invokes to store and read the cookies
-  in that one single file.
-
-- Poked around in lots of texts. Added the BUGS file for bug reporting stuff.
-  Added the classic HTTP POST question to the FAQ, removed some #ifdef WIN32
-  stuff from the sources (they're covered by the config-win32.h now).
-
-- Pascal Gaudette fixed a missing ldap.c problem in the
-  Makefile.vc6 file. He also addressed a problem in src/config-win32.h.
-
-Daniel (14 March 2000):
-- Paul Harrington pointed out that the 'http_code' variable in the -w output
-  was never written. I fixed it now.
-
-- Janne Johansson reported the complaints that OpenBSD does
-  when getdate.c #includes malloc.h. It claims stdlib.h should be included
-  instead. I added #ifdef HAVE_MALLOC_H code in getdate.y and two checks in
-  the configure.in for malloc.h and stdlib.h.
-
-Version 6.5
-
-Daniel (13 March 2000):
-- <curl at spam.wolvesbane.net> pointed out that the way curl sent cookies in a
-  single line wasn't enjoyed by IIS4.0 servers. In my view, that is not what
-  the standards say, but I added a white space between the name/value pairs to
-  perhaps make them work better.
-
-- Added the perl check back in the configure.in again since the mkhelp.pl
-  script needs it!
-
-- Made some beautifications in the curl man page.
-
-Daniel (3 March 2000):
-- Jörn helped me update the config-win32.h files with HAVE_SETVBUF and
-  HAVE_STRDUP.
-
-Daniel (3 March 2000):
-- Uploaded the 6.5pre2 package.
-
-Daniel (2 March 2000):
-- Removed the perl-programs from the distribution, they never made many people
-  happy and I'll still keep them available on the web.
-
-- Added the -w and -N stuff to the man page. Documented the new progress meter
-  display in README.curl.
-
-- Jörn Hartroth, Chris <cbayliss at csc.come> and Ulf
-  Möller from the openssl development team helped bringing me the details for
-  fixing an OpenSSL usage flaw. It became apparent when they released openssl
-  0.9.5 since that barfed on curl's bad behavior (not seeding a random number
-  thing).
-
-- Yet another option: -N/--no-buffer disables buffering in the output stream.
-  Probably most useful for very slow transfers when you really want to get
-  every byte curl receives within some preferred time. Andrew <tmr at gci.net>
-  suggested this.
-
-- Damien Adant mailed me his fixes for making curl compile on Ultrix.
-
-Daniel (24 February 2000):
-- Applied Jörn Hartroth's fixes for config-win32.h and lib/Makefile.w32.
-
-  I should also make a note here, if nothing else to myself, that when using
-  the %-syntax for variables in DOS command prompts, you must use two %-
-  letters for each one since that is an escape letter there! Maybe I should
-  use another letter instead!
-
-- Added more variables to -w:
-
-  'http_code'
-  'time_namelookup'
-  'time_connect'
-  'time_pretransfer'
-  'url_effective'
-
-- Made -w@filename read the syntax from a file and -w@- reads the syntax from
-  stdin in the good old "standard" curl way.
-
-Daniel (22 February 2000):
-- Released a 6.5pre1 version to get some test and user feedback.
-
-Daniel (21 February 2000):
-
-- I added the -w/--write-out flag and some variables to go with it. -w is a
-  single string, whatever you enter there will be written out when curl has
-  completed a successful request. There are some variable substitutions and
-  they are specified as '%{variable}' (without the quotes). Variables that
-  exist as of this moment are:
-
-        total_time     - total transfer time in seconds (with 2 decimals)
-        size_download  - total downloaded amount of bytes
-        size_upload    - total uploaded amount of bytes
-        speed_download - the average speed of the entire download
-        speed_upload   - the average speed of the entire upload
-
-  I will of course add more variables, but I need input on these and others.
-
-- It struck me that the -# progress bar will be hard to just apply on the new
-  progress bar concept. I need some feedback on this before that'll get re-
-  introduced! :-/
-
-Daniel (16 February 2000):
-- Jörn Hartroth brought me some fixes for the progress meter and I continued
-  working on it. It seems to work for http download, http post, ftp download
-  and ftp upload. It should be a pretty good test it works generally good.
-
-- Still need to add the -# progress bar into the new style progress interface.
-
-- Gonna have a go at my new output option parameter next.
-
-Daniel (15 February 2000):
-- The progress meter stuff is slowly taking place. There's more left before it
-  is working ok and everything is tested, but we're reaching there. Slowly!
-
-Daniel (11 February 2000):
-- Paul Marquis fixed the config file parsing of curl to
-  deal with any-length lines, removing the previous limit of 4K.
-
-- Eetu Ojanen's suggestion of supporting the @-style for -b
-  is implemented. Now -b@<filename> works as well as the old style. -b@- also
-  similarly reads the cookies from stdin.
-
-- Reminder: -D should not write to the file until it needs to, in the same way
-  -o does. That would enable curl to use -b and -D on the same file...
-
-- Ellis Pritchard made getdate.y work for MacOS X.
-
-- Paul Harrington helped me out finding the crash in the
-  cookie parser. He also pointed out curl's habit of sending empty cookies to
-  the server.
-
-Daniel (8 February 2000):
- - Ron Zapp corrected a problem in src/urlglob.c that
-   prevented curl from getting compiled on sunos 4. The problem had to do
-   with the difference in sprintf() return code types.
-
- - Transfer() should now be able to download and upload simultaneously. Let's
-   do some progress meter fixes later this week.
-
-Daniel (31 January 2000):
- - Paul Harrington found another core dump in the cookie
-   parser. Curl doesn't properly recognize the 'version' keyword and I think
-   that is what caused this. I need to refresh some specs on cookies and see
-   what else curl lacks to improve this a bit more once and for all.
-
-   RFC 2109 clearly specifies how cookies should be dealt with when they are
-   compliant with that spec. I don't think many servers are though...
-
- - Mark W. Eichin found that while curl is uploading a form
-   to a web site, it doesn't read incoming data why it'll hang after a while
-   since the socket "pipe" becomes full.
-
-   It took me two hours to rewrite Download() and Upload() into the new
-   single function Transfer(). It even seems to work! More testing is required
-   of course... I should get the header-sending together in a kind of queue
-   and let them get "uploaded" in Transfer() as well.
-
- - Zhibiao Wu pointed out a curl bug in the location: area,
-   although I did not get a reproducible way to do this why I have to wait
-   with fixing anything.
-
- - Bob Schader suggested I should implement resume
-   support for the HTTP PUT operation, and as I think it is a valid suggestion
-   I'll work on it.
-
-Daniel (25 January 2000):
- - M Travis Obenhaus pointed out a manual mixup with -y and -Y that was
-   corrected.
-
- - Jens Schleusener pointed out a problem to compile
-   curl on AIX 4.1.4 and gave me a solution. This problem was already fixed
-   by Jörn's recent #include modifications!
-
-Daniel (19 January 2000):
- - Oskar Liljeblad pointed out and corrected a problem
-   in the Location: following system that made curl following a location: to a
-   different protocol to fail.
-
-   At January 31st I re-considered this fix and the surrounding source code. I
-   could not really see that the patch did any difference, why I removed it
-   again for further research and debugging. (It disabled location: following
-   on server not running on default ports.)
-
- - Jörn Hartroth brought a fix that once again
-   made it possible to select progress bar.
-
- - Jörn also fixed a few include problems.
-
-Version 6.4
-
-Daniel (17 January 2000):
- - Based on suggestions from Björn Stenberg, I made the
-   progress deal better with larger files and added a "Time" field which shows
-   the time spent on the download so far.
- - I'm now using the CVS repository on sourceforge.net, which also allows web
-   browsing. See http://curl.haxx.nu.
-
-Daniel (10 January 2000):
- - Renumbered some enums in curl/curl.h since tag number 35 was used twice!
- - Added "postquote" support to the ftp section that enables post-ftp-transfer
-   quote commands.
- - Now made the -Q/--quote parameter recognize '-' as a prefix, which means
-   that command will be issued AFTER a successful ftp transfer. This can of
-   course be used to delete or rename a file after it has been uploaded or
-   downloaded. Use your imagination! ;-)
- - Since I do the main development on solaris 2.6 now, I had to download and
-   install GNU groff to generate the hugehelp.c file. The solaris nroff cores
-   on the man page! So, in order to make the solaris configure script find a
-   better result I made gnroff get checked prior to the regular nroff.
- - Added all the curl exit codes to the man page.
- - Jim Gallagher properly tracked down a bug in autoconf
-   2.13. The AC_CHECK_LIB() macro wrongfully uses the -l flag before the -L
-   flag to 'ld' which causes the HP-UX 10.20 flavour to fail on all libchecks
-   and therefore you can't make the configure script find the openssl libs!
-
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/config.h.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/config.h.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/config.h.in	2001-05-31 14:25:51.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/config.h.in	2001-08-20 14:55:48.000000000 +0800
@@ -245,12 +245,15 @@
 /* Define if you have the `socket' function. */
 #undef HAVE_SOCKET
 
 /* Define if you have the <ssl.h> header file. */
 #undef HAVE_SSL_H
 
+/* Define if you have the <stdint.h> header file. */
+#undef HAVE_STDINT_H
+
 /* Define if you have the <stdlib.h> header file. */
 #undef HAVE_STDLIB_H
 
 /* Define if you have the `strcasecmp' function. */
 #undef HAVE_STRCASECMP
 
@@ -369,11 +372,11 @@
 /* Define to empty if `const' does not conform to ANSI C. */
 #undef const
 
 /* Define to `unsigned' if <sys/types.h> does not define. */
 #undef size_t
 
-/* Define to `int' if <sys/types.h> does not define. */
+/* type to use in place of socklen_t if not defined */
 #undef socklen_t
 
 /* Define to `int' if <sys/types.h> does not define. */
 #undef ssize_t
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1: config-riscos.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/configure	2001-05-31 16:59:01.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/configure	2001-08-20 15:19:26.000000000 +0800
@@ -1,9 +1,9 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by Autoconf 2.50.
+# Generated by Autoconf 2.52.
 #
 # Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
 # Free Software Foundation, Inc.
 # This configure script is free software; the Free Software Foundation
 # gives unlimited permission to copy, distribute and modify it.
 
@@ -159,12 +159,25 @@
 # the Makefile, instead of quoting the original, which is used later.
 ECHO=$echo
 if test "X$ECHO" = "X$CONFIG_SHELL $0 --fallback-echo"; then
    ECHO="$CONFIG_SHELL \\\$\$0 --fallback-echo"
 fi
 
+# Avoid depending upon Character Ranges.
+as_cr_letters='abcdefghijklmnopqrstuvwxyz'
+as_cr_LETTERS='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
+as_cr_Letters=$as_cr_letters$as_cr_LETTERS
+as_cr_digits='0123456789'
+as_cr_alnum=$as_cr_Letters$as_cr_digits
+
+# Sed expression to map a string onto a valid variable name.
+as_tr_sh="sed y%*+%pp%;s%[^_$as_cr_alnum]%_%g"
+
+# Sed expression to map a string onto a valid CPP name.
+as_tr_cpp="sed y%*$as_cr_letters%P$as_cr_LETTERS%;s%[^_$as_cr_alnum]%_%g"
+
 # Be Bourne compatible
 if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then
   emulate sh
   NULLCMD=:
 elif test -n "${BASH_VERSION+set}" && (set -o posix) >/dev/null 2>&1; then
   set -o posix
@@ -243,28 +256,22 @@
 
 # Maximum number of lines to put in a shell here document.
 # This variable seems obsolete.  It should probably be removed, and
 # only ac_max_sed_lines should be used.
 : ${ac_max_here_lines=38}
 
-# Avoid depending upon Character Ranges.
-ac_cr_az='abcdefghijklmnopqrstuvwxyz'
-ac_cr_AZ='ABCDEFGHIJKLMNOPQRSTUVWXYZ'
-ac_cr_09='0123456789'
-ac_cr_alnum=$ac_cr_az$ac_cr_AZ$ac_cr_09
-
-# Sed expression to map a string onto a valid sh and CPP variable names.
-ac_tr_sh="sed y%*+%pp%;s%[^_$ac_cr_alnum]%_%g"
-ac_tr_cpp="sed y%*$ac_cr_az%P$ac_cr_AZ%;s%[^_$ac_cr_alnum]%_%g"
-
 ac_unique_file="lib/urldata.h"
 # Factoring default headers for most tests.
 ac_includes_default="\
 #include <stdio.h>
-#include <sys/types.h>
-#include <sys/stat.h>
+#if HAVE_SYS_TYPES_H
+# include <sys/types.h>
+#endif
+#if HAVE_SYS_STAT_H
+# include <sys/stat.h>
+#endif
 #if STDC_HEADERS
 # include <stdlib.h>
 # include <stddef.h>
 #else
 # if HAVE_STDLIB_H
 #  include <stdlib.h>
@@ -272,19 +279,22 @@
 #endif
 #if HAVE_STRING_H
 # if !STDC_HEADERS && HAVE_MEMORY_H
 #  include <memory.h>
 # endif
 # include <string.h>
-#else
-# if HAVE_STRINGS_H
-#  include <strings.h>
-# endif
+#endif
+#if HAVE_STRINGS_H
+# include <strings.h>
 #endif
 #if HAVE_INTTYPES_H
 # include <inttypes.h>
+#else
+# if HAVE_STDINT_H
+#  include <stdint.h>
+# endif
 #endif
 #if HAVE_UNISTD_H
 # include <unistd.h>
 #endif"
 
 # Initialize some variables set by options.
@@ -374,22 +384,22 @@
   | --da=*)
     datadir=$ac_optarg ;;
 
   -disable-* | --disable-*)
     ac_feature=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_feature" : ".*[^-_$ac_cr_alnum]" >/dev/null &&
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
       { echo "$as_me: error: invalid feature name: $ac_feature" >&2
    { (exit 1); exit 1; }; }
     ac_feature=`echo $ac_feature | sed 's/-/_/g'`
     eval "enable_$ac_feature=no" ;;
 
   -enable-* | --enable-*)
     ac_feature=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_feature" : ".*[^-_$ac_cr_alnum]" >/dev/null &&
+    expr "x$ac_feature" : ".*[^-_$as_cr_alnum]" >/dev/null &&
       { echo "$as_me: error: invalid feature name: $ac_feature" >&2
    { (exit 1); exit 1; }; }
     ac_feature=`echo $ac_feature | sed 's/-/_/g'`
     case $ac_option in
       *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
       *) ac_optarg=yes ;;
@@ -565,26 +575,26 @@
   -version | --version | --versio | --versi | --vers | -V)
     ac_init_version=: ;;
 
   -with-* | --with-*)
     ac_package=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_package" : ".*[^-_$ac_cr_alnum]" >/dev/null &&
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
       { echo "$as_me: error: invalid package name: $ac_package" >&2
    { (exit 1); exit 1; }; }
     ac_package=`echo $ac_package| sed 's/-/_/g'`
     case $ac_option in
       *=*) ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`;;
       *) ac_optarg=yes ;;
     esac
     eval "with_$ac_package='$ac_optarg'" ;;
 
   -without-* | --without-*)
     ac_package=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_package" : ".*[^-_$ac_cr_alnum]" >/dev/null &&
+    expr "x$ac_package" : ".*[^-_$as_cr_alnum]" >/dev/null &&
       { echo "$as_me: error: invalid package name: $ac_package" >&2
    { (exit 1); exit 1; }; }
     ac_package=`echo $ac_package | sed 's/-/_/g'`
     eval "with_$ac_package=no" ;;
 
   --x)
@@ -610,23 +620,23 @@
    { (exit 1); exit 1; }; }
     ;;
 
   *=*)
     ac_envvar=`expr "x$ac_option" : 'x\([^=]*\)='`
     # Reject names that are not valid shell variable names.
-    expr "x$ac_envvar" : ".*[^_$ac_cr_alnum]" >/dev/null &&
+    expr "x$ac_envvar" : ".*[^_$as_cr_alnum]" >/dev/null &&
       { echo "$as_me: error: invalid variable name: $ac_envvar" >&2
    { (exit 1); exit 1; }; }
     ac_optarg=`echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"`
     eval "$ac_envvar='$ac_optarg'"
     export $ac_envvar ;;
 
   *)
     # FIXME: should be removed in autoconf 3.0.
     echo "$as_me: WARNING: you should use --build, --host, --target" >&2
-    expr "x$ac_option" : ".*[^-._$ac_cr_alnum]" >/dev/null &&
+    expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
       echo "$as_me: WARNING: invalid host type: $ac_option" >&2
     : ${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}
     ;;
 
   esac
 done
@@ -635,20 +645,29 @@
   ac_option=--`echo $ac_prev | sed 's/_/-/g'`
   { echo "$as_me: error: missing argument to $ac_option" >&2
    { (exit 1); exit 1; }; }
 fi
 
 # Be sure to have absolute paths.
+for ac_var in exec_prefix prefix
+do
+  eval ac_val=$`echo $ac_var`
+  case $ac_val in
+    [\\/$]* | ?:[\\/]* | NONE | '' ) ;;
+    *)  { echo "$as_me: error: expected an absolute path for --$ac_var: $ac_val" >&2
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
+# Be sure to have absolute paths.
 for ac_var in bindir sbindir libexecdir datadir sysconfdir sharedstatedir \
-              localstatedir libdir includedir oldincludedir infodir mandir \
-              exec_prefix prefix
+              localstatedir libdir includedir oldincludedir infodir mandir
 do
   eval ac_val=$`echo $ac_var`
   case $ac_val in
     [\\/$]* | ?:[\\/]* ) ;;
-    NONE ) ;;
     *)  { echo "$as_me: error: expected an absolute path for --$ac_var: $ac_val" >&2
    { (exit 1); exit 1; }; };;
   esac
 done
 
 # There might be people who depend on the old broken behavior: `$host'
@@ -897,13 +916,13 @@
 exec 5>config.log
 cat >&5 <<EOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
 It was created by $as_me, which was
-generated by GNU Autoconf 2.50.  Invocation command line was
+generated by GNU Autoconf 2.52.  Invocation command line was
 
   $ $0 $@
 
 EOF
 {
 cat <<_ASUNAME
@@ -976,17 +995,17 @@
 {
   (set) 2>&1 |
     case `(ac_space='"'"' '"'"'; set | grep ac_space) 2>&1` in
     *ac_space=\ *)
       sed -n \
         "s/'"'"'/'"'"'\\\\'"'"''"'"'/g;
-    	  s/^\\([_$ac_cr_alnum]*_cv_[_$ac_cr_alnum]*\\)=\\(.*\\)/\\1='"'"'\\2'"'"'/p"
+    	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='"'"'\\2'"'"'/p"
       ;;
     *)
       sed -n \
-        "s/^\\([_$ac_cr_alnum]*_cv_[_$ac_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+        "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
       ;;
     esac;
 } >&5
   sed "/^$/d" confdefs.h >conftest.log
   if test -s conftest.log; then
     echo >&5
@@ -1001,13 +1020,13 @@
     echo "$as_me: caught signal $ac_signal" >&5
   echo "$as_me: exit $exit_status" >&5
   rm -rf conftest* confdefs* core core.* *.core conf$$* $ac_clean_files &&
     exit $exit_status
      ' 0
 for ac_signal in 1 2 13 15; do
-  trap 'ac_status=$?; ac_signal='$ac_signal'; { (exit $ac_status); exit $ac_status; }' $ac_signal
+  trap 'ac_signal='$ac_signal'; { (exit 1); exit 1; }' $ac_signal
 done
 ac_signal=0
 
 # confdefs.h avoids OS command line length limits that DEFS can exceed.
 rm -rf conftest* confdefs.h
 # AIX cpp loses on an empty file, so make sure it contains at least a newline.
@@ -1021,72 +1040,85 @@
   else
     CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
   fi
 fi
 for ac_site_file in $CONFIG_SITE; do
   if test -r "$ac_site_file"; then
-    { echo "$as_me:1027: loading site script $ac_site_file" >&5
+    { echo "$as_me:1046: loading site script $ac_site_file" >&5
 echo "$as_me: loading site script $ac_site_file" >&6;}
     cat "$ac_site_file" >&5
     . "$ac_site_file"
   fi
 done
 
 if test -r "$cache_file"; then
   # Some versions of bash will fail to source /dev/null (special
   # files actually), so we avoid doing that.
   if test -f "$cache_file"; then
-    { echo "$as_me:1038: loading cache $cache_file" >&5
+    { echo "$as_me:1057: loading cache $cache_file" >&5
 echo "$as_me: loading cache $cache_file" >&6;}
     case $cache_file in
       [\\/]* | ?:[\\/]* ) . $cache_file;;
       *)                      . ./$cache_file;;
     esac
   fi
 else
-  { echo "$as_me:1046: creating cache $cache_file" >&5
+  { echo "$as_me:1065: creating cache $cache_file" >&5
 echo "$as_me: creating cache $cache_file" >&6;}
   >$cache_file
 fi
 
 # Check that the precious variables saved in the cache have kept the same
 # value.
-ac_suggest_removing_cache=false
+ac_cache_corrupted=false
 for ac_var in `(set) 2>&1 |
                sed -n 's/^ac_env_\([a-zA-Z_0-9]*\)_set=.*/\1/p'`; do
   eval ac_old_set=\$ac_cv_env_${ac_var}_set
   eval ac_new_set=\$ac_env_${ac_var}_set
   eval ac_old_val="\$ac_cv_env_${ac_var}_value"
   eval ac_new_val="\$ac_env_${ac_var}_value"
   case $ac_old_set,$ac_new_set in
     set,)
-      { echo "$as_me:1062: WARNING: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
-echo "$as_me: WARNING: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
-      ac_suggest_removing_cache=: ;;
+      { echo "$as_me:1081: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
     ,set)
-      { echo "$as_me:1066: WARNING: \`$ac_var' was not set in the previous run" >&5
-echo "$as_me: WARNING: \`$ac_var' was not set in the previous run" >&2;}
-      ac_suggest_removing_cache=: ;;
+      { echo "$as_me:1085: error: \`$ac_var' was not set in the previous run" >&5
+echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+      ac_cache_corrupted=: ;;
     ,);;
     *)
       if test "x$ac_old_val" != "x$ac_new_val"; then
-        { echo "$as_me:1072: WARNING: \`$ac_var' has changed since the previous run:" >&5
-echo "$as_me: WARNING: \`$ac_var' has changed since the previous run:" >&2;}
-        { echo "$as_me:1074: WARNING:   former value:  $ac_old_val" >&5
-echo "$as_me: WARNING:   former value:  $ac_old_val" >&2;}
-        { echo "$as_me:1076: WARNING:   current value: $ac_new_val" >&5
-echo "$as_me: WARNING:   current value: $ac_new_val" >&2;}
-        ac_suggest_removing_cache=:
+        { echo "$as_me:1091: error: \`$ac_var' has changed since the previous run:" >&5
+echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+        { echo "$as_me:1093:   former value:  $ac_old_val" >&5
+echo "$as_me:   former value:  $ac_old_val" >&2;}
+        { echo "$as_me:1095:   current value: $ac_new_val" >&5
+echo "$as_me:   current value: $ac_new_val" >&2;}
+        ac_cache_corrupted=:
       fi;;
   esac
+  # Pass precious variables to config.status.  It doesn't matter if
+  # we pass some twice (in addition to the command line arguments).
+  if test "$ac_new_set" = set; then
+    case $ac_new_val in
+    *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?\"\']*)
+      ac_arg=$ac_var=`echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"`
+      ac_configure_args="$ac_configure_args '$ac_arg'"
+      ;;
+    *) ac_configure_args="$ac_configure_args $ac_var=$ac_new_val"
+       ;;
+    esac
+  fi
 done
-if $ac_suggest_removing_cache; then
-  { echo "$as_me:1083: WARNING: changes in the environment can compromise the build" >&5
-echo "$as_me: WARNING: changes in the environment can compromise the build" >&2;}
-  { echo "$as_me:1085: WARNING: consider removing $cache_file and starting over" >&5
-echo "$as_me: WARNING: consider removing $cache_file and starting over" >&2;}
+if $ac_cache_corrupted; then
+  { echo "$as_me:1114: error: changes in the environment can compromise the build" >&5
+echo "$as_me: error: changes in the environment can compromise the build" >&2;}
+  { { echo "$as_me:1116: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&5
+echo "$as_me: error: run \`make distclean' and/or \`rm $cache_file' and start over" >&2;}
+   { (exit 1); exit 1; }; }
 fi
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
@@ -1098,16 +1130,16 @@
   *c*,*  ) ECHO_N=-n ECHO_C= ECHO_T= ;;
   *)      ECHO_N= ECHO_C='\c' ECHO_T= ;;
 esac
 echo "#! $SHELL" >conftest.sh
 echo  "exit 0"   >>conftest.sh
 chmod +x conftest.sh
-if { (echo "$as_me:1104: PATH=\".;.\"; conftest.sh") >&5
+if { (echo "$as_me:1136: PATH=\".;.\"; conftest.sh") >&5
   (PATH=".;."; conftest.sh) 2>&5
   ac_status=$?
-  echo "$as_me:1107: \$? = $ac_status" >&5
+  echo "$as_me:1139: \$? = $ac_status" >&5
   (exit $ac_status); }; then
   ac_path_separator=';'
 else
   ac_path_separator=:
 fi
 PATH_SEPARATOR="$ac_path_separator"
@@ -1132,13 +1164,13 @@
     ac_aux_dir=$ac_dir
     ac_install_sh="$ac_aux_dir/shtool install -c"
     break
   fi
 done
 if test -z "$ac_aux_dir"; then
-  { { echo "$as_me:1138: error: cannot find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." >&5
+  { { echo "$as_me:1170: error: cannot find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." >&5
 echo "$as_me: error: cannot find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." >&2;}
    { (exit 1); exit 1; }; }
 fi
 ac_config_guess="$SHELL $ac_aux_dir/config.guess"
 ac_config_sub="$SHELL $ac_aux_dir/config.sub"
 ac_configure="$SHELL $ac_aux_dir/configure" # This should be Cygnus configure.
@@ -1152,13 +1184,13 @@
 # AIX /bin/install
 # AmigaOS /C/install, which installs bootblocks on floppy discs
 # AIX 4 /usr/bin/installbsd, which doesn't work without a -g flag
 # AFS /usr/afsws/bin/install, which mishandles nonexistent args
 # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
 # ./install, which can be erroneously created by make from ./install.sh.
-echo "$as_me:1158: checking for a BSD compatible install" >&5
+echo "$as_me:1190: checking for a BSD compatible install" >&5
 echo $ECHO_N "checking for a BSD compatible install... $ECHO_C" >&6
 if test -z "$INSTALL"; then
 if test "${ac_cv_path_install+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
     ac_save_IFS=$IFS; IFS=$ac_path_separator
@@ -1201,24 +1233,24 @@
     # path for INSTALL within a source directory, because that will
     # break other packages using the cache if that directory is
     # removed, or if the path is relative.
     INSTALL=$ac_install_sh
   fi
 fi
-echo "$as_me:1207: result: $INSTALL" >&5
+echo "$as_me:1239: result: $INSTALL" >&5
 echo "${ECHO_T}$INSTALL" >&6
 
 # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
 # It thinks the first close brace ends the variable substitution.
 test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
 
 test -z "$INSTALL_SCRIPT" && INSTALL_SCRIPT='${INSTALL}'
 
 test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
 
-echo "$as_me:1218: checking whether build environment is sane" >&5
+echo "$as_me:1250: checking whether build environment is sane" >&5
 echo $ECHO_N "checking whether build environment is sane... $ECHO_C" >&6
 # Just in case
 sleep 1
 echo timestamp > conftestfile
 # Do `set' in a subshell so we don't clobber the current shell's
 # arguments.  Must try -L first in case configure is actually a
@@ -1235,54 +1267,48 @@
       && test "$*" != "X conftestfile $srcdir/configure"; then
 
       # If neither matched, then we have a broken ls.  This can happen
       # if, for instance, CONFIG_SHELL is bash and it inherits a
       # broken ls alias from the environment.  This has actually
       # happened.  Such a system could not be considered "sane".
-      { { echo "$as_me:1241: error: ls -t appears to fail.  Make sure there is not a broken
+      { { echo "$as_me:1273: error: ls -t appears to fail.  Make sure there is not a broken
 alias in your environment" >&5
 echo "$as_me: error: ls -t appears to fail.  Make sure there is not a broken
 alias in your environment" >&2;}
    { (exit 1); exit 1; }; }
    fi
 
    test "$2" = conftestfile
    )
 then
    # Ok.
    :
 else
-   { { echo "$as_me:1254: error: newly created file is older than distributed files!
+   { { echo "$as_me:1286: error: newly created file is older than distributed files!
 Check your system clock" >&5
 echo "$as_me: error: newly created file is older than distributed files!
 Check your system clock" >&2;}
    { (exit 1); exit 1; }; }
 fi
 rm -f conftest*
-echo "$as_me:1261: result: yes" >&5
+echo "$as_me:1293: result: yes" >&5
 echo "${ECHO_T}yes" >&6
-if test "$program_transform_name" = s,x,x,; then
-  program_transform_name=
-else
-  # Double any \ or $.  echo might interpret backslashes.
-  cat <<\EOF >conftest.sed
-s,\\,\\\\,g; s,\$,$$,g
-EOF
-  program_transform_name=`echo $program_transform_name | sed -f conftest.sed`
-  rm -f conftest.sed
-fi
 test "$program_prefix" != NONE &&
-  program_transform_name="s,^,${program_prefix},;$program_transform_name"
+  program_transform_name="s,^,$program_prefix,;$program_transform_name"
 # Use a double $ so make ignores it.
 test "$program_suffix" != NONE &&
-  program_transform_name="s,\$\$,${program_suffix},;$program_transform_name"
-
-# sed with no file args requires a program.
-test -z "$program_transform_name" && program_transform_name="s,x,x,"
+  program_transform_name="s,\$,$program_suffix,;$program_transform_name"
+# Double any \ or $.  echo might interpret backslashes.
+# By default was `s,x,x', remove it if useless.
+cat <<\_ACEOF >conftest.sed
+s/[\\$]/&&/g;s/;s,x,x,$//
+_ACEOF
+program_transform_name=`echo $program_transform_name | sed -f conftest.sed`
+rm conftest.sed
 
-echo "$as_me:1282: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo "$as_me:1308: checking whether ${MAKE-make} sets \${MAKE}" >&5
 echo $ECHO_N "checking whether ${MAKE-make} sets \${MAKE}... $ECHO_C" >&6
 set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y,./+-,__p_,'`
 if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.make <<\EOF
@@ -1296,27 +1322,27 @@
 else
   eval ac_cv_prog_make_${ac_make}_set=no
 fi
 rm -f conftest.make
 fi
 if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
-  echo "$as_me:1302: result: yes" >&5
+  echo "$as_me:1328: result: yes" >&5
 echo "${ECHO_T}yes" >&6
   SET_MAKE=
 else
-  echo "$as_me:1306: result: no" >&5
+  echo "$as_me:1332: result: no" >&5
 echo "${ECHO_T}no" >&6
   SET_MAKE="MAKE=${MAKE-make}"
 fi
 
 PACKAGE=curl
 
 VERSION=$VERSION
 
 if test "`cd $srcdir && pwd`" != "`pwd`" && test -f $srcdir/config.status; then
-  { { echo "$as_me:1316: error: source directory already configured; run \"make distclean\" there first" >&5
+  { { echo "$as_me:1342: error: source directory already configured; run \"make distclean\" there first" >&5
 echo "$as_me: error: source directory already configured; run \"make distclean\" there first" >&2;}
    { (exit 1); exit 1; }; }
 fi
 
 cat >>confdefs.h <<EOF
 #define PACKAGE "$PACKAGE"
@@ -1324,139 +1350,139 @@
 
 cat >>confdefs.h <<EOF
 #define VERSION "$VERSION"
 EOF
 
 missing_dir=`cd $ac_aux_dir && pwd`
-echo "$as_me:1330: checking for working aclocal" >&5
+echo "$as_me:1356: checking for working aclocal" >&5
 echo $ECHO_N "checking for working aclocal... $ECHO_C" >&6
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (aclocal --version) < /dev/null > /dev/null 2>&1; then
    ACLOCAL=aclocal
-   echo "$as_me:1337: result: found" >&5
+   echo "$as_me:1363: result: found" >&5
 echo "${ECHO_T}found" >&6
 else
    ACLOCAL="$missing_dir/missing aclocal"
-   echo "$as_me:1341: result: missing" >&5
+   echo "$as_me:1367: result: missing" >&5
 echo "${ECHO_T}missing" >&6
 fi
 
-echo "$as_me:1345: checking for working autoconf" >&5
+echo "$as_me:1371: checking for working autoconf" >&5
 echo $ECHO_N "checking for working autoconf... $ECHO_C" >&6
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (autoconf --version) < /dev/null > /dev/null 2>&1; then
    AUTOCONF=autoconf
-   echo "$as_me:1352: result: found" >&5
+   echo "$as_me:1378: result: found" >&5
 echo "${ECHO_T}found" >&6
 else
    AUTOCONF="$missing_dir/missing autoconf"
-   echo "$as_me:1356: result: missing" >&5
+   echo "$as_me:1382: result: missing" >&5
 echo "${ECHO_T}missing" >&6
 fi
 
-echo "$as_me:1360: checking for working automake" >&5
+echo "$as_me:1386: checking for working automake" >&5
 echo $ECHO_N "checking for working automake... $ECHO_C" >&6
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (automake --version) < /dev/null > /dev/null 2>&1; then
    AUTOMAKE=automake
-   echo "$as_me:1367: result: found" >&5
+   echo "$as_me:1393: result: found" >&5
 echo "${ECHO_T}found" >&6
 else
    AUTOMAKE="$missing_dir/missing automake"
-   echo "$as_me:1371: result: missing" >&5
+   echo "$as_me:1397: result: missing" >&5
 echo "${ECHO_T}missing" >&6
 fi
 
-echo "$as_me:1375: checking for working autoheader" >&5
+echo "$as_me:1401: checking for working autoheader" >&5
 echo $ECHO_N "checking for working autoheader... $ECHO_C" >&6
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (autoheader --version) < /dev/null > /dev/null 2>&1; then
    AUTOHEADER=autoheader
-   echo "$as_me:1382: result: found" >&5
+   echo "$as_me:1408: result: found" >&5
 echo "${ECHO_T}found" >&6
 else
    AUTOHEADER="$missing_dir/missing autoheader"
-   echo "$as_me:1386: result: missing" >&5
+   echo "$as_me:1412: result: missing" >&5
 echo "${ECHO_T}missing" >&6
 fi
 
-echo "$as_me:1390: checking for working makeinfo" >&5
+echo "$as_me:1416: checking for working makeinfo" >&5
 echo $ECHO_N "checking for working makeinfo... $ECHO_C" >&6
 # Run test in a subshell; some versions of sh will print an error if
 # an executable is not found, even if stderr is redirected.
 # Redirect stdin to placate older versions of autoconf.  Sigh.
 if (makeinfo --version) < /dev/null > /dev/null 2>&1; then
    MAKEINFO=makeinfo
-   echo "$as_me:1397: result: found" >&5
+   echo "$as_me:1423: result: found" >&5
 echo "${ECHO_T}found" >&6
 else
    MAKEINFO="$missing_dir/missing makeinfo"
-   echo "$as_me:1401: result: missing" >&5
+   echo "$as_me:1427: result: missing" >&5
 echo "${ECHO_T}missing" >&6
 fi
 
 VERSIONNUM=`sed -ne 's/^#define LIBCURL_VERSION_NUM 0x\(.*\)/\1/p' ${srcdir}/include/curl/curl.h`
 
 PKGADD_PKG="HAXXcurl"
 PKGADD_NAME="cURL - a client that groks URLs"
 PKGADD_VENDOR="curl.haxx.se"
 
 # Make sure we can run config.sub.
 $ac_config_sub sun4 >/dev/null 2>&1 ||
-  { { echo "$as_me:1413: error: cannot run $ac_config_sub" >&5
+  { { echo "$as_me:1439: error: cannot run $ac_config_sub" >&5
 echo "$as_me: error: cannot run $ac_config_sub" >&2;}
    { (exit 1); exit 1; }; }
 
-echo "$as_me:1417: checking build system type" >&5
+echo "$as_me:1443: checking build system type" >&5
 echo $ECHO_N "checking build system type... $ECHO_C" >&6
 if test "${ac_cv_build+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_cv_build_alias=$build_alias
 test -z "$ac_cv_build_alias" &&
   ac_cv_build_alias=`$ac_config_guess`
 test -z "$ac_cv_build_alias" &&
-  { { echo "$as_me:1426: error: cannot guess build type; you must specify one" >&5
+  { { echo "$as_me:1452: error: cannot guess build type; you must specify one" >&5
 echo "$as_me: error: cannot guess build type; you must specify one" >&2;}
    { (exit 1); exit 1; }; }
 ac_cv_build=`$ac_config_sub $ac_cv_build_alias` ||
-  { { echo "$as_me:1430: error: $ac_config_sub $ac_cv_build_alias failed." >&5
+  { { echo "$as_me:1456: error: $ac_config_sub $ac_cv_build_alias failed." >&5
 echo "$as_me: error: $ac_config_sub $ac_cv_build_alias failed." >&2;}
    { (exit 1); exit 1; }; }
 
 fi
-echo "$as_me:1435: result: $ac_cv_build" >&5
+echo "$as_me:1461: result: $ac_cv_build" >&5
 echo "${ECHO_T}$ac_cv_build" >&6
 build=$ac_cv_build
 build_cpu=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
 build_vendor=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
 build_os=`echo $ac_cv_build | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
 
-echo "$as_me:1442: checking host system type" >&5
+echo "$as_me:1468: checking host system type" >&5
 echo $ECHO_N "checking host system type... $ECHO_C" >&6
 if test "${ac_cv_host+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_cv_host_alias=$host_alias
 test -z "$ac_cv_host_alias" &&
   ac_cv_host_alias=$ac_cv_build_alias
 ac_cv_host=`$ac_config_sub $ac_cv_host_alias` ||
-  { { echo "$as_me:1451: error: $ac_config_sub $ac_cv_host_alias failed" >&5
+  { { echo "$as_me:1477: error: $ac_config_sub $ac_cv_host_alias failed" >&5
 echo "$as_me: error: $ac_config_sub $ac_cv_host_alias failed" >&2;}
    { (exit 1); exit 1; }; }
 
 fi
-echo "$as_me:1456: result: $ac_cv_host" >&5
+echo "$as_me:1482: result: $ac_cv_host" >&5
 echo "${ECHO_T}$ac_cv_host" >&6
 host=$ac_cv_host
 host_cpu=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\1/'`
 host_vendor=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\2/'`
 host_os=`echo $ac_cv_host | sed 's/^\([^-]*\)-\([^-]*\)-\(.*\)$/\3/'`
 
@@ -1469,13 +1495,13 @@
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
-echo "$as_me:1475: checking for $ac_word" >&5
+echo "$as_me:1501: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
@@ -1484,33 +1510,33 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_CC="${ac_tool_prefix}gcc"
-echo "$as_me:1490: found $ac_dir/$ac_word" >&5
+echo "$as_me:1516: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$as_me:1498: result: $CC" >&5
+  echo "$as_me:1524: result: $CC" >&5
 echo "${ECHO_T}$CC" >&6
 else
-  echo "$as_me:1501: result: no" >&5
+  echo "$as_me:1527: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
 if test -z "$ac_cv_prog_CC"; then
   ac_ct_CC=$CC
   # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
-echo "$as_me:1510: checking for $ac_word" >&5
+echo "$as_me:1536: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
@@ -1519,37 +1545,37 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_ac_ct_CC="gcc"
-echo "$as_me:1525: found $ac_dir/$ac_word" >&5
+echo "$as_me:1551: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  echo "$as_me:1533: result: $ac_ct_CC" >&5
+  echo "$as_me:1559: result: $ac_ct_CC" >&5
 echo "${ECHO_T}$ac_ct_CC" >&6
 else
-  echo "$as_me:1536: result: no" >&5
+  echo "$as_me:1562: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   CC=$ac_ct_CC
 else
   CC="$ac_cv_prog_CC"
 fi
 
 if test -z "$CC"; then
   if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}cc; ac_word=$2
-echo "$as_me:1549: checking for $ac_word" >&5
+echo "$as_me:1575: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
@@ -1558,33 +1584,33 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_CC="${ac_tool_prefix}cc"
-echo "$as_me:1564: found $ac_dir/$ac_word" >&5
+echo "$as_me:1590: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$as_me:1572: result: $CC" >&5
+  echo "$as_me:1598: result: $CC" >&5
 echo "${ECHO_T}$CC" >&6
 else
-  echo "$as_me:1575: result: no" >&5
+  echo "$as_me:1601: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
 if test -z "$ac_cv_prog_CC"; then
   ac_ct_CC=$CC
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
-echo "$as_me:1584: checking for $ac_word" >&5
+echo "$as_me:1610: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
@@ -1593,37 +1619,37 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_ac_ct_CC="cc"
-echo "$as_me:1599: found $ac_dir/$ac_word" >&5
+echo "$as_me:1625: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  echo "$as_me:1607: result: $ac_ct_CC" >&5
+  echo "$as_me:1633: result: $ac_ct_CC" >&5
 echo "${ECHO_T}$ac_ct_CC" >&6
 else
-  echo "$as_me:1610: result: no" >&5
+  echo "$as_me:1636: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   CC=$ac_ct_CC
 else
   CC="$ac_cv_prog_CC"
 fi
 
 fi
 if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
-echo "$as_me:1623: checking for $ac_word" >&5
+echo "$as_me:1649: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
@@ -1637,13 +1663,13 @@
   $as_executable_p "$ac_dir/$ac_word" || continue
 if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
   ac_prog_rejected=yes
   continue
 fi
 ac_cv_prog_CC="cc"
-echo "$as_me:1643: found $ac_dir/$ac_word" >&5
+echo "$as_me:1669: found $ac_dir/$ac_word" >&5
 break
 done
 
 if test $ac_prog_rejected = yes; then
   # We found a bogon in the path, so make sure we never use it.
   set dummy $ac_cv_prog_CC
@@ -1659,27 +1685,27 @@
   fi
 fi
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$as_me:1665: result: $CC" >&5
+  echo "$as_me:1691: result: $CC" >&5
 echo "${ECHO_T}$CC" >&6
 else
-  echo "$as_me:1668: result: no" >&5
+  echo "$as_me:1694: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
 if test -z "$CC"; then
   if test -n "$ac_tool_prefix"; then
   for ac_prog in cl
   do
     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
-echo "$as_me:1679: checking for $ac_word" >&5
+echo "$as_me:1705: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
@@ -1688,37 +1714,37 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
-echo "$as_me:1694: found $ac_dir/$ac_word" >&5
+echo "$as_me:1720: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$as_me:1702: result: $CC" >&5
+  echo "$as_me:1728: result: $CC" >&5
 echo "${ECHO_T}$CC" >&6
 else
-  echo "$as_me:1705: result: no" >&5
+  echo "$as_me:1731: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
     test -n "$CC" && break
   done
 fi
 if test -z "$CC"; then
   ac_ct_CC=$CC
   for ac_prog in cl
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-echo "$as_me:1718: checking for $ac_word" >&5
+echo "$as_me:1744: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
@@ -1727,41 +1753,61 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_ac_ct_CC="$ac_prog"
-echo "$as_me:1733: found $ac_dir/$ac_word" >&5
+echo "$as_me:1759: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  echo "$as_me:1741: result: $ac_ct_CC" >&5
+  echo "$as_me:1767: result: $ac_ct_CC" >&5
 echo "${ECHO_T}$ac_ct_CC" >&6
 else
-  echo "$as_me:1744: result: no" >&5
+  echo "$as_me:1770: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   test -n "$ac_ct_CC" && break
 done
 
   CC=$ac_ct_CC
 fi
 
 fi
 
-test -z "$CC" && { { echo "$as_me:1756: error: no acceptable cc found in \$PATH" >&5
+test -z "$CC" && { { echo "$as_me:1782: error: no acceptable cc found in \$PATH" >&5
 echo "$as_me: error: no acceptable cc found in \$PATH" >&2;}
    { (exit 1); exit 1; }; }
 
+# Provide some information about the compiler.
+echo "$as_me:1787:" \
+     "checking for C compiler version" >&5
+ac_compiler=`set X $ac_compile; echo $2`
+{ (eval echo "$as_me:1790: \"$ac_compiler --version </dev/null >&5\"") >&5
+  (eval $ac_compiler --version </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:1793: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:1795: \"$ac_compiler -v </dev/null >&5\"") >&5
+  (eval $ac_compiler -v </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:1798: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:1800: \"$ac_compiler -V </dev/null >&5\"") >&5
+  (eval $ac_compiler -V </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:1803: \$? = $ac_status" >&5
+  (exit $ac_status); }
+
 cat >conftest.$ac_ext <<_ACEOF
-#line 1761 "configure"
+#line 1807 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 
@@ -1769,90 +1815,96 @@
   return 0;
 }
 _ACEOF
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files a.out a.exe"
 # Try to create an executable without -o first, disregard a.out.
-# It will help us diagnose broken compiler, and finding out an intuition
+# It will help us diagnose broken compilers, and finding out an intuition
 # of exeext.
-echo "$as_me:1777: checking for C compiler default output" >&5
+echo "$as_me:1823: checking for C compiler default output" >&5
 echo $ECHO_N "checking for C compiler default output... $ECHO_C" >&6
 ac_link_default=`echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
-if { (eval echo "$as_me:1780: \"$ac_link_default\"") >&5
+if { (eval echo "$as_me:1826: \"$ac_link_default\"") >&5
   (eval $ac_link_default) 2>&5
   ac_status=$?
-  echo "$as_me:1783: \$? = $ac_status" >&5
+  echo "$as_me:1829: \$? = $ac_status" >&5
   (exit $ac_status); }; then
-  for ac_file in `ls a.exe conftest.exe a.* conftest conftest.* 2>/dev/null`; do
+  # Find the output, starting from the most likely.  This scheme is
+# not robust to junk in `.', hence go to wildcards (a.*) only as a last
+# resort.
+for ac_file in `ls a.exe conftest.exe 2>/dev/null;
+                ls a.out conftest 2>/dev/null;
+                ls a.* conftest.* 2>/dev/null`; do
   case $ac_file in
     *.$ac_ext | *.o | *.obj | *.xcoff | *.tds | *.d | *.pdb ) ;;
     a.out ) # We found the default executable, but exeext='' is most
             # certainly right.
             break;;
     *.* ) ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
+          # FIXME: I believe we export ac_cv_exeext for Libtool --akim.
           export ac_cv_exeext
           break;;
     * ) break;;
   esac
 done
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-{ { echo "$as_me:1800: error: C compiler cannot create executables" >&5
+{ { echo "$as_me:1852: error: C compiler cannot create executables" >&5
 echo "$as_me: error: C compiler cannot create executables" >&2;}
    { (exit 77); exit 77; }; }
 fi
 
 ac_exeext=$ac_cv_exeext
-echo "$as_me:1806: result: $ac_file" >&5
+echo "$as_me:1858: result: $ac_file" >&5
 echo "${ECHO_T}$ac_file" >&6
 
 # Check the compiler produces executables we can run.  If not, either
 # the compiler is broken, or we cross compile.
-echo "$as_me:1811: checking whether the C compiler works" >&5
+echo "$as_me:1863: checking whether the C compiler works" >&5
 echo $ECHO_N "checking whether the C compiler works... $ECHO_C" >&6
 # FIXME: These cross compiler hacks should be removed for Autoconf 3.0
 # If not cross compiling, check that we can run a simple program.
 if test "$cross_compiling" != yes; then
   if { ac_try='./$ac_file'
-  { (eval echo "$as_me:1817: \"$ac_try\"") >&5
+  { (eval echo "$as_me:1869: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:1820: \$? = $ac_status" >&5
+  echo "$as_me:1872: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
     cross_compiling=no
   else
     if test "$cross_compiling" = maybe; then
 	cross_compiling=yes
     else
-	{ { echo "$as_me:1827: error: cannot run C compiled programs.
+	{ { echo "$as_me:1879: error: cannot run C compiled programs.
 If you meant to cross compile, use \`--host'." >&5
 echo "$as_me: error: cannot run C compiled programs.
 If you meant to cross compile, use \`--host'." >&2;}
    { (exit 1); exit 1; }; }
     fi
   fi
 fi
-echo "$as_me:1835: result: yes" >&5
+echo "$as_me:1887: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 
 rm -f a.out a.exe conftest$ac_cv_exeext
 ac_clean_files=$ac_clean_files_save
 # Check the compiler produces executables we can run.  If not, either
 # the compiler is broken, or we cross compile.
-echo "$as_me:1842: checking whether we are cross compiling" >&5
+echo "$as_me:1894: checking whether we are cross compiling" >&5
 echo $ECHO_N "checking whether we are cross compiling... $ECHO_C" >&6
-echo "$as_me:1844: result: $cross_compiling" >&5
+echo "$as_me:1896: result: $cross_compiling" >&5
 echo "${ECHO_T}$cross_compiling" >&6
 
-echo "$as_me:1847: checking for executable suffix" >&5
+echo "$as_me:1899: checking for executable suffix" >&5
 echo $ECHO_N "checking for executable suffix... $ECHO_C" >&6
-if { (eval echo "$as_me:1849: \"$ac_link\"") >&5
+if { (eval echo "$as_me:1901: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:1852: \$? = $ac_status" >&5
+  echo "$as_me:1904: \$? = $ac_status" >&5
   (exit $ac_status); }; then
   # If both `conftest.exe' and `conftest' are `present' (well, observable)
 # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
 # work properly (i.e., refer to `conftest.exe'), while it won't with
 # `rm'.
 for ac_file in `(ls conftest.exe; ls conftest; ls conftest.*) 2>/dev/null`; do
@@ -1862,75 +1914,75 @@
           export ac_cv_exeext
           break;;
     * ) break;;
   esac
 done
 else
-  { { echo "$as_me:1868: error: cannot compute EXEEXT: cannot compile and link" >&5
+  { { echo "$as_me:1920: error: cannot compute EXEEXT: cannot compile and link" >&5
 echo "$as_me: error: cannot compute EXEEXT: cannot compile and link" >&2;}
    { (exit 1); exit 1; }; }
 fi
 
 rm -f conftest$ac_cv_exeext
-echo "$as_me:1874: result: $ac_cv_exeext" >&5
+echo "$as_me:1926: result: $ac_cv_exeext" >&5
 echo "${ECHO_T}$ac_cv_exeext" >&6
 
 rm -f conftest.$ac_ext
 EXEEXT=$ac_cv_exeext
 ac_exeext=$EXEEXT
-echo "$as_me:1880: checking for object suffix" >&5
+echo "$as_me:1932: checking for object suffix" >&5
 echo $ECHO_N "checking for object suffix... $ECHO_C" >&6
 if test "${ac_cv_objext+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 1886 "configure"
+#line 1938 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.o conftest.obj
-if { (eval echo "$as_me:1898: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:1950: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:1901: \$? = $ac_status" >&5
+  echo "$as_me:1953: \$? = $ac_status" >&5
   (exit $ac_status); }; then
   for ac_file in `(ls conftest.o conftest.obj; ls conftest.*) 2>/dev/null`; do
   case $ac_file in
     *.$ac_ext | *.xcoff | *.tds | *.d | *.pdb ) ;;
     *) ac_cv_objext=`expr "$ac_file" : '.*\.\(.*\)'`
        break;;
   esac
 done
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-{ { echo "$as_me:1913: error: cannot compute OBJEXT: cannot compile" >&5
+{ { echo "$as_me:1965: error: cannot compute OBJEXT: cannot compile" >&5
 echo "$as_me: error: cannot compute OBJEXT: cannot compile" >&2;}
    { (exit 1); exit 1; }; }
 fi
 
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
-echo "$as_me:1920: result: $ac_cv_objext" >&5
+echo "$as_me:1972: result: $ac_cv_objext" >&5
 echo "${ECHO_T}$ac_cv_objext" >&6
 OBJEXT=$ac_cv_objext
 ac_objext=$OBJEXT
-echo "$as_me:1924: checking whether we are using the GNU C compiler" >&5
+echo "$as_me:1976: checking whether we are using the GNU C compiler" >&5
 echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6
 if test "${ac_cv_c_compiler_gnu+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 1930 "configure"
+#line 1982 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 #ifndef __GNUC__
@@ -1939,77 +1991,77 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:1945: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:1997: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:1948: \$? = $ac_status" >&5
+  echo "$as_me:2000: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:1951: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2003: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:1954: \$? = $ac_status" >&5
+  echo "$as_me:2006: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_compiler_gnu=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_compiler_gnu=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 ac_cv_c_compiler_gnu=$ac_compiler_gnu
 
 fi
-echo "$as_me:1966: result: $ac_cv_c_compiler_gnu" >&5
+echo "$as_me:2018: result: $ac_cv_c_compiler_gnu" >&5
 echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6
 GCC=`test $ac_compiler_gnu = yes && echo yes`
 ac_test_CFLAGS=${CFLAGS+set}
 ac_save_CFLAGS=$CFLAGS
 CFLAGS="-g"
-echo "$as_me:1972: checking whether $CC accepts -g" >&5
+echo "$as_me:2024: checking whether $CC accepts -g" >&5
 echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6
 if test "${ac_cv_prog_cc_g+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 1978 "configure"
+#line 2030 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:1990: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2042: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:1993: \$? = $ac_status" >&5
+  echo "$as_me:2045: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:1996: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2048: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:1999: \$? = $ac_status" >&5
+  echo "$as_me:2051: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_prog_cc_g=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_prog_cc_g=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:2009: result: $ac_cv_prog_cc_g" >&5
+echo "$as_me:2061: result: $ac_cv_prog_cc_g" >&5
 echo "${ECHO_T}$ac_cv_prog_cc_g" >&6
 if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
     CFLAGS="-g -O2"
@@ -2030,98 +2082,101 @@
 cat >conftest.$ac_ext <<_ACEOF
 #ifndef __cplusplus
   choke me
 #endif
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2036: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2088: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2039: \$? = $ac_status" >&5
+  echo "$as_me:2091: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2042: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2094: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2045: \$? = $ac_status" >&5
+  echo "$as_me:2097: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   for ac_declaration in \
    ''\
    '#include <stdlib.h>' \
    'extern "C" void std::exit (int) throw (); using std::exit;' \
    'extern "C" void std::exit (int); using std::exit;' \
    'extern "C" void exit (int) throw ();' \
    'extern "C" void exit (int);' \
    'void exit (int);'
 do
   cat >conftest.$ac_ext <<_ACEOF
-#line 2057 "configure"
+#line 2109 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 $ac_declaration
 int
 main ()
 {
 exit (42);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2070: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2122: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2073: \$? = $ac_status" >&5
+  echo "$as_me:2125: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2076: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2128: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2079: \$? = $ac_status" >&5
+  echo "$as_me:2131: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   :
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 continue
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   cat >conftest.$ac_ext <<_ACEOF
-#line 2089 "configure"
+#line 2141 "configure"
 #include "confdefs.h"
 $ac_declaration
 int
 main ()
 {
 exit (42);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2101: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2153: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2104: \$? = $ac_status" >&5
+  echo "$as_me:2156: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2107: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2159: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2110: \$? = $ac_status" >&5
+  echo "$as_me:2162: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 done
-echo '#ifdef __cplusplus' >>confdefs.h
-echo $ac_declaration      >>confdefs.h
-echo '#endif'             >>confdefs.h
+rm -f conftest*
+if test -n "$ac_declaration"; then
+  echo '#ifdef __cplusplus' >>confdefs.h
+  echo $ac_declaration      >>confdefs.h
+  echo '#endif'             >>confdefs.h
+fi
 
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
@@ -2133,46 +2188,45 @@
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
-echo "$as_me:2139: checking how to run the C preprocessor" >&5
+echo "$as_me:2194: checking how to run the C preprocessor" >&5
 echo $ECHO_N "checking how to run the C preprocessor... $ECHO_C" >&6
 # On Suns, sometimes $CPP names a directory.
 if test -n "$CPP" && test -d "$CPP"; then
   CPP=
 fi
 if test -z "$CPP"; then
   if test "${ac_cv_prog_CPP+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
       # Double quotes because CPP needs to be expanded
     for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
     do
-      # break 2 since there is a loop in there.
       ac_preproc_ok=false
 for ac_c_preproc_warn_flag in '' yes
 do
   # Use a header file that comes with gcc, so configuring glibc
   # with a fresh cross-compiler works.
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp. "Syntax error" is here to catch this case.
   cat >conftest.$ac_ext <<_ACEOF
-#line 2161 "configure"
+#line 2215 "configure"
 #include "confdefs.h"
 #include <assert.h>
                      Syntax error
 _ACEOF
-if { (eval echo "$as_me:2166: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:2220: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:2172: \$? = $ac_status" >&5
+  echo "$as_me:2226: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -2189,23 +2243,23 @@
 fi
 rm -f conftest.err conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether non-existent headers
   # can be detected and how.
   cat >conftest.$ac_ext <<_ACEOF
-#line 2195 "configure"
+#line 2249 "configure"
 #include "confdefs.h"
 #include <ac_nonexistent.h>
 _ACEOF
-if { (eval echo "$as_me:2199: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:2253: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:2205: \$? = $ac_status" >&5
+  echo "$as_me:2259: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -2225,45 +2279,45 @@
 rm -f conftest.err conftest.$ac_ext
 
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
 rm -f conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then
-  break 2
+  break
 fi
 
     done
     ac_cv_prog_CPP=$CPP
 
 fi
   CPP=$ac_cv_prog_CPP
 else
   ac_cv_prog_CPP=$CPP
 fi
-echo "$as_me:2242: result: $CPP" >&5
+echo "$as_me:2296: result: $CPP" >&5
 echo "${ECHO_T}$CPP" >&6
 ac_preproc_ok=false
 for ac_c_preproc_warn_flag in '' yes
 do
   # Use a header file that comes with gcc, so configuring glibc
   # with a fresh cross-compiler works.
   # On the NeXT, cc -E runs the code through the compiler's parser,
   # not just through cpp. "Syntax error" is here to catch this case.
   cat >conftest.$ac_ext <<_ACEOF
-#line 2252 "configure"
+#line 2306 "configure"
 #include "confdefs.h"
 #include <assert.h>
                      Syntax error
 _ACEOF
-if { (eval echo "$as_me:2257: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:2311: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:2263: \$? = $ac_status" >&5
+  echo "$as_me:2317: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -2280,23 +2334,23 @@
 fi
 rm -f conftest.err conftest.$ac_ext
 
   # OK, works on sane cases.  Now check whether non-existent headers
   # can be detected and how.
   cat >conftest.$ac_ext <<_ACEOF
-#line 2286 "configure"
+#line 2340 "configure"
 #include "confdefs.h"
 #include <ac_nonexistent.h>
 _ACEOF
-if { (eval echo "$as_me:2290: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:2344: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:2296: \$? = $ac_status" >&5
+  echo "$as_me:2350: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -2318,56 +2372,56 @@
 done
 # Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
 rm -f conftest.err conftest.$ac_ext
 if $ac_preproc_ok; then
   :
 else
-  { { echo "$as_me:2324: error: C preprocessor \"$CPP\" fails sanity check" >&5
+  { { echo "$as_me:2378: error: C preprocessor \"$CPP\" fails sanity check" >&5
 echo "$as_me: error: C preprocessor \"$CPP\" fails sanity check" >&2;}
    { (exit 1); exit 1; }; }
 fi
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
-echo "$as_me:2335: checking for AIX" >&5
+echo "$as_me:2389: checking for AIX" >&5
 echo $ECHO_N "checking for AIX... $ECHO_C" >&6
 cat >conftest.$ac_ext <<_ACEOF
-#line 2338 "configure"
+#line 2392 "configure"
 #include "confdefs.h"
 #ifdef _AIX
   yes
 #endif
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "yes" >/dev/null 2>&1; then
-  echo "$as_me:2347: result: yes" >&5
+  echo "$as_me:2401: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 cat >>confdefs.h <<\EOF
 #define _ALL_SOURCE 1
 EOF
 
 else
-  echo "$as_me:2354: result: no" >&5
+  echo "$as_me:2408: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 rm -f conftest*
 
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
-echo "$as_me:2367: checking for $ac_word" >&5
+echo "$as_me:2421: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
@@ -2376,33 +2430,33 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_CC="${ac_tool_prefix}gcc"
-echo "$as_me:2382: found $ac_dir/$ac_word" >&5
+echo "$as_me:2436: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$as_me:2390: result: $CC" >&5
+  echo "$as_me:2444: result: $CC" >&5
 echo "${ECHO_T}$CC" >&6
 else
-  echo "$as_me:2393: result: no" >&5
+  echo "$as_me:2447: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
 if test -z "$ac_cv_prog_CC"; then
   ac_ct_CC=$CC
   # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
-echo "$as_me:2402: checking for $ac_word" >&5
+echo "$as_me:2456: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
@@ -2411,37 +2465,37 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_ac_ct_CC="gcc"
-echo "$as_me:2417: found $ac_dir/$ac_word" >&5
+echo "$as_me:2471: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  echo "$as_me:2425: result: $ac_ct_CC" >&5
+  echo "$as_me:2479: result: $ac_ct_CC" >&5
 echo "${ECHO_T}$ac_ct_CC" >&6
 else
-  echo "$as_me:2428: result: no" >&5
+  echo "$as_me:2482: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   CC=$ac_ct_CC
 else
   CC="$ac_cv_prog_CC"
 fi
 
 if test -z "$CC"; then
   if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}cc; ac_word=$2
-echo "$as_me:2441: checking for $ac_word" >&5
+echo "$as_me:2495: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
@@ -2450,33 +2504,33 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_CC="${ac_tool_prefix}cc"
-echo "$as_me:2456: found $ac_dir/$ac_word" >&5
+echo "$as_me:2510: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$as_me:2464: result: $CC" >&5
+  echo "$as_me:2518: result: $CC" >&5
 echo "${ECHO_T}$CC" >&6
 else
-  echo "$as_me:2467: result: no" >&5
+  echo "$as_me:2521: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
 if test -z "$ac_cv_prog_CC"; then
   ac_ct_CC=$CC
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
-echo "$as_me:2476: checking for $ac_word" >&5
+echo "$as_me:2530: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
@@ -2485,37 +2539,37 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_ac_ct_CC="cc"
-echo "$as_me:2491: found $ac_dir/$ac_word" >&5
+echo "$as_me:2545: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  echo "$as_me:2499: result: $ac_ct_CC" >&5
+  echo "$as_me:2553: result: $ac_ct_CC" >&5
 echo "${ECHO_T}$ac_ct_CC" >&6
 else
-  echo "$as_me:2502: result: no" >&5
+  echo "$as_me:2556: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   CC=$ac_ct_CC
 else
   CC="$ac_cv_prog_CC"
 fi
 
 fi
 if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
-echo "$as_me:2515: checking for $ac_word" >&5
+echo "$as_me:2569: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
@@ -2529,13 +2583,13 @@
   $as_executable_p "$ac_dir/$ac_word" || continue
 if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
   ac_prog_rejected=yes
   continue
 fi
 ac_cv_prog_CC="cc"
-echo "$as_me:2535: found $ac_dir/$ac_word" >&5
+echo "$as_me:2589: found $ac_dir/$ac_word" >&5
 break
 done
 
 if test $ac_prog_rejected = yes; then
   # We found a bogon in the path, so make sure we never use it.
   set dummy $ac_cv_prog_CC
@@ -2551,27 +2605,27 @@
   fi
 fi
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$as_me:2557: result: $CC" >&5
+  echo "$as_me:2611: result: $CC" >&5
 echo "${ECHO_T}$CC" >&6
 else
-  echo "$as_me:2560: result: no" >&5
+  echo "$as_me:2614: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
 if test -z "$CC"; then
   if test -n "$ac_tool_prefix"; then
   for ac_prog in cl
   do
     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
-echo "$as_me:2571: checking for $ac_word" >&5
+echo "$as_me:2625: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
@@ -2580,37 +2634,37 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
-echo "$as_me:2586: found $ac_dir/$ac_word" >&5
+echo "$as_me:2640: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  echo "$as_me:2594: result: $CC" >&5
+  echo "$as_me:2648: result: $CC" >&5
 echo "${ECHO_T}$CC" >&6
 else
-  echo "$as_me:2597: result: no" >&5
+  echo "$as_me:2651: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
     test -n "$CC" && break
   done
 fi
 if test -z "$CC"; then
   ac_ct_CC=$CC
   for ac_prog in cl
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-echo "$as_me:2610: checking for $ac_word" >&5
+echo "$as_me:2664: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_ac_ct_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
@@ -2619,46 +2673,66 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_ac_ct_CC="$ac_prog"
-echo "$as_me:2625: found $ac_dir/$ac_word" >&5
+echo "$as_me:2679: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  echo "$as_me:2633: result: $ac_ct_CC" >&5
+  echo "$as_me:2687: result: $ac_ct_CC" >&5
 echo "${ECHO_T}$ac_ct_CC" >&6
 else
-  echo "$as_me:2636: result: no" >&5
+  echo "$as_me:2690: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   test -n "$ac_ct_CC" && break
 done
 
   CC=$ac_ct_CC
 fi
 
 fi
 
-test -z "$CC" && { { echo "$as_me:2648: error: no acceptable cc found in \$PATH" >&5
+test -z "$CC" && { { echo "$as_me:2702: error: no acceptable cc found in \$PATH" >&5
 echo "$as_me: error: no acceptable cc found in \$PATH" >&2;}
    { (exit 1); exit 1; }; }
 
-echo "$as_me:2652: checking whether we are using the GNU C compiler" >&5
+# Provide some information about the compiler.
+echo "$as_me:2707:" \
+     "checking for C compiler version" >&5
+ac_compiler=`set X $ac_compile; echo $2`
+{ (eval echo "$as_me:2710: \"$ac_compiler --version </dev/null >&5\"") >&5
+  (eval $ac_compiler --version </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:2713: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:2715: \"$ac_compiler -v </dev/null >&5\"") >&5
+  (eval $ac_compiler -v </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:2718: \$? = $ac_status" >&5
+  (exit $ac_status); }
+{ (eval echo "$as_me:2720: \"$ac_compiler -V </dev/null >&5\"") >&5
+  (eval $ac_compiler -V </dev/null >&5) 2>&5
+  ac_status=$?
+  echo "$as_me:2723: \$? = $ac_status" >&5
+  (exit $ac_status); }
+
+echo "$as_me:2726: checking whether we are using the GNU C compiler" >&5
 echo $ECHO_N "checking whether we are using the GNU C compiler... $ECHO_C" >&6
 if test "${ac_cv_c_compiler_gnu+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 2658 "configure"
+#line 2732 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 #ifndef __GNUC__
@@ -2667,77 +2741,77 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2673: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2747: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2676: \$? = $ac_status" >&5
+  echo "$as_me:2750: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2679: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2753: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2682: \$? = $ac_status" >&5
+  echo "$as_me:2756: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_compiler_gnu=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_compiler_gnu=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 ac_cv_c_compiler_gnu=$ac_compiler_gnu
 
 fi
-echo "$as_me:2694: result: $ac_cv_c_compiler_gnu" >&5
+echo "$as_me:2768: result: $ac_cv_c_compiler_gnu" >&5
 echo "${ECHO_T}$ac_cv_c_compiler_gnu" >&6
 GCC=`test $ac_compiler_gnu = yes && echo yes`
 ac_test_CFLAGS=${CFLAGS+set}
 ac_save_CFLAGS=$CFLAGS
 CFLAGS="-g"
-echo "$as_me:2700: checking whether $CC accepts -g" >&5
+echo "$as_me:2774: checking whether $CC accepts -g" >&5
 echo $ECHO_N "checking whether $CC accepts -g... $ECHO_C" >&6
 if test "${ac_cv_prog_cc_g+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 2706 "configure"
+#line 2780 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2718: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2792: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2721: \$? = $ac_status" >&5
+  echo "$as_me:2795: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2724: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2798: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2727: \$? = $ac_status" >&5
+  echo "$as_me:2801: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_prog_cc_g=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_prog_cc_g=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:2737: result: $ac_cv_prog_cc_g" >&5
+echo "$as_me:2811: result: $ac_cv_prog_cc_g" >&5
 echo "${ECHO_T}$ac_cv_prog_cc_g" >&6
 if test "$ac_test_CFLAGS" = set; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
     CFLAGS="-g -O2"
@@ -2758,98 +2832,101 @@
 cat >conftest.$ac_ext <<_ACEOF
 #ifndef __cplusplus
   choke me
 #endif
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2764: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2838: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2767: \$? = $ac_status" >&5
+  echo "$as_me:2841: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2770: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2844: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2773: \$? = $ac_status" >&5
+  echo "$as_me:2847: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   for ac_declaration in \
    ''\
    '#include <stdlib.h>' \
    'extern "C" void std::exit (int) throw (); using std::exit;' \
    'extern "C" void std::exit (int); using std::exit;' \
    'extern "C" void exit (int) throw ();' \
    'extern "C" void exit (int);' \
    'void exit (int);'
 do
   cat >conftest.$ac_ext <<_ACEOF
-#line 2785 "configure"
+#line 2859 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 $ac_declaration
 int
 main ()
 {
 exit (42);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2798: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2872: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2801: \$? = $ac_status" >&5
+  echo "$as_me:2875: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2804: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2878: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2807: \$? = $ac_status" >&5
+  echo "$as_me:2881: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   :
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 continue
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   cat >conftest.$ac_ext <<_ACEOF
-#line 2817 "configure"
+#line 2891 "configure"
 #include "confdefs.h"
 $ac_declaration
 int
 main ()
 {
 exit (42);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2829: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2903: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2832: \$? = $ac_status" >&5
+  echo "$as_me:2906: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2835: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2909: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2838: \$? = $ac_status" >&5
+  echo "$as_me:2912: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 done
-echo '#ifdef __cplusplus' >>confdefs.h
-echo $ac_declaration      >>confdefs.h
-echo '#endif'             >>confdefs.h
+rm -f conftest*
+if test -n "$ac_declaration"; then
+  echo '#ifdef __cplusplus' >>confdefs.h
+  echo $ac_declaration      >>confdefs.h
+  echo '#endif'             >>confdefs.h
+fi
 
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
@@ -2863,25 +2940,25 @@
 if test "${enable_largefile+set}" = set; then
   enableval="$enable_largefile"
 
 fi;
 if test "$enable_largefile" != no; then
 
-  echo "$as_me:2869: checking for special C compiler options needed for large files" >&5
+  echo "$as_me:2946: checking for special C compiler options needed for large files" >&5
 echo $ECHO_N "checking for special C compiler options needed for large files... $ECHO_C" >&6
 if test "${ac_cv_sys_largefile_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_cv_sys_largefile_CC=no
      if test "$GCC" != yes; then
        ac_save_CC=$CC
        while :; do
      	 # IRIX 6.2 and later do not support large files by default,
      	 # so use the C compiler's -n32 option if that helps.
          cat >conftest.$ac_ext <<_ACEOF
-#line 2881 "configure"
+#line 2958 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
     incorrectly reject 9223372036854775807.  */
@@ -2895,41 +2972,41 @@
 
   ;
   return 0;
 }
 _ACEOF
      	 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2901: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2978: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2904: \$? = $ac_status" >&5
+  echo "$as_me:2981: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2907: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2984: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2910: \$? = $ac_status" >&5
+  echo "$as_me:2987: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext
      	 CC="$CC -n32"
      	 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2920: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2997: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2923: \$? = $ac_status" >&5
+  echo "$as_me:3000: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2926: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3003: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2929: \$? = $ac_status" >&5
+  echo "$as_me:3006: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sys_largefile_CC=' -n32'; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
@@ -2937,27 +3014,27 @@
          break
        done
        CC=$ac_save_CC
        rm -f conftest.$ac_ext
     fi
 fi
-echo "$as_me:2943: result: $ac_cv_sys_largefile_CC" >&5
+echo "$as_me:3020: result: $ac_cv_sys_largefile_CC" >&5
 echo "${ECHO_T}$ac_cv_sys_largefile_CC" >&6
   if test "$ac_cv_sys_largefile_CC" != no; then
     CC=$CC$ac_cv_sys_largefile_CC
   fi
 
-  echo "$as_me:2949: checking for _FILE_OFFSET_BITS value needed for large files" >&5
+  echo "$as_me:3026: checking for _FILE_OFFSET_BITS value needed for large files" >&5
 echo $ECHO_N "checking for _FILE_OFFSET_BITS value needed for large files... $ECHO_C" >&6
 if test "${ac_cv_sys_file_offset_bits+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   while :; do
   ac_cv_sys_file_offset_bits=no
   cat >conftest.$ac_ext <<_ACEOF
-#line 2957 "configure"
+#line 3034 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
     incorrectly reject 9223372036854775807.  */
@@ -2971,31 +3048,31 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2977: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3054: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2980: \$? = $ac_status" >&5
+  echo "$as_me:3057: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2983: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3060: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2986: \$? = $ac_status" >&5
+  echo "$as_me:3063: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   cat >conftest.$ac_ext <<_ACEOF
-#line 2995 "configure"
+#line 3072 "configure"
 #include "confdefs.h"
 #define _FILE_OFFSET_BITS 64
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
@@ -3010,51 +3087,51 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3016: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3093: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3019: \$? = $ac_status" >&5
+  echo "$as_me:3096: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3022: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3099: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3025: \$? = $ac_status" >&5
+  echo "$as_me:3102: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sys_file_offset_bits=64; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   break
 done
 fi
-echo "$as_me:3036: result: $ac_cv_sys_file_offset_bits" >&5
+echo "$as_me:3113: result: $ac_cv_sys_file_offset_bits" >&5
 echo "${ECHO_T}$ac_cv_sys_file_offset_bits" >&6
 if test "$ac_cv_sys_file_offset_bits" != no; then
 
 cat >>confdefs.h <<EOF
 #define _FILE_OFFSET_BITS $ac_cv_sys_file_offset_bits
 EOF
 
 fi
 rm -f conftest*
-  echo "$as_me:3046: checking for _LARGE_FILES value needed for large files" >&5
+  echo "$as_me:3123: checking for _LARGE_FILES value needed for large files" >&5
 echo $ECHO_N "checking for _LARGE_FILES value needed for large files... $ECHO_C" >&6
 if test "${ac_cv_sys_large_files+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   while :; do
   ac_cv_sys_large_files=no
   cat >conftest.$ac_ext <<_ACEOF
-#line 3054 "configure"
+#line 3131 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
     incorrectly reject 9223372036854775807.  */
@@ -3068,31 +3145,31 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3074: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3151: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3077: \$? = $ac_status" >&5
+  echo "$as_me:3154: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3080: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3157: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3083: \$? = $ac_status" >&5
+  echo "$as_me:3160: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   cat >conftest.$ac_ext <<_ACEOF
-#line 3092 "configure"
+#line 3169 "configure"
 #include "confdefs.h"
 #define _LARGE_FILES 1
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
@@ -3107,33 +3184,33 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3113: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3190: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3116: \$? = $ac_status" >&5
+  echo "$as_me:3193: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3119: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3196: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3122: \$? = $ac_status" >&5
+  echo "$as_me:3199: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sys_large_files=1; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   break
 done
 fi
-echo "$as_me:3133: result: $ac_cv_sys_large_files" >&5
+echo "$as_me:3210: result: $ac_cv_sys_large_files" >&5
 echo "${ECHO_T}$ac_cv_sys_large_files" >&6
 if test "$ac_cv_sys_large_files" != no; then
 
 cat >>confdefs.h <<EOF
 #define _LARGE_FILES $ac_cv_sys_large_files
 EOF
@@ -3216,13 +3293,13 @@
 else
   with_gnu_ld=no
 fi;
 ac_prog=ld
 if test "$GCC" = yes; then
   # Check if gcc -print-prog-name=ld gives a path.
-  echo "$as_me:3222: checking for ld used by GCC" >&5
+  echo "$as_me:3299: checking for ld used by GCC" >&5
 echo $ECHO_N "checking for ld used by GCC... $ECHO_C" >&6
   case $host in
   *-*-mingw*)
     # gcc leaves a trailing carriage return which upsets mingw
     ac_prog=`($CC -print-prog-name=ld) 2>&5 | tr -d '\015'` ;;
   *)
@@ -3246,16 +3323,16 @@
   *)
     # If it is relative, then search for the first ld in PATH.
     with_gnu_ld=unknown
     ;;
   esac
 elif test "$with_gnu_ld" = yes; then
-  echo "$as_me:3252: checking for GNU ld" >&5
+  echo "$as_me:3329: checking for GNU ld" >&5
 echo $ECHO_N "checking for GNU ld... $ECHO_C" >&6
 else
-  echo "$as_me:3255: checking for non-GNU ld" >&5
+  echo "$as_me:3332: checking for non-GNU ld" >&5
 echo $ECHO_N "checking for non-GNU ld... $ECHO_C" >&6
 fi
 if test "${lt_cv_path_LD+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -z "$LD"; then
@@ -3279,50 +3356,50 @@
   lt_cv_path_LD="$LD" # Let the user override the test with a path.
 fi
 fi
 
 LD="$lt_cv_path_LD"
 if test -n "$LD"; then
-  echo "$as_me:3285: result: $LD" >&5
+  echo "$as_me:3362: result: $LD" >&5
 echo "${ECHO_T}$LD" >&6
 else
-  echo "$as_me:3288: result: no" >&5
+  echo "$as_me:3365: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
-test -z "$LD" && { { echo "$as_me:3291: error: no acceptable ld found in \$PATH" >&5
+test -z "$LD" && { { echo "$as_me:3368: error: no acceptable ld found in \$PATH" >&5
 echo "$as_me: error: no acceptable ld found in \$PATH" >&2;}
    { (exit 1); exit 1; }; }
-echo "$as_me:3294: checking if the linker ($LD) is GNU ld" >&5
+echo "$as_me:3371: checking if the linker ($LD) is GNU ld" >&5
 echo $ECHO_N "checking if the linker ($LD) is GNU ld... $ECHO_C" >&6
 if test "${lt_cv_prog_gnu_ld+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   # I'd rather use --version here, but apparently some GNU ld's only accept -v.
 if $LD -v 2>&1 </dev/null | egrep '(GNU|with BFD)' 1>&5; then
   lt_cv_prog_gnu_ld=yes
 else
   lt_cv_prog_gnu_ld=no
 fi
 fi
-echo "$as_me:3306: result: $lt_cv_prog_gnu_ld" >&5
+echo "$as_me:3383: result: $lt_cv_prog_gnu_ld" >&5
 echo "${ECHO_T}$lt_cv_prog_gnu_ld" >&6
 with_gnu_ld=$lt_cv_prog_gnu_ld
 
-echo "$as_me:3310: checking for $LD option to reload object files" >&5
+echo "$as_me:3387: checking for $LD option to reload object files" >&5
 echo $ECHO_N "checking for $LD option to reload object files... $ECHO_C" >&6
 if test "${lt_cv_ld_reload_flag+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   lt_cv_ld_reload_flag='-r'
 fi
-echo "$as_me:3317: result: $lt_cv_ld_reload_flag" >&5
+echo "$as_me:3394: result: $lt_cv_ld_reload_flag" >&5
 echo "${ECHO_T}$lt_cv_ld_reload_flag" >&6
 reload_flag=$lt_cv_ld_reload_flag
 test -n "$reload_flag" && reload_flag=" $reload_flag"
 
-echo "$as_me:3322: checking for BSD-compatible nm" >&5
+echo "$as_me:3399: checking for BSD-compatible nm" >&5
 echo $ECHO_N "checking for BSD-compatible nm... $ECHO_C" >&6
 if test "${lt_cv_path_NM+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$NM"; then
   # Let the user override the test.
@@ -3352,27 +3429,27 @@
   IFS="$ac_save_ifs"
   test -z "$lt_cv_path_NM" && lt_cv_path_NM=nm
 fi
 fi
 
 NM="$lt_cv_path_NM"
-echo "$as_me:3358: result: $NM" >&5
+echo "$as_me:3435: result: $NM" >&5
 echo "${ECHO_T}$NM" >&6
 
-echo "$as_me:3361: checking whether ln -s works" >&5
+echo "$as_me:3438: checking whether ln -s works" >&5
 echo $ECHO_N "checking whether ln -s works... $ECHO_C" >&6
 LN_S=$as_ln_s
 if test "$LN_S" = "ln -s"; then
-  echo "$as_me:3365: result: yes" >&5
+  echo "$as_me:3442: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 else
-  echo "$as_me:3368: result: no, using $LN_S" >&5
+  echo "$as_me:3445: result: no, using $LN_S" >&5
 echo "${ECHO_T}no, using $LN_S" >&6
 fi
 
-echo "$as_me:3372: checking how to recognise dependant libraries" >&5
+echo "$as_me:3449: checking how to recognise dependant libraries" >&5
 echo $ECHO_N "checking how to recognise dependant libraries... $ECHO_C" >&6
 if test "${lt_cv_deplibs_check_method+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   lt_cv_file_magic_cmd='$MAGIC_CMD'
 lt_cv_file_magic_test_file=
@@ -3534,19 +3611,19 @@
     ;;
   esac
   ;;
 esac
 
 fi
-echo "$as_me:3540: result: $lt_cv_deplibs_check_method" >&5
+echo "$as_me:3617: result: $lt_cv_deplibs_check_method" >&5
 echo "${ECHO_T}$lt_cv_deplibs_check_method" >&6
 file_magic_cmd=$lt_cv_file_magic_cmd
 deplibs_check_method=$lt_cv_deplibs_check_method
 
 # Check for command to grab the raw symbol name followed by C symbol from nm.
-echo "$as_me:3546: checking command to parse $NM output" >&5
+echo "$as_me:3623: checking command to parse $NM output" >&5
 echo $ECHO_N "checking command to parse $NM output... $ECHO_C" >&6
 if test "${lt_cv_sys_global_symbol_pipe+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 # These are sane defaults that work on at least a few old systems.
@@ -3617,23 +3694,23 @@
 #ifdef __cplusplus
 }
 #endif
 int main(){nm_test_var='a';nm_test_func();return(0);}
 EOF
 
-  if { (eval echo "$as_me:3623: \"$ac_compile\"") >&5
+  if { (eval echo "$as_me:3700: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3626: \$? = $ac_status" >&5
+  echo "$as_me:3703: \$? = $ac_status" >&5
   (exit $ac_status); }; then
     # Now try to grab the symbols.
     nlist=conftest.nm
-    if { (eval echo "$as_me:3630: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\"") >&5
+    if { (eval echo "$as_me:3707: \"$NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist\"") >&5
   (eval $NM conftest.$ac_objext \| $lt_cv_sys_global_symbol_pipe \> $nlist) 2>&5
   ac_status=$?
-  echo "$as_me:3633: \$? = $ac_status" >&5
+  echo "$as_me:3710: \$? = $ac_status" >&5
   (exit $ac_status); } && test -s "$nlist"; then
       # Try sorting and uniquifying the output.
       if sort "$nlist" | uniq > "$nlist"T; then
 	mv -f "$nlist"T "$nlist"
       else
 	rm -f "$nlist"T
@@ -3679,16 +3756,16 @@
 	  # Now try linking the two files.
 	  mv conftest.$ac_objext conftstm.$ac_objext
 	  save_LIBS="$LIBS"
 	  save_CFLAGS="$CFLAGS"
 	  LIBS="conftstm.$ac_objext"
 	  CFLAGS="$CFLAGS$no_builtin_flag"
-	  if { (eval echo "$as_me:3685: \"$ac_link\"") >&5
+	  if { (eval echo "$as_me:3762: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:3688: \$? = $ac_status" >&5
+  echo "$as_me:3765: \$? = $ac_status" >&5
   (exit $ac_status); } && test -s conftest; then
 	    pipe_works=yes
 	  fi
 	  LIBS="$save_LIBS"
 	  CFLAGS="$save_CFLAGS"
 	else
@@ -3720,72 +3797,72 @@
 if test -z "$lt_cv_sys_global_symbol_pipe"; then
   global_symbol_to_cdecl=
 else
   global_symbol_to_cdecl="$lt_cv_global_symbol_to_cdecl"
 fi
 if test -z "$global_symbol_pipe$global_symbol_to_cdecl"; then
-  echo "$as_me:3726: result: failed" >&5
+  echo "$as_me:3803: result: failed" >&5
 echo "${ECHO_T}failed" >&6
 else
-  echo "$as_me:3729: result: ok" >&5
+  echo "$as_me:3806: result: ok" >&5
 echo "${ECHO_T}ok" >&6
 fi
 
 for ac_header in dlfcn.h
 do
-ac_ac_Header=`echo "ac_cv_header_$ac_header" | $ac_tr_sh`
-echo "$as_me:3736: checking for $ac_header" >&5
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:3813: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_Header+set}\" = set"; then
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3742 "configure"
+#line 3819 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:3746: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:3823: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:3752: \$? = $ac_status" >&5
+  echo "$as_me:3829: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
 else
   ac_cpp_err=yes
 fi
 if test -z "$ac_cpp_err"; then
-  eval "$ac_ac_Header=yes"
+  eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  eval "$ac_ac_Header=no"
+  eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:3771: result: `eval echo '${'$ac_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_Header'}'`" >&6
-if test `eval echo '${'$ac_ac_Header'}'` = yes; then
+echo "$as_me:3848: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_header" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 # Only perform the check for file, if the check method requires it
 case $deplibs_check_method in
 file_magic*)
   if test "$file_magic_cmd" = '$MAGIC_CMD'; then
-    echo "$as_me:3785: checking for ${ac_tool_prefix}file" >&5
+    echo "$as_me:3862: checking for ${ac_tool_prefix}file" >&5
 echo $ECHO_N "checking for ${ac_tool_prefix}file... $ECHO_C" >&6
 if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   case $MAGIC_CMD in
   /*)
@@ -3834,22 +3911,22 @@
   ;;
 esac
 fi
 
 MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
 if test -n "$MAGIC_CMD"; then
-  echo "$as_me:3840: result: $MAGIC_CMD" >&5
+  echo "$as_me:3917: result: $MAGIC_CMD" >&5
 echo "${ECHO_T}$MAGIC_CMD" >&6
 else
-  echo "$as_me:3843: result: no" >&5
+  echo "$as_me:3920: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 if test -z "$lt_cv_path_MAGIC_CMD"; then
   if test -n "$ac_tool_prefix"; then
-    echo "$as_me:3849: checking for file" >&5
+    echo "$as_me:3926: checking for file" >&5
 echo $ECHO_N "checking for file... $ECHO_C" >&6
 if test "${lt_cv_path_MAGIC_CMD+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   case $MAGIC_CMD in
   /*)
@@ -3898,16 +3975,16 @@
   ;;
 esac
 fi
 
 MAGIC_CMD="$lt_cv_path_MAGIC_CMD"
 if test -n "$MAGIC_CMD"; then
-  echo "$as_me:3904: result: $MAGIC_CMD" >&5
+  echo "$as_me:3981: result: $MAGIC_CMD" >&5
 echo "${ECHO_T}$MAGIC_CMD" >&6
 else
-  echo "$as_me:3907: result: no" >&5
+  echo "$as_me:3984: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   else
     MAGIC_CMD=:
   fi
@@ -3917,13 +3994,13 @@
   ;;
 esac
 
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}ranlib", so it can be a program name with args.
 set dummy ${ac_tool_prefix}ranlib; ac_word=$2
-echo "$as_me:3923: checking for $ac_word" >&5
+echo "$as_me:4000: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_RANLIB+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$RANLIB"; then
   ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
@@ -3932,33 +4009,33 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_RANLIB="${ac_tool_prefix}ranlib"
-echo "$as_me:3938: found $ac_dir/$ac_word" >&5
+echo "$as_me:4015: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 RANLIB=$ac_cv_prog_RANLIB
 if test -n "$RANLIB"; then
-  echo "$as_me:3946: result: $RANLIB" >&5
+  echo "$as_me:4023: result: $RANLIB" >&5
 echo "${ECHO_T}$RANLIB" >&6
 else
-  echo "$as_me:3949: result: no" >&5
+  echo "$as_me:4026: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
 if test -z "$ac_cv_prog_RANLIB"; then
   ac_ct_RANLIB=$RANLIB
   # Extract the first word of "ranlib", so it can be a program name with args.
 set dummy ranlib; ac_word=$2
-echo "$as_me:3958: checking for $ac_word" >&5
+echo "$as_me:4035: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_ac_ct_RANLIB+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$ac_ct_RANLIB"; then
   ac_cv_prog_ac_ct_RANLIB="$ac_ct_RANLIB" # Let the user override the test.
@@ -3967,37 +4044,37 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_ac_ct_RANLIB="ranlib"
-echo "$as_me:3973: found $ac_dir/$ac_word" >&5
+echo "$as_me:4050: found $ac_dir/$ac_word" >&5
 break
 done
 
   test -z "$ac_cv_prog_ac_ct_RANLIB" && ac_cv_prog_ac_ct_RANLIB=":"
 fi
 fi
 ac_ct_RANLIB=$ac_cv_prog_ac_ct_RANLIB
 if test -n "$ac_ct_RANLIB"; then
-  echo "$as_me:3982: result: $ac_ct_RANLIB" >&5
+  echo "$as_me:4059: result: $ac_ct_RANLIB" >&5
 echo "${ECHO_T}$ac_ct_RANLIB" >&6
 else
-  echo "$as_me:3985: result: no" >&5
+  echo "$as_me:4062: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   RANLIB=$ac_ct_RANLIB
 else
   RANLIB="$ac_cv_prog_RANLIB"
 fi
 
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}strip", so it can be a program name with args.
 set dummy ${ac_tool_prefix}strip; ac_word=$2
-echo "$as_me:3997: checking for $ac_word" >&5
+echo "$as_me:4074: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_STRIP+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$STRIP"; then
   ac_cv_prog_STRIP="$STRIP" # Let the user override the test.
@@ -4006,33 +4083,33 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_STRIP="${ac_tool_prefix}strip"
-echo "$as_me:4012: found $ac_dir/$ac_word" >&5
+echo "$as_me:4089: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 STRIP=$ac_cv_prog_STRIP
 if test -n "$STRIP"; then
-  echo "$as_me:4020: result: $STRIP" >&5
+  echo "$as_me:4097: result: $STRIP" >&5
 echo "${ECHO_T}$STRIP" >&6
 else
-  echo "$as_me:4023: result: no" >&5
+  echo "$as_me:4100: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 fi
 if test -z "$ac_cv_prog_STRIP"; then
   ac_ct_STRIP=$STRIP
   # Extract the first word of "strip", so it can be a program name with args.
 set dummy strip; ac_word=$2
-echo "$as_me:4032: checking for $ac_word" >&5
+echo "$as_me:4109: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_ac_ct_STRIP+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$ac_ct_STRIP"; then
   ac_cv_prog_ac_ct_STRIP="$ac_ct_STRIP" # Let the user override the test.
@@ -4041,25 +4118,25 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_ac_ct_STRIP="strip"
-echo "$as_me:4047: found $ac_dir/$ac_word" >&5
+echo "$as_me:4124: found $ac_dir/$ac_word" >&5
 break
 done
 
   test -z "$ac_cv_prog_ac_ct_STRIP" && ac_cv_prog_ac_ct_STRIP=":"
 fi
 fi
 ac_ct_STRIP=$ac_cv_prog_ac_ct_STRIP
 if test -n "$ac_ct_STRIP"; then
-  echo "$as_me:4056: result: $ac_ct_STRIP" >&5
+  echo "$as_me:4133: result: $ac_ct_STRIP" >&5
 echo "${ECHO_T}$ac_ct_STRIP" >&6
 else
-  echo "$as_me:4059: result: no" >&5
+  echo "$as_me:4136: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   STRIP=$ac_ct_STRIP
 else
   STRIP="$ac_cv_prog_STRIP"
@@ -4077,17 +4154,17 @@
 
 # Some flags need to be propagated to the compiler or linker for good
 # libtool support.
 case $host in
 *-*-irix6*)
   # Find out which ABI we are using.
-  echo '#line 4083 "configure"' > conftest.$ac_ext
-  if { (eval echo "$as_me:4084: \"$ac_compile\"") >&5
+  echo '#line 4160 "configure"' > conftest.$ac_ext
+  if { (eval echo "$as_me:4161: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4087: \$? = $ac_status" >&5
+  echo "$as_me:4164: \$? = $ac_status" >&5
   (exit $ac_status); }; then
     case `/usr/bin/file conftest.$ac_objext` in
     *32-bit*)
       LD="${LD-ld} -32"
       ;;
     *N32*)
@@ -4102,47 +4179,47 @@
   ;;
 
 *-*-sco3.2v5*)
   # On SCO OpenServer 5, we need -belf to get full-featured binaries.
   SAVE_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -belf"
-  echo "$as_me:4108: checking whether the C compiler needs -belf" >&5
+  echo "$as_me:4185: checking whether the C compiler needs -belf" >&5
 echo $ECHO_N "checking whether the C compiler needs -belf... $ECHO_C" >&6
 if test "${lt_cv_cc_needs_belf+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
      ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
      cat >conftest.$ac_ext <<_ACEOF
-#line 4121 "configure"
+#line 4198 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:4133: \"$ac_link\"") >&5
+if { (eval echo "$as_me:4210: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:4136: \$? = $ac_status" >&5
+  echo "$as_me:4213: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:4139: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4216: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4142: \$? = $ac_status" >&5
+  echo "$as_me:4219: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   lt_cv_cc_needs_belf=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 lt_cv_cc_needs_belf=no
@@ -4152,13 +4229,13 @@
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
 fi
-echo "$as_me:4158: result: $lt_cv_cc_needs_belf" >&5
+echo "$as_me:4235: result: $lt_cv_cc_needs_belf" >&5
 echo "${ECHO_T}$lt_cv_cc_needs_belf" >&6
   if test x"$lt_cv_cc_needs_belf" != x"yes"; then
     # this is probably gcc 2.8.0, egcs 1.0 or newer; no need for -belf
     CFLAGS="$SAVE_CFLAGS"
   fi
   ;;
@@ -4245,24 +4322,24 @@
 fi
 
 # Allow CC to be a program name with arguments.
 set dummy $CC
 compiler="$2"
 
-echo "$as_me:4251: checking for objdir" >&5
+echo "$as_me:4328: checking for objdir" >&5
 echo $ECHO_N "checking for objdir... $ECHO_C" >&6
 rm -f .libs 2>/dev/null
 mkdir .libs 2>/dev/null
 if test -d .libs; then
   objdir=.libs
 else
   # MS-DOS does not allow filenames that begin with a dot.
   objdir=_libs
 fi
 rmdir .libs 2>/dev/null
-echo "$as_me:4262: result: $objdir" >&5
+echo "$as_me:4339: result: $objdir" >&5
 echo "${ECHO_T}$objdir" >&6
 
 # Check whether --with-pic or --without-pic was given.
 if test "${with_pic+set}" = set; then
   withval="$with_pic"
   pic_mode="$withval"
@@ -4271,13 +4348,13 @@
 fi;
 test -z "$pic_mode" && pic_mode=default
 
 # We assume here that the value for lt_cv_prog_cc_pic will not be cached
 # in isolation, and that seeing it set (from the cache) indicates that
 # the associated values are set (in the cache) correctly too.
-echo "$as_me:4277: checking for $compiler option to produce PIC" >&5
+echo "$as_me:4354: checking for $compiler option to produce PIC" >&5
 echo $ECHO_N "checking for $compiler option to produce PIC... $ECHO_C" >&6
 if test "${lt_cv_prog_cc_pic+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
    lt_cv_prog_cc_pic=
   lt_cv_prog_cc_shlib=
@@ -4418,49 +4495,49 @@
     esac
   fi
 
 fi
 
 if test -z "$lt_cv_prog_cc_pic"; then
-  echo "$as_me:4424: result: none" >&5
+  echo "$as_me:4501: result: none" >&5
 echo "${ECHO_T}none" >&6
 else
-  echo "$as_me:4427: result: $lt_cv_prog_cc_pic" >&5
+  echo "$as_me:4504: result: $lt_cv_prog_cc_pic" >&5
 echo "${ECHO_T}$lt_cv_prog_cc_pic" >&6
 
   # Check to make sure the pic_flag actually works.
-  echo "$as_me:4431: checking if $compiler PIC flag $lt_cv_prog_cc_pic works" >&5
+  echo "$as_me:4508: checking if $compiler PIC flag $lt_cv_prog_cc_pic works" >&5
 echo $ECHO_N "checking if $compiler PIC flag $lt_cv_prog_cc_pic works... $ECHO_C" >&6
   if test "${lt_cv_prog_cc_pic_works+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
       save_CFLAGS="$CFLAGS"
     CFLAGS="$CFLAGS $lt_cv_prog_cc_pic -DPIC"
     cat >conftest.$ac_ext <<_ACEOF
-#line 4439 "configure"
+#line 4516 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4451: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4528: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4454: \$? = $ac_status" >&5
+  echo "$as_me:4531: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4457: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4534: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4460: \$? = $ac_status" >&5
+  echo "$as_me:4537: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
         case $host_os in
       hpux9* | hpux10* | hpux11*)
 	# On HP-UX, both CC and GCC only warn that PIC is supported... then
 	# they create non-PIC objects.  So, if there were any warnings, we
 	# assume that PIC is not supported.
@@ -4490,59 +4567,59 @@
     lt_cv_prog_cc_pic=
     lt_cv_prog_cc_can_build_shared=no
   else
     lt_cv_prog_cc_pic=" $lt_cv_prog_cc_pic"
   fi
 
-  echo "$as_me:4496: result: $lt_cv_prog_cc_pic_works" >&5
+  echo "$as_me:4573: result: $lt_cv_prog_cc_pic_works" >&5
 echo "${ECHO_T}$lt_cv_prog_cc_pic_works" >&6
 fi
 
 # Check for any special shared library compilation flags.
 if test -n "$lt_cv_prog_cc_shlib"; then
-  { echo "$as_me:4502: WARNING: \`$CC' requires \`$lt_cv_prog_cc_shlib' to build shared libraries" >&5
+  { echo "$as_me:4579: WARNING: \`$CC' requires \`$lt_cv_prog_cc_shlib' to build shared libraries" >&5
 echo "$as_me: WARNING: \`$CC' requires \`$lt_cv_prog_cc_shlib' to build shared libraries" >&2;}
   if echo "$old_CC $old_CFLAGS " | egrep -e "[ 	]$lt_cv_prog_cc_shlib[ 	]" >/dev/null; then :
   else
-   { echo "$as_me:4506: WARNING: add \`$lt_cv_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure" >&5
+   { echo "$as_me:4583: WARNING: add \`$lt_cv_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure" >&5
 echo "$as_me: WARNING: add \`$lt_cv_prog_cc_shlib' to the CC or CFLAGS env variable and reconfigure" >&2;}
     lt_cv_prog_cc_can_build_shared=no
   fi
 fi
 
-echo "$as_me:4512: checking if $compiler static flag $lt_cv_prog_cc_static works" >&5
+echo "$as_me:4589: checking if $compiler static flag $lt_cv_prog_cc_static works" >&5
 echo $ECHO_N "checking if $compiler static flag $lt_cv_prog_cc_static works... $ECHO_C" >&6
 if test "${lt_cv_prog_cc_static_works+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
     lt_cv_prog_cc_static_works=no
   save_LDFLAGS="$LDFLAGS"
   LDFLAGS="$LDFLAGS $lt_cv_prog_cc_static"
   cat >conftest.$ac_ext <<_ACEOF
-#line 4521 "configure"
+#line 4598 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:4533: \"$ac_link\"") >&5
+if { (eval echo "$as_me:4610: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:4536: \$? = $ac_status" >&5
+  echo "$as_me:4613: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:4539: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4616: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4542: \$? = $ac_status" >&5
+  echo "$as_me:4619: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   lt_cv_prog_cc_static_works=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
@@ -4550,24 +4627,24 @@
   LDFLAGS="$save_LDFLAGS"
 
 fi
 
 # Belt *and* braces to stop my trousers falling down:
 test "X$lt_cv_prog_cc_static_works" = Xno && lt_cv_prog_cc_static=
-echo "$as_me:4556: result: $lt_cv_prog_cc_static_works" >&5
+echo "$as_me:4633: result: $lt_cv_prog_cc_static_works" >&5
 echo "${ECHO_T}$lt_cv_prog_cc_static_works" >&6
 
 pic_flag="$lt_cv_prog_cc_pic"
 special_shlib_compile_flags="$lt_cv_prog_cc_shlib"
 wl="$lt_cv_prog_cc_wl"
 link_static_flag="$lt_cv_prog_cc_static"
 no_builtin_flag="$lt_cv_prog_cc_no_builtin"
 can_build_shared="$lt_cv_prog_cc_can_build_shared"
 
 # Check to see if options -o and -c are simultaneously supported by compiler
-echo "$as_me:4567: checking if $compiler supports -c -o file.$ac_objext" >&5
+echo "$as_me:4644: checking if $compiler supports -c -o file.$ac_objext" >&5
 echo $ECHO_N "checking if $compiler supports -c -o file.$ac_objext... $ECHO_C" >&6
 if test "${lt_cv_compiler_c_o+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 $rm -r conftest 2>/dev/null
@@ -4581,13 +4658,13 @@
 # to fail, enabling locking or at least warning the user not to do parallel
 # builds.
 chmod -w .
 save_CFLAGS="$CFLAGS"
 CFLAGS="$CFLAGS -o out/conftest2.$ac_objext"
 compiler_c_o=no
-if { (eval echo configure:4587: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>out/conftest.err; } && test -s out/conftest2.$ac_objext; then
+if { (eval echo configure:4664: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>out/conftest.err; } && test -s out/conftest2.$ac_objext; then
   # The compiler can only warn and ignore the option if not recognized
   # So say no if there are warnings
   if test -s out/conftest.err; then
     lt_cv_compiler_c_o=no
   else
     lt_cv_compiler_c_o=yes
@@ -4605,49 +4682,49 @@
 rmdir conftest
 $rm -r conftest 2>/dev/null
 
 fi
 
 compiler_c_o=$lt_cv_compiler_c_o
-echo "$as_me:4611: result: $compiler_c_o" >&5
+echo "$as_me:4688: result: $compiler_c_o" >&5
 echo "${ECHO_T}$compiler_c_o" >&6
 
 if test x"$compiler_c_o" = x"yes"; then
   # Check to see if we can write to a .lo
-  echo "$as_me:4616: checking if $compiler supports -c -o file.lo" >&5
+  echo "$as_me:4693: checking if $compiler supports -c -o file.lo" >&5
 echo $ECHO_N "checking if $compiler supports -c -o file.lo... $ECHO_C" >&6
   if test "${lt_cv_compiler_o_lo+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
   lt_cv_compiler_o_lo=no
   save_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -c -o conftest.lo"
   cat >conftest.$ac_ext <<_ACEOF
-#line 4626 "configure"
+#line 4703 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 int some_variable = 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4638: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4715: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4641: \$? = $ac_status" >&5
+  echo "$as_me:4718: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4644: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4721: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4647: \$? = $ac_status" >&5
+  echo "$as_me:4724: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
       # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings
     if test -s conftest.err; then
       lt_cv_compiler_o_lo=no
     else
@@ -4661,72 +4738,72 @@
 rm -f conftest.$ac_objext conftest.$ac_ext
   CFLAGS="$save_CFLAGS"
 
 fi
 
   compiler_o_lo=$lt_cv_compiler_o_lo
-  echo "$as_me:4667: result: $compiler_c_lo" >&5
+  echo "$as_me:4744: result: $compiler_c_lo" >&5
 echo "${ECHO_T}$compiler_c_lo" >&6
 else
   compiler_o_lo=no
 fi
 
 # Check to see if we can do hard links to lock some files if needed
 hard_links="nottested"
 if test "$compiler_c_o" = no && test "$need_locks" != no; then
   # do not overwrite the value of need_locks provided by the user
-  echo "$as_me:4677: checking if we can lock with hard links" >&5
+  echo "$as_me:4754: checking if we can lock with hard links" >&5
 echo $ECHO_N "checking if we can lock with hard links... $ECHO_C" >&6
   hard_links=yes
   $rm conftest*
   ln conftest.a conftest.b 2>/dev/null && hard_links=no
   touch conftest.a
   ln conftest.a conftest.b 2>&5 || hard_links=no
   ln conftest.a conftest.b 2>/dev/null && hard_links=no
-  echo "$as_me:4685: result: $hard_links" >&5
+  echo "$as_me:4762: result: $hard_links" >&5
 echo "${ECHO_T}$hard_links" >&6
   if test "$hard_links" = no; then
-    { echo "$as_me:4688: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
+    { echo "$as_me:4765: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&5
 echo "$as_me: WARNING: \`$CC' does not support \`-c -o', so \`make -j' may be unsafe" >&2;}
     need_locks=warn
   fi
 else
   need_locks=no
 fi
 
 if test "$GCC" = yes; then
   # Check to see if options -fno-rtti -fno-exceptions are supported by compiler
-  echo "$as_me:4698: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
+  echo "$as_me:4775: checking if $compiler supports -fno-rtti -fno-exceptions" >&5
 echo $ECHO_N "checking if $compiler supports -fno-rtti -fno-exceptions... $ECHO_C" >&6
   echo "int some_variable = 0;" > conftest.$ac_ext
   save_CFLAGS="$CFLAGS"
   CFLAGS="$CFLAGS -fno-rtti -fno-exceptions -c conftest.$ac_ext"
   compiler_rtti_exceptions=no
   cat >conftest.$ac_ext <<_ACEOF
-#line 4705 "configure"
+#line 4782 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 int some_variable = 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4717: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4794: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4720: \$? = $ac_status" >&5
+  echo "$as_me:4797: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4723: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4800: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4726: \$? = $ac_status" >&5
+  echo "$as_me:4803: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
       # The compiler can only warn and ignore the option if not recognized
     # So say no if there are warnings
     if test -s conftest.err; then
       compiler_rtti_exceptions=no
     else
@@ -4736,24 +4813,24 @@
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   CFLAGS="$save_CFLAGS"
-  echo "$as_me:4742: result: $compiler_rtti_exceptions" >&5
+  echo "$as_me:4819: result: $compiler_rtti_exceptions" >&5
 echo "${ECHO_T}$compiler_rtti_exceptions" >&6
 
   if test "$compiler_rtti_exceptions" = "yes"; then
     no_builtin_flag=' -fno-builtin -fno-rtti -fno-exceptions'
   else
     no_builtin_flag=' -fno-builtin'
   fi
 fi
 
 # See if the linker supports building shared libraries.
-echo "$as_me:4753: checking whether the linker ($LD) supports shared libraries" >&5
+echo "$as_me:4830: checking whether the linker ($LD) supports shared libraries" >&5
 echo $ECHO_N "checking whether the linker ($LD) supports shared libraries... $ECHO_C" >&6
 
 allow_undefined_flag=
 no_undefined_flag=
 need_lib_prefix=unknown
 need_version=unknown
@@ -5359,18 +5436,18 @@
 
   *)
     ld_shlibs=no
     ;;
   esac
 fi
-echo "$as_me:5365: result: $ld_shlibs" >&5
+echo "$as_me:5442: result: $ld_shlibs" >&5
 echo "${ECHO_T}$ld_shlibs" >&6
 test "$ld_shlibs" = no && can_build_shared=no
 
 # Check hardcoding attributes.
-echo "$as_me:5370: checking how to hardcode library paths into programs" >&5
+echo "$as_me:5447: checking how to hardcode library paths into programs" >&5
 echo $ECHO_N "checking how to hardcode library paths into programs... $ECHO_C" >&6
 hardcode_action=
 if test -n "$hardcode_libdir_flag_spec" || \
    test -n "$runpath_var"; then
 
   # We can hardcode non-existant directories.
@@ -5388,34 +5465,34 @@
   fi
 else
   # We cannot hardcode anything, or else we can only hardcode existing
   # directories.
   hardcode_action=unsupported
 fi
-echo "$as_me:5394: result: $hardcode_action" >&5
+echo "$as_me:5471: result: $hardcode_action" >&5
 echo "${ECHO_T}$hardcode_action" >&6
 
 striplib=
 old_striplib=
-echo "$as_me:5399: checking whether stripping libraries is possible" >&5
+echo "$as_me:5476: checking whether stripping libraries is possible" >&5
 echo $ECHO_N "checking whether stripping libraries is possible... $ECHO_C" >&6
 if test -n "$STRIP" && $STRIP -V 2>&1 | grep "GNU strip" >/dev/null; then
   test -z "$old_striplib" && old_striplib="$STRIP --strip-debug"
   test -z "$striplib" && striplib="$STRIP --strip-unneeded"
-  echo "$as_me:5404: result: yes" >&5
+  echo "$as_me:5481: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 else
-  echo "$as_me:5407: result: no" >&5
+  echo "$as_me:5484: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 reload_cmds='$LD$reload_flag -o $output$reload_objs'
 test -z "$deplibs_check_method" && deplibs_check_method=unknown
 
 # PORTME Fill in your ld.so characteristics
-echo "$as_me:5415: checking dynamic linker characteristics" >&5
+echo "$as_me:5492: checking dynamic linker characteristics" >&5
 echo $ECHO_N "checking dynamic linker characteristics... $ECHO_C" >&6
 library_names_spec=
 libname_spec='lib$name'
 soname_spec=
 postinstall_cmds=
 postuninstall_cmds=
@@ -5791,20 +5868,20 @@
   ;;
 
 *)
   dynamic_linker=no
   ;;
 esac
-echo "$as_me:5797: result: $dynamic_linker" >&5
+echo "$as_me:5874: result: $dynamic_linker" >&5
 echo "${ECHO_T}$dynamic_linker" >&6
 test "$dynamic_linker" = no && can_build_shared=no
 
 # Report the final consequences.
-echo "$as_me:5802: checking if libtool supports shared libraries" >&5
+echo "$as_me:5879: checking if libtool supports shared libraries" >&5
 echo $ECHO_N "checking if libtool supports shared libraries... $ECHO_C" >&6
-echo "$as_me:5804: result: $can_build_shared" >&5
+echo "$as_me:5881: result: $can_build_shared" >&5
 echo "${ECHO_T}$can_build_shared" >&6
 
 if test "$hardcode_action" = relink; then
   # Fast installation is not supported
   enable_fast_install=no
 elif test "$shlibpath_overrides_runpath" = yes ||
@@ -5836,21 +5913,21 @@
   cygwin* | mingw* | pw32*)
     lt_cv_dlopen="LoadLibrary"
     lt_cv_dlopen_libs=
    ;;
 
   *)
-    echo "$as_me:5842: checking for dlopen in -ldl" >&5
+    echo "$as_me:5919: checking for dlopen in -ldl" >&5
 echo $ECHO_N "checking for dlopen in -ldl... $ECHO_C" >&6
 if test "${ac_cv_lib_dl_dlopen+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-ldl  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 5850 "configure"
+#line 5927 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -5863,44 +5940,44 @@
 dlopen ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5869: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5946: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5872: \$? = $ac_status" >&5
+  echo "$as_me:5949: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5875: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5952: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5878: \$? = $ac_status" >&5
+  echo "$as_me:5955: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_dl_dlopen=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_dl_dlopen=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:5889: result: $ac_cv_lib_dl_dlopen" >&5
+echo "$as_me:5966: result: $ac_cv_lib_dl_dlopen" >&5
 echo "${ECHO_T}$ac_cv_lib_dl_dlopen" >&6
 if test $ac_cv_lib_dl_dlopen = yes; then
   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-ldl"
 else
-  echo "$as_me:5894: checking for dlopen" >&5
+  echo "$as_me:5971: checking for dlopen" >&5
 echo $ECHO_N "checking for dlopen... $ECHO_C" >&6
 if test "${ac_cv_func_dlopen+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5900 "configure"
+#line 5977 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char dlopen (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -5925,43 +6002,43 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5931: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6008: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5934: \$? = $ac_status" >&5
+  echo "$as_me:6011: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5937: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6014: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5940: \$? = $ac_status" >&5
+  echo "$as_me:6017: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_dlopen=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_dlopen=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:5950: result: $ac_cv_func_dlopen" >&5
+echo "$as_me:6027: result: $ac_cv_func_dlopen" >&5
 echo "${ECHO_T}$ac_cv_func_dlopen" >&6
 if test $ac_cv_func_dlopen = yes; then
   lt_cv_dlopen="dlopen"
 else
-  echo "$as_me:5955: checking for shl_load" >&5
+  echo "$as_me:6032: checking for shl_load" >&5
 echo $ECHO_N "checking for shl_load... $ECHO_C" >&6
 if test "${ac_cv_func_shl_load+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5961 "configure"
+#line 6038 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char shl_load (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -5986,45 +6063,45 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5992: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6069: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5995: \$? = $ac_status" >&5
+  echo "$as_me:6072: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5998: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6075: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6001: \$? = $ac_status" >&5
+  echo "$as_me:6078: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_shl_load=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_shl_load=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:6011: result: $ac_cv_func_shl_load" >&5
+echo "$as_me:6088: result: $ac_cv_func_shl_load" >&5
 echo "${ECHO_T}$ac_cv_func_shl_load" >&6
 if test $ac_cv_func_shl_load = yes; then
   lt_cv_dlopen="shl_load"
 else
-  echo "$as_me:6016: checking for dlopen in -lsvld" >&5
+  echo "$as_me:6093: checking for dlopen in -lsvld" >&5
 echo $ECHO_N "checking for dlopen in -lsvld... $ECHO_C" >&6
 if test "${ac_cv_lib_svld_dlopen+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsvld  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 6024 "configure"
+#line 6101 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -6037,46 +6114,46 @@
 dlopen ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:6043: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6120: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6046: \$? = $ac_status" >&5
+  echo "$as_me:6123: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:6049: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6126: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6052: \$? = $ac_status" >&5
+  echo "$as_me:6129: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_svld_dlopen=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_svld_dlopen=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:6063: result: $ac_cv_lib_svld_dlopen" >&5
+echo "$as_me:6140: result: $ac_cv_lib_svld_dlopen" >&5
 echo "${ECHO_T}$ac_cv_lib_svld_dlopen" >&6
 if test $ac_cv_lib_svld_dlopen = yes; then
   lt_cv_dlopen="dlopen" lt_cv_dlopen_libs="-lsvld"
 else
-  echo "$as_me:6068: checking for shl_load in -ldld" >&5
+  echo "$as_me:6145: checking for shl_load in -ldld" >&5
 echo $ECHO_N "checking for shl_load in -ldld... $ECHO_C" >&6
 if test "${ac_cv_lib_dld_shl_load+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-ldld  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 6076 "configure"
+#line 6153 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -6089,33 +6166,33 @@
 shl_load ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:6095: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6172: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6098: \$? = $ac_status" >&5
+  echo "$as_me:6175: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:6101: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6178: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6104: \$? = $ac_status" >&5
+  echo "$as_me:6181: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_dld_shl_load=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_dld_shl_load=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:6115: result: $ac_cv_lib_dld_shl_load" >&5
+echo "$as_me:6192: result: $ac_cv_lib_dld_shl_load" >&5
 echo "${ECHO_T}$ac_cv_lib_dld_shl_load" >&6
 if test $ac_cv_lib_dld_shl_load = yes; then
   lt_cv_dlopen="dld_link" lt_cv_dlopen_libs="-dld"
 fi
 
 fi
@@ -6143,24 +6220,24 @@
     save_LDFLAGS="$LDFLAGS"
     eval LDFLAGS=\"\$LDFLAGS $export_dynamic_flag_spec\"
 
     save_LIBS="$LIBS"
     LIBS="$lt_cv_dlopen_libs $LIBS"
 
-    echo "$as_me:6149: checking whether a program can dlopen itself" >&5
+    echo "$as_me:6226: checking whether a program can dlopen itself" >&5
 echo $ECHO_N "checking whether a program can dlopen itself... $ECHO_C" >&6
 if test "${lt_cv_dlopen_self+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self=cross
 else
     lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 6160 "configure"
+#line 6237 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -6215,16 +6292,16 @@
       /* dlclose (self); */
     }
 
     exit (status);
 }
 EOF
-  if { (eval echo "$as_me:6221: \"$ac_link\"") >&5
+  if { (eval echo "$as_me:6298: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6224: \$? = $ac_status" >&5
+  echo "$as_me:6301: \$? = $ac_status" >&5
   (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
     (./conftest; exit; ) 2>/dev/null
     lt_status=$?
     case x$lt_status in
       x$lt_dlno_uscore) lt_cv_dlopen_self=yes ;;
       x$lt_dlneed_uscore) lt_cv_dlopen_self=yes ;;
@@ -6235,29 +6312,29 @@
     lt_cv_dlopen_self=no
   fi
 fi
 rm -fr conftest*
 
 fi
-echo "$as_me:6241: result: $lt_cv_dlopen_self" >&5
+echo "$as_me:6318: result: $lt_cv_dlopen_self" >&5
 echo "${ECHO_T}$lt_cv_dlopen_self" >&6
 
     if test "x$lt_cv_dlopen_self" = xyes; then
       LDFLAGS="$LDFLAGS $link_static_flag"
-      echo "$as_me:6246: checking whether a statically linked program can dlopen itself" >&5
+      echo "$as_me:6323: checking whether a statically linked program can dlopen itself" >&5
 echo $ECHO_N "checking whether a statically linked program can dlopen itself... $ECHO_C" >&6
 if test "${lt_cv_dlopen_self_static+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   	  if test "$cross_compiling" = yes; then :
   lt_cv_dlopen_self_static=cross
 else
     lt_dlunknown=0; lt_dlno_uscore=1; lt_dlneed_uscore=2
   lt_status=$lt_dlunknown
   cat > conftest.$ac_ext <<EOF
-#line 6257 "configure"
+#line 6334 "configure"
 #include "confdefs.h"
 
 #if HAVE_DLFCN_H
 #include <dlfcn.h>
 #endif
 
@@ -6312,16 +6389,16 @@
       /* dlclose (self); */
     }
 
     exit (status);
 }
 EOF
-  if { (eval echo "$as_me:6318: \"$ac_link\"") >&5
+  if { (eval echo "$as_me:6395: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6321: \$? = $ac_status" >&5
+  echo "$as_me:6398: \$? = $ac_status" >&5
   (exit $ac_status); } && test -s conftest${ac_exeext} 2>/dev/null; then
     (./conftest; exit; ) 2>/dev/null
     lt_status=$?
     case x$lt_status in
       x$lt_dlno_uscore) lt_cv_dlopen_self_static=yes ;;
       x$lt_dlneed_uscore) lt_cv_dlopen_self_static=yes ;;
@@ -6332,13 +6409,13 @@
     lt_cv_dlopen_self_static=no
   fi
 fi
 rm -fr conftest*
 
 fi
-echo "$as_me:6338: result: $lt_cv_dlopen_self_static" >&5
+echo "$as_me:6415: result: $lt_cv_dlopen_self_static" >&5
 echo "${ECHO_T}$lt_cv_dlopen_self_static" >&6
     fi
 
     CPPFLAGS="$save_CPPFLAGS"
     LDFLAGS="$save_LDFLAGS"
     LIBS="$save_LIBS"
@@ -6362,24 +6439,24 @@
     # FIXME: we may have to deal with multi-command sequences.
     ;;
   '$CC '*)
     # Test whether the compiler implicitly links with -lc since on some
     # systems, -lgcc has to come before -lc. If gcc already passes -lc
     # to ld, don't add -lc before -lgcc.
-    echo "$as_me:6368: checking whether -lc should be explicitly linked in" >&5
+    echo "$as_me:6445: checking whether -lc should be explicitly linked in" >&5
 echo $ECHO_N "checking whether -lc should be explicitly linked in... $ECHO_C" >&6
     if test "${lt_cv_archive_cmds_need_lc+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   $rm conftest*
     echo 'static int dummy;' > conftest.$ac_ext
 
-    if { (eval echo "$as_me:6376: \"$ac_compile\"") >&5
+    if { (eval echo "$as_me:6453: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:6379: \$? = $ac_status" >&5
+  echo "$as_me:6456: \$? = $ac_status" >&5
   (exit $ac_status); }; then
       soname=conftest
       lib=conftest
       libobjs=conftest.$ac_objext
       deplibs=
       wl=$lt_cv_prog_cc_wl
@@ -6387,29 +6464,29 @@
       linker_flags=-v
       verstring=
       output_objdir=.
       libname=conftest
       save_allow_undefined_flag=$allow_undefined_flag
       allow_undefined_flag=
-      if { (eval echo "$as_me:6393: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\"") >&5
+      if { (eval echo "$as_me:6470: \"$archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1\"") >&5
   (eval $archive_cmds 2\>\&1 \| grep \" -lc \" \>/dev/null 2\>\&1) 2>&5
   ac_status=$?
-  echo "$as_me:6396: \$? = $ac_status" >&5
+  echo "$as_me:6473: \$? = $ac_status" >&5
   (exit $ac_status); }
       then
 	lt_cv_archive_cmds_need_lc=no
       else
 	lt_cv_archive_cmds_need_lc=yes
       fi
       allow_undefined_flag=$save_allow_undefined_flag
     else
       cat conftest.err 1>&5
     fi
 fi
 
-    echo "$as_me:6409: result: $lt_cv_archive_cmds_need_lc" >&5
+    echo "$as_me:6486: result: $lt_cv_archive_cmds_need_lc" >&5
 echo "${ECHO_T}$lt_cv_archive_cmds_need_lc" >&6
     ;;
   esac
 fi
 need_lc=${lt_cv_archive_cmds_need_lc-yes}
 
@@ -6964,13 +7041,13 @@
 
 # Always use our own libtool.
 LIBTOOL='$(SHELL) $(top_builddir)/libtool'
 
 # Prevent multiple expansion
 
-echo "$as_me:6970: checking whether ${MAKE-make} sets \${MAKE}" >&5
+echo "$as_me:7047: checking whether ${MAKE-make} sets \${MAKE}" >&5
 echo $ECHO_N "checking whether ${MAKE-make} sets \${MAKE}... $ECHO_C" >&6
 set dummy ${MAKE-make}; ac_make=`echo "$2" | sed 'y,./+-,__p_,'`
 if eval "test \"\${ac_cv_prog_make_${ac_make}_set+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.make <<\EOF
@@ -6984,69 +7061,69 @@
 else
   eval ac_cv_prog_make_${ac_make}_set=no
 fi
 rm -f conftest.make
 fi
 if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
-  echo "$as_me:6990: result: yes" >&5
+  echo "$as_me:7067: result: yes" >&5
 echo "${ECHO_T}yes" >&6
   SET_MAKE=
 else
-  echo "$as_me:6994: result: no" >&5
+  echo "$as_me:7071: result: no" >&5
 echo "${ECHO_T}no" >&6
   SET_MAKE="MAKE=${MAKE-make}"
 fi
 
-echo "$as_me:6999: checking whether to enable debug options" >&5
+echo "$as_me:7076: checking whether to enable debug options" >&5
 echo $ECHO_N "checking whether to enable debug options... $ECHO_C" >&6
 # Check whether --enable-debug or --disable-debug was given.
 if test "${enable_debug+set}" = set; then
   enableval="$enable_debug"
    case "$enableval" in
   no)
-       echo "$as_me:7006: result: no" >&5
+       echo "$as_me:7083: result: no" >&5
 echo "${ECHO_T}no" >&6
        ;;
-  *)   echo "$as_me:7009: result: yes" >&5
+  *)   echo "$as_me:7086: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 
     CPPFLAGS="$CPPFLAGS -DMALLOCDEBUG"
-    CFLAGS="-Wall -pedantic -g"
+    CFLAGS="-W -Wall -Wwrite-strings -pedantic -g"
        ;;
   esac
 else
-  echo "$as_me:7017: result: no" >&5
+  echo "$as_me:7094: result: no" >&5
 echo "${ECHO_T}no" >&6
 
 fi;
 
-echo "$as_me:7022: checking whether to enable ipv6" >&5
+echo "$as_me:7099: checking whether to enable ipv6" >&5
 echo $ECHO_N "checking whether to enable ipv6... $ECHO_C" >&6
 # Check whether --enable-ipv6 or --disable-ipv6 was given.
 if test "${enable_ipv6+set}" = set; then
   enableval="$enable_ipv6"
    case "$enableval" in
   no)
-       echo "$as_me:7029: result: no" >&5
+       echo "$as_me:7106: result: no" >&5
 echo "${ECHO_T}no" >&6
        ipv6=no
        ;;
-  *)   echo "$as_me:7033: result: yes" >&5
+  *)   echo "$as_me:7110: result: yes" >&5
 echo "${ECHO_T}yes" >&6
        ipv6=yes
        ;;
   esac
 else
   if test "$cross_compiling" = yes; then
-  echo "$as_me:7040: result: no" >&5
+  echo "$as_me:7117: result: no" >&5
 echo "${ECHO_T}no" >&6
   ipv6=no
 
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 7046 "configure"
+#line 7123 "configure"
 #include "confdefs.h"
  /* is AF_INET6 available? */
 #include <sys/types.h>
 #include <sys/socket.h>
 main()
 {
@@ -7055,52 +7132,52 @@
  else
    exit(0);
 }
 
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:7061: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7138: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7064: \$? = $ac_status" >&5
+  echo "$as_me:7141: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:7066: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7143: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7069: \$? = $ac_status" >&5
+  echo "$as_me:7146: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  echo "$as_me:7071: result: yes" >&5
+  echo "$as_me:7148: result: yes" >&5
 echo "${ECHO_T}yes" >&6
   ipv6=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-echo "$as_me:7078: result: no" >&5
+echo "$as_me:7155: result: no" >&5
 echo "${ECHO_T}no" >&6
   ipv6=no
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi;
 
 if test "$ipv6" = "yes"; then
 
-  echo "$as_me:7088: checking for working getaddrinfo" >&5
+  echo "$as_me:7165: checking for working getaddrinfo" >&5
 echo $ECHO_N "checking for working getaddrinfo... $ECHO_C" >&6
 if test "${ac_cv_working_getaddrinfo+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
   if test "$cross_compiling" = yes; then
 
   ac_cv_working_getaddrinfo="yes"
 
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 7100 "configure"
+#line 7177 "configure"
 #include "confdefs.h"
 
 #include <netdb.h>
 #include <sys/types.h>
 #include <sys/socket.h>
 
@@ -7119,37 +7196,37 @@
         exit(0);
     }
 }
 
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:7125: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7202: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7128: \$? = $ac_status" >&5
+  echo "$as_me:7205: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:7130: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7207: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7133: \$? = $ac_status" >&5
+  echo "$as_me:7210: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
   ac_cv_working_getaddrinfo="yes"
 
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
   ac_cv_working_getaddrinfo="no"
 
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:7149: result: $ac_cv_working_getaddrinfo" >&5
+echo "$as_me:7226: result: $ac_cv_working_getaddrinfo" >&5
 echo "${ECHO_T}$ac_cv_working_getaddrinfo" >&6
 if test "$ac_cv_working_getaddrinfo" = "yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_GETADDRINFO 1
 EOF
@@ -7161,19 +7238,19 @@
   IPV6_ENABLED=1
 
 fi
 
 fi
 
-echo "$as_me:7167: checking for gethostbyname" >&5
+echo "$as_me:7244: checking for gethostbyname" >&5
 echo $ECHO_N "checking for gethostbyname... $ECHO_C" >&6
 if test "${ac_cv_func_gethostbyname+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 7173 "configure"
+#line 7250 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostbyname (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -7198,46 +7275,46 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7204: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7281: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7207: \$? = $ac_status" >&5
+  echo "$as_me:7284: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7210: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7287: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7213: \$? = $ac_status" >&5
+  echo "$as_me:7290: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_gethostbyname=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_gethostbyname=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:7223: result: $ac_cv_func_gethostbyname" >&5
+echo "$as_me:7300: result: $ac_cv_func_gethostbyname" >&5
 echo "${ECHO_T}$ac_cv_func_gethostbyname" >&6
 if test $ac_cv_func_gethostbyname = yes; then
   :
 else
 
-echo "$as_me:7229: checking for gethostbyname in -lnsl" >&5
+echo "$as_me:7306: checking for gethostbyname in -lnsl" >&5
 echo $ECHO_N "checking for gethostbyname in -lnsl... $ECHO_C" >&6
 if test "${ac_cv_lib_nsl_gethostbyname+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lnsl  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 7237 "configure"
+#line 7314 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -7250,33 +7327,33 @@
 gethostbyname ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7256: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7333: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7259: \$? = $ac_status" >&5
+  echo "$as_me:7336: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7262: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7339: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7265: \$? = $ac_status" >&5
+  echo "$as_me:7342: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_nsl_gethostbyname=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_nsl_gethostbyname=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:7276: result: $ac_cv_lib_nsl_gethostbyname" >&5
+echo "$as_me:7353: result: $ac_cv_lib_nsl_gethostbyname" >&5
 echo "${ECHO_T}$ac_cv_lib_nsl_gethostbyname" >&6
 if test $ac_cv_lib_nsl_gethostbyname = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBNSL 1
 EOF
 
@@ -7284,19 +7361,19 @@
 
 fi
 
 fi
 
 if test "$ac_cv_lib_nsl_gethostbyname" != "yes" -a "$ac_cv_func_gethostbyname" != "yes"; then
-    echo "$as_me:7290: checking for gethostbyname" >&5
+    echo "$as_me:7367: checking for gethostbyname" >&5
 echo $ECHO_N "checking for gethostbyname... $ECHO_C" >&6
 if test "${ac_cv_func_gethostbyname+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 7296 "configure"
+#line 7373 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostbyname (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -7321,46 +7398,46 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7327: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7404: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7330: \$? = $ac_status" >&5
+  echo "$as_me:7407: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7333: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7410: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7336: \$? = $ac_status" >&5
+  echo "$as_me:7413: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_gethostbyname=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_gethostbyname=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:7346: result: $ac_cv_func_gethostbyname" >&5
+echo "$as_me:7423: result: $ac_cv_func_gethostbyname" >&5
 echo "${ECHO_T}$ac_cv_func_gethostbyname" >&6
 if test $ac_cv_func_gethostbyname = yes; then
   :
 else
 
-echo "$as_me:7352: checking for gethostbyname in -lsocket" >&5
+echo "$as_me:7429: checking for gethostbyname in -lsocket" >&5
 echo $ECHO_N "checking for gethostbyname in -lsocket... $ECHO_C" >&6
 if test "${ac_cv_lib_socket_gethostbyname+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsocket  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 7360 "configure"
+#line 7437 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -7373,33 +7450,33 @@
 gethostbyname ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7379: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7456: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7382: \$? = $ac_status" >&5
+  echo "$as_me:7459: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7385: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7462: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7388: \$? = $ac_status" >&5
+  echo "$as_me:7465: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_socket_gethostbyname=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_socket_gethostbyname=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:7399: result: $ac_cv_lib_socket_gethostbyname" >&5
+echo "$as_me:7476: result: $ac_cv_lib_socket_gethostbyname" >&5
 echo "${ECHO_T}$ac_cv_lib_socket_gethostbyname" >&6
 if test $ac_cv_lib_socket_gethostbyname = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBSOCKET 1
 EOF
 
@@ -7409,68 +7486,68 @@
 
 fi
 
 fi
 
 if test "$ac_cv_lib_nsl_gethostbyname" = "$ac_cv_func_gethostbyname"; then
-  echo "$as_me:7415: checking trying both nsl and socket libs" >&5
+  echo "$as_me:7492: checking trying both nsl and socket libs" >&5
 echo $ECHO_N "checking trying both nsl and socket libs... $ECHO_C" >&6
   my_ac_save_LIBS=$LIBS
   LIBS="-lnsl -lsocket $LIBS"
   cat >conftest.$ac_ext <<_ACEOF
-#line 7420 "configure"
+#line 7497 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 gethostbyname();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7432: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7509: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7435: \$? = $ac_status" >&5
+  echo "$as_me:7512: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7438: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7515: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7441: \$? = $ac_status" >&5
+  echo "$as_me:7518: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   my_ac_link_result=success
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 my_ac_link_result=failure
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 
   if test "$my_ac_link_result" = "failure"; then
-    echo "$as_me:7452: result: no" >&5
+    echo "$as_me:7529: result: no" >&5
 echo "${ECHO_T}no" >&6
-    { { echo "$as_me:7454: error: couldn't find libraries for gethostbyname()" >&5
+    { { echo "$as_me:7531: error: couldn't find libraries for gethostbyname()" >&5
 echo "$as_me: error: couldn't find libraries for gethostbyname()" >&2;}
    { (exit 1); exit 1; }; }
         LIBS=$my_ac_save_LIBS
   else
-    echo "$as_me:7459: result: yes" >&5
+    echo "$as_me:7536: result: yes" >&5
 echo "${ECHO_T}yes" >&6
   fi
 fi
 
-echo "$as_me:7464: checking for strcasecmp" >&5
+echo "$as_me:7541: checking for strcasecmp" >&5
 echo $ECHO_N "checking for strcasecmp... $ECHO_C" >&6
 if test "${ac_cv_func_strcasecmp+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 7470 "configure"
+#line 7547 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char strcasecmp (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -7495,46 +7572,46 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7501: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7578: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7504: \$? = $ac_status" >&5
+  echo "$as_me:7581: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7507: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7584: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7510: \$? = $ac_status" >&5
+  echo "$as_me:7587: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_strcasecmp=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_strcasecmp=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:7520: result: $ac_cv_func_strcasecmp" >&5
+echo "$as_me:7597: result: $ac_cv_func_strcasecmp" >&5
 echo "${ECHO_T}$ac_cv_func_strcasecmp" >&6
 if test $ac_cv_func_strcasecmp = yes; then
   :
 else
 
-echo "$as_me:7526: checking for strcasecmp in -lresolve" >&5
+echo "$as_me:7603: checking for strcasecmp in -lresolve" >&5
 echo $ECHO_N "checking for strcasecmp in -lresolve... $ECHO_C" >&6
 if test "${ac_cv_lib_resolve_strcasecmp+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lresolve  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 7534 "configure"
+#line 7611 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -7547,33 +7624,33 @@
 strcasecmp ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7553: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7630: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7556: \$? = $ac_status" >&5
+  echo "$as_me:7633: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7559: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7636: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7562: \$? = $ac_status" >&5
+  echo "$as_me:7639: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_resolve_strcasecmp=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_resolve_strcasecmp=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:7573: result: $ac_cv_lib_resolve_strcasecmp" >&5
+echo "$as_me:7650: result: $ac_cv_lib_resolve_strcasecmp" >&5
 echo "${ECHO_T}$ac_cv_lib_resolve_strcasecmp" >&6
 if test $ac_cv_lib_resolve_strcasecmp = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBRESOLVE 1
 EOF
 
@@ -7581,21 +7658,21 @@
 
 fi
 
 fi
 
 if test "$ac_cv_lib_resolve_strcasecmp" = "$ac_cv_func_strcasecmp"; then
-  echo "$as_me:7587: checking for strcasecmp in -lresolve" >&5
+  echo "$as_me:7664: checking for strcasecmp in -lresolve" >&5
 echo $ECHO_N "checking for strcasecmp in -lresolve... $ECHO_C" >&6
 if test "${ac_cv_lib_resolve_strcasecmp+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lresolve -lnsl $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 7595 "configure"
+#line 7672 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -7608,47 +7685,47 @@
 strcasecmp ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7614: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7691: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7617: \$? = $ac_status" >&5
+  echo "$as_me:7694: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7620: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7697: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7623: \$? = $ac_status" >&5
+  echo "$as_me:7700: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_resolve_strcasecmp=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_resolve_strcasecmp=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:7634: result: $ac_cv_lib_resolve_strcasecmp" >&5
+echo "$as_me:7711: result: $ac_cv_lib_resolve_strcasecmp" >&5
 echo "${ECHO_T}$ac_cv_lib_resolve_strcasecmp" >&6
 if test $ac_cv_lib_resolve_strcasecmp = yes; then
   LIBS="-lresolve $LIBS"
 fi
 
 fi
 
-echo "$as_me:7642: checking for connect" >&5
+echo "$as_me:7719: checking for connect" >&5
 echo $ECHO_N "checking for connect... $ECHO_C" >&6
 if test "${ac_cv_func_connect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 7648 "configure"
+#line 7725 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char connect (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -7673,46 +7750,46 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7679: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7756: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7682: \$? = $ac_status" >&5
+  echo "$as_me:7759: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7685: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7762: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7688: \$? = $ac_status" >&5
+  echo "$as_me:7765: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_connect=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_connect=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:7698: result: $ac_cv_func_connect" >&5
+echo "$as_me:7775: result: $ac_cv_func_connect" >&5
 echo "${ECHO_T}$ac_cv_func_connect" >&6
 if test $ac_cv_func_connect = yes; then
   :
 else
 
-echo "$as_me:7704: checking for connect in -lsocket" >&5
+echo "$as_me:7781: checking for connect in -lsocket" >&5
 echo $ECHO_N "checking for connect in -lsocket... $ECHO_C" >&6
 if test "${ac_cv_lib_socket_connect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsocket  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 7712 "configure"
+#line 7789 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -7725,52 +7802,52 @@
 connect ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7731: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7808: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7734: \$? = $ac_status" >&5
+  echo "$as_me:7811: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7737: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7814: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7740: \$? = $ac_status" >&5
+  echo "$as_me:7817: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_socket_connect=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_socket_connect=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:7751: result: $ac_cv_lib_socket_connect" >&5
+echo "$as_me:7828: result: $ac_cv_lib_socket_connect" >&5
 echo "${ECHO_T}$ac_cv_lib_socket_connect" >&6
 if test $ac_cv_lib_socket_connect = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBSOCKET 1
 EOF
 
   LIBS="-lsocket $LIBS"
 
 fi
 
 fi
 
-echo "$as_me:7764: checking for gethostname" >&5
+echo "$as_me:7841: checking for gethostname" >&5
 echo $ECHO_N "checking for gethostname... $ECHO_C" >&6
 if test "${ac_cv_func_gethostname+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 7770 "configure"
+#line 7847 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char gethostname (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -7795,46 +7872,46 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7801: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7878: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7804: \$? = $ac_status" >&5
+  echo "$as_me:7881: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7807: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7884: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7810: \$? = $ac_status" >&5
+  echo "$as_me:7887: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_gethostname=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_gethostname=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:7820: result: $ac_cv_func_gethostname" >&5
+echo "$as_me:7897: result: $ac_cv_func_gethostname" >&5
 echo "${ECHO_T}$ac_cv_func_gethostname" >&6
 if test $ac_cv_func_gethostname = yes; then
   :
 else
 
-echo "$as_me:7826: checking for gethostname in -lucb" >&5
+echo "$as_me:7903: checking for gethostname in -lucb" >&5
 echo $ECHO_N "checking for gethostname in -lucb... $ECHO_C" >&6
 if test "${ac_cv_lib_ucb_gethostname+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lucb  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 7834 "configure"
+#line 7911 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -7847,52 +7924,52 @@
 gethostname ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7853: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7930: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7856: \$? = $ac_status" >&5
+  echo "$as_me:7933: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7859: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7936: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7862: \$? = $ac_status" >&5
+  echo "$as_me:7939: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_ucb_gethostname=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_ucb_gethostname=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:7873: result: $ac_cv_lib_ucb_gethostname" >&5
+echo "$as_me:7950: result: $ac_cv_lib_ucb_gethostname" >&5
 echo "${ECHO_T}$ac_cv_lib_ucb_gethostname" >&6
 if test $ac_cv_lib_ucb_gethostname = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBUCB 1
 EOF
 
   LIBS="-lucb $LIBS"
 
 fi
 
 fi
 
-echo "$as_me:7886: checking for dlclose" >&5
+echo "$as_me:7963: checking for dlclose" >&5
 echo $ECHO_N "checking for dlclose... $ECHO_C" >&6
 if test "${ac_cv_func_dlclose+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 7892 "configure"
+#line 7969 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char dlclose (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -7917,46 +7994,46 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7923: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8000: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7926: \$? = $ac_status" >&5
+  echo "$as_me:8003: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7929: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8006: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7932: \$? = $ac_status" >&5
+  echo "$as_me:8009: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_dlclose=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_dlclose=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:7942: result: $ac_cv_func_dlclose" >&5
+echo "$as_me:8019: result: $ac_cv_func_dlclose" >&5
 echo "${ECHO_T}$ac_cv_func_dlclose" >&6
 if test $ac_cv_func_dlclose = yes; then
   :
 else
 
-echo "$as_me:7948: checking for dlopen in -ldl" >&5
+echo "$as_me:8025: checking for dlopen in -ldl" >&5
 echo $ECHO_N "checking for dlopen in -ldl... $ECHO_C" >&6
 if test "${ac_cv_lib_dl_dlopen+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-ldl  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 7956 "configure"
+#line 8033 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -7969,33 +8046,33 @@
 dlopen ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:7975: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8052: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:7978: \$? = $ac_status" >&5
+  echo "$as_me:8055: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:7981: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8058: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7984: \$? = $ac_status" >&5
+  echo "$as_me:8061: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_dl_dlopen=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_dl_dlopen=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:7995: result: $ac_cv_lib_dl_dlopen" >&5
+echo "$as_me:8072: result: $ac_cv_lib_dl_dlopen" >&5
 echo "${ECHO_T}$ac_cv_lib_dl_dlopen" >&6
 if test $ac_cv_lib_dl_dlopen = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBDL 1
 EOF
 
@@ -8021,28 +8098,28 @@
 # Check whether --with-random or --without-random was given.
 if test "${with_random+set}" = set; then
   withval="$with_random"
    RANDOM_FILE="$withval"
 else
 
-                echo "$as_me:8027: checking for \"/dev/urandom\"" >&5
+                echo "$as_me:8104: checking for \"/dev/urandom\"" >&5
 echo $ECHO_N "checking for \"/dev/urandom\"... $ECHO_C" >&6
 if test "${ac_cv_file___dev_urandom_+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   test "$cross_compiling" = yes &&
-  { { echo "$as_me:8033: error: cannot check for file existence when cross compiling" >&5
+  { { echo "$as_me:8110: error: cannot check for file existence when cross compiling" >&5
 echo "$as_me: error: cannot check for file existence when cross compiling" >&2;}
    { (exit 1); exit 1; }; }
 if test -r ""/dev/urandom""; then
   ac_cv_file___dev_urandom_=yes
 else
   ac_cv_file___dev_urandom_=no
 fi
 fi
-echo "$as_me:8042: result: $ac_cv_file___dev_urandom_" >&5
+echo "$as_me:8119: result: $ac_cv_file___dev_urandom_" >&5
 echo "${ECHO_T}$ac_cv_file___dev_urandom_" >&6
 if test $ac_cv_file___dev_urandom_ = yes; then
 
                 RANDOM_FILE="/dev/urandom";
 
 fi
@@ -8091,44 +8168,44 @@
     KRB4INC="$OPT_KRB4/include"
   fi
   want_krb4="yes"
 
 fi;
 
-echo "$as_me:8097: checking if Kerberos4 support is requested" >&5
+echo "$as_me:8174: checking if Kerberos4 support is requested" >&5
 echo $ECHO_N "checking if Kerberos4 support is requested... $ECHO_C" >&6
 
 if test "$want_krb4" = yes
 then
   if test "$ipv6" = "yes"; then
     echo krb4 is not compatible with IPv6
     exit 1
   fi
-  echo "$as_me:8106: result: yes" >&5
+  echo "$as_me:8183: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 
-  echo "$as_me:8109: checking where to look for Kerberos4" >&5
+  echo "$as_me:8186: checking where to look for Kerberos4" >&5
 echo $ECHO_N "checking where to look for Kerberos4... $ECHO_C" >&6
   if test X"$OPT_KRB4" = Xyes
   then
-    echo "$as_me:8113: result: defaults" >&5
+    echo "$as_me:8190: result: defaults" >&5
 echo "${ECHO_T}defaults" >&6
   else
-    echo "$as_me:8116: result: libs in $KRB4LIB, headers in $KRB4INC" >&5
+    echo "$as_me:8193: result: libs in $KRB4LIB, headers in $KRB4INC" >&5
 echo "${ECHO_T}libs in $KRB4LIB, headers in $KRB4INC" >&6
   fi
 
-    echo "$as_me:8120: checking for des_pcbc_encrypt in -ldes" >&5
+    echo "$as_me:8197: checking for des_pcbc_encrypt in -ldes" >&5
 echo $ECHO_N "checking for des_pcbc_encrypt in -ldes... $ECHO_C" >&6
 if test "${ac_cv_lib_des_des_pcbc_encrypt+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-ldes  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 8128 "configure"
+#line 8205 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -8141,91 +8218,91 @@
 des_pcbc_encrypt ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8147: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8224: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8150: \$? = $ac_status" >&5
+  echo "$as_me:8227: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8153: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8230: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8156: \$? = $ac_status" >&5
+  echo "$as_me:8233: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_des_des_pcbc_encrypt=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_des_des_pcbc_encrypt=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:8167: result: $ac_cv_lib_des_des_pcbc_encrypt" >&5
+echo "$as_me:8244: result: $ac_cv_lib_des_des_pcbc_encrypt" >&5
 echo "${ECHO_T}$ac_cv_lib_des_des_pcbc_encrypt" >&6
 if test $ac_cv_lib_des_des_pcbc_encrypt = yes; then
 
 for ac_header in des.h
 do
-ac_ac_Header=`echo "ac_cv_header_$ac_header" | $ac_tr_sh`
-echo "$as_me:8174: checking for $ac_header" >&5
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:8251: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_Header+set}\" = set"; then
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 8180 "configure"
+#line 8257 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:8184: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:8261: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:8190: \$? = $ac_status" >&5
+  echo "$as_me:8267: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
 else
   ac_cpp_err=yes
 fi
 if test -z "$ac_cpp_err"; then
-  eval "$ac_ac_Header=yes"
+  eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  eval "$ac_ac_Header=no"
+  eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:8209: result: `eval echo '${'$ac_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_Header'}'`" >&6
-if test `eval echo '${'$ac_ac_Header'}'` = yes; then
+echo "$as_me:8286: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_header" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
-        echo "$as_me:8219: checking for res_search" >&5
+        echo "$as_me:8296: checking for res_search" >&5
 echo $ECHO_N "checking for res_search... $ECHO_C" >&6
 if test "${ac_cv_func_res_search+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 8225 "configure"
+#line 8302 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char res_search (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -8250,46 +8327,46 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8256: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8333: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8259: \$? = $ac_status" >&5
+  echo "$as_me:8336: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8262: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8339: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8265: \$? = $ac_status" >&5
+  echo "$as_me:8342: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_res_search=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_res_search=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:8275: result: $ac_cv_func_res_search" >&5
+echo "$as_me:8352: result: $ac_cv_func_res_search" >&5
 echo "${ECHO_T}$ac_cv_func_res_search" >&6
 if test $ac_cv_func_res_search = yes; then
   :
 else
 
-echo "$as_me:8281: checking for res_search in -lresolv" >&5
+echo "$as_me:8358: checking for res_search in -lresolv" >&5
 echo $ECHO_N "checking for res_search in -lresolv... $ECHO_C" >&6
 if test "${ac_cv_lib_resolv_res_search+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 8289 "configure"
+#line 8366 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -8302,54 +8379,54 @@
 res_search ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8308: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8385: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8311: \$? = $ac_status" >&5
+  echo "$as_me:8388: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8314: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8391: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8317: \$? = $ac_status" >&5
+  echo "$as_me:8394: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_resolv_res_search=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_resolv_res_search=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:8328: result: $ac_cv_lib_resolv_res_search" >&5
+echo "$as_me:8405: result: $ac_cv_lib_resolv_res_search" >&5
 echo "${ECHO_T}$ac_cv_lib_resolv_res_search" >&6
 if test $ac_cv_lib_resolv_res_search = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBRESOLV 1
 EOF
 
   LIBS="-lresolv $LIBS"
 
 fi
 
 fi
 
-        echo "$as_me:8341: checking for krb_net_read in -lkrb" >&5
+        echo "$as_me:8418: checking for krb_net_read in -lkrb" >&5
 echo $ECHO_N "checking for krb_net_read in -lkrb... $ECHO_C" >&6
 if test "${ac_cv_lib_krb_krb_net_read+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lkrb  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 8349 "configure"
+#line 8426 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -8362,96 +8439,96 @@
 krb_net_read ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8368: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8445: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8371: \$? = $ac_status" >&5
+  echo "$as_me:8448: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8374: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8451: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8377: \$? = $ac_status" >&5
+  echo "$as_me:8454: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_krb_krb_net_read=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_krb_krb_net_read=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:8388: result: $ac_cv_lib_krb_krb_net_read" >&5
+echo "$as_me:8465: result: $ac_cv_lib_krb_krb_net_read" >&5
 echo "${ECHO_T}$ac_cv_lib_krb_krb_net_read" >&6
 if test $ac_cv_lib_krb_krb_net_read = yes; then
 
 for ac_header in krb.h
 do
-ac_ac_Header=`echo "ac_cv_header_$ac_header" | $ac_tr_sh`
-echo "$as_me:8395: checking for $ac_header" >&5
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:8472: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_Header+set}\" = set"; then
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 8401 "configure"
+#line 8478 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:8405: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:8482: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:8411: \$? = $ac_status" >&5
+  echo "$as_me:8488: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
 else
   ac_cpp_err=yes
 fi
 if test -z "$ac_cpp_err"; then
-  eval "$ac_ac_Header=yes"
+  eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  eval "$ac_ac_Header=no"
+  eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:8430: result: `eval echo '${'$ac_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_Header'}'`" >&6
-if test `eval echo '${'$ac_ac_Header'}'` = yes; then
+echo "$as_me:8507: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_header" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
             LIBS="-lkrb -ldes $LIBS"
 
 for ac_func in krb_get_our_ip_for_realm
 do
-ac_ac_var=`echo "ac_cv_func_$ac_func" | $ac_tr_sh`
-echo "$as_me:8445: checking for $ac_func" >&5
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:8522: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_var+set}\" = set"; then
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 8451 "configure"
+#line 8528 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -8476,36 +8553,36 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8482: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8559: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8485: \$? = $ac_status" >&5
+  echo "$as_me:8562: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8488: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8565: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8491: \$? = $ac_status" >&5
+  echo "$as_me:8568: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$ac_ac_var=yes"
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-eval "$ac_ac_var=no"
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:8501: result: `eval echo '${'$ac_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_var'}'`" >&6
-if test `eval echo '${'$ac_ac_var'}'` = yes; then
+echo "$as_me:8578: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_func" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
             cat >>confdefs.h <<\EOF
@@ -8513,20 +8590,20 @@
 EOF
 
             KRB4_ENABLED=1
 
 for ac_func in strlcpy
 do
-ac_ac_var=`echo "ac_cv_func_$ac_func" | $ac_tr_sh`
-echo "$as_me:8520: checking for $ac_func" >&5
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:8597: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_var+set}\" = set"; then
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 8526 "configure"
+#line 8603 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -8551,47 +8628,47 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8557: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8634: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8560: \$? = $ac_status" >&5
+  echo "$as_me:8637: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8563: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8640: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8566: \$? = $ac_status" >&5
+  echo "$as_me:8643: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$ac_ac_var=yes"
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-eval "$ac_ac_var=no"
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:8576: result: `eval echo '${'$ac_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_var'}'`" >&6
-if test `eval echo '${'$ac_ac_var'}'` = yes; then
+echo "$as_me:8653: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_func" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 fi
 
 fi
 
 else
-  echo "$as_me:8591: result: no" >&5
+  echo "$as_me:8668: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 OPT_SSL=off
 
 # Check whether --with-ssl or --without-ssl was given.
@@ -8600,34 +8677,38 @@
   OPT_SSL=$withval
 
 fi;
 
 if test X"$OPT_SSL" = Xno
 then
-  { echo "$as_me:8606: WARNING: SSL/https support disabled" >&5
+  { echo "$as_me:8683: WARNING: SSL/https support disabled" >&5
 echo "$as_me: WARNING: SSL/https support disabled" >&2;}
 else
 
-    EXTRA_SSL=
+    CLEANLDFLAGS="$LDFLAGS"
+  CLEANCPPFLAGS="$CPPFLAGS"
 
   case "$OPT_SSL" in
   yes)
     EXTRA_SSL=/usr/local/ssl ;;
   *)
-    EXTRA_SSL=$OPT_SSL ;;
+        EXTRA_SSL=$OPT_SSL
+    LDFLAGS="$LDFLAGS -L$EXTRA_SSL/lib"
+    CPPFLAGS="$CPPFLAGS -I$EXTRA_SSL/include/openssl -I$EXTRA_SSL/include"
+    ;;
   esac
 
-  echo "$as_me:8619: checking for CRYPTO_lock in -lcrypto" >&5
+  echo "$as_me:8700: checking for CRYPTO_lock in -lcrypto" >&5
 echo $ECHO_N "checking for CRYPTO_lock in -lcrypto... $ECHO_C" >&6
 if test "${ac_cv_lib_crypto_CRYPTO_lock+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lcrypto  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 8627 "configure"
+#line 8708 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -8640,53 +8721,53 @@
 CRYPTO_lock ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8646: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8727: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8649: \$? = $ac_status" >&5
+  echo "$as_me:8730: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8652: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8733: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8655: \$? = $ac_status" >&5
+  echo "$as_me:8736: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_crypto_CRYPTO_lock=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_crypto_CRYPTO_lock=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:8666: result: $ac_cv_lib_crypto_CRYPTO_lock" >&5
+echo "$as_me:8747: result: $ac_cv_lib_crypto_CRYPTO_lock" >&5
 echo "${ECHO_T}$ac_cv_lib_crypto_CRYPTO_lock" >&6
 if test $ac_cv_lib_crypto_CRYPTO_lock = yes; then
 
      HAVECRYPTO="yes"
 
 else
 
      OLDLDFLAGS="$LDFLAGS"
      OLDCPPFLAGS="$CPPFLAGS"
-     LDFLAGS="$LDFLAGS -L$EXTRA_SSL/lib"
-     CPPFLAGS="$CPPFLAGS -I$EXTRA_SSL/include/openssl -I$EXTRA_SSL/include"
-     echo "$as_me:8678: checking for CRYPTO_add_lock in -lcrypto" >&5
+     LDFLAGS="$CLEANLDFLAGS -L$EXTRA_SSL/lib"
+     CPPFLAGS="$CLEANCPPFLAGS -I$EXTRA_SSL/include/openssl -I$EXTRA_SSL/include"
+     echo "$as_me:8759: checking for CRYPTO_add_lock in -lcrypto" >&5
 echo $ECHO_N "checking for CRYPTO_add_lock in -lcrypto... $ECHO_C" >&6
 if test "${ac_cv_lib_crypto_CRYPTO_add_lock+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lcrypto  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 8686 "configure"
+#line 8767 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -8699,33 +8780,33 @@
 CRYPTO_add_lock ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8705: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8786: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8708: \$? = $ac_status" >&5
+  echo "$as_me:8789: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8711: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8792: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8714: \$? = $ac_status" >&5
+  echo "$as_me:8795: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_crypto_CRYPTO_add_lock=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_crypto_CRYPTO_add_lock=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:8725: result: $ac_cv_lib_crypto_CRYPTO_add_lock" >&5
+echo "$as_me:8806: result: $ac_cv_lib_crypto_CRYPTO_add_lock" >&5
 echo "${ECHO_T}$ac_cv_lib_crypto_CRYPTO_add_lock" >&6
 if test $ac_cv_lib_crypto_CRYPTO_add_lock = yes; then
 
        HAVECRYPTO="yes"
 else
 
@@ -8735,21 +8816,21 @@
 fi
 
 fi
 
   if test "$HAVECRYPTO" = "yes"; then
 
-echo "$as_me:8741: checking for CRYPTO_add_lock in -lcrypto" >&5
+echo "$as_me:8822: checking for CRYPTO_add_lock in -lcrypto" >&5
 echo $ECHO_N "checking for CRYPTO_add_lock in -lcrypto... $ECHO_C" >&6
 if test "${ac_cv_lib_crypto_CRYPTO_add_lock+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lcrypto  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 8749 "configure"
+#line 8830 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -8762,52 +8843,52 @@
 CRYPTO_add_lock ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8768: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8849: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8771: \$? = $ac_status" >&5
+  echo "$as_me:8852: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8774: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8855: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8777: \$? = $ac_status" >&5
+  echo "$as_me:8858: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_crypto_CRYPTO_add_lock=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_crypto_CRYPTO_add_lock=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:8788: result: $ac_cv_lib_crypto_CRYPTO_add_lock" >&5
+echo "$as_me:8869: result: $ac_cv_lib_crypto_CRYPTO_add_lock" >&5
 echo "${ECHO_T}$ac_cv_lib_crypto_CRYPTO_add_lock" >&6
 if test $ac_cv_lib_crypto_CRYPTO_add_lock = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBCRYPTO 1
 EOF
 
   LIBS="-lcrypto $LIBS"
 
 fi
 
-echo "$as_me:8799: checking for SSL_connect in -lssl" >&5
+echo "$as_me:8880: checking for SSL_connect in -lssl" >&5
 echo $ECHO_N "checking for SSL_connect in -lssl... $ECHO_C" >&6
 if test "${ac_cv_lib_ssl_SSL_connect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lssl  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 8807 "configure"
+#line 8888 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -8820,58 +8901,58 @@
 SSL_connect ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8826: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8907: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8829: \$? = $ac_status" >&5
+  echo "$as_me:8910: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8832: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8913: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8835: \$? = $ac_status" >&5
+  echo "$as_me:8916: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_ssl_SSL_connect=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_ssl_SSL_connect=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:8846: result: $ac_cv_lib_ssl_SSL_connect" >&5
+echo "$as_me:8927: result: $ac_cv_lib_ssl_SSL_connect" >&5
 echo "${ECHO_T}$ac_cv_lib_ssl_SSL_connect" >&6
 if test $ac_cv_lib_ssl_SSL_connect = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBSSL 1
 EOF
 
   LIBS="-lssl $LIBS"
 
 fi
 
     if test "$ac_cv_lib_ssl_SSL_connect" != yes; then
-                echo "$as_me:8858: checking for ssl with RSAglue/rsaref libs in use" >&5
+                echo "$as_me:8939: checking for ssl with RSAglue/rsaref libs in use" >&5
 echo $ECHO_N "checking for ssl with RSAglue/rsaref libs in use... $ECHO_C" >&6;
         OLIBS=$LIBS
         LIBS="$LIBS -lRSAglue -lrsaref"
 
-echo "$as_me:8863: checking for SSL_connect in -lssl" >&5
+echo "$as_me:8944: checking for SSL_connect in -lssl" >&5
 echo $ECHO_N "checking for SSL_connect in -lssl... $ECHO_C" >&6
 if test "${ac_cv_lib_ssl_SSL_connect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lssl  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 8871 "configure"
+#line 8952 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -8884,175 +8965,175 @@
 SSL_connect ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:8890: \"$ac_link\"") >&5
+if { (eval echo "$as_me:8971: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:8893: \$? = $ac_status" >&5
+  echo "$as_me:8974: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:8896: \"$ac_try\"") >&5
+  { (eval echo "$as_me:8977: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:8899: \$? = $ac_status" >&5
+  echo "$as_me:8980: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_ssl_SSL_connect=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_ssl_SSL_connect=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:8910: result: $ac_cv_lib_ssl_SSL_connect" >&5
+echo "$as_me:8991: result: $ac_cv_lib_ssl_SSL_connect" >&5
 echo "${ECHO_T}$ac_cv_lib_ssl_SSL_connect" >&6
 if test $ac_cv_lib_ssl_SSL_connect = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBSSL 1
 EOF
 
   LIBS="-lssl $LIBS"
 
 fi
 
         if test "$ac_cv_lib_ssl_SSL_connect" != yes; then
-                        echo "$as_me:8922: result: no" >&5
+                        echo "$as_me:9003: result: no" >&5
 echo "${ECHO_T}no" >&6
             LIBS=$OLIBS
         else
-            echo "$as_me:8926: result: yes" >&5
+            echo "$as_me:9007: result: yes" >&5
 echo "${ECHO_T}yes" >&6
         fi
     fi
 
 for ac_header in openssl/x509.h openssl/rsa.h openssl/crypto.h \
                      openssl/pem.h openssl/ssl.h openssl/err.h
 do
-ac_ac_Header=`echo "ac_cv_header_$ac_header" | $ac_tr_sh`
-echo "$as_me:8935: checking for $ac_header" >&5
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:9016: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_Header+set}\" = set"; then
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 8941 "configure"
+#line 9022 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:8945: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:9026: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:8951: \$? = $ac_status" >&5
+  echo "$as_me:9032: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
 else
   ac_cpp_err=yes
 fi
 if test -z "$ac_cpp_err"; then
-  eval "$ac_ac_Header=yes"
+  eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  eval "$ac_ac_Header=no"
+  eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:8970: result: `eval echo '${'$ac_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_Header'}'`" >&6
-if test `eval echo '${'$ac_ac_Header'}'` = yes; then
+echo "$as_me:9051: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_header" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
  OPENSSL_ENABLED=1
 fi
 done
 
     if test $ac_cv_header_openssl_x509_h = no; then
 
 for ac_header in x509.h rsa.h crypto.h pem.h ssl.h err.h
 do
-ac_ac_Header=`echo "ac_cv_header_$ac_header" | $ac_tr_sh`
-echo "$as_me:8985: checking for $ac_header" >&5
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:9066: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_Header+set}\" = set"; then
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 8991 "configure"
+#line 9072 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:8995: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:9076: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:9001: \$? = $ac_status" >&5
+  echo "$as_me:9082: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
 else
   ac_cpp_err=yes
 fi
 if test -z "$ac_cpp_err"; then
-  eval "$ac_ac_Header=yes"
+  eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  eval "$ac_ac_Header=no"
+  eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:9020: result: `eval echo '${'$ac_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_Header'}'`" >&6
-if test `eval echo '${'$ac_ac_Header'}'` = yes; then
+echo "$as_me:9101: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_header" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
  OPENSSL_ENABLED=1
 fi
 done
 
     fi
 
   fi
 
   if test X"$OPT_SSL" != Xoff &&
      test "$OPENSSL_ENABLED" != "1"; then
-    { { echo "$as_me:9036: error: OpenSSL libs and/or directories were not found where specified!" >&5
+    { { echo "$as_me:9117: error: OpenSSL libs and/or directories were not found where specified!" >&5
 echo "$as_me: error: OpenSSL libs and/or directories were not found where specified!" >&2;}
    { (exit 1); exit 1; }; }
   fi
 
 for ac_func in RAND_status \
                   RAND_screen \
                   RAND_egd
 do
-ac_ac_var=`echo "ac_cv_func_$ac_func" | $ac_tr_sh`
-echo "$as_me:9046: checking for $ac_func" >&5
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:9127: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_var+set}\" = set"; then
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9052 "configure"
+#line 9133 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -9077,36 +9158,36 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:9083: \"$ac_link\"") >&5
+if { (eval echo "$as_me:9164: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9086: \$? = $ac_status" >&5
+  echo "$as_me:9167: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:9089: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9170: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9092: \$? = $ac_status" >&5
+  echo "$as_me:9173: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$ac_ac_var=yes"
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-eval "$ac_ac_var=no"
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:9102: result: `eval echo '${'$ac_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_var'}'`" >&6
-if test `eval echo '${'$ac_ac_var'}'` = yes; then
+echo "$as_me:9183: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_func" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 fi
@@ -9118,31 +9199,81 @@
   OPT_THREAD=off
 
 fi;
 
 if test X"$OPT_THREAD" = Xoff
 then
-  { echo "$as_me:9124: WARNING: libcurl will not get built using thread-safe functions" >&5
+  { echo "$as_me:9205: WARNING: libcurl will not get built using thread-safe functions" >&5
 echo "$as_me: WARNING: libcurl will not get built using thread-safe functions" >&2;}
 
 cat >>confdefs.h <<\EOF
 #define DISABLED_THREADSAFE 1
 EOF
 
 else
 
+echo "$as_me:9214: checking if \"localhost\" resolves" >&5
+echo $ECHO_N "checking if \"localhost\" resolves... $ECHO_C" >&6
+if test "$cross_compiling" = yes; then
+  { { echo "$as_me:9217: error: cannot run test program while cross compiling" >&5
+echo "$as_me: error: cannot run test program while cross compiling" >&2;}
+   { (exit 1); exit 1; }; }
+else
+  cat >conftest.$ac_ext <<_ACEOF
+#line 9222 "configure"
+#include "confdefs.h"
+
+#include <string.h>
+#include <sys/types.h>
+#include <netdb.h>
+
+int
+main () {
+struct hostent *h;
+h = gethostbyname("localhost");
+exit (h == NULL ? 1 : 0); }
+_ACEOF
+rm -f conftest$ac_exeext
+if { (eval echo "$as_me:9236: \"$ac_link\"") >&5
+  (eval $ac_link) 2>&5
+  ac_status=$?
+  echo "$as_me:9239: \$? = $ac_status" >&5
+  (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
+  { (eval echo "$as_me:9241: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:9244: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+
+      echo "$as_me:9247: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+else
+  echo "$as_me: program exited with status $ac_status" >&5
+echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+
+      echo "$as_me:9254: result: no" >&5
+echo "${ECHO_T}no" >&6
+      { { echo "$as_me:9256: error: can't figure out gethostbyname_r() since localhost doesn't resolve" >&5
+echo "$as_me: error: can't figure out gethostbyname_r() since localhost doesn't resolve" >&2;}
+   { (exit 1); exit 1; }; }
+
+fi
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+fi
+
 for ac_func in gethostbyname_r
 do
-ac_ac_var=`echo "ac_cv_func_$ac_func" | $ac_tr_sh`
-echo "$as_me:9136: checking for $ac_func" >&5
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:9267: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_var+set}\" = set"; then
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9142 "configure"
+#line 9273 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -9167,45 +9298,45 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:9173: \"$ac_link\"") >&5
+if { (eval echo "$as_me:9304: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9176: \$? = $ac_status" >&5
+  echo "$as_me:9307: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:9179: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9310: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9182: \$? = $ac_status" >&5
+  echo "$as_me:9313: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$ac_ac_var=yes"
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-eval "$ac_ac_var=no"
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:9192: result: `eval echo '${'$ac_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_var'}'`" >&6
-if test `eval echo '${'$ac_ac_var'}'` = yes; then
+echo "$as_me:9323: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_func" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
-    echo "$as_me:9199: checking if gethostbyname_r takes 3 arguments" >&5
+    echo "$as_me:9330: checking if gethostbyname_r takes 3 arguments" >&5
 echo $ECHO_N "checking if gethostbyname_r takes 3 arguments... $ECHO_C" >&6
     if test "$cross_compiling" = yes; then
   ac_cv_gethostbyname_args=0
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9205 "configure"
+#line 9336 "configure"
 #include "confdefs.h"
 
 #include <string.h>
 #include <sys/types.h>
 #include <netdb.h>
 
@@ -9218,44 +9349,44 @@
 memset(&h, 0, sizeof(struct hostent));
 memset(&hdata, 0, sizeof(struct hostent_data));
 rc = gethostbyname_r(name, &h, &hdata);
 exit (rc != 0 ? 1 : 0); }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:9224: \"$ac_link\"") >&5
+if { (eval echo "$as_me:9355: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9227: \$? = $ac_status" >&5
+  echo "$as_me:9358: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:9229: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9360: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9232: \$? = $ac_status" >&5
+  echo "$as_me:9363: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-      echo "$as_me:9235: result: yes" >&5
+      echo "$as_me:9366: result: yes" >&5
 echo "${ECHO_T}yes" >&6
       cat >>confdefs.h <<\EOF
 #define HAVE_GETHOSTBYNAME_R_3 1
 EOF
 
       ac_cv_gethostbyname_args=3
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
-      echo "$as_me:9247: result: no" >&5
+      echo "$as_me:9378: result: no" >&5
 echo "${ECHO_T}no" >&6
-      echo "$as_me:9249: checking if gethostbyname_r with -D_REENTRANT takes 3 arguments" >&5
+      echo "$as_me:9380: checking if gethostbyname_r with -D_REENTRANT takes 3 arguments" >&5
 echo $ECHO_N "checking if gethostbyname_r with -D_REENTRANT takes 3 arguments... $ECHO_C" >&6
       if test "$cross_compiling" = yes; then
   ac_cv_gethostbyname_args=0
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9255 "configure"
+#line 9386 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
 
 #include <string.h>
 #include <sys/types.h>
@@ -9270,24 +9401,24 @@
 memset(&h, 0, sizeof(struct hostent));
 memset(&hdata, 0, sizeof(struct hostent_data));
 rc = gethostbyname_r(name, &h, &hdata);
 exit (rc != 0 ? 1 : 0); }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:9276: \"$ac_link\"") >&5
+if { (eval echo "$as_me:9407: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9279: \$? = $ac_status" >&5
+  echo "$as_me:9410: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:9281: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9412: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9284: \$? = $ac_status" >&5
+  echo "$as_me:9415: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-	echo "$as_me:9287: result: yes" >&5
+	echo "$as_me:9418: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 	cat >>confdefs.h <<\EOF
 #define HAVE_GETHOSTBYNAME_R_3 1
 EOF
 
 	cat >>confdefs.h <<\EOF
@@ -9297,21 +9428,21 @@
 	ac_cv_gethostbyname_args=3
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
-	echo "$as_me:9303: result: no" >&5
+	echo "$as_me:9434: result: no" >&5
 echo "${ECHO_T}no" >&6
-	echo "$as_me:9305: checking if gethostbyname_r takes 5 arguments" >&5
+	echo "$as_me:9436: checking if gethostbyname_r takes 5 arguments" >&5
 echo $ECHO_N "checking if gethostbyname_r takes 5 arguments... $ECHO_C" >&6
 	if test "$cross_compiling" = yes; then
   ac_cv_gethostbyname_args=0
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9311 "configure"
+#line 9442 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 
 int
@@ -9322,44 +9453,44 @@
 char buffer[8192];
 int h_errno;
 hp = gethostbyname_r(name, &h, buffer, 8192, &h_errno);
 exit (hp == NULL ? 1 : 0); }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:9328: \"$ac_link\"") >&5
+if { (eval echo "$as_me:9459: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9331: \$? = $ac_status" >&5
+  echo "$as_me:9462: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:9333: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9464: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9336: \$? = $ac_status" >&5
+  echo "$as_me:9467: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-	  echo "$as_me:9339: result: yes" >&5
+	  echo "$as_me:9470: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 	  cat >>confdefs.h <<\EOF
 #define HAVE_GETHOSTBYNAME_R_5 1
 EOF
 
           ac_cv_gethostbyname_args=5
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
-	  echo "$as_me:9351: result: no" >&5
+	  echo "$as_me:9482: result: no" >&5
 echo "${ECHO_T}no" >&6
-	  echo "$as_me:9353: checking if gethostbyname_r takes 6 arguments" >&5
+	  echo "$as_me:9484: checking if gethostbyname_r takes 6 arguments" >&5
 echo $ECHO_N "checking if gethostbyname_r takes 6 arguments... $ECHO_C" >&6
 	  if test "$cross_compiling" = yes; then
   ac_cv_gethostbyname_args=0
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9359 "configure"
+#line 9490 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 
 int
@@ -9371,71 +9502,71 @@
 int rc;
 int h_errno;
 rc = gethostbyname_r(name, &h, buf, 8192, &hp, &h_errno);
 exit (rc != 0 ? 1 : 0); }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:9377: \"$ac_link\"") >&5
+if { (eval echo "$as_me:9508: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9380: \$? = $ac_status" >&5
+  echo "$as_me:9511: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:9382: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9513: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9385: \$? = $ac_status" >&5
+  echo "$as_me:9516: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-	    echo "$as_me:9388: result: yes" >&5
+	    echo "$as_me:9519: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 	    cat >>confdefs.h <<\EOF
 #define HAVE_GETHOSTBYNAME_R_6 1
 EOF
 
             ac_cv_gethostbyname_args=6
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
-	    echo "$as_me:9400: result: no" >&5
+	    echo "$as_me:9531: result: no" >&5
 echo "${ECHO_T}no" >&6
 	    have_missing_r_funcs="$have_missing_r_funcs gethostbyname_r"
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
 done
 
 if test "$ac_cv_func_gethostbyname_r" = "yes"; then
   if test "$ac_cv_gethostbyname_args" = "0"; then
-            { { echo "$as_me:9420: error: couldn't figure out how to use gethostbyname_r()" >&5
+            { { echo "$as_me:9551: error: couldn't figure out how to use gethostbyname_r()" >&5
 echo "$as_me: error: couldn't figure out how to use gethostbyname_r()" >&2;}
    { (exit 1); exit 1; }; }
   fi
 fi
 
 for ac_func in gethostbyaddr_r
 do
-ac_ac_var=`echo "ac_cv_func_$ac_func" | $ac_tr_sh`
-echo "$as_me:9429: checking for $ac_func" >&5
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:9560: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_var+set}\" = set"; then
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9435 "configure"
+#line 9566 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -9460,42 +9591,42 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:9466: \"$ac_link\"") >&5
+if { (eval echo "$as_me:9597: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9469: \$? = $ac_status" >&5
+  echo "$as_me:9600: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:9472: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9603: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9475: \$? = $ac_status" >&5
+  echo "$as_me:9606: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$ac_ac_var=yes"
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-eval "$ac_ac_var=no"
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:9485: result: `eval echo '${'$ac_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_var'}'`" >&6
-if test `eval echo '${'$ac_ac_var'}'` = yes; then
+echo "$as_me:9616: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_func" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
-    echo "$as_me:9492: checking if gethostbyaddr_r takes 5 arguments" >&5
+    echo "$as_me:9623: checking if gethostbyaddr_r takes 5 arguments" >&5
 echo $ECHO_N "checking if gethostbyaddr_r takes 5 arguments... $ECHO_C" >&6
     cat >conftest.$ac_ext <<_ACEOF
-#line 9495 "configure"
+#line 9626 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 int
 main ()
@@ -9510,41 +9641,41 @@
 rc = gethostbyaddr_r(address, length, type, &h, &hdata);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:9516: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:9647: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:9519: \$? = $ac_status" >&5
+  echo "$as_me:9650: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:9522: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9653: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9525: \$? = $ac_status" >&5
+  echo "$as_me:9656: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-      echo "$as_me:9528: result: yes" >&5
+      echo "$as_me:9659: result: yes" >&5
 echo "${ECHO_T}yes" >&6
       cat >>confdefs.h <<\EOF
 #define HAVE_GETHOSTBYADDR_R_5 1
 EOF
 
       ac_cv_gethostbyaddr_args=5
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
-      echo "$as_me:9539: result: no" >&5
+      echo "$as_me:9670: result: no" >&5
 echo "${ECHO_T}no" >&6
-      echo "$as_me:9541: checking if gethostbyaddr_r with -D_REENTRANT takes 5 arguments" >&5
+      echo "$as_me:9672: checking if gethostbyaddr_r with -D_REENTRANT takes 5 arguments" >&5
 echo $ECHO_N "checking if gethostbyaddr_r with -D_REENTRANT takes 5 arguments... $ECHO_C" >&6
       cat >conftest.$ac_ext <<_ACEOF
-#line 9544 "configure"
+#line 9675 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
 #include <sys/types.h>
 #include <netdb.h>
 int
@@ -9560,25 +9691,25 @@
 rc = gethostbyaddr_r(address, length, type, &h, &hdata);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:9566: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:9697: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:9569: \$? = $ac_status" >&5
+  echo "$as_me:9700: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:9572: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9703: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9575: \$? = $ac_status" >&5
+  echo "$as_me:9706: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-	echo "$as_me:9578: result: yes" >&5
+	echo "$as_me:9709: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 	cat >>confdefs.h <<\EOF
 #define HAVE_GETHOSTBYADDR_R_5 1
 EOF
 
 	cat >>confdefs.h <<\EOF
@@ -9587,18 +9718,18 @@
 
 	ac_cv_gethostbyaddr_args=5
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
-	echo "$as_me:9593: result: no" >&5
+	echo "$as_me:9724: result: no" >&5
 echo "${ECHO_T}no" >&6
-	echo "$as_me:9595: checking if gethostbyaddr_r takes 7 arguments" >&5
+	echo "$as_me:9726: checking if gethostbyaddr_r takes 7 arguments" >&5
 echo $ECHO_N "checking if gethostbyaddr_r takes 7 arguments... $ECHO_C" >&6
 	cat >conftest.$ac_ext <<_ACEOF
-#line 9598 "configure"
+#line 9729 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 int
 main ()
@@ -9616,41 +9747,41 @@
                      buffer, 8192, &h_errnop);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:9622: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:9753: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:9625: \$? = $ac_status" >&5
+  echo "$as_me:9756: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:9628: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9759: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9631: \$? = $ac_status" >&5
+  echo "$as_me:9762: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-	  echo "$as_me:9634: result: yes" >&5
+	  echo "$as_me:9765: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 	  cat >>confdefs.h <<\EOF
 #define HAVE_GETHOSTBYADDR_R_7 1
 EOF
 
 	  ac_cv_gethostbyaddr_args=7
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
-	  echo "$as_me:9645: result: no" >&5
+	  echo "$as_me:9776: result: no" >&5
 echo "${ECHO_T}no" >&6
-	  echo "$as_me:9647: checking if gethostbyaddr_r takes 8 arguments" >&5
+	  echo "$as_me:9778: checking if gethostbyaddr_r takes 8 arguments" >&5
 echo $ECHO_N "checking if gethostbyaddr_r takes 8 arguments... $ECHO_C" >&6
 	  cat >conftest.$ac_ext <<_ACEOF
-#line 9650 "configure"
+#line 9781 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <netdb.h>
 int
 main ()
@@ -9669,36 +9800,36 @@
                      buffer, 8192, &hp, &h_errnop);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:9675: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:9806: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:9678: \$? = $ac_status" >&5
+  echo "$as_me:9809: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:9681: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9812: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9684: \$? = $ac_status" >&5
+  echo "$as_me:9815: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
-	    echo "$as_me:9687: result: yes" >&5
+	    echo "$as_me:9818: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 	    cat >>confdefs.h <<\EOF
 #define HAVE_GETHOSTBYADDR_R_8 1
 EOF
 
 	    ac_cv_gethostbyaddr_args=8
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 
-	    echo "$as_me:9698: result: no" >&5
+	    echo "$as_me:9829: result: no" >&5
 echo "${ECHO_T}no" >&6
 	    have_missing_r_funcs="$have_missing_r_funcs gethostbyaddr_r"
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
@@ -9708,20 +9839,20 @@
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
 done
 
 for ac_func in inet_ntoa_r
 do
-ac_ac_var=`echo "ac_cv_func_$ac_func" | $ac_tr_sh`
-echo "$as_me:9715: checking for $ac_func" >&5
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:9846: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_var+set}\" = set"; then
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9721 "configure"
+#line 9852 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -9746,63 +9877,63 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:9752: \"$ac_link\"") >&5
+if { (eval echo "$as_me:9883: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9755: \$? = $ac_status" >&5
+  echo "$as_me:9886: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:9758: \"$ac_try\"") >&5
+  { (eval echo "$as_me:9889: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9761: \$? = $ac_status" >&5
+  echo "$as_me:9892: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$ac_ac_var=yes"
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-eval "$ac_ac_var=no"
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:9771: result: `eval echo '${'$ac_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_var'}'`" >&6
-if test `eval echo '${'$ac_ac_var'}'` = yes; then
+echo "$as_me:9902: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_func" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
-    echo "$as_me:9778: checking whether inet_ntoa_r is declared" >&5
+    echo "$as_me:9909: checking whether inet_ntoa_r is declared" >&5
 echo $ECHO_N "checking whether inet_ntoa_r is declared... $ECHO_C" >&6
     cat >conftest.$ac_ext <<_ACEOF
-#line 9781 "configure"
+#line 9912 "configure"
 #include "confdefs.h"
 
 #include <arpa/inet.h>
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "inet_ntoa_r" >/dev/null 2>&1; then
 
       cat >>confdefs.h <<\EOF
 #define HAVE_INET_NTOA_R_DECL 1
 EOF
 
-      echo "$as_me:9793: result: yes" >&5
+      echo "$as_me:9924: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 else
 
-      echo "$as_me:9797: result: no" >&5
+      echo "$as_me:9928: result: no" >&5
 echo "${ECHO_T}no" >&6
-      echo "$as_me:9799: checking whether inet_ntoa_r with -D_REENTRANT is declared" >&5
+      echo "$as_me:9930: checking whether inet_ntoa_r with -D_REENTRANT is declared" >&5
 echo $ECHO_N "checking whether inet_ntoa_r with -D_REENTRANT is declared... $ECHO_C" >&6
       cat >conftest.$ac_ext <<_ACEOF
-#line 9802 "configure"
+#line 9933 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
 #include <arpa/inet.h>
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
@@ -9813,36 +9944,36 @@
 EOF
 
 	cat >>confdefs.h <<\EOF
 #define NEED_REENTRANT 1
 EOF
 
-	echo "$as_me:9819: result: yes" >&5
+	echo "$as_me:9950: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 else
-  echo "$as_me:9822: result: no" >&5
+  echo "$as_me:9953: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 rm -f conftest*
 
 fi
 rm -f conftest*
 
 fi
 done
 
 for ac_func in localtime_r
 do
-ac_ac_var=`echo "ac_cv_func_$ac_func" | $ac_tr_sh`
-echo "$as_me:9836: checking for $ac_func" >&5
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:9967: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_var+set}\" = set"; then
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9842 "configure"
+#line 9973 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -9867,108 +9998,108 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:9873: \"$ac_link\"") >&5
+if { (eval echo "$as_me:10004: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:9876: \$? = $ac_status" >&5
+  echo "$as_me:10007: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:9879: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10010: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:9882: \$? = $ac_status" >&5
+  echo "$as_me:10013: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$ac_ac_var=yes"
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-eval "$ac_ac_var=no"
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:9892: result: `eval echo '${'$ac_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_var'}'`" >&6
-if test `eval echo '${'$ac_ac_var'}'` = yes; then
+echo "$as_me:10023: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_func" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
-    echo "$as_me:9899: checking whether localtime_r is declared" >&5
+    echo "$as_me:10030: checking whether localtime_r is declared" >&5
 echo $ECHO_N "checking whether localtime_r is declared... $ECHO_C" >&6
     cat >conftest.$ac_ext <<_ACEOF
-#line 9902 "configure"
+#line 10033 "configure"
 #include "confdefs.h"
 
 #include <time.h>
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "localtime_r" >/dev/null 2>&1; then
 
-      echo "$as_me:9910: result: yes" >&5
+      echo "$as_me:10041: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 else
 
-      echo "$as_me:9914: result: no" >&5
+      echo "$as_me:10045: result: no" >&5
 echo "${ECHO_T}no" >&6
-      echo "$as_me:9916: checking whether localtime_r with -D_REENTRANT is declared" >&5
+      echo "$as_me:10047: checking whether localtime_r with -D_REENTRANT is declared" >&5
 echo $ECHO_N "checking whether localtime_r with -D_REENTRANT is declared... $ECHO_C" >&6
       cat >conftest.$ac_ext <<_ACEOF
-#line 9919 "configure"
+#line 10050 "configure"
 #include "confdefs.h"
 
 #define _REENTRANT
 #include <time.h>
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "localtime_r" >/dev/null 2>&1; then
 
 	cat >>confdefs.h <<\EOF
 #define NEED_REENTRANT 1
 EOF
 
-	echo "$as_me:9932: result: yes" >&5
+	echo "$as_me:10063: result: yes" >&5
 echo "${ECHO_T}yes" >&6
 else
-  echo "$as_me:9935: result: no" >&5
+  echo "$as_me:10066: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 rm -f conftest*
 
 fi
 rm -f conftest*
 
 fi
 done
 
 fi
 
-echo "$as_me:9948: checking for ANSI C header files" >&5
+echo "$as_me:10079: checking for ANSI C header files" >&5
 echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
 if test "${ac_cv_header_stdc+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 9954 "configure"
+#line 10085 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
 #include <float.h>
 
 _ACEOF
-if { (eval echo "$as_me:9962: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:10093: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:9968: \$? = $ac_status" >&5
+  echo "$as_me:10099: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -9984,13 +10115,13 @@
 fi
 rm -f conftest.err conftest.$ac_ext
 
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
   cat >conftest.$ac_ext <<_ACEOF
-#line 9990 "configure"
+#line 10121 "configure"
 #include "confdefs.h"
 #include <string.h>
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "memchr" >/dev/null 2>&1; then
@@ -10002,13 +10133,13 @@
 
 fi
 
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
   cat >conftest.$ac_ext <<_ACEOF
-#line 10008 "configure"
+#line 10139 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "free" >/dev/null 2>&1; then
@@ -10023,13 +10154,13 @@
 if test $ac_cv_header_stdc = yes; then
   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
   if test "$cross_compiling" = yes; then
   :
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10029 "configure"
+#line 10160 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #if ((' ' & 0x0FF) == 0x020)
 # define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
 # define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
 #else
@@ -10049,34 +10180,34 @@
         || toupper (i) != TOUPPER (i))
       exit(2);
   exit (0);
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:10055: \"$ac_link\"") >&5
+if { (eval echo "$as_me:10186: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:10058: \$? = $ac_status" >&5
+  echo "$as_me:10189: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:10060: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10191: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10063: \$? = $ac_status" >&5
+  echo "$as_me:10194: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   :
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_header_stdc=no
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
 fi
-echo "$as_me:10076: result: $ac_cv_header_stdc" >&5
+echo "$as_me:10207: result: $ac_cv_header_stdc" >&5
 echo "${ECHO_T}$ac_cv_header_stdc" >&6
 if test $ac_cv_header_stdc = yes; then
 
 cat >>confdefs.h <<\EOF
 #define STDC_HEADERS 1
 EOF
@@ -10109,67 +10240,67 @@
         winsock.h \
         time.h \
         io.h \
         pwd.h
 
 do
-ac_ac_Header=`echo "ac_cv_header_$ac_header" | $ac_tr_sh`
-echo "$as_me:10116: checking for $ac_header" >&5
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:10247: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_Header+set}\" = set"; then
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10122 "configure"
+#line 10253 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:10126: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:10257: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:10132: \$? = $ac_status" >&5
+  echo "$as_me:10263: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
 else
   ac_cpp_err=yes
 fi
 if test -z "$ac_cpp_err"; then
-  eval "$ac_ac_Header=yes"
+  eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
-  eval "$ac_ac_Header=no"
+  eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:10151: result: `eval echo '${'$ac_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_Header'}'`" >&6
-if test `eval echo '${'$ac_ac_Header'}'` = yes; then
+echo "$as_me:10282: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_header" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
-echo "$as_me:10161: checking for $CC option to accept ANSI C" >&5
+echo "$as_me:10292: checking for $CC option to accept ANSI C" >&5
 echo $ECHO_N "checking for $CC option to accept ANSI C... $ECHO_C" >&6
 if test "${ac_cv_prog_cc_stdc+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_cv_prog_cc_stdc=no
 ac_save_CC=$CC
 cat >conftest.$ac_ext <<_ACEOF
-#line 10169 "configure"
+#line 10300 "configure"
 #include "confdefs.h"
 #include <stdarg.h>
 #include <stdio.h>
 #include <sys/types.h>
 #include <sys/stat.h>
 /* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
@@ -10212,22 +10343,22 @@
 # HP-UX older versions	-Aa -D_HPUX_SOURCE
 # SVR4			-Xc -D__EXTENSIONS__
 for ac_arg in "" -qlanglvl=ansi -std1 -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
 do
   CC="$ac_save_CC $ac_arg"
   rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10218: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10349: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10221: \$? = $ac_status" >&5
+  echo "$as_me:10352: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10224: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10355: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10227: \$? = $ac_status" >&5
+  echo "$as_me:10358: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_prog_cc_stdc=$ac_arg
 break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
@@ -10238,27 +10369,27 @@
 CC=$ac_save_CC
 
 fi
 
 case "x$ac_cv_prog_cc_stdc" in
   x|xno)
-    echo "$as_me:10244: result: none needed" >&5
+    echo "$as_me:10375: result: none needed" >&5
 echo "${ECHO_T}none needed" >&6 ;;
   *)
-    echo "$as_me:10247: result: $ac_cv_prog_cc_stdc" >&5
+    echo "$as_me:10378: result: $ac_cv_prog_cc_stdc" >&5
 echo "${ECHO_T}$ac_cv_prog_cc_stdc" >&6
     CC="$CC $ac_cv_prog_cc_stdc" ;;
 esac
 
-echo "$as_me:10252: checking for an ANSI C-conforming const" >&5
+echo "$as_me:10383: checking for an ANSI C-conforming const" >&5
 echo $ECHO_N "checking for an ANSI C-conforming const... $ECHO_C" >&6
 if test "${ac_cv_c_const+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10258 "configure"
+#line 10389 "configure"
 #include "confdefs.h"
 
 int
 main ()
 {
 /* FIXME: Include the comments suggested by Paul. */
@@ -10310,96 +10441,95 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10316: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10447: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10319: \$? = $ac_status" >&5
+  echo "$as_me:10450: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10322: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10453: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10325: \$? = $ac_status" >&5
+  echo "$as_me:10456: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_c_const=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_c_const=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:10335: result: $ac_cv_c_const" >&5
+echo "$as_me:10466: result: $ac_cv_c_const" >&5
 echo "${ECHO_T}$ac_cv_c_const" >&6
 if test $ac_cv_c_const = no; then
 
 cat >>confdefs.h <<\EOF
 #define const
 EOF
 
 fi
 
-for ac_header in stdlib.h string.h memory.h strings.h inttypes.h unistd.h
+# On IRIX 5.3, sys/types and inttypes.h are conflicting.
+
+for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
+                  inttypes.h stdint.h unistd.h
 do
-ac_ac_Header=`echo "ac_cv_header_$ac_header" | $ac_tr_sh`
-echo "$as_me:10348: checking for $ac_header" >&5
+as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
+echo "$as_me:10482: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_Header+set}\" = set"; then
+if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10354 "configure"
+#line 10488 "configure"
 #include "confdefs.h"
+$ac_includes_default
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:10358: \"$ac_cpp conftest.$ac_ext\"") >&5
-  (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:10494: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
   ac_status=$?
-  egrep -v '^ *\+' conftest.er1 >conftest.err
-  rm -f conftest.er1
-  cat conftest.err >&5
-  echo "$as_me:10364: \$? = $ac_status" >&5
-  (exit $ac_status); } >/dev/null; then
-  if test -s conftest.err; then
-    ac_cpp_err=$ac_c_preproc_warn_flag
-  else
-    ac_cpp_err=
-  fi
-else
-  ac_cpp_err=yes
-fi
-if test -z "$ac_cpp_err"; then
-  eval "$ac_ac_Header=yes"
+  echo "$as_me:10497: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:10500: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:10503: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
-  cat conftest.$ac_ext >&5
-  eval "$ac_ac_Header=no"
+cat conftest.$ac_ext >&5
+eval "$as_ac_Header=no"
 fi
-rm -f conftest.err conftest.$ac_ext
+rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:10383: result: `eval echo '${'$ac_ac_Header'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_Header'}'`" >&6
-if test `eval echo '${'$ac_ac_Header'}'` = yes; then
+echo "$as_me:10513: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
+if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_header" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
-echo "$as_me:10393: checking for size_t" >&5
+echo "$as_me:10523: checking for size_t" >&5
 echo $ECHO_N "checking for size_t... $ECHO_C" >&6
 if test "${ac_cv_type_size_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10399 "configure"
+#line 10529 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((size_t *) 0)
@@ -10408,103 +10538,104 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10414: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10544: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10417: \$? = $ac_status" >&5
+  echo "$as_me:10547: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10420: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10550: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10423: \$? = $ac_status" >&5
+  echo "$as_me:10553: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_size_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_size_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:10433: result: $ac_cv_type_size_t" >&5
+echo "$as_me:10563: result: $ac_cv_type_size_t" >&5
 echo "${ECHO_T}$ac_cv_type_size_t" >&6
 if test $ac_cv_type_size_t = yes; then
   :
 else
 
 cat >>confdefs.h <<EOF
 #define size_t unsigned
 EOF
 
 fi
 
-echo "$as_me:10445: checking whether time.h and sys/time.h may both be included" >&5
+echo "$as_me:10575: checking whether time.h and sys/time.h may both be included" >&5
 echo $ECHO_N "checking whether time.h and sys/time.h may both be included... $ECHO_C" >&6
 if test "${ac_cv_header_time+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10451 "configure"
+#line 10581 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/time.h>
 #include <time.h>
 
 int
 main ()
 {
-struct tm *tp;
+if ((struct tm *) 0)
+return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10466: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10597: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10469: \$? = $ac_status" >&5
+  echo "$as_me:10600: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10472: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10603: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10475: \$? = $ac_status" >&5
+  echo "$as_me:10606: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_header_time=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_header_time=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:10485: result: $ac_cv_header_time" >&5
+echo "$as_me:10616: result: $ac_cv_header_time" >&5
 echo "${ECHO_T}$ac_cv_header_time" >&6
 if test $ac_cv_header_time = yes; then
 
 cat >>confdefs.h <<\EOF
 #define TIME_WITH_SYS_TIME 1
 EOF
 
 fi
 
 # mprintf() checks:
 
 # check for 'long double'
-echo "$as_me:10498: checking for long double" >&5
+echo "$as_me:10629: checking for long double" >&5
 echo $ECHO_N "checking for long double... $ECHO_C" >&6
 if test "${ac_cv_type_long_double+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10504 "configure"
+#line 10635 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((long double *) 0)
@@ -10513,91 +10644,91 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10519: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10650: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10522: \$? = $ac_status" >&5
+  echo "$as_me:10653: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10525: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10656: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10528: \$? = $ac_status" >&5
+  echo "$as_me:10659: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_long_double=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_long_double=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:10538: result: $ac_cv_type_long_double" >&5
+echo "$as_me:10669: result: $ac_cv_type_long_double" >&5
 echo "${ECHO_T}$ac_cv_type_long_double" >&6
 
-echo "$as_me:10541: checking size of long double" >&5
+echo "$as_me:10672: checking size of long double" >&5
 echo $ECHO_N "checking size of long double... $ECHO_C" >&6
 if test "${ac_cv_sizeof_long_double+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$ac_cv_type_long_double" = yes; then
   if test "$cross_compiling" = yes; then
   # Depending upon the size, compute the lo and hi bounds.
 cat >conftest.$ac_ext <<_ACEOF
-#line 10550 "configure"
+#line 10681 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long double)) >= 0)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10562: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10693: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10565: \$? = $ac_status" >&5
+  echo "$as_me:10696: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10568: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10699: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10571: \$? = $ac_status" >&5
+  echo "$as_me:10702: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=0 ac_mid=0
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 10576 "configure"
+#line 10707 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long double)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10588: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10719: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10591: \$? = $ac_status" >&5
+  echo "$as_me:10722: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10594: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10725: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10597: \$? = $ac_status" >&5
+  echo "$as_me:10728: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`; ac_mid=`expr 2 '*' $ac_mid + 1`
@@ -10607,34 +10738,34 @@
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=-1 ac_mid=-1
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 10613 "configure"
+#line 10744 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long double)) >= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10625: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10756: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10628: \$? = $ac_status" >&5
+  echo "$as_me:10759: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10631: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10762: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10634: \$? = $ac_status" >&5
+  echo "$as_me:10765: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=`expr $ac_mid - 1`; ac_mid=`expr 2 '*' $ac_mid`
@@ -10644,52 +10775,52 @@
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 # Binary search between lo and hi bounds.
 while test "x$ac_lo" != "x$ac_hi"; do
   ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
   cat >conftest.$ac_ext <<_ACEOF
-#line 10650 "configure"
+#line 10781 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long double)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10662: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10793: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10665: \$? = $ac_status" >&5
+  echo "$as_me:10796: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10668: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10799: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10671: \$? = $ac_status" >&5
+  echo "$as_me:10802: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 done
 ac_cv_sizeof_long_double=$ac_lo
 else
   if test "$cross_compiling" = yes; then
-  { { echo "$as_me:10684: error: cannot run test program while cross compiling" >&5
+  { { echo "$as_me:10815: error: cannot run test program while cross compiling" >&5
 echo "$as_me: error: cannot run test program while cross compiling" >&2;}
    { (exit 1); exit 1; }; }
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10689 "configure"
+#line 10820 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 FILE *f = fopen ("conftest.val", "w");
@@ -10699,50 +10830,50 @@
 fclose (f);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:10705: \"$ac_link\"") >&5
+if { (eval echo "$as_me:10836: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:10708: \$? = $ac_status" >&5
+  echo "$as_me:10839: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:10710: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10841: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10713: \$? = $ac_status" >&5
+  echo "$as_me:10844: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sizeof_long_double=`cat conftest.val`
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
 rm -f conftest.val
 else
   ac_cv_sizeof_long_double=0
 fi
 fi
-echo "$as_me:10729: result: $ac_cv_sizeof_long_double" >&5
+echo "$as_me:10860: result: $ac_cv_sizeof_long_double" >&5
 echo "${ECHO_T}$ac_cv_sizeof_long_double" >&6
 cat >>confdefs.h <<EOF
 #define SIZEOF_LONG_DOUBLE $ac_cv_sizeof_long_double
 EOF
 
 # check for 'long long'
-echo "$as_me:10736: checking for long long" >&5
+echo "$as_me:10867: checking for long long" >&5
 echo $ECHO_N "checking for long long... $ECHO_C" >&6
 if test "${ac_cv_type_long_long+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10742 "configure"
+#line 10873 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((long long *) 0)
@@ -10751,91 +10882,91 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10757: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10888: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10760: \$? = $ac_status" >&5
+  echo "$as_me:10891: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10763: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10894: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10766: \$? = $ac_status" >&5
+  echo "$as_me:10897: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_long_long=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_long_long=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:10776: result: $ac_cv_type_long_long" >&5
+echo "$as_me:10907: result: $ac_cv_type_long_long" >&5
 echo "${ECHO_T}$ac_cv_type_long_long" >&6
 
-echo "$as_me:10779: checking size of long long" >&5
+echo "$as_me:10910: checking size of long long" >&5
 echo $ECHO_N "checking size of long long... $ECHO_C" >&6
 if test "${ac_cv_sizeof_long_long+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$ac_cv_type_long_long" = yes; then
   if test "$cross_compiling" = yes; then
   # Depending upon the size, compute the lo and hi bounds.
 cat >conftest.$ac_ext <<_ACEOF
-#line 10788 "configure"
+#line 10919 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long long)) >= 0)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10800: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10931: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10803: \$? = $ac_status" >&5
+  echo "$as_me:10934: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10806: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10937: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10809: \$? = $ac_status" >&5
+  echo "$as_me:10940: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=0 ac_mid=0
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 10814 "configure"
+#line 10945 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long long)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10826: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10957: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10829: \$? = $ac_status" >&5
+  echo "$as_me:10960: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10832: \"$ac_try\"") >&5
+  { (eval echo "$as_me:10963: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10835: \$? = $ac_status" >&5
+  echo "$as_me:10966: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`; ac_mid=`expr 2 '*' $ac_mid + 1`
@@ -10845,34 +10976,34 @@
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=-1 ac_mid=-1
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 10851 "configure"
+#line 10982 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long long)) >= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10863: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:10994: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10866: \$? = $ac_status" >&5
+  echo "$as_me:10997: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10869: \"$ac_try\"") >&5
+  { (eval echo "$as_me:11000: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10872: \$? = $ac_status" >&5
+  echo "$as_me:11003: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=`expr $ac_mid - 1`; ac_mid=`expr 2 '*' $ac_mid`
@@ -10882,52 +11013,52 @@
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 # Binary search between lo and hi bounds.
 while test "x$ac_lo" != "x$ac_hi"; do
   ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
   cat >conftest.$ac_ext <<_ACEOF
-#line 10888 "configure"
+#line 11019 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long long)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10900: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:11031: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10903: \$? = $ac_status" >&5
+  echo "$as_me:11034: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:10906: \"$ac_try\"") >&5
+  { (eval echo "$as_me:11037: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10909: \$? = $ac_status" >&5
+  echo "$as_me:11040: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 done
 ac_cv_sizeof_long_long=$ac_lo
 else
   if test "$cross_compiling" = yes; then
-  { { echo "$as_me:10922: error: cannot run test program while cross compiling" >&5
+  { { echo "$as_me:11053: error: cannot run test program while cross compiling" >&5
 echo "$as_me: error: cannot run test program while cross compiling" >&2;}
    { (exit 1); exit 1; }; }
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10927 "configure"
+#line 11058 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 FILE *f = fopen ("conftest.val", "w");
@@ -10937,50 +11068,50 @@
 fclose (f);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:10943: \"$ac_link\"") >&5
+if { (eval echo "$as_me:11074: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:10946: \$? = $ac_status" >&5
+  echo "$as_me:11077: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:10948: \"$ac_try\"") >&5
+  { (eval echo "$as_me:11079: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:10951: \$? = $ac_status" >&5
+  echo "$as_me:11082: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sizeof_long_long=`cat conftest.val`
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
-rm -f core core.* *.core conftest$ac_exeext conftest.$ac_ext
+rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
 rm -f conftest.val
 else
   ac_cv_sizeof_long_long=0
 fi
 fi
-echo "$as_me:10967: result: $ac_cv_sizeof_long_long" >&5
+echo "$as_me:11098: result: $ac_cv_sizeof_long_long" >&5
 echo "${ECHO_T}$ac_cv_sizeof_long_long" >&6
 cat >>confdefs.h <<EOF
 #define SIZEOF_LONG_LONG $ac_cv_sizeof_long_long
 EOF
 
 # check for ssize_t
-echo "$as_me:10974: checking for ssize_t" >&5
+echo "$as_me:11105: checking for ssize_t" >&5
 echo $ECHO_N "checking for ssize_t... $ECHO_C" >&6
 if test "${ac_cv_type_ssize_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 10980 "configure"
+#line 11111 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((ssize_t *) 0)
@@ -10989,128 +11120,170 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:10995: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:11126: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:10998: \$? = $ac_status" >&5
+  echo "$as_me:11129: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:11001: \"$ac_try\"") >&5
+  { (eval echo "$as_me:11132: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:11004: \$? = $ac_status" >&5
+  echo "$as_me:11135: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_ssize_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_ssize_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:11014: result: $ac_cv_type_ssize_t" >&5
+echo "$as_me:11145: result: $ac_cv_type_ssize_t" >&5
 echo "${ECHO_T}$ac_cv_type_ssize_t" >&6
 if test $ac_cv_type_ssize_t = yes; then
   :
 else
 
 cat >>confdefs.h <<EOF
 #define ssize_t int
 EOF
 
 fi
 
-if test "$ac_cv_header_sys_socket_h" = "yes"; then
-   echo "$as_me:11027: checking for socklen_t in sys/socket.h" >&5
-echo $ECHO_N "checking for socklen_t in sys/socket.h... $ECHO_C" >&6
-   cat >conftest.$ac_ext <<_ACEOF
-#line 11030 "configure"
-#include "confdefs.h"
-#include <sys/socket.h>
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  egrep "socklen_t" >/dev/null 2>&1; then
-  socklen_t=yes
-    echo "$as_me:11038: result: yes" >&5
-echo "${ECHO_T}yes" >&6
-else
-  echo "$as_me:11041: result: no" >&5
-echo "${ECHO_T}no" >&6
-fi
-rm -f conftest*
-
-fi
-
-if test "$socklen_t" != "yes"; then
-  # check for socklen_t the standard way if it wasn't found before
-  echo "$as_me:11050: checking for socklen_t" >&5
+   echo "$as_me:11157: checking for socklen_t" >&5
 echo $ECHO_N "checking for socklen_t... $ECHO_C" >&6
 if test "${ac_cv_type_socklen_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 11056 "configure"
+#line 11163 "configure"
 #include "confdefs.h"
-$ac_includes_default
+#include <sys/types.h>
+#include <sys/socket.h>
+
 int
 main ()
 {
 if ((socklen_t *) 0)
   return 0;
 if (sizeof (socklen_t))
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:11071: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:11180: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:11074: \$? = $ac_status" >&5
+  echo "$as_me:11183: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:11077: \"$ac_try\"") >&5
+  { (eval echo "$as_me:11186: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:11080: \$? = $ac_status" >&5
+  echo "$as_me:11189: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_socklen_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_socklen_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:11090: result: $ac_cv_type_socklen_t" >&5
+echo "$as_me:11199: result: $ac_cv_type_socklen_t" >&5
 echo "${ECHO_T}$ac_cv_type_socklen_t" >&6
 if test $ac_cv_type_socklen_t = yes; then
   :
 else
 
-cat >>confdefs.h <<EOF
-#define socklen_t int
-EOF
+      echo "$as_me:11205: checking for socklen_t equivalent" >&5
+echo $ECHO_N "checking for socklen_t equivalent... $ECHO_C" >&6
+      if test "${curl_cv_socklen_t_equiv+set}" = set; then
+  echo $ECHO_N "(cached) $ECHO_C" >&6
+else
+
+         # Systems have either "struct sockaddr *" or
+         # "void *" as the second argument to getpeername
+         curl_cv_socklen_t_equiv=
+         for arg2 in "struct sockaddr" void; do
+            for t in int size_t unsigned long "unsigned long"; do
+               cat >conftest.$ac_ext <<_ACEOF
+#line 11217 "configure"
+#include "confdefs.h"
+
+                  #include <sys/types.h>
+                  #include <sys/socket.h>
+
+                  int getpeername (int, $arg2 *, $t *);
+
+int
+main ()
+{
+
+                  $t len;
+                  getpeername(0,0,&len);
+
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:11237: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:11240: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:11243: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:11246: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+
+                  curl_cv_socklen_t_equiv="$t"
+                  break
 
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
 fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+            done
+         done
+
+         if test "x$curl_cv_socklen_t_equiv" = x; then
+            { { echo "$as_me:11261: error: Cannot find a type to use in place of socklen_t" >&5
+echo "$as_me: error: Cannot find a type to use in place of socklen_t" >&2;}
+   { (exit 1); exit 1; }; }
+         fi
 
 fi
 
-echo "$as_me:11104: checking return type of signal handlers" >&5
+      echo "$as_me:11268: result: $curl_cv_socklen_t_equiv" >&5
+echo "${ECHO_T}$curl_cv_socklen_t_equiv" >&6
+
+cat >>confdefs.h <<EOF
+#define socklen_t $curl_cv_socklen_t_equiv
+EOF
+
+fi
+
+echo "$as_me:11277: checking return type of signal handlers" >&5
 echo $ECHO_N "checking return type of signal handlers... $ECHO_C" >&6
 if test "${ac_cv_type_signal+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 11110 "configure"
+#line 11283 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
 #ifdef signal
 # undef signal
 #endif
@@ -11126,32 +11299,32 @@
 int i;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:11132: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:11305: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:11135: \$? = $ac_status" >&5
+  echo "$as_me:11308: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:11138: \"$ac_try\"") >&5
+  { (eval echo "$as_me:11311: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:11141: \$? = $ac_status" >&5
+  echo "$as_me:11314: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_signal=void
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_signal=int
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:11151: result: $ac_cv_type_signal" >&5
+echo "$as_me:11324: result: $ac_cv_type_signal" >&5
 echo "${ECHO_T}$ac_cv_type_signal" >&6
 
 cat >>confdefs.h <<EOF
 #define RETSIGTYPE $ac_cv_type_signal
 EOF
 
@@ -11182,20 +11355,20 @@
                 strlcat \
                 getpwuid \
                 geteuid \
                 dlopen
 
 do
-ac_ac_var=`echo "ac_cv_func_$ac_func" | $ac_tr_sh`
-echo "$as_me:11189: checking for $ac_func" >&5
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:11362: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
-if eval "test \"\${$ac_ac_var+set}\" = set"; then
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 11195 "configure"
+#line 11368 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -11220,55 +11393,55 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:11226: \"$ac_link\"") >&5
+if { (eval echo "$as_me:11399: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:11229: \$? = $ac_status" >&5
+  echo "$as_me:11402: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:11232: \"$ac_try\"") >&5
+  { (eval echo "$as_me:11405: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:11235: \$? = $ac_status" >&5
+  echo "$as_me:11408: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  eval "$ac_ac_var=yes"
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-eval "$ac_ac_var=no"
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:11245: result: `eval echo '${'$ac_ac_var'}'`" >&5
-echo "${ECHO_T}`eval echo '${'$ac_ac_var'}'`" >&6
-if test `eval echo '${'$ac_ac_var'}'` = yes; then
+echo "$as_me:11418: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
-#define `echo "HAVE_$ac_func" | $ac_tr_cpp` 1
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 if test "$ac_cv_func_select" != "yes"; then
-  { { echo "$as_me:11256: error: Can't work without an existing select() function" >&5
+  { { echo "$as_me:11429: error: Can't work without an existing select() function" >&5
 echo "$as_me: error: Can't work without an existing select() function" >&2;}
    { (exit 1); exit 1; }; }
 fi
 if test "$ac_cv_func_socket" != "yes"; then
-  { { echo "$as_me:11261: error: Can't work without an existing socket() function" >&5
+  { { echo "$as_me:11434: error: Can't work without an existing socket() function" >&5
 echo "$as_me: error: Can't work without an existing socket() function" >&2;}
    { (exit 1); exit 1; }; }
 fi
 
 # Extract the first word of "perl", so it can be a program name with args.
 set dummy perl; ac_word=$2
-echo "$as_me:11268: checking for $ac_word" >&5
+echo "$as_me:11441: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_path_PERL+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   case $PERL in
   [\\/]* | ?:[\\/]*)
@@ -11279,35 +11452,35 @@
 ac_dummy="$PATH:/usr/local/bin/perl:/usr/bin/:/usr/local/bin "
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   if $as_executable_p "$ac_dir/$ac_word"; then
    ac_cv_path_PERL="$ac_dir/$ac_word"
-   echo "$as_me:11285: found $ac_dir/$ac_word" >&5
+   echo "$as_me:11458: found $ac_dir/$ac_word" >&5
    break
 fi
 done
 
   ;;
 esac
 fi
 PERL=$ac_cv_path_PERL
 
 if test -n "$PERL"; then
-  echo "$as_me:11296: result: $PERL" >&5
+  echo "$as_me:11469: result: $PERL" >&5
 echo "${ECHO_T}$PERL" >&6
 else
-  echo "$as_me:11299: result: no" >&5
+  echo "$as_me:11472: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 for ac_prog in gnroff nroff
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-echo "$as_me:11307: checking for $ac_word" >&5
+echo "$as_me:11480: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_path_NROFF+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   case $NROFF in
   [\\/]* | ?:[\\/]*)
@@ -11318,38 +11491,38 @@
 ac_dummy="$PATH:/usr/bin/:/usr/local/bin "
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   if $as_executable_p "$ac_dir/$ac_word"; then
    ac_cv_path_NROFF="$ac_dir/$ac_word"
-   echo "$as_me:11324: found $ac_dir/$ac_word" >&5
+   echo "$as_me:11497: found $ac_dir/$ac_word" >&5
    break
 fi
 done
 
   ;;
 esac
 fi
 NROFF=$ac_cv_path_NROFF
 
 if test -n "$NROFF"; then
-  echo "$as_me:11335: result: $NROFF" >&5
+  echo "$as_me:11508: result: $NROFF" >&5
 echo "${ECHO_T}$NROFF" >&6
 else
-  echo "$as_me:11338: result: no" >&5
+  echo "$as_me:11511: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   test -n "$NROFF" && break
 done
 
 for ac_prog in 'bison -y' byacc
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-echo "$as_me:11349: checking for $ac_word" >&5
+echo "$as_me:11522: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_YACC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$YACC"; then
   ac_cv_prog_YACC="$YACC" # Let the user override the test.
@@ -11358,24 +11531,24 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_YACC="$ac_prog"
-echo "$as_me:11364: found $ac_dir/$ac_word" >&5
+echo "$as_me:11537: found $ac_dir/$ac_word" >&5
 break
 done
 
 fi
 fi
 YACC=$ac_cv_prog_YACC
 if test -n "$YACC"; then
-  echo "$as_me:11372: result: $YACC" >&5
+  echo "$as_me:11545: result: $YACC" >&5
 echo "${ECHO_T}$YACC" >&6
 else
-  echo "$as_me:11375: result: no" >&5
+  echo "$as_me:11548: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
   test -n "$YACC" && break
 done
 test -n "$YACC" || YACC="yacc"
@@ -11408,18 +11581,18 @@
     case `(ac_space=' '; set | grep ac_space) 2>&1` in
     *ac_space=\ *)
       # `set' does not quote correctly, so add quotes (double-quote
       # substitution turns \\\\ into \\, and sed turns \\ into \).
       sed -n \
         "s/'/'\\\\''/g;
-    	  s/^\\([_$ac_cr_alnum]*_cv_[_$ac_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
+    	  s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1='\\2'/p"
       ;;
     *)
       # `set' quotes correctly as required by POSIX, so do not add quotes.
       sed -n \
-        "s/^\\([_$ac_cr_alnum]*_cv_[_$ac_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
+        "s/^\\([_$as_cr_alnum]*_cv_[_$as_cr_alnum]*\\)=\\(.*\\)/\\1=\\2/p"
       ;;
     esac;
 } |
   sed '
      t clear
      : clear
@@ -11458,13 +11631,13 @@
 
 DEFS=-DHAVE_CONFIG_H
 
 : ${CONFIG_STATUS=./config.status}
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files $CONFIG_STATUS"
-{ echo "$as_me:11464: creating $CONFIG_STATUS" >&5
+{ echo "$as_me:11637: creating $CONFIG_STATUS" >&5
 echo "$as_me: creating $CONFIG_STATUS" >&6;}
 cat >$CONFIG_STATUS <<_ACEOF
 #! $SHELL
 # Generated automatically by configure.
 # Run this file to recreate the current configuration.
 # Compiler output produced by configure, useful for debugging
@@ -11590,13 +11763,13 @@
 Report bugs to <bug-autoconf@gnu.org>."
 EOF
 
 cat >>$CONFIG_STATUS <<EOF
 ac_cs_version="\\
 config.status
-configured by $0, generated by GNU Autoconf 2.50,
+configured by $0, generated by GNU Autoconf 2.52,
   with options \\"`echo "$ac_configure_args" | sed 's/[\\""\`\$]/\\\\&/g'`\\"
 
 Copyright 1992, 1993, 1994, 1995, 1996, 1998, 1999, 2000, 2001
 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
@@ -11634,13 +11807,13 @@
 EOF
 cat >>$CONFIG_STATUS <<\EOF
   --version | --vers* | -V )
     echo "$ac_cs_version"; exit 0 ;;
   --he | --h)
     # Conflict between --help and --header
-    { { echo "$as_me:11640: error: ambiguous option: $1
+    { { echo "$as_me:11813: error: ambiguous option: $1
 Try \`$0 --help' for more information." >&5
 echo "$as_me: error: ambiguous option: $1
 Try \`$0 --help' for more information." >&2;}
    { (exit 1); exit 1; }; };;
   --help | --hel | -h )
     echo "$ac_cs_usage"; exit 0 ;;
@@ -11652,66 +11825,85 @@
     ac_need_defaults=false;;
   --header | --heade | --head | --hea )
     shift
     CONFIG_HEADERS="$CONFIG_HEADERS $1"
     ac_need_defaults=false;;
 
-  # Handling of arguments.
-  'Makefile' ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
-  'docs/Makefile' ) CONFIG_FILES="$CONFIG_FILES docs/Makefile" ;;
-  'docs/examples/Makefile' ) CONFIG_FILES="$CONFIG_FILES docs/examples/Makefile" ;;
-  'include/Makefile' ) CONFIG_FILES="$CONFIG_FILES include/Makefile" ;;
-  'include/curl/Makefile' ) CONFIG_FILES="$CONFIG_FILES include/curl/Makefile" ;;
-  'src/Makefile' ) CONFIG_FILES="$CONFIG_FILES src/Makefile" ;;
-  'lib/Makefile' ) CONFIG_FILES="$CONFIG_FILES lib/Makefile" ;;
-  'tests/Makefile' ) CONFIG_FILES="$CONFIG_FILES tests/Makefile" ;;
-  'tests/data/Makefile' ) CONFIG_FILES="$CONFIG_FILES tests/data/Makefile" ;;
-  'packages/Makefile' ) CONFIG_FILES="$CONFIG_FILES packages/Makefile" ;;
-  'packages/Win32/Makefile' ) CONFIG_FILES="$CONFIG_FILES packages/Win32/Makefile" ;;
-  'packages/Linux/Makefile' ) CONFIG_FILES="$CONFIG_FILES packages/Linux/Makefile" ;;
-  'packages/Linux/RPM/Makefile' ) CONFIG_FILES="$CONFIG_FILES packages/Linux/RPM/Makefile" ;;
-  'packages/Linux/RPM/curl.spec' ) CONFIG_FILES="$CONFIG_FILES packages/Linux/RPM/curl.spec" ;;
-  'packages/Linux/RPM/curl-ssl.spec' ) CONFIG_FILES="$CONFIG_FILES packages/Linux/RPM/curl-ssl.spec" ;;
-  'packages/Solaris/Makefile' ) CONFIG_FILES="$CONFIG_FILES packages/Solaris/Makefile" ;;
-  'perl/Makefile' ) CONFIG_FILES="$CONFIG_FILES perl/Makefile" ;;
-  'perl/Curl_easy/Makefile' ) CONFIG_FILES="$CONFIG_FILES perl/Curl_easy/Makefile" ;;
-  'php/Makefile' ) CONFIG_FILES="$CONFIG_FILES php/Makefile" ;;
-  'php/examples/Makefile' ) CONFIG_FILES="$CONFIG_FILES php/examples/Makefile" ;;
-  'curl-config' ) CONFIG_FILES="$CONFIG_FILES curl-config" ;;
-  'default-1' ) CONFIG_COMMANDS="$CONFIG_COMMANDS default-1" ;;
-  'config.h' ) CONFIG_HEADERS="$CONFIG_HEADERS config.h" ;;
-  'src/config.h' ) CONFIG_HEADERS="$CONFIG_HEADERS src/config.h" ;;
-
   # This is an error.
-  -*) { { echo "$as_me:11685: error: unrecognized option: $1
+  -*) { { echo "$as_me:11832: error: unrecognized option: $1
 Try \`$0 --help' for more information." >&5
 echo "$as_me: error: unrecognized option: $1
 Try \`$0 --help' for more information." >&2;}
    { (exit 1); exit 1; }; } ;;
-  *) { { echo "$as_me:11690: error: invalid argument: $1" >&5
-echo "$as_me: error: invalid argument: $1" >&2;}
-   { (exit 1); exit 1; }; };;
+
+  *) ac_config_targets="$ac_config_targets $1" ;;
+
   esac
   shift
 done
 
 exec 5>>config.log
 cat >&5 << _ACEOF
 
 ## ----------------------- ##
 ## Running config.status.  ##
 ## ----------------------- ##
 
-This file was extended by $as_me 2.50, executed with
+This file was extended by $as_me 2.52, executed with
+  CONFIG_FILES    = $CONFIG_FILES
+  CONFIG_HEADERS  = $CONFIG_HEADERS
+  CONFIG_LINKS    = $CONFIG_LINKS
+  CONFIG_COMMANDS = $CONFIG_COMMANDS
   > $ac_cs_invocation
 on `(hostname || uname -n) 2>/dev/null | sed 1q`
 
 _ACEOF
 EOF
 
+cat >>$CONFIG_STATUS <<EOF
+#
+# INIT-COMMANDS section.
+#
+
+EOF
+
 cat >>$CONFIG_STATUS <<\EOF
+for ac_config_target in $ac_config_targets
+do
+  case "$ac_config_target" in
+  # Handling of arguments.
+  "Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
+  "docs/Makefile" ) CONFIG_FILES="$CONFIG_FILES docs/Makefile" ;;
+  "docs/examples/Makefile" ) CONFIG_FILES="$CONFIG_FILES docs/examples/Makefile" ;;
+  "include/Makefile" ) CONFIG_FILES="$CONFIG_FILES include/Makefile" ;;
+  "include/curl/Makefile" ) CONFIG_FILES="$CONFIG_FILES include/curl/Makefile" ;;
+  "src/Makefile" ) CONFIG_FILES="$CONFIG_FILES src/Makefile" ;;
+  "lib/Makefile" ) CONFIG_FILES="$CONFIG_FILES lib/Makefile" ;;
+  "tests/Makefile" ) CONFIG_FILES="$CONFIG_FILES tests/Makefile" ;;
+  "tests/data/Makefile" ) CONFIG_FILES="$CONFIG_FILES tests/data/Makefile" ;;
+  "packages/Makefile" ) CONFIG_FILES="$CONFIG_FILES packages/Makefile" ;;
+  "packages/Win32/Makefile" ) CONFIG_FILES="$CONFIG_FILES packages/Win32/Makefile" ;;
+  "packages/Linux/Makefile" ) CONFIG_FILES="$CONFIG_FILES packages/Linux/Makefile" ;;
+  "packages/Linux/RPM/Makefile" ) CONFIG_FILES="$CONFIG_FILES packages/Linux/RPM/Makefile" ;;
+  "packages/Linux/RPM/curl.spec" ) CONFIG_FILES="$CONFIG_FILES packages/Linux/RPM/curl.spec" ;;
+  "packages/Linux/RPM/curl-ssl.spec" ) CONFIG_FILES="$CONFIG_FILES packages/Linux/RPM/curl-ssl.spec" ;;
+  "packages/Solaris/Makefile" ) CONFIG_FILES="$CONFIG_FILES packages/Solaris/Makefile" ;;
+  "perl/Makefile" ) CONFIG_FILES="$CONFIG_FILES perl/Makefile" ;;
+  "perl/Curl_easy/Makefile" ) CONFIG_FILES="$CONFIG_FILES perl/Curl_easy/Makefile" ;;
+  "php/Makefile" ) CONFIG_FILES="$CONFIG_FILES php/Makefile" ;;
+  "php/examples/Makefile" ) CONFIG_FILES="$CONFIG_FILES php/examples/Makefile" ;;
+  "curl-config" ) CONFIG_FILES="$CONFIG_FILES curl-config" ;;
+  "default-1" ) CONFIG_COMMANDS="$CONFIG_COMMANDS default-1" ;;
+  "config.h" ) CONFIG_HEADERS="$CONFIG_HEADERS config.h" ;;
+  "src/config.h" ) CONFIG_HEADERS="$CONFIG_HEADERS src/config.h" ;;
+  *) { { echo "$as_me:11898: error: invalid argument: $ac_config_target" >&5
+echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
+   { (exit 1); exit 1; }; };;
+  esac
+done
+
 # If the user did not use the arguments to specify the items to instantiate,
 # then the envvar interface is used.  Set only those that are not.
 # We use the long form for the default assignment because of an extremely
 # bizarre bug on SunOS 4.1.3.
 if $ac_need_defaults; then
   test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
@@ -11720,13 +11912,13 @@
 fi
 
 # Create a temporary directory, and hook for its removal unless debugging.
 $debug ||
 {
   trap 'exit_status=$?; rm -rf $tmp && exit $exit_status' 0
-  trap '{ (exit $?); exit $?; }' 1 2 13 15
+  trap '{ (exit 1); exit 1; }' 1 2 13 15
 }
 
 # Create a (secure) tmp directory for tmp files.
 : ${TMPDIR=/tmp}
 {
   tmp=`(umask 077 && mktemp -d -q "$TMPDIR/csXXXXXX") 2>/dev/null` &&
@@ -11741,19 +11933,12 @@
    { (exit 1); exit 1; }
 }
 
 EOF
 
 cat >>$CONFIG_STATUS <<EOF
-#
-# INIT-COMMANDS section.
-#
-
-EOF
-
-cat >>$CONFIG_STATUS <<EOF
 
 #
 # CONFIG_FILES section.
 #
 
 # No need to generate the scripts if there are no CONFIG_FILES.
@@ -11780,12 +11965,15 @@
 s,@mandir@,$mandir,;t t
 s,@PACKAGE_NAME@,$PACKAGE_NAME,;t t
 s,@PACKAGE_TARNAME@,$PACKAGE_TARNAME,;t t
 s,@PACKAGE_VERSION@,$PACKAGE_VERSION,;t t
 s,@PACKAGE_STRING@,$PACKAGE_STRING,;t t
 s,@PACKAGE_BUGREPORT@,$PACKAGE_BUGREPORT,;t t
+s,@build_alias@,$build_alias,;t t
+s,@host_alias@,$host_alias,;t t
+s,@target_alias@,$target_alias,;t t
 s,@ECHO_C@,$ECHO_C,;t t
 s,@ECHO_N@,$ECHO_N,;t t
 s,@ECHO_T@,$ECHO_T,;t t
 s,@PATH_SEPARATOR@,$PATH_SEPARATOR,;t t
 s,@DEFS@,$DEFS,;t t
 s,@LIBS@,$LIBS,;t t
@@ -11945,13 +12133,13 @@
   case $INSTALL in
   [\\/$]* | ?:[\\/]* ) ac_INSTALL=$INSTALL ;;
   *) ac_INSTALL=$ac_dots$INSTALL ;;
   esac
 
   if test x"$ac_file" != x-; then
-    { echo "$as_me:11951: creating $ac_file" >&5
+    { echo "$as_me:12139: creating $ac_file" >&5
 echo "$as_me: creating $ac_file" >&6;}
     rm -f "$ac_file"
   fi
   # Let's still pretend it is `configure' which instantiates (i.e., don't
   # use $as_me), people would be surprised to read:
   #    /* config.h.  Generated automatically by config.status.  */
@@ -11963,26 +12151,26 @@
   ac_file_inputs=`IFS=:
     for f in $ac_file_in; do
       case $f in
       -) echo $tmp/stdin ;;
       [\\/$]*)
          # Absolute (can't be DOS-style, as IFS=:)
-         test -f "$f" || { { echo "$as_me:11969: error: cannot find input file: $f" >&5
+         test -f "$f" || { { echo "$as_me:12157: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
          echo $f;;
       *) # Relative
          if test -f "$f"; then
            # Build tree
            echo $f
          elif test -f "$srcdir/$f"; then
            # Source tree
            echo $srcdir/$f
          else
            # /dev/null tree
-           { { echo "$as_me:11982: error: cannot find input file: $f" >&5
+           { { echo "$as_me:12170: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
          fi;;
       esac
     done` || { (exit 1); exit 1; }
 EOF
@@ -12037,37 +12225,37 @@
         ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
   *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
         ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
   * )   ac_file_in=$ac_file.in ;;
   esac
 
-  test x"$ac_file" != x- && { echo "$as_me:12043: creating $ac_file" >&5
+  test x"$ac_file" != x- && { echo "$as_me:12231: creating $ac_file" >&5
 echo "$as_me: creating $ac_file" >&6;}
 
   # First look for the input files in the build tree, otherwise in the
   # src tree.
   ac_file_inputs=`IFS=:
     for f in $ac_file_in; do
       case $f in
       -) echo $tmp/stdin ;;
       [\\/$]*)
          # Absolute (can't be DOS-style, as IFS=:)
-         test -f "$f" || { { echo "$as_me:12054: error: cannot find input file: $f" >&5
+         test -f "$f" || { { echo "$as_me:12242: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
          echo $f;;
       *) # Relative
          if test -f "$f"; then
            # Build tree
            echo $f
          elif test -f "$srcdir/$f"; then
            # Source tree
            echo $srcdir/$f
          else
            # /dev/null tree
-           { { echo "$as_me:12067: error: cannot find input file: $f" >&5
+           { { echo "$as_me:12255: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
          fi;;
       esac
     done` || { (exit 1); exit 1; }
   # Remove the trailing spaces.
@@ -12178,13 +12366,13 @@
     echo "/* $ac_file.  Generated automatically by configure.  */" >$tmp/config.h
   fi
   cat $tmp/in >>$tmp/config.h
   rm -f $tmp/in
   if test x"$ac_file" != x-; then
     if cmp -s $ac_file $tmp/config.h 2>/dev/null; then
-      { echo "$as_me:12184: $ac_file is unchanged" >&5
+      { echo "$as_me:12372: $ac_file is unchanged" >&5
 echo "$as_me: $ac_file is unchanged" >&6;}
     else
       ac_dir=`$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
          X"$ac_file" : 'X\(//\)[^/]' \| \
          X"$ac_file" : 'X\(//\)$' \| \
          X"$ac_file" : 'X\(/\)' \| \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/configure.in	2001-05-31 16:24:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/configure.in	2001-08-20 15:10:28.000000000 +0800
@@ -1,7 +1,7 @@
-dnl $Id: configure.in,v 1.71 2001/05/31 08:24:50 bagder Exp $
+dnl $Id: configure.in,v 1.75 2001/08/20 07:10:28 bagder Exp $
 dnl Process this file with autoconf to produce a configure script.
 AC_INIT
 AC_CONFIG_SRCDIR([lib/urldata.h])
 AM_CONFIG_HEADER(config.h src/config.h)
 
 VERSION=`sed -ne 's/^#define LIBCURL_VERSION "\(.*\)"/\1/p' ${srcdir}/include/curl/curl.h`
@@ -55,280 +55,18 @@
   no)
        AC_MSG_RESULT(no)
        ;;
   *)   AC_MSG_RESULT(yes)
 
     CPPFLAGS="$CPPFLAGS -DMALLOCDEBUG"
-    CFLAGS="-Wall -pedantic -g" 
+    CFLAGS="-W -Wall -Wwrite-strings -pedantic -g" 
        ;;
   esac ],
        AC_MSG_RESULT(no)
 )
 
-
-dnl
-dnl check for working getaddrinfo()
-dnl
-AC_DEFUN(CURL_CHECK_WORKING_GETADDRINFO,[
-  AC_CACHE_CHECK(for working getaddrinfo, ac_cv_working_getaddrinfo,[
-  AC_TRY_RUN( [
-#include <netdb.h>
-#include <sys/types.h>
-#include <sys/socket.h>
-
-void main(void) {
-    struct addrinfo hints, *ai;
-    int error;
-
-    memset(&hints, 0, sizeof(hints));
-    hints.ai_family = AF_UNSPEC;
-    hints.ai_socktype = SOCK_STREAM;
-    error = getaddrinfo("127.0.0.1", "8080", &hints, &ai);
-    if (error) {
-        exit(1);
-    }
-    else {
-        exit(0);
-    }
-}
-],[
-  ac_cv_working_getaddrinfo="yes"
-],[
-  ac_cv_working_getaddrinfo="no"
-],[
-  ac_cv_working_getaddrinfo="yes"
-])])
-if test "$ac_cv_working_getaddrinfo" = "yes"; then
-  AC_DEFINE(HAVE_GETADDRINFO, 1, [Define if getaddrinfo exists and works])
-  AC_DEFINE(ENABLE_IPV6, 1, [Define if you want to enable IPv6 support])
-
-  IPV6_ENABLED=1
-  AC_SUBST(IPV6_ENABLED)
-fi
-])
-
-
-AC_DEFUN(CURL_CHECK_LOCALTIME_R,
-[
-  dnl check for a few thread-safe functions
-  AC_CHECK_FUNCS(localtime_r,[
-    AC_MSG_CHECKING(whether localtime_r is declared)
-    AC_EGREP_CPP(localtime_r,[
-#include <time.h>],[
-      AC_MSG_RESULT(yes)],[
-      AC_MSG_RESULT(no)
-      AC_MSG_CHECKING(whether localtime_r with -D_REENTRANT is declared)
-      AC_EGREP_CPP(localtime_r,[
-#define _REENTRANT
-#include <time.h>],[
-	AC_DEFINE(NEED_REENTRANT)
-	AC_MSG_RESULT(yes)],
-	AC_MSG_RESULT(no))])])
-])
-
-AC_DEFUN(CURL_CHECK_INET_NTOA_R,
-[
-  dnl determine if function definition for inet_ntoa_r exists.
-  AC_CHECK_FUNCS(inet_ntoa_r,[
-    AC_MSG_CHECKING(whether inet_ntoa_r is declared)
-    AC_EGREP_CPP(inet_ntoa_r,[
-#include <arpa/inet.h>],[
-      AC_DEFINE(HAVE_INET_NTOA_R_DECL)
-      AC_MSG_RESULT(yes)],[
-      AC_MSG_RESULT(no)
-      AC_MSG_CHECKING(whether inet_ntoa_r with -D_REENTRANT is declared)
-      AC_EGREP_CPP(inet_ntoa_r,[
-#define _REENTRANT
-#include <arpa/inet.h>],[
-	AC_DEFINE(HAVE_INET_NTOA_R_DECL)
-	AC_DEFINE(NEED_REENTRANT)
-	AC_MSG_RESULT(yes)],
-	AC_MSG_RESULT(no))])])
-
-])
-
-AC_DEFUN(CURL_CHECK_GETHOSTBYADDR_R,
-[
-  dnl check for number of arguments to gethostbyaddr_r. it might take
-  dnl either 5, 7, or 8 arguments.
-  AC_CHECK_FUNCS(gethostbyaddr_r,[
-    AC_MSG_CHECKING(if gethostbyaddr_r takes 5 arguments)
-    AC_TRY_COMPILE([
-#include <sys/types.h>
-#include <netdb.h>],[
-char * address;
-int length;
-int type;
-struct hostent h;
-struct hostent_data hdata;
-int rc;
-rc = gethostbyaddr_r(address, length, type, &h, &hdata);],[
-      AC_MSG_RESULT(yes)
-      AC_DEFINE(HAVE_GETHOSTBYADDR_R_5)
-      ac_cv_gethostbyaddr_args=5],[
-      AC_MSG_RESULT(no)
-      AC_MSG_CHECKING(if gethostbyaddr_r with -D_REENTRANT takes 5 arguments)
-      AC_TRY_COMPILE([
-#define _REENTRANT
-#include <sys/types.h>
-#include <netdb.h>],[
-char * address;
-int length;
-int type;
-struct hostent h;
-struct hostent_data hdata;
-int rc;
-rc = gethostbyaddr_r(address, length, type, &h, &hdata);],[
-	AC_MSG_RESULT(yes)
-	AC_DEFINE(HAVE_GETHOSTBYADDR_R_5)
-	AC_DEFINE(NEED_REENTRANT)
-	ac_cv_gethostbyaddr_args=5],[
-	AC_MSG_RESULT(no)
-	AC_MSG_CHECKING(if gethostbyaddr_r takes 7 arguments)
-	AC_TRY_COMPILE([
-#include <sys/types.h>
-#include <netdb.h>],[
-char * address;
-int length;
-int type;
-struct hostent h;
-char buffer[8192];
-int h_errnop;
-struct hostent * hp;
-
-hp = gethostbyaddr_r(address, length, type, &h,
-                     buffer, 8192, &h_errnop);],[
-	  AC_MSG_RESULT(yes)
-	  AC_DEFINE(HAVE_GETHOSTBYADDR_R_7)
-	  ac_cv_gethostbyaddr_args=7],[
-	  AC_MSG_RESULT(no)
-	  AC_MSG_CHECKING(if gethostbyaddr_r takes 8 arguments)
-	  AC_TRY_COMPILE([
-#include <sys/types.h>
-#include <netdb.h>],[
-char * address;
-int length;
-int type;
-struct hostent h;
-char buffer[8192];
-int h_errnop;
-struct hostent * hp;
-int rc;
-
-rc = gethostbyaddr_r(address, length, type, &h,
-                     buffer, 8192, &hp, &h_errnop);],[
-	    AC_MSG_RESULT(yes)
-	    AC_DEFINE(HAVE_GETHOSTBYADDR_R_8)
-	    ac_cv_gethostbyaddr_args=8],[
-	    AC_MSG_RESULT(no)
-	    have_missing_r_funcs="$have_missing_r_funcs gethostbyaddr_r"])])])])])
-
-
-])
-
-AC_DEFUN(CURL_CHECK_GETHOSTBYNAME_R,
-[
-  dnl check for number of arguments to gethostbyname_r. it might take
-  dnl either 3, 5, or 6 arguments.
-  AC_CHECK_FUNCS(gethostbyname_r,[
-    AC_MSG_CHECKING(if gethostbyname_r takes 3 arguments)
-    AC_TRY_RUN([
-#include <string.h>
-#include <sys/types.h>
-#include <netdb.h>
-
-int
-main () {
-struct hostent h;
-struct hostent_data hdata;
-char *name = "localhost";
-int rc;
-memset(&h, 0, sizeof(struct hostent));
-memset(&hdata, 0, sizeof(struct hostent_data));
-rc = gethostbyname_r(name, &h, &hdata);
-exit (rc != 0 ? 1 : 0); }],[
-      AC_MSG_RESULT(yes)
-      AC_DEFINE(HAVE_GETHOSTBYNAME_R_3)
-      ac_cv_gethostbyname_args=3],[
-      AC_MSG_RESULT(no)
-      AC_MSG_CHECKING(if gethostbyname_r with -D_REENTRANT takes 3 arguments)
-      AC_TRY_RUN([
-#define _REENTRANT
-
-#include <string.h>
-#include <sys/types.h>
-#include <netdb.h>
-
-int
-main () {
-struct hostent h;
-struct hostent_data hdata;
-char *name = "localhost";
-int rc;
-memset(&h, 0, sizeof(struct hostent));
-memset(&hdata, 0, sizeof(struct hostent_data));
-rc = gethostbyname_r(name, &h, &hdata);
-exit (rc != 0 ? 1 : 0); }],[
-	AC_MSG_RESULT(yes)
-	AC_DEFINE(HAVE_GETHOSTBYNAME_R_3)
-	AC_DEFINE(NEED_REENTRANT)
-	ac_cv_gethostbyname_args=3],[
-	AC_MSG_RESULT(no)
-	AC_MSG_CHECKING(if gethostbyname_r takes 5 arguments)
-	AC_TRY_RUN([
-#include <sys/types.h>
-#include <netdb.h>
-
-int
-main () {
-struct hostent *hp;
-struct hostent h;
-char *name = "localhost";
-char buffer[8192];
-int h_errno;
-hp = gethostbyname_r(name, &h, buffer, 8192, &h_errno);
-exit (hp == NULL ? 1 : 0); }],[
-	  AC_MSG_RESULT(yes)
-	  AC_DEFINE(HAVE_GETHOSTBYNAME_R_5)
-          ac_cv_gethostbyname_args=5],[
-	  AC_MSG_RESULT(no)
-	  AC_MSG_CHECKING(if gethostbyname_r takes 6 arguments)
-	  AC_TRY_RUN([
-#include <sys/types.h>
-#include <netdb.h>
-
-int
-main () {
-struct hostent h;
-struct hostent *hp;
-char *name = "localhost";
-char buf[8192];
-int rc;
-int h_errno;
-rc = gethostbyname_r(name, &h, buf, 8192, &hp, &h_errno);
-exit (rc != 0 ? 1 : 0); }],[
-	    AC_MSG_RESULT(yes)
-	    AC_DEFINE(HAVE_GETHOSTBYNAME_R_6)
-            ac_cv_gethostbyname_args=6],[
-	    AC_MSG_RESULT(no)
-	    have_missing_r_funcs="$have_missing_r_funcs gethostbyname_r"],
-	    [ac_cv_gethostbyname_args=0])],
-	  [ac_cv_gethostbyname_args=0])],
-	[ac_cv_gethostbyname_args=0])],
-      [ac_cv_gethostbyname_args=0])])
-
-if test "$ac_cv_func_gethostbyname_r" = "yes"; then
-  if test "$ac_cv_gethostbyname_args" = "0"; then
-    dnl there's a gethostbyname_r() function, but we don't know how
-    dnl many arguments it wants!
-    AC_MSG_ERROR([couldn't figure out how to use gethostbyname_r()])
-  fi
-fi
-
-])
-
 dnl **********************************************************************
 dnl Checks for IPv6
 dnl **********************************************************************
 
 AC_MSG_CHECKING([whether to enable ipv6])
 AC_ARG_ENABLE(ipv6,
@@ -556,28 +294,35 @@
 if test X"$OPT_SSL" = Xno
 then
   AC_MSG_WARN(SSL/https support disabled)  
 else
 
   dnl Check for and handle argument to --with-ssl.
-  EXTRA_SSL=
+
+  dnl save the pre-ssl check flags for a while
+  CLEANLDFLAGS="$LDFLAGS"
+  CLEANCPPFLAGS="$CPPFLAGS"
 
   case "$OPT_SSL" in
   yes)
     EXTRA_SSL=/usr/local/ssl ;;
   *)
-    EXTRA_SSL=$OPT_SSL ;;
+    dnl check the given spot right away!
+    EXTRA_SSL=$OPT_SSL
+    LDFLAGS="$LDFLAGS -L$EXTRA_SSL/lib"
+    CPPFLAGS="$CPPFLAGS -I$EXTRA_SSL/include/openssl -I$EXTRA_SSL/include"
+    ;;
   esac
 
   AC_CHECK_LIB(crypto, CRYPTO_lock,[
      HAVECRYPTO="yes"
      ],[
      OLDLDFLAGS="$LDFLAGS"
      OLDCPPFLAGS="$CPPFLAGS"
-     LDFLAGS="$LDFLAGS -L$EXTRA_SSL/lib"
-     CPPFLAGS="$CPPFLAGS -I$EXTRA_SSL/include/openssl -I$EXTRA_SSL/include"
+     LDFLAGS="$CLEANLDFLAGS -L$EXTRA_SSL/lib"
+     CPPFLAGS="$CLEANCPPFLAGS -I$EXTRA_SSL/include/openssl -I$EXTRA_SSL/include"
      AC_CHECK_LIB(crypto, CRYPTO_add_lock,[
        HAVECRYPTO="yes" ], [
        LDFLAGS="$OLDLDFLAGS"
        CPPFLAGS="$OLDCPPFLAGS"
        ])
     ])
@@ -678,12 +423,15 @@
 then
   AC_MSG_WARN(libcurl will not get built using thread-safe functions)
   AC_DEFINE(DISABLED_THREADSAFE, 1, \
 Set to explicitly specify we don't want to use thread-safe functions)
 else
 
+  dnl check that 'localhost' resolves first
+  CURL_CHECK_WORKING_RESOLVER
+
   dnl dig around for gethostbyname_r()
   CURL_CHECK_GETHOSTBYNAME_R()
 
   dnl dig around for gethostbyaddr_r()
   CURL_CHECK_GETHOSTBYADDR_R()
 
@@ -745,32 +493,13 @@
 # check for 'long long'
 AC_CHECK_SIZEOF(long long, 4)
 
 # check for ssize_t
 AC_CHECK_TYPE(ssize_t, int)
 
-dnl
-dnl We can't just AC_CHECK_TYPE() for socklen_t since it doesn't appear
-dnl in the standard headers. We egrep for it in the socket headers and
-dnl if it is used there we assume we have the type defined, otherwise
-dnl we search for it with AC_CHECK_TYPE() the "normal" way
-dnl
-
-if test "$ac_cv_header_sys_socket_h" = "yes"; then
-   AC_MSG_CHECKING(for socklen_t in sys/socket.h)
-   AC_EGREP_HEADER(socklen_t,
-    sys/socket.h,
-    socklen_t=yes
-    AC_MSG_RESULT(yes),
-    AC_MSG_RESULT(no))
-fi
-
-if test "$socklen_t" != "yes"; then
-  # check for socklen_t the standard way if it wasn't found before
-  AC_CHECK_TYPE(socklen_t, int)
-fi
+TYPE_SOCKLEN_T
 
 dnl Checks for library functions.
 dnl AC_PROG_GCC_TRADITIONAL
 AC_TYPE_SIGNAL
 dnl AC_FUNC_VPRINTF
 AC_CHECK_FUNCS( socket \
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1: config-vms.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/curl-config.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/curl-config.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/curl-config.in	2001-06-03 02:59:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/curl-config.in	2001-08-16 21:09:20.000000000 +0800
@@ -1,12 +1,12 @@
 #! /bin/sh
 #
 # The idea to this kind of setup info script was stolen from numerous
 # other packages, such as neon, libxml and gnome.
 #
-# $Id: curl-config.in,v 1.6 2001/06/01 21:56:58 bumblebury Exp $
+# $Id: curl-config.in,v 1.11 2001/08/16 13:09:20 bagder Exp $
 #
 prefix=@prefix@
 exec_prefix=@exec_prefix@
 includedir=@includedir@
 
 usage()
@@ -70,20 +70,21 @@
 
     --help)
 	usage 0
 	;;
 
     --cflags)
-       	echo @CPPFLAGS@
+       	echo -I@includedir@
        	;;
 
     --libs)
-       	echo @LDFLAGS@ @LIBS@
+       	echo -L@libdir@ -lcurl @LDFLAGS@ @LIBS@
        	;;
 
     *)
+        echo "unknown option: $1"
 	usage
 	exit 1
 	;;
     esac
     shift
 done
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl.1	2001-05-29 20:08:38.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl.1	2001-08-16 21:40:04.000000000 +0800
@@ -1,11 +1,11 @@
 .\" You can view this file with:
 .\" nroff -man curl.1
 .\" Written by Daniel Stenberg
 .\"
-.TH curl 1 "8 May 2001" "Curl 7.7.3" "Curl Manual"
+.TH curl 1 "16 Aug 2001" "Curl 7.8.1" "Curl Manual"
 .SH NAME
 curl \- get a URL with FTP, TELNET, LDAP, GOPHER, DICT, FILE, HTTP or
 HTTPS syntax.
 .SH SYNOPSIS
 .B curl [options]
 .I [URL...]
@@ -131,13 +131,14 @@
 name=daniel -d skill=lousy' would generate a post chunk that looks like
 \&'name=daniel&skill=lousy'.
 
 If you start the data with the letter @, the rest should be a file name to
 read the data from, or - if you want curl to read the data from stdin.  The
 contents of the file must already be url-encoded. Multiple files can also be
-specified.
+specified. Posting data from a file named 'foobar' would thus be done with
+"--data @foobar".
 
 To post data purely binary, you should instead use the --data-binary option.
 
 -d/--data is the same as --data-ascii.
 
 If this option is used several times, the ones following the first will
@@ -229,12 +230,17 @@
 .IP "-g/--globoff"
 This option switches off the "URL globbing parser". When you set this option,
 you can specify URLs that contain the letters {}[] without having them being
 interpreted by curl itself. Note that these letters are not normal legal URL
 contents but they should be encoded according to the URI standard. (Option
 added in curl 7.6)
+.IP "-G/--get"
+When used, this option will make all data specified with -d/--data or
+--data-binary to be used in a HTTP GET request instead of the POST request
+that otherwise would be used. The data will be appended to the URL with a '?'
+separator.
 .IP "-h/--help"
 Usage help.
 .IP "-H/--header <header>"
 (HTTP) Extra header to use when getting a web page. You may specify any number
 of extra headers. Note that if you should add a custom header that has the
 same name as one of the internal ones curl would use, your externally set
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl-config.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl-config.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl-config.1	2001-05-28 22:52:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl-config.1	2001-08-16 21:10:56.000000000 +0800
@@ -1,22 +1,22 @@
 .\" You can view this file with:
 .\" nroff -man curl-config.1
 .\" Written by Daniel Stenberg
 .\"
-.TH curl-config 1 "28 May 2001" "Curl 7.8" "curl-config manual"
+.TH curl-config 1 "16 August 2001" "Curl 7.8.1" "curl-config manual"
 .SH NAME
 curl-config \- Get information about a libcurl installation
 .SH SYNOPSIS
 .B curl-config [options]
 .SH DESCRIPTION
 .B curl-config
 displays information about a previous curl and libcurl installation.
 .SH OPTIONS
 .IP "--cflags"
-What set of CFLAGS that was used when libcurl was built. This is mostly a
-debug option that serves no particular use to most people.
+Set of compiler options (CFLAGS) to use when compiling files that use
+libcurl. Currently that is only thw include path to the curl include files.
 .IP "--feature"
 Lists what particular main features the installed libcurl was built with. At
 the time of writing, this list may include SSL, KRB4 or IPv6. Do not assume
 any particular order. The keywords will be separated by newlines. There may be
 none, one or several keywords in the list.
 .IP "--help"
@@ -33,23 +33,19 @@
 .IP "--vernum"
 Outputs version information about the installed libcurl, in numerical mode.
 This outputs the version number, in hexadecimal, with 8 bits for each part;
 major, minor, patch. So that libcurl 7.7.4 would appear as 070704 and libcurl
 12.13.14 would appear as 0c0d0e...
 .SH "EXAMPLES"
-What is the path to the curl header files?
+What linker options do I need when I link with libcurl?
 
-  echo `curl-config --prefix`/include
-
-What is the path to libcurl?
-
-  echo `curl-config --prefix`/lib
+  curl-config --libs
 
-What other linker options do I need when I link with libcurl?
+What compiler options do I need when I compile using libcurl functions?
 
-  curl-config --libs
+  curl-config --cflags
 
 How do I know if libcurl was built with SSL support?
 
   curl-config --feature | grep SSL
 
 What's the installed libcurl version?
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_easy_cleanup.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_easy_cleanup.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_easy_cleanup.3	2001-05-31 16:41:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_easy_cleanup.3	2001-06-21 17:39:19.000000000 +0800
@@ -1,17 +1,17 @@
 .\" You can view this file with:
 .\" nroff -man [file]
-.\" $Id: curl_easy_cleanup.3,v 1.4 2001/05/31 08:41:42 bagder Exp $
+.\" $Id: curl_easy_cleanup.3,v 1.5 2001/06/21 09:39:19 bagder Exp $
 .\"
 .TH curl_easy_cleanup 3 "5 March 2001" "libcurl 7.7" "libcurl Manual"
 .SH NAME
 curl_easy_cleanup - End a libcurl session
 .SH SYNOPSIS
 .B #include <curl/curl.h>
 .sp
-.BI "curl_easy_cleanup(CURL *" handle ");"
+.BI "void curl_easy_cleanup(CURL *" handle ");"
 .ad
 .SH DESCRIPTION
 This function must be the last function to call for a curl session. It is the
 opposite of the
 .I curl_easy_init
 function and must be called with the same
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_easy_init.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_easy_init.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_easy_init.3	2001-05-31 16:41:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_easy_init.3	2001-08-14 19:04:58.000000000 +0800
@@ -1,11 +1,11 @@
 .\" You can view this file with:
 .\" nroff -man [file]
-.\" $Id: curl_easy_init.3,v 1.5 2001/05/31 08:41:42 bagder Exp $
+.\" $Id: curl_easy_init.3,v 1.6 2001/08/14 11:04:58 bagder Exp $
 .\"
-.TH curl_easy_init 3 "5 March 2001" "libcurl 7.7" "libcurl Manual"
+.TH curl_easy_init 3 "14 August 2001" "libcurl 7.8.1" "libcurl Manual"
 .SH NAME
 curl_easy_init - Start a libcurl session
 .SH SYNOPSIS
 .B #include <curl/curl.h>
 .sp
 .BI "CURL *curl_easy_init( );"
@@ -14,19 +14,21 @@
 This function must be the first function to call, and it returns a CURL handle
 that you shall use as input to the other easy-functions. The init calls
 intializes curl and this call MUST have a corresponding call to
 .I curl_easy_cleanup
 when the operation is complete.
 
-On win32 systems, you need to init the winsock stuff manually, libcurl will
-not do that for you. WSAStartup() and WSACleanup() should be used accordingly.
+On win32 systems, if you want to init the winsock stuff manually, libcurl will
+not do that for you. WSAStartup() and WSACleanup() should then be called
+accordingly.  If you want libcurl to handle this, use the CURL_GLOBAL_WIN32
+flag in the initial curl_global_init() call.
 
 Using libcurl 7.7 and later, you should perform all your sequential file
 transfers using the same curl handle. This enables libcurl to use persistant
 connections where possible.
 .SH RETURN VALUE
 If this function returns NULL, something went wrong and you cannot use the
 other curl functions.
 .SH "SEE ALSO"
-.BR curl_easy_cleanup "(3), "
+.BR curl_easy_cleanup "(3), " curl_global_init "(3)
 .SH BUGS
 Surely there are some, you tell me!
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_easy_setopt.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_easy_setopt.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_easy_setopt.3	2001-06-01 15:33:38.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_easy_setopt.3	2001-08-20 15:36:57.000000000 +0800
@@ -1,11 +1,11 @@
 .\" You can view this file with:
 .\" nroff -man [file]
-.\" $Id: curl_easy_setopt.3,v 1.38 2001/06/01 07:33:38 bagder Exp $
+.\" $Id: curl_easy_setopt.3,v 1.40 2001/08/20 07:36:57 bagder Exp $
 .\"
-.TH curl_easy_setopt 3 "1 June 2001" "libcurl 7.8" "libcurl Manual"
+.TH curl_easy_setopt 3 "20 August 2001" "libcurl 7.8.1" "libcurl Manual"
 .SH NAME
 curl_easy_setopt - Set curl easy-session options
 .SH SYNOPSIS
 .B #include <curl/curl.h>
 .sp
 .BI "CURLcode curl_easy_setopt(CURL *" handle ", CURLoption "option ", ...);"
@@ -199,16 +199,18 @@
 Pass a char * to a buffer that the libcurl may store human readable error
 messages in. This may be more helpful than just the return code from the
 library. The buffer must be at least CURL_ERROR_SIZE big.
 .TP
 .B CURLOPT_TIMEOUT
 Pass a long as parameter containing the maximum time in seconds that you allow
-the libcurl transfer operation to take. Do note that normally, name lookups
-maky take a considerable time and that limiting the operation to less than a
-few minutes risk aborting perfectly normal operations. This option will cause
-curl to use the SIGALRM to enable timeouting system calls.
+the libcurl transfer operation to take. Normally, name lookups can take a
+considerable time and limiting operations to less than a few minutes risk
+aborting perfectly normal operations. This option will cause curl to use the
+SIGALRM to enable timeouting system calls.
+.B NOTE
+that this does not work in multi-threaded programs!
 .TP
 .B CURLOPT_POSTFIELDS
 Pass a char * as parameter, which should be the full data to post in a HTTP
 post operation. See also the CURLOPT_POST.
 .TP
 .B CURLOPT_POSTFIELDSIZE
@@ -495,12 +497,24 @@
 connection to the server to take.  This only limits the connection phase, once
 it has connected, this option is of no more use. Set to zero to disable
 connection timeout (it will then only timeout on the system's internal
 timeouts). See also the
 .I CURLOPT_TIMEOUT
 option.
+.B NOTE
+that this does not work in multi-threaded programs!
+.TP
+.B CURLOPT_HTTPGET
+Pass a long. If the long is non-zero, this forces the HTTP request to get back
+to GET. Only really usable if POST, PUT or a custom request have been used
+previously using the same curl handle. (Added in 7.8.1)
+.TP
+.B CURLOPT_SSL_VERIFYHOST
+Pass a long. Set if we should verify the Common name from the peer certificate
+in the SSL handshake, set 1 to check existence, 2 to ensure that it matches
+the provided hostname. (Added in 7.8.1)
 .PP
 .SH RETURN VALUE
 0 means the option was set properly, non-zero means an error as
 .I <curl/curl.h>
 defines
 .SH "SEE ALSO"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_getenv.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_getenv.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_getenv.3	2001-05-31 16:41:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_getenv.3	2001-08-16 02:34:59.000000000 +0800
@@ -1,17 +1,17 @@
 .\" You can view this file with:
 .\" nroff -man [file]
-.\" $Id: curl_getenv.3,v 1.5 2001/05/31 08:41:42 bagder Exp $
+.\" $Id: curl_getenv.3,v 1.6 2001/08/15 18:34:25 bagder Exp $
 .\"
-.TH curl_getenv 3 "5 March 2001" "libcurl 7.0" "libcurl Manual"
+.TH curl_getenv 3 "15 August 2001" "libcurl 7.8.1" "libcurl Manual"
 .SH NAME
 curl_getenv - return value for environment name
 .SH SYNOPSIS
 .B #include <curl/curl.h>
 .sp
-.BI "char *curl_getenv(char *" name ");
+.BI "char *curl_getenv(const char *" name ");
 .ad
 .SH DESCRIPTION
 curl_getenv() is a portable wrapper for the getenv() function, meant to
 emulate its behaviour and provide an identical interface for all operating
 systems libcurl builds on (including win32).
 .SH RETURN VALUE
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_global_init.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_global_init.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_global_init.3	2001-05-31 16:35:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_global_init.3	2001-08-14 19:04:40.000000000 +0800
@@ -1,11 +1,11 @@
 .\" You can view this file with:
 .\" nroff -man [file]
-.\" $Id: curl_global_init.3,v 1.4 2001/05/31 08:35:26 bagder Exp $
+.\" $Id: curl_global_init.3,v 1.7 2001/08/14 11:04:40 bagder Exp $
 .\"
-.TH curl_global_init 3 "31 May 2001" "libcurl 7.8" "libcurl Manual"
+.TH curl_global_init 3 "14 August 2001" "libcurl 7.8.1" "libcurl Manual"
 .SH NAME
 curl_global_init - Global libcurl initialisation
 .SH SYNOPSIS
 .B #include <curl/curl.h>
 .sp
 .BI "CURLcode curl_global_init(long " flags ");"
@@ -24,16 +24,19 @@
 that cannot be called automatically for you by libcurl.
 
 This function was added in libcurl 7.8.
 .SH FLAGS
 .TP 5
 .B CURL_GLOBAL_ALL
-Initialise everyting possible. This sets all known bits.
+Initialize everything possible. This sets all known bits.
 .TP
 .B CURL_GLOBAL_SSL
-Initialise SSL
+Initialize SSL
+.TP
+.B CURL_GLOBAL_WIN32
+Initialize the Win32 socket libraries. (added in libcurl 7.8.1)
 .TP
 .B CURL_GLOBAL_NOTHING
 Initialise nothing extra. This sets no bit.
 .SH RETURN VALUE
 If this function returns non-zero, something went wrong and you cannot use the
 other curl functions.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_strequal.3 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_strequal.3
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/curl_strequal.3	2001-05-31 16:41:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/curl_strequal.3	2001-06-21 17:34:38.000000000 +0800
@@ -1,9 +1,9 @@
 .\" You can view this file with:
 .\" nroff -man [file]
-.\" $Id: curl_strequal.3,v 1.2 2001/05/31 08:41:42 bagder Exp $
+.\" $Id: curl_strequal.3,v 1.3 2001/06/21 09:34:38 bagder Exp $
 .\"
 .TH curl_strequal 3 "20 April 2001" "libcurl 7.7.2" "libcurl Manual"
 .SH NAME
 curl_strequal, curl_strnequal - case insensitive string comparisons
 .SH SYNOPSIS
 .B #include <curl/curl.h>
@@ -22,9 +22,9 @@
 first \fIlen\fP characters of \fIstr1\fP.
 .sp
 These functions are provided by libcurl to enable applications to compare
 strings in a truly portable manner. There are no standard portable case
 insensitive string comparison functions. These two works on all platforms.
 .SH RETURN VALUE
-A pointer to a zero terminated string.
+Non-zero if the strings are identical. Zero if they're not.
 .SH "SEE ALSO"
 .BR strcmp "(3), " strcasecmp "(3)"
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/examples/win32sockets.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/examples/win32sockets.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/examples/win32sockets.c	2001-02-20 21:57:39.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/examples/win32sockets.c	2001-08-03 00:25:16.000000000 +0800
@@ -1,17 +1,26 @@
+
+/*
+ * Note: This is only required if you use curl 7.8 or lower, later 
+ * versions provide an option to curl_global_init() that does the
+ * win32 initialization for you.
+ */
+
 /*
  * These are example functions doing socket init that Windows
  * require. If you don't use windows, you can safely ignore this crap.
  */
 
-static void win32_cleanup(void)
+#include <windows.h>
+
+void win32_cleanup(void)
 {
   WSACleanup();
 }
 
-static CURLcode win32_init(void)
+int win32_init(void)
 {
   WORD wVersionRequested;  
   WSADATA wsaData; 
   int err; 
   wVersionRequested = MAKEWORD(1, 1); 
     
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/FAQ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/FAQ
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/FAQ	2001-05-29 22:08:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/FAQ	2001-08-08 05:21:04.000000000 +0800
@@ -1,7 +1,7 @@
-Updated: May 29, 2001 (http://curl.haxx.se/docs/faq.shtml)
+Updated: August 7, 2001 (http://curl.haxx.se/docs/faq.shtml)
                                   _   _ ____  _     
                               ___| | | |  _ \| |    
                              / __| | | | |_) | |    
                             | (__| |_| |  _ <| |___ 
                              \___|\___/|_| \_\_____|
 
@@ -11,12 +11,13 @@
   1.1 What is cURL?
   1.2 What is libcurl?
   1.3 What is cURL not?
   1.4 When will you make curl do XXXX ?
   1.5 Who makes cURL?
   1.6 What do you get for making cURL?
+  1.7 What about CURL from curl.com?
 
  2. Install Related Problems
   2.1 configure doesn't find OpenSSL even when it is installed
    2.1.1. native linker doesn't find openssl
    2.1.2. only the libssl lib is missing
   2.2 Does curl work/build with other SSL libraries?
@@ -167,12 +168,31 @@
 
   We get some help from companies. Contactor Data hosts the curl web site and
   the main mailing list, Haxx owns the curl web site's domain and
   sourceforge.net hosts several project tools we take advantage from like the
   bug tracker, mailing lists and more.
 
+  If you feel you want to show support our project with a donation, a very
+  nice way of doing that would be to buy "gift certificates" at useful online
+  shopping sites, such as amazon.com or thinkgeek.com.
+
+  1.7 What about CURL from curl.com?
+
+  During the summer 2001, curl.com has been busy advertising their client-side
+  programming language for the web, named CURL.
+
+  We are in no way associated with curl.com or their CURL programming
+  language. 
+
+  Our project name curl has been in effective use since 1998. We were not the
+  first computer related project to use the name "curl" and do not claim any
+  first-hand rights to the name.
+
+  We recognize that we will be living in parallel with curl.com and wish them
+  every success.
+
 2. Install Related Problems
 
   2.1. configure doesn't find OpenSSL even when it is installed
 
   This may be because of several reasons.
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/INSTALL /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/INSTALL
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/INSTALL	2001-06-07 14:20:57.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/INSTALL	2001-08-08 14:01:50.000000000 +0800
@@ -3,18 +3,16 @@
                              / __| | | | |_) | |    
                             | (__| |_| |  _ <| |___ 
                              \___|\___/|_| \_\_____|
 
                                 How To Compile
 
-Curl has been compiled and built on numerous different operating systems. The
-way to proceed is mainly divided in two different ways: the unix way or the 
-windows way.
+Curl has been compiled and built on numerous different operating systems.
 
-If you're using Windows (95/98/NT/ME/2000 or whatever) or OS/2, you should
-continue reading from the Win32 or OS/2 headers further down. All other
+If you're using Windows (95/98/NT/ME/2000 or whatever), VMS, RISC OS or OS/2,
+you should continue reading from one the paragraphs further down. All other
 systems should be capable of being installed as described below.
 
 UNIX
 ====
 
    A normal unix installation is made in three or four steps (after you've
@@ -252,23 +250,96 @@
    If everything seems to work fine but there's no curl.exe, you need to add
    -Zexe to your linker flags.
 
    If you're getting huge binaries, probably your makefiles have the -g in
    CFLAGS.
 
+VMS
+===
+   (The VMS section is in whole contributed by the friendly Nico Baggus)
+
+   This is the first attempt at porting cURL to VMS.
+
+   Curl seems to work with FTP & HTTP other protocols are not tested.  (the
+   perl http/ftp testing server supplied as testing too cannot work on VMS
+   because vms has no concept of fork(). [ I tried to give it a whack, but
+   thats of no use.
+
+   SSL stuff has not been ported.
+
+   Telnet has about the same issues as for Win32. When the changes for Win32
+   are clear maybe they'l work for VMS too. The basic problem is that select
+   ONLY works for sockets.
+
+   Marked instances of fopen/[f]stat that might become a problem, especially
+   for non stream files. In this regard, the files opened for writing will be
+   created stream/lf and will thus be safe. Just keep in mind that non-binary
+   read/wring from/to files will have a records size limit of 32767 bytes
+   imposed.
+
+   Stat to get the size of the files is again only safe for stream files &
+   fixed record files without implied CC.
+
+   -- My guess is that only allowing access to stream files is the quickest
+   way to get around the most issues. Therefore all files need to to be
+   checked to be sure they will be stream/lf before processing them.  This is
+   the easiest way out, I know. The reason for this is that code that needs to
+   report the filesize will become a pain in the ass otherwise.
+
+   Exit status.... Well we needed something done here,
+
+   VMS has a structured exist status:
+   | 3  |       2    |     1       |  0|
+   |1098|765432109876|5432109876543|210|
+   +----+------------+-------------+---+
+   |Ctrl|  Facility  | Error code  |sev|
+   +----+------------+-------------+---+
+
+   With the Ctrl-bits an application can tell if part or the whole message has
+   allready been printed from the program, DCL doesn't need to print it again.
+
+   Facility - basicaly the program ID. A code assigned to the program
+   the name can be fetched from external or internal message libraries
+   Errorcode - the errodes assigned by the application
+   Sev. - severity: Even = error, off = non error
+		0 = Warning
+		1 = Success
+		2 = Error
+		3 = Information
+		4 = Fatal 
+		<5-7> reserved.
+
+   This all presents itself with:
+   %<FACILITY>-<SeV>-<Errorname>, <Error message>
+
+   See also the src/curlmsg.msg file, it has the source for the messages In
+   src/main.c a section is devoted to message status values, the globalvalues
+   create symbols with certain values, referenced from a compiled message
+   file. Have all exit function use a exit status derived from a translation
+   table with the compiled message codes.
+
+   This was all compiled with:
+
+	Compaq C V6.2-003 on OpenVMS Alpha V7.1-1H2
+
+   So far for porting notes as of:
+   13-jul-2001
+   N. Baggus
+
 PORTS
 =====
-   This is a probably incomplete list of known hardware and
-   operating systems that curl has been compiled for:
+   This is a probably incomplete list of known hardware and operating systems
+   that curl has been compiled for:
 
         - Ultrix 4.3a
         - SINIX-Z v5
         - Alpha DEC OSF 4
         - Alpha Digital UNIX v3.2
         - Alpha FreeBSD 4.1
         - Alpha Linux 2.2.16
+        - Alpha OpenVMS V7.1-1H2
         - Alpha Tru64 v5.0 5.1
         - HP-PA HP-UX 9.X 10.X 11.X
         - MIPS IRIX 6.2, 6.5
         - Power AIX 4.2, 4.3.1, 4.3.2
         - PowerPC Darwin 1.0
         - PowerPC Linux
@@ -286,12 +357,13 @@
         - i386 Solaris 2.7
         - i386 Windows 95, 98, ME, NT, 2000
         - ia64 Linux 2.3.99
         - m68k AmigaOS 3
         - m68k OpenBSD
         - StrongARM NetBSD 1.4.1
+        - StrongARM (and other ARM) RISC OS 3.1, 4.02
 
 OpenSSL
 =======
 
    You'll find OpenSSL information at:
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs: libcurl.3
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs: libcurl.5
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/Makefile.am	2001-05-29 20:09:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/Makefile.am	2001-06-21 17:34:37.000000000 +0800
@@ -1,8 +1,8 @@
 #
-# $Id: Makefile.am,v 1.10 2001/05/29 12:09:47 bagder Exp $
+# $Id: Makefile.am,v 1.11 2001/06/21 09:34:37 bagder Exp $
 #
 
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
 man_MANS = \
 	curl.1 \
@@ -23,13 +23,13 @@
 	curl_unescape.3 \
 	curl_strequal.3 \
 	curl_strnequal.3 \
 	curl_mprintf.3 \
 	curl_global_init.3 \
 	curl_global_cleanup.3 \
-	libcurl.5
+	libcurl.3
 
 EXTRA_DIST = $(man_MANS) \
 	MANUAL BUGS CONTRIBUTE FAQ FEATURES INTERNALS \
 	LIBCURL README.win32 RESOURCES TODO TheArtOfHttpScripting THANKS
 
 SUBDIRS = examples
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/Makefile.in	2001-05-31 16:42:12.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/Makefile.in	2001-08-20 15:21:51.000000000 +0800
@@ -8,13 +8,13 @@
 # This program is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
 #
-# $Id: Makefile.am,v 1.10 2001/05/29 12:09:47 bagder Exp $
+# $Id: Makefile.am,v 1.11 2001/06/21 09:34:37 bagder Exp $
 #
 
 
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -88,25 +88,24 @@
 VERSION = @VERSION@
 VERSIONNUM = @VERSIONNUM@
 YACC = @YACC@
 
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
-man_MANS =  	curl.1 	curl-config.1 	curl_easy_cleanup.3 	curl_easy_getinfo.3 	curl_easy_init.3 	curl_easy_perform.3 	curl_easy_setopt.3 	curl_formparse.3 	curl_formfree.3 	curl_getdate.3 	curl_getenv.3 	curl_slist_append.3 	curl_slist_free_all.3 	curl_version.3 	curl_escape.3 	curl_unescape.3 	curl_strequal.3 	curl_strnequal.3 	curl_mprintf.3 	curl_global_init.3 	curl_global_cleanup.3 	libcurl.5
+man_MANS =  	curl.1 	curl-config.1 	curl_easy_cleanup.3 	curl_easy_getinfo.3 	curl_easy_init.3 	curl_easy_perform.3 	curl_easy_setopt.3 	curl_formparse.3 	curl_formfree.3 	curl_getdate.3 	curl_getenv.3 	curl_slist_append.3 	curl_slist_free_all.3 	curl_version.3 	curl_escape.3 	curl_unescape.3 	curl_strequal.3 	curl_strnequal.3 	curl_mprintf.3 	curl_global_init.3 	curl_global_cleanup.3 	libcurl.3
 
 
 EXTRA_DIST = $(man_MANS) 	MANUAL BUGS CONTRIBUTE FAQ FEATURES INTERNALS 	LIBCURL README.win32 RESOURCES TODO TheArtOfHttpScripting THANKS
 
 
 SUBDIRS = examples
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = ../config.h ../src/config.h
 CONFIG_CLEAN_FILES = 
 man1dir = $(mandir)/man1
 man3dir = $(mandir)/man3
-man5dir = $(mandir)/man5
 MANS = $(man_MANS)
 DIST_COMMON =  INSTALL Makefile.am Makefile.in THANKS TODO
 
 
 DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
 
@@ -184,51 +183,18 @@
 	  ext=`echo $$i | sed -e 's/^.*\\.//'`; \
 	  inst=`echo $$i | sed -e 's/\\.[0-9a-z]*$$//'`; \
 	  inst=`echo $$inst | sed '$(transform)'`.$$ext; \
 	  echo " rm -f $(DESTDIR)$(man3dir)/$$inst"; \
 	  rm -f $(DESTDIR)$(man3dir)/$$inst; \
 	done
-
-install-man5:
-	$(mkinstalldirs) $(DESTDIR)$(man5dir)
-	@list='$(man5_MANS)'; \
-	l2='$(man_MANS)'; for i in $$l2; do \
-	  case "$$i" in \
-	    *.5*) list="$$list $$i" ;; \
-	  esac; \
-	done; \
-	for i in $$list; do \
-	  if test -f $(srcdir)/$$i; then file=$(srcdir)/$$i; \
-	  else file=$$i; fi; \
-	  ext=`echo $$i | sed -e 's/^.*\\.//'`; \
-	  inst=`echo $$i | sed -e 's/\\.[0-9a-z]*$$//'`; \
-	  inst=`echo $$inst | sed '$(transform)'`.$$ext; \
-	  echo " $(INSTALL_DATA) $$file $(DESTDIR)$(man5dir)/$$inst"; \
-	  $(INSTALL_DATA) $$file $(DESTDIR)$(man5dir)/$$inst; \
-	done
-
-uninstall-man5:
-	@list='$(man5_MANS)'; \
-	l2='$(man_MANS)'; for i in $$l2; do \
-	  case "$$i" in \
-	    *.5*) list="$$list $$i" ;; \
-	  esac; \
-	done; \
-	for i in $$list; do \
-	  ext=`echo $$i | sed -e 's/^.*\\.//'`; \
-	  inst=`echo $$i | sed -e 's/\\.[0-9a-z]*$$//'`; \
-	  inst=`echo $$inst | sed '$(transform)'`.$$ext; \
-	  echo " rm -f $(DESTDIR)$(man5dir)/$$inst"; \
-	  rm -f $(DESTDIR)$(man5dir)/$$inst; \
-	done
 install-man: $(MANS)
 	@$(NORMAL_INSTALL)
-	$(MAKE) $(AM_MAKEFLAGS) install-man1 install-man3 install-man5
+	$(MAKE) $(AM_MAKEFLAGS) install-man1 install-man3
 uninstall-man:
 	@$(NORMAL_UNINSTALL)
-	$(MAKE) $(AM_MAKEFLAGS) uninstall-man1 uninstall-man3 uninstall-man5
+	$(MAKE) $(AM_MAKEFLAGS) uninstall-man1 uninstall-man3
 
 # This directory's subdirectories are mostly independent; you can cd
 # into them and run `make' without going through this Makefile.
 # To change the values of `make' variables: instead of editing Makefiles,
 # (1) if the variable is set in `config.status', edit `config.status'
 #     (which will cause the Makefiles to be regenerated when you run `make');
@@ -363,14 +329,13 @@
 all-am: Makefile $(MANS)
 all-redirect: all-recursive
 install-strip:
 	$(MAKE) $(AM_MAKEFLAGS) AM_INSTALL_PROGRAM_FLAGS=-s install
 installdirs: installdirs-recursive
 installdirs-am:
-	$(mkinstalldirs)  $(DESTDIR)$(mandir)/man1 $(DESTDIR)$(mandir)/man3 \
-		$(DESTDIR)$(mandir)/man5
+	$(mkinstalldirs)  $(DESTDIR)$(mandir)/man1 $(DESTDIR)$(mandir)/man3
 
 
 mostlyclean-generic:
 
 clean-generic:
 
@@ -397,14 +362,14 @@
 	@echo "This command is intended for maintainers to use;"
 	@echo "it deletes files that may require special tools to rebuild."
 
 maintainer-clean: maintainer-clean-recursive
 
 .PHONY: install-man1 uninstall-man1 install-man3 uninstall-man3 \
-install-man5 uninstall-man5 install-man uninstall-man \
-install-data-recursive uninstall-data-recursive install-exec-recursive \
+install-man uninstall-man install-data-recursive \
+uninstall-data-recursive install-exec-recursive \
 uninstall-exec-recursive installdirs-recursive uninstalldirs-recursive \
 all-recursive check-recursive installcheck-recursive info-recursive \
 dvi-recursive mostlyclean-recursive distclean-recursive clean-recursive \
 maintainer-clean-recursive tags tags-recursive mostlyclean-tags \
 distclean-tags clean-tags maintainer-clean-tags distdir info-am info \
 dvi-am dvi check check-am installcheck-am installcheck install-exec-am \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/MANUAL /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/MANUAL
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/MANUAL	2001-03-23 16:15:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/MANUAL	2001-08-03 01:10:38.000000000 +0800
@@ -588,13 +588,13 @@
 
     select a proper place to save it 
 
     Run the 'openssl' application to convert the certificate. If you cd to the
     openssl installation, you can do it like:
 
-     # ./apps/openssl pkcs12 -certfile [file you saved] -out [PEMfile]
+     # ./apps/openssl pkcs12 -in [file you saved] -clcerts -out [PEMfile]
 
 
 RESUMING FILE TRANSFERS
 
  To continue a file transfer where it was previously aborted, curl supports
  resume on http(s) downloads as well as ftp uploads and downloads.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/THANKS /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/THANKS
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/THANKS	2001-05-29 20:07:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/THANKS	2001-08-08 15:22:10.000000000 +0800
@@ -66,6 +66,12 @@
  - Georg Horn <horn@koblenz-net.de>
  - Cris Bailiff <c.bailiff@awayweb.com>
  - Sterling Hughes <sterling@designmultimedia.com>
  - S. Moonesamy
  - Ingo Wilken <iw@WWW.Ecce-Terram.DE>
  - Pawel A. Gajda <mis@k2.net.pl>
+ - Patrick Bihan-Faou
+ - Nico Baggus <Nico.Baggus@mail.ing.nl>
+ - Sergio Ballestrero
+ - Andrew Francis <locust@familyhealth.com.au>
+ - Tomasz Lacki <Tomasz.Lacki@primark.pl>
+ - Georg Huettenegger <georg@ist.org>
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/TODO /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/TODO
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/docs/TODO	2001-05-30 18:40:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/docs/TODO	2001-08-09 20:04:02.000000000 +0800
@@ -4,46 +4,79 @@
                             | (__| |_| |  _ <| |___ 
                              \___|\___/|_| \_\_____|
 
 TODO
 
  Things to do in project cURL. Please tell me what you think, contribute and
- send me patches that improve things!
+ send me patches that improve things! Also check the http://curl.haxx.se/dev
+ web section for various development notes.
 
 To do in a future release (random order):
 
+ * Make the connect non-blocking so that timeouts work for connect in 
+   multi-threaded programs 
+
+ * Using FILE * in the libcurl API introduces a serious limitation since (at
+   least in the *nix falvours I know) you can fopen only the first 256
+   files. This means, that an application that first opens or fopens 256 files
+   has no chance to use libcurl. Using open and file descriptors instead of
+   FILE * would solve the problem. This implies a minor API
+   change/enhancement. ck1 <ck1@swissonline.ch>
+
+ * It would be nice to be able to use "-d" (or something similar) to attach
+   parameters of EITHER the GET or POST type... It would either require
+   another curl argument to specify "GET" (obviously the default should remain
+   POST), or it would require a new curl argument (perhaps -G/--get-data).
+ 
+   I know we're running out of letters, but it somehow feels a little
+   "cleaner" to just tag on each of your HTTP "parameters" (data-items) one by
+   one and let curl put them together, rather than having to put them together
+   myself and include them in the URL.
+
+ * Add an interface that enables a user to select prefered SSL ciphers to use.
+
+ * Make curl deal with cookies better. libcurl should be able to maintain a
+   "cookie jar". Updating it with cookies that is received, and using it to
+   pass cookies to the servers that have matching cookies in the jar.
+   http://curl.haxx.se/dev/cookie-jar.txt
+
+ * Consider an interface to libcurl that allows applications to easier get to
+   know what cookies that are sent back in the response headers.
+
  * Make SSL session ids get used if multiple HTTPS documents from the same
-   host is requested. Note: is this really prioritized now with the persistent
-   connections?
+   host is requested. http://curl.haxx.se/dev/SSL_session_id.txt
 
- * Suggested on the mailing list: CURLOPT_FTP_MKDIR...!
+ * HTTP PUT for files passed on stdin. Requires libcurl to send the file
+   with chunked content encoding. http://curl.haxx.se/dev/HTTP-PUT-stdin.txt
 
- * Rewrite parts of the test suite. Make a (XML?) format to store all
-   test-data in a single for a single test case. The current system makes far
-   too many separate files. We also need to have the test suite support
-   different behaviors, like when libcurl is compiled for IPv6 support and
-   thus performs a different set of FTP commands.
+ * Introduce another callback interface for upload/download that makes one
+   less copy of data and thus a faster operation.
+   http://curl.haxx.se/dev/no_copy_callbacks.txt
+
+ * Suggested on the mailing list: CURLOPT_FTP_MKDIR...!
 
  * Add configure options that disables certain protocols in libcurl to
    decrease footprint.  '--disable-[protocol]' where protocol is http, ftp,
    telnet, ldap, dict or file.
 
  * Extend the test suite to include telnet. The telnet could just do ftp or
    http operations (for which we have test servers).
 
+ * Make TELNET work on windows!
+
  * Add a command line option that allows the output file to get the same time
    stamp as the remote file. libcurl already is capable of fetching the remote
    file's date.
 
  * Make curl's SSL layer option capable of using other free SSL libraries.
    Such as the Mozilla Security Services
    (http://www.mozilla.org/projects/security/pki/nss/) and GNUTLS
    (http://gnutls.hellug.gr/)
 
  * Add asynchronous name resolving, as this enables full timeout support for
-   fork() systems.
+   fork() systems. http://curl.haxx.se/dev/async-resolver.txt
 
  * Move non-URL related functions that are used by both the lib and the curl
    application to a separate "portability lib".
 
  * Add libcurl support/interfaces for more languages. C++ wrapper perhaps?
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/include/curl/curl.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/include/curl/curl.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/include/curl/curl.h	2001-06-07 17:33:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/include/curl/curl.h	2001-08-20 15:49:13.000000000 +0800
@@ -17,13 +17,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: curl.h,v 1.86 2001/05/31 13:52:59 bagder Exp $
+ * $Id: curl.h,v 1.93 2001/08/15 18:40:43 bagder Exp $
  *****************************************************************************/
 
 #include <stdio.h>
 /* The include stuff here is mainly for time_t! */
 #ifdef vms
 # include <types.h>
@@ -81,13 +81,13 @@
 typedef size_t (*curl_read_callback)(char *buffer,
                                      size_t size,
                                      size_t nitems,
                                      void *instream);
 
 typedef int (*curl_passwd_callback)(void *clientp,
-                                    char *prompt,
+                                    const char *prompt,
                                     char *buffer,
                                     int buflen);
 
 /* All possible error codes from all sorts of curl functions. Future versions
    may return other values, stay prepared.
 
@@ -283,17 +283,12 @@
   CINIT(QUOTE, OBJECTPOINT, 28),
 
   /* send FILE * or void * to store headers to, if you use a callback it
      is simply passed to the callback unmodified */
   CINIT(WRITEHEADER, OBJECTPOINT, 29),
 
-#ifdef MULTIDOC
-  /* send linked list of MoreDoc structs */
-  CINIT(MOREDOCS, OBJECTPOINT, 30),
-#endif
-
   /* point to a file to read the initial cookies from, also enables
      "cookie awareness" */
   CINIT(COOKIEFILE, OBJECTPOINT, 31),
 
   /* What version to specifly try to use.
      3 = SSLv3, 2 = SSLv2, all else makes it try v3 first then v2 */
@@ -440,12 +435,22 @@
   CINIT(CONNECTTIMEOUT, LONG, 78),
 
   /* Function that will be called to store headers (instead of fwrite). The
    * parameters will use fwrite() syntax, make sure to follow them. */
   CINIT(HEADERFUNCTION, FUNCTIONPOINT, 79),
 
+  /* Set this to force the HTTP request to get back to GET. Only really usable
+     if POST, PUT or a custom request have been used first.
+   */
+  CINIT(HTTPGET, LONG, 80),
+
+  /* Set if we should verify the Common name from the peer certificate in ssl
+   * handshake, set 1 to check existence, 2 to ensure that it matches the
+   * provided hostname. */
+  CINIT(SSL_VERIFYHOST, LONG, 81),
+  
   CURLOPT_LASTENTRY /* the last unusued */
 } CURLoption;
 
 typedef enum {
   TIMECOND_NONE,
 
@@ -480,13 +485,13 @@
 
 /* cleanup a form: */
 void curl_formfree(struct HttpPost *form);
 
 /* Unix and Win32 getenv function call, this returns a malloc()'ed string that
    MUST be free()ed after usage is complete. */
-char *curl_getenv(char *variable);
+char *curl_getenv(const char *variable);
 
 /* Returns a static ascii string of the libcurl version. */
 char *curl_version(void);
 
 /* Escape and unescape URL encoding in strings. The functions return a new
  * allocated string or NULL if an error occurred.  */
@@ -498,17 +503,15 @@
 CURLcode curl_global_init(long flags);
 
 /* curl_global_cleanup() should be invoked exactly once for each application
    that uses libcurl */
 void curl_global_cleanup(void);
 
-
-
 /* This is the version number */
-#define LIBCURL_VERSION "7.8"
-#define LIBCURL_VERSION_NUM 0x070800
+#define LIBCURL_VERSION "7.8.1"
+#define LIBCURL_VERSION_NUM 0x070801
 
 /* linked-list structure for the CURLOPT_QUOTE option (and other) */
 struct curl_slist {
 	char			*data;
 	struct curl_slist	*next;
 };
@@ -572,13 +575,14 @@
   CURLCLOSEPOLICY_CALLBACK,
  
   CURLCLOSEPOLICY_LAST /* last, never use this */
 } curl_closepolicy;
 
 #define CURL_GLOBAL_SSL (1<<0)
-#define CURL_GLOBAL_ALL (CURL_GLOBAL_SSL)
+#define CURL_GLOBAL_WIN32 (1<<1)
+#define CURL_GLOBAL_ALL (CURL_GLOBAL_SSL|CURL_GLOBAL_WIN32)
 #define CURL_GLOBAL_NOTHING 0
 #define CURL_GLOBAL_DEFAULT CURL_GLOBAL_ALL
 
 #ifdef  __cplusplus
 }
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/include/curl/mprintf.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/include/curl/mprintf.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/include/curl/mprintf.h	2001-01-05 20:19:43.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/include/curl/mprintf.h	2001-08-16 02:17:14.000000000 +0800
@@ -1,9 +1,9 @@
 /*************************************************************************
  *
- * $Id: mprintf.h,v 1.5 2001/01/05 12:19:43 bagder Exp $
+ * $Id: mprintf.h,v 1.6 2001/08/15 18:17:14 bagder Exp $
  *
  * Permission to use, copy, modify, and distribute this software for any
  * purpose with or without fee is hereby granted, provided that the above
  * copyright notice and this permission notice appear in all copies.
  *
  * THIS SOFTWARE IS PROVIDED ``AS IS'' AND WITHOUT ANY EXPRESS OR IMPLIED
@@ -51,12 +51,13 @@
  ************************************************************************/
 
 #ifndef H_MPRINTF
 #define H_MPRINTF
 
 #include <stdarg.h>
+#include <stdio.h> /* needed for FILE */
 
 int curl_mprintf(const char *format, ...);
 int curl_mfprintf(FILE *fd, const char *format, ...);
 int curl_msprintf(char *buffer, const char *format, ...);
 int curl_msnprintf(char *buffer, size_t maxlength, const char *format, ...);
 int curl_mvprintf(const char *format, va_list args);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/arpa_telnet.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/arpa_telnet.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/arpa_telnet.h	2001-01-05 17:34:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/arpa_telnet.h	2001-08-14 16:16:53.000000000 +0800
@@ -1,321 +1,101 @@
-/*
- * Copyright (c) 1983, 1993
- *	The Regents of the University of California.  All rights reserved.
+#ifndef __ARPA_TELNET_H
+#define __ARPA_TELNET_H
+/*****************************************************************************
+ *                                  _   _ ____  _     
+ *  Project                     ___| | | |  _ \| |    
+ *                             / __| | | | |_) | |    
+ *                            | (__| |_| |  _ <| |___ 
+ *                             \___|\___/|_| \_\_____|
  *
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer.
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 3. All advertising materials mentioning features or use of this software
- *    must display the following acknowledgement:
- *	This product includes software developed by the University of
- *	California, Berkeley and its contributors.
- * 4. Neither the name of the University nor the names of its contributors
- *    may be used to endorse or promote products derived from this software
- *    without specific prior written permission.
+ * Copyright (C) 2001, Daniel Stenberg, <daniel@haxx.se>, et al.
  *
- * THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
+ * In order to be useful for every potential user, curl and libcurl are
+ * dual-licensed under the MPL and the MIT/X-derivate licenses.
  *
- *	@(#)telnet.h	8.2 (Berkeley) 12/15/93
- */
-
-#ifndef _ARPA_TELNET_H
-#define _ARPA_TELNET_H
-
-/*
- * Definitions for the TELNET protocol.
- */
-#define	IAC	255		/* interpret as command: */
-#define	DONT	254		/* you are not to use option */
-#define	DO	253		/* please, you use option */
-#define	WONT	252		/* I won't use option */
-#define	WILL	251		/* I will use option */
-#define	SB	250		/* interpret as subnegotiation */
-#define	GA	249		/* you may reverse the line */
-#define	EL	248		/* erase the current line */
-#define	EC	247		/* erase the current character */
-#define	AYT	246		/* are you there */
-#define	AO	245		/* abort output--but let prog finish */
-#define	IP	244		/* interrupt process--permanently */
-#define	BREAK	243		/* break */
-#define	DM	242		/* data mark--for connect. cleaning */
-#define	NOP	241		/* nop */
-#define	SE	240		/* end sub negotiation */
-#define EOR     239             /* end of record (transparent mode) */
-#define	ABORT	238		/* Abort process */
-#define	SUSP	237		/* Suspend process */
-#define	xEOF	236		/* End of file: EOF is already used... */
-
-#define SYNCH	242		/* for telfunc calls */
-
-#ifdef TELCMDS
-static
-char *telcmds[] = {
-	"EOF", "SUSP", "ABORT", "EOR",
-	"SE", "NOP", "DMARK", "BRK", "IP", "AO", "AYT", "EC",
-	"EL", "GA", "SB", "WILL", "WONT", "DO", "DONT", "IAC", 0,
-};
-#else
-extern char *telcmds[];
-#endif
-
-#define	TELCMD_FIRST	xEOF
-#define	TELCMD_LAST	IAC
-#define	TELCMD_OK(x)	((unsigned int)(x) <= TELCMD_LAST && \
-			 (unsigned int)(x) >= TELCMD_FIRST)
-#define	TELCMD(x)	telcmds[(x)-TELCMD_FIRST]
-
-/* telnet options */
-#define TELOPT_BINARY	0	/* 8-bit data path */
-#define TELOPT_ECHO	1	/* echo */
-#define	TELOPT_RCP	2	/* prepare to reconnect */
-#define	TELOPT_SGA	3	/* suppress go ahead */
-#define	TELOPT_NAMS	4	/* approximate message size */
-#define	TELOPT_STATUS	5	/* give status */
-#define	TELOPT_TM	6	/* timing mark */
-#define	TELOPT_RCTE	7	/* remote controlled transmission and echo */
-#define TELOPT_NAOL 	8	/* negotiate about output line width */
-#define TELOPT_NAOP 	9	/* negotiate about output page size */
-#define TELOPT_NAOCRD	10	/* negotiate about CR disposition */
-#define TELOPT_NAOHTS	11	/* negotiate about horizontal tabstops */
-#define TELOPT_NAOHTD	12	/* negotiate about horizontal tab disposition */
-#define TELOPT_NAOFFD	13	/* negotiate about formfeed disposition */
-#define TELOPT_NAOVTS	14	/* negotiate about vertical tab stops */
-#define TELOPT_NAOVTD	15	/* negotiate about vertical tab disposition */
-#define TELOPT_NAOLFD	16	/* negotiate about output LF disposition */
-#define TELOPT_XASCII	17	/* extended ascic character set */
-#define	TELOPT_LOGOUT	18	/* force logout */
-#define	TELOPT_BM	19	/* byte macro */
-#define	TELOPT_DET	20	/* data entry terminal */
-#define	TELOPT_SUPDUP	21	/* supdup protocol */
-#define	TELOPT_SUPDUPOUTPUT 22	/* supdup output */
-#define	TELOPT_SNDLOC	23	/* send location */
-#define	TELOPT_TTYPE	24	/* terminal type */
-#define	TELOPT_EOR	25	/* end or record */
-#define	TELOPT_TUID	26	/* TACACS user identification */
-#define	TELOPT_OUTMRK	27	/* output marking */
-#define	TELOPT_TTYLOC	28	/* terminal location number */
-#define	TELOPT_3270REGIME 29	/* 3270 regime */
-#define	TELOPT_X3PAD	30	/* X.3 PAD */
-#define	TELOPT_NAWS	31	/* window size */
-#define	TELOPT_TSPEED	32	/* terminal speed */
-#define	TELOPT_LFLOW	33	/* remote flow control */
-#define TELOPT_LINEMODE	34	/* Linemode option */
-#define TELOPT_XDISPLOC	35	/* X Display Location */
-#define TELOPT_OLD_ENVIRON 36	/* Old - Environment variables */
-#define	TELOPT_AUTHENTICATION 37/* Authenticate */
-#define	TELOPT_ENCRYPT	38	/* Encryption option */
-#define TELOPT_NEW_ENVIRON 39	/* New - Environment variables */
-#define	TELOPT_EXOPL	255	/* extended-options-list */
-
-
-#define	NTELOPTS	(1+TELOPT_NEW_ENVIRON)
-#ifdef TELOPTS
-static
-char *telopts[NTELOPTS+1] = {
-	"BINARY", "ECHO", "RCP", "SUPPRESS GO AHEAD", "NAME",
-	"STATUS", "TIMING MARK", "RCTE", "NAOL", "NAOP",
-	"NAOCRD", "NAOHTS", "NAOHTD", "NAOFFD", "NAOVTS",
-	"NAOVTD", "NAOLFD", "EXTEND ASCII", "LOGOUT", "BYTE MACRO",
-	"DATA ENTRY TERMINAL", "SUPDUP", "SUPDUP OUTPUT",
-	"SEND LOCATION", "TERMINAL TYPE", "END OF RECORD",
-	"TACACS UID", "OUTPUT MARKING", "TTYLOC",
-	"3270 REGIME", "X.3 PAD", "NAWS", "TSPEED", "LFLOW",
-	"LINEMODE", "XDISPLOC", "OLD-ENVIRON", "AUTHENTICATION",
-	"ENCRYPT", "NEW-ENVIRON",
-	0,
-};
-#define	TELOPT_FIRST	TELOPT_BINARY
-#define	TELOPT_LAST	TELOPT_NEW_ENVIRON
-#define	TELOPT_OK(x)	((unsigned int)(x) <= TELOPT_LAST)
-#define	TELOPT(x)	telopts[(x)-TELOPT_FIRST]
-#endif
-
-/* sub-option qualifiers */
-#define	TELQUAL_IS	0	/* option is... */
-#define	TELQUAL_SEND	1	/* send option */
-#define	TELQUAL_INFO	2	/* ENVIRON: informational version of IS */
-#define	TELQUAL_REPLY	2	/* AUTHENTICATION: client version of IS */
-#define	TELQUAL_NAME	3	/* AUTHENTICATION: client version of IS */
-
-#define	LFLOW_OFF		0	/* Disable remote flow control */
-#define	LFLOW_ON		1	/* Enable remote flow control */
-#define	LFLOW_RESTART_ANY	2	/* Restart output on any char */
-#define	LFLOW_RESTART_XON	3	/* Restart output only on XON */
+ * You may opt to use, copy, modify, merge, publish, distribute and/or sell
+ * copies of the Software, and permit persons to whom the Software is
+ * furnished to do so, under the terms of the MPL or the MIT/X-derivate
+ * licenses. You may pick one of these licenses.
+ *
+ * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
+ * KIND, either express or implied.
+ *
+ * $Id: arpa_telnet.h,v 1.4 2001/08/14 08:16:53 bagder Exp $
+ *****************************************************************************/
 
 /*
- * LINEMODE suboptions
+ * Telnet option defines. Add more here if in need.
  */
+#define TELOPT_BINARY   0  /* binary 8bit data */
+#define TELOPT_SGA      3  /* Supress Go Ahead */
+#define TELOPT_EXOPL  255  /* EXtended OPtions List */
+#define TELOPT_TTYPE   24  /* Terminal TYPE */
+#define TELOPT_XDISPLOC 35 /* X DISPlay LOCation */
 
-#define	LM_MODE		1
-#define	LM_FORWARDMASK	2
-#define	LM_SLC		3
-
-#define	MODE_EDIT	0x01
-#define	MODE_TRAPSIG	0x02
-#define	MODE_ACK	0x04
-#define MODE_SOFT_TAB	0x08
-#define MODE_LIT_ECHO	0x10
-
-#define	MODE_MASK	0x1f
-
-/* Not part of protocol, but needed to simplify things... */
-#define MODE_FLOW		0x0100
-#define MODE_ECHO		0x0200
-#define MODE_INBIN		0x0400
-#define MODE_OUTBIN		0x0800
-#define MODE_FORCE		0x1000
-
-#define	SLC_SYNCH	1
-#define	SLC_BRK		2
-#define	SLC_IP		3
-#define	SLC_AO		4
-#define	SLC_AYT		5
-#define	SLC_EOR		6
-#define	SLC_ABORT	7
-#define	SLC_EOF		8
-#define	SLC_SUSP	9
-#define	SLC_EC		10
-#define	SLC_EL		11
-#define	SLC_EW		12
-#define	SLC_RP		13
-#define	SLC_LNEXT	14
-#define	SLC_XON		15
-#define	SLC_XOFF	16
-#define	SLC_FORW1	17
-#define	SLC_FORW2	18
-
-#define	NSLC		18
+#define TELOPT_NEW_ENVIRON 39  /* NEW ENVIRONment variables */
+#define NEW_ENV_VAR   0
+#define NEW_ENV_VALUE 1
 
 /*
- * For backwards compatability, we define SLC_NAMES to be the
- * list of names if SLC_NAMES is not defined.
+ * The telnet options represented as strings
  */
-#define	SLC_NAMELIST	"0", "SYNCH", "BRK", "IP", "AO", "AYT", "EOR", \
-			"ABORT", "EOF", "SUSP", "EC", "EL", "EW", "RP", \
-			"LNEXT", "XON", "XOFF", "FORW1", "FORW2", 0,
-#ifdef	SLC_NAMES
-char *slc_names[] = {
-	SLC_NAMELIST
+static const char *telnetoptions[]=
+{
+  "BINARY",      "ECHO",           "RCP",           "SUPPRESS GO AHEAD",
+  "NAME",        "STATUS"          "TIMING MARK",   "RCTE",
+  "NAOL",        "NAOP",           "NAOCRD",        "NAOHTS",
+  "NAOHTD",      "NAOFFD",         "NAOVTS",        "NAOVTD",
+  "NAOLFD",      "EXTEND ASCII",   "LOGOUT",        "BYTE MACRO",
+  "DE TERMINAL", "SUPDUP",         "SUPDUP OUTPUT", "SEND LOCATION",
+  "TERM TYPE",   "END OF RECORD",  "TACACS UID",    "OUTPUT MARKING",
+  "TTYLOC",      "3270 REGIME",    "X3 PAD",        "NAWS",
+  "TERM SPEED",  "LFLOW",          "LINEMODE",      "XDISPLOC",
+  "OLD-ENVIRON", "AUTHENTICATION", "ENCRYPT",       "NEW-ENVIRON"
 };
-#else
-extern char *slc_names[];
-#define	SLC_NAMES SLC_NAMELIST
-#endif
 
-#define	SLC_NAME_OK(x)	((unsigned int)(x) <= NSLC)
-#define SLC_NAME(x)	slc_names[x]
+#define TELOPT_MAXIMUM TELOPT_NEW_ENVIRON
 
-#define	SLC_NOSUPPORT	0
-#define	SLC_CANTCHANGE	1
-#define	SLC_VARIABLE	2
-#define	SLC_DEFAULT	3
-#define	SLC_LEVELBITS	0x03
-
-#define	SLC_FUNC	0
-#define	SLC_FLAGS	1
-#define	SLC_VALUE	2
-
-#define	SLC_ACK		0x80
-#define	SLC_FLUSHIN	0x40
-#define	SLC_FLUSHOUT	0x20
-
-#define	OLD_ENV_VAR	1
-#define	OLD_ENV_VALUE	0
-#define	NEW_ENV_VAR	0
-#define	NEW_ENV_VALUE	1
-#define	ENV_ESC		2
-#define	ENV_USERVAR	3
+#define TELOPT_OK(x) ((x) <= TELOPT_MAXIMUM)
+#define TELOPT(x)    telnetoptions[x]
 
-/*
- * AUTHENTICATION suboptions
- */
+#define NTELOPTS 40 
 
 /*
- * Who is authenticating who ...
+ * First some defines
  */
-#define	AUTH_WHO_CLIENT		0	/* Client authenticating server */
-#define	AUTH_WHO_SERVER		1	/* Server authenticating client */
-#define	AUTH_WHO_MASK		1
+#define xEOF 236 /* End Of File */ 
+#define SE   240 /* Sub negotiation End */
+#define NOP  241 /* No OPeration */
+#define DM   242 /* Data Mark */
+#define GA   249 /* Go Ahead, reverse the line */
+#define SB   250 /* SuBnegotiation */
+#define WILL 251 /* Our side WILL use this option */
+#define WONT 252 /* Our side WON'T use this option */
+#define DO   253 /* DO use this option! */
+#define DONT 254 /* DON'T use this option! */
+#define IAC  255 /* Interpret As Command */
 
 /*
- * amount of authentication done
+ * Then those numbers represented as strings:
  */
-#define	AUTH_HOW_ONE_WAY	0
-#define	AUTH_HOW_MUTUAL		2
-#define	AUTH_HOW_MASK		2
-
-#define	AUTHTYPE_NULL		0
-#define	AUTHTYPE_KERBEROS_V4	1
-#define	AUTHTYPE_KERBEROS_V5	2
-#define	AUTHTYPE_SPX		3
-#define	AUTHTYPE_MINK		4
-#define	AUTHTYPE_CNT		5
-
-#define	AUTHTYPE_TEST		99
-
-#ifdef	AUTH_NAMES
-char *authtype_names[] = {
-	"NULL", "KERBEROS_V4", "KERBEROS_V5", "SPX", "MINK", 0,
+static const char *telnetcmds[]=
+{
+  "EOF",  "SUSP",  "ABORT", "EOR",  "SE",
+  "NOP",  "DMARK", "BRK",   "IP",   "AO",
+  "AYT",  "EC",    "EL",    "GA",   "SB",
+  "WILL", "WONT",  "DO",    "DONT", "IAC"
 };
-#else
-extern char *authtype_names[];
-#endif
 
-#define	AUTHTYPE_NAME_OK(x)	((unsigned int)(x) < AUTHTYPE_CNT)
-#define	AUTHTYPE_NAME(x)	authtype_names[x]
-
-/*
- * ENCRYPTion suboptions
- */
-#define	ENCRYPT_IS		0	/* I pick encryption type ... */
-#define	ENCRYPT_SUPPORT		1	/* I support encryption types ... */
-#define	ENCRYPT_REPLY		2	/* Initial setup response */
-#define	ENCRYPT_START		3	/* Am starting to send encrypted */
-#define	ENCRYPT_END		4	/* Am ending encrypted */
-#define	ENCRYPT_REQSTART	5	/* Request you start encrypting */
-#define	ENCRYPT_REQEND		6	/* Request you send encrypting */
-#define	ENCRYPT_ENC_KEYID	7
-#define	ENCRYPT_DEC_KEYID	8
-#define	ENCRYPT_CNT		9
-
-#define	ENCTYPE_ANY		0
-#define	ENCTYPE_DES_CFB64	1
-#define	ENCTYPE_DES_OFB64	2
-#define	ENCTYPE_CNT		3
-
-#ifdef	ENCRYPT_NAMES
-char *encrypt_names[] = {
-	"IS", "SUPPORT", "REPLY", "START", "END",
-	"REQUEST-START", "REQUEST-END", "ENC-KEYID", "DEC-KEYID",
-	0,
-};
-char *enctype_names[] = {
-	"ANY", "DES_CFB64",  "DES_OFB64",  0,
-};
-#else
-extern char *encrypt_names[];
-extern char *enctype_names[];
-#endif
+#define TELCMD_MINIMUM xEOF /* the first one */
+#define TELCMD_MAXIMUM  IAC  /* surprise, 255 is the last one! ;-) */
 
+#define TELQUAL_IS   0
+#define TELQUAL_SEND 1
+#define TELQUAL_INFO 2
+#define TELQUAL_NAME 3
 
-#define	ENCRYPT_NAME_OK(x)	((unsigned int)(x) < ENCRYPT_CNT)
-#define	ENCRYPT_NAME(x)		encrypt_names[x]
+#define TELCMD_OK(x) ( ((unsigned int)(x) >= TELCMD_MINIMUM) && \
+                       ((unsigned int)(x) <= TELCMD_MAXIMUM) )
+#define TELCMD(x)    telnetcmds[(x)-TELCMD_MINIMUM]
 
-#define	ENCTYPE_NAME_OK(x)	((unsigned int)(x) < ENCTYPE_CNT)
-#define	ENCTYPE_NAME(x)		enctype_names[x]
-#endif /* _ARPA_TELNET_H */
+#endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/base64.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/base64.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/base64.c	2001-01-05 15:49:05.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/base64.c	2001-08-14 17:25:15.000000000 +0800
@@ -1,152 +1,263 @@
-/*
- * Copyright (c) 1995 - 1999 Kungliga Tekniska Högskolan
- * (Royal Institute of Technology, Stockholm, Sweden).
- * All rights reserved.
- * 
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer.
- * 
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 
- * 3. Neither the name of the Institute nor the names of its contributors
- *    may be used to endorse or promote products derived from this software
- *    without specific prior written permission.
+/*****************************************************************************
+ *                                  _   _ ____  _     
+ *  Project                     ___| | | |  _ \| |    
+ *                             / __| | | | |_) | |    
+ *                            | (__| |_| |  _ <| |___ 
+ *                             \___|\___/|_| \_\_____|
+ *
+ * Copyright (C) 2001, Andrew Francis and Daniel Stenberg
+ *
+ * In order to be useful for every potential user, curl and libcurl are
+ * dual-licensed under the MPL and the MIT/X-derivate licenses.
+ *
+ * You may opt to use, copy, modify, merge, publish, distribute and/or sell
+ * copies of the Software, and permit persons to whom the Software is
+ * furnished to do so, under the terms of the MPL or the MIT/X-derivate
+ * licenses. You may pick one of these licenses.
+ *
+ * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
+ * KIND, either express or implied.
+ *
+ * $Id: base64.c,v 1.9 2001/08/14 09:25:15 bagder Exp $
+ *****************************************************************************/
+
+/* Base64 encoding/decoding
+ *
+ * Test harnesses down the bottom - compile with -DTEST_ENCODE for
+ * a program that will read in raw data from stdin and write out
+ * a base64-encoded version to stdout, and the length returned by the
+ * encoding function to stderr. Compile with -DTEST_DECODE for a program that
+ * will go the other way.
  * 
- * THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
+ * This code will break if int is smaller than 32 bits
  */
 
 #ifdef HAVE_CONFIG_H
 #include <config.h>
 #endif
 #include <stdlib.h>
 #include <string.h>
+
+#define _MPRINTF_REPLACE /* use our functions only */
+#include <curl/mprintf.h>
+
 #include "base64.h"
 
-/* The last #include file should be: */
 #ifdef MALLOCDEBUG
 #include "memdebug.h"
 #endif
 
-static char base64[] = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
-
-static int pos(char c)
+static void decodeQuantum(unsigned char *dest, char *src)
 {
-  char *p;
-  for(p = base64; *p; p++)
-    if(*p == c)
-      return p - base64;
-  return -1;
+  unsigned int x = 0;
+  int i;
+  for(i = 0; i < 4; i++) {
+    if(src[i] >= 'A' && src[i] <= 'Z')
+      x = (x << 6) + (unsigned int)(src[i] - 'A' + 0);
+    else if(src[i] >= 'a' && src[i] <= 'z')
+      x = (x << 6) + (unsigned int)(src[i] - 'a' + 26);
+    else if(src[i] >= '0' && src[i] <= '9') 
+      x = (x << 6) + (unsigned int)(src[i] - '0' + 52);
+    else if(src[i] == '+')
+      x = (x << 6) + 62;
+    else if(src[i] == '/')
+      x = (x << 6) + 63;
+  }
+
+  dest[2] = (unsigned char)(x & 255); x >>= 8;
+  dest[1] = (unsigned char)(x & 255); x >>= 8;
+  dest[0] = (unsigned char)(x & 255); x >>= 8;
 }
 
-#if 1
-int Curl_base64_encode(const void *data, int size, char **str)
+/* base64Decode
+ * Given a base64 string at src, decode it into the memory pointed
+ * to by dest. If rawLength points to a valid address (ie not NULL),
+ * store the length of the decoded data to it.
+ */
+static void base64Decode(unsigned char *dest, char *src, int *rawLength)
 {
-  char *s, *p;
+  int length = 0;
+  int equalsTerm = 0;
   int i;
-  int c;
-  const unsigned char *q;
-
-  p = s = (char*)malloc(size*4/3+4);
-  if (p == NULL)
-      return -1;
-  q = (const unsigned char*)data;
-  i=0;
-  for(i = 0; i < size;){
-    c=q[i++];
-    c*=256;
-    if(i < size)
-      c+=q[i];
-    i++;
-    c*=256;
-    if(i < size)
-      c+=q[i];
-    i++;
-    p[0]=base64[(c&0x00fc0000) >> 18];
-    p[1]=base64[(c&0x0003f000) >> 12];
-    p[2]=base64[(c&0x00000fc0) >> 6];
-    p[3]=base64[(c&0x0000003f) >> 0];
-    if(i > size)
-      p[3]='=';
-    if(i > size+1)
-      p[2]='=';
-    p+=4;
+  unsigned char lastQuantum[3];
+	
+  while((src[length] != '=') && src[length])
+    length++;
+  while(src[length+equalsTerm] == '=')
+    equalsTerm++;
+  
+  if(rawLength)
+    *rawLength = (length * 3 / 4) - equalsTerm;
+  
+  for(i = 0; i < length/4 - 1; i++) {
+    decodeQuantum(dest, src);
+    dest += 3; src += 4;
   }
-  *p=0;
-  *str = s;
-  return strlen(s);
+
+  decodeQuantum(lastQuantum, src);
+  for(i = 0; i < 3 - equalsTerm; i++) dest[i] = lastQuantum[i];
+	
 }
-#endif
 
-int Curl_base64_decode(const char *str, void *data)
+/* ---- Base64 Encoding --- */
+static char table64[]=
+  "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
+  
+/*
+ * Curl_base64_encode()
+ *
+ * Returns the length of the newly created base64 string. The third argument
+ * is a pointer to an allocated area holding the base64 data. If something
+ * went wrong, -1 is returned.
+ *
+ */
+int Curl_base64_encode(const void *inp, int insize, char **outptr)
 {
-  const char *p;
-  unsigned char *q;
-  int c;
-  int x;
-  int done = 0;
-  q=(unsigned char*)data;
-  for(p=str; *p && !done; p+=4){
-    x = pos(p[0]);
-    if(x >= 0)
-      c = x;
-    else{
-      done = 3;
-      break;
-    }
-    c*=64;
-    
-    x = pos(p[1]);
-    if(x >= 0)
-      c += x;
-    else
-      return -1;
-    c*=64;
-    
-    if(p[2] == '=')
-      done++;
-    else{
-      x = pos(p[2]);
-      if(x >= 0)
-	c += x;
+  unsigned char ibuf[3];
+  unsigned char obuf[4];
+  int i;
+  int inputparts;
+  char *output;
+  char *base64data;
+
+  char *indata = (char *)inp;
+
+  if(0 == insize)
+    insize = strlen(indata);
+
+  base64data = output = (char*)malloc(insize*4/3+4);
+  if(NULL == output)
+    return -1;
+
+  while(insize > 0) {
+    for (i = inputparts = 0; i < 3; i++) { 
+      if(*indata) {
+        inputparts++;
+        ibuf[i] = *indata;
+        indata++;
+        insize--;
+      }
       else
-	return -1;
+        ibuf[i] = 0;
     }
-    c*=64;
-    
-    if(p[3] == '=')
-      done++;
-    else{
-      if(done)
-	return -1;
-      x = pos(p[3]);
-      if(x >= 0)
-	c += x;
-      else
-	return -1;
+                       
+    obuf [0] = (ibuf [0] & 0xFC) >> 2;
+    obuf [1] = ((ibuf [0] & 0x03) << 4) | ((ibuf [1] & 0xF0) >> 4);
+    obuf [2] = ((ibuf [1] & 0x0F) << 2) | ((ibuf [2] & 0xC0) >> 6);
+    obuf [3] = ibuf [2] & 0x3F;
+
+    switch(inputparts) {
+    case 1: /* only one byte read */
+      sprintf(output, "%c%c==", 
+              table64[obuf[0]],
+              table64[obuf[1]]);
+      break;
+    case 2: /* two bytes read */
+      sprintf(output, "%c%c%c=", 
+              table64[obuf[0]],
+              table64[obuf[1]],
+              table64[obuf[2]]);
+      break;
+    default:
+      sprintf(output, "%c%c%c%c", 
+              table64[obuf[0]],
+              table64[obuf[1]],
+              table64[obuf[2]],
+              table64[obuf[3]] );
+      break;
     }
-    if(done < 3)
-      *q++=(c&0x00ff0000)>>16;
-      
-    if(done < 2)
-      *q++=(c&0x0000ff00)>>8;
-    if(done < 1)
-      *q++=(c&0x000000ff)>>0;
+    output += 4;
   }
-  return q - (unsigned char*)data;
+  *output=0;
+  *outptr = base64data; /* make it return the actual data memory */
+
+  return strlen(base64data); /* return the length of the new data */
+}
+/* ---- End of Base64 Encoding ---- */
+
+int Curl_base64_decode(const char *str, void *data)
+{
+  int ret;
+
+  base64Decode((unsigned char *)data, (char *)str, &ret);
+  return ret;
 }
+
+/************* TEST HARNESS STUFF ****************/
+
+
+#ifdef TEST_ENCODE
+/* encoding test harness. Read in standard input and write out the length
+ * returned by Curl_base64_encode, followed by the base64'd data itself
+ */
+#include <stdio.h>
+
+#define TEST_NEED_SUCK
+void *suck(int *);
+
+int main(int argc, char **argv, char **envp) {
+	char *base64;
+	int base64Len;
+	unsigned char *data;
+	int dataLen;
+	
+	data = (unsigned char *)suck(&dataLen);
+	base64Len = Curl_base64_encode(data, dataLen, &base64);
+
+	fprintf(stderr, "%d\n", base64Len);
+	fprintf(stdout, "%s",   base64);
+
+	free(base64); free(data);
+	return 0;
+}
+#endif
+
+#ifdef TEST_DECODE
+/* decoding test harness. Read in a base64 string from stdin and write out the 
+ * length returned by Curl_base64_decode, followed by the decoded data itself
+ */
+#include <stdio.h>
+
+#define TEST_NEED_SUCK
+void *suck(int *);
+
+int main(int argc, char **argv, char **envp) {
+	char *base64;
+	int base64Len;
+	unsigned char *data;
+	int dataLen;
+	
+	base64 = (char *)suck(&base64Len);
+	data = (unsigned char *)malloc(base64Len * 3/4 + 8);
+	dataLen = Curl_base64_decode(base64, data);
+
+	fprintf(stderr, "%d\n", dataLen);
+	fwrite(data,1,dataLen,stdout);
+	
+
+	free(base64); free(data);
+	return 0;
+}
+#endif
+
+#ifdef TEST_NEED_SUCK
+/* this function 'sucks' in as much as possible from stdin */
+void *suck(int *lenptr) {
+	int cursize = 8192;
+	unsigned char *buf = NULL;
+	int lastread;
+	int len = 0;
+	
+	do {
+		cursize *= 2;
+		buf = (unsigned char *)realloc(buf, cursize);
+		memset(buf + len, 0, cursize - len);
+		lastread = fread(buf + len, 1, cursize - len, stdin);
+		len += lastread;
+	} while(!feof(stdin));
+	
+	lenptr[0] = len;
+	return (void *)buf;
+}
+#endif
+
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/base64.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/base64.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/base64.h	2001-01-05 15:59:55.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/base64.h	2001-08-03 21:52:06.000000000 +0800
@@ -1,40 +1,27 @@
-/*
- * Copyright (c) 1995, 1996, 1997 Kungliga Tekniska Högskolan
- * (Royal Institute of Technology, Stockholm, Sweden).
- * All rights reserved.
- * 
- * Redistribution and use in source and binary forms, with or without
- * modification, are permitted provided that the following conditions
- * are met:
- * 
- * 1. Redistributions of source code must retain the above copyright
- *    notice, this list of conditions and the following disclaimer.
- * 
- * 2. Redistributions in binary form must reproduce the above copyright
- *    notice, this list of conditions and the following disclaimer in the
- *    documentation and/or other materials provided with the distribution.
- * 
- * 3. Neither the name of the Institute nor the names of its contributors
- *    may be used to endorse or promote products derived from this software
- *    without specific prior written permission.
- * 
- * THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- */
-
 #ifndef __BASE64_H
 #define __BASE64_H
-
+/*****************************************************************************
+ *                                  _   _ ____  _     
+ *  Project                     ___| | | |  _ \| |    
+ *                             / __| | | | |_) | |    
+ *                            | (__| |_| |  _ <| |___ 
+ *                             \___|\___/|_| \_\_____|
+ *
+ * Copyright (C) 2000, Daniel Stenberg, <daniel@haxx.se>, et al.
+ *
+ * In order to be useful for every potential user, curl and libcurl are
+ * dual-licensed under the MPL and the MIT/X-derivate licenses.
+ *
+ * You may opt to use, copy, modify, merge, publish, distribute and/or sell
+ * copies of the Software, and permit persons to whom the Software is
+ * furnished to do so, under the terms of the MPL or the MIT/X-derivate
+ * licenses. You may pick one of these licenses.
+ *
+ * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
+ * KIND, either express or implied.
+ *
+ * $Id: base64.h,v 1.7 2001/08/03 13:52:06 bagder Exp $
+ *****************************************************************************/
 int Curl_base64_encode(const void *data, int size, char **str);
 int Curl_base64_decode(const char *str, void *data);
-
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/cookie.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/cookie.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/cookie.c	2001-05-30 19:06:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/cookie.c	2001-08-14 16:17:29.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: cookie.c,v 1.14 2001/05/30 11:06:56 bagder Exp $
+ * $Id: cookie.c,v 1.15 2001/08/14 08:17:29 bagder Exp $
  *****************************************************************************/
 
 /***
 
 
 RECEIVING COOKIE INFORMATION
@@ -166,27 +166,28 @@
             co->expires = curl_getdate(what, &now);
           }
           else if(!co->name) {
             co->name = strdup(name);
             co->value = strdup(what);
           }
-          else
-            ;/* this is the second (or more) name we don't know
-                about! */
+          /*
+            else this is the second (or more) name we don't know
+            about! */
         }
         else {
           /* this is an "illegal" <what>=<this> pair */
         }
       }
       else {
         if(sscanf(ptr, "%" MAX_COOKIE_LINE_TXT "[^\r\n]",
                   what)) {
           if(strequal("secure", what))
             co->secure = TRUE;
-          else
-            ; /* unsupported keyword without assign! */
+          /* else,
+             unsupported keyword without assign! */
+
         }
       }
       if(!semiptr)
         continue; /* we already know there are no more cookies */
 
       *semiptr=';'; /* put the semicolon back */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/dict.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/dict.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/dict.c	2001-03-14 22:11:11.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/dict.c	2001-08-14 16:18:35.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: dict.c,v 1.14 2001/03/14 14:11:11 bagder Exp $
+ * $Id: dict.c,v 1.15 2001/08/14 08:18:35 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -77,17 +77,12 @@
 #include "progress.h"
 #include "strequal.h"
 
 #define _MPRINTF_REPLACE /* use our functions only */
 #include <curl/mprintf.h>
 
-CURLcode Curl_dict_done(struct connectdata *conn)
-{
-  return CURLE_OK;
-}
-
 CURLcode Curl_dict(struct connectdata *conn)
 {
   int nth;
   char *word;
   char *ppath;
   char *database = NULL;
@@ -126,16 +121,16 @@
     }
       
     if ((word == NULL) || (*word == (char)0)) {
       failf(data, "lookup word is missing\n");
     }
     if ((database == NULL) || (*database == (char)0)) {
-      database = "!";
+      database = (char *)"!";
     }
     if ((strategy == NULL) || (*strategy == (char)0)) {
-      strategy = ".";
+      strategy = (char *)".";
     }
     if ((nthdef == NULL) || (*nthdef == (char)0)) {
       nth = 0;
     }
     else {
       nth = atoi(nthdef);
@@ -179,13 +174,13 @@
     }
       
     if ((word == NULL) || (*word == (char)0)) {
       failf(data, "lookup word is missing\n");
     }
     if ((database == NULL) || (*database == (char)0)) {
-      database = "!";
+      database = (char *)"!";
     }
     if ((nthdef == NULL) || (*nthdef == (char)0)) {
       nth = 0;
     }
     else {
       nth = atoi(nthdef);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/dllinit.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/dllinit.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/dllinit.c	2000-10-06 18:48:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/dllinit.c	2001-08-06 17:36:34.000000000 +0800
@@ -1,6 +1,7 @@
+#ifdef WIN32
 /* dllinit.c -- Portable DLL initialization. 
    Copyright (C) 1998, 1999 Free Software Foundation, Inc.
    Contributed by Mumit Khan (khan@xraylith.wisc.edu).
 
    I've used DllMain as the DLL "main" since that's the most common 
    usage. MSVC and Mingw32 both default to DllMain as the standard
@@ -77,6 +78,7 @@
 
     case DLL_THREAD_DETACH:
       break;
     }
   return TRUE;
 }
+#endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/easy.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/easy.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/easy.c	2001-05-31 19:53:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/easy.c	2001-08-17 18:19:26.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: easy.c,v 1.15 2001/05/31 11:30:34 bumblebury Exp $
+ * $Id: easy.c,v 1.19 2001/08/17 10:19:26 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -71,50 +71,121 @@
 #endif
 
 #include "urldata.h"
 #include <curl/curl.h>
 #include "transfer.h"
 #include "ssluse.h"
+#include "url.h"
+#include "getinfo.h"
 
 #define _MPRINTF_REPLACE /* use our functions only */
 #include <curl/mprintf.h>
 
-/* true globals */
+
+/* Silly win32 socket initialization functions */
+
+#if defined(WIN32) && !defined(__GNUC__) || defined(__MINGW32__)
+static void win32_cleanup(void)
+{
+  WSACleanup();
+}
+
+static CURLcode win32_init(void)
+{
+  WORD wVersionRequested;  
+  WSADATA wsaData; 
+  int err; 
+  wVersionRequested = MAKEWORD(1, 1); 
+    
+  err = WSAStartup(wVersionRequested, &wsaData); 
+    
+  if (err != 0) 
+    /* Tell the user that we couldn't find a useable */ 
+    /* winsock.dll.     */ 
+    return CURLE_FAILED_INIT; 
+    
+  /* Confirm that the Windows Sockets DLL supports 1.1.*/ 
+  /* Note that if the DLL supports versions greater */ 
+  /* than 1.1 in addition to 1.1, it will still return */ 
+  /* 1.1 in wVersion since that is the version we */ 
+  /* requested. */ 
+    
+  if ( LOBYTE( wsaData.wVersion ) != 1 || 
+       HIBYTE( wsaData.wVersion ) != 1 ) { 
+    /* Tell the user that we couldn't find a useable */ 
+
+    /* winsock.dll. */ 
+    WSACleanup(); 
+    return CURLE_FAILED_INIT; 
+  }
+  return CURLE_OK;
+}
+/* The Windows Sockets DLL is acceptable. Proceed. */ 
+#else
+/* These functions exist merely to prevent compiler warnings */
+static CURLcode win32_init(void) { return CURLE_OK; }
+static void win32_cleanup(void) { }
+#endif
+
+
+/* true globals -- for curl_global_init() and curl_global_cleanup() */
 static unsigned int  initialized = 0;
 static long          init_flags  = 0;
 
+/**
+ * Globally initializes cURL given a bitwise set of 
+ * the different features to initialize.
+ */
 CURLcode curl_global_init(long flags)
 {
-  if(flags & CURL_GLOBAL_SSL)
+  if (initialized)
+    return CURLE_OK;
+ 
+  if (flags & CURL_GLOBAL_SSL)
     Curl_SSL_init();
 
+  if (flags & CURL_GLOBAL_WIN32)
+    if (win32_init() != CURLE_OK)
+      return CURLE_FAILED_INIT;
+
   initialized = 1;
   init_flags  = flags;
   
   return CURLE_OK;
 }
 
+/**
+ * Globally cleanup cURL, uses the value of "init_flags" to determine
+ * what needs to be cleaned up and what doesn't
+ */
 void curl_global_cleanup(void)
 {
+  if (!initialized)
+    return;
+
   if (init_flags & CURL_GLOBAL_SSL)
     Curl_SSL_cleanup();
 
+  if (init_flags & CURL_GLOBAL_WIN32)
+    win32_cleanup();
+
   initialized = 0;
+  init_flags  = 0;
 }
 
 CURL *curl_easy_init(void)
 {
   CURLcode res;
   struct UrlData *data;
 
   /* Make sure we inited the global SSL stuff */
   if (!initialized)
     curl_global_init(CURL_GLOBAL_DEFAULT);
 
   /* We use curl_open() with undefined URL so far */
-  res = Curl_open((CURL **)&data, NULL);
+  res = Curl_open(&data);
   if(res != CURLE_OK)
     return NULL;
 
   /* SAC */
   data->device = NULL;
 
@@ -157,23 +228,28 @@
   va_end(arg);
   return CURLE_OK;
 }
 
 CURLcode curl_easy_perform(CURL *curl)
 {
-  return Curl_perform(curl);
+  struct UrlData *data = (struct UrlData *)curl;
+
+  return Curl_perform(data);
 }
 
 void curl_easy_cleanup(CURL *curl)
 {
-  Curl_close(curl);
+  struct UrlData *data = (struct UrlData *)curl;
+  Curl_close(data);
 }
 
 CURLcode curl_easy_getinfo(CURL *curl, CURLINFO info, ...)
 {
   va_list arg;
   void *paramp;
+  struct UrlData *data = (struct UrlData *)curl;
+
   va_start(arg, info);
   paramp = va_arg(arg, void *);
 
-  return Curl_getinfo(curl, info, paramp);
+  return Curl_getinfo(data, info, paramp);
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/escape.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/escape.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/escape.c	2001-04-08 02:37:50.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/escape.c	2001-08-14 16:20:17.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: escape.c,v 1.13 2001/04/07 18:35:28 bagder Exp $
+ * $Id: escape.c,v 1.15 2001/08/14 08:20:17 bagder Exp $
  *****************************************************************************/
 
 /* Escape and unescape URL encoding in strings. The functions return a new
  * allocated string or NULL if an error occurred.  */
 
 #include "setup.h"
@@ -36,13 +36,13 @@
 #ifdef MALLOCDEBUG
 #include "memdebug.h"
 #endif
 
 char *curl_escape(char *string, int length)
 {
-  int alloc = (length?length:strlen(string))+1;  
+  int alloc = (length?length:(int)strlen(string))+1;  
   char *ns = malloc(alloc);
   unsigned char in;
   int newlen = alloc;
   int index=0;
 
   length = alloc-1;
@@ -51,34 +51,21 @@
     if(' ' == in)
       ns[index++] = '+';
     else if(!(in >= 'a' && in <= 'z') &&
             !(in >= 'A' && in <= 'Z') &&
             !(in >= '0' && in <= '9')) {
       /* encode it */
-      if(('%' == in) &&
-         (length>=2) &&
-         isxdigit((int)string[1]) &&
-         isxdigit((int)string[2]) ) {
-        /*
-         * This is an already encoded letter, leave it!
-         */
-        memcpy(&ns[index], string, 3);
-        string+=2;
+      newlen += 2; /* the size grows with two, since this'll become a %XX */
+      if(newlen > alloc) {
+        alloc *= 2;
+        ns = realloc(ns, alloc);
+        if(!ns)
+          return NULL;
       }
-      else {
-        /* encode this now */
+      sprintf(&ns[index], "%%%02X", in);
 
-        newlen += 2; /* the size grows with two, since this'll become a %XX */
-        if(newlen > alloc) {
-          alloc *= 2;
-          ns = realloc(ns, alloc);
-          if(!ns)
-            return NULL;
-        }
-        sprintf(&ns[index], "%%%02X", in);
-      }
       index+=3;
     }
     else {
       /* just copy this */
       ns[index++]=in;
     }
@@ -87,13 +74,13 @@
   ns[index]=0; /* terminate it */
   return ns;
 }
 
 char *curl_unescape(char *string, int length)
 {
-  int alloc = (length?length:strlen(string))+1;
+  int alloc = (length?length:(int)strlen(string))+1;
   char *ns = malloc(alloc);
   unsigned char in;
   int index=0;
   unsigned int hex;
   char querypart=FALSE; /* everything to the right of a '?' letter is
                            the "query part" where '+' should become ' '.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/file.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/file.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/file.c	2001-04-18 15:25:11.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/file.c	2001-08-14 16:22:27.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: file.c,v 1.17 2001/04/18 07:25:11 bagder Exp $
+ * $Id: file.c,v 1.19 2001/08/14 08:22:27 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -137,24 +137,25 @@
      RFC 1738. Only local files (reachable via the standard file system)
      are supported. This means that files on remotely mounted directories
      (via NFS, Samba, NT sharing) can be accessed through a file:// URL
   */
   CURLcode res = CURLE_OK;
   struct stat statbuf;
-  size_t expected_size=-1;
-  size_t nread;
+  ssize_t expected_size=-1;
+  ssize_t nread;
   struct UrlData *data = conn->data;
   char *buf = data->buffer;
   int bytecount = 0;
   struct timeval start = Curl_tvnow();
   struct timeval now = start;
   int fd;
 
   /* get the fd from the connection phase */
   fd = conn->proto.file->fd;
 
+/*VMS?? -- This only works reliable for STREAMLF files */
   if( -1 != fstat(fd, &statbuf)) {
     /* we could stat it, then read out the size */
     expected_size = statbuf.st_size;
   }
 
   /* The following is a shortcut implementation of file reading
@@ -164,17 +165,18 @@
   if(expected_size != -1)
     Curl_pgrsSetDownloadSize(data, expected_size);
 
   while (res == CURLE_OK) {
     nread = read(fd, buf, BUFSIZE-1);
 
-    if (0 <= nread)
+    if ( nread > 0)
       buf[nread] = 0;
 
     if (nread <= 0)
       break;
+
     bytecount += nread;
     /* NOTE: The following call to fwrite does CR/LF translation on
        Windows systems if the target is stdout. Use -O or -o parameters
        to prevent CR/LF translation (this then goes to a binary mode
        file descriptor). */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/formdata.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/formdata.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/formdata.c	2001-06-05 19:27:40.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/formdata.c	2001-08-14 16:23:20.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: formdata.c,v 1.15 2001/06/05 11:27:40 bagder Exp $
+ * $Id: formdata.c,v 1.19 2001/08/14 08:23:20 bagder Exp $
  *****************************************************************************/
 
 /*
   Debug the form generator stand-alone by compiling this source file with:
 
   gcc -DHAVE_CONFIG_H -I../ -g -D_FORM_DEBUG -o formdata -I../include formdata.c
@@ -99,26 +99,31 @@
 	      struct HttpPost **httppost,
 	      struct HttpPost **last_post)
 {
   /* nextarg MUST be a string in the format 'name=contents' and we'll
      build a linked list with the info */
   char name[256];
-  char contents[4096]="";
+  char *contents;
   char major[128];
   char minor[128];
   long flags = 0;
   char *contp;
-  char *type = NULL;
+  const char *type = NULL;
   char *prevtype = NULL;
   char *sep;
   char *sep2;
   struct HttpPost *post;
   struct HttpPost *subpost; /* a sub-node */
   unsigned int i;
 
-  if(1 <= sscanf(input, "%255[^ =] = %4095[^\n]", name, contents)) {
+  /* Preallocate contents to the length of input to make sure we don't
+     overwrite anything. */
+  contents = malloc(strlen(input));
+  contents[0] = '\000';
+ 
+  if(1 <= sscanf(input, "%255[^=]=%[^\n]", name, contents)) {
     /* the input was using the correct format */
     contp = contents;
 
     if('@' == contp[0]) {
       /* we use the @-letter to indicate file name(s) */
       
@@ -153,16 +158,17 @@
 	  if(type) {
 	    type += strlen("type=");
 	    
 	    if(2 != sscanf(type, "%127[^/]/%127[^,\n]",
 			   major, minor)) {
 	      fprintf(stderr, "Illegally formatted content-type field!\n");
+              free(contents);
 	      return 2; /* illegal content-type syntax! */
 	    }
 	    /* now point beyond the content-type specifier */
-	    sep = type + strlen(major)+strlen(minor)+1;
+	    sep = (char *)type + strlen(major)+strlen(minor)+1;
 
 	    /* find the following comma */
 	    sep=strchr(sep, FORM_FILE_SEPARATOR);
 	  }
 	}
 	else {
@@ -177,14 +183,14 @@
 	if(!type) {
 	  /*
 	   * No type was specified, we scan through a few well-known
 	   * extensions and pick the first we match!
 	   */
 	  struct ContentType {
-	    char *extension;
-	    char *type;
+	    const char *extension;
+	    const char *type;
 	  };
 	  static struct ContentType ctts[]={
 	    {".gif",  "image/gif"},
 	    {".jpg",  "image/jpeg"},
 	    {".jpeg", "image/jpeg"},
 	    {".txt",  "text/plain"},
@@ -220,13 +226,13 @@
 	  if(post) {
 	    memset(post, 0, sizeof(struct HttpPost));
 	    GetStr(&post->name, name);      /* get the name */
 	    GetStr(&post->contents, contp); /* get the contents */
 	    post->flags = flags;
 	    if(type) {
-	      GetStr(&post->contenttype, type); /* get type */
+	      GetStr(&post->contenttype, (char *)type); /* get type */
 	      prevtype=post->contenttype; /* point to the allocated string! */
 	    }
 	    /* make the previous point to this */
 	    if(*last_post)
 	      (*last_post)->next = post;
 	    else
@@ -243,14 +249,14 @@
 	  if(subpost) {
 	     memset(subpost, 0, sizeof(struct HttpPost));
 	     GetStr(&subpost->name, name);      /* get the name */
 	     GetStr(&subpost->contents, contp); /* get the contents */
 	     subpost->flags = flags;
 	     if(type) {
-	       GetStr(&subpost->contenttype, type); /* get type */
-	       prevtype=subpost->contenttype; /* point to the allocated string! */
+	       GetStr(&subpost->contenttype, (char *)type); /* get type */
+	       prevtype=subpost->contenttype; /* point to allocated string! */
 	     }
 	     /* now, point our 'more' to the original 'more' */
 	     subpost->more = post->more;
 
 	     /* then move the original 'more' to point to ourselves */
 	     post->more = subpost;	     
@@ -284,27 +290,29 @@
 
     }
 
   }
   else {
     fprintf(stderr, "Illegally formatted input field!\n");
+    free(contents);
     return 1;
   }
+  free(contents);
   return 0;
 }
 
 int curl_formparse(char *input,
                    struct HttpPost **httppost,
                    struct HttpPost **last_post)
 {
   return FormParse(input, httppost, last_post);
 }
 
 static int AddFormData(struct FormData **formp,
-			void *line,
-			long length)
+                       const void *line,
+                       long length)
 {
   struct FormData *newform = (struct FormData *)
     malloc(sizeof(struct FormData));
   newform->next = NULL;
 
   /* we make it easier for plain strings: */
@@ -325,13 +333,13 @@
 
   return length;
 }
 
 
 static int AddFormDataf(struct FormData **formp,
-			 char *fmt, ...)
+                        const char *fmt, ...)
 {
   char s[4096];
   va_list ap;
   va_start(ap, fmt);
   vsprintf(s, fmt, ap);
   va_end(ap);
@@ -364,14 +372,14 @@
   }
   retstring[BOUNDARY_LENGTH-1]=0; /* zero terminate */
 
   return retstring;
 }
 
-/* Used from http.c */ 
-void Curl_FormFree(struct FormData *form)
+/* Used from http.c, this cleans a built FormData linked list */ 
+void Curl_formclean(struct FormData *form)
 {
   struct FormData *next;
 
   do {
     next=form->next;  /* the following form line */
     free(form->line); /* free the line */
@@ -498,13 +506,15 @@
 	FILE *fileread;
 	char buffer[1024];
 	int nread;
 
 	fileread = strequal("-", file->contents)?stdin:
           /* binary read for win32 crap */
-          fopen(file->contents, "rb");
+/*VMS??*/ fopen(file->contents, "rb");  /* ONLY ALLOWS FOR STREAM FILES ON VMS */
+/*VMS?? Stream files are OK, as are FIXED & VAR files WITHOUT implied CC */
+/*VMS?? For implied CC, every record needs to have a \n appended & 1 added to SIZE */
 	if(fileread) {
 	  while((nread = fread(buffer, 1, 1024, fileread))) {
 	    size += AddFormData(&form,
 				buffer,
 				nread);
 	  }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/formdata.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/formdata.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/formdata.h	2001-01-05 18:11:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/formdata.h	2001-08-06 20:36:18.000000000 +0800
@@ -18,13 +18,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: formdata.h,v 1.5 2001/01/05 10:11:42 bagder Exp $
+ * $Id: formdata.h,v 1.6 2001/08/06 12:36:18 bagder Exp $
  *****************************************************************************/
 /* plain and simple linked list with lines to send */
 struct FormData {
   struct FormData *next;
   char *line;
   long length;
@@ -46,9 +46,9 @@
                     size_t size,
                     size_t nitems,
                     FILE *mydata);
 
 char *Curl_FormBoundary(void);
 
-void Curl_FormFree(struct FormData *);
+void Curl_formclean(struct FormData *);
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/ftp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/ftp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/ftp.c	2001-05-14 19:29:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/ftp.c	2001-08-20 01:10:29.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: ftp.c,v 1.70 2001/05/14 11:29:47 bagder Exp $
+ * $Id: ftp.c,v 1.83 2001/08/18 02:42:23 bumblebury Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <stdio.h>
 #include <string.h>
@@ -51,12 +51,15 @@
 #include <arpa/inet.h>
 #endif
 #include <sys/utsname.h>
 #ifdef HAVE_NETDB_H
 #include <netdb.h>
 #endif
+#ifdef	VMS
+#include <inet.h>
+#endif
 #endif
 
 #if defined(WIN32) && defined(__GNUC__) || defined(__MINGW32__)
 #include <errno.h>
 #endif
 
@@ -85,12 +88,16 @@
 
 /* The last #include file should be: */
 #ifdef MALLOCDEBUG
 #include "memdebug.h"
 #endif
 
+/* Local API functions */
+static CURLcode _ftp_sendquote(struct connectdata *conn, struct curl_slist *quote);
+static CURLcode _ftp_cwd(struct connectdata *conn, char *path);
+
 /* easy-to-use macro: */
 #define ftpsendf Curl_ftpsendf
 
 static CURLcode AllowServerConnect(struct UrlData *data,
                                    struct connectdata *conn,
                                    int sock)
@@ -103,13 +110,13 @@
   FD_SET(sock, &rdset);
 
   /* we give the server 10 seconds to connect to us */
   dt.tv_sec = 10;
   dt.tv_usec = 0;
 
-  switch ( select(sock+1, &rdset, NULL, NULL, &dt)) {
+  switch (select(sock+1, &rdset, NULL, NULL, &dt)) {
   case -1: /* error */
     /* let's die here */
     failf(data, "Error while waiting for server connect");
     return CURLE_FTP_PORT_FAILED;
   case 0:  /* timeout */
     /* let's die here */
@@ -169,13 +176,13 @@
   int timeout = 3600; /* default timeout in seconds */
   struct timeval interval;
   fd_set rkeepfd;
   fd_set readfd;
   struct UrlData *data = conn->data;
   char *line_start;
-  int code;
+  int code=0; /* default "error code" to return */
 
 #define SELECT_OK      0
 #define SELECT_ERROR   1
 #define SELECT_TIMEOUT 2
   int error = SELECT_OK;
 
@@ -246,25 +253,25 @@
             /* a newline is CRLF in ftp-talk, so the CR is ignored as
                the line isn't really terminated until the LF comes */
 
             /* output debug output if that is requested */
             if(data->bits.verbose) {
               fputs("< ", data->err);
-              fwrite(line_start, 1, perline, data->err);
+              fwrite(line_start, perline, 1, data->err);
               /* no need to output LF here, it is part of the data */
             }
 
             if(perline>3 && lastline(line_start)) {
               /* This is the end of the last line, copy the last
                * line to the start of the buffer and zero terminate,
                * for old times sake (and krb4)! */
-              char *moo;
+              char *meow;
               int i;
-              for(moo=line_start, i=0; moo<ptr; moo++, i++)
-                buf[i] = *moo;
-              moo[i]=0; /* zero terminate */
+              for(meow=line_start, i=0; meow<ptr; meow++, i++)
+                buf[i] = *meow;
+              meow[i]=0; /* zero terminate */
               keepon=FALSE;
               break;
             }
             perline=0; /* line starts over here */
             line_start = ptr+1;
           }
@@ -279,19 +286,19 @@
 
 #if KRB4
   /* handle the security-oriented responses 6xx ***/
   /* FIXME: some errorchecking perhaps... ***/
   switch(code) {
   case 631:
-    sec_read_msg(conn, buf, prot_safe);
+    Curl_sec_read_msg(conn, buf, prot_safe);
     break;
   case 632:
-    sec_read_msg(conn, buf, prot_private);
+    Curl_sec_read_msg(conn, buf, prot_private);
     break;
   case 633:
-    sec_read_msg(conn, buf, prot_confidential);
+    Curl_sec_read_msg(conn, buf, prot_confidential);
     break;
   default:
     /* normal ftp stuff we pass through! */
     break;
   }
 #endif
@@ -302,131 +309,14 @@
   if(ftpcode)
     *ftpcode=code; /* return the initial number like this */
 
   return nread; /* total amount of bytes read */
 }
 
-#if 0
-/*
- * We allow the ftpcode pointer to be NULL if no reply integer is wanted
- */
-
-int Curl_GetFTPResponse(int sockfd, char *buf,
-                        struct connectdata *conn,
-                        int *ftpcode)
-{
-  int nread;
-  ssize_t keepon=TRUE;
-  size_t got;
-  char *ptr;
-  int timeout = 3600; /* in seconds */
-  struct timeval interval;
-  fd_set rkeepfd;
-  fd_set readfd;
-  struct UrlData *data = conn->data;
-
-#define SELECT_OK      0
-#define SELECT_ERROR   1
-#define SELECT_TIMEOUT 2
-  int error = SELECT_OK;
-
-  if(ftpcode)
-    *ftpcode=0; /* 0 for errors */
-
-  if(data->timeout) {
-    /* if timeout is requested, find out how much remaining time we have */
-    timeout = data->timeout - /* timeout time */
-      (Curl_tvlong(Curl_tvnow()) - Curl_tvlong(conn->now)); /* spent time */
-    if(timeout <=0 ) {
-      failf(data, "Transfer aborted due to timeout");
-      return -SELECT_TIMEOUT; /* already too little time */
-    }
-  }
-
-  FD_ZERO (&readfd);		/* clear it */
-  FD_SET (sockfd, &readfd);     /* read socket */
-
-  /* get this in a backup variable to be able to restore it on each lap in the
-     select() loop */
-  rkeepfd = readfd;
-
-  do {
-    ptr=buf;
-
-    /* get us a full line, terminated with a newline */
-    nread=0;
-    keepon=TRUE;
-    while((nread<BUFSIZE) && (keepon && !error)) {
-      readfd = rkeepfd;		   /* set every lap */
-      interval.tv_sec = timeout;
-      interval.tv_usec = 0;
-
-      switch (select (sockfd+1, &readfd, NULL, NULL, &interval)) {
-      case -1: /* select() error, stop reading */
-        error = SELECT_ERROR;
-        failf(data, "Transfer aborted due to select() error");
-        break;
-      case 0: /* timeout */
-        error = SELECT_TIMEOUT;
-        failf(data, "Transfer aborted due to timeout");
-        break;
-      default:
-        /*
-         * This code previously didn't use the kerberos sec_read() code
-         * to read, but when we use Curl_read() it may do so. Do confirm
-         * that this is still ok and then remove this comment!
-         */
-        if(CURLE_OK != Curl_read(conn, sockfd, ptr, 1, &keepon))
-          keepon = FALSE;
-        else if(keepon <= 0) {
-          error = SELECT_ERROR;
-          failf(data, "Connection aborted");
-        }
-        else if ((*ptr == '\n') || (*ptr == '\r'))
-          keepon = FALSE;
-      }
-      if(keepon) {
-        nread++;
-        ptr++;
-      }
-    }
-    *ptr=0; /* zero terminate */
-
-#if KRB4
-    { /* handle the security-oriented responses 6xx ***/
-      /* FIXME: some errorchecking perhaps... ***/
-      if(strncmp(buf, "631", 3) == 0)
-        sec_read_msg(conn, buf, prot_safe);
-      else if(strncmp(buf, "632", 3) == 0)
-        sec_read_msg(conn, buf, prot_private);
-      else if(strncmp(buf, "633", 3) == 0)
-        sec_read_msg(conn, buf, prot_confidential);
-      nread = strlen(buf);
-    }
-#endif
-
-    if(data->bits.verbose && buf[0]) {
-      fputs("< ", data->err);
-      fwrite(buf, 1, nread, data->err);
-      fputs("\n", data->err);
-    }
-  } while(!error &&
-	  (nread<4 || !lastline(buf)) );
-  
-  if(error)
-    return -error;
-
-  if(ftpcode)
-    *ftpcode=atoi(buf); /* return the initial number like this */
-
-  return nread;
-}
-#endif
-
 /* -- who are we? -- */
-char *Curl_getmyhost(char *buf, int buf_size)
+static char *getmyhost(char *buf, int buf_size)
 {
 #if defined(HAVE_GETHOSTNAME)
   gethostname(buf, buf_size);
 #elif defined(HAVE_UNAME)
   struct utsname ugnm;
   strncpy(buf, uname(&ugnm) < 0 ? "localhost" : ugnm.nodename, buf_size - 1);
@@ -499,19 +389,19 @@
 
 #ifdef KRB4
   /* if not anonymous login, try a secure login */
   if(data->bits.krb4) {
 
     /* request data protection level (default is 'clear') */
-    sec_request_prot(conn, "private");
+    Curl_sec_request_prot(conn, "private");
 
     /* We set private first as default, in case the line below fails to
        set a valid level */
-    sec_request_prot(conn, data->krb4_level);
+    Curl_sec_request_prot(conn, data->krb4_level);
 
-    if(sec_login(conn) != 0)
+    if(Curl_sec_login(conn) != 0)
       infof(data, "Logging in with password in cleartext!\n");
     else
       infof(data, "Authentication successful\n");
   }
 #endif
   
@@ -560,19 +450,19 @@
     infof(data, "We have successfully logged in\n");
 #ifdef KRB4
 	/* we are logged in (with Kerberos)
 	 * now set the requested protection level
 	 */
     if(conn->sec_complete)
-      sec_set_protection_level(conn);
+      Curl_sec_set_protection_level(conn);
 
     /* we may need to issue a KAUTH here to have access to the files
      * do it if user supplied a password
      */
     if(conn->data->passwd && *conn->data->passwd)
-      krb_kauth(conn);
+      Curl_krb_kauth(conn);
 #endif
   }
   else {
     failf(data, "Odd return code after USER");
     return CURLE_FTP_WEIRD_USER_REPLY;
   }
@@ -635,15 +525,14 @@
 
 /* argument is already checked for validity */
 CURLcode Curl_ftp_done(struct connectdata *conn)
 {
   struct UrlData *data = conn->data;
   struct FTP *ftp = conn->proto.ftp;
-  size_t nread;
+  ssize_t nread;
   char *buf = data->buffer; /* this is our buffer */
-  struct curl_slist *qitem; /* QUOTE item */
   int ftpcode;
 
   if(data->bits.upload) {
     if((-1 != data->infilesize) && (data->infilesize != *ftp->bytecountp)) {
       failf(data, "Wrote only partial file (%d out of %d bytes)",
             *ftp->bytecountp, data->infilesize);
@@ -662,13 +551,13 @@
       failf(data, "No data was received!");
       return CURLE_FTP_COULDNT_RETR_FILE;
     }
   }
 
 #ifdef KRB4
-  sec_fflush_fd(conn, conn->secondarysocket);
+  Curl_sec_fflush_fd(conn, conn->secondarysocket);
 #endif
   /* shut down the socket to inform the server we're done */
   sclose(conn->secondarysocket);
   conn->secondarysocket = -1;
 
   if(!data->bits.no_body && !conn->bits.resume_done) {  
@@ -677,52 +566,83 @@
     nread = Curl_GetFTPResponse(conn->firstsocket, buf, conn, &ftpcode);
     if(nread < 0)
       return CURLE_OPERATION_TIMEOUTED;
 
     /* 226 Transfer complete, 250 Requested file action okay, completed. */
     if((ftpcode != 226) && (ftpcode != 250)) {
-      failf(data, "%s", buf+4);
+      failf(data, "server did not report OK, got %d", ftpcode);
       return CURLE_FTP_WRITE_ERROR;
     }
   }
 
   conn->bits.resume_done = FALSE; /* clean this for next connection */
 
   /* Send any post-transfer QUOTE strings? */
   if(data->postquote) {
-    qitem = data->postquote;
-    /* Send all QUOTE strings in same order as on command-line */
-    while (qitem) {
-      /* Send string */
-      if (qitem->data) {
-        ftpsendf(conn->firstsocket, conn, "%s", qitem->data);
+    CURLcode result = _ftp_sendquote(conn, data->postquote);
+    return result;
+  }
 
-        nread = Curl_GetFTPResponse(conn->firstsocket, buf, conn, &ftpcode);
-        if(nread < 0)
-          return CURLE_OPERATION_TIMEOUTED;
+  return CURLE_OK;
+}
 
-        if (ftpcode >= 400) {
-          failf(data, "QUOT string not accepted: %s",
-                qitem->data);
-          return CURLE_FTP_QUOTE_ERROR;
-        }
+
+static 
+CURLcode _ftp_sendquote(struct connectdata *conn, struct curl_slist *quote)
+{
+  struct curl_slist *item;
+  ssize_t            nread;
+  int                ftpcode;
+
+  item = quote;
+  while (item) {
+    if (item->data) {
+      ftpsendf(conn->firstsocket, conn, "%s", item->data);
+
+      nread = Curl_GetFTPResponse(conn->firstsocket, 
+          conn->data->buffer, conn, &ftpcode);
+      if (nread < 0)
+        return CURLE_OPERATION_TIMEOUTED;
+
+      if (ftpcode >= 400) {
+        failf(conn->data, "QUOT string not accepted: %s", item->data);
+        return CURLE_FTP_QUOTE_ERROR;
       }
-      qitem = qitem->next;
     }
+
+    item = item->next;
   }
 
   return CURLE_OK;
 }
 
+static 
+CURLcode _ftp_cwd(struct connectdata *conn, char *path)
+{
+  ssize_t nread;
+  int     ftpcode;
+  
+  ftpsendf(conn->firstsocket, conn, "CWD %s", path);
+  nread = Curl_GetFTPResponse(conn->firstsocket, 
+      conn->data->buffer, conn, &ftpcode);
+  if (nread < 0)
+    return CURLE_OPERATION_TIMEOUTED;
 
+  if (ftpcode != 250) {
+    failf(conn->data, "Couldn't change back to directory %s", path);
+    return CURLE_FTP_ACCESS_DENIED;
+  }
+
+  return CURLE_OK;
+}
 
 static
 CURLcode _ftp(struct connectdata *conn)
 {
   /* this is FTP and no proxy */
-  size_t nread;
+  ssize_t nread;
   CURLcode result;
   struct UrlData *data=conn->data;
   char *buf = data->buffer; /* this is our buffer */
   /* for the ftp PORT mode */
   int portsock=-1;
 #if defined (HAVE_INET_NTOA_R)
@@ -732,70 +652,37 @@
   struct addrinfo *ai;
 #else
   struct sockaddr_in serv_addr;
   char hostent_buf[8192];
 #endif
 
-  struct curl_slist *qitem; /* QUOTE item */
   /* the ftp struct is already inited in ftp_connect() */
   struct FTP *ftp = conn->proto.ftp;
 
   long *bytecountp = ftp->bytecountp;
   int ftpcode; /* for ftp status */
 
   /* Send any QUOTE strings? */
   if(data->quote) {
-    qitem = data->quote;
-    /* Send all QUOTE strings in same order as on command-line */
-    while (qitem) {
-      /* Send string */
-      if (qitem->data) {
-        ftpsendf(conn->firstsocket, conn, "%s", qitem->data);
-
-        nread = Curl_GetFTPResponse(conn->firstsocket, buf, conn, &ftpcode);
-        if(nread < 0)
-          return CURLE_OPERATION_TIMEOUTED;
-
-        if (ftpcode >= 400) {
-          failf(data, "QUOT string not accepted: %s",
-                qitem->data);
-          return CURLE_FTP_QUOTE_ERROR;
-        }
-      }
-      qitem = qitem->next;
-    }
+    if ((result = _ftp_sendquote(conn, data->quote)) != CURLE_OK)
+      return result;
   }
-
-  if(conn->bits.reuse) {
-    /* This is a re-used connection. Since we change directory to where the
-       transfer is taking place, we must now get back to the original dir
-       where we ended up after login: */
-    ftpsendf(conn->firstsocket, conn, "CWD %s", ftp->entrypath);
-    nread = Curl_GetFTPResponse(conn->firstsocket, buf, conn, &ftpcode);
-    if(nread < 0)
-      return CURLE_OPERATION_TIMEOUTED;
     
-    if(ftpcode != 250) {
-      failf(data, "Couldn't change back to directory %s", ftp->entrypath);
-      return CURLE_FTP_ACCESS_DENIED;
-    }
+  /* This is a re-used connection. Since we change directory to where the
+     transfer is taking place, we must now get back to the original dir
+     where we ended up after login: */
+  if (conn->bits.reuse) {
+    if ((result = _ftp_cwd(conn, ftp->entrypath)) != CURLE_OK)
+      return result;
   }
 
 
-
   /* change directory first! */
   if(ftp->dir && ftp->dir[0]) {
-    ftpsendf(conn->firstsocket, conn, "CWD %s", ftp->dir);
-    nread = Curl_GetFTPResponse(conn->firstsocket, buf, conn, &ftpcode);
-    if(nread < 0)
-      return CURLE_OPERATION_TIMEOUTED;
-
-    if(ftpcode != 250) {
-      failf(data, "Couldn't change to directory %s", ftp->dir);
-      return CURLE_FTP_ACCESS_DENIED;
-    }
+    if ((result = _ftp_cwd(conn, ftp->dir)) != CURLE_OK)
+        return result;
   }
 
   if(data->bits.get_filetime && ftp->file) {
     /* we have requested to get the modified-time of the file, this is yet
        again a grey area as the MDTM is not kosher RFC959 */
     ftpsendf(conn->firstsocket, conn, "MDTM %s", ftp->file);
@@ -902,13 +789,13 @@
 #endif
     unsigned char *ap;
     unsigned char *pp;
     int alen, plen;
     char portmsgbuf[4096], tmp[4096];
 
-    char *mode[] = { "EPRT", "LPRT", "PORT", NULL };
+    const char *mode[] = { "EPRT", "LPRT", "PORT", NULL };
     char **modep;
 
     /*
      * we should use Curl_if2ip?  given pickiness of recent ftpd,
      * I believe we should use the same address as the control connection.
      */
@@ -960,13 +847,13 @@
     if (getsockname(portsock, sa, &sslen) < 0) {
       failf(data, strerror(errno));
       freeaddrinfo(res);
       return CURLE_FTP_PORT_FAILED;
     }
 
-    for (modep = mode; modep && *modep; modep++) {
+    for (modep = (char *)mode; modep && *modep; modep++) {
       int lprtaf, eprtaf;
 
       switch (sa->sa_family) {
       case AF_INET:
 	ap = (unsigned char *)&((struct sockaddr_in *)&ss)->sin_addr;
 	alen = sizeof(((struct sockaddr_in *)&ss)->sin_addr);
@@ -1040,21 +927,20 @@
 	  }
 	}
 	ftpsendf(conn->firstsocket, conn, "%s %s", *modep, portmsgbuf);
       }
 
       nread = Curl_GetFTPResponse(conn->firstsocket, buf, conn, &ftpcode);
-      if (nread < 0)
+      if(nread < 0)
 	return CURLE_OPERATION_TIMEOUTED;
 
       if (ftpcode != 200) {
 	failf(data, "Server does not grok %s", *modep);
 	continue;
       } else
-	      break;
-again:;
+        break;
     }
 
     if (!*modep) {
       sclose(portsock);
       freeaddrinfo(res);
       return CURLE_FTP_PORT_FAILED;
@@ -1078,13 +964,13 @@
         if(h)
           strcpy(myhost, data->ftpport); /* buffer overflow risk */
       }
     }
     if(! *myhost) {
       h=Curl_gethost(data,
-                     Curl_getmyhost(myhost, sizeof(myhost)),
+                     getmyhost(myhost, sizeof(myhost)),
                      &hostdataptr);
     }
     infof(data, "We connect from %s\n", myhost);
 
     if ( h ) {
       if( (portsock = socket(AF_INET, SOCK_STREAM, 0)) >= 0 ) {
@@ -1173,13 +1059,13 @@
   else { /* we use the PASV command */
 #if 0
     /* no support for IPv6 passive mode yet */
     char *mode[] = { "EPSV", "LPSV", "PASV", NULL };
     int results[] = { 229, 228, 227, 0 };
 #else
-    char *mode[] = { "PASV", NULL };
+    const char *mode[] = { "PASV", NULL };
     int results[] = { 227, 0 };
 #endif
     int modeoff;
 
     for (modeoff = 0; mode[modeoff]; modeoff++) {
       ftpsendf(conn->firstsocket, conn, mode[modeoff]);
@@ -1882,13 +1768,14 @@
  * ftpsendf() sends the formated string as a ftp command to a ftp server
  *
  * NOTE: we build the command in a fixed-length buffer, which sets length
  * restrictions on the command!
  *
  */
-size_t Curl_ftpsendf(int fd, struct connectdata *conn, char *fmt, ...)
+size_t Curl_ftpsendf(int fd, struct connectdata *conn,
+                     const char *fmt, ...)
 {
   size_t bytes_written;
   char s[256];
 
   va_list ap;
   va_start(ap, fmt);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/ftp.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/ftp.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/ftp.h	2001-03-02 15:44:22.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/ftp.h	2001-08-14 16:25:08.000000000 +0800
@@ -18,20 +18,20 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: ftp.h,v 1.7 2001/03/02 07:44:22 bagder Exp $
+ * $Id: ftp.h,v 1.8 2001/08/14 08:25:08 bagder Exp $
  *****************************************************************************/
 CURLcode Curl_ftp(struct connectdata *conn);
 CURLcode Curl_ftp_done(struct connectdata *conn);
 CURLcode Curl_ftp_connect(struct connectdata *conn);
 CURLcode Curl_ftp_disconnect(struct connectdata *conn);
 
-size_t Curl_ftpsendf(int fd, struct connectdata *, char *fmt, ...);
+size_t Curl_ftpsendf(int fd, struct connectdata *, const char *fmt, ...);
 
 /* The kerberos stuff needs this: */
 int Curl_GetFTPResponse(int sockfd, char *buf,
                         struct connectdata *conn,
                         int *ftpcode);
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/getenv.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/getenv.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/getenv.c	2001-01-24 17:01:32.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/getenv.c	2001-08-14 16:25:47.000000000 +0800
@@ -15,42 +15,54 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: getenv.c,v 1.10 2001/01/24 09:01:32 bagder Exp $
+ * $Id: getenv.c,v 1.12 2001/08/14 08:25:47 bagder Exp $
  *****************************************************************************/
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 
 #ifdef WIN32
 #include <windows.h>
 #endif
 
+#ifdef VMS
+#include <unixlib.h>
+#endif
+
 #ifdef MALLOCDEBUG
 #include "memdebug.h"
 #endif
 
 static
-char *GetEnv(char *variable)
+char *GetEnv(const char *variable)
 {
 #ifdef WIN32
   /* This shit requires windows.h (HUGE) to be included */
   char env[MAX_PATH]; /* MAX_PATH is from windef.h */
   char *temp = getenv(variable);
   env[0] = '\0';
   if (temp != NULL)
     ExpandEnvironmentStrings(temp, env, sizeof(env));
 #else
+#ifdef	VMS
+  char *env = getenv(variable);
+  if (env && strcmp("HOME",variable) == 0) {
+	env = decc$translate_vms(env);
+  }
+/*  printf ("Getenv: %s=%s\n",variable,env); */
+#else
   /* no length control */
   char *env = getenv(variable);
 #endif
+#endif
   return (env && env[0])?strdup(env):NULL;
 }
 
-char *curl_getenv(char *v)
+char *curl_getenv(const char *v)
 {
   return GetEnv(v);
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/getinfo.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/getinfo.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/getinfo.c	2001-03-10 00:50:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/getinfo.c	2001-08-15 14:52:15.000000000 +0800
@@ -15,32 +15,50 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: getinfo.c,v 1.8 2001/03/09 15:13:11 bagder Exp $
+ * $Id: getinfo.c,v 1.10 2001/08/15 06:52:15 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <curl/curl.h>
 
 #include "urldata.h"
 
 #include <stdio.h>
 #include <string.h>
 #include <stdarg.h>
 
-CURLcode Curl_getinfo(CURL *curl, CURLINFO info, ...)
+/*
+ * This is supposed to be called in the beginning of a permform() session
+ * and should reset all session-info variables
+ */
+CURLcode Curl_initinfo(struct UrlData *data)
+{
+  struct Progress *pro = &data->progress;
+
+  pro->t_nslookup = 0;
+  pro->t_connect = 0;
+  pro->t_pretransfer = 0;
+
+  pro->httpcode = 0;
+  pro->httpversion=0;
+  pro->filetime=0;
+
+  return CURLE_OK;
+}
+
+CURLcode Curl_getinfo(struct UrlData *data, CURLINFO info, ...)
 {
   va_list arg;
   long *param_longp;
   double *param_doublep;
   char **param_charp;
-  struct UrlData *data = (struct UrlData *)curl;
   va_start(arg, info);
 
   switch(info&CURLINFO_TYPEMASK) {
   default:
     return CURLE_BAD_FUNCTION_ARGUMENT;
   case CURLINFO_STRING:
@@ -59,13 +77,13 @@
       return CURLE_BAD_FUNCTION_ARGUMENT;
     break;
   }
   
   switch(info) {
   case CURLINFO_EFFECTIVE_URL:
-    *param_charp = data->url?data->url:"";
+    *param_charp = data->url?data->url:(char *)"";
     break;
   case CURLINFO_HTTP_CODE:
     *param_longp = data->progress.httpcode;
     break;
   case CURLINFO_FILETIME:
     *param_longp = data->progress.filetime;
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib: getinfo.h
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/getpass.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/getpass.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/getpass.c	2001-03-16 23:21:43.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/getpass.c	2001-08-06 20:20:28.000000000 +0800
@@ -19,13 +19,13 @@
  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
  * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
  * POSSIBILITY OF SUCH DAMAGE.
  * ============================================================================
  *
- * $Id: getpass.c,v 1.12 2001/03/16 15:19:36 bagder Exp $
+ * $Id: getpass.c,v 1.13 2001/08/06 12:20:28 bagder Exp $
  *
  * The spirit of this license is to allow use of this source code in any
  * project be it open or closed but still encourage the use of the open,
  * library based equivilents.
  *
  * Author(s):
@@ -39,12 +39,36 @@
 #  include <config.h>
 #endif
 
 #ifndef HAVE_GETPASS_R
 
 #ifndef WIN32
+#ifdef	VMS
+#include <stdio.h>
+#include <string.h>
+#include descrip
+#include starlet
+#include iodef
+#include iosbdef
+char *getpass_r(const char *prompt, char *buffer, size_t buflen)
+{
+	long sts;
+	short chan;
+	struct _iosb iosb;
+	$DESCRIPTOR(ttdesc, "TT");
+
+	buffer[0]='\0';
+	if ((sts = sys$assign(&ttdesc, &chan,0,0)) & 1) {
+		if (((sts = sys$qiow(0, chan, IO$_READPROMPT | IO$M_NOECHO, &iosb, 0, 0, buffer, buflen, 0, 0, prompt, strlen(prompt))) & 1) && (iosb.iosb$w_status&1)) {
+			buffer[iosb.iosb$w_bcnt] = '\0';
+		} 
+		sts = sys$dassgn(chan);
+	}
+	return buffer; /* we always return success */
+}
+#else /* VMS */
 #ifdef HAVE_TERMIOS_H
 #  if !defined(HAVE_TCGETATTR) && !defined(HAVE_TCSETATTR) 
 #    undef HAVE_TERMIOS_H
 #  endif
 #endif
 
@@ -183,12 +207,13 @@
 #ifndef __EMX__
   signal(SIGTSTP, sigtstp);
 #endif
 
   return buffer; /* we always return success */
 }
+#endif /* VMS */
 #else /* WIN32 */
 #include <stdio.h>
 #include <conio.h>
 char *getpass_r(const char *prompt, char *buffer, int buflen)
 {
   int i;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/getpass.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/getpass.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/getpass.h	2001-01-09 06:30:30.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/getpass.h	2001-08-14 16:27:07.000000000 +0800
@@ -17,19 +17,19 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: getpass.h,v 1.7 2001/01/08 22:30:30 bagder Exp $
+ * $Id: getpass.h,v 1.8 2001/08/14 08:27:07 bagder Exp $
  *****************************************************************************/
 #ifndef HAVE_GETPASS_R
 /* If there's a system-provided function named like this, we trust it is
    also found in one of the standard headers. */
 
 /*
  * Returning NULL will abort the continued operation!
  */
-char* getpass_r(char *prompt, char* buffer, size_t buflen );
+char* getpass_r(const char *prompt, char* buffer, size_t buflen );
 #endif
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/hostip.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/hostip.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/hostip.c	2001-05-30 19:06:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/hostip.c	2001-08-06 20:21:09.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: hostip.c,v 1.22 2001/05/30 11:06:33 bagder Exp $
+ * $Id: hostip.c,v 1.23 2001/08/06 12:21:09 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <string.h>
 #include <errno.h>
@@ -43,12 +44,16 @@
 #ifdef HAVE_NETDB_H
 #include <netdb.h>
 #endif
 #ifdef HAVE_ARPA_INET_H
 #include <arpa/inet.h>
 #endif
+#ifdef	VMS
+#include <inet.h>
+#include <stdlib.h>
+#endif
 #endif
 
 #include "urldata.h"
 #include "sendf.h"
 
 #if defined(HAVE_INET_NTOA_R) && !defined(HAVE_INET_NTOA_R_DECL)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/http.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/http.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/http.c	2001-05-31 18:55:59.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/http.c	2001-08-17 18:14:06.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: http.c,v 1.63 2001/05/31 07:03:04 bagder Exp $
+ * $Id: http.c,v 1.68 2001/08/17 10:14:06 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -101,13 +101,13 @@
 /*
  * The add_buffer series of functions are used to build one large memory chunk
  * from repeated function invokes. Used so that the entire HTTP request can
  * be sent in one go.
  */
 static CURLcode
- add_buffer(send_buffer *in, void *inptr, size_t size);
+ add_buffer(send_buffer *in, const void *inptr, size_t size);
 
 /*
  * add_buffer_init() returns a fine buffer struct
  */
 static
 send_buffer *add_buffer_init(void)
@@ -145,13 +145,13 @@
 
 
 /* 
  * add_bufferf() builds a buffer from the formatted input
  */
 static
-CURLcode add_bufferf(send_buffer *in, char *fmt, ...)
+CURLcode add_bufferf(send_buffer *in, const char *fmt, ...)
 {
   CURLcode result = CURLE_OUT_OF_MEMORY;
   char *s;
   va_list ap;
   va_start(ap, fmt);
   s = vaprintf(fmt, ap); /* this allocs a new string to append */
@@ -165,38 +165,36 @@
 }
 
 /*
  * add_buffer() appends a memory chunk to the existing one
  */
 static
-CURLcode add_buffer(send_buffer *in, void *inptr, size_t size)
+CURLcode add_buffer(send_buffer *in, const void *inptr, size_t size)
 {
   char *new_rb;
   int new_size;
 
-  if(size > 0) {
-    if(!in->buffer ||
-       ((in->size_used + size) > (in->size_max - 1))) {
-      new_size = (in->size_used+size)*2;
-      if(in->buffer)
-        /* we have a buffer, enlarge the existing one */
-        new_rb = (char *)realloc(in->buffer, new_size);
-      else
-        /* create a new buffer */
-        new_rb = (char *)malloc(new_size);
+  if(!in->buffer ||
+     ((in->size_used + size) > (in->size_max - 1))) {
+    new_size = (in->size_used+size)*2;
+    if(in->buffer)
+      /* we have a buffer, enlarge the existing one */
+      new_rb = (char *)realloc(in->buffer, new_size);
+    else
+      /* create a new buffer */
+      new_rb = (char *)malloc(new_size);
 
-      if(!new_rb)
-        return CURLE_OUT_OF_MEMORY;
+    if(!new_rb)
+      return CURLE_OUT_OF_MEMORY;
 
-      in->buffer = new_rb;
-      in->size_max = new_size;
-    }
-    memcpy(&in->buffer[in->size_used], inptr, size);
-      
-    in->size_used += size;
+    in->buffer = new_rb;
+    in->size_max = new_size;
   }
+  memcpy(&in->buffer[in->size_used], inptr, size);
+      
+  in->size_used += size;
 
   return CURLE_OK;
 }
 
 /* end of the add_buffer functions */
 /* ------------------------------------------------------------------------- */
@@ -237,13 +235,13 @@
 
 
 /*
  * This function checks the linked list of custom HTTP headers for a particular
  * header (prefix).
  */
-bool static checkheaders(struct UrlData *data, char *thisheader)
+static bool checkheaders(struct UrlData *data, const char *thisheader)
 {
   struct curl_slist *head;
   size_t thislen = strlen(thisheader);
 
   for(head = data->headers; head; head=head->next) {
     if(strnequal(head->data, thisheader, thislen)) {
@@ -358,21 +356,21 @@
   long *bytecount = &conn->bytecount;
   struct HTTP *http;
 
   data=conn->data;
   http=conn->proto.http;
 
-  if(data->bits.http_formpost) {
+  if(HTTPREQ_POST_FORM == data->httpreq) {
     *bytecount = http->readbytecount + http->writebytecount;
       
-    Curl_FormFree(http->sendit); /* Now free that whole lot */
+    Curl_formclean(http->sendit); /* Now free that whole lot */
 
     data->fread = http->storefread; /* restore */
     data->in = http->in; /* restore */
   }
-  else if(data->bits.http_put) {
+  else if(HTTPREQ_PUT == data->httpreq) {
     *bytecount = http->readbytecount + http->writebytecount;
   }
 
   return CURLE_OK;
 }
 
@@ -402,13 +400,13 @@
 
   /* We default to persistant connections */
   conn->bits.close = FALSE;
 
   if ( (conn->protocol&(PROT_HTTP|PROT_FTP)) &&
        data->bits.upload) {
-    data->bits.http_put=1;
+    data->httpreq = HTTPREQ_PUT;
   }
   
   /* The User-Agent string has been built in url.c already, because it might
      have been used in the proxy connect, but if we have got a header with
      the user-agent string specified, we erase the previously made string
      here. */
@@ -454,13 +452,13 @@
                              conn->protocol&PROT_HTTPS?TRUE:FALSE);
   }
   if ((data->bits.httpproxy) && !(conn->protocol&PROT_HTTPS))  {
     /* The path sent to the proxy is in fact the entire URL */
     ppath = data->url;
   }
-  if(data->bits.http_formpost) {
+  if(HTTPREQ_POST_FORM == data->httpreq) {
     /* we must build the whole darned post sequence first, so that we have
        a size of the whole shebang before we start to send it */
     http->sendit = Curl_getFormData(data->httppost, &http->postsize);
   }
 
   if(!checkheaders(data, "Host:")) {
@@ -485,15 +483,15 @@
   if(!checkheaders(data, "Pragma:"))
     http->p_pragma = "Pragma: no-cache\r\n";
 
   if(!checkheaders(data, "Accept:"))
     http->p_accept = "Accept: image/gif, image/x-xbitmap, image/jpeg, image/pjpeg, */*\r\n";
 
-  if((data->bits.http_post ||
-      data->bits.http_formpost ||
-      data->bits.http_put) &&
+  if(( (HTTPREQ_POST == data->httpreq) ||
+       (HTTPREQ_POST_FORM == data->httpreq) ||
+       (HTTPREQ_PUT == data->httpreq) ) &&
      conn->resume_from) {
     /**********************************************************************
      * Resuming upload in HTTP means that we PUT or POST and that we have
      * got a resume_from value set. The resume value has already created
      * a Range: header that will be passed along. We need to "fast forward"
      * the file the given number of bytes and decrease the assume upload
@@ -594,14 +592,15 @@
                 "%s" /* pragma */
                 "%s" /* accept */
                 "%s", /* referer */
 
                 data->customrequest?data->customrequest:
                 (data->bits.no_body?"HEAD":
-                 (data->bits.http_post || data->bits.http_formpost)?"POST":
-                 (data->bits.http_put)?"PUT":"GET"),
+                 ((HTTPREQ_POST == data->httpreq) ||
+                  (HTTPREQ_POST_FORM == data->httpreq))?"POST":
+                 (HTTPREQ_PUT == data->httpreq)?"PUT":"GET"),
                 ppath,
                 (conn->bits.proxy_user_passwd &&
                  conn->allocptr.proxyuserpwd)?conn->allocptr.proxyuserpwd:"",
                 (conn->bits.user_passwd && conn->allocptr.userpwd)?
                 conn->allocptr.userpwd:"",
                 (conn->bits.use_range && conn->allocptr.rangeline)?
@@ -700,13 +699,13 @@
           add_bufferf(req_buffer, "%s\r\n", headers->data);
         }
       }
       headers = headers->next;
     }
 
-    if(data->bits.http_formpost) {
+    if(HTTPREQ_POST_FORM == data->httpreq) {
       if(Curl_FormInit(&http->form, http->sendit)) {
         failf(data, "Internal HTTP POST error!\n");
         return CURLE_HTTP_POST_ERROR;
       }
 
       http->storefread = data->fread; /* backup */
@@ -727,17 +726,17 @@
         add_buffer_send(conn->firstsocket, conn, req_buffer);
       result = Curl_Transfer(conn, conn->firstsocket, -1, TRUE,
                         &http->readbytecount,
                           conn->firstsocket,
                         &http->writebytecount);
       if(result) {
-        Curl_FormFree(http->sendit); /* free that whole lot */
+        Curl_formclean(http->sendit); /* free that whole lot */
         return result;
       }
     }
-    else if(data->bits.http_put) {
+    else if(HTTPREQ_PUT == data->httpreq) {
       /* Let's PUT the data to the server! */
 
       if(data->infilesize>0) {
         add_bufferf(req_buffer,
                     "Content-Length: %d\r\n\r\n", /* file size */
                     data->infilesize );
@@ -759,15 +758,26 @@
                         &http->writebytecount);
       if(result)
         return result;
       
     }
     else {
-      if(data->bits.http_post) {
+      if(HTTPREQ_POST == data->httpreq) {
         /* this is the simple POST, using x-www-form-urlencoded style */
 
+        if(!data->postfields) {
+          /*
+           * This is an attempt to do a POST without having anything to
+           * actually send. Let's make a NULL pointer equal "" here. Good/bad
+           * ?
+           */
+          data->postfields = (char *)"";
+          data->postfieldsize = 0; /* it might been set to something illegal,
+                                      anything > 0 would be! */
+        }
+
         if(!checkheaders(data, "Content-Length:"))
           /* we allow replacing this header, although it isn't very wise to
              actually set your own */
           add_bufferf(req_buffer,
                       "Content-Length: %d\r\n",
                       (data->postfieldsize?data->postfieldsize:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/http_chunks.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/http_chunks.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/http_chunks.c	2001-03-14 07:29:53.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/http_chunks.c	2001-08-14 16:29:09.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: http_chunks.c,v 1.5 2001/03/13 23:29:53 bagder Exp $
+ * $Id: http_chunks.c,v 1.6 2001/08/14 08:29:09 bagder Exp $
  *****************************************************************************/
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
 #include <string.h>
@@ -93,14 +93,14 @@
  * client (for byte-counting and whatever).
  *
  * The states and the state-machine is further explained in the header file.
  */
 CHUNKcode Curl_httpchunk_read(struct connectdata *conn,
                               char *datap,
-                              ssize_t length,
-                              ssize_t *wrote)
+                              size_t length,
+                              size_t *wrote)
 {
   CURLcode result;
   struct Curl_chunker *ch = &conn->proto.http->chunk;
   int piece;
   *wrote = 0; /* nothing yet */
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/if2ip.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/if2ip.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/if2ip.c	2001-05-31 15:03:04.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/if2ip.c	2001-08-06 20:22:48.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: if2ip.c,v 1.16 2001/05/31 07:03:04 bagder Exp $
+ * $Id: if2ip.c,v 1.17 2001/08/06 12:22:48 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <stdio.h>
 #include <stdlib.h>
@@ -63,12 +63,17 @@
 #endif
 
 #if defined(HAVE_INET_NTOA_R) && !defined(HAVE_INET_NTOA_R_DECL) 
 #include "inet_ntoa_r.h"
 #endif
 
+#ifdef	VMS
+#define	IOCTL_3_ARGS
+#include <inet.h>
+#endif
+
 /* The last #include file should be: */
 #ifdef MALLOCDEBUG
 #include "memdebug.h"
 #endif
 
 #define SYS_ERROR -1
@@ -87,13 +92,17 @@
   }
   else {
     struct ifreq req;
     memset(&req, 0, sizeof(req));
     strcpy(req.ifr_name, interface);
     req.ifr_addr.sa_family = AF_INET;
+#ifdef	IOCTL_3_ARGS
+    if (SYS_ERROR == ioctl(dummy, SIOCGIFADDR, &req)) {
+#else
     if (SYS_ERROR == ioctl(dummy, SIOCGIFADDR, &req, sizeof(req))) {
+#endif
       sclose(dummy);
       return NULL;
     }
     else {
       struct in_addr in;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/krb4.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/krb4.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/krb4.c	2001-05-31 13:55:05.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/krb4.c	2001-08-17 18:20:41.000000000 +0800
@@ -1,11 +1,15 @@
-/* modified by Martin Hedenfalk <mhe@stacken.kth.se> for use in Curl
- * last modified 2000-09-18
- */
-
-/*
+/* This source code was modified by Martin Hedenfalk <mhe@stacken.kth.se> for
+ * use in Curl. His latest changes were done 2000-09-18.
+ *
+ * It has since been patched away like a madman by Daniel Stenberg
+ * <daniel@haxx.se> to make it better applied to curl conditions, and to make
+ * it not use globals, pollute name space and more. This source code awaits a
+ * rewrite to work around the paragraph 2 in the BSD licenses as explained
+ * below.
+ *
  * Copyright (c) 1995, 1996, 1997, 1998, 1999 Kungliga Tekniska Högskolan
  * (Royal Institute of Technology, Stockholm, Sweden).
  * All rights reserved.
  * 
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions
@@ -29,14 +33,13 @@
  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- */
+ * SUCH DAMAGE.  */
 
 #include "setup.h"
 
 #ifdef KRB4
 
 #include "security.h"
@@ -44,37 +47,29 @@
 #include <stdlib.h>
 #include <netdb.h>
 #include <syslog.h>
 #include <string.h>
 #include <krb.h>
 
+#ifdef HAVE_UNISTD_H
+#include <unistd.h> /* for getpid() */
+#endif
+
 #include "ftp.h"
 #include "sendf.h"
 
 /* The last #include file should be: */
 #ifdef MALLOCDEBUG
 #include "memdebug.h"
 #endif
 
-#ifdef FTP_SERVER
-#define LOCAL_ADDR ctrl_addr
-#define REMOTE_ADDR his_addr
-#else
-/*#define LOCAL_ADDR myctladdr***/
-/*#define REMOTE_ADDR hisctladdr***/
-#endif
-
-/*extern struct sockaddr *LOCAL_ADDR, *REMOTE_ADDR;***/
-
-#define LOCAL_ADDR (&local_addr)
+#define LOCAL_ADDR (&conn->local_addr)
 #define REMOTE_ADDR (&conn->serv_addr)
 #define myctladdr LOCAL_ADDR
 #define hisctladdr REMOTE_ADDR
 
-static struct sockaddr_in local_addr;
-
 struct krb4_data {
     des_cblock key;
     des_key_schedule schedule;
     char name[ANAME_SZ];
     char instance[INST_SZ];
     char realm[REALM_SZ];
@@ -102,15 +97,16 @@
 size_t strlcpy (char *dst, const char *src, size_t dst_sz);
 #endif
 
 static int
 krb4_check_prot(void *app_data, int level)
 {
-    if(level == prot_confidential)
-	return -1;
-    return 0;
+  app_data = NULL; /* prevent compiler warning */
+  if(level == prot_confidential)
+    return -1;
+  return 0;
 }
 
 static int
 krb4_decode(void *app_data, void *buf, int len, int level,
 	    struct connectdata *conn)
 {
@@ -134,13 +130,17 @@
     return m.app_length;
 }
 
 static int
 krb4_overhead(void *app_data, int level, int len)
 {
-    return 31;
+  /* no arguments are used, just init them to prevent compiler warnings */
+  app_data = NULL;
+  level = 0;
+  len = 0;
+  return 31;
 }
 
 static int
 krb4_encode(void *app_data, void *from, int length, int level, void **to,
 	    struct connectdata *conn)
 {
@@ -155,104 +155,15 @@
 			   (struct sockaddr_in *)LOCAL_ADDR,
 			   (struct sockaddr_in *)REMOTE_ADDR);
     else
 	return -1;
 }
 
-#ifdef FTP_SERVER
-
-static int
-krb4_adat(void *app_data, void *buf, size_t len)
-{
-    KTEXT_ST tkt;
-    AUTH_DAT auth_dat;
-    char *p;
-    int kerror;
-    u_int32_t cs;
-    char msg[35]; /* size of encrypted block */
-    int tmp_len;
-    struct krb4_data *d = app_data;
-    char inst[INST_SZ];
-    struct sockaddr_in *his_addr_sin = (struct sockaddr_in *)his_addr;
-
-    memcpy(tkt.dat, buf, len);
-    tkt.length = len;
-
-    k_getsockinst(0, inst, sizeof(inst));
-    kerror = krb_rd_req(&tkt, "ftp", inst, 
-			his_addr_sin->sin_addr.s_addr, &auth_dat, "");
-    if(kerror == RD_AP_UNDEC){
-	k_getsockinst(0, inst, sizeof(inst));
-	kerror = krb_rd_req(&tkt, "rcmd", inst, 
-			    his_addr_sin->sin_addr.s_addr, &auth_dat, "");
-    }
-
-    if(kerror){
-	reply(535, "Error reading request: %s.", krb_get_err_text(kerror));
-	return -1;
-    }
-    
-    memcpy(d->key, auth_dat.session, sizeof(d->key));
-    des_set_key(&d->key, d->schedule);
-
-    strlcpy(d->name, auth_dat.pname, sizeof(d->name));
-    strlcpy(d->instance, auth_dat.pinst, sizeof(d->instance));
-    strlcpy(d->realm, auth_dat.prealm, sizeof(d->instance));
-
-    cs = auth_dat.checksum + 1;
-    {
-	unsigned char tmp[4];
-	KRB_PUT_INT(cs, tmp, 4, sizeof(tmp));
-	tmp_len = krb_mk_safe(tmp, msg, 4, &d->key,
-			      (struct sockaddr_in *)LOCAL_ADDR,
-			      (struct sockaddr_in *)REMOTE_ADDR);
-    }
-    if(tmp_len < 0){
-	reply(535, "Error creating reply: %s.", strerror(errno));
-	return -1;
-    }
-    len = tmp_len;
-    if(base64_encode(msg, len, &p) < 0) {
-	reply(535, "Out of memory base64-encoding.");
-	return -1;
-    }
-    reply(235, "ADAT=%s", p);
-    sec_complete = 1;
-    free(p);
-    return 0;
-}
-
-static int
-krb4_userok(void *app_data, char *user)
-{
-    struct krb4_data *d = app_data;
-    return krb_kuserok(d->name, d->instance, d->realm, user);
-}
-
-struct sec_server_mech krb4_server_mech = {
-    "KERBEROS_V4",
-    sizeof(struct krb4_data),
-    NULL, /* init */
-    NULL, /* end */
-    krb4_check_prot,
-    krb4_overhead,
-    krb4_encode,
-    krb4_decode,
-    /* */
-    NULL,
-    krb4_adat,
-    NULL, /* pbsz */
-    NULL, /* ccc */
-    krb4_userok
-};
-
-#else /* FTP_SERVER */
-
 static int
 mk_auth(struct krb4_data *d, KTEXT adat, 
-	char *service, char *host, int checksum)
+	const char *service, char *host, int checksum)
 {
     int ret;
     CREDENTIALS cred;
     char sname[SNAME_SZ], inst[INST_SZ], realm[REALM_SZ];
 
     strlcpy(sname, service, sizeof(sname));
@@ -271,230 +182,213 @@
     return ret;
 }
 
 static int
 krb4_auth(void *app_data, struct connectdata *conn)
 {
-    int ret;
-    char *p;
-    int len;
-    KTEXT_ST adat;
-    MSG_DAT msg_data;
-    int checksum;
-    u_int32_t cs;
-    struct krb4_data *d = app_data;
-    struct sockaddr_in *localaddr  = (struct sockaddr_in *)LOCAL_ADDR;
-#if 0
-    struct sockaddr_in *remoteaddr = (struct sockaddr_in *)REMOTE_ADDR;
-#endif
-    char *host = conn->hp->h_name;
-    size_t nread;
-    int l = sizeof(local_addr);
-
-    if(getsockname(conn->firstsocket,
-                   (struct sockaddr *)LOCAL_ADDR, &l) < 0)
-	perror("getsockname()");
-
-    checksum = getpid();
-    ret = mk_auth(d, &adat, "ftp", host, checksum);
-    if(ret == KDC_PR_UNKNOWN)
-	ret = mk_auth(d, &adat, "rcmd", host, checksum);
-    if(ret){
-	printf("%s\n", krb_get_err_text(ret));
-	return AUTH_CONTINUE;
-    }
-
+  int ret;
+  char *p;
+  int len;
+  KTEXT_ST adat;
+  MSG_DAT msg_data;
+  int checksum;
+  u_int32_t cs;
+  struct krb4_data *d = app_data;
+  struct sockaddr_in *localaddr  = (struct sockaddr_in *)LOCAL_ADDR;
+  char *host = conn->hp->h_name;
+  ssize_t nread;
+  int l = sizeof(conn->local_addr);
+
+  if(getsockname(conn->firstsocket,
+                 (struct sockaddr *)LOCAL_ADDR, &l) < 0)
+    perror("getsockname()");
+
+  checksum = getpid();
+  ret = mk_auth(d, &adat, "ftp", host, checksum);
+  if(ret == KDC_PR_UNKNOWN)
+    ret = mk_auth(d, &adat, "rcmd", host, checksum);
+  if(ret) {
+    printf("%s\n", krb_get_err_text(ret));
+    return AUTH_CONTINUE;
+  }
+  
 #ifdef HAVE_KRB_GET_OUR_IP_FOR_REALM
-    if (krb_get_config_bool("nat_in_use")) {
-      struct in_addr natAddr;
+  if (krb_get_config_bool("nat_in_use")) {
+    struct in_addr natAddr;
 
-      if (krb_get_our_ip_for_realm(krb_realmofhost(host),
-				   &natAddr) != KSUCCESS
-	  && krb_get_our_ip_for_realm(NULL, &natAddr) != KSUCCESS)
-	printf("Can't get address for realm %s\n",
-	       krb_realmofhost(host));
-      else {
-	if (natAddr.s_addr != localaddr->sin_addr.s_addr) {
-	  printf("Using NAT IP address (%s) for kerberos 4\n",
-		 (char *)inet_ntoa(natAddr));
-	  localaddr->sin_addr = natAddr;
-	  
-	  /*
-	   * This not the best place to do this, but it
-	   * is here we know that (probably) NAT is in
-	   * use!
-	   */
-
-	  /*passivemode = 1;***/
-	  /*printf("Setting: Passive mode on.\n");***/
-	}
+    if (krb_get_our_ip_for_realm(krb_realmofhost(host),
+                                 &natAddr) != KSUCCESS
+        && krb_get_our_ip_for_realm(NULL, &natAddr) != KSUCCESS)
+      printf("Can't get address for realm %s\n",
+             krb_realmofhost(host));
+    else {
+      if (natAddr.s_addr != localaddr->sin_addr.s_addr) {
+        printf("Using NAT IP address (%s) for kerberos 4\n",
+               (char *)inet_ntoa(natAddr));
+        localaddr->sin_addr = natAddr;
+        
+        /*
+         * This not the best place to do this, but it is here we know that
+         * (probably) NAT is in use!  */
+
+        /*passivemode = 1;***/
+        /*printf("Setting: Passive mode on.\n");***/
       }
     }
+  }
 #endif
 
-    /*printf("Local address is %s\n", inet_ntoa(localaddr->sin_addr));***/
-    /*printf("Remote address is %s\n", inet_ntoa(remoteaddr->sin_addr));***/
-
-    if(Curl_base64_encode(adat.dat, adat.length, &p) < 0) {
-	printf("Out of memory base64-encoding.\n");
-	return AUTH_CONTINUE;
-    }
-    /*ret = command("ADAT %s", p)*/
-    Curl_ftpsendf(conn->firstsocket, conn, "ADAT %s", p);
-    /* wait for feedback */
-    nread = Curl_GetFTPResponse(conn->firstsocket,
-                                conn->data->buffer, conn, NULL);
-    if(nread < 0)
-	return /*CURLE_OPERATION_TIMEOUTED*/-1;
-    free(p);
-
-    if(/*ret != COMPLETE*/conn->data->buffer[0] != '2'){
-	printf("Server didn't accept auth data.\n");
-	return AUTH_ERROR;
-    }
+  /*printf("Local address is %s\n", inet_ntoa(localaddr->sin_addr));***/
+  /*printf("Remote address is %s\n", inet_ntoa(remoteaddr->sin_addr));***/
 
-    p = strstr(/*reply_string*/conn->data->buffer, "ADAT=");
-    if(!p){
-	printf("Remote host didn't send adat reply.\n");
-	return AUTH_ERROR;
-    }
-    p += 5;
-    len = Curl_base64_decode(p, adat.dat);
-    if(len < 0){
-	printf("Failed to decode base64 from server.\n");
-	return AUTH_ERROR;
-    }
-    adat.length = len;
-    ret = krb_rd_safe(adat.dat, adat.length, &d->key, 
-		      (struct sockaddr_in *)hisctladdr, 
-		      (struct sockaddr_in *)myctladdr, &msg_data);
-    if(ret){
-	printf("Error reading reply from server: %s.\n", 
-	       krb_get_err_text(ret));
-	return AUTH_ERROR;
-    }
-    krb_get_int(msg_data.app_data, &cs, 4, 0);
-    if(cs - checksum != 1){
-	printf("Bad checksum returned from server.\n");
-	return AUTH_ERROR;
-    }
-    return AUTH_OK;
+  if(Curl_base64_encode(adat.dat, adat.length, &p) < 0) {
+    printf("Out of memory base64-encoding.\n");
+    return AUTH_CONTINUE;
+  }
+
+  Curl_ftpsendf(conn->firstsocket, conn, "ADAT %s", p);
+
+  nread = Curl_GetFTPResponse(conn->firstsocket,
+                              conn->data->buffer, conn, NULL);
+  if(nread < 0)
+    return /*CURLE_OPERATION_TIMEOUTED*/-1;
+  free(p);
+
+  if(/*ret != COMPLETE*/conn->data->buffer[0] != '2'){
+    printf("Server didn't accept auth data.\n");
+    return AUTH_ERROR;
+  }
+
+  p = strstr(conn->data->buffer, "ADAT=");
+  if(!p){
+    printf("Remote host didn't send adat reply.\n");
+    return AUTH_ERROR;
+  }
+  p += 5;
+  len = Curl_base64_decode(p, adat.dat);
+  if(len < 0){
+    printf("Failed to decode base64 from server.\n");
+    return AUTH_ERROR;
+  }
+  adat.length = len;
+  ret = krb_rd_safe(adat.dat, adat.length, &d->key, 
+                    (struct sockaddr_in *)hisctladdr, 
+                    (struct sockaddr_in *)myctladdr, &msg_data);
+  if(ret){
+    printf("Error reading reply from server: %s.\n", 
+           krb_get_err_text(ret));
+    return AUTH_ERROR;
+  }
+  krb_get_int(msg_data.app_data, &cs, 4, 0);
+  if(cs - checksum != 1){
+    printf("Bad checksum returned from server.\n");
+    return AUTH_ERROR;
+  }
+  return AUTH_OK;
 }
 
-struct sec_client_mech krb4_client_mech = {
+struct Curl_sec_client_mech Curl_krb4_client_mech = {
     "KERBEROS_V4",
     sizeof(struct krb4_data),
     NULL, /* init */
     krb4_auth,
     NULL, /* end */
     krb4_check_prot,
     krb4_overhead,
     krb4_encode,
     krb4_decode
 };
 
-#endif /* FTP_SERVER */
-
-void krb_kauth(struct connectdata *conn)
+void Curl_krb_kauth(struct connectdata *conn)
 {
-    des_cblock key;
-    des_key_schedule schedule;
-    KTEXT_ST tkt, tktcopy;
-    char *name;
-    char *p;
-    char passwd[100];
-    int tmp;
-    size_t nread;
+  des_cblock key;
+  des_key_schedule schedule;
+  KTEXT_ST tkt, tktcopy;
+  char *name;
+  char *p;
+  char passwd[100];
+  int tmp;
+  ssize_t nread;
 	
-    int save;
+  int save;
 
-    save = set_command_prot(conn, prot_private);
-    /*ret = command("SITE KAUTH %s", name);***/
-    Curl_ftpsendf(conn->firstsocket, conn,
-             "SITE KAUTH %s", conn->data->user);
-    /* wait for feedback */
-    nread = Curl_GetFTPResponse(conn->firstsocket, conn->data->buffer,
-                                conn, NULL);
-    if(nread < 0)
-	return /*CURLE_OPERATION_TIMEOUTED*/;
-
-    if(/*ret != CONTINUE*/conn->data->buffer[0] != '3'){
-	set_command_prot(conn, save);
-	/*code = -1;***/
-	return;
-    }
-    p = strstr(/*reply_string***/conn->data->buffer, "T=");
-    if(!p){
-	printf("Bad reply from server.\n");
-	set_command_prot(conn, save);
-	/*code = -1;***/
-	return;
-    }
-    p += 2;
-    tmp = Curl_base64_decode(p, &tkt.dat);
-    if(tmp < 0){
-	printf("Failed to decode base64 in reply.\n");
-	set_command_prot(conn, save);
-	/*code = -1;***/
-	return;
-    }
-    tkt.length = tmp;
-    tktcopy.length = tkt.length;
+  save = Curl_set_command_prot(conn, prot_private);
+
+  Curl_ftpsendf(conn->firstsocket, conn,
+                "SITE KAUTH %s", conn->data->user);
+
+  nread = Curl_GetFTPResponse(conn->firstsocket, conn->data->buffer,
+                              conn, NULL);
+  if(nread < 0)
+    return /*CURLE_OPERATION_TIMEOUTED*/;
+
+  if(/*ret != CONTINUE*/conn->data->buffer[0] != '3'){
+    Curl_set_command_prot(conn, save);
+    /*code = -1;***/
+    return;
+  }
+
+  p = strstr(conn->data->buffer, "T=");
+  if(!p) {
+    printf("Bad reply from server.\n");
+    Curl_set_command_prot(conn, save);
+    return;
+  }
+
+  p += 2;
+  tmp = Curl_base64_decode(p, &tkt.dat);
+  if(tmp < 0) {
+    printf("Failed to decode base64 in reply.\n");
+    Curl_set_command_prot(conn, save);
+    return;
+  }
+  tkt.length = tmp;
+  tktcopy.length = tkt.length;
     
-    p = strstr(/*reply_string***/conn->data->buffer, "P=");
-    if(!p){
-	printf("Bad reply from server.\n");
-	set_command_prot(conn, save);
-	/*code = -1;***/
-	return;
-    }
-    name = p + 2;
-    for(; *p && *p != ' ' && *p != '\r' && *p != '\n'; p++);
-    *p = 0;
-
-#if 0
-    snprintf(buf, sizeof(buf), "Password for %s:", name);
-    if (des_read_pw_string (passwd, sizeof(passwd)-1, buf, 0))
-        *passwd = '\0';
-    des_string_to_key (passwd, &key);
-#else
-    des_string_to_key (conn->data->passwd, &key);
-#endif
+  p = strstr(conn->data->buffer, "P=");
+  if(!p) {
+    printf("Bad reply from server.\n");
+    Curl_set_command_prot(conn, save);
+    return;
+  }
+  name = p + 2;
+  for(; *p && *p != ' ' && *p != '\r' && *p != '\n'; p++);
+  *p = 0;
 
-    des_key_sched(&key, schedule);
+  des_string_to_key (conn->data->passwd, &key);
+  des_key_sched(&key, schedule);
     
+  des_pcbc_encrypt((des_cblock*)tkt.dat, (des_cblock*)tktcopy.dat,
+                   tkt.length,
+                   schedule, &key, DES_DECRYPT);
+  if (strcmp ((char*)tktcopy.dat + 8,
+              KRB_TICKET_GRANTING_TICKET) != 0) {
+    afs_string_to_key (passwd,
+                       krb_realmofhost(/*hostname*/conn->hp->h_name),
+                       &key);
+    des_key_sched (&key, schedule);
     des_pcbc_encrypt((des_cblock*)tkt.dat, (des_cblock*)tktcopy.dat,
 		     tkt.length,
 		     schedule, &key, DES_DECRYPT);
-    if (strcmp ((char*)tktcopy.dat + 8,
-		KRB_TICKET_GRANTING_TICKET) != 0) {
-        afs_string_to_key (passwd,
-			   krb_realmofhost(/*hostname***/conn->hp->h_name),
-			   &key);
-	des_key_sched (&key, schedule);
-	des_pcbc_encrypt((des_cblock*)tkt.dat, (des_cblock*)tktcopy.dat,
-			 tkt.length,
-			 schedule, &key, DES_DECRYPT);
-    }
-    memset(key, 0, sizeof(key));
-    memset(schedule, 0, sizeof(schedule));
-    memset(passwd, 0, sizeof(passwd));
-    if(Curl_base64_encode(tktcopy.dat, tktcopy.length, &p) < 0) {
-      failf(conn->data, "Out of memory base64-encoding.\n");
-      set_command_prot(conn, save);
-      /*code = -1;***/
-      return;
-    }
-    memset (tktcopy.dat, 0, tktcopy.length);
-    /*ret = command("SITE KAUTH %s %s", name, p);***/
-    Curl_ftpsendf(conn->firstsocket, conn,
-             "SITE KAUTH %s %s", name, p);
-    /* wait for feedback */
-    nread = Curl_GetFTPResponse(conn->firstsocket, conn->data->buffer,
-                                conn, NULL);
-    if(nread < 0)
-	return /*CURLE_OPERATION_TIMEOUTED*/;
-    free(p);
-    set_command_prot(conn, save);
+  }
+  memset(key, 0, sizeof(key));
+  memset(schedule, 0, sizeof(schedule));
+  memset(passwd, 0, sizeof(passwd));
+  if(Curl_base64_encode(tktcopy.dat, tktcopy.length, &p) < 0) {
+    failf(conn->data, "Out of memory base64-encoding.\n");
+    Curl_set_command_prot(conn, save);
+    return;
+  }
+  memset (tktcopy.dat, 0, tktcopy.length);
+
+  Curl_ftpsendf(conn->firstsocket, conn,
+                "SITE KAUTH %s %s", name, p);
+
+  nread = Curl_GetFTPResponse(conn->firstsocket, conn->data->buffer,
+                              conn, NULL);
+  if(nread < 0)
+    return /*CURLE_OPERATION_TIMEOUTED*/;
+  free(p);
+  Curl_set_command_prot(conn, save);
 }
 
 #endif /* KRB4 */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/krb4.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/krb4.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/krb4.h	2001-01-09 15:41:04.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/krb4.h	2001-08-17 18:10:15.000000000 +0800
@@ -17,11 +17,11 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: krb4.h,v 1.2 2001/01/09 07:41:04 bagder Exp $
+ * $Id: krb4.h,v 1.3 2001/08/17 10:10:15 bagder Exp $
  *****************************************************************************/
-void krb_kauth(struct connectdata *conn);
+void Curl_krb_kauth(struct connectdata *conn);
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/ldap.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/ldap.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/ldap.c	2001-02-21 01:35:52.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/ldap.c	2001-08-14 16:30:43.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: ldap.c,v 1.12 2001/02/20 17:35:52 bagder Exp $
+ * $Id: ldap.c,v 1.13 2001/08/14 08:30:43 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -98,13 +98,13 @@
   if (liblber) {
     dlclose(liblber);
   }
 #endif
 }
 
-static void * DynaGetFunction(char *name)
+static void * DynaGetFunction(const char *name)
 {
   void *func = NULL;
 
 #if defined(HAVE_DLOPEN) || defined(HAVE_LIBDL)
   if (libldap) {
     func = dlsym(libldap, name);
@@ -114,21 +114,17 @@
   return func;
 }
 
 static int WriteProc(void *param, char *text, int len)
 {
   struct UrlData *data = (struct UrlData *)param;
+  len = 0; /* prevent compiler warning */
   Curl_client_write(data, CLIENTWRITE_BODY, text, 0);
   return 0;
 }
 
-CURLcode Curl_ldap_done(struct connectdata *conn)
-{
-  return CURLE_OK;
-}
-
 /***********************************************************************
  */
 CURLcode Curl_ldap(struct connectdata *conn)
 {
   CURLcode status = CURLE_OK;
   int rc;
@@ -191,21 +187,21 @@
 	     entryIterator;
 	     entryIterator = ldap_next_entry(server, entryIterator))
 	  {
 	    if (ldaptext) {
 	      rc = ldap_entry2text(server, NULL, entryIterator, NULL,
 				   NULL, NULL, WriteProc, data,
-				   "", 0, 0);
+				   (char *)"", 0, 0);
 	      if (rc != 0) {
 		failf(data, "LDAP: %s", ldap_err2string(rc));
 		status = CURLE_LDAP_SEARCH_FAILED;
 	      }
 	    } else {
 	      rc = ldap_entry2html(server, NULL, entryIterator, NULL,
 				   NULL, NULL, WriteProc, data,
-				   "", 0, 0, NULL, NULL);
+				   (char *)"", 0, 0, NULL, NULL);
 	      if (rc != 0) {
 		failf(data, "LDAP: %s", ldap_err2string(rc));
 		status = CURLE_LDAP_SEARCH_FAILED;
 	      }
 	    }
 	  }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/libcurl.def /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/libcurl.def
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/libcurl.def	2001-06-06 17:18:14.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/libcurl.def	2001-06-07 19:44:38.000000000 +0800
@@ -19,17 +19,16 @@
 	curl_getdate @ 10 ;
 	curl_getenv @ 11 ;
 	curl_global_cleanup @ 12 ;
 	curl_global_init @ 13 ;
 	curl_slist_append @ 14 ;
 	curl_slist_free_all @ 15 ;
-	curl_unescape @ 16 ;
-	curl_version @ 17 ;
-	curl_maprintf @ 18 ;
- 	curl_mfprintf @ 19 ;
-	curl_mprintf @ 20 ;
- 	curl_msprintf @ 21 ;
- 	curl_msnprintf @ 22 ;
- 	curl_mvfprintf @ 23 ;
-	curl_strequal @ 24 ;
-	curl_strnequal @ 25 ;
+	curl_version @ 16 ;
+	curl_maprintf @ 17 ;
+ 	curl_mfprintf @ 18 ;
+	curl_mprintf @ 19 ;
+ 	curl_msprintf @ 20 ;
+ 	curl_msnprintf @ 21 ;
+ 	curl_mvfprintf @ 22 ;
+	curl_strequal @ 23 ;
+	curl_strnequal @ 24 ;
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.am	2001-05-30 03:17:03.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.am	2001-08-20 15:10:28.000000000 +0800
@@ -1,11 +1,11 @@
 #
-# $Id: Makefile.am,v 1.22 2001/05/29 19:17:03 bagder Exp $
+# $Id: Makefile.am,v 1.25 2001/08/20 07:10:28 bagder Exp $
 #
 
-AUTOMAKE_OPTIONS = foreign
+AUTOMAKE_OPTIONS = foreign no-dependencies
 
 EXTRA_DIST = getdate.y \
        Makefile.b32 Makefile.b32.resp Makefile.m32 Makefile.vc6 \
        libcurl.def dllinit.c curllib.dsp curllib.dsw
 
 lib_LTLIBRARIES = libcurl.la
@@ -13,13 +13,13 @@
 # Some flags needed when trying to cause warnings ;-)
 # CFLAGS = -DMALLOCDEBUG -g # -Wall #-pedantic
 
 INCLUDES = -I$(top_srcdir)/include
 
 
-libcurl_la_LDFLAGS = -version-info 2:0:1
+libcurl_la_LDFLAGS = -version-info 2:1:0
 # This flag accepts an argument of the form current[:revision[:age]]. So,
 # passing -version-info 3:12:1 sets current to 3, revision to 12, and age to
 # 1.
 #
 # If either revision or age are omitted, they default to 0. Also note that age
 # must be less than or equal to the current interface number.
@@ -54,13 +54,13 @@
 dict.c         ftp.h          if2ip.c        speedcheck.c   url.h \
 dict.h         getdate.c      if2ip.h        speedcheck.h   urldata.h \
 getdate.h      ldap.c         ssluse.c       version.c \
 getenv.c       ldap.h         ssluse.h       \
 escape.c       mprintf.c      telnet.c       \
 escape.h       getpass.c      netrc.c        telnet.h       \
-getinfo.c transfer.c strequal.c strequal.h easy.c \
+getinfo.c getinfo.h transfer.c strequal.c strequal.h easy.c \
 security.h security.c krb4.c krb4.h memdebug.c memdebug.h inet_ntoa_r.h \
 http_chunks.c http_chunks.h strtok.c strtok.h
 
 noinst_HEADERS = setup.h transfer.h
 
 # Say $(srcdir), so GNU make does not report an ambiguity with the .y.c rule.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.b32 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.b32
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.b32	2001-04-23 01:38:00.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.b32	2001-08-09 17:10:13.000000000 +0800
@@ -1,7 +1,9 @@
 ############################################################
+# $Id: Makefile.b32,v 1.5 2001/08/09 09:10:13 bagder Exp $
+#
 #  Makefile.b32 - Borland's C++ Compiler 5.X
 #
 #  'lib' directory
 #
 #  Requires 'Makefile.b32.resp'
 #
@@ -52,13 +54,14 @@
 	timeval.c \
 	url.c \
 	file.c \
 	getinfo.c \
 	version.c \
 	easy.c \
-	strequal.c
+	strequal.c \
+	strtok.c
 
 OBJECTS = $(SOURCES:.c=.obj)
 
 .c.obj:
 	$(CXX) -c $(INCDIRS) $(CXXFLAGS) $(DEFINES) $<
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.b32.resp /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.b32.resp
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.b32.resp	2001-04-23 01:38:16.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.b32.resp	2001-08-15 14:13:35.000000000 +0800
@@ -23,7 +23,9 @@
 +timeval.obj &
 +url.obj &
 +file.obj &
 +getinfo.obj &
 +version.obj &
 +easy.obj &
-+strequal.obj
++strequal.obj &
++strtok.obj
+
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.in	2001-06-07 17:35:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.in	2001-08-20 15:22:04.000000000 +0800
@@ -8,13 +8,13 @@
 # This program is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
 #
-# $Id: Makefile.am,v 1.22 2001/05/29 19:17:03 bagder Exp $
+# $Id: Makefile.am,v 1.25 2001/08/20 07:10:28 bagder Exp $
 #
 
 
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -86,25 +86,25 @@
 RANLIB = @RANLIB@
 STRIP = @STRIP@
 VERSION = @VERSION@
 VERSIONNUM = @VERSIONNUM@
 YACC = @YACC@
 
-AUTOMAKE_OPTIONS = foreign
+AUTOMAKE_OPTIONS = foreign no-dependencies
 
 EXTRA_DIST = getdate.y        Makefile.b32 Makefile.b32.resp Makefile.m32 Makefile.vc6        libcurl.def dllinit.c curllib.dsp curllib.dsw
 
 
 lib_LTLIBRARIES = libcurl.la
 
 # Some flags needed when trying to cause warnings ;-)
 # CFLAGS = -DMALLOCDEBUG -g # -Wall #-pedantic
 
 INCLUDES = -I$(top_srcdir)/include
 
-libcurl_la_LDFLAGS = -version-info 2:0:1
+libcurl_la_LDFLAGS = -version-info 2:1:0
 # This flag accepts an argument of the form current[:revision[:age]]. So,
 # passing -version-info 3:12:1 sets current to 3, revision to 12, and age to
 # 1.
 #
 # If either revision or age are omitted, they default to 0. Also note that age
 # must be less than or equal to the current interface number.
@@ -127,13 +127,13 @@
 # increment age.
 #
 # 6.If any interfaces have been removed since the last public release, then
 # set age to 0.
 #
 
-libcurl_la_SOURCES =  arpa_telnet.h  file.c         getpass.h      netrc.h        timeval.c base64.c       file.h         hostip.c       progress.c     timeval.h base64.h       formdata.c     hostip.h       progress.h     cookie.c       formdata.h     http.c         sendf.c        cookie.h       ftp.c          http.h         sendf.h        url.c dict.c         ftp.h          if2ip.c        speedcheck.c   url.h dict.h         getdate.c      if2ip.h        speedcheck.h   urldata.h getdate.h      ldap.c         ssluse.c       version.c getenv.c       ldap.h         ssluse.h       escape.c       mprintf.c      telnet.c       escape.h       getpass.c      netrc.c        telnet.h       getinfo.c transfer.c strequal.c strequal.h easy.c security.h security.c krb4.c krb4.h memdebug.c memdebug.h inet_ntoa_r.h http_chunks.c http_chunks.h strtok.c strtok.h
+libcurl_la_SOURCES =  arpa_telnet.h  file.c         getpass.h      netrc.h        timeval.c base64.c       file.h         hostip.c       progress.c     timeval.h base64.h       formdata.c     hostip.h       progress.h     cookie.c       formdata.h     http.c         sendf.c        cookie.h       ftp.c          http.h         sendf.h        url.c dict.c         ftp.h          if2ip.c        speedcheck.c   url.h dict.h         getdate.c      if2ip.h        speedcheck.h   urldata.h getdate.h      ldap.c         ssluse.c       version.c getenv.c       ldap.h         ssluse.h       escape.c       mprintf.c      telnet.c       escape.h       getpass.c      netrc.c        telnet.h       getinfo.c getinfo.h transfer.c strequal.c strequal.h easy.c security.h security.c krb4.c krb4.h memdebug.c memdebug.h inet_ntoa_r.h http_chunks.c http_chunks.h strtok.c strtok.h
 
 
 noinst_HEADERS = setup.h transfer.h
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = ../config.h ../src/config.h
 CONFIG_CLEAN_FILES = 
@@ -169,13 +169,13 @@
 OBJECTS = $(libcurl_la_OBJECTS)
 
 all: all-redirect
 .SUFFIXES:
 .SUFFIXES: .S .c .lo .o .obj .s
 $(srcdir)/Makefile.in: Makefile.am $(top_srcdir)/configure.in $(ACLOCAL_M4) 
-	cd $(top_srcdir) && $(AUTOMAKE) --foreign --include-deps ./lib/Makefile
+	cd $(top_srcdir) && $(AUTOMAKE) --foreign ./lib/Makefile
 
 Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$(subdir)/$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
 
@@ -292,134 +292,12 @@
 	  else \
 	    test -f $(distdir)/$$file \
 	    || ln $$d/$$file $(distdir)/$$file 2> /dev/null \
 	    || cp -p $$d/$$file $(distdir)/$$file || :; \
 	  fi; \
 	done
-base64.lo base64.o : base64.c ../config.h base64.h memdebug.h
-cookie.lo cookie.o : cookie.c setup.h ../config.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h getdate.h strequal.h strtok.h memdebug.h
-dict.lo dict.o : dict.c setup.h ../config.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	transfer.h sendf.h progress.h strequal.h \
-	../include/curl/mprintf.h
-download.lo download.o : download.c setup.h ../config.h urldata.h \
-	cookie.h ../include/curl/curl.h ../include/curl/types.h \
-	formdata.h timeval.h progress.h sendf.h
-easy.lo easy.o : easy.c setup.h ../config.h strequal.h urldata.h \
-	cookie.h ../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	transfer.h ssluse.h ../include/curl/mprintf.h
-escape.lo escape.o : escape.c setup.h ../config.h ../include/curl/curl.h \
-	../include/curl/types.h ../include/curl/easy.h memdebug.h
-file.lo file.o : file.c setup.h ../config.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	progress.h sendf.h escape.h ../include/curl/mprintf.h \
-	memdebug.h
-formdata.lo formdata.o : formdata.c setup.h ../config.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h strequal.h memdebug.h
-ftp.lo ftp.o : ftp.c setup.h ../config.h ../include/curl/curl.h \
-	../include/curl/types.h ../include/curl/easy.h urldata.h \
-	cookie.h formdata.h timeval.h http_chunks.h sendf.h if2ip.h \
-	hostip.h progress.h transfer.h escape.h http.h ftp.h security.h \
-	krb4.h strequal.h ssluse.h ../include/curl/mprintf.h memdebug.h
-getdate.lo getdate.o : getdate.c setup.h ../config.h memdebug.h \
-	getdate.h
-getenv.lo getenv.o : getenv.c memdebug.h
-getinfo.lo getinfo.o : getinfo.c setup.h ../config.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h urldata.h cookie.h formdata.h timeval.h \
-	http_chunks.h
-getpass.lo getpass.o : getpass.c ../config.h memdebug.h
-highlevel.lo highlevel.o : highlevel.c setup.h ../config.h strequal.h \
-	urldata.h cookie.h ../include/curl/curl.h \
-	../include/curl/types.h formdata.h timeval.h netrc.h getenv.h \
-	hostip.h download.h sendf.h speedcheck.h getpass.h progress.h \
-	getdate.h ../include/curl/mprintf.h memdebug.h
-hostip.lo hostip.o : hostip.c setup.h ../config.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	sendf.h inet_ntoa_r.h memdebug.h
-http.lo http.o : http.c setup.h ../config.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	transfer.h sendf.h progress.h base64.h strequal.h ssluse.h \
-	../include/curl/mprintf.h memdebug.h
-http_chunks.lo http_chunks.o : http_chunks.c setup.h ../config.h \
-	urldata.h cookie.h ../include/curl/curl.h \
-	../include/curl/types.h ../include/curl/easy.h formdata.h \
-	timeval.h http_chunks.h sendf.h ../include/curl/mprintf.h \
-	memdebug.h
-if2ip.lo if2ip.o : if2ip.c setup.h ../config.h inet_ntoa_r.h memdebug.h
-krb4.lo krb4.o : krb4.c setup.h ../config.h security.h urldata.h \
-	cookie.h ../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	base64.h ftp.h sendf.h memdebug.h
-ldap.lo ldap.o : ldap.c setup.h ../config.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	sendf.h escape.h ../include/curl/mprintf.h
-memdebug.lo memdebug.o : memdebug.c setup.h ../config.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h ../include/curl/mprintf.h urldata.h \
-	cookie.h formdata.h timeval.h http_chunks.h
-mprintf.lo mprintf.o : mprintf.c memdebug.h
-netrc.lo netrc.o : netrc.c setup.h ../config.h ../include/curl/curl.h \
-	../include/curl/types.h ../include/curl/easy.h strequal.h \
-	strtok.h memdebug.h
-progress.lo progress.o : progress.c setup.h ../config.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h urldata.h cookie.h formdata.h timeval.h \
-	http_chunks.h sendf.h progress.h
-security.lo security.o : security.c setup.h ../config.h \
-	../include/curl/mprintf.h security.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	base64.h sendf.h ftp.h memdebug.h
-sendf.lo sendf.o : sendf.c setup.h ../config.h ../include/curl/curl.h \
-	../include/curl/types.h ../include/curl/easy.h urldata.h \
-	cookie.h formdata.h timeval.h http_chunks.h sendf.h \
-	../include/curl/mprintf.h security.h memdebug.h
-speedcheck.lo speedcheck.o : speedcheck.c setup.h ../config.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h urldata.h cookie.h formdata.h timeval.h \
-	http_chunks.h sendf.h speedcheck.h
-ssluse.lo ssluse.o : ssluse.c setup.h ../config.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	sendf.h memdebug.h
-strequal.lo strequal.o : strequal.c setup.h ../config.h
-strtok.lo strtok.o : strtok.c setup.h ../config.h
-telnet.lo telnet.o : telnet.c setup.h ../config.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	transfer.h sendf.h ../include/curl/mprintf.h arpa_telnet.h \
-	memdebug.h
-timeval.lo timeval.o : timeval.c timeval.h setup.h ../config.h
-transfer.lo transfer.o : transfer.c setup.h ../config.h strequal.h \
-	urldata.h cookie.h ../include/curl/curl.h \
-	../include/curl/types.h ../include/curl/easy.h formdata.h \
-	timeval.h http_chunks.h netrc.h hostip.h transfer.h sendf.h \
-	speedcheck.h getpass.h progress.h getdate.h http.h \
-	../include/curl/mprintf.h memdebug.h
-url.lo url.o : url.c setup.h ../config.h urldata.h cookie.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h formdata.h timeval.h http_chunks.h \
-	netrc.h base64.h ssluse.h hostip.h if2ip.h transfer.h sendf.h \
-	getpass.h progress.h strequal.h escape.h strtok.h ftp.h dict.h \
-	telnet.h http.h file.h ldap.h ../include/curl/mprintf.h \
-	security.h memdebug.h
-version.lo version.o : version.c setup.h ../config.h \
-	../include/curl/curl.h ../include/curl/types.h \
-	../include/curl/easy.h urldata.h cookie.h formdata.h timeval.h \
-	http_chunks.h
-
 info-am:
 info: info-am
 dvi-am:
 dvi: dvi-am
 check-am: all-am
 check: check-am
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.m32 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.m32
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.m32	2001-06-07 13:40:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.m32	2001-08-09 17:10:13.000000000 +0800
@@ -1,7 +1,9 @@
 #############################################################
+# $Id: Makefile.m32,v 1.10 2001/08/09 09:10:13 bagder Exp $
+#
 ## Makefile for building libcurl.a with MingW32 (GCC-2.95) and
 ## optionally OpenSSL (0.9.6)
 ## Use: make -f Makefile.m32
 ##
 ## Comments to: Troy Engel <tengel@sonic.net> or
 ##              Joern Hartroth <hartroth@acm.org>
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.vc6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.vc6
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/Makefile.vc6	2001-06-06 16:42:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/Makefile.vc6	2001-08-10 14:23:43.000000000 +0800
@@ -1,18 +1,20 @@
 #############################################################
+# $Id: Makefile.am,v 1.20 2001/08/08 07:46:44 bagder Exp $
+#
 ## Makefile for building libcurl.lib with MSVC6
 ## Use: nmake -f makefile.vc6 [release | release-ssl | debug]
 ##      (default is release)
 ##
 ## Comments to: Troy Engel <tengel@sonic.net>
 ## Updated by: Craig Davison <cd@securityfocus.com>
 ## Updated by: SM <sm@technologist.com>
 
 PROGRAM_NAME = libcurl.lib
 PROGRAM_NAME_DEBUG = libcurld.lib
-#OPENSSL_PATH = ../../openssl-0.9.6a
+#OPENSSL_PATH = ../../openssl-0.9.6b
 
 ########################################################
 ## Nothing more to do below this line!
 
 ## Release
 CCR = cl.exe /MD /O2 /D "NDEBUG"
@@ -289,13 +291,13 @@
 	$(CCD) $(CFLAGS) version.c
 easyd.obj: easy.c
 	$(CCD) $(CFLAGS) easy.c
 strequald.obj: strequal.c
 	$(CCD) $(CFLAGS) strequal.c
 strtokd.obj:strtok.c
-	$(CCR) $(CFLAGS) strtok.c
+	$(CCD) $(CFLAGS) strtok.c
 
 ## Release SSL
 base64rs.obj: base64.c
 	$(CCRS) $(CFLAGS) base64.c
 cookiers.obj: cookie.c
 	$(CCRS) $(CFLAGS) cookie.c
@@ -351,13 +353,13 @@
 	$(CCRS) $(CFLAGS) version.c
 easyrs.obj: easy.c
 	$(CCRS) $(CFLAGS) easy.c
 strequalrs.obj: strequal.c
 	$(CCRS) $(CFLAGS) strequal.c
 strtokrs.obj:strtok.c
-	$(CCR) $(CFLAGS) strtok.c
+	$(CCRS) $(CFLAGS) strtok.c
 
 
 clean:
 	-@erase *.obj
 	-@erase vc60.idb
 	-@erase vc60.pch
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/memdebug.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/memdebug.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/memdebug.c	2001-03-10 00:50:37.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/memdebug.c	2001-08-14 17:24:48.000000000 +0800
@@ -16,13 +16,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: memdebug.c,v 1.13 2001/03/09 15:13:34 bagder Exp $
+ * $Id: memdebug.c,v 1.15 2001/08/14 09:24:48 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <curl/curl.h>
 
@@ -55,27 +55,27 @@
  * Don't use these with multithreaded test programs!
  */
 
 FILE *logfile;
 
 /* this sets the log file name */
-void curl_memdebug(char *logname)
+void curl_memdebug(const char *logname)
 {
   logfile = fopen(logname, "w");
 }
 
 
-void *curl_domalloc(size_t size, int line, char *source)
+void *curl_domalloc(size_t size, int line, const char *source)
 {
   void *mem=(malloc)(size);
   fprintf(logfile?logfile:stderr, "MEM %s:%d malloc(%d) = %p\n",
           source, line, size, mem);
   return mem;
 }
 
-char *curl_dostrdup(const char *str, int line, char *source)
+char *curl_dostrdup(const char *str, int line, const char *source)
 {
   char *mem;
   size_t len;
   
   if(NULL ==str) {
     fprintf(stderr, "ILLEGAL strdup() on NULL at %s:%d\n",
@@ -87,21 +87,21 @@
   len=strlen(str)+1;
   fprintf(logfile?logfile:stderr, "MEM %s:%d strdup(%p) (%d) = %p\n",
           source, line, str, len, mem);
   return mem;
 }
 
-void *curl_dorealloc(void *ptr, size_t size, int line, char *source)
+void *curl_dorealloc(void *ptr, size_t size, int line, const char *source)
 {
   void *mem=(realloc)(ptr, size);
   fprintf(logfile?logfile:stderr, "MEM %s:%d realloc(%p, %d) = %p\n",
           source, line, ptr, size, mem);
   return mem;
 }
 
-void curl_dofree(void *ptr, int line, char *source)
+void curl_dofree(void *ptr, int line, const char *source)
 {
   if(NULL == ptr) {
     fprintf(stderr, "ILLEGAL free() on NULL at %s:%d\n",
             source, line);
     exit(2);
   }
@@ -118,13 +118,13 @@
   fprintf(logfile?logfile:stderr, "FD %s:%d socket() = %d\n",
           source, line, sockfd);
   return sockfd;
 }
 
 int curl_accept(int s, struct sockaddr *addr, socklen_t *addrlen,
-                int line, char *source)
+                int line, const char *source)
 {
   int sockfd=(accept)(s, addr, addrlen);
   fprintf(logfile?logfile:stderr, "FD %s:%d accept() = %d\n",
           source, line, sockfd);
   return sockfd;
 }
@@ -135,21 +135,22 @@
   int res=sclose(sockfd);
   fprintf(logfile?logfile:stderr, "FD %s:%d sclose(%d)\n",
           source, line, sockfd);
   return res;
 }
 
-FILE *curl_fopen(char *file, char *mode, int line, char *source)
+FILE *curl_fopen(const char *file, const char *mode,
+                 int line, const char *source)
 {
   FILE *res=(fopen)(file, mode);
   fprintf(logfile?logfile:stderr, "FILE %s:%d fopen(\"%s\") = %p\n",
           source, line, file, res);
   return res;
 }
 
-int curl_fclose(FILE *file, int line, char *source)
+int curl_fclose(FILE *file, int line, const char *source)
 {
   int res=(fclose)(file);
   fprintf(logfile?logfile:stderr, "FILE %s:%d fclose(%p)\n",
           source, line, file);
   return res;
 }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/memdebug.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/memdebug.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/memdebug.h	2001-03-10 00:50:37.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/memdebug.h	2001-08-14 17:13:42.000000000 +0800
@@ -1,27 +1,31 @@
 #ifdef MALLOCDEBUG
 
 #include <sys/socket.h>
 #include <stdio.h>
+#ifdef HAVE_MEMORY_H
+#include <memory.h>
+#endif
 
 /* memory functions */
-void *curl_domalloc(size_t size, int line, char *source);
-void *curl_dorealloc(void *ptr, size_t size, int line, char *source);
-void curl_dofree(void *ptr, int line, char *source);
-char *curl_dostrdup(const char *str, int line, char *source);
-void curl_memdebug(char *logname);
+void *curl_domalloc(size_t size, int line, const char *source);
+void *curl_dorealloc(void *ptr, size_t size, int line, const char *source);
+void curl_dofree(void *ptr, int line, const char *source);
+char *curl_dostrdup(const char *str, int line, const char *source);
+void curl_memdebug(const char *logname);
 
 /* file descriptor manipulators */
-int curl_socket(int domain, int type, int protocol, int, char *);
-int curl_sclose(int sockfd, int, char *);
+int curl_socket(int domain, int type, int protocol, int, const char *);
+int curl_sclose(int sockfd, int, const char *source);
 int curl_accept(int s, struct sockaddr *addr, socklen_t *addrlen,
-                int line, char *source);
+                int line, const char *source);
 
 /* FILE functions */
-FILE *curl_fopen(char *file, char *mode, int line, char *source);
-int curl_fclose(FILE *file, int line, char *source);
+FILE *curl_fopen(const char *file, const char *mode, int line,
+                 const char *source);
+int curl_fclose(FILE *file, int line, const char *source);
 
 /* Set this symbol on the command-line, recompile all lib-sources */
 #define strdup(ptr) curl_dostrdup(ptr, __LINE__, __FILE__)
 #define malloc(size) curl_domalloc(size, __LINE__, __FILE__)
 #define realloc(ptr,size) curl_dorealloc(ptr, size, __LINE__, __FILE__)
 #define free(ptr) curl_dofree(ptr, __LINE__, __FILE__)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/mprintf.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/mprintf.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/mprintf.c	2001-01-05 20:19:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/mprintf.c	2001-08-14 16:32:03.000000000 +0800
@@ -1,9 +1,9 @@
 /****************************************************************************
  *
- * $Id: mprintf.c,v 1.8 2001/01/05 12:19:42 bagder Exp $
+ * $Id: mprintf.c,v 1.10 2001/08/14 08:32:03 bagder Exp $
  *
  *************************************************************************
  *
  * Permission to use, copy, modify, and distribute this software for any
  * purpose with or without fee is hereby granted, provided that the above
  * copyright notice and this permission notice appear in all copies.
@@ -89,13 +89,13 @@
  * - Fixed space padding (i.e %d was extra padded previously)
  * - long long output is supported
  * - alternate output is done correct like in %#08x
  *
  ****************************************************************************/
 
-static const char rcsid[] = "@(#)$Id: mprintf.c,v 1.8 2001/01/05 12:19:42 bagder Exp $";
+static const char rcsid[] = "@(#)$Id: mprintf.c,v 1.10 2001/08/14 08:32:03 bagder Exp $";
 
 /*
  * To test:
  *
  * Use WIDTH, PRECISION and NUMBERED ARGUMENT combined.
  */
@@ -443,13 +443,13 @@
 	  if (!(flags & FLAGS_LEFT))
 	    flags |= FLAGS_PAD_NIL;
 	  /* FALLTHROUGH */
 	case '1': case '2': case '3': case '4':
 	case '5': case '6': case '7': case '8': case '9':
 	  flags |= FLAGS_WIDTH;
-	  width = strtol(--fmt, &fmt, 10);
+	  width = strtol(fmt-1, &fmt, 10);
 	  break;
 	case '*':  /* Special case */
 	  flags |= FLAGS_WIDTHPARAM;
 	  param_num++;
 	  
 	  i = dprintf_DollarString(fmt, &fmt);
@@ -861,13 +861,13 @@
 	    str = null;
 	    len = sizeof(null) - 1;
 	    /* Disable quotes around (nil) */
 	    p->flags &= (~FLAGS_ALT);
 	  }
 	  else {
-	    str = "";
+	    str = (char *)"";
 	    len = 0;
 	  }
 	}
 	else
 	  len = strlen(str);
 	
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/netrc.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/netrc.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/netrc.c	2001-05-30 19:06:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/netrc.c	2001-08-06 20:24:22.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: netrc.c,v 1.14 2001/05/30 11:06:56 bagder Exp $
+ * $Id: netrc.c,v 1.15 2001/08/06 12:24:22 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <stdio.h>
 #include <stdlib.h>
@@ -33,13 +33,15 @@
 #ifdef HAVE_UNISTD_H
 #include <unistd.h>
 #endif
 #ifdef HAVE_PWD_H
 #include <pwd.h>
 #endif
-
+#ifdef VMS
+#include <unixlib.h>
+#endif
 
 #include <curl/curl.h>
 
 #include "strequal.h"
 #include "strtok.h"
 
@@ -85,14 +87,19 @@
 
 #define NETRC DOT_CHAR "netrc"
 
 #if defined(HAVE_GETPWUID) && defined(HAVE_GETEUID)
   struct passwd *pw;
   pw= getpwuid(geteuid());
-  if (pw)
+  if (pw) {
+#ifdef	VMS
+    home = decc$translate_vms(pw->pw_dir);
+#else
     home = pw->pw_dir;
+#endif
+  }
 #else
   void *pw=NULL;
 #endif
   
   if(NULL == pw) {
     home = curl_getenv("HOME"); /* portable environment reader */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/progress.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/progress.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/progress.c	2001-04-18 15:25:11.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/progress.c	2001-08-10 14:24:49.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: progress.c,v 1.25 2001/04/18 07:25:11 bagder Exp $
+ * $Id: progress.c,v 1.27 2001/08/10 06:24:49 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <string.h>
 
@@ -94,13 +94,15 @@
 void Curl_pgrsDone(struct connectdata *conn)
 {
   struct UrlData *data = conn->data;
   if(!(data->progress.flags & PGRS_HIDE)) {
     data->progress.lastshow=0;
     Curl_pgrsUpdate(conn); /* the final (forced) update */
-    fprintf(data->err, "\n");
+    if(!data->progress.callback)
+      /* only output if we don't use progress callback */
+      fprintf(data->err, "\n");
   }
 }
 
 void Curl_pgrsTime(struct UrlData *data, timerid timer)
 {
   switch(timer) {
@@ -220,26 +222,25 @@
 
   now = Curl_tvnow(); /* what time is it */
 
   /* The exact time spent so far */
   data->progress.timespent = Curl_tvdiff (now, data->progress.start);
 
-  if(data->progress.lastshow == Curl_tvlong(now))
-    return 0; /* never update this more than once a second if the end isn't 
-                 reached */
-  data->progress.lastshow = now.tv_sec;
-
   /* The average download speed this far */
   data->progress.dlspeed = data->progress.downloaded/(data->progress.timespent!=0.0?data->progress.timespent:1.0);
 
   /* The average upload speed this far */
   data->progress.ulspeed = data->progress.uploaded/(data->progress.timespent!=0.0?data->progress.timespent:1.0);
 
+  if(data->progress.lastshow == Curl_tvlong(now))
+    return 0; /* never update this more than once a second if the end isn't 
+                 reached */
+  data->progress.lastshow = now.tv_sec;
+
   /* Let's do the "current speed" thing, which should use the fastest
          of the dl/ul speeds */
-
   data->progress.speeder[ nowindex ] =
     data->progress.downloaded>data->progress.uploaded?
     data->progress.downloaded:data->progress.uploaded;
   data->progress.speeder_c++; /* increase */
   count = ((data->progress.speeder_c>=CURR_TIME)?
            CURR_TIME:data->progress.speeder_c) - 1;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/security.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/security.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/security.c	2001-02-20 08:04:45.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/security.c	2001-08-17 18:08:34.000000000 +0800
@@ -1,12 +1,15 @@
-/* modified by Martin Hedenfalk <mhe@stacken.kth.se> for use in Curl
- * last modified 2000-09-18
- * Even more obscurified to merge better into libcurl by Daniel Stenberg.
- */
-
-/*
+/* This source code was modified by Martin Hedenfalk <mhe@stacken.kth.se> for
+ * use in Curl. His latest changes were done 2000-09-18.
+ *
+ * It has since been patched and modified a lot by Daniel Stenberg
+ * <daniel@haxx.se> to make it better applied to curl conditions, and to make
+ * it not use globals, pollute name space and more. This source code awaits a
+ * rewrite to work around the paragraph 2 in the BSD licenses as explained
+ * below.
+ *
  * Copyright (c) 1998, 1999 Kungliga Tekniska Högskolan
  * (Royal Institute of Technology, Stockholm, Sweden).
  * All rights reserved.
  * 
  * Redistribution and use in source and binary forms, with or without
  * modification, are permitted provided that the following conditions
@@ -30,14 +33,13 @@
  * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
  * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
  * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
  * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
  * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
  * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
- * SUCH DAMAGE.
- */
+ * SUCH DAMAGE.  */
 
 #include "setup.h"
 
 #ifdef KRB4
 
 #define _MPRINTF_REPLACE /* we want curl-functions instead of native ones */
@@ -70,131 +72,98 @@
     { prot_clear, "clear" },
     { prot_safe, "safe" },
     { prot_confidential, "confidential" },
     { prot_private, "private" }
 };
 
-#if 0
-static const char *
-level_to_name(enum protection_level level)
-{
-    int i;
-    for(i = 0; i < sizeof(level_names) / sizeof(level_names[0]); i++)
-	if(level_names[i].level == level)
-	    return level_names[i].name;
-    return "unknown";
-}
-#endif
-
-#ifndef FTP_SERVER /* not used in server */
 static enum protection_level 
 name_to_level(const char *name)
 {
-    int i;
-    for(i = 0; i < sizeof(level_names) / sizeof(level_names[0]); i++)
-	if(!strncasecmp(level_names[i].name, name, strlen(name)))
-	    return level_names[i].level;
-    return (enum protection_level)-1;
+  int i;
+  for(i = 0; i < (int)sizeof(level_names)/(int)sizeof(level_names[0]); i++)
+    if(!strncasecmp(level_names[i].name, name, strlen(name)))
+      return level_names[i].level;
+  return (enum protection_level)-1;
 }
-#endif
-
-#ifdef FTP_SERVER
-
-static struct sec_server_mech *mechs[] = {
-#ifdef KRB5
-    &gss_server_mech,
-#endif
-#ifdef KRB4
-    &krb4_server_mech,
-#endif
-    NULL
-};
-
-static struct sec_server_mech *mech;
 
-#else
-
-static struct sec_client_mech *mechs[] = {
+static struct Curl_sec_client_mech *mechs[] = {
 #ifdef KRB5
-    &gss_client_mech,
+  /* not supported */
 #endif
 #ifdef KRB4
-    &krb4_client_mech,
+    &Curl_krb4_client_mech,
 #endif
     NULL
 };
 
-static struct sec_client_mech *mech;
-
-#endif
-
 int
-sec_getc(struct connectdata *conn, FILE *F)
+Curl_sec_getc(struct connectdata *conn, FILE *F)
 {
   if(conn->sec_complete && conn->data_prot) {
     char c;
-    if(sec_read(conn, fileno(F), &c, 1) <= 0)
+    if(Curl_sec_read(conn, fileno(F), &c, 1) <= 0)
       return EOF;
     return c;
-  } else
+  }
+  else
     return getc(F);
 }
 
 static int
 block_read(int fd, void *buf, size_t len)
 {
-    unsigned char *p = buf;
-    int b;
-    while(len) {
-	b = read(fd, p, len);
-	if (b == 0)
-	    return 0;
-	else if (b < 0)
-	    return -1;
-	len -= b;
-	p += b;
-    }
-    return p - (unsigned char*)buf;
+  unsigned char *p = buf;
+  int b;
+  while(len) {
+    b = read(fd, p, len);
+    if (b == 0)
+      return 0;
+    else if (b < 0)
+      return -1;
+    len -= b;
+    p += b;
+  }
+  return p - (unsigned char*)buf;
 }
 
 static int
 block_write(int fd, void *buf, size_t len)
 {
-    unsigned char *p = buf;
-    int b;
-    while(len) {
-	b = write(fd, p, len);
-	if(b < 0)
-	    return -1;
-	len -= b;
-	p += b;
-    }
-    return p - (unsigned char*)buf;
+  unsigned char *p = buf;
+  int b;
+  while(len) {
+    b = write(fd, p, len);
+    if(b < 0)
+      return -1;
+    len -= b;
+    p += b;
+  }
+  return p - (unsigned char*)buf;
 }
 
 static int
 sec_get_data(struct connectdata *conn,
-             int fd, struct krb4buffer *buf, int level)
+             int fd, struct krb4buffer *buf)
 {
   int len;
   int b;
-
+  
   b = block_read(fd, &len, sizeof(len));
   if (b == 0)
     return 0;
   else if (b < 0)
     return -1;
   len = ntohl(len);
   buf->data = realloc(buf->data, len);
   b = block_read(fd, buf->data, len);
   if (b == 0)
     return 0;
   else if (b < 0)
     return -1;
-  buf->size = (*mech->decode)(conn->app_data, buf->data, len,
-                              conn->data_prot, conn);
+  buf->size = (conn->mech->decode)(conn->app_data, buf->data, len,
+                                   conn->data_prot, conn);
   buf->index = 0;
   return 0;
 }
 
 static size_t
 buffer_read(struct krb4buffer *buf, void *data, size_t len)
@@ -222,13 +191,13 @@
     memcpy((char*)buf->data + buf->index, data, len);
     buf->index += len;
     return len;
 }
 
 int
-sec_read(struct connectdata *conn, int fd, void *buffer, int length)
+Curl_sec_read(struct connectdata *conn, int fd, void *buffer, int length)
 {
     size_t len;
     int rx = 0;
 
     if(conn->sec_complete == 0 || conn->data_prot == 0)
       return read(fd, buffer, length);
@@ -241,13 +210,13 @@
     len = buffer_read(&conn->in_buffer, buffer, length);
     length -= len;
     rx += len;
     buffer = (char*)buffer + len;
     
     while(length) {
-      if(sec_get_data(conn, fd, &conn->in_buffer, conn->data_prot) < 0)
+      if(sec_get_data(conn, fd, &conn->in_buffer) < 0)
         return -1;
       if(conn->in_buffer.size == 0) {
         if(rx)
           conn->in_buffer.eof_flag = 1;
         return rx;
       }
@@ -261,72 +230,58 @@
 
 static int
 sec_send(struct connectdata *conn, int fd, char *from, int length)
 {
   int bytes;
   void *buf;
-  bytes = (*mech->encode)(conn->app_data, from, length, conn->data_prot, &buf, conn);
+  bytes = (conn->mech->encode)(conn->app_data, from, length, conn->data_prot,
+                               &buf, conn);
   bytes = htonl(bytes);
   block_write(fd, &bytes, sizeof(bytes));
   block_write(fd, buf, ntohl(bytes));
   free(buf);
   return length;
 }
 
 int
-sec_fflush(struct connectdata *conn, FILE *F)
-{
-  if(conn->data_prot != prot_clear) {
-    if(conn->out_buffer.index > 0){
-      sec_write(conn, fileno(F),
-                conn->out_buffer.data, conn->out_buffer.index);
-      conn->out_buffer.index = 0;
-    }
-    sec_send(conn, fileno(F), NULL, 0);
-  }
-  fflush(F);
-  return 0;
-}
-
-int
-sec_fflush_fd(struct connectdata *conn, int fd)
+Curl_sec_fflush_fd(struct connectdata *conn, int fd)
 {
   if(conn->data_prot != prot_clear) {
     if(conn->out_buffer.index > 0){
-      sec_write(conn, fd,
+      Curl_sec_write(conn, fd,
                 conn->out_buffer.data, conn->out_buffer.index);
       conn->out_buffer.index = 0;
     }
     sec_send(conn, fd, NULL, 0);
   }
   return 0;
 }
 
 int
-sec_write(struct connectdata *conn, int fd, char *buffer, int length)
+Curl_sec_write(struct connectdata *conn, int fd, char *buffer, int length)
 {
   int len = conn->buffer_size;
   int tx = 0;
       
   if(conn->data_prot == prot_clear)
     return write(fd, buffer, length);
 
-  len -= (*mech->overhead)(conn->app_data, conn->data_prot, len);
+  len -= (conn->mech->overhead)(conn->app_data, conn->data_prot, len);
   while(length){
     if(length < len)
       len = length;
     sec_send(conn, fd, buffer, len);
     length -= len;
     buffer += len;
     tx += len;
   }
   return tx;
 }
 
 int
-sec_vfprintf2(struct connectdata *conn, FILE *f, const char *fmt, va_list ap)
+Curl_sec_vfprintf2(struct connectdata *conn, FILE *f, const char *fmt, va_list ap)
 {
   char *buf;
   int ret;
   if(conn->data_prot == prot_clear)
     return vfprintf(f, fmt, ap);
   else {
@@ -335,48 +290,48 @@
     free(buf);
     return ret;
   }
 }
 
 int
-sec_fprintf2(struct connectdata *conn, FILE *f, const char *fmt, ...)
+Curl_sec_fprintf2(struct connectdata *conn, FILE *f, const char *fmt, ...)
 {
     int ret;
     va_list ap;
     va_start(ap, fmt);
-    ret = sec_vfprintf2(conn, f, fmt, ap);
+    ret = Curl_sec_vfprintf2(conn, f, fmt, ap);
     va_end(ap);
     return ret;
 }
 
 int
-sec_putc(struct connectdata *conn, int c, FILE *F)
+Curl_sec_putc(struct connectdata *conn, int c, FILE *F)
 {
   char ch = c;
   if(conn->data_prot == prot_clear)
     return putc(c, F);
     
   buffer_write(&conn->out_buffer, &ch, 1);
   if(c == '\n' || conn->out_buffer.index >= 1024 /* XXX */) {
-    sec_write(conn, fileno(F), conn->out_buffer.data, conn->out_buffer.index);
+    Curl_sec_write(conn, fileno(F), conn->out_buffer.data, conn->out_buffer.index);
     conn->out_buffer.index = 0;
   }
   return c;
 }
 
 int
-sec_read_msg(struct connectdata *conn, char *s, int level)
+Curl_sec_read_msg(struct connectdata *conn, char *s, int level)
 {
     int len;
     char *buf;
     int code;
     
     buf = malloc(strlen(s));
     len = Curl_base64_decode(s + 4, buf); /* XXX */
     
-    len = (*mech->decode)(conn->app_data, buf, len, level, conn);
+    len = (conn->mech->decode)(conn->app_data, buf, len, level, conn);
     if(len < 0)
 	return -1;
     
     buf[len] = '\0';
 
     if(buf[3] == '-')
@@ -389,281 +344,205 @@
     free(buf);
     return code;
 }
 
 /* modified to return how many bytes written, or -1 on error ***/
 int
-sec_vfprintf(struct connectdata *conn, FILE *f, const char *fmt, va_list ap)
+Curl_sec_vfprintf(struct connectdata *conn, FILE *f, const char *fmt, va_list ap)
 {
     int ret = 0;
     char *buf;
     void *enc;
     int len;
     if(!conn->sec_complete)
 	return vfprintf(f, fmt, ap);
     
     buf = aprintf(fmt, ap);
-    len = (*mech->encode)(conn->app_data, buf, strlen(buf),
-                          conn->command_prot, &enc,
-			  conn);
+    len = (conn->mech->encode)(conn->app_data, buf, strlen(buf),
+                               conn->command_prot, &enc,
+                               conn);
     free(buf);
     if(len < 0) {
 	failf(conn->data, "Failed to encode command.\n");
 	return -1;
     }
     if(Curl_base64_encode(enc, len, &buf) < 0){
       failf(conn->data, "Out of memory base64-encoding.\n");
       return -1;
     }
-#ifdef FTP_SERVER
-    if(command_prot == prot_safe)
-	fprintf(f, "631 %s\r\n", buf);
-    else if(command_prot == prot_private)
-	fprintf(f, "632 %s\r\n", buf);
-    else if(command_prot == prot_confidential)
-	fprintf(f, "633 %s\r\n", buf);
-#else
     if(conn->command_prot == prot_safe)
 	ret = fprintf(f, "MIC %s", buf);
     else if(conn->command_prot == prot_private)
 	ret = fprintf(f, "ENC %s", buf);
     else if(conn->command_prot == prot_confidential)
 	ret = fprintf(f, "CONF %s", buf);
-#endif
+
     free(buf);
     return ret;
 }
 
 int
-sec_fprintf(struct connectdata *conn, FILE *f, const char *fmt, ...)
+Curl_sec_fprintf(struct connectdata *conn, FILE *f, const char *fmt, ...)
 {
     va_list ap;
     int ret;
     va_start(ap, fmt);
-    ret = sec_vfprintf(conn, f, fmt, ap);
+    ret = Curl_sec_vfprintf(conn, f, fmt, ap);
     va_end(ap);
     return ret;
 }
 
-/* end common stuff */
-
-#ifdef FTP_SERVER
-
-/* snip */
 
-#else /* FTP_SERVER */
-
-#if 0
-void
-sec_status(void)
+enum protection_level
+Curl_set_command_prot(struct connectdata *conn, enum protection_level level)
 {
-    if(conn->sec_complete){
-	printf("Using %s for authentication.\n", mech->name);
-	printf("Using %s command channel.\n", level_to_name(command_prot));
-	printf("Using %s data channel.\n", level_to_name(data_prot));
-	if(buffer_size > 0)
-	    printf("Protection buffer size: %lu.\n", 
-		   (unsigned long)buffer_size);
-    }else{
-	printf("Not using any security mechanism.\n");
-    }
+    enum protection_level old = conn->command_prot;
+    conn->command_prot = level;
+    return old;
 }
-#endif
 
 static int
 sec_prot_internal(struct connectdata *conn, int level)
 {
-    char *p;
-    unsigned int s = 1048576;
-    size_t nread;
-
-    if(!conn->sec_complete){
-      infof(conn->data, "No security data exchange has taken place.\n");
-      return -1;
-    }
+  char *p;
+  unsigned int s = 1048576;
+  ssize_t nread;
 
-    if(level){
-      Curl_ftpsendf(conn->firstsocket, conn,
-                    "PBSZ %u", s);
-      /* wait for feedback */
-      nread = Curl_GetFTPResponse(conn->firstsocket,
-                                  conn->data->buffer, conn, NULL);
-      if(nread < 0)
-        return /*CURLE_OPERATION_TIMEOUTED*/-1;
-      if(/*ret != COMPLETE*/conn->data->buffer[0] != '2'){
-        failf(conn->data, "Failed to set protection buffer size.\n");
-        return -1;
-      }
-      conn->buffer_size = s;
-      p = strstr(/*reply_string*/conn->data->buffer, "PBSZ=");
-      if(p)
-        sscanf(p, "PBSZ=%u", &s);
-      if(s < conn->buffer_size)
-        conn->buffer_size = s;
-    }
+  if(!conn->sec_complete){
+    infof(conn->data, "No security data exchange has taken place.\n");
+    return -1;
+  }
 
+  if(level){
     Curl_ftpsendf(conn->firstsocket, conn,
-                  "PROT %c", level["CSEP"]);
+                  "PBSZ %u", s);
     /* wait for feedback */
     nread = Curl_GetFTPResponse(conn->firstsocket,
                                 conn->data->buffer, conn, NULL);
     if(nread < 0)
       return /*CURLE_OPERATION_TIMEOUTED*/-1;
     if(/*ret != COMPLETE*/conn->data->buffer[0] != '2'){
-      failf(conn->data, "Failed to set protection level.\n");
+      failf(conn->data, "Failed to set protection buffer size.\n");
       return -1;
     }
-    
-    conn->data_prot = (enum protection_level)level;
-    return 0;
-}
-
-enum protection_level
-set_command_prot(struct connectdata *conn, enum protection_level level)
-{
-    enum protection_level old = conn->command_prot;
-    conn->command_prot = level;
-    return old;
-}
-
-#if 0
-void
-sec_prot(int argc, char **argv)
-{
-    int level = -1;
+    conn->buffer_size = s;
+    p = strstr(/*reply_string*/conn->data->buffer, "PBSZ=");
+    if(p)
+      sscanf(p, "PBSZ=%u", &s);
+    if(s < conn->buffer_size)
+      conn->buffer_size = s;
+  }
 
-    if(argc < 2 || argc > 3)
-	goto usage;
-    if(!sec_complete) {
-	printf("No security data exchange has taken place.\n");
-	code = -1;
-	return;
-    }
-    level = name_to_level(argv[argc - 1]);
-    
-    if(level == -1)
-	goto usage;
-    
-    if((*mech->check_prot)(conn->app_data, level)) {
-	printf("%s does not implement %s protection.\n", 
-	       mech->name, level_to_name(level));
-	code = -1;
-	return;
-    }
+  Curl_ftpsendf(conn->firstsocket, conn,
+                "PROT %c", level["CSEP"]);
+  /* wait for feedback */
+  nread = Curl_GetFTPResponse(conn->firstsocket,
+                              conn->data->buffer, conn, NULL);
+  if(nread < 0)
+    return /*CURLE_OPERATION_TIMEOUTED*/-1;
+  if(/*ret != COMPLETE*/conn->data->buffer[0] != '2'){
+    failf(conn->data, "Failed to set protection level.\n");
+    return -1;
+  }
     
-    if(argc == 2 || strncasecmp(argv[1], "data", strlen(argv[1])) == 0) {
-	if(sec_prot_internal(level) < 0){
-	    code = -1;
-	    return;
-	}
-    } else if(strncasecmp(argv[1], "command", strlen(argv[1])) == 0)
-	set_command_prot(level);
-    else
-	goto usage;
-    code = 0;
-    return;
- usage:
-    printf("usage: %s [command|data] [clear|safe|confidential|private]\n",
-	   argv[0]);
-    code = -1;
+  conn->data_prot = (enum protection_level)level;
+  return 0;
 }
-#endif
 
 void
-sec_set_protection_level(struct connectdata *conn)
+Curl_sec_set_protection_level(struct connectdata *conn)
 {
   if(conn->sec_complete && conn->data_prot != conn->request_data_prot)
     sec_prot_internal(conn, conn->request_data_prot);
 }
 
 
 int
-sec_request_prot(struct connectdata *conn, char *level)
+Curl_sec_request_prot(struct connectdata *conn, const char *level)
 {
   int l = name_to_level(level);
   if(l == -1)
     return -1;
   conn->request_data_prot = (enum protection_level)l;
   return 0;
 }
 
 int
-sec_login(struct connectdata *conn)
+Curl_sec_login(struct connectdata *conn)
 {
-    int ret;
-    struct sec_client_mech **m;
-    size_t nread;
-    struct UrlData *data=conn->data;
-
-    for(m = mechs; *m && (*m)->name; m++) {
-	void *tmp;
-
-	tmp = realloc(conn->app_data, (*m)->size);
-	if (tmp == NULL) {
-          failf (data, "realloc %u failed", (*m)->size);
-          return -1;
-	}
-	conn->app_data = tmp;
+  int ret;
+  struct Curl_sec_client_mech **m;
+  ssize_t nread;
+  struct UrlData *data=conn->data;
+
+  for(m = mechs; *m && (*m)->name; m++) {
+    void *tmp;
+
+    tmp = realloc(conn->app_data, (*m)->size);
+    if (tmp == NULL) {
+      failf (data, "realloc %u failed", (*m)->size);
+      return -1;
+    }
+    conn->app_data = tmp;
 	    
-	if((*m)->init && (*(*m)->init)(conn->app_data) != 0) {
-	    infof(data, "Skipping %s...\n", (*m)->name);
-	    continue;
-	}
-	infof(data, "Trying %s...\n", (*m)->name);
-	/*ret = command("AUTH %s", (*m)->name);***/
-	Curl_ftpsendf(conn->firstsocket, conn,
-                 "AUTH %s", (*m)->name);
-	/* wait for feedback */
-	nread = Curl_GetFTPResponse(conn->firstsocket,
-                                    conn->data->buffer, conn, NULL);
-	if(nread < 0)
-	    return /*CURLE_OPERATION_TIMEOUTED*/-1;
-	if(/*ret != CONTINUE*/conn->data->buffer[0] != '3'){
-	    if(/*code == 504*/strncmp(conn->data->buffer,"504",3) == 0) {
-		infof(data,
-                      "%s is not supported by the server.\n", (*m)->name);
-	    }
-            else if(/*code == 534*/strncmp(conn->data->buffer,"534",3) == 0) {
-              infof(data, "%s rejected as security mechanism.\n", (*m)->name);
-	    }
-            else if(/*ret == ERROR*/conn->data->buffer[0] == '5') {
-              infof(data, "The server doesn't support the FTP "
-                    "security extensions.\n");
-              return -1;
-	    }
-	    continue;
-	}
+    if((*m)->init && (*(*m)->init)(conn->app_data) != 0) {
+      infof(data, "Skipping %s...\n", (*m)->name);
+      continue;
+    }
+    infof(data, "Trying %s...\n", (*m)->name);
+    /*ret = command("AUTH %s", (*m)->name);***/
+    Curl_ftpsendf(conn->firstsocket, conn,
+                  "AUTH %s", (*m)->name);
+    /* wait for feedback */
+    nread = Curl_GetFTPResponse(conn->firstsocket,
+                                conn->data->buffer, conn, NULL);
+    if(nread < 0)
+      return /*CURLE_OPERATION_TIMEOUTED*/-1;
+    if(/*ret != CONTINUE*/conn->data->buffer[0] != '3'){
+      if(/*code == 504*/strncmp(conn->data->buffer,"504",3) == 0) {
+        infof(data,
+              "%s is not supported by the server.\n", (*m)->name);
+      }
+      else if(/*code == 534*/strncmp(conn->data->buffer,"534",3) == 0) {
+        infof(data, "%s rejected as security mechanism.\n", (*m)->name);
+      }
+      else if(/*ret == ERROR*/conn->data->buffer[0] == '5') {
+        infof(data, "The server doesn't support the FTP "
+              "security extensions.\n");
+        return -1;
+      }
+      continue;
+    }
 
-	ret = (*(*m)->auth)(conn->app_data, /*host***/conn);
+    ret = (*(*m)->auth)(conn->app_data, /*host***/conn);
 	
-	if(ret == AUTH_CONTINUE)
-          continue;
-	else if(ret != AUTH_OK){
-          /* mechanism is supposed to output error string */
-	    return -1;
-	}
-	mech = *m;
-	conn->sec_complete = 1;
-	conn->command_prot = prot_safe;
-	break;
+    if(ret == AUTH_CONTINUE)
+      continue;
+    else if(ret != AUTH_OK){
+      /* mechanism is supposed to output error string */
+      return -1;
     }
+    conn->mech = *m;
+    conn->sec_complete = 1;
+    conn->command_prot = prot_safe;
+    break;
+  }
     
-    return *m == NULL;
+  return *m == NULL;
 }
 
 void
-sec_end(struct connectdata *conn)
+Curl_sec_end(struct connectdata *conn)
 {
-    if (mech != NULL) {
-	if(mech->end)
-	    (*mech->end)(conn->app_data);
-	memset(conn->app_data, 0, mech->size);
-	free(conn->app_data);
-	conn->app_data = NULL;
-    }
-    conn->sec_complete = 0;
-    conn->data_prot = (enum protection_level)0;
+  if (conn->mech != NULL) {
+    if(conn->mech->end)
+      (conn->mech->end)(conn->app_data);
+    memset(conn->app_data, 0, conn->mech->size);
+    free(conn->app_data);
+    conn->app_data = NULL;
+  }
+  conn->sec_complete = 0;
+  conn->data_prot = (enum protection_level)0;
+  conn->mech=NULL;
 }
 
-#endif /* FTP_SERVER */
-
 #endif /* KRB4 */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/security.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/security.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/security.h	2000-09-26 06:15:56.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/security.h	2001-08-17 18:14:06.000000000 +0800
@@ -1,134 +1,72 @@
-/* modified by Martin Hedenfalk <mhe@stacken.kth.se> for use in Curl
- * last modified 2000-09-18
- */
-
-/*
- * Copyright (c) 1998, 1999 Kungliga Tekniska Högskolan
- * (Royal Institute of Technology, Stockholm, Sweden). 
- * All rights reserved. 
+#ifndef __SECURITY_H
+#define __SECURITY_H
+/*****************************************************************************
+ *                                  _   _ ____  _     
+ *  Project                     ___| | | |  _ \| |    
+ *                             / __| | | | |_) | |    
+ *                            | (__| |_| |  _ <| |___ 
+ *                             \___|\___/|_| \_\_____|
  *
- * Redistribution and use in source and binary forms, with or without 
- * modification, are permitted provided that the following conditions 
- * are met: 
+ * Copyright (C) 2001, Daniel Stenberg, <daniel@haxx.se>, et al.
  *
- * 1. Redistributions of source code must retain the above copyright 
- *    notice, this list of conditions and the following disclaimer. 
+ * In order to be useful for every potential user, curl and libcurl are
+ * dual-licensed under the MPL and the MIT/X-derivate licenses.
  *
- * 2. Redistributions in binary form must reproduce the above copyright 
- *    notice, this list of conditions and the following disclaimer in the 
- *    documentation and/or other materials provided with the distribution. 
+ * You may opt to use, copy, modify, merge, publish, distribute and/or sell
+ * copies of the Software, and permit persons to whom the Software is
+ * furnished to do so, under the terms of the MPL or the MIT/X-derivate
+ * licenses. You may pick one of these licenses.
  *
- * 3. Neither the name of the Institute nor the names of its contributors 
- *    may be used to endorse or promote products derived from this software 
- *    without specific prior written permission. 
+ * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
+ * KIND, either express or implied.
  *
- * THIS SOFTWARE IS PROVIDED BY THE INSTITUTE AND CONTRIBUTORS ``AS IS'' AND 
- * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
- * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
- * ARE DISCLAIMED.  IN NO EVENT SHALL THE INSTITUTE OR CONTRIBUTORS BE LIABLE 
- * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL 
- * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS 
- * OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) 
- * HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT 
- * LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY 
- * OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF 
- * SUCH DAMAGE. 
- */
+ * $Id: security.h,v 1.5 2001/08/17 10:14:06 bagder Exp $
+ *****************************************************************************/
 
-/* $Id: security.h,v 1.2 2000/09/25 22:15:56 bagder Exp $ */
-
-#ifndef __security_h__
-#define __security_h__
+/* this is a re-write */
 
 #include <stdarg.h>
 #include "urldata.h"  /* for struct connectdata * */
 
-struct sec_client_mech {
-    char *name;
-    size_t size;
-    int (*init)(void *);
-    int (*auth)(void *, struct connectdata *);
-    void (*end)(void *);
-    int (*check_prot)(void *, int);
-    int (*overhead)(void *, int, int);
-    int (*encode)(void *, void*, int, int, void**, struct connectdata *);
-    int (*decode)(void *, void*, int, int, struct connectdata *);
+struct Curl_sec_client_mech {
+  const char *name;
+  size_t size;
+  int (*init)(void *);
+  int (*auth)(void *, struct connectdata *);
+  void (*end)(void *);
+  int (*check_prot)(void *, int);
+  int (*overhead)(void *, int, int);
+  int (*encode)(void *, void*, int, int, void**, struct connectdata *);
+  int (*decode)(void *, void*, int, int, struct connectdata *);
 };
 
-struct sec_server_mech {
-    char *name;
-    size_t size;
-    int (*init)(void *);
-    void (*end)(void *);
-    int (*check_prot)(void *, int);
-    int (*overhead)(void *, int, int);
-    int (*encode)(void *, void*, int, int, void**);
-    int (*decode)(void *, void*, int, int);
-
-    int (*auth)(void *);
-    int (*adat)(void *, void*, size_t);
-    size_t (*pbsz)(void *, size_t);
-    int (*ccc)(void*);
-    int (*userok)(void*, char*);
-};
 
 #define AUTH_OK		0
 #define AUTH_CONTINUE	1
 #define AUTH_ERROR	2
 
-#ifdef FTP_SERVER
-extern struct sec_server_mech krb4_server_mech, gss_server_mech;
-#else
-extern struct sec_client_mech krb4_client_mech, gss_client_mech;
-#endif
+extern struct Curl_sec_client_mech Curl_krb4_client_mech;
 
-extern int sec_complete;
-
-#ifdef FTP_SERVER
-extern char *ftp_command;
-void new_ftp_command(char*);
-void delete_ftp_command(void);
-#endif
+int Curl_sec_fflush_fd(struct connectdata *conn, int fd);
+int Curl_sec_fprintf (struct connectdata *, FILE *, const char *, ...);
+int Curl_sec_getc (struct connectdata *conn, FILE *);
+int Curl_sec_putc (struct connectdata *conn, int, FILE *);
+int Curl_sec_read (struct connectdata *conn, int, void *, int);
+int Curl_sec_read_msg (struct connectdata *conn, char *, int);
+
+int Curl_sec_vfprintf(struct connectdata *, FILE *, const char *, va_list);
+int Curl_sec_fprintf2(struct connectdata *conn, FILE *f, const char *fmt, ...);
+int Curl_sec_vfprintf2(struct connectdata *conn, FILE *, const char *, va_list);
+int Curl_sec_write (struct connectdata *conn, int, char *, int);
+
+void Curl_sec_end (struct connectdata *);
+int Curl_sec_login (struct connectdata *);
+void Curl_sec_prot (int, char **);
+int Curl_sec_request_prot (struct connectdata *conn, const char *level);
+void Curl_sec_set_protection_level(struct connectdata *conn);
+void Curl_sec_status (void);
 
-/* ---- */
-
-
-int sec_fflush (struct connectdata *conn, FILE *);
-int sec_fflush_fd(struct connectdata *conn, int fd);
-int sec_fprintf (struct connectdata *, FILE *, const char *, ...);
-int sec_getc (struct connectdata *conn, FILE *);
-int sec_putc (struct connectdata *conn, int, FILE *);
-int sec_read (struct connectdata *conn, int, void *, int);
-int sec_read_msg (struct connectdata *conn, char *, int);
-
-int sec_vfprintf(struct connectdata *, FILE *, const char *, va_list);
-int sec_fprintf2(struct connectdata *conn, FILE *f, const char *fmt, ...);
-int sec_vfprintf2(struct connectdata *conn, FILE *, const char *, va_list);
-int sec_write (struct connectdata *conn, int, char *, int);
-
-#ifdef FTP_SERVER
-void adat (char *);
-void auth (char *);
-void ccc (void);
-void mec (char *, enum protection_level);
-void pbsz (int);
-void prot (char *);
-void delete_ftp_command (void);
-void new_ftp_command (char *);
-int sec_userok (char *);
-int secure_command (void);
-enum protection_level get_command_prot(void);
-#else
-void sec_end (struct connectdata *);
-int sec_login (struct connectdata *);
-void sec_prot (int, char **);
-int sec_request_prot (struct connectdata *conn, char *);
-void sec_set_protection_level(struct connectdata *conn);
-void sec_status (void);
-
-enum protection_level set_command_prot(struct connectdata *,
-                                       enum protection_level);
+enum protection_level Curl_set_command_prot(struct connectdata *,
+                                            enum protection_level);
 
 #endif
-
-#endif /* __security_h__ */  
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/sendf.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/sendf.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/sendf.c	2001-05-31 21:50:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/sendf.c	2001-08-17 18:14:06.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: sendf.c,v 1.24 2001/05/31 13:50:28 bagder Exp $
+ * $Id: sendf.c,v 1.27 2001/08/17 10:14:06 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 #include <stdio.h>
 #include <stdarg.h>
@@ -119,13 +119,13 @@
 	} while (next);
 }
 
 
 /* Curl_infof() is for info message along the way */
 
-void Curl_infof(struct UrlData *data, char *fmt, ...)
+void Curl_infof(struct UrlData *data, const char *fmt, ...)
 {
   va_list ap;
   if(data->bits.verbose) {
     va_start(ap, fmt);
     fputs("* ", data->err);
     vfprintf(data->err, fmt, ap);
@@ -133,24 +133,24 @@
   }
 }
 
 /* Curl_failf() is for messages stating why we failed, the LAST one will be
    returned for the user (if requested) */
 
-void Curl_failf(struct UrlData *data, char *fmt, ...)
+void Curl_failf(struct UrlData *data, const char *fmt, ...)
 {
   va_list ap;
   va_start(ap, fmt);
   if(data->errorbuffer)
     vsnprintf(data->errorbuffer, CURL_ERROR_SIZE, fmt, ap);
   va_end(ap);
 }
 
 /* Curl_sendf() sends formated data to the server */
 size_t Curl_sendf(int sockfd, struct connectdata *conn,
-                  char *fmt, ...)
+                  const char *fmt, ...)
 {
   struct UrlData *data = conn->data;
   size_t bytes_written;
   char *s;
   va_list ap;
   va_start(ap, fmt);
@@ -178,27 +178,33 @@
                     void *mem, size_t len,
                     size_t *written)
 {
   size_t bytes_written;
 
 #ifdef USE_SSLEAY
+  /* SSL_write() is said to return 'int' while write() and send() returns
+     'size_t' */
+  int ssl_bytes;
   if (conn->ssl.use) {
     int loop=100; /* just a precaution to never loop endlessly */
     while(loop--) {
-      bytes_written = SSL_write(conn->ssl.handle, mem, len);
-      if((-1 != bytes_written) ||
+      ssl_bytes = SSL_write(conn->ssl.handle, mem, len);
+      if((0 >= ssl_bytes) ||
          (SSL_ERROR_WANT_WRITE != SSL_get_error(conn->ssl.handle,
-                                                bytes_written) ))
+                                                ssl_bytes) )) {
+        /* this converts from signed to unsigned... */
+        bytes_written = ssl_bytes;
         break;
+      }
     }
   }
   else {
 #endif
 #ifdef KRB4
     if(conn->sec_complete) {
-      bytes_written = sec_write(conn, sockfd, mem, len);
+      bytes_written = Curl_sec_write(conn, sockfd, mem, len);
     }
     else
 #endif /* KRB4 */
       bytes_written = swrite(sockfd, mem, len);
 #ifdef USE_SSLEAY
   }
@@ -227,13 +233,14 @@
     wrote = data->fwrite(ptr, 1, len, data->out);
     if(wrote != len) {
       failf (data, "Failed writing body");
       return CURLE_WRITE_ERROR;
     }
   }
-  if((type & CLIENTWRITE_HEADER) && data->writeheader) {
+  if((type & CLIENTWRITE_HEADER) &&
+     (data->fwrite_header || data->writeheader) ) {
     /*
      * Write headers to the same callback or to the especially setup
      * header callback function (added after version 7.7.1).
      */
     curl_write_callback writeit=
       data->fwrite_header?data->fwrite_header:data->fwrite;
@@ -270,13 +277,13 @@
     }
   }
   else {
 #endif
 #ifdef KRB4
     if(conn->sec_complete)
-      nread = sec_read(conn, sockfd, buf, buffersize);
+      nread = Curl_sec_read(conn, sockfd, buf, buffersize);
     else
 #endif
       nread = sread (sockfd, buf, buffersize);
 #ifdef USE_SSLEAY
   }
 #endif /* USE_SSLEAY */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/sendf.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/sendf.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/sendf.h	2001-01-31 21:54:13.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/sendf.h	2001-08-14 16:34:55.000000000 +0800
@@ -17,26 +17,26 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: sendf.h,v 1.11 2001/01/31 13:54:13 bagder Exp $
+ * $Id: sendf.h,v 1.12 2001/08/14 08:34:55 bagder Exp $
  *****************************************************************************/
 
-size_t Curl_sendf(int fd, struct connectdata *, char *fmt, ...);
-void Curl_infof(struct UrlData *, char *fmt, ...);
-void Curl_failf(struct UrlData *, char *fmt, ...);
+size_t Curl_sendf(int fd, struct connectdata *, const char *fmt, ...);
+void Curl_infof(struct UrlData *, const char *fmt, ...);
+void Curl_failf(struct UrlData *, const char *fmt, ...);
 
 #define infof Curl_infof
 #define failf Curl_failf
 
 struct send_buffer {
   char *buffer;
-  long size_max;
-  long size_used;
+  size_t size_max;
+  size_t size_used;
 };
 typedef struct send_buffer send_buffer;
 
 #define CLIENTWRITE_BODY   1
 #define CLIENTWRITE_HEADER 2
 #define CLIENTWRITE_BOTH   (CLIENTWRITE_BODY|CLIENTWRITE_HEADER)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/setup.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/setup.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/setup.h	2001-05-31 15:01:08.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/setup.h	2001-08-06 20:27:28.000000000 +0800
@@ -17,25 +17,31 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: setup.h,v 1.11 2001/05/31 07:01:08 bagder Exp $
+ * $Id: setup.h,v 1.12 2001/08/06 12:27:28 bagder Exp $
  *****************************************************************************/
 
 
 
 #if !defined(WIN32) && defined(_WIN32)
 /* This _might_ be a good Borland fix. Please report whether this works or
    not! */
 #define WIN32
 #endif
 
 #ifdef HAVE_CONFIG_H
+
+#ifdef VMS
+#include "config-vms.h"
+#else
 #include "config.h" /* the configure script results */
+#endif
+
 #else
 #ifdef WIN32
 /* include the hand-modified win32 adjusted config.h! */
 #include "../config-win32.h"
 #endif
 #endif
@@ -76,13 +82,17 @@
      defined SSLeay usage */
 #define USE_SSLEAY 1
 #define USE_OPENSSL 1
 #endif
 
 #ifndef STDC_HEADERS /* no standard C headers! */
+#ifdef	VMS
+#include "../include/curl/stdcheaders.h"
+#else
 #include "curl/stdcheaders.h"
+#endif
 #else
 #ifdef _AIX
 #include "curl/stdcheaders.h"
 #endif
 #endif
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/ssluse.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/ssluse.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/ssluse.c	2001-05-30 16:00:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/ssluse.c	2001-08-14 16:36:30.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: ssluse.c,v 1.22 2001/05/30 08:00:29 bagder Exp $
+ * $Id: ssluse.c,v 1.26 2001/08/14 08:36:30 bagder Exp $
  *****************************************************************************/
 
 /*
  * The original SSL code was written by
  * Linas Vepstas <linas@linas.org> and Sampo Kellomaki <sampo@iki.fi>
  */
@@ -39,39 +39,50 @@
 
 /* The last #include file should be: */
 #ifdef MALLOCDEBUG
 #include "memdebug.h"
 #endif
 
+#if OPENSSL_VERSION_NUMBER >= 0x00904100L
+#define HAVE_USERDATA_IN_PWD_CALLBACK 1
+#else
+#undef HAVE_USERDATA_IN_PWD_CALLBACK
+#endif
+
+#ifndef HAVE_USERDATA_IN_PWD_CALLBACK
 static char global_passwd[64];
+#endif
 
 static int passwd_callback(char *buf, int num, int verify
-#if OPENSSL_VERSION_NUMBER >= 0x00904100L
+#if HAVE_USERDATA_IN_PWD_CALLBACK
                            /* This was introduced in 0.9.4, we can set this
                               using SSL_CTX_set_default_passwd_cb_userdata()
                               */
-                           , void *userdata
+                           , void *global_passwd
 #endif
                            )
 {
   if(verify)
     fprintf(stderr, "%s\n", buf);
   else {
-    if(num > strlen(global_passwd)) {
+    if(num > (int)strlen((char *)global_passwd)) {
       strcpy(buf, global_passwd);
       return strlen(buf);
     }
   }  
   return 0;
 }
 
 static
 bool seed_enough(struct connectdata *conn, /* unused for now */
                  int nread)
 {
+  conn = NULL; /* to prevent compiler warnings */
 #ifdef HAVE_RAND_STATUS
+  nread = 0; /* to prevent compiler warnings */
+
   /* only available in OpenSSL 0.9.5a and later */
   if(RAND_status())
     return TRUE;
 #else
   if(nread > 500)
     /* this is a very silly decision to make */
@@ -168,17 +179,24 @@
   struct UrlData *data = conn->data;
   if (cert_file != NULL) {
     SSL *ssl;
     X509 *x509;
 
     if(data->cert_passwd) {
+#ifndef HAVE_USERDATA_IN_PWD_CALLBACK
       /*
        * If password has been given, we store that in the global
        * area (*shudder*) for a while:
        */
       strcpy(global_passwd, data->cert_passwd);
+#else
+      /*
+       * We set the password in the callback userdata
+       */
+      SSL_CTX_set_default_passwd_cb_userdata(conn->ssl.ctx, data->cert_passwd);
+#endif
       /* Set passwd callback: */
       SSL_CTX_set_default_passwd_cb(conn->ssl.ctx, passwd_callback);
     }
 
     if (SSL_CTX_use_certificate_file(conn->ssl.ctx,
 				     cert_file,
@@ -211,15 +229,16 @@
     /* Now we know that a key and cert have been set against
      * the SSL context */
     if (!SSL_CTX_check_private_key(conn->ssl.ctx)) {
       failf(data, "Private key does not match the certificate public key\n");
       return(0);
     }
-    
+#ifndef HAVE_USERDATA_IN_PWD_CALLBACK    
     /* erase it now */
     memset(global_passwd, 0, sizeof(global_passwd));
+#endif
   }
   return(1);
 }
 
 static
 int cert_verify_callback(int ok, X509_STORE_CTX *ctx)
@@ -227,13 +246,13 @@
   X509 *err_cert;
   char buf[256];
 
   err_cert=X509_STORE_CTX_get_current_cert(ctx);
   X509_NAME_oneline(X509_get_subject_name(err_cert),buf,256);
 
-  return 1;
+  return ok;
 }
 
 #endif
 
 #ifdef USE_SSLEAY
 /* "global" init done? */
@@ -313,13 +332,13 @@
     failf(data, "SSL: couldn't create a context!");
     return CURLE_OUT_OF_MEMORY;
   }
     
   if(data->cert) {
     if (!cert_stuff(conn, data->cert, data->cert)) {
-      failf(data, "couldn't use certificate!\n");
+      /* failf() is already done in cert_stuff() */
       return CURLE_SSL_CONNECT_ERROR;
     }
   }
 
   if(data->ssl.verifypeer){
     SSL_CTX_set_verify(conn->ssl.ctx,
@@ -371,34 +390,60 @@
   infof (data, "Server certificate:\n");
   
   str = X509_NAME_oneline (X509_get_subject_name (conn->ssl.server_cert),
                            NULL, 0);
   if(!str) {
     failf(data, "SSL: couldn't get X509-subject!");
+    X509_free(conn->ssl.server_cert);
     return CURLE_SSL_CONNECT_ERROR;
   }
   infof(data, "\t subject: %s\n", str);
   CRYPTO_free(str);
 
+  if (data->ssl.verifyhost) {
+    char peer_CN[257];
+    if (X509_NAME_get_text_by_NID(X509_get_subject_name(conn->ssl.server_cert), NID_commonName, peer_CN, sizeof(peer_CN)) < 0) {
+      failf(data, "SSL: unable to obtain common name from peer certificate");
+      X509_free(conn->ssl.server_cert);
+      return CURLE_SSL_PEER_CERTIFICATE;
+    }
+
+    if (strcasecmp(peer_CN, conn->hostname) != 0) {
+      if (data->ssl.verifyhost > 1) {
+        failf(data, "SSL: certificate subject name '%s' does not match target host name '%s'",
+            peer_CN, conn->hostname);
+        X509_free(conn->ssl.server_cert);
+        return CURLE_SSL_PEER_CERTIFICATE;
+      }
+      else
+        infof(data, "\t common name: %s (does not match '%s')\n", peer_CN, conn->hostname);
+    }
+    else
+      infof(data, "\t common name: %s (matched)\n", peer_CN);
+  }
+
   str = X509_NAME_oneline (X509_get_issuer_name  (conn->ssl.server_cert),
                            NULL, 0);
   if(!str) {
     failf(data, "SSL: couldn't get X509-issuer name!");
+    X509_free(conn->ssl.server_cert);
     return CURLE_SSL_CONNECT_ERROR;
   }
   infof(data, "\t issuer: %s\n", str);
   CRYPTO_free(str);
 
   /* We could do all sorts of certificate verification stuff here before
      deallocating the certificate. */
 
   if(data->ssl.verifypeer) {
     data->ssl.certverifyresult=SSL_get_verify_result(conn->ssl.handle);
-    failf(data, "SSL certificate verify result: %d\n",
-          data->ssl.certverifyresult);
-    retcode = CURLE_SSL_PEER_CERTIFICATE;
+    if (data->ssl.certverifyresult != X509_V_OK) {
+      failf(data, "SSL certificate verify result: %d\n",
+            data->ssl.certverifyresult);
+      retcode = CURLE_SSL_PEER_CERTIFICATE;
+    }
   }
   else
     data->ssl.certverifyresult=0;
 
   X509_free(conn->ssl.server_cert);
 #else /* USE_SSLEAY */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/telnet.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/telnet.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/telnet.c	2001-03-16 23:21:44.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/telnet.c	2001-08-14 16:38:08.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: telnet.c,v 1.19 2001/03/16 15:19:36 bagder Exp $
+ * $Id: telnet.c,v 1.20 2001/08/14 08:38:08 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -215,14 +215,14 @@
   }
 }
 
 static void printoption(struct UrlData *data,
 			const char *direction, int cmd, int option)
 {
-  char *fmt;
-  char *opt;
+  const char *fmt;
+  const char *opt;
    
   if (data->bits.verbose)
   {
     if (cmd == IAC)
     {
       if (TELCMD_OK(option))
@@ -840,13 +840,13 @@
                "%c%c%c%c", IAC, SB, TELOPT_NEW_ENVIRON, TELQUAL_IS);
       len = 4;
 
       for(v = tn->telnet_vars;v;v = v->next) {
         tmplen = (strlen(v->data) + 1);
         /* Add the variable only if it fits */
-        if(len + tmplen < sizeof(temp)-6) {
+        if(len + tmplen < (int)sizeof(temp)-6) {
           sscanf(v->data, "%127[^,],%s", varname, varval);
           snprintf((char *)&temp[len], sizeof(temp) - len,
                    "%c%s%c%s", NEW_ENV_VAR, varname,
                    NEW_ENV_VALUE, varval);
           len += tmplen;
         }
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/transfer.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/transfer.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/transfer.c	2001-05-23 05:09:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/transfer.c	2001-08-15 14:53:10.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: transfer.c,v 1.43 2001/05/22 21:09:09 bagder Exp $
+ * $Id: transfer.c,v 1.49 2001/08/15 06:53:10 bagder Exp $
  *****************************************************************************/
 
 #include "setup.h"
 
 /* -- WIN32 approved -- */
 #include <stdio.h>
@@ -87,12 +87,14 @@
 #include "sendf.h"
 #include "speedcheck.h"
 #include "getpass.h"
 #include "progress.h"
 #include "getdate.h"
 #include "http.h"
+#include "url.h"
+#include "getinfo.h"
 
 #define _MPRINTF_REPLACE /* use our functions only */
 #include <curl/mprintf.h>
 
 /* The last #include file should be: */
 #ifdef MALLOCDEBUG
@@ -108,14 +110,14 @@
  *
  * Returns TRUE if 'headerline' contains the 'header' with given 'content'.
  * Pass headers WITH the colon.
  */
 static bool
 compareheader(char *headerline, /* line to check */
-              char *header,     /* header keyword _with_ colon */
-              char *content)    /* content string to find */
+              const char *header,     /* header keyword _with_ colon */
+              const char *content)    /* content string to find */
 {
   /* RFC2616, section 4.2 says: "Each header field consists of a name followed
    * by a colon (":") and the field value. Field names are case-insensitive.
    * The field value MAY be preceded by any amount of LWS, though a single SP
    * is preferred." */
 
@@ -169,13 +171,13 @@
  * That buffer can be enlarged on demand, but it is never shrinken again.
  *
  * Parts of this function was once written by the friendly Mark Butler
  * <butlerm@xmission.com>.
  */
 
-CURLcode static
+static CURLcode
 Transfer(struct connectdata *c_conn)
 {
   ssize_t nread;                /* number of bytes read */
   int bytecount = 0;            /* total number of bytes read */
   int writebytecount = 0;       /* number of bytes written */
   long contentlength=0;         /* size of incoming data */
@@ -191,13 +193,13 @@
   char *end_ptr;		/* within buf */
   char *p;			/* within headerbuff */
   bool content_range = FALSE;	/* set TRUE if Content-Range: was found */
   int offset = 0;		/* possible resume offset read from the
                                    Content-Range: header */
   int httpcode = 0;		/* error code from the 'HTTP/1.? XXX' line */
-  int httpversion = -1;         /* the last digit in the HTTP/1.1 string */
+  int httpversion = -1;			/* the HTTP version*10 */
 
   /* for the low speed checks: */
   CURLcode urg;
   time_t timeofdoc=0;
   long bodywrites=0;
   int writetype;
@@ -299,12 +301,13 @@
             buf[nread] = 0;
 
           /* if we receive 0 or less here, the server closed the connection and
              we bail out from this! */
           else if (0 >= (signed int) nread) {
             keepon &= ~KEEP_READ;
+            FD_ZERO(&rkeepfd);
             break;
           }
 
           str = buf;		/* Default buffer to use when we write the
                                    buffer, it may be changed in the flow below
                                    before the actual storing is done. */
@@ -461,14 +464,27 @@
                * Checks for special headers coming up.
                */
               
               if (!headerline++) {
                 /* This is the first header, it MUST be the error code line
                    or else we consiser this to be the body right away! */
-                if (2 == sscanf (p, " HTTP/1.%d %3d", &httpversion,
-                                 &httpcode)) {
+                int httpversion_major;
+                int nc=sscanf (p, " HTTP/%d.%d %3d",
+                               &httpversion_major ,&httpversion, &httpcode);
+                if (nc==3) {
+                  httpversion+=10*httpversion_major;
+                }
+                else {
+                  /* this is the real world, not a Nirvana
+                     NCSA 1.5.x returns this crap when asked for HTTP/1.1
+                  */
+                  nc=sscanf (p, " HTTP %3d", &httpcode);
+                  httpversion = 10;
+                }
+
+                if (nc) {
                   data->progress.httpcode = httpcode;
                   data->progress.httpversion = httpversion;
 
                   /* 404 -> URL not found! */
                   if (
                       ( ((data->bits.http_follow_location) &&
@@ -481,13 +497,13 @@
                        here is the check for that: */
                     /* serious error, go home! */
                     failf (data, "The requested file was not found");
                     return CURLE_HTTP_NOT_FOUND;
                   }
 
-                  if(httpversion == 0)
+                  if(httpversion == 10)
                     /* Default action for HTTP/1.0 must be to close, unless
                        we get one of those fancy headers that tell us the
                        server keeps it open for us! */
                     conn->bits.close = TRUE;
 
                   if (httpcode == 304)
@@ -507,25 +523,25 @@
               /* check for Content-Length: header lines to get size */
               if (strnequal("Content-Length:", p, 15) &&
                   sscanf (p+15, " %ld", &contentlength)) {
                 conn->size = contentlength;
                 Curl_pgrsSetDownloadSize(data, contentlength);
               }
-              else if((httpversion == 0) &&
+              else if((httpversion == 10) &&
                       conn->bits.httpproxy &&
                       compareheader(p, "Proxy-Connection:", "keep-alive")) {
                 /*
                  * When a HTTP/1.0 reply comes when using a proxy, the
                  * 'Proxy-Connection: keep-alive' line tells us the
                  * connection will be kept alive for our pleasure.
                  * Default action for 1.0 is to close.
                  */
                 conn->bits.close = FALSE; /* don't close when done */
                 infof(data, "HTTP/1.0 proxy connection set to keep alive!\n");
               }
-              else if((httpversion == 0) &&
+              else if((httpversion == 10) &&
                       compareheader(p, "Connection:", "keep-alive")) {
                 /*
                  * A HTTP/1.0 reply with the 'Connection: keep-alive' line
                  * tells us the connection will be kept alive for our
                  * pleasure.  Default action for 1.0 is to close.
                  *
@@ -708,12 +724,13 @@
                 failf(data, "Receeived problem in the chunky parser");
                 return CURLE_READ_ERROR;
               }
               else if(CHUNKE_STOP == res) {
                 /* we're done reading chunks! */
                 keepon &= ~KEEP_READ; /* read no more */
+                FD_ZERO(&rkeepfd);
 
                 /* There are now possibly N number of bytes at the end of the
                    str buffer that weren't written to the client, but we don't
                    care about them right now. */
               }
               /* If it returned OK, we just keep going */
@@ -721,13 +738,15 @@
 
             if((-1 != conn->maxdownload) &&
                (bytecount + nread >= conn->maxdownload)) {
               nread = conn->maxdownload - bytecount;
               if((signed int)nread < 0 ) /* this should be unusual */
                 nread = 0;
+
               keepon &= ~KEEP_READ; /* we're done reading */
+              FD_ZERO(&rkeepfd);
             }
 
             bytecount += nread;
 
             Curl_pgrsSetDownloadCounter(data, (double)bytecount);
             
@@ -755,12 +774,13 @@
 
           /* the signed int typecase of nread of for systems that has
              unsigned size_t */
           if ((signed int)nread<=0) {
             /* done */
             keepon &= ~KEEP_WRITE; /* we're done writing */
+            FD_ZERO(&wkeepfd);
             break;
           }
           writebytecount += nread;
           Curl_pgrsSetUploadCounter(data, (double)writebytecount);            
 
           /* convert LF to CRLF if so asked */
@@ -779,13 +799,13 @@
           }
 
           /* write to socket */
           urg = Curl_write(conn, conn->writesockfd, buf, nread,
                            &bytes_written);
 
-          if(nread != bytes_written) {
+          if(nread != (int)bytes_written) {
             failf(data, "Failed uploading data");
             return CURLE_WRITE_ERROR;
           }
 
         }
 
@@ -841,27 +861,28 @@
   if(conn->writebytecountp)
     *conn->writebytecountp = writebytecount; /* write count */
 
   return CURLE_OK;
 }
 
-CURLcode Curl_perform(CURL *curl)
+CURLcode Curl_perform(struct UrlData *data)
 {
   CURLcode res;
-  struct UrlData *data = (struct UrlData *)curl;
   struct connectdata *conn=NULL;
   bool port=TRUE; /* allow data->use_port to set port to use */
   char *newurl = NULL; /* possibly a new URL to follow to! */
 
   if(!data->url)
     /* we can't do anything wihout URL */
     return CURLE_URL_MALFORMAT;
 
   data->followlocation=0; /* reset the location-follow counter */
   data->bits.this_is_a_follow = FALSE; /* reset this */
 
+  Curl_initinfo(data); /* reset session-specific information "variables" */
+
   Curl_pgrsStartNow(data);
 
   do {
     Curl_pgrsTime(data, TIMER_STARTSINGLE);
     res = Curl_connect(data, &conn, port);
     if(res == CURLE_OK) {
@@ -1038,16 +1059,14 @@
             302 status code may be used instead, since most user agents react
             to a 302 response as described here for 303.             
           */
         case 303: /* See Other */
           /* Disable both types of POSTs, since doing a second POST when
            * following isn't what anyone would want! */
-          data->bits.http_post = FALSE;
-          data->bits.http_formpost = FALSE;
-          data->httpreq = HTTPREQ_GET; /* enfore GET request */
-          infof(data, "Disables POST\n");
+          data->httpreq = HTTPREQ_GET; /* enforce GET request */
+          infof(data, "Disables POST, goes with GET\n");
           break;
         case 304: /* Not Modified */
           /* 304 means we did a conditional request and it was "Not modified".
            * We shouldn't get any Location: header in this response!
            */
           break;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/transfer.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/transfer.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/transfer.h	2001-05-11 19:38:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/transfer.h	2001-08-15 14:54:51.000000000 +0800
@@ -17,15 +17,15 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: transfer.h,v 1.3 2001/05/11 11:38:42 bagder Exp $
+ * $Id: transfer.h,v 1.4 2001/08/15 06:54:51 bagder Exp $
  *****************************************************************************/
-CURLcode Curl_perform(CURL *curl);
+CURLcode Curl_perform(struct UrlData *data);
 
 /* This sets up a forthcoming transfer */
 CURLcode 
 Curl_Transfer (struct connectdata *data,
                int sockfd,		/* socket to read from or -1 */
                int size,		/* -1 if unknown at this point */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/url.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/url.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/url.c	2001-06-07 13:59:20.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/url.c	2001-08-16 05:54:56.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: url.c,v 1.131 2001/06/07 05:59:20 bagder Exp $
+ * $Id: url.c,v 1.140 2001/08/15 21:54:24 bagder Exp $
  *****************************************************************************/
 
 /* -- WIN32 approved -- */
 
 #include "setup.h"
 
@@ -64,12 +64,18 @@
 #endif
 
 #ifdef HAVE_SYS_SELECT_H
 #include <sys/select.h>
 #endif
 
+#ifdef	VMS
+#include <in.h>
+#include <inet.h>
+#endif
+
+
 #ifndef HAVE_SELECT
 #error "We can't compile without select() support!"
 #endif
 #ifndef HAVE_SOCKET
 #error "We can't compile without socket() support!"
 #endif
@@ -97,12 +103,13 @@
 #include "ftp.h"
 #include "dict.h"
 #include "telnet.h"
 #include "http.h"
 #include "file.h"
 #include "ldap.h"
+#include "url.h"
 
 #include <curl/types.h>
 
 #define _MPRINTF_REPLACE /* use our functions only */
 #include <curl/mprintf.h>
 
@@ -133,16 +140,14 @@
   /* this is for "-ansi -Wall -pedantic" to stop complaining!   (rabe) */
   (void)signal;
   return;
 }
 #endif
 
-CURLcode Curl_close(CURL *curl)
+CURLcode Curl_close(struct UrlData *data)
 {
-  struct UrlData *data=(struct UrlData *)curl;
-  
   /* Loop through all open connections and kill them one by one */
   while(-1 != ConnectionKillOne(data));
 
   if(data->bits.proxystringalloc) {
     data->bits.proxystringalloc=FALSE;;
     free(data->proxy);
@@ -175,24 +180,26 @@
 
   free(data);
   return CURLE_OK;
 }
 
 static
-int my_getpass(void *clientp, char *prompt, char* buffer, int buflen )
+int my_getpass(void *clientp, const char *prompt, char* buffer, int buflen )
 {
   char *retbuf;
+  clientp=NULL; /* prevent compiler warning */
+
   retbuf = getpass_r(prompt, buffer, buflen);
   if(NULL == retbuf)
     return 1;
   else
     return 0; /* success */
 }
 
 
-CURLcode Curl_open(CURL **curl, char *url)
+CURLcode Curl_open(struct UrlData **curl)
 {
   /* We don't yet support specifying the URL at this point */
   struct UrlData *data;
 #ifdef HAVE_SIGACTION
   struct sigaction sigact;
 #endif
@@ -272,15 +279,14 @@
   }
 
   /* this is a very serious error */
   return CURLE_OUT_OF_MEMORY;
 }
 
-CURLcode Curl_setopt(CURL *curl, CURLoption option, ...)
+CURLcode Curl_setopt(struct UrlData *data, CURLoption option, ...)
 {
-  struct UrlData *data = curl;
   va_list param;
   char *cookiefile;
 
   va_start(param, option);
 
   switch(option) {
@@ -429,16 +435,16 @@
      * Transfer FTP using ASCII instead of BINARY.
      */
     data->bits.ftp_ascii = va_arg(param, long)?TRUE:FALSE;
     break;
   case CURLOPT_PUT:
     /*
-     * Use the HTTP PUT request to transfer data.
+     * Use the HTTP PUT request to transfer data if this is TRUE.  If this is
+     * FALSE, don't set the httpreq. We can't know what to revert it to!
      */
-    data->bits.http_put = va_arg(param, long)?TRUE:FALSE;
-    if(data->bits.http_put)
+    if(va_arg(param, long))
       data->httpreq = HTTPREQ_PUT;
     break;
 #if 0
     /* obsolete stuff, kept here a while for informational purposes */
   case CURLOPT_MUTE:
     /*
@@ -477,15 +483,15 @@
     if(cookiefile) {
       data->cookies = Curl_cookie_init(cookiefile);
     }
     break;
   case CURLOPT_WRITEHEADER:
     /*
-     * Callback function for header data
+     * Custom pointer to pass the header write callback function
      */
-    data->writeheader = (FILE *)va_arg(param, FILE *);
+    data->writeheader = (void *)va_arg(param, void *);
     break;
   case CURLOPT_COOKIE:
     /*
      * Cookie string to send to the remote server in the request.
      */
     data->cookie = va_arg(param, char *);
@@ -526,16 +532,24 @@
     break;
   case CURLOPT_HTTPPOST:
     /*
      * Set to make us do HTTP POST
      */
     data->httppost = va_arg(param, struct HttpPost *);
-    data->bits.http_formpost = data->httppost?1:0;
-    if(data->bits.http_formpost)
+    if(data->httppost)
       data->httpreq = HTTPREQ_POST_FORM;
     break;
+
+  case CURLOPT_HTTPGET:
+    /*
+     * Set to force us do HTTP GET
+     */
+    if(va_arg(param, long))
+      data->httpreq = HTTPREQ_GET;
+    break;
+
   case CURLOPT_INFILE:
     /*
      * FILE pointer to read the file to be uploaded from. Or possibly
      * used as argument to the read callback.
      */
     data->in = va_arg(param, FILE *);
@@ -572,23 +586,22 @@
      * The port number to use when getting the URL
      */
     data->use_port = va_arg(param, long);
     break;
   case CURLOPT_POST:
     /* Does this option serve a purpose anymore? */
-    data->bits.http_post = va_arg(param, long)?TRUE:FALSE;
-    if(data->bits.http_post)
+
+    if(va_arg(param, long))
       data->httpreq = HTTPREQ_POST;
     break;
   case CURLOPT_POSTFIELDS:
     /*
      * A string with POST data. Makes curl HTTP POST.
      */
     data->postfields = va_arg(param, char *);
-    data->bits.http_post = data->postfields?TRUE:FALSE;
-    if(data->bits.http_post)
+    if(data->postfields)
       data->httpreq = HTTPREQ_POST;
     break;
   case CURLOPT_POSTFIELDSIZE:
     /*
      * The size of the POSTFIELD data, if curl should now do a strlen
      * to find out. Enables binary posts.
@@ -776,12 +789,18 @@
   case CURLOPT_SSL_VERIFYPEER:
     /*
      * Enable peer SSL verifying.
      */
     data->ssl.verifypeer = va_arg(param, long);
     break;
+  case CURLOPT_SSL_VERIFYHOST:
+    /*
+     * Enable verification of the CN contained in the peer certificate
+     */
+    data->ssl.verifyhost = va_arg(param, long);
+    break;
   case CURLOPT_CAINFO:
     /*
      * Set CA info for SSL connection. Specify file name of the CA certificate
      */
     data->ssl.CAfile = va_arg(param, char *);
     data->ssl.CApath = NULL; /*This does not work on windows.*/
@@ -931,13 +950,13 @@
  */
 static bool
 ConnectionExists(struct UrlData *data,
                  struct connectdata *needle,
                  struct connectdata **usethis)
 {
-  size_t i;
+  long i;
   struct connectdata *check;
 
   for(i=0; i< data->numconnects; i++) {
     /*
      * Note that if we use a HTTP proxy, we check connections to that
      * proxy and not to the actual remote server.
@@ -994,13 +1013,13 @@
  * should take the previously set policy into account when deciding which
  * of the connections to kill.
  */
 static int
 ConnectionKillOne(struct UrlData *data)
 {
-  size_t i;
+  long i;
   struct connectdata *conn;
   int highscore=-1;
   int connindex=-1;
   int score;
   CURLcode result;
   struct timeval now;
@@ -1060,13 +1079,13 @@
  * this call.
  */
 static unsigned int
 ConnectionStore(struct UrlData *data,
                 struct connectdata *conn)
 {
-  size_t i;
+  long i;
   for(i=0; i< data->numconnects; i++) {
     if(!data->connects[i])
       break;
   }
   if(i == data->numconnects) {
     /* there was no room available, kill one */
@@ -1419,18 +1438,40 @@
                   conn->path)) && strequal(conn->protostr, "file")) {
     /*
      * we deal with file://<host>/<path> differently since it supports no
      * hostname other than "localhost" and "127.0.0.1", which is unique among
      * the URL protocols specified in RFC 1738
      */
-
-    if (strnequal(conn->path, "localhost/", 10) ||
-        strnequal(conn->path, "127.0.0.1/", 10))
-      /* If there's another host name than the one we support, <host>/ is
-       * quietly ommitted */
-      strcpy(conn->path, &conn->path[10]);
+    if(conn->path[0] != '/') {
+      /* the URL included a host name, we ignore host names in file:// URLs
+         as the standards don't define what to do with them */
+      char *ptr=strchr(conn->path, '/');
+      if(ptr) {
+        /* there was a slash present
+           
+           RFC1738 (section 3.1, page 5) says:
+ 
+           The rest of the locator consists of data specific to the scheme,
+           and is known as the "url-path". It supplies the details of how the
+           specified resource can be accessed. Note that the "/" between the
+           host (or port) and the url-path is NOT part of the url-path.
+ 
+           As most agents use file://localhost/foo to get '/foo' although the
+           slash preceeding foo is a separator and not a slash for the path,
+           a URL as file://localhost//foo must be valid as well, to refer to
+           the same file with an absolute path.
+        */
+
+        if(ptr[1] && ('/' == ptr[1]))
+          /* if there was two slashes, we skip the first one as that is then
+             used truly as a separator */
+          ptr++; 
+        
+        strcpy(conn->path, ptr);
+      }
+    }
 
     strcpy(conn->protostr, "file"); /* store protocol string lowercase */
   }
   else {
     /* Set default host and default path */
     strcpy(conn->gname, "curl.haxx.se");
@@ -1826,20 +1867,20 @@
   }
   else if (strequal(conn->protostr, "DICT")) {
     conn->protocol |= PROT_DICT;
     conn->port = (data->use_port && allow_port)?data->use_port:PORT_DICT;
     conn->remote_port = PORT_DICT;
     conn->curl_do = Curl_dict;
-    conn->curl_done = Curl_dict_done;
+    conn->curl_done = NULL; /* no DICT-specific done */
   }
   else if (strequal(conn->protostr, "LDAP")) {
     conn->protocol |= PROT_LDAP;
     conn->port = (data->use_port && allow_port)?data->use_port:PORT_LDAP;
     conn->remote_port = PORT_LDAP;
     conn->curl_do = Curl_ldap;
-    conn->curl_done = Curl_ldap_done;
+    conn->curl_done = NULL; /* no LDAP-specific done */
   }
   else if (strequal(conn->protostr, "FILE")) {
     conn->protocol |= PROT_FILE;
 
     conn->curl_do = Curl_file;
     /* no done() function */
@@ -1945,20 +1986,23 @@
    * port number of various reasons.
    *
    * To be able to detect port number flawlessly, we must not confuse them
    * IPv6-specified addresses in the [0::1] style.
    *************************************************************/
 
-  if((1 == sscanf(conn->name, "[%*39[0-9a-fA-F:]%c", &endbracket)) &&
+  if((1 == sscanf(conn->name, "[%*39[0-9a-fA-F:.]%c", &endbracket)) &&
      (']' == endbracket)) {
     /* this is a IPv6-style specified IP-address */
 #ifndef ENABLE_IPV6
     failf(data, "You haven't enabled IPv6 support");
     return CURLE_URL_MALFORMAT;
 #else
+    conn->name++; /* pass the starting bracket */
+
     tmp = strchr(conn->name, ']');
+    *tmp = 0; /* zero terminate */
 
     tmp++; /* pass the ending bracket */
     if(':' != *tmp)
       tmp = NULL; /* no port number available */
 #endif
   }
@@ -2077,12 +2121,18 @@
         
         /* tell ourselves to fetch this range */
         conn->range = strdup(resumerange);
         conn->bits.use_range = TRUE;        /* enable range download */
         conn->bits.rangestringalloc = TRUE; /* mark range string allocated */
     }
+    else if (data->set_range) {
+      /* There is a range, but is not a resume, useful for random ftp access */
+      conn->range = strdup(data->set_range);
+      conn->bits.rangestringalloc = TRUE; /* mark range string allocated */
+      conn->bits.use_range = TRUE;        /* enable range download */
+    }
     
     *in_connect = conn;      /* return this instead! */
 
     infof(data, "Re-using existing connection! (#%d)\n", conn->connectindex);
   }
   else {
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/urldata.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/urldata.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/urldata.h	2001-05-31 21:50:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/urldata.h	2001-08-17 18:13:32.000000000 +0800
@@ -17,13 +17,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: urldata.h,v 1.64 2001/05/31 13:50:28 bagder Exp $
+ * $Id: urldata.h,v 1.69 2001/08/17 10:13:32 bagder Exp $
  *****************************************************************************/
 
 /* This file is for lib internal stuff */
 
 #include "setup.h"
 
@@ -126,26 +126,27 @@
 };
 
 struct ssl_config_data {
   long version;          /* what version the client wants to use */
   long certverifyresult; /* result from the certificate verification */
   long verifypeer;       /* set TRUE if this is desired */
+  long verifyhost;       /* 0: no verif, 1: check that CN exists, 2: CN must match hostname */
   char *CApath;          /* DOES NOT WORK ON WINDOWS */
   char *CAfile;          /* cerficate to verify peer against */
   char *random_file;     /* path to file containing "random" data */
   char *egdsocket;       /* path to file containing the EGD daemon socket */
 };
 
 /****************************************************************************
  * HTTP unique setup
  ***************************************************************************/
 struct HTTP {
   struct FormData *sendit;
   int postsize;
-  char *p_pragma;      /* Pragma: string */
-  char *p_accept;      /* Accept: string */
+  const char *p_pragma;      /* Pragma: string */
+  const char *p_accept;      /* Accept: string */
   long readbytecount; 
   long writebytecount;
 
   /* For FORM posting */
   struct Form form;
   curl_read_callback storefread;
@@ -311,12 +312,15 @@
   size_t buffer_size;
 
   struct krb4buffer in_buffer, out_buffer;
   int sec_complete;
   void *app_data;
 
+  struct Curl_sec_client_mech *mech;
+  struct sockaddr_in local_addr;
+
 #endif
 
   /*************** Request - specific items ************/
   /* previously this was in the urldata struct */
   union {
     struct HTTP *http;
@@ -379,18 +383,12 @@
   HTTPREQ_LAST /* last in list */
 } Curl_HttpReq;
 
 /* This struct is for boolean settings that define how to behave during
    this session. */
 struct Configbits {
-  /* these four request types mirror the httpreq field */
-  bool http_formpost;
-  bool http_post;
-  bool http_put;
-  bool http_get;
-
   bool get_filetime;
   bool tunnel_thru_httpproxy;
   bool ftp_append;
   bool ftp_ascii;
   bool ftp_list_only;
   bool ftp_use_port;
@@ -478,15 +476,15 @@
   long maxredirs; /* maximum no. of http(s) redirects to follow */
   char *referer;
   bool free_referer; /* set TRUE if 'referer' points to a string we
                         allocated */
   char *useragent;   /* User-Agent string */
   char *postfields; /* if POST, set the fields' values here */
-  long postfieldsize; /* if POST, this might have a size to use instead of
-                         strlen(), and then the data *may* be binary (contain
-                         zero bytes) */
+  size_t postfieldsize; /* if POST, this might have a size to use instead of
+                           strlen(), and then the data *may* be binary (contain
+                           zero bytes) */
 
   /* stuff related to FTP */
   char *ftpport; /* port to send with the PORT command */
 
   /* general things */
   char *device;  /* Interface to use */
@@ -567,37 +565,16 @@
   char *krb4_level; /* what security level */
   struct timeval keeps_speed; /* this should be request-specific */
 
   /* 'connects' will be an allocated array with pointers. If the pointer is
      set, it holds an allocated connection. */
   struct connectdata **connects;
-  size_t numconnects; /* size of the 'connects' array */
+  long numconnects; /* size of the 'connects' array */
   curl_closepolicy closepolicy;
 
 };
 
 #define LIBCURL_NAME "libcurl"
 #define LIBCURL_ID LIBCURL_NAME " " LIBCURL_VERSION " " SSL_ID
 
-CURLcode Curl_getinfo(CURL *curl, CURLINFO info, ...);
-
-/*
- * Here follows function prototypes from what we used to plan to call
- * the "low level" interface. It is no longer prioritized and it is not likely
- * to ever be supported to external users.
- *
- * I removed all the comments to them as well, as they were no longer accurate
- * and they're not meant for "public use" anymore.
- */
-
-CURLcode Curl_open(CURL **curl, char *url);
-CURLcode Curl_setopt(CURL *handle, CURLoption option, ...);
-CURLcode Curl_close(CURL *curl); /* the opposite of curl_open() */
-CURLcode Curl_connect(struct UrlData *,
-                      struct connectdata **,
-                      bool allow_port);
-CURLcode Curl_do(struct connectdata *);
-CURLcode Curl_done(struct connectdata *);
-CURLcode Curl_disconnect(struct connectdata *);
-
 
 #endif
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/url.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/url.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/lib/url.h	2001-01-25 20:25:00.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/lib/url.h	2001-08-15 14:53:34.000000000 +0800
@@ -17,12 +17,24 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: url.h,v 1.5 2001/01/05 10:11:43 bagder Exp $
+ * $Id: url.h,v 1.6 2001/08/15 06:53:34 bagder Exp $
  *****************************************************************************/
 
-/* empty */
+/*
+ * Prototypes for library-wide functions provided by url.c
+ */
+
+CURLcode Curl_open(struct UrlData **curl);
+CURLcode Curl_setopt(struct UrlData *data, CURLoption option, ...);
+CURLcode Curl_close(struct UrlData *data); /* the opposite of curl_open() */
+CURLcode Curl_connect(struct UrlData *,
+                      struct connectdata **,
+                      bool allow_port);
+CURLcode Curl_do(struct connectdata *);
+CURLcode Curl_done(struct connectdata *);
+CURLcode Curl_disconnect(struct connectdata *);
 
 #endif
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8: libtool
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8: ltconfig
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/Makefile.am	2001-05-30 16:02:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/Makefile.am	2001-08-20 15:10:28.000000000 +0800
@@ -1,16 +1,17 @@
 #
-# $Id: Makefile.am,v 1.19 2001/05/30 04:31:32 crisb Exp $
+# $Id: Makefile.am,v 1.21 2001/08/20 07:10:28 bagder Exp $
 #
 
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
-EXTRA_DIST = \
-	CHANGES LEGAL maketgz MITX.txt MPL-1.1.txt \
-	config-win32.h reconf packages/README Makefile.dist \
-	curl-config.in libtool
+EXTRA_DIST =						\
+	CHANGES LEGAL maketgz MITX.txt MPL-1.1.txt	\
+	config-win32.h reconf Makefile.dist		\
+	curl-config.in build_vms.com config-riscos.h	\
+	config-vms.h
 
 bin_SCRIPTS = curl-config
 
 SUBDIRS = docs lib src include tests packages perl php
 
 # create a root makefile in the distribution:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/Makefile.in	2001-06-07 17:35:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/Makefile.in	2001-08-20 15:51:27.000000000 +0800
@@ -8,13 +8,13 @@
 # This program is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
 #
-# $Id: Makefile.am,v 1.19 2001/05/30 04:31:32 crisb Exp $
+# $Id: Makefile.am,v 1.21 2001/08/20 07:10:28 bagder Exp $
 #
 
 
 SHELL = @SHELL@
 
 srcdir = @srcdir@
@@ -88,27 +88,27 @@
 VERSION = @VERSION@
 VERSIONNUM = @VERSIONNUM@
 YACC = @YACC@
 
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
-EXTRA_DIST =  	CHANGES LEGAL maketgz MITX.txt MPL-1.1.txt 	config-win32.h reconf packages/README Makefile.dist 	curl-config.in libtool
+EXTRA_DIST =  	CHANGES LEGAL maketgz MITX.txt MPL-1.1.txt		config-win32.h reconf Makefile.dist			curl-config.in build_vms.com config-riscos.h		config-vms.h
 
 
 bin_SCRIPTS = curl-config
 
 SUBDIRS = docs lib src include tests packages perl php
 ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = config.h ./src/config.h
 CONFIG_CLEAN_FILES =  curl-config
 SCRIPTS =  $(bin_SCRIPTS)
 
 DIST_COMMON =  README ./stamp-h1.in Makefile.am Makefile.in acconfig.h \
-aclocal.m4 config.guess config.h.in config.sub configure configure.in \
-curl-config.in install-sh ltconfig ltmain.sh missing mkinstalldirs \
+acinclude.m4 aclocal.m4 config.guess config.h.in config.sub configure \
+configure.in curl-config.in install-sh ltmain.sh missing mkinstalldirs \
 src/config.h.in src/stamp-h2.in
 
 
 DISTFILES = $(DIST_COMMON) $(SOURCES) $(HEADERS) $(TEXINFOS) $(EXTRA_DIST)
 
 TAR = gtar
@@ -119,13 +119,13 @@
 	cd $(top_srcdir) && $(AUTOMAKE) --foreign --include-deps Makefile
 
 Makefile: $(srcdir)/Makefile.in  $(top_builddir)/config.status
 	cd $(top_builddir) \
 	  && CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) ./config.status
 
-$(ACLOCAL_M4):  configure.in 
+$(ACLOCAL_M4):  configure.in  acinclude.m4
 	cd $(srcdir) && $(ACLOCAL)
 
 config.status: $(srcdir)/configure $(CONFIG_STATUS_DEPENDENCIES)
 	$(SHELL) ./config.status --recheck
 $(srcdir)/configure: $(srcdir)/configure.in $(ACLOCAL_M4) $(CONFIGURE_DEPENDENCIES)
 	cd $(srcdir) && $(AUTOCONF)
@@ -322,13 +322,12 @@
 	GZIP=$(GZIP_ENV) $(TAR) chozf $(distdir).tar.gz $(distdir)
 	-rm -rf $(distdir)
 distdir: $(DISTFILES)
 	-rm -rf $(distdir)
 	mkdir $(distdir)
 	-chmod 777 $(distdir)
-	$(mkinstalldirs) $(distdir)/packages
 	@for file in $(DISTFILES); do \
 	  d=$(srcdir); \
 	  if test -d $$d/$$file; then \
 	    cp -pr $$d/$$file $(distdir)/$$file; \
 	  else \
 	    test -f $(distdir)/$$file \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/MITX.txt /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/MITX.txt
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/MITX.txt	2001-01-03 17:17:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/MITX.txt	2001-08-09 14:06:55.000000000 +0800
@@ -1,9 +1,9 @@
 COPYRIGHT AND PERMISSION NOTICE
 
-Copyright (c) 2000, Daniel Stenberg, <daniel@haxx.se>.
+Copyright (c) 1996 - 2001, Daniel Stenberg, <daniel@haxx.se>.
 
 All rights reserved.
 
 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src: curlmsg.msg
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/hugehelp.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/hugehelp.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/hugehelp.c	2001-05-29 20:16:54.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/hugehelp.c	2001-08-17 14:41:23.000000000 +0800
@@ -191,923 +191,932 @@
 "          If you start the data  with  the  letter  @,  the  rest\n"
 "          should  be  a  file name to read the data from, or - if\n"
 );
  puts(
 "          you want  curl  to  read  the  data  from  stdin.   The\n"
 "          contents  of the file must already be url-encoded. Mul­\n"
-"          tiple files can also be specified.\n"
+"          tiple files can also be specified. Posting data from  a\n"
+"          file  named  'foobar'  would  thus be done with \"--data\n"
+"          @foobar\".\n"
 "\n"
 "          To post data purely binary, you should instead use  the\n"
 "          --data-binary option.\n"
 "\n"
 "          -d/--data is the same as --data-ascii.\n"
 "\n"
 "          If  this option is used several times, the ones follow­\n"
+);
+ puts(
 "          ing the first will append data.\n"
 "\n"
 "     --data-ascii <data>\n"
-);
- puts(
 "          (HTTP) This is an alias for the -d/--data option.\n"
 "\n"
 "          If this option is used several times, the ones  follow­\n"
 "          ing the first will append data.\n"
 "\n"
 "     --data-binary <data>\n"
 "          (HTTP)  This  posts data in a similar manner as --data-\n"
 "          ascii does, although when using this option the  entire\n"
 "          context  of  the posted data is kept as-is. If you want\n"
-"          to post a binary file without the  strip-newlines  fea­\n"
 );
  puts(
+"          to post a binary file without the  strip-newlines  fea­\n"
 "          ture of the --data-ascii option, this is for you.\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "          If this option is used several times, the ones  follow­\n"
 "          ing the first will append data.\n"
 "\n"
 "     -D/--dump-header <file>\n"
 "          (HTTP/FTP)  Write  the HTTP headers to this file. Write\n"
 "          the FTP file info to this file if -I/--head is used.\n"
 "\n"
-"          This option is handy to use when you want to store  the\n"
 );
  puts(
+"          This option is handy to use when you want to store  the\n"
 "          cookies  that  a  HTTP  site  sends to you. The cookies\n"
 "          could then be read in a second curl invoke by using the\n"
 "          -b/--cookie option!\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -e/--referer <URL>\n"
 "          (HTTP) Sends the \"Referer Page\" information to the HTTP\n"
 "          server.  This can also be set with the -H/--header flag\n"
-"          of course.  When used with -L/--location you can append\n"
 );
  puts(
+"          of course.  When used with -L/--location you can append\n"
 "          \";auto\"  to  the referer URL to make curl automatically\n"
 "          set the  previous  URL  when  it  follows  a  Location:\n"
 "          header.  The  \";auto\" string can be used alone, even if\n"
 "          you don't set an initial referer.\n"
-"\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     --egd-file <file>\n"
 "          (HTTPS)  Specify the path name to the Entropy Gathering\n"
-"          Daemon socket. The socket is used to  seed  the  random\n"
 );
  puts(
+"          Daemon socket. The socket is used to  seed  the  random\n"
 "          engine  for SSL connections. See also the --random-file\n"
 "          option.\n"
 "\n"
 "     -E/--cert <certificate[:password]>\n"
 "          (HTTPS) Tells curl to  use  the  specified  certificate\n"
 "          file  when  getting  a file with HTTPS. The certificate\n"
 "          must be in PEM format.  If the optional password  isn't\n"
 "          specified, it will be queried for on the terminal. Note\n"
+);
+ puts(
 "          that this certificate is the private key and  the  pri­\n"
 "          vate certificate concatenated!\n"
 "\n"
-);
- puts(
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     --cacert <CA certificate>\n"
 "          (HTTPS) Tells curl to  use  the  specified  certificate\n"
 "          file to verify the peer. The certificate must be in PEM\n"
 "          format.\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -f/--fail\n"
-"          (HTTP)  Fail  silently  (no  output  at  all) on server\n"
 );
  puts(
+"          (HTTP)  Fail  silently  (no  output  at  all) on server\n"
 "          errors. This is mostly done like this to better  enable\n"
 "          scripts  etc  to  better  deal with failed attempts. In\n"
 "          normal cases when a HTTP server fails to deliver a doc­\n"
 "          ument,  it  returns  a  HTML document stating so (which\n"
 "          often also describes why and more). This flag will pre­\n"
 "          vent  curl  from  outputting  that  and  fail  silently\n"
 "          instead.\n"
 "\n"
-"          If this option is used twice,  the  second  will  again\n"
 );
  puts(
+"          If this option is used twice,  the  second  will  again\n"
 "          disable silent failure.\n"
 "\n"
 "     -F/--form <name=content>\n"
 "          (HTTP) This lets curl emulate a filled in form in which\n"
 "          a user has pressed the submit button. This causes  curl\n"
 "          to POST data using the content-type multipart/form-data\n"
 "          according to RFC1867. This enables uploading of  binary\n"
 "          files etc. To force the 'content' part to be be a file,\n"
-"          prefix the file name with an @ sign. To  just  get  the\n"
 );
  puts(
+"          prefix the file name with an @ sign. To  just  get  the\n"
 "          content part from a file, prefix the file name with the\n"
 "          letter <. The difference between @ and < is then that @\n"
 "          makes a file get attached in the post as a file upload,\n"
-"          while the < makes a text field and just  get  the  con­\n"
-"          tents for that text field from a file.\n"
+"          while the <  makes  a  text  field  and  just  get  the\n"
+"          contents for that text field from a file.\n"
+"\n"
 "          Example,  to  send  your  password  file to the server,\n"
+);
+ puts(
 "          where 'password' is the name of the form-field to which\n"
 "          /etc/passwd will be the input:\n"
 "\n"
-);
- puts(
 "          curl -F password=@/etc/passwd www.mypasswords.com\n"
 "\n"
 "          To read the file's content from stdin insted of a file,\n"
 "          use - where the file name should've been. This goes for\n"
 "          both @ and < constructs.\n"
 "\n"
 "          This option can be used multiple times.\n"
 "\n"
 "     -g/--globoff\n"
 "          This  option  switches  off  the \"URL globbing parser\".\n"
-"          When you set this option, you  can  specify  URLs  that\n"
-"          contain  the  letters  {}[]  without  having them being\n"
 );
  puts(
+"          When you set this option, you  can  specify  URLs  that\n"
+"          contain  the  letters  {}[]  without  having them being\n"
 "          interpreted by curl itself. Note that these letters are\n"
 "          not  normal  legal  URL  contents  but  they  should be\n"
 "          encoded according to the URI standard. (Option added in\n"
 "          curl 7.6)\n"
 "\n"
+"     -G/--get\n"
+"          When  used,  this  option  will make all data specified\n"
+"          with -d/--data or --data-binary to be used  in  a  HTTP\n"
+);
+ puts(
+"          GET  request instead of the POST request that otherwise\n"
+"          would be used. The data will be  appended  to  the  URL\n"
+"          with a '?'  separator.\n"
+"\n"
 "     -h/--help\n"
 "          Usage help.\n"
 "\n"
 "     -H/--header <header>\n"
 "          (HTTP) Extra header to use when getting a web page. You\n"
 "          may specify any number of extra headers. Note  that  if\n"
 "          you  should  add a custom header that has the same name\n"
+"          as one of the internal ones curl would use, your exter­\n"
 );
  puts(
-"          as one of the internal ones curl would use, your exter­\n"
 "          nally  set  header will be used instead of the internal\n"
 "          one. This allows you to make even trickier  stuff  than\n"
 "          curl  would  normally do. You should not replace inter­\n"
 "          nally set headers without knowing perfectly  well  what\n"
 "          you're  doing.  Replacing  an  internal header with one\n"
 "          without content on the right side  of  the  colon  will\n"
-);
- puts(
 "          prevent that header from appearing.\n"
 "\n"
 "          This option can be used multiple times.\n"
 "\n"
+);
+ puts(
 "     -i/--include\n"
 "          (HTTP) Include the HTTP-header in the output. The HTTP-\n"
 "          header includes things like server-name,  date  of  the\n"
 "          document, HTTP-version and more...\n"
-"\n"
 "          If  this  option  is  used twice, the second will again\n"
 "          disable header include.\n"
 "\n"
 "     --interface <name>\n"
 "          Perform an operation using a specified  interface.  You\n"
-);
- puts(
 "          can  enter  interface name, IP address or host name. An\n"
 "          example could look like:\n"
+"\n"
+);
+ puts(
 "          curl --interface eth0:1 http://www.netscape.com/\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -I/--head\n"
 "          (HTTP/FTP)  Fetch  the  HTTP-header  only! HTTP-servers\n"
 "          feature the command HEAD which this uses to get nothing\n"
 "          but  the header of a document. When used on a FTP file,\n"
-);
- puts(
 "          curl displays the file size only.\n"
 "\n"
 "          If this option is used twice,  the  second  will  again\n"
+);
+ puts(
 "          disable header only.\n"
 "\n"
 "     --krb4 <level>\n"
 "          (FTP)  Enable  kerberos4  authentication  and  use. The\n"
 "          level must be entered and should  be  one  of  'clear',\n"
 "          'safe',  'confidential'  or 'private'. Should you use a\n"
 "          level that is not one of these, 'private' will  instead\n"
 "          be used.\n"
 "\n"
-);
- puts(
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -K/--config <config file>\n"
+);
+ puts(
 "          Specify which config file to read curl arguments  from.\n"
 "          The  config  file  is a text file in which command line\n"
 "          arguments can be written which then will be used as  if\n"
 "          they  were  written on the actual command line. Options\n"
 "          and their parameters must be specified on the same con­\n"
-);
- puts(
 "          fig  file  line.  If  the parameter is to contain white\n"
 "          spaces, the parameter must be inclosed  within  quotes.\n"
+);
+ puts(
 "          If  the  first column of a config line is a '#' charac­\n"
 "          ter, the rest of the line will be treated as a comment.\n"
 "\n"
 "          Specify  the filename as '-' to make curl read the file\n"
 "          from stdin.\n"
 "\n"
 "          This option can be used multiple times.\n"
 "\n"
 "     -l/--list-only\n"
 "          (FTP) When listing an FTP directory, this switch forces\n"
-);
- puts(
 "          a  name-only  view.   Especially  useful if you want to\n"
 "          machine-parse the contents of an  FTP  directory  since\n"
+);
+ puts(
 "          the  normal  directory view doesn't use a standard look\n"
 "          or format.\n"
 "\n"
 "          If this option is used twice,  the  second  will  again\n"
 "          disable list only.\n"
 "\n"
 "     -L/--location\n"
 "          (HTTP/HTTPS)  If  the server reports that the requested\n"
 "          page has  a  different  location  (indicated  with  the\n"
-);
- puts(
 "          header  line Location:) this flag will let curl attempt\n"
 "          to reattempt the get on the new place. If used together\n"
+);
+ puts(
 "          with -i or -I, headers from all requested pages will be\n"
 "          shown. If this flag is used when making  a  HTTP  POST,\n"
 "          curl will automatically switch to GET after the initial\n"
 "          POST has been done.\n"
 "\n"
 "          If this option is used twice,  the  second  will  again\n"
 "          disable location following.\n"
 "\n"
 "     -m/--max-time <seconds>\n"
-);
- puts(
 "          Maximum time in seconds that you allow the whole opera­\n"
 "          tion to take.  This is useful for preventing your batch\n"
+);
+ puts(
 "          jobs  from  hanging  for  hours due to slow networks or\n"
 "          links going down.  This doesn't  work  fully  in  win32\n"
 "          systems.  See also the --connect-timeout option.\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -M/--manual\n"
 "          Manual. Display the huge help text.\n"
 "\n"
 "     -n/--netrc\n"
-);
- puts(
 "          Makes curl scan the .netrc  file  in  the  user's  home\n"
 "          directory  for  login  name and password. This is typi­\n"
+);
+ puts(
 "          cally used for ftp on unix. If  used  with  http,  curl\n"
 "          will  enable  user  authentication.  See  netrc(4)  for\n"
 "          details on the file format. Curl will not  complain  if\n"
 "          that  file  hasn't the right permissions (it should not\n"
 "          be world nor group readable). The environment  variable\n"
-);
- puts(
 "          \"HOME\" is used to find the home directory.\n"
 "\n"
 "          A  quick  and  very  simple  example  of how to setup a\n"
+);
+ puts(
 "          .netrc  to  allow  curl   to   ftp   to   the   machine\n"
 "          host.domain.com  with  user  name 'myself' and password\n"
 "          'secret' should look similar to:\n"
 "\n"
 "          machine host.domain.com login myself password secret\n"
 "\n"
 "          If this option is used twice,  the  second  will  again\n"
 "          disable netrc usage.\n"
-"\n"
 "     -N/--no-buffer\n"
-);
- puts(
 "          Disables  the buffering of the output stream. In normal\n"
 "          work situations, curl will use a standard buffered out­\n"
+);
+ puts(
 "          put  stream that will have the effect that it will out­\n"
 "          put the data in chunks, not  necessarily  exactly  when\n"
 "          the  data arrives.  Using this option will disable that\n"
 "          buffering.\n"
+"\n"
 "          If this option is used twice,  the  second  will  again\n"
 "          switch on buffering.\n"
 "\n"
 "     -o/--output <file>\n"
-);
- puts(
 "          Write  output  to  <file> instead of stdout. If you are\n"
 "          using {} or [] to fetch multiple documents, you can use\n"
+);
+ puts(
 "          '#'  followed by a number in the <file> specifier. That\n"
 "          variable will be replaced with the current  string  for\n"
 "          the URL being fetched. Like in:\n"
 "\n"
 "            curl http://{one,two}.site.com -o \"file_#1.txt\"\n"
 "\n"
 "          or use several variables like:\n"
 "\n"
 "            curl http://{site,host}.host[1-5].com -o \"#1_#2\"\n"
 "\n"
-);
- puts(
 "          You  may use this option as many times as you have num­\n"
 "          ber of URLs.\n"
 "\n"
 "     -O/--remote-name\n"
+);
+ puts(
 "          Write output to a local file named like the remote file\n"
 "          we get. (Only the file part of the remote file is used,\n"
 "          the path is cut off.)\n"
 "\n"
 "          You may use this option as many times as you have  num­\n"
 "          ber of URLs.\n"
 "\n"
 "     -p/--proxytunnel\n"
 "          When an HTTP proxy is used, this option will cause non-\n"
-);
- puts(
 "          HTTP protocols to attempt to tunnel through  the  proxy\n"
 "          instead  of merely using it to do HTTP-like operations.\n"
+);
+ puts(
 "          The tunnel approach is made with the HTTP proxy CONNECT\n"
 "          request  and requires that the proxy allows direct con­\n"
 "          nect to the remote port number  curl  wants  to  tunnel\n"
 "          through to.\n"
 "\n"
 "          If  this  option  is  used twice, the second will again\n"
 "          disable proxy tunnel.\n"
 "\n"
 "     -P/--ftpport <address>\n"
-);
- puts(
 "          (FTP) Reverses the initiator/listener roles  when  con­\n"
 "          necting  with  ftp. This switch makes Curl use the PORT\n"
+);
+ puts(
 "          command instead of PASV. In practice,  PORT  tells  the\n"
 "          server to connect to the client's specified address and\n"
 "          port, while PASV asks the server for an ip address  and\n"
 "          port to connect to. <address> should be one of:\n"
 "\n"
 "          interface   i.e  \"eth0\" to specify which interface's IP\n"
-);
- puts(
 "                      address you want to use  (Unix only)\n"
 "\n"
 "          IP address  i.e \"192.168.10.1\" to specify exact IP num­\n"
 "                      ber\n"
+"\n"
+);
+ puts(
 "          host name   i.e \"my.host.domain\" to specify machine\n"
 "\n"
 "          -           (any  single-letter string) to make it pick\n"
 "                      the machine's default\n"
 "\n"
 "     If this option is used several times, the last one  will  be\n"
 "     used.\n"
 "\n"
 "     -q   If used as the first parameter on the command line, the\n"
-);
- puts(
 "          $HOME/.curlrc file will not be read and used as a  con­\n"
 "          fig file.\n"
 "\n"
 "     -Q/--quote <comand>\n"
 "          (FTP)  Send  an  arbitrary  command  to  the remote FTP\n"
+);
+ puts(
 "          server, by using the QUOTE command of the  server.  Not\n"
 "          all  servers support this command, and the set of QUOTE\n"
 "          commands are server specific! Quote commands  are  sent\n"
 "          BEFORE  the  transfer is taking place. To make commands\n"
-);
- puts(
 "          take place after a  successful  transfer,  prefix  them\n"
 "          with a dash '-'. You may specify any amount of commands\n"
 "          to be run before and after the transfer. If the  server\n"
+);
+ puts(
 "          returns  failure  for  one  of the commands, the entire\n"
 "          operation will be aborted.\n"
 "\n"
 "          This option can be used multiple times.\n"
 "\n"
 "     --random-file <file>\n"
 "          (HTTPS) Specify the path name to file  containing  what\n"
-);
- puts(
 "          will  be considered as random data. The data is used to\n"
 "          seed the random engine for SSL connections.   See  also\n"
 "          the --edg-file option.\n"
 "\n"
 "     -r/--range <range>\n"
+);
+ puts(
 "          (HTTP/FTP)  Retrieve  a byte range (i.e a partial docu­\n"
 "          ment) from a HTTP/1.1 or  FTP  server.  Ranges  can  be\n"
 "          specified in a number of ways.\n"
 "\n"
 "          0-499     specifies the first 500 bytes\n"
 "\n"
 "          500-999   specifies the second 500 bytes\n"
 "\n"
-);
- puts(
 "          -500      specifies the last 500 bytes\n"
-"\n"
 "          9500      specifies the bytes from offset 9500 and for­\n"
 "                    ward\n"
 "\n"
 "          0-0,-1    specifies the first and last byte only(*)(H)\n"
 "\n"
+);
+ puts(
 "          500-700,600-799\n"
 "                    specifies 300 bytes from offset 500(H)\n"
 "\n"
 "          100-199,500-599\n"
 "                    specifies two separate 100 bytes ranges(*)(H)\n"
 "\n"
 "     (*)  =  NOTE that this will cause the server to reply with a\n"
 "     multipart response!\n"
 "\n"
-);
- puts(
 "     You should also be aware that many HTTP/1.1 servers  do  not\n"
 "     have this feature enabled, so that when you attempt to get a\n"
 "     range, you'll instead get the whole document.\n"
 "\n"
+);
+ puts(
 "     FTP range downloads only support the simple  syntax  'start-\n"
 "     stop'  (optionally  with  one  of  the  numbers omitted). It\n"
 "     depends on the non-RFC command SIZE.\n"
 "\n"
 "     If this option is used several times, the last one  will  be\n"
 "     used.\n"
 "\n"
 "     -s/--silent\n"
-);
- puts(
 "          Silent  mode.  Don't  show progress meter or error mes­\n"
 "          sages.  Makes Curl mute.\n"
 "\n"
 "          If this option is used twice,  the  second  will  again\n"
 "          disable mute.\n"
 "\n"
 "     -S/--show-error\n"
+);
+ puts(
 "          When  used  with -s it makes curl show error message if\n"
 "          it fails.\n"
 "\n"
 "          If this option is used twice,  the  second  will  again\n"
 "          disable show error.\n"
 "\n"
 "     -t/--telnet-option <OPT=val>\n"
 "          Pass  options to the telnet protocol. Supported options\n"
-);
- puts(
 "          are:\n"
 "\n"
 "          TTYPE=<term> Sets the terminal type.\n"
 "\n"
 "          XDISPLOC=<X display> Sets the X display location.\n"
 "\n"
 "          NEW_ENV=<var,val> Sets an environment variable.\n"
 "\n"
 "     -T/--upload-file <file>\n"
+);
+ puts(
 "          Like -t, but this transfers the specified  local  file.\n"
 "          If  there  is  no  file part in the specified URL, Curl\n"
 "          will append the local file name. NOTE that you must use\n"
 "          a  trailing  / on the last directory to really prove to\n"
-);
- puts(
 "          Curl that there is no file name or curl will think that\n"
 "          your  last  directory  name  is the remote file name to\n"
 "          use. That will most likely cause the  upload  operation\n"
+);
+ puts(
 "          to  fail.  If this is used on a http(s) server, the PUT\n"
 "          command will be used.\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -u/--user <user:password>\n"
 "          Specify  user  and  password  to use when fetching. See\n"
-);
- puts(
 "          README.curl for detailed examples of how to  use  this.\n"
 "          If  no  password  is  specified,  curl  will ask for it\n"
 "          interactively.\n"
 "\n"
+);
+ puts(
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -U/--proxy-user <user:password>\n"
 "          Specify  user and password to use for Proxy authentica­\n"
 "          tion. If no password is specified, curl will ask for it\n"
 "          interactively.\n"
 "\n"
-);
- puts(
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     --url <URL>\n"
 "          Specify a URL to fetch. This  option  is  mostly  handy\n"
+);
+ puts(
 "          when you wanna specify URL(s) in a config file.\n"
 "\n"
 "          This option may be used any number of times. To control\n"
 "          where this URL  is  written,  use  the  -o  or  the  -O\n"
 "          options.\n"
 "\n"
 "     -v/--verbose\n"
 "          Makes   the  fetching  more  verbose/talkative.  Mostly\n"
-);
- puts(
 "          usable for debugging. Lines  starting  with  '>'  means\n"
 "          data sent by curl, '<' means data received by curl that\n"
 "          is hidden in normal cases and lines starting  with  '*'\n"
+);
+ puts(
 "          means additional info provided by curl.\n"
 "\n"
 "          If  this  option  is  used twice, the second will again\n"
 "          disable verbose.\n"
 "\n"
 "     -V/--version\n"
 "          Displays the full version of curl,  libcurl  and  other\n"
 "          3rd party libraries linked with the executable.\n"
 "\n"
+"     -w/--write-out <format>\n"
+"          Defines   what   to   display  after  a  completed  and\n"
+"          successful operation. The format is a string  that  may\n"
 );
  puts(
-"     -w/--write-out <format>\n"
-"          Defines  what to display after a completed and success­\n"
-"          ful operation. The format is a string that may  contain\n"
-"          plain  text  mixed  with  any  number of variables. The\n"
-"          string can be specified as \"string\", to get read from a\n"
-"          particular  file you specify it \"@filename\" and to tell\n"
-"          curl to read the format from stdin you write \"@-\".\n"
+"          contain  plain text mixed with any number of variables.\n"
+"          The string can be specified as \"string\",  to  get  read\n"
+"          from  a  particular file you specify it \"@filename\" and\n"
+"          to tell curl to read the format from  stdin  you  write\n"
+"          \"@-\".\n"
 "\n"
 "          The variables present in the output format will be sub­\n"
+"          stituted by the value or text that curl thinks fit,  as\n"
+"          described  below.  All  variables  are  specified  like\n"
 );
  puts(
-"          stituted  by the value or text that curl thinks fit, as\n"
-"          described  below.  All  variables  are  specified  like\n"
-"          %{variable_name}  and  to  output  a  normal % you just\n"
-"          write them like %%. You can output a newline  by  using\n"
+"          %{variable_name} and to output  a  normal  %  you  just\n"
+"          write  them  like %%. You can output a newline by using\n"
 "          \\n, a carrige return with \\r and a tab space with \\t.\n"
 "\n"
-"          NOTE:   The   %-letter  is  a  special  letter  in  the\n"
-"          win32-environment, where all occurrences of %  must  be\n"
-);
- puts(
+"          NOTE:  The  %-letter  is  a  special  letter   in   the\n"
+"          win32-environment,  where  all occurrences of % must be\n"
 "          doubled when using this option.\n"
 "\n"
 "          Available variables are at this point:\n"
 "\n"
-"          url_effective  The  URL  that was fetched last. This is\n"
+"          url_effective  The URL that was fetched last.  This  is\n"
+);
+ puts(
 "                         mostly meaningful if you've told curl to\n"
 "                         follow location: headers.\n"
 "\n"
 "          http_code      The numerical code that was found in the\n"
 "                         last retrieved HTTP(S) page.\n"
 "\n"
-"          time_total     The total time,  in  seconds,  that  the\n"
-);
- puts(
-"                         full  operation lasted. The time will be\n"
+"          time_total     The  total  time,  in  seconds, that the\n"
+"                         full operation lasted. The time will  be\n"
 "                         displayed with millisecond resolution.\n"
 "\n"
 "          time_namelookup\n"
-"                         The time, in seconds, it took  from  the\n"
-"                         start  until the name resolving was com­\n"
-"                         pleted.\n"
-"\n"
-"          time_connect   The time, in seconds, it took  from  the\n"
-"                         start  until  the  connect to the remote\n"
 );
  puts(
+"                         The  time,  in seconds, it took from the\n"
+"                         start until the name resolving was  com­\n"
+"                         pleted.\n"
+"\n"
+"          time_connect   The  time,  in seconds, it took from the\n"
+"                         start until the connect  to  the  remote\n"
 "                         host (or proxy) was completed.\n"
 "\n"
 "          time_pretransfer\n"
-"                         The time, in seconds, it took  from  the\n"
-"                         start  until  the  file transfer is just\n"
-"                         about to begin. This includes  all  pre-\n"
-"                         transfer  commands and negotiations that\n"
-"                         are specific to  the  particular  proto­\n"
-"                         col(s) involved.\n"
-"\n"
+"                         The  time,  in seconds, it took from the\n"
 );
  puts(
-"          size_download  The  total  amount  of  bytes  that were\n"
+"                         start until the file  transfer  is  just\n"
+"                         about  to  begin. This includes all pre-\n"
+"                         transfer commands and negotiations  that\n"
+"                         are  specific  to  the particular proto­\n"
+"                         col(s) involved.\n"
+"\n"
+"          size_download  The total  amount  of  bytes  that  were\n"
 "                         downloaded.\n"
 "\n"
-"          size_upload    The total  amount  of  bytes  that  were\n"
+"          size_upload    The  total  amount  of  bytes  that were\n"
+);
+ puts(
 "                         uploaded.\n"
 "\n"
-"          size_header    The  total  amount of bytes of the down­\n"
+"          size_header    The total amount of bytes of  the  down­\n"
 "                         loaded headers.\n"
 "\n"
 "          size_request   The total amount of bytes that were sent\n"
 "                         in the HTTP request.\n"
 "\n"
-"          speed_download The  average  download  speed  that curl\n"
+"          speed_download The average  download  speed  that  curl\n"
+"                         measured for the complete download.\n"
+"\n"
+"          speed_upload   The  average upload speed that curl mea­\n"
 );
  puts(
-"                         measured for the complete download.\n"
-"          speed_upload   The average upload speed that curl  mea­\n"
 "                         sured for the complete upload.\n"
 "\n"
-"     If  this  option is used several times, the last one will be\n"
+"     If this option is used several times, the last one  will  be\n"
 "     used.\n"
 "\n"
 "     -x/--proxy <proxyhost[:port]>\n"
-"          Use specified proxy. If the port number is  not  speci­\n"
+"          Use  specified  proxy. If the port number is not speci­\n"
 "          fied, it is assumed at port 1080.\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
+"     -X/--request <command>\n"
+"          (HTTP)  Specifies a custom request to use when communi­\n"
 );
  puts(
-"     -X/--request <command>\n"
-"          (HTTP) Specifies a custom request to use when  communi­\n"
-"          cating  with  the  HTTP  server.  The specified request\n"
+"          cating with the HTTP  server.   The  specified  request\n"
 "          will be used instead of the standard GET. Read the HTTP\n"
 "          1.1 specification for details and explanations.\n"
 "\n"
-"          (FTP)  Specifies a custom FTP command to use instead of\n"
+"          (FTP) Specifies a custom FTP command to use instead  of\n"
 "          LIST when doing file lists with ftp.\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
-);
- puts(
 "     -y/--speed-time <time>\n"
 "          If a download is slower than speed-limit bytes per sec­\n"
-"          ond during  a  speed-time  period,  the  download  gets\n"
+);
+ puts(
+"          ond  during  a  speed-time  period,  the  download gets\n"
 "          aborted. If speed-time is used, the default speed-limit\n"
 "          will be 1 unless set with -y.\n"
 "\n"
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -Y/--speed-limit <speed>\n"
 "          If a download is slower than this given speed, in bytes\n"
-);
- puts(
-"          per second, for speed-time  seconds  it  gets  aborted.\n"
+"          per  second,  for  speed-time  seconds it gets aborted.\n"
 "          speed-time is set with -Y and is 30 if not set.\n"
 "\n"
+);
+ puts(
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
-"\n"
 "     -z/--time-cond <date expression>\n"
-"          (HTTP) Request to get a file  that  has  been  modified\n"
-"          later  than  the  given  time and date, or one that has\n"
+"          (HTTP)  Request  to  get  a file that has been modified\n"
+"          later than the given time and date,  or  one  that  has\n"
 "          been modified before that time. The date expression can\n"
+"          be all sorts of date strings or if it doesn't match any\n"
+"          internal  ones,  it  tries to get the time from a given\n"
 );
  puts(
-"          be all sorts of date strings or if it doesn't match any\n"
-"          internal ones, it tries to get the time  from  a  given\n"
-"          file  name  instead!  See  the GNU date(1) or curl_get­\n"
+"          file name instead! See the  GNU  date(1)  or  curl_get­\n"
 "          date(3) man pages for date expression details.\n"
 "\n"
-"          Start the date expression with a dash (-)  to  make  it\n"
-"          request  for  a  document  that is older than the given\n"
+"          Start  the  date  expression with a dash (-) to make it\n"
+"          request for a document that is  older  than  the  given\n"
 "          date/time, default is a document that is newer than the\n"
 "          specified date/time.\n"
 "\n"
-);
- puts(
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "     -3/--sslv3\n"
+);
+ puts(
 "          (HTTPS) Forces curl to use SSL version 3 when negotiat­\n"
 "          ing with a remote SSL server.\n"
 "\n"
 "     -2/--sslv2\n"
 "          (HTTPS) Forces curl to use SSL version 2 when negotiat­\n"
 "          ing with a remote SSL server.\n"
 "\n"
 "     -#/--progress-bar\n"
-"          Make curl display progress information  as  a  progress\n"
+"          Make  curl  display  progress information as a progress\n"
 "          bar instead of the default statistics.\n"
 "\n"
-);
- puts(
-"          If  this  option  is  used twice, the second will again\n"
+"          If this option is used twice,  the  second  will  again\n"
 "          disable the progress bar.\n"
 "\n"
 "     --crlf\n"
-"          (FTP) Convert LF to CRLF  in  upload.  Useful  for  MVS\n"
+);
+ puts(
+"          (FTP)  Convert  LF  to  CRLF  in upload. Useful for MVS\n"
 "          (OS/390).\n"
 "\n"
-"          If  this  option  is  used twice, the second will again\n"
+"          If this option is used twice,  the  second  will  again\n"
 "          disable crlf converting.\n"
 "\n"
 "     --stderr <file>\n"
-"          Redirect all writes to stderr  to  the  specified  file\n"
+"          Redirect  all  writes  to  stderr to the specified file\n"
 "          instead. If the file name is a plain '-', it is instead\n"
-);
- puts(
 "          written to stdout. This option has no point when you're\n"
 "          using a shell with decent redirecting capabilities.\n"
 "\n"
+);
+ puts(
 "          If this option is used several times, the last one will\n"
 "          be used.\n"
 "\n"
 "FILES\n"
 "     ~/.curlrc\n"
 "          Default config file.\n"
-"\n"
 "ENVIRONMENT\n"
 "     HTTP_PROXY [protocol://]<host>[:port]\n"
 "          Sets proxy server to use for HTTP.\n"
 "\n"
 "     HTTPS_PROXY [protocol://]<host>[:port]\n"
 "          Sets proxy server to use for HTTPS.\n"
 "\n"
-);
- puts(
 "     FTP_PROXY [protocol://]<host>[:port]\n"
 "          Sets proxy server to use for FTP.\n"
+"\n"
 "     GOPHER_PROXY [protocol://]<host>[:port]\n"
+);
+ puts(
 "          Sets proxy server to use for GOPHER.\n"
 "\n"
 "     ALL_PROXY [protocol://]<host>[:port]\n"
-"          Sets proxy server to use if no protocol-specific  proxy\n"
+"          Sets  proxy server to use if no protocol-specific proxy\n"
 "          is set.\n"
 "\n"
 "     NO_PROXY <comma-separated list of hosts>\n"
 "          list of host names that shouldn't go through any proxy.\n"
 "          If set to a asterisk '*' only, it matches all hosts.\n"
 "\n"
-);
- puts(
 "     COLUMNS <integer>\n"
-"          The width of the terminal.  This variable only  affects\n"
+"          The  width of the terminal.  This variable only affects\n"
 "          curl when the --progress-bar option is used.\n"
 "\n"
+);
+ puts(
 "EXIT CODES\n"
 "     There exists a bunch of different error codes and their cor­\n"
-"     responding error messages that may appear during bad  condi­\n"
+"     responding  error messages that may appear during bad condi­\n"
 "     tions. At the time of this writing, the exit codes are:\n"
 "\n"
 "     1    Unsupported protocol. This build of curl has no support\n"
 "          for this protocol.\n"
 "\n"
 "     2    Failed to initialize.\n"
 "\n"
-);
- puts(
 "     3    URL malformat. The syntax was not correct.\n"
 "\n"
-"     4    URL user malformatted. The user-part of the URL  syntax\n"
+"     4    URL  user malformatted. The user-part of the URL syntax\n"
 "          was not correct.\n"
 "\n"
-"     5    Couldn't  resolve proxy. The given proxy host could not\n"
+);
+ puts(
+"     5    Couldn't resolve proxy. The given proxy host could  not\n"
 "          be resolved.\n"
 "\n"
-"     6    Couldn't resolve host. The given remote  host  was  not\n"
+"     6    Couldn't  resolve  host.  The given remote host was not\n"
 "          resolved.\n"
 "\n"
 "     7    Failed to connect to host.\n"
 "\n"
-"     8    FTP  weird  server  reply.  The  server  sent data curl\n"
+"     8    FTP weird server  reply.  The  server  sent  data  curl\n"
 "          couldn't parse.\n"
 "\n"
-);
- puts(
 "     9    FTP access denied. The server denied login.\n"
-"\n"
-"     10   FTP user/password incorrect. Either one  or  both  were\n"
+"     10   FTP  user/password  incorrect.  Either one or both were\n"
 "          not accepted by the server.\n"
 "\n"
-"     11   FTP  weird  PASS  reply.  Curl couldn't parse the reply\n"
+);
+ puts(
+"     11   FTP weird PASS reply. Curl  couldn't  parse  the  reply\n"
 "          sent to the PASS request.\n"
 "\n"
-"     12   FTP weird USER reply. Curl  couldn't  parse  the  reply\n"
+"     12   FTP  weird  USER  reply.  Curl couldn't parse the reply\n"
 "          sent to the USER request.\n"
-"     13   FTP  weird  PASV  reply,  Curl couldn't parse the reply\n"
+"\n"
+"     13   FTP weird PASV reply, Curl  couldn't  parse  the  reply\n"
 "          sent to the PASV request.\n"
 "\n"
-);
- puts(
-"     14   FTP weird 227 format. Curl couldn't parse the  227-line\n"
+"     14   FTP  weird 227 format. Curl couldn't parse the 227-line\n"
 "          the server sent.\n"
 "\n"
 "     15   FTP can't get host. Couldn't resolve the host IP we got\n"
 "          in the 227-line.\n"
 "\n"
-"     16   FTP can't reconnect. Couldn't connect to  the  host  we\n"
+);
+ puts(
+"     16   FTP  can't  reconnect.  Couldn't connect to the host we\n"
 "          got in the 227-line.\n"
 "\n"
 "     17   FTP  couldn't  set  binary.  Couldn't  change  transfer\n"
 "          method to binary.\n"
 "\n"
 "     18   Partial file. Only a part of the file was transfered.\n"
 "\n"
-);
- puts(
 "     19   FTP couldn't RETR file. The RETR command failed.\n"
 "\n"
-"     20   FTP write error. The transfer was reported bad  by  the\n"
+"     20   FTP  write  error. The transfer was reported bad by the\n"
 "          server.\n"
 "\n"
-"     21   FTP  quote  error.  A quote command returned error from\n"
+"     21   FTP quote error. A quote command  returned  error  from\n"
 "          the server.\n"
 "\n"
-"     22   HTTP not found. The requested page was not found.  This\n"
+);
+ puts(
+"     22   HTTP  not found. The requested page was not found. This\n"
 "          return code only appears if --fail is used.\n"
 "\n"
-"     23   Write  error.  Curl  couldn't  write  data  to  a local\n"
+"     23   Write error.  Curl  couldn't  write  data  to  a  local\n"
 "          filesystem or similar.\n"
 "\n"
-);
- puts(
 "     24   Malformat user. User name badly specified.\n"
 "\n"
-"     25   FTP couldn't STOR file.  The  server  denied  the  STOR\n"
+"     25   FTP  couldn't  STOR  file.  The  server denied the STOR\n"
 "          operation.\n"
 "\n"
 "     26   Read error. Various reading problems.\n"
 "\n"
 "     27   Out of memory. A memory allocation request failed.\n"
 "\n"
-"     28   Operation  timeout.  The  specified time-out period was\n"
+);
+ puts(
+"     28   Operation timeout. The specified  time-out  period  was\n"
 "          reached according to the conditions.\n"
-"\n"
-"     29   FTP couldn't set ASCII. The server returned an  unknown\n"
+"     29   FTP  couldn't set ASCII. The server returned an unknown\n"
 "          reply.\n"
 "\n"
-);
- puts(
 "     30   FTP PORT failed. The PORT command failed.\n"
 "\n"
 "     31   FTP couldn't use REST. The REST command failed.\n"
 "\n"
-"     32   FTP  couldn't  use  SIZE.  The SIZE command failed. The\n"
-"          command is an extension to the original  FTP  spec  RFC\n"
+"     32   FTP couldn't use SIZE. The  SIZE  command  failed.  The\n"
+"          command  is  an  extension to the original FTP spec RFC\n"
 "          959.\n"
 "\n"
+);
+ puts(
 "     33   HTTP range error. The range \"command\" didn't work.\n"
 "\n"
-"     34   HTTP   post  error.  Internal  post-request  generation\n"
+"     34   HTTP  post  error.  Internal  post-request   generation\n"
 "          error.\n"
 "\n"
 "     35   SSL connect error. The SSL handshaking failed.\n"
 "\n"
-);
- puts(
-"     36   FTP bad download resume. Couldn't continue  an  earlier\n"
+"     36   FTP  bad  download resume. Couldn't continue an earlier\n"
 "          aborted download.\n"
 "\n"
-"     37   FILE  couldn't read file. Failed to open the file. Per­\n"
+"     37   FILE couldn't read file. Failed to open the file.  Per­\n"
 "          missions?\n"
 "\n"
 "     38   LDAP cannot bind. LDAP bind operation failed.\n"
 "\n"
 "     39   LDAP search failed.\n"
 "\n"
+);
+ puts(
 "     40   Library not found. The LDAP library was not found.\n"
 "\n"
-"     41   Function not found. A required LDAP  function  was  not\n"
+"     41   Function  not  found.  A required LDAP function was not\n"
 "          found.\n"
 "\n"
-"     42   Aborted  by callback. An application told curl to abort\n"
-);
- puts(
+"     42   Aborted by callback. An application told curl to  abort\n"
 "          the operation.\n"
 "\n"
 "     43   Internal error. A function was called with a bad param­\n"
 "          eter.\n"
 "\n"
 "     44   Internal error. A function was called in a bad order.\n"
 "\n"
-"     45   Interface  error.  A specified outgoing interface could\n"
+"     45   Interface error. A specified outgoing  interface  could\n"
 "          not be used.\n"
 "\n"
-"     46   Bad password entered. An error was signalled  when  the\n"
+);
+ puts(
+"     46   Bad  password  entered. An error was signalled when the\n"
 "          password was entered.\n"
 "\n"
-"     47   Too  many redirects. When following redirects, curl hit\n"
+"     47   Too many redirects. When following redirects, curl  hit\n"
 "          the maximum amount.\n"
 "\n"
-);
- puts(
 "     48   Unknown TELNET option specified.\n"
-"\n"
 "     49   Malformed telnet option.\n"
 "\n"
-"     XX   There will appear  more  error  codes  here  in  future\n"
-"          releases.  The existing ones are meant to never change.\n"
+"     XX   There  will  appear  more  error  codes  here in future\n"
+"          releases. The existing ones are meant to never  change.\n"
 "\n"
 "BUGS\n"
 "     If you do find bugs, mail them to curl-bug@haxx.se.\n"
+"\n"
 "AUTHORS / CONTRIBUTORS\n"
-"     Daniel Stenberg is the main author, but the  whole  list  of\n"
+);
+ puts(
+"     Daniel  Stenberg  is  the main author, but the whole list of\n"
 "     contributors is found in the separate THANKS file.\n"
 "\n"
 "WWW\n"
 "     http://curl.haxx.se\n"
 "\n"
 "FTP\n"
-);
- puts(
 "     ftp://ftp.sunet.se/pub/www/utilities/curl/\n"
 "\n"
 "SEE ALSO\n"
 "     ftp(1), wget(1), snarf(1)\n"
 "\n"
 "LATEST VERSION\n"
@@ -1118,22 +1127,22 @@
 "        http://curl.haxx.se\n"
 "\n"
 "SIMPLE USAGE\n"
 "\n"
 "  Get the main page from netscape's web-server:\n"
 "\n"
+);
+ puts(
 "        curl http://www.netscape.com/\n"
 "\n"
 "  Get the root README file from funet's ftp-server:\n"
 "\n"
 "        curl ftp://ftp.funet.fi/README\n"
 "\n"
 "  Get a web page from a server using port 8000:\n"
 "\n"
-);
- puts(
 "        curl http://www.weirdserver.com:8000/\n"
 "\n"
 "  Get a list of the root directory of an FTP site:\n"
 "\n"
 "        curl ftp://cool.haxx.se/\n"
 "\n"
@@ -1142,115 +1151,115 @@
 "        curl gopher://gopher.funet.fi\n"
 "\n"
 "  Get the definition of curl from a dictionary:\n"
 "\n"
 "        curl dict://dict.org/m:curl\n"
 "\n"
+);
+ puts(
 "  Fetch two documents at once:\n"
 "\n"
 "        curl ftp://cool.haxx.se/ http://www.weirdserver.com:8000/\n"
 "\n"
 "DOWNLOAD TO A FILE\n"
 "\n"
 "  Get a web page and store in a local file:\n"
 "\n"
-);
- puts(
 "        curl -o thatpage.html http://www.netscape.com/\n"
 "\n"
 "  Get a web page and store in a local file, make the local file get the name\n"
 "  of the remote document (if no file name part is specified in the URL, this\n"
 "  will fail):\n"
 "\n"
 "        curl -O http://www.netscape.com/index.html\n"
 "\n"
 "  Fetch two files and store them with their remote names:\n"
 "\n"
+);
+ puts(
 "        curl -O www.haxx.se/index.html -O curl.haxx.se/download.html\n"
 "\n"
 "USING PASSWORDS\n"
 "\n"
 " FTP\n"
 "\n"
 "   To ftp files using name+passwd, include them in the URL like:\n"
 "\n"
-);
- puts(
 "        curl ftp://name:passwd@machine.domain:port/full/path/to/file\n"
 "\n"
 "   or specify them with the -u flag like\n"
 "\n"
 "        curl -u name:passwd ftp://machine.domain:port/full/path/to/file\n"
 "\n"
 " HTTP\n"
 "\n"
 "   The HTTP URL doesn't support user and password in the URL string. Curl\n"
+);
+ puts(
 "   does support that anyway to provide a ftp-style interface and thus you can\n"
 "   pick a file like:\n"
 "\n"
 "        curl http://name:passwd@machine.domain/full/path/to/file\n"
 "\n"
 "   or specify user and password separately like in\n"
 "\n"
-);
- puts(
 "        curl -u name:passwd http://machine.domain/full/path/to/file\n"
 "\n"
 "   NOTE! Since HTTP URLs don't support user and password, you can't use that\n"
 "   style when using Curl via a proxy. You _must_ use the -u style fetch\n"
 "   during such circumstances.\n"
 "\n"
 " HTTPS\n"
 "\n"
+);
+ puts(
 "   Probably most commonly used with private certificates, as explained below.\n"
 "\n"
 " GOPHER\n"
 "\n"
 "   Curl features no password support for gopher.\n"
 "\n"
 "PROXY\n"
 "\n"
 " Get an ftp file using a proxy named my-proxy that uses port 888:\n"
 "\n"
-);
- puts(
 "        curl -x my-proxy:888 ftp://ftp.leachsite.com/README\n"
 "\n"
 " Get a file from a HTTP server that requires user and password, using the\n"
 " same proxy as above:\n"
 "\n"
 "        curl -u user:passwd -x my-proxy:888 http://www.get.this/\n"
 "\n"
+);
+ puts(
 " Some proxies require special authentication. Specify by using -U as above:\n"
 "\n"
 "        curl -U user:passwd -x my-proxy:888 http://www.get.this/\n"
 "\n"
 " See also the environment variables Curl support that offer further proxy\n"
 " control.\n"
 "\n"
 "RANGES\n"
 "\n"
-);
- puts(
 "  With HTTP 1.1 byte-ranges were introduced. Using this, a client can request\n"
 "  to get only one or more subparts of a specified document. Curl supports\n"
 "  this with the -r flag.\n"
 "\n"
 "  Get the first 100 bytes of a document:\n"
 "\n"
 "        curl -r 0-99 http://www.get.this/\n"
 "\n"
+);
+ puts(
 "  Get the last 500 bytes of a document:\n"
 "\n"
 "        curl -r -500 http://www.get.this/\n"
 "\n"
 "  Curl also supports simple ranges for FTP files as well. Then you can only\n"
 "  specify start and stop position.\n"
 "\n"
-);
- puts(
 "  Get the first 100 bytes of a document using FTP:\n"
 "\n"
 "        curl -r 0-99 ftp://www.get.this/README  \n"
 "\n"
 "UPLOADING\n"
 "\n"
@@ -1259,363 +1268,363 @@
 "  Upload all data on stdin to a specified ftp site:\n"
 "\n"
 "        curl -t ftp://ftp.upload.com/myfile\n"
 "\n"
 "  Upload data from a specified file, login with user and password:\n"
 "\n"
+);
+ puts(
 "        curl -T uploadfile -u user:passwd ftp://ftp.upload.com/myfile\n"
 "\n"
 "  Upload a local file to the remote site, and use the local file name remote\n"
 "  too:\n"
 " \n"
-);
- puts(
 "        curl -T uploadfile -u user:passwd ftp://ftp.upload.com/\n"
 "\n"
 "  Upload a local file to get appended to the remote file using ftp:\n"
 "\n"
 "        curl -T localfile -a ftp://ftp.upload.com/remotefile\n"
 "\n"
 "  Curl also supports ftp upload through a proxy, but only if the proxy is\n"
+);
+ puts(
 "  configured to allow that kind of tunneling. If it does, you can run curl in\n"
 "  a fashion similar to:\n"
 "\n"
 "        curl --proxytunnel -x proxy:port -T localfile ftp.upload.com\n"
 "\n"
 " HTTP\n"
 "\n"
-);
- puts(
 "  Upload all data on stdin to a specified http site:\n"
 "\n"
 "        curl -t http://www.upload.com/myfile\n"
 "\n"
 "  Note that the http server must've been configured to accept PUT before this\n"
 "  can be done successfully.\n"
 "\n"
 "  For other ways to do http data upload, see the POST section below.\n"
 "\n"
 "VERBOSE / DEBUG\n"
 "\n"
-"  If curl fails where it isn't supposed to, if the servers don't let you\n"
-"  in, if you can't understand the responses: use the -v flag to get VERBOSE\n"
 );
  puts(
+"  If curl fails where it isn't supposed to, if the servers don't let you\n"
+"  in, if you can't understand the responses: use the -v flag to get VERBOSE\n"
 "  fetching. Curl will output lots of info and all data it sends and\n"
 "  receives in order to let the user see all client-server interaction.\n"
 "\n"
 "        curl -v ftp://ftp.upload.com/\n"
 "\n"
 "DETAILED INFORMATION\n"
 "\n"
 "  Different protocols provide different ways of getting detailed information\n"
-"  about specific files/documents. To get curl to show detailed information\n"
-"  about a single file, you should use -I/--head option. It displays all\n"
 );
  puts(
+"  about specific files/documents. To get curl to show detailed information\n"
+"  about a single file, you should use -I/--head option. It displays all\n"
 "  available info on a single file for HTTP and FTP. The HTTP information is a\n"
 "  lot more extensive.\n"
 "\n"
 "  For HTTP, you can get the header information (the same as -I would show)\n"
 "  shown before the data by using -i/--include. Curl understands the\n"
 "  -D/--dump-header option when getting files from both FTP and HTTP, and it\n"
+);
+ puts(
 "  will then store the headers in the specified file.\n"
 "\n"
 "  Store the HTTP headers in a separate file (headers.txt in the example):\n"
 "\n"
-);
- puts(
 "        curl --dump-header headers.txt curl.haxx.se\n"
 "\n"
 "  Note that headers stored in a separate file can be very useful at a later\n"
 "  time if you want curl to use cookies sent by the server. More about that in\n"
 "  the cookies section.\n"
 "\n"
 "POST (HTTP)\n"
 "\n"
 "  It's easy to post data using curl. This is done using the -d <data>\n"
 "  option.  The post data must be urlencoded.\n"
 "\n"
+);
+ puts(
 "  Post a simple \"name\" and \"phone\" guestbook.\n"
 "\n"
 "        curl -d \"name=Rafael%20Sagula&phone=3320780\" \\\n"
-);
- puts(
 "                http://www.where.com/guest.cgi\n"
 "\n"
 "  How to post a form with curl, lesson #1:\n"
 "\n"
 "  Dig out all the <input> tags in the form that you want to fill in. (There's\n"
 "  a perl program called formfind.pl on the curl site that helps with this).\n"
 "\n"
 "  If there's a \"normal\" post, you use -d to post. -d takes a full \"post\n"
 "  string\", which is in the format\n"
 "\n"
+);
+ puts(
 "        <variable1>=<data1>&<variable2>=<data2>&...\n"
 "\n"
 "  The 'variable' names are the names set with \"name=\" in the <input> tags, and\n"
-);
- puts(
 "  the data is the contents you want to fill in for the inputs. The data *must*\n"
 "  be properly URL encoded. That means you replace space with + and that you\n"
 "  write weird letters with %XX where XX is the hexadecimal representation of\n"
 "  the letter's ASCII code.\n"
 "\n"
 "  Example:\n"
 "\n"
 "  (page located at http://www.formpost.com/getthis/\n"
 "\n"
+);
+ puts(
 "        <form action=\"post.cgi\" method=\"post\">\n"
 "        <input name=user size=10>\n"
 "        <input name=pass type=password size=10>\n"
-);
- puts(
 "        <input name=id type=hidden value=\"blablabla\">\n"
 "        <input name=ding value=\"submit\">\n"
 "        </form>\n"
 "\n"
 "  We want to enter user 'foobar' with password '12345'.\n"
 "\n"
 "  To post to this, you enter a curl command line like:\n"
 "\n"
 "        curl -d \"user=foobar&pass=12345&id=blablabla&dig=submit\"  (continues)\n"
 "          http://www.formpost.com/getthis/post.cgi\n"
 "\n"
 "\n"
-"  While -d uses the application/x-www-form-urlencoded mime-type, generally\n"
 );
  puts(
+"  While -d uses the application/x-www-form-urlencoded mime-type, generally\n"
 "  understood by CGI's and similar, curl also supports the more capable\n"
 "  multipart/form-data type. This latter type supports things like file upload.\n"
 "\n"
 "  -F accepts parameters like -F \"name=contents\". If you want the contents to\n"
 "  be read from a file, use <@filename> as contents. When specifying a file,\n"
 "  you can also specify the file content type by appending ';type=<mime type>'\n"
-"  to the file name. You can also post the contents of several files in one field.\n"
 );
  puts(
+"  to the file name. You can also post the contents of several files in one field.\n"
 "  For example, the field name 'coolfiles' is used to send three  files, with\n"
 "  different content types using the following syntax:\n"
 "\n"
 "        curl -F \"coolfiles=@fil1.gif;type=image/gif,fil2.txt,fil3.html\" \\\n"
 "        http://www.post.com/postit.cgi\n"
 "\n"
 "  If the content-type is not specified, curl will try to guess from the file\n"
 "  extension  (it only knows a few), or use the previously specified type\n"
-"  (from an earlier file if several files are specified in a list) or else it\n"
 );
  puts(
+"  (from an earlier file if several files are specified in a list) or else it\n"
 "  will  using the default type 'text/plain'.\n"
 "\n"
 "  Emulate a fill-in form with -F. Let's say you fill in three fields in a\n"
 "  form. One field is a file name which to post, one field is your name and one\n"
 "  field is a file description. We want to post the file we have written named\n"
 "  \"cooltext.txt\". To let curl do the posting of this data instead of your\n"
-"  favourite browser, you have to read the HTML source of the form page and find\n"
 );
  puts(
+"  favourite browser, you have to read the HTML source of the form page and find\n"
 "  the names of the input fields. In our example, the input field names are\n"
 "  'file', 'yourname' and 'filedescription'.\n"
 "\n"
 "        curl -F \"file=@cooltext.txt\" -F \"yourname=Daniel\" \\\n"
 "             -F \"filedescription=Cool text file with cool text inside\" \\\n"
 "             http://www.post.com/postit.cgi\n"
 "\n"
 "  To send two files in one post you can do it in two ways:\n"
 "\n"
+);
+ puts(
 "  1. Send multiple files in a single \"field\" with a single field name:\n"
 " \n"
 "        curl -F \"pictures=@dog.gif,cat.gif\" \n"
 " \n"
-);
- puts(
 "  2. Send two fields with two field names: \n"
 "\n"
 "        curl -F \"docpicture=@dog.gif\" -F \"catpicture=@cat.gif\" \n"
 "\n"
 "REFERRER\n"
 "\n"
 "  A HTTP request has the option to include information about which address\n"
 "  that referred to actual page.  Curl allows you to specify the\n"
 "  referrer to be used on the command line. It is especially useful to\n"
+);
+ puts(
 "  fool or trick stupid servers or CGI scripts that rely on that information\n"
 "  being available or contain certain data.\n"
 "\n"
-);
- puts(
 "        curl -e www.coolsite.com http://www.showme.com/\n"
 "\n"
 "  NOTE: The referer field is defined in the HTTP spec to be a full URL.\n"
 "\n"
 "USER AGENT\n"
 "\n"
 "  A HTTP request has the option to include information about the browser\n"
 "  that generated the request. Curl allows it to be specified on the command\n"
 "  line. It is especially useful to fool or trick stupid servers or CGI\n"
+);
+ puts(
 "  scripts that only accept certain browsers.\n"
 "\n"
 "  Example:\n"
 "\n"
 "  curl -A 'Mozilla/3.0 (Win95; I)' http://www.nationsbank.com/\n"
 "\n"
-);
- puts(
 "  Other common strings:\n"
 "    'Mozilla/3.0 (Win95; I)'     Netscape Version 3 for Windows 95\n"
 "    'Mozilla/3.04 (Win95; U)'    Netscape Version 3 for Windows 95\n"
 "    'Mozilla/2.02 (OS/2; U)'     Netscape Version 2 for OS/2\n"
 "    'Mozilla/4.04 [en] (X11; U; AIX 4.2; Nav)'           NS for AIX\n"
 "    'Mozilla/4.05 [en] (X11; U; Linux 2.0.32 i586)'      NS for Linux\n"
 "\n"
-"  Note that Internet Explorer tries hard to be compatible in every way:\n"
-"    'Mozilla/4.0 (compatible; MSIE 4.01; Windows 95)'    MSIE for W95\n"
 );
  puts(
+"  Note that Internet Explorer tries hard to be compatible in every way:\n"
+"    'Mozilla/4.0 (compatible; MSIE 4.01; Windows 95)'    MSIE for W95\n"
 "\n"
 "  Mozilla is not the only possible User-Agent name:\n"
 "    'Konqueror/1.0'             KDE File Manager desktop client\n"
 "    'Lynx/2.7.1 libwww-FM/2.14' Lynx command line browser\n"
 "\n"
 "COOKIES\n"
 "\n"
 "  Cookies are generally used by web servers to keep state information at the\n"
 "  client's side. The server sets cookies by sending a response line in the\n"
-"  headers that looks like 'Set-Cookie: <data>' where the data part then\n"
-"  typically contains a set of NAME=VALUE pairs (separated by semicolons ';'\n"
 );
  puts(
+"  headers that looks like 'Set-Cookie: <data>' where the data part then\n"
+"  typically contains a set of NAME=VALUE pairs (separated by semicolons ';'\n"
 "  like \"NAME1=VALUE1; NAME2=VALUE2;\"). The server can also specify for what\n"
 "  path the \"cookie\" should be used for (by specifying \"path=value\"), when the\n"
 "  cookie should expire (\"expire=DATE\"), for what domain to use it\n"
 "  (\"domain=NAME\") and if it should be used on secure connections only\n"
 "  (\"secure\").\n"
 "\n"
+);
+ puts(
 "  If you've received a page from a server that contains a header like:\n"
 "        Set-Cookie: sessionid=boo123; path=\"/foo\";\n"
 "\n"
-);
- puts(
 "  it means the server wants that first pair passed on when we get anything in\n"
 "  a path beginning with \"/foo\".\n"
 "\n"
 "  Example, get a page that wants my name passed in a cookie:\n"
 "\n"
 "        curl -b \"name=Daniel\" www.sillypage.com\n"
 "\n"
 "  Curl also has the ability to use previously received cookies in following\n"
 "  sessions. If you get cookies from a server and store them in a file in a\n"
+);
+ puts(
 "  manner similar to:\n"
 "\n"
 "        curl --dump-header headers www.example.com\n"
 "\n"
-);
- puts(
 "  ... you can then in a second connect to that (or another) site, use the\n"
 "  cookies from the 'headers' file like:\n"
 "\n"
 "        curl -b headers www.example.com\n"
 "\n"
 "  Note that by specifying -b you enable the \"cookie awareness\" and with -L\n"
 "  you can make curl follow a location: (which often is used in combination\n"
 "  with cookies). So that if a site sends cookies and a location, you can\n"
+);
+ puts(
 "  use a non-existing file to trigger the cookie awareness like:\n"
 "\n"
 "        curl -L -b empty.txt www.example.com\n"
 "\n"
-);
- puts(
 "  The file to read cookies from must be formatted using plain HTTP headers OR\n"
 "  as netscape's cookie file. Curl will determine what kind it is based on the\n"
 "  file contents.  In the above command, curl will parse the header and store\n"
 "  the cookies received from www.example.com.  curl will send to the server the\n"
 "  stored cookies which match the request as it follows the location.  The\n"
+);
+ puts(
 "  file \"empty.txt\" may be a non-existant file.\n"
 "  \n"
 "\n"
 "PROGRESS METER\n"
 "\n"
-);
- puts(
 "  The progress meter exists to show a user that something actually is\n"
 "  happening. The different fields in the output have the following meaning:\n"
 "\n"
 "  % Total    % Received % Xferd  Average Speed          Time             Curr.\n"
 "                                 Dload  Upload Total    Current  Left    Speed\n"
 "  0  151M    0 38608    0     0   9406      0  4:41:43  0:00:04  4:41:39  9287\n"
 "\n"
 "  From left-to-right:\n"
-"   %             - percentage completed of the whole transfer\n"
 );
  puts(
+"   %             - percentage completed of the whole transfer\n"
 "   Total         - total size of the whole expected transfer\n"
 "   %             - percentage completed of the download\n"
 "   Received      - currently downloaded amount of bytes\n"
 "   %             - percentage completed of the upload\n"
 "   Xferd         - currently uploaded amount of bytes\n"
 "   Average Speed\n"
 "   Dload         - the average transfer speed of the download\n"
 "   Average Speed\n"
 "   Upload        - the average transfer speed of the upload\n"
-"   Time Total    - expected time to complete the operation\n"
 );
  puts(
+"   Time Total    - expected time to complete the operation\n"
 "   Time Current  - time passed since the invoke\n"
 "   Time Left     - expected time left to completetion\n"
 "   Curr.Speed    - the average transfer speed the last 5 seconds (the first\n"
 "                   5 seconds of a transfer is based on less time of course.)\n"
 "\n"
 "  The -# option will display a totally different progress bar that doesn't\n"
 "  need much explanation!\n"
 "\n"
 "SPEED LIMIT\n"
 "\n"
-"  Curl allows the user to set the transfer speed conditions that must be met\n"
 );
  puts(
+"  Curl allows the user to set the transfer speed conditions that must be met\n"
 "  to let the transfer keep going. By using the switch -y and -Y you\n"
 "  can make curl abort transfers if the transfer speed is below the specified\n"
 "  lowest limit for a specified time.\n"
 "\n"
 "  To have curl abort the download if the speed is slower than 3000 bytes per\n"
 "  second for 1 minute, run:\n"
 "\n"
 "        curl -y 3000 -Y 60 www.far-away-site.com\n"
 "\n"
 "  This can very well be used in combination with the overall time limit, so\n"
-"  that the above operatioin must be completed in whole within 30 minutes:\n"
-"\n"
 );
  puts(
+"  that the above operatioin must be completed in whole within 30 minutes:\n"
+"\n"
 "        curl -m 1800 -y 3000 -Y 60 www.far-away-site.com\n"
 "\n"
 "CONFIG FILE\n"
 "\n"
 "  Curl automatically tries to read the .curlrc file (or _curlrc file on win32\n"
 "  systems) from the user's home dir on startup.\n"
 "\n"
 "  The config file could be made up with normal command line switches, but you\n"
 "  can also specify the long options without the dashes to make it more\n"
 "  readable. You can separate the options and the parameter with spaces, or\n"
-"  with = or :. Comments can be used within the file. If the first letter on a\n"
 );
  puts(
+"  with = or :. Comments can be used within the file. If the first letter on a\n"
 "  line is a '#'-letter the rest of the line is treated as a comment.\n"
 "\n"
 "  If you want the parameter to contain spaces, you must inclose the entire\n"
 "  parameter within double quotes (\"). Within those quotes, you specify a\n"
 "  quote as \\\".\n"
 "\n"
 "  NOTE: You must specify options and their arguments on the same line.\n"
 "\n"
 "  Example, set default time out and proxy in a config file:\n"
 "\n"
 "        # We want a 30 minute timeout:\n"
 "        -m 1800\n"
-"        # ... and we use a proxy for all accesses:\n"
 );
  puts(
+"        # ... and we use a proxy for all accesses:\n"
 "        proxy = proxy.our.domain.com:8080\n"
 "\n"
 "  White spaces ARE significant at the end of lines, but all white spaces\n"
 "  leading up to the first characters of each line are ignored.\n"
 "\n"
 "  Prevent curl from reading the default file by using -q as the first command\n"
@@ -1623,15 +1632,15 @@
 "\n"
 "        curl -q www.thatsite.com\n"
 "\n"
 "  Force curl to get and display a local help page in case it is invoked\n"
 "  without URL by making a config file similar to:\n"
 "\n"
-"        # default url to get\n"
 );
  puts(
+"        # default url to get\n"
 "        url = \"http://help.with.curl.com/curlhelp.html\"\n"
 "\n"
 "  You can specify another config file to be read by using the -K/--config\n"
 "  flag. If you set config file name to \"-\" it'll read the config from stdin,\n"
 "  which can be handy if you want to hide options from being visible in process\n"
 "  tables etc:\n"
@@ -1792,13 +1801,13 @@
 "\n"
 "    select a proper place to save it \n"
 "\n"
 "    Run the 'openssl' application to convert the certificate. If you cd to the\n"
 "    openssl installation, you can do it like:\n"
 "\n"
-"     # ./apps/openssl pkcs12 -certfile [file you saved] -out [PEMfile]\n"
+"     # ./apps/openssl pkcs12 -in [file you saved] -clcerts -out [PEMfile]\n"
 "\n"
 "\n"
 "RESUMING FILE TRANSFERS\n"
 "\n"
 " To continue a file transfer where it was previously aborted, curl supports\n"
 );
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/main.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/main.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/main.c	2001-05-30 16:01:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/main.c	2001-08-20 01:09:06.000000000 +0800
@@ -2,26 +2,26 @@
  *                                  _   _ ____  _     
  *  Project                     ___| | | |  _ \| |    
  *                             / __| | | | |_) | |    
  *                            | (__| |_| |  _ <| |___ 
  *                             \___|\___/|_| \_\_____|
  *
- * Copyright (C) 2000, Daniel Stenberg, <daniel@haxx.se>, et al.
+ * Copyright (C) 2001, Daniel Stenberg, <daniel@haxx.se>, et al.
  *
  * In order to be useful for every potential user, curl and libcurl are
  * dual-licensed under the MPL and the MIT/X-derivate licenses.
  *
  * You may opt to use, copy, modify, merge, publish, distribute and/or sell
  * copies of the Software, and permit persons to whom the Software is
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: main.c,v 1.81 2001/05/30 08:01:09 bagder Exp $
+ * $Id: main.c,v 1.90 2001/08/19 17:09:06 bagder Exp $
  *****************************************************************************/
 
 /* This is now designed to have its own local setup.h */
 #include "setup.h"
 
 #include <stdio.h>
@@ -121,78 +121,139 @@
 
   return newstr;
 
 }
 #endif 
 
-extern void hugehelp(void);
-
-/***********************************************************************
- * Start with some silly functions to make win32-systems survive
- ***********************************************************************/
-#if defined(WIN32) && !defined(__GNUC__) || defined(__MINGW32__)
-static void win32_cleanup(void)
-{
-  WSACleanup();
-}
-
-static CURLcode win32_init(void)
-{
-  WORD wVersionRequested;  
-  WSADATA wsaData; 
-  int err; 
-  wVersionRequested = MAKEWORD(1, 1); 
-    
-  err = WSAStartup(wVersionRequested, &wsaData); 
-    
-  if (err != 0) 
-    /* Tell the user that we couldn't find a useable */ 
-    /* winsock.dll.     */ 
-    return CURLE_FAILED_INIT; 
-    
-  /* Confirm that the Windows Sockets DLL supports 1.1.*/ 
-  /* Note that if the DLL supports versions greater */ 
-  /* than 1.1 in addition to 1.1, it will still return */ 
-  /* 1.1 in wVersion since that is the version we */ 
-  /* requested. */ 
-    
-  if ( LOBYTE( wsaData.wVersion ) != 1 || 
-       HIBYTE( wsaData.wVersion ) != 1 ) { 
-    /* Tell the user that we couldn't find a useable */ 
-
-    /* winsock.dll. */ 
-    WSACleanup(); 
-    return CURLE_FAILED_INIT; 
-  }
-  return CURLE_OK;
-}
-/* The Windows Sockets DLL is acceptable. Proceed. */ 
-#else
-static CURLcode win32_init(void) { return CURLE_OK; }
-#define win32_cleanup()
+#ifdef	VMS
+int	vms_show = 0;
+#define	FAC_CURL	0xC01
+#define	FAC_SYSTEM	0
+#define	MSG_NORMAL	0
+#define	VMS_STS(c,f,e,s) (((c&0xF)<<28)|((f&0xFFF)<<16)|((e&0x1FFF)<3)|(s&7))
+#define	VMSSTS_HIDE	VMS_STS(1,0,0,0)
+#define	SEV_WARNING	0
+#define	SEV_SUCCESS	1
+#define	SEV_ERROR	2
+#define	SEV_INFO	3	/* success, with an extra hint */
+#define	SEV_FATAL	4
+globalvalue int  CURL_UNSUPPROTO;		/* these are from curlmsg.msg file..... */
+globalvalue int  CURL_FAILINIT;
+globalvalue int  CURL_BADURLSYN;
+globalvalue int  CURL_BADURLUSER;
+globalvalue int  CURL_BADPROXY;
+globalvalue int  CURL_BADHOST;
+globalvalue int  CURL_FAILHOST;
+globalvalue int  CURL_FTPUNKREPLY;
+globalvalue int  CURL_FTPNOACC;
+globalvalue int  CURL_FTPUSRPW;
+globalvalue int  CURL_FTPBADPASS;
+globalvalue int  CURL_FTPBADUSER;
+globalvalue int  CURL_FTPBADPASV;
+globalvalue int  CURL_FTPBAD227;
+globalvalue int  CURL_FTPBADHOST227;
+globalvalue int  CURL_FTPNORECONN;
+globalvalue int  CURL_FTPNOBIN;
+globalvalue int  CURL_PARTIALFILE;
+globalvalue int  CURL_FTPNORETR;
+globalvalue int  CURL_FTPWRITERR;
+globalvalue int  CURL_FTPNOQUOTE;
+globalvalue int  CURL_HTTPPNF;
+globalvalue int  CURL_WRITERR;
+globalvalue int  CURL_BADUSER;
+globalvalue int  CURL_FTPNOSTOR;
+globalvalue int  CURL_READERR;
+globalvalue int  CURL_OUTOFMEM;
+globalvalue int  CURL_TIMEOUT;
+globalvalue int  CURL_FTPNOASCII;
+globalvalue int  CURL_FTPNOPORT;
+globalvalue int  CURL_FTPNOREST;
+globalvalue int  CURL_FTPNOSIZE;
+globalvalue int  CURL_HTTPRNGERR;
+globalvalue int  CURL_HTTPPOSTERR;
+globalvalue int  CURL_SSLNOCONN;
+globalvalue int  CURL_FTPBADRESUME;
+globalvalue int  CURL_FILENOACC;
+globalvalue int  CURL_LDAPNOBIND;
+globalvalue int  CURL_LDAPNOSRCH;
+globalvalue int  CURL_LDAPNOLIB;
+globalvalue int  CURL_LDAPNOFUNC;
+globalvalue int  CURL_ABORTCB;
+globalvalue int  CURL_BADPARAM;
+globalvalue int  CURL_BADORDER;
+globalvalue int  CURL_BADPWD;
+globalvalue int  CURL_MNYREDIR;
+long	vms_cond[] = {
+	VMS_STS(1,FAC_SYSTEM,MSG_NORMAL,SEV_SUCCESS),
+	CURL_UNSUPPROTO,		/* these are from curlmsg.msg file..... */
+	CURL_FAILINIT,
+	CURL_BADURLSYN,
+	CURL_BADURLUSER,
+	CURL_BADPROXY,
+	CURL_BADHOST,
+	CURL_FAILHOST,
+	CURL_FTPUNKREPLY,
+	CURL_FTPNOACC,
+	CURL_FTPUSRPW,
+	CURL_FTPBADPASS,
+	CURL_FTPBADUSER,
+	CURL_FTPBADPASV,
+	CURL_FTPBAD227,
+	CURL_FTPBADHOST227,
+	CURL_FTPNORECONN,
+	CURL_FTPNOBIN,
+	CURL_PARTIALFILE,
+	CURL_FTPNORETR,
+	CURL_FTPWRITERR,
+	CURL_FTPNOQUOTE,
+	CURL_HTTPPNF,
+	CURL_WRITERR,
+	CURL_BADUSER,
+	CURL_FTPNOSTOR,
+	CURL_READERR,
+	CURL_OUTOFMEM,
+	CURL_TIMEOUT,
+	CURL_FTPNOASCII,
+	CURL_FTPNOPORT,
+	CURL_FTPNOREST,
+	CURL_FTPNOSIZE,
+	CURL_HTTPRNGERR,
+	CURL_HTTPPOSTERR,
+	CURL_SSLNOCONN,
+	CURL_FTPBADRESUME,
+	CURL_FILENOACC,
+	CURL_LDAPNOBIND,
+	CURL_LDAPNOSRCH,
+	CURL_LDAPNOLIB,
+	CURL_LDAPNOFUNC,
+	CURL_ABORTCB,
+	CURL_BADPARAM,
+	CURL_BADORDER,
+	CURL_BADPWD,
+	CURL_MNYREDIR
+};
 #endif
 
+extern void hugehelp(void);
 
 /*
  * This is the main global constructor for the app. Call this before
  * _any_ libcurl usage. If this fails, *NO* libcurl functions may be
  * used, or havoc may be the result.
  */
 CURLcode main_init(void)
 {
-  curl_global_init(CURL_GLOBAL_DEFAULT);
-  return win32_init();
+  return curl_global_init(CURL_GLOBAL_DEFAULT);
 }
 
 /*
  * This is the main global destructor for the app. Call this after
  * _all_ libcurl usage is done.
  */
 void main_free(void)
 {
-  win32_cleanup();
   curl_global_cleanup();
 }
 
 int SetHTTPrequest(HttpReq req, HttpReq *store)
 {
   if((*store == HTTPREQ_UNSPEC) ||
@@ -201,13 +262,13 @@
     return 0;
   }
   fprintf(stderr, "You can only select one HTTP request!\n");
   return 1;
 }
 
-static void helpf(char *fmt, ...)
+static void helpf(const char *fmt, ...)
 {
   va_list ap;
   if(fmt) {
     va_start(ap, fmt);
     fputs("curl: ", stderr); /* prefix it */
     vfprintf(stderr, fmt, ap);
@@ -250,15 +311,16 @@
   puts(" -E/--cert <cert[:passwd]> Specifies your certificate file and password (HTTPS)\n"
        "    --cacert <file> CA certifciate to verify peer against (HTTPS)\n"
        "    --connect-timeout <seconds> Maximum time allowed for connection\n"
        " -f/--fail          Fail silently (no output at all) on errors (H)\n"
        " -F/--form <name=content> Specify HTTP POST data (H)\n"
        " -g/--globoff       Disable URL sequences and ranges using {} and []\n"
-       " -h/--help          This help text\n"
-       " -H/--header <line> Custom header to pass to server. (H)");
-  puts(" -i/--include       Include the HTTP-header in the output (H)\n"
+       " -G/--get           Send the -d data with a HTTP GET (H)\n");
+  puts(" -h/--help          This help text\n"
+       " -H/--header <line> Custom header to pass to server. (H)"
+       " -i/--include       Include the HTTP-header in the output (H)\n"
        " -I/--head          Fetch document info only (HTTP HEAD/FTP SIZE)\n"
        "    --interface <interface> Specify the interface to be used\n"
        "    --krb4 <level>  Enable krb4 with specified security level (F)\n"
        " -K/--config        Specify which config file to read\n"
        " -l/--list-only     List only names of an FTP directory (F)");
   puts(" -L/--location      Follow Location: hints (H)\n"
@@ -295,23 +357,24 @@
        " -3/--sslv3         Force usage of SSLv3 (H)");
   puts(" -#/--progress-bar  Display transfer progress as a progress bar\n"
        "    --crlf          Convert LF to CRLF in upload. Useful for MVS (OS/390)");
 }
 
 struct LongShort {
-  char *letter;
-  char *lname;
+  const char *letter;
+  const char *lname;
   bool extraparam;
 };
 
 struct Configurable {
   char *random_file;
   char *egd_file;
   char *useragent;
   char *cookie;
   bool use_resume;
+  bool resume_from_current;
   int resume_from;
   char *postfields;
   long postfieldsize;
   char *referer;
   long timeout;
   long connecttimeout;
@@ -345,12 +408,13 @@
   char *cookiefile;
   char *customrequest;
   char *krb4level;
   bool progressmode;
   bool nobuffer;
   bool globoff;
+  bool use_httpget;
 
   char *writeout; /* %-styled format string to output */
 
   FILE *errors; /* if stderr redirect is requested */
 
   struct curl_slist *quote;
@@ -504,15 +568,15 @@
                                                      has been used */
                                    struct Configurable *config)
 {
   char letter;
   char subletter=0; /* subletters can only occur on long options */
 
-  char *parse=NULL;
+  const char *parse=NULL;
   int res;
-  int j;
+  unsigned int j;
   time_t now;
   int hit=-1;
   bool longopt=FALSE;
   bool singleopt=FALSE; /* when true means '-o foo' used '-ofoo' */
 
 
@@ -532,13 +596,13 @@
 
     {"2", "sslv2",       FALSE},
     {"3", "sslv3",       FALSE},
     {"a", "append",      FALSE},
     {"A", "user-agent",  TRUE},
     {"b", "cookie",      TRUE},
-    {"B", "ftp-ascii",   FALSE}, /* this long format is OBSOLETEE now! */
+    {"B", "ftp-ascii",   FALSE}, /* this long format is OBSOLETE now! */
     {"B", "use-ascii",   FALSE},
     {"c", "continue",    FALSE},
     {"C", "continue-at", TRUE},
     {"d", "data",        TRUE},
     {"da", "data-ascii", TRUE},
     {"db", "data-binary", TRUE},
@@ -546,12 +610,13 @@
     {"e", "referer",     TRUE},
     {"E", "cert",        TRUE},
     {"Ea", "cacert",     TRUE},
     {"f", "fail",        FALSE},
     {"F", "form",        TRUE},
     {"g", "globoff",     FALSE},
+    {"G", "get",         FALSE},
     {"h", "help",        FALSE},
     {"H", "header",      TRUE},
     {"i", "include",     FALSE},
     {"I", "head",        FALSE},
     {"K", "config",      TRUE},
     {"l", "list-only",   FALSE},
@@ -646,13 +711,13 @@
       }
     }
     if(hit < 0) {
       return PARAM_OPTION_UNKNOWN;
     }    
     if(!longopt && aliases[hit].extraparam && parse[1]) {
-      nextarg=&parse[1]; /* this is the actual extra parameter */
+      nextarg=(char *)&parse[1]; /* this is the actual extra parameter */
       singleopt=TRUE;   /* don't loop anymore after this */
     }
     else if((!nextarg || !*nextarg) && aliases[hit].extraparam) {
       return PARAM_REQUIRES_PARAMETER;
     }
     else if(nextarg && aliases[hit].extraparam)
@@ -754,14 +819,20 @@
       /* This makes us continue an ftp transfer */
       config->use_resume^=TRUE;
       fprintf(stderr, "-c is a deprecated switch, use '-C -' instead!\n");
       break;
     case 'C':
       /* This makes us continue an ftp transfer at given position */
-      if(!strequal(nextarg, "-"))
+      if(!strequal(nextarg, "-")) {
         config->resume_from= atoi(nextarg);
+        config->resume_from_current = FALSE;
+      }
+      else {
+        config->resume_from_current = TRUE;
+        config->resume_from = 0;
+      }
       config->use_resume=TRUE;
       break;
     case 'd':
       /* postfield data */
       {
         char *postdata=NULL;
@@ -798,14 +869,14 @@
           free(postdata);
         }
         else
           config->postfields=postdata;
       }
 
-      if(SetHTTPrequest(HTTPREQ_SIMPLEPOST, &config->httpreq))
-        return PARAM_BAD_USE;
+/*      if(SetHTTPrequest(HTTPREQ_SIMPLEPOST, &config->httpreq))
+        return PARAM_BAD_USE;*/
       break;
     case 'D':
       /* dump-header to given file name */
       GetStr(&config->headerfile, nextarg);
       break;
     case 'e':
@@ -824,12 +895,28 @@
       if(subletter == 'a') {
         /* CA info PEM file */
         GetStr(&config->cacert, nextarg);
       }
       else {
 	char *ptr = strchr(nextarg, ':');
+        /* Since we live in a world of weirdness and confusion, the win32
+           dudes can use : when using drive letters and thus
+           c:\file:password needs to work. In order not to break
+           compatibility, we still use : as separator, but we try to detect
+           when it is used for a file name! On windows. */
+#ifdef WIN32
+        if(ptr &&
+           (ptr == &nextarg[1]) &&
+           (nextarg[2] == '\\') &&
+           (isalpha((int)nextarg[0])) )
+          /* colon in the second column, followed by a backslash, and the
+             first character is an alphabetic letter:
+
+             this is a drive letter colon */
+          ptr = strchr(&nextarg[3], ':'); /* find the next one instead */
+#endif
 	if(ptr) {
 	  /* we have a password too */
 	  *ptr=0;
 	  ptr++;
 	  GetStr(&config->cert_passwd, ptr);
 	}
@@ -852,12 +939,16 @@
       break;
 
     case 'g': /* g disables URLglobbing */
       config->globoff ^= TRUE;
       break;
 
+    case 'G': /* HTTP GET */
+      config->use_httpget = TRUE;
+      break;
+
     case 'h': /* h for help */
       help();
       return PARAM_HELP_REQUESTED;
     case 'H':
       /* A custom header to append to a list */
       config->headers = curl_slist_append(config->headers, nextarg);
@@ -1055,13 +1146,13 @@
         config->timecond = TIMECOND_LASTMOD;
         nextarg++;
         break;
       }
       now=time(NULL);
       config->condtime=curl_getdate(nextarg, &now);
-      if(-1 == config->condtime) {
+      if(-1 == (int)config->condtime) {
         /* now let's see if it is a file name to get the time from instead! */
         struct stat statbuf;
         if(-1 == stat(nextarg, &statbuf)) {
           /* failed, remove time condition */
           config->timecond = TIMECOND_NONE;
         }
@@ -1221,16 +1311,16 @@
         /* we passed in a parameter that wasn't used! */
         res = PARAM_GOT_EXTRA_PARAMETER;
 
       if(res != PARAM_OK) {
         /* the help request isn't really an error */
         if(!strcmp(filename, "-")) {
-          filename="<stdin>";
+          filename=(char *)"<stdin>";
         }
         if(PARAM_HELP_REQUESTED != res) {
-          char *reason;
+          const char *reason;
           switch(res) {
           default:
           case PARAM_GOT_EXTRA_PARAMETER:
             reason = "had unsupported trailing garbage";
             break;
           case PARAM_OPTION_UNKNOWN:
@@ -1452,12 +1542,14 @@
   char *urlbuffer=NULL;
   int infilesize=-1; /* -1 means unknown */
   bool stillflags=TRUE;
 
   bool allocuseragent=FALSE;
 
+  char *httpgetfields=NULL;
+
   CURL *curl;
   int res;
   int i;
 
 #ifdef MALLOCDEBUG
   /* this sends all memory debug messages to a logfile named memdump */
@@ -1465,12 +1557,13 @@
 #endif
 
   main_init(); /* inits */
 
   config->showerror=TRUE;
   config->conf=CONF_DEFAULT;
+  config->use_httpget=FALSE;
 
   if(argc>1 &&
      (!strnequal("--", argv[1], 2) && (argv[1][0] == '-')) &&
      strchr(argv[1], 'q')) {
     /*
      * The first flag, that is not a verbose name, but a shortname
@@ -1533,13 +1626,13 @@
 	  i++;
       }
     }
     else {
       bool used;
       /* just add the URL please */
-      res = getparameter("--url", argv[i], &used, config);
+      res = getparameter((char *)"--url", argv[i], &used, config);
       if(res)
         return res;
     }
   }
 
   if(!config->url_list) {
@@ -1552,12 +1645,29 @@
              CURL_NAME "/" CURL_VERSION " (" OS ") " "%s", curl_version());
     config->useragent= useragent;
   }
   else
     allocuseragent = TRUE;
 
+  if (config->postfields) {
+    if (config->use_httpget) {
+      /* Use the postfields data for a http get */
+      httpgetfields = strdup(config->postfields);
+      free(config->postfields);
+      config->postfields = NULL;
+      if(SetHTTPrequest(HTTPREQ_GET, &config->httpreq)) {
+        free(httpgetfields);
+        return PARAM_BAD_USE;
+      }
+    }
+    else {
+      if(SetHTTPrequest(HTTPREQ_SIMPLEPOST, &config->httpreq))
+        return PARAM_BAD_USE;
+    }
+  }
+
   /*
    * Get a curl handle to use for all forthcoming curl transfers.  Cleanup
    * when all transfers are done. This is supported with libcurl 7.7 and
    * should not be attempted on previous versions.
    */
   curl = curl_easy_init();
@@ -1636,18 +1746,19 @@
           /* fill '#1' ... '#9' terms from URL pattern */
           char *storefile = outfile;
           outfile = match_url(storefile, urls);
           free(storefile);
         }
       
-        if((0 == config->resume_from) && config->use_resume) {
+        if(config->resume_from_current) {
           /* we're told to continue where we are now, then we get the size of
              the file as it is now and open it for append instead */
 
           struct stat fileinfo;
 
+/*VMS?? -- Danger, the filesize is only valid for stream files */
           if(0 == stat(outfile, &fileinfo)) {
             /* set offset to current file size: */
             config->resume_from = fileinfo.st_size;
           }
           /* else let offset remain 0 */
         }
@@ -1694,24 +1805,32 @@
           else
             /* thers is no trailing slash on the URL */
             sprintf(urlbuffer, "%s/%s", url, config->infile);
           
           url = urlbuffer; /* use our new URL instead! */
         }
+/*VMS??-- Reading binary from files can be a problem... */
+/*VMS??   Only FIXED, VAR etc WITHOUT implied CC will work */
+/*VMS??   Others need a \n appended to a line */
+/*VMS??-- Stat gives a size but this is UNRELIABLE in VMS */
+/*VMS??   As a f.e. a fixed file with implied CC needs to have a byte added */
+/*VMS??   for every record processed, this can by derived from Filesize & recordsize */
+/*VMS??   for VARiable record files the records need to be counted! */
+/*VMS??   for every record add 1 for linefeed and subtract 2 for the record header */
+/*VMS??   for VARIABLE header files only the bare record data needs to be considered with one appended if implied CC */
 
         infd=(FILE *) fopen(config->infile, "rb");
         if (!infd || stat(config->infile, &fileinfo)) {
           helpf("Can't open '%s'!\n", config->infile);
           return CURLE_READ_ERROR;
         }
         infilesize=fileinfo.st_size;
       
       }
       if((config->conf&CONF_UPLOAD) &&
-         config->use_resume &&
-         (0==config->resume_from)) {
+         config->resume_from_current) {
         config->resume_from = -1; /* -1 will then force get-it-yourself */
       }
       if(config->headerfile) {
         /* open file for output: */
         if(strcmp(config->headerfile,"-")) {
           heads.filename = config->headerfile;
@@ -1733,12 +1852,40 @@
       if (urlnum > 1) {
         fprintf(stderr, "\n[%d/%d]: %s --> %s\n",
                 i+1, urlnum, url, outfile ? outfile : "<stdout>");
         if (separator)
           printf("%s%s\n", CURLseparator, url);
       }
+      if (httpgetfields) {
+        /* Find out whether the url contains a file name */
+        char *pc =strstr(url, "://");
+        if(pc)
+          pc+=3;
+        else
+          pc=url;
+        pc = strrchr(pc, '/');
+
+        /*
+         * Then append ? followed by the get fields to the url.
+         */
+        urlbuffer=(char *)malloc(strlen(url) + strlen(httpgetfields) + 2);
+        if(!urlbuffer) {
+          helpf("out of memory\n");
+          return CURLE_OUT_OF_MEMORY;
+        }
+        /* Append  / before the ? to create a well-formed url
+           if the url contains a hostname only
+        */
+        if (pc)
+          sprintf(urlbuffer, "%s?%s", url, httpgetfields);
+        else
+          sprintf(urlbuffer, "%s/?%s", url, httpgetfields);
+ 
+        free(url); /* free previous URL */
+        url = urlbuffer; /* use our new URL instead! */
+      }
 
       if(!config->errors)
         config->errors = stderr;
 
 #if defined(WIN32) && !defined(__CYGWIN32__)
       if(!outfile && !(config->conf & CONF_GETTEXT)) {
@@ -1798,13 +1945,16 @@
       curl_easy_setopt(curl, CURLOPT_SSLCERTPASSWD, config->cert_passwd);
 
       if(config->cacert) {
         /* available from libcurl 7.5: */
         curl_easy_setopt(curl, CURLOPT_CAINFO, config->cacert);
         curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, TRUE);
+        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 2);
       }
+      else
+        curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 1);
       
       if(config->conf&(CONF_NOBODY|CONF_USEREMOTETIME)) {
         /* no body or use remote time */
         /* new in 7.5 */
         curl_easy_setopt(curl, CURLOPT_FILETIME, TRUE);
       }
@@ -1852,32 +2002,36 @@
       res = curl_easy_perform(curl);
         
       if(config->writeout) {
         ourWriteOut(curl, config->writeout);
       }
         
+#ifdef	VMS
+	if (!config->showerror)  {
+		vms_show = VMSSTS_HIDE;
+	}
+#else
       if((res!=CURLE_OK) && config->showerror)
         fprintf(config->errors, "curl: (%d) %s\n", res, errorbuffer);
+#endif
 
-      if((config->errors != stderr) &&
-         (config->errors != stdout))
-        /* it wasn't directed to stdout or stderr so close the file! */
-        fclose(config->errors);
-    
       if(config->headerfile && !headerfilep && heads.stream)
         fclose(heads.stream);
 
       if(urlbuffer)
         free(urlbuffer);
       if (outfile && !strequal(outfile, "-") && outs.stream)
         fclose(outs.stream);
       if (config->infile)
         fclose(infd);
       if(headerfilep)
         fclose(headerfilep);
       
+      if (httpgetfields)
+        free(httpgetfields);
+
       if(url)
         free(url);
 
       if(outfile)
         free(outfile);
     }
@@ -1904,12 +2058,17 @@
   if(allocuseragent)
     free(config->useragent);
 
   /* cleanup the curl handle! */
   curl_easy_cleanup(curl);
 
+  if((config->errors != stderr) &&
+     (config->errors != stdout))
+    /* it wasn't directed to stdout or stderr so close the file! */
+    fclose(config->errors);
+
   main_free(); /* cleanup */
 
   return res;
 }
 
 
@@ -1919,13 +2078,17 @@
   struct Configurable config;
   memset(&config, 0, sizeof(struct Configurable));
   
   res = operate(&config, argc, argv);
   free_config_fields(&config);
 
+#ifdef	VMS
+  return (vms_cond[res]|vms_show);
+#else
   return res;
+#endif
 }
 
 static char *my_get_line(FILE *fp)
 {
    char buf[4096];
    char *nl = NULL;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/Makefile.am	2001-05-23 05:17:58.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/Makefile.am	2001-08-06 21:18:34.000000000 +0800
@@ -1,8 +1,8 @@
 #
-# $Id: Makefile.am,v 1.12 2001/05/22 21:17:58 bagder Exp $
+# $Id: Makefile.am,v 1.13 2001/08/06 13:18:34 bagder Exp $
 #
 
 # Some flags needed when trying to cause warnings ;-)
 # CFLAGS = -g -DMALLOCDEBUG # -Wall -pedantic
 #CPPFLAGS = -DGLOBURL -DCURL_SEPARATORS
 
@@ -23,13 +23,13 @@
 curl_LDADD = ../lib/libcurl.la
 curl_DEPENDENCIES = ../lib/libcurl.la
 BUILT_SOURCES = hugehelp.c
 CLEANFILES = hugehelp.c
 NROFF=@NROFF@
 
-EXTRA_DIST = mkhelp.pl config-win32.h \
+EXTRA_DIST = mkhelp.pl config-win32.h curlmsg.msg\
 	Makefile.vc6 Makefile.b32 Makefile.m32 config.h.in
 
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
 MANPAGE=$(top_srcdir)/docs/curl.1
 README=$(top_srcdir)/docs/MANUAL
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/Makefile.b32 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/Makefile.b32
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/Makefile.b32	2000-12-05 21:42:47.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/Makefile.b32	2001-08-09 17:10:36.000000000 +0800
@@ -1,7 +1,9 @@
 ############################################################
+# $Id: Makefile.b32,v 1.2 2001/08/09 09:10:36 bagder Exp $
+#
 #  Makefile.b32 - Borland's C++ Compiler 5.X
 #
 #  'src' directory
 #
 #  Written by Jaepil Kim, pit@paradise.net.nz
 ############################################################
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/Makefile.in	2001-05-31 17:01:26.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/Makefile.in	2001-08-20 15:22:13.000000000 +0800
@@ -8,13 +8,13 @@
 # This program is distributed in the hope that it will be useful,
 # but WITHOUT ANY WARRANTY, to the extent permitted by law; without
 # even the implied warranty of MERCHANTABILITY or FITNESS FOR A
 # PARTICULAR PURPOSE.
 
 #
-# $Id: Makefile.am,v 1.12 2001/05/22 21:17:58 bagder Exp $
+# $Id: Makefile.am,v 1.13 2001/08/06 13:18:34 bagder Exp $
 #
 
 # Some flags needed when trying to cause warnings ;-)
 # CFLAGS = -g -DMALLOCDEBUG # -Wall -pedantic
 #CPPFLAGS = -DGLOBURL -DCURL_SEPARATORS
 
@@ -106,13 +106,13 @@
 curl_LDADD = ../lib/libcurl.la
 curl_DEPENDENCIES = ../lib/libcurl.la
 BUILT_SOURCES = hugehelp.c
 CLEANFILES = hugehelp.c
 NROFF = @NROFF@
 
-EXTRA_DIST = mkhelp.pl config-win32.h 	Makefile.vc6 Makefile.b32 Makefile.m32 config.h.in
+EXTRA_DIST = mkhelp.pl config-win32.h curlmsg.msg 	Makefile.vc6 Makefile.b32 Makefile.m32 config.h.in
 
 
 AUTOMAKE_OPTIONS = foreign no-dependencies
 
 MANPAGE = $(top_srcdir)/docs/curl.1
 README = $(top_srcdir)/docs/MANUAL
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/Makefile.m32 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/Makefile.m32
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/Makefile.m32	2000-10-06 18:48:03.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/Makefile.m32	2001-08-09 17:10:36.000000000 +0800
@@ -1,7 +1,9 @@
 #############################################################
+# $Id: Makefile.m32,v 1.5 2001/08/09 09:10:36 bagder Exp $
+#
 ## Makefile for building curl.exe with MingW32 (GCC-2.95) and
 ## optionally OpenSSL (0.9.6)
 ##
 ## Use: make -f Makefile.m32 [SSL=1] [DYN=1]
 ##
 ## Comments to: Troy Engel <tengel@sonic.net> or
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/urlglob.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/urlglob.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/urlglob.c	2001-01-23 18:14:43.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/urlglob.c	2001-08-14 17:17:21.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: urlglob.c,v 1.13 2001/01/23 10:14:43 bagder Exp $
+ * $Id: urlglob.c,v 1.14 2001/08/14 09:17:21 bagder Exp $
  *****************************************************************************/
 
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>
 #include <ctype.h>
@@ -392,13 +392,13 @@
   URLPattern pat;
   int i;
   int allocsize;
   int stringlen=0;
   char numbuf[18];
   char *appendthis;
-  size_t appendlen;
+  int appendlen;
 
   /* We cannot use the glob_buffer for storage here since the filename may
    * be longer than the URL we use. We allocate a good start size, then
    * we need to realloc in case of need.
    */
   allocsize=strlen(filename);
@@ -421,24 +421,24 @@
         continue;
       }
       pat = glob->pattern[i];
       switch (pat.type) {
       case UPTSet:
 	appendthis = pat.content.Set.elements[pat.content.Set.ptr_s];
-	appendlen = strlen(pat.content.Set.elements[pat.content.Set.ptr_s]);
+	appendlen = (int)strlen(pat.content.Set.elements[pat.content.Set.ptr_s]);
 	break;
       case UPTCharRange:
         numbuf[0]=pat.content.CharRange.ptr_c;
         numbuf[1]=0;
         appendthis=numbuf;
         appendlen=1;
 	break;
       case UPTNumRange:
 	sprintf(numbuf, "%0*d", pat.content.NumRange.padlength, pat.content.NumRange.ptr_n);
         appendthis = numbuf;
-        appendlen = strlen(numbuf);
+        appendlen = (int)strlen(numbuf);
 	break;
       default:
 	printf("internal error: invalid pattern type (%d)\n", pat.type);
         return NULL;
       }
       ++filename;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/version.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/version.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/version.h	2001-06-07 17:33:36.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/version.h	2001-08-20 15:49:14.000000000 +0800
@@ -1,3 +1,3 @@
 #define CURL_NAME "curl"
-#define CURL_VERSION "7.8"
+#define CURL_VERSION "7.8.1"
 #define CURL_ID CURL_NAME " " CURL_VERSION " (" OS ") "
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/writeout.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/writeout.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/src/writeout.c	2001-04-19 19:24:29.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/src/writeout.c	2001-08-14 17:17:21.000000000 +0800
@@ -15,13 +15,13 @@
  * furnished to do so, under the terms of the MPL or the MIT/X-derivate
  * licenses. You may pick one of these licenses.
  *
  * This software is distributed on an "AS IS" basis, WITHOUT WARRANTY OF ANY
  * KIND, either express or implied.
  *
- * $Id: writeout.c,v 1.6 2001/04/19 11:24:29 bagder Exp $
+ * $Id: writeout.c,v 1.7 2001/08/14 09:17:21 bagder Exp $
  *****************************************************************************/
 
 #include <stdio.h>
 #include <string.h>
 
 #include <curl/curl.h>
@@ -46,13 +46,13 @@
   VAR_REQUEST_SIZE,
   VAR_EFFECTIVE_URL,
   VAR_NUM_OF_VARS /* must be the last */
 } replaceid;
 
 struct variable {
-  char *name;
+  const char *name;
   replaceid id;
 };
 
 
 static struct variable replacements[]={
   {"url_effective", VAR_EFFECTIVE_URL},
@@ -64,13 +64,13 @@
   {"size_header", VAR_HEADER_SIZE},
   {"size_request", VAR_REQUEST_SIZE},
   {"size_download", VAR_SIZE_DOWNLOAD},
   {"size_upload", VAR_SIZE_UPLOAD},
   {"speed_download", VAR_SPEED_DOWNLOAD},
   {"speed_upload", VAR_SPEED_UPLOAD},
-  {NULL}
+  {NULL, 0}
 };
 
 void ourWriteOut(CURL *curl, char *writeinfo)
 {
   FILE *stream = stdout;
   char *ptr=writeinfo;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/data/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/data/Makefile.am	2001-05-28 22:30:58.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data/Makefile.am	2001-08-07 20:42:01.000000000 +0800
@@ -2,9 +2,12 @@
 install:
 
 test:
 	[ -f test1 ] || ln -s $(srcdir)/test* .
 
 EXTRA_DIST = \
-test1    test11   test14   test3    test400  test7    \
-test10   test12   test2    test300  test5    test8    \
-test100  test13   test200  test4    test6    test9    
+test1    test104  test13   test19   test21   test3    test5    \
+test10   test105  test14   test2    test22   test300  test6    \
+test100  test106  test15   test20   test23   test33   test7    \
+test101  test107  test16   test200  test24   test4    test8    \
+test102  test11   test17   test201  test25   test400  test9    \
+test103  test12   test18   test202  test26   test43   
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/data/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/data/Makefile.in	2001-06-07 17:36:08.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data/Makefile.in	2001-08-20 15:52:17.000000000 +0800
@@ -82,13 +82,13 @@
 RANLIB = @RANLIB@
 STRIP = @STRIP@
 VERSION = @VERSION@
 VERSIONNUM = @VERSIONNUM@
 YACC = @YACC@
 
-EXTRA_DIST =  test1    test11   test14   test3    test400  test7    test10   test12   test2    test300  test5    test8    test100  test13   test200  test4    test6    test9    
+EXTRA_DIST =  test1    test104  test13   test19   test21   test3    test5    test10   test105  test14   test2    test22   test300  test6    test100  test106  test15   test20   test23   test33   test7    test101  test107  test16   test200  test24   test4    test8    test102  test11   test17   test201  test25   test400  test9    test103  test12   test18   test202  test26   test43   
 
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
 CONFIG_HEADER = ../../config.h ../../src/config.h
 CONFIG_CLEAN_FILES = 
 DIST_COMMON =  Makefile.am Makefile.in
 
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test101
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test102
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test103
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test104
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test105
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test106
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test107
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test15
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test16
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test17
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test18
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test19
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test20
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/data/test200 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data/test200
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/data/test200	2001-05-28 20:29:08.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data/test200	2001-08-06 20:08:09.000000000 +0800
@@ -9,16 +9,16 @@
 </data>
 </reply>
 
 # Client-side
 <client>
  <name>
-file:// with relative path
+basic file:// file
  </name>
  <command>
-file://log/test200.txt
+file://localhost/%PWD/log/test200.txt
 </command>
 <file name="log/test200.txt">
 foo
    bar
 bar
    foo
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test201
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test202
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test21
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test22
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test23
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test24
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test25
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test26
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test33
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/data: test43
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/ftpserver.pl /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/ftpserver.pl
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/ftpserver.pl	2001-05-23 23:02:58.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/ftpserver.pl	2001-06-12 16:38:11.000000000 +0800
@@ -1,9 +1,9 @@
 #!/usr/bin/perl
 #
-# $Id: ftpserver.pl,v 1.18 2001/05/23 15:02:58 bagder Exp $
+# $Id: ftpserver.pl,v 1.19 2001/06/12 08:38:11 bagder Exp $
 # This is the FTP server designed for the curl test suite.
 #
 # It is meant to excersive curl, it is not meant to become a fully working
 # or even very standard compliant server.
 #
 # You may optionally specify port on the command line, otherwise it'll
@@ -159,17 +159,15 @@
 
 sub SIZE_command {
     my $testno = $_[0];
 
     logmsg "SIZE number $testno\n";
 
-    my $filename = "data/reply$testno.txt";
+    my @data = getpart("reply", "size");
 
-    my ($dev,$ino,$mode,$nlink,$uid,$gid,$rdev,$size,
-        $atime,$mtime,$ctime,$blksize,$blocks)
-        = stat($filename);
+    my $size = $data[0];
 
     if($size) {
         print "213 $size\r\n";
     }
     else {
         print "550 $testno: No such file or directory.\r\n";
@@ -195,33 +193,42 @@
     loadtest("data/test$testno");
 
     my @data = getpart("reply", "data");
 
     my $size=0;
     for(@data) {
-        $size =+ length($_);
+        $size += length($_);
     }
 
     if($size) {
     
         if($rest) {
             # move read pointer forward
             $size -= $rest;
+            if($verbose) {
+                print STDERR "** REST $rest was removed from size.\n";
+            }
         }
         print "150 Binary data connection for $testno () ($size bytes).\r\n";
         $rest=0; # reset rest again
 
+        if($verbose) {
+            print STDERR "150 Binary data connection for $testno ($size bytes).\n";
+        }
         for(@data) {
             print SOCK $_;
         }
         close(SOCK);
 
         print "226 File transfer complete\r\n";
     }
     else {
         print "550 $testno: No such file or directory.\r\n";
+        if($verbose) {
+            print STDERR "550 $testno: no such file\n";
+        }
     }
     return 0;
 }
 
 sub STOR_command {
     my $testno=$_[0];
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests: httpsserver.pl
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/Makefile.am /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/Makefile.am
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/Makefile.am	2001-05-28 22:40:48.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/Makefile.am	2001-08-03 14:38:10.000000000 +0800
@@ -1,8 +1,8 @@
-EXTRA_DIST = ftpserver.pl httpserver.pl runtests.pl ftpsserver.pl stunnel.pm \
-	getpart.pm
+EXTRA_DIST = ftpserver.pl httpserver.pl httpsserver.pl runtests.pl \
+	     ftpsserver.pl stunnel.pm getpart.pm
 
 SUBDIRS = data
 
 PERLFLAGS = -I$(srcdir)
 
 all:
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/Makefile.in	2001-06-07 17:36:04.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/Makefile.in	2001-08-20 15:52:13.000000000 +0800
@@ -82,13 +82,13 @@
 RANLIB = @RANLIB@
 STRIP = @STRIP@
 VERSION = @VERSION@
 VERSIONNUM = @VERSIONNUM@
 YACC = @YACC@
 
-EXTRA_DIST = ftpserver.pl httpserver.pl runtests.pl ftpsserver.pl stunnel.pm 	getpart.pm
+EXTRA_DIST = ftpserver.pl httpserver.pl httpsserver.pl runtests.pl 	     ftpsserver.pl stunnel.pm getpart.pm
 
 
 SUBDIRS = data
 
 PERLFLAGS = -I$(srcdir)
 mkinstalldirs = $(SHELL) $(top_srcdir)/mkinstalldirs
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/runtests.pl /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/runtests.pl
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8/tests/runtests.pl	2001-05-28 23:26:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/repos/curl-7.8.1/tests/runtests.pl	2001-08-08 15:51:00.000000000 +0800
@@ -1,8 +1,8 @@
 #!/usr/bin/perl
-# $Id: runtests.pl,v 1.33 2001/05/28 15:26:15 bagder Exp $
+# $Id: runtests.pl,v 1.38 2001/08/08 07:51:00 bagder Exp $
 #
 # Main curl test script, in perl to run on more platforms
 #
 #######################################################################
 # These should be the only variables that might be needed to get edited:
 
@@ -65,12 +65,15 @@
 my $short;
 my $verbose;
 my $debugprotocol;
 my $anyway;
 my $gdbthis;      # run test case with gdb debugger
 my $keepoutfiles; # keep stdout and stderr files after tests
+my $pwd;          # current working directory
+
+chomp($pwd = `pwd`);
 
 #######################################################################
 # Return the pid of the server as found in the given pid file
 #
 sub serverpid {
     my $PIDFILE = $_[0];
@@ -440,12 +443,14 @@
     $cmd =~ s/%HOSTIP/$HOSTIP/g;
     $cmd =~ s/%HOSTPORT/$HOSTPORT/g;
     $cmd =~ s/%HTTPSPORT/$HTTPSPORT/g;
     $cmd =~ s/%FTPPORT/$FTPPORT/g;
     $cmd =~ s/%FTPSPORT/$FTPSPORT/g;
     $cmd =~ s/%SRCDIR/$srcdir/g;
+    $cmd =~ s/%PWD/$pwd/g;
+
     #$cmd =~ s/%HOSTNAME/$HOSTNAME/g;
 
     if($memory_debug) {
         unlink($memdump);
     }
 
@@ -467,13 +472,13 @@
         $out="--output $CURLOUT ";
     }
 
     # run curl, add -v for debug information output
     my $cmdargs="$out--include -v $cmd";
 
-    my @stdintest = getpart("verify", "stdin");
+    my @stdintest = getpart("client", "stdin");
 
     if(@stdintest) {
         my $stdinfile="$LOGDIR/stdin-for-$testnum";
         writearray($stdinfile, \@stdintest);
 
         $cmdargs .= " <$stdinfile";
@@ -509,52 +514,54 @@
             if(!$short) {
                 print " error OK";
             }
         }
         else {
             if(!$short) {
-                print "curl returned $res\n";
+                print "curl returned $res, ".(0+$errorcode)." was expected\n";
             }
-            print " error FAILED";
+            print " error FAILED\n";
             return 1;
         }
     }
 
     if (@validstdout) {
         # verify redirected stdout
         my @actual = loadarray($STDOUT);
 
         $res = compare(\@actual, \@validstdout);
         if($res) {
-            print " stdout FAILED";
+            print " stdout FAILED\n";
             return 1;
         }
         if(!$short) {
             print " stdout OK";
         }
     }
 
-    if(@reply) {
+    my %replyattr = getpartattr("reply", "data");
+    if(!$replyattr{'nocheck'} &&
+       @reply) {
         # verify the received data
         my @out = loadarray($CURLOUT);
         $res = compare(\@out, \@reply);
         if ($res) {
-            print " data FAILED";
+            print " data FAILED\n";
             return 1;
         }
         if(!$short) {
             print " data OK";
         }
     }
 
     if(@upload) {
         # verify uploaded data
         my @out = loadarray("$LOGDIR/upload.$testnum");
         $res = compare(\@out, \@upload);
         if ($res) {
-            print " upload FAILED";
+            print " upload FAILED\n";
             return 1;
         }
         if(!$short) {
             print " upload OK";
         }
     }
@@ -562,19 +569,24 @@
     if(@protocol) {
         # verify the sent request
         my @out = loadarray($SERVERIN);
 
         # what to cut off from the live protocol sent by curl
         my @strip = getpart("verify", "strip");
-        @out = striparray( $strip[0], \@out);
 
-        my @protstrip= striparray($strip[0], \@protocol);
+        my @protstrip=@protocol;
+
+        for(@strip) {
+            # strip all patterns from both arrays
+            @out = striparray( $_, \@out);
+            @protstrip= striparray( $_, \@protstrip);
+        }
 
         $res = compare(\@out, \@protstrip);
         if($res) {
-            print " protocol FAILED";
+            print " protocol FAILED\n";
             return 1;
         }
         if(!$short) {
             print " protocol OK";
         }
     }
@@ -590,13 +602,13 @@
             exit;
         }
         my @generated=loadarray($filename);
 
         $res = compare(\@generated, \@outfile);
         if($res) {
-            print " output FAILED";
+            print " output FAILED\n";
             return 1;
         }
         if(!$short) {
             print " output OK";
         }        
     }
