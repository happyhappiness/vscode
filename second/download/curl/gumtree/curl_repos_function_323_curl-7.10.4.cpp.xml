<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="0.9.5" language="C++" filename="usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/gumtree/curl_repos_function_323_curl-7.10.4.cpp" pos:tabs="8"><function><type><name pos:line="1" pos:column="1">CURLcode<pos:position pos:line="1" pos:column="9"/></name></type> <name pos:line="1" pos:column="10">Curl_ftp_done<pos:position pos:line="1" pos:column="23"/></name><parameter_list pos:line="1" pos:column="23">(<parameter><decl><type><name><name pos:line="1" pos:column="24">struct<pos:position pos:line="1" pos:column="30"/></name> <name pos:line="1" pos:column="31">connectdata<pos:position pos:line="1" pos:column="42"/></name></name> <modifier pos:line="1" pos:column="43">*<pos:position pos:line="1" pos:column="44"/></modifier></type><name pos:line="1" pos:column="44">conn<pos:position pos:line="1" pos:column="48"/></name></decl></parameter>)<pos:position pos:line="1" pos:column="49"/></parameter_list>
<block pos:line="2" pos:column="1">{
  <decl_stmt><decl><type><name><name pos:line="3" pos:column="3">struct<pos:position pos:line="3" pos:column="9"/></name> <name pos:line="3" pos:column="10">SessionHandle<pos:position pos:line="3" pos:column="23"/></name></name> <modifier pos:line="3" pos:column="24">*<pos:position pos:line="3" pos:column="25"/></modifier></type><name pos:line="3" pos:column="25">data<pos:position pos:line="3" pos:column="29"/></name> <init pos:line="3" pos:column="30">= <expr><name><name pos:line="3" pos:column="32">conn<pos:position pos:line="3" pos:column="36"/></name><operator pos:line="3" pos:column="36">-&gt;<pos:position pos:line="3" pos:column="41"/></operator><name pos:line="3" pos:column="38">data<pos:position pos:line="3" pos:column="42"/></name></name></expr></init></decl>;<pos:position pos:line="3" pos:column="43"/></decl_stmt>
  <decl_stmt><decl><type><name><name pos:line="4" pos:column="3">struct<pos:position pos:line="4" pos:column="9"/></name> <name pos:line="4" pos:column="10">FTP<pos:position pos:line="4" pos:column="13"/></name></name> <modifier pos:line="4" pos:column="14">*<pos:position pos:line="4" pos:column="15"/></modifier></type><name pos:line="4" pos:column="15">ftp<pos:position pos:line="4" pos:column="18"/></name> <init pos:line="4" pos:column="19">= <expr><name><name pos:line="4" pos:column="21">conn<pos:position pos:line="4" pos:column="25"/></name><operator pos:line="4" pos:column="25">-&gt;<pos:position pos:line="4" pos:column="30"/></operator><name pos:line="4" pos:column="27">proto<pos:position pos:line="4" pos:column="32"/></name><operator pos:line="4" pos:column="32">.<pos:position pos:line="4" pos:column="33"/></operator><name pos:line="4" pos:column="33">ftp<pos:position pos:line="4" pos:column="36"/></name></name></expr></init></decl>;<pos:position pos:line="4" pos:column="37"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="5" pos:column="3">ssize_t<pos:position pos:line="5" pos:column="10"/></name></type> <name pos:line="5" pos:column="11">nread<pos:position pos:line="5" pos:column="16"/></name></decl>;<pos:position pos:line="5" pos:column="17"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="6" pos:column="3">int<pos:position pos:line="6" pos:column="6"/></name></type> <name pos:line="6" pos:column="7">ftpcode<pos:position pos:line="6" pos:column="14"/></name></decl>;<pos:position pos:line="6" pos:column="15"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="7" pos:column="3">CURLcode<pos:position pos:line="7" pos:column="11"/></name></type> <name pos:line="7" pos:column="12">result<pos:position pos:line="7" pos:column="18"/></name><init pos:line="7" pos:column="18">=<expr><name pos:line="7" pos:column="19">CURLE_OK<pos:position pos:line="7" pos:column="27"/></name></expr></init></decl>;<pos:position pos:line="7" pos:column="28"/></decl_stmt>

  <if pos:line="9" pos:column="3">if<condition pos:line="9" pos:column="5">(<expr><name><name pos:line="9" pos:column="6">data<pos:position pos:line="9" pos:column="10"/></name><operator pos:line="9" pos:column="10">-&gt;<pos:position pos:line="9" pos:column="15"/></operator><name pos:line="9" pos:column="12">set<pos:position pos:line="9" pos:column="15"/></name><operator pos:line="9" pos:column="15">.<pos:position pos:line="9" pos:column="16"/></operator><name pos:line="9" pos:column="16">upload<pos:position pos:line="9" pos:column="22"/></name></name></expr>)<pos:position pos:line="9" pos:column="23"/></condition><then pos:line="9" pos:column="23"> <block pos:line="9" pos:column="24">{
    <if pos:line="10" pos:column="5">if<condition pos:line="10" pos:column="7">(<expr><operator pos:line="10" pos:column="8">(<pos:position pos:line="10" pos:column="9"/></operator><operator pos:line="10" pos:column="9">-<pos:position pos:line="10" pos:column="10"/></operator><literal type="number" pos:line="10" pos:column="10">1<pos:position pos:line="10" pos:column="11"/></literal> <operator pos:line="10" pos:column="12">!=<pos:position pos:line="10" pos:column="14"/></operator> <name><name pos:line="10" pos:column="15">data<pos:position pos:line="10" pos:column="19"/></name><operator pos:line="10" pos:column="19">-&gt;<pos:position pos:line="10" pos:column="24"/></operator><name pos:line="10" pos:column="21">set<pos:position pos:line="10" pos:column="24"/></name><operator pos:line="10" pos:column="24">.<pos:position pos:line="10" pos:column="25"/></operator><name pos:line="10" pos:column="25">infilesize<pos:position pos:line="10" pos:column="35"/></name></name><operator pos:line="10" pos:column="35">)<pos:position pos:line="10" pos:column="36"/></operator> <operator pos:line="10" pos:column="37">&amp;&amp;<pos:position pos:line="10" pos:column="47"/></operator>
       <operator pos:line="11" pos:column="8">(<pos:position pos:line="11" pos:column="9"/></operator><name><name pos:line="11" pos:column="9">data<pos:position pos:line="11" pos:column="13"/></name><operator pos:line="11" pos:column="13">-&gt;<pos:position pos:line="11" pos:column="18"/></operator><name pos:line="11" pos:column="15">set<pos:position pos:line="11" pos:column="18"/></name><operator pos:line="11" pos:column="18">.<pos:position pos:line="11" pos:column="19"/></operator><name pos:line="11" pos:column="19">infilesize<pos:position pos:line="11" pos:column="29"/></name></name> <operator pos:line="11" pos:column="30">!=<pos:position pos:line="11" pos:column="32"/></operator> <operator pos:line="11" pos:column="33">*<pos:position pos:line="11" pos:column="34"/></operator><name><name pos:line="11" pos:column="34">ftp<pos:position pos:line="11" pos:column="37"/></name><operator pos:line="11" pos:column="37">-&gt;<pos:position pos:line="11" pos:column="42"/></operator><name pos:line="11" pos:column="39">bytecountp<pos:position pos:line="11" pos:column="49"/></name></name><operator pos:line="11" pos:column="49">)<pos:position pos:line="11" pos:column="50"/></operator> <operator pos:line="11" pos:column="51">&amp;&amp;<pos:position pos:line="11" pos:column="61"/></operator>
       <operator pos:line="12" pos:column="8">!<pos:position pos:line="12" pos:column="9"/></operator><name><name pos:line="12" pos:column="9">data<pos:position pos:line="12" pos:column="13"/></name><operator pos:line="12" pos:column="13">-&gt;<pos:position pos:line="12" pos:column="18"/></operator><name pos:line="12" pos:column="15">set<pos:position pos:line="12" pos:column="18"/></name><operator pos:line="12" pos:column="18">.<pos:position pos:line="12" pos:column="19"/></operator><name pos:line="12" pos:column="19">crlf<pos:position pos:line="12" pos:column="23"/></name></name></expr>)<pos:position pos:line="12" pos:column="24"/></condition><then pos:line="12" pos:column="24"> <block pos:line="12" pos:column="25">{
      <expr_stmt><expr><call><name pos:line="13" pos:column="7">failf<pos:position pos:line="13" pos:column="12"/></name><argument_list pos:line="13" pos:column="12">(<argument><expr><name pos:line="13" pos:column="13">data<pos:position pos:line="13" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="13" pos:column="19">"Uploaded unaligned file size (%d out of %d bytes)"<pos:position pos:line="13" pos:column="70"/></literal></expr></argument>,
            <argument><expr><operator pos:line="14" pos:column="13">*<pos:position pos:line="14" pos:column="14"/></operator><name><name pos:line="14" pos:column="14">ftp<pos:position pos:line="14" pos:column="17"/></name><operator pos:line="14" pos:column="17">-&gt;<pos:position pos:line="14" pos:column="22"/></operator><name pos:line="14" pos:column="19">bytecountp<pos:position pos:line="14" pos:column="29"/></name></name></expr></argument>, <argument><expr><name><name pos:line="14" pos:column="31">data<pos:position pos:line="14" pos:column="35"/></name><operator pos:line="14" pos:column="35">-&gt;<pos:position pos:line="14" pos:column="40"/></operator><name pos:line="14" pos:column="37">set<pos:position pos:line="14" pos:column="40"/></name><operator pos:line="14" pos:column="40">.<pos:position pos:line="14" pos:column="41"/></operator><name pos:line="14" pos:column="41">infilesize<pos:position pos:line="14" pos:column="51"/></name></name></expr></argument>)<pos:position pos:line="14" pos:column="52"/></argument_list></call></expr>;<pos:position pos:line="14" pos:column="53"/></expr_stmt>
      <return pos:line="15" pos:column="7">return <expr><name pos:line="15" pos:column="14">CURLE_PARTIAL_FILE<pos:position pos:line="15" pos:column="32"/></name></expr>;<pos:position pos:line="15" pos:column="33"/></return>
    }<pos:position pos:line="16" pos:column="6"/></block></then></if>
  }<pos:position pos:line="17" pos:column="4"/></block></then>
  <else pos:line="18" pos:column="3">else <block pos:line="18" pos:column="8">{
    <if pos:line="19" pos:column="5">if<condition pos:line="19" pos:column="7">(<expr><operator pos:line="19" pos:column="8">(<pos:position pos:line="19" pos:column="9"/></operator><operator pos:line="19" pos:column="9">-<pos:position pos:line="19" pos:column="10"/></operator><literal type="number" pos:line="19" pos:column="10">1<pos:position pos:line="19" pos:column="11"/></literal> <operator pos:line="19" pos:column="12">!=<pos:position pos:line="19" pos:column="14"/></operator> <name><name pos:line="19" pos:column="15">conn<pos:position pos:line="19" pos:column="19"/></name><operator pos:line="19" pos:column="19">-&gt;<pos:position pos:line="19" pos:column="24"/></operator><name pos:line="19" pos:column="21">size<pos:position pos:line="19" pos:column="25"/></name></name><operator pos:line="19" pos:column="25">)<pos:position pos:line="19" pos:column="26"/></operator> <operator pos:line="19" pos:column="27">&amp;&amp;<pos:position pos:line="19" pos:column="37"/></operator> <operator pos:line="19" pos:column="30">(<pos:position pos:line="19" pos:column="31"/></operator><name><name pos:line="19" pos:column="31">conn<pos:position pos:line="19" pos:column="35"/></name><operator pos:line="19" pos:column="35">-&gt;<pos:position pos:line="19" pos:column="40"/></operator><name pos:line="19" pos:column="37">size<pos:position pos:line="19" pos:column="41"/></name></name> <operator pos:line="19" pos:column="42">!=<pos:position pos:line="19" pos:column="44"/></operator> <operator pos:line="19" pos:column="45">*<pos:position pos:line="19" pos:column="46"/></operator><name><name pos:line="19" pos:column="46">ftp<pos:position pos:line="19" pos:column="49"/></name><operator pos:line="19" pos:column="49">-&gt;<pos:position pos:line="19" pos:column="54"/></operator><name pos:line="19" pos:column="51">bytecountp<pos:position pos:line="19" pos:column="61"/></name></name><operator pos:line="19" pos:column="61">)<pos:position pos:line="19" pos:column="62"/></operator> <operator pos:line="19" pos:column="63">&amp;&amp;<pos:position pos:line="19" pos:column="73"/></operator>
       <operator pos:line="20" pos:column="8">(<pos:position pos:line="20" pos:column="9"/></operator><name><name pos:line="20" pos:column="9">conn<pos:position pos:line="20" pos:column="13"/></name><operator pos:line="20" pos:column="13">-&gt;<pos:position pos:line="20" pos:column="18"/></operator><name pos:line="20" pos:column="15">maxdownload<pos:position pos:line="20" pos:column="26"/></name></name> <operator pos:line="20" pos:column="27">!=<pos:position pos:line="20" pos:column="29"/></operator> <operator pos:line="20" pos:column="30">*<pos:position pos:line="20" pos:column="31"/></operator><name><name pos:line="20" pos:column="31">ftp<pos:position pos:line="20" pos:column="34"/></name><operator pos:line="20" pos:column="34">-&gt;<pos:position pos:line="20" pos:column="39"/></operator><name pos:line="20" pos:column="36">bytecountp<pos:position pos:line="20" pos:column="46"/></name></name><operator pos:line="20" pos:column="46">)<pos:position pos:line="20" pos:column="47"/></operator></expr>)<pos:position pos:line="20" pos:column="48"/></condition><then pos:line="20" pos:column="48"> <block pos:line="20" pos:column="49">{
      <expr_stmt><expr><call><name pos:line="21" pos:column="7">failf<pos:position pos:line="21" pos:column="12"/></name><argument_list pos:line="21" pos:column="12">(<argument><expr><name pos:line="21" pos:column="13">data<pos:position pos:line="21" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="21" pos:column="19">"Received only partial file: %d bytes"<pos:position pos:line="21" pos:column="57"/></literal></expr></argument>, <argument><expr><operator pos:line="21" pos:column="59">*<pos:position pos:line="21" pos:column="60"/></operator><name><name pos:line="21" pos:column="60">ftp<pos:position pos:line="21" pos:column="63"/></name><operator pos:line="21" pos:column="63">-&gt;<pos:position pos:line="21" pos:column="68"/></operator><name pos:line="21" pos:column="65">bytecountp<pos:position pos:line="21" pos:column="75"/></name></name></expr></argument>)<pos:position pos:line="21" pos:column="76"/></argument_list></call></expr>;<pos:position pos:line="21" pos:column="77"/></expr_stmt>
      <return pos:line="22" pos:column="7">return <expr><name pos:line="22" pos:column="14">CURLE_PARTIAL_FILE<pos:position pos:line="22" pos:column="32"/></name></expr>;<pos:position pos:line="22" pos:column="33"/></return>
    }<pos:position pos:line="23" pos:column="6"/></block></then>
    <elseif pos:line="24" pos:column="5">else <if pos:line="24" pos:column="10">if<condition pos:line="24" pos:column="12">(<expr><operator pos:line="24" pos:column="13">!<pos:position pos:line="24" pos:column="14"/></operator><name><name pos:line="24" pos:column="14">ftp<pos:position pos:line="24" pos:column="17"/></name><operator pos:line="24" pos:column="17">-&gt;<pos:position pos:line="24" pos:column="22"/></operator><name pos:line="24" pos:column="19">dont_check<pos:position pos:line="24" pos:column="29"/></name></name> <operator pos:line="24" pos:column="30">&amp;&amp;<pos:position pos:line="24" pos:column="40"/></operator>
            <operator pos:line="25" pos:column="13">!<pos:position pos:line="25" pos:column="14"/></operator><operator pos:line="25" pos:column="14">*<pos:position pos:line="25" pos:column="15"/></operator><name><name pos:line="25" pos:column="15">ftp<pos:position pos:line="25" pos:column="18"/></name><operator pos:line="25" pos:column="18">-&gt;<pos:position pos:line="25" pos:column="23"/></operator><name pos:line="25" pos:column="20">bytecountp<pos:position pos:line="25" pos:column="30"/></name></name> <operator pos:line="25" pos:column="31">&amp;&amp;<pos:position pos:line="25" pos:column="41"/></operator>
            <operator pos:line="26" pos:column="13">(<pos:position pos:line="26" pos:column="14"/></operator><name><name pos:line="26" pos:column="14">conn<pos:position pos:line="26" pos:column="18"/></name><operator pos:line="26" pos:column="18">-&gt;<pos:position pos:line="26" pos:column="23"/></operator><name pos:line="26" pos:column="20">size<pos:position pos:line="26" pos:column="24"/></name></name><operator pos:line="26" pos:column="24">&gt;<pos:position pos:line="26" pos:column="28"/></operator><literal type="number" pos:line="26" pos:column="25">0<pos:position pos:line="26" pos:column="26"/></literal><operator pos:line="26" pos:column="26">)<pos:position pos:line="26" pos:column="27"/></operator></expr>)<pos:position pos:line="26" pos:column="28"/></condition><then pos:line="26" pos:column="28"> <block pos:line="26" pos:column="29">{
      <comment type="block" pos:line="27" pos:column="7">/* We consider this an error, but there's no true FTP error received
         why we need to continue to "read out" the server response too.
         We don't want to leave a "waiting" server reply if we'll get told
         to make a second request on this same connection! */</comment>
      <expr_stmt><expr><call><name pos:line="31" pos:column="7">failf<pos:position pos:line="31" pos:column="12"/></name><argument_list pos:line="31" pos:column="12">(<argument><expr><name pos:line="31" pos:column="13">data<pos:position pos:line="31" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="31" pos:column="19">"No data was received!"<pos:position pos:line="31" pos:column="42"/></literal></expr></argument>)<pos:position pos:line="31" pos:column="43"/></argument_list></call></expr>;<pos:position pos:line="31" pos:column="44"/></expr_stmt>
      <expr_stmt><expr><name pos:line="32" pos:column="7">result<pos:position pos:line="32" pos:column="13"/></name> <operator pos:line="32" pos:column="14">=<pos:position pos:line="32" pos:column="15"/></operator> <name pos:line="32" pos:column="16">CURLE_FTP_COULDNT_RETR_FILE<pos:position pos:line="32" pos:column="43"/></name></expr>;<pos:position pos:line="32" pos:column="44"/></expr_stmt>
    }<pos:position pos:line="33" pos:column="6"/></block></then></if></elseif></if>
  }<pos:position pos:line="34" pos:column="4"/></block></else></if>

<cpp:ifdef pos:line="36" pos:column="1">#<cpp:directive pos:line="36" pos:column="2">ifdef<pos:position pos:line="36" pos:column="7"/></cpp:directive> <name pos:line="36" pos:column="8">KRB4<pos:position pos:line="36" pos:column="12"/></name></cpp:ifdef>
  <expr_stmt><expr><call><name pos:line="37" pos:column="3">Curl_sec_fflush_fd<pos:position pos:line="37" pos:column="21"/></name><argument_list pos:line="37" pos:column="21">(<argument><expr><name pos:line="37" pos:column="22">conn<pos:position pos:line="37" pos:column="26"/></name></expr></argument>, <argument><expr><name><name pos:line="37" pos:column="28">conn<pos:position pos:line="37" pos:column="32"/></name><operator pos:line="37" pos:column="32">-&gt;<pos:position pos:line="37" pos:column="37"/></operator><name pos:line="37" pos:column="34">secondarysocket<pos:position pos:line="37" pos:column="49"/></name></name></expr></argument>)<pos:position pos:line="37" pos:column="50"/></argument_list></call></expr>;<pos:position pos:line="37" pos:column="51"/></expr_stmt>
<cpp:endif pos:line="38" pos:column="1">#<cpp:directive pos:line="38" pos:column="2">endif<pos:position pos:line="38" pos:column="7"/></cpp:directive></cpp:endif>
  <comment type="block" pos:line="39" pos:column="3">/* shut down the socket to inform the server we're done */</comment>
  <expr_stmt><expr><call><name pos:line="40" pos:column="3">sclose<pos:position pos:line="40" pos:column="9"/></name><argument_list pos:line="40" pos:column="9">(<argument><expr><name><name pos:line="40" pos:column="10">conn<pos:position pos:line="40" pos:column="14"/></name><operator pos:line="40" pos:column="14">-&gt;<pos:position pos:line="40" pos:column="19"/></operator><name pos:line="40" pos:column="16">secondarysocket<pos:position pos:line="40" pos:column="31"/></name></name></expr></argument>)<pos:position pos:line="40" pos:column="32"/></argument_list></call></expr>;<pos:position pos:line="40" pos:column="33"/></expr_stmt>
  <expr_stmt><expr><name><name pos:line="41" pos:column="3">conn<pos:position pos:line="41" pos:column="7"/></name><operator pos:line="41" pos:column="7">-&gt;<pos:position pos:line="41" pos:column="12"/></operator><name pos:line="41" pos:column="9">secondarysocket<pos:position pos:line="41" pos:column="24"/></name></name> <operator pos:line="41" pos:column="25">=<pos:position pos:line="41" pos:column="26"/></operator> <operator pos:line="41" pos:column="27">-<pos:position pos:line="41" pos:column="28"/></operator><literal type="number" pos:line="41" pos:column="28">1<pos:position pos:line="41" pos:column="29"/></literal></expr>;<pos:position pos:line="41" pos:column="30"/></expr_stmt>

  <if pos:line="43" pos:column="3">if<condition pos:line="43" pos:column="5">(<expr><operator pos:line="43" pos:column="6">!<pos:position pos:line="43" pos:column="7"/></operator><name><name pos:line="43" pos:column="7">ftp<pos:position pos:line="43" pos:column="10"/></name><operator pos:line="43" pos:column="10">-&gt;<pos:position pos:line="43" pos:column="15"/></operator><name pos:line="43" pos:column="12">no_transfer<pos:position pos:line="43" pos:column="23"/></name></name></expr>)<pos:position pos:line="43" pos:column="24"/></condition><then pos:line="43" pos:column="24"> <block pos:line="43" pos:column="25">{
    <comment type="block" pos:line="44" pos:column="5">/* Let's see what the server says about the transfer we just performed,
       but lower the timeout as sometimes this connection has died while 
       the data has been transfered. This happens when doing through NATs
       etc that abandon old silent connections.
    */</comment>
    <expr_stmt><expr><name><name pos:line="49" pos:column="5">ftp<pos:position pos:line="49" pos:column="8"/></name><operator pos:line="49" pos:column="8">-&gt;<pos:position pos:line="49" pos:column="13"/></operator><name pos:line="49" pos:column="10">response_time<pos:position pos:line="49" pos:column="23"/></name></name> <operator pos:line="49" pos:column="24">=<pos:position pos:line="49" pos:column="25"/></operator> <literal type="number" pos:line="49" pos:column="26">60<pos:position pos:line="49" pos:column="28"/></literal></expr>;<pos:position pos:line="49" pos:column="29"/></expr_stmt> <comment type="block" pos:line="49" pos:column="30">/* give it only a minute for now */</comment>

    <expr_stmt><expr><name pos:line="51" pos:column="5">result<pos:position pos:line="51" pos:column="11"/></name> <operator pos:line="51" pos:column="12">=<pos:position pos:line="51" pos:column="13"/></operator> <call><name pos:line="51" pos:column="14">Curl_GetFTPResponse<pos:position pos:line="51" pos:column="33"/></name><argument_list pos:line="51" pos:column="33">(<argument><expr><operator pos:line="51" pos:column="34">&amp;<pos:position pos:line="51" pos:column="39"/></operator><name pos:line="51" pos:column="35">nread<pos:position pos:line="51" pos:column="40"/></name></expr></argument>, <argument><expr><name pos:line="51" pos:column="42">conn<pos:position pos:line="51" pos:column="46"/></name></expr></argument>, <argument><expr><operator pos:line="51" pos:column="48">&amp;<pos:position pos:line="51" pos:column="53"/></operator><name pos:line="51" pos:column="49">ftpcode<pos:position pos:line="51" pos:column="56"/></name></expr></argument>)<pos:position pos:line="51" pos:column="57"/></argument_list></call></expr>;<pos:position pos:line="51" pos:column="58"/></expr_stmt>

    <expr_stmt><expr><name><name pos:line="53" pos:column="5">ftp<pos:position pos:line="53" pos:column="8"/></name><operator pos:line="53" pos:column="8">-&gt;<pos:position pos:line="53" pos:column="13"/></operator><name pos:line="53" pos:column="10">response_time<pos:position pos:line="53" pos:column="23"/></name></name> <operator pos:line="53" pos:column="24">=<pos:position pos:line="53" pos:column="25"/></operator> <literal type="number" pos:line="53" pos:column="26">3600<pos:position pos:line="53" pos:column="30"/></literal></expr>;<pos:position pos:line="53" pos:column="31"/></expr_stmt> <comment type="block" pos:line="53" pos:column="32">/* set this back to one hour waits */</comment>
  
    <if pos:line="55" pos:column="5">if<condition pos:line="55" pos:column="7">(<expr><operator pos:line="55" pos:column="8">!<pos:position pos:line="55" pos:column="9"/></operator><name pos:line="55" pos:column="9">nread<pos:position pos:line="55" pos:column="14"/></name> <operator pos:line="55" pos:column="15">&amp;&amp;<pos:position pos:line="55" pos:column="25"/></operator> <operator pos:line="55" pos:column="18">(<pos:position pos:line="55" pos:column="19"/></operator><name pos:line="55" pos:column="19">CURLE_OPERATION_TIMEDOUT<pos:position pos:line="55" pos:column="43"/></name> <operator pos:line="55" pos:column="44">==<pos:position pos:line="55" pos:column="46"/></operator> <name pos:line="55" pos:column="47">result<pos:position pos:line="55" pos:column="53"/></name><operator pos:line="55" pos:column="53">)<pos:position pos:line="55" pos:column="54"/></operator></expr>)<pos:position pos:line="55" pos:column="55"/></condition><then pos:line="55" pos:column="55"> <block pos:line="55" pos:column="56">{
      <expr_stmt><expr><call><name pos:line="56" pos:column="7">failf<pos:position pos:line="56" pos:column="12"/></name><argument_list pos:line="56" pos:column="12">(<argument><expr><name pos:line="56" pos:column="13">data<pos:position pos:line="56" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="56" pos:column="19">"control connection looks dead"<pos:position pos:line="56" pos:column="50"/></literal></expr></argument>)<pos:position pos:line="56" pos:column="51"/></argument_list></call></expr>;<pos:position pos:line="56" pos:column="52"/></expr_stmt>
      <return pos:line="57" pos:column="7">return <expr><name pos:line="57" pos:column="14">result<pos:position pos:line="57" pos:column="20"/></name></expr>;<pos:position pos:line="57" pos:column="21"/></return>
    }<pos:position pos:line="58" pos:column="6"/></block></then></if>

    <if pos:line="60" pos:column="5">if<condition pos:line="60" pos:column="7">(<expr><name pos:line="60" pos:column="8">result<pos:position pos:line="60" pos:column="14"/></name></expr>)<pos:position pos:line="60" pos:column="15"/></condition><then pos:line="60" pos:column="15">
      <block type="pseudo"><return pos:line="61" pos:column="7">return <expr><name pos:line="61" pos:column="14">result<pos:position pos:line="61" pos:column="20"/></name></expr>;<pos:position pos:line="61" pos:column="21"/></return></block></then></if>

    <if pos:line="63" pos:column="5">if<condition pos:line="63" pos:column="7">(<expr><operator pos:line="63" pos:column="8">!<pos:position pos:line="63" pos:column="9"/></operator><name><name pos:line="63" pos:column="9">ftp<pos:position pos:line="63" pos:column="12"/></name><operator pos:line="63" pos:column="12">-&gt;<pos:position pos:line="63" pos:column="17"/></operator><name pos:line="63" pos:column="14">dont_check<pos:position pos:line="63" pos:column="24"/></name></name></expr>)<pos:position pos:line="63" pos:column="25"/></condition><then pos:line="63" pos:column="25"> <block pos:line="63" pos:column="26">{
      <comment type="block" pos:line="64" pos:column="7">/* 226 Transfer complete, 250 Requested file action okay, completed. */</comment>
      <if pos:line="65" pos:column="7">if<condition pos:line="65" pos:column="9">(<expr><operator pos:line="65" pos:column="10">(<pos:position pos:line="65" pos:column="11"/></operator><name pos:line="65" pos:column="11">ftpcode<pos:position pos:line="65" pos:column="18"/></name> <operator pos:line="65" pos:column="19">!=<pos:position pos:line="65" pos:column="21"/></operator> <literal type="number" pos:line="65" pos:column="22">226<pos:position pos:line="65" pos:column="25"/></literal><operator pos:line="65" pos:column="25">)<pos:position pos:line="65" pos:column="26"/></operator> <operator pos:line="65" pos:column="27">&amp;&amp;<pos:position pos:line="65" pos:column="37"/></operator> <operator pos:line="65" pos:column="30">(<pos:position pos:line="65" pos:column="31"/></operator><name pos:line="65" pos:column="31">ftpcode<pos:position pos:line="65" pos:column="38"/></name> <operator pos:line="65" pos:column="39">!=<pos:position pos:line="65" pos:column="41"/></operator> <literal type="number" pos:line="65" pos:column="42">250<pos:position pos:line="65" pos:column="45"/></literal><operator pos:line="65" pos:column="45">)<pos:position pos:line="65" pos:column="46"/></operator></expr>)<pos:position pos:line="65" pos:column="47"/></condition><then pos:line="65" pos:column="47"> <block pos:line="65" pos:column="48">{
        <expr_stmt><expr><call><name pos:line="66" pos:column="9">failf<pos:position pos:line="66" pos:column="14"/></name><argument_list pos:line="66" pos:column="14">(<argument><expr><name pos:line="66" pos:column="15">data<pos:position pos:line="66" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="66" pos:column="21">"server did not report OK, got %d"<pos:position pos:line="66" pos:column="55"/></literal></expr></argument>, <argument><expr><name pos:line="66" pos:column="57">ftpcode<pos:position pos:line="66" pos:column="64"/></name></expr></argument>)<pos:position pos:line="66" pos:column="65"/></argument_list></call></expr>;<pos:position pos:line="66" pos:column="66"/></expr_stmt>
        <return pos:line="67" pos:column="9">return <expr><name pos:line="67" pos:column="16">CURLE_FTP_WRITE_ERROR<pos:position pos:line="67" pos:column="37"/></name></expr>;<pos:position pos:line="67" pos:column="38"/></return>
      }<pos:position pos:line="68" pos:column="8"/></block></then></if>
    }<pos:position pos:line="69" pos:column="6"/></block></then></if>
  }<pos:position pos:line="70" pos:column="4"/></block></then></if>

  <comment type="block" pos:line="72" pos:column="3">/* clear these for next connection */</comment>
  <expr_stmt><expr><name><name pos:line="73" pos:column="3">ftp<pos:position pos:line="73" pos:column="6"/></name><operator pos:line="73" pos:column="6">-&gt;<pos:position pos:line="73" pos:column="11"/></operator><name pos:line="73" pos:column="8">no_transfer<pos:position pos:line="73" pos:column="19"/></name></name> <operator pos:line="73" pos:column="20">=<pos:position pos:line="73" pos:column="21"/></operator> <name pos:line="73" pos:column="22">FALSE<pos:position pos:line="73" pos:column="27"/></name></expr>;<pos:position pos:line="73" pos:column="28"/></expr_stmt>
  <expr_stmt><expr><name><name pos:line="74" pos:column="3">ftp<pos:position pos:line="74" pos:column="6"/></name><operator pos:line="74" pos:column="6">-&gt;<pos:position pos:line="74" pos:column="11"/></operator><name pos:line="74" pos:column="8">dont_check<pos:position pos:line="74" pos:column="18"/></name></name> <operator pos:line="74" pos:column="19">=<pos:position pos:line="74" pos:column="20"/></operator> <name pos:line="74" pos:column="21">FALSE<pos:position pos:line="74" pos:column="26"/></name></expr>;<pos:position pos:line="74" pos:column="27"/></expr_stmt> 

  <comment type="block" pos:line="76" pos:column="3">/* Send any post-transfer QUOTE strings? */</comment>
  <if pos:line="77" pos:column="3">if<condition pos:line="77" pos:column="5">(<expr><operator pos:line="77" pos:column="6">!<pos:position pos:line="77" pos:column="7"/></operator><name pos:line="77" pos:column="7">result<pos:position pos:line="77" pos:column="13"/></name> <operator pos:line="77" pos:column="14">&amp;&amp;<pos:position pos:line="77" pos:column="24"/></operator> <name><name pos:line="77" pos:column="17">data<pos:position pos:line="77" pos:column="21"/></name><operator pos:line="77" pos:column="21">-&gt;<pos:position pos:line="77" pos:column="26"/></operator><name pos:line="77" pos:column="23">set<pos:position pos:line="77" pos:column="26"/></name><operator pos:line="77" pos:column="26">.<pos:position pos:line="77" pos:column="27"/></operator><name pos:line="77" pos:column="27">postquote<pos:position pos:line="77" pos:column="36"/></name></name></expr>)<pos:position pos:line="77" pos:column="37"/></condition><then pos:line="77" pos:column="37">
    <block type="pseudo"><expr_stmt><expr><name pos:line="78" pos:column="5">result<pos:position pos:line="78" pos:column="11"/></name> <operator pos:line="78" pos:column="12">=<pos:position pos:line="78" pos:column="13"/></operator> <call><name pos:line="78" pos:column="14">ftp_sendquote<pos:position pos:line="78" pos:column="27"/></name><argument_list pos:line="78" pos:column="27">(<argument><expr><name pos:line="78" pos:column="28">conn<pos:position pos:line="78" pos:column="32"/></name></expr></argument>, <argument><expr><name><name pos:line="78" pos:column="34">data<pos:position pos:line="78" pos:column="38"/></name><operator pos:line="78" pos:column="38">-&gt;<pos:position pos:line="78" pos:column="43"/></operator><name pos:line="78" pos:column="40">set<pos:position pos:line="78" pos:column="43"/></name><operator pos:line="78" pos:column="43">.<pos:position pos:line="78" pos:column="44"/></operator><name pos:line="78" pos:column="44">postquote<pos:position pos:line="78" pos:column="53"/></name></name></expr></argument>)<pos:position pos:line="78" pos:column="54"/></argument_list></call></expr>;<pos:position pos:line="78" pos:column="55"/></expr_stmt></block></then></if>

  <return pos:line="80" pos:column="3">return <expr><name pos:line="80" pos:column="10">result<pos:position pos:line="80" pos:column="16"/></name></expr>;<pos:position pos:line="80" pos:column="17"/></return>
}<pos:position pos:line="81" pos:column="2"/></block></function></unit>
