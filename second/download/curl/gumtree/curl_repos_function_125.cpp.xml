<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="0.9.5" language="C++" filename="usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/gumtree/curl_repos_function_125.cpp" pos:tabs="8"><function><specifier pos:line="1" pos:column="1">static<pos:position pos:line="1" pos:column="7"/></specifier>
<type><name pos:line="2" pos:column="1">CURLcode<pos:position pos:line="2" pos:column="9"/></name></type> <name pos:line="2" pos:column="10">_ftp<pos:position pos:line="2" pos:column="14"/></name><parameter_list pos:line="2" pos:column="14">(<parameter><decl><type><name><name pos:line="2" pos:column="15">struct<pos:position pos:line="2" pos:column="21"/></name> <name pos:line="2" pos:column="22">connectdata<pos:position pos:line="2" pos:column="33"/></name></name> <modifier pos:line="2" pos:column="34">*<pos:position pos:line="2" pos:column="35"/></modifier></type><name pos:line="2" pos:column="35">conn<pos:position pos:line="2" pos:column="39"/></name></decl></parameter>)<pos:position pos:line="2" pos:column="40"/></parameter_list>
<block pos:line="3" pos:column="1">{
  <comment type="block" pos:line="4" pos:column="3">/* this is FTP and no proxy */</comment>
  <decl_stmt><decl><type><name pos:line="5" pos:column="3">size_t<pos:position pos:line="5" pos:column="9"/></name></type> <name pos:line="5" pos:column="10">nread<pos:position pos:line="5" pos:column="15"/></name></decl>;<pos:position pos:line="5" pos:column="16"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="6" pos:column="3">CURLcode<pos:position pos:line="6" pos:column="11"/></name></type> <name pos:line="6" pos:column="12">result<pos:position pos:line="6" pos:column="18"/></name></decl>;<pos:position pos:line="6" pos:column="19"/></decl_stmt>
  <decl_stmt><decl><type><name><name pos:line="7" pos:column="3">struct<pos:position pos:line="7" pos:column="9"/></name> <name pos:line="7" pos:column="10">UrlData<pos:position pos:line="7" pos:column="17"/></name></name> <modifier pos:line="7" pos:column="18">*<pos:position pos:line="7" pos:column="19"/></modifier></type><name pos:line="7" pos:column="19">data<pos:position pos:line="7" pos:column="23"/></name><init pos:line="7" pos:column="23">=<expr><name><name pos:line="7" pos:column="24">conn<pos:position pos:line="7" pos:column="28"/></name><operator pos:line="7" pos:column="28">-&gt;<pos:position pos:line="7" pos:column="33"/></operator><name pos:line="7" pos:column="30">data<pos:position pos:line="7" pos:column="34"/></name></name></expr></init></decl>;<pos:position pos:line="7" pos:column="35"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="8" pos:column="3">char<pos:position pos:line="8" pos:column="7"/></name> <modifier pos:line="8" pos:column="8">*<pos:position pos:line="8" pos:column="9"/></modifier></type><name pos:line="8" pos:column="9">buf<pos:position pos:line="8" pos:column="12"/></name> <init pos:line="8" pos:column="13">= <expr><name><name pos:line="8" pos:column="15">data<pos:position pos:line="8" pos:column="19"/></name><operator pos:line="8" pos:column="19">-&gt;<pos:position pos:line="8" pos:column="24"/></operator><name pos:line="8" pos:column="21">buffer<pos:position pos:line="8" pos:column="27"/></name></name></expr></init></decl>;<pos:position pos:line="8" pos:column="28"/></decl_stmt> <comment type="block" pos:line="8" pos:column="29">/* this is our buffer */</comment>
  <comment type="block" pos:line="9" pos:column="3">/* for the ftp PORT mode */</comment>
  <decl_stmt><decl><type><name pos:line="10" pos:column="3">int<pos:position pos:line="10" pos:column="6"/></name></type> <name pos:line="10" pos:column="7">portsock<pos:position pos:line="10" pos:column="15"/></name><init pos:line="10" pos:column="15">=<expr><operator pos:line="10" pos:column="16">-<pos:position pos:line="10" pos:column="17"/></operator><literal type="number" pos:line="10" pos:column="17">1<pos:position pos:line="10" pos:column="18"/></literal></expr></init></decl>;<pos:position pos:line="10" pos:column="19"/></decl_stmt>
  <decl_stmt><decl><type><name><name pos:line="11" pos:column="3">struct<pos:position pos:line="11" pos:column="9"/></name> <name pos:line="11" pos:column="10">sockaddr_in<pos:position pos:line="11" pos:column="21"/></name></name></type> <name pos:line="11" pos:column="22">serv_addr<pos:position pos:line="11" pos:column="31"/></name></decl>;<pos:position pos:line="11" pos:column="32"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="12" pos:column="3">char<pos:position pos:line="12" pos:column="7"/></name></type> <name><name pos:line="12" pos:column="8">hostent_buf<pos:position pos:line="12" pos:column="19"/></name><index pos:line="12" pos:column="19">[<expr><literal type="number" pos:line="12" pos:column="20">8192<pos:position pos:line="12" pos:column="24"/></literal></expr>]<pos:position pos:line="12" pos:column="25"/></index></name></decl>;<pos:position pos:line="12" pos:column="26"/></decl_stmt>
<cpp:if pos:line="13" pos:column="1">#<cpp:directive pos:line="13" pos:column="2">if<pos:position pos:line="13" pos:column="4"/></cpp:directive> <expr><call><name pos:line="13" pos:column="5">defined<pos:position pos:line="13" pos:column="12"/></name> <argument_list pos:line="13" pos:column="13">(<argument><expr><name pos:line="13" pos:column="14">HAVE_INET_NTOA_R<pos:position pos:line="13" pos:column="30"/></name></expr></argument>)<pos:position pos:line="13" pos:column="31"/></argument_list></call></expr></cpp:if>
  <decl_stmt><decl><type><name pos:line="14" pos:column="3">char<pos:position pos:line="14" pos:column="7"/></name></type> <name><name pos:line="14" pos:column="8">ntoa_buf<pos:position pos:line="14" pos:column="16"/></name><index pos:line="14" pos:column="16">[<expr><literal type="number" pos:line="14" pos:column="17">64<pos:position pos:line="14" pos:column="19"/></literal></expr>]<pos:position pos:line="14" pos:column="20"/></index></name></decl>;<pos:position pos:line="14" pos:column="21"/></decl_stmt>
<cpp:endif pos:line="15" pos:column="1">#<cpp:directive pos:line="15" pos:column="2">endif<pos:position pos:line="15" pos:column="7"/></cpp:directive></cpp:endif>

  <decl_stmt><decl><type><name><name pos:line="17" pos:column="3">struct<pos:position pos:line="17" pos:column="9"/></name> <name pos:line="17" pos:column="10">curl_slist<pos:position pos:line="17" pos:column="20"/></name></name> <modifier pos:line="17" pos:column="21">*<pos:position pos:line="17" pos:column="22"/></modifier></type><name pos:line="17" pos:column="22">qitem<pos:position pos:line="17" pos:column="27"/></name></decl>;<pos:position pos:line="17" pos:column="28"/></decl_stmt> <comment type="block" pos:line="17" pos:column="29">/* QUOTE item */</comment>
  <comment type="block" pos:line="18" pos:column="3">/* the ftp struct is already inited in ftp_connect() */</comment>
  <decl_stmt><decl><type><name><name pos:line="19" pos:column="3">struct<pos:position pos:line="19" pos:column="9"/></name> <name pos:line="19" pos:column="10">FTP<pos:position pos:line="19" pos:column="13"/></name></name> <modifier pos:line="19" pos:column="14">*<pos:position pos:line="19" pos:column="15"/></modifier></type><name pos:line="19" pos:column="15">ftp<pos:position pos:line="19" pos:column="18"/></name> <init pos:line="19" pos:column="19">= <expr><name><name pos:line="19" pos:column="21">data<pos:position pos:line="19" pos:column="25"/></name><operator pos:line="19" pos:column="25">-&gt;<pos:position pos:line="19" pos:column="30"/></operator><name pos:line="19" pos:column="27">proto<pos:position pos:line="19" pos:column="32"/></name><operator pos:line="19" pos:column="32">.<pos:position pos:line="19" pos:column="33"/></operator><name pos:line="19" pos:column="33">ftp<pos:position pos:line="19" pos:column="36"/></name></name></expr></init></decl>;<pos:position pos:line="19" pos:column="37"/></decl_stmt>

  <decl_stmt><decl><type><name pos:line="21" pos:column="3">long<pos:position pos:line="21" pos:column="7"/></name> <modifier pos:line="21" pos:column="8">*<pos:position pos:line="21" pos:column="9"/></modifier></type><name pos:line="21" pos:column="9">bytecountp<pos:position pos:line="21" pos:column="19"/></name> <init pos:line="21" pos:column="20">= <expr><name><name pos:line="21" pos:column="22">ftp<pos:position pos:line="21" pos:column="25"/></name><operator pos:line="21" pos:column="25">-&gt;<pos:position pos:line="21" pos:column="30"/></operator><name pos:line="21" pos:column="27">bytecountp<pos:position pos:line="21" pos:column="37"/></name></name></expr></init></decl>;<pos:position pos:line="21" pos:column="38"/></decl_stmt>

  <comment type="block" pos:line="23" pos:column="3">/* Send any QUOTE strings? */</comment>
  <if pos:line="24" pos:column="3">if<condition pos:line="24" pos:column="5">(<expr><name><name pos:line="24" pos:column="6">data<pos:position pos:line="24" pos:column="10"/></name><operator pos:line="24" pos:column="10">-&gt;<pos:position pos:line="24" pos:column="15"/></operator><name pos:line="24" pos:column="12">quote<pos:position pos:line="24" pos:column="17"/></name></name></expr>)<pos:position pos:line="24" pos:column="18"/></condition><then pos:line="24" pos:column="18"> <block pos:line="24" pos:column="19">{
    <expr_stmt><expr><name pos:line="25" pos:column="5">qitem<pos:position pos:line="25" pos:column="10"/></name> <operator pos:line="25" pos:column="11">=<pos:position pos:line="25" pos:column="12"/></operator> <name><name pos:line="25" pos:column="13">data<pos:position pos:line="25" pos:column="17"/></name><operator pos:line="25" pos:column="17">-&gt;<pos:position pos:line="25" pos:column="22"/></operator><name pos:line="25" pos:column="19">quote<pos:position pos:line="25" pos:column="24"/></name></name></expr>;<pos:position pos:line="25" pos:column="25"/></expr_stmt>
    <comment type="block" pos:line="26" pos:column="5">/* Send all QUOTE strings in same order as on command-line */</comment>
    <while pos:line="27" pos:column="5">while <condition pos:line="27" pos:column="11">(<expr><name pos:line="27" pos:column="12">qitem<pos:position pos:line="27" pos:column="17"/></name></expr>)<pos:position pos:line="27" pos:column="18"/></condition> <block pos:line="27" pos:column="19">{
      <comment type="block" pos:line="28" pos:column="7">/* Send string */</comment>
      <if pos:line="29" pos:column="7">if <condition pos:line="29" pos:column="10">(<expr><name><name pos:line="29" pos:column="11">qitem<pos:position pos:line="29" pos:column="16"/></name><operator pos:line="29" pos:column="16">-&gt;<pos:position pos:line="29" pos:column="21"/></operator><name pos:line="29" pos:column="18">data<pos:position pos:line="29" pos:column="22"/></name></name></expr>)<pos:position pos:line="29" pos:column="23"/></condition><then pos:line="29" pos:column="23"> <block pos:line="29" pos:column="24">{
        <expr_stmt><expr><call><name pos:line="30" pos:column="9">sendf<pos:position pos:line="30" pos:column="14"/></name><argument_list pos:line="30" pos:column="14">(<argument><expr><name><name pos:line="30" pos:column="15">data<pos:position pos:line="30" pos:column="19"/></name><operator pos:line="30" pos:column="19">-&gt;<pos:position pos:line="30" pos:column="24"/></operator><name pos:line="30" pos:column="21">firstsocket<pos:position pos:line="30" pos:column="32"/></name></name></expr></argument>, <argument><expr><name pos:line="30" pos:column="34">data<pos:position pos:line="30" pos:column="38"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="30" pos:column="40">"%s\r\n"<pos:position pos:line="30" pos:column="48"/></literal></expr></argument>, <argument><expr><name><name pos:line="30" pos:column="50">qitem<pos:position pos:line="30" pos:column="55"/></name><operator pos:line="30" pos:column="55">-&gt;<pos:position pos:line="30" pos:column="60"/></operator><name pos:line="30" pos:column="57">data<pos:position pos:line="30" pos:column="61"/></name></name></expr></argument>)<pos:position pos:line="30" pos:column="62"/></argument_list></call></expr>;<pos:position pos:line="30" pos:column="63"/></expr_stmt>

        <expr_stmt><expr><name pos:line="32" pos:column="9">nread<pos:position pos:line="32" pos:column="14"/></name> <operator pos:line="32" pos:column="15">=<pos:position pos:line="32" pos:column="16"/></operator> <call><name pos:line="32" pos:column="17">GetLastResponse<pos:position pos:line="32" pos:column="32"/></name><argument_list pos:line="32" pos:column="32">(<argument><expr><name><name pos:line="32" pos:column="33">data<pos:position pos:line="32" pos:column="37"/></name><operator pos:line="32" pos:column="37">-&gt;<pos:position pos:line="32" pos:column="42"/></operator><name pos:line="32" pos:column="39">firstsocket<pos:position pos:line="32" pos:column="50"/></name></name></expr></argument>, <argument><expr><name pos:line="32" pos:column="52">buf<pos:position pos:line="32" pos:column="55"/></name></expr></argument>, <argument><expr><name pos:line="32" pos:column="57">conn<pos:position pos:line="32" pos:column="61"/></name></expr></argument>)<pos:position pos:line="32" pos:column="62"/></argument_list></call></expr>;<pos:position pos:line="32" pos:column="63"/></expr_stmt>
        <if pos:line="33" pos:column="9">if<condition pos:line="33" pos:column="11">(<expr><name pos:line="33" pos:column="12">nread<pos:position pos:line="33" pos:column="17"/></name> <operator pos:line="33" pos:column="18">&lt;<pos:position pos:line="33" pos:column="22"/></operator> <literal type="number" pos:line="33" pos:column="20">0<pos:position pos:line="33" pos:column="21"/></literal></expr>)<pos:position pos:line="33" pos:column="22"/></condition><then pos:line="33" pos:column="22">
          <block type="pseudo"><return pos:line="34" pos:column="11">return <expr><name pos:line="34" pos:column="18">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="34" pos:column="43"/></name></expr>;<pos:position pos:line="34" pos:column="44"/></return></block></then></if>

        <if pos:line="36" pos:column="9">if <condition pos:line="36" pos:column="12">(<expr><name><name pos:line="36" pos:column="13">buf<pos:position pos:line="36" pos:column="16"/></name><index pos:line="36" pos:column="16">[<expr><literal type="number" pos:line="36" pos:column="17">0<pos:position pos:line="36" pos:column="18"/></literal></expr>]<pos:position pos:line="36" pos:column="19"/></index></name> <operator pos:line="36" pos:column="20">!=<pos:position pos:line="36" pos:column="22"/></operator> <literal type="char" pos:line="36" pos:column="23">'2'<pos:position pos:line="36" pos:column="26"/></literal></expr>)<pos:position pos:line="36" pos:column="27"/></condition><then pos:line="36" pos:column="27"> <block pos:line="36" pos:column="28">{
          <expr_stmt><expr><call><name pos:line="37" pos:column="11">failf<pos:position pos:line="37" pos:column="16"/></name><argument_list pos:line="37" pos:column="16">(<argument><expr><name pos:line="37" pos:column="17">data<pos:position pos:line="37" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="37" pos:column="23">"QUOT string not accepted: %s"<pos:position pos:line="37" pos:column="53"/></literal></expr></argument>,
                <argument><expr><name><name pos:line="38" pos:column="17">qitem<pos:position pos:line="38" pos:column="22"/></name><operator pos:line="38" pos:column="22">-&gt;<pos:position pos:line="38" pos:column="27"/></operator><name pos:line="38" pos:column="24">data<pos:position pos:line="38" pos:column="28"/></name></name></expr></argument>)<pos:position pos:line="38" pos:column="29"/></argument_list></call></expr>;<pos:position pos:line="38" pos:column="30"/></expr_stmt>
          <return pos:line="39" pos:column="11">return <expr><name pos:line="39" pos:column="18">CURLE_FTP_QUOTE_ERROR<pos:position pos:line="39" pos:column="39"/></name></expr>;<pos:position pos:line="39" pos:column="40"/></return>
        }<pos:position pos:line="40" pos:column="10"/></block></then></if>
      }<pos:position pos:line="41" pos:column="8"/></block></then></if>
      <expr_stmt><expr><name pos:line="42" pos:column="7">qitem<pos:position pos:line="42" pos:column="12"/></name> <operator pos:line="42" pos:column="13">=<pos:position pos:line="42" pos:column="14"/></operator> <name><name pos:line="42" pos:column="15">qitem<pos:position pos:line="42" pos:column="20"/></name><operator pos:line="42" pos:column="20">-&gt;<pos:position pos:line="42" pos:column="25"/></operator><name pos:line="42" pos:column="22">next<pos:position pos:line="42" pos:column="26"/></name></name></expr>;<pos:position pos:line="42" pos:column="27"/></expr_stmt>
    }<pos:position pos:line="43" pos:column="6"/></block></while>
  }<pos:position pos:line="44" pos:column="4"/></block></then></if>

  <comment type="block" pos:line="46" pos:column="3">/* If we have selected NOBODY, it means that we only want file information.
     Which in FTP can't be much more than the file size! */</comment>
  <if pos:line="48" pos:column="3">if<condition pos:line="48" pos:column="5">(<expr><name><name pos:line="48" pos:column="6">data<pos:position pos:line="48" pos:column="10"/></name><operator pos:line="48" pos:column="10">-&gt;<pos:position pos:line="48" pos:column="15"/></operator><name pos:line="48" pos:column="12">bits<pos:position pos:line="48" pos:column="16"/></name><operator pos:line="48" pos:column="16">.<pos:position pos:line="48" pos:column="17"/></operator><name pos:line="48" pos:column="17">no_body<pos:position pos:line="48" pos:column="24"/></name></name></expr>)<pos:position pos:line="48" pos:column="25"/></condition><then pos:line="48" pos:column="25"> <block pos:line="48" pos:column="26">{
    <comment type="block" pos:line="49" pos:column="5">/* The SIZE command is _not_ RFC 959 specified, and therefor many servers
       may not support it! It is however the only way we have to get a file's
       size! */</comment>
    <decl_stmt><decl><type><name pos:line="52" pos:column="5">int<pos:position pos:line="52" pos:column="8"/></name></type> <name pos:line="52" pos:column="9">filesize<pos:position pos:line="52" pos:column="17"/></name></decl>;<pos:position pos:line="52" pos:column="18"/></decl_stmt>
    <expr_stmt><expr><call><name pos:line="53" pos:column="5">sendf<pos:position pos:line="53" pos:column="10"/></name><argument_list pos:line="53" pos:column="10">(<argument><expr><name><name pos:line="53" pos:column="11">data<pos:position pos:line="53" pos:column="15"/></name><operator pos:line="53" pos:column="15">-&gt;<pos:position pos:line="53" pos:column="20"/></operator><name pos:line="53" pos:column="17">firstsocket<pos:position pos:line="53" pos:column="28"/></name></name></expr></argument>, <argument><expr><name pos:line="53" pos:column="30">data<pos:position pos:line="53" pos:column="34"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="53" pos:column="36">"SIZE %s\r\n"<pos:position pos:line="53" pos:column="49"/></literal></expr></argument>, <argument><expr><name><name pos:line="53" pos:column="51">ftp<pos:position pos:line="53" pos:column="54"/></name><operator pos:line="53" pos:column="54">-&gt;<pos:position pos:line="53" pos:column="59"/></operator><name pos:line="53" pos:column="56">file<pos:position pos:line="53" pos:column="60"/></name></name></expr></argument>)<pos:position pos:line="53" pos:column="61"/></argument_list></call></expr>;<pos:position pos:line="53" pos:column="62"/></expr_stmt>

    <expr_stmt><expr><name pos:line="55" pos:column="5">nread<pos:position pos:line="55" pos:column="10"/></name> <operator pos:line="55" pos:column="11">=<pos:position pos:line="55" pos:column="12"/></operator> <call><name pos:line="55" pos:column="13">GetLastResponse<pos:position pos:line="55" pos:column="28"/></name><argument_list pos:line="55" pos:column="28">(<argument><expr><name><name pos:line="55" pos:column="29">data<pos:position pos:line="55" pos:column="33"/></name><operator pos:line="55" pos:column="33">-&gt;<pos:position pos:line="55" pos:column="38"/></operator><name pos:line="55" pos:column="35">firstsocket<pos:position pos:line="55" pos:column="46"/></name></name></expr></argument>, <argument><expr><name pos:line="55" pos:column="48">buf<pos:position pos:line="55" pos:column="51"/></name></expr></argument>, <argument><expr><name pos:line="55" pos:column="53">conn<pos:position pos:line="55" pos:column="57"/></name></expr></argument>)<pos:position pos:line="55" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="55" pos:column="59"/></expr_stmt>
    <if pos:line="56" pos:column="5">if<condition pos:line="56" pos:column="7">(<expr><name pos:line="56" pos:column="8">nread<pos:position pos:line="56" pos:column="13"/></name> <operator pos:line="56" pos:column="14">&lt;<pos:position pos:line="56" pos:column="18"/></operator> <literal type="number" pos:line="56" pos:column="16">0<pos:position pos:line="56" pos:column="17"/></literal></expr>)<pos:position pos:line="56" pos:column="18"/></condition><then pos:line="56" pos:column="18">
      <block type="pseudo"><return pos:line="57" pos:column="7">return <expr><name pos:line="57" pos:column="14">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="57" pos:column="39"/></name></expr>;<pos:position pos:line="57" pos:column="40"/></return></block></then></if>

    <if pos:line="59" pos:column="5">if<condition pos:line="59" pos:column="7">(<expr><call><name pos:line="59" pos:column="8">strncmp<pos:position pos:line="59" pos:column="15"/></name><argument_list pos:line="59" pos:column="15">(<argument><expr><name pos:line="59" pos:column="16">buf<pos:position pos:line="59" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="59" pos:column="21">"213"<pos:position pos:line="59" pos:column="26"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="59" pos:column="28">3<pos:position pos:line="59" pos:column="29"/></literal></expr></argument>)<pos:position pos:line="59" pos:column="30"/></argument_list></call></expr>)<pos:position pos:line="59" pos:column="31"/></condition><then pos:line="59" pos:column="31"> <block pos:line="59" pos:column="32">{
      <expr_stmt><expr><call><name pos:line="60" pos:column="7">failf<pos:position pos:line="60" pos:column="12"/></name><argument_list pos:line="60" pos:column="12">(<argument><expr><name pos:line="60" pos:column="13">data<pos:position pos:line="60" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="60" pos:column="19">"Couldn't get file size: %s"<pos:position pos:line="60" pos:column="47"/></literal></expr></argument>, <argument><expr><name pos:line="60" pos:column="49">buf<pos:position pos:line="60" pos:column="52"/></name><operator pos:line="60" pos:column="52">+<pos:position pos:line="60" pos:column="53"/></operator><literal type="number" pos:line="60" pos:column="53">4<pos:position pos:line="60" pos:column="54"/></literal></expr></argument>)<pos:position pos:line="60" pos:column="55"/></argument_list></call></expr>;<pos:position pos:line="60" pos:column="56"/></expr_stmt>
      <return pos:line="61" pos:column="7">return <expr><name pos:line="61" pos:column="14">CURLE_FTP_COULDNT_GET_SIZE<pos:position pos:line="61" pos:column="40"/></name></expr>;<pos:position pos:line="61" pos:column="41"/></return>
    }<pos:position pos:line="62" pos:column="6"/></block></then></if>
    <comment type="block" pos:line="63" pos:column="5">/* get the size from the ascii string: */</comment>
    <expr_stmt><expr><name pos:line="64" pos:column="5">filesize<pos:position pos:line="64" pos:column="13"/></name> <operator pos:line="64" pos:column="14">=<pos:position pos:line="64" pos:column="15"/></operator> <call><name pos:line="64" pos:column="16">atoi<pos:position pos:line="64" pos:column="20"/></name><argument_list pos:line="64" pos:column="20">(<argument><expr><name pos:line="64" pos:column="21">buf<pos:position pos:line="64" pos:column="24"/></name><operator pos:line="64" pos:column="24">+<pos:position pos:line="64" pos:column="25"/></operator><literal type="number" pos:line="64" pos:column="25">4<pos:position pos:line="64" pos:column="26"/></literal></expr></argument>)<pos:position pos:line="64" pos:column="27"/></argument_list></call></expr>;<pos:position pos:line="64" pos:column="28"/></expr_stmt>

    <expr_stmt><expr><call><name pos:line="66" pos:column="5">sprintf<pos:position pos:line="66" pos:column="12"/></name><argument_list pos:line="66" pos:column="12">(<argument><expr><name pos:line="66" pos:column="13">buf<pos:position pos:line="66" pos:column="16"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="66" pos:column="18">"Content-Length: %d\n"<pos:position pos:line="66" pos:column="40"/></literal></expr></argument>, <argument><expr><name pos:line="66" pos:column="42">filesize<pos:position pos:line="66" pos:column="50"/></name></expr></argument>)<pos:position pos:line="66" pos:column="51"/></argument_list></call></expr>;<pos:position pos:line="66" pos:column="52"/></expr_stmt>

    <if pos:line="68" pos:column="5">if<condition pos:line="68" pos:column="7">(<expr><call><name pos:line="68" pos:column="8">strlen<pos:position pos:line="68" pos:column="14"/></name><argument_list pos:line="68" pos:column="14">(<argument><expr><name pos:line="68" pos:column="15">buf<pos:position pos:line="68" pos:column="18"/></name></expr></argument>)<pos:position pos:line="68" pos:column="19"/></argument_list></call> <operator pos:line="68" pos:column="20">!=<pos:position pos:line="68" pos:column="22"/></operator> <call><name><name pos:line="68" pos:column="23">data<pos:position pos:line="68" pos:column="27"/></name><operator pos:line="68" pos:column="27">-&gt;<pos:position pos:line="68" pos:column="32"/></operator><name pos:line="68" pos:column="29">fwrite<pos:position pos:line="68" pos:column="35"/></name></name><argument_list pos:line="68" pos:column="35">(<argument><expr><name pos:line="68" pos:column="36">buf<pos:position pos:line="68" pos:column="39"/></name></expr></argument>, <argument><expr><literal type="number" pos:line="68" pos:column="41">1<pos:position pos:line="68" pos:column="42"/></literal></expr></argument>, <argument><expr><call><name pos:line="68" pos:column="44">strlen<pos:position pos:line="68" pos:column="50"/></name><argument_list pos:line="68" pos:column="50">(<argument><expr><name pos:line="68" pos:column="51">buf<pos:position pos:line="68" pos:column="54"/></name></expr></argument>)<pos:position pos:line="68" pos:column="55"/></argument_list></call></expr></argument>, <argument><expr><name><name pos:line="68" pos:column="57">data<pos:position pos:line="68" pos:column="61"/></name><operator pos:line="68" pos:column="61">-&gt;<pos:position pos:line="68" pos:column="66"/></operator><name pos:line="68" pos:column="63">out<pos:position pos:line="68" pos:column="66"/></name></name></expr></argument>)<pos:position pos:line="68" pos:column="67"/></argument_list></call></expr>)<pos:position pos:line="68" pos:column="68"/></condition><then pos:line="68" pos:column="68"> <block pos:line="68" pos:column="69">{
      <expr_stmt><expr><call><name pos:line="69" pos:column="7">failf<pos:position pos:line="69" pos:column="12"/></name> <argument_list pos:line="69" pos:column="13">(<argument><expr><name pos:line="69" pos:column="14">data<pos:position pos:line="69" pos:column="18"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="69" pos:column="20">"Failed writing output"<pos:position pos:line="69" pos:column="43"/></literal></expr></argument>)<pos:position pos:line="69" pos:column="44"/></argument_list></call></expr>;<pos:position pos:line="69" pos:column="45"/></expr_stmt>
      <return pos:line="70" pos:column="7">return <expr><name pos:line="70" pos:column="14">CURLE_WRITE_ERROR<pos:position pos:line="70" pos:column="31"/></name></expr>;<pos:position pos:line="70" pos:column="32"/></return>
    }<pos:position pos:line="71" pos:column="6"/></block></then></if>
    <if pos:line="72" pos:column="5">if<condition pos:line="72" pos:column="7">(<expr><name><name pos:line="72" pos:column="8">data<pos:position pos:line="72" pos:column="12"/></name><operator pos:line="72" pos:column="12">-&gt;<pos:position pos:line="72" pos:column="17"/></operator><name pos:line="72" pos:column="14">writeheader<pos:position pos:line="72" pos:column="25"/></name></name></expr>)<pos:position pos:line="72" pos:column="26"/></condition><then pos:line="72" pos:column="26"> <block pos:line="72" pos:column="27">{
      <comment type="block" pos:line="73" pos:column="7">/* the header is requested to be written to this file */</comment>
      <if pos:line="74" pos:column="7">if<condition pos:line="74" pos:column="9">(<expr><call><name pos:line="74" pos:column="10">strlen<pos:position pos:line="74" pos:column="16"/></name><argument_list pos:line="74" pos:column="16">(<argument><expr><name pos:line="74" pos:column="17">buf<pos:position pos:line="74" pos:column="20"/></name></expr></argument>)<pos:position pos:line="74" pos:column="21"/></argument_list></call> <operator pos:line="74" pos:column="22">!=<pos:position pos:line="74" pos:column="24"/></operator> <call><name><name pos:line="74" pos:column="25">data<pos:position pos:line="74" pos:column="29"/></name><operator pos:line="74" pos:column="29">-&gt;<pos:position pos:line="74" pos:column="34"/></operator><name pos:line="74" pos:column="31">fwrite<pos:position pos:line="74" pos:column="37"/></name></name> <argument_list pos:line="74" pos:column="38">(<argument><expr><name pos:line="74" pos:column="39">buf<pos:position pos:line="74" pos:column="42"/></name></expr></argument>, <argument><expr><literal type="number" pos:line="74" pos:column="44">1<pos:position pos:line="74" pos:column="45"/></literal></expr></argument>, <argument><expr><call><name pos:line="74" pos:column="47">strlen<pos:position pos:line="74" pos:column="53"/></name><argument_list pos:line="74" pos:column="53">(<argument><expr><name pos:line="74" pos:column="54">buf<pos:position pos:line="74" pos:column="57"/></name></expr></argument>)<pos:position pos:line="74" pos:column="58"/></argument_list></call></expr></argument>,
                                      <argument><expr><name><name pos:line="75" pos:column="39">data<pos:position pos:line="75" pos:column="43"/></name><operator pos:line="75" pos:column="43">-&gt;<pos:position pos:line="75" pos:column="48"/></operator><name pos:line="75" pos:column="45">writeheader<pos:position pos:line="75" pos:column="56"/></name></name></expr></argument>)<pos:position pos:line="75" pos:column="57"/></argument_list></call></expr>)<pos:position pos:line="75" pos:column="58"/></condition><then pos:line="75" pos:column="58"> <block pos:line="75" pos:column="59">{
        <expr_stmt><expr><call><name pos:line="76" pos:column="9">failf<pos:position pos:line="76" pos:column="14"/></name> <argument_list pos:line="76" pos:column="15">(<argument><expr><name pos:line="76" pos:column="16">data<pos:position pos:line="76" pos:column="20"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="76" pos:column="22">"Failed writing output"<pos:position pos:line="76" pos:column="45"/></literal></expr></argument>)<pos:position pos:line="76" pos:column="46"/></argument_list></call></expr>;<pos:position pos:line="76" pos:column="47"/></expr_stmt>
        <return pos:line="77" pos:column="9">return <expr><name pos:line="77" pos:column="16">CURLE_WRITE_ERROR<pos:position pos:line="77" pos:column="33"/></name></expr>;<pos:position pos:line="77" pos:column="34"/></return>
      }<pos:position pos:line="78" pos:column="8"/></block></then></if>
    }<pos:position pos:line="79" pos:column="6"/></block></then></if>
    <return pos:line="80" pos:column="5">return <expr><name pos:line="80" pos:column="12">CURLE_OK<pos:position pos:line="80" pos:column="20"/></name></expr>;<pos:position pos:line="80" pos:column="21"/></return>
  }<pos:position pos:line="81" pos:column="4"/></block></then></if>

  <comment type="block" pos:line="83" pos:column="3">/* We have chosen to use the PORT command */</comment>
  <if pos:line="84" pos:column="3">if<condition pos:line="84" pos:column="5">(<expr><name><name pos:line="84" pos:column="6">data<pos:position pos:line="84" pos:column="10"/></name><operator pos:line="84" pos:column="10">-&gt;<pos:position pos:line="84" pos:column="15"/></operator><name pos:line="84" pos:column="12">bits<pos:position pos:line="84" pos:column="16"/></name><operator pos:line="84" pos:column="16">.<pos:position pos:line="84" pos:column="17"/></operator><name pos:line="84" pos:column="17">ftp_use_port<pos:position pos:line="84" pos:column="29"/></name></name></expr>)<pos:position pos:line="84" pos:column="30"/></condition><then pos:line="84" pos:column="30"> <block pos:line="84" pos:column="31">{
    <decl_stmt><decl><type><name><name pos:line="85" pos:column="5">struct<pos:position pos:line="85" pos:column="11"/></name> <name pos:line="85" pos:column="12">sockaddr_in<pos:position pos:line="85" pos:column="23"/></name></name></type> <name pos:line="85" pos:column="24">sa<pos:position pos:line="85" pos:column="26"/></name></decl>;<pos:position pos:line="85" pos:column="27"/></decl_stmt>
    <decl_stmt><decl><type><name><name pos:line="86" pos:column="5">struct<pos:position pos:line="86" pos:column="11"/></name> <name pos:line="86" pos:column="12">hostent<pos:position pos:line="86" pos:column="19"/></name></name> <modifier pos:line="86" pos:column="20">*<pos:position pos:line="86" pos:column="21"/></modifier></type><name pos:line="86" pos:column="21">h<pos:position pos:line="86" pos:column="22"/></name><init pos:line="86" pos:column="22">=<expr><name pos:line="86" pos:column="23">NULL<pos:position pos:line="86" pos:column="27"/></name></expr></init></decl>;<pos:position pos:line="86" pos:column="28"/></decl_stmt>
    <decl_stmt><decl><type><name pos:line="87" pos:column="5">size_t<pos:position pos:line="87" pos:column="11"/></name></type> <name pos:line="87" pos:column="12">size<pos:position pos:line="87" pos:column="16"/></name></decl>;<pos:position pos:line="87" pos:column="17"/></decl_stmt>
    <decl_stmt><decl><type><name pos:line="88" pos:column="5">unsigned<pos:position pos:line="88" pos:column="13"/></name> <name pos:line="88" pos:column="14">short<pos:position pos:line="88" pos:column="19"/></name></type> <name pos:line="88" pos:column="20">porttouse<pos:position pos:line="88" pos:column="29"/></name></decl>;<pos:position pos:line="88" pos:column="30"/></decl_stmt>
    <decl_stmt><decl><type><name pos:line="89" pos:column="5">char<pos:position pos:line="89" pos:column="9"/></name></type> <name><name pos:line="89" pos:column="10">myhost<pos:position pos:line="89" pos:column="16"/></name><index pos:line="89" pos:column="16">[<expr><literal type="number" pos:line="89" pos:column="17">256<pos:position pos:line="89" pos:column="20"/></literal></expr>]<pos:position pos:line="89" pos:column="21"/></index></name> <init pos:line="89" pos:column="22">= <expr><literal type="string" pos:line="89" pos:column="24">""<pos:position pos:line="89" pos:column="26"/></literal></expr></init></decl>;<pos:position pos:line="89" pos:column="27"/></decl_stmt>

    <if pos:line="91" pos:column="5">if<condition pos:line="91" pos:column="7">(<expr><name><name pos:line="91" pos:column="8">data<pos:position pos:line="91" pos:column="12"/></name><operator pos:line="91" pos:column="12">-&gt;<pos:position pos:line="91" pos:column="17"/></operator><name pos:line="91" pos:column="14">ftpport<pos:position pos:line="91" pos:column="21"/></name></name></expr>)<pos:position pos:line="91" pos:column="22"/></condition><then pos:line="91" pos:column="22"> <block pos:line="91" pos:column="23">{
      <if pos:line="92" pos:column="7">if<condition pos:line="92" pos:column="9">(<expr><call><name pos:line="92" pos:column="10">if2ip<pos:position pos:line="92" pos:column="15"/></name><argument_list pos:line="92" pos:column="15">(<argument><expr><name><name pos:line="92" pos:column="16">data<pos:position pos:line="92" pos:column="20"/></name><operator pos:line="92" pos:column="20">-&gt;<pos:position pos:line="92" pos:column="25"/></operator><name pos:line="92" pos:column="22">ftpport<pos:position pos:line="92" pos:column="29"/></name></name></expr></argument>, <argument><expr><name pos:line="92" pos:column="31">myhost<pos:position pos:line="92" pos:column="37"/></name></expr></argument>, <argument><expr><sizeof pos:line="92" pos:column="39">sizeof<argument_list pos:line="92" pos:column="45">(<argument><expr><name pos:line="92" pos:column="46">myhost<pos:position pos:line="92" pos:column="52"/></name></expr></argument>)<pos:position pos:line="92" pos:column="53"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="92" pos:column="54"/></argument_list></call></expr>)<pos:position pos:line="92" pos:column="55"/></condition><then pos:line="92" pos:column="55"> <block pos:line="92" pos:column="56">{
        <expr_stmt><expr><name pos:line="93" pos:column="9">h<pos:position pos:line="93" pos:column="10"/></name> <operator pos:line="93" pos:column="11">=<pos:position pos:line="93" pos:column="12"/></operator> <call><name pos:line="93" pos:column="13">GetHost<pos:position pos:line="93" pos:column="20"/></name><argument_list pos:line="93" pos:column="20">(<argument><expr><name pos:line="93" pos:column="21">data<pos:position pos:line="93" pos:column="25"/></name></expr></argument>, <argument><expr><name pos:line="93" pos:column="27">myhost<pos:position pos:line="93" pos:column="33"/></name></expr></argument>, <argument><expr><name pos:line="93" pos:column="35">hostent_buf<pos:position pos:line="93" pos:column="46"/></name></expr></argument>, <argument><expr><sizeof pos:line="93" pos:column="48">sizeof<argument_list pos:line="93" pos:column="54">(<argument><expr><name pos:line="93" pos:column="55">hostent_buf<pos:position pos:line="93" pos:column="66"/></name></expr></argument>)<pos:position pos:line="93" pos:column="67"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="93" pos:column="68"/></argument_list></call></expr>;<pos:position pos:line="93" pos:column="69"/></expr_stmt>
      }<pos:position pos:line="94" pos:column="8"/></block></then>
      <else pos:line="95" pos:column="7">else <block pos:line="95" pos:column="12">{
        <if pos:line="96" pos:column="9">if<condition pos:line="96" pos:column="11">(<expr><call><name pos:line="96" pos:column="12">strlen<pos:position pos:line="96" pos:column="18"/></name><argument_list pos:line="96" pos:column="18">(<argument><expr><name><name pos:line="96" pos:column="19">data<pos:position pos:line="96" pos:column="23"/></name><operator pos:line="96" pos:column="23">-&gt;<pos:position pos:line="96" pos:column="28"/></operator><name pos:line="96" pos:column="25">ftpport<pos:position pos:line="96" pos:column="32"/></name></name></expr></argument>)<pos:position pos:line="96" pos:column="33"/></argument_list></call><operator pos:line="96" pos:column="33">&gt;<pos:position pos:line="96" pos:column="37"/></operator><literal type="number" pos:line="96" pos:column="34">1<pos:position pos:line="96" pos:column="35"/></literal></expr>)<pos:position pos:line="96" pos:column="36"/></condition><then pos:line="96" pos:column="36">
          <block type="pseudo"><expr_stmt><expr><name pos:line="97" pos:column="11">h<pos:position pos:line="97" pos:column="12"/></name> <operator pos:line="97" pos:column="13">=<pos:position pos:line="97" pos:column="14"/></operator> <call><name pos:line="97" pos:column="15">GetHost<pos:position pos:line="97" pos:column="22"/></name><argument_list pos:line="97" pos:column="22">(<argument><expr><name pos:line="97" pos:column="23">data<pos:position pos:line="97" pos:column="27"/></name></expr></argument>, <argument><expr><name><name pos:line="97" pos:column="29">data<pos:position pos:line="97" pos:column="33"/></name><operator pos:line="97" pos:column="33">-&gt;<pos:position pos:line="97" pos:column="38"/></operator><name pos:line="97" pos:column="35">ftpport<pos:position pos:line="97" pos:column="42"/></name></name></expr></argument>, <argument><expr><name pos:line="97" pos:column="44">hostent_buf<pos:position pos:line="97" pos:column="55"/></name></expr></argument>, <argument><expr><sizeof pos:line="97" pos:column="57">sizeof<argument_list pos:line="97" pos:column="63">(<argument><expr><name pos:line="97" pos:column="64">hostent_buf<pos:position pos:line="97" pos:column="75"/></name></expr></argument>)<pos:position pos:line="97" pos:column="76"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="97" pos:column="77"/></argument_list></call></expr>;<pos:position pos:line="97" pos:column="78"/></expr_stmt></block></then></if>
        <if pos:line="98" pos:column="9">if<condition pos:line="98" pos:column="11">(<expr><name pos:line="98" pos:column="12">h<pos:position pos:line="98" pos:column="13"/></name></expr>)<pos:position pos:line="98" pos:column="14"/></condition><then pos:line="98" pos:column="14">
          <block type="pseudo"><expr_stmt><expr><call><name pos:line="99" pos:column="11">strcpy<pos:position pos:line="99" pos:column="17"/></name><argument_list pos:line="99" pos:column="17">(<argument><expr><name pos:line="99" pos:column="18">myhost<pos:position pos:line="99" pos:column="24"/></name></expr></argument>,<argument><expr><name><name pos:line="99" pos:column="25">data<pos:position pos:line="99" pos:column="29"/></name><operator pos:line="99" pos:column="29">-&gt;<pos:position pos:line="99" pos:column="34"/></operator><name pos:line="99" pos:column="31">ftpport<pos:position pos:line="99" pos:column="38"/></name></name></expr></argument>)<pos:position pos:line="99" pos:column="39"/></argument_list></call></expr>;<pos:position pos:line="99" pos:column="40"/></expr_stmt></block></then></if>
      }<pos:position pos:line="100" pos:column="8"/></block></else></if>
    }<pos:position pos:line="101" pos:column="6"/></block></then></if>
    <if pos:line="102" pos:column="5">if<condition pos:line="102" pos:column="7">(<expr><operator pos:line="102" pos:column="8">!<pos:position pos:line="102" pos:column="9"/></operator> <operator pos:line="102" pos:column="10">*<pos:position pos:line="102" pos:column="11"/></operator><name pos:line="102" pos:column="11">myhost<pos:position pos:line="102" pos:column="17"/></name></expr>)<pos:position pos:line="102" pos:column="18"/></condition><then pos:line="102" pos:column="18"> <block pos:line="102" pos:column="19">{
      <expr_stmt><expr><name pos:line="103" pos:column="7">h<pos:position pos:line="103" pos:column="8"/></name><operator pos:line="103" pos:column="8">=<pos:position pos:line="103" pos:column="9"/></operator><call><name pos:line="103" pos:column="9">GetHost<pos:position pos:line="103" pos:column="16"/></name><argument_list pos:line="103" pos:column="16">(<argument><expr><name pos:line="103" pos:column="17">data<pos:position pos:line="103" pos:column="21"/></name></expr></argument>, <argument><expr><call><name pos:line="103" pos:column="23">getmyhost<pos:position pos:line="103" pos:column="32"/></name><argument_list pos:line="103" pos:column="32">(<argument><expr><name pos:line="103" pos:column="33">myhost<pos:position pos:line="103" pos:column="39"/></name></expr></argument>,<argument><expr><sizeof pos:line="103" pos:column="40">sizeof<argument_list pos:line="103" pos:column="46">(<argument><expr><name pos:line="103" pos:column="47">myhost<pos:position pos:line="103" pos:column="53"/></name></expr></argument>)<pos:position pos:line="103" pos:column="54"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="103" pos:column="55"/></argument_list></call></expr></argument>, <argument><expr><name pos:line="103" pos:column="57">hostent_buf<pos:position pos:line="103" pos:column="68"/></name></expr></argument>, <argument><expr><sizeof pos:line="103" pos:column="70">sizeof<argument_list pos:line="103" pos:column="76">(<argument><expr><name pos:line="103" pos:column="77">hostent_buf<pos:position pos:line="103" pos:column="88"/></name></expr></argument>)<pos:position pos:line="103" pos:column="89"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="103" pos:column="90"/></argument_list></call></expr>;<pos:position pos:line="103" pos:column="91"/></expr_stmt>
    }<pos:position pos:line="104" pos:column="6"/></block></then></if>
    <expr_stmt><expr><call><name pos:line="105" pos:column="5">infof<pos:position pos:line="105" pos:column="10"/></name><argument_list pos:line="105" pos:column="10">(<argument><expr><name pos:line="105" pos:column="11">data<pos:position pos:line="105" pos:column="15"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="105" pos:column="17">"We connect from %s\n"<pos:position pos:line="105" pos:column="39"/></literal></expr></argument>, <argument><expr><name pos:line="105" pos:column="41">myhost<pos:position pos:line="105" pos:column="47"/></name></expr></argument>)<pos:position pos:line="105" pos:column="48"/></argument_list></call></expr>;<pos:position pos:line="105" pos:column="49"/></expr_stmt>

    <if pos:line="107" pos:column="5">if <condition pos:line="107" pos:column="8">( <expr><name pos:line="107" pos:column="10">h<pos:position pos:line="107" pos:column="11"/></name></expr> )<pos:position pos:line="107" pos:column="13"/></condition><then pos:line="107" pos:column="13"> <block pos:line="107" pos:column="14">{
      <if pos:line="108" pos:column="7">if<condition pos:line="108" pos:column="9">( <expr><operator pos:line="108" pos:column="11">(<pos:position pos:line="108" pos:column="12"/></operator><name pos:line="108" pos:column="12">portsock<pos:position pos:line="108" pos:column="20"/></name> <operator pos:line="108" pos:column="21">=<pos:position pos:line="108" pos:column="22"/></operator> <call><name pos:line="108" pos:column="23">socket<pos:position pos:line="108" pos:column="29"/></name><argument_list pos:line="108" pos:column="29">(<argument><expr><name pos:line="108" pos:column="30">AF_INET<pos:position pos:line="108" pos:column="37"/></name></expr></argument>, <argument><expr><name pos:line="108" pos:column="39">SOCK_STREAM<pos:position pos:line="108" pos:column="50"/></name></expr></argument>, <argument><expr><literal type="number" pos:line="108" pos:column="52">0<pos:position pos:line="108" pos:column="53"/></literal></expr></argument>)<pos:position pos:line="108" pos:column="54"/></argument_list></call><operator pos:line="108" pos:column="54">)<pos:position pos:line="108" pos:column="55"/></operator> <operator pos:line="108" pos:column="56">&gt;=<pos:position pos:line="108" pos:column="61"/></operator> <literal type="number" pos:line="108" pos:column="59">0<pos:position pos:line="108" pos:column="60"/></literal></expr> )<pos:position pos:line="108" pos:column="62"/></condition><then pos:line="108" pos:column="62"> <block pos:line="108" pos:column="63">{
        <expr_stmt><expr><call><name pos:line="109" pos:column="9">memset<pos:position pos:line="109" pos:column="15"/></name><argument_list pos:line="109" pos:column="15">(<argument><expr><operator pos:line="109" pos:column="16">(<pos:position pos:line="109" pos:column="17"/></operator><name pos:line="109" pos:column="17">char<pos:position pos:line="109" pos:column="21"/></name> <operator pos:line="109" pos:column="22">*<pos:position pos:line="109" pos:column="23"/></operator><operator pos:line="109" pos:column="23">)<pos:position pos:line="109" pos:column="24"/></operator><operator pos:line="109" pos:column="24">&amp;<pos:position pos:line="109" pos:column="29"/></operator><name pos:line="109" pos:column="25">sa<pos:position pos:line="109" pos:column="27"/></name></expr></argument>, <argument><expr><literal type="number" pos:line="109" pos:column="29">0<pos:position pos:line="109" pos:column="30"/></literal></expr></argument>, <argument><expr><sizeof pos:line="109" pos:column="32">sizeof<argument_list pos:line="109" pos:column="38">(<argument><expr><name pos:line="109" pos:column="39">sa<pos:position pos:line="109" pos:column="41"/></name></expr></argument>)<pos:position pos:line="109" pos:column="42"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="109" pos:column="43"/></argument_list></call></expr>;<pos:position pos:line="109" pos:column="44"/></expr_stmt>
        <expr_stmt><expr><call><name pos:line="110" pos:column="9">memcpy<pos:position pos:line="110" pos:column="15"/></name><argument_list pos:line="110" pos:column="15">(<argument><expr><operator pos:line="110" pos:column="16">(<pos:position pos:line="110" pos:column="17"/></operator><name pos:line="110" pos:column="17">char<pos:position pos:line="110" pos:column="21"/></name> <operator pos:line="110" pos:column="22">*<pos:position pos:line="110" pos:column="23"/></operator><operator pos:line="110" pos:column="23">)<pos:position pos:line="110" pos:column="24"/></operator><operator pos:line="110" pos:column="24">&amp;<pos:position pos:line="110" pos:column="29"/></operator><name><name pos:line="110" pos:column="25">sa<pos:position pos:line="110" pos:column="27"/></name><operator pos:line="110" pos:column="27">.<pos:position pos:line="110" pos:column="28"/></operator><name pos:line="110" pos:column="28">sin_addr<pos:position pos:line="110" pos:column="36"/></name></name></expr></argument>,
               <argument><expr><name><name pos:line="111" pos:column="16">h<pos:position pos:line="111" pos:column="17"/></name><operator pos:line="111" pos:column="17">-&gt;<pos:position pos:line="111" pos:column="22"/></operator><name pos:line="111" pos:column="19">h_addr<pos:position pos:line="111" pos:column="25"/></name></name></expr></argument>,
               <argument><expr><name><name pos:line="112" pos:column="16">h<pos:position pos:line="112" pos:column="17"/></name><operator pos:line="112" pos:column="17">-&gt;<pos:position pos:line="112" pos:column="22"/></operator><name pos:line="112" pos:column="19">h_length<pos:position pos:line="112" pos:column="27"/></name></name></expr></argument>)<pos:position pos:line="112" pos:column="28"/></argument_list></call></expr>;<pos:position pos:line="112" pos:column="29"/></expr_stmt>
        <expr_stmt><expr><name><name pos:line="113" pos:column="9">sa<pos:position pos:line="113" pos:column="11"/></name><operator pos:line="113" pos:column="11">.<pos:position pos:line="113" pos:column="12"/></operator><name pos:line="113" pos:column="12">sin_family<pos:position pos:line="113" pos:column="22"/></name></name> <operator pos:line="113" pos:column="23">=<pos:position pos:line="113" pos:column="24"/></operator> <name pos:line="113" pos:column="25">AF_INET<pos:position pos:line="113" pos:column="32"/></name></expr>;<pos:position pos:line="113" pos:column="33"/></expr_stmt>
        <expr_stmt><expr><name><name pos:line="114" pos:column="9">sa<pos:position pos:line="114" pos:column="11"/></name><operator pos:line="114" pos:column="11">.<pos:position pos:line="114" pos:column="12"/></operator><name pos:line="114" pos:column="12">sin_addr<pos:position pos:line="114" pos:column="20"/></name><operator pos:line="114" pos:column="20">.<pos:position pos:line="114" pos:column="21"/></operator><name pos:line="114" pos:column="21">s_addr<pos:position pos:line="114" pos:column="27"/></name></name> <operator pos:line="114" pos:column="28">=<pos:position pos:line="114" pos:column="29"/></operator> <name pos:line="114" pos:column="30">INADDR_ANY<pos:position pos:line="114" pos:column="40"/></name></expr>;<pos:position pos:line="114" pos:column="41"/></expr_stmt>
        <expr_stmt><expr><name><name pos:line="115" pos:column="9">sa<pos:position pos:line="115" pos:column="11"/></name><operator pos:line="115" pos:column="11">.<pos:position pos:line="115" pos:column="12"/></operator><name pos:line="115" pos:column="12">sin_port<pos:position pos:line="115" pos:column="20"/></name></name> <operator pos:line="115" pos:column="21">=<pos:position pos:line="115" pos:column="22"/></operator> <literal type="number" pos:line="115" pos:column="23">0<pos:position pos:line="115" pos:column="24"/></literal></expr>;<pos:position pos:line="115" pos:column="25"/></expr_stmt>
        <expr_stmt><expr><name pos:line="116" pos:column="9">size<pos:position pos:line="116" pos:column="13"/></name> <operator pos:line="116" pos:column="14">=<pos:position pos:line="116" pos:column="15"/></operator> <sizeof pos:line="116" pos:column="16">sizeof<argument_list pos:line="116" pos:column="22">(<argument><expr><name pos:line="116" pos:column="23">sa<pos:position pos:line="116" pos:column="25"/></name></expr></argument>)<pos:position pos:line="116" pos:column="26"/></argument_list></sizeof></expr>;<pos:position pos:line="116" pos:column="27"/></expr_stmt>

        <if pos:line="118" pos:column="9">if<condition pos:line="118" pos:column="11">(<expr><call><name pos:line="118" pos:column="12">bind<pos:position pos:line="118" pos:column="16"/></name><argument_list pos:line="118" pos:column="16">(<argument><expr><name pos:line="118" pos:column="17">portsock<pos:position pos:line="118" pos:column="25"/></name></expr></argument>, <argument><expr><operator pos:line="118" pos:column="27">(<pos:position pos:line="118" pos:column="28"/></operator>struct <name pos:line="118" pos:column="35">sockaddr<pos:position pos:line="118" pos:column="43"/></name> <operator pos:line="118" pos:column="44">*<pos:position pos:line="118" pos:column="45"/></operator><operator pos:line="118" pos:column="45">)<pos:position pos:line="118" pos:column="46"/></operator><operator pos:line="118" pos:column="46">&amp;<pos:position pos:line="118" pos:column="51"/></operator><name pos:line="118" pos:column="47">sa<pos:position pos:line="118" pos:column="49"/></name></expr></argument>, <argument><expr><name pos:line="118" pos:column="51">size<pos:position pos:line="118" pos:column="55"/></name></expr></argument>)<pos:position pos:line="118" pos:column="56"/></argument_list></call> <operator pos:line="118" pos:column="57">&gt;=<pos:position pos:line="118" pos:column="62"/></operator> <literal type="number" pos:line="118" pos:column="60">0<pos:position pos:line="118" pos:column="61"/></literal></expr>)<pos:position pos:line="118" pos:column="62"/></condition><then pos:line="118" pos:column="62"> <block pos:line="118" pos:column="63">{
          <comment type="block" pos:line="119" pos:column="11">/* we succeeded to bind */</comment>
          <decl_stmt><decl><type><name><name pos:line="120" pos:column="11">struct<pos:position pos:line="120" pos:column="17"/></name> <name pos:line="120" pos:column="18">sockaddr_in<pos:position pos:line="120" pos:column="29"/></name></name></type> <name pos:line="120" pos:column="30">add<pos:position pos:line="120" pos:column="33"/></name></decl>;<pos:position pos:line="120" pos:column="34"/></decl_stmt>
          <expr_stmt><expr><name pos:line="121" pos:column="11">size<pos:position pos:line="121" pos:column="15"/></name> <operator pos:line="121" pos:column="16">=<pos:position pos:line="121" pos:column="17"/></operator> <sizeof pos:line="121" pos:column="18">sizeof<argument_list pos:line="121" pos:column="24">(<argument><expr><name pos:line="121" pos:column="25">add<pos:position pos:line="121" pos:column="28"/></name></expr></argument>)<pos:position pos:line="121" pos:column="29"/></argument_list></sizeof></expr>;<pos:position pos:line="121" pos:column="30"/></expr_stmt>

          <if pos:line="123" pos:column="11">if<condition pos:line="123" pos:column="13">(<expr><call><name pos:line="123" pos:column="14">getsockname<pos:position pos:line="123" pos:column="25"/></name><argument_list pos:line="123" pos:column="25">(<argument><expr><name pos:line="123" pos:column="26">portsock<pos:position pos:line="123" pos:column="34"/></name></expr></argument>, <argument><expr><operator pos:line="123" pos:column="36">(<pos:position pos:line="123" pos:column="37"/></operator>struct <name pos:line="123" pos:column="44">sockaddr<pos:position pos:line="123" pos:column="52"/></name> <operator pos:line="123" pos:column="53">*<pos:position pos:line="123" pos:column="54"/></operator><operator pos:line="123" pos:column="54">)<pos:position pos:line="123" pos:column="55"/></operator> <operator pos:line="123" pos:column="56">&amp;<pos:position pos:line="123" pos:column="61"/></operator><name pos:line="123" pos:column="57">add<pos:position pos:line="123" pos:column="60"/></name></expr></argument>,
                         <argument><expr><operator pos:line="124" pos:column="26">(<pos:position pos:line="124" pos:column="27"/></operator><name pos:line="124" pos:column="27">int<pos:position pos:line="124" pos:column="30"/></name> <operator pos:line="124" pos:column="31">*<pos:position pos:line="124" pos:column="32"/></operator><operator pos:line="124" pos:column="32">)<pos:position pos:line="124" pos:column="33"/></operator><operator pos:line="124" pos:column="33">&amp;<pos:position pos:line="124" pos:column="38"/></operator><name pos:line="124" pos:column="34">size<pos:position pos:line="124" pos:column="38"/></name></expr></argument>)<pos:position pos:line="124" pos:column="39"/></argument_list></call><operator pos:line="124" pos:column="39">&lt;<pos:position pos:line="124" pos:column="43"/></operator><literal type="number" pos:line="124" pos:column="40">0<pos:position pos:line="124" pos:column="41"/></literal></expr>)<pos:position pos:line="124" pos:column="42"/></condition><then pos:line="124" pos:column="42"> <block pos:line="124" pos:column="43">{
            <expr_stmt><expr><call><name pos:line="125" pos:column="13">failf<pos:position pos:line="125" pos:column="18"/></name><argument_list pos:line="125" pos:column="18">(<argument><expr><name pos:line="125" pos:column="19">data<pos:position pos:line="125" pos:column="23"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="125" pos:column="25">"getsockname() failed"<pos:position pos:line="125" pos:column="47"/></literal></expr></argument>)<pos:position pos:line="125" pos:column="48"/></argument_list></call></expr>;<pos:position pos:line="125" pos:column="49"/></expr_stmt>
            <return pos:line="126" pos:column="13">return <expr><name pos:line="126" pos:column="20">CURLE_FTP_PORT_FAILED<pos:position pos:line="126" pos:column="41"/></name></expr>;<pos:position pos:line="126" pos:column="42"/></return>
          }<pos:position pos:line="127" pos:column="12"/></block></then></if>
          <expr_stmt><expr><name pos:line="128" pos:column="11">porttouse<pos:position pos:line="128" pos:column="20"/></name> <operator pos:line="128" pos:column="21">=<pos:position pos:line="128" pos:column="22"/></operator> <call><name pos:line="128" pos:column="23">ntohs<pos:position pos:line="128" pos:column="28"/></name><argument_list pos:line="128" pos:column="28">(<argument><expr><name><name pos:line="128" pos:column="29">add<pos:position pos:line="128" pos:column="32"/></name><operator pos:line="128" pos:column="32">.<pos:position pos:line="128" pos:column="33"/></operator><name pos:line="128" pos:column="33">sin_port<pos:position pos:line="128" pos:column="41"/></name></name></expr></argument>)<pos:position pos:line="128" pos:column="42"/></argument_list></call></expr>;<pos:position pos:line="128" pos:column="43"/></expr_stmt>

          <if pos:line="130" pos:column="11">if <condition pos:line="130" pos:column="14">( <expr><call><name pos:line="130" pos:column="16">listen<pos:position pos:line="130" pos:column="22"/></name><argument_list pos:line="130" pos:column="22">(<argument><expr><name pos:line="130" pos:column="23">portsock<pos:position pos:line="130" pos:column="31"/></name></expr></argument>, <argument><expr><literal type="number" pos:line="130" pos:column="33">1<pos:position pos:line="130" pos:column="34"/></literal></expr></argument>)<pos:position pos:line="130" pos:column="35"/></argument_list></call> <operator pos:line="130" pos:column="36">&lt;<pos:position pos:line="130" pos:column="40"/></operator> <literal type="number" pos:line="130" pos:column="38">0<pos:position pos:line="130" pos:column="39"/></literal></expr> )<pos:position pos:line="130" pos:column="41"/></condition><then pos:line="130" pos:column="41"> <block pos:line="130" pos:column="42">{
            <expr_stmt><expr><call><name pos:line="131" pos:column="13">failf<pos:position pos:line="131" pos:column="18"/></name><argument_list pos:line="131" pos:column="18">(<argument><expr><name pos:line="131" pos:column="19">data<pos:position pos:line="131" pos:column="23"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="131" pos:column="25">"listen(2) failed on socket"<pos:position pos:line="131" pos:column="53"/></literal></expr></argument>)<pos:position pos:line="131" pos:column="54"/></argument_list></call></expr>;<pos:position pos:line="131" pos:column="55"/></expr_stmt>
            <return pos:line="132" pos:column="13">return <expr><name pos:line="132" pos:column="20">CURLE_FTP_PORT_FAILED<pos:position pos:line="132" pos:column="41"/></name></expr>;<pos:position pos:line="132" pos:column="42"/></return>
          }<pos:position pos:line="133" pos:column="12"/></block></then></if>
        }<pos:position pos:line="134" pos:column="10"/></block></then>
        <else pos:line="135" pos:column="9">else <block pos:line="135" pos:column="14">{
          <expr_stmt><expr><call><name pos:line="136" pos:column="11">failf<pos:position pos:line="136" pos:column="16"/></name><argument_list pos:line="136" pos:column="16">(<argument><expr><name pos:line="136" pos:column="17">data<pos:position pos:line="136" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="136" pos:column="23">"bind(2) failed on socket"<pos:position pos:line="136" pos:column="49"/></literal></expr></argument>)<pos:position pos:line="136" pos:column="50"/></argument_list></call></expr>;<pos:position pos:line="136" pos:column="51"/></expr_stmt>
          <return pos:line="137" pos:column="11">return <expr><name pos:line="137" pos:column="18">CURLE_FTP_PORT_FAILED<pos:position pos:line="137" pos:column="39"/></name></expr>;<pos:position pos:line="137" pos:column="40"/></return>
        }<pos:position pos:line="138" pos:column="10"/></block></else></if>
      }<pos:position pos:line="139" pos:column="8"/></block></then>
      <else pos:line="140" pos:column="7">else <block pos:line="140" pos:column="12">{
        <expr_stmt><expr><call><name pos:line="141" pos:column="9">failf<pos:position pos:line="141" pos:column="14"/></name><argument_list pos:line="141" pos:column="14">(<argument><expr><name pos:line="141" pos:column="15">data<pos:position pos:line="141" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="141" pos:column="21">"socket(2) failed (%s)"<pos:position pos:line="141" pos:column="44"/></literal></expr></argument>)<pos:position pos:line="141" pos:column="45"/></argument_list></call></expr>;<pos:position pos:line="141" pos:column="46"/></expr_stmt>
        <return pos:line="142" pos:column="9">return <expr><name pos:line="142" pos:column="16">CURLE_FTP_PORT_FAILED<pos:position pos:line="142" pos:column="37"/></name></expr>;<pos:position pos:line="142" pos:column="38"/></return>
      }<pos:position pos:line="143" pos:column="8"/></block></else></if>
    }<pos:position pos:line="144" pos:column="6"/></block></then>
    <else pos:line="145" pos:column="5">else <block pos:line="145" pos:column="10">{
      <expr_stmt><expr><call><name pos:line="146" pos:column="7">failf<pos:position pos:line="146" pos:column="12"/></name><argument_list pos:line="146" pos:column="12">(<argument><expr><name pos:line="146" pos:column="13">data<pos:position pos:line="146" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="146" pos:column="19">"could't find my own IP address (%s)"<pos:position pos:line="146" pos:column="56"/></literal></expr></argument>, <argument><expr><name pos:line="146" pos:column="58">myhost<pos:position pos:line="146" pos:column="64"/></name></expr></argument>)<pos:position pos:line="146" pos:column="65"/></argument_list></call></expr>;<pos:position pos:line="146" pos:column="66"/></expr_stmt>
      <return pos:line="147" pos:column="7">return <expr><name pos:line="147" pos:column="14">CURLE_FTP_PORT_FAILED<pos:position pos:line="147" pos:column="35"/></name></expr>;<pos:position pos:line="147" pos:column="36"/></return>
    }<pos:position pos:line="148" pos:column="6"/></block></else></if>
    <block pos:line="149" pos:column="5">{
      <decl_stmt><decl><type><name><name pos:line="150" pos:column="7">struct<pos:position pos:line="150" pos:column="13"/></name> <name pos:line="150" pos:column="14">in_addr<pos:position pos:line="150" pos:column="21"/></name></name></type> <name pos:line="150" pos:column="22">in<pos:position pos:line="150" pos:column="24"/></name></decl>;<pos:position pos:line="150" pos:column="25"/></decl_stmt>
      <decl_stmt><decl><type><name pos:line="151" pos:column="7">unsigned<pos:position pos:line="151" pos:column="15"/></name> <name pos:line="151" pos:column="16">short<pos:position pos:line="151" pos:column="21"/></name></type> <name><name pos:line="151" pos:column="22">ip<pos:position pos:line="151" pos:column="24"/></name><index pos:line="151" pos:column="24">[<expr><literal type="number" pos:line="151" pos:column="25">5<pos:position pos:line="151" pos:column="26"/></literal></expr>]<pos:position pos:line="151" pos:column="27"/></index></name></decl>;<pos:position pos:line="151" pos:column="28"/></decl_stmt>
      <expr_stmt><expr><operator pos:line="152" pos:column="7">(<pos:position pos:line="152" pos:column="8"/></operator><name pos:line="152" pos:column="8">void<pos:position pos:line="152" pos:column="12"/></name><operator pos:line="152" pos:column="12">)<pos:position pos:line="152" pos:column="13"/></operator> <call><name pos:line="152" pos:column="14">memcpy<pos:position pos:line="152" pos:column="20"/></name><argument_list pos:line="152" pos:column="20">(<argument><expr><operator pos:line="152" pos:column="21">&amp;<pos:position pos:line="152" pos:column="26"/></operator><name><name pos:line="152" pos:column="22">in<pos:position pos:line="152" pos:column="24"/></name><operator pos:line="152" pos:column="24">.<pos:position pos:line="152" pos:column="25"/></operator><name pos:line="152" pos:column="25">s_addr<pos:position pos:line="152" pos:column="31"/></name></name></expr></argument>, <argument><expr><operator pos:line="152" pos:column="33">*<pos:position pos:line="152" pos:column="34"/></operator><name><name pos:line="152" pos:column="34">h<pos:position pos:line="152" pos:column="35"/></name><operator pos:line="152" pos:column="35">-&gt;<pos:position pos:line="152" pos:column="40"/></operator><name pos:line="152" pos:column="37">h_addr_list<pos:position pos:line="152" pos:column="48"/></name></name></expr></argument>, <argument><expr><sizeof pos:line="152" pos:column="50">sizeof <argument_list pos:line="152" pos:column="57">(<argument><expr><name><name pos:line="152" pos:column="58">in<pos:position pos:line="152" pos:column="60"/></name><operator pos:line="152" pos:column="60">.<pos:position pos:line="152" pos:column="61"/></operator><name pos:line="152" pos:column="61">s_addr<pos:position pos:line="152" pos:column="67"/></name></name></expr></argument>)<pos:position pos:line="152" pos:column="68"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="152" pos:column="69"/></argument_list></call></expr>;<pos:position pos:line="152" pos:column="70"/></expr_stmt>
<cpp:if pos:line="153" pos:column="1">#<cpp:directive pos:line="153" pos:column="2">if<pos:position pos:line="153" pos:column="4"/></cpp:directive> <expr><call><name pos:line="153" pos:column="5">defined<pos:position pos:line="153" pos:column="12"/></name> <argument_list pos:line="153" pos:column="13">(<argument><expr><name pos:line="153" pos:column="14">HAVE_INET_NTOA_R<pos:position pos:line="153" pos:column="30"/></name></expr></argument>)<pos:position pos:line="153" pos:column="31"/></argument_list></call></expr></cpp:if>
      <expr_stmt><expr><call><name pos:line="154" pos:column="7">sscanf<pos:position pos:line="154" pos:column="13"/></name><argument_list pos:line="154" pos:column="13">( <argument><expr><call><name pos:line="154" pos:column="15">inet_ntoa_r<pos:position pos:line="154" pos:column="26"/></name><argument_list pos:line="154" pos:column="26">(<argument><expr><name pos:line="154" pos:column="27">in<pos:position pos:line="154" pos:column="29"/></name></expr></argument>, <argument><expr><name pos:line="154" pos:column="31">ntoa_buf<pos:position pos:line="154" pos:column="39"/></name></expr></argument>, <argument><expr><sizeof pos:line="154" pos:column="41">sizeof<argument_list pos:line="154" pos:column="47">(<argument><expr><name pos:line="154" pos:column="48">ntoa_buf<pos:position pos:line="154" pos:column="56"/></name></expr></argument>)<pos:position pos:line="154" pos:column="57"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="154" pos:column="58"/></argument_list></call></expr></argument>, <argument><expr><literal type="string" pos:line="154" pos:column="60">"%hu.%hu.%hu.%hu"<pos:position pos:line="154" pos:column="77"/></literal></expr></argument>,
              <argument><expr><operator pos:line="155" pos:column="15">&amp;<pos:position pos:line="155" pos:column="20"/></operator><name><name pos:line="155" pos:column="16">ip<pos:position pos:line="155" pos:column="18"/></name><index pos:line="155" pos:column="18">[<expr><literal type="number" pos:line="155" pos:column="19">0<pos:position pos:line="155" pos:column="20"/></literal></expr>]<pos:position pos:line="155" pos:column="21"/></index></name></expr></argument>, <argument><expr><operator pos:line="155" pos:column="23">&amp;<pos:position pos:line="155" pos:column="28"/></operator><name><name pos:line="155" pos:column="24">ip<pos:position pos:line="155" pos:column="26"/></name><index pos:line="155" pos:column="26">[<expr><literal type="number" pos:line="155" pos:column="27">1<pos:position pos:line="155" pos:column="28"/></literal></expr>]<pos:position pos:line="155" pos:column="29"/></index></name></expr></argument>, <argument><expr><operator pos:line="155" pos:column="31">&amp;<pos:position pos:line="155" pos:column="36"/></operator><name><name pos:line="155" pos:column="32">ip<pos:position pos:line="155" pos:column="34"/></name><index pos:line="155" pos:column="34">[<expr><literal type="number" pos:line="155" pos:column="35">2<pos:position pos:line="155" pos:column="36"/></literal></expr>]<pos:position pos:line="155" pos:column="37"/></index></name></expr></argument>, <argument><expr><operator pos:line="155" pos:column="39">&amp;<pos:position pos:line="155" pos:column="44"/></operator><name><name pos:line="155" pos:column="40">ip<pos:position pos:line="155" pos:column="42"/></name><index pos:line="155" pos:column="42">[<expr><literal type="number" pos:line="155" pos:column="43">3<pos:position pos:line="155" pos:column="44"/></literal></expr>]<pos:position pos:line="155" pos:column="45"/></index></name></expr></argument>)<pos:position pos:line="155" pos:column="46"/></argument_list></call></expr>;<pos:position pos:line="155" pos:column="47"/></expr_stmt>
<cpp:else pos:line="156" pos:column="1">#<cpp:directive pos:line="156" pos:column="2">else<pos:position pos:line="156" pos:column="6"/></cpp:directive></cpp:else>
      <expr_stmt><expr><call><name pos:line="157" pos:column="7">sscanf<pos:position pos:line="157" pos:column="13"/></name><argument_list pos:line="157" pos:column="13">( <argument><expr><call><name pos:line="157" pos:column="15">inet_ntoa<pos:position pos:line="157" pos:column="24"/></name><argument_list pos:line="157" pos:column="24">(<argument><expr><name pos:line="157" pos:column="25">in<pos:position pos:line="157" pos:column="27"/></name></expr></argument>)<pos:position pos:line="157" pos:column="28"/></argument_list></call></expr></argument>, <argument><expr><literal type="string" pos:line="157" pos:column="30">"%hu.%hu.%hu.%hu"<pos:position pos:line="157" pos:column="47"/></literal></expr></argument>,
              <argument><expr><operator pos:line="158" pos:column="15">&amp;<pos:position pos:line="158" pos:column="20"/></operator><name><name pos:line="158" pos:column="16">ip<pos:position pos:line="158" pos:column="18"/></name><index pos:line="158" pos:column="18">[<expr><literal type="number" pos:line="158" pos:column="19">0<pos:position pos:line="158" pos:column="20"/></literal></expr>]<pos:position pos:line="158" pos:column="21"/></index></name></expr></argument>, <argument><expr><operator pos:line="158" pos:column="23">&amp;<pos:position pos:line="158" pos:column="28"/></operator><name><name pos:line="158" pos:column="24">ip<pos:position pos:line="158" pos:column="26"/></name><index pos:line="158" pos:column="26">[<expr><literal type="number" pos:line="158" pos:column="27">1<pos:position pos:line="158" pos:column="28"/></literal></expr>]<pos:position pos:line="158" pos:column="29"/></index></name></expr></argument>, <argument><expr><operator pos:line="158" pos:column="31">&amp;<pos:position pos:line="158" pos:column="36"/></operator><name><name pos:line="158" pos:column="32">ip<pos:position pos:line="158" pos:column="34"/></name><index pos:line="158" pos:column="34">[<expr><literal type="number" pos:line="158" pos:column="35">2<pos:position pos:line="158" pos:column="36"/></literal></expr>]<pos:position pos:line="158" pos:column="37"/></index></name></expr></argument>, <argument><expr><operator pos:line="158" pos:column="39">&amp;<pos:position pos:line="158" pos:column="44"/></operator><name><name pos:line="158" pos:column="40">ip<pos:position pos:line="158" pos:column="42"/></name><index pos:line="158" pos:column="42">[<expr><literal type="number" pos:line="158" pos:column="43">3<pos:position pos:line="158" pos:column="44"/></literal></expr>]<pos:position pos:line="158" pos:column="45"/></index></name></expr></argument>)<pos:position pos:line="158" pos:column="46"/></argument_list></call></expr>;<pos:position pos:line="158" pos:column="47"/></expr_stmt>
<cpp:endif pos:line="159" pos:column="1">#<cpp:directive pos:line="159" pos:column="2">endif<pos:position pos:line="159" pos:column="7"/></cpp:directive></cpp:endif>
      <expr_stmt><expr><call><name pos:line="160" pos:column="7">sendf<pos:position pos:line="160" pos:column="12"/></name><argument_list pos:line="160" pos:column="12">(<argument><expr><name><name pos:line="160" pos:column="13">data<pos:position pos:line="160" pos:column="17"/></name><operator pos:line="160" pos:column="17">-&gt;<pos:position pos:line="160" pos:column="22"/></operator><name pos:line="160" pos:column="19">firstsocket<pos:position pos:line="160" pos:column="30"/></name></name></expr></argument>, <argument><expr><name pos:line="160" pos:column="32">data<pos:position pos:line="160" pos:column="36"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="160" pos:column="38">"PORT %d,%d,%d,%d,%d,%d\r\n"<pos:position pos:line="160" pos:column="66"/></literal></expr></argument>,
            <argument><expr><name><name pos:line="161" pos:column="13">ip<pos:position pos:line="161" pos:column="15"/></name><index pos:line="161" pos:column="15">[<expr><literal type="number" pos:line="161" pos:column="16">0<pos:position pos:line="161" pos:column="17"/></literal></expr>]<pos:position pos:line="161" pos:column="18"/></index></name></expr></argument>, <argument><expr><name><name pos:line="161" pos:column="20">ip<pos:position pos:line="161" pos:column="22"/></name><index pos:line="161" pos:column="22">[<expr><literal type="number" pos:line="161" pos:column="23">1<pos:position pos:line="161" pos:column="24"/></literal></expr>]<pos:position pos:line="161" pos:column="25"/></index></name></expr></argument>, <argument><expr><name><name pos:line="161" pos:column="27">ip<pos:position pos:line="161" pos:column="29"/></name><index pos:line="161" pos:column="29">[<expr><literal type="number" pos:line="161" pos:column="30">2<pos:position pos:line="161" pos:column="31"/></literal></expr>]<pos:position pos:line="161" pos:column="32"/></index></name></expr></argument>, <argument><expr><name><name pos:line="161" pos:column="34">ip<pos:position pos:line="161" pos:column="36"/></name><index pos:line="161" pos:column="36">[<expr><literal type="number" pos:line="161" pos:column="37">3<pos:position pos:line="161" pos:column="38"/></literal></expr>]<pos:position pos:line="161" pos:column="39"/></index></name></expr></argument>,
            <argument><expr><name pos:line="162" pos:column="13">porttouse<pos:position pos:line="162" pos:column="22"/></name> <operator pos:line="162" pos:column="23">&gt;&gt;<pos:position pos:line="162" pos:column="28"/></operator> <literal type="number" pos:line="162" pos:column="26">8<pos:position pos:line="162" pos:column="27"/></literal></expr></argument>,
            <argument><expr><name pos:line="163" pos:column="13">porttouse<pos:position pos:line="163" pos:column="22"/></name> <operator pos:line="163" pos:column="23">&amp;<pos:position pos:line="163" pos:column="28"/></operator> <literal type="number" pos:line="163" pos:column="25">255<pos:position pos:line="163" pos:column="28"/></literal></expr></argument>)<pos:position pos:line="163" pos:column="29"/></argument_list></call></expr>;<pos:position pos:line="163" pos:column="30"/></expr_stmt>
    }<pos:position pos:line="164" pos:column="6"/></block>

    <expr_stmt><expr><name pos:line="166" pos:column="5">nread<pos:position pos:line="166" pos:column="10"/></name> <operator pos:line="166" pos:column="11">=<pos:position pos:line="166" pos:column="12"/></operator> <call><name pos:line="166" pos:column="13">GetLastResponse<pos:position pos:line="166" pos:column="28"/></name><argument_list pos:line="166" pos:column="28">(<argument><expr><name><name pos:line="166" pos:column="29">data<pos:position pos:line="166" pos:column="33"/></name><operator pos:line="166" pos:column="33">-&gt;<pos:position pos:line="166" pos:column="38"/></operator><name pos:line="166" pos:column="35">firstsocket<pos:position pos:line="166" pos:column="46"/></name></name></expr></argument>, <argument><expr><name pos:line="166" pos:column="48">buf<pos:position pos:line="166" pos:column="51"/></name></expr></argument>, <argument><expr><name pos:line="166" pos:column="53">conn<pos:position pos:line="166" pos:column="57"/></name></expr></argument>)<pos:position pos:line="166" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="166" pos:column="59"/></expr_stmt>
    <if pos:line="167" pos:column="5">if<condition pos:line="167" pos:column="7">(<expr><name pos:line="167" pos:column="8">nread<pos:position pos:line="167" pos:column="13"/></name> <operator pos:line="167" pos:column="14">&lt;<pos:position pos:line="167" pos:column="18"/></operator> <literal type="number" pos:line="167" pos:column="16">0<pos:position pos:line="167" pos:column="17"/></literal></expr>)<pos:position pos:line="167" pos:column="18"/></condition><then pos:line="167" pos:column="18">
      <block type="pseudo"><return pos:line="168" pos:column="7">return <expr><name pos:line="168" pos:column="14">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="168" pos:column="39"/></name></expr>;<pos:position pos:line="168" pos:column="40"/></return></block></then></if>

    <if pos:line="170" pos:column="5">if<condition pos:line="170" pos:column="7">(<expr><call><name pos:line="170" pos:column="8">strncmp<pos:position pos:line="170" pos:column="15"/></name><argument_list pos:line="170" pos:column="15">(<argument><expr><name pos:line="170" pos:column="16">buf<pos:position pos:line="170" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="170" pos:column="21">"200"<pos:position pos:line="170" pos:column="26"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="170" pos:column="28">3<pos:position pos:line="170" pos:column="29"/></literal></expr></argument>)<pos:position pos:line="170" pos:column="30"/></argument_list></call></expr>)<pos:position pos:line="170" pos:column="31"/></condition><then pos:line="170" pos:column="31"> <block pos:line="170" pos:column="32">{
      <expr_stmt><expr><call><name pos:line="171" pos:column="7">failf<pos:position pos:line="171" pos:column="12"/></name><argument_list pos:line="171" pos:column="12">(<argument><expr><name pos:line="171" pos:column="13">data<pos:position pos:line="171" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="171" pos:column="19">"Server does not grok PORT, try without it!"<pos:position pos:line="171" pos:column="63"/></literal></expr></argument>)<pos:position pos:line="171" pos:column="64"/></argument_list></call></expr>;<pos:position pos:line="171" pos:column="65"/></expr_stmt>
      <return pos:line="172" pos:column="7">return <expr><name pos:line="172" pos:column="14">CURLE_FTP_PORT_FAILED<pos:position pos:line="172" pos:column="35"/></name></expr>;<pos:position pos:line="172" pos:column="36"/></return>
    }<pos:position pos:line="173" pos:column="6"/></block></then></if>     
  }<pos:position pos:line="174" pos:column="4"/></block></then>
  <else pos:line="175" pos:column="3">else <block pos:line="175" pos:column="8">{ <comment type="block" pos:line="175" pos:column="10">/* we use the PASV command */</comment>

    <expr_stmt><expr><call><name pos:line="177" pos:column="5">sendf<pos:position pos:line="177" pos:column="10"/></name><argument_list pos:line="177" pos:column="10">(<argument><expr><name><name pos:line="177" pos:column="11">data<pos:position pos:line="177" pos:column="15"/></name><operator pos:line="177" pos:column="15">-&gt;<pos:position pos:line="177" pos:column="20"/></operator><name pos:line="177" pos:column="17">firstsocket<pos:position pos:line="177" pos:column="28"/></name></name></expr></argument>, <argument><expr><name pos:line="177" pos:column="30">data<pos:position pos:line="177" pos:column="34"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="177" pos:column="36">"PASV\r\n"<pos:position pos:line="177" pos:column="46"/></literal></expr></argument>)<pos:position pos:line="177" pos:column="47"/></argument_list></call></expr>;<pos:position pos:line="177" pos:column="48"/></expr_stmt>

    <expr_stmt><expr><name pos:line="179" pos:column="5">nread<pos:position pos:line="179" pos:column="10"/></name> <operator pos:line="179" pos:column="11">=<pos:position pos:line="179" pos:column="12"/></operator> <call><name pos:line="179" pos:column="13">GetLastResponse<pos:position pos:line="179" pos:column="28"/></name><argument_list pos:line="179" pos:column="28">(<argument><expr><name><name pos:line="179" pos:column="29">data<pos:position pos:line="179" pos:column="33"/></name><operator pos:line="179" pos:column="33">-&gt;<pos:position pos:line="179" pos:column="38"/></operator><name pos:line="179" pos:column="35">firstsocket<pos:position pos:line="179" pos:column="46"/></name></name></expr></argument>, <argument><expr><name pos:line="179" pos:column="48">buf<pos:position pos:line="179" pos:column="51"/></name></expr></argument>, <argument><expr><name pos:line="179" pos:column="53">conn<pos:position pos:line="179" pos:column="57"/></name></expr></argument>)<pos:position pos:line="179" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="179" pos:column="59"/></expr_stmt>
    <if pos:line="180" pos:column="5">if<condition pos:line="180" pos:column="7">(<expr><name pos:line="180" pos:column="8">nread<pos:position pos:line="180" pos:column="13"/></name> <operator pos:line="180" pos:column="14">&lt;<pos:position pos:line="180" pos:column="18"/></operator> <literal type="number" pos:line="180" pos:column="16">0<pos:position pos:line="180" pos:column="17"/></literal></expr>)<pos:position pos:line="180" pos:column="18"/></condition><then pos:line="180" pos:column="18">
      <block type="pseudo"><return pos:line="181" pos:column="7">return <expr><name pos:line="181" pos:column="14">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="181" pos:column="39"/></name></expr>;<pos:position pos:line="181" pos:column="40"/></return></block></then></if>

    <if pos:line="183" pos:column="5">if<condition pos:line="183" pos:column="7">(<expr><call><name pos:line="183" pos:column="8">strncmp<pos:position pos:line="183" pos:column="15"/></name><argument_list pos:line="183" pos:column="15">(<argument><expr><name pos:line="183" pos:column="16">buf<pos:position pos:line="183" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="183" pos:column="21">"227"<pos:position pos:line="183" pos:column="26"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="183" pos:column="28">3<pos:position pos:line="183" pos:column="29"/></literal></expr></argument>)<pos:position pos:line="183" pos:column="30"/></argument_list></call></expr>)<pos:position pos:line="183" pos:column="31"/></condition><then pos:line="183" pos:column="31"> <block pos:line="183" pos:column="32">{
      <expr_stmt><expr><call><name pos:line="184" pos:column="7">failf<pos:position pos:line="184" pos:column="12"/></name><argument_list pos:line="184" pos:column="12">(<argument><expr><name pos:line="184" pos:column="13">data<pos:position pos:line="184" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="184" pos:column="19">"Odd return code after PASV"<pos:position pos:line="184" pos:column="47"/></literal></expr></argument>)<pos:position pos:line="184" pos:column="48"/></argument_list></call></expr>;<pos:position pos:line="184" pos:column="49"/></expr_stmt>
      <return pos:line="185" pos:column="7">return <expr><name pos:line="185" pos:column="14">CURLE_FTP_WEIRD_PASV_REPLY<pos:position pos:line="185" pos:column="40"/></name></expr>;<pos:position pos:line="185" pos:column="41"/></return>
    }<pos:position pos:line="186" pos:column="6"/></block></then>
    <else pos:line="187" pos:column="5">else <block pos:line="187" pos:column="10">{
      <decl_stmt><decl><type><name pos:line="188" pos:column="7">int<pos:position pos:line="188" pos:column="10"/></name></type> <name><name pos:line="188" pos:column="11">ip<pos:position pos:line="188" pos:column="13"/></name><index pos:line="188" pos:column="13">[<expr><literal type="number" pos:line="188" pos:column="14">4<pos:position pos:line="188" pos:column="15"/></literal></expr>]<pos:position pos:line="188" pos:column="16"/></index></name></decl>;<pos:position pos:line="188" pos:column="17"/></decl_stmt>
      <decl_stmt><decl><type><name pos:line="189" pos:column="7">int<pos:position pos:line="189" pos:column="10"/></name></type> <name><name pos:line="189" pos:column="11">port<pos:position pos:line="189" pos:column="15"/></name><index pos:line="189" pos:column="15">[<expr><literal type="number" pos:line="189" pos:column="16">2<pos:position pos:line="189" pos:column="17"/></literal></expr>]<pos:position pos:line="189" pos:column="18"/></index></name></decl>;<pos:position pos:line="189" pos:column="19"/></decl_stmt>
      <decl_stmt><decl><type><name pos:line="190" pos:column="7">unsigned<pos:position pos:line="190" pos:column="15"/></name> <name pos:line="190" pos:column="16">short<pos:position pos:line="190" pos:column="21"/></name></type> <name pos:line="190" pos:column="22">newport<pos:position pos:line="190" pos:column="29"/></name></decl>;<pos:position pos:line="190" pos:column="30"/></decl_stmt>
      <decl_stmt><decl><type><name pos:line="191" pos:column="7">char<pos:position pos:line="191" pos:column="11"/></name></type> <name><name pos:line="191" pos:column="12">newhost<pos:position pos:line="191" pos:column="19"/></name><index pos:line="191" pos:column="19">[<expr><literal type="number" pos:line="191" pos:column="20">32<pos:position pos:line="191" pos:column="22"/></literal></expr>]<pos:position pos:line="191" pos:column="23"/></index></name></decl>;<pos:position pos:line="191" pos:column="24"/></decl_stmt>
      <decl_stmt><decl><type><name><name pos:line="192" pos:column="7">struct<pos:position pos:line="192" pos:column="13"/></name> <name pos:line="192" pos:column="14">hostent<pos:position pos:line="192" pos:column="21"/></name></name> <modifier pos:line="192" pos:column="22">*<pos:position pos:line="192" pos:column="23"/></modifier></type><name pos:line="192" pos:column="23">he<pos:position pos:line="192" pos:column="25"/></name></decl>;<pos:position pos:line="192" pos:column="26"/></decl_stmt>
      <decl_stmt><decl><type><name pos:line="193" pos:column="7">char<pos:position pos:line="193" pos:column="11"/></name> <modifier pos:line="193" pos:column="12">*<pos:position pos:line="193" pos:column="13"/></modifier></type><name pos:line="193" pos:column="13">str<pos:position pos:line="193" pos:column="16"/></name><init pos:line="193" pos:column="16">=<expr><name pos:line="193" pos:column="17">buf<pos:position pos:line="193" pos:column="20"/></name></expr></init></decl>,<modifier pos:line="193" pos:column="21">*<pos:position pos:line="193" pos:column="22"/></modifier><decl><type ref="prev"/><name pos:line="193" pos:column="22">ip_addr<pos:position pos:line="193" pos:column="29"/></name></decl>;<pos:position pos:line="193" pos:column="30"/></decl_stmt>

      <comment type="block" pos:line="195" pos:column="7">/*
       * New 227-parser June 3rd 1999.
       * It now scans for a sequence of six comma-separated numbers and
       * will take them as IP+port indicators.
       *
       * Found reply-strings include:
       * "227 Entering Passive Mode (127,0,0,1,4,51)"
       * "227 Data transfer will passively listen to 127,0,0,1,4,51"
       * "227 Entering passive mode. 127,0,0,1,4,51"
       */</comment>
      
      <while pos:line="206" pos:column="7">while<condition pos:line="206" pos:column="12">(<expr><operator pos:line="206" pos:column="13">*<pos:position pos:line="206" pos:column="14"/></operator><name pos:line="206" pos:column="14">str<pos:position pos:line="206" pos:column="17"/></name></expr>)<pos:position pos:line="206" pos:column="18"/></condition> <block pos:line="206" pos:column="19">{
	 <if pos:line="207" pos:column="10">if <condition pos:line="207" pos:column="13">(<expr><literal type="number" pos:line="207" pos:column="14">6<pos:position pos:line="207" pos:column="15"/></literal> <operator pos:line="207" pos:column="16">==<pos:position pos:line="207" pos:column="18"/></operator> <call><name pos:line="207" pos:column="19">sscanf<pos:position pos:line="207" pos:column="25"/></name><argument_list pos:line="207" pos:column="25">(<argument><expr><name pos:line="207" pos:column="26">str<pos:position pos:line="207" pos:column="29"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="207" pos:column="31">"%d,%d,%d,%d,%d,%d"<pos:position pos:line="207" pos:column="50"/></literal></expr></argument>,
			 <argument><expr><operator pos:line="208" pos:column="26">&amp;<pos:position pos:line="208" pos:column="31"/></operator><name><name pos:line="208" pos:column="27">ip<pos:position pos:line="208" pos:column="29"/></name><index pos:line="208" pos:column="29">[<expr><literal type="number" pos:line="208" pos:column="30">0<pos:position pos:line="208" pos:column="31"/></literal></expr>]<pos:position pos:line="208" pos:column="32"/></index></name></expr></argument>, <argument><expr><operator pos:line="208" pos:column="34">&amp;<pos:position pos:line="208" pos:column="39"/></operator><name><name pos:line="208" pos:column="35">ip<pos:position pos:line="208" pos:column="37"/></name><index pos:line="208" pos:column="37">[<expr><literal type="number" pos:line="208" pos:column="38">1<pos:position pos:line="208" pos:column="39"/></literal></expr>]<pos:position pos:line="208" pos:column="40"/></index></name></expr></argument>, <argument><expr><operator pos:line="208" pos:column="42">&amp;<pos:position pos:line="208" pos:column="47"/></operator><name><name pos:line="208" pos:column="43">ip<pos:position pos:line="208" pos:column="45"/></name><index pos:line="208" pos:column="45">[<expr><literal type="number" pos:line="208" pos:column="46">2<pos:position pos:line="208" pos:column="47"/></literal></expr>]<pos:position pos:line="208" pos:column="48"/></index></name></expr></argument>, <argument><expr><operator pos:line="208" pos:column="50">&amp;<pos:position pos:line="208" pos:column="55"/></operator><name><name pos:line="208" pos:column="51">ip<pos:position pos:line="208" pos:column="53"/></name><index pos:line="208" pos:column="53">[<expr><literal type="number" pos:line="208" pos:column="54">3<pos:position pos:line="208" pos:column="55"/></literal></expr>]<pos:position pos:line="208" pos:column="56"/></index></name></expr></argument>,
			 <argument><expr><operator pos:line="209" pos:column="26">&amp;<pos:position pos:line="209" pos:column="31"/></operator><name><name pos:line="209" pos:column="27">port<pos:position pos:line="209" pos:column="31"/></name><index pos:line="209" pos:column="31">[<expr><literal type="number" pos:line="209" pos:column="32">0<pos:position pos:line="209" pos:column="33"/></literal></expr>]<pos:position pos:line="209" pos:column="34"/></index></name></expr></argument>, <argument><expr><operator pos:line="209" pos:column="36">&amp;<pos:position pos:line="209" pos:column="41"/></operator><name><name pos:line="209" pos:column="37">port<pos:position pos:line="209" pos:column="41"/></name><index pos:line="209" pos:column="41">[<expr><literal type="number" pos:line="209" pos:column="42">1<pos:position pos:line="209" pos:column="43"/></literal></expr>]<pos:position pos:line="209" pos:column="44"/></index></name></expr></argument>)<pos:position pos:line="209" pos:column="45"/></argument_list></call></expr>)<pos:position pos:line="209" pos:column="46"/></condition><then pos:line="209" pos:column="46">
	    <block type="pseudo"><break pos:line="210" pos:column="13">break;<pos:position pos:line="210" pos:column="19"/></break></block></then></if>
	 <expr_stmt><expr><name pos:line="211" pos:column="10">str<pos:position pos:line="211" pos:column="13"/></name><operator pos:line="211" pos:column="13">++<pos:position pos:line="211" pos:column="15"/></operator></expr>;<pos:position pos:line="211" pos:column="16"/></expr_stmt>
      }<pos:position pos:line="212" pos:column="8"/></block></while>
      <if pos:line="213" pos:column="7">if<condition pos:line="213" pos:column="9">(<expr><operator pos:line="213" pos:column="10">!<pos:position pos:line="213" pos:column="11"/></operator><operator pos:line="213" pos:column="11">*<pos:position pos:line="213" pos:column="12"/></operator><name pos:line="213" pos:column="12">str<pos:position pos:line="213" pos:column="15"/></name></expr>)<pos:position pos:line="213" pos:column="16"/></condition><then pos:line="213" pos:column="16"> <block pos:line="213" pos:column="17">{
	 <expr_stmt><expr><call><name pos:line="214" pos:column="10">failf<pos:position pos:line="214" pos:column="15"/></name><argument_list pos:line="214" pos:column="15">(<argument><expr><name pos:line="214" pos:column="16">data<pos:position pos:line="214" pos:column="20"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="214" pos:column="22">"Couldn't interpret this 227-reply: %s"<pos:position pos:line="214" pos:column="61"/></literal></expr></argument>, <argument><expr><name pos:line="214" pos:column="63">buf<pos:position pos:line="214" pos:column="66"/></name></expr></argument>)<pos:position pos:line="214" pos:column="67"/></argument_list></call></expr>;<pos:position pos:line="214" pos:column="68"/></expr_stmt>
	 <return pos:line="215" pos:column="10">return <expr><name pos:line="215" pos:column="17">CURLE_FTP_WEIRD_227_FORMAT<pos:position pos:line="215" pos:column="43"/></name></expr>;<pos:position pos:line="215" pos:column="44"/></return>
      }<pos:position pos:line="216" pos:column="8"/></block></then></if>
      <expr_stmt><expr><call><name pos:line="217" pos:column="7">sprintf<pos:position pos:line="217" pos:column="14"/></name><argument_list pos:line="217" pos:column="14">(<argument><expr><name pos:line="217" pos:column="15">newhost<pos:position pos:line="217" pos:column="22"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="217" pos:column="24">"%d.%d.%d.%d"<pos:position pos:line="217" pos:column="37"/></literal></expr></argument>, <argument><expr><name><name pos:line="217" pos:column="39">ip<pos:position pos:line="217" pos:column="41"/></name><index pos:line="217" pos:column="41">[<expr><literal type="number" pos:line="217" pos:column="42">0<pos:position pos:line="217" pos:column="43"/></literal></expr>]<pos:position pos:line="217" pos:column="44"/></index></name></expr></argument>, <argument><expr><name><name pos:line="217" pos:column="46">ip<pos:position pos:line="217" pos:column="48"/></name><index pos:line="217" pos:column="48">[<expr><literal type="number" pos:line="217" pos:column="49">1<pos:position pos:line="217" pos:column="50"/></literal></expr>]<pos:position pos:line="217" pos:column="51"/></index></name></expr></argument>, <argument><expr><name><name pos:line="217" pos:column="53">ip<pos:position pos:line="217" pos:column="55"/></name><index pos:line="217" pos:column="55">[<expr><literal type="number" pos:line="217" pos:column="56">2<pos:position pos:line="217" pos:column="57"/></literal></expr>]<pos:position pos:line="217" pos:column="58"/></index></name></expr></argument>, <argument><expr><name><name pos:line="217" pos:column="60">ip<pos:position pos:line="217" pos:column="62"/></name><index pos:line="217" pos:column="62">[<expr><literal type="number" pos:line="217" pos:column="63">3<pos:position pos:line="217" pos:column="64"/></literal></expr>]<pos:position pos:line="217" pos:column="65"/></index></name></expr></argument>)<pos:position pos:line="217" pos:column="66"/></argument_list></call></expr>;<pos:position pos:line="217" pos:column="67"/></expr_stmt>
      <expr_stmt><expr><name pos:line="218" pos:column="7">he<pos:position pos:line="218" pos:column="9"/></name> <operator pos:line="218" pos:column="10">=<pos:position pos:line="218" pos:column="11"/></operator> <call><name pos:line="218" pos:column="12">GetHost<pos:position pos:line="218" pos:column="19"/></name><argument_list pos:line="218" pos:column="19">(<argument><expr><name pos:line="218" pos:column="20">data<pos:position pos:line="218" pos:column="24"/></name></expr></argument>, <argument><expr><name pos:line="218" pos:column="26">newhost<pos:position pos:line="218" pos:column="33"/></name></expr></argument>, <argument><expr><name pos:line="218" pos:column="35">hostent_buf<pos:position pos:line="218" pos:column="46"/></name></expr></argument>, <argument><expr><sizeof pos:line="218" pos:column="48">sizeof<argument_list pos:line="218" pos:column="54">(<argument><expr><name pos:line="218" pos:column="55">hostent_buf<pos:position pos:line="218" pos:column="66"/></name></expr></argument>)<pos:position pos:line="218" pos:column="67"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="218" pos:column="68"/></argument_list></call></expr>;<pos:position pos:line="218" pos:column="69"/></expr_stmt>
      <if pos:line="219" pos:column="7">if<condition pos:line="219" pos:column="9">(<expr><operator pos:line="219" pos:column="10">!<pos:position pos:line="219" pos:column="11"/></operator><name pos:line="219" pos:column="11">he<pos:position pos:line="219" pos:column="13"/></name></expr>)<pos:position pos:line="219" pos:column="14"/></condition><then pos:line="219" pos:column="14"> <block pos:line="219" pos:column="15">{
        <expr_stmt><expr><call><name pos:line="220" pos:column="9">failf<pos:position pos:line="220" pos:column="14"/></name><argument_list pos:line="220" pos:column="14">(<argument><expr><name pos:line="220" pos:column="15">data<pos:position pos:line="220" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="220" pos:column="21">"Can't resolve new host %s"<pos:position pos:line="220" pos:column="48"/></literal></expr></argument>, <argument><expr><name pos:line="220" pos:column="50">newhost<pos:position pos:line="220" pos:column="57"/></name></expr></argument>)<pos:position pos:line="220" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="220" pos:column="59"/></expr_stmt>
        <return pos:line="221" pos:column="9">return <expr><name pos:line="221" pos:column="16">CURLE_FTP_CANT_GET_HOST<pos:position pos:line="221" pos:column="39"/></name></expr>;<pos:position pos:line="221" pos:column="40"/></return>
      }<pos:position pos:line="222" pos:column="8"/></block></then></if>

	
      <expr_stmt><expr><name pos:line="225" pos:column="7">newport<pos:position pos:line="225" pos:column="14"/></name> <operator pos:line="225" pos:column="15">=<pos:position pos:line="225" pos:column="16"/></operator> <operator pos:line="225" pos:column="17">(<pos:position pos:line="225" pos:column="18"/></operator><name><name pos:line="225" pos:column="18">port<pos:position pos:line="225" pos:column="22"/></name><index pos:line="225" pos:column="22">[<expr><literal type="number" pos:line="225" pos:column="23">0<pos:position pos:line="225" pos:column="24"/></literal></expr>]<pos:position pos:line="225" pos:column="25"/></index></name><operator pos:line="225" pos:column="25">&lt;&lt;<pos:position pos:line="225" pos:column="33"/></operator><literal type="number" pos:line="225" pos:column="27">8<pos:position pos:line="225" pos:column="28"/></literal><operator pos:line="225" pos:column="28">)<pos:position pos:line="225" pos:column="29"/></operator> <operator pos:line="225" pos:column="30">+<pos:position pos:line="225" pos:column="31"/></operator> <name><name pos:line="225" pos:column="32">port<pos:position pos:line="225" pos:column="36"/></name><index pos:line="225" pos:column="36">[<expr><literal type="number" pos:line="225" pos:column="37">1<pos:position pos:line="225" pos:column="38"/></literal></expr>]<pos:position pos:line="225" pos:column="39"/></index></name></expr>;<pos:position pos:line="225" pos:column="40"/></expr_stmt>
      <expr_stmt><expr><name><name pos:line="226" pos:column="7">data<pos:position pos:line="226" pos:column="11"/></name><operator pos:line="226" pos:column="11">-&gt;<pos:position pos:line="226" pos:column="16"/></operator><name pos:line="226" pos:column="13">secondarysocket<pos:position pos:line="226" pos:column="28"/></name></name> <operator pos:line="226" pos:column="29">=<pos:position pos:line="226" pos:column="30"/></operator> <call><name pos:line="226" pos:column="31">socket<pos:position pos:line="226" pos:column="37"/></name><argument_list pos:line="226" pos:column="37">(<argument><expr><name pos:line="226" pos:column="38">AF_INET<pos:position pos:line="226" pos:column="45"/></name></expr></argument>, <argument><expr><name pos:line="226" pos:column="47">SOCK_STREAM<pos:position pos:line="226" pos:column="58"/></name></expr></argument>, <argument><expr><literal type="number" pos:line="226" pos:column="60">0<pos:position pos:line="226" pos:column="61"/></literal></expr></argument>)<pos:position pos:line="226" pos:column="62"/></argument_list></call></expr>;<pos:position pos:line="226" pos:column="63"/></expr_stmt>

      <expr_stmt><expr><call><name pos:line="228" pos:column="7">memset<pos:position pos:line="228" pos:column="13"/></name><argument_list pos:line="228" pos:column="13">(<argument><expr><operator pos:line="228" pos:column="14">(<pos:position pos:line="228" pos:column="15"/></operator><name pos:line="228" pos:column="15">char<pos:position pos:line="228" pos:column="19"/></name> <operator pos:line="228" pos:column="20">*<pos:position pos:line="228" pos:column="21"/></operator><operator pos:line="228" pos:column="21">)<pos:position pos:line="228" pos:column="22"/></operator> <operator pos:line="228" pos:column="23">&amp;<pos:position pos:line="228" pos:column="28"/></operator><name pos:line="228" pos:column="24">serv_addr<pos:position pos:line="228" pos:column="33"/></name></expr></argument>, <argument><expr><literal type="char" pos:line="228" pos:column="35">'\0'<pos:position pos:line="228" pos:column="39"/></literal></expr></argument>, <argument><expr><sizeof pos:line="228" pos:column="41">sizeof<argument_list pos:line="228" pos:column="47">(<argument><expr><name pos:line="228" pos:column="48">serv_addr<pos:position pos:line="228" pos:column="57"/></name></expr></argument>)<pos:position pos:line="228" pos:column="58"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="228" pos:column="59"/></argument_list></call></expr>;<pos:position pos:line="228" pos:column="60"/></expr_stmt>
      <expr_stmt><expr><call><name pos:line="229" pos:column="7">memcpy<pos:position pos:line="229" pos:column="13"/></name><argument_list pos:line="229" pos:column="13">(<argument><expr><operator pos:line="229" pos:column="14">(<pos:position pos:line="229" pos:column="15"/></operator><name pos:line="229" pos:column="15">char<pos:position pos:line="229" pos:column="19"/></name> <operator pos:line="229" pos:column="20">*<pos:position pos:line="229" pos:column="21"/></operator><operator pos:line="229" pos:column="21">)<pos:position pos:line="229" pos:column="22"/></operator><operator pos:line="229" pos:column="22">&amp;<pos:position pos:line="229" pos:column="27"/></operator><operator pos:line="229" pos:column="23">(<pos:position pos:line="229" pos:column="24"/></operator><name><name pos:line="229" pos:column="24">serv_addr<pos:position pos:line="229" pos:column="33"/></name><operator pos:line="229" pos:column="33">.<pos:position pos:line="229" pos:column="34"/></operator><name pos:line="229" pos:column="34">sin_addr<pos:position pos:line="229" pos:column="42"/></name></name><operator pos:line="229" pos:column="42">)<pos:position pos:line="229" pos:column="43"/></operator></expr></argument>, <argument><expr><name><name pos:line="229" pos:column="45">he<pos:position pos:line="229" pos:column="47"/></name><operator pos:line="229" pos:column="47">-&gt;<pos:position pos:line="229" pos:column="52"/></operator><name pos:line="229" pos:column="49">h_addr<pos:position pos:line="229" pos:column="55"/></name></name></expr></argument>, <argument><expr><name><name pos:line="229" pos:column="57">he<pos:position pos:line="229" pos:column="59"/></name><operator pos:line="229" pos:column="59">-&gt;<pos:position pos:line="229" pos:column="64"/></operator><name pos:line="229" pos:column="61">h_length<pos:position pos:line="229" pos:column="69"/></name></name></expr></argument>)<pos:position pos:line="229" pos:column="70"/></argument_list></call></expr>;<pos:position pos:line="229" pos:column="71"/></expr_stmt>
      <expr_stmt><expr><name><name pos:line="230" pos:column="7">serv_addr<pos:position pos:line="230" pos:column="16"/></name><operator pos:line="230" pos:column="16">.<pos:position pos:line="230" pos:column="17"/></operator><name pos:line="230" pos:column="17">sin_family<pos:position pos:line="230" pos:column="27"/></name></name> <operator pos:line="230" pos:column="28">=<pos:position pos:line="230" pos:column="29"/></operator> <name><name pos:line="230" pos:column="30">he<pos:position pos:line="230" pos:column="32"/></name><operator pos:line="230" pos:column="32">-&gt;<pos:position pos:line="230" pos:column="37"/></operator><name pos:line="230" pos:column="34">h_addrtype<pos:position pos:line="230" pos:column="44"/></name></name></expr>;<pos:position pos:line="230" pos:column="45"/></expr_stmt>
      <expr_stmt><expr><name><name pos:line="231" pos:column="7">serv_addr<pos:position pos:line="231" pos:column="16"/></name><operator pos:line="231" pos:column="16">.<pos:position pos:line="231" pos:column="17"/></operator><name pos:line="231" pos:column="17">sin_port<pos:position pos:line="231" pos:column="25"/></name></name> <operator pos:line="231" pos:column="26">=<pos:position pos:line="231" pos:column="27"/></operator> <call><name pos:line="231" pos:column="28">htons<pos:position pos:line="231" pos:column="33"/></name><argument_list pos:line="231" pos:column="33">(<argument><expr><name pos:line="231" pos:column="34">newport<pos:position pos:line="231" pos:column="41"/></name></expr></argument>)<pos:position pos:line="231" pos:column="42"/></argument_list></call></expr>;<pos:position pos:line="231" pos:column="43"/></expr_stmt>

      <if pos:line="233" pos:column="7">if<condition pos:line="233" pos:column="9">(<expr><name><name pos:line="233" pos:column="10">data<pos:position pos:line="233" pos:column="14"/></name><operator pos:line="233" pos:column="14">-&gt;<pos:position pos:line="233" pos:column="19"/></operator><name pos:line="233" pos:column="16">bits<pos:position pos:line="233" pos:column="20"/></name><operator pos:line="233" pos:column="20">.<pos:position pos:line="233" pos:column="21"/></operator><name pos:line="233" pos:column="21">verbose<pos:position pos:line="233" pos:column="28"/></name></name></expr>)<pos:position pos:line="233" pos:column="29"/></condition><then pos:line="233" pos:column="29"> <block pos:line="233" pos:column="30">{
        <decl_stmt><decl><type><name><name pos:line="234" pos:column="9">struct<pos:position pos:line="234" pos:column="15"/></name> <name pos:line="234" pos:column="16">in_addr<pos:position pos:line="234" pos:column="23"/></name></name></type> <name pos:line="234" pos:column="24">in<pos:position pos:line="234" pos:column="26"/></name></decl>;<pos:position pos:line="234" pos:column="27"/></decl_stmt>
        <decl_stmt><decl><type><name><name pos:line="235" pos:column="9">struct<pos:position pos:line="235" pos:column="15"/></name> <name pos:line="235" pos:column="16">hostent<pos:position pos:line="235" pos:column="23"/></name></name> <modifier pos:line="235" pos:column="24">*<pos:position pos:line="235" pos:column="25"/></modifier></type> <name pos:line="235" pos:column="26">answer<pos:position pos:line="235" pos:column="32"/></name></decl>;<pos:position pos:line="235" pos:column="33"/></decl_stmt>

<cpp:if pos:line="237" pos:column="1">#<cpp:directive pos:line="237" pos:column="2">if<pos:position pos:line="237" pos:column="4"/></cpp:directive> <expr><call><name pos:line="237" pos:column="5">defined<pos:position pos:line="237" pos:column="12"/></name><argument_list pos:line="237" pos:column="12">(<argument><expr><name pos:line="237" pos:column="13">HAVE_INET_ADDR<pos:position pos:line="237" pos:column="27"/></name></expr></argument>)<pos:position pos:line="237" pos:column="28"/></argument_list></call></expr></cpp:if>
        <decl_stmt><decl><type><name pos:line="238" pos:column="9">unsigned<pos:position pos:line="238" pos:column="17"/></name> <name pos:line="238" pos:column="18">long<pos:position pos:line="238" pos:column="22"/></name></type> <name pos:line="238" pos:column="23">address<pos:position pos:line="238" pos:column="30"/></name></decl>;<pos:position pos:line="238" pos:column="31"/></decl_stmt>
<cpp:if pos:line="239" pos:column="1"># <cpp:directive pos:line="239" pos:column="3">if<pos:position pos:line="239" pos:column="5"/></cpp:directive> <expr><call><name pos:line="239" pos:column="6">defined<pos:position pos:line="239" pos:column="13"/></name><argument_list pos:line="239" pos:column="13">(<argument><expr><name pos:line="239" pos:column="14">HAVE_GETHOSTBYADDR_R<pos:position pos:line="239" pos:column="34"/></name></expr></argument>)<pos:position pos:line="239" pos:column="35"/></argument_list></call></expr></cpp:if>
        <decl_stmt><decl><type><name pos:line="240" pos:column="9">int<pos:position pos:line="240" pos:column="12"/></name></type> <name pos:line="240" pos:column="13">h_errnop<pos:position pos:line="240" pos:column="21"/></name></decl>;<pos:position pos:line="240" pos:column="22"/></decl_stmt>
<cpp:endif pos:line="241" pos:column="1"># <cpp:directive pos:line="241" pos:column="3">endif<pos:position pos:line="241" pos:column="8"/></cpp:directive></cpp:endif>

        <expr_stmt><expr><name pos:line="243" pos:column="9">address<pos:position pos:line="243" pos:column="16"/></name> <operator pos:line="243" pos:column="17">=<pos:position pos:line="243" pos:column="18"/></operator> <call><name pos:line="243" pos:column="19">inet_addr<pos:position pos:line="243" pos:column="28"/></name><argument_list pos:line="243" pos:column="28">(<argument><expr><name pos:line="243" pos:column="29">newhost<pos:position pos:line="243" pos:column="36"/></name></expr></argument>)<pos:position pos:line="243" pos:column="37"/></argument_list></call></expr>;<pos:position pos:line="243" pos:column="38"/></expr_stmt>
<cpp:ifdef pos:line="244" pos:column="1"># <cpp:directive pos:line="244" pos:column="3">ifdef<pos:position pos:line="244" pos:column="8"/></cpp:directive> <name pos:line="244" pos:column="9">HAVE_GETHOSTBYADDR_R<pos:position pos:line="244" pos:column="29"/></name></cpp:ifdef>

<cpp:ifdef pos:line="246" pos:column="1">#  <cpp:directive pos:line="246" pos:column="4">ifdef<pos:position pos:line="246" pos:column="9"/></cpp:directive> <name pos:line="246" pos:column="10">HAVE_GETHOSTBYADDR_R_5<pos:position pos:line="246" pos:column="32"/></name></cpp:ifdef>
        <comment type="block" pos:line="247" pos:column="9">/* AIX, Digital Unix style:
           extern int gethostbyaddr_r(char *addr, size_t len, int type,
           struct hostent *htent, struct hostent_data *ht_data); */</comment>

        <comment type="block" pos:line="251" pos:column="9">/* Fred Noz helped me try this out, now it at least compiles! */</comment>

        <if pos:line="253" pos:column="9">if<condition pos:line="253" pos:column="11">(<expr><call><name pos:line="253" pos:column="12">gethostbyaddr_r<pos:position pos:line="253" pos:column="27"/></name><argument_list pos:line="253" pos:column="27">(<argument><expr><operator pos:line="253" pos:column="28">(<pos:position pos:line="253" pos:column="29"/></operator><name pos:line="253" pos:column="29">char<pos:position pos:line="253" pos:column="33"/></name> <operator pos:line="253" pos:column="34">*<pos:position pos:line="253" pos:column="35"/></operator><operator pos:line="253" pos:column="35">)<pos:position pos:line="253" pos:column="36"/></operator> <operator pos:line="253" pos:column="37">&amp;<pos:position pos:line="253" pos:column="42"/></operator><name pos:line="253" pos:column="38">address<pos:position pos:line="253" pos:column="45"/></name></expr></argument>,
                           <argument><expr><sizeof pos:line="254" pos:column="28">sizeof<argument_list pos:line="254" pos:column="34">(<argument><expr><name pos:line="254" pos:column="35">address<pos:position pos:line="254" pos:column="42"/></name></expr></argument>)<pos:position pos:line="254" pos:column="43"/></argument_list></sizeof></expr></argument>, <argument><expr><name pos:line="254" pos:column="45">AF_INET<pos:position pos:line="254" pos:column="52"/></name></expr></argument>,
                           <argument><expr><operator pos:line="255" pos:column="28">(<pos:position pos:line="255" pos:column="29"/></operator>struct <name pos:line="255" pos:column="36">hostent<pos:position pos:line="255" pos:column="43"/></name> <operator pos:line="255" pos:column="44">*<pos:position pos:line="255" pos:column="45"/></operator><operator pos:line="255" pos:column="45">)<pos:position pos:line="255" pos:column="46"/></operator><name pos:line="255" pos:column="46">hostent_buf<pos:position pos:line="255" pos:column="57"/></name></expr></argument>,
                           <argument><expr><name pos:line="256" pos:column="28">hostent_buf<pos:position pos:line="256" pos:column="39"/></name> <operator pos:line="256" pos:column="40">+<pos:position pos:line="256" pos:column="41"/></operator> <sizeof pos:line="256" pos:column="42">sizeof<argument_list pos:line="256" pos:column="48">(<argument><expr><operator pos:line="256" pos:column="49">*<pos:position pos:line="256" pos:column="50"/></operator><name pos:line="256" pos:column="50">answer<pos:position pos:line="256" pos:column="56"/></name></expr></argument>)<pos:position pos:line="256" pos:column="57"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="256" pos:column="58"/></argument_list></call></expr>)<pos:position pos:line="256" pos:column="59"/></condition><then pos:line="256" pos:column="59">
           <block type="pseudo"><expr_stmt><expr><name pos:line="257" pos:column="12">answer<pos:position pos:line="257" pos:column="18"/></name><operator pos:line="257" pos:column="18">=<pos:position pos:line="257" pos:column="19"/></operator><name pos:line="257" pos:column="19">NULL<pos:position pos:line="257" pos:column="23"/></name></expr>;<pos:position pos:line="257" pos:column="24"/></expr_stmt></block></then></if>
                           
<cpp:endif pos:line="259" pos:column="1">#  <cpp:directive pos:line="259" pos:column="4">endif<pos:position pos:line="259" pos:column="9"/></cpp:directive></cpp:endif>
<cpp:ifdef pos:line="260" pos:column="1">#  <cpp:directive pos:line="260" pos:column="4">ifdef<pos:position pos:line="260" pos:column="9"/></cpp:directive> <name pos:line="260" pos:column="10">HAVE_GETHOSTBYADDR_R_7<pos:position pos:line="260" pos:column="32"/></name></cpp:ifdef>
        <comment type="block" pos:line="261" pos:column="9">/* Solaris and IRIX */</comment>
        <expr_stmt><expr><name pos:line="262" pos:column="9">answer<pos:position pos:line="262" pos:column="15"/></name> <operator pos:line="262" pos:column="16">=<pos:position pos:line="262" pos:column="17"/></operator> <call><name pos:line="262" pos:column="18">gethostbyaddr_r<pos:position pos:line="262" pos:column="33"/></name><argument_list pos:line="262" pos:column="33">(<argument><expr><operator pos:line="262" pos:column="34">(<pos:position pos:line="262" pos:column="35"/></operator><name pos:line="262" pos:column="35">char<pos:position pos:line="262" pos:column="39"/></name> <operator pos:line="262" pos:column="40">*<pos:position pos:line="262" pos:column="41"/></operator><operator pos:line="262" pos:column="41">)<pos:position pos:line="262" pos:column="42"/></operator> <operator pos:line="262" pos:column="43">&amp;<pos:position pos:line="262" pos:column="48"/></operator><name pos:line="262" pos:column="44">address<pos:position pos:line="262" pos:column="51"/></name></expr></argument>, <argument><expr><sizeof pos:line="262" pos:column="53">sizeof<argument_list pos:line="262" pos:column="59">(<argument><expr><name pos:line="262" pos:column="60">address<pos:position pos:line="262" pos:column="67"/></name></expr></argument>)<pos:position pos:line="262" pos:column="68"/></argument_list></sizeof></expr></argument>, <argument><expr><name pos:line="262" pos:column="70">AF_INET<pos:position pos:line="262" pos:column="77"/></name></expr></argument>,
                                 <argument><expr><operator pos:line="263" pos:column="34">(<pos:position pos:line="263" pos:column="35"/></operator>struct <name pos:line="263" pos:column="42">hostent<pos:position pos:line="263" pos:column="49"/></name> <operator pos:line="263" pos:column="50">*<pos:position pos:line="263" pos:column="51"/></operator><operator pos:line="263" pos:column="51">)<pos:position pos:line="263" pos:column="52"/></operator><name pos:line="263" pos:column="52">hostent_buf<pos:position pos:line="263" pos:column="63"/></name></expr></argument>,
                                 <argument><expr><name pos:line="264" pos:column="34">hostent_buf<pos:position pos:line="264" pos:column="45"/></name> <operator pos:line="264" pos:column="46">+<pos:position pos:line="264" pos:column="47"/></operator> <sizeof pos:line="264" pos:column="48">sizeof<argument_list pos:line="264" pos:column="54">(<argument><expr><operator pos:line="264" pos:column="55">*<pos:position pos:line="264" pos:column="56"/></operator><name pos:line="264" pos:column="56">answer<pos:position pos:line="264" pos:column="62"/></name></expr></argument>)<pos:position pos:line="264" pos:column="63"/></argument_list></sizeof></expr></argument>,
                                 <argument><expr><sizeof pos:line="265" pos:column="34">sizeof<argument_list pos:line="265" pos:column="40">(<argument><expr><name pos:line="265" pos:column="41">hostent_buf<pos:position pos:line="265" pos:column="52"/></name></expr></argument>)<pos:position pos:line="265" pos:column="53"/></argument_list></sizeof> <operator pos:line="265" pos:column="54">-<pos:position pos:line="265" pos:column="55"/></operator> <sizeof pos:line="265" pos:column="56">sizeof<argument_list pos:line="265" pos:column="62">(<argument><expr><operator pos:line="265" pos:column="63">*<pos:position pos:line="265" pos:column="64"/></operator><name pos:line="265" pos:column="64">answer<pos:position pos:line="265" pos:column="70"/></name></expr></argument>)<pos:position pos:line="265" pos:column="71"/></argument_list></sizeof></expr></argument>,
                                 <argument><expr><operator pos:line="266" pos:column="34">&amp;<pos:position pos:line="266" pos:column="39"/></operator><name pos:line="266" pos:column="35">h_errnop<pos:position pos:line="266" pos:column="43"/></name></expr></argument>)<pos:position pos:line="266" pos:column="44"/></argument_list></call></expr>;<pos:position pos:line="266" pos:column="45"/></expr_stmt>
<cpp:endif pos:line="267" pos:column="1">#  <cpp:directive pos:line="267" pos:column="4">endif<pos:position pos:line="267" pos:column="9"/></cpp:directive></cpp:endif>
<cpp:ifdef pos:line="268" pos:column="1">#  <cpp:directive pos:line="268" pos:column="4">ifdef<pos:position pos:line="268" pos:column="9"/></cpp:directive> <name pos:line="268" pos:column="10">HAVE_GETHOSTBYADDR_R_8<pos:position pos:line="268" pos:column="32"/></name></cpp:ifdef>
        <comment type="block" pos:line="269" pos:column="9">/* Linux style */</comment>
        <if pos:line="270" pos:column="9">if<condition pos:line="270" pos:column="11">(<expr><call><name pos:line="270" pos:column="12">gethostbyaddr_r<pos:position pos:line="270" pos:column="27"/></name><argument_list pos:line="270" pos:column="27">(<argument><expr><operator pos:line="270" pos:column="28">(<pos:position pos:line="270" pos:column="29"/></operator><name pos:line="270" pos:column="29">char<pos:position pos:line="270" pos:column="33"/></name> <operator pos:line="270" pos:column="34">*<pos:position pos:line="270" pos:column="35"/></operator><operator pos:line="270" pos:column="35">)<pos:position pos:line="270" pos:column="36"/></operator> <operator pos:line="270" pos:column="37">&amp;<pos:position pos:line="270" pos:column="42"/></operator><name pos:line="270" pos:column="38">address<pos:position pos:line="270" pos:column="45"/></name></expr></argument>, <argument><expr><sizeof pos:line="270" pos:column="47">sizeof<argument_list pos:line="270" pos:column="53">(<argument><expr><name pos:line="270" pos:column="54">address<pos:position pos:line="270" pos:column="61"/></name></expr></argument>)<pos:position pos:line="270" pos:column="62"/></argument_list></sizeof></expr></argument>, <argument><expr><name pos:line="270" pos:column="64">AF_INET<pos:position pos:line="270" pos:column="71"/></name></expr></argument>,
                           <argument><expr><operator pos:line="271" pos:column="28">(<pos:position pos:line="271" pos:column="29"/></operator>struct <name pos:line="271" pos:column="36">hostent<pos:position pos:line="271" pos:column="43"/></name> <operator pos:line="271" pos:column="44">*<pos:position pos:line="271" pos:column="45"/></operator><operator pos:line="271" pos:column="45">)<pos:position pos:line="271" pos:column="46"/></operator><name pos:line="271" pos:column="46">hostent_buf<pos:position pos:line="271" pos:column="57"/></name></expr></argument>,
                           <argument><expr><name pos:line="272" pos:column="28">hostent_buf<pos:position pos:line="272" pos:column="39"/></name> <operator pos:line="272" pos:column="40">+<pos:position pos:line="272" pos:column="41"/></operator> <sizeof pos:line="272" pos:column="42">sizeof<argument_list pos:line="272" pos:column="48">(<argument><expr><operator pos:line="272" pos:column="49">*<pos:position pos:line="272" pos:column="50"/></operator><name pos:line="272" pos:column="50">answer<pos:position pos:line="272" pos:column="56"/></name></expr></argument>)<pos:position pos:line="272" pos:column="57"/></argument_list></sizeof></expr></argument>,
                           <argument><expr><sizeof pos:line="273" pos:column="28">sizeof<argument_list pos:line="273" pos:column="34">(<argument><expr><name pos:line="273" pos:column="35">hostent_buf<pos:position pos:line="273" pos:column="46"/></name></expr></argument>)<pos:position pos:line="273" pos:column="47"/></argument_list></sizeof> <operator pos:line="273" pos:column="48">-<pos:position pos:line="273" pos:column="49"/></operator> <sizeof pos:line="273" pos:column="50">sizeof<argument_list pos:line="273" pos:column="56">(<argument><expr><operator pos:line="273" pos:column="57">*<pos:position pos:line="273" pos:column="58"/></operator><name pos:line="273" pos:column="58">answer<pos:position pos:line="273" pos:column="64"/></name></expr></argument>)<pos:position pos:line="273" pos:column="65"/></argument_list></sizeof></expr></argument>,
                           <argument><expr><operator pos:line="274" pos:column="28">&amp;<pos:position pos:line="274" pos:column="33"/></operator><name pos:line="274" pos:column="29">answer<pos:position pos:line="274" pos:column="35"/></name></expr></argument>,
                           <argument><expr><operator pos:line="275" pos:column="28">&amp;<pos:position pos:line="275" pos:column="33"/></operator><name pos:line="275" pos:column="29">h_errnop<pos:position pos:line="275" pos:column="37"/></name></expr></argument>)<pos:position pos:line="275" pos:column="38"/></argument_list></call></expr>)<pos:position pos:line="275" pos:column="39"/></condition><then pos:line="275" pos:column="39">
           <block type="pseudo"><expr_stmt><expr><name pos:line="276" pos:column="12">answer<pos:position pos:line="276" pos:column="18"/></name><operator pos:line="276" pos:column="18">=<pos:position pos:line="276" pos:column="19"/></operator><name pos:line="276" pos:column="19">NULL<pos:position pos:line="276" pos:column="23"/></name></expr>;<pos:position pos:line="276" pos:column="24"/></expr_stmt></block></then></if> <comment type="block" pos:line="276" pos:column="25">/* error */</comment>
<cpp:endif pos:line="277" pos:column="1">#  <cpp:directive pos:line="277" pos:column="4">endif<pos:position pos:line="277" pos:column="9"/></cpp:directive></cpp:endif>
        
<cpp:else pos:line="279" pos:column="1"># <cpp:directive pos:line="279" pos:column="3">else<pos:position pos:line="279" pos:column="7"/></cpp:directive></cpp:else>
        <expr_stmt><expr><name pos:line="280" pos:column="9">answer<pos:position pos:line="280" pos:column="15"/></name> <operator pos:line="280" pos:column="16">=<pos:position pos:line="280" pos:column="17"/></operator> <call><name pos:line="280" pos:column="18">gethostbyaddr<pos:position pos:line="280" pos:column="31"/></name><argument_list pos:line="280" pos:column="31">(<argument><expr><operator pos:line="280" pos:column="32">(<pos:position pos:line="280" pos:column="33"/></operator><name pos:line="280" pos:column="33">char<pos:position pos:line="280" pos:column="37"/></name> <operator pos:line="280" pos:column="38">*<pos:position pos:line="280" pos:column="39"/></operator><operator pos:line="280" pos:column="39">)<pos:position pos:line="280" pos:column="40"/></operator> <operator pos:line="280" pos:column="41">&amp;<pos:position pos:line="280" pos:column="46"/></operator><name pos:line="280" pos:column="42">address<pos:position pos:line="280" pos:column="49"/></name></expr></argument>, <argument><expr><sizeof pos:line="280" pos:column="51">sizeof<argument_list pos:line="280" pos:column="57">(<argument><expr><name pos:line="280" pos:column="58">address<pos:position pos:line="280" pos:column="65"/></name></expr></argument>)<pos:position pos:line="280" pos:column="66"/></argument_list></sizeof></expr></argument>, <argument><expr><name pos:line="280" pos:column="68">AF_INET<pos:position pos:line="280" pos:column="75"/></name></expr></argument>)<pos:position pos:line="280" pos:column="76"/></argument_list></call></expr>;<pos:position pos:line="280" pos:column="77"/></expr_stmt>
<cpp:endif pos:line="281" pos:column="1"># <cpp:directive pos:line="281" pos:column="3">endif<pos:position pos:line="281" pos:column="8"/></cpp:directive></cpp:endif>
<cpp:else pos:line="282" pos:column="1">#<cpp:directive pos:line="282" pos:column="2">else<pos:position pos:line="282" pos:column="6"/></cpp:directive></cpp:else>
        <expr_stmt><expr><name pos:line="283" pos:column="9">answer<pos:position pos:line="283" pos:column="15"/></name> <operator pos:line="283" pos:column="16">=<pos:position pos:line="283" pos:column="17"/></operator> <name pos:line="283" pos:column="18">NULL<pos:position pos:line="283" pos:column="22"/></name></expr>;<pos:position pos:line="283" pos:column="23"/></expr_stmt>
<cpp:endif pos:line="284" pos:column="1">#<cpp:directive pos:line="284" pos:column="2">endif<pos:position pos:line="284" pos:column="7"/></cpp:directive></cpp:endif>
        <expr_stmt><expr><operator pos:line="285" pos:column="9">(<pos:position pos:line="285" pos:column="10"/></operator><name pos:line="285" pos:column="10">void<pos:position pos:line="285" pos:column="14"/></name><operator pos:line="285" pos:column="14">)<pos:position pos:line="285" pos:column="15"/></operator> <call><name pos:line="285" pos:column="16">memcpy<pos:position pos:line="285" pos:column="22"/></name><argument_list pos:line="285" pos:column="22">(<argument><expr><operator pos:line="285" pos:column="23">&amp;<pos:position pos:line="285" pos:column="28"/></operator><name><name pos:line="285" pos:column="24">in<pos:position pos:line="285" pos:column="26"/></name><operator pos:line="285" pos:column="26">.<pos:position pos:line="285" pos:column="27"/></operator><name pos:line="285" pos:column="27">s_addr<pos:position pos:line="285" pos:column="33"/></name></name></expr></argument>, <argument><expr><operator pos:line="285" pos:column="35">*<pos:position pos:line="285" pos:column="36"/></operator><name><name pos:line="285" pos:column="36">he<pos:position pos:line="285" pos:column="38"/></name><operator pos:line="285" pos:column="38">-&gt;<pos:position pos:line="285" pos:column="43"/></operator><name pos:line="285" pos:column="40">h_addr_list<pos:position pos:line="285" pos:column="51"/></name></name></expr></argument>, <argument><expr><sizeof pos:line="285" pos:column="53">sizeof <argument_list pos:line="285" pos:column="60">(<argument><expr><name><name pos:line="285" pos:column="61">in<pos:position pos:line="285" pos:column="63"/></name><operator pos:line="285" pos:column="63">.<pos:position pos:line="285" pos:column="64"/></operator><name pos:line="285" pos:column="64">s_addr<pos:position pos:line="285" pos:column="70"/></name></name></expr></argument>)<pos:position pos:line="285" pos:column="71"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="285" pos:column="72"/></argument_list></call></expr>;<pos:position pos:line="285" pos:column="73"/></expr_stmt>
        <expr_stmt><expr><call><name pos:line="286" pos:column="9">infof<pos:position pos:line="286" pos:column="14"/></name><argument_list pos:line="286" pos:column="14">(<argument><expr><name pos:line="286" pos:column="15">data<pos:position pos:line="286" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="286" pos:column="21">"Connecting to %s (%s) port %u\n"<pos:position pos:line="286" pos:column="54"/></literal></expr></argument>,
              <argument><expr><ternary><condition><expr><name pos:line="287" pos:column="15">answer<pos:position pos:line="287" pos:column="21"/></name></expr>?<pos:position pos:line="287" pos:column="22"/></condition><then><expr><name><name pos:line="287" pos:column="22">answer<pos:position pos:line="287" pos:column="28"/></name><operator pos:line="287" pos:column="28">-&gt;<pos:position pos:line="287" pos:column="33"/></operator><name pos:line="287" pos:column="30">h_name<pos:position pos:line="287" pos:column="36"/></name></name></expr></then><else pos:line="287" pos:column="36">:<expr><name pos:line="287" pos:column="37">newhost<pos:position pos:line="287" pos:column="44"/></name></expr></else></ternary></expr></argument>,
<cpp:if pos:line="288" pos:column="1">#<cpp:directive pos:line="288" pos:column="2">if<pos:position pos:line="288" pos:column="4"/></cpp:directive> <expr><call><name pos:line="288" pos:column="5">defined<pos:position pos:line="288" pos:column="12"/></name><argument_list pos:line="288" pos:column="12">(<argument><expr><name pos:line="288" pos:column="13">HAVE_INET_NTOA_R<pos:position pos:line="288" pos:column="29"/></name></expr></argument>)<pos:position pos:line="288" pos:column="30"/></argument_list></call></expr></cpp:if>
              <argument><expr><name pos:line="289" pos:column="15">ip_addr<pos:position pos:line="289" pos:column="22"/></name> <operator pos:line="289" pos:column="23">=<pos:position pos:line="289" pos:column="24"/></operator> <call><name pos:line="289" pos:column="25">inet_ntoa_r<pos:position pos:line="289" pos:column="36"/></name><argument_list pos:line="289" pos:column="36">(<argument><expr><name pos:line="289" pos:column="37">in<pos:position pos:line="289" pos:column="39"/></name></expr></argument>, <argument><expr><name pos:line="289" pos:column="41">ntoa_buf<pos:position pos:line="289" pos:column="49"/></name></expr></argument>, <argument><expr><sizeof pos:line="289" pos:column="51">sizeof<argument_list pos:line="289" pos:column="57">(<argument><expr><name pos:line="289" pos:column="58">ntoa_buf<pos:position pos:line="289" pos:column="66"/></name></expr></argument>)<pos:position pos:line="289" pos:column="67"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="289" pos:column="68"/></argument_list></call></expr></argument>,
<cpp:else pos:line="290" pos:column="1">#<cpp:directive pos:line="290" pos:column="2">else<pos:position pos:line="290" pos:column="6"/></cpp:directive></cpp:else>
              <argument><expr><name pos:line="291" pos:column="15">ip_addr<pos:position pos:line="291" pos:column="22"/></name> <operator pos:line="291" pos:column="23">=<pos:position pos:line="291" pos:column="24"/></operator> <call><name pos:line="291" pos:column="25">inet_ntoa<pos:position pos:line="291" pos:column="34"/></name><argument_list pos:line="291" pos:column="34">(<argument><expr><name pos:line="291" pos:column="35">in<pos:position pos:line="291" pos:column="37"/></name></expr></argument>)<pos:position pos:line="291" pos:column="38"/></argument_list></call></expr></argument>,
<cpp:endif pos:line="292" pos:column="1">#<cpp:directive pos:line="292" pos:column="2">endif<pos:position pos:line="292" pos:column="7"/></cpp:directive></cpp:endif>
              <argument><expr><name pos:line="293" pos:column="15">newport<pos:position pos:line="293" pos:column="22"/></name></expr></argument>)<pos:position pos:line="293" pos:column="23"/></argument_list></call></expr>;<pos:position pos:line="293" pos:column="24"/></expr_stmt>
      }<pos:position pos:line="294" pos:column="8"/></block></then></if>
	
      <if pos:line="296" pos:column="7">if <condition pos:line="296" pos:column="10">(<expr><call><name pos:line="296" pos:column="11">connect<pos:position pos:line="296" pos:column="18"/></name><argument_list pos:line="296" pos:column="18">(<argument><expr><name><name pos:line="296" pos:column="19">data<pos:position pos:line="296" pos:column="23"/></name><operator pos:line="296" pos:column="23">-&gt;<pos:position pos:line="296" pos:column="28"/></operator><name pos:line="296" pos:column="25">secondarysocket<pos:position pos:line="296" pos:column="40"/></name></name></expr></argument>, <argument><expr><operator pos:line="296" pos:column="42">(<pos:position pos:line="296" pos:column="43"/></operator>struct <name pos:line="296" pos:column="50">sockaddr<pos:position pos:line="296" pos:column="58"/></name> <operator pos:line="296" pos:column="59">*<pos:position pos:line="296" pos:column="60"/></operator><operator pos:line="296" pos:column="60">)<pos:position pos:line="296" pos:column="61"/></operator> <operator pos:line="296" pos:column="62">&amp;<pos:position pos:line="296" pos:column="67"/></operator><name pos:line="296" pos:column="63">serv_addr<pos:position pos:line="296" pos:column="72"/></name></expr></argument>,
                  <argument><expr><sizeof pos:line="297" pos:column="19">sizeof<argument_list pos:line="297" pos:column="25">(<argument><expr><name pos:line="297" pos:column="26">serv_addr<pos:position pos:line="297" pos:column="35"/></name></expr></argument>)<pos:position pos:line="297" pos:column="36"/></argument_list></sizeof></expr></argument>)<pos:position pos:line="297" pos:column="37"/></argument_list></call> <operator pos:line="297" pos:column="38">&lt;<pos:position pos:line="297" pos:column="42"/></operator> <literal type="number" pos:line="297" pos:column="40">0<pos:position pos:line="297" pos:column="41"/></literal></expr>)<pos:position pos:line="297" pos:column="42"/></condition><then pos:line="297" pos:column="42"> <block pos:line="297" pos:column="43">{
        <switch pos:line="298" pos:column="9">switch<condition pos:line="298" pos:column="15">(<expr><name pos:line="298" pos:column="16">errno<pos:position pos:line="298" pos:column="21"/></name></expr>)<pos:position pos:line="298" pos:column="22"/></condition> <block pos:line="298" pos:column="23">{
<cpp:ifdef pos:line="299" pos:column="1">#<cpp:directive pos:line="299" pos:column="2">ifdef<pos:position pos:line="299" pos:column="7"/></cpp:directive> <name pos:line="299" pos:column="8">ECONNREFUSED<pos:position pos:line="299" pos:column="20"/></name></cpp:ifdef>
          <comment type="block" pos:line="300" pos:column="11">/* this should be made nicer */</comment>
        <case pos:line="301" pos:column="9">case <expr><name pos:line="301" pos:column="14">ECONNREFUSED<pos:position pos:line="301" pos:column="26"/></name></expr>:<pos:position pos:line="301" pos:column="27"/></case>
          <expr_stmt><expr><call><name pos:line="302" pos:column="11">failf<pos:position pos:line="302" pos:column="16"/></name><argument_list pos:line="302" pos:column="16">(<argument><expr><name pos:line="302" pos:column="17">data<pos:position pos:line="302" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="302" pos:column="23">"Connection refused by ftp server"<pos:position pos:line="302" pos:column="57"/></literal></expr></argument>)<pos:position pos:line="302" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="302" pos:column="59"/></expr_stmt>
          <break pos:line="303" pos:column="11">break;<pos:position pos:line="303" pos:column="17"/></break>
<cpp:endif pos:line="304" pos:column="1">#<cpp:directive pos:line="304" pos:column="2">endif<pos:position pos:line="304" pos:column="7"/></cpp:directive></cpp:endif>
<cpp:ifdef pos:line="305" pos:column="1">#<cpp:directive pos:line="305" pos:column="2">ifdef<pos:position pos:line="305" pos:column="7"/></cpp:directive> <name pos:line="305" pos:column="8">EINTR<pos:position pos:line="305" pos:column="13"/></name></cpp:ifdef>
        <case pos:line="306" pos:column="9">case <expr><name pos:line="306" pos:column="14">EINTR<pos:position pos:line="306" pos:column="19"/></name></expr>:<pos:position pos:line="306" pos:column="20"/></case>
          <expr_stmt><expr><call><name pos:line="307" pos:column="11">failf<pos:position pos:line="307" pos:column="16"/></name><argument_list pos:line="307" pos:column="16">(<argument><expr><name pos:line="307" pos:column="17">data<pos:position pos:line="307" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="307" pos:column="23">"Connection timeouted to ftp server"<pos:position pos:line="307" pos:column="59"/></literal></expr></argument>)<pos:position pos:line="307" pos:column="60"/></argument_list></call></expr>;<pos:position pos:line="307" pos:column="61"/></expr_stmt>
          <break pos:line="308" pos:column="11">break;<pos:position pos:line="308" pos:column="17"/></break>
<cpp:endif pos:line="309" pos:column="1">#<cpp:directive pos:line="309" pos:column="2">endif<pos:position pos:line="309" pos:column="7"/></cpp:directive></cpp:endif>
        <default pos:line="310" pos:column="9">default:<pos:position pos:line="310" pos:column="17"/></default>
          <expr_stmt><expr><call><name pos:line="311" pos:column="11">failf<pos:position pos:line="311" pos:column="16"/></name><argument_list pos:line="311" pos:column="16">(<argument><expr><name pos:line="311" pos:column="17">data<pos:position pos:line="311" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="311" pos:column="23">"Can't connect to ftp server"<pos:position pos:line="311" pos:column="52"/></literal></expr></argument>)<pos:position pos:line="311" pos:column="53"/></argument_list></call></expr>;<pos:position pos:line="311" pos:column="54"/></expr_stmt>
          <break pos:line="312" pos:column="11">break;<pos:position pos:line="312" pos:column="17"/></break>
        }<pos:position pos:line="313" pos:column="10"/></block></switch>
        <return pos:line="314" pos:column="9">return <expr><name pos:line="314" pos:column="16">CURLE_FTP_CANT_RECONNECT<pos:position pos:line="314" pos:column="40"/></name></expr>;<pos:position pos:line="314" pos:column="41"/></return>
      }<pos:position pos:line="315" pos:column="8"/></block></then></if>
    }<pos:position pos:line="316" pos:column="6"/></block></else></if>

  }<pos:position pos:line="318" pos:column="4"/></block></else></if>
  <comment type="block" pos:line="319" pos:column="3">/* we have the (new) data connection ready */</comment>
  <expr_stmt><expr><call><name pos:line="320" pos:column="3">infof<pos:position pos:line="320" pos:column="8"/></name><argument_list pos:line="320" pos:column="8">(<argument><expr><name pos:line="320" pos:column="9">data<pos:position pos:line="320" pos:column="13"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="320" pos:column="15">"Connected!\n"<pos:position pos:line="320" pos:column="29"/></literal></expr></argument>)<pos:position pos:line="320" pos:column="30"/></argument_list></call></expr>;<pos:position pos:line="320" pos:column="31"/></expr_stmt>

  <comment type="block" pos:line="322" pos:column="3">/* change directory first */</comment>

  <if pos:line="324" pos:column="3">if<condition pos:line="324" pos:column="5">(<expr><name><name pos:line="324" pos:column="6">ftp<pos:position pos:line="324" pos:column="9"/></name><operator pos:line="324" pos:column="9">-&gt;<pos:position pos:line="324" pos:column="14"/></operator><name pos:line="324" pos:column="11">dir<pos:position pos:line="324" pos:column="14"/></name></name> <operator pos:line="324" pos:column="15">&amp;&amp;<pos:position pos:line="324" pos:column="25"/></operator> <name><name pos:line="324" pos:column="18">ftp<pos:position pos:line="324" pos:column="21"/></name><operator pos:line="324" pos:column="21">-&gt;<pos:position pos:line="324" pos:column="26"/></operator><name pos:line="324" pos:column="23">dir<pos:position pos:line="324" pos:column="26"/></name><index pos:line="324" pos:column="26">[<expr><literal type="number" pos:line="324" pos:column="27">0<pos:position pos:line="324" pos:column="28"/></literal></expr>]<pos:position pos:line="324" pos:column="29"/></index></name></expr>)<pos:position pos:line="324" pos:column="30"/></condition><then pos:line="324" pos:column="30"> <block pos:line="324" pos:column="31">{
    <expr_stmt><expr><call><name pos:line="325" pos:column="5">sendf<pos:position pos:line="325" pos:column="10"/></name><argument_list pos:line="325" pos:column="10">(<argument><expr><name><name pos:line="325" pos:column="11">data<pos:position pos:line="325" pos:column="15"/></name><operator pos:line="325" pos:column="15">-&gt;<pos:position pos:line="325" pos:column="20"/></operator><name pos:line="325" pos:column="17">firstsocket<pos:position pos:line="325" pos:column="28"/></name></name></expr></argument>, <argument><expr><name pos:line="325" pos:column="30">data<pos:position pos:line="325" pos:column="34"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="325" pos:column="36">"CWD %s\r\n"<pos:position pos:line="325" pos:column="48"/></literal></expr></argument>, <argument><expr><name><name pos:line="325" pos:column="50">ftp<pos:position pos:line="325" pos:column="53"/></name><operator pos:line="325" pos:column="53">-&gt;<pos:position pos:line="325" pos:column="58"/></operator><name pos:line="325" pos:column="55">dir<pos:position pos:line="325" pos:column="58"/></name></name></expr></argument>)<pos:position pos:line="325" pos:column="59"/></argument_list></call></expr>;<pos:position pos:line="325" pos:column="60"/></expr_stmt>
    <expr_stmt><expr><name pos:line="326" pos:column="5">nread<pos:position pos:line="326" pos:column="10"/></name> <operator pos:line="326" pos:column="11">=<pos:position pos:line="326" pos:column="12"/></operator> <call><name pos:line="326" pos:column="13">GetLastResponse<pos:position pos:line="326" pos:column="28"/></name><argument_list pos:line="326" pos:column="28">(<argument><expr><name><name pos:line="326" pos:column="29">data<pos:position pos:line="326" pos:column="33"/></name><operator pos:line="326" pos:column="33">-&gt;<pos:position pos:line="326" pos:column="38"/></operator><name pos:line="326" pos:column="35">firstsocket<pos:position pos:line="326" pos:column="46"/></name></name></expr></argument>, <argument><expr><name pos:line="326" pos:column="48">buf<pos:position pos:line="326" pos:column="51"/></name></expr></argument>, <argument><expr><name pos:line="326" pos:column="53">conn<pos:position pos:line="326" pos:column="57"/></name></expr></argument>)<pos:position pos:line="326" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="326" pos:column="59"/></expr_stmt>
    <if pos:line="327" pos:column="5">if<condition pos:line="327" pos:column="7">(<expr><name pos:line="327" pos:column="8">nread<pos:position pos:line="327" pos:column="13"/></name> <operator pos:line="327" pos:column="14">&lt;<pos:position pos:line="327" pos:column="18"/></operator> <literal type="number" pos:line="327" pos:column="16">0<pos:position pos:line="327" pos:column="17"/></literal></expr>)<pos:position pos:line="327" pos:column="18"/></condition><then pos:line="327" pos:column="18">
      <block type="pseudo"><return pos:line="328" pos:column="7">return <expr><name pos:line="328" pos:column="14">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="328" pos:column="39"/></name></expr>;<pos:position pos:line="328" pos:column="40"/></return></block></then></if>

    <if pos:line="330" pos:column="5">if<condition pos:line="330" pos:column="7">(<expr><call><name pos:line="330" pos:column="8">strncmp<pos:position pos:line="330" pos:column="15"/></name><argument_list pos:line="330" pos:column="15">(<argument><expr><name pos:line="330" pos:column="16">buf<pos:position pos:line="330" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="330" pos:column="21">"250"<pos:position pos:line="330" pos:column="26"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="330" pos:column="28">3<pos:position pos:line="330" pos:column="29"/></literal></expr></argument>)<pos:position pos:line="330" pos:column="30"/></argument_list></call></expr>)<pos:position pos:line="330" pos:column="31"/></condition><then pos:line="330" pos:column="31"> <block pos:line="330" pos:column="32">{
      <expr_stmt><expr><call><name pos:line="331" pos:column="7">failf<pos:position pos:line="331" pos:column="12"/></name><argument_list pos:line="331" pos:column="12">(<argument><expr><name pos:line="331" pos:column="13">data<pos:position pos:line="331" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="331" pos:column="19">"Couldn't change to directory %s"<pos:position pos:line="331" pos:column="52"/></literal></expr></argument>, <argument><expr><name><name pos:line="331" pos:column="54">ftp<pos:position pos:line="331" pos:column="57"/></name><operator pos:line="331" pos:column="57">-&gt;<pos:position pos:line="331" pos:column="62"/></operator><name pos:line="331" pos:column="59">dir<pos:position pos:line="331" pos:column="62"/></name></name></expr></argument>)<pos:position pos:line="331" pos:column="63"/></argument_list></call></expr>;<pos:position pos:line="331" pos:column="64"/></expr_stmt>
      <return pos:line="332" pos:column="7">return <expr><name pos:line="332" pos:column="14">CURLE_FTP_ACCESS_DENIED<pos:position pos:line="332" pos:column="37"/></name></expr>;<pos:position pos:line="332" pos:column="38"/></return>
    }<pos:position pos:line="333" pos:column="6"/></block></then></if>
  }<pos:position pos:line="334" pos:column="4"/></block></then></if>

  <if pos:line="336" pos:column="3">if<condition pos:line="336" pos:column="5">(<expr><name><name pos:line="336" pos:column="6">data<pos:position pos:line="336" pos:column="10"/></name><operator pos:line="336" pos:column="10">-&gt;<pos:position pos:line="336" pos:column="15"/></operator><name pos:line="336" pos:column="12">bits<pos:position pos:line="336" pos:column="16"/></name><operator pos:line="336" pos:column="16">.<pos:position pos:line="336" pos:column="17"/></operator><name pos:line="336" pos:column="17">upload<pos:position pos:line="336" pos:column="23"/></name></name></expr>)<pos:position pos:line="336" pos:column="24"/></condition><then pos:line="336" pos:column="24"> <block pos:line="336" pos:column="25">{

    <comment type="block" pos:line="338" pos:column="5">/* Set type to binary (unless specified ASCII) */</comment>
    <expr_stmt><expr><call><name pos:line="339" pos:column="5">sendf<pos:position pos:line="339" pos:column="10"/></name><argument_list pos:line="339" pos:column="10">(<argument><expr><name><name pos:line="339" pos:column="11">data<pos:position pos:line="339" pos:column="15"/></name><operator pos:line="339" pos:column="15">-&gt;<pos:position pos:line="339" pos:column="20"/></operator><name pos:line="339" pos:column="17">firstsocket<pos:position pos:line="339" pos:column="28"/></name></name></expr></argument>, <argument><expr><name pos:line="339" pos:column="30">data<pos:position pos:line="339" pos:column="34"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="339" pos:column="36">"TYPE %s\r\n"<pos:position pos:line="339" pos:column="49"/></literal></expr></argument>,
          <argument><expr><ternary><condition><expr><operator pos:line="340" pos:column="11">(<pos:position pos:line="340" pos:column="12"/></operator><name><name pos:line="340" pos:column="12">data<pos:position pos:line="340" pos:column="16"/></name><operator pos:line="340" pos:column="16">-&gt;<pos:position pos:line="340" pos:column="21"/></operator><name pos:line="340" pos:column="18">bits<pos:position pos:line="340" pos:column="22"/></name><operator pos:line="340" pos:column="22">.<pos:position pos:line="340" pos:column="23"/></operator><name pos:line="340" pos:column="23">ftp_ascii<pos:position pos:line="340" pos:column="32"/></name></name><operator pos:line="340" pos:column="32">)<pos:position pos:line="340" pos:column="33"/></operator></expr>?<pos:position pos:line="340" pos:column="34"/></condition><then><expr><literal type="string" pos:line="340" pos:column="34">"A"<pos:position pos:line="340" pos:column="37"/></literal></expr></then><else pos:line="340" pos:column="37">:<expr><literal type="string" pos:line="340" pos:column="38">"I"<pos:position pos:line="340" pos:column="41"/></literal></expr></else></ternary></expr></argument>)<pos:position pos:line="340" pos:column="42"/></argument_list></call></expr>;<pos:position pos:line="340" pos:column="43"/></expr_stmt>

    <expr_stmt><expr><name pos:line="342" pos:column="5">nread<pos:position pos:line="342" pos:column="10"/></name> <operator pos:line="342" pos:column="11">=<pos:position pos:line="342" pos:column="12"/></operator> <call><name pos:line="342" pos:column="13">GetLastResponse<pos:position pos:line="342" pos:column="28"/></name><argument_list pos:line="342" pos:column="28">(<argument><expr><name><name pos:line="342" pos:column="29">data<pos:position pos:line="342" pos:column="33"/></name><operator pos:line="342" pos:column="33">-&gt;<pos:position pos:line="342" pos:column="38"/></operator><name pos:line="342" pos:column="35">firstsocket<pos:position pos:line="342" pos:column="46"/></name></name></expr></argument>, <argument><expr><name pos:line="342" pos:column="48">buf<pos:position pos:line="342" pos:column="51"/></name></expr></argument>, <argument><expr><name pos:line="342" pos:column="53">conn<pos:position pos:line="342" pos:column="57"/></name></expr></argument>)<pos:position pos:line="342" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="342" pos:column="59"/></expr_stmt>
    <if pos:line="343" pos:column="5">if<condition pos:line="343" pos:column="7">(<expr><name pos:line="343" pos:column="8">nread<pos:position pos:line="343" pos:column="13"/></name> <operator pos:line="343" pos:column="14">&lt;<pos:position pos:line="343" pos:column="18"/></operator> <literal type="number" pos:line="343" pos:column="16">0<pos:position pos:line="343" pos:column="17"/></literal></expr>)<pos:position pos:line="343" pos:column="18"/></condition><then pos:line="343" pos:column="18">
      <block type="pseudo"><return pos:line="344" pos:column="7">return <expr><name pos:line="344" pos:column="14">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="344" pos:column="39"/></name></expr>;<pos:position pos:line="344" pos:column="40"/></return></block></then></if>

    <if pos:line="346" pos:column="5">if<condition pos:line="346" pos:column="7">(<expr><call><name pos:line="346" pos:column="8">strncmp<pos:position pos:line="346" pos:column="15"/></name><argument_list pos:line="346" pos:column="15">(<argument><expr><name pos:line="346" pos:column="16">buf<pos:position pos:line="346" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="346" pos:column="21">"200"<pos:position pos:line="346" pos:column="26"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="346" pos:column="28">3<pos:position pos:line="346" pos:column="29"/></literal></expr></argument>)<pos:position pos:line="346" pos:column="30"/></argument_list></call></expr>)<pos:position pos:line="346" pos:column="31"/></condition><then pos:line="346" pos:column="31"> <block pos:line="346" pos:column="32">{
      <expr_stmt><expr><call><name pos:line="347" pos:column="7">failf<pos:position pos:line="347" pos:column="12"/></name><argument_list pos:line="347" pos:column="12">(<argument><expr><name pos:line="347" pos:column="13">data<pos:position pos:line="347" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="347" pos:column="19">"Couldn't set %s mode"<pos:position pos:line="347" pos:column="41"/></literal></expr></argument>,
            <argument><expr><ternary><condition><expr><operator pos:line="348" pos:column="13">(<pos:position pos:line="348" pos:column="14"/></operator><name><name pos:line="348" pos:column="14">data<pos:position pos:line="348" pos:column="18"/></name><operator pos:line="348" pos:column="18">-&gt;<pos:position pos:line="348" pos:column="23"/></operator><name pos:line="348" pos:column="20">bits<pos:position pos:line="348" pos:column="24"/></name><operator pos:line="348" pos:column="24">.<pos:position pos:line="348" pos:column="25"/></operator><name pos:line="348" pos:column="25">ftp_ascii<pos:position pos:line="348" pos:column="34"/></name></name><operator pos:line="348" pos:column="34">)<pos:position pos:line="348" pos:column="35"/></operator></expr>?<pos:position pos:line="348" pos:column="36"/></condition><then><expr><literal type="string" pos:line="348" pos:column="36">"ASCII"<pos:position pos:line="348" pos:column="43"/></literal></expr></then><else pos:line="348" pos:column="43">:<expr><literal type="string" pos:line="348" pos:column="44">"binary"<pos:position pos:line="348" pos:column="52"/></literal></expr></else></ternary></expr></argument>)<pos:position pos:line="348" pos:column="53"/></argument_list></call></expr>;<pos:position pos:line="348" pos:column="54"/></expr_stmt>
      <return pos:line="349" pos:column="7">return <expr><ternary><condition><expr><operator pos:line="349" pos:column="14">(<pos:position pos:line="349" pos:column="15"/></operator><name><name pos:line="349" pos:column="15">data<pos:position pos:line="349" pos:column="19"/></name><operator pos:line="349" pos:column="19">-&gt;<pos:position pos:line="349" pos:column="24"/></operator><name pos:line="349" pos:column="21">bits<pos:position pos:line="349" pos:column="25"/></name><operator pos:line="349" pos:column="25">.<pos:position pos:line="349" pos:column="26"/></operator><name pos:line="349" pos:column="26">ftp_ascii<pos:position pos:line="349" pos:column="35"/></name></name><operator pos:line="349" pos:column="35">)<pos:position pos:line="349" pos:column="36"/></operator></expr>?<pos:position pos:line="349" pos:column="37"/></condition><then pos:line="349" pos:column="37"> <expr><name pos:line="349" pos:column="38">CURLE_FTP_COULDNT_SET_ASCII<pos:position pos:line="349" pos:column="65"/></name></expr></then><else pos:line="349" pos:column="65">:
        <expr><name pos:line="350" pos:column="9">CURLE_FTP_COULDNT_SET_BINARY<pos:position pos:line="350" pos:column="37"/></name></expr></else></ternary></expr>;<pos:position pos:line="350" pos:column="38"/></return>
    }<pos:position pos:line="351" pos:column="6"/></block></then></if>

    <if pos:line="353" pos:column="5">if<condition pos:line="353" pos:column="7">(<expr><name><name pos:line="353" pos:column="8">data<pos:position pos:line="353" pos:column="12"/></name><operator pos:line="353" pos:column="12">-&gt;<pos:position pos:line="353" pos:column="17"/></operator><name pos:line="353" pos:column="14">resume_from<pos:position pos:line="353" pos:column="25"/></name></name></expr>)<pos:position pos:line="353" pos:column="26"/></condition><then pos:line="353" pos:column="26"> <block pos:line="353" pos:column="27">{
      <comment type="block" pos:line="354" pos:column="7">/* we're about to continue the uploading of a file */</comment>
      <comment type="block" pos:line="355" pos:column="7">/* 1. get already existing file's size. We use the SIZE
         command for this which may not exist in the server!
         The SIZE command is not in RFC959. */</comment>

      <comment type="block" pos:line="359" pos:column="7">/* 2. This used to set REST. But since we can do append, we
         don't another ftp command. We just skip the source file
         offset and then we APPEND the rest on the file instead */</comment>

      <comment type="block" pos:line="363" pos:column="7">/* 3. pass file-size number of bytes in the source file */</comment>
      <comment type="block" pos:line="364" pos:column="7">/* 4. lower the infilesize counter */</comment>
      <comment type="block" pos:line="365" pos:column="7">/* =&gt; transfer as usual */</comment>

      <if pos:line="367" pos:column="7">if<condition pos:line="367" pos:column="9">(<expr><name><name pos:line="367" pos:column="10">data<pos:position pos:line="367" pos:column="14"/></name><operator pos:line="367" pos:column="14">-&gt;<pos:position pos:line="367" pos:column="19"/></operator><name pos:line="367" pos:column="16">resume_from<pos:position pos:line="367" pos:column="27"/></name></name> <operator pos:line="367" pos:column="28">&lt;<pos:position pos:line="367" pos:column="32"/></operator> <literal type="number" pos:line="367" pos:column="30">0<pos:position pos:line="367" pos:column="31"/></literal></expr> )<pos:position pos:line="367" pos:column="33"/></condition><then pos:line="367" pos:column="33"> <block pos:line="367" pos:column="34">{
        <comment type="block" pos:line="368" pos:column="9">/* we could've got a specified offset from the command line,
           but now we know we didn't */</comment>

        <expr_stmt><expr><call><name pos:line="371" pos:column="9">sendf<pos:position pos:line="371" pos:column="14"/></name><argument_list pos:line="371" pos:column="14">(<argument><expr><name><name pos:line="371" pos:column="15">data<pos:position pos:line="371" pos:column="19"/></name><operator pos:line="371" pos:column="19">-&gt;<pos:position pos:line="371" pos:column="24"/></operator><name pos:line="371" pos:column="21">firstsocket<pos:position pos:line="371" pos:column="32"/></name></name></expr></argument>, <argument><expr><name pos:line="371" pos:column="34">data<pos:position pos:line="371" pos:column="38"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="371" pos:column="40">"SIZE %s\r\n"<pos:position pos:line="371" pos:column="53"/></literal></expr></argument>, <argument><expr><name><name pos:line="371" pos:column="55">ftp<pos:position pos:line="371" pos:column="58"/></name><operator pos:line="371" pos:column="58">-&gt;<pos:position pos:line="371" pos:column="63"/></operator><name pos:line="371" pos:column="60">file<pos:position pos:line="371" pos:column="64"/></name></name></expr></argument>)<pos:position pos:line="371" pos:column="65"/></argument_list></call></expr>;<pos:position pos:line="371" pos:column="66"/></expr_stmt>

        <expr_stmt><expr><name pos:line="373" pos:column="9">nread<pos:position pos:line="373" pos:column="14"/></name> <operator pos:line="373" pos:column="15">=<pos:position pos:line="373" pos:column="16"/></operator> <call><name pos:line="373" pos:column="17">GetLastResponse<pos:position pos:line="373" pos:column="32"/></name><argument_list pos:line="373" pos:column="32">(<argument><expr><name><name pos:line="373" pos:column="33">data<pos:position pos:line="373" pos:column="37"/></name><operator pos:line="373" pos:column="37">-&gt;<pos:position pos:line="373" pos:column="42"/></operator><name pos:line="373" pos:column="39">firstsocket<pos:position pos:line="373" pos:column="50"/></name></name></expr></argument>, <argument><expr><name pos:line="373" pos:column="52">buf<pos:position pos:line="373" pos:column="55"/></name></expr></argument>, <argument><expr><name pos:line="373" pos:column="57">conn<pos:position pos:line="373" pos:column="61"/></name></expr></argument>)<pos:position pos:line="373" pos:column="62"/></argument_list></call></expr>;<pos:position pos:line="373" pos:column="63"/></expr_stmt>
        <if pos:line="374" pos:column="9">if<condition pos:line="374" pos:column="11">(<expr><name pos:line="374" pos:column="12">nread<pos:position pos:line="374" pos:column="17"/></name> <operator pos:line="374" pos:column="18">&lt;<pos:position pos:line="374" pos:column="22"/></operator> <literal type="number" pos:line="374" pos:column="20">0<pos:position pos:line="374" pos:column="21"/></literal></expr>)<pos:position pos:line="374" pos:column="22"/></condition><then pos:line="374" pos:column="22">
          <block type="pseudo"><return pos:line="375" pos:column="11">return <expr><name pos:line="375" pos:column="18">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="375" pos:column="43"/></name></expr>;<pos:position pos:line="375" pos:column="44"/></return></block></then></if>

        <if pos:line="377" pos:column="9">if<condition pos:line="377" pos:column="11">(<expr><call><name pos:line="377" pos:column="12">strncmp<pos:position pos:line="377" pos:column="19"/></name><argument_list pos:line="377" pos:column="19">(<argument><expr><name pos:line="377" pos:column="20">buf<pos:position pos:line="377" pos:column="23"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="377" pos:column="25">"213"<pos:position pos:line="377" pos:column="30"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="377" pos:column="32">3<pos:position pos:line="377" pos:column="33"/></literal></expr></argument>)<pos:position pos:line="377" pos:column="34"/></argument_list></call></expr>)<pos:position pos:line="377" pos:column="35"/></condition><then pos:line="377" pos:column="35"> <block pos:line="377" pos:column="36">{
          <expr_stmt><expr><call><name pos:line="378" pos:column="11">failf<pos:position pos:line="378" pos:column="16"/></name><argument_list pos:line="378" pos:column="16">(<argument><expr><name pos:line="378" pos:column="17">data<pos:position pos:line="378" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="378" pos:column="23">"Couldn't get file size: %s"<pos:position pos:line="378" pos:column="51"/></literal></expr></argument>, <argument><expr><name pos:line="378" pos:column="53">buf<pos:position pos:line="378" pos:column="56"/></name><operator pos:line="378" pos:column="56">+<pos:position pos:line="378" pos:column="57"/></operator><literal type="number" pos:line="378" pos:column="57">4<pos:position pos:line="378" pos:column="58"/></literal></expr></argument>)<pos:position pos:line="378" pos:column="59"/></argument_list></call></expr>;<pos:position pos:line="378" pos:column="60"/></expr_stmt>
          <return pos:line="379" pos:column="11">return <expr><name pos:line="379" pos:column="18">CURLE_FTP_COULDNT_GET_SIZE<pos:position pos:line="379" pos:column="44"/></name></expr>;<pos:position pos:line="379" pos:column="45"/></return>
        }<pos:position pos:line="380" pos:column="10"/></block></then></if>

        <comment type="block" pos:line="382" pos:column="9">/* get the size from the ascii string: */</comment>
        <expr_stmt><expr><name><name pos:line="383" pos:column="9">data<pos:position pos:line="383" pos:column="13"/></name><operator pos:line="383" pos:column="13">-&gt;<pos:position pos:line="383" pos:column="18"/></operator><name pos:line="383" pos:column="15">resume_from<pos:position pos:line="383" pos:column="26"/></name></name> <operator pos:line="383" pos:column="27">=<pos:position pos:line="383" pos:column="28"/></operator> <call><name pos:line="383" pos:column="29">atoi<pos:position pos:line="383" pos:column="33"/></name><argument_list pos:line="383" pos:column="33">(<argument><expr><name pos:line="383" pos:column="34">buf<pos:position pos:line="383" pos:column="37"/></name><operator pos:line="383" pos:column="37">+<pos:position pos:line="383" pos:column="38"/></operator><literal type="number" pos:line="383" pos:column="38">4<pos:position pos:line="383" pos:column="39"/></literal></expr></argument>)<pos:position pos:line="383" pos:column="40"/></argument_list></call></expr>;<pos:position pos:line="383" pos:column="41"/></expr_stmt>
      }<pos:position pos:line="384" pos:column="8"/></block></then></if>

      <if pos:line="386" pos:column="7">if<condition pos:line="386" pos:column="9">(<expr><name><name pos:line="386" pos:column="10">data<pos:position pos:line="386" pos:column="14"/></name><operator pos:line="386" pos:column="14">-&gt;<pos:position pos:line="386" pos:column="19"/></operator><name pos:line="386" pos:column="16">resume_from<pos:position pos:line="386" pos:column="27"/></name></name></expr>)<pos:position pos:line="386" pos:column="28"/></condition><then pos:line="386" pos:column="28"> <block pos:line="386" pos:column="29">{
        <comment type="block" pos:line="387" pos:column="9">/* do we still game? */</comment>
        <decl_stmt><decl><type><name pos:line="388" pos:column="9">int<pos:position pos:line="388" pos:column="12"/></name></type> <name pos:line="388" pos:column="13">passed<pos:position pos:line="388" pos:column="19"/></name><init pos:line="388" pos:column="19">=<expr><literal type="number" pos:line="388" pos:column="20">0<pos:position pos:line="388" pos:column="21"/></literal></expr></init></decl>;<pos:position pos:line="388" pos:column="22"/></decl_stmt>
<cpp:if pos:line="389" pos:column="1">#<cpp:directive pos:line="389" pos:column="2">if<pos:position pos:line="389" pos:column="4"/></cpp:directive> <expr><literal type="number" pos:line="389" pos:column="5">0<pos:position pos:line="389" pos:column="6"/></literal></expr></cpp:if>
        <comment type="block" pos:line="390" pos:column="9">/* Set resume file transfer offset */</comment>
        infof(data, "Instructs server to resume from offset %d\n",
              data-&gt;resume_from);

        sendf(data-&gt;firstsocket, data, "REST %d\r\n", data-&gt;resume_from);

        nread = GetLastResponse(data-&gt;firstsocket, buf, conn);
        if(nread &lt; 0)
          return CURLE_OPERATION_TIMEOUTED;

        if(strncmp(buf, "350", 3)) {
          failf(data, "Couldn't use REST: %s", buf+4);
          return CURLE_FTP_COULDNT_USE_REST;
        }
<cpp:else pos:line="404" pos:column="1">#<cpp:directive pos:line="404" pos:column="2">else<pos:position pos:line="404" pos:column="6"/></cpp:directive></cpp:else>
        <comment type="block" pos:line="405" pos:column="9">/* enable append instead */</comment>
        <expr_stmt><expr><name><name pos:line="406" pos:column="9">data<pos:position pos:line="406" pos:column="13"/></name><operator pos:line="406" pos:column="13">-&gt;<pos:position pos:line="406" pos:column="18"/></operator><name pos:line="406" pos:column="15">bits<pos:position pos:line="406" pos:column="19"/></name><operator pos:line="406" pos:column="19">.<pos:position pos:line="406" pos:column="20"/></operator><name pos:line="406" pos:column="20">ftp_append<pos:position pos:line="406" pos:column="30"/></name></name> <operator pos:line="406" pos:column="31">=<pos:position pos:line="406" pos:column="32"/></operator> <literal type="number" pos:line="406" pos:column="33">1<pos:position pos:line="406" pos:column="34"/></literal></expr>;<pos:position pos:line="406" pos:column="35"/></expr_stmt>
<cpp:endif pos:line="407" pos:column="1">#<cpp:directive pos:line="407" pos:column="2">endif<pos:position pos:line="407" pos:column="7"/></cpp:directive></cpp:endif>
        <comment type="block" pos:line="408" pos:column="9">/* Now, let's read off the proper amount of bytes from the
           input. If we knew it was a proper file we could've just
           fseek()ed but we only have a stream here */</comment>
        <do pos:line="411" pos:column="9">do <block pos:line="411" pos:column="12">{
          <decl_stmt><decl><type><name pos:line="412" pos:column="11">int<pos:position pos:line="412" pos:column="14"/></name></type> <name pos:line="412" pos:column="15">readthisamountnow<pos:position pos:line="412" pos:column="32"/></name> <init pos:line="412" pos:column="33">= <expr><operator pos:line="412" pos:column="35">(<pos:position pos:line="412" pos:column="36"/></operator><name><name pos:line="412" pos:column="36">data<pos:position pos:line="412" pos:column="40"/></name><operator pos:line="412" pos:column="40">-&gt;<pos:position pos:line="412" pos:column="45"/></operator><name pos:line="412" pos:column="42">resume_from<pos:position pos:line="412" pos:column="53"/></name></name> <operator pos:line="412" pos:column="54">-<pos:position pos:line="412" pos:column="55"/></operator> <name pos:line="412" pos:column="56">passed<pos:position pos:line="412" pos:column="62"/></name><operator pos:line="412" pos:column="62">)<pos:position pos:line="412" pos:column="63"/></operator></expr></init></decl>;<pos:position pos:line="412" pos:column="64"/></decl_stmt>
          <decl_stmt><decl><type><name pos:line="413" pos:column="11">int<pos:position pos:line="413" pos:column="14"/></name></type> <name pos:line="413" pos:column="15">actuallyread<pos:position pos:line="413" pos:column="27"/></name></decl>;<pos:position pos:line="413" pos:column="28"/></decl_stmt>

          <if pos:line="415" pos:column="11">if<condition pos:line="415" pos:column="13">(<expr><name pos:line="415" pos:column="14">readthisamountnow<pos:position pos:line="415" pos:column="31"/></name> <operator pos:line="415" pos:column="32">&gt;<pos:position pos:line="415" pos:column="36"/></operator> <name pos:line="415" pos:column="34">BUFSIZE<pos:position pos:line="415" pos:column="41"/></name></expr>)<pos:position pos:line="415" pos:column="42"/></condition><then pos:line="415" pos:column="42">
            <block type="pseudo"><expr_stmt><expr><name pos:line="416" pos:column="13">readthisamountnow<pos:position pos:line="416" pos:column="30"/></name> <operator pos:line="416" pos:column="31">=<pos:position pos:line="416" pos:column="32"/></operator> <name pos:line="416" pos:column="33">BUFSIZE<pos:position pos:line="416" pos:column="40"/></name></expr>;<pos:position pos:line="416" pos:column="41"/></expr_stmt></block></then></if>

          <expr_stmt><expr><name pos:line="418" pos:column="11">actuallyread<pos:position pos:line="418" pos:column="23"/></name> <operator pos:line="418" pos:column="24">=<pos:position pos:line="418" pos:column="25"/></operator>
            <call><name><name pos:line="419" pos:column="13">data<pos:position pos:line="419" pos:column="17"/></name><operator pos:line="419" pos:column="17">-&gt;<pos:position pos:line="419" pos:column="22"/></operator><name pos:line="419" pos:column="19">fread<pos:position pos:line="419" pos:column="24"/></name></name><argument_list pos:line="419" pos:column="24">(<argument><expr><name><name pos:line="419" pos:column="25">data<pos:position pos:line="419" pos:column="29"/></name><operator pos:line="419" pos:column="29">-&gt;<pos:position pos:line="419" pos:column="34"/></operator><name pos:line="419" pos:column="31">buffer<pos:position pos:line="419" pos:column="37"/></name></name></expr></argument>, <argument><expr><literal type="number" pos:line="419" pos:column="39">1<pos:position pos:line="419" pos:column="40"/></literal></expr></argument>, <argument><expr><name pos:line="419" pos:column="42">readthisamountnow<pos:position pos:line="419" pos:column="59"/></name></expr></argument>, <argument><expr><name><name pos:line="419" pos:column="61">data<pos:position pos:line="419" pos:column="65"/></name><operator pos:line="419" pos:column="65">-&gt;<pos:position pos:line="419" pos:column="70"/></operator><name pos:line="419" pos:column="67">in<pos:position pos:line="419" pos:column="69"/></name></name></expr></argument>)<pos:position pos:line="419" pos:column="70"/></argument_list></call></expr>;<pos:position pos:line="419" pos:column="71"/></expr_stmt>

          <expr_stmt><expr><name pos:line="421" pos:column="11">passed<pos:position pos:line="421" pos:column="17"/></name> <operator pos:line="421" pos:column="18">+=<pos:position pos:line="421" pos:column="20"/></operator> <name pos:line="421" pos:column="21">actuallyread<pos:position pos:line="421" pos:column="33"/></name></expr>;<pos:position pos:line="421" pos:column="34"/></expr_stmt>
          <if pos:line="422" pos:column="11">if<condition pos:line="422" pos:column="13">(<expr><name pos:line="422" pos:column="14">actuallyread<pos:position pos:line="422" pos:column="26"/></name> <operator pos:line="422" pos:column="27">!=<pos:position pos:line="422" pos:column="29"/></operator> <name pos:line="422" pos:column="30">readthisamountnow<pos:position pos:line="422" pos:column="47"/></name></expr>)<pos:position pos:line="422" pos:column="48"/></condition><then pos:line="422" pos:column="48"> <block pos:line="422" pos:column="49">{
            <expr_stmt><expr><call><name pos:line="423" pos:column="13">failf<pos:position pos:line="423" pos:column="18"/></name><argument_list pos:line="423" pos:column="18">(<argument><expr><name pos:line="423" pos:column="19">data<pos:position pos:line="423" pos:column="23"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="423" pos:column="25">"Could only read %d bytes from the input\n"<pos:position pos:line="423" pos:column="68"/></literal></expr></argument>,
                  <argument><expr><name pos:line="424" pos:column="19">passed<pos:position pos:line="424" pos:column="25"/></name></expr></argument>)<pos:position pos:line="424" pos:column="26"/></argument_list></call></expr>;<pos:position pos:line="424" pos:column="27"/></expr_stmt>
            <return pos:line="425" pos:column="13">return <expr><name pos:line="425" pos:column="20">CURLE_FTP_COULDNT_USE_REST<pos:position pos:line="425" pos:column="46"/></name></expr>;<pos:position pos:line="425" pos:column="47"/></return>
          }<pos:position pos:line="426" pos:column="12"/></block></then></if>
        }<pos:position pos:line="427" pos:column="10"/></block>
        while<condition pos:line="428" pos:column="14">(<expr><name pos:line="428" pos:column="15">passed<pos:position pos:line="428" pos:column="21"/></name> <operator pos:line="428" pos:column="22">!=<pos:position pos:line="428" pos:column="24"/></operator> <name><name pos:line="428" pos:column="25">data<pos:position pos:line="428" pos:column="29"/></name><operator pos:line="428" pos:column="29">-&gt;<pos:position pos:line="428" pos:column="34"/></operator><name pos:line="428" pos:column="31">resume_from<pos:position pos:line="428" pos:column="42"/></name></name></expr>)<pos:position pos:line="428" pos:column="43"/></condition>;<pos:position pos:line="428" pos:column="44"/></do>

        <comment type="block" pos:line="430" pos:column="9">/* now, decrease the size of the read */</comment>
        <if pos:line="431" pos:column="9">if<condition pos:line="431" pos:column="11">(<expr><name><name pos:line="431" pos:column="12">data<pos:position pos:line="431" pos:column="16"/></name><operator pos:line="431" pos:column="16">-&gt;<pos:position pos:line="431" pos:column="21"/></operator><name pos:line="431" pos:column="18">infilesize<pos:position pos:line="431" pos:column="28"/></name></name><operator pos:line="431" pos:column="28">&gt;<pos:position pos:line="431" pos:column="32"/></operator><literal type="number" pos:line="431" pos:column="29">0<pos:position pos:line="431" pos:column="30"/></literal></expr>)<pos:position pos:line="431" pos:column="31"/></condition><then pos:line="431" pos:column="31"> <block pos:line="431" pos:column="32">{
          <expr_stmt><expr><name><name pos:line="432" pos:column="11">data<pos:position pos:line="432" pos:column="15"/></name><operator pos:line="432" pos:column="15">-&gt;<pos:position pos:line="432" pos:column="20"/></operator><name pos:line="432" pos:column="17">infilesize<pos:position pos:line="432" pos:column="27"/></name></name> <operator pos:line="432" pos:column="28">-=<pos:position pos:line="432" pos:column="30"/></operator> <name><name pos:line="432" pos:column="31">data<pos:position pos:line="432" pos:column="35"/></name><operator pos:line="432" pos:column="35">-&gt;<pos:position pos:line="432" pos:column="40"/></operator><name pos:line="432" pos:column="37">resume_from<pos:position pos:line="432" pos:column="48"/></name></name></expr>;<pos:position pos:line="432" pos:column="49"/></expr_stmt>

          <if pos:line="434" pos:column="11">if<condition pos:line="434" pos:column="13">(<expr><name><name pos:line="434" pos:column="14">data<pos:position pos:line="434" pos:column="18"/></name><operator pos:line="434" pos:column="18">-&gt;<pos:position pos:line="434" pos:column="23"/></operator><name pos:line="434" pos:column="20">infilesize<pos:position pos:line="434" pos:column="30"/></name></name> <operator pos:line="434" pos:column="31">&lt;=<pos:position pos:line="434" pos:column="36"/></operator> <literal type="number" pos:line="434" pos:column="34">0<pos:position pos:line="434" pos:column="35"/></literal></expr>)<pos:position pos:line="434" pos:column="36"/></condition><then pos:line="434" pos:column="36"> <block pos:line="434" pos:column="37">{
            <expr_stmt><expr><call><name pos:line="435" pos:column="13">infof<pos:position pos:line="435" pos:column="18"/></name><argument_list pos:line="435" pos:column="18">(<argument><expr><name pos:line="435" pos:column="19">data<pos:position pos:line="435" pos:column="23"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="435" pos:column="25">"File already completely uploaded\n"<pos:position pos:line="435" pos:column="61"/></literal></expr></argument>)<pos:position pos:line="435" pos:column="62"/></argument_list></call></expr>;<pos:position pos:line="435" pos:column="63"/></expr_stmt>
            <return pos:line="436" pos:column="13">return <expr><name pos:line="436" pos:column="20">CURLE_OK<pos:position pos:line="436" pos:column="28"/></name></expr>;<pos:position pos:line="436" pos:column="29"/></return>
          }<pos:position pos:line="437" pos:column="12"/></block></then></if>
        }<pos:position pos:line="438" pos:column="10"/></block></then></if>
        <comment type="block" pos:line="439" pos:column="9">/* we've passed, proceed as normal */</comment>
      }<pos:position pos:line="440" pos:column="8"/></block></then></if>
    }<pos:position pos:line="441" pos:column="6"/></block></then></if>

    <comment type="block" pos:line="443" pos:column="5">/* Send everything on data-&gt;in to the socket */</comment>
    <if pos:line="444" pos:column="5">if<condition pos:line="444" pos:column="7">(<expr><name><name pos:line="444" pos:column="8">data<pos:position pos:line="444" pos:column="12"/></name><operator pos:line="444" pos:column="12">-&gt;<pos:position pos:line="444" pos:column="17"/></operator><name pos:line="444" pos:column="14">bits<pos:position pos:line="444" pos:column="18"/></name><operator pos:line="444" pos:column="18">.<pos:position pos:line="444" pos:column="19"/></operator><name pos:line="444" pos:column="19">ftp_append<pos:position pos:line="444" pos:column="29"/></name></name></expr>)<pos:position pos:line="444" pos:column="30"/></condition><then pos:line="444" pos:column="30">
      <comment type="block" pos:line="445" pos:column="7">/* we append onto the file instead of rewriting it */</comment>
      <block type="pseudo"><expr_stmt><expr><call><name pos:line="446" pos:column="7">sendf<pos:position pos:line="446" pos:column="12"/></name><argument_list pos:line="446" pos:column="12">(<argument><expr><name><name pos:line="446" pos:column="13">data<pos:position pos:line="446" pos:column="17"/></name><operator pos:line="446" pos:column="17">-&gt;<pos:position pos:line="446" pos:column="22"/></operator><name pos:line="446" pos:column="19">firstsocket<pos:position pos:line="446" pos:column="30"/></name></name></expr></argument>, <argument><expr><name pos:line="446" pos:column="32">data<pos:position pos:line="446" pos:column="36"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="446" pos:column="38">"APPE %s\r\n"<pos:position pos:line="446" pos:column="51"/></literal></expr></argument>, <argument><expr><name><name pos:line="446" pos:column="53">ftp<pos:position pos:line="446" pos:column="56"/></name><operator pos:line="446" pos:column="56">-&gt;<pos:position pos:line="446" pos:column="61"/></operator><name pos:line="446" pos:column="58">file<pos:position pos:line="446" pos:column="62"/></name></name></expr></argument>)<pos:position pos:line="446" pos:column="63"/></argument_list></call></expr>;<pos:position pos:line="446" pos:column="64"/></expr_stmt></block></then>
    <else pos:line="447" pos:column="5">else
      <block type="pseudo"><expr_stmt><expr><call><name pos:line="448" pos:column="7">sendf<pos:position pos:line="448" pos:column="12"/></name><argument_list pos:line="448" pos:column="12">(<argument><expr><name><name pos:line="448" pos:column="13">data<pos:position pos:line="448" pos:column="17"/></name><operator pos:line="448" pos:column="17">-&gt;<pos:position pos:line="448" pos:column="22"/></operator><name pos:line="448" pos:column="19">firstsocket<pos:position pos:line="448" pos:column="30"/></name></name></expr></argument>, <argument><expr><name pos:line="448" pos:column="32">data<pos:position pos:line="448" pos:column="36"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="448" pos:column="38">"STOR %s\r\n"<pos:position pos:line="448" pos:column="51"/></literal></expr></argument>, <argument><expr><name><name pos:line="448" pos:column="53">ftp<pos:position pos:line="448" pos:column="56"/></name><operator pos:line="448" pos:column="56">-&gt;<pos:position pos:line="448" pos:column="61"/></operator><name pos:line="448" pos:column="58">file<pos:position pos:line="448" pos:column="62"/></name></name></expr></argument>)<pos:position pos:line="448" pos:column="63"/></argument_list></call></expr>;<pos:position pos:line="448" pos:column="64"/></expr_stmt></block></else></if>

    <expr_stmt><expr><name pos:line="450" pos:column="5">nread<pos:position pos:line="450" pos:column="10"/></name> <operator pos:line="450" pos:column="11">=<pos:position pos:line="450" pos:column="12"/></operator> <call><name pos:line="450" pos:column="13">GetLastResponse<pos:position pos:line="450" pos:column="28"/></name><argument_list pos:line="450" pos:column="28">(<argument><expr><name><name pos:line="450" pos:column="29">data<pos:position pos:line="450" pos:column="33"/></name><operator pos:line="450" pos:column="33">-&gt;<pos:position pos:line="450" pos:column="38"/></operator><name pos:line="450" pos:column="35">firstsocket<pos:position pos:line="450" pos:column="46"/></name></name></expr></argument>, <argument><expr><name pos:line="450" pos:column="48">buf<pos:position pos:line="450" pos:column="51"/></name></expr></argument>, <argument><expr><name pos:line="450" pos:column="53">conn<pos:position pos:line="450" pos:column="57"/></name></expr></argument>)<pos:position pos:line="450" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="450" pos:column="59"/></expr_stmt>
    <if pos:line="451" pos:column="5">if<condition pos:line="451" pos:column="7">(<expr><name pos:line="451" pos:column="8">nread<pos:position pos:line="451" pos:column="13"/></name> <operator pos:line="451" pos:column="14">&lt;<pos:position pos:line="451" pos:column="18"/></operator> <literal type="number" pos:line="451" pos:column="16">0<pos:position pos:line="451" pos:column="17"/></literal></expr>)<pos:position pos:line="451" pos:column="18"/></condition><then pos:line="451" pos:column="18">
      <block type="pseudo"><return pos:line="452" pos:column="7">return <expr><name pos:line="452" pos:column="14">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="452" pos:column="39"/></name></expr>;<pos:position pos:line="452" pos:column="40"/></return></block></then></if>

    <if pos:line="454" pos:column="5">if<condition pos:line="454" pos:column="7">(<expr><call><name pos:line="454" pos:column="8">atoi<pos:position pos:line="454" pos:column="12"/></name><argument_list pos:line="454" pos:column="12">(<argument><expr><name pos:line="454" pos:column="13">buf<pos:position pos:line="454" pos:column="16"/></name></expr></argument>)<pos:position pos:line="454" pos:column="17"/></argument_list></call><operator pos:line="454" pos:column="17">&gt;=<pos:position pos:line="454" pos:column="22"/></operator><literal type="number" pos:line="454" pos:column="19">400<pos:position pos:line="454" pos:column="22"/></literal></expr>)<pos:position pos:line="454" pos:column="23"/></condition><then pos:line="454" pos:column="23"> <block pos:line="454" pos:column="24">{
      <expr_stmt><expr><call><name pos:line="455" pos:column="7">failf<pos:position pos:line="455" pos:column="12"/></name><argument_list pos:line="455" pos:column="12">(<argument><expr><name pos:line="455" pos:column="13">data<pos:position pos:line="455" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="455" pos:column="19">"Failed FTP upload:%s"<pos:position pos:line="455" pos:column="41"/></literal></expr></argument>, <argument><expr><name pos:line="455" pos:column="43">buf<pos:position pos:line="455" pos:column="46"/></name><operator pos:line="455" pos:column="46">+<pos:position pos:line="455" pos:column="47"/></operator><literal type="number" pos:line="455" pos:column="47">3<pos:position pos:line="455" pos:column="48"/></literal></expr></argument>)<pos:position pos:line="455" pos:column="49"/></argument_list></call></expr>;<pos:position pos:line="455" pos:column="50"/></expr_stmt>
      <comment type="block" pos:line="456" pos:column="7">/* oops, we never close the sockets! */</comment>
      <return pos:line="457" pos:column="7">return <expr><name pos:line="457" pos:column="14">CURLE_FTP_COULDNT_STOR_FILE<pos:position pos:line="457" pos:column="41"/></name></expr>;<pos:position pos:line="457" pos:column="42"/></return>
    }<pos:position pos:line="458" pos:column="6"/></block></then></if>

    <if pos:line="460" pos:column="5">if<condition pos:line="460" pos:column="7">(<expr><name><name pos:line="460" pos:column="8">data<pos:position pos:line="460" pos:column="12"/></name><operator pos:line="460" pos:column="12">-&gt;<pos:position pos:line="460" pos:column="17"/></operator><name pos:line="460" pos:column="14">bits<pos:position pos:line="460" pos:column="18"/></name><operator pos:line="460" pos:column="18">.<pos:position pos:line="460" pos:column="19"/></operator><name pos:line="460" pos:column="19">ftp_use_port<pos:position pos:line="460" pos:column="31"/></name></name></expr>)<pos:position pos:line="460" pos:column="32"/></condition><then pos:line="460" pos:column="32"> <block pos:line="460" pos:column="33">{
      <expr_stmt><expr><name pos:line="461" pos:column="7">result<pos:position pos:line="461" pos:column="13"/></name> <operator pos:line="461" pos:column="14">=<pos:position pos:line="461" pos:column="15"/></operator> <call><name pos:line="461" pos:column="16">AllowServerConnect<pos:position pos:line="461" pos:column="34"/></name><argument_list pos:line="461" pos:column="34">(<argument><expr><name pos:line="461" pos:column="35">data<pos:position pos:line="461" pos:column="39"/></name></expr></argument>, <argument><expr><name pos:line="461" pos:column="41">portsock<pos:position pos:line="461" pos:column="49"/></name></expr></argument>)<pos:position pos:line="461" pos:column="50"/></argument_list></call></expr>;<pos:position pos:line="461" pos:column="51"/></expr_stmt>
      <if pos:line="462" pos:column="7">if<condition pos:line="462" pos:column="9">( <expr><name pos:line="462" pos:column="11">result<pos:position pos:line="462" pos:column="17"/></name></expr> )<pos:position pos:line="462" pos:column="19"/></condition><then pos:line="462" pos:column="19">
        <block type="pseudo"><return pos:line="463" pos:column="9">return <expr><name pos:line="463" pos:column="16">result<pos:position pos:line="463" pos:column="22"/></name></expr>;<pos:position pos:line="463" pos:column="23"/></return></block></then></if>
    }<pos:position pos:line="464" pos:column="6"/></block></then></if>

    <expr_stmt><expr><operator pos:line="466" pos:column="5">*<pos:position pos:line="466" pos:column="6"/></operator><name pos:line="466" pos:column="6">bytecountp<pos:position pos:line="466" pos:column="16"/></name><operator pos:line="466" pos:column="16">=<pos:position pos:line="466" pos:column="17"/></operator><literal type="number" pos:line="466" pos:column="17">0<pos:position pos:line="466" pos:column="18"/></literal></expr>;<pos:position pos:line="466" pos:column="19"/></expr_stmt>

    <comment type="block" pos:line="468" pos:column="5">/* When we know we're uploading a specified file, we can get the file
       size prior to the actual upload. */</comment>

    <expr_stmt><expr><call><name pos:line="471" pos:column="5">pgrsSetUploadSize<pos:position pos:line="471" pos:column="22"/></name><argument_list pos:line="471" pos:column="22">(<argument><expr><name pos:line="471" pos:column="23">data<pos:position pos:line="471" pos:column="27"/></name></expr></argument>, <argument><expr><name><name pos:line="471" pos:column="29">data<pos:position pos:line="471" pos:column="33"/></name><operator pos:line="471" pos:column="33">-&gt;<pos:position pos:line="471" pos:column="38"/></operator><name pos:line="471" pos:column="35">infilesize<pos:position pos:line="471" pos:column="45"/></name></name></expr></argument>)<pos:position pos:line="471" pos:column="46"/></argument_list></call></expr>;<pos:position pos:line="471" pos:column="47"/></expr_stmt>
<cpp:if pos:line="472" pos:column="1">#<cpp:directive pos:line="472" pos:column="2">if<pos:position pos:line="472" pos:column="4"/></cpp:directive> <expr><literal type="number" pos:line="472" pos:column="5">0<pos:position pos:line="472" pos:column="6"/></literal></expr></cpp:if>
    ProgressInit(data, data-&gt;infilesize);
<cpp:endif pos:line="474" pos:column="1">#<cpp:directive pos:line="474" pos:column="2">endif<pos:position pos:line="474" pos:column="7"/></cpp:directive></cpp:endif>
    <expr_stmt><expr><name pos:line="475" pos:column="5">result<pos:position pos:line="475" pos:column="11"/></name> <operator pos:line="475" pos:column="12">=<pos:position pos:line="475" pos:column="13"/></operator> <call><name pos:line="475" pos:column="14">Transfer<pos:position pos:line="475" pos:column="22"/></name><argument_list pos:line="475" pos:column="22">(<argument><expr><name pos:line="475" pos:column="23">conn<pos:position pos:line="475" pos:column="27"/></name></expr></argument>, <argument><expr><operator pos:line="475" pos:column="29">-<pos:position pos:line="475" pos:column="30"/></operator><literal type="number" pos:line="475" pos:column="30">1<pos:position pos:line="475" pos:column="31"/></literal></expr></argument>, <argument><expr><operator pos:line="475" pos:column="33">-<pos:position pos:line="475" pos:column="34"/></operator><literal type="number" pos:line="475" pos:column="34">1<pos:position pos:line="475" pos:column="35"/></literal></expr></argument>, <argument><expr><name pos:line="475" pos:column="37">FALSE<pos:position pos:line="475" pos:column="42"/></name></expr></argument>, <argument><expr><name pos:line="475" pos:column="44">NULL<pos:position pos:line="475" pos:column="48"/></name></expr></argument>, <comment type="block" pos:line="475" pos:column="50">/* no download */</comment>
                      <argument><expr><name><name pos:line="476" pos:column="23">data<pos:position pos:line="476" pos:column="27"/></name><operator pos:line="476" pos:column="27">-&gt;<pos:position pos:line="476" pos:column="32"/></operator><name pos:line="476" pos:column="29">secondarysocket<pos:position pos:line="476" pos:column="44"/></name></name></expr></argument>, <argument><expr><name pos:line="476" pos:column="46">bytecountp<pos:position pos:line="476" pos:column="56"/></name></expr></argument>)<pos:position pos:line="476" pos:column="57"/></argument_list></call></expr>;<pos:position pos:line="476" pos:column="58"/></expr_stmt>
    <if pos:line="477" pos:column="5">if<condition pos:line="477" pos:column="7">(<expr><name pos:line="477" pos:column="8">result<pos:position pos:line="477" pos:column="14"/></name></expr>)<pos:position pos:line="477" pos:column="15"/></condition><then pos:line="477" pos:column="15">
      <block type="pseudo"><return pos:line="478" pos:column="7">return <expr><name pos:line="478" pos:column="14">result<pos:position pos:line="478" pos:column="20"/></name></expr>;<pos:position pos:line="478" pos:column="21"/></return></block></then></if>
      
  }<pos:position pos:line="480" pos:column="4"/></block></then>
  <else pos:line="481" pos:column="3">else <block pos:line="481" pos:column="8">{
    <comment type="block" pos:line="482" pos:column="5">/* Retrieve file or directory */</comment>
    <decl_stmt><decl><type><name pos:line="483" pos:column="5">bool<pos:position pos:line="483" pos:column="9"/></name></type> <name pos:line="483" pos:column="10">dirlist<pos:position pos:line="483" pos:column="17"/></name><init pos:line="483" pos:column="17">=<expr><name pos:line="483" pos:column="18">FALSE<pos:position pos:line="483" pos:column="23"/></name></expr></init></decl>;<pos:position pos:line="483" pos:column="24"/></decl_stmt>
    <decl_stmt><decl><type><name pos:line="484" pos:column="5">long<pos:position pos:line="484" pos:column="9"/></name></type> <name pos:line="484" pos:column="10">downloadsize<pos:position pos:line="484" pos:column="22"/></name><init pos:line="484" pos:column="22">=<expr><operator pos:line="484" pos:column="23">-<pos:position pos:line="484" pos:column="24"/></operator><literal type="number" pos:line="484" pos:column="24">1<pos:position pos:line="484" pos:column="25"/></literal></expr></init></decl>;<pos:position pos:line="484" pos:column="26"/></decl_stmt>

    <if pos:line="486" pos:column="5">if<condition pos:line="486" pos:column="7">(<expr><name><name pos:line="486" pos:column="8">data<pos:position pos:line="486" pos:column="12"/></name><operator pos:line="486" pos:column="12">-&gt;<pos:position pos:line="486" pos:column="17"/></operator><name pos:line="486" pos:column="14">bits<pos:position pos:line="486" pos:column="18"/></name><operator pos:line="486" pos:column="18">.<pos:position pos:line="486" pos:column="19"/></operator><name pos:line="486" pos:column="19">set_range<pos:position pos:line="486" pos:column="28"/></name></name> <operator pos:line="486" pos:column="29">&amp;&amp;<pos:position pos:line="486" pos:column="39"/></operator> <name><name pos:line="486" pos:column="32">data<pos:position pos:line="486" pos:column="36"/></name><operator pos:line="486" pos:column="36">-&gt;<pos:position pos:line="486" pos:column="41"/></operator><name pos:line="486" pos:column="38">range<pos:position pos:line="486" pos:column="43"/></name></name></expr>)<pos:position pos:line="486" pos:column="44"/></condition><then pos:line="486" pos:column="44"> <block pos:line="486" pos:column="45">{
      <decl_stmt><decl><type><name pos:line="487" pos:column="7">long<pos:position pos:line="487" pos:column="11"/></name></type> <name pos:line="487" pos:column="12">from<pos:position pos:line="487" pos:column="16"/></name></decl>, <decl><type ref="prev"/><name pos:line="487" pos:column="18">to<pos:position pos:line="487" pos:column="20"/></name></decl>;<pos:position pos:line="487" pos:column="21"/></decl_stmt>
      <decl_stmt><decl><type><name pos:line="488" pos:column="7">int<pos:position pos:line="488" pos:column="10"/></name></type> <name pos:line="488" pos:column="11">totalsize<pos:position pos:line="488" pos:column="20"/></name><init pos:line="488" pos:column="20">=<expr><operator pos:line="488" pos:column="21">-<pos:position pos:line="488" pos:column="22"/></operator><literal type="number" pos:line="488" pos:column="22">1<pos:position pos:line="488" pos:column="23"/></literal></expr></init></decl>;<pos:position pos:line="488" pos:column="24"/></decl_stmt>
      <decl_stmt><decl><type><name pos:line="489" pos:column="7">char<pos:position pos:line="489" pos:column="11"/></name> <modifier pos:line="489" pos:column="12">*<pos:position pos:line="489" pos:column="13"/></modifier></type><name pos:line="489" pos:column="13">ptr<pos:position pos:line="489" pos:column="16"/></name></decl>;<pos:position pos:line="489" pos:column="17"/></decl_stmt>
      <decl_stmt><decl><type><name pos:line="490" pos:column="7">char<pos:position pos:line="490" pos:column="11"/></name> <modifier pos:line="490" pos:column="12">*<pos:position pos:line="490" pos:column="13"/></modifier></type><name pos:line="490" pos:column="13">ptr2<pos:position pos:line="490" pos:column="17"/></name></decl>;<pos:position pos:line="490" pos:column="18"/></decl_stmt>

      <expr_stmt><expr><name pos:line="492" pos:column="7">from<pos:position pos:line="492" pos:column="11"/></name><operator pos:line="492" pos:column="11">=<pos:position pos:line="492" pos:column="12"/></operator><call><name pos:line="492" pos:column="12">strtol<pos:position pos:line="492" pos:column="18"/></name><argument_list pos:line="492" pos:column="18">(<argument><expr><name><name pos:line="492" pos:column="19">data<pos:position pos:line="492" pos:column="23"/></name><operator pos:line="492" pos:column="23">-&gt;<pos:position pos:line="492" pos:column="28"/></operator><name pos:line="492" pos:column="25">range<pos:position pos:line="492" pos:column="30"/></name></name></expr></argument>, <argument><expr><operator pos:line="492" pos:column="32">&amp;<pos:position pos:line="492" pos:column="37"/></operator><name pos:line="492" pos:column="33">ptr<pos:position pos:line="492" pos:column="36"/></name></expr></argument>, <argument><expr><literal type="number" pos:line="492" pos:column="38">0<pos:position pos:line="492" pos:column="39"/></literal></expr></argument>)<pos:position pos:line="492" pos:column="40"/></argument_list></call></expr>;<pos:position pos:line="492" pos:column="41"/></expr_stmt>
      <while pos:line="493" pos:column="7">while<condition pos:line="493" pos:column="12">(<expr><name pos:line="493" pos:column="13">ptr<pos:position pos:line="493" pos:column="16"/></name> <operator pos:line="493" pos:column="17">&amp;&amp;<pos:position pos:line="493" pos:column="27"/></operator> <operator pos:line="493" pos:column="20">*<pos:position pos:line="493" pos:column="21"/></operator><name pos:line="493" pos:column="21">ptr<pos:position pos:line="493" pos:column="24"/></name> <operator pos:line="493" pos:column="25">&amp;&amp;<pos:position pos:line="493" pos:column="35"/></operator> <operator pos:line="493" pos:column="28">(<pos:position pos:line="493" pos:column="29"/></operator><call><name pos:line="493" pos:column="29">isspace<pos:position pos:line="493" pos:column="36"/></name><argument_list pos:line="493" pos:column="36">(<argument><expr><operator pos:line="493" pos:column="37">(<pos:position pos:line="493" pos:column="38"/></operator><name pos:line="493" pos:column="38">int<pos:position pos:line="493" pos:column="41"/></name><operator pos:line="493" pos:column="41">)<pos:position pos:line="493" pos:column="42"/></operator><operator pos:line="493" pos:column="42">*<pos:position pos:line="493" pos:column="43"/></operator><name pos:line="493" pos:column="43">ptr<pos:position pos:line="493" pos:column="46"/></name></expr></argument>)<pos:position pos:line="493" pos:column="47"/></argument_list></call> <operator pos:line="493" pos:column="48">||<pos:position pos:line="493" pos:column="50"/></operator> <operator pos:line="493" pos:column="51">(<pos:position pos:line="493" pos:column="52"/></operator><operator pos:line="493" pos:column="52">*<pos:position pos:line="493" pos:column="53"/></operator><name pos:line="493" pos:column="53">ptr<pos:position pos:line="493" pos:column="56"/></name><operator pos:line="493" pos:column="56">==<pos:position pos:line="493" pos:column="58"/></operator><literal type="char" pos:line="493" pos:column="58">'-'<pos:position pos:line="493" pos:column="61"/></literal><operator pos:line="493" pos:column="61">)<pos:position pos:line="493" pos:column="62"/></operator><operator pos:line="493" pos:column="62">)<pos:position pos:line="493" pos:column="63"/></operator></expr>)<pos:position pos:line="493" pos:column="64"/></condition>
        <block type="pseudo"><expr_stmt><expr><name pos:line="494" pos:column="9">ptr<pos:position pos:line="494" pos:column="12"/></name><operator pos:line="494" pos:column="12">++<pos:position pos:line="494" pos:column="14"/></operator></expr>;<pos:position pos:line="494" pos:column="15"/></expr_stmt></block></while>
      <expr_stmt><expr><name pos:line="495" pos:column="7">to<pos:position pos:line="495" pos:column="9"/></name><operator pos:line="495" pos:column="9">=<pos:position pos:line="495" pos:column="10"/></operator><call><name pos:line="495" pos:column="10">strtol<pos:position pos:line="495" pos:column="16"/></name><argument_list pos:line="495" pos:column="16">(<argument><expr><name pos:line="495" pos:column="17">ptr<pos:position pos:line="495" pos:column="20"/></name></expr></argument>, <argument><expr><operator pos:line="495" pos:column="22">&amp;<pos:position pos:line="495" pos:column="27"/></operator><name pos:line="495" pos:column="23">ptr2<pos:position pos:line="495" pos:column="27"/></name></expr></argument>, <argument><expr><literal type="number" pos:line="495" pos:column="29">0<pos:position pos:line="495" pos:column="30"/></literal></expr></argument>)<pos:position pos:line="495" pos:column="31"/></argument_list></call></expr>;<pos:position pos:line="495" pos:column="32"/></expr_stmt>
      <if pos:line="496" pos:column="7">if<condition pos:line="496" pos:column="9">(<expr><name pos:line="496" pos:column="10">ptr<pos:position pos:line="496" pos:column="13"/></name> <operator pos:line="496" pos:column="14">==<pos:position pos:line="496" pos:column="16"/></operator> <name pos:line="496" pos:column="17">ptr2<pos:position pos:line="496" pos:column="21"/></name></expr>)<pos:position pos:line="496" pos:column="22"/></condition><then pos:line="496" pos:column="22"> <block pos:line="496" pos:column="23">{
        <comment type="block" pos:line="497" pos:column="9">/* we didn't get any digit */</comment>
        <expr_stmt><expr><name pos:line="498" pos:column="9">to<pos:position pos:line="498" pos:column="11"/></name><operator pos:line="498" pos:column="11">=<pos:position pos:line="498" pos:column="12"/></operator><operator pos:line="498" pos:column="12">-<pos:position pos:line="498" pos:column="13"/></operator><literal type="number" pos:line="498" pos:column="13">1<pos:position pos:line="498" pos:column="14"/></literal></expr>;<pos:position pos:line="498" pos:column="15"/></expr_stmt>
      }<pos:position pos:line="499" pos:column="8"/></block></then></if>
      <if pos:line="500" pos:column="7">if<condition pos:line="500" pos:column="9">(<expr><operator pos:line="500" pos:column="10">(<pos:position pos:line="500" pos:column="11"/></operator><operator pos:line="500" pos:column="11">-<pos:position pos:line="500" pos:column="12"/></operator><literal type="number" pos:line="500" pos:column="12">1<pos:position pos:line="500" pos:column="13"/></literal> <operator pos:line="500" pos:column="14">==<pos:position pos:line="500" pos:column="16"/></operator> <name pos:line="500" pos:column="17">to<pos:position pos:line="500" pos:column="19"/></name><operator pos:line="500" pos:column="19">)<pos:position pos:line="500" pos:column="20"/></operator> <operator pos:line="500" pos:column="21">&amp;&amp;<pos:position pos:line="500" pos:column="31"/></operator> <operator pos:line="500" pos:column="24">(<pos:position pos:line="500" pos:column="25"/></operator><name pos:line="500" pos:column="25">from<pos:position pos:line="500" pos:column="29"/></name><operator pos:line="500" pos:column="29">&gt;=<pos:position pos:line="500" pos:column="34"/></operator><literal type="number" pos:line="500" pos:column="31">0<pos:position pos:line="500" pos:column="32"/></literal><operator pos:line="500" pos:column="32">)<pos:position pos:line="500" pos:column="33"/></operator></expr>)<pos:position pos:line="500" pos:column="34"/></condition><then pos:line="500" pos:column="34"> <block pos:line="500" pos:column="35">{
        <comment type="block" pos:line="501" pos:column="9">/* X - */</comment>
        <expr_stmt><expr><name><name pos:line="502" pos:column="9">data<pos:position pos:line="502" pos:column="13"/></name><operator pos:line="502" pos:column="13">-&gt;<pos:position pos:line="502" pos:column="18"/></operator><name pos:line="502" pos:column="15">resume_from<pos:position pos:line="502" pos:column="26"/></name></name> <operator pos:line="502" pos:column="27">=<pos:position pos:line="502" pos:column="28"/></operator> <name pos:line="502" pos:column="29">from<pos:position pos:line="502" pos:column="33"/></name></expr>;<pos:position pos:line="502" pos:column="34"/></expr_stmt>
        <expr_stmt><expr><call><name pos:line="503" pos:column="9">infof<pos:position pos:line="503" pos:column="14"/></name><argument_list pos:line="503" pos:column="14">(<argument><expr><name pos:line="503" pos:column="15">data<pos:position pos:line="503" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="503" pos:column="21">"FTP RANGE %d to end of file\n"<pos:position pos:line="503" pos:column="52"/></literal></expr></argument>, <argument><expr><name pos:line="503" pos:column="54">from<pos:position pos:line="503" pos:column="58"/></name></expr></argument>)<pos:position pos:line="503" pos:column="59"/></argument_list></call></expr>;<pos:position pos:line="503" pos:column="60"/></expr_stmt>
      }<pos:position pos:line="504" pos:column="8"/></block></then>
      <elseif pos:line="505" pos:column="7">else <if pos:line="505" pos:column="12">if<condition pos:line="505" pos:column="14">(<expr><name pos:line="505" pos:column="15">from<pos:position pos:line="505" pos:column="19"/></name> <operator pos:line="505" pos:column="20">&lt;<pos:position pos:line="505" pos:column="24"/></operator> <literal type="number" pos:line="505" pos:column="22">0<pos:position pos:line="505" pos:column="23"/></literal></expr>)<pos:position pos:line="505" pos:column="24"/></condition><then pos:line="505" pos:column="24"> <block pos:line="505" pos:column="25">{
        <comment type="block" pos:line="506" pos:column="9">/* -Y */</comment>
        <expr_stmt><expr><name pos:line="507" pos:column="9">totalsize<pos:position pos:line="507" pos:column="18"/></name> <operator pos:line="507" pos:column="19">=<pos:position pos:line="507" pos:column="20"/></operator> <operator pos:line="507" pos:column="21">-<pos:position pos:line="507" pos:column="22"/></operator><name pos:line="507" pos:column="22">from<pos:position pos:line="507" pos:column="26"/></name></expr>;<pos:position pos:line="507" pos:column="27"/></expr_stmt>
        <expr_stmt><expr><name><name pos:line="508" pos:column="9">data<pos:position pos:line="508" pos:column="13"/></name><operator pos:line="508" pos:column="13">-&gt;<pos:position pos:line="508" pos:column="18"/></operator><name pos:line="508" pos:column="15">maxdownload<pos:position pos:line="508" pos:column="26"/></name></name> <operator pos:line="508" pos:column="27">=<pos:position pos:line="508" pos:column="28"/></operator> <operator pos:line="508" pos:column="29">-<pos:position pos:line="508" pos:column="30"/></operator><name pos:line="508" pos:column="30">from<pos:position pos:line="508" pos:column="34"/></name></expr>;<pos:position pos:line="508" pos:column="35"/></expr_stmt>
        <expr_stmt><expr><name><name pos:line="509" pos:column="9">data<pos:position pos:line="509" pos:column="13"/></name><operator pos:line="509" pos:column="13">-&gt;<pos:position pos:line="509" pos:column="18"/></operator><name pos:line="509" pos:column="15">resume_from<pos:position pos:line="509" pos:column="26"/></name></name> <operator pos:line="509" pos:column="27">=<pos:position pos:line="509" pos:column="28"/></operator> <name pos:line="509" pos:column="29">from<pos:position pos:line="509" pos:column="33"/></name></expr>;<pos:position pos:line="509" pos:column="34"/></expr_stmt>
        <expr_stmt><expr><call><name pos:line="510" pos:column="9">infof<pos:position pos:line="510" pos:column="14"/></name><argument_list pos:line="510" pos:column="14">(<argument><expr><name pos:line="510" pos:column="15">data<pos:position pos:line="510" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="510" pos:column="21">"FTP RANGE the last %d bytes\n"<pos:position pos:line="510" pos:column="52"/></literal></expr></argument>, <argument><expr><name pos:line="510" pos:column="54">totalsize<pos:position pos:line="510" pos:column="63"/></name></expr></argument>)<pos:position pos:line="510" pos:column="64"/></argument_list></call></expr>;<pos:position pos:line="510" pos:column="65"/></expr_stmt>
      }<pos:position pos:line="511" pos:column="8"/></block></then></if></elseif>
      <else pos:line="512" pos:column="7">else <block pos:line="512" pos:column="12">{
        <comment type="block" pos:line="513" pos:column="9">/* X-Y */</comment>
        <expr_stmt><expr><name pos:line="514" pos:column="9">totalsize<pos:position pos:line="514" pos:column="18"/></name> <operator pos:line="514" pos:column="19">=<pos:position pos:line="514" pos:column="20"/></operator> <name pos:line="514" pos:column="21">to<pos:position pos:line="514" pos:column="23"/></name><operator pos:line="514" pos:column="23">-<pos:position pos:line="514" pos:column="24"/></operator><name pos:line="514" pos:column="24">from<pos:position pos:line="514" pos:column="28"/></name></expr>;<pos:position pos:line="514" pos:column="29"/></expr_stmt>
        <expr_stmt><expr><name><name pos:line="515" pos:column="9">data<pos:position pos:line="515" pos:column="13"/></name><operator pos:line="515" pos:column="13">-&gt;<pos:position pos:line="515" pos:column="18"/></operator><name pos:line="515" pos:column="15">maxdownload<pos:position pos:line="515" pos:column="26"/></name></name> <operator pos:line="515" pos:column="27">=<pos:position pos:line="515" pos:column="28"/></operator> <name pos:line="515" pos:column="29">totalsize<pos:position pos:line="515" pos:column="38"/></name><operator pos:line="515" pos:column="38">+<pos:position pos:line="515" pos:column="39"/></operator><literal type="number" pos:line="515" pos:column="39">1<pos:position pos:line="515" pos:column="40"/></literal></expr>;<pos:position pos:line="515" pos:column="41"/></expr_stmt> <comment type="block" pos:line="515" pos:column="42">/* include the last mentioned byte */</comment>
        <expr_stmt><expr><name><name pos:line="516" pos:column="9">data<pos:position pos:line="516" pos:column="13"/></name><operator pos:line="516" pos:column="13">-&gt;<pos:position pos:line="516" pos:column="18"/></operator><name pos:line="516" pos:column="15">resume_from<pos:position pos:line="516" pos:column="26"/></name></name> <operator pos:line="516" pos:column="27">=<pos:position pos:line="516" pos:column="28"/></operator> <name pos:line="516" pos:column="29">from<pos:position pos:line="516" pos:column="33"/></name></expr>;<pos:position pos:line="516" pos:column="34"/></expr_stmt>
        <expr_stmt><expr><call><name pos:line="517" pos:column="9">infof<pos:position pos:line="517" pos:column="14"/></name><argument_list pos:line="517" pos:column="14">(<argument><expr><name pos:line="517" pos:column="15">data<pos:position pos:line="517" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="517" pos:column="21">"FTP RANGE from %d getting %d bytes\n"<pos:position pos:line="517" pos:column="59"/></literal></expr></argument>, <argument><expr><name pos:line="517" pos:column="61">from<pos:position pos:line="517" pos:column="65"/></name></expr></argument>, <argument><expr><name><name pos:line="517" pos:column="67">data<pos:position pos:line="517" pos:column="71"/></name><operator pos:line="517" pos:column="71">-&gt;<pos:position pos:line="517" pos:column="76"/></operator><name pos:line="517" pos:column="73">maxdownload<pos:position pos:line="517" pos:column="84"/></name></name></expr></argument>)<pos:position pos:line="517" pos:column="85"/></argument_list></call></expr>;<pos:position pos:line="517" pos:column="86"/></expr_stmt>
      }<pos:position pos:line="518" pos:column="8"/></block></else></if>
      <expr_stmt><expr><call><name pos:line="519" pos:column="7">infof<pos:position pos:line="519" pos:column="12"/></name><argument_list pos:line="519" pos:column="12">(<argument><expr><name pos:line="519" pos:column="13">data<pos:position pos:line="519" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="519" pos:column="19">"range-download from %d to %d, totally %d bytes\n"<pos:position pos:line="519" pos:column="69"/></literal></expr></argument>,
            <argument><expr><name pos:line="520" pos:column="13">from<pos:position pos:line="520" pos:column="17"/></name></expr></argument>, <argument><expr><name pos:line="520" pos:column="19">to<pos:position pos:line="520" pos:column="21"/></name></expr></argument>, <argument><expr><name pos:line="520" pos:column="23">totalsize<pos:position pos:line="520" pos:column="32"/></name></expr></argument>)<pos:position pos:line="520" pos:column="33"/></argument_list></call></expr>;<pos:position pos:line="520" pos:column="34"/></expr_stmt>
    }<pos:position pos:line="521" pos:column="6"/></block></then></if>
<cpp:if pos:line="522" pos:column="1">#<cpp:directive pos:line="522" pos:column="2">if<pos:position pos:line="522" pos:column="4"/></cpp:directive> <expr><literal type="number" pos:line="522" pos:column="5">0<pos:position pos:line="522" pos:column="6"/></literal></expr></cpp:if>
    if(!ppath[0])
      <comment type="block" pos:line="524" pos:column="7">/* make sure this becomes a valid name */</comment>
      ppath="./";
<cpp:endif pos:line="526" pos:column="1">#<cpp:directive pos:line="526" pos:column="2">endif<pos:position pos:line="526" pos:column="7"/></cpp:directive></cpp:endif>
    <if pos:line="527" pos:column="5">if<condition pos:line="527" pos:column="7">(<expr><operator pos:line="527" pos:column="8">(<pos:position pos:line="527" pos:column="9"/></operator><name><name pos:line="527" pos:column="9">data<pos:position pos:line="527" pos:column="13"/></name><operator pos:line="527" pos:column="13">-&gt;<pos:position pos:line="527" pos:column="18"/></operator><name pos:line="527" pos:column="15">bits<pos:position pos:line="527" pos:column="19"/></name><operator pos:line="527" pos:column="19">.<pos:position pos:line="527" pos:column="20"/></operator><name pos:line="527" pos:column="20">ftp_list_only<pos:position pos:line="527" pos:column="33"/></name></name><operator pos:line="527" pos:column="33">)<pos:position pos:line="527" pos:column="34"/></operator> <operator pos:line="527" pos:column="35">||<pos:position pos:line="527" pos:column="37"/></operator> <operator pos:line="527" pos:column="38">!<pos:position pos:line="527" pos:column="39"/></operator><name><name pos:line="527" pos:column="39">ftp<pos:position pos:line="527" pos:column="42"/></name><operator pos:line="527" pos:column="42">-&gt;<pos:position pos:line="527" pos:column="47"/></operator><name pos:line="527" pos:column="44">file<pos:position pos:line="527" pos:column="48"/></name></name></expr>)<pos:position pos:line="527" pos:column="49"/></condition><then pos:line="527" pos:column="49"> <block pos:line="527" pos:column="50">{
      <comment type="block" pos:line="528" pos:column="7">/* The specified path ends with a slash, and therefore we think this
         is a directory that is requested, use LIST. But before that we
         need to set ASCII transfer mode. */</comment>
      <expr_stmt><expr><name pos:line="531" pos:column="7">dirlist<pos:position pos:line="531" pos:column="14"/></name> <operator pos:line="531" pos:column="15">=<pos:position pos:line="531" pos:column="16"/></operator> <name pos:line="531" pos:column="17">TRUE<pos:position pos:line="531" pos:column="21"/></name></expr>;<pos:position pos:line="531" pos:column="22"/></expr_stmt>

      <comment type="block" pos:line="533" pos:column="7">/* Set type to ASCII */</comment>
      <expr_stmt><expr><call><name pos:line="534" pos:column="7">sendf<pos:position pos:line="534" pos:column="12"/></name><argument_list pos:line="534" pos:column="12">(<argument><expr><name><name pos:line="534" pos:column="13">data<pos:position pos:line="534" pos:column="17"/></name><operator pos:line="534" pos:column="17">-&gt;<pos:position pos:line="534" pos:column="22"/></operator><name pos:line="534" pos:column="19">firstsocket<pos:position pos:line="534" pos:column="30"/></name></name></expr></argument>, <argument><expr><name pos:line="534" pos:column="32">data<pos:position pos:line="534" pos:column="36"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="534" pos:column="38">"TYPE A\r\n"<pos:position pos:line="534" pos:column="50"/></literal></expr></argument>)<pos:position pos:line="534" pos:column="51"/></argument_list></call></expr>;<pos:position pos:line="534" pos:column="52"/></expr_stmt>
	
      <expr_stmt><expr><name pos:line="536" pos:column="7">nread<pos:position pos:line="536" pos:column="12"/></name> <operator pos:line="536" pos:column="13">=<pos:position pos:line="536" pos:column="14"/></operator> <call><name pos:line="536" pos:column="15">GetLastResponse<pos:position pos:line="536" pos:column="30"/></name><argument_list pos:line="536" pos:column="30">(<argument><expr><name><name pos:line="536" pos:column="31">data<pos:position pos:line="536" pos:column="35"/></name><operator pos:line="536" pos:column="35">-&gt;<pos:position pos:line="536" pos:column="40"/></operator><name pos:line="536" pos:column="37">firstsocket<pos:position pos:line="536" pos:column="48"/></name></name></expr></argument>, <argument><expr><name pos:line="536" pos:column="50">buf<pos:position pos:line="536" pos:column="53"/></name></expr></argument>, <argument><expr><name pos:line="536" pos:column="55">conn<pos:position pos:line="536" pos:column="59"/></name></expr></argument>)<pos:position pos:line="536" pos:column="60"/></argument_list></call></expr>;<pos:position pos:line="536" pos:column="61"/></expr_stmt>
      <if pos:line="537" pos:column="7">if<condition pos:line="537" pos:column="9">(<expr><name pos:line="537" pos:column="10">nread<pos:position pos:line="537" pos:column="15"/></name> <operator pos:line="537" pos:column="16">&lt;<pos:position pos:line="537" pos:column="20"/></operator> <literal type="number" pos:line="537" pos:column="18">0<pos:position pos:line="537" pos:column="19"/></literal></expr>)<pos:position pos:line="537" pos:column="20"/></condition><then pos:line="537" pos:column="20">
        <block type="pseudo"><return pos:line="538" pos:column="9">return <expr><name pos:line="538" pos:column="16">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="538" pos:column="41"/></name></expr>;<pos:position pos:line="538" pos:column="42"/></return></block></then></if>
	
      <if pos:line="540" pos:column="7">if<condition pos:line="540" pos:column="9">(<expr><call><name pos:line="540" pos:column="10">strncmp<pos:position pos:line="540" pos:column="17"/></name><argument_list pos:line="540" pos:column="17">(<argument><expr><name pos:line="540" pos:column="18">buf<pos:position pos:line="540" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="540" pos:column="23">"200"<pos:position pos:line="540" pos:column="28"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="540" pos:column="30">3<pos:position pos:line="540" pos:column="31"/></literal></expr></argument>)<pos:position pos:line="540" pos:column="32"/></argument_list></call></expr>)<pos:position pos:line="540" pos:column="33"/></condition><then pos:line="540" pos:column="33"> <block pos:line="540" pos:column="34">{
        <expr_stmt><expr><call><name pos:line="541" pos:column="9">failf<pos:position pos:line="541" pos:column="14"/></name><argument_list pos:line="541" pos:column="14">(<argument><expr><name pos:line="541" pos:column="15">data<pos:position pos:line="541" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="541" pos:column="21">"Couldn't set ascii mode"<pos:position pos:line="541" pos:column="46"/></literal></expr></argument>)<pos:position pos:line="541" pos:column="47"/></argument_list></call></expr>;<pos:position pos:line="541" pos:column="48"/></expr_stmt>
        <return pos:line="542" pos:column="9">return <expr><name pos:line="542" pos:column="16">CURLE_FTP_COULDNT_SET_ASCII<pos:position pos:line="542" pos:column="43"/></name></expr>;<pos:position pos:line="542" pos:column="44"/></return>
      }<pos:position pos:line="543" pos:column="8"/></block></then></if>

      <comment type="block" pos:line="545" pos:column="7">/* if this output is to be machine-parsed, the NLST command will be
         better used since the LIST command output is not specified or
         standard in any way */</comment>

      <expr_stmt><expr><call><name pos:line="549" pos:column="7">sendf<pos:position pos:line="549" pos:column="12"/></name><argument_list pos:line="549" pos:column="12">(<argument><expr><name><name pos:line="549" pos:column="13">data<pos:position pos:line="549" pos:column="17"/></name><operator pos:line="549" pos:column="17">-&gt;<pos:position pos:line="549" pos:column="22"/></operator><name pos:line="549" pos:column="19">firstsocket<pos:position pos:line="549" pos:column="30"/></name></name></expr></argument>, <argument><expr><name pos:line="549" pos:column="32">data<pos:position pos:line="549" pos:column="36"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="549" pos:column="38">"%s\r\n"<pos:position pos:line="549" pos:column="46"/></literal></expr></argument>,
            <argument><expr><ternary><condition><expr><name><name pos:line="550" pos:column="13">data<pos:position pos:line="550" pos:column="17"/></name><operator pos:line="550" pos:column="17">-&gt;<pos:position pos:line="550" pos:column="22"/></operator><name pos:line="550" pos:column="19">customrequest<pos:position pos:line="550" pos:column="32"/></name></name></expr>?<pos:position pos:line="550" pos:column="33"/></condition><then><expr><name><name pos:line="550" pos:column="33">data<pos:position pos:line="550" pos:column="37"/></name><operator pos:line="550" pos:column="37">-&gt;<pos:position pos:line="550" pos:column="42"/></operator><name pos:line="550" pos:column="39">customrequest<pos:position pos:line="550" pos:column="52"/></name></name></expr></then><else pos:line="550" pos:column="52">:
            <expr><operator pos:line="551" pos:column="13">(<pos:position pos:line="551" pos:column="14"/></operator><ternary><condition><expr><name><name pos:line="551" pos:column="14">data<pos:position pos:line="551" pos:column="18"/></name><operator pos:line="551" pos:column="18">-&gt;<pos:position pos:line="551" pos:column="23"/></operator><name pos:line="551" pos:column="20">bits<pos:position pos:line="551" pos:column="24"/></name><operator pos:line="551" pos:column="24">.<pos:position pos:line="551" pos:column="25"/></operator><name pos:line="551" pos:column="25">ftp_list_only<pos:position pos:line="551" pos:column="38"/></name></name></expr>?<pos:position pos:line="551" pos:column="39"/></condition><then><expr><literal type="string" pos:line="551" pos:column="39">"NLST"<pos:position pos:line="551" pos:column="45"/></literal></expr></then><else pos:line="551" pos:column="45">:<expr><literal type="string" pos:line="551" pos:column="46">"LIST"<pos:position pos:line="551" pos:column="52"/></literal></expr></else></ternary><operator pos:line="551" pos:column="52">)<pos:position pos:line="551" pos:column="53"/></operator></expr></else></ternary></expr></argument>)<pos:position pos:line="551" pos:column="54"/></argument_list></call></expr>;<pos:position pos:line="551" pos:column="55"/></expr_stmt>
    }<pos:position pos:line="552" pos:column="6"/></block></then>
    <else pos:line="553" pos:column="5">else <block pos:line="553" pos:column="10">{
      <comment type="block" pos:line="554" pos:column="7">/* Set type to binary (unless specified ASCII) */</comment>
      <expr_stmt><expr><call><name pos:line="555" pos:column="7">sendf<pos:position pos:line="555" pos:column="12"/></name><argument_list pos:line="555" pos:column="12">(<argument><expr><name><name pos:line="555" pos:column="13">data<pos:position pos:line="555" pos:column="17"/></name><operator pos:line="555" pos:column="17">-&gt;<pos:position pos:line="555" pos:column="22"/></operator><name pos:line="555" pos:column="19">firstsocket<pos:position pos:line="555" pos:column="30"/></name></name></expr></argument>, <argument><expr><name pos:line="555" pos:column="32">data<pos:position pos:line="555" pos:column="36"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="555" pos:column="38">"TYPE %s\r\n"<pos:position pos:line="555" pos:column="51"/></literal></expr></argument>,
            <argument><expr><ternary><condition><expr><operator pos:line="556" pos:column="13">(<pos:position pos:line="556" pos:column="14"/></operator><name><name pos:line="556" pos:column="14">data<pos:position pos:line="556" pos:column="18"/></name><operator pos:line="556" pos:column="18">-&gt;<pos:position pos:line="556" pos:column="23"/></operator><name pos:line="556" pos:column="20">bits<pos:position pos:line="556" pos:column="24"/></name><operator pos:line="556" pos:column="24">.<pos:position pos:line="556" pos:column="25"/></operator><name pos:line="556" pos:column="25">ftp_list_only<pos:position pos:line="556" pos:column="38"/></name></name><operator pos:line="556" pos:column="38">)<pos:position pos:line="556" pos:column="39"/></operator></expr>?<pos:position pos:line="556" pos:column="40"/></condition><then><expr><literal type="string" pos:line="556" pos:column="40">"A"<pos:position pos:line="556" pos:column="43"/></literal></expr></then><else pos:line="556" pos:column="43">:<expr><literal type="string" pos:line="556" pos:column="44">"I"<pos:position pos:line="556" pos:column="47"/></literal></expr></else></ternary></expr></argument>)<pos:position pos:line="556" pos:column="48"/></argument_list></call></expr>;<pos:position pos:line="556" pos:column="49"/></expr_stmt>

      <expr_stmt><expr><name pos:line="558" pos:column="7">nread<pos:position pos:line="558" pos:column="12"/></name> <operator pos:line="558" pos:column="13">=<pos:position pos:line="558" pos:column="14"/></operator> <call><name pos:line="558" pos:column="15">GetLastResponse<pos:position pos:line="558" pos:column="30"/></name><argument_list pos:line="558" pos:column="30">(<argument><expr><name><name pos:line="558" pos:column="31">data<pos:position pos:line="558" pos:column="35"/></name><operator pos:line="558" pos:column="35">-&gt;<pos:position pos:line="558" pos:column="40"/></operator><name pos:line="558" pos:column="37">firstsocket<pos:position pos:line="558" pos:column="48"/></name></name></expr></argument>, <argument><expr><name pos:line="558" pos:column="50">buf<pos:position pos:line="558" pos:column="53"/></name></expr></argument>, <argument><expr><name pos:line="558" pos:column="55">conn<pos:position pos:line="558" pos:column="59"/></name></expr></argument>)<pos:position pos:line="558" pos:column="60"/></argument_list></call></expr>;<pos:position pos:line="558" pos:column="61"/></expr_stmt>
      <if pos:line="559" pos:column="7">if<condition pos:line="559" pos:column="9">(<expr><name pos:line="559" pos:column="10">nread<pos:position pos:line="559" pos:column="15"/></name> <operator pos:line="559" pos:column="16">&lt;<pos:position pos:line="559" pos:column="20"/></operator> <literal type="number" pos:line="559" pos:column="18">0<pos:position pos:line="559" pos:column="19"/></literal></expr>)<pos:position pos:line="559" pos:column="20"/></condition><then pos:line="559" pos:column="20">
        <block type="pseudo"><return pos:line="560" pos:column="9">return <expr><name pos:line="560" pos:column="16">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="560" pos:column="41"/></name></expr>;<pos:position pos:line="560" pos:column="42"/></return></block></then></if>

      <if pos:line="562" pos:column="7">if<condition pos:line="562" pos:column="9">(<expr><call><name pos:line="562" pos:column="10">strncmp<pos:position pos:line="562" pos:column="17"/></name><argument_list pos:line="562" pos:column="17">(<argument><expr><name pos:line="562" pos:column="18">buf<pos:position pos:line="562" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="562" pos:column="23">"200"<pos:position pos:line="562" pos:column="28"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="562" pos:column="30">3<pos:position pos:line="562" pos:column="31"/></literal></expr></argument>)<pos:position pos:line="562" pos:column="32"/></argument_list></call></expr>)<pos:position pos:line="562" pos:column="33"/></condition><then pos:line="562" pos:column="33"> <block pos:line="562" pos:column="34">{
        <expr_stmt><expr><call><name pos:line="563" pos:column="9">failf<pos:position pos:line="563" pos:column="14"/></name><argument_list pos:line="563" pos:column="14">(<argument><expr><name pos:line="563" pos:column="15">data<pos:position pos:line="563" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="563" pos:column="21">"Couldn't set %s mode"<pos:position pos:line="563" pos:column="43"/></literal></expr></argument>,
              <argument><expr><ternary><condition><expr><operator pos:line="564" pos:column="15">(<pos:position pos:line="564" pos:column="16"/></operator><name><name pos:line="564" pos:column="16">data<pos:position pos:line="564" pos:column="20"/></name><operator pos:line="564" pos:column="20">-&gt;<pos:position pos:line="564" pos:column="25"/></operator><name pos:line="564" pos:column="22">bits<pos:position pos:line="564" pos:column="26"/></name><operator pos:line="564" pos:column="26">.<pos:position pos:line="564" pos:column="27"/></operator><name pos:line="564" pos:column="27">ftp_ascii<pos:position pos:line="564" pos:column="36"/></name></name><operator pos:line="564" pos:column="36">)<pos:position pos:line="564" pos:column="37"/></operator></expr>?<pos:position pos:line="564" pos:column="38"/></condition><then><expr><literal type="string" pos:line="564" pos:column="38">"ASCII"<pos:position pos:line="564" pos:column="45"/></literal></expr></then><else pos:line="564" pos:column="45">:<expr><literal type="string" pos:line="564" pos:column="46">"binary"<pos:position pos:line="564" pos:column="54"/></literal></expr></else></ternary></expr></argument>)<pos:position pos:line="564" pos:column="55"/></argument_list></call></expr>;<pos:position pos:line="564" pos:column="56"/></expr_stmt>
        <return pos:line="565" pos:column="9">return <expr><ternary><condition><expr><operator pos:line="565" pos:column="16">(<pos:position pos:line="565" pos:column="17"/></operator><name><name pos:line="565" pos:column="17">data<pos:position pos:line="565" pos:column="21"/></name><operator pos:line="565" pos:column="21">-&gt;<pos:position pos:line="565" pos:column="26"/></operator><name pos:line="565" pos:column="23">bits<pos:position pos:line="565" pos:column="27"/></name><operator pos:line="565" pos:column="27">.<pos:position pos:line="565" pos:column="28"/></operator><name pos:line="565" pos:column="28">ftp_ascii<pos:position pos:line="565" pos:column="37"/></name></name><operator pos:line="565" pos:column="37">)<pos:position pos:line="565" pos:column="38"/></operator></expr>?<pos:position pos:line="565" pos:column="39"/></condition><then pos:line="565" pos:column="39"> <expr><name pos:line="565" pos:column="40">CURLE_FTP_COULDNT_SET_ASCII<pos:position pos:line="565" pos:column="67"/></name></expr></then><else pos:line="565" pos:column="67">:
          <expr><name pos:line="566" pos:column="11">CURLE_FTP_COULDNT_SET_BINARY<pos:position pos:line="566" pos:column="39"/></name></expr></else></ternary></expr>;<pos:position pos:line="566" pos:column="40"/></return>
      }<pos:position pos:line="567" pos:column="8"/></block></then></if>

      <if pos:line="569" pos:column="7">if<condition pos:line="569" pos:column="9">(<expr><name><name pos:line="569" pos:column="10">data<pos:position pos:line="569" pos:column="14"/></name><operator pos:line="569" pos:column="14">-&gt;<pos:position pos:line="569" pos:column="19"/></operator><name pos:line="569" pos:column="16">resume_from<pos:position pos:line="569" pos:column="27"/></name></name></expr>)<pos:position pos:line="569" pos:column="28"/></condition><then pos:line="569" pos:column="28"> <block pos:line="569" pos:column="29">{

        <comment type="block" pos:line="571" pos:column="9">/* Daniel: (August 4, 1999)
         *
         * We start with trying to use the SIZE command to figure out the size
         * of the file we're gonna get. If we can get the size, this is by far
         * the best way to know if we're trying to resume beyond the EOF.  */</comment>

        <expr_stmt><expr><call><name pos:line="577" pos:column="9">sendf<pos:position pos:line="577" pos:column="14"/></name><argument_list pos:line="577" pos:column="14">(<argument><expr><name><name pos:line="577" pos:column="15">data<pos:position pos:line="577" pos:column="19"/></name><operator pos:line="577" pos:column="19">-&gt;<pos:position pos:line="577" pos:column="24"/></operator><name pos:line="577" pos:column="21">firstsocket<pos:position pos:line="577" pos:column="32"/></name></name></expr></argument>, <argument><expr><name pos:line="577" pos:column="34">data<pos:position pos:line="577" pos:column="38"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="577" pos:column="40">"SIZE %s\r\n"<pos:position pos:line="577" pos:column="53"/></literal></expr></argument>, <argument><expr><name><name pos:line="577" pos:column="55">ftp<pos:position pos:line="577" pos:column="58"/></name><operator pos:line="577" pos:column="58">-&gt;<pos:position pos:line="577" pos:column="63"/></operator><name pos:line="577" pos:column="60">file<pos:position pos:line="577" pos:column="64"/></name></name></expr></argument>)<pos:position pos:line="577" pos:column="65"/></argument_list></call></expr>;<pos:position pos:line="577" pos:column="66"/></expr_stmt>

        <expr_stmt><expr><name pos:line="579" pos:column="9">nread<pos:position pos:line="579" pos:column="14"/></name> <operator pos:line="579" pos:column="15">=<pos:position pos:line="579" pos:column="16"/></operator> <call><name pos:line="579" pos:column="17">GetLastResponse<pos:position pos:line="579" pos:column="32"/></name><argument_list pos:line="579" pos:column="32">(<argument><expr><name><name pos:line="579" pos:column="33">data<pos:position pos:line="579" pos:column="37"/></name><operator pos:line="579" pos:column="37">-&gt;<pos:position pos:line="579" pos:column="42"/></operator><name pos:line="579" pos:column="39">firstsocket<pos:position pos:line="579" pos:column="50"/></name></name></expr></argument>, <argument><expr><name pos:line="579" pos:column="52">buf<pos:position pos:line="579" pos:column="55"/></name></expr></argument>, <argument><expr><name pos:line="579" pos:column="57">conn<pos:position pos:line="579" pos:column="61"/></name></expr></argument>)<pos:position pos:line="579" pos:column="62"/></argument_list></call></expr>;<pos:position pos:line="579" pos:column="63"/></expr_stmt>
        <if pos:line="580" pos:column="9">if<condition pos:line="580" pos:column="11">(<expr><name pos:line="580" pos:column="12">nread<pos:position pos:line="580" pos:column="17"/></name> <operator pos:line="580" pos:column="18">&lt;<pos:position pos:line="580" pos:column="22"/></operator> <literal type="number" pos:line="580" pos:column="20">0<pos:position pos:line="580" pos:column="21"/></literal></expr>)<pos:position pos:line="580" pos:column="22"/></condition><then pos:line="580" pos:column="22">
          <block type="pseudo"><return pos:line="581" pos:column="11">return <expr><name pos:line="581" pos:column="18">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="581" pos:column="43"/></name></expr>;<pos:position pos:line="581" pos:column="44"/></return></block></then></if>

        <if pos:line="583" pos:column="9">if<condition pos:line="583" pos:column="11">(<expr><call><name pos:line="583" pos:column="12">strncmp<pos:position pos:line="583" pos:column="19"/></name><argument_list pos:line="583" pos:column="19">(<argument><expr><name pos:line="583" pos:column="20">buf<pos:position pos:line="583" pos:column="23"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="583" pos:column="25">"213"<pos:position pos:line="583" pos:column="30"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="583" pos:column="32">3<pos:position pos:line="583" pos:column="33"/></literal></expr></argument>)<pos:position pos:line="583" pos:column="34"/></argument_list></call></expr>)<pos:position pos:line="583" pos:column="35"/></condition><then pos:line="583" pos:column="35"> <block pos:line="583" pos:column="36">{
          <expr_stmt><expr><call><name pos:line="584" pos:column="11">infof<pos:position pos:line="584" pos:column="16"/></name><argument_list pos:line="584" pos:column="16">(<argument><expr><name pos:line="584" pos:column="17">data<pos:position pos:line="584" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="584" pos:column="23">"server doesn't support SIZE: %s"<pos:position pos:line="584" pos:column="56"/></literal></expr></argument>, <argument><expr><name pos:line="584" pos:column="58">buf<pos:position pos:line="584" pos:column="61"/></name><operator pos:line="584" pos:column="61">+<pos:position pos:line="584" pos:column="62"/></operator><literal type="number" pos:line="584" pos:column="62">4<pos:position pos:line="584" pos:column="63"/></literal></expr></argument>)<pos:position pos:line="584" pos:column="64"/></argument_list></call></expr>;<pos:position pos:line="584" pos:column="65"/></expr_stmt>
          <comment type="block" pos:line="585" pos:column="11">/* We couldn't get the size and therefore we can't know if there
             really is a part of the file left to get, although the server
             will just close the connection when we start the connection so it
             won't cause us any harm, just not make us exit as nicely. */</comment>
        }<pos:position pos:line="589" pos:column="10"/></block></then>
        <else pos:line="590" pos:column="9">else <block pos:line="590" pos:column="14">{
          <decl_stmt><decl><type><name pos:line="591" pos:column="11">int<pos:position pos:line="591" pos:column="14"/></name></type> <name pos:line="591" pos:column="15">foundsize<pos:position pos:line="591" pos:column="24"/></name><init pos:line="591" pos:column="24">=<expr><call><name pos:line="591" pos:column="25">atoi<pos:position pos:line="591" pos:column="29"/></name><argument_list pos:line="591" pos:column="29">(<argument><expr><name pos:line="591" pos:column="30">buf<pos:position pos:line="591" pos:column="33"/></name><operator pos:line="591" pos:column="33">+<pos:position pos:line="591" pos:column="34"/></operator><literal type="number" pos:line="591" pos:column="34">4<pos:position pos:line="591" pos:column="35"/></literal></expr></argument>)<pos:position pos:line="591" pos:column="36"/></argument_list></call></expr></init></decl>;<pos:position pos:line="591" pos:column="37"/></decl_stmt>
          <comment type="block" pos:line="592" pos:column="11">/* We got a file size report, so we check that there actually is a
             part of the file left to get, or else we go home.  */</comment>
          <if pos:line="594" pos:column="11">if<condition pos:line="594" pos:column="13">(<expr><name><name pos:line="594" pos:column="14">data<pos:position pos:line="594" pos:column="18"/></name><operator pos:line="594" pos:column="18">-&gt;<pos:position pos:line="594" pos:column="23"/></operator><name pos:line="594" pos:column="20">resume_from<pos:position pos:line="594" pos:column="31"/></name></name><operator pos:line="594" pos:column="31">&lt;<pos:position pos:line="594" pos:column="35"/></operator> <literal type="number" pos:line="594" pos:column="33">0<pos:position pos:line="594" pos:column="34"/></literal></expr>)<pos:position pos:line="594" pos:column="35"/></condition><then pos:line="594" pos:column="35"> <block pos:line="594" pos:column="36">{
            <comment type="block" pos:line="595" pos:column="13">/* We're supposed to download the last abs(from) bytes */</comment>
            <if pos:line="596" pos:column="13">if<condition pos:line="596" pos:column="15">(<expr><name pos:line="596" pos:column="16">foundsize<pos:position pos:line="596" pos:column="25"/></name> <operator pos:line="596" pos:column="26">&lt;<pos:position pos:line="596" pos:column="30"/></operator> <operator pos:line="596" pos:column="28">-<pos:position pos:line="596" pos:column="29"/></operator><name><name pos:line="596" pos:column="29">data<pos:position pos:line="596" pos:column="33"/></name><operator pos:line="596" pos:column="33">-&gt;<pos:position pos:line="596" pos:column="38"/></operator><name pos:line="596" pos:column="35">resume_from<pos:position pos:line="596" pos:column="46"/></name></name></expr>)<pos:position pos:line="596" pos:column="47"/></condition><then pos:line="596" pos:column="47"> <block pos:line="596" pos:column="48">{
              <expr_stmt><expr><call><name pos:line="597" pos:column="15">failf<pos:position pos:line="597" pos:column="20"/></name><argument_list pos:line="597" pos:column="20">(<argument><expr><name pos:line="597" pos:column="21">data<pos:position pos:line="597" pos:column="25"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="597" pos:column="27">"Offset (%d) was beyond file size (%d)"<pos:position pos:line="597" pos:column="66"/></literal></expr></argument>,
                    <argument><expr><name><name pos:line="598" pos:column="21">data<pos:position pos:line="598" pos:column="25"/></name><operator pos:line="598" pos:column="25">-&gt;<pos:position pos:line="598" pos:column="30"/></operator><name pos:line="598" pos:column="27">resume_from<pos:position pos:line="598" pos:column="38"/></name></name></expr></argument>, <argument><expr><name pos:line="598" pos:column="40">foundsize<pos:position pos:line="598" pos:column="49"/></name></expr></argument>)<pos:position pos:line="598" pos:column="50"/></argument_list></call></expr>;<pos:position pos:line="598" pos:column="51"/></expr_stmt>
              <return pos:line="599" pos:column="15">return <expr><name pos:line="599" pos:column="22">CURLE_FTP_BAD_DOWNLOAD_RESUME<pos:position pos:line="599" pos:column="51"/></name></expr>;<pos:position pos:line="599" pos:column="52"/></return>
            }<pos:position pos:line="600" pos:column="14"/></block></then></if>
            <comment type="block" pos:line="601" pos:column="13">/* convert to size to download */</comment>
            <expr_stmt><expr><name pos:line="602" pos:column="13">downloadsize<pos:position pos:line="602" pos:column="25"/></name> <operator pos:line="602" pos:column="26">=<pos:position pos:line="602" pos:column="27"/></operator> <operator pos:line="602" pos:column="28">-<pos:position pos:line="602" pos:column="29"/></operator><name><name pos:line="602" pos:column="29">data<pos:position pos:line="602" pos:column="33"/></name><operator pos:line="602" pos:column="33">-&gt;<pos:position pos:line="602" pos:column="38"/></operator><name pos:line="602" pos:column="35">resume_from<pos:position pos:line="602" pos:column="46"/></name></name></expr>;<pos:position pos:line="602" pos:column="47"/></expr_stmt>
            <comment type="block" pos:line="603" pos:column="13">/* download from where? */</comment>
            <expr_stmt><expr><name><name pos:line="604" pos:column="13">data<pos:position pos:line="604" pos:column="17"/></name><operator pos:line="604" pos:column="17">-&gt;<pos:position pos:line="604" pos:column="22"/></operator><name pos:line="604" pos:column="19">resume_from<pos:position pos:line="604" pos:column="30"/></name></name> <operator pos:line="604" pos:column="31">=<pos:position pos:line="604" pos:column="32"/></operator> <name pos:line="604" pos:column="33">foundsize<pos:position pos:line="604" pos:column="42"/></name> <operator pos:line="604" pos:column="43">-<pos:position pos:line="604" pos:column="44"/></operator> <name pos:line="604" pos:column="45">downloadsize<pos:position pos:line="604" pos:column="57"/></name></expr>;<pos:position pos:line="604" pos:column="58"/></expr_stmt>
          }<pos:position pos:line="605" pos:column="12"/></block></then>
          <else pos:line="606" pos:column="11">else <block pos:line="606" pos:column="16">{
            <if pos:line="607" pos:column="13">if<condition pos:line="607" pos:column="15">(<expr><name pos:line="607" pos:column="16">foundsize<pos:position pos:line="607" pos:column="25"/></name> <operator pos:line="607" pos:column="26">&lt;=<pos:position pos:line="607" pos:column="31"/></operator> <name><name pos:line="607" pos:column="29">data<pos:position pos:line="607" pos:column="33"/></name><operator pos:line="607" pos:column="33">-&gt;<pos:position pos:line="607" pos:column="38"/></operator><name pos:line="607" pos:column="35">resume_from<pos:position pos:line="607" pos:column="46"/></name></name></expr>)<pos:position pos:line="607" pos:column="47"/></condition><then pos:line="607" pos:column="47"> <block pos:line="607" pos:column="48">{
              <expr_stmt><expr><call><name pos:line="608" pos:column="15">failf<pos:position pos:line="608" pos:column="20"/></name><argument_list pos:line="608" pos:column="20">(<argument><expr><name pos:line="608" pos:column="21">data<pos:position pos:line="608" pos:column="25"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="608" pos:column="27">"Offset (%d) was beyond file size (%d)"<pos:position pos:line="608" pos:column="66"/></literal></expr></argument>,
                    <argument><expr><name><name pos:line="609" pos:column="21">data<pos:position pos:line="609" pos:column="25"/></name><operator pos:line="609" pos:column="25">-&gt;<pos:position pos:line="609" pos:column="30"/></operator><name pos:line="609" pos:column="27">resume_from<pos:position pos:line="609" pos:column="38"/></name></name></expr></argument>, <argument><expr><name pos:line="609" pos:column="40">foundsize<pos:position pos:line="609" pos:column="49"/></name></expr></argument>)<pos:position pos:line="609" pos:column="50"/></argument_list></call></expr>;<pos:position pos:line="609" pos:column="51"/></expr_stmt>
              <return pos:line="610" pos:column="15">return <expr><name pos:line="610" pos:column="22">CURLE_FTP_BAD_DOWNLOAD_RESUME<pos:position pos:line="610" pos:column="51"/></name></expr>;<pos:position pos:line="610" pos:column="52"/></return>
            }<pos:position pos:line="611" pos:column="14"/></block></then></if>
            <comment type="block" pos:line="612" pos:column="13">/* Now store the number of bytes we are expected to download */</comment>
            <expr_stmt><expr><name pos:line="613" pos:column="13">downloadsize<pos:position pos:line="613" pos:column="25"/></name> <operator pos:line="613" pos:column="26">=<pos:position pos:line="613" pos:column="27"/></operator> <name pos:line="613" pos:column="28">foundsize<pos:position pos:line="613" pos:column="37"/></name><operator pos:line="613" pos:column="37">-<pos:position pos:line="613" pos:column="38"/></operator><name><name pos:line="613" pos:column="38">data<pos:position pos:line="613" pos:column="42"/></name><operator pos:line="613" pos:column="42">-&gt;<pos:position pos:line="613" pos:column="47"/></operator><name pos:line="613" pos:column="44">resume_from<pos:position pos:line="613" pos:column="55"/></name></name></expr>;<pos:position pos:line="613" pos:column="56"/></expr_stmt>
          }<pos:position pos:line="614" pos:column="12"/></block></else></if>
        }<pos:position pos:line="615" pos:column="10"/></block></else></if>

        <comment type="block" pos:line="617" pos:column="9">/* Set resume file transfer offset */</comment>
        <expr_stmt><expr><call><name pos:line="618" pos:column="9">infof<pos:position pos:line="618" pos:column="14"/></name><argument_list pos:line="618" pos:column="14">(<argument><expr><name pos:line="618" pos:column="15">data<pos:position pos:line="618" pos:column="19"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="618" pos:column="21">"Instructs server to resume from offset %d\n"<pos:position pos:line="618" pos:column="66"/></literal></expr></argument>,
              <argument><expr><name><name pos:line="619" pos:column="15">data<pos:position pos:line="619" pos:column="19"/></name><operator pos:line="619" pos:column="19">-&gt;<pos:position pos:line="619" pos:column="24"/></operator><name pos:line="619" pos:column="21">resume_from<pos:position pos:line="619" pos:column="32"/></name></name></expr></argument>)<pos:position pos:line="619" pos:column="33"/></argument_list></call></expr>;<pos:position pos:line="619" pos:column="34"/></expr_stmt>

        <expr_stmt><expr><call><name pos:line="621" pos:column="9">sendf<pos:position pos:line="621" pos:column="14"/></name><argument_list pos:line="621" pos:column="14">(<argument><expr><name><name pos:line="621" pos:column="15">data<pos:position pos:line="621" pos:column="19"/></name><operator pos:line="621" pos:column="19">-&gt;<pos:position pos:line="621" pos:column="24"/></operator><name pos:line="621" pos:column="21">firstsocket<pos:position pos:line="621" pos:column="32"/></name></name></expr></argument>, <argument><expr><name pos:line="621" pos:column="34">data<pos:position pos:line="621" pos:column="38"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="621" pos:column="40">"REST %d\r\n"<pos:position pos:line="621" pos:column="53"/></literal></expr></argument>, <argument><expr><name><name pos:line="621" pos:column="55">data<pos:position pos:line="621" pos:column="59"/></name><operator pos:line="621" pos:column="59">-&gt;<pos:position pos:line="621" pos:column="64"/></operator><name pos:line="621" pos:column="61">resume_from<pos:position pos:line="621" pos:column="72"/></name></name></expr></argument>)<pos:position pos:line="621" pos:column="73"/></argument_list></call></expr>;<pos:position pos:line="621" pos:column="74"/></expr_stmt>

        <expr_stmt><expr><name pos:line="623" pos:column="9">nread<pos:position pos:line="623" pos:column="14"/></name> <operator pos:line="623" pos:column="15">=<pos:position pos:line="623" pos:column="16"/></operator> <call><name pos:line="623" pos:column="17">GetLastResponse<pos:position pos:line="623" pos:column="32"/></name><argument_list pos:line="623" pos:column="32">(<argument><expr><name><name pos:line="623" pos:column="33">data<pos:position pos:line="623" pos:column="37"/></name><operator pos:line="623" pos:column="37">-&gt;<pos:position pos:line="623" pos:column="42"/></operator><name pos:line="623" pos:column="39">firstsocket<pos:position pos:line="623" pos:column="50"/></name></name></expr></argument>, <argument><expr><name pos:line="623" pos:column="52">buf<pos:position pos:line="623" pos:column="55"/></name></expr></argument>, <argument><expr><name pos:line="623" pos:column="57">conn<pos:position pos:line="623" pos:column="61"/></name></expr></argument>)<pos:position pos:line="623" pos:column="62"/></argument_list></call></expr>;<pos:position pos:line="623" pos:column="63"/></expr_stmt>
        <if pos:line="624" pos:column="9">if<condition pos:line="624" pos:column="11">(<expr><name pos:line="624" pos:column="12">nread<pos:position pos:line="624" pos:column="17"/></name> <operator pos:line="624" pos:column="18">&lt;<pos:position pos:line="624" pos:column="22"/></operator> <literal type="number" pos:line="624" pos:column="20">0<pos:position pos:line="624" pos:column="21"/></literal></expr>)<pos:position pos:line="624" pos:column="22"/></condition><then pos:line="624" pos:column="22">
          <block type="pseudo"><return pos:line="625" pos:column="11">return <expr><name pos:line="625" pos:column="18">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="625" pos:column="43"/></name></expr>;<pos:position pos:line="625" pos:column="44"/></return></block></then></if>

        <if pos:line="627" pos:column="9">if<condition pos:line="627" pos:column="11">(<expr><call><name pos:line="627" pos:column="12">strncmp<pos:position pos:line="627" pos:column="19"/></name><argument_list pos:line="627" pos:column="19">(<argument><expr><name pos:line="627" pos:column="20">buf<pos:position pos:line="627" pos:column="23"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="627" pos:column="25">"350"<pos:position pos:line="627" pos:column="30"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="627" pos:column="32">3<pos:position pos:line="627" pos:column="33"/></literal></expr></argument>)<pos:position pos:line="627" pos:column="34"/></argument_list></call></expr>)<pos:position pos:line="627" pos:column="35"/></condition><then pos:line="627" pos:column="35"> <block pos:line="627" pos:column="36">{
          <expr_stmt><expr><call><name pos:line="628" pos:column="11">failf<pos:position pos:line="628" pos:column="16"/></name><argument_list pos:line="628" pos:column="16">(<argument><expr><name pos:line="628" pos:column="17">data<pos:position pos:line="628" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="628" pos:column="23">"Couldn't use REST: %s"<pos:position pos:line="628" pos:column="46"/></literal></expr></argument>, <argument><expr><name pos:line="628" pos:column="48">buf<pos:position pos:line="628" pos:column="51"/></name><operator pos:line="628" pos:column="51">+<pos:position pos:line="628" pos:column="52"/></operator><literal type="number" pos:line="628" pos:column="52">4<pos:position pos:line="628" pos:column="53"/></literal></expr></argument>)<pos:position pos:line="628" pos:column="54"/></argument_list></call></expr>;<pos:position pos:line="628" pos:column="55"/></expr_stmt>
          <return pos:line="629" pos:column="11">return <expr><name pos:line="629" pos:column="18">CURLE_FTP_COULDNT_USE_REST<pos:position pos:line="629" pos:column="44"/></name></expr>;<pos:position pos:line="629" pos:column="45"/></return>
        }<pos:position pos:line="630" pos:column="10"/></block></then></if>
      }<pos:position pos:line="631" pos:column="8"/></block></then></if>

      <expr_stmt><expr><call><name pos:line="633" pos:column="7">sendf<pos:position pos:line="633" pos:column="12"/></name><argument_list pos:line="633" pos:column="12">(<argument><expr><name><name pos:line="633" pos:column="13">data<pos:position pos:line="633" pos:column="17"/></name><operator pos:line="633" pos:column="17">-&gt;<pos:position pos:line="633" pos:column="22"/></operator><name pos:line="633" pos:column="19">firstsocket<pos:position pos:line="633" pos:column="30"/></name></name></expr></argument>, <argument><expr><name pos:line="633" pos:column="32">data<pos:position pos:line="633" pos:column="36"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="633" pos:column="38">"RETR %s\r\n"<pos:position pos:line="633" pos:column="51"/></literal></expr></argument>, <argument><expr><name><name pos:line="633" pos:column="53">ftp<pos:position pos:line="633" pos:column="56"/></name><operator pos:line="633" pos:column="56">-&gt;<pos:position pos:line="633" pos:column="61"/></operator><name pos:line="633" pos:column="58">file<pos:position pos:line="633" pos:column="62"/></name></name></expr></argument>)<pos:position pos:line="633" pos:column="63"/></argument_list></call></expr>;<pos:position pos:line="633" pos:column="64"/></expr_stmt>
    }<pos:position pos:line="634" pos:column="6"/></block></else></if>

    <expr_stmt><expr><name pos:line="636" pos:column="5">nread<pos:position pos:line="636" pos:column="10"/></name> <operator pos:line="636" pos:column="11">=<pos:position pos:line="636" pos:column="12"/></operator> <call><name pos:line="636" pos:column="13">GetLastResponse<pos:position pos:line="636" pos:column="28"/></name><argument_list pos:line="636" pos:column="28">(<argument><expr><name><name pos:line="636" pos:column="29">data<pos:position pos:line="636" pos:column="33"/></name><operator pos:line="636" pos:column="33">-&gt;<pos:position pos:line="636" pos:column="38"/></operator><name pos:line="636" pos:column="35">firstsocket<pos:position pos:line="636" pos:column="46"/></name></name></expr></argument>, <argument><expr><name pos:line="636" pos:column="48">buf<pos:position pos:line="636" pos:column="51"/></name></expr></argument>, <argument><expr><name pos:line="636" pos:column="53">conn<pos:position pos:line="636" pos:column="57"/></name></expr></argument>)<pos:position pos:line="636" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="636" pos:column="59"/></expr_stmt>
    <if pos:line="637" pos:column="5">if<condition pos:line="637" pos:column="7">(<expr><name pos:line="637" pos:column="8">nread<pos:position pos:line="637" pos:column="13"/></name> <operator pos:line="637" pos:column="14">&lt;<pos:position pos:line="637" pos:column="18"/></operator> <literal type="number" pos:line="637" pos:column="16">0<pos:position pos:line="637" pos:column="17"/></literal></expr>)<pos:position pos:line="637" pos:column="18"/></condition><then pos:line="637" pos:column="18">
      <block type="pseudo"><return pos:line="638" pos:column="7">return <expr><name pos:line="638" pos:column="14">CURLE_OPERATION_TIMEOUTED<pos:position pos:line="638" pos:column="39"/></name></expr>;<pos:position pos:line="638" pos:column="40"/></return></block></then></if>

    <if pos:line="640" pos:column="5">if<condition pos:line="640" pos:column="7">(<expr><operator pos:line="640" pos:column="8">!<pos:position pos:line="640" pos:column="9"/></operator><call><name pos:line="640" pos:column="9">strncmp<pos:position pos:line="640" pos:column="16"/></name><argument_list pos:line="640" pos:column="16">(<argument><expr><name pos:line="640" pos:column="17">buf<pos:position pos:line="640" pos:column="20"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="640" pos:column="22">"150"<pos:position pos:line="640" pos:column="27"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="640" pos:column="29">3<pos:position pos:line="640" pos:column="30"/></literal></expr></argument>)<pos:position pos:line="640" pos:column="31"/></argument_list></call> <operator pos:line="640" pos:column="32">||<pos:position pos:line="640" pos:column="34"/></operator> <operator pos:line="640" pos:column="35">!<pos:position pos:line="640" pos:column="36"/></operator><call><name pos:line="640" pos:column="36">strncmp<pos:position pos:line="640" pos:column="43"/></name><argument_list pos:line="640" pos:column="43">(<argument><expr><name pos:line="640" pos:column="44">buf<pos:position pos:line="640" pos:column="47"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="640" pos:column="49">"125"<pos:position pos:line="640" pos:column="54"/></literal></expr></argument>, <argument><expr><literal type="number" pos:line="640" pos:column="56">3<pos:position pos:line="640" pos:column="57"/></literal></expr></argument>)<pos:position pos:line="640" pos:column="58"/></argument_list></call></expr>)<pos:position pos:line="640" pos:column="59"/></condition><then pos:line="640" pos:column="59"> <block pos:line="640" pos:column="60">{

      <comment type="block" pos:line="642" pos:column="7">/*
        A;
        150 Opening BINARY mode data connection for /etc/passwd (2241
        bytes).  (ok, the file is being transfered)
	
        B:
        150 Opening ASCII mode data connection for /bin/ls 

        C:
        150 ASCII data connection for /bin/ls (137.167.104.91,37445) (0 bytes).

        D:
        150 Opening ASCII mode data connection for /linux/fisk/kpanelrc (0.0.0.0,0) (545 bytes).
          
        E:
        125 Data connection already open; Transfer starting. */</comment>

      <decl_stmt><decl><type><name pos:line="659" pos:column="7">int<pos:position pos:line="659" pos:column="10"/></name></type> <name pos:line="659" pos:column="11">size<pos:position pos:line="659" pos:column="15"/></name><init pos:line="659" pos:column="15">=<expr><operator pos:line="659" pos:column="16">-<pos:position pos:line="659" pos:column="17"/></operator><literal type="number" pos:line="659" pos:column="17">1<pos:position pos:line="659" pos:column="18"/></literal></expr></init></decl>;<pos:position pos:line="659" pos:column="19"/></decl_stmt> <comment type="block" pos:line="659" pos:column="20">/* default unknown size */</comment>

      <if pos:line="661" pos:column="7">if<condition pos:line="661" pos:column="9">(<expr><operator pos:line="661" pos:column="10">!<pos:position pos:line="661" pos:column="11"/></operator><name pos:line="661" pos:column="11">dirlist<pos:position pos:line="661" pos:column="18"/></name> <operator pos:line="661" pos:column="19">&amp;&amp;<pos:position pos:line="661" pos:column="29"/></operator>
         <operator pos:line="662" pos:column="10">!<pos:position pos:line="662" pos:column="11"/></operator><name><name pos:line="662" pos:column="11">data<pos:position pos:line="662" pos:column="15"/></name><operator pos:line="662" pos:column="15">-&gt;<pos:position pos:line="662" pos:column="20"/></operator><name pos:line="662" pos:column="17">bits<pos:position pos:line="662" pos:column="21"/></name><operator pos:line="662" pos:column="21">.<pos:position pos:line="662" pos:column="22"/></operator><name pos:line="662" pos:column="22">ftp_ascii<pos:position pos:line="662" pos:column="31"/></name></name> <operator pos:line="662" pos:column="32">&amp;&amp;<pos:position pos:line="662" pos:column="42"/></operator>
         <operator pos:line="663" pos:column="10">(<pos:position pos:line="663" pos:column="11"/></operator><operator pos:line="663" pos:column="11">-<pos:position pos:line="663" pos:column="12"/></operator><literal type="number" pos:line="663" pos:column="12">1<pos:position pos:line="663" pos:column="13"/></literal> <operator pos:line="663" pos:column="14">==<pos:position pos:line="663" pos:column="16"/></operator> <name pos:line="663" pos:column="17">downloadsize<pos:position pos:line="663" pos:column="29"/></name><operator pos:line="663" pos:column="29">)<pos:position pos:line="663" pos:column="30"/></operator></expr>)<pos:position pos:line="663" pos:column="31"/></condition><then pos:line="663" pos:column="31"> <block pos:line="663" pos:column="32">{
        <comment type="block" pos:line="664" pos:column="9">/*
         * It seems directory listings either don't show the size or very
         * often uses size 0 anyway. ASCII transfers may very well turn out
         * that the transfered amount of data is not the same as this line
         * tells, why using this number in those cases only confuses us.
         *
         * Example D above makes this parsing a little tricky */</comment>
        <decl_stmt><decl><type><name pos:line="671" pos:column="9">char<pos:position pos:line="671" pos:column="13"/></name> <modifier pos:line="671" pos:column="14">*<pos:position pos:line="671" pos:column="15"/></modifier></type><name pos:line="671" pos:column="15">bytes<pos:position pos:line="671" pos:column="20"/></name></decl>;<pos:position pos:line="671" pos:column="21"/></decl_stmt>
        <expr_stmt><expr><name pos:line="672" pos:column="9">bytes<pos:position pos:line="672" pos:column="14"/></name><operator pos:line="672" pos:column="14">=<pos:position pos:line="672" pos:column="15"/></operator><call><name pos:line="672" pos:column="15">strstr<pos:position pos:line="672" pos:column="21"/></name><argument_list pos:line="672" pos:column="21">(<argument><expr><name pos:line="672" pos:column="22">buf<pos:position pos:line="672" pos:column="25"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="672" pos:column="27">" bytes"<pos:position pos:line="672" pos:column="35"/></literal></expr></argument>)<pos:position pos:line="672" pos:column="36"/></argument_list></call></expr>;<pos:position pos:line="672" pos:column="37"/></expr_stmt>
        <if pos:line="673" pos:column="9">if<condition pos:line="673" pos:column="11">(<expr><name pos:line="673" pos:column="12">bytes<pos:position pos:line="673" pos:column="17"/></name><operator pos:line="673" pos:column="17">--<pos:position pos:line="673" pos:column="19"/></operator></expr>)<pos:position pos:line="673" pos:column="20"/></condition><then pos:line="673" pos:column="20"> <block pos:line="673" pos:column="21">{
          <decl_stmt><decl><type><name pos:line="674" pos:column="11">int<pos:position pos:line="674" pos:column="14"/></name></type> <name pos:line="674" pos:column="15">index<pos:position pos:line="674" pos:column="20"/></name><init pos:line="674" pos:column="20">=<expr><name pos:line="674" pos:column="21">bytes<pos:position pos:line="674" pos:column="26"/></name><operator pos:line="674" pos:column="26">-<pos:position pos:line="674" pos:column="27"/></operator><name pos:line="674" pos:column="27">buf<pos:position pos:line="674" pos:column="30"/></name></expr></init></decl>;<pos:position pos:line="674" pos:column="31"/></decl_stmt>
          <comment type="block" pos:line="675" pos:column="11">/* this is a hint there is size information in there! ;-) */</comment>
          <while pos:line="676" pos:column="11">while<condition pos:line="676" pos:column="16">(<expr><operator pos:line="676" pos:column="17">--<pos:position pos:line="676" pos:column="19"/></operator><name pos:line="676" pos:column="19">index<pos:position pos:line="676" pos:column="24"/></name></expr>)<pos:position pos:line="676" pos:column="25"/></condition> <block pos:line="676" pos:column="26">{
            <comment type="block" pos:line="677" pos:column="13">/* scan for the parenthesis and break there */</comment>
            <if pos:line="678" pos:column="13">if<condition pos:line="678" pos:column="15">(<expr><literal type="char" pos:line="678" pos:column="16">'('<pos:position pos:line="678" pos:column="19"/></literal> <operator pos:line="678" pos:column="20">==<pos:position pos:line="678" pos:column="22"/></operator> <operator pos:line="678" pos:column="23">*<pos:position pos:line="678" pos:column="24"/></operator><name pos:line="678" pos:column="24">bytes<pos:position pos:line="678" pos:column="29"/></name></expr>)<pos:position pos:line="678" pos:column="30"/></condition><then pos:line="678" pos:column="30">
              <block type="pseudo"><break pos:line="679" pos:column="15">break;<pos:position pos:line="679" pos:column="21"/></break></block></then></if>
            <comment type="block" pos:line="680" pos:column="13">/* if only skip digits, or else we're in deep trouble */</comment>
            <if pos:line="681" pos:column="13">if<condition pos:line="681" pos:column="15">(<expr><operator pos:line="681" pos:column="16">!<pos:position pos:line="681" pos:column="17"/></operator><call><name pos:line="681" pos:column="17">isdigit<pos:position pos:line="681" pos:column="24"/></name><argument_list pos:line="681" pos:column="24">(<argument><expr><operator pos:line="681" pos:column="25">(<pos:position pos:line="681" pos:column="26"/></operator><name pos:line="681" pos:column="26">int<pos:position pos:line="681" pos:column="29"/></name><operator pos:line="681" pos:column="29">)<pos:position pos:line="681" pos:column="30"/></operator><operator pos:line="681" pos:column="30">*<pos:position pos:line="681" pos:column="31"/></operator><name pos:line="681" pos:column="31">bytes<pos:position pos:line="681" pos:column="36"/></name></expr></argument>)<pos:position pos:line="681" pos:column="37"/></argument_list></call></expr>)<pos:position pos:line="681" pos:column="38"/></condition><then pos:line="681" pos:column="38"> <block pos:line="681" pos:column="39">{
              <expr_stmt><expr><name pos:line="682" pos:column="15">bytes<pos:position pos:line="682" pos:column="20"/></name><operator pos:line="682" pos:column="20">=<pos:position pos:line="682" pos:column="21"/></operator><name pos:line="682" pos:column="21">NULL<pos:position pos:line="682" pos:column="25"/></name></expr>;<pos:position pos:line="682" pos:column="26"/></expr_stmt>
              <break pos:line="683" pos:column="15">break;<pos:position pos:line="683" pos:column="21"/></break>
            }<pos:position pos:line="684" pos:column="14"/></block></then></if>
            <comment type="block" pos:line="685" pos:column="13">/* one more estep backwards */</comment>
            <expr_stmt><expr><name pos:line="686" pos:column="13">bytes<pos:position pos:line="686" pos:column="18"/></name><operator pos:line="686" pos:column="18">--<pos:position pos:line="686" pos:column="20"/></operator></expr>;<pos:position pos:line="686" pos:column="21"/></expr_stmt>
          }<pos:position pos:line="687" pos:column="12"/></block></while>
          <comment type="block" pos:line="688" pos:column="11">/* only if we have nothing but digits: */</comment>
          <if pos:line="689" pos:column="11">if<condition pos:line="689" pos:column="13">(<expr><name pos:line="689" pos:column="14">bytes<pos:position pos:line="689" pos:column="19"/></name><operator pos:line="689" pos:column="19">++<pos:position pos:line="689" pos:column="21"/></operator></expr>)<pos:position pos:line="689" pos:column="22"/></condition><then pos:line="689" pos:column="22"> <block pos:line="689" pos:column="23">{
            <comment type="block" pos:line="690" pos:column="13">/* get the number! */</comment>
            <expr_stmt><expr><name pos:line="691" pos:column="13">size<pos:position pos:line="691" pos:column="17"/></name> <operator pos:line="691" pos:column="18">=<pos:position pos:line="691" pos:column="19"/></operator> <call><name pos:line="691" pos:column="20">atoi<pos:position pos:line="691" pos:column="24"/></name><argument_list pos:line="691" pos:column="24">(<argument><expr><name pos:line="691" pos:column="25">bytes<pos:position pos:line="691" pos:column="30"/></name></expr></argument>)<pos:position pos:line="691" pos:column="31"/></argument_list></call></expr>;<pos:position pos:line="691" pos:column="32"/></expr_stmt>
          }<pos:position pos:line="692" pos:column="12"/></block></then></if>
            
        }<pos:position pos:line="694" pos:column="10"/></block></then></if>
<cpp:if pos:line="695" pos:column="1">#<cpp:directive pos:line="695" pos:column="2">if<pos:position pos:line="695" pos:column="4"/></cpp:directive> <expr><literal type="number" pos:line="695" pos:column="5">0<pos:position pos:line="695" pos:column="6"/></literal></expr></cpp:if>
        if(2 != sscanf(buf, "%*[^(](%d bytes%c", &amp;size, &amp;paren))
          size=-1;
<cpp:endif pos:line="698" pos:column="1">#<cpp:directive pos:line="698" pos:column="2">endif<pos:position pos:line="698" pos:column="7"/></cpp:directive></cpp:endif>
      }<pos:position pos:line="699" pos:column="8"/></block></then>
      <elseif pos:line="700" pos:column="7">else <if pos:line="700" pos:column="12">if<condition pos:line="700" pos:column="14">(<expr><name pos:line="700" pos:column="15">downloadsize<pos:position pos:line="700" pos:column="27"/></name> <operator pos:line="700" pos:column="28">&gt;<pos:position pos:line="700" pos:column="32"/></operator> <operator pos:line="700" pos:column="30">-<pos:position pos:line="700" pos:column="31"/></operator><literal type="number" pos:line="700" pos:column="31">1<pos:position pos:line="700" pos:column="32"/></literal></expr>)<pos:position pos:line="700" pos:column="33"/></condition><then pos:line="700" pos:column="33">
        <block type="pseudo"><expr_stmt><expr><name pos:line="701" pos:column="9">size<pos:position pos:line="701" pos:column="13"/></name> <operator pos:line="701" pos:column="14">=<pos:position pos:line="701" pos:column="15"/></operator> <name pos:line="701" pos:column="16">downloadsize<pos:position pos:line="701" pos:column="28"/></name></expr>;<pos:position pos:line="701" pos:column="29"/></expr_stmt></block></then></if></elseif></if>

<cpp:if pos:line="703" pos:column="1">#<cpp:directive pos:line="703" pos:column="2">if<pos:position pos:line="703" pos:column="4"/></cpp:directive> <expr><literal type="number" pos:line="703" pos:column="5">0<pos:position pos:line="703" pos:column="6"/></literal></expr></cpp:if>
      if((size &gt; -1) &amp;&amp; (data-&gt;resume_from&gt;0)) {
        size -= data-&gt;resume_from;
        if(size &lt;= 0) {
          failf(data, "Offset (%d) was beyond file size (%d)",
                data-&gt;resume_from, data-&gt;resume_from+size);
          return CURLE_PARTIAL_FILE;
        }
      }
<cpp:endif pos:line="712" pos:column="1">#<cpp:directive pos:line="712" pos:column="2">endif<pos:position pos:line="712" pos:column="7"/></cpp:directive></cpp:endif>

      <if pos:line="714" pos:column="7">if<condition pos:line="714" pos:column="9">(<expr><name><name pos:line="714" pos:column="10">data<pos:position pos:line="714" pos:column="14"/></name><operator pos:line="714" pos:column="14">-&gt;<pos:position pos:line="714" pos:column="19"/></operator><name pos:line="714" pos:column="16">bits<pos:position pos:line="714" pos:column="20"/></name><operator pos:line="714" pos:column="20">.<pos:position pos:line="714" pos:column="21"/></operator><name pos:line="714" pos:column="21">ftp_use_port<pos:position pos:line="714" pos:column="33"/></name></name></expr>)<pos:position pos:line="714" pos:column="34"/></condition><then pos:line="714" pos:column="34"> <block pos:line="714" pos:column="35">{
        <expr_stmt><expr><name pos:line="715" pos:column="9">result<pos:position pos:line="715" pos:column="15"/></name> <operator pos:line="715" pos:column="16">=<pos:position pos:line="715" pos:column="17"/></operator> <call><name pos:line="715" pos:column="18">AllowServerConnect<pos:position pos:line="715" pos:column="36"/></name><argument_list pos:line="715" pos:column="36">(<argument><expr><name pos:line="715" pos:column="37">data<pos:position pos:line="715" pos:column="41"/></name></expr></argument>, <argument><expr><name pos:line="715" pos:column="43">portsock<pos:position pos:line="715" pos:column="51"/></name></expr></argument>)<pos:position pos:line="715" pos:column="52"/></argument_list></call></expr>;<pos:position pos:line="715" pos:column="53"/></expr_stmt>
        <if pos:line="716" pos:column="9">if<condition pos:line="716" pos:column="11">( <expr><name pos:line="716" pos:column="13">result<pos:position pos:line="716" pos:column="19"/></name></expr> )<pos:position pos:line="716" pos:column="21"/></condition><then pos:line="716" pos:column="21">
          <block type="pseudo"><return pos:line="717" pos:column="11">return <expr><name pos:line="717" pos:column="18">result<pos:position pos:line="717" pos:column="24"/></name></expr>;<pos:position pos:line="717" pos:column="25"/></return></block></then></if>
      }<pos:position pos:line="718" pos:column="8"/></block></then></if>

      <expr_stmt><expr><call><name pos:line="720" pos:column="7">infof<pos:position pos:line="720" pos:column="12"/></name><argument_list pos:line="720" pos:column="12">(<argument><expr><name pos:line="720" pos:column="13">data<pos:position pos:line="720" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="720" pos:column="19">"Getting file with size: %d\n"<pos:position pos:line="720" pos:column="49"/></literal></expr></argument>, <argument><expr><name pos:line="720" pos:column="51">size<pos:position pos:line="720" pos:column="55"/></name></expr></argument>)<pos:position pos:line="720" pos:column="56"/></argument_list></call></expr>;<pos:position pos:line="720" pos:column="57"/></expr_stmt>

      <comment type="block" pos:line="722" pos:column="7">/* FTP download: */</comment>
      <expr_stmt><expr><name pos:line="723" pos:column="7">result<pos:position pos:line="723" pos:column="13"/></name><operator pos:line="723" pos:column="13">=<pos:position pos:line="723" pos:column="14"/></operator><call><name pos:line="723" pos:column="14">Transfer<pos:position pos:line="723" pos:column="22"/></name><argument_list pos:line="723" pos:column="22">(<argument><expr><name pos:line="723" pos:column="23">conn<pos:position pos:line="723" pos:column="27"/></name></expr></argument>, <argument><expr><name><name pos:line="723" pos:column="29">data<pos:position pos:line="723" pos:column="33"/></name><operator pos:line="723" pos:column="33">-&gt;<pos:position pos:line="723" pos:column="38"/></operator><name pos:line="723" pos:column="35">secondarysocket<pos:position pos:line="723" pos:column="50"/></name></name></expr></argument>, <argument><expr><name pos:line="723" pos:column="52">size<pos:position pos:line="723" pos:column="56"/></name></expr></argument>, <argument><expr><name pos:line="723" pos:column="58">FALSE<pos:position pos:line="723" pos:column="63"/></name></expr></argument>,
                      <argument><expr><name pos:line="724" pos:column="23">bytecountp<pos:position pos:line="724" pos:column="33"/></name></expr></argument>,
                      <argument><expr><operator pos:line="725" pos:column="23">-<pos:position pos:line="725" pos:column="24"/></operator><literal type="number" pos:line="725" pos:column="24">1<pos:position pos:line="725" pos:column="25"/></literal></expr></argument>, <argument><expr><name pos:line="725" pos:column="27">NULL<pos:position pos:line="725" pos:column="31"/></name></expr></argument>)<pos:position pos:line="725" pos:column="32"/></argument_list></call></expr>;<pos:position pos:line="725" pos:column="33"/></expr_stmt> <comment type="block" pos:line="725" pos:column="34">/* no upload here */</comment>
      <if pos:line="726" pos:column="7">if<condition pos:line="726" pos:column="9">(<expr><name pos:line="726" pos:column="10">result<pos:position pos:line="726" pos:column="16"/></name></expr>)<pos:position pos:line="726" pos:column="17"/></condition><then pos:line="726" pos:column="17">
        <block type="pseudo"><return pos:line="727" pos:column="9">return <expr><name pos:line="727" pos:column="16">result<pos:position pos:line="727" pos:column="22"/></name></expr>;<pos:position pos:line="727" pos:column="23"/></return></block></then></if>
    }<pos:position pos:line="728" pos:column="6"/></block></then>
    <else pos:line="729" pos:column="5">else <block pos:line="729" pos:column="10">{
      <expr_stmt><expr><call><name pos:line="730" pos:column="7">failf<pos:position pos:line="730" pos:column="12"/></name><argument_list pos:line="730" pos:column="12">(<argument><expr><name pos:line="730" pos:column="13">data<pos:position pos:line="730" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="730" pos:column="19">"%s"<pos:position pos:line="730" pos:column="23"/></literal></expr></argument>, <argument><expr><name pos:line="730" pos:column="25">buf<pos:position pos:line="730" pos:column="28"/></name><operator pos:line="730" pos:column="28">+<pos:position pos:line="730" pos:column="29"/></operator><literal type="number" pos:line="730" pos:column="29">4<pos:position pos:line="730" pos:column="30"/></literal></expr></argument>)<pos:position pos:line="730" pos:column="31"/></argument_list></call></expr>;<pos:position pos:line="730" pos:column="32"/></expr_stmt>
      <return pos:line="731" pos:column="7">return <expr><name pos:line="731" pos:column="14">CURLE_FTP_COULDNT_RETR_FILE<pos:position pos:line="731" pos:column="41"/></name></expr>;<pos:position pos:line="731" pos:column="42"/></return>
    }<pos:position pos:line="732" pos:column="6"/></block></else></if>
	
  }<pos:position pos:line="734" pos:column="4"/></block></else></if>
  <comment type="block" pos:line="735" pos:column="3">/* end of transfer */</comment>

  <return pos:line="737" pos:column="3">return <expr><name pos:line="737" pos:column="10">CURLE_OK<pos:position pos:line="737" pos:column="18"/></name></expr>;<pos:position pos:line="737" pos:column="19"/></return>
}<pos:position pos:line="738" pos:column="2"/></block></function></unit>
