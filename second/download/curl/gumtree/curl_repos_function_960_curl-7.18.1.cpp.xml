<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="0.9.5" language="C++" filename="usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/gumtree/curl_repos_function_960_curl-7.18.1.cpp" pos:tabs="8"><function><specifier pos:line="1" pos:column="1">static<pos:position pos:line="1" pos:column="7"/></specifier> <type><name pos:line="1" pos:column="8">CURLcode<pos:position pos:line="1" pos:column="16"/></name></type> <name pos:line="1" pos:column="17">file_connect<pos:position pos:line="1" pos:column="29"/></name><parameter_list pos:line="1" pos:column="29">(<parameter><decl><type><name><name pos:line="1" pos:column="30">struct<pos:position pos:line="1" pos:column="36"/></name> <name pos:line="1" pos:column="37">connectdata<pos:position pos:line="1" pos:column="48"/></name></name> <modifier pos:line="1" pos:column="49">*<pos:position pos:line="1" pos:column="50"/></modifier></type><name pos:line="1" pos:column="50">conn<pos:position pos:line="1" pos:column="54"/></name></decl></parameter>, <parameter><decl><type><name pos:line="1" pos:column="56">bool<pos:position pos:line="1" pos:column="60"/></name> <modifier pos:line="1" pos:column="61">*<pos:position pos:line="1" pos:column="62"/></modifier></type><name pos:line="1" pos:column="62">done<pos:position pos:line="1" pos:column="66"/></name></decl></parameter>)<pos:position pos:line="1" pos:column="67"/></parameter_list>
<block pos:line="2" pos:column="1">{
  <decl_stmt><decl><type><name><name pos:line="3" pos:column="3">struct<pos:position pos:line="3" pos:column="9"/></name> <name pos:line="3" pos:column="10">SessionHandle<pos:position pos:line="3" pos:column="23"/></name></name> <modifier pos:line="3" pos:column="24">*<pos:position pos:line="3" pos:column="25"/></modifier></type><name pos:line="3" pos:column="25">data<pos:position pos:line="3" pos:column="29"/></name> <init pos:line="3" pos:column="30">= <expr><name><name pos:line="3" pos:column="32">conn<pos:position pos:line="3" pos:column="36"/></name><operator pos:line="3" pos:column="36">-&gt;<pos:position pos:line="3" pos:column="41"/></operator><name pos:line="3" pos:column="38">data<pos:position pos:line="3" pos:column="42"/></name></name></expr></init></decl>;<pos:position pos:line="3" pos:column="43"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="4" pos:column="3">char<pos:position pos:line="4" pos:column="7"/></name> <modifier pos:line="4" pos:column="8">*<pos:position pos:line="4" pos:column="9"/></modifier></type><name pos:line="4" pos:column="9">real_path<pos:position pos:line="4" pos:column="18"/></name> <init pos:line="4" pos:column="19">= <expr><call><name pos:line="4" pos:column="21">curl_easy_unescape<pos:position pos:line="4" pos:column="39"/></name><argument_list pos:line="4" pos:column="39">(<argument><expr><name pos:line="4" pos:column="40">data<pos:position pos:line="4" pos:column="44"/></name></expr></argument>, <argument><expr><name><name pos:line="4" pos:column="46">data<pos:position pos:line="4" pos:column="50"/></name><operator pos:line="4" pos:column="50">-&gt;<pos:position pos:line="4" pos:column="55"/></operator><name pos:line="4" pos:column="52">state<pos:position pos:line="4" pos:column="57"/></name><operator pos:line="4" pos:column="57">.<pos:position pos:line="4" pos:column="58"/></operator><name pos:line="4" pos:column="58">path<pos:position pos:line="4" pos:column="62"/></name></name></expr></argument>, <argument><expr><literal type="number" pos:line="4" pos:column="64">0<pos:position pos:line="4" pos:column="65"/></literal></expr></argument>, <argument><expr><name pos:line="4" pos:column="67">NULL<pos:position pos:line="4" pos:column="71"/></name></expr></argument>)<pos:position pos:line="4" pos:column="72"/></argument_list></call></expr></init></decl>;<pos:position pos:line="4" pos:column="73"/></decl_stmt>
  <decl_stmt><decl><type><name><name pos:line="5" pos:column="3">struct<pos:position pos:line="5" pos:column="9"/></name> <name pos:line="5" pos:column="10">FILEPROTO<pos:position pos:line="5" pos:column="19"/></name></name> <modifier pos:line="5" pos:column="20">*<pos:position pos:line="5" pos:column="21"/></modifier></type><name pos:line="5" pos:column="21">file<pos:position pos:line="5" pos:column="25"/></name></decl>;<pos:position pos:line="5" pos:column="26"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="6" pos:column="3">int<pos:position pos:line="6" pos:column="6"/></name></type> <name pos:line="6" pos:column="7">fd<pos:position pos:line="6" pos:column="9"/></name></decl>;<pos:position pos:line="6" pos:column="10"/></decl_stmt>
<cpp:if pos:line="7" pos:column="1">#<cpp:directive pos:line="7" pos:column="2">if<pos:position pos:line="7" pos:column="4"/></cpp:directive> <expr><call><name pos:line="7" pos:column="5">defined<pos:position pos:line="7" pos:column="12"/></name><argument_list pos:line="7" pos:column="12">(<argument><expr><name pos:line="7" pos:column="13">WIN32<pos:position pos:line="7" pos:column="18"/></name></expr></argument>)<pos:position pos:line="7" pos:column="19"/></argument_list></call> <operator pos:line="7" pos:column="20">||<pos:position pos:line="7" pos:column="22"/></operator> <call><name pos:line="7" pos:column="23">defined<pos:position pos:line="7" pos:column="30"/></name><argument_list pos:line="7" pos:column="30">(<argument><expr><name pos:line="7" pos:column="31">MSDOS<pos:position pos:line="7" pos:column="36"/></name></expr></argument>)<pos:position pos:line="7" pos:column="37"/></argument_list></call> <operator pos:line="7" pos:column="38">||<pos:position pos:line="7" pos:column="40"/></operator> <call><name pos:line="7" pos:column="41">defined<pos:position pos:line="7" pos:column="48"/></name><argument_list pos:line="7" pos:column="48">(<argument><expr><name pos:line="7" pos:column="49">__EMX__<pos:position pos:line="7" pos:column="56"/></name></expr></argument>)<pos:position pos:line="7" pos:column="57"/></argument_list></call></expr></cpp:if>
  <decl_stmt><decl><type><name pos:line="8" pos:column="3">int<pos:position pos:line="8" pos:column="6"/></name></type> <name pos:line="8" pos:column="7">i<pos:position pos:line="8" pos:column="8"/></name></decl>;<pos:position pos:line="8" pos:column="9"/></decl_stmt>
  <decl_stmt><decl><type><name pos:line="9" pos:column="3">char<pos:position pos:line="9" pos:column="7"/></name> <modifier pos:line="9" pos:column="8">*<pos:position pos:line="9" pos:column="9"/></modifier></type><name pos:line="9" pos:column="9">actual_path<pos:position pos:line="9" pos:column="20"/></name></decl>;<pos:position pos:line="9" pos:column="21"/></decl_stmt>
<cpp:endif pos:line="10" pos:column="1">#<cpp:directive pos:line="10" pos:column="2">endif<pos:position pos:line="10" pos:column="7"/></cpp:directive></cpp:endif>

  <if pos:line="12" pos:column="3">if<condition pos:line="12" pos:column="5">(<expr><operator pos:line="12" pos:column="6">!<pos:position pos:line="12" pos:column="7"/></operator><name pos:line="12" pos:column="7">real_path<pos:position pos:line="12" pos:column="16"/></name></expr>)<pos:position pos:line="12" pos:column="17"/></condition><then pos:line="12" pos:column="17">
    <block type="pseudo"><return pos:line="13" pos:column="5">return <expr><name pos:line="13" pos:column="12">CURLE_OUT_OF_MEMORY<pos:position pos:line="13" pos:column="31"/></name></expr>;<pos:position pos:line="13" pos:column="32"/></return></block></then></if>

  <comment type="block" pos:line="15" pos:column="3">/* If there already is a protocol-specific struct allocated for this
     sessionhandle, deal with it */</comment>
  <expr_stmt><expr><call><name pos:line="17" pos:column="3">Curl_reset_reqproto<pos:position pos:line="17" pos:column="22"/></name><argument_list pos:line="17" pos:column="22">(<argument><expr><name pos:line="17" pos:column="23">conn<pos:position pos:line="17" pos:column="27"/></name></expr></argument>)<pos:position pos:line="17" pos:column="28"/></argument_list></call></expr>;<pos:position pos:line="17" pos:column="29"/></expr_stmt>

  <if pos:line="19" pos:column="3">if<condition pos:line="19" pos:column="5">(<expr><operator pos:line="19" pos:column="6">!<pos:position pos:line="19" pos:column="7"/></operator><name><name pos:line="19" pos:column="7">data<pos:position pos:line="19" pos:column="11"/></name><operator pos:line="19" pos:column="11">-&gt;<pos:position pos:line="19" pos:column="16"/></operator><name pos:line="19" pos:column="13">state<pos:position pos:line="19" pos:column="18"/></name><operator pos:line="19" pos:column="18">.<pos:position pos:line="19" pos:column="19"/></operator><name pos:line="19" pos:column="19">proto<pos:position pos:line="19" pos:column="24"/></name><operator pos:line="19" pos:column="24">.<pos:position pos:line="19" pos:column="25"/></operator><name pos:line="19" pos:column="25">file<pos:position pos:line="19" pos:column="29"/></name></name></expr>)<pos:position pos:line="19" pos:column="30"/></condition><then pos:line="19" pos:column="30"> <block pos:line="19" pos:column="31">{
    <expr_stmt><expr><name pos:line="20" pos:column="5">file<pos:position pos:line="20" pos:column="9"/></name> <operator pos:line="20" pos:column="10">=<pos:position pos:line="20" pos:column="11"/></operator> <operator pos:line="20" pos:column="12">(<pos:position pos:line="20" pos:column="13"/></operator>struct <name pos:line="20" pos:column="20">FILEPROTO<pos:position pos:line="20" pos:column="29"/></name> <operator pos:line="20" pos:column="30">*<pos:position pos:line="20" pos:column="31"/></operator><operator pos:line="20" pos:column="31">)<pos:position pos:line="20" pos:column="32"/></operator><call><name pos:line="20" pos:column="32">calloc<pos:position pos:line="20" pos:column="38"/></name><argument_list pos:line="20" pos:column="38">(<argument><expr><sizeof pos:line="20" pos:column="39">sizeof<argument_list pos:line="20" pos:column="45">(<argument><expr pos:line="20" pos:column="46">struct <name pos:line="20" pos:column="53">FILEPROTO<pos:position pos:line="20" pos:column="62"/></name></expr></argument>)<pos:position pos:line="20" pos:column="63"/></argument_list></sizeof></expr></argument>, <argument><expr><literal type="number" pos:line="20" pos:column="65">1<pos:position pos:line="20" pos:column="66"/></literal></expr></argument>)<pos:position pos:line="20" pos:column="67"/></argument_list></call></expr>;<pos:position pos:line="20" pos:column="68"/></expr_stmt>
    <if pos:line="21" pos:column="5">if<condition pos:line="21" pos:column="7">(<expr><operator pos:line="21" pos:column="8">!<pos:position pos:line="21" pos:column="9"/></operator><name pos:line="21" pos:column="9">file<pos:position pos:line="21" pos:column="13"/></name></expr>)<pos:position pos:line="21" pos:column="14"/></condition><then pos:line="21" pos:column="14"> <block pos:line="21" pos:column="15">{
      <expr_stmt><expr><call><name pos:line="22" pos:column="7">free<pos:position pos:line="22" pos:column="11"/></name><argument_list pos:line="22" pos:column="11">(<argument><expr><name pos:line="22" pos:column="12">real_path<pos:position pos:line="22" pos:column="21"/></name></expr></argument>)<pos:position pos:line="22" pos:column="22"/></argument_list></call></expr>;<pos:position pos:line="22" pos:column="23"/></expr_stmt>
      <return pos:line="23" pos:column="7">return <expr><name pos:line="23" pos:column="14">CURLE_OUT_OF_MEMORY<pos:position pos:line="23" pos:column="33"/></name></expr>;<pos:position pos:line="23" pos:column="34"/></return>
    }<pos:position pos:line="24" pos:column="6"/></block></then></if>
    <expr_stmt><expr><name><name pos:line="25" pos:column="5">data<pos:position pos:line="25" pos:column="9"/></name><operator pos:line="25" pos:column="9">-&gt;<pos:position pos:line="25" pos:column="14"/></operator><name pos:line="25" pos:column="11">state<pos:position pos:line="25" pos:column="16"/></name><operator pos:line="25" pos:column="16">.<pos:position pos:line="25" pos:column="17"/></operator><name pos:line="25" pos:column="17">proto<pos:position pos:line="25" pos:column="22"/></name><operator pos:line="25" pos:column="22">.<pos:position pos:line="25" pos:column="23"/></operator><name pos:line="25" pos:column="23">file<pos:position pos:line="25" pos:column="27"/></name></name> <operator pos:line="25" pos:column="28">=<pos:position pos:line="25" pos:column="29"/></operator> <name pos:line="25" pos:column="30">file<pos:position pos:line="25" pos:column="34"/></name></expr>;<pos:position pos:line="25" pos:column="35"/></expr_stmt>
  }<pos:position pos:line="26" pos:column="4"/></block></then>
  <else pos:line="27" pos:column="3">else <block pos:line="27" pos:column="8">{
    <comment type="block" pos:line="28" pos:column="5">/* file is not a protocol that can deal with "persistancy" */</comment>
    <expr_stmt><expr><name pos:line="29" pos:column="5">file<pos:position pos:line="29" pos:column="9"/></name> <operator pos:line="29" pos:column="10">=<pos:position pos:line="29" pos:column="11"/></operator> <name><name pos:line="29" pos:column="12">data<pos:position pos:line="29" pos:column="16"/></name><operator pos:line="29" pos:column="16">-&gt;<pos:position pos:line="29" pos:column="21"/></operator><name pos:line="29" pos:column="18">state<pos:position pos:line="29" pos:column="23"/></name><operator pos:line="29" pos:column="23">.<pos:position pos:line="29" pos:column="24"/></operator><name pos:line="29" pos:column="24">proto<pos:position pos:line="29" pos:column="29"/></name><operator pos:line="29" pos:column="29">.<pos:position pos:line="29" pos:column="30"/></operator><name pos:line="29" pos:column="30">file<pos:position pos:line="29" pos:column="34"/></name></name></expr>;<pos:position pos:line="29" pos:column="35"/></expr_stmt>
    <expr_stmt><expr><call><name pos:line="30" pos:column="5">Curl_safefree<pos:position pos:line="30" pos:column="18"/></name><argument_list pos:line="30" pos:column="18">(<argument><expr><name><name pos:line="30" pos:column="19">file<pos:position pos:line="30" pos:column="23"/></name><operator pos:line="30" pos:column="23">-&gt;<pos:position pos:line="30" pos:column="28"/></operator><name pos:line="30" pos:column="25">freepath<pos:position pos:line="30" pos:column="33"/></name></name></expr></argument>)<pos:position pos:line="30" pos:column="34"/></argument_list></call></expr>;<pos:position pos:line="30" pos:column="35"/></expr_stmt>
    <if pos:line="31" pos:column="5">if<condition pos:line="31" pos:column="7">(<expr><name><name pos:line="31" pos:column="8">file<pos:position pos:line="31" pos:column="12"/></name><operator pos:line="31" pos:column="12">-&gt;<pos:position pos:line="31" pos:column="17"/></operator><name pos:line="31" pos:column="14">fd<pos:position pos:line="31" pos:column="16"/></name></name> <operator pos:line="31" pos:column="17">!=<pos:position pos:line="31" pos:column="19"/></operator> <operator pos:line="31" pos:column="20">-<pos:position pos:line="31" pos:column="21"/></operator><literal type="number" pos:line="31" pos:column="21">1<pos:position pos:line="31" pos:column="22"/></literal></expr>)<pos:position pos:line="31" pos:column="23"/></condition><then pos:line="31" pos:column="23">
      <block type="pseudo"><expr_stmt><expr><call><name pos:line="32" pos:column="7">close<pos:position pos:line="32" pos:column="12"/></name><argument_list pos:line="32" pos:column="12">(<argument><expr><name><name pos:line="32" pos:column="13">file<pos:position pos:line="32" pos:column="17"/></name><operator pos:line="32" pos:column="17">-&gt;<pos:position pos:line="32" pos:column="22"/></operator><name pos:line="32" pos:column="19">fd<pos:position pos:line="32" pos:column="21"/></name></name></expr></argument>)<pos:position pos:line="32" pos:column="22"/></argument_list></call></expr>;<pos:position pos:line="32" pos:column="23"/></expr_stmt></block></then></if>
    <expr_stmt><expr><name><name pos:line="33" pos:column="5">file<pos:position pos:line="33" pos:column="9"/></name><operator pos:line="33" pos:column="9">-&gt;<pos:position pos:line="33" pos:column="14"/></operator><name pos:line="33" pos:column="11">path<pos:position pos:line="33" pos:column="15"/></name></name> <operator pos:line="33" pos:column="16">=<pos:position pos:line="33" pos:column="17"/></operator> <name pos:line="33" pos:column="18">NULL<pos:position pos:line="33" pos:column="22"/></name></expr>;<pos:position pos:line="33" pos:column="23"/></expr_stmt>
    <expr_stmt><expr><name><name pos:line="34" pos:column="5">file<pos:position pos:line="34" pos:column="9"/></name><operator pos:line="34" pos:column="9">-&gt;<pos:position pos:line="34" pos:column="14"/></operator><name pos:line="34" pos:column="11">freepath<pos:position pos:line="34" pos:column="19"/></name></name> <operator pos:line="34" pos:column="20">=<pos:position pos:line="34" pos:column="21"/></operator> <name pos:line="34" pos:column="22">NULL<pos:position pos:line="34" pos:column="26"/></name></expr>;<pos:position pos:line="34" pos:column="27"/></expr_stmt>
    <expr_stmt><expr><name><name pos:line="35" pos:column="5">file<pos:position pos:line="35" pos:column="9"/></name><operator pos:line="35" pos:column="9">-&gt;<pos:position pos:line="35" pos:column="14"/></operator><name pos:line="35" pos:column="11">fd<pos:position pos:line="35" pos:column="13"/></name></name> <operator pos:line="35" pos:column="14">=<pos:position pos:line="35" pos:column="15"/></operator> <operator pos:line="35" pos:column="16">-<pos:position pos:line="35" pos:column="17"/></operator><literal type="number" pos:line="35" pos:column="17">1<pos:position pos:line="35" pos:column="18"/></literal></expr>;<pos:position pos:line="35" pos:column="19"/></expr_stmt>
  }<pos:position pos:line="36" pos:column="4"/></block></else></if>

<cpp:if pos:line="38" pos:column="1">#<cpp:directive pos:line="38" pos:column="2">if<pos:position pos:line="38" pos:column="4"/></cpp:directive> <expr><call><name pos:line="38" pos:column="5">defined<pos:position pos:line="38" pos:column="12"/></name><argument_list pos:line="38" pos:column="12">(<argument><expr><name pos:line="38" pos:column="13">WIN32<pos:position pos:line="38" pos:column="18"/></name></expr></argument>)<pos:position pos:line="38" pos:column="19"/></argument_list></call> <operator pos:line="38" pos:column="20">||<pos:position pos:line="38" pos:column="22"/></operator> <call><name pos:line="38" pos:column="23">defined<pos:position pos:line="38" pos:column="30"/></name><argument_list pos:line="38" pos:column="30">(<argument><expr><name pos:line="38" pos:column="31">MSDOS<pos:position pos:line="38" pos:column="36"/></name></expr></argument>)<pos:position pos:line="38" pos:column="37"/></argument_list></call> <operator pos:line="38" pos:column="38">||<pos:position pos:line="38" pos:column="40"/></operator> <call><name pos:line="38" pos:column="41">defined<pos:position pos:line="38" pos:column="48"/></name><argument_list pos:line="38" pos:column="48">(<argument><expr><name pos:line="38" pos:column="49">__EMX__<pos:position pos:line="38" pos:column="56"/></name></expr></argument>)<pos:position pos:line="38" pos:column="57"/></argument_list></call></expr></cpp:if>
  <comment type="block" pos:line="39" pos:column="3">/* If the first character is a slash, and there's
     something that looks like a drive at the beginning of
     the path, skip the slash.  If we remove the initial
     slash in all cases, paths without drive letters end up
     relative to the current directory which isn't how
     browsers work.

     Some browsers accept | instead of : as the drive letter
     separator, so we do too.

     On other platforms, we need the slash to indicate an
     absolute pathname.  On Windows, absolute paths start
     with a drive letter.
  */</comment>
  <expr_stmt><expr><name pos:line="53" pos:column="3">actual_path<pos:position pos:line="53" pos:column="14"/></name> <operator pos:line="53" pos:column="15">=<pos:position pos:line="53" pos:column="16"/></operator> <name pos:line="53" pos:column="17">real_path<pos:position pos:line="53" pos:column="26"/></name></expr>;<pos:position pos:line="53" pos:column="27"/></expr_stmt>
  <if pos:line="54" pos:column="3">if<condition pos:line="54" pos:column="5">(<expr><operator pos:line="54" pos:column="6">(<pos:position pos:line="54" pos:column="7"/></operator><name><name pos:line="54" pos:column="7">actual_path<pos:position pos:line="54" pos:column="18"/></name><index pos:line="54" pos:column="18">[<expr><literal type="number" pos:line="54" pos:column="19">0<pos:position pos:line="54" pos:column="20"/></literal></expr>]<pos:position pos:line="54" pos:column="21"/></index></name> <operator pos:line="54" pos:column="22">==<pos:position pos:line="54" pos:column="24"/></operator> <literal type="char" pos:line="54" pos:column="25">'/'<pos:position pos:line="54" pos:column="28"/></literal><operator pos:line="54" pos:column="28">)<pos:position pos:line="54" pos:column="29"/></operator> <operator pos:line="54" pos:column="30">&amp;&amp;<pos:position pos:line="54" pos:column="40"/></operator>
      <name><name pos:line="55" pos:column="7">actual_path<pos:position pos:line="55" pos:column="18"/></name><index pos:line="55" pos:column="18">[<expr><literal type="number" pos:line="55" pos:column="19">1<pos:position pos:line="55" pos:column="20"/></literal></expr>]<pos:position pos:line="55" pos:column="21"/></index></name> <operator pos:line="55" pos:column="22">&amp;&amp;<pos:position pos:line="55" pos:column="32"/></operator>
      <operator pos:line="56" pos:column="7">(<pos:position pos:line="56" pos:column="8"/></operator><name><name pos:line="56" pos:column="8">actual_path<pos:position pos:line="56" pos:column="19"/></name><index pos:line="56" pos:column="19">[<expr><literal type="number" pos:line="56" pos:column="20">2<pos:position pos:line="56" pos:column="21"/></literal></expr>]<pos:position pos:line="56" pos:column="22"/></index></name> <operator pos:line="56" pos:column="23">==<pos:position pos:line="56" pos:column="25"/></operator> <literal type="char" pos:line="56" pos:column="26">':'<pos:position pos:line="56" pos:column="29"/></literal> <operator pos:line="56" pos:column="30">||<pos:position pos:line="56" pos:column="32"/></operator> <name><name pos:line="56" pos:column="33">actual_path<pos:position pos:line="56" pos:column="44"/></name><index pos:line="56" pos:column="44">[<expr><literal type="number" pos:line="56" pos:column="45">2<pos:position pos:line="56" pos:column="46"/></literal></expr>]<pos:position pos:line="56" pos:column="47"/></index></name> <operator pos:line="56" pos:column="48">==<pos:position pos:line="56" pos:column="50"/></operator> <literal type="char" pos:line="56" pos:column="51">'|'<pos:position pos:line="56" pos:column="54"/></literal><operator pos:line="56" pos:column="54">)<pos:position pos:line="56" pos:column="55"/></operator></expr>)<pos:position pos:line="56" pos:column="56"/></condition><then pos:line="56" pos:column="56">
  <block pos:line="57" pos:column="3">{
    <expr_stmt><expr><name><name pos:line="58" pos:column="5">actual_path<pos:position pos:line="58" pos:column="16"/></name><index pos:line="58" pos:column="16">[<expr><literal type="number" pos:line="58" pos:column="17">2<pos:position pos:line="58" pos:column="18"/></literal></expr>]<pos:position pos:line="58" pos:column="19"/></index></name> <operator pos:line="58" pos:column="20">=<pos:position pos:line="58" pos:column="21"/></operator> <literal type="char" pos:line="58" pos:column="22">':'<pos:position pos:line="58" pos:column="25"/></literal></expr>;<pos:position pos:line="58" pos:column="26"/></expr_stmt>
    <expr_stmt><expr><name pos:line="59" pos:column="5">actual_path<pos:position pos:line="59" pos:column="16"/></name><operator pos:line="59" pos:column="16">++<pos:position pos:line="59" pos:column="18"/></operator></expr>;<pos:position pos:line="59" pos:column="19"/></expr_stmt>
  }<pos:position pos:line="60" pos:column="4"/></block></then></if>

  <comment type="block" pos:line="62" pos:column="3">/* change path separators from '/' to '\\' for DOS, Windows and OS/2 */</comment>
  <for pos:line="63" pos:column="3">for <control pos:line="63" pos:column="7">(<init><expr><name pos:line="63" pos:column="8">i<pos:position pos:line="63" pos:column="9"/></name><operator pos:line="63" pos:column="9">=<pos:position pos:line="63" pos:column="10"/></operator><literal type="number" pos:line="63" pos:column="10">0<pos:position pos:line="63" pos:column="11"/></literal></expr>;<pos:position pos:line="63" pos:column="12"/></init> <condition><expr><name><name pos:line="63" pos:column="13">actual_path<pos:position pos:line="63" pos:column="24"/></name><index pos:line="63" pos:column="24">[<expr><name pos:line="63" pos:column="25">i<pos:position pos:line="63" pos:column="26"/></name></expr>]<pos:position pos:line="63" pos:column="27"/></index></name> <operator pos:line="63" pos:column="28">!=<pos:position pos:line="63" pos:column="30"/></operator> <literal type="char" pos:line="63" pos:column="31">'\0'<pos:position pos:line="63" pos:column="35"/></literal></expr>;<pos:position pos:line="63" pos:column="36"/></condition> <incr><expr><operator pos:line="63" pos:column="37">++<pos:position pos:line="63" pos:column="39"/></operator><name pos:line="63" pos:column="39">i<pos:position pos:line="63" pos:column="40"/></name></expr></incr>)<pos:position pos:line="63" pos:column="41"/></control>
    <block type="pseudo"><if pos:line="64" pos:column="5">if<condition pos:line="64" pos:column="7">(<expr><name><name pos:line="64" pos:column="8">actual_path<pos:position pos:line="64" pos:column="19"/></name><index pos:line="64" pos:column="19">[<expr><name pos:line="64" pos:column="20">i<pos:position pos:line="64" pos:column="21"/></name></expr>]<pos:position pos:line="64" pos:column="22"/></index></name> <operator pos:line="64" pos:column="23">==<pos:position pos:line="64" pos:column="25"/></operator> <literal type="char" pos:line="64" pos:column="26">'/'<pos:position pos:line="64" pos:column="29"/></literal></expr>)<pos:position pos:line="64" pos:column="30"/></condition><then pos:line="64" pos:column="30">
      <block type="pseudo"><expr_stmt><expr><name><name pos:line="65" pos:column="7">actual_path<pos:position pos:line="65" pos:column="18"/></name><index pos:line="65" pos:column="18">[<expr><name pos:line="65" pos:column="19">i<pos:position pos:line="65" pos:column="20"/></name></expr>]<pos:position pos:line="65" pos:column="21"/></index></name> <operator pos:line="65" pos:column="22">=<pos:position pos:line="65" pos:column="23"/></operator> <literal type="char" pos:line="65" pos:column="24">'\\'<pos:position pos:line="65" pos:column="28"/></literal></expr>;<pos:position pos:line="65" pos:column="29"/></expr_stmt></block></then></if></block></for>

  <expr_stmt><expr><name pos:line="67" pos:column="3">fd<pos:position pos:line="67" pos:column="5"/></name> <operator pos:line="67" pos:column="6">=<pos:position pos:line="67" pos:column="7"/></operator> <call><name pos:line="67" pos:column="8">open<pos:position pos:line="67" pos:column="12"/></name><argument_list pos:line="67" pos:column="12">(<argument><expr><name pos:line="67" pos:column="13">actual_path<pos:position pos:line="67" pos:column="24"/></name></expr></argument>, <argument><expr><name pos:line="67" pos:column="26">O_RDONLY<pos:position pos:line="67" pos:column="34"/></name> <operator pos:line="67" pos:column="35">|<pos:position pos:line="67" pos:column="36"/></operator> <name pos:line="67" pos:column="37">O_BINARY<pos:position pos:line="67" pos:column="45"/></name></expr></argument>)<pos:position pos:line="67" pos:column="46"/></argument_list></call></expr>;<pos:position pos:line="67" pos:column="47"/></expr_stmt>  <comment type="block" pos:line="67" pos:column="49">/* no CR/LF translation! */</comment>
  <expr_stmt><expr><name><name pos:line="68" pos:column="3">file<pos:position pos:line="68" pos:column="7"/></name><operator pos:line="68" pos:column="7">-&gt;<pos:position pos:line="68" pos:column="12"/></operator><name pos:line="68" pos:column="9">path<pos:position pos:line="68" pos:column="13"/></name></name> <operator pos:line="68" pos:column="14">=<pos:position pos:line="68" pos:column="15"/></operator> <name pos:line="68" pos:column="16">actual_path<pos:position pos:line="68" pos:column="27"/></name></expr>;<pos:position pos:line="68" pos:column="28"/></expr_stmt>
<cpp:else pos:line="69" pos:column="1">#<cpp:directive pos:line="69" pos:column="2">else<pos:position pos:line="69" pos:column="6"/></cpp:directive></cpp:else>
  <expr_stmt><expr><name pos:line="70" pos:column="3">fd<pos:position pos:line="70" pos:column="5"/></name> <operator pos:line="70" pos:column="6">=<pos:position pos:line="70" pos:column="7"/></operator> <call><name pos:line="70" pos:column="8">open<pos:position pos:line="70" pos:column="12"/></name><argument_list pos:line="70" pos:column="12">(<argument><expr><name pos:line="70" pos:column="13">real_path<pos:position pos:line="70" pos:column="22"/></name></expr></argument>, <argument><expr><name pos:line="70" pos:column="24">O_RDONLY<pos:position pos:line="70" pos:column="32"/></name></expr></argument>)<pos:position pos:line="70" pos:column="33"/></argument_list></call></expr>;<pos:position pos:line="70" pos:column="34"/></expr_stmt>
  <expr_stmt><expr><name><name pos:line="71" pos:column="3">file<pos:position pos:line="71" pos:column="7"/></name><operator pos:line="71" pos:column="7">-&gt;<pos:position pos:line="71" pos:column="12"/></operator><name pos:line="71" pos:column="9">path<pos:position pos:line="71" pos:column="13"/></name></name> <operator pos:line="71" pos:column="14">=<pos:position pos:line="71" pos:column="15"/></operator> <name pos:line="71" pos:column="16">real_path<pos:position pos:line="71" pos:column="25"/></name></expr>;<pos:position pos:line="71" pos:column="26"/></expr_stmt>
<cpp:endif pos:line="72" pos:column="1">#<cpp:directive pos:line="72" pos:column="2">endif<pos:position pos:line="72" pos:column="7"/></cpp:directive></cpp:endif>
  <expr_stmt><expr><name><name pos:line="73" pos:column="3">file<pos:position pos:line="73" pos:column="7"/></name><operator pos:line="73" pos:column="7">-&gt;<pos:position pos:line="73" pos:column="12"/></operator><name pos:line="73" pos:column="9">freepath<pos:position pos:line="73" pos:column="17"/></name></name> <operator pos:line="73" pos:column="18">=<pos:position pos:line="73" pos:column="19"/></operator> <name pos:line="73" pos:column="20">real_path<pos:position pos:line="73" pos:column="29"/></name></expr>;<pos:position pos:line="73" pos:column="30"/></expr_stmt> <comment type="block" pos:line="73" pos:column="31">/* free this when done */</comment>

  <expr_stmt><expr><name><name pos:line="75" pos:column="3">file<pos:position pos:line="75" pos:column="7"/></name><operator pos:line="75" pos:column="7">-&gt;<pos:position pos:line="75" pos:column="12"/></operator><name pos:line="75" pos:column="9">fd<pos:position pos:line="75" pos:column="11"/></name></name> <operator pos:line="75" pos:column="12">=<pos:position pos:line="75" pos:column="13"/></operator> <name pos:line="75" pos:column="14">fd<pos:position pos:line="75" pos:column="16"/></name></expr>;<pos:position pos:line="75" pos:column="17"/></expr_stmt>
  <if pos:line="76" pos:column="3">if<condition pos:line="76" pos:column="5">(<expr><operator pos:line="76" pos:column="6">!<pos:position pos:line="76" pos:column="7"/></operator><name><name pos:line="76" pos:column="7">data<pos:position pos:line="76" pos:column="11"/></name><operator pos:line="76" pos:column="11">-&gt;<pos:position pos:line="76" pos:column="16"/></operator><name pos:line="76" pos:column="13">set<pos:position pos:line="76" pos:column="16"/></name><operator pos:line="76" pos:column="16">.<pos:position pos:line="76" pos:column="17"/></operator><name pos:line="76" pos:column="17">upload<pos:position pos:line="76" pos:column="23"/></name></name> <operator pos:line="76" pos:column="24">&amp;&amp;<pos:position pos:line="76" pos:column="34"/></operator> <operator pos:line="76" pos:column="27">(<pos:position pos:line="76" pos:column="28"/></operator><name pos:line="76" pos:column="28">fd<pos:position pos:line="76" pos:column="30"/></name> <operator pos:line="76" pos:column="31">==<pos:position pos:line="76" pos:column="33"/></operator> <operator pos:line="76" pos:column="34">-<pos:position pos:line="76" pos:column="35"/></operator><literal type="number" pos:line="76" pos:column="35">1<pos:position pos:line="76" pos:column="36"/></literal><operator pos:line="76" pos:column="36">)<pos:position pos:line="76" pos:column="37"/></operator></expr>)<pos:position pos:line="76" pos:column="38"/></condition><then pos:line="76" pos:column="38"> <block pos:line="76" pos:column="39">{
    <expr_stmt><expr><call><name pos:line="77" pos:column="5">failf<pos:position pos:line="77" pos:column="10"/></name><argument_list pos:line="77" pos:column="10">(<argument><expr><name pos:line="77" pos:column="11">data<pos:position pos:line="77" pos:column="15"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="77" pos:column="17">"Couldn't open file %s"<pos:position pos:line="77" pos:column="40"/></literal></expr></argument>, <argument><expr><name><name pos:line="77" pos:column="42">data<pos:position pos:line="77" pos:column="46"/></name><operator pos:line="77" pos:column="46">-&gt;<pos:position pos:line="77" pos:column="51"/></operator><name pos:line="77" pos:column="48">state<pos:position pos:line="77" pos:column="53"/></name><operator pos:line="77" pos:column="53">.<pos:position pos:line="77" pos:column="54"/></operator><name pos:line="77" pos:column="54">path<pos:position pos:line="77" pos:column="58"/></name></name></expr></argument>)<pos:position pos:line="77" pos:column="59"/></argument_list></call></expr>;<pos:position pos:line="77" pos:column="60"/></expr_stmt>
    <expr_stmt><expr><call><name pos:line="78" pos:column="5">file_done<pos:position pos:line="78" pos:column="14"/></name><argument_list pos:line="78" pos:column="14">(<argument><expr><name pos:line="78" pos:column="15">conn<pos:position pos:line="78" pos:column="19"/></name></expr></argument>, <argument><expr><name pos:line="78" pos:column="21">CURLE_FILE_COULDNT_READ_FILE<pos:position pos:line="78" pos:column="49"/></name></expr></argument>, <argument><expr><name pos:line="78" pos:column="51">FALSE<pos:position pos:line="78" pos:column="56"/></name></expr></argument>)<pos:position pos:line="78" pos:column="57"/></argument_list></call></expr>;<pos:position pos:line="78" pos:column="58"/></expr_stmt>
    <return pos:line="79" pos:column="5">return <expr><name pos:line="79" pos:column="12">CURLE_FILE_COULDNT_READ_FILE<pos:position pos:line="79" pos:column="40"/></name></expr>;<pos:position pos:line="79" pos:column="41"/></return>
  }<pos:position pos:line="80" pos:column="4"/></block></then></if>
  <expr_stmt><expr><operator pos:line="81" pos:column="3">*<pos:position pos:line="81" pos:column="4"/></operator><name pos:line="81" pos:column="4">done<pos:position pos:line="81" pos:column="8"/></name> <operator pos:line="81" pos:column="9">=<pos:position pos:line="81" pos:column="10"/></operator> <name pos:line="81" pos:column="11">TRUE<pos:position pos:line="81" pos:column="15"/></name></expr>;<pos:position pos:line="81" pos:column="16"/></expr_stmt>

  <return pos:line="83" pos:column="3">return <expr><name pos:line="83" pos:column="10">CURLE_OK<pos:position pos:line="83" pos:column="18"/></name></expr>;<pos:position pos:line="83" pos:column="19"/></return>
}<pos:position pos:line="84" pos:column="2"/></block></function></unit>
