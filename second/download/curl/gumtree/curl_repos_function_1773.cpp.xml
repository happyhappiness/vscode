<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<unit xmlns="http://www.srcML.org/srcML/src" xmlns:cpp="http://www.srcML.org/srcML/cpp" xmlns:pos="http://www.srcML.org/srcML/position" revision="0.9.5" language="C++" filename="usr/info/code/cpp/LogMonitor/LogMonitor/second/download/curl/gumtree/curl_repos_function_1773.cpp" pos:tabs="8"><function><specifier pos:line="1" pos:column="1">static<pos:position pos:line="1" pos:column="7"/></specifier> <type><name pos:line="1" pos:column="8">CURLcode<pos:position pos:line="1" pos:column="16"/></name></type> <name pos:line="1" pos:column="17">ftp_state_retr<pos:position pos:line="1" pos:column="31"/></name><parameter_list pos:line="1" pos:column="31">(<parameter><decl><type><name><name pos:line="1" pos:column="32">struct<pos:position pos:line="1" pos:column="38"/></name> <name pos:line="1" pos:column="39">connectdata<pos:position pos:line="1" pos:column="50"/></name></name> <modifier pos:line="1" pos:column="51">*<pos:position pos:line="1" pos:column="52"/></modifier></type><name pos:line="1" pos:column="52">conn<pos:position pos:line="1" pos:column="56"/></name></decl></parameter>,
                                         <parameter><decl><type><name pos:line="2" pos:column="42">curl_off_t<pos:position pos:line="2" pos:column="52"/></name></type> <name pos:line="2" pos:column="53">filesize<pos:position pos:line="2" pos:column="61"/></name></decl></parameter>)<pos:position pos:line="2" pos:column="62"/></parameter_list>
<block pos:line="3" pos:column="1">{
  <decl_stmt><decl><type><name pos:line="4" pos:column="3">CURLcode<pos:position pos:line="4" pos:column="11"/></name></type> <name pos:line="4" pos:column="12">result<pos:position pos:line="4" pos:column="18"/></name> <init pos:line="4" pos:column="19">= <expr><name pos:line="4" pos:column="21">CURLE_OK<pos:position pos:line="4" pos:column="29"/></name></expr></init></decl>;<pos:position pos:line="4" pos:column="30"/></decl_stmt>
  <decl_stmt><decl><type><name><name pos:line="5" pos:column="3">struct<pos:position pos:line="5" pos:column="9"/></name> <name pos:line="5" pos:column="10">SessionHandle<pos:position pos:line="5" pos:column="23"/></name></name> <modifier pos:line="5" pos:column="24">*<pos:position pos:line="5" pos:column="25"/></modifier></type><name pos:line="5" pos:column="25">data<pos:position pos:line="5" pos:column="29"/></name><init pos:line="5" pos:column="29">=<expr><name><name pos:line="5" pos:column="30">conn<pos:position pos:line="5" pos:column="34"/></name><operator pos:line="5" pos:column="34">-&gt;<pos:position pos:line="5" pos:column="39"/></operator><name pos:line="5" pos:column="36">data<pos:position pos:line="5" pos:column="40"/></name></name></expr></init></decl>;<pos:position pos:line="5" pos:column="41"/></decl_stmt>
  <decl_stmt><decl><type><name><name pos:line="6" pos:column="3">struct<pos:position pos:line="6" pos:column="9"/></name> <name pos:line="6" pos:column="10">FTP<pos:position pos:line="6" pos:column="13"/></name></name> <modifier pos:line="6" pos:column="14">*<pos:position pos:line="6" pos:column="15"/></modifier></type><name pos:line="6" pos:column="15">ftp<pos:position pos:line="6" pos:column="18"/></name> <init pos:line="6" pos:column="19">= <expr><name><name pos:line="6" pos:column="21">data<pos:position pos:line="6" pos:column="25"/></name><operator pos:line="6" pos:column="25">-&gt;<pos:position pos:line="6" pos:column="30"/></operator><name pos:line="6" pos:column="27">req<pos:position pos:line="6" pos:column="30"/></name><operator pos:line="6" pos:column="30">.<pos:position pos:line="6" pos:column="31"/></operator><name pos:line="6" pos:column="31">protop<pos:position pos:line="6" pos:column="37"/></name></name></expr></init></decl>;<pos:position pos:line="6" pos:column="38"/></decl_stmt>
  <decl_stmt><decl><type><name><name pos:line="7" pos:column="3">struct<pos:position pos:line="7" pos:column="9"/></name> <name pos:line="7" pos:column="10">ftp_conn<pos:position pos:line="7" pos:column="18"/></name></name> <modifier pos:line="7" pos:column="19">*<pos:position pos:line="7" pos:column="20"/></modifier></type><name pos:line="7" pos:column="20">ftpc<pos:position pos:line="7" pos:column="24"/></name> <init pos:line="7" pos:column="25">= <expr><operator pos:line="7" pos:column="27">&amp;<pos:position pos:line="7" pos:column="32"/></operator><name><name pos:line="7" pos:column="28">conn<pos:position pos:line="7" pos:column="32"/></name><operator pos:line="7" pos:column="32">-&gt;<pos:position pos:line="7" pos:column="37"/></operator><name pos:line="7" pos:column="34">proto<pos:position pos:line="7" pos:column="39"/></name><operator pos:line="7" pos:column="39">.<pos:position pos:line="7" pos:column="40"/></operator><name pos:line="7" pos:column="40">ftpc<pos:position pos:line="7" pos:column="44"/></name></name></expr></init></decl>;<pos:position pos:line="7" pos:column="45"/></decl_stmt>

  <if pos:line="9" pos:column="3">if<condition pos:line="9" pos:column="5">(<expr><name><name pos:line="9" pos:column="6">data<pos:position pos:line="9" pos:column="10"/></name><operator pos:line="9" pos:column="10">-&gt;<pos:position pos:line="9" pos:column="15"/></operator><name pos:line="9" pos:column="12">set<pos:position pos:line="9" pos:column="15"/></name><operator pos:line="9" pos:column="15">.<pos:position pos:line="9" pos:column="16"/></operator><name pos:line="9" pos:column="16">max_filesize<pos:position pos:line="9" pos:column="28"/></name></name> <operator pos:line="9" pos:column="29">&amp;&amp;<pos:position pos:line="9" pos:column="39"/></operator> <operator pos:line="9" pos:column="32">(<pos:position pos:line="9" pos:column="33"/></operator><name pos:line="9" pos:column="33">filesize<pos:position pos:line="9" pos:column="41"/></name> <operator pos:line="9" pos:column="42">&gt;<pos:position pos:line="9" pos:column="46"/></operator> <name><name pos:line="9" pos:column="44">data<pos:position pos:line="9" pos:column="48"/></name><operator pos:line="9" pos:column="48">-&gt;<pos:position pos:line="9" pos:column="53"/></operator><name pos:line="9" pos:column="50">set<pos:position pos:line="9" pos:column="53"/></name><operator pos:line="9" pos:column="53">.<pos:position pos:line="9" pos:column="54"/></operator><name pos:line="9" pos:column="54">max_filesize<pos:position pos:line="9" pos:column="66"/></name></name><operator pos:line="9" pos:column="66">)<pos:position pos:line="9" pos:column="67"/></operator></expr>)<pos:position pos:line="9" pos:column="68"/></condition><then pos:line="9" pos:column="68"> <block pos:line="9" pos:column="69">{
    <expr_stmt><expr><call><name pos:line="10" pos:column="5">failf<pos:position pos:line="10" pos:column="10"/></name><argument_list pos:line="10" pos:column="10">(<argument><expr><name pos:line="10" pos:column="11">data<pos:position pos:line="10" pos:column="15"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="10" pos:column="17">"Maximum file size exceeded"<pos:position pos:line="10" pos:column="45"/></literal></expr></argument>)<pos:position pos:line="10" pos:column="46"/></argument_list></call></expr>;<pos:position pos:line="10" pos:column="47"/></expr_stmt>
    <return pos:line="11" pos:column="5">return <expr><name pos:line="11" pos:column="12">CURLE_FILESIZE_EXCEEDED<pos:position pos:line="11" pos:column="35"/></name></expr>;<pos:position pos:line="11" pos:column="36"/></return>
  }<pos:position pos:line="12" pos:column="4"/></block></then></if>
  <expr_stmt><expr><name><name pos:line="13" pos:column="3">ftp<pos:position pos:line="13" pos:column="6"/></name><operator pos:line="13" pos:column="6">-&gt;<pos:position pos:line="13" pos:column="11"/></operator><name pos:line="13" pos:column="8">downloadsize<pos:position pos:line="13" pos:column="20"/></name></name> <operator pos:line="13" pos:column="21">=<pos:position pos:line="13" pos:column="22"/></operator> <name pos:line="13" pos:column="23">filesize<pos:position pos:line="13" pos:column="31"/></name></expr>;<pos:position pos:line="13" pos:column="32"/></expr_stmt>

  <if pos:line="15" pos:column="3">if<condition pos:line="15" pos:column="5">(<expr><name><name pos:line="15" pos:column="6">data<pos:position pos:line="15" pos:column="10"/></name><operator pos:line="15" pos:column="10">-&gt;<pos:position pos:line="15" pos:column="15"/></operator><name pos:line="15" pos:column="12">state<pos:position pos:line="15" pos:column="17"/></name><operator pos:line="15" pos:column="17">.<pos:position pos:line="15" pos:column="18"/></operator><name pos:line="15" pos:column="18">resume_from<pos:position pos:line="15" pos:column="29"/></name></name></expr>)<pos:position pos:line="15" pos:column="30"/></condition><then pos:line="15" pos:column="30"> <block pos:line="15" pos:column="31">{
    <comment type="block" pos:line="16" pos:column="5">/* We always (attempt to) get the size of downloads, so it is done before
       this even when not doing resumes. */</comment>
    <if pos:line="18" pos:column="5">if<condition pos:line="18" pos:column="7">(<expr><name pos:line="18" pos:column="8">filesize<pos:position pos:line="18" pos:column="16"/></name> <operator pos:line="18" pos:column="17">==<pos:position pos:line="18" pos:column="19"/></operator> <operator pos:line="18" pos:column="20">-<pos:position pos:line="18" pos:column="21"/></operator><literal type="number" pos:line="18" pos:column="21">1<pos:position pos:line="18" pos:column="22"/></literal></expr>)<pos:position pos:line="18" pos:column="23"/></condition><then pos:line="18" pos:column="23"> <block pos:line="18" pos:column="24">{
      <expr_stmt><expr><call><name pos:line="19" pos:column="7">infof<pos:position pos:line="19" pos:column="12"/></name><argument_list pos:line="19" pos:column="12">(<argument><expr><name pos:line="19" pos:column="13">data<pos:position pos:line="19" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="19" pos:column="19">"ftp server doesn't support SIZE\n"<pos:position pos:line="19" pos:column="54"/></literal></expr></argument>)<pos:position pos:line="19" pos:column="55"/></argument_list></call></expr>;<pos:position pos:line="19" pos:column="56"/></expr_stmt>
      <comment type="block" pos:line="20" pos:column="7">/* We couldn't get the size and therefore we can't know if there really
         is a part of the file left to get, although the server will just
         close the connection when we start the connection so it won't cause
         us any harm, just not make us exit as nicely. */</comment>
    }<pos:position pos:line="24" pos:column="6"/></block></then>
    <else pos:line="25" pos:column="5">else <block pos:line="25" pos:column="10">{
      <comment type="block" pos:line="26" pos:column="7">/* We got a file size report, so we check that there actually is a
         part of the file left to get, or else we go home.  */</comment>
      <if pos:line="28" pos:column="7">if<condition pos:line="28" pos:column="9">(<expr><name><name pos:line="28" pos:column="10">data<pos:position pos:line="28" pos:column="14"/></name><operator pos:line="28" pos:column="14">-&gt;<pos:position pos:line="28" pos:column="19"/></operator><name pos:line="28" pos:column="16">state<pos:position pos:line="28" pos:column="21"/></name><operator pos:line="28" pos:column="21">.<pos:position pos:line="28" pos:column="22"/></operator><name pos:line="28" pos:column="22">resume_from<pos:position pos:line="28" pos:column="33"/></name></name><operator pos:line="28" pos:column="33">&lt;<pos:position pos:line="28" pos:column="37"/></operator> <literal type="number" pos:line="28" pos:column="35">0<pos:position pos:line="28" pos:column="36"/></literal></expr>)<pos:position pos:line="28" pos:column="37"/></condition><then pos:line="28" pos:column="37"> <block pos:line="28" pos:column="38">{
        <comment type="block" pos:line="29" pos:column="9">/* We're supposed to download the last abs(from) bytes */</comment>
        <if pos:line="30" pos:column="9">if<condition pos:line="30" pos:column="11">(<expr><name pos:line="30" pos:column="12">filesize<pos:position pos:line="30" pos:column="20"/></name> <operator pos:line="30" pos:column="21">&lt;<pos:position pos:line="30" pos:column="25"/></operator> <operator pos:line="30" pos:column="23">-<pos:position pos:line="30" pos:column="24"/></operator><name><name pos:line="30" pos:column="24">data<pos:position pos:line="30" pos:column="28"/></name><operator pos:line="30" pos:column="28">-&gt;<pos:position pos:line="30" pos:column="33"/></operator><name pos:line="30" pos:column="30">state<pos:position pos:line="30" pos:column="35"/></name><operator pos:line="30" pos:column="35">.<pos:position pos:line="30" pos:column="36"/></operator><name pos:line="30" pos:column="36">resume_from<pos:position pos:line="30" pos:column="47"/></name></name></expr>)<pos:position pos:line="30" pos:column="48"/></condition><then pos:line="30" pos:column="48"> <block pos:line="30" pos:column="49">{
          <expr_stmt><expr><call><name pos:line="31" pos:column="11">failf<pos:position pos:line="31" pos:column="16"/></name><argument_list pos:line="31" pos:column="16">(<argument><expr><name pos:line="31" pos:column="17">data<pos:position pos:line="31" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="31" pos:column="23">"Offset (%"<pos:position pos:line="31" pos:column="34"/></literal> <name pos:line="31" pos:column="35">CURL_FORMAT_CURL_OFF_T<pos:position pos:line="31" pos:column="57"/></name>
                <literal type="string" pos:line="32" pos:column="17">") was beyond file size (%"<pos:position pos:line="32" pos:column="44"/></literal> <name pos:line="32" pos:column="45">CURL_FORMAT_CURL_OFF_T<pos:position pos:line="32" pos:column="67"/></name> <literal type="string" pos:line="32" pos:column="68">")"<pos:position pos:line="32" pos:column="71"/></literal></expr></argument>,
                <argument><expr><name><name pos:line="33" pos:column="17">data<pos:position pos:line="33" pos:column="21"/></name><operator pos:line="33" pos:column="21">-&gt;<pos:position pos:line="33" pos:column="26"/></operator><name pos:line="33" pos:column="23">state<pos:position pos:line="33" pos:column="28"/></name><operator pos:line="33" pos:column="28">.<pos:position pos:line="33" pos:column="29"/></operator><name pos:line="33" pos:column="29">resume_from<pos:position pos:line="33" pos:column="40"/></name></name></expr></argument>, <argument><expr><name pos:line="33" pos:column="42">filesize<pos:position pos:line="33" pos:column="50"/></name></expr></argument>)<pos:position pos:line="33" pos:column="51"/></argument_list></call></expr>;<pos:position pos:line="33" pos:column="52"/></expr_stmt>
          <return pos:line="34" pos:column="11">return <expr><name pos:line="34" pos:column="18">CURLE_BAD_DOWNLOAD_RESUME<pos:position pos:line="34" pos:column="43"/></name></expr>;<pos:position pos:line="34" pos:column="44"/></return>
        }<pos:position pos:line="35" pos:column="10"/></block></then></if>
        <comment type="block" pos:line="36" pos:column="9">/* convert to size to download */</comment>
        <expr_stmt><expr><name><name pos:line="37" pos:column="9">ftp<pos:position pos:line="37" pos:column="12"/></name><operator pos:line="37" pos:column="12">-&gt;<pos:position pos:line="37" pos:column="17"/></operator><name pos:line="37" pos:column="14">downloadsize<pos:position pos:line="37" pos:column="26"/></name></name> <operator pos:line="37" pos:column="27">=<pos:position pos:line="37" pos:column="28"/></operator> <operator pos:line="37" pos:column="29">-<pos:position pos:line="37" pos:column="30"/></operator><name><name pos:line="37" pos:column="30">data<pos:position pos:line="37" pos:column="34"/></name><operator pos:line="37" pos:column="34">-&gt;<pos:position pos:line="37" pos:column="39"/></operator><name pos:line="37" pos:column="36">state<pos:position pos:line="37" pos:column="41"/></name><operator pos:line="37" pos:column="41">.<pos:position pos:line="37" pos:column="42"/></operator><name pos:line="37" pos:column="42">resume_from<pos:position pos:line="37" pos:column="53"/></name></name></expr>;<pos:position pos:line="37" pos:column="54"/></expr_stmt>
        <comment type="block" pos:line="38" pos:column="9">/* download from where? */</comment>
        <expr_stmt><expr><name><name pos:line="39" pos:column="9">data<pos:position pos:line="39" pos:column="13"/></name><operator pos:line="39" pos:column="13">-&gt;<pos:position pos:line="39" pos:column="18"/></operator><name pos:line="39" pos:column="15">state<pos:position pos:line="39" pos:column="20"/></name><operator pos:line="39" pos:column="20">.<pos:position pos:line="39" pos:column="21"/></operator><name pos:line="39" pos:column="21">resume_from<pos:position pos:line="39" pos:column="32"/></name></name> <operator pos:line="39" pos:column="33">=<pos:position pos:line="39" pos:column="34"/></operator> <name pos:line="39" pos:column="35">filesize<pos:position pos:line="39" pos:column="43"/></name> <operator pos:line="39" pos:column="44">-<pos:position pos:line="39" pos:column="45"/></operator> <name><name pos:line="39" pos:column="46">ftp<pos:position pos:line="39" pos:column="49"/></name><operator pos:line="39" pos:column="49">-&gt;<pos:position pos:line="39" pos:column="54"/></operator><name pos:line="39" pos:column="51">downloadsize<pos:position pos:line="39" pos:column="63"/></name></name></expr>;<pos:position pos:line="39" pos:column="64"/></expr_stmt>
      }<pos:position pos:line="40" pos:column="8"/></block></then>
      <else pos:line="41" pos:column="7">else <block pos:line="41" pos:column="12">{
        <if pos:line="42" pos:column="9">if<condition pos:line="42" pos:column="11">(<expr><name pos:line="42" pos:column="12">filesize<pos:position pos:line="42" pos:column="20"/></name> <operator pos:line="42" pos:column="21">&lt;<pos:position pos:line="42" pos:column="25"/></operator> <name><name pos:line="42" pos:column="23">data<pos:position pos:line="42" pos:column="27"/></name><operator pos:line="42" pos:column="27">-&gt;<pos:position pos:line="42" pos:column="32"/></operator><name pos:line="42" pos:column="29">state<pos:position pos:line="42" pos:column="34"/></name><operator pos:line="42" pos:column="34">.<pos:position pos:line="42" pos:column="35"/></operator><name pos:line="42" pos:column="35">resume_from<pos:position pos:line="42" pos:column="46"/></name></name></expr>)<pos:position pos:line="42" pos:column="47"/></condition><then pos:line="42" pos:column="47"> <block pos:line="42" pos:column="48">{
          <expr_stmt><expr><call><name pos:line="43" pos:column="11">failf<pos:position pos:line="43" pos:column="16"/></name><argument_list pos:line="43" pos:column="16">(<argument><expr><name pos:line="43" pos:column="17">data<pos:position pos:line="43" pos:column="21"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="43" pos:column="23">"Offset (%"<pos:position pos:line="43" pos:column="34"/></literal> <name pos:line="43" pos:column="35">CURL_FORMAT_CURL_OFF_T<pos:position pos:line="43" pos:column="57"/></name>
                <literal type="string" pos:line="44" pos:column="17">") was beyond file size (%"<pos:position pos:line="44" pos:column="44"/></literal> <name pos:line="44" pos:column="45">CURL_FORMAT_CURL_OFF_T<pos:position pos:line="44" pos:column="67"/></name> <literal type="string" pos:line="44" pos:column="68">")"<pos:position pos:line="44" pos:column="71"/></literal></expr></argument>,
                <argument><expr><name><name pos:line="45" pos:column="17">data<pos:position pos:line="45" pos:column="21"/></name><operator pos:line="45" pos:column="21">-&gt;<pos:position pos:line="45" pos:column="26"/></operator><name pos:line="45" pos:column="23">state<pos:position pos:line="45" pos:column="28"/></name><operator pos:line="45" pos:column="28">.<pos:position pos:line="45" pos:column="29"/></operator><name pos:line="45" pos:column="29">resume_from<pos:position pos:line="45" pos:column="40"/></name></name></expr></argument>, <argument><expr><name pos:line="45" pos:column="42">filesize<pos:position pos:line="45" pos:column="50"/></name></expr></argument>)<pos:position pos:line="45" pos:column="51"/></argument_list></call></expr>;<pos:position pos:line="45" pos:column="52"/></expr_stmt>
          <return pos:line="46" pos:column="11">return <expr><name pos:line="46" pos:column="18">CURLE_BAD_DOWNLOAD_RESUME<pos:position pos:line="46" pos:column="43"/></name></expr>;<pos:position pos:line="46" pos:column="44"/></return>
        }<pos:position pos:line="47" pos:column="10"/></block></then></if>
        <comment type="block" pos:line="48" pos:column="9">/* Now store the number of bytes we are expected to download */</comment>
        <expr_stmt><expr><name><name pos:line="49" pos:column="9">ftp<pos:position pos:line="49" pos:column="12"/></name><operator pos:line="49" pos:column="12">-&gt;<pos:position pos:line="49" pos:column="17"/></operator><name pos:line="49" pos:column="14">downloadsize<pos:position pos:line="49" pos:column="26"/></name></name> <operator pos:line="49" pos:column="27">=<pos:position pos:line="49" pos:column="28"/></operator> <name pos:line="49" pos:column="29">filesize<pos:position pos:line="49" pos:column="37"/></name><operator pos:line="49" pos:column="37">-<pos:position pos:line="49" pos:column="38"/></operator><name><name pos:line="49" pos:column="38">data<pos:position pos:line="49" pos:column="42"/></name><operator pos:line="49" pos:column="42">-&gt;<pos:position pos:line="49" pos:column="47"/></operator><name pos:line="49" pos:column="44">state<pos:position pos:line="49" pos:column="49"/></name><operator pos:line="49" pos:column="49">.<pos:position pos:line="49" pos:column="50"/></operator><name pos:line="49" pos:column="50">resume_from<pos:position pos:line="49" pos:column="61"/></name></name></expr>;<pos:position pos:line="49" pos:column="62"/></expr_stmt>
      }<pos:position pos:line="50" pos:column="8"/></block></else></if>
    }<pos:position pos:line="51" pos:column="6"/></block></else></if>

    <if pos:line="53" pos:column="5">if<condition pos:line="53" pos:column="7">(<expr><name><name pos:line="53" pos:column="8">ftp<pos:position pos:line="53" pos:column="11"/></name><operator pos:line="53" pos:column="11">-&gt;<pos:position pos:line="53" pos:column="16"/></operator><name pos:line="53" pos:column="13">downloadsize<pos:position pos:line="53" pos:column="25"/></name></name> <operator pos:line="53" pos:column="26">==<pos:position pos:line="53" pos:column="28"/></operator> <literal type="number" pos:line="53" pos:column="29">0<pos:position pos:line="53" pos:column="30"/></literal></expr>)<pos:position pos:line="53" pos:column="31"/></condition><then pos:line="53" pos:column="31"> <block pos:line="53" pos:column="32">{
      <comment type="block" pos:line="54" pos:column="7">/* no data to transfer */</comment>
      <expr_stmt><expr><call><name pos:line="55" pos:column="7">Curl_setup_transfer<pos:position pos:line="55" pos:column="26"/></name><argument_list pos:line="55" pos:column="26">(<argument><expr><name pos:line="55" pos:column="27">conn<pos:position pos:line="55" pos:column="31"/></name></expr></argument>, <argument><expr><operator pos:line="55" pos:column="33">-<pos:position pos:line="55" pos:column="34"/></operator><literal type="number" pos:line="55" pos:column="34">1<pos:position pos:line="55" pos:column="35"/></literal></expr></argument>, <argument><expr><operator pos:line="55" pos:column="37">-<pos:position pos:line="55" pos:column="38"/></operator><literal type="number" pos:line="55" pos:column="38">1<pos:position pos:line="55" pos:column="39"/></literal></expr></argument>, <argument><expr><name pos:line="55" pos:column="41">FALSE<pos:position pos:line="55" pos:column="46"/></name></expr></argument>, <argument><expr><name pos:line="55" pos:column="48">NULL<pos:position pos:line="55" pos:column="52"/></name></expr></argument>, <argument><expr><operator pos:line="55" pos:column="54">-<pos:position pos:line="55" pos:column="55"/></operator><literal type="number" pos:line="55" pos:column="55">1<pos:position pos:line="55" pos:column="56"/></literal></expr></argument>, <argument><expr><name pos:line="55" pos:column="58">NULL<pos:position pos:line="55" pos:column="62"/></name></expr></argument>)<pos:position pos:line="55" pos:column="63"/></argument_list></call></expr>;<pos:position pos:line="55" pos:column="64"/></expr_stmt>
      <expr_stmt><expr><call><name pos:line="56" pos:column="7">infof<pos:position pos:line="56" pos:column="12"/></name><argument_list pos:line="56" pos:column="12">(<argument><expr><name pos:line="56" pos:column="13">data<pos:position pos:line="56" pos:column="17"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="56" pos:column="19">"File already completely downloaded\n"<pos:position pos:line="56" pos:column="57"/></literal></expr></argument>)<pos:position pos:line="56" pos:column="58"/></argument_list></call></expr>;<pos:position pos:line="56" pos:column="59"/></expr_stmt>

      <comment type="block" pos:line="58" pos:column="7">/* Set -&gt;transfer so that we won't get any error in ftp_done()
       * because we didn't transfer the any file */</comment>
      <expr_stmt><expr><name><name pos:line="60" pos:column="7">ftp<pos:position pos:line="60" pos:column="10"/></name><operator pos:line="60" pos:column="10">-&gt;<pos:position pos:line="60" pos:column="15"/></operator><name pos:line="60" pos:column="12">transfer<pos:position pos:line="60" pos:column="20"/></name></name> <operator pos:line="60" pos:column="21">=<pos:position pos:line="60" pos:column="22"/></operator> <name pos:line="60" pos:column="23">FTPTRANSFER_NONE<pos:position pos:line="60" pos:column="39"/></name></expr>;<pos:position pos:line="60" pos:column="40"/></expr_stmt>
      <expr_stmt><expr><call><name pos:line="61" pos:column="7">state<pos:position pos:line="61" pos:column="12"/></name><argument_list pos:line="61" pos:column="12">(<argument><expr><name pos:line="61" pos:column="13">conn<pos:position pos:line="61" pos:column="17"/></name></expr></argument>, <argument><expr><name pos:line="61" pos:column="19">FTP_STOP<pos:position pos:line="61" pos:column="27"/></name></expr></argument>)<pos:position pos:line="61" pos:column="28"/></argument_list></call></expr>;<pos:position pos:line="61" pos:column="29"/></expr_stmt>
      <return pos:line="62" pos:column="7">return <expr><name pos:line="62" pos:column="14">CURLE_OK<pos:position pos:line="62" pos:column="22"/></name></expr>;<pos:position pos:line="62" pos:column="23"/></return>
    }<pos:position pos:line="63" pos:column="6"/></block></then></if>

    <comment type="block" pos:line="65" pos:column="5">/* Set resume file transfer offset */</comment>
    <expr_stmt><expr><call><name pos:line="66" pos:column="5">infof<pos:position pos:line="66" pos:column="10"/></name><argument_list pos:line="66" pos:column="10">(<argument><expr><name pos:line="66" pos:column="11">data<pos:position pos:line="66" pos:column="15"/></name></expr></argument>, <argument><expr><literal type="string" pos:line="66" pos:column="17">"Instructs server to resume from offset %"<pos:position pos:line="66" pos:column="59"/></literal>
          <name pos:line="67" pos:column="11">CURL_FORMAT_CURL_OFF_T<pos:position pos:line="67" pos:column="33"/></name> <literal type="string" pos:line="67" pos:column="34">"\n"<pos:position pos:line="67" pos:column="38"/></literal></expr></argument>, <argument><expr><name><name pos:line="67" pos:column="40">data<pos:position pos:line="67" pos:column="44"/></name><operator pos:line="67" pos:column="44">-&gt;<pos:position pos:line="67" pos:column="49"/></operator><name pos:line="67" pos:column="46">state<pos:position pos:line="67" pos:column="51"/></name><operator pos:line="67" pos:column="51">.<pos:position pos:line="67" pos:column="52"/></operator><name pos:line="67" pos:column="52">resume_from<pos:position pos:line="67" pos:column="63"/></name></name></expr></argument>)<pos:position pos:line="67" pos:column="64"/></argument_list></call></expr>;<pos:position pos:line="67" pos:column="65"/></expr_stmt>

    <expr_stmt><expr><call><name pos:line="69" pos:column="5">PPSENDF<pos:position pos:line="69" pos:column="12"/></name><argument_list pos:line="69" pos:column="12">(<argument><expr><operator pos:line="69" pos:column="13">&amp;<pos:position pos:line="69" pos:column="18"/></operator><name><name pos:line="69" pos:column="14">ftpc<pos:position pos:line="69" pos:column="18"/></name><operator pos:line="69" pos:column="18">-&gt;<pos:position pos:line="69" pos:column="23"/></operator><name pos:line="69" pos:column="20">pp<pos:position pos:line="69" pos:column="22"/></name></name></expr></argument>, <argument><expr><literal type="string" pos:line="69" pos:column="24">"REST %"<pos:position pos:line="69" pos:column="32"/></literal> <name pos:line="69" pos:column="33">CURL_FORMAT_CURL_OFF_T<pos:position pos:line="69" pos:column="55"/></name></expr></argument>,
            <argument><expr><name><name pos:line="70" pos:column="13">data<pos:position pos:line="70" pos:column="17"/></name><operator pos:line="70" pos:column="17">-&gt;<pos:position pos:line="70" pos:column="22"/></operator><name pos:line="70" pos:column="19">state<pos:position pos:line="70" pos:column="24"/></name><operator pos:line="70" pos:column="24">.<pos:position pos:line="70" pos:column="25"/></operator><name pos:line="70" pos:column="25">resume_from<pos:position pos:line="70" pos:column="36"/></name></name></expr></argument>)<pos:position pos:line="70" pos:column="37"/></argument_list></call></expr>;<pos:position pos:line="70" pos:column="38"/></expr_stmt>

    <expr_stmt><expr><call><name pos:line="72" pos:column="5">state<pos:position pos:line="72" pos:column="10"/></name><argument_list pos:line="72" pos:column="10">(<argument><expr><name pos:line="72" pos:column="11">conn<pos:position pos:line="72" pos:column="15"/></name></expr></argument>, <argument><expr><name pos:line="72" pos:column="17">FTP_RETR_REST<pos:position pos:line="72" pos:column="30"/></name></expr></argument>)<pos:position pos:line="72" pos:column="31"/></argument_list></call></expr>;<pos:position pos:line="72" pos:column="32"/></expr_stmt>
  }<pos:position pos:line="73" pos:column="4"/></block></then>
  <else pos:line="74" pos:column="3">else <block pos:line="74" pos:column="8">{
    <comment type="block" pos:line="75" pos:column="5">/* no resume */</comment>
    <expr_stmt><expr><call><name pos:line="76" pos:column="5">PPSENDF<pos:position pos:line="76" pos:column="12"/></name><argument_list pos:line="76" pos:column="12">(<argument><expr><operator pos:line="76" pos:column="13">&amp;<pos:position pos:line="76" pos:column="18"/></operator><name><name pos:line="76" pos:column="14">ftpc<pos:position pos:line="76" pos:column="18"/></name><operator pos:line="76" pos:column="18">-&gt;<pos:position pos:line="76" pos:column="23"/></operator><name pos:line="76" pos:column="20">pp<pos:position pos:line="76" pos:column="22"/></name></name></expr></argument>, <argument><expr><literal type="string" pos:line="76" pos:column="24">"RETR %s"<pos:position pos:line="76" pos:column="33"/></literal></expr></argument>, <argument><expr><name><name pos:line="76" pos:column="35">ftpc<pos:position pos:line="76" pos:column="39"/></name><operator pos:line="76" pos:column="39">-&gt;<pos:position pos:line="76" pos:column="44"/></operator><name pos:line="76" pos:column="41">file<pos:position pos:line="76" pos:column="45"/></name></name></expr></argument>)<pos:position pos:line="76" pos:column="46"/></argument_list></call></expr>;<pos:position pos:line="76" pos:column="47"/></expr_stmt>
    <expr_stmt><expr><call><name pos:line="77" pos:column="5">state<pos:position pos:line="77" pos:column="10"/></name><argument_list pos:line="77" pos:column="10">(<argument><expr><name pos:line="77" pos:column="11">conn<pos:position pos:line="77" pos:column="15"/></name></expr></argument>, <argument><expr><name pos:line="77" pos:column="17">FTP_RETR<pos:position pos:line="77" pos:column="25"/></name></expr></argument>)<pos:position pos:line="77" pos:column="26"/></argument_list></call></expr>;<pos:position pos:line="77" pos:column="27"/></expr_stmt>
  }<pos:position pos:line="78" pos:column="4"/></block></else></if>

  <return pos:line="80" pos:column="3">return <expr><name pos:line="80" pos:column="10">result<pos:position pos:line="80" pos:column="16"/></name></expr>;<pos:position pos:line="80" pos:column="17"/></return>
}<pos:position pos:line="81" pos:column="2"/></block></function></unit>
