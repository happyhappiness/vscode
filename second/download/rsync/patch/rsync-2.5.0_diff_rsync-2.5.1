diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/batch.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/batch.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/batch.c	2001-08-15 14:50:46.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/batch.c	2002-01-03 15:09:28.000000000 +0800
@@ -1,573 +1,593 @@
 /* -*- c-file-style: "linux" -*-
    
    Weiss 1/1999
    Batch utilities for rsync.
 
-*/ 
+*/
 
 #include "rsync.h"
 #include <time.h>
 
-char rsync_flist_file[27] = "rsync_flist.";    
-char rsync_csums_file[27] = "rsync_csums.";     
-char rsync_delta_file[27] = "rsync_delta.";    
-char rsync_argvs_file[27] = "rsync_argvs.";    
+char rsync_flist_file[27] = "rsync_flist.";
+char rsync_csums_file[27] = "rsync_csums.";
+char rsync_delta_file[27] = "rsync_delta.";
+char rsync_argvs_file[27] = "rsync_argvs.";
 
 char batch_file_ext[15];
- 
+
 int fdb;
 int fdb_delta;
-int fdb_open;   
-int fdb_close;  
+int fdb_open;
+int fdb_close;
 
 struct file_list *batch_flist;
 
 void create_batch_file_ext()
 {
-    struct tm *timeptr;
-    time_t elapsed_seconds;
-    
-    /* Save run date and time to use for batch file extensions */
-    time(&elapsed_seconds);
-    timeptr = localtime(&elapsed_seconds);
-
-    sprintf(batch_file_ext, "%4d%02d%02d%02d%02d%02d",
-             timeptr->tm_year+1900, timeptr->tm_mon+1, timeptr->tm_mday,
-             timeptr->tm_hour, timeptr->tm_min, timeptr->tm_sec);
+	struct tm *timeptr;
+	time_t elapsed_seconds;
+
+	/* Save run date and time to use for batch file extensions */
+	time(&elapsed_seconds);
+	timeptr = localtime(&elapsed_seconds);
+
+	sprintf(batch_file_ext, "%4d%02d%02d%02d%02d%02d",
+		timeptr->tm_year + 1900, timeptr->tm_mon + 1,
+		timeptr->tm_mday, timeptr->tm_hour, timeptr->tm_min,
+		timeptr->tm_sec);
 }
 
 void set_batch_file_ext(char *ext)
 {
-    strcpy(batch_file_ext, ext);  
+	strcpy(batch_file_ext, ext);
 }
 
 void write_batch_flist_file(char *buff, int bytes_to_write)
 {
 
-    if (fdb_open) {
-       /* Set up file extension */
-       strcat(rsync_flist_file, batch_file_ext); 
-
-       /* Open batch flist file for writing; create it if it doesn't exist */
-       fdb = do_open(rsync_flist_file, O_WRONLY|O_CREAT|O_TRUNC,
-                                              S_IREAD|S_IWRITE);
-       if (fdb == -1) {
-          rprintf(FERROR, "Batch file %s open error: %s\n",
-          rsync_flist_file, strerror(errno));
-          close(fdb);
-          exit_cleanup(1);
-       }
-       fdb_open = 0;
-    }
-
-    /* Write buffer to batch flist file */
-
-    if ( write(fdb, buff, bytes_to_write) == -1 ) { 
-            rprintf(FERROR, "Batch file %s write error: %s\n",
-          rsync_flist_file, strerror(errno));
-          close(fdb);
-          exit_cleanup(1);
-    }
-
-
-    if (fdb_close) {
-       close(fdb);
-    }
+	if (fdb_open) {
+		/* Set up file extension */
+		strcat(rsync_flist_file, batch_file_ext);
+
+		/* Open batch flist file for writing; create it if it doesn't exist */
+		fdb =
+		    do_open(rsync_flist_file, O_WRONLY | O_CREAT | O_TRUNC,
+			    S_IREAD | S_IWRITE);
+		if (fdb == -1) {
+			rprintf(FERROR, "Batch file %s open error: %s\n",
+				rsync_flist_file, strerror(errno));
+			close(fdb);
+			exit_cleanup(1);
+		}
+		fdb_open = 0;
+	}
+
+	/* Write buffer to batch flist file */
+
+	if (write(fdb, buff, bytes_to_write) == -1) {
+		rprintf(FERROR, "Batch file %s write error: %s\n",
+			rsync_flist_file, strerror(errno));
+		close(fdb);
+		exit_cleanup(1);
+	}
+
+
+	if (fdb_close) {
+		close(fdb);
+	}
 }
 
 void write_batch_flist_info(int flist_count, struct file_struct **fptr)
 {
-    int i;
-    int bytes_to_write;   
+	int i;
+	int bytes_to_write;
 
-    /* Write flist info to batch file */
+	/* Write flist info to batch file */
 
-    bytes_to_write = sizeof(unsigned) +
-                     sizeof(time_t) +
-                     sizeof(OFF_T) +
-                     sizeof(mode_t) +
-                     sizeof(INO_T) +
-                     (2 * sizeof(dev_t)) +
-                     sizeof(uid_t) +
-                     sizeof(gid_t);   
-
-    fdb_open = 1;
-    fdb_close = 0;
-
-    for (i=0; i<flist_count; i++) {
-       write_batch_flist_file( (char *) fptr[i], bytes_to_write);
-       write_char_bufs(fptr[i]->basename);
-       write_char_bufs(fptr[i]->dirname);
-       write_char_bufs(fptr[i]->basedir);
-       write_char_bufs(fptr[i]->link);
-       if (i==flist_count - 1) {
-          fdb_close = 1;
-       }
-       write_char_bufs(fptr[i]->sum);
-    }  
+	bytes_to_write = sizeof(unsigned) +
+	    sizeof(time_t) +
+	    sizeof(OFF_T) +
+	    sizeof(mode_t) +
+	    sizeof(INO_T) +
+	    (2 * sizeof(dev_t)) + sizeof(uid_t) + sizeof(gid_t);
+
+	fdb_open = 1;
+	fdb_close = 0;
+
+	for (i = 0; i < flist_count; i++) {
+		write_batch_flist_file((char *) fptr[i], bytes_to_write);
+		write_char_bufs(fptr[i]->basename);
+		write_char_bufs(fptr[i]->dirname);
+		write_char_bufs(fptr[i]->basedir);
+		write_char_bufs(fptr[i]->link);
+		if (i == flist_count - 1) {
+			fdb_close = 1;
+		}
+		write_char_bufs(fptr[i]->sum);
+	}
 
 }
 
 void write_char_bufs(char *buf)
 {
-   /* Write the size of the string which will follow  */ 
+	/* Write the size of the string which will follow  */
 
-   char b[4];
-   if (buf != NULL)
-      SIVAL(b,0,strlen(buf));  
-   else {
-      SIVAL(b,0,0);
-   }
-
-   write_batch_flist_file(b, sizeof(int));  
-
-   /*  Write the string if there is one */
-
-   if (buf != NULL) {
-      write_batch_flist_file(buf, strlen(buf)); 
-   }
+	char b[4];
+	if (buf != NULL)
+		SIVAL(b, 0, strlen(buf));
+	else {
+		SIVAL(b, 0, 0);
+	}
+
+	write_batch_flist_file(b, sizeof(int));
+
+	/*  Write the string if there is one */
+
+	if (buf != NULL) {
+		write_batch_flist_file(buf, strlen(buf));
+	}
 }
 
 void write_batch_argvs_file(int orig_argc, int argc, char **argv)
 {
-    int fdb;
-    int i;
-    char buff[256];
-
-    strcat(rsync_argvs_file, batch_file_ext);
-    
-
-    /* Open batch argvs file for writing; create it if it doesn't exist */
-    fdb = do_open(rsync_argvs_file, O_WRONLY|O_CREAT|O_TRUNC,
-                                           S_IREAD|S_IWRITE|S_IEXEC);
-    if (fdb == -1) {
-       rprintf(FERROR, "Batch file %s open error: %s\n", rsync_argvs_file,
-         strerror(errno));
-          close(fdb);
-          exit_cleanup(1);
-    }
-    buff[0] = '\0';
-    /* Write argvs info to batch file */
-   
-    for (i=argc - orig_argc;i<argc;i++) {
-       if ( !strcmp(argv[i],"-F") ){  /* safer to change it here than script*/ 
-          strncat(buff,"-f ",3);  /* chg to -f + ext to get ready for remote */
-          strncat(buff,batch_file_ext,strlen(batch_file_ext));
-       }
-       else {
-          strncat(buff,argv[i],strlen(argv[i]));
-       }
-    
-       if (i < (argc - 1)) {
-          strncat(buff," ",1);
-       }
-    }
-    if (!write(fdb, buff, strlen(buff))) { 
-          rprintf(FERROR, "Batch file %s write error: %s\n",
-            rsync_argvs_file, strerror(errno));
-          close(fdb);
-          exit_cleanup(1);
-    }
-    close(fdb);
+	int fdb;
+	int i;
+	char buff[256];
+
+	strcat(rsync_argvs_file, batch_file_ext);
+
+
+	/* Open batch argvs file for writing; create it if it doesn't exist */
+	fdb = do_open(rsync_argvs_file, O_WRONLY | O_CREAT | O_TRUNC,
+		      S_IREAD | S_IWRITE | S_IEXEC);
+	if (fdb == -1) {
+		rprintf(FERROR, "Batch file %s open error: %s\n",
+			rsync_argvs_file, strerror(errno));
+		close(fdb);
+		exit_cleanup(1);
+	}
+	buff[0] = '\0';
+	/* Write argvs info to batch file */
+
+	for (i = argc - orig_argc; i < argc; i++) {
+		/* FIXME: This apparently crashes if rsync is run with
+		 * just "rsync -F".  I think directly manipulating
+		 * argv[] is probably bogus -- what if -F is part of a
+		 * run of several short options? */
+		if (!strcmp(argv[i], "-F")) {	/* safer to change it here than script */
+			strncat(buff, "-f ", 3);	/* chg to -f + ext to get ready for remote */
+			strncat(buff, batch_file_ext,
+				strlen(batch_file_ext));
+		} else {
+			strncat(buff, argv[i], strlen(argv[i]));
+		}
+
+		if (i < (argc - 1)) {
+			strncat(buff, " ", 1);
+		}
+	}
+	if (!write(fdb, buff, strlen(buff))) {
+		rprintf(FERROR, "Batch file %s write error: %s\n",
+			rsync_argvs_file, strerror(errno));
+		close(fdb);
+		exit_cleanup(1);
+	}
+	close(fdb);
 }
 
 struct file_list *create_flist_from_batch()
 {
-   unsigned char flags;
+	unsigned char flags;
 
-   fdb_open = 1;
-   fdb_close = 0;  
+	fdb_open = 1;
+	fdb_close = 0;
 
-   batch_flist = (struct file_list *)malloc(sizeof(batch_flist[0]));
-   if (!batch_flist) {
-     out_of_memory("create_flist_from_batch"); 
-   }
-   batch_flist->count=0;
-   batch_flist->malloced=1000;
-   batch_flist->files = (struct file_struct **)malloc(sizeof(batch_flist->files[0])* batch_flist->malloced);
-   if (!batch_flist->files) {
-     out_of_memory("create_flist_from_batch");   /* dw -- will exit */
-   }
-
-   for ( flags=read_batch_flags() ; flags; flags=read_batch_flags() ) {
-
-     int i = batch_flist->count;
- 
-     if (i >= batch_flist->malloced) {
-	  if (batch_flist->malloced < 1000)
-		  batch_flist->malloced += 1000;
-	  else
-		  batch_flist->malloced *= 2;
-	  batch_flist->files =(struct file_struct **)realloc(batch_flist->files,
-					       sizeof(batch_flist->files[0])*
-					       batch_flist->malloced);
-	  if (!batch_flist->files)
-		  out_of_memory("create_flist_from_batch");
-    }
-    read_batch_flist_info(&batch_flist->files[i]);
-    batch_flist->files[i]->flags = flags;   
+	batch_flist = (struct file_list *) malloc(sizeof(batch_flist[0]));
+	if (!batch_flist) {
+		out_of_memory("create_flist_from_batch");
+	}
+	batch_flist->count = 0;
+	batch_flist->malloced = 1000;
+	batch_flist->files =
+	    (struct file_struct **) malloc(sizeof(batch_flist->files[0]) *
+					   batch_flist->malloced);
+	if (!batch_flist->files) {
+		out_of_memory("create_flist_from_batch");	/* dw -- will exit */
+	}
+
+	for (flags = read_batch_flags(); flags; flags = read_batch_flags()) {
+
+		int i = batch_flist->count;
+
+		if (i >= batch_flist->malloced) {
+			if (batch_flist->malloced < 1000)
+				batch_flist->malloced += 1000;
+			else
+				batch_flist->malloced *= 2;
+			batch_flist->files =
+			    (struct file_struct **) realloc(batch_flist->
+							    files,
+							    sizeof
+							    (batch_flist->
+							     files[0]) *
+							    batch_flist->
+							    malloced);
+			if (!batch_flist->files)
+				out_of_memory("create_flist_from_batch");
+		}
+		read_batch_flist_info(&batch_flist->files[i]);
+		batch_flist->files[i]->flags = flags;
 
-    batch_flist->count++;
-  }
+		batch_flist->count++;
+	}
 
-  return batch_flist;
+	return batch_flist;
 
 }
 
 int read_batch_flist_file(char *buff, int len)
 {
-    int bytes_read;
-      
-    if (fdb_open) {
-
-       /*  Set up file extension  */
-       strcat(rsync_flist_file, batch_file_ext);
-
-       /* Open batch flist file for reading */
-       fdb = do_open(rsync_flist_file, O_RDONLY, 0);
-       if (fdb == -1) {
-          rprintf(FERROR, "Batch file %s open error: %s\n", rsync_flist_file,
-            strerror(errno));
-          close(fdb);
-          exit_cleanup(1);
-       }
-       fdb_open = 0;
-    }
-
-    /* Read flist batch file */
-
-    bytes_read = read(fdb, buff, len); 
-
-    if (bytes_read == -1) { 
-       rprintf(FERROR, "Batch file %s read error: %s\n",
-          rsync_flist_file, strerror(errno));
-       close(fdb);
-       exit_cleanup(1);
-    }
-    if (bytes_read == 0) {    /* EOF */
-       close(fdb);
-    }
-    return bytes_read;
+	int bytes_read;
+
+	if (fdb_open) {
+
+		/*  Set up file extension  */
+		strcat(rsync_flist_file, batch_file_ext);
+
+		/* Open batch flist file for reading */
+		fdb = do_open(rsync_flist_file, O_RDONLY, 0);
+		if (fdb == -1) {
+			rprintf(FERROR, "Batch file %s open error: %s\n",
+				rsync_flist_file, strerror(errno));
+			close(fdb);
+			exit_cleanup(1);
+		}
+		fdb_open = 0;
+	}
+
+	/* Read flist batch file */
+
+	bytes_read = read(fdb, buff, len);
+
+	if (bytes_read == -1) {
+		rprintf(FERROR, "Batch file %s read error: %s\n",
+			rsync_flist_file, strerror(errno));
+		close(fdb);
+		exit_cleanup(1);
+	}
+	if (bytes_read == 0) {	/* EOF */
+		close(fdb);
+	}
+	return bytes_read;
 }
 
 unsigned char read_batch_flags()
 {
-    int flags; 
+	int flags;
 
-    if (read_batch_flist_file((char *)&flags, 4) ) { 
-       return 1;
-    }
-    else {
-       return 0; 
-    }
+	if (read_batch_flist_file((char *) &flags, 4)) {
+		return 1;
+	} else {
+		return 0;
+	}
 }
 
 void read_batch_flist_info(struct file_struct **fptr)
 {
-    int int_str_len;   
-    char char_str_len[4];   
-    char buff[256];   
-    struct file_struct *file;
-
-    file = (struct file_struct *)malloc(sizeof(*file));
-    if (!file) out_of_memory("read_batch_flist_info");
-    memset((char *)file, 0, sizeof(*file));
-
-    (*fptr) = file;
-
-    read_batch_flist_file((char *)&file->modtime, sizeof(time_t)); 
-    read_batch_flist_file((char *)&file->length, sizeof(OFF_T)); 
-    read_batch_flist_file((char *)&file->mode, sizeof(mode_t)); 
-    read_batch_flist_file((char *)&file->inode, sizeof(INO_T)); 
-    read_batch_flist_file((char *)&file->dev, sizeof(dev_t)); 
-    read_batch_flist_file((char *)&file->rdev, sizeof(dev_t)); 
-    read_batch_flist_file((char *)&file->uid, sizeof(uid_t)); 
-    read_batch_flist_file((char *)&file->gid, sizeof(gid_t)); 
-    read_batch_flist_file(char_str_len, sizeof(char_str_len)); 
-    int_str_len = IVAL(char_str_len,0);
-    if (int_str_len > 0) {
-       read_batch_flist_file(buff, int_str_len); 
-       buff[int_str_len] = '\0';
-       file->basename = strdup(buff); 
-    }
-    else {
-       file->basename = NULL;
-    }
-
-    read_batch_flist_file(char_str_len, sizeof(char_str_len)); 
-    int_str_len = IVAL(char_str_len,0);
-    if (int_str_len > 0) {
-       read_batch_flist_file(buff, int_str_len); 
-       buff[int_str_len] = '\0';
-       file[0].dirname = strdup(buff); 
-    }
-    else {
-       file[0].dirname = NULL;
-    }
-
-    read_batch_flist_file(char_str_len, sizeof(char_str_len)); 
-    int_str_len = IVAL(char_str_len,0);
-    if (int_str_len > 0) {
-       read_batch_flist_file(buff, int_str_len); 
-       buff[int_str_len] = '\0';
-       file[0].basedir = strdup(buff); 
-    }
-    else {
-       file[0].basedir = NULL;
-    }
-
-    read_batch_flist_file(char_str_len, sizeof(char_str_len)); 
-    int_str_len = IVAL(char_str_len,0);
-    if (int_str_len > 0) {
-       read_batch_flist_file(buff, int_str_len); 
-       buff[int_str_len] = '\0';
-       file[0].link = strdup(buff); 
-    }
-    else {
-       file[0].link = NULL;
-    }
-
-    read_batch_flist_file(char_str_len, sizeof(char_str_len)); 
-    int_str_len = IVAL(char_str_len,0);
-    if (int_str_len > 0) {
-       read_batch_flist_file(buff, int_str_len); 
-       buff[int_str_len] = '\0';
-       file[0].sum = strdup(buff); 
-    }
-    else {
-       file[0].sum = NULL;
-    }
+	int int_str_len;
+	char char_str_len[4];
+	char buff[256];
+	struct file_struct *file;
+
+	file = (struct file_struct *) malloc(sizeof(*file));
+	if (!file)
+		out_of_memory("read_batch_flist_info");
+	memset((char *) file, 0, sizeof(*file));
+
+	(*fptr) = file;
+
+	read_batch_flist_file((char *) &file->modtime, sizeof(time_t));
+	read_batch_flist_file((char *) &file->length, sizeof(OFF_T));
+	read_batch_flist_file((char *) &file->mode, sizeof(mode_t));
+	read_batch_flist_file((char *) &file->inode, sizeof(INO_T));
+	read_batch_flist_file((char *) &file->dev, sizeof(dev_t));
+	read_batch_flist_file((char *) &file->rdev, sizeof(dev_t));
+	read_batch_flist_file((char *) &file->uid, sizeof(uid_t));
+	read_batch_flist_file((char *) &file->gid, sizeof(gid_t));
+	read_batch_flist_file(char_str_len, sizeof(char_str_len));
+	int_str_len = IVAL(char_str_len, 0);
+	if (int_str_len > 0) {
+		read_batch_flist_file(buff, int_str_len);
+		buff[int_str_len] = '\0';
+		file->basename = strdup(buff);
+	} else {
+		file->basename = NULL;
+	}
+
+	read_batch_flist_file(char_str_len, sizeof(char_str_len));
+	int_str_len = IVAL(char_str_len, 0);
+	if (int_str_len > 0) {
+		read_batch_flist_file(buff, int_str_len);
+		buff[int_str_len] = '\0';
+		file[0].dirname = strdup(buff);
+	} else {
+		file[0].dirname = NULL;
+	}
+
+	read_batch_flist_file(char_str_len, sizeof(char_str_len));
+	int_str_len = IVAL(char_str_len, 0);
+	if (int_str_len > 0) {
+		read_batch_flist_file(buff, int_str_len);
+		buff[int_str_len] = '\0';
+		file[0].basedir = strdup(buff);
+	} else {
+		file[0].basedir = NULL;
+	}
+
+	read_batch_flist_file(char_str_len, sizeof(char_str_len));
+	int_str_len = IVAL(char_str_len, 0);
+	if (int_str_len > 0) {
+		read_batch_flist_file(buff, int_str_len);
+		buff[int_str_len] = '\0';
+		file[0].link = strdup(buff);
+	} else {
+		file[0].link = NULL;
+	}
+
+	read_batch_flist_file(char_str_len, sizeof(char_str_len));
+	int_str_len = IVAL(char_str_len, 0);
+	if (int_str_len > 0) {
+		read_batch_flist_file(buff, int_str_len);
+		buff[int_str_len] = '\0';
+		file[0].sum = strdup(buff);
+	} else {
+		file[0].sum = NULL;
+	}
 }
 
 void write_batch_csums_file(char *buff, int bytes_to_write)
 {
 
-    static int fdb_open = 1;
-
-    if (fdb_open) {
-       /* Set up file extension */
-       strcat(rsync_csums_file, batch_file_ext); 
+	static int fdb_open = 1;
 
-       /* Open batch csums file for writing; create it if it doesn't exist */
-       fdb = do_open(rsync_csums_file, O_WRONLY|O_CREAT|O_TRUNC,
-                                              S_IREAD|S_IWRITE);
-       if (fdb == -1) {
-          rprintf(FERROR, "Batch file %s open error: %s\n",
-          rsync_csums_file, strerror(errno));
-          close(fdb);
-          exit_cleanup(1);
-       }
-       fdb_open = 0; 
-    }
+	if (fdb_open) {
+		/* Set up file extension */
+		strcat(rsync_csums_file, batch_file_ext);
+
+		/* Open batch csums file for writing; create it if it doesn't exist */
+		fdb =
+		    do_open(rsync_csums_file, O_WRONLY | O_CREAT | O_TRUNC,
+			    S_IREAD | S_IWRITE);
+		if (fdb == -1) {
+			rprintf(FERROR, "Batch file %s open error: %s\n",
+				rsync_csums_file, strerror(errno));
+			close(fdb);
+			exit_cleanup(1);
+		}
+		fdb_open = 0;
+	}
+
+	/* Write buffer to batch csums file */
+
+	if (write(fdb, buff, bytes_to_write) == -1) {
+		rprintf(FERROR, "Batch file %s write error: %s\n",
+			rsync_csums_file, strerror(errno));
+		close(fdb);
+		exit_cleanup(1);
+	}
+}
+
+void close_batch_csums_file()
+{
+	close(fdb);
 
-    /* Write buffer to batch csums file */
-
-    if ( write(fdb, buff, bytes_to_write) == -1 ) { 
-            rprintf(FERROR, "Batch file %s write error: %s\n",
-          rsync_csums_file, strerror(errno));
-          close(fdb);
-          exit_cleanup(1);
-    }
 }
 
-void close_batch_csums_file() 
-{
-    close(fdb);
-
+void write_batch_csum_info(int *flist_entry, int flist_count,
+			   struct sum_struct *s)
+{
+	int i;
+	int int_zero = 0;
+	extern int csum_length;
+
+	fdb_open = 1;
+
+	/* Write csum info to batch file */
+
+	write_batch_csums_file((char *) flist_entry, sizeof(int));
+	write_batch_csums_file((char *) (s ? &s->count : &int_zero),
+			       sizeof(int));
+	if (s) {
+		for (i = 0; i < s->count; i++) {
+			write_batch_csums_file((char *) &s->sums[i].sum1,
+					       sizeof(uint32));
+			if ((*flist_entry == flist_count - 1)
+			    && (i == s->count - 1)) {
+				fdb_close = 1;
+			}
+			write_batch_csums_file(s->sums[i].sum2,
+					       csum_length);
+		}
+	}
 }
 
-void write_batch_csum_info(int *flist_entry, int flist_count, struct sum_struct *s)
+int read_batch_csums_file(char *buff, int len)
 {
-    int i;
-    int int_zero = 0;
-    extern int csum_length;
+	static int fdb_open = 1;
+	int bytes_read;
 
-    fdb_open = 1;
+	if (fdb_open) {
 
-    /* Write csum info to batch file */
+		/*  Set up file extension  */
+		strcat(rsync_csums_file, batch_file_ext);
 
-    write_batch_csums_file ( (char *) flist_entry, sizeof(int) );
-    write_batch_csums_file ( (char *) (s?&s->count:&int_zero), sizeof(int) );
-    if (s) {
-       for (i=0; i < s->count; i++) {
-          write_batch_csums_file( (char *) &s->sums[i].sum1, sizeof(uint32));
-          if ( (*flist_entry == flist_count - 1) && (i == s->count - 1) ) {
-             fdb_close = 1;
-          }
-          write_batch_csums_file( s->sums[i].sum2, csum_length);
-       } 
-    }  
-}
-
-int read_batch_csums_file(char *buff, int len)
-{
-    static int fdb_open = 1; 
-    int bytes_read;
-      
-    if (fdb_open) {
-
-       /*  Set up file extension  */
-       strcat(rsync_csums_file, batch_file_ext);
-
-       /* Open batch flist file for reading */
-       fdb = do_open(rsync_csums_file, O_RDONLY, 0);
-       if (fdb == -1) {
-          rprintf(FERROR, "Batch file %s open error: %s\n", rsync_csums_file,
-            strerror(errno));
-          close(fdb);
-          exit_cleanup(1);
-       }
-       fdb_open = 0;
-    }
-
-    /* Read csums batch file */
-
-    bytes_read = read(fdb, buff, len); 
-
-    if (bytes_read == -1) { 
-       rprintf(FERROR, "Batch file %s read error: %s\n",
-          rsync_csums_file, strerror(errno));
-       close(fdb);
-       exit_cleanup(1);
-    }
-    return bytes_read;
-}
-
-
-void read_batch_csum_info(int flist_entry, struct sum_struct *s, int *checksums_match)
-{
-    int i;
-    int file_flist_entry;
-    int file_chunk_ct;
-    uint32 file_sum1;
-    char file_sum2[SUM_LENGTH]; 
-    extern int csum_length;
- 
-
-    read_batch_csums_file((char *)&file_flist_entry, sizeof(int)); 
-    if (file_flist_entry != flist_entry) {
-       rprintf(FINFO,"file_list_entry NE flist_entry\n");
-       rprintf(FINFO,"file_flist_entry = %d  flist_entry = %d\n", file_flist_entry, flist_entry);
-       close(fdb);
-       exit_cleanup(1);
-    
-    }
-    else {
-       read_batch_csums_file((char *)&file_chunk_ct, sizeof(int)); 
-       *checksums_match = 1;
-       for (i = 0;i < file_chunk_ct;i++) {
-          
-          read_batch_csums_file((char *)&file_sum1, sizeof(uint32)); 
-          read_batch_csums_file(file_sum2, csum_length); 
-
-          if ( (s->sums[i].sum1 != file_sum1) ||  
-               ( memcmp(s->sums[i].sum2,file_sum2, csum_length)!=0) ) {
-                   *checksums_match = 0;
-          }
-       }  /*  end for  */
-    }
+		/* Open batch flist file for reading */
+		fdb = do_open(rsync_csums_file, O_RDONLY, 0);
+		if (fdb == -1) {
+			rprintf(FERROR, "Batch file %s open error: %s\n",
+				rsync_csums_file, strerror(errno));
+			close(fdb);
+			exit_cleanup(1);
+		}
+		fdb_open = 0;
+	}
+
+	/* Read csums batch file */
+
+	bytes_read = read(fdb, buff, len);
+
+	if (bytes_read == -1) {
+		rprintf(FERROR, "Batch file %s read error: %s\n",
+			rsync_csums_file, strerror(errno));
+		close(fdb);
+		exit_cleanup(1);
+	}
+	return bytes_read;
+}
+
+
+void read_batch_csum_info(int flist_entry, struct sum_struct *s,
+			  int *checksums_match)
+{
+	int i;
+	int file_flist_entry;
+	int file_chunk_ct;
+	uint32 file_sum1;
+	char file_sum2[SUM_LENGTH];
+	extern int csum_length;
+
+
+	read_batch_csums_file((char *) &file_flist_entry, sizeof(int));
+	if (file_flist_entry != flist_entry) {
+		rprintf(FINFO, "file_list_entry NE flist_entry\n");
+		rprintf(FINFO, "file_flist_entry = %d  flist_entry = %d\n",
+			file_flist_entry, flist_entry);
+		close(fdb);
+		exit_cleanup(1);
+
+	} else {
+		read_batch_csums_file((char *) &file_chunk_ct,
+				      sizeof(int));
+		*checksums_match = 1;
+		for (i = 0; i < file_chunk_ct; i++) {
+
+			read_batch_csums_file((char *) &file_sum1,
+					      sizeof(uint32));
+			read_batch_csums_file(file_sum2, csum_length);
+
+			if ((s->sums[i].sum1 != file_sum1) ||
+			    (memcmp
+			     (s->sums[i].sum2, file_sum2,
+			      csum_length) != 0)) {
+				*checksums_match = 0;
+			}
+		}		/*  end for  */
+	}
 
 }
 
 void write_batch_delta_file(char *buff, int bytes_to_write)
 {
-    static int fdb_delta_open = 1;
+	static int fdb_delta_open = 1;
 
-    if (fdb_delta_open) {
-       /* Set up file extension */
-       strcat(rsync_delta_file, batch_file_ext); 
-
-       /* Open batch delta file for writing; create it if it doesn't exist */
-       fdb_delta = do_open(rsync_delta_file, O_WRONLY|O_CREAT|O_TRUNC,
-                                              S_IREAD|S_IWRITE);
-       if (fdb_delta == -1) {
-          rprintf(FERROR, "Batch file %s open error: %s\n",
-          rsync_delta_file, strerror(errno));
-          close(fdb_delta);
-          exit_cleanup(1);
-       }
-       fdb_delta_open = 0; 
-    }
-
-    /* Write buffer to batch delta file */
-
-    if ( write(fdb_delta, buff, bytes_to_write) == -1 ) { 
-            rprintf(FERROR, "Batch file %s write error: %s\n",
-          rsync_delta_file, strerror(errno));
-          close(fdb_delta);
-          exit_cleanup(1);
-    }
+	if (fdb_delta_open) {
+		/* Set up file extension */
+		strcat(rsync_delta_file, batch_file_ext);
+
+		/* Open batch delta file for writing; create it if it doesn't exist */
+		fdb_delta =
+		    do_open(rsync_delta_file, O_WRONLY | O_CREAT | O_TRUNC,
+			    S_IREAD | S_IWRITE);
+		if (fdb_delta == -1) {
+			rprintf(FERROR, "Batch file %s open error: %s\n",
+				rsync_delta_file, strerror(errno));
+			close(fdb_delta);
+			exit_cleanup(1);
+		}
+		fdb_delta_open = 0;
+	}
+
+	/* Write buffer to batch delta file */
+
+	if (write(fdb_delta, buff, bytes_to_write) == -1) {
+		rprintf(FERROR, "Batch file %s write error: %s\n",
+			rsync_delta_file, strerror(errno));
+		close(fdb_delta);
+		exit_cleanup(1);
+	}
 }
 void close_batch_delta_file()
 {
-   close(fdb_delta);
+	close(fdb_delta);
 
 }
 
 int read_batch_delta_file(char *buff, int len)
 {
-    static int fdb_delta_open = 1;
-    int bytes_read;
-      
-    if (fdb_delta_open) {
-
-       /*  Set up file extension  */
-       strcat(rsync_delta_file, batch_file_ext);
-
-       /* Open batch flist file for reading */
-       fdb_delta = do_open(rsync_delta_file, O_RDONLY, 0);
-       if (fdb_delta == -1) {
-          rprintf(FERROR, "Batch file %s open error: %s\n", rsync_delta_file,
-            strerror(errno));
-          close(fdb_delta);
-          exit_cleanup(1);
-       }
-       fdb_delta_open = 0;
-    }
-
-    /* Read delta batch file */
-
-    bytes_read = read(fdb_delta, buff, len); 
-
-    if (bytes_read == -1) { 
-       rprintf(FERROR, "Batch file %s read error: %s\n",
-          rsync_delta_file, strerror(errno));
-       close(fdb_delta);
-       exit_cleanup(1);
-    }
-    return bytes_read;
+	static int fdb_delta_open = 1;
+	int bytes_read;
+
+	if (fdb_delta_open) {
+
+		/*  Set up file extension  */
+		strcat(rsync_delta_file, batch_file_ext);
+
+		/* Open batch flist file for reading */
+		fdb_delta = do_open(rsync_delta_file, O_RDONLY, 0);
+		if (fdb_delta == -1) {
+			rprintf(FERROR, "Batch file %s open error: %s\n",
+				rsync_delta_file, strerror(errno));
+			close(fdb_delta);
+			exit_cleanup(1);
+		}
+		fdb_delta_open = 0;
+	}
+
+	/* Read delta batch file */
+
+	bytes_read = read(fdb_delta, buff, len);
+
+	if (bytes_read == -1) {
+		rprintf(FERROR, "Batch file %s read error: %s\n",
+			rsync_delta_file, strerror(errno));
+		close(fdb_delta);
+		exit_cleanup(1);
+	}
+	return bytes_read;
 }
 
 
 void show_flist(int index, struct file_struct **fptr)
 {
-   /*  for debugging    show_flist(flist->count, flist->files **/ 
+	/*  for debugging    show_flist(flist->count, flist->files * */
 
-    int i;
-    for (i=0;i<index;i++) {
-	    rprintf(FINFO, "flist->flags=%#x\n",fptr[i]->flags);  
-	    rprintf(FINFO, "flist->modtime=%#lx\n",
-		    (long unsigned) fptr[i]->modtime);  
-	    rprintf(FINFO, "flist->length=%.0f\n", (double) fptr[i]->length);  
-	    rprintf(FINFO, "flist->mode=%#o\n", (int) fptr[i]->mode);  
-	    rprintf(FINFO, "flist->basename=%s\n",fptr[i]->basename);
-	    if (fptr[i]->dirname) 
-		    rprintf(FINFO, "flist->dirname=%s\n",fptr[i]->dirname);
-	    if (fptr[i]->basedir) 
-		    rprintf(FINFO, "flist->basedir=%s\n",fptr[i]->basedir);
-    }
+	int i;
+	for (i = 0; i < index; i++) {
+		rprintf(FINFO, "flist->flags=%#x\n", fptr[i]->flags);
+		rprintf(FINFO, "flist->modtime=%#lx\n",
+			(long unsigned) fptr[i]->modtime);
+		rprintf(FINFO, "flist->length=%.0f\n",
+			(double) fptr[i]->length);
+		rprintf(FINFO, "flist->mode=%#o\n", (int) fptr[i]->mode);
+		rprintf(FINFO, "flist->basename=%s\n", fptr[i]->basename);
+		if (fptr[i]->dirname)
+			rprintf(FINFO, "flist->dirname=%s\n",
+				fptr[i]->dirname);
+		if (fptr[i]->basedir)
+			rprintf(FINFO, "flist->basedir=%s\n",
+				fptr[i]->basedir);
+	}
 }
 
 void show_argvs(int argc, char *argv[])
 {
-   /*  for debugging  **/ 
+	/*  for debugging  * */
 
-    int i;
-    rprintf(FINFO,"BATCH.C:show_argvs,argc=%d\n",argc);
-    for (i=0;i<argc;i++) {
-   /*    if (argv[i])   */
-       rprintf(FINFO,"i=%d,argv[i]=%s\n",i,argv[i]);  
+	int i;
+	rprintf(FINFO, "BATCH.C:show_argvs,argc=%d\n", argc);
+	for (i = 0; i < argc; i++) {
+		/*    if (argv[i])   */
+		rprintf(FINFO, "i=%d,argv[i]=%s\n", i, argv[i]);
 
-    }
+	}
 }
-    
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/clientserver.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/clientserver.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/clientserver.c	2001-11-30 08:21:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/clientserver.c	2002-01-03 15:09:34.000000000 +0800
@@ -42,12 +42,13 @@
 	char *p, *user=NULL;
 	extern int remote_version;
 	extern int am_sender;
 	extern char *shell_cmd;
 	extern int kludge_around_eof;
 	extern char *bind_address;
+	extern int default_af_hint;
        
 	if (argc == 0 && !am_sender) {
 		extern int list_only;
 		list_only = 1;
 	}
 
@@ -76,13 +77,13 @@
 	}
 
 	if (!user) user = getenv("USER");
 	if (!user) user = getenv("LOGNAME");
 
 	fd = open_socket_out_wrapped (host, rsync_port, bind_address,
-				      global_opts.af_hint);
+				      default_af_hint);
 	if (fd == -1) {
 		exit_cleanup(RERR_SOCKETIO);
 	}
 	
 	server_options(sargs,&sargc);
 
@@ -483,12 +484,13 @@
 
 int daemon_main(void)
 {
 	extern char *config_file;
 	extern int orig_umask;
 	char *pid_file;
+	extern int no_detach;
 
 	if (is_a_socket(STDIN_FILENO)) {
 		int i;
 
 		/* we are running via inetd - close off stdout and
 		   stderr so that library functions (and getopt) don't
@@ -498,25 +500,27 @@
 			open("/dev/null", O_RDWR);
 		}
 
 		return start_daemon(STDIN_FILENO);
 	}
 
-	become_daemon();
+	if (!no_detach)
+	    become_daemon();
 
 	if (!lp_load(config_file, 1)) {
 		exit_cleanup(RERR_SYNTAX);
 	}
 
 	log_init();
 
 	rprintf(FINFO, "rsyncd version %s starting, listening on port %d\n",
 		RSYNC_VERSION,
                 rsync_port);
         /* TODO: If listening on a particular address, then show that
-         * address too. */
+         * address too.  In fact, why not just do inet_ntop on the
+         * local address??? */
 
 	if (((pid_file = lp_pid_file()) != NULL) && (*pid_file != '\0')) {
 		char pidbuf[16];
 		int fd;
 		int pid = (int) getpid();
 		cleanup_set_pid(pid);
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/config.h.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/config.h.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/config.h.in	2001-11-30 08:21:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/config.h.in	2002-01-03 15:09:34.000000000 +0800
@@ -7,15 +7,12 @@
 #undef REPLACE_INET_ATON
 #undef HAVE_GETTIMEOFDAY_TZ
 #undef ENABLE_IPV6
 #undef HAVE_SOCKADDR_LEN
 #undef HAVE_SOCKETPAIR
 
-/* Define to turn on debugging code that may slow normal operation */
-#undef DEBUG
-
 /* Define to the type of elements in the array set by `getgroups'. Usually
    this is either `int' or `gid_t'. */
 #undef GETGROUPS_T
 
 /* Define if you have the <alloca.h> header file. */
 #undef HAVE_ALLOCA_H
@@ -65,27 +62,39 @@
 /* */
 #undef HAVE_FNMATCH
 
 /* Define if you have the `fstat' function. */
 #undef HAVE_FSTAT
 
+/* Define if you have the `getaddrinfo' function. */
+#undef HAVE_GETADDRINFO
+
 /* Define if you have the `getcwd' function. */
 #undef HAVE_GETCWD
 
+/* Define if you have the `getnameinfo' function. */
+#undef HAVE_GETNAMEINFO
+
 /* */
 #undef HAVE_GETTIMEOFDAY_TZ
 
 /* Define if you have the `glob' function. */
 #undef HAVE_GLOB
 
 /* Define if you have the <glob.h> header file. */
 #undef HAVE_GLOB_H
 
 /* Define if you have the <grp.h> header file. */
 #undef HAVE_GRP_H
 
+/* Define if you have the `inet_ntop' function. */
+#undef HAVE_INET_NTOP
+
+/* Define if you have the `inet_pton' function. */
+#undef HAVE_INET_PTON
+
 /* Define if you have the <inttypes.h> header file. */
 #undef HAVE_INTTYPES_H
 
 /* Define if you have the `lchown' function. */
 #undef HAVE_LCHOWN
 
@@ -152,12 +161,15 @@
 /* */
 #undef HAVE_SHORT_INO_T
 
 /* Define if you have the `snprintf' function. */
 #undef HAVE_SNPRINTF
 
+/* Define if you have strct sockaddr_storage. */
+#undef HAVE_SOCKADDR_STORAGE
+
 /* */
 #undef HAVE_SOCKETPAIR
 
 /* Define if you have the <stdint.h> header file. */
 #undef HAVE_STDINT_H
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/configure /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/configure
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/configure	2001-11-30 08:31:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/configure	2002-01-03 15:19:41.000000000 +0800
@@ -972,13 +972,13 @@
 fi
 PATH_SEPARATOR="$ac_path_separator"
 rm -f conftest.sh
 
 ac_config_headers="$ac_config_headers config.h"
 
-RSYNC_VERSION=2.5.0
+RSYNC_VERSION=2.5.1
 
 { echo "$as_me:980: Configuring rsync $RSYNC_VERSION" >&5
 echo "$as_me: Configuring rsync $RSYNC_VERSION" >&6;}
 
 cat >>confdefs.h <<EOF
 #define RSYNC_VERSION "$RSYNC_VERSION"
@@ -2173,18 +2173,13 @@
 echo "${ECHO_T}no" >&6
     CFLAGS=${CFLAGS-"-O"}
 else
     echo "$as_me:2176: result: yes" >&5
 echo "${ECHO_T}yes" >&6
     # leave CFLAGS alone; AC_PROG_CC will try to include -g if it can
-
-cat >>confdefs.h <<\EOF
-#define DEBUG 1
-EOF
-
-    fi
+        fi
 
 CFLAGS="$CFLAGS -DHAVE_CONFIG_H"
 
 # Check whether --with-included-popt or --without-included-popt was given.
 if test "${with_included_popt+set}" = set; then
   withval="$with_included_popt"
@@ -2202,13 +2197,13 @@
 cat >>confdefs.h <<EOF
 #define RSYNC_PATH "$RSYNC_PATH"
 EOF
 
 # Extract the first word of "remsh", so it can be a program name with args.
 set dummy remsh; ac_word=$2
-echo "$as_me:2208: checking for $ac_word" >&5
+echo "$as_me:2203: checking for $ac_word" >&5
 echo $ECHO_N "checking for $ac_word... $ECHO_C" >&6
 if test "${ac_cv_prog_HAVE_REMSH+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test -n "$HAVE_REMSH"; then
   ac_cv_prog_HAVE_REMSH="$HAVE_REMSH" # Let the user override the test.
@@ -2217,45 +2212,45 @@
 ac_dummy="$PATH"
 for ac_dir in $ac_dummy; do
   IFS=$ac_save_IFS
   test -z "$ac_dir" && ac_dir=.
   $as_executable_p "$ac_dir/$ac_word" || continue
 ac_cv_prog_HAVE_REMSH="1"
-echo "$as_me:2223: found $ac_dir/$ac_word" >&5
+echo "$as_me:2218: found $ac_dir/$ac_word" >&5
 break
 done
 
   test -z "$ac_cv_prog_HAVE_REMSH" && ac_cv_prog_HAVE_REMSH="0"
 fi
 fi
 HAVE_REMSH=$ac_cv_prog_HAVE_REMSH
 if test -n "$HAVE_REMSH"; then
-  echo "$as_me:2232: result: $HAVE_REMSH" >&5
+  echo "$as_me:2227: result: $HAVE_REMSH" >&5
 echo "${ECHO_T}$HAVE_REMSH" >&6
 else
-  echo "$as_me:2235: result: no" >&5
+  echo "$as_me:2230: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
 cat >>confdefs.h <<EOF
 #define HAVE_REMSH $HAVE_REMSH
 EOF
 
 # arrgh. libc in the current debian stable screws up the largefile
 # stuff, getting byte range locking wrong
-echo "$as_me:2245: checking for broken largefile support" >&5
+echo "$as_me:2240: checking for broken largefile support" >&5
 echo $ECHO_N "checking for broken largefile support... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_BROKEN_LARGEFILE+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_BROKEN_LARGEFILE=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 2255 "configure"
+#line 2250 "configure"
 #include "confdefs.h"
 
 #define _FILE_OFFSET_BITS 64
 #include <stdio.h>
 #include <fcntl.h>
 #include <sys/types.h>
@@ -2281,55 +2276,55 @@
 	unlink("conftest.dat");
 	exit(WEXITSTATUS(status));
 }
 
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:2287: \"$ac_link\"") >&5
+if { (eval echo "$as_me:2282: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:2290: \$? = $ac_status" >&5
+  echo "$as_me:2285: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:2292: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2287: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2295: \$? = $ac_status" >&5
+  echo "$as_me:2290: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_BROKEN_LARGEFILE=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_BROKEN_LARGEFILE=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:2307: result: $rsync_cv_HAVE_BROKEN_LARGEFILE" >&5
+echo "$as_me:2302: result: $rsync_cv_HAVE_BROKEN_LARGEFILE" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_BROKEN_LARGEFILE" >&6
 if test x"$rsync_cv_HAVE_BROKEN_LARGEFILE" != x"yes"; then
    # Check whether --enable-largefile or --disable-largefile was given.
 if test "${enable_largefile+set}" = set; then
   enableval="$enable_largefile"
 
 fi;
 if test "$enable_largefile" != no; then
 
-  echo "$as_me:2317: checking for special C compiler options needed for large files" >&5
+  echo "$as_me:2312: checking for special C compiler options needed for large files" >&5
 echo $ECHO_N "checking for special C compiler options needed for large files... $ECHO_C" >&6
 if test "${ac_cv_sys_largefile_CC+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_cv_sys_largefile_CC=no
      if test "$GCC" != yes; then
        ac_save_CC=$CC
        while :; do
      	 # IRIX 6.2 and later do not support large files by default,
      	 # so use the C compiler's -n32 option if that helps.
          cat >conftest.$ac_ext <<_ACEOF
-#line 2329 "configure"
+#line 2324 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
     incorrectly reject 9223372036854775807.  */
@@ -2343,41 +2338,41 @@
 
   ;
   return 0;
 }
 _ACEOF
      	 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2349: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2344: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2352: \$? = $ac_status" >&5
+  echo "$as_me:2347: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2355: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2350: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2358: \$? = $ac_status" >&5
+  echo "$as_me:2353: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext
      	 CC="$CC -n32"
      	 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2368: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2363: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2371: \$? = $ac_status" >&5
+  echo "$as_me:2366: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2374: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2369: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2377: \$? = $ac_status" >&5
+  echo "$as_me:2372: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sys_largefile_CC=' -n32'; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
@@ -2385,27 +2380,27 @@
          break
        done
        CC=$ac_save_CC
        rm -f conftest.$ac_ext
     fi
 fi
-echo "$as_me:2391: result: $ac_cv_sys_largefile_CC" >&5
+echo "$as_me:2386: result: $ac_cv_sys_largefile_CC" >&5
 echo "${ECHO_T}$ac_cv_sys_largefile_CC" >&6
   if test "$ac_cv_sys_largefile_CC" != no; then
     CC=$CC$ac_cv_sys_largefile_CC
   fi
 
-  echo "$as_me:2397: checking for _FILE_OFFSET_BITS value needed for large files" >&5
+  echo "$as_me:2392: checking for _FILE_OFFSET_BITS value needed for large files" >&5
 echo $ECHO_N "checking for _FILE_OFFSET_BITS value needed for large files... $ECHO_C" >&6
 if test "${ac_cv_sys_file_offset_bits+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   while :; do
   ac_cv_sys_file_offset_bits=no
   cat >conftest.$ac_ext <<_ACEOF
-#line 2405 "configure"
+#line 2400 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
     incorrectly reject 9223372036854775807.  */
@@ -2419,31 +2414,31 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2425: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2420: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2428: \$? = $ac_status" >&5
+  echo "$as_me:2423: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2431: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2426: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2434: \$? = $ac_status" >&5
+  echo "$as_me:2429: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   cat >conftest.$ac_ext <<_ACEOF
-#line 2443 "configure"
+#line 2438 "configure"
 #include "confdefs.h"
 #define _FILE_OFFSET_BITS 64
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
@@ -2458,51 +2453,51 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2464: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2459: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2467: \$? = $ac_status" >&5
+  echo "$as_me:2462: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2470: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2465: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2473: \$? = $ac_status" >&5
+  echo "$as_me:2468: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sys_file_offset_bits=64; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   break
 done
 fi
-echo "$as_me:2484: result: $ac_cv_sys_file_offset_bits" >&5
+echo "$as_me:2479: result: $ac_cv_sys_file_offset_bits" >&5
 echo "${ECHO_T}$ac_cv_sys_file_offset_bits" >&6
 if test "$ac_cv_sys_file_offset_bits" != no; then
 
 cat >>confdefs.h <<EOF
 #define _FILE_OFFSET_BITS $ac_cv_sys_file_offset_bits
 EOF
 
 fi
 rm -f conftest*
-  echo "$as_me:2494: checking for _LARGE_FILES value needed for large files" >&5
+  echo "$as_me:2489: checking for _LARGE_FILES value needed for large files" >&5
 echo $ECHO_N "checking for _LARGE_FILES value needed for large files... $ECHO_C" >&6
 if test "${ac_cv_sys_large_files+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   while :; do
   ac_cv_sys_large_files=no
   cat >conftest.$ac_ext <<_ACEOF
-#line 2502 "configure"
+#line 2497 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
     incorrectly reject 9223372036854775807.  */
@@ -2516,31 +2511,31 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2522: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2517: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2525: \$? = $ac_status" >&5
+  echo "$as_me:2520: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2528: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2523: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2531: \$? = $ac_status" >&5
+  echo "$as_me:2526: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   cat >conftest.$ac_ext <<_ACEOF
-#line 2540 "configure"
+#line 2535 "configure"
 #include "confdefs.h"
 #define _LARGE_FILES 1
 #include <sys/types.h>
  /* Check that off_t can represent 2**63 - 1 correctly.
     We can't simply define LARGE_OFF_T to be 9223372036854775807,
     since some C++ compilers masquerading as C compilers
@@ -2555,33 +2550,33 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2561: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2556: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2564: \$? = $ac_status" >&5
+  echo "$as_me:2559: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2567: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2562: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2570: \$? = $ac_status" >&5
+  echo "$as_me:2565: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sys_large_files=1; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
   break
 done
 fi
-echo "$as_me:2581: result: $ac_cv_sys_large_files" >&5
+echo "$as_me:2576: result: $ac_cv_sys_large_files" >&5
 echo "${ECHO_T}$ac_cv_sys_large_files" >&6
 if test "$ac_cv_sys_large_files" != no; then
 
 cat >>confdefs.h <<EOF
 #define _LARGE_FILES $ac_cv_sys_large_files
 EOF
@@ -2601,21 +2596,21 @@
   enableval="$enable_ipv6"
 
 fi;
 
 if test "x$enable_ipv6" != xno
 then
-	echo "$as_me:2607: checking ipv6 stack type" >&5
+	echo "$as_me:2602: checking ipv6 stack type" >&5
 echo $ECHO_N "checking ipv6 stack type... $ECHO_C" >&6
 	for i in inria kame linux-glibc linux-inet6 toshiba v6d zeta; do
 		case $i in
 		inria)
 			# http://www.kame.net/
 
 cat >conftest.$ac_ext <<_ACEOF
-#line 2615 "configure"
+#line 2610 "configure"
 #include "confdefs.h"
 
 #include <netinet/in.h>
 #ifdef IPV6_INRIA_VERSION
 yes
 #endif
@@ -2632,13 +2627,13 @@
 rm -f conftest*
 
 			;;
 		kame)
 			# http://www.kame.net/
 			cat >conftest.$ac_ext <<_ACEOF
-#line 2638 "configure"
+#line 2633 "configure"
 #include "confdefs.h"
 
 #include <netinet/in.h>
 #ifdef __KAME__
 yes
 #endif
@@ -2655,13 +2650,13 @@
 rm -f conftest*
 
 			;;
 		linux-glibc)
 			# http://www.v6.linux.or.jp/
 			cat >conftest.$ac_ext <<_ACEOF
-#line 2661 "configure"
+#line 2656 "configure"
 #include "confdefs.h"
 
 #include <features.h>
 #if defined(__GLIBC__) && __GLIBC__ >= 2 && __GLIBC_MINOR__ >= 1
 yes
 #endif
@@ -2692,13 +2687,13 @@
 
 				CFLAGS="-I/usr/inet6/include $CFLAGS"
 			fi
 			;;
 		toshiba)
 			cat >conftest.$ac_ext <<_ACEOF
-#line 2698 "configure"
+#line 2693 "configure"
 #include "confdefs.h"
 
 #include <sys/param.h>
 #ifdef _TOSHIBA_INET6
 yes
 #endif
@@ -2716,13 +2711,13 @@
 fi
 rm -f conftest*
 
 			;;
 		v6d)
 			cat >conftest.$ac_ext <<_ACEOF
-#line 2722 "configure"
+#line 2717 "configure"
 #include "confdefs.h"
 
 #include </usr/local/v6/include/sys/v6config.h>
 #ifdef __V6D__
 yes
 #endif
@@ -2740,13 +2735,13 @@
 fi
 rm -f conftest*
 
 			;;
 		zeta)
 			cat >conftest.$ac_ext <<_ACEOF
-#line 2746 "configure"
+#line 2741 "configure"
 #include "confdefs.h"
 
 #include <sys/param.h>
 #ifdef _ZETA_MINAMI_INET6
 yes
 #endif
@@ -2767,24 +2762,24 @@
 			;;
 		esac
 		if test "$ipv6type" != "unknown"; then
 			break
 		fi
 	done
-	echo "$as_me:2773: result: $ipv6type" >&5
+	echo "$as_me:2768: result: $ipv6type" >&5
 echo "${ECHO_T}$ipv6type" >&6
 
-	echo "$as_me:2776: checking for library containing getaddrinfo" >&5
+	echo "$as_me:2771: checking for library containing getaddrinfo" >&5
 echo $ECHO_N "checking for library containing getaddrinfo... $ECHO_C" >&6
 if test "${ac_cv_search_getaddrinfo+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_func_search_save_LIBS=$LIBS
 ac_cv_search_getaddrinfo=no
 cat >conftest.$ac_ext <<_ACEOF
-#line 2784 "configure"
+#line 2779 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -2797,34 +2792,34 @@
 getaddrinfo ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:2803: \"$ac_link\"") >&5
+if { (eval echo "$as_me:2798: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:2806: \$? = $ac_status" >&5
+  echo "$as_me:2801: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:2809: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2804: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2812: \$? = $ac_status" >&5
+  echo "$as_me:2807: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_search_getaddrinfo="none required"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 if test "$ac_cv_search_getaddrinfo" = no; then
   for ac_lib in inet6; do
     LIBS="-l$ac_lib  $ac_func_search_save_LIBS"
     cat >conftest.$ac_ext <<_ACEOF
-#line 2824 "configure"
+#line 2819 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -2837,52 +2832,52 @@
 getaddrinfo ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:2843: \"$ac_link\"") >&5
+if { (eval echo "$as_me:2838: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:2846: \$? = $ac_status" >&5
+  echo "$as_me:2841: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:2849: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2844: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2852: \$? = $ac_status" >&5
+  echo "$as_me:2847: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_search_getaddrinfo="-l$ac_lib"
 break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
   done
 fi
 LIBS=$ac_func_search_save_LIBS
 fi
-echo "$as_me:2865: result: $ac_cv_search_getaddrinfo" >&5
+echo "$as_me:2860: result: $ac_cv_search_getaddrinfo" >&5
 echo "${ECHO_T}$ac_cv_search_getaddrinfo" >&6
 if test "$ac_cv_search_getaddrinfo" != no; then
   test "$ac_cv_search_getaddrinfo" = "none required" || LIBS="$ac_cv_search_getaddrinfo $LIBS"
 
 fi
 
 fi
 
-echo "$as_me:2874: checking whether byte ordering is bigendian" >&5
+echo "$as_me:2869: checking whether byte ordering is bigendian" >&5
 echo $ECHO_N "checking whether byte ordering is bigendian... $ECHO_C" >&6
 if test "${ac_cv_c_bigendian+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_cv_c_bigendian=unknown
 # See if sys/param.h defines the BYTE_ORDER macro.
 cat >conftest.$ac_ext <<_ACEOF
-#line 2882 "configure"
+#line 2877 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/param.h>
 
 int
 main ()
@@ -2893,26 +2888,26 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2899: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2894: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2902: \$? = $ac_status" >&5
+  echo "$as_me:2897: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2905: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2900: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2908: \$? = $ac_status" >&5
+  echo "$as_me:2903: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   # It does; now see whether it defined to BIG_ENDIAN or not.
 cat >conftest.$ac_ext <<_ACEOF
-#line 2912 "configure"
+#line 2907 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/param.h>
 
 int
 main ()
@@ -2923,22 +2918,22 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:2929: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:2924: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:2932: \$? = $ac_status" >&5
+  echo "$as_me:2927: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:2935: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2930: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2938: \$? = $ac_status" >&5
+  echo "$as_me:2933: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_c_bigendian=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_c_bigendian=no
@@ -2948,18 +2943,18 @@
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 if test $ac_cv_c_bigendian = unknown; then
 if test "$cross_compiling" = yes; then
-  { { echo "$as_me:2954: error: cannot run test program while cross compiling" >&5
+  { { echo "$as_me:2949: error: cannot run test program while cross compiling" >&5
 echo "$as_me: error: cannot run test program while cross compiling" >&2;}
    { (exit 1); exit 1; }; }
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 2959 "configure"
+#line 2954 "configure"
 #include "confdefs.h"
 int
 main ()
 {
   /* Are we little or big endian?  From Harbison&Steele.  */
   union
@@ -2969,53 +2964,53 @@
   } u;
   u.l = 1;
   exit (u.c[sizeof (long) - 1] == 1);
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:2975: \"$ac_link\"") >&5
+if { (eval echo "$as_me:2970: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:2978: \$? = $ac_status" >&5
+  echo "$as_me:2973: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:2980: \"$ac_try\"") >&5
+  { (eval echo "$as_me:2975: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:2983: \$? = $ac_status" >&5
+  echo "$as_me:2978: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_c_bigendian=no
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_c_bigendian=yes
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
 fi
-echo "$as_me:2996: result: $ac_cv_c_bigendian" >&5
+echo "$as_me:2991: result: $ac_cv_c_bigendian" >&5
 echo "${ECHO_T}$ac_cv_c_bigendian" >&6
 if test $ac_cv_c_bigendian = yes; then
 
 cat >>confdefs.h <<\EOF
 #define WORDS_BIGENDIAN 1
 EOF
 
 fi
 
 ac_header_dirent=no
 for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h; do
   as_ac_Header=`echo "ac_cv_header_dirent_$ac_hdr" | $as_tr_sh`
-echo "$as_me:3009: checking for $ac_hdr that defines DIR" >&5
+echo "$as_me:3004: checking for $ac_hdr that defines DIR" >&5
 echo $ECHO_N "checking for $ac_hdr that defines DIR... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3015 "configure"
+#line 3010 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <$ac_hdr>
 
 int
 main ()
@@ -3024,53 +3019,53 @@
 return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3030: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3025: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3033: \$? = $ac_status" >&5
+  echo "$as_me:3028: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3036: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3031: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3039: \$? = $ac_status" >&5
+  echo "$as_me:3034: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 eval "$as_ac_Header=no"
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:3049: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "$as_me:3044: result: `eval echo '${'$as_ac_Header'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_hdr" | $as_tr_cpp` 1
 EOF
 
 ac_header_dirent=$ac_hdr; break
 fi
 
 done
 # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
 if test $ac_header_dirent = dirent.h; then
-  echo "$as_me:3062: checking for opendir in -ldir" >&5
+  echo "$as_me:3057: checking for opendir in -ldir" >&5
 echo $ECHO_N "checking for opendir in -ldir... $ECHO_C" >&6
 if test "${ac_cv_lib_dir_opendir+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-ldir  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 3070 "configure"
+#line 3065 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -3083,48 +3078,48 @@
 opendir ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:3089: \"$ac_link\"") >&5
+if { (eval echo "$as_me:3084: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:3092: \$? = $ac_status" >&5
+  echo "$as_me:3087: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:3095: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3090: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3098: \$? = $ac_status" >&5
+  echo "$as_me:3093: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_dir_opendir=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_dir_opendir=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:3109: result: $ac_cv_lib_dir_opendir" >&5
+echo "$as_me:3104: result: $ac_cv_lib_dir_opendir" >&5
 echo "${ECHO_T}$ac_cv_lib_dir_opendir" >&6
 if test $ac_cv_lib_dir_opendir = yes; then
   LIBS="$LIBS -ldir"
 fi
 
 else
-  echo "$as_me:3116: checking for opendir in -lx" >&5
+  echo "$as_me:3111: checking for opendir in -lx" >&5
 echo $ECHO_N "checking for opendir in -lx... $ECHO_C" >&6
 if test "${ac_cv_lib_x_opendir+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lx  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 3124 "configure"
+#line 3119 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -3137,47 +3132,47 @@
 opendir ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:3143: \"$ac_link\"") >&5
+if { (eval echo "$as_me:3138: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:3146: \$? = $ac_status" >&5
+  echo "$as_me:3141: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:3149: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3144: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3152: \$? = $ac_status" >&5
+  echo "$as_me:3147: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_x_opendir=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_x_opendir=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:3163: result: $ac_cv_lib_x_opendir" >&5
+echo "$as_me:3158: result: $ac_cv_lib_x_opendir" >&5
 echo "${ECHO_T}$ac_cv_lib_x_opendir" >&6
 if test $ac_cv_lib_x_opendir = yes; then
   LIBS="$LIBS -lx"
 fi
 
 fi
 
-echo "$as_me:3171: checking whether time.h and sys/time.h may both be included" >&5
+echo "$as_me:3166: checking whether time.h and sys/time.h may both be included" >&5
 echo $ECHO_N "checking whether time.h and sys/time.h may both be included... $ECHO_C" >&6
 if test "${ac_cv_header_time+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3177 "configure"
+#line 3172 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/time.h>
 #include <time.h>
 
 int
@@ -3187,48 +3182,48 @@
 return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3193: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3188: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3196: \$? = $ac_status" >&5
+  echo "$as_me:3191: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3199: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3194: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3202: \$? = $ac_status" >&5
+  echo "$as_me:3197: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_header_time=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_header_time=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:3212: result: $ac_cv_header_time" >&5
+echo "$as_me:3207: result: $ac_cv_header_time" >&5
 echo "${ECHO_T}$ac_cv_header_time" >&6
 if test $ac_cv_header_time = yes; then
 
 cat >>confdefs.h <<\EOF
 #define TIME_WITH_SYS_TIME 1
 EOF
 
 fi
 
-echo "$as_me:3222: checking for sys/wait.h that is POSIX.1 compatible" >&5
+echo "$as_me:3217: checking for sys/wait.h that is POSIX.1 compatible" >&5
 echo $ECHO_N "checking for sys/wait.h that is POSIX.1 compatible... $ECHO_C" >&6
 if test "${ac_cv_header_sys_wait_h+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3228 "configure"
+#line 3223 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/wait.h>
 #ifndef WEXITSTATUS
 # define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
 #endif
@@ -3244,61 +3239,61 @@
   s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3250: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3245: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3253: \$? = $ac_status" >&5
+  echo "$as_me:3248: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3256: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3251: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3259: \$? = $ac_status" >&5
+  echo "$as_me:3254: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_header_sys_wait_h=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_header_sys_wait_h=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:3269: result: $ac_cv_header_sys_wait_h" >&5
+echo "$as_me:3264: result: $ac_cv_header_sys_wait_h" >&5
 echo "${ECHO_T}$ac_cv_header_sys_wait_h" >&6
 if test $ac_cv_header_sys_wait_h = yes; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_SYS_WAIT_H 1
 EOF
 
 fi
 
 for ac_header in sys/fcntl.h sys/select.h fcntl.h sys/time.h sys/unistd.h unistd.h utime.h grp.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-echo "$as_me:3282: checking for $ac_header" >&5
+echo "$as_me:3277: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3288 "configure"
+#line 3283 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:3292: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:3287: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:3298: \$? = $ac_status" >&5
+  echo "$as_me:3293: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -3311,42 +3306,42 @@
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
   eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:3317: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "$as_me:3312: result: `eval echo '${'$as_ac_Header'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 for ac_header in compat.h sys/param.h ctype.h sys/wait.h sys/ioctl.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-echo "$as_me:3330: checking for $ac_header" >&5
+echo "$as_me:3325: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3336 "configure"
+#line 3331 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:3340: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:3335: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:3346: \$? = $ac_status" >&5
+  echo "$as_me:3341: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -3359,42 +3354,42 @@
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
   eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:3365: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "$as_me:3360: result: `eval echo '${'$as_ac_Header'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 for ac_header in sys/filio.h string.h stdlib.h sys/socket.h sys/mode.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-echo "$as_me:3378: checking for $ac_header" >&5
+echo "$as_me:3373: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3384 "configure"
+#line 3379 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:3388: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:3383: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:3394: \$? = $ac_status" >&5
+  echo "$as_me:3389: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -3407,42 +3402,42 @@
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
   eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:3413: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "$as_me:3408: result: `eval echo '${'$as_ac_Header'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 for ac_header in glob.h alloca.h mcheck.h sys/sysctl.h arpa/inet.h arpa/nameser.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-echo "$as_me:3426: checking for $ac_header" >&5
+echo "$as_me:3421: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3432 "configure"
+#line 3427 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:3436: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:3431: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:3442: \$? = $ac_status" >&5
+  echo "$as_me:3437: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -3455,42 +3450,42 @@
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
   eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:3461: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "$as_me:3456: result: `eval echo '${'$as_ac_Header'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 for ac_header in netdb.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-echo "$as_me:3474: checking for $ac_header" >&5
+echo "$as_me:3469: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3480 "configure"
+#line 3475 "configure"
 #include "confdefs.h"
 #include <$ac_header>
 _ACEOF
-if { (eval echo "$as_me:3484: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:3479: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:3490: \$? = $ac_status" >&5
+  echo "$as_me:3485: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -3503,43 +3498,43 @@
   echo "$as_me: failed program was:" >&5
   cat conftest.$ac_ext >&5
   eval "$as_ac_Header=no"
 fi
 rm -f conftest.err conftest.$ac_ext
 fi
-echo "$as_me:3509: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "$as_me:3504: result: `eval echo '${'$as_ac_Header'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
-echo "$as_me:3519: checking for ANSI C header files" >&5
+echo "$as_me:3514: checking for ANSI C header files" >&5
 echo $ECHO_N "checking for ANSI C header files... $ECHO_C" >&6
 if test "${ac_cv_header_stdc+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3525 "configure"
+#line 3520 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <stdarg.h>
 #include <string.h>
 #include <float.h>
 
 _ACEOF
-if { (eval echo "$as_me:3533: \"$ac_cpp conftest.$ac_ext\"") >&5
+if { (eval echo "$as_me:3528: \"$ac_cpp conftest.$ac_ext\"") >&5
   (eval $ac_cpp conftest.$ac_ext) 2>conftest.er1
   ac_status=$?
   egrep -v '^ *\+' conftest.er1 >conftest.err
   rm -f conftest.er1
   cat conftest.err >&5
-  echo "$as_me:3539: \$? = $ac_status" >&5
+  echo "$as_me:3534: \$? = $ac_status" >&5
   (exit $ac_status); } >/dev/null; then
   if test -s conftest.err; then
     ac_cpp_err=$ac_c_preproc_warn_flag
   else
     ac_cpp_err=
   fi
@@ -3555,13 +3550,13 @@
 fi
 rm -f conftest.err conftest.$ac_ext
 
 if test $ac_cv_header_stdc = yes; then
   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
   cat >conftest.$ac_ext <<_ACEOF
-#line 3561 "configure"
+#line 3556 "configure"
 #include "confdefs.h"
 #include <string.h>
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "memchr" >/dev/null 2>&1; then
@@ -3573,13 +3568,13 @@
 
 fi
 
 if test $ac_cv_header_stdc = yes; then
   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
   cat >conftest.$ac_ext <<_ACEOF
-#line 3579 "configure"
+#line 3574 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "free" >/dev/null 2>&1; then
@@ -3594,13 +3589,13 @@
 if test $ac_cv_header_stdc = yes; then
   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
   if test "$cross_compiling" = yes; then
   :
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3600 "configure"
+#line 3595 "configure"
 #include "confdefs.h"
 #include <ctype.h>
 #if ((' ' & 0x0FF) == 0x020)
 # define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
 # define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
 #else
@@ -3620,34 +3615,34 @@
         || toupper (i) != TOUPPER (i))
       exit(2);
   exit (0);
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:3626: \"$ac_link\"") >&5
+if { (eval echo "$as_me:3621: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:3629: \$? = $ac_status" >&5
+  echo "$as_me:3624: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:3631: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3626: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3634: \$? = $ac_status" >&5
+  echo "$as_me:3629: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   :
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_header_stdc=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
 fi
-echo "$as_me:3647: result: $ac_cv_header_stdc" >&5
+echo "$as_me:3642: result: $ac_cv_header_stdc" >&5
 echo "${ECHO_T}$ac_cv_header_stdc" >&6
 if test $ac_cv_header_stdc = yes; then
 
 cat >>confdefs.h <<\EOF
 #define STDC_HEADERS 1
 EOF
@@ -3657,60 +3652,60 @@
 # On IRIX 5.3, sys/types and inttypes.h are conflicting.
 
 for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
                   inttypes.h stdint.h unistd.h
 do
 as_ac_Header=`echo "ac_cv_header_$ac_header" | $as_tr_sh`
-echo "$as_me:3663: checking for $ac_header" >&5
+echo "$as_me:3658: checking for $ac_header" >&5
 echo $ECHO_N "checking for $ac_header... $ECHO_C" >&6
 if eval "test \"\${$as_ac_Header+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3669 "configure"
+#line 3664 "configure"
 #include "confdefs.h"
 $ac_includes_default
 #include <$ac_header>
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3675: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3670: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3678: \$? = $ac_status" >&5
+  echo "$as_me:3673: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3681: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3676: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3684: \$? = $ac_status" >&5
+  echo "$as_me:3679: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   eval "$as_ac_Header=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 eval "$as_ac_Header=no"
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:3694: result: `eval echo '${'$as_ac_Header'}'`" >&5
+echo "$as_me:3689: result: `eval echo '${'$as_ac_Header'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_Header'}'`" >&6
 if test `eval echo '${'$as_ac_Header'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_header" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
-echo "$as_me:3704: checking for int" >&5
+echo "$as_me:3699: checking for int" >&5
 echo $ECHO_N "checking for int... $ECHO_C" >&6
 if test "${ac_cv_type_int+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3710 "configure"
+#line 3705 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((int *) 0)
@@ -3719,91 +3714,91 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3725: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3720: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3728: \$? = $ac_status" >&5
+  echo "$as_me:3723: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3731: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3726: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3734: \$? = $ac_status" >&5
+  echo "$as_me:3729: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_int=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_int=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:3744: result: $ac_cv_type_int" >&5
+echo "$as_me:3739: result: $ac_cv_type_int" >&5
 echo "${ECHO_T}$ac_cv_type_int" >&6
 
-echo "$as_me:3747: checking size of int" >&5
+echo "$as_me:3742: checking size of int" >&5
 echo $ECHO_N "checking size of int... $ECHO_C" >&6
 if test "${ac_cv_sizeof_int+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$ac_cv_type_int" = yes; then
   if test "$cross_compiling" = yes; then
   # Depending upon the size, compute the lo and hi bounds.
 cat >conftest.$ac_ext <<_ACEOF
-#line 3756 "configure"
+#line 3751 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (int)) >= 0)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3768: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3763: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3771: \$? = $ac_status" >&5
+  echo "$as_me:3766: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3774: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3769: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3777: \$? = $ac_status" >&5
+  echo "$as_me:3772: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=0 ac_mid=0
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 3782 "configure"
+#line 3777 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (int)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3794: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3789: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3797: \$? = $ac_status" >&5
+  echo "$as_me:3792: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3800: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3795: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3803: \$? = $ac_status" >&5
+  echo "$as_me:3798: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`; ac_mid=`expr 2 '*' $ac_mid + 1`
@@ -3813,34 +3808,34 @@
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=-1 ac_mid=-1
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 3819 "configure"
+#line 3814 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (int)) >= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3831: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3826: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3834: \$? = $ac_status" >&5
+  echo "$as_me:3829: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3837: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3832: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3840: \$? = $ac_status" >&5
+  echo "$as_me:3835: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=`expr $ac_mid - 1`; ac_mid=`expr 2 '*' $ac_mid`
@@ -3850,52 +3845,52 @@
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 # Binary search between lo and hi bounds.
 while test "x$ac_lo" != "x$ac_hi"; do
   ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
   cat >conftest.$ac_ext <<_ACEOF
-#line 3856 "configure"
+#line 3851 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (int)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3868: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3863: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3871: \$? = $ac_status" >&5
+  echo "$as_me:3866: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3874: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3869: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3877: \$? = $ac_status" >&5
+  echo "$as_me:3872: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 done
 ac_cv_sizeof_int=$ac_lo
 else
   if test "$cross_compiling" = yes; then
-  { { echo "$as_me:3890: error: cannot run test program while cross compiling" >&5
+  { { echo "$as_me:3885: error: cannot run test program while cross compiling" >&5
 echo "$as_me: error: cannot run test program while cross compiling" >&2;}
    { (exit 1); exit 1; }; }
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3895 "configure"
+#line 3890 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 FILE *f = fopen ("conftest.val", "w");
@@ -3905,21 +3900,21 @@
 fclose (f);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:3911: \"$ac_link\"") >&5
+if { (eval echo "$as_me:3906: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:3914: \$? = $ac_status" >&5
+  echo "$as_me:3909: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:3916: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3911: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3919: \$? = $ac_status" >&5
+  echo "$as_me:3914: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sizeof_int=`cat conftest.val`
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
@@ -3929,25 +3924,25 @@
 fi
 rm -f conftest.val
 else
   ac_cv_sizeof_int=0
 fi
 fi
-echo "$as_me:3935: result: $ac_cv_sizeof_int" >&5
+echo "$as_me:3930: result: $ac_cv_sizeof_int" >&5
 echo "${ECHO_T}$ac_cv_sizeof_int" >&6
 cat >>confdefs.h <<EOF
 #define SIZEOF_INT $ac_cv_sizeof_int
 EOF
 
-echo "$as_me:3941: checking for long" >&5
+echo "$as_me:3936: checking for long" >&5
 echo $ECHO_N "checking for long... $ECHO_C" >&6
 if test "${ac_cv_type_long+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 3947 "configure"
+#line 3942 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((long *) 0)
@@ -3956,91 +3951,91 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:3962: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:3957: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:3965: \$? = $ac_status" >&5
+  echo "$as_me:3960: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:3968: \"$ac_try\"") >&5
+  { (eval echo "$as_me:3963: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:3971: \$? = $ac_status" >&5
+  echo "$as_me:3966: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_long=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_long=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:3981: result: $ac_cv_type_long" >&5
+echo "$as_me:3976: result: $ac_cv_type_long" >&5
 echo "${ECHO_T}$ac_cv_type_long" >&6
 
-echo "$as_me:3984: checking size of long" >&5
+echo "$as_me:3979: checking size of long" >&5
 echo $ECHO_N "checking size of long... $ECHO_C" >&6
 if test "${ac_cv_sizeof_long+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$ac_cv_type_long" = yes; then
   if test "$cross_compiling" = yes; then
   # Depending upon the size, compute the lo and hi bounds.
 cat >conftest.$ac_ext <<_ACEOF
-#line 3993 "configure"
+#line 3988 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long)) >= 0)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4005: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4000: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4008: \$? = $ac_status" >&5
+  echo "$as_me:4003: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4011: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4006: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4014: \$? = $ac_status" >&5
+  echo "$as_me:4009: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=0 ac_mid=0
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 4019 "configure"
+#line 4014 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4031: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4026: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4034: \$? = $ac_status" >&5
+  echo "$as_me:4029: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4037: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4032: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4040: \$? = $ac_status" >&5
+  echo "$as_me:4035: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`; ac_mid=`expr 2 '*' $ac_mid + 1`
@@ -4050,34 +4045,34 @@
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=-1 ac_mid=-1
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 4056 "configure"
+#line 4051 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long)) >= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4068: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4063: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4071: \$? = $ac_status" >&5
+  echo "$as_me:4066: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4074: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4069: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4077: \$? = $ac_status" >&5
+  echo "$as_me:4072: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=`expr $ac_mid - 1`; ac_mid=`expr 2 '*' $ac_mid`
@@ -4087,52 +4082,52 @@
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 # Binary search between lo and hi bounds.
 while test "x$ac_lo" != "x$ac_hi"; do
   ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
   cat >conftest.$ac_ext <<_ACEOF
-#line 4093 "configure"
+#line 4088 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (long)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4105: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4100: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4108: \$? = $ac_status" >&5
+  echo "$as_me:4103: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4111: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4106: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4114: \$? = $ac_status" >&5
+  echo "$as_me:4109: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 done
 ac_cv_sizeof_long=$ac_lo
 else
   if test "$cross_compiling" = yes; then
-  { { echo "$as_me:4127: error: cannot run test program while cross compiling" >&5
+  { { echo "$as_me:4122: error: cannot run test program while cross compiling" >&5
 echo "$as_me: error: cannot run test program while cross compiling" >&2;}
    { (exit 1); exit 1; }; }
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4132 "configure"
+#line 4127 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 FILE *f = fopen ("conftest.val", "w");
@@ -4142,21 +4137,21 @@
 fclose (f);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:4148: \"$ac_link\"") >&5
+if { (eval echo "$as_me:4143: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:4151: \$? = $ac_status" >&5
+  echo "$as_me:4146: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:4153: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4148: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4156: \$? = $ac_status" >&5
+  echo "$as_me:4151: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sizeof_long=`cat conftest.val`
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
@@ -4166,25 +4161,25 @@
 fi
 rm -f conftest.val
 else
   ac_cv_sizeof_long=0
 fi
 fi
-echo "$as_me:4172: result: $ac_cv_sizeof_long" >&5
+echo "$as_me:4167: result: $ac_cv_sizeof_long" >&5
 echo "${ECHO_T}$ac_cv_sizeof_long" >&6
 cat >>confdefs.h <<EOF
 #define SIZEOF_LONG $ac_cv_sizeof_long
 EOF
 
-echo "$as_me:4178: checking for short" >&5
+echo "$as_me:4173: checking for short" >&5
 echo $ECHO_N "checking for short... $ECHO_C" >&6
 if test "${ac_cv_type_short+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4184 "configure"
+#line 4179 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((short *) 0)
@@ -4193,91 +4188,91 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4199: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4194: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4202: \$? = $ac_status" >&5
+  echo "$as_me:4197: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4205: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4200: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4208: \$? = $ac_status" >&5
+  echo "$as_me:4203: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_short=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_short=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4218: result: $ac_cv_type_short" >&5
+echo "$as_me:4213: result: $ac_cv_type_short" >&5
 echo "${ECHO_T}$ac_cv_type_short" >&6
 
-echo "$as_me:4221: checking size of short" >&5
+echo "$as_me:4216: checking size of short" >&5
 echo $ECHO_N "checking size of short... $ECHO_C" >&6
 if test "${ac_cv_sizeof_short+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$ac_cv_type_short" = yes; then
   if test "$cross_compiling" = yes; then
   # Depending upon the size, compute the lo and hi bounds.
 cat >conftest.$ac_ext <<_ACEOF
-#line 4230 "configure"
+#line 4225 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (short)) >= 0)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4242: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4237: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4245: \$? = $ac_status" >&5
+  echo "$as_me:4240: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4248: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4243: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4251: \$? = $ac_status" >&5
+  echo "$as_me:4246: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=0 ac_mid=0
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 4256 "configure"
+#line 4251 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (short)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4268: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4263: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4271: \$? = $ac_status" >&5
+  echo "$as_me:4266: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4274: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4269: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4277: \$? = $ac_status" >&5
+  echo "$as_me:4272: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`; ac_mid=`expr 2 '*' $ac_mid + 1`
@@ -4287,34 +4282,34 @@
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=-1 ac_mid=-1
   while :; do
     cat >conftest.$ac_ext <<_ACEOF
-#line 4293 "configure"
+#line 4288 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (short)) >= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4305: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4300: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4308: \$? = $ac_status" >&5
+  echo "$as_me:4303: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4311: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4306: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4314: \$? = $ac_status" >&5
+  echo "$as_me:4309: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_lo=$ac_mid; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_hi=`expr $ac_mid - 1`; ac_mid=`expr 2 '*' $ac_mid`
@@ -4324,52 +4319,52 @@
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 # Binary search between lo and hi bounds.
 while test "x$ac_lo" != "x$ac_hi"; do
   ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
   cat >conftest.$ac_ext <<_ACEOF
-#line 4330 "configure"
+#line 4325 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 int _array_ [1 - 2 * !((sizeof (short)) <= $ac_mid)]
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4342: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4337: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4345: \$? = $ac_status" >&5
+  echo "$as_me:4340: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4348: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4343: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4351: \$? = $ac_status" >&5
+  echo "$as_me:4346: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_hi=$ac_mid
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_lo=`expr $ac_mid + 1`
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 done
 ac_cv_sizeof_short=$ac_lo
 else
   if test "$cross_compiling" = yes; then
-  { { echo "$as_me:4364: error: cannot run test program while cross compiling" >&5
+  { { echo "$as_me:4359: error: cannot run test program while cross compiling" >&5
 echo "$as_me: error: cannot run test program while cross compiling" >&2;}
    { (exit 1); exit 1; }; }
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4369 "configure"
+#line 4364 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 FILE *f = fopen ("conftest.val", "w");
@@ -4379,21 +4374,21 @@
 fclose (f);
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:4385: \"$ac_link\"") >&5
+if { (eval echo "$as_me:4380: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:4388: \$? = $ac_status" >&5
+  echo "$as_me:4383: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:4390: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4385: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4393: \$? = $ac_status" >&5
+  echo "$as_me:4388: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_sizeof_short=`cat conftest.val`
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
@@ -4403,56 +4398,56 @@
 fi
 rm -f conftest.val
 else
   ac_cv_sizeof_short=0
 fi
 fi
-echo "$as_me:4409: result: $ac_cv_sizeof_short" >&5
+echo "$as_me:4404: result: $ac_cv_sizeof_short" >&5
 echo "${ECHO_T}$ac_cv_sizeof_short" >&6
 cat >>confdefs.h <<EOF
 #define SIZEOF_SHORT $ac_cv_sizeof_short
 EOF
 
-echo "$as_me:4415: checking for inline" >&5
+echo "$as_me:4410: checking for inline" >&5
 echo $ECHO_N "checking for inline... $ECHO_C" >&6
 if test "${ac_cv_c_inline+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_cv_c_inline=no
 for ac_kw in inline __inline__ __inline; do
   cat >conftest.$ac_ext <<_ACEOF
-#line 4423 "configure"
+#line 4418 "configure"
 #include "confdefs.h"
 #ifndef __cplusplus
 static $ac_kw int static_foo () {return 0; }
 $ac_kw int foo () {return 0; }
 #endif
 
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4432: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4427: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4435: \$? = $ac_status" >&5
+  echo "$as_me:4430: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4438: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4433: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4441: \$? = $ac_status" >&5
+  echo "$as_me:4436: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_c_inline=$ac_kw; break
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 done
 
 fi
-echo "$as_me:4452: result: $ac_cv_c_inline" >&5
+echo "$as_me:4447: result: $ac_cv_c_inline" >&5
 echo "${ECHO_T}$ac_cv_c_inline" >&6
 case $ac_cv_c_inline in
   inline | yes) ;;
   no)
 cat >>confdefs.h <<\EOF
 #define inline
@@ -4461,19 +4456,19 @@
   *)  cat >>confdefs.h <<EOF
 #define inline $ac_cv_c_inline
 EOF
  ;;
 esac
 
-echo "$as_me:4467: checking return type of signal handlers" >&5
+echo "$as_me:4462: checking return type of signal handlers" >&5
 echo $ECHO_N "checking return type of signal handlers... $ECHO_C" >&6
 if test "${ac_cv_type_signal+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4473 "configure"
+#line 4468 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <signal.h>
 #ifdef signal
 # undef signal
 #endif
@@ -4489,45 +4484,45 @@
 int i;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4495: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4490: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4498: \$? = $ac_status" >&5
+  echo "$as_me:4493: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4501: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4496: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4504: \$? = $ac_status" >&5
+  echo "$as_me:4499: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_signal=void
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_signal=int
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4514: result: $ac_cv_type_signal" >&5
+echo "$as_me:4509: result: $ac_cv_type_signal" >&5
 echo "${ECHO_T}$ac_cv_type_signal" >&6
 
 cat >>confdefs.h <<EOF
 #define RETSIGTYPE $ac_cv_type_signal
 EOF
 
-echo "$as_me:4521: checking for uid_t in sys/types.h" >&5
+echo "$as_me:4516: checking for uid_t in sys/types.h" >&5
 echo $ECHO_N "checking for uid_t in sys/types.h... $ECHO_C" >&6
 if test "${ac_cv_type_uid_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4527 "configure"
+#line 4522 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "uid_t" >/dev/null 2>&1; then
@@ -4535,13 +4530,13 @@
 else
   ac_cv_type_uid_t=no
 fi
 rm -f conftest*
 
 fi
-echo "$as_me:4541: result: $ac_cv_type_uid_t" >&5
+echo "$as_me:4536: result: $ac_cv_type_uid_t" >&5
 echo "${ECHO_T}$ac_cv_type_uid_t" >&6
 if test $ac_cv_type_uid_t = no; then
 
 cat >>confdefs.h <<\EOF
 #define uid_t int
 EOF
@@ -4549,19 +4544,19 @@
 cat >>confdefs.h <<\EOF
 #define gid_t int
 EOF
 
 fi
 
-echo "$as_me:4555: checking for mode_t" >&5
+echo "$as_me:4550: checking for mode_t" >&5
 echo $ECHO_N "checking for mode_t... $ECHO_C" >&6
 if test "${ac_cv_type_mode_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4561 "configure"
+#line 4556 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((mode_t *) 0)
@@ -4570,50 +4565,50 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4576: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4571: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4579: \$? = $ac_status" >&5
+  echo "$as_me:4574: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4582: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4577: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4585: \$? = $ac_status" >&5
+  echo "$as_me:4580: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_mode_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_mode_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4595: result: $ac_cv_type_mode_t" >&5
+echo "$as_me:4590: result: $ac_cv_type_mode_t" >&5
 echo "${ECHO_T}$ac_cv_type_mode_t" >&6
 if test $ac_cv_type_mode_t = yes; then
   :
 else
 
 cat >>confdefs.h <<EOF
 #define mode_t int
 EOF
 
 fi
 
-echo "$as_me:4607: checking for off_t" >&5
+echo "$as_me:4602: checking for off_t" >&5
 echo $ECHO_N "checking for off_t... $ECHO_C" >&6
 if test "${ac_cv_type_off_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4613 "configure"
+#line 4608 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((off_t *) 0)
@@ -4622,50 +4617,50 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4628: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4623: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4631: \$? = $ac_status" >&5
+  echo "$as_me:4626: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4634: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4629: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4637: \$? = $ac_status" >&5
+  echo "$as_me:4632: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_off_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_off_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4647: result: $ac_cv_type_off_t" >&5
+echo "$as_me:4642: result: $ac_cv_type_off_t" >&5
 echo "${ECHO_T}$ac_cv_type_off_t" >&6
 if test $ac_cv_type_off_t = yes; then
   :
 else
 
 cat >>confdefs.h <<EOF
 #define off_t long
 EOF
 
 fi
 
-echo "$as_me:4659: checking for size_t" >&5
+echo "$as_me:4654: checking for size_t" >&5
 echo $ECHO_N "checking for size_t... $ECHO_C" >&6
 if test "${ac_cv_type_size_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4665 "configure"
+#line 4660 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((size_t *) 0)
@@ -4674,50 +4669,50 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4680: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4675: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4683: \$? = $ac_status" >&5
+  echo "$as_me:4678: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4686: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4681: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4689: \$? = $ac_status" >&5
+  echo "$as_me:4684: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_size_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_size_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4699: result: $ac_cv_type_size_t" >&5
+echo "$as_me:4694: result: $ac_cv_type_size_t" >&5
 echo "${ECHO_T}$ac_cv_type_size_t" >&6
 if test $ac_cv_type_size_t = yes; then
   :
 else
 
 cat >>confdefs.h <<EOF
 #define size_t unsigned
 EOF
 
 fi
 
-echo "$as_me:4711: checking for pid_t" >&5
+echo "$as_me:4706: checking for pid_t" >&5
 echo $ECHO_N "checking for pid_t... $ECHO_C" >&6
 if test "${ac_cv_type_pid_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4717 "configure"
+#line 4712 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((pid_t *) 0)
@@ -4726,53 +4721,53 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4732: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4727: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4735: \$? = $ac_status" >&5
+  echo "$as_me:4730: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4738: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4733: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4741: \$? = $ac_status" >&5
+  echo "$as_me:4736: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_pid_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_pid_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4751: result: $ac_cv_type_pid_t" >&5
+echo "$as_me:4746: result: $ac_cv_type_pid_t" >&5
 echo "${ECHO_T}$ac_cv_type_pid_t" >&6
 if test $ac_cv_type_pid_t = yes; then
   :
 else
 
 cat >>confdefs.h <<EOF
 #define pid_t int
 EOF
 
 fi
 
-echo "$as_me:4763: checking type of array argument to getgroups" >&5
+echo "$as_me:4758: checking type of array argument to getgroups" >&5
 echo $ECHO_N "checking type of array argument to getgroups... $ECHO_C" >&6
 if test "${ac_cv_type_getgroups+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   if test "$cross_compiling" = yes; then
   ac_cv_type_getgroups=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4772 "configure"
+#line 4767 "configure"
 #include "confdefs.h"
 /* Thanks to Mike Rendell for this test.  */
 #include <sys/types.h>
 #define NGID 256
 #undef MAX
 #define MAX(x, y) ((x) > (y) ? (x) : (y))
@@ -4792,34 +4787,34 @@
   /* Exit non-zero if getgroups seems to require an array of ints.  This
      happens when gid_t is short but getgroups modifies an array of ints.  */
   exit ((n > 0 && gidset[n] != val.gval) ? 1 : 0);
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:4798: \"$ac_link\"") >&5
+if { (eval echo "$as_me:4793: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:4801: \$? = $ac_status" >&5
+  echo "$as_me:4796: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:4803: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4798: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4806: \$? = $ac_status" >&5
+  echo "$as_me:4801: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_getgroups=gid_t
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_getgroups=int
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 if test $ac_cv_type_getgroups = cross; then
         cat >conftest.$ac_ext <<_ACEOF
-#line 4819 "configure"
+#line 4814 "configure"
 #include "confdefs.h"
 #include <unistd.h>
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
   egrep "getgroups.*int.*gid_t" >/dev/null 2>&1; then
@@ -4828,26 +4823,26 @@
   ac_cv_type_getgroups=int
 fi
 rm -f conftest*
 
 fi
 fi
-echo "$as_me:4834: result: $ac_cv_type_getgroups" >&5
+echo "$as_me:4829: result: $ac_cv_type_getgroups" >&5
 echo "${ECHO_T}$ac_cv_type_getgroups" >&6
 
 cat >>confdefs.h <<EOF
 #define GETGROUPS_T $ac_cv_type_getgroups
 EOF
 
-echo "$as_me:4841: checking for struct stat.st_rdev" >&5
+echo "$as_me:4836: checking for struct stat.st_rdev" >&5
 echo $ECHO_N "checking for struct stat.st_rdev... $ECHO_C" >&6
 if test "${ac_cv_member_struct_stat_st_rdev+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4847 "configure"
+#line 4842 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 static struct stat ac_aggr;
@@ -4855,48 +4850,48 @@
 return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4861: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4856: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4864: \$? = $ac_status" >&5
+  echo "$as_me:4859: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4867: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4862: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4870: \$? = $ac_status" >&5
+  echo "$as_me:4865: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_member_struct_stat_st_rdev=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_member_struct_stat_st_rdev=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4880: result: $ac_cv_member_struct_stat_st_rdev" >&5
+echo "$as_me:4875: result: $ac_cv_member_struct_stat_st_rdev" >&5
 echo "${ECHO_T}$ac_cv_member_struct_stat_st_rdev" >&6
 if test $ac_cv_member_struct_stat_st_rdev = yes; then
 
 cat >>confdefs.h <<EOF
 #define HAVE_STRUCT_STAT_ST_RDEV 1
 EOF
 
 fi
 
-echo "$as_me:4890: checking for ino_t" >&5
+echo "$as_me:4885: checking for ino_t" >&5
 echo $ECHO_N "checking for ino_t... $ECHO_C" >&6
 if test "${ac_cv_type_ino_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4896 "configure"
+#line 4891 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 if ((ino_t *) 0)
@@ -4905,50 +4900,50 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4911: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4906: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4914: \$? = $ac_status" >&5
+  echo "$as_me:4909: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4917: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4912: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4920: \$? = $ac_status" >&5
+  echo "$as_me:4915: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_ino_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_ino_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4930: result: $ac_cv_type_ino_t" >&5
+echo "$as_me:4925: result: $ac_cv_type_ino_t" >&5
 echo "${ECHO_T}$ac_cv_type_ino_t" >&6
 if test $ac_cv_type_ino_t = yes; then
   :
 else
 
 cat >>confdefs.h <<EOF
 #define ino_t unsigned
 EOF
 
 fi
 
-   echo "$as_me:4942: checking for socklen_t" >&5
+   echo "$as_me:4937: checking for socklen_t" >&5
 echo $ECHO_N "checking for socklen_t... $ECHO_C" >&6
 if test "${ac_cv_type_socklen_t+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 4948 "configure"
+#line 4943 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <sys/socket.h>
 
 int
 main ()
@@ -4959,50 +4954,50 @@
   return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:4965: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:4960: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:4968: \$? = $ac_status" >&5
+  echo "$as_me:4963: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:4971: \"$ac_try\"") >&5
+  { (eval echo "$as_me:4966: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:4974: \$? = $ac_status" >&5
+  echo "$as_me:4969: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_type_socklen_t=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_type_socklen_t=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:4984: result: $ac_cv_type_socklen_t" >&5
+echo "$as_me:4979: result: $ac_cv_type_socklen_t" >&5
 echo "${ECHO_T}$ac_cv_type_socklen_t" >&6
 if test $ac_cv_type_socklen_t = yes; then
   :
 else
 
-      echo "$as_me:4990: checking for socklen_t equivalent" >&5
+      echo "$as_me:4985: checking for socklen_t equivalent" >&5
 echo $ECHO_N "checking for socklen_t equivalent... $ECHO_C" >&6
       if test "${rsync_cv_socklen_t_equiv+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
          # Systems have either "struct sockaddr *" or
          # "void *" as the second argument to getpeername
          rsync_cv_socklen_t_equiv=
          for arg2 in "struct sockaddr" void; do
             for t in int size_t unsigned long "unsigned long"; do
                cat >conftest.$ac_ext <<_ACEOF
-#line 5002 "configure"
+#line 4997 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <sys/socket.h>
 
                   int getpeername (int, $arg2 *, $t *);
@@ -5016,22 +5011,22 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:5022: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:5017: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:5025: \$? = $ac_status" >&5
+  echo "$as_me:5020: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:5028: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5023: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5031: \$? = $ac_status" >&5
+  echo "$as_me:5026: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
 
                   rsync_cv_socklen_t_equiv="$t"
                   break
 
 else
@@ -5040,67 +5035,67 @@
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
             done
          done
 
          if test "x$rsync_cv_socklen_t_equiv" = x; then
-            { { echo "$as_me:5046: error: Cannot find a type to use in place of socklen_t" >&5
+            { { echo "$as_me:5041: error: Cannot find a type to use in place of socklen_t" >&5
 echo "$as_me: error: Cannot find a type to use in place of socklen_t" >&2;}
    { (exit 1); exit 1; }; }
          fi
 
 fi
 
-      echo "$as_me:5053: result: $rsync_cv_socklen_t_equiv" >&5
+      echo "$as_me:5048: result: $rsync_cv_socklen_t_equiv" >&5
 echo "${ECHO_T}$rsync_cv_socklen_t_equiv" >&6
 
 cat >>confdefs.h <<EOF
 #define socklen_t $rsync_cv_socklen_t_equiv
 EOF
 
 fi
 
-echo "$as_me:5062: checking for errno in errno.h" >&5
+echo "$as_me:5057: checking for errno in errno.h" >&5
 echo $ECHO_N "checking for errno in errno.h... $ECHO_C" >&6
 if test "${rsync_cv_errno+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
     cat >conftest.$ac_ext <<_ACEOF
-#line 5069 "configure"
+#line 5064 "configure"
 #include "confdefs.h"
 #include <errno.h>
 int
 main ()
 {
 int i = errno
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:5081: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:5076: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:5084: \$? = $ac_status" >&5
+  echo "$as_me:5079: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:5087: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5082: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5090: \$? = $ac_status" >&5
+  echo "$as_me:5085: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_errno=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_have_errno_decl=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:5100: result: $rsync_cv_errno" >&5
+echo "$as_me:5095: result: $rsync_cv_errno" >&5
 echo "${ECHO_T}$rsync_cv_errno" >&6
 if test x"$rsync_cv_errno" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_ERRNO_DECL 1
 EOF
@@ -5116,19 +5111,19 @@
 # only looks in /etc/hosts), so we only look for -lsocket if we need
 # it.
 
 for ac_func in connect
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:5122: checking for $ac_func" >&5
+echo "$as_me:5117: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
 if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5128 "configure"
+#line 5123 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -5153,32 +5148,32 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5159: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5154: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5162: \$? = $ac_status" >&5
+  echo "$as_me:5157: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5165: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5160: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5168: \$? = $ac_status" >&5
+  echo "$as_me:5163: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:5178: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "$as_me:5173: result: `eval echo '${'$as_ac_var'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
 if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
@@ -5186,21 +5181,21 @@
 done
 
 if test x"$ac_cv_func_connect" = x"no"; then
     case "$LIBS" in
     *-lnsl*) ;;
     *)
-echo "$as_me:5192: checking for printf in -lnsl_s" >&5
+echo "$as_me:5187: checking for printf in -lnsl_s" >&5
 echo $ECHO_N "checking for printf in -lnsl_s... $ECHO_C" >&6
 if test "${ac_cv_lib_nsl_s_printf+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lnsl_s  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 5200 "configure"
+#line 5195 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -5213,33 +5208,33 @@
 printf ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5219: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5214: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5222: \$? = $ac_status" >&5
+  echo "$as_me:5217: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5225: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5220: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5228: \$? = $ac_status" >&5
+  echo "$as_me:5223: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_nsl_s_printf=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_nsl_s_printf=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:5239: result: $ac_cv_lib_nsl_s_printf" >&5
+echo "$as_me:5234: result: $ac_cv_lib_nsl_s_printf" >&5
 echo "${ECHO_T}$ac_cv_lib_nsl_s_printf" >&6
 if test $ac_cv_lib_nsl_s_printf = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBNSL_S 1
 EOF
 
@@ -5248,21 +5243,21 @@
 fi
  ;;
     esac
     case "$LIBS" in
     *-lnsl*) ;;
     *)
-echo "$as_me:5254: checking for printf in -lnsl" >&5
+echo "$as_me:5249: checking for printf in -lnsl" >&5
 echo $ECHO_N "checking for printf in -lnsl... $ECHO_C" >&6
 if test "${ac_cv_lib_nsl_printf+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lnsl  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 5262 "configure"
+#line 5257 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -5275,33 +5270,33 @@
 printf ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5281: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5276: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5284: \$? = $ac_status" >&5
+  echo "$as_me:5279: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5287: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5282: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5290: \$? = $ac_status" >&5
+  echo "$as_me:5285: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_nsl_printf=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_nsl_printf=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:5301: result: $ac_cv_lib_nsl_printf" >&5
+echo "$as_me:5296: result: $ac_cv_lib_nsl_printf" >&5
 echo "${ECHO_T}$ac_cv_lib_nsl_printf" >&6
 if test $ac_cv_lib_nsl_printf = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBNSL 1
 EOF
 
@@ -5310,21 +5305,21 @@
 fi
  ;;
     esac
     case "$LIBS" in
     *-lsocket*) ;;
     *)
-echo "$as_me:5316: checking for connect in -lsocket" >&5
+echo "$as_me:5311: checking for connect in -lsocket" >&5
 echo $ECHO_N "checking for connect in -lsocket... $ECHO_C" >&6
 if test "${ac_cv_lib_socket_connect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lsocket  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 5324 "configure"
+#line 5319 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -5337,33 +5332,33 @@
 connect ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5343: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5338: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5346: \$? = $ac_status" >&5
+  echo "$as_me:5341: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5349: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5344: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5352: \$? = $ac_status" >&5
+  echo "$as_me:5347: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_socket_connect=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_socket_connect=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:5363: result: $ac_cv_lib_socket_connect" >&5
+echo "$as_me:5358: result: $ac_cv_lib_socket_connect" >&5
 echo "${ECHO_T}$ac_cv_lib_socket_connect" >&6
 if test $ac_cv_lib_socket_connect = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBSOCKET 1
 EOF
 
@@ -5372,21 +5367,21 @@
 fi
  ;;
     esac
     case "$LIBS" in
     *-linet*) ;;
     *)
-echo "$as_me:5378: checking for connect in -linet" >&5
+echo "$as_me:5373: checking for connect in -linet" >&5
 echo $ECHO_N "checking for connect in -linet... $ECHO_C" >&6
 if test "${ac_cv_lib_inet_connect+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-linet  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 5386 "configure"
+#line 5381 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -5399,33 +5394,33 @@
 connect ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5405: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5400: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5408: \$? = $ac_status" >&5
+  echo "$as_me:5403: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5411: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5406: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5414: \$? = $ac_status" >&5
+  echo "$as_me:5409: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_inet_connect=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_inet_connect=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:5425: result: $ac_cv_lib_inet_connect" >&5
+echo "$as_me:5420: result: $ac_cv_lib_inet_connect" >&5
 echo "${ECHO_T}$ac_cv_lib_inet_connect" >&6
 if test $ac_cv_lib_inet_connect = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBINET 1
 EOF
 
@@ -5443,21 +5438,21 @@
 #define HAVE_CONNECT 1
 EOF
 
     fi
 fi
 
-echo "$as_me:5449: checking for inet_ntop in -lresolv" >&5
+echo "$as_me:5444: checking for inet_ntop in -lresolv" >&5
 echo $ECHO_N "checking for inet_ntop in -lresolv... $ECHO_C" >&6
 if test "${ac_cv_lib_resolv_inet_ntop+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 5457 "configure"
+#line 5452 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -5470,309 +5465,337 @@
 inet_ntop ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5476: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5471: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5479: \$? = $ac_status" >&5
+  echo "$as_me:5474: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5482: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5477: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5485: \$? = $ac_status" >&5
+  echo "$as_me:5480: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_resolv_inet_ntop=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_resolv_inet_ntop=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:5496: result: $ac_cv_lib_resolv_inet_ntop" >&5
+echo "$as_me:5491: result: $ac_cv_lib_resolv_inet_ntop" >&5
 echo "${ECHO_T}$ac_cv_lib_resolv_inet_ntop" >&6
 if test $ac_cv_lib_resolv_inet_ntop = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBRESOLV 1
 EOF
 
   LIBS="-lresolv $LIBS"
 
 fi
 
-{ echo "$as_me:5507: Looking in libraries: $LIBS" >&5
+{ echo "$as_me:5502: Looking in libraries: $LIBS" >&5
 echo "$as_me: Looking in libraries: $LIBS" >&6;}
 
-echo "$as_me:5510: checking for inet_ntop" >&5
-echo $ECHO_N "checking for inet_ntop... $ECHO_C" >&6
-if test "${ac_cv_func_inet_ntop+set}" = set; then
+for ac_func in inet_ntop
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:5508: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5516 "configure"
+#line 5514 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char inet_ntop (); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char inet_ntop ();
+char $ac_func ();
 char (*f) ();
 
 int
 main ()
 {
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_inet_ntop) || defined (__stub___inet_ntop)
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-f = inet_ntop;
+f = $ac_func;
 #endif
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5547: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5545: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5550: \$? = $ac_status" >&5
+  echo "$as_me:5548: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5553: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5551: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5556: \$? = $ac_status" >&5
+  echo "$as_me:5554: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_func_inet_ntop=yes
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-ac_cv_func_inet_ntop=no
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:5566: result: $ac_cv_func_inet_ntop" >&5
-echo "${ECHO_T}$ac_cv_func_inet_ntop" >&6
-if test $ac_cv_func_inet_ntop = yes; then
-  :
+echo "$as_me:5564: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<EOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+EOF
+
 else
   LIBOBJS="$LIBOBJS lib/inet_ntop.$ac_objext"
 fi
+done
 
-echo "$as_me:5574: checking for inet_pton" >&5
-echo $ECHO_N "checking for inet_pton... $ECHO_C" >&6
-if test "${ac_cv_func_inet_pton+set}" = set; then
+for ac_func in inet_pton
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:5579: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5580 "configure"
+#line 5585 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char inet_pton (); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char inet_pton ();
+char $ac_func ();
 char (*f) ();
 
 int
 main ()
 {
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_inet_pton) || defined (__stub___inet_pton)
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-f = inet_pton;
+f = $ac_func;
 #endif
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5611: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5616: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5614: \$? = $ac_status" >&5
+  echo "$as_me:5619: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5617: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5622: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5620: \$? = $ac_status" >&5
+  echo "$as_me:5625: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_func_inet_pton=yes
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-ac_cv_func_inet_pton=no
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:5630: result: $ac_cv_func_inet_pton" >&5
-echo "${ECHO_T}$ac_cv_func_inet_pton" >&6
-if test $ac_cv_func_inet_pton = yes; then
-  :
+echo "$as_me:5635: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<EOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+EOF
+
 else
   LIBOBJS="$LIBOBJS lib/inet_pton.$ac_objext"
 fi
+done
 
-echo "$as_me:5638: checking for getaddrinfo" >&5
-echo $ECHO_N "checking for getaddrinfo... $ECHO_C" >&6
-if test "${ac_cv_func_getaddrinfo+set}" = set; then
+for ac_func in getaddrinfo
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:5650: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5644 "configure"
+#line 5656 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char getaddrinfo (); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char getaddrinfo ();
+char $ac_func ();
 char (*f) ();
 
 int
 main ()
 {
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_getaddrinfo) || defined (__stub___getaddrinfo)
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-f = getaddrinfo;
+f = $ac_func;
 #endif
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5675: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5687: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5678: \$? = $ac_status" >&5
+  echo "$as_me:5690: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5681: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5693: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5684: \$? = $ac_status" >&5
+  echo "$as_me:5696: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_func_getaddrinfo=yes
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-ac_cv_func_getaddrinfo=no
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:5694: result: $ac_cv_func_getaddrinfo" >&5
-echo "${ECHO_T}$ac_cv_func_getaddrinfo" >&6
-if test $ac_cv_func_getaddrinfo = yes; then
-  :
+echo "$as_me:5706: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<EOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+EOF
+
 else
   LIBOBJS="$LIBOBJS lib/getaddrinfo.$ac_objext"
 fi
+done
 
-echo "$as_me:5702: checking for getnameinfo" >&5
-echo $ECHO_N "checking for getnameinfo... $ECHO_C" >&6
-if test "${ac_cv_func_getnameinfo+set}" = set; then
+for ac_func in getnameinfo
+do
+as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
+echo "$as_me:5721: checking for $ac_func" >&5
+echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
+if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5708 "configure"
+#line 5727 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char getnameinfo (); below.  */
+    which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
 /* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
-char getnameinfo ();
+char $ac_func ();
 char (*f) ();
 
 int
 main ()
 {
 /* The GNU C library defines this for functions which it implements
     to always fail with ENOSYS.  Some functions are actually named
     something starting with __ and the normal name is an alias.  */
-#if defined (__stub_getnameinfo) || defined (__stub___getnameinfo)
+#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
 choke me
 #else
-f = getnameinfo;
+f = $ac_func;
 #endif
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5739: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5758: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5742: \$? = $ac_status" >&5
+  echo "$as_me:5761: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5745: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5764: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5748: \$? = $ac_status" >&5
+  echo "$as_me:5767: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
-  ac_cv_func_getnameinfo=yes
+  eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
-ac_cv_func_getnameinfo=no
+eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:5758: result: $ac_cv_func_getnameinfo" >&5
-echo "${ECHO_T}$ac_cv_func_getnameinfo" >&6
-if test $ac_cv_func_getnameinfo = yes; then
-  :
+echo "$as_me:5777: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
+if test `eval echo '${'$as_ac_var'}'` = yes; then
+  cat >>confdefs.h <<EOF
+#define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
+EOF
+
 else
   LIBOBJS="$LIBOBJS lib/getnameinfo.$ac_objext"
 fi
+done
 
-echo "$as_me:5766: checking for struct sockaddr.sa_len" >&5
+echo "$as_me:5789: checking for struct sockaddr.sa_len" >&5
 echo $ECHO_N "checking for struct sockaddr.sa_len... $ECHO_C" >&6
 if test "${ac_cv_member_struct_sockaddr_sa_len+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5772 "configure"
+#line 5795 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <sys/socket.h>
 
 int
@@ -5783,53 +5806,95 @@
 return 0;
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:5789: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:5812: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:5792: \$? = $ac_status" >&5
+  echo "$as_me:5815: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:5795: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5818: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5798: \$? = $ac_status" >&5
+  echo "$as_me:5821: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_member_struct_sockaddr_sa_len=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_member_struct_sockaddr_sa_len=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:5808: result: $ac_cv_member_struct_sockaddr_sa_len" >&5
+echo "$as_me:5831: result: $ac_cv_member_struct_sockaddr_sa_len" >&5
 echo "${ECHO_T}$ac_cv_member_struct_sockaddr_sa_len" >&6
 if test $ac_cv_member_struct_sockaddr_sa_len = yes; then
    cat >>confdefs.h <<\EOF
 #define HAVE_SOCKADDR_LEN 1
 EOF
 
 fi
 
+echo "$as_me:5840: checking struct sockaddr_storage" >&5
+echo $ECHO_N "checking struct sockaddr_storage... $ECHO_C" >&6
+cat >conftest.$ac_ext <<_ACEOF
+#line 5843 "configure"
+#include "confdefs.h"
+#include <sys/types.h>
+#include <sys/socket.h>
+int
+main ()
+{
+struct sockaddr_storage x;
+  ;
+  return 0;
+}
+_ACEOF
+rm -f conftest.$ac_objext
+if { (eval echo "$as_me:5856: \"$ac_compile\"") >&5
+  (eval $ac_compile) 2>&5
+  ac_status=$?
+  echo "$as_me:5859: \$? = $ac_status" >&5
+  (exit $ac_status); } &&
+         { ac_try='test -s conftest.$ac_objext'
+  { (eval echo "$as_me:5862: \"$ac_try\"") >&5
+  (eval $ac_try) 2>&5
+  ac_status=$?
+  echo "$as_me:5865: \$? = $ac_status" >&5
+  (exit $ac_status); }; }; then
+  echo "$as_me:5867: result: yes" >&5
+echo "${ECHO_T}yes" >&6
+
+cat >>confdefs.h <<\EOF
+#define HAVE_SOCKADDR_STORAGE 1
+EOF
+
+else
+  echo "$as_me: failed program was:" >&5
+cat conftest.$ac_ext >&5
+echo "$as_me:5877: result: no" >&5
+echo "${ECHO_T}no" >&6
+fi
+rm -f conftest.$ac_objext conftest.$ac_ext
+
 # if we can't find strcasecmp, look in -lresolv (for Unixware at least)
 #
 
 for ac_func in strcasecmp
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:5823: checking for $ac_func" >&5
+echo "$as_me:5888: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
 if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5829 "configure"
+#line 5894 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -5854,52 +5919,52 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5860: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5925: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5863: \$? = $ac_status" >&5
+  echo "$as_me:5928: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5866: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5931: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5869: \$? = $ac_status" >&5
+  echo "$as_me:5934: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:5879: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "$as_me:5944: result: `eval echo '${'$as_ac_var'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
 if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 if test x"$ac_cv_func_strcasecmp" = x"no"; then
 
-echo "$as_me:5891: checking for strcasecmp in -lresolv" >&5
+echo "$as_me:5956: checking for strcasecmp in -lresolv" >&5
 echo $ECHO_N "checking for strcasecmp in -lresolv... $ECHO_C" >&6
 if test "${ac_cv_lib_resolv_strcasecmp+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lresolv  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 5899 "configure"
+#line 5964 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -5912,57 +5977,57 @@
 strcasecmp ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:5918: \"$ac_link\"") >&5
+if { (eval echo "$as_me:5983: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5921: \$? = $ac_status" >&5
+  echo "$as_me:5986: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:5924: \"$ac_try\"") >&5
+  { (eval echo "$as_me:5989: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5927: \$? = $ac_status" >&5
+  echo "$as_me:5992: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_resolv_strcasecmp=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_resolv_strcasecmp=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:5938: result: $ac_cv_lib_resolv_strcasecmp" >&5
+echo "$as_me:6003: result: $ac_cv_lib_resolv_strcasecmp" >&5
 echo "${ECHO_T}$ac_cv_lib_resolv_strcasecmp" >&6
 if test $ac_cv_lib_resolv_strcasecmp = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBRESOLV 1
 EOF
 
   LIBS="-lresolv $LIBS"
 
 fi
 
 fi
 
-echo "$as_me:5951: checking whether utime accepts a null argument" >&5
+echo "$as_me:6016: checking whether utime accepts a null argument" >&5
 echo $ECHO_N "checking whether utime accepts a null argument... $ECHO_C" >&6
 if test "${ac_cv_func_utime_null+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   rm -f conftest.data; >conftest.data
 # Sequent interprets utime(file, 0) to mean use start of epoch.  Wrong.
 if test "$cross_compiling" = yes; then
   ac_cv_func_utime_null=no
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 5962 "configure"
+#line 6027 "configure"
 #include "confdefs.h"
 $ac_includes_default
 int
 main ()
 {
 struct stat s, t;
@@ -5973,34 +6038,34 @@
           && t.st_mtime - s.st_mtime < 120));
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:5979: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6044: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:5982: \$? = $ac_status" >&5
+  echo "$as_me:6047: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:5984: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6049: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:5987: \$? = $ac_status" >&5
+  echo "$as_me:6052: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_func_utime_null=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_func_utime_null=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 rm -f core core.* *.core
 fi
-echo "$as_me:6000: result: $ac_cv_func_utime_null" >&5
+echo "$as_me:6065: result: $ac_cv_func_utime_null" >&5
 echo "${ECHO_T}$ac_cv_func_utime_null" >&6
 if test $ac_cv_func_utime_null = yes; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_UTIME_NULL 1
 EOF
@@ -6008,19 +6073,19 @@
 fi
 rm -f conftest.data
 
 for ac_func in waitpid wait4 getcwd strdup strerror chown chmod mknod
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:6014: checking for $ac_func" >&5
+echo "$as_me:6079: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
 if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6020 "configure"
+#line 6085 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -6045,51 +6110,51 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:6051: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6116: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6054: \$? = $ac_status" >&5
+  echo "$as_me:6119: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:6057: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6122: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6060: \$? = $ac_status" >&5
+  echo "$as_me:6125: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:6070: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "$as_me:6135: result: `eval echo '${'$as_ac_var'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
 if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 for ac_func in fchmod fstat strchr readlink link utime utimes strftime
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:6083: checking for $ac_func" >&5
+echo "$as_me:6148: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
 if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6089 "configure"
+#line 6154 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -6114,51 +6179,51 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:6120: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6185: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6123: \$? = $ac_status" >&5
+  echo "$as_me:6188: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:6126: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6191: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6129: \$? = $ac_status" >&5
+  echo "$as_me:6194: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:6139: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "$as_me:6204: result: `eval echo '${'$as_ac_var'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
 if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 for ac_func in memmove lchown vsnprintf snprintf asprintf setsid glob strpbrk
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:6152: checking for $ac_func" >&5
+echo "$as_me:6217: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
 if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6158 "configure"
+#line 6223 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -6183,51 +6248,51 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:6189: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6254: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6192: \$? = $ac_status" >&5
+  echo "$as_me:6257: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:6195: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6260: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6198: \$? = $ac_status" >&5
+  echo "$as_me:6263: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:6208: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "$as_me:6273: result: `eval echo '${'$as_ac_var'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
 if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
 for ac_func in strlcat strlcpy mtrace
 do
 as_ac_var=`echo "ac_cv_func_$ac_func" | $as_tr_sh`
-echo "$as_me:6221: checking for $ac_func" >&5
+echo "$as_me:6286: checking for $ac_func" >&5
 echo $ECHO_N "checking for $ac_func... $ECHO_C" >&6
 if eval "test \"\${$as_ac_var+set}\" = set"; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6227 "configure"
+#line 6292 "configure"
 #include "confdefs.h"
 /* System header to define __stub macros and hopefully few prototypes,
     which can conflict with char $ac_func (); below.  */
 #include <assert.h>
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
@@ -6252,152 +6317,152 @@
 
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:6258: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6323: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6261: \$? = $ac_status" >&5
+  echo "$as_me:6326: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:6264: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6329: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6267: \$? = $ac_status" >&5
+  echo "$as_me:6332: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   eval "$as_ac_var=yes"
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 eval "$as_ac_var=no"
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 fi
-echo "$as_me:6277: result: `eval echo '${'$as_ac_var'}'`" >&5
+echo "$as_me:6342: result: `eval echo '${'$as_ac_var'}'`" >&5
 echo "${ECHO_T}`eval echo '${'$as_ac_var'}'`" >&6
 if test `eval echo '${'$as_ac_var'}'` = yes; then
   cat >>confdefs.h <<EOF
 #define `echo "HAVE_$ac_func" | $as_tr_cpp` 1
 EOF
 
 fi
 done
 
-echo "$as_me:6287: checking for working socketpair" >&5
+echo "$as_me:6352: checking for working socketpair" >&5
 echo $ECHO_N "checking for working socketpair... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_SOCKETPAIR+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_SOCKETPAIR=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6297 "configure"
+#line 6362 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <sys/socket.h>
 
 main() {
        int fd[2];
        exit((socketpair(AF_UNIX, SOCK_STREAM, 0, fd) != -1) ? 0 : 1);
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6309: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6374: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6312: \$? = $ac_status" >&5
+  echo "$as_me:6377: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6314: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6379: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6317: \$? = $ac_status" >&5
+  echo "$as_me:6382: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_SOCKETPAIR=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_SOCKETPAIR=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6329: result: $rsync_cv_HAVE_SOCKETPAIR" >&5
+echo "$as_me:6394: result: $rsync_cv_HAVE_SOCKETPAIR" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_SOCKETPAIR" >&6
 if test x"$rsync_cv_HAVE_SOCKETPAIR" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_SOCKETPAIR 1
 EOF
 
 fi
 
-echo "$as_me:6339: checking for working fnmatch" >&5
+echo "$as_me:6404: checking for working fnmatch" >&5
 echo $ECHO_N "checking for working fnmatch... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_FNMATCH+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_FNMATCH=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6349 "configure"
+#line 6414 "configure"
 #include "confdefs.h"
 #include <fnmatch.h>
 main() { exit((fnmatch("*.o", "x.o", FNM_PATHNAME) == 0 &&
                fnmatch("a/b/*", "a/b/c/d", FNM_PATHNAME) != 0) ? 0: 1); }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6356: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6421: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6359: \$? = $ac_status" >&5
+  echo "$as_me:6424: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6361: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6426: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6364: \$? = $ac_status" >&5
+  echo "$as_me:6429: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_FNMATCH=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_FNMATCH=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6376: result: $rsync_cv_HAVE_FNMATCH" >&5
+echo "$as_me:6441: result: $rsync_cv_HAVE_FNMATCH" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_FNMATCH" >&6
 if test x"$rsync_cv_HAVE_FNMATCH" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_FNMATCH 1
 EOF
 
 fi
 
 if test x"$with_included_popt" != x"yes"
 then
 
-echo "$as_me:6389: checking for poptGetContext in -lpopt" >&5
+echo "$as_me:6454: checking for poptGetContext in -lpopt" >&5
 echo $ECHO_N "checking for poptGetContext in -lpopt... $ECHO_C" >&6
 if test "${ac_cv_lib_popt_poptGetContext+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
   ac_check_lib_save_LIBS=$LIBS
 LIBS="-lpopt  $LIBS"
 cat >conftest.$ac_ext <<_ACEOF
-#line 6397 "configure"
+#line 6462 "configure"
 #include "confdefs.h"
 
 /* Override any gcc2 internal prototype to avoid an error.  */
 #ifdef __cplusplus
 extern "C"
 #endif
@@ -6410,33 +6475,33 @@
 poptGetContext ();
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext conftest$ac_exeext
-if { (eval echo "$as_me:6416: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6481: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6419: \$? = $ac_status" >&5
+  echo "$as_me:6484: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest$ac_exeext'
-  { (eval echo "$as_me:6422: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6487: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6425: \$? = $ac_status" >&5
+  echo "$as_me:6490: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   ac_cv_lib_popt_poptGetContext=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 ac_cv_lib_popt_poptGetContext=no
 fi
 rm -f conftest.$ac_objext conftest$ac_exeext conftest.$ac_ext
 LIBS=$ac_check_lib_save_LIBS
 fi
-echo "$as_me:6436: result: $ac_cv_lib_popt_poptGetContext" >&5
+echo "$as_me:6501: result: $ac_cv_lib_popt_poptGetContext" >&5
 echo "${ECHO_T}$ac_cv_lib_popt_poptGetContext" >&6
 if test $ac_cv_lib_popt_poptGetContext = yes; then
   cat >>confdefs.h <<EOF
 #define HAVE_LIBPOPT 1
 EOF
 
@@ -6445,369 +6510,369 @@
 else
   with_included_popt=yes
 fi
 
 fi
 
-echo "$as_me:6451: checking whether to use included libpopt" >&5
+echo "$as_me:6516: checking whether to use included libpopt" >&5
 echo $ECHO_N "checking whether to use included libpopt... $ECHO_C" >&6
 if test x"$with_included_popt" = x"yes"
 then
-    echo "$as_me:6455: result: $srcdir/popt" >&5
+    echo "$as_me:6520: result: $srcdir/popt" >&5
 echo "${ECHO_T}$srcdir/popt" >&6
     BUILD_POPT='$(popt_OBJS)'
     CFLAGS="$CFLAGS -I$srcdir/popt"
 else
-    echo "$as_me:6460: result: no" >&5
+    echo "$as_me:6525: result: no" >&5
 echo "${ECHO_T}no" >&6
 fi
 
-echo "$as_me:6464: checking for long long" >&5
+echo "$as_me:6529: checking for long long" >&5
 echo $ECHO_N "checking for long long... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_LONGLONG+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_LONGLONG=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6474 "configure"
+#line 6539 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main() { long long x = 1000000; x *= x; exit(((x/1000000) == 1000000)? 0: 1); }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6480: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6545: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6483: \$? = $ac_status" >&5
+  echo "$as_me:6548: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6485: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6550: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6488: \$? = $ac_status" >&5
+  echo "$as_me:6553: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_LONGLONG=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_LONGLONG=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6500: result: $rsync_cv_HAVE_LONGLONG" >&5
+echo "$as_me:6565: result: $rsync_cv_HAVE_LONGLONG" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_LONGLONG" >&6
 if test x"$rsync_cv_HAVE_LONGLONG" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_LONGLONG 1
 EOF
 
 fi
 
-echo "$as_me:6510: checking for off64_t" >&5
+echo "$as_me:6575: checking for off64_t" >&5
 echo $ECHO_N "checking for off64_t... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_OFF64_T+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_OFF64_T=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6520 "configure"
+#line 6585 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #include <sys/stat.h>
 main() { struct stat64 st; off64_t s; if (sizeof(off_t) == sizeof(off64_t)) exit(1); exit((lstat64("/dev/null", &st)==0)?0:1); }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6527: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6592: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6530: \$? = $ac_status" >&5
+  echo "$as_me:6595: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6532: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6597: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6535: \$? = $ac_status" >&5
+  echo "$as_me:6600: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_OFF64_T=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_OFF64_T=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6547: result: $rsync_cv_HAVE_OFF64_T" >&5
+echo "$as_me:6612: result: $rsync_cv_HAVE_OFF64_T" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_OFF64_T" >&6
 if test x"$rsync_cv_HAVE_OFF64_T" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_OFF64_T 1
 EOF
 
 fi
 
-echo "$as_me:6557: checking for short ino_t" >&5
+echo "$as_me:6622: checking for short ino_t" >&5
 echo $ECHO_N "checking for short ino_t... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_SHORT_INO_T+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_SHORT_INO_T=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6567 "configure"
+#line 6632 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 #include <sys/types.h>
 #include <sys/stat.h>
 main() { if (sizeof(ino_t) < sizeof(unsigned int)) return 0; return 1; }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6575: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6640: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6578: \$? = $ac_status" >&5
+  echo "$as_me:6643: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6580: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6645: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6583: \$? = $ac_status" >&5
+  echo "$as_me:6648: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_SHORT_INO_T=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_SHORT_INO_T=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6595: result: $rsync_cv_HAVE_SHORT_INO_T" >&5
+echo "$as_me:6660: result: $rsync_cv_HAVE_SHORT_INO_T" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_SHORT_INO_T" >&6
 if test x"$rsync_cv_HAVE_SHORT_INO_T" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_SHORT_INO_T 1
 EOF
 
 fi
 
-echo "$as_me:6605: checking for unsigned char" >&5
+echo "$as_me:6670: checking for unsigned char" >&5
 echo $ECHO_N "checking for unsigned char... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_UNSIGNED_CHAR+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_UNSIGNED_CHAR=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6615 "configure"
+#line 6680 "configure"
 #include "confdefs.h"
 #include <stdio.h>
 main() { char c; c=250; exit((c > 0)?0:1); }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6621: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6686: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6624: \$? = $ac_status" >&5
+  echo "$as_me:6689: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6626: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6691: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6629: \$? = $ac_status" >&5
+  echo "$as_me:6694: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_UNSIGNED_CHAR=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_UNSIGNED_CHAR=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6641: result: $rsync_cv_HAVE_UNSIGNED_CHAR" >&5
+echo "$as_me:6706: result: $rsync_cv_HAVE_UNSIGNED_CHAR" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_UNSIGNED_CHAR" >&6
 if test x"$rsync_cv_HAVE_UNSIGNED_CHAR" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_UNSIGNED_CHAR 1
 EOF
 
 fi
 
-echo "$as_me:6651: checking for broken readdir" >&5
+echo "$as_me:6716: checking for broken readdir" >&5
 echo $ECHO_N "checking for broken readdir... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_BROKEN_READDIR+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_BROKEN_READDIR=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6661 "configure"
+#line 6726 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <dirent.h>
 main() { struct dirent *di; DIR *d = opendir("."); di = readdir(d);
 if (di && di->d_name[-2] == '.' && di->d_name[-1] == 0 &&
 di->d_name[0] == 0) exit(0); exit(1);}
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6670: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6735: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6673: \$? = $ac_status" >&5
+  echo "$as_me:6738: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6675: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6740: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6678: \$? = $ac_status" >&5
+  echo "$as_me:6743: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_BROKEN_READDIR=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_BROKEN_READDIR=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6690: result: $rsync_cv_HAVE_BROKEN_READDIR" >&5
+echo "$as_me:6755: result: $rsync_cv_HAVE_BROKEN_READDIR" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_BROKEN_READDIR" >&6
 if test x"$rsync_cv_HAVE_BROKEN_READDIR" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_BROKEN_READDIR 1
 EOF
 
 fi
 
-echo "$as_me:6700: checking for utimbuf" >&5
+echo "$as_me:6765: checking for utimbuf" >&5
 echo $ECHO_N "checking for utimbuf... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_UTIMBUF+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 cat >conftest.$ac_ext <<_ACEOF
-#line 6707 "configure"
+#line 6772 "configure"
 #include "confdefs.h"
 #include <sys/types.h>
 #include <utime.h>
 int
 main ()
 {
 struct utimbuf tbuf;  tbuf.actime = 0; tbuf.modtime = 1; exit(utime("foo.c",&tbuf));
   ;
   return 0;
 }
 _ACEOF
 rm -f conftest.$ac_objext
-if { (eval echo "$as_me:6720: \"$ac_compile\"") >&5
+if { (eval echo "$as_me:6785: \"$ac_compile\"") >&5
   (eval $ac_compile) 2>&5
   ac_status=$?
-  echo "$as_me:6723: \$? = $ac_status" >&5
+  echo "$as_me:6788: \$? = $ac_status" >&5
   (exit $ac_status); } &&
          { ac_try='test -s conftest.$ac_objext'
-  { (eval echo "$as_me:6726: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6791: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6729: \$? = $ac_status" >&5
+  echo "$as_me:6794: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_UTIMBUF=yes
 else
   echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_UTIMBUF=no
 fi
 rm -f conftest.$ac_objext conftest.$ac_ext
 fi
-echo "$as_me:6739: result: $rsync_cv_HAVE_UTIMBUF" >&5
+echo "$as_me:6804: result: $rsync_cv_HAVE_UTIMBUF" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_UTIMBUF" >&6
 if test x"$rsync_cv_HAVE_UTIMBUF" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_UTIMBUF 1
 EOF
 
 fi
 
-echo "$as_me:6749: checking if gettimeofday takes tz argument" >&5
+echo "$as_me:6814: checking if gettimeofday takes tz argument" >&5
 echo $ECHO_N "checking if gettimeofday takes tz argument... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_GETTIMEOFDAY_TZ+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_GETTIMEOFDAY_TZ=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6759 "configure"
+#line 6824 "configure"
 #include "confdefs.h"
 
 #include <sys/time.h>
 #include <unistd.h>
 main() { struct timeval tv; exit(gettimeofday(&tv, NULL));}
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6767: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6832: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6770: \$? = $ac_status" >&5
+  echo "$as_me:6835: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6772: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6837: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6775: \$? = $ac_status" >&5
+  echo "$as_me:6840: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_GETTIMEOFDAY_TZ=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_GETTIMEOFDAY_TZ=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6787: result: $rsync_cv_HAVE_GETTIMEOFDAY_TZ" >&5
+echo "$as_me:6852: result: $rsync_cv_HAVE_GETTIMEOFDAY_TZ" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_GETTIMEOFDAY_TZ" >&6
 if test x"$rsync_cv_HAVE_GETTIMEOFDAY_TZ" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_GETTIMEOFDAY_TZ 1
 EOF
 
 fi
 
-echo "$as_me:6797: checking for C99 vsnprintf" >&5
+echo "$as_me:6862: checking for C99 vsnprintf" >&5
 echo $ECHO_N "checking for C99 vsnprintf... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_C99_VSNPRINTF+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_C99_VSNPRINTF=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6807 "configure"
+#line 6872 "configure"
 #include "confdefs.h"
 
 #include <sys/types.h>
 #include <stdarg.h>
 void foo(const char *format, ...) {
        va_list ap;
@@ -6824,53 +6889,53 @@
        exit(0);
 }
 main() { foo("hello"); }
 
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6830: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6895: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6833: \$? = $ac_status" >&5
+  echo "$as_me:6898: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6835: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6900: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6838: \$? = $ac_status" >&5
+  echo "$as_me:6903: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_C99_VSNPRINTF=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_C99_VSNPRINTF=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6850: result: $rsync_cv_HAVE_C99_VSNPRINTF" >&5
+echo "$as_me:6915: result: $rsync_cv_HAVE_C99_VSNPRINTF" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_C99_VSNPRINTF" >&6
 if test x"$rsync_cv_HAVE_C99_VSNPRINTF" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_C99_VSNPRINTF 1
 EOF
 
 fi
 
-echo "$as_me:6860: checking for secure mkstemp" >&5
+echo "$as_me:6925: checking for secure mkstemp" >&5
 echo $ECHO_N "checking for secure mkstemp... $ECHO_C" >&6
 if test "${rsync_cv_HAVE_SECURE_MKSTEMP+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_HAVE_SECURE_MKSTEMP=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6870 "configure"
+#line 6935 "configure"
 #include "confdefs.h"
 #include <stdlib.h>
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <unistd.h>
 main() {
@@ -6882,150 +6947,150 @@
   if (fstat(fd, &st) != 0) exit(1);
   if ((st.st_mode & 0777) != 0600) exit(1);
   exit(0);
 }
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6888: \"$ac_link\"") >&5
+if { (eval echo "$as_me:6953: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6891: \$? = $ac_status" >&5
+  echo "$as_me:6956: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6893: \"$ac_try\"") >&5
+  { (eval echo "$as_me:6958: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6896: \$? = $ac_status" >&5
+  echo "$as_me:6961: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_HAVE_SECURE_MKSTEMP=yes
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_HAVE_SECURE_MKSTEMP=no
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6908: result: $rsync_cv_HAVE_SECURE_MKSTEMP" >&5
+echo "$as_me:6973: result: $rsync_cv_HAVE_SECURE_MKSTEMP" >&5
 echo "${ECHO_T}$rsync_cv_HAVE_SECURE_MKSTEMP" >&6
 if test x"$rsync_cv_HAVE_SECURE_MKSTEMP" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define HAVE_SECURE_MKSTEMP 1
 EOF
 
 fi
 
-echo "$as_me:6918: checking for broken inet_ntoa" >&5
+echo "$as_me:6983: checking for broken inet_ntoa" >&5
 echo $ECHO_N "checking for broken inet_ntoa... $ECHO_C" >&6
 if test "${rsync_cv_REPLACE_INET_NTOA+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_REPLACE_INET_NTOA=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6928 "configure"
+#line 6993 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
 #include <sys/types.h>
 #include <netinet/in.h>
 #include <arpa/inet.h>
 main() { struct in_addr ip; ip.s_addr = 0x12345678;
 if (strcmp(inet_ntoa(ip),"18.52.86.120") &&
     strcmp(inet_ntoa(ip),"120.86.52.18")) { exit(1); }
 exit(0);}
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6941: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7006: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6944: \$? = $ac_status" >&5
+  echo "$as_me:7009: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6946: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7011: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:6949: \$? = $ac_status" >&5
+  echo "$as_me:7014: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_REPLACE_INET_NTOA=no
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_REPLACE_INET_NTOA=yes
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:6961: result: $rsync_cv_REPLACE_INET_NTOA" >&5
+echo "$as_me:7026: result: $rsync_cv_REPLACE_INET_NTOA" >&5
 echo "${ECHO_T}$rsync_cv_REPLACE_INET_NTOA" >&6
 if test x"$rsync_cv_REPLACE_INET_NTOA" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define REPLACE_INET_NTOA 1
 EOF
 
 fi
 
-echo "$as_me:6971: checking for broken inet_aton" >&5
+echo "$as_me:7036: checking for broken inet_aton" >&5
 echo $ECHO_N "checking for broken inet_aton... $ECHO_C" >&6
 if test "${rsync_cv_REPLACE_INET_ATON+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 if test "$cross_compiling" = yes; then
   rsync_cv_REPLACE_INET_ATON=cross
 else
   cat >conftest.$ac_ext <<_ACEOF
-#line 6981 "configure"
+#line 7046 "configure"
 #include "confdefs.h"
 
 #include <stdio.h>
 #include <sys/types.h>
 #include <netinet/in.h>
 #include <arpa/inet.h>
 main() { struct in_addr ip;
 if (inet_aton("example", &ip) == 0) exit(0); exit(1);}
 _ACEOF
 rm -f conftest$ac_exeext
-if { (eval echo "$as_me:6992: \"$ac_link\"") >&5
+if { (eval echo "$as_me:7057: \"$ac_link\"") >&5
   (eval $ac_link) 2>&5
   ac_status=$?
-  echo "$as_me:6995: \$? = $ac_status" >&5
+  echo "$as_me:7060: \$? = $ac_status" >&5
   (exit $ac_status); } && { ac_try='./conftest$ac_exeext'
-  { (eval echo "$as_me:6997: \"$ac_try\"") >&5
+  { (eval echo "$as_me:7062: \"$ac_try\"") >&5
   (eval $ac_try) 2>&5
   ac_status=$?
-  echo "$as_me:7000: \$? = $ac_status" >&5
+  echo "$as_me:7065: \$? = $ac_status" >&5
   (exit $ac_status); }; }; then
   rsync_cv_REPLACE_INET_ATON=no
 else
   echo "$as_me: program exited with status $ac_status" >&5
 echo "$as_me: failed program was:" >&5
 cat conftest.$ac_ext >&5
 rsync_cv_REPLACE_INET_ATON=yes
 fi
 rm -f core core.* *.core conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
 fi
 fi
-echo "$as_me:7012: result: $rsync_cv_REPLACE_INET_ATON" >&5
+echo "$as_me:7077: result: $rsync_cv_REPLACE_INET_ATON" >&5
 echo "${ECHO_T}$rsync_cv_REPLACE_INET_ATON" >&6
 if test x"$rsync_cv_REPLACE_INET_ATON" = x"yes"; then
 
 cat >>confdefs.h <<\EOF
 #define REPLACE_INET_ATON 1
 EOF
 
 fi
 
 #
 # The following test was mostly taken from the tcl/tk plus patches
 #
-echo "$as_me:7025: checking whether -c -o works" >&5
+echo "$as_me:7090: checking whether -c -o works" >&5
 echo $ECHO_N "checking whether -c -o works... $ECHO_C" >&6
 if test "${rsync_cv_DASHC_WORKS_WITH_DASHO+set}" = set; then
   echo $ECHO_N "(cached) $ECHO_C" >&6
 else
 
 rm -rf conftest*
@@ -7038,13 +7103,13 @@
 else
     rsync_cv_DASHC_WORKS_WITH_DASHO=no
 fi
 rm -rf conftest*
 
 fi
-echo "$as_me:7044: result: $rsync_cv_DASHC_WORKS_WITH_DASHO" >&5
+echo "$as_me:7109: result: $rsync_cv_DASHC_WORKS_WITH_DASHO" >&5
 echo "${ECHO_T}$rsync_cv_DASHC_WORKS_WITH_DASHO" >&6
 if test x"$rsync_cv_DASHC_WORKS_WITH_DASHO" = x"yes"; then
     OBJ_SAVE="#"
     OBJ_RESTORE="#"
     CC_SHOBJ_FLAG='-o $@'
 else
@@ -7131,13 +7196,13 @@
 
 DEFS=-DHAVE_CONFIG_H
 
 : ${CONFIG_STATUS=./config.status}
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files $CONFIG_STATUS"
-{ echo "$as_me:7137: creating $CONFIG_STATUS" >&5
+{ echo "$as_me:7202: creating $CONFIG_STATUS" >&5
 echo "$as_me: creating $CONFIG_STATUS" >&6;}
 cat >$CONFIG_STATUS <<_ACEOF
 #! $SHELL
 # Generated automatically by configure.
 # Run this file to recreate the current configuration.
 # Compiler output produced by configure, useful for debugging
@@ -7304,13 +7369,13 @@
 EOF
 cat >>$CONFIG_STATUS <<\EOF
   --version | --vers* | -V )
     echo "$ac_cs_version"; exit 0 ;;
   --he | --h)
     # Conflict between --help and --header
-    { { echo "$as_me:7310: error: ambiguous option: $1
+    { { echo "$as_me:7375: error: ambiguous option: $1
 Try \`$0 --help' for more information." >&5
 echo "$as_me: error: ambiguous option: $1
 Try \`$0 --help' for more information." >&2;}
    { (exit 1); exit 1; }; };;
   --help | --hel | -h )
     echo "$ac_cs_usage"; exit 0 ;;
@@ -7323,13 +7388,13 @@
   --header | --heade | --head | --hea )
     shift
     CONFIG_HEADERS="$CONFIG_HEADERS $1"
     ac_need_defaults=false;;
 
   # This is an error.
-  -*) { { echo "$as_me:7329: error: unrecognized option: $1
+  -*) { { echo "$as_me:7394: error: unrecognized option: $1
 Try \`$0 --help' for more information." >&5
 echo "$as_me: error: unrecognized option: $1
 Try \`$0 --help' for more information." >&2;}
    { (exit 1); exit 1; }; } ;;
 
   *) ac_config_targets="$ac_config_targets $1" ;;
@@ -7364,13 +7429,13 @@
   "Makefile" ) CONFIG_FILES="$CONFIG_FILES Makefile" ;;
   "lib/dummy" ) CONFIG_FILES="$CONFIG_FILES lib/dummy" ;;
   "zlib/dummy" ) CONFIG_FILES="$CONFIG_FILES zlib/dummy" ;;
   "popt/dummy" ) CONFIG_FILES="$CONFIG_FILES popt/dummy" ;;
   "shconfig" ) CONFIG_FILES="$CONFIG_FILES shconfig" ;;
   "config.h" ) CONFIG_HEADERS="$CONFIG_HEADERS config.h" ;;
-  *) { { echo "$as_me:7370: error: invalid argument: $ac_config_target" >&5
+  *) { { echo "$as_me:7435: error: invalid argument: $ac_config_target" >&5
 echo "$as_me: error: invalid argument: $ac_config_target" >&2;}
    { (exit 1); exit 1; }; };;
   esac
 done
 
 # If the user did not use the arguments to specify the items to instantiate,
@@ -7589,13 +7654,13 @@
   case $INSTALL in
   [\\/$]* | ?:[\\/]* ) ac_INSTALL=$INSTALL ;;
   *) ac_INSTALL=$ac_dots$INSTALL ;;
   esac
 
   if test x"$ac_file" != x-; then
-    { echo "$as_me:7595: creating $ac_file" >&5
+    { echo "$as_me:7660: creating $ac_file" >&5
 echo "$as_me: creating $ac_file" >&6;}
     rm -f "$ac_file"
   fi
   # Let's still pretend it is `configure' which instantiates (i.e., don't
   # use $as_me), people would be surprised to read:
   #    /* config.h.  Generated automatically by config.status.  */
@@ -7607,26 +7672,26 @@
   ac_file_inputs=`IFS=:
     for f in $ac_file_in; do
       case $f in
       -) echo $tmp/stdin ;;
       [\\/$]*)
          # Absolute (can't be DOS-style, as IFS=:)
-         test -f "$f" || { { echo "$as_me:7613: error: cannot find input file: $f" >&5
+         test -f "$f" || { { echo "$as_me:7678: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
          echo $f;;
       *) # Relative
          if test -f "$f"; then
            # Build tree
            echo $f
          elif test -f "$srcdir/$f"; then
            # Source tree
            echo $srcdir/$f
          else
            # /dev/null tree
-           { { echo "$as_me:7626: error: cannot find input file: $f" >&5
+           { { echo "$as_me:7691: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
          fi;;
       esac
     done` || { (exit 1); exit 1; }
 EOF
@@ -7681,37 +7746,37 @@
         ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
   *:* ) ac_file_in=`echo "$ac_file" | sed 's,[^:]*:,,'`
         ac_file=`echo "$ac_file" | sed 's,:.*,,'` ;;
   * )   ac_file_in=$ac_file.in ;;
   esac
 
-  test x"$ac_file" != x- && { echo "$as_me:7687: creating $ac_file" >&5
+  test x"$ac_file" != x- && { echo "$as_me:7752: creating $ac_file" >&5
 echo "$as_me: creating $ac_file" >&6;}
 
   # First look for the input files in the build tree, otherwise in the
   # src tree.
   ac_file_inputs=`IFS=:
     for f in $ac_file_in; do
       case $f in
       -) echo $tmp/stdin ;;
       [\\/$]*)
          # Absolute (can't be DOS-style, as IFS=:)
-         test -f "$f" || { { echo "$as_me:7698: error: cannot find input file: $f" >&5
+         test -f "$f" || { { echo "$as_me:7763: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
          echo $f;;
       *) # Relative
          if test -f "$f"; then
            # Build tree
            echo $f
          elif test -f "$srcdir/$f"; then
            # Source tree
            echo $srcdir/$f
          else
            # /dev/null tree
-           { { echo "$as_me:7711: error: cannot find input file: $f" >&5
+           { { echo "$as_me:7776: error: cannot find input file: $f" >&5
 echo "$as_me: error: cannot find input file: $f" >&2;}
    { (exit 1); exit 1; }; }
          fi;;
       esac
     done` || { (exit 1); exit 1; }
   # Remove the trailing spaces.
@@ -7822,13 +7887,13 @@
     echo "/* $ac_file.  Generated automatically by configure.  */" >$tmp/config.h
   fi
   cat $tmp/in >>$tmp/config.h
   rm -f $tmp/in
   if test x"$ac_file" != x-; then
     if cmp -s $ac_file $tmp/config.h 2>/dev/null; then
-      { echo "$as_me:7828: $ac_file is unchanged" >&5
+      { echo "$as_me:7893: $ac_file is unchanged" >&5
 echo "$as_me: $ac_file is unchanged" >&6;}
     else
       ac_dir=`$as_expr X"$ac_file" : 'X\(.*[^/]\)//*[^/][^/]*/*$' \| \
          X"$ac_file" : 'X\(//\)[^/]' \| \
          X"$ac_file" : 'X\(//\)$' \| \
          X"$ac_file" : 'X\(/\)' \| \
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/configure.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/configure.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/configure.in	2001-11-30 08:31:21.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/configure.in	2002-01-03 15:19:41.000000000 +0800
@@ -2,13 +2,13 @@
 
 AC_INIT()
 AC_CONFIG_SRCDIR([byteorder.h])
 AC_CONFIG_HEADER(config.h)
 AC_PREREQ(2.52)
 
-RSYNC_VERSION=2.5.0
+RSYNC_VERSION=2.5.1
 AC_SUBST(RSYNC_VERSION)
 AC_MSG_NOTICE([Configuring rsync $RSYNC_VERSION])
 
 AC_DEFINE_UNQUOTED(RSYNC_VERSION, ["$RSYNC_VERSION"], [rsync release version])
 
 LDFLAGS=${LDFLAGS-""}
@@ -40,13 +40,13 @@
 then
     AC_MSG_RESULT(no)
     CFLAGS=${CFLAGS-"-O"}
 else
     AC_MSG_RESULT([yes])
     # leave CFLAGS alone; AC_PROG_CC will try to include -g if it can
-    AC_DEFINE(DEBUG, 1, [Define to turn on debugging code that may slow normal operation])
+    dnl AC_DEFINE(DEBUG, 1, [Define to turn on debugging code that may slow normal operation])
     dnl CFLAGS=${CFLAGS-"-g"}
 fi
 
 CFLAGS="$CFLAGS -DHAVE_CONFIG_H"
 
 AC_ARG_WITH(included-popt,
@@ -267,26 +267,35 @@
 fi
 
 AC_CHECK_LIB(resolv, inet_ntop)
 
 AC_MSG_NOTICE([Looking in libraries: $LIBS])
 
-AC_CHECK_FUNC(inet_ntop, , AC_LIBOBJ(lib/inet_ntop)) 
-AC_CHECK_FUNC(inet_pton, , AC_LIBOBJ(lib/inet_pton))
+AC_CHECK_FUNCS(inet_ntop, , AC_LIBOBJ(lib/inet_ntop)) 
+AC_CHECK_FUNCS(inet_pton, , AC_LIBOBJ(lib/inet_pton))
 
-AC_CHECK_FUNC(getaddrinfo, , AC_LIBOBJ(lib/getaddrinfo)) 
-AC_CHECK_FUNC(getnameinfo, , AC_LIBOBJ(lib/getnameinfo))
+AC_CHECK_FUNCS(getaddrinfo, , AC_LIBOBJ(lib/getaddrinfo)) 
+AC_CHECK_FUNCS(getnameinfo, , AC_LIBOBJ(lib/getnameinfo))
 
 AC_CHECK_MEMBER([struct sockaddr.sa_len], 
 		[ AC_DEFINE(HAVE_SOCKADDR_LEN) ],
 		[],
 		[
 #include <sys/types.h>
 #include <sys/socket.h>
 ])
 
+AC_MSG_CHECKING(struct sockaddr_storage)
+AC_TRY_COMPILE([#include <sys/types.h>
+#include <sys/socket.h>],
+[struct sockaddr_storage x;],
+	AC_MSG_RESULT(yes)
+	AC_DEFINE(HAVE_SOCKADDR_STORAGE, 1, 
+		[Define if you have strct sockaddr_storage.] ),
+	AC_MSG_RESULT(no))
+
 # if we can't find strcasecmp, look in -lresolv (for Unixware at least)
 #
 AC_CHECK_FUNCS(strcasecmp)
 if test x"$ac_cv_func_strcasecmp" = x"no"; then
     AC_CHECK_LIB(resolv, strcasecmp)
 fi
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/cvs.log /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/cvs.log
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/cvs.log	2001-11-30 08:31:38.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/cvs.log	2002-01-03 15:19:51.000000000 +0800
@@ -20679,6 +20679,1468 @@
 Log Message:
 Modified file stored as well
 
 Revisions:
 rsync.spec		NONE => 1.1
 	http://www.samba.org/cgi-bin/cvsweb/rsync/packaging/lsb/rsync.spec?rev=1.1
+
+****************************************
+Date:	Fri Nov 30 14:06:30 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv1062
+
+Modified Files:
+	Makefile.in 
+Log Message:
+Add message to ignore warnings about mktemp
+
+Revisions:
+Makefile.in		1.63 => 1.64
+	http://www.samba.org/cgi-bin/cvsweb/rsync/Makefile.in?r1=1.63&r2=1.64
+
+****************************************
+Date:	Fri Nov 30 14:21:20 2001
+Author:	dwd
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv2973
+
+Modified Files:
+	Makefile.in 
+Log Message:
+Add "$(OBJS): config.h" so everything will rebuild if config.h changes.
+
+
+Revisions:
+Makefile.in		1.64 => 1.65
+	http://www.samba.org/cgi-bin/cvsweb/rsync/Makefile.in?r1=1.64&r2=1.65
+
+****************************************
+Date:	Sat Dec  1 21:12:39 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv921
+
+Modified Files:
+	TODO 
+Log Message:
+Add note about device major/minor numbers, and about ACLs
+
+
+Revisions:
+TODO		1.6 => 1.7
+	http://www.samba.org/cgi-bin/cvsweb/rsync/TODO?r1=1.6&r2=1.7
+
+****************************************
+Date:	Sat Dec  1 22:17:33 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv4094
+
+Modified Files:
+	rsync.1 rsync.yo 
+Log Message:
+Typo fix from Matt Kraai <kraai@debian.org>
+
+
+Revisions:
+rsync.1		1.96 => 1.97
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.1?r1=1.96&r2=1.97
+rsync.yo		1.81 => 1.82
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.yo?r1=1.81&r2=1.82
+
+****************************************
+Date:	Sat Dec  1 23:07:43 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv7077
+
+Modified Files:
+	TODO 
+Log Message:
+More notes from email.
+
+
+Revisions:
+TODO		1.7 => 1.8
+	http://www.samba.org/cgi-bin/cvsweb/rsync/TODO?r1=1.7&r2=1.8
+
+****************************************
+Date:	Sat Dec  1 23:17:50 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv7622
+
+Modified Files:
+	NEWS 
+Added Files:
+	OLDNEWS 
+Log Message:
+Move old news from release 2.5.0.
+
+
+Revisions:
+OLDNEWS		NONE => 1.1
+	http://www.samba.org/cgi-bin/cvsweb/rsync/OLDNEWS?rev=1.1
+NEWS		1.14 => 1.15
+	http://www.samba.org/cgi-bin/cvsweb/rsync/NEWS?r1=1.14&r2=1.15
+
+****************************************
+Date:	Sat Dec  1 23:21:56 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv7845
+
+Modified Files:
+	configure.in configure 
+Log Message:
+Bump version
+
+
+Revisions:
+configure.in		1.110 => 1.111
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure.in?r1=1.110&r2=1.111
+configure		1.105 => 1.106
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure?r1=1.105&r2=1.106
+
+****************************************
+Date:	Sat Dec  1 23:22:54 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv7949/testsuite
+
+Modified Files:
+	hands.test rsync.fns 
+Log Message:
+Fix test suite breakage in calling tls.
+
+Clean up test directory on completion.
+
+
+Revisions:
+hands.test		1.8 => 1.9
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/hands.test?r1=1.8&r2=1.9
+rsync.fns		1.29 => 1.30
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/rsync.fns?r1=1.29&r2=1.30
+
+****************************************
+Date:	Sun Dec  2 00:16:17 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv10886
+
+Modified Files:
+	loadparm.c 
+Log Message:
+Revert change from 1.39, because it causes a crash because of
+attempting to free a static string.  (Thankyou to Paul Mackerras.)
+There's still a small leak here.
+
+
+Revisions:
+loadparm.c		1.39 => 1.40
+	http://www.samba.org/cgi-bin/cvsweb/rsync/loadparm.c?r1=1.39&r2=1.40
+
+****************************************
+Date:	Sun Dec  2 00:38:52 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv22557
+
+Modified Files:
+	util.c 
+Log Message:
+Progress indicator now shows estimated rate of transfer (e.g. kB/s).  
+
+Based on a patch from Rik Faith, but modified to make sure we do only
+one rprintf call, and that we never end up with two copies of the line
+printed out.
+
+
+Revisions:
+util.c		1.91 => 1.92
+	http://www.samba.org/cgi-bin/cvsweb/rsync/util.c?r1=1.91&r2=1.92
+
+****************************************
+Date:	Sun Dec  2 00:56:26 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv30759
+
+Modified Files:
+	util.c 
+Log Message:
+Also estimate time remaining.
+
+
+Revisions:
+util.c		1.92 => 1.93
+	http://www.samba.org/cgi-bin/cvsweb/rsync/util.c?r1=1.92&r2=1.93
+
+****************************************
+Date:	Sun Dec  2 04:37:48 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv25410
+
+Modified Files:
+	tls.c 
+Log Message:
+const-cast required for silly UNICOS headers
+
+
+Revisions:
+tls.c		1.6 => 1.7
+	http://www.samba.org/cgi-bin/cvsweb/rsync/tls.c?r1=1.6&r2=1.7
+
+****************************************
+Date:	Sun Dec  2 05:02:17 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv27020
+
+Modified Files:
+	runtests.sh 
+Log Message:
+Typo fix by Tom Schmidt
+
+
+Revisions:
+runtests.sh		1.20 => 1.21
+	http://www.samba.org/cgi-bin/cvsweb/rsync/runtests.sh?r1=1.20&r2=1.21
+
+****************************************
+Date:	Sun Dec  2 05:07:08 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv27179
+
+Modified Files:
+	util.c 
+Log Message:
+Improved estimation algorithm for time-to-complete.
+
+
+Revisions:
+util.c		1.93 => 1.94
+	http://www.samba.org/cgi-bin/cvsweb/rsync/util.c?r1=1.93&r2=1.94
+
+****************************************
+Date:	Sun Dec  2 05:22:55 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv28274
+
+Modified Files:
+	NEWS 
+Log Message:
+Update notes
+
+
+Revisions:
+NEWS		1.15 => 1.16
+	http://www.samba.org/cgi-bin/cvsweb/rsync/NEWS?r1=1.15&r2=1.16
+
+****************************************
+Date:	Sun Dec  2 05:45:38 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv29389
+
+Modified Files:
+	util.c 
+Log Message:
+Show time-remaining as hh:mm:ss.
+
+
+Revisions:
+util.c		1.94 => 1.95
+	http://www.samba.org/cgi-bin/cvsweb/rsync/util.c?r1=1.94&r2=1.95
+
+****************************************
+Date:	Sun Dec  2 05:58:04 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31441
+
+Modified Files:
+	util.c 
+Log Message:
+Oops, units bug.
+
+
+Revisions:
+util.c		1.95 => 1.96
+	http://www.samba.org/cgi-bin/cvsweb/rsync/util.c?r1=1.95&r2=1.96
+
+****************************************
+Date:	Sun Dec  2 06:12:03 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv2986
+
+Modified Files:
+	util.c 
+Log Message:
+Fix FP usage.
+
+
+Revisions:
+util.c		1.96 => 1.97
+	http://www.samba.org/cgi-bin/cvsweb/rsync/util.c?r1=1.96&r2=1.97
+
+****************************************
+Date:	Sun Dec  2 14:26:09 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv12487
+
+Modified Files:
+	configure configure.in 
+Log Message:
+Bump version
+
+
+Revisions:
+configure		1.106 => 1.107
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure?r1=1.106&r2=1.107
+configure.in		1.111 => 1.112
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure.in?r1=1.111&r2=1.112
+
+****************************************
+Date:	Sun Dec  2 14:28:50 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv12556
+
+Modified Files:
+	batch.c 
+Log Message:
+batch reindent
+
+
+Revisions:
+batch.c		1.4 => 1.5
+	http://www.samba.org/cgi-bin/cvsweb/rsync/batch.c?r1=1.4&r2=1.5
+
+****************************************
+Date:	Sun Dec  2 14:47:31 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv13265
+
+Modified Files:
+	batch.c 
+Log Message:
+Note about crash from Ayamura KIKUCHI
+
+
+Revisions:
+batch.c		1.5 => 1.6
+	http://www.samba.org/cgi-bin/cvsweb/rsync/batch.c?r1=1.5&r2=1.6
+
+****************************************
+Date:	Mon Dec  3 10:37:33 2001
+Author:	dwd
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv23346
+
+Modified Files:
+	generator.c 
+Log Message:
+Don't print out the directory name twice in verbose mode; it was being
+printed a second time when the modification time of the directory was
+being set, and that time around recv_files() calls recv_generator() with
+an f_out of -1 so check that before printing the directory name.
+
+
+Revisions:
+generator.c		1.25 => 1.26
+	http://www.samba.org/cgi-bin/cvsweb/rsync/generator.c?r1=1.25&r2=1.26
+
+****************************************
+Date:	Tue Dec  4 16:58:20 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv15749
+
+Modified Files:
+	TODO 
+Log Message:
+Note from tpot that sighup should have standard behaviour of reinitializing.
+
+
+Revisions:
+TODO		1.8 => 1.9
+	http://www.samba.org/cgi-bin/cvsweb/rsync/TODO?r1=1.8&r2=1.9
+
+****************************************
+Date:	Wed Dec  5 04:25:36 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv29032
+
+Modified Files:
+	TODO 
+Log Message:
+Suggestions from KAME IPv6 newsletter.
+
+
+Revisions:
+TODO		1.9 => 1.10
+	http://www.samba.org/cgi-bin/cvsweb/rsync/TODO?r1=1.9&r2=1.10
+
+****************************************
+Date:	Wed Dec  5 04:48:46 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv30366
+
+Modified Files:
+	config.h.in configure configure.in socket.c 
+Log Message:
+Change back to using sockaddr_storage rather than sockaddr_in.  If
+sockaddr_storage is not defined, then supply our own definition that
+will hopefully satisfy RFC2553 but also compile on all supported
+platforms.
+
+Thankyou to YOSHIFUJI Hideaki, SUMIKAWA Munechika and Jun-ichiro
+"itojun" Hagino.
+
+
+Revisions:
+config.h.in		1.64 => 1.65
+	http://www.samba.org/cgi-bin/cvsweb/rsync/config.h.in?r1=1.64&r2=1.65
+configure		1.107 => 1.108
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure?r1=1.107&r2=1.108
+configure.in		1.112 => 1.113
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure.in?r1=1.112&r2=1.113
+socket.c		1.45 => 1.46
+	http://www.samba.org/cgi-bin/cvsweb/rsync/socket.c?r1=1.45&r2=1.46
+
+****************************************
+Date:	Wed Dec  5 04:48:46 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/lib
+In directory va:/tmp/cvs-serv30366/lib
+
+Modified Files:
+	addrinfo.h 
+Log Message:
+Change back to using sockaddr_storage rather than sockaddr_in.  If
+sockaddr_storage is not defined, then supply our own definition that
+will hopefully satisfy RFC2553 but also compile on all supported
+platforms.
+
+Thankyou to YOSHIFUJI Hideaki, SUMIKAWA Munechika and Jun-ichiro
+"itojun" Hagino.
+
+
+Revisions:
+addrinfo.h		1.6 => 1.7
+	http://www.samba.org/cgi-bin/cvsweb/rsync/lib/addrinfo.h?r1=1.6&r2=1.7
+
+****************************************
+Date:	Wed Dec  5 04:50:01 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv30468
+
+Modified Files:
+	NEWS 
+Log Message:
+Change back to using sockaddr_storage rather than sockaddr_in.  If
+sockaddr_storage is not defined, then supply our own definition that
+will hopefully satisfy RFC2553 but also compile on all supported
+platforms.
+
+Thankyou to YOSHIFUJI Hideaki, SUMIKAWA Munechika and Jun-ichiro
+"itojun" Hagino.
+
+
+Revisions:
+NEWS		1.16 => 1.17
+	http://www.samba.org/cgi-bin/cvsweb/rsync/NEWS?r1=1.16&r2=1.17
+
+****************************************
+Date:	Wed Dec  5 04:56:06 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv30813
+
+Modified Files:
+	clientserver.c 
+Log Message:
+Doc.
+
+
+Revisions:
+clientserver.c		1.77 => 1.78
+	http://www.samba.org/cgi-bin/cvsweb/rsync/clientserver.c?r1=1.77&r2=1.78
+
+****************************************
+Date:	Wed Dec  5 05:02:14 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31236
+
+Modified Files:
+	TODO 
+Log Message:
+Doc
+
+
+Revisions:
+TODO		1.10 => 1.11
+	http://www.samba.org/cgi-bin/cvsweb/rsync/TODO?r1=1.10&r2=1.11
+
+****************************************
+Date:	Wed Dec  5 05:03:16 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31296
+
+Modified Files:
+	clientserver.c options.c rsync.h 
+Log Message:
+Add --no-detach option for W32, daemontools, etc.
+
+
+Revisions:
+clientserver.c		1.78 => 1.79
+	http://www.samba.org/cgi-bin/cvsweb/rsync/clientserver.c?r1=1.78&r2=1.79
+options.c		1.66 => 1.67
+	http://www.samba.org/cgi-bin/cvsweb/rsync/options.c?r1=1.66&r2=1.67
+rsync.h		1.109 => 1.110
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.h?r1=1.109&r2=1.110
+
+****************************************
+Date:	Wed Dec  5 05:06:28 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31538
+
+Modified Files:
+	options.c rsync.yo 
+Log Message:
+Fix help message for --address option
+
+
+Revisions:
+options.c		1.67 => 1.68
+	http://www.samba.org/cgi-bin/cvsweb/rsync/options.c?r1=1.67&r2=1.68
+rsync.yo		1.82 => 1.83
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.yo?r1=1.82&r2=1.83
+
+****************************************
+Date:	Wed Dec  5 05:06:41 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31561
+
+Modified Files:
+	rsync.1 
+Log Message:
+Fix help message for --address option
+
+
+Revisions:
+rsync.1		1.97 => 1.98
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.1?r1=1.97&r2=1.98
+
+****************************************
+Date:	Wed Dec  5 05:10:24 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31908
+
+Modified Files:
+	rsync.1 rsync.yo 
+Log Message:
+Document --no-detach.
+
+
+Revisions:
+rsync.1		1.98 => 1.99
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.1?r1=1.98&r2=1.99
+rsync.yo		1.83 => 1.84
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.yo?r1=1.83&r2=1.84
+
+****************************************
+Date:	Wed Dec  5 05:11:44 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv32001
+
+Modified Files:
+	NEWS 
+Log Message:
+Document --no-detach.
+
+
+Revisions:
+NEWS		1.17 => 1.18
+	http://www.samba.org/cgi-bin/cvsweb/rsync/NEWS?r1=1.17&r2=1.18
+
+****************************************
+Date:	Wed Dec  5 05:19:16 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv32493
+
+Modified Files:
+	rsync.h socket.c 
+Log Message:
+Some platforms may have getaddrinfo() but not sockaddr_storage.
+
+
+Revisions:
+rsync.h		1.110 => 1.111
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.h?r1=1.110&r2=1.111
+socket.c		1.46 => 1.47
+	http://www.samba.org/cgi-bin/cvsweb/rsync/socket.c?r1=1.46&r2=1.47
+
+****************************************
+Date:	Wed Dec  5 05:19:16 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/lib
+In directory va:/tmp/cvs-serv32493/lib
+
+Modified Files:
+	addrinfo.h 
+Log Message:
+Some platforms may have getaddrinfo() but not sockaddr_storage.
+
+
+Revisions:
+addrinfo.h		1.7 => 1.8
+	http://www.samba.org/cgi-bin/cvsweb/rsync/lib/addrinfo.h?r1=1.7&r2=1.8
+
+****************************************
+Date:	Wed Dec  5 05:25:29 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv411
+
+Modified Files:
+	socket.c 
+Log Message:
+RFC2553 just says that sockaddr_storage has to have initial fields
+isomorphic to sa_family etc from a struct sockaddr, not what they're
+called.  On some platforms they seem not to be called ss_family.
+Rather than guess, we will try casting to a sockaddr and looking
+through that -- I think this is what the RFC intends.
+
+
+Revisions:
+socket.c		1.47 => 1.48
+	http://www.samba.org/cgi-bin/cvsweb/rsync/socket.c?r1=1.47&r2=1.48
+
+****************************************
+Date:	Wed Dec  5 05:40:03 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/lib
+In directory va:/tmp/cvs-serv1605/lib
+
+Modified Files:
+	getaddrinfo.c getnameinfo.c 
+Log Message:
+Oops, drop repeated header.  Sometimes the bug is really simple.
+
+
+Revisions:
+getaddrinfo.c		1.12 => 1.13
+	http://www.samba.org/cgi-bin/cvsweb/rsync/lib/getaddrinfo.c?r1=1.12&r2=1.13
+getnameinfo.c		1.7 => 1.8
+	http://www.samba.org/cgi-bin/cvsweb/rsync/lib/getnameinfo.c?r1=1.7&r2=1.8
+
+****************************************
+Date:	Wed Dec  5 05:41:39 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv1751
+
+Modified Files:
+	configure configure.in 
+Log Message:
+Bump version
+
+
+Revisions:
+configure		1.108 => 1.109
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure?r1=1.108&r2=1.109
+configure.in		1.113 => 1.114
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure.in?r1=1.113&r2=1.114
+
+****************************************
+Date:	Wed Dec  5 05:44:37 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv2035
+
+Modified Files:
+	socket.c 
+Log Message:
+Some platforms don't have sa_family_t.
+
+
+Revisions:
+socket.c		1.48 => 1.49
+	http://www.samba.org/cgi-bin/cvsweb/rsync/socket.c?r1=1.48&r2=1.49
+
+****************************************
+Date:	Wed Dec  5 05:45:51 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv2161
+
+Modified Files:
+	options.c 
+Log Message:
+Be more strict about 'enum logcode' rather than int.  IRIX compiler
+picked this up -- quite neat.
+
+
+Revisions:
+options.c		1.68 => 1.69
+	http://www.samba.org/cgi-bin/cvsweb/rsync/options.c?r1=1.68&r2=1.69
+
+****************************************
+Date:	Wed Dec  5 05:48:41 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv2564
+
+Modified Files:
+	flist.c 
+Log Message:
+IRIX cc cares that the operands to the ternary have the same type.
+
+
+Revisions:
+flist.c		1.97 => 1.98
+	http://www.samba.org/cgi-bin/cvsweb/rsync/flist.c?r1=1.97&r2=1.98
+
+****************************************
+Date:	Sun Dec  9 13:48:13 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31485
+
+Modified Files:
+	configure configure.in 
+Log Message:
+Don't define DEBUG with --enable-debug, because that makes zlib emit strange messages
+
+Revisions:
+configure		1.109 => 1.110
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure?r1=1.109&r2=1.110
+configure.in		1.114 => 1.115
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure.in?r1=1.114&r2=1.115
+
+****************************************
+Date:	Thu Dec 13 17:09:24 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv29700
+
+Modified Files:
+	rsync.1 rsync.yo 
+Log Message:
+Fix contact details.
+
+
+Revisions:
+rsync.1		1.99 => 1.100
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.1?r1=1.99&r2=1.100
+rsync.yo		1.84 => 1.85
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.yo?r1=1.84&r2=1.85
+
+****************************************
+Date:	Thu Dec 13 17:48:48 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv32211
+
+Modified Files:
+	tls.c 
+Log Message:
+Readlink(2) does not nul-terminate the output buffer, so we were
+getting corrupt output when listing more than one symlink.
+
+
+Revisions:
+tls.c		1.7 => 1.8
+	http://www.samba.org/cgi-bin/cvsweb/rsync/tls.c?r1=1.7&r2=1.8
+
+****************************************
+Date:	Thu Dec 13 17:52:43 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv32653
+
+Modified Files:
+	runtests.sh 
+Log Message:
+Clean scratch directory between each test run.
+
+
+Revisions:
+runtests.sh		1.21 => 1.22
+	http://www.samba.org/cgi-bin/cvsweb/rsync/runtests.sh?r1=1.21&r2=1.22
+
+****************************************
+Date:	Thu Dec 13 18:01:46 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv875/testsuite
+
+Modified Files:
+	rsync.fns 
+Added Files:
+	symlink-ignore.test 
+Log Message:
+Add a test that when none of -l, -L, -a are specified symlinks are not
+copied at all.
+
+
+Revisions:
+symlink-ignore.test		NONE => 1.1
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/symlink-ignore.test?rev=1.1
+rsync.fns		1.30 => 1.31
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/rsync.fns?r1=1.30&r2=1.31
+
+****************************************
+Date:	Thu Dec 13 18:14:59 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv1592
+
+Modified Files:
+	generator.c 
+Log Message:
+Clearer error messages.
+
+
+Revisions:
+generator.c		1.26 => 1.27
+	http://www.samba.org/cgi-bin/cvsweb/rsync/generator.c?r1=1.26&r2=1.27
+
+****************************************
+Date:	Thu Dec 13 18:16:20 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv1807
+
+Modified Files:
+	generator.c 
+Log Message:
+Clearer error messages.
+
+
+Revisions:
+generator.c		1.27 => 1.28
+	http://www.samba.org/cgi-bin/cvsweb/rsync/generator.c?r1=1.27&r2=1.28
+
+****************************************
+Date:	Thu Dec 13 18:18:31 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv1993
+
+Modified Files:
+	symlink-ignore.test 
+Log Message:
+Doc.
+
+
+Revisions:
+symlink-ignore.test		1.1 => 1.2
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/symlink-ignore.test?r1=1.1&r2=1.2
+
+****************************************
+Date:	Thu Dec 13 21:01:48 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv12243
+
+Modified Files:
+	runtests.sh 
+Log Message:
+Make scratch directory properly.
+
+
+Revisions:
+runtests.sh		1.22 => 1.23
+	http://www.samba.org/cgi-bin/cvsweb/rsync/runtests.sh?r1=1.22&r2=1.23
+
+****************************************
+Date:	Thu Dec 13 21:17:52 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv12968
+
+Modified Files:
+	generator.c 
+Log Message:
+Typo.
+
+
+Revisions:
+generator.c		1.28 => 1.29
+	http://www.samba.org/cgi-bin/cvsweb/rsync/generator.c?r1=1.28&r2=1.29
+
+****************************************
+Date:	Thu Dec 13 21:19:15 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv13090
+
+Modified Files:
+	symlink-ignore.test 
+Log Message:
+More error messages.
+
+
+Revisions:
+symlink-ignore.test		1.2 => 1.3
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/symlink-ignore.test?r1=1.2&r2=1.3
+
+****************************************
+Date:	Thu Dec 13 21:27:43 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv13704
+
+Modified Files:
+	symlink-ignore.test 
+Log Message:
+Perhaps Solaris sh wants us to explicitly exit 0, rather than just
+using the last return code?
+
+
+Revisions:
+symlink-ignore.test		1.3 => 1.4
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/symlink-ignore.test?r1=1.3&r2=1.4
+
+****************************************
+Date:	Thu Dec 13 21:33:13 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/lib
+In directory va:/tmp/cvs-serv14194
+
+Modified Files:
+	getaddrinfo.c 
+Log Message:
+Quieten warning by inserting explicit brackets.
+
+
+Revisions:
+getaddrinfo.c		1.13 => 1.14
+	http://www.samba.org/cgi-bin/cvsweb/rsync/lib/getaddrinfo.c?r1=1.13&r2=1.14
+
+****************************************
+Date:	Thu Dec 13 21:44:04 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv14585
+
+Modified Files:
+	symlink-ignore.test 
+Log Message:
+Fix quoting.
+
+
+Revisions:
+symlink-ignore.test		1.4 => 1.5
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/symlink-ignore.test?r1=1.4&r2=1.5
+
+****************************************
+Date:	Thu Dec 13 21:52:25 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv15041
+
+Modified Files:
+	longdir.test 
+Log Message:
+Be less verbose.
+
+
+Revisions:
+longdir.test		1.2 => 1.3
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/longdir.test?r1=1.2&r2=1.3
+
+****************************************
+Date:	Thu Dec 13 21:54:24 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv15146
+
+Modified Files:
+	runtests.sh 
+Log Message:
+Only show test output if it failed.
+
+
+Revisions:
+runtests.sh		1.23 => 1.24
+	http://www.samba.org/cgi-bin/cvsweb/rsync/runtests.sh?r1=1.23&r2=1.24
+
+****************************************
+Date:	Thu Dec 13 21:55:21 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv15234
+
+Modified Files:
+	symlink-ignore.test 
+Log Message:
+Verbose.
+
+
+Revisions:
+symlink-ignore.test		1.5 => 1.6
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/symlink-ignore.test?r1=1.5&r2=1.6
+
+****************************************
+Date:	Fri Dec 14 10:00:54 2001
+Author:	dwd
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31446
+
+Modified Files:
+	socket.c 
+Log Message:
+open_socket_in was attempting to try all the protocols returned from
+getaddrinfo(), but only if a corresponding call to socket() returned one of
+three *NOSUPPORT errno codes.  A Redhat 6.2 system was observed returning
+EINVAL instead so it never went on to try IPv4.  This update adds EINVAL to
+the list.  Question: why not always continue through the list regardless of
+what errno is?
+
+
+Revisions:
+socket.c		1.49 => 1.50
+	http://www.samba.org/cgi-bin/cvsweb/rsync/socket.c?r1=1.49&r2=1.50
+
+****************************************
+Date:	Fri Dec 14 10:25:53 2001
+Author:	dwd
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv32754
+
+Modified Files:
+	options.c 
+Log Message:
+When INET6 is not defined, meaning that IPv6 is not supported, need to
+initalize the global_opts.af_hint to AF_INET or systems such as Linux that
+have a native getaddrinfo() because they support IPv6 will attempt to
+create IPv6 sockets.  This brings up a problem with the new global_opts
+structure; in order to initialize them to a value other than 0, we need to
+explicitly initialize them all in an order that matches the order in
+rsync.h.  I think that's more inconvenient & error prone than keeping
+global variables.
+
+
+Revisions:
+options.c		1.69 => 1.70
+	http://www.samba.org/cgi-bin/cvsweb/rsync/options.c?r1=1.69&r2=1.70
+
+****************************************
+Date:	Mon Dec 17 17:07:21 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv31972
+
+Modified Files:
+	README 
+Log Message:
+Update README so that Paulus doesn't get bug reports anymore :-)  
+
+I think this document needs to be reworked to better explain how to
+use rsync, but not right now.
+
+
+Revisions:
+README		1.25 => 1.26
+	http://www.samba.org/cgi-bin/cvsweb/rsync/README?r1=1.25&r2=1.26
+
+****************************************
+Date:	Mon Dec 17 17:32:28 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv1107
+
+Modified Files:
+	configure.in configure config.h.in NEWS 
+Log Message:
+Fix from Jeff Garzik for inet_ntop prototype errors on some Linux
+distributions: we were failing to define HAVE_INET_NTOP, so our
+prototype in rsync.h came through.
+
+Also rerun autoheader, and have comment for HAVE_SOCKADDR_STORAGE.
+
+
+Revisions:
+configure.in		1.115 => 1.116
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure.in?r1=1.115&r2=1.116
+configure		1.110 => 1.111
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure?r1=1.110&r2=1.111
+config.h.in		1.65 => 1.66
+	http://www.samba.org/cgi-bin/cvsweb/rsync/config.h.in?r1=1.65&r2=1.66
+NEWS		1.18 => 1.19
+	http://www.samba.org/cgi-bin/cvsweb/rsync/NEWS?r1=1.18&r2=1.19
+
+****************************************
+Date:	Mon Dec 17 17:33:57 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv1239
+
+Modified Files:
+	TODO 
+Log Message:
+Note rsyncd-over-ssh and documentation TODOs.
+
+
+Revisions:
+TODO		1.11 => 1.12
+	http://www.samba.org/cgi-bin/cvsweb/rsync/TODO?r1=1.11&r2=1.12
+
+****************************************
+Date:	Mon Dec 17 21:54:57 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv18786
+
+Modified Files:
+	socket.c options.c clientserver.c 
+Log Message:
+Get rid of global_opts struct as suggested by Dave -- too many
+problems with initialization.  
+
+Change the algorithm from trying to open an inbound socket with
+getaddrinfo: keep trying suggested addresses until we find one on
+which we can both get a socket and bind.  Not convinced this is the
+best, but it's probably better.
+
+
+Revisions:
+socket.c		1.50 => 1.51
+	http://www.samba.org/cgi-bin/cvsweb/rsync/socket.c?r1=1.50&r2=1.51
+options.c		1.70 => 1.71
+	http://www.samba.org/cgi-bin/cvsweb/rsync/options.c?r1=1.70&r2=1.71
+clientserver.c		1.79 => 1.80
+	http://www.samba.org/cgi-bin/cvsweb/rsync/clientserver.c?r1=1.79&r2=1.80
+
+****************************************
+Date:	Mon Dec 17 22:21:33 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv20420
+
+Modified Files:
+	socket.c 
+Log Message:
+Refactor code for setting local address on outgoing connections.  If a
+local address is specified, then try all addrinfo records for it.
+
+
+Revisions:
+socket.c		1.51 => 1.52
+	http://www.samba.org/cgi-bin/cvsweb/rsync/socket.c?r1=1.51&r2=1.52
+
+****************************************
+Date:	Mon Dec 17 22:25:34 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv20630
+
+Modified Files:
+	TODO 
+Log Message:
+Note about hardlink performance.
+
+
+Revisions:
+TODO		1.12 => 1.13
+	http://www.samba.org/cgi-bin/cvsweb/rsync/TODO?r1=1.12&r2=1.13
+
+****************************************
+Date:	Mon Dec 17 22:26:28 2001
+Author:	mbp
+
+Update of /data/cvs/rsync/testsuite
+In directory va:/tmp/cvs-serv20699/testsuite
+
+Modified Files:
+	rsync.fns 
+Log Message:
+Add an "unsafe" symlink to the symlink test case so we can see what happens.
+
+
+Revisions:
+rsync.fns		1.31 => 1.32
+	http://www.samba.org/cgi-bin/cvsweb/rsync/testsuite/rsync.fns?r1=1.31&r2=1.32
+
+****************************************
+Date:	Mon Dec 17 22:45:28 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv21855
+
+Modified Files:
+	rsync.yo rsync.1 
+Log Message:
+Documentation fixes based on mail from Edward Welbourne, and an
+attempted explanation of rsync's symbolic-link handling.
+
+
+Revisions:
+rsync.yo		1.85 => 1.86
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.yo?r1=1.85&r2=1.86
+rsync.1		1.100 => 1.101
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.1?r1=1.100&r2=1.101
+
+****************************************
+Date:	Mon Dec 17 22:47:41 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv22005
+
+Modified Files:
+	rsync.h 
+Log Message:
+Get rid of global_opts struct as suggested by Dave -- too many
+problems with initialization.
+
+
+Revisions:
+rsync.h		1.111 => 1.112
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.h?r1=1.111&r2=1.112
+
+****************************************
+Date:	Mon Dec 17 22:48:56 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv22081
+
+Modified Files:
+	socket.c 
+Log Message:
+Typo
+
+
+Revisions:
+socket.c		1.52 => 1.53
+	http://www.samba.org/cgi-bin/cvsweb/rsync/socket.c?r1=1.52&r2=1.53
+
+****************************************
+Date:	Wed Dec 19 17:23:28 2001
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv32205
+
+Modified Files:
+	TODO 
+Log Message:
+Suggestion from David Stein 
+
+verbose output
+  
+  Indicate whether files are new, updated, or deleted
+
+
+Revisions:
+TODO		1.13 => 1.14
+	http://www.samba.org/cgi-bin/cvsweb/rsync/TODO?r1=1.13&r2=1.14
+
+****************************************
+Date:	Thu Dec 20 07:33:16 2001
+Author:	dwd
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv24395
+
+Modified Files:
+	rsync.c 
+Log Message:
+Removed debugging statement that was added to sig_int() by the rsync+ patch
+integration.  It was causing the format of the daemon log to be messed up
+because of the leading \n.
+
+
+Revisions:
+rsync.c		1.118 => 1.119
+	http://www.samba.org/cgi-bin/cvsweb/rsync/rsync.c?r1=1.118&r2=1.119
+
+****************************************
+Date:	Wed Jan  2 23:08:36 2002
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv18507
+
+Modified Files:
+	NEWS 
+Log Message:
+Cleanup.
+
+
+Revisions:
+NEWS		1.19 => 1.20
+	http://www.samba.org/cgi-bin/cvsweb/rsync/NEWS?r1=1.19&r2=1.20
+
+****************************************
+Date:	Wed Jan  2 23:11:11 2002
+Author:	rsync-bugs
+
+Update of /data/cvs/rsync
+In directory va:/home/rsync-bugs/rsync
+
+Modified Files:
+	configure configure.in 
+Log Message:
+preparing for release of 2.5.1
+
+Revisions:
+configure		1.111 => 1.112
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure?r1=1.111&r2=1.112
+configure.in		1.116 => 1.117
+	http://www.samba.org/cgi-bin/cvsweb/rsync/configure.in?r1=1.116&r2=1.117
+
+****************************************
+Date:	Wed Jan  2 23:11:11 2002
+Author:	rsync-bugs
+
+Update of /data/cvs/rsync/packaging/lsb
+In directory va:/home/rsync-bugs/rsync/packaging/lsb
+
+Modified Files:
+	rsync.spec 
+Log Message:
+preparing for release of 2.5.1
+
+Revisions:
+rsync.spec		1.1 => 1.2
+	http://www.samba.org/cgi-bin/cvsweb/rsync/packaging/lsb/rsync.spec?r1=1.1&r2=1.2
+
+****************************************
+Date:	Wed Jan  2 23:11:11 2002
+Author:	rsync-bugs
+
+Update of /data/cvs/rsync/packaging/redhat/5.0
+In directory va:/home/rsync-bugs/rsync/packaging/redhat/5.0
+
+Modified Files:
+	rsync.spec 
+Log Message:
+preparing for release of 2.5.1
+
+Revisions:
+rsync.spec		1.32 => 1.33
+	http://www.samba.org/cgi-bin/cvsweb/rsync/packaging/redhat/5.0/rsync.spec?r1=1.32&r2=1.33
+
+****************************************
+Date:	Wed Jan  2 23:11:11 2002
+Author:	rsync-bugs
+
+Update of /data/cvs/rsync/packaging/redhat/7.1
+In directory va:/home/rsync-bugs/rsync/packaging/redhat/7.1
+
+Modified Files:
+	rsync.spec 
+Log Message:
+preparing for release of 2.5.1
+
+Revisions:
+rsync.spec		1.2 => 1.3
+	http://www.samba.org/cgi-bin/cvsweb/rsync/packaging/redhat/7.1/rsync.spec?r1=1.2&r2=1.3
+
+****************************************
+Date:	Wed Jan  2 23:18:17 2002
+Author:	mbp
+
+Update of /data/cvs/rsync
+In directory va:/tmp/cvs-serv19322
+
+Modified Files:
+	NEWS 
+Log Message:
+Oops, fix date.
+
+
+Revisions:
+NEWS		1.20 => 1.21
+	http://www.samba.org/cgi-bin/cvsweb/rsync/NEWS?r1=1.20&r2=1.21
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/flist.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/flist.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/flist.c	2001-11-30 08:21:08.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/flist.c	2002-01-03 15:09:35.000000000 +0800
@@ -461,13 +461,14 @@
 	*p = '/';
 	
 	return (st2.st_dev != filesystem_dev);
 }
 
 #define STRDUP(ap, p)	(ap ? string_area_strdup(ap, p) : strdup(p))
-#define MALLOC(ap, i)	(ap ? string_area_malloc(ap, i) : malloc(i))
+/* IRIX cc cares that the operands to the ternary have the same type. */
+#define MALLOC(ap, i)	(ap ? (void*) string_area_malloc(ap, i) : malloc(i))
 
 /* create a file_struct for a named file */
 struct file_struct *make_file(int f, char *fname, struct string_area **ap,
 			      int noexcludes)
 {
 	struct file_struct *file;
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/generator.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/generator.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/generator.c	2001-11-30 08:21:08.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/generator.c	2002-01-03 15:09:35.000000000 +0800
@@ -207,13 +207,14 @@
 		rprintf(FINFO,"recv_generator(%s,%d)\n",fname,i);
 
 	statret = link_stat(fname,&st);
 
 	if (only_existing && statret == -1 && errno == ENOENT) {
 		/* we only want to update existing files */
-		if (verbose > 1) rprintf(FINFO,"not creating %s\n",fname);
+		if (verbose > 1) rprintf(FINFO, RSYNC_NAME
+					 ": not creating new file \"%s\"\n",fname);
 		return;
 	}
 
 	if (statret == 0 && 
 	    !preserve_perms && 
 	    (S_ISDIR(st.st_mode) == S_ISDIR(file->mode))) {
@@ -227,65 +228,74 @@
                 /* The file to be received is a directory, so we need
                  * to prepare appropriately.  If there is already a
                  * file of that name and it is *not* a directory, then
                  * we need to delete it.  If it doesn't exist, then
                  * recursively create it. */
           
-		if (dry_run) return;
+		if (dry_run) return; /* XXXX -- might cause inaccuracies?? -- mbp */
 		if (statret == 0 && !S_ISDIR(st.st_mode)) {
 			if (robust_unlink(fname) != 0) {
-				rprintf(FERROR,"recv_generator: unlink %s: %s\n",
+				rprintf(FERROR, RSYNC_NAME
+					": recv_generator: unlink \"%s\" to make room for directory: %s\n",
                                         fname,strerror(errno));
 				return;
 			}
 			statret = -1;
 		}
 		if (statret != 0 && do_mkdir(fname,file->mode) != 0 && errno != EEXIST) {
 			if (!(relative_paths && errno==ENOENT && 
 			      create_directory_path(fname)==0 && 
 			      do_mkdir(fname,file->mode)==0)) {
-				rprintf(FERROR,"recv_generator: mkdir %s: %s (2)\n",
+				rprintf(FERROR, RSYNC_NAME ": recv_generator: mkdir \"%s\": %s (2)\n",
 					fname,strerror(errno));
 			}
 		}
-		if (set_perms(fname,file,NULL,0) && verbose) 
+		/* f_out is set to -1 when doing final directory 
+		   permission and modification time repair */
+		if (set_perms(fname,file,NULL,0) && verbose && (f_out != -1)) 
 			rprintf(FINFO,"%s/\n",fname);
 		return;
 	}
 
 	if (preserve_links && S_ISLNK(file->mode)) {
 #if SUPPORT_LINKS
 		char lnk[MAXPATHLEN];
 		int l;
 		extern int safe_symlinks;
 
 		if (safe_symlinks && unsafe_symlink(file->link, fname)) {
 			if (verbose) {
-				rprintf(FINFO,"ignoring unsafe symlink %s -> %s\n",
+				rprintf(FINFO,RSYNC_NAME ": ignoring unsafe symlink \"%s\" -> \"%s\"\n",
 					fname,file->link);
 			}
 			return;
 		}
 		if (statret == 0) {
 			l = readlink(fname,lnk,MAXPATHLEN-1);
 			if (l > 0) {
 				lnk[l] = 0;
+				/* A link already pointing to the
+				 * right place -- no further action
+				 * required. */
 				if (strcmp(lnk,file->link) == 0) {
 					set_perms(fname,file,&st,1);
 					return;
 				}
-			}
+			}  
+			/* Not a symlink, so delete whatever's
+			 * already there and put a new symlink
+			 * in place. */			   
 			delete_file(fname);
 		}
 		if (do_symlink(file->link,fname) != 0) {
-			rprintf(FERROR,"symlink %s -> %s : %s\n",
+			rprintf(FERROR,RSYNC_NAME": symlink \"%s\" -> \"%s\": %s\n",
 				fname,file->link,strerror(errno));
 		} else {
 			set_perms(fname,file,NULL,0);
 			if (verbose) {
-				rprintf(FINFO,"%s -> %s\n",
+				rprintf(FINFO,RSYNC_NAME": %s -> %s\n",
 					fname,file->link);
 			}
 		}
 #endif
 		return;
 	}
@@ -312,18 +322,20 @@
 		return;
 	}
 #endif
 
 	if (preserve_hard_links && check_hard_link(file)) {
 		if (verbose > 1)
-			rprintf(FINFO,"%s is a hard link\n",f_name(file));
+			rprintf(FINFO, RSYNC_NAME
+				": \"%s\" is a hard link\n",f_name(file));
 		return;
 	}
 
 	if (!S_ISREG(file->mode)) {
-		rprintf(FINFO,"skipping non-regular file %s\n",fname);
+		rprintf(FINFO, RSYNC_NAME
+			": skipping non-regular file \"%s\"\n",fname);
 		return;
 	}
 
 	fnamecmp = fname;
 
 	if ((statret == -1) && (compare_dest != NULL)) {
@@ -342,13 +354,15 @@
 	if (statret == -1) {
 		if (errno == ENOENT) {
 			write_int(f_out,i);
 			if (!dry_run) send_sums(NULL,f_out);
 		} else {
 			if (verbose > 1)
-				rprintf(FERROR,"recv_generator failed to open %s\n",fname);
+				rprintf(FERROR, RSYNC_NAME
+					": recv_generator failed to open \"%s\": %s\n",
+					fname, strerror(errno));
 		}
 		return;
 	}
 
 	if (!S_ISREG(st.st_mode)) {
 		if (delete_file(fname) != 0) {
@@ -385,13 +399,13 @@
 	}
 
 	/* open the file */  
 	fd = do_open(fnamecmp, O_RDONLY, 0);
 
 	if (fd == -1) {
-		rprintf(FERROR,"failed to open %s, continuing : %s\n",fnamecmp,strerror(errno));
+		rprintf(FERROR,RSYNC_NAME": failed to open \"%s\", continuing : %s\n",fnamecmp,strerror(errno));
 		/* pretend the file didn't exist */
 		write_int(f_out,i);
 		send_sums(NULL,f_out);
 		return;
 	}
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/lib/addrinfo.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/lib/addrinfo.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/lib/addrinfo.h	2001-11-27 11:46:03.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/lib/addrinfo.h	2002-01-03 15:09:38.000000000 +0800
@@ -103,6 +103,20 @@
 };
 
 extern void freehostent(struct hostent *);
 extern char *gai_strerror(int);
 #endif /* AI_PASSIVE */
 #endif /* HAVE_GETADDRINFO */
+
+
+
+#ifndef HAVE_SOCKADDR_STORAGE
+struct sockaddr_storage {
+#ifdef HAVE_SOCKADDR_LEN
+	uchar		ss_len;		/* address length */
+	uchar		ss_family;	/* address family */
+#else
+	unsigned short	ss_family;
+#endif
+	unsigned char   fill[126];
+};
+#endif /* ndef HAVE_SOCKADDR_STORAGE */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/lib/getaddrinfo.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/lib/getaddrinfo.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/lib/getaddrinfo.c	2001-11-29 13:01:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/lib/getaddrinfo.c	2002-01-03 15:09:38.000000000 +0800
@@ -42,14 +42,12 @@
 #include <rsync.h>
 
 #if defined(__KAME__) && defined(INET6)
 # define FAITH
 #endif
 
-#include "lib/addrinfo.h"
-
 #define SUCCESS 0
 #define ANY 0
 #define YES 1
 #define NO  0
 
 #ifdef FAITH
@@ -341,21 +339,22 @@
 				fprintf(stderr, "panic!\n");
 				break;
 			}
 			if ((sp = getservbyname(servname, proto)) == NULL)
 				ERR(EAI_SERVICE);
 			port = sp->s_port;
-			if (pai->ai_socktype == ANY)
+			if (pai->ai_socktype == ANY) {
 				if (strcmp(sp->s_proto, "udp") == 0) {
 					pai->ai_socktype = SOCK_DGRAM;
 					pai->ai_protocol = IPPROTO_UDP;
 				} else if (strcmp(sp->s_proto, "tcp") == 0) {
 					pai->ai_socktype = SOCK_STREAM;
 					pai->ai_protocol = IPPROTO_TCP;
 				} else
 					ERR(EAI_PROTOCOL);	/*xxx*/
+			}
 		}
 	}
 	
 	/*
 	 * hostname == NULL.
 	 * passive socket -> anyaddr (0.0.0.0 or ::)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/lib/getnameinfo.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/lib/getnameinfo.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/lib/getnameinfo.c	2001-11-29 13:01:28.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/lib/getnameinfo.c	2002-01-03 15:09:38.000000000 +0800
@@ -33,13 +33,12 @@
  * - Thread safe-ness must be checked
  * - Return values.  There seems to be no standard for return value (RFC2133)
  *   but INRIA implementation returns EAI_xxx defined for getaddrinfo().
  */
 
 #include "rsync.h"
-#include "lib/addrinfo.h"
 
 #define SUCCESS 0
 #define ANY 0
 #define YES 1
 #define NO  0
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/loadparm.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/loadparm.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/loadparm.c	2001-11-30 08:21:08.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/loadparm.c	2002-01-03 15:09:35.000000000 +0800
@@ -383,24 +383,29 @@
 	memset((char *)pservice,0,sizeof(service));
 	copy_service(pservice,&sDefault);
 }
 
 
 /**
- * Assign a copy of @p v to @p *s, freeing any existing values and
- * handling NULL strings.  @p *v must be initialized when this is
- * called, either to NULL or a malloc'd string.
+ * Assign a copy of @p v to @p *s.  Handles NULL strings.  @p *v must
+ * be initialized when this is called, either to NULL or a malloc'd
+ * string.
+ *
+ * @fixme There is a small leak here in that sometimes the existing
+ * value will be dynamically allocated, and the old copy is lost.
+ * However, we can't always deallocate the old value, because in the
+ * case of sDefault, it points to a static string.  It would be nice
+ * to have either all-strdup'd values, or to never need to free
+ * memory.
  **/
 static void string_set(char **s, const char *v)
 {
 	if (!v) {
 		*s = NULL;
 		return;
 	}
-	if (*s)
-		free(*s);
 	*s = strdup(v);
 	if (!*s)
 		exit_cleanup(RERR_MALLOC);
 }
 
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/Makefile.in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/Makefile.in
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/Makefile.in	2001-11-30 08:21:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/Makefile.in	2002-01-03 15:09:27.000000000 +0800
@@ -59,14 +59,17 @@
 	${INSTALLCMD} -m 644 $(srcdir)/rsyncd.conf.5 ${mandir}/man5
 
 install-strip:
 	$(MAKE) INSTALLCMD='$(INSTALLCMD) -s' install
 
 rsync: $(OBJS)
+	@echo "Please ignore warnings below about mktemp -- it is used in a safe way"
 	$(CC) $(CFLAGS) $(LDFLAGS) -o rsync $(OBJS) $(LIBS)
 
+$(OBJS): config.h
+
 tls: $(tls_OBJ)
 	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $(tls_OBJ) $(LIBS)
 
 Makefile: Makefile.in configure config.status
 	echo "WARNING: You need to run ./config.status --recheck"
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/NEWS /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/NEWS
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/NEWS	2001-11-30 08:15:32.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/NEWS	2002-01-03 15:18:25.000000000 +0800
@@ -1,114 +1,33 @@
-rsync 2.5.0 (2001-11-30)		-*- indented-text -*- 
+rsync 2.5.1 (2002-01-03)
 
-  ANNOUNCEMENTS
+  BUG FIXES: 
+   
+    * Fix for segfault in --daemon mode configuration parser.  (Paul
+      Mackerras)
 
-    * Martin Pool <mbp@samba.org> is now a co-maintainer.
+    * Correct string<->address parsing for both IPv4 and 6.
+      (YOSHIFUJI Hideaki, SUMIKAWA Munechika and Jun-ichiro "itojun"
+      Hagino)
 
-  NEW FEATURES
+    * Various fixes for IPv6 support.  (Dave Dykstra)
 
-    * Support for LSB-compliant packaging <http://www.linuxbase.org/>
+    * rsync.1 typo fix.  (Matt Kraai)
 
-    * Shell wildcards are allowed in "auth users" lines.
+    * Test suite typo fixes.  (Tom Schmidt)
 
-    * Merged UNC rsync+ patch to support creation of standalone patch
-      sets.  By Bert J. Dempsey and Debra Weiss, updated by Jos
-      Backus.  <http://www.ils.unc.edu/i2dsi/unc_rsync+.html>
+    * rsync.1 grammar and clarity improvements.  (Edward
+      Welbourne)
 
-    * IPv6 support based on a patch from KAME.net, on systems
-      including modern versions of Linux, Solaris, and HP-UX.  Also
-      includes IPv6 compatibility functions for old OSs by the
-      Internet Software Consortium, Paul Vixie, the OpenSSH
-      portability project, and OpenBSD.
+    * Correction to ./configure tests for inet_ntop.  (Jeff Garzik)
 
-  ENHANCEMENTS
+  ENHANCEMENTS:
 
-    * Include/exclude cluestick: with -vv, print out whether files are
-      included or excluded and why.
+    * --progress and -P now show estimated data transfer rate (in a
+        multiple of bytes/s) and estimated time to completion.  (Rik
+        Faith)
+   
+    * --no-detach option, required to run as a W32 service and also
+        useful when running on Unix under daemontools, AIX's SRC, or a
+        debugger.  (Max Bowsher, Jos Backus)
 
-    * Many error messages have more friendly explanations and more
-      details.
-
-    * Manual page improvements plus scanty protocol documentation.
-
-    * When running as --daemon in the background and using a "log
-      file" rsyncd.conf directive, close the log file every time it is
-      open when going to sleep on the socket.  This allows the log
-      file to get cleaned out by another process.
-
-    * Change to using libpopt rather than getopt for processing
-      options.	This makes the code cleaner and the behaviour more
-      consistent across platforms.  popt is included and built if not
-      installed on the platform.
-
-    * More details in --version, including note about whether 64-bit
-      files, symlinks and hardlinks are supported.
-
-    * MD4 code may use less CPU cycles.
-
-    * Use mkstemp on systems where it is secure.  If we use mktemp,
-      explain that we do it in a secure way.
-
-    * --whole-file is the default when source and target are on the
-	local machine.
-
-  BUG FIXES:
-
-    * Fix for various bugs causing rsync to hang.
-
-    * Attempt to fix Large File Summit support on AIX.
-
-    * Attempt to fix error handling lockup bug.
-
-    * Give a non-0 exit code if *any* of the files we have been asked
-      to transfer fail to transfer 
-
-    * For log messages containing ridiculously long strings that might
-      overflow a buffer rsync no longer aborts, but rather prints an
-      ellipsis at the end of the string.  (Patch from Ed Santiago.)
-
-  PLATFORMS:
-
-    * Improved support for UNICOS (tested on Cray T3E and Cray SV1)
-
-    * autoconf2.52 (or later) is now required to rebuild the autoconf
-      scripts.	It is not required to simply build rsync.
-
-    * Platforms thought to work in this release:
-
-		Cray SV1 UNICOS 10.0.0.8 cc
-		Debian Linux 2.2 UltraSparc gcc
-		Debian Linux testing/unstable ARM gcc
-		FreeBSD 3.3-RELEASE i386 cc
-		FreeBSD 4.1.1-RELEASE i386 cc
-		FreeBSD 4.3-STABLE i386 cc
-		HP PA-RISC HP-UX 10.20 gcc
-		HP PA-RISC HP-UX 11.11 cc
-		IRIX 6.5 MIPS cc
-		IRIX 6.5 MIPS gcc
-		Mac OS X PPC (--disable-ipv6) cc
-		NetBSD 1.5 i386 gcc
-		NetBSD Current i386 cc
-		OpenBSD 2.5 Sparc gcc
-		OpenBSD 2.9 i386 cc
-		OpenBSD Current i386 cc
-		RedHat 6.2 i386 gcc
-		RedHat 6.2 i386 insure++
-		RedHat 7.0 i386 gcc
-		RedHat 7.1 i386 (Kernel 2.4.10) gcc
-		Slackware 8.0 i686 (Kernel 2.4.10)
-		Solaris 8 UltraSparc cc
-		Solaris 8 UltraSparc gcc
-		Solaris 8 i386 gcc
-		SuSE 7.1 i386 gcc2.95.2
-		SuSE 7.1 ppc gcc2.95.2
-		i386-pc-sco3.2v5.0.5 cc
-		i386-pc-sco3.2v5.0.5 gcc
-		powerpc-ibm-aix4.3.3.0 cc
-		i686-unknown-sysv5UnixWare7.1.0 gcc
-		i686-unknown-sysv5UnixWare7.1.0 cc
-
-  TESTING:
-
-    * The existing test.sh script by Phil Hands has been merged into a
-      test framework that works from both "make check" and the Samba
-      build farm.
+    * Clearer error messages for some conditions.
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1: OLDNEWS
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/options.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/options.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/options.c	2001-11-30 08:21:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/options.c	2002-01-03 15:09:35.000000000 +0800
@@ -71,17 +71,27 @@
 int modify_window=2;
 #else
 int modify_window=0;
 #endif
 int blocking_io=0;
 
-/** Global options set from command line. **/
-struct global_opts global_opts;
+/** Network address family. **/
+#ifdef INET6
+int default_af_hint = 0;	/* Any protocol */
+#else
+int default_af_hint = AF_INET;	/* Must use IPv4 */
+#endif
+
+/** Do not go into the background when run as --daemon.  Good
+ * for debugging and required for running as a service on W32,
+ * or under Unix process-monitors. **/
+int no_detach = 0;
+
 
-int read_batch=0;  /* dw */
-int write_batch=0; /* dw */
+int read_batch=0;
+int write_batch=0;
 
 char *backup_suffix = BACKUP_SUFFIX;
 char *tmpdir = NULL;
 char *compare_dest = NULL;
 char *config_file = RSYNCD_CONF;
 char *shell_cmd = NULL;
@@ -103,13 +113,13 @@
 /** Local address to bind.  As a character string because it's
  * interpreted by the IPv6 layer: should be a numeric IP4 or ip6
  * address, or a hostname. **/
 char *bind_address;
 
 
-static void print_rsync_version(int f)
+static void print_rsync_version(enum logcode f)
 {
         char const *got_socketpair = "no ";
         char const *hardlinks = "no ";
         char const *links = "no ";
 	char const *ipv6 = "no ";
 
@@ -168,14 +178,14 @@
   rprintf(F," -r, --recursive             recurse into directories\n");
   rprintf(F," -R, --relative              use relative path names\n");
   rprintf(F," -b, --backup                make backups (default %s suffix)\n",BACKUP_SUFFIX);
   rprintf(F,"     --backup-dir            make backups into this directory\n");
   rprintf(F,"     --suffix=SUFFIX         override backup suffix\n");  
   rprintf(F," -u, --update                update only (don't overwrite newer files)\n");
-  rprintf(F," -l, --links                 preserve soft links\n");
-  rprintf(F," -L, --copy-links            treat soft links like regular files\n");
+  rprintf(F," -l, --links                 copy symlinks as symlinks\n");
+  rprintf(F," -L, --copy-links            copy the referent of symlinks\n");
   rprintf(F,"     --copy-unsafe-links     copy links outside the source tree\n");
   rprintf(F,"     --safe-links            ignore links outside the destination tree\n");
   rprintf(F," -H, --hard-links            preserve hard links\n");
   rprintf(F," -p, --perms                 preserve permissions\n");
   rprintf(F," -o, --owner                 preserve owner (root only)\n");
   rprintf(F," -g, --group                 preserve group\n");
@@ -209,13 +219,14 @@
   rprintf(F,"     --exclude=PATTERN       exclude files matching PATTERN\n");
   rprintf(F,"     --exclude-from=FILE     exclude patterns listed in FILE\n");
   rprintf(F,"     --include=PATTERN       don't exclude files matching PATTERN\n");
   rprintf(F,"     --include-from=FILE     don't exclude patterns listed in FILE\n");
   rprintf(F,"     --version               print version number\n");  
   rprintf(F,"     --daemon                run as a rsync daemon\n");  
-  rprintf(F,"     --address               bind to the specified address\n");  
+  rprintf(F,"     --no-detach             do not detach from the parent\n");  
+  rprintf(F,"     --address=ADDRESS       bind to the specified address\n");  
   rprintf(F,"     --config=FILE           specify alternate rsyncd.conf file\n");  
   rprintf(F,"     --port=PORT             specify alternate rsyncd port number\n");
   rprintf(F,"     --blocking-io           use blocking IO for the remote shell\n");  
   rprintf(F,"     --stats                 give some file transfer stats\n");  
   rprintf(F,"     --progress              show progress during transfer\n");  
   rprintf(F,"     --log-format=FORMAT     log file transfers using specified format\n");  
@@ -295,12 +306,13 @@
   {"timeout",          0,  POPT_ARG_INT,    &io_timeout},
   {"temp-dir",        'T', POPT_ARG_STRING, &tmpdir},
   {"compare-dest",     0,  POPT_ARG_STRING, &compare_dest},
   /* TODO: Should this take an optional int giving the compression level? */
   {"compress",        'z', POPT_ARG_NONE,   &do_compression},
   {"daemon",           0,  POPT_ARG_NONE,   &am_daemon},
+  {"no-detach",        0,  POPT_ARG_NONE,   &no_detach},
   {"stats",            0,  POPT_ARG_NONE,   &do_stats},
   {"progress",         0,  POPT_ARG_NONE,   &do_progress},
   {"partial",          0,  POPT_ARG_NONE,   &keep_partial},
   {"ignore-errors",    0,  POPT_ARG_NONE,   &ignore_errors},
   {"blocking-io",      0,  POPT_ARG_NONE,   &blocking_io},
   {0,                 'P', POPT_ARG_NONE,   0,               'P'},
@@ -311,14 +323,14 @@
   {"address",          0,  POPT_ARG_STRING, &bind_address, 0},
   {"backup-dir",       0,  POPT_ARG_STRING, &backup_dir},
   {"hard-links",      'H', POPT_ARG_NONE,   &preserve_hard_links},
   {"read-batch",      'f', POPT_ARG_STRING, &batch_ext, 'f'},
   {"write-batch",     'F', POPT_ARG_NONE,   &write_batch, 0},
 #ifdef INET6
-  {0,		      '4', POPT_ARG_VAL,    &global_opts.af_hint,   AF_INET },
-  {0,		      '6', POPT_ARG_VAL,    &global_opts.af_hint,   AF_INET6 },
+  {0,		      '4', POPT_ARG_VAL,    &default_af_hint,   AF_INET },
+  {0,		      '6', POPT_ARG_VAL,    &default_af_hint,   AF_INET6 },
 #endif
   {0,0,0,0}
 };
 
 
 static char err_buf[100];
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/packaging/lsb/rsync.spec /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/packaging/lsb/rsync.spec
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/packaging/lsb/rsync.spec	2001-11-30 08:31:23.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/packaging/lsb/rsync.spec	2002-01-03 15:19:42.000000000 +0800
@@ -1,13 +1,13 @@
 Summary: Program for efficient remote updates of files.
 Name: rsync
-Version: 2.5.0
+Version: 2.5.1
 Release: 1
 Copyright: GPL
 Group: Applications/Networking
-Source:	ftp://samba.anu.edu.au/pub/rsync/rsync-2.5.0.tar.gz
+Source:	ftp://samba.anu.edu.au/pub/rsync/rsync-2.5.1.tar.gz
 URL: http://samba.anu.edu.au/rsync/
 Packager: Andrew Tridgell <tridge@samba.anu.edu.au>
 BuildRoot: /tmp/rsync
 
 %description
 rsync is a replacement for rcp that has many more features.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/packaging/redhat/5.0/rsync.spec /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/packaging/redhat/5.0/rsync.spec
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/packaging/redhat/5.0/rsync.spec	2001-11-30 08:31:23.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/packaging/redhat/5.0/rsync.spec	2002-01-03 15:19:42.000000000 +0800
@@ -1,13 +1,13 @@
 Summary: Program for efficient remote updates of files.
 Name: rsync
-Version: 2.5.0
+Version: 2.5.1
 Release: 1
 Copyright: GPL
 Group: Applications/Networking
-Source:	ftp://samba.anu.edu.au/pub/rsync/rsync-2.5.0.tar.gz
+Source:	ftp://samba.anu.edu.au/pub/rsync/rsync-2.5.1.tar.gz
 URL: http://samba.anu.edu.au/rsync/
 Packager: Andrew Tridgell <tridge@samba.anu.edu.au>
 BuildRoot: /tmp/rsync
 
 %description
 rsync is a replacement for rcp that has many more features.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/packaging/redhat/7.1/rsync.spec /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/packaging/redhat/7.1/rsync.spec
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/packaging/redhat/7.1/rsync.spec	2001-11-30 08:31:23.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/packaging/redhat/7.1/rsync.spec	2002-01-03 15:19:42.000000000 +0800
@@ -1,13 +1,13 @@
 Summary: Program for efficient remote updates of files.
 Name: rsync
-Version: 2.5.0
+Version: 2.5.1
 Release: 1
 Copyright: GPL
 Group: Applications/Networking
-Source:	ftp://samba.anu.edu.au/pub/rsync/rsync-2.5.0.tar.gz
+Source:	ftp://samba.anu.edu.au/pub/rsync/rsync-2.5.1.tar.gz
 URL: http://samba.anu.edu.au/rsync/
 Packager: Andrew Tridgell <tridge@samba.anu.edu.au>
 BuildRoot: /tmp/rsync
 
 %description
 rsync is a replacement for rcp that has many more features.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/README /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/README
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/README	2001-11-30 08:21:07.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/README	2002-01-03 15:09:27.000000000 +0800
@@ -140,15 +140,13 @@
 http://rsync.samba.org/rsync/ 
 
 This will give you access to the bug tracking system used by the
 developers of rsync and will allow you to look at other bug reports or
 submit a new bug report.
 
-If you don't have web access then mail bug reports to
-rsync-bugs@samba.org or (if you think it will be of interest to lots
-of people) send it to rsync@samba.org
+If you don't have web access then mail bug reports to rsync@samba.org.
 
 
 CVS TREE
 --------
 
 If you want to get the very latest version of rsync direct from the
@@ -164,17 +162,18 @@
 details.
 
 
 COPYRIGHT
 ---------
 
-Rsync was written by Andrew Tridgell and Paul Mackerras, and is
-available under the GNU General Public License.
+rsync was originally written by Andrew Tridgell and has been improved
+by many developers around the world.  rsync may be used, modified and
+redistributed only under the terms of the GNU General Public License,
+found in the file COPYING in this distribution, or at 
 
-tridge@samba.org
-paulus@cs.anu.edu.au
+  http://www.fsf.org/licenses/gpl.html
 
 
 AVAILABILITY
 ------------
 
 The main web site for rsync is http://rsync.samba.org/
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/rsync.1 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/rsync.1
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/rsync.1	2001-11-30 08:21:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/rsync.1	2002-01-03 15:09:36.000000000 +0800
@@ -1,7 +1,7 @@
-.TH "rsync" "1" "29 May 2001" "" "" 
+.TH "rsync" "1" "14 Dec 2001" "" "" 
 .SH "NAME" 
 rsync \- faster, flexible replacement for rcp
 .SH "SYNOPSIS" 
 .PP 
 rsync [OPTION]\&.\&.\&. SRC [SRC]\&.\&.\&. [USER@]HOST:DEST
 .PP 
@@ -16,13 +16,13 @@
 rsync [OPTION]\&.\&.\&. rsync://[USER@]HOST[:PORT]/SRC [DEST]
 .PP 
 .SH "DESCRIPTION" 
 .PP 
 rsync is a program that behaves in much the same way that rcp does,
 but has many more options and uses the rsync remote-update protocol to
-greatly speedup file transfers when the destination file already
+greatly speed up file transfers when the destination file already
 exists\&.
 .PP 
 The rsync remote-update protocol allows rsync to transfer just the
 differences between two sets of files across the network link, using
 an efficient checksum-search algorithm described in the technical
 report that accompanies this package\&.
@@ -87,13 +87,13 @@
 See the file README for installation instructions\&.
 .PP 
 Once installed you can use rsync to any machine that you can use rsh
 to\&.  rsync uses rsh for its communications, unless both the source and
 destination are local\&.
 .PP 
-You can also specify an alternative to rsh, by either using the -e
+You can also specify an alternative to rsh, either by using the -e
 command line option, or by setting the RSYNC_RSH environment variable\&.
 .PP 
 One common substitute is to use ssh, which offers a high degree of
 security\&.
 .PP 
 Note that rsync must be installed on both the source and destination
@@ -152,16 +152,16 @@
 .SH "CONNECTING TO AN RSYNC SERVER" 
 .PP 
 It is also possible to use rsync without using rsh or ssh as the
 transport\&. In this case you will connect to a remote rsync server
 running on TCP port 873\&. 
 .PP 
-You may establish the connetcion via a web proxy by setting the
+You may establish the connection via a web proxy by setting the
 environment variable RSYNC_PROXY to a hostname:port pair pointing to
-your web proxy\&. Note that your web proxy must allow proxying to port
-873, this must be configured in your proxy servers ruleset\&.
+your web proxy\&.  Note that your web proxy\&'s configuration must allow
+proxying to port 873\&.
 .PP 
 Using rsync in this way is the same as using it with rsh or ssh except
 that:
 .PP 
 .IP o 
 you use a double colon :: instead of a single colon to
@@ -252,14 +252,14 @@
  -r, --recursive             recurse into directories
  -R, --relative              use relative path names
  -b, --backup                make backups (default ~ suffix)
      --backup-dir            make backups into this directory
      --suffix=SUFFIX         override backup suffix
  -u, --update                update only (don\&'t overwrite newer files)
- -l, --links                 preserve soft links
- -L, --copy-links            treat soft links like regular files
+ -l, --links                 copy symlinks as symlinks
+ -L, --copy-links            copy the referent of symlinks
      --copy-unsafe-links     copy links outside the source tree
      --safe-links            ignore links outside the destination tree
  -H, --hard-links            preserve hard links
  -p, --perms                 preserve permissions
  -o, --owner                 preserve owner (root only)
  -g, --group                 preserve group
@@ -293,13 +293,14 @@
      --exclude=PATTERN       exclude files matching PATTERN
      --exclude-from=FILE     exclude patterns listed in FILE
      --include=PATTERN       don\&'t exclude files matching PATTERN
      --include-from=FILE     don\&'t exclude patterns listed in FILE
      --version               print version number
      --daemon                run as a rsync daemon
-     --address               bind to the specified address
+     --no-detach             do not detach from the parent
+     --address=ADDRESS       bind to the specified address
      --config=FILE           specify alternate rsyncd\&.conf file
      --port=PORT             specify alternate rsyncd port number
      --blocking-io           use blocking IO for the remote shell
      --stats                 give some file transfer stats
      --progress              show progress during transfer
      --log-format=FORMAT     log file transfers using specified format
@@ -433,25 +434,24 @@
 .IP "\fB-u, --update\fP" 
 This forces rsync to skip any files for which the
 destination file already exists and has a date later than the source
 file\&.
 .IP 
 .IP "\fB-l, --links\fP" 
-This tells rsync to recreate symbolic links on the
-remote system  to  be the same as the local system\&. Without this
-option, all symbolic links are skipped\&.
+When symlinks are encountered, recreate the
+symlink on the destination\&.
 .IP 
 .IP "\fB-L, --copy-links\fP" 
-This tells rsync to treat symbolic links just
-like ordinary files\&.
+When symlinks are encountered, the file that
+they point to is copied, rather than the symlink\&.
 .IP 
 .IP "\fB--copy-unsafe-links\fP" 
-This tells rsync to treat symbolic links that
-point outside the source tree like ordinary files\&.  Absolute symlinks are
-also treated like ordinary files, and so are any symlinks in the source
-path itself when --relative is used\&.
+This tells rsync to copy the referent of
+symbolic links that point outside the source tree\&.  Absolute symlinks
+are also treated like ordinary files, and so are any symlinks in the
+source path itself when --relative is used\&.
 .IP 
 .IP "\fB--safe-links\fP" 
 This tells rsync to ignore any symbolic links
 which point outside the destination tree\&. All absolute symlinks are
 also ignored\&. Using this option in conjunction with --relative may
 give unexpected results\&. 
@@ -476,23 +476,22 @@
 .IP 
 .IP "\fB-p, --perms\fP" 
 This option causes rsync to update the remote
 permissions to be the same as the local permissions\&.
 .IP 
 .IP "\fB-o, --owner\fP" 
-This option causes rsync to update the  remote  owner
-of the  file to be the same as the local owner\&. This is only available
-to the super-user\&.  Note that if the source system is a daemon using chroot,
-the --numeric-ids option is implied because the source system cannot get
-access to the usernames\&.
+This option causes rsync to set the owner of the
+destination file to be the same as the source file\&.  On most systems,
+only the super-user can set file ownership\&.  
 .IP 
 .IP "\fB-g, --group\fP" 
-This option causes rsync to update the  remote  group
-of the file to be the same as the local group\&.  If the receving system is
-not running as the super-user, only groups that the receiver is a member of
-will be preserved (by group name, not group id number)\&.
+This option causes rsync to set the group of the
+destination file to be the same as the source file\&.  If the receiving
+program is not running as the super-user, only groups that the
+receiver is a member of will be preserved (by group name, not group id
+number)\&.
 .IP 
 .IP "\fB-D, --devices\fP" 
 This option causes rsync to transfer character and
 block device information to the remote system to recreate these
 devices\&. This option is only available to the super-user\&.
 .IP 
@@ -569,13 +568,13 @@
 cases where rsync tries to copy a normal file but the destination
 contains a directory of the same name\&. 
 .IP 
 Since this option was added, deletions were reordered to be done depth-first
 so it is hardly ever needed anymore except in very obscure cases\&.
 .IP 
-.IP "\fB-B , --block_size=BLOCKSIZE\fP" 
+.IP "\fB-B , --block-size=BLOCKSIZE\fP" 
 This controls the block size used in
 the rsync algorithm\&. See the technical report for details\&.
 .IP 
 .IP "\fB-e, --rsh=COMMAND\fP" 
 This option allows you to choose an alternative
 remote shell program to use for communication between the local and
@@ -636,14 +635,15 @@
 *\&.a *\&.o *\&.obj *\&.so *\&.Z *\&.elc *\&.ln core
 .RE 
 .IP 
 then files listed in a $HOME/\&.cvsignore are added to the list and any
 files listed in the CVSIGNORE environment variable (space delimited)\&.
 .IP 
-Finally in each directory any files listed in the \&.cvsignore file in
-that directory are added to the list\&.
+Finally, any file is ignored if it is in the same directory as a
+\&.cvsignore file and matches one of the patterns listed therein\&.  See
+the \fBcvs(1)\fP manual for more information\&.
 .IP 
 .IP "\fB--csum-length=LENGTH\fP" 
 By default the primary checksum used in
 rsync is a very strong 16 byte MD4 checksum\&. In most cases you will
 find that a truncated version of this checksum is quite efficient, and
 this will decrease the size of the checksum data sent over the link,
@@ -699,29 +699,42 @@
 .IP 
 By default rsync will use the user name and group name to determine
 what ownership to give files\&. The special uid 0 and the special group
 0 are never mapped via user/group names even if the --numeric-ids
 option is not specified\&.
 .IP 
-If the source system is a daemon using chroot, or if a user or group name
-does not exist on the destination system, then the numeric id from the
-source system is used instead\&.
+If the source system is a daemon using chroot, or if a user or group
+name does not exist on the destination system, then the numeric id
+from the source system is used instead\&.
 .IP 
 .IP "\fB--timeout=TIMEOUT\fP" 
 This option allows you to set a maximum IO
 timeout in seconds\&. If no data is transferred for the specified time
 then rsync will exit\&. The default is 0, which means no timeout\&.
 .IP 
 .IP "\fB--daemon\fP" 
-This tells rsync that it is to run as a rsync
-daemon\&. If standard input is a socket then rsync will assume that it
-is being run via inetd, otherwise it will detach from the current
-terminal and become a background daemon\&. The daemon will read the
-config file (/etc/rsyncd\&.conf) on each connect made by a client and
-respond to requests accordingly\&. See the rsyncd\&.conf(5) man page for more
-details\&. 
+This tells rsync that it is to run as a daemon\&.  The
+daemon may be accessed using the \fBhost::module\fP or
+\fBrsync://host/module/\fP syntax\&.
+.IP 
+If standard input is a socket then rsync will assume that it is being
+run via inetd, otherwise it will detach from the current terminal and
+become a background daemon\&.  The daemon will read the config file
+(/etc/rsyncd\&.conf) on each connect made by a client and respond to
+requests accordingly\&.  See the rsyncd\&.conf(5) man page for more
+details\&.
+.IP 
+.IP "\fB--no-detach\fP" 
+When running as a daemon, this option instructs
+rsync to not detach itself and become a background process\&.  This
+option is required when running as a service on Cygwin, and may also
+be useful when rsync is supervised by a program such as
+\fBdaemontools\fP or AIX\&'s \fBSystem Resource Controller\fP\&.
+\fB--no-detach\fP is also recommended when rsync is run under a
+debugger\&.  This option has no effect if rsync is run from inetd or
+sshd\&.
 .IP 
 .IP "\fB--address\fP" 
 By default rsync will bind to the wildcard address
 when run as a daemon with the --daemon option or when connecting to a
 rsync server\&. The --address option allows you to specify a specific IP
 address (or hostname) to bind to\&. This makes virtual hosting possible
@@ -801,13 +814,13 @@
 .PP 
 .SH "EXCLUDE PATTERNS" 
 .PP 
 The exclude and include patterns specified to rsync allow for flexible
 selection of which files to transfer and which files to skip\&.
 .PP 
-rsync builds a ordered list of include/exclude options as specified on
+rsync builds an ordered list of include/exclude options as specified on
 the command line\&. When a filename is encountered, rsync checks the
 name against each exclude/include pattern in turn\&. The first matching
 pattern is acted on\&. If it is an exclude pattern, then that file is
 skipped\&. If it is an include pattern then that filename is not
 skipped\&. If no matching include/exclude pattern is found then the
 filename is not skipped\&.
@@ -861,13 +874,13 @@
 if the pattern starts with "- " (a minus followed by a space)
 then it is always considered an exclude pattern, even if specified as
 part of an include option\&. The "- " part is discarded before matching\&.
 .IP 
 .IP o 
 if the pattern is a single exclamation mark ! then the current
-exclude list is reset, removing all previous exclude patterns\&.
+include/exclude list is reset, removing all previously defined patterns\&.
 .PP 
 The +/- rules are most useful in exclude lists, allowing you to have a
 single exclude list that contains both include and exclude options\&.
 .PP 
 If you end an exclude list with --exclude \&'*\&', note that since the
 algorithm is applied recursively that unless you explicitly include
@@ -921,12 +934,35 @@
 .IP o 
 \fBrsync_delta\&.<timestamp>\fP data blocks for file update & change
 .PP 
 See \fBhttp://www\&.ils\&.unc\&.edu/i2dsi/unc_rsync+\&.html\fP for papers and technical
 reports\&.
 .PP 
+.SH "SYMBOLIC LINKS" 
+.PP 
+Three basic behaviours are possible when rsync encounters a symbolic
+link in the source directory\&.
+.PP 
+By default, symbolic links are not transferred at all\&.  A message
+"skipping non-regular" file is emitted for any symlinks that exist\&.
+.PP 
+If \fB--links\fP is specified, then symlinks are recreated with the same
+target on the destination\&.  Note that \fB--archive\fP implies
+\fB--links\fP\&.
+.PP 
+If \fB--copy-links\fP is specified, then symlinks are "collapsed" by
+copying their referent, rather than the symlink\&.
+.PP 
+rsync also distinguishes "safe" and "unsafe" symbolic links\&.  An
+example where this might be used is a web site mirror that wishes
+ensure the rsync module they copy does not include symbolic links to
+\fB/etc/passwd\fP in the public section of the site\&.  Using
+\fB--copy-unsafe-links\fP will cause any links to be copied as the file
+they point to on the destination\&.  Using \fB--safe-links\fP will cause
+unsafe links to be ommitted altogether\&.
+.PP 
 .SH "DIAGNOSTICS" 
 .PP 
 rsync occasionally produces error messages that may seem a little
 cryptic\&. The one that seems to cause the most confusion is "protocol
 version mismatch - is your shell clean?"\&.
 .PP 
@@ -1072,12 +1108,12 @@
 Thanks to Richard Brent, Brendan Mackay, Bill Waite, Stephen Rothwell
 and David Bell for helpful suggestions and testing of rsync\&. I\&'ve
 probably missed some people, my apologies if I have\&.
 .PP 
 .SH "AUTHOR" 
 .PP 
-rsync was written by Andrew Tridgell and Paul Mackerras\&.  They may be
-contacted via email at tridge@samba\&.org and
-Paul\&.Mackerras@cs\&.anu\&.edu\&.au
+rsync was written by Andrew Tridgell and Paul Mackerras\&.  
 .PP 
-rsync is now also maintained by Martin Pool <mbp@samba\&.org>
+rsync is now maintained by Martin Pool <mbp@samba\&.org>\&.
 .PP 
+Mailing lists for support and development are available at
+http://lists\&.samba\&.org
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/rsync.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/rsync.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/rsync.c	2001-11-30 08:21:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/rsync.c	2002-01-03 15:09:36.000000000 +0800
@@ -223,13 +223,12 @@
 	return updated;
 }
 
 
 void sig_int(void)
 {
-	rprintf(FINFO,"\nrsync.c:sig_int() called.\n");
 	exit_cleanup(RERR_SIGNAL);
 }
 
 
 /* finish off a file transfer, renaming the file and setting the permissions
    and ownership */
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/rsync.h /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/rsync.h
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/rsync.h	2001-11-30 08:21:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/rsync.h	2002-01-03 15:09:36.000000000 +0800
@@ -387,12 +387,13 @@
 }
 
 #include "byteorder.h"
 #include "proto.h"
 #include "lib/mdfour.h"
 #include "lib/permstring.h"
+#include "lib/addrinfo.h"
 
 /* We have replacement versions of these if they're missing. */
 #ifndef HAVE_ASPRINTF
 int asprintf(char **ptr, const char *format, ...);
 #endif
 
@@ -560,18 +561,12 @@
 
 #define exit_cleanup(code) _exit_cleanup(code, __FILE__, __LINE__)
 
 
 extern int verbose;
 
-extern struct global_opts {
-	/** Network address family. **/
-	int af_hint;
-} global_opts;
-
-
 #ifndef HAVE_INET_NTOP
 const char *                 
 inet_ntop(int af, const void *src, char *dst, size_t size);
 #endif /* !HAVE_INET_NTOP */
 
 #ifndef HAVE_INET_PTON
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/rsync.yo /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/rsync.yo
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/rsync.yo	2001-11-30 08:21:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/rsync.yo	2002-01-03 15:09:36.000000000 +0800
@@ -1,8 +1,8 @@
 mailto(rsync-bugs@samba.org)
-manpage(rsync)(1)(29 May 2001)()()
+manpage(rsync)(1)(14 Dec 2001)()()
 manpagename(rsync)(faster, flexible replacement for rcp)
 manpagesynopsis()
 
 rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST
 
 rsync [OPTION]... [USER@]HOST:SRC DEST
@@ -16,13 +16,13 @@
 rsync [OPTION]... rsync://[USER@]HOST[:PORT]/SRC [DEST]
 
 manpagedescription()
 
 rsync is a program that behaves in much the same way that rcp does,
 but has many more options and uses the rsync remote-update protocol to
-greatly speedup file transfers when the destination file already
+greatly speed up file transfers when the destination file already
 exists.
 
 The rsync remote-update protocol allows rsync to transfer just the
 differences between two sets of files across the network link, using
 an efficient checksum-search algorithm described in the technical
 report that accompanies this package.
@@ -78,13 +78,13 @@
 See the file README for installation instructions.
 
 Once installed you can use rsync to any machine that you can use rsh
 to.  rsync uses rsh for its communications, unless both the source and
 destination are local.
 
-You can also specify an alternative to rsh, by either using the -e
+You can also specify an alternative to rsh, either by using the -e
 command line option, or by setting the RSYNC_RSH environment variable.
 
 One common substitute is to use ssh, which offers a high degree of
 security.
 
 Note that rsync must be installed on both the source and destination
@@ -136,16 +136,16 @@
 manpagesection(CONNECTING TO AN RSYNC SERVER)
 
 It is also possible to use rsync without using rsh or ssh as the
 transport. In this case you will connect to a remote rsync server
 running on TCP port 873. 
 
-You may establish the connetcion via a web proxy by setting the
+You may establish the connection via a web proxy by setting the
 environment variable RSYNC_PROXY to a hostname:port pair pointing to
-your web proxy. Note that your web proxy must allow proxying to port
-873, this must be configured in your proxy servers ruleset.
+your web proxy.  Note that your web proxy's configuration must allow
+proxying to port 873.
 
 Using rsync in this way is the same as using it with rsh or ssh except
 that:
 
 itemize(
 	it() you use a double colon :: instead of a single colon to
@@ -223,14 +223,14 @@
  -r, --recursive             recurse into directories
  -R, --relative              use relative path names
  -b, --backup                make backups (default ~ suffix)
      --backup-dir            make backups into this directory
      --suffix=SUFFIX         override backup suffix
  -u, --update                update only (don't overwrite newer files)
- -l, --links                 preserve soft links
- -L, --copy-links            treat soft links like regular files
+ -l, --links                 copy symlinks as symlinks
+ -L, --copy-links            copy the referent of symlinks
      --copy-unsafe-links     copy links outside the source tree
      --safe-links            ignore links outside the destination tree
  -H, --hard-links            preserve hard links
  -p, --perms                 preserve permissions
  -o, --owner                 preserve owner (root only)
  -g, --group                 preserve group
@@ -264,13 +264,14 @@
      --exclude=PATTERN       exclude files matching PATTERN
      --exclude-from=FILE     exclude patterns listed in FILE
      --include=PATTERN       don't exclude files matching PATTERN
      --include-from=FILE     don't exclude patterns listed in FILE
      --version               print version number
      --daemon                run as a rsync daemon
-     --address               bind to the specified address
+     --no-detach             do not detach from the parent
+     --address=ADDRESS       bind to the specified address
      --config=FILE           specify alternate rsyncd.conf file
      --port=PORT             specify alternate rsyncd port number
      --blocking-io           use blocking IO for the remote shell
      --stats                 give some file transfer stats
      --progress              show progress during transfer
      --log-format=FORMAT     log file transfers using specified format
@@ -374,23 +375,22 @@
 backup suffix used with the -b option. The default is a ~.
 
 dit(bf(-u, --update)) This forces rsync to skip any files for which the
 destination file already exists and has a date later than the source
 file.
 
-dit(bf(-l, --links)) This tells rsync to recreate symbolic links on the
-remote system  to  be the same as the local system. Without this
-option, all symbolic links are skipped.
-
-dit(bf(-L, --copy-links)) This tells rsync to treat symbolic links just
-like ordinary files.
-
-dit(bf(--copy-unsafe-links)) This tells rsync to treat symbolic links that
-point outside the source tree like ordinary files.  Absolute symlinks are
-also treated like ordinary files, and so are any symlinks in the source
-path itself when --relative is used.
+dit(bf(-l, --links)) When symlinks are encountered, recreate the
+symlink on the destination.
+
+dit(bf(-L, --copy-links)) When symlinks are encountered, the file that
+they point to is copied, rather than the symlink.
+
+dit(bf(--copy-unsafe-links)) This tells rsync to copy the referent of
+symbolic links that point outside the source tree.  Absolute symlinks
+are also treated like ordinary files, and so are any symlinks in the
+source path itself when --relative is used.
 
 dit(bf(--safe-links)) This tells rsync to ignore any symbolic links
 which point outside the destination tree. All absolute symlinks are
 also ignored. Using this option in conjunction with --relative may
 give unexpected results. 
 
@@ -410,22 +410,21 @@
 "disk" is actually a networked file system).  This is the default when both
 the source and target are on the local machine.
 
 dit(bf(-p, --perms)) This option causes rsync to update the remote
 permissions to be the same as the local permissions.
 
-dit(bf(-o, --owner)) This option causes rsync to update the  remote  owner
-of the  file to be the same as the local owner. This is only available
-to the super-user.  Note that if the source system is a daemon using chroot,
-the --numeric-ids option is implied because the source system cannot get
-access to the usernames.
-
-dit(bf(-g, --group)) This option causes rsync to update the  remote  group
-of the file to be the same as the local group.  If the receving system is
-not running as the super-user, only groups that the receiver is a member of
-will be preserved (by group name, not group id number).
+dit(bf(-o, --owner)) This option causes rsync to set the owner of the
+destination file to be the same as the source file.  On most systems,
+only the super-user can set file ownership.  
+
+dit(bf(-g, --group)) This option causes rsync to set the group of the
+destination file to be the same as the source file.  If the receiving
+program is not running as the super-user, only groups that the
+receiver is a member of will be preserved (by group name, not group id
+number).
 
 dit(bf(-D, --devices)) This option causes rsync to transfer character and
 block device information to the remote system to recreate these
 devices. This option is only available to the super-user.
 
 dit(bf(-t, --times)) This tells rsync to transfer modification times along
@@ -490,13 +489,13 @@
 cases where rsync tries to copy a normal file but the destination
 contains a directory of the same name. 
 
 Since this option was added, deletions were reordered to be done depth-first
 so it is hardly ever needed anymore except in very obscure cases.
 
-dit(bf(-B , --block_size=BLOCKSIZE)) This controls the block size used in
+dit(bf(-B , --block-size=BLOCKSIZE)) This controls the block size used in
 the rsync algorithm. See the technical report for details.
 
 dit(bf(-e, --rsh=COMMAND)) This option allows you to choose an alternative
 remote shell program to use for communication between the local and
 remote copies of rsync. By default, rsync will use rsh, but you may
 like to instead use ssh because of its high security.
@@ -547,14 +546,15 @@
 .nse_depinfo *~ #* .#* ,* *.old *.bak *.BAK *.orig *.rej .del-*
 *.a *.o *.obj *.so *.Z *.elc *.ln core)
 
 then files listed in a $HOME/.cvsignore are added to the list and any
 files listed in the CVSIGNORE environment variable (space delimited).
 
-Finally in each directory any files listed in the .cvsignore file in
-that directory are added to the list.
+Finally, any file is ignored if it is in the same directory as a
+.cvsignore file and matches one of the patterns listed therein.  See
+the bf(cvs(1)) manual for more information.
 
 dit(bf(--csum-length=LENGTH)) By default the primary checksum used in
 rsync is a very strong 16 byte MD4 checksum. In most cases you will
 find that a truncated version of this checksum is quite efficient, and
 this will decrease the size of the checksum data sent over the link,
 making things faster. 
@@ -605,27 +605,39 @@
 
 By default rsync will use the user name and group name to determine
 what ownership to give files. The special uid 0 and the special group
 0 are never mapped via user/group names even if the --numeric-ids
 option is not specified.
 
-If the source system is a daemon using chroot, or if a user or group name
-does not exist on the destination system, then the numeric id from the
-source system is used instead.
+If the source system is a daemon using chroot, or if a user or group
+name does not exist on the destination system, then the numeric id
+from the source system is used instead.
 
 dit(bf(--timeout=TIMEOUT)) This option allows you to set a maximum IO
 timeout in seconds. If no data is transferred for the specified time
 then rsync will exit. The default is 0, which means no timeout.
 
-dit(bf(--daemon)) This tells rsync that it is to run as a rsync
-daemon. If standard input is a socket then rsync will assume that it
-is being run via inetd, otherwise it will detach from the current
-terminal and become a background daemon. The daemon will read the
-config file (/etc/rsyncd.conf) on each connect made by a client and
-respond to requests accordingly. See the rsyncd.conf(5) man page for more
-details. 
+dit(bf(--daemon)) This tells rsync that it is to run as a daemon.  The
+daemon may be accessed using the bf(host::module) or
+bf(rsync://host/module/) syntax.
+
+If standard input is a socket then rsync will assume that it is being
+run via inetd, otherwise it will detach from the current terminal and
+become a background daemon.  The daemon will read the config file
+(/etc/rsyncd.conf) on each connect made by a client and respond to
+requests accordingly.  See the rsyncd.conf(5) man page for more
+details.
+
+dit(bf(--no-detach)) When running as a daemon, this option instructs
+rsync to not detach itself and become a background process.  This
+option is required when running as a service on Cygwin, and may also
+be useful when rsync is supervised by a program such as
+bf(daemontools) or AIX's bf(System Resource Controller).
+bf(--no-detach) is also recommended when rsync is run under a
+debugger.  This option has no effect if rsync is run from inetd or
+sshd.
 
 dit(bf(--address)) By default rsync will bind to the wildcard address
 when run as a daemon with the --daemon option or when connecting to a
 rsync server. The --address option allows you to specify a specific IP
 address (or hostname) to bind to. This makes virtual hosting possible
 in conjunction with the --config option.
@@ -693,13 +705,13 @@
 
 manpagesection(EXCLUDE PATTERNS)
 
 The exclude and include patterns specified to rsync allow for flexible
 selection of which files to transfer and which files to skip.
 
-rsync builds a ordered list of include/exclude options as specified on
+rsync builds an ordered list of include/exclude options as specified on
 the command line. When a filename is encountered, rsync checks the
 name against each exclude/include pattern in turn. The first matching
 pattern is acted on. If it is an exclude pattern, then that file is
 skipped. If it is an include pattern then that filename is not
 skipped. If no matching include/exclude pattern is found then the
 filename is not skipped.
@@ -746,13 +758,13 @@
 
   it() if the pattern starts with "- " (a minus followed by a space)
   then it is always considered an exclude pattern, even if specified as
   part of an include option. The "- " part is discarded before matching.
 
   it() if the pattern is a single exclamation mark ! then the current
-  exclude list is reset, removing all previous exclude patterns.
+  include/exclude list is reset, removing all previously defined patterns.
 )
 
 The +/- rules are most useful in exclude lists, allowing you to have a
 single exclude list that contains both include and exclude options.
 
 If you end an exclude list with --exclude '*', note that since the
@@ -799,12 +811,35 @@
 it() bf(rsync_delta.<timestamp>) data blocks for file update & change
 )
 
 See bf(http://www.ils.unc.edu/i2dsi/unc_rsync+.html) for papers and technical
 reports.
 
+manpagesection(SYMBOLIC LINKS)
+
+Three basic behaviours are possible when rsync encounters a symbolic
+link in the source directory.
+
+By default, symbolic links are not transferred at all.  A message
+"skipping non-regular" file is emitted for any symlinks that exist.
+
+If bf(--links) is specified, then symlinks are recreated with the same
+target on the destination.  Note that bf(--archive) implies
+bf(--links).
+
+If bf(--copy-links) is specified, then symlinks are "collapsed" by
+copying their referent, rather than the symlink.
+
+rsync also distinguishes "safe" and "unsafe" symbolic links.  An
+example where this might be used is a web site mirror that wishes
+ensure the rsync module they copy does not include symbolic links to
+bf(/etc/passwd) in the public section of the site.  Using
+bf(--copy-unsafe-links) will cause any links to be copied as the file
+they point to on the destination.  Using bf(--safe-links) will cause
+unsafe links to be ommitted altogether.
+
 manpagesection(DIAGNOSTICS)
 
 rsync occasionally produces error messages that may seem a little
 cryptic. The one that seems to cause the most confusion is "protocol
 version mismatch - is your shell clean?".
 
@@ -930,13 +965,12 @@
 and David Bell for helpful suggestions and testing of rsync. I've
 probably missed some people, my apologies if I have.
 
 
 manpageauthor()
 
-rsync was written by Andrew Tridgell and Paul Mackerras.  They may be
-contacted via email at tridge@samba.org and
-Paul.Mackerras@cs.anu.edu.au
-
-rsync is now also maintained by Martin Pool <mbp@samba.org>
+rsync was written by Andrew Tridgell and Paul Mackerras.  
 
+rsync is now maintained by Martin Pool <mbp@samba.org>.
 
+Mailing lists for support and development are available at
+url(http://lists.samba.org)(lists.samba.org)
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/runtests.sh /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/runtests.sh
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/runtests.sh	2001-09-07 15:57:10.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/runtests.sh	2002-01-03 15:09:37.000000000 +0800
@@ -157,45 +157,50 @@
 
 skipped=0
 missing=0
 passed=0
 failed=0
 
-scratchdir=./testtmp
-[ -d "$scratchdir" ] && rm -r "$scratchdir"
-mkdir "$scratchdir"
-scratchdir=`cd $scratchdir && pwd`
+scratchdir="`pwd`"/testtmp
 echo "    scratchdir=$scratchdir"
 
 suitedir="$srcdir/testsuite"
 
 export scratchdir suitedir
 
+clean_scratch() {
+    [ -d "$scratchdir" ] && rm -rf "$scratchdir"
+    mkdir "$scratchdir"
+}
+
 if [ "x$whichtests" = x ]
 then
     whichtests="*.test"
 fi
 
 for testscript in $suitedir/$whichtests
 do
     testbase=`echo $testscript | sed 's!.*/!!'`
 
     echo "----- $testbase starting"
+    clean_scratch
 
-    if sh $RUNSHFLAGS "$testscript"
+    if sh $RUNSHFLAGS "$testscript" >"$scratchdir/test.log"  2>&1
     then
-	echo "----- $testbase completed succesfully"
+	echo "----- $testbase completed successfully"
 	passed=`expr $passed + 1`
     else 
 	case $? in
 	77)
 	    echo "----- $testbase skipped"
 	    skipped=`expr $skipped + 1`
 	    ;;
 	*)
-	    echo "----- $testbase failed!"
+	    echo "----- $testbase failed: log follows"
+	    cat "$scratchdir/test.log"
+	    echo "----- $testbase log ends"
 	    failed=`expr $failed + 1`
 	    if [ "x$nopersist" = "xyes" ]
 	    then
 		exit 1
 	    fi
 	esac
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/socket.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/socket.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/socket.c	2001-11-30 08:21:09.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/socket.c	2002-01-03 15:09:37.000000000 +0800
@@ -23,16 +23,12 @@
  * 
  * Socket functions used in rsync.
  **/
 
 #include "rsync.h"
 
-#ifndef HAVE_GETADDRINFO
-#include "lib/addrinfo.h"
-#endif
-
 /* Establish a proxy connection on an open socket to a web roxy by
  * using the CONNECT method. */
 static int establish_proxy_connection(int fd, char *host, int port)
 {
 	char buffer[1024];
 	char *cp;
@@ -91,12 +87,45 @@
 			break;
 	}
 	return 0;
 }
 
 
+/**
+ * Try to set the local address for a newly-created socket.  Return -1
+ * if this fails.
+ **/
+int try_bind_local(int s,
+		   int ai_family, int ai_socktype,
+		   const char *bind_address)
+{
+	int error;
+	struct addrinfo bhints, *bres_all, *r;
+
+	memset(&bhints, 0, sizeof(bhints));
+	bhints.ai_family = ai_family;
+	bhints.ai_socktype = ai_socktype;
+	bhints.ai_flags = AI_PASSIVE;
+	if (getaddrinfo(bind_address, NULL, &bhints, &bres_all) == -1) {
+		rprintf(FERROR, RSYNC_NAME ": getaddrinfo %s: %s\n",
+			bind_address, gai_strerror(error));
+		return -1;
+	}
+
+	for (r = bres_all; r; r = r->ai_next) {
+		if (bind(s, r->ai_addr, r->ai_addrlen) == -1)
+			continue;
+		return s;
+	}
+
+	/* no error message; there might be some problem that allows
+	 * creation of the socket but not binding, perhaps if the
+	 * machine has no ipv6 address of this name. */
+	return -1;
+}
+
 
 /**
  * Open a socket to a tcp remote host with the specified port .
  *
  * Based on code from Warren.  Proxy support by Stephen Rothwell.
  * getaddrinfo() rewrite contributed by KAME.net.
@@ -159,38 +188,28 @@
 		rprintf(FERROR, RSYNC_NAME ": getaddrinfo: %s %s: %s\n",
 			h, portbuf, gai_strerror(error));
 		return -1;
 	}
 
 	s = -1;
+	/* Try to connect to all addresses for this machine until we get
+	 * through.  It might e.g. be multi-homed, or have both IPv4 and IPv6
+	 * addresses.  We need to create a socket for each record, since the
+	 * address record tells us what protocol to use to try to connect. */
 	for (res = res0; res; res = res->ai_next) {
 		s = socket(res->ai_family, res->ai_socktype, res->ai_protocol);
 		if (s < 0)
 			continue;
 
-		if (bind_address) {
-			struct addrinfo bhints, *bres;
-
-			memset(&bhints, 0, sizeof(bhints));
-			bhints.ai_family = res->ai_family;
-			bhints.ai_socktype = type;
-			bhints.ai_flags = AI_PASSIVE;
-			error = getaddrinfo(bind_address, NULL, &bhints, &bres);
-			if (error) {
-				rprintf(FERROR, RSYNC_NAME ": getaddrinfo: bind address %s <noport>: %s\n",
-					bind_address, gai_strerror(error));
+		if (bind_address)
+			if (try_bind_local(s, res->ai_family, type,
+					   bind_address) == -1) {
+				close(s);
+				s = -1;
 				continue;
 			}
-			if (bres->ai_next) {
-				rprintf(FERROR, RSYNC_NAME ": getaddrinfo: bind address %s resolved to multiple hosts\n",
-					bind_address);
-				freeaddrinfo(bres);
-				continue;
-			}
-			bind(s, bres->ai_addr, bres->ai_addrlen);
-		}
 
 		if (connect(s, res->ai_addr, res->ai_addrlen) < 0) {
 			close(s);
 			s = -1;
 			continue;
 		}
@@ -260,68 +279,58 @@
  **/
 static int open_socket_in(int type, int port, const char *bind_address,
 			  int af_hint)
 {
 	int one=1;
 	int s;
-	struct addrinfo hints, *res, *resp;
+	struct addrinfo hints, *all_ai, *resp;
 	char portbuf[10];
 	int error;
 
 	memset(&hints, 0, sizeof(hints));
 	hints.ai_family = af_hint;
 	hints.ai_socktype = type;
 	hints.ai_flags = AI_PASSIVE;
 	snprintf(portbuf, sizeof(portbuf), "%d", port);
-	error = getaddrinfo(bind_address, portbuf, &hints, &res);
+	error = getaddrinfo(bind_address, portbuf, &hints, &all_ai);
 	if (error) {
 		rprintf(FERROR, RSYNC_NAME ": getaddrinfo: bind address %s: %s\n",
 			bind_address, gai_strerror(error));
 		return -1;
 	}
-	/* XXX: Do we need to care about getting multiple results
-	 * back?  I think probably not; if the user passed
-	 * bind_address == NULL and we set AI_PASSIVE then we ought to
-	 * get a wildcard result. */
 
-	resp = res;
-	while (1) {
-		s = socket(resp->ai_family, resp->ai_socktype, resp->ai_protocol);
+	/* We may not be able to create the socket, if for example the
+	 * machine knows about IPv6 in the C library, but not in the
+	 * kernel. */
+	for (resp = all_ai; resp; resp = resp->ai_next) {
+		s = socket(resp->ai_family, resp->ai_socktype,
+			   resp->ai_protocol);
 
-		if (s >= 0) {
-			break;	/* got a socket */
-		} else if ((resp = resp->ai_next)) {
-			switch (errno) {
-			case EPROTONOSUPPORT:
-			case EAFNOSUPPORT:
-			case EPFNOSUPPORT:
-				/* See if there's another address that will work... */
-				continue;
-			}
+		if (s == -1) 
+			/* See if there's another address that will work... */
+			continue;
+		
+		setsockopt(s, SOL_SOCKET, SO_REUSEADDR,
+			   (char *)&one, sizeof one);
+		
+		/* now we've got a socket - we need to bind it */
+		if (bind(s, all_ai->ai_addr, all_ai->ai_addrlen) < 0) {
+			/* Nope, try another */
+			close(s);
+			continue;
 		}
 		
-		rprintf(FERROR, RSYNC_NAME ": open inbound socket"
-			"(dom=%d, type=%d, proto=%d) failed: %s\n",
-			resp->ai_family, resp->ai_socktype, resp->ai_protocol,
-			strerror(errno));
-			goto fail;
+		return s;
 	}
 
-	setsockopt(s,SOL_SOCKET,SO_REUSEADDR,(char *)&one,sizeof(one));
+	rprintf(FERROR, RSYNC_NAME ": open inbound socket on port %d failed: "
+		"%s\n",
+		port, 
+		strerror(errno));
 
-	/* now we've got a socket - we need to bind it */
-	if (bind(s, res->ai_addr, res->ai_addrlen) < 0) { 
-		rprintf(FERROR, RSYNC_NAME ": bind failed on port %d\n", port);
-		close(s);
-		goto fail;
-	}
-
-	return s;
-
-fail:
-	freeaddrinfo(res);
+	freeaddrinfo(all_ai);
 	return -1; 
 }
 
 
 /*
  * Determine if a file descriptor is in fact a socket
@@ -350,16 +359,16 @@
 
 
 void start_accept_loop(int port, int (*fn)(int ))
 {
 	int s;
 	extern char *bind_address;
+	extern int default_af_hint;
 
 	/* open an incoming socket */
-	s = open_socket_in(SOCK_STREAM, port, bind_address,
-			   global_opts.af_hint);
+	s = open_socket_in(SOCK_STREAM, port, bind_address, default_af_hint);
 	if (s == -1)
 		exit_cleanup(RERR_SOCKETIO);
 
 	/* ready to listen */
 	if (listen(s, 5) == -1) {
 		close(s);
@@ -369,14 +378,14 @@
 
 	/* now accept incoming connections - forking a new process
 	   for each incoming connection */
 	while (1) {
 		fd_set fds;
 		int fd;
-		struct sockaddr addr;
-		int in_addrlen = sizeof(addr);
+		struct sockaddr_storage addr;
+		int addrlen = sizeof(addr);
 
 		/* close log file before the potentially very long select so
 		   file can be trimmed by another process instead of growing
 		   forever */
 		log_close();
 
@@ -386,13 +395,13 @@
 		if (select(s+1, &fds, NULL, NULL, NULL) != 1) {
 			continue;
 		}
 
 		if(!FD_ISSET(s, &fds)) continue;
 
-		fd = accept(s,(struct sockaddr *)&addr,&in_addrlen);
+		fd = accept(s,(struct sockaddr *)&addr,&addrlen);
 
 		if (fd == -1) continue;
 
 		signal(SIGCHLD, SIG_IGN);
 
 		/* we shouldn't have any children left hanging around
@@ -552,37 +561,43 @@
 
 /**
  * Return the IP addr of the client as a string 
  **/
 char *client_addr(int fd)
 {
-	struct sockaddr ss;
+	struct sockaddr_storage ss;
 	int     length = sizeof(ss);
 	static char addr_buf[100];
 	static int initialised;
 
 	if (initialised) return addr_buf;
 
 	initialised = 1;
 
-	if (getpeername(fd, &ss, &length)) {
+	if (getpeername(fd, (struct sockaddr *)&ss, &length)) {
 		exit_cleanup(RERR_SOCKETIO);
 	}
 
-	getnameinfo(&ss, length,
+	getnameinfo((struct sockaddr *)&ss, length,
 		addr_buf, sizeof(addr_buf), NULL, 0, NI_NUMERICHOST);
 	return addr_buf;
 }
 
 
+static int get_sockaddr_family(const struct sockaddr_storage *ss)
+{
+	return ((struct sockaddr *) ss)->sa_family;
+}
+
+
 /**
  * Return the DNS name of the client 
  **/
 char *client_name(int fd)
 {
-	struct sockaddr ss;
+	struct sockaddr_storage ss;
 	int     length = sizeof(ss);
 	static char name_buf[100];
 	static char port_buf[100];
 	char *def = "UNKNOWN";
 	static int initialised;
 	struct addrinfo hints, *res, *res0;
@@ -599,13 +614,13 @@
 		rprintf(FERROR, RSYNC_NAME ": getpeername on fd%d failed: %s\n",
 			fd, strerror(errno));
 		exit_cleanup(RERR_SOCKETIO);
 	}
 
 #ifdef INET6
-        if (ss.sa_family == AF_INET6 && 
+        if (get_sockaddr_family(&ss) == AF_INET6 && 
 	    IN6_IS_ADDR_V4MAPPED(&((struct sockaddr_in6 *)&ss)->sin6_addr)) {
 		struct sockaddr_in6 sin6;
 		struct sockaddr_in *sin;
 
 		memcpy(&sin6, &ss, sizeof(sin6));
 		sin = (struct sockaddr_in *)&ss;
@@ -643,13 +658,13 @@
 			gai_strerror(error));
 		return name_buf;
 	}
 
 	/* XXX sin6_flowinfo and other fields */
 	for (res = res0; res; res = res->ai_next) {
-		if (res->ai_family != ss.sa_family)
+		if (res->ai_family != get_sockaddr_family(&ss))
 			continue;
 		if (res->ai_addrlen != length)
 			continue;
 		if (memcmp(res->ai_addr, &ss, res->ai_addrlen) == 0)
 			break;
 	}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/testsuite/hands.test /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/testsuite/hands.test
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/testsuite/hands.test	2001-09-06 14:21:15.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/testsuite/hands.test	2002-01-03 15:09:44.000000000 +0800
@@ -23,6 +23,8 @@
 runtest "extra data" 'checkit "$RSYNC -avH ${FROM}/ ${TO}" ${FROM}/ ${TO}'
 
 cp ${FROM}/text ${TO}/ThisShouldGo
 runtest " --delete" 'checkit "$RSYNC --delete -avH ${FROM}/ ${TO}" ${FROM}/ ${TO}'
 
 checkforlogs ${LOG}.?
+
+hands_cleanup
\ No newline at end of file
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/testsuite/longdir.test /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/testsuite/longdir.test
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/testsuite/longdir.test	2001-11-27 15:32:42.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/testsuite/longdir.test	2002-01-03 15:09:44.000000000 +0800
@@ -4,13 +4,13 @@
 # Copyright (C) 2001 by Martin Pool <mbp@samba.org>
 #
 # This program is distributable under the terms of the GNU GPL (see COPYING)
 
 . "$suitedir/rsync.fns"
 
-set -x
+# set -x
 
 hands_setup
 
 LONGDIR=${FROM}/This-is-a-directory-with-a-stupidly-long-name-created-in-an-attempt-to-provoke-an-error-found-in-2.0.11-that-should-hopefully-never-appear-again-if-this-test-does-its-job/This-is-a-directory-with-a-stupidly-long-name-created-in-an-attempt-to-provoke-an-error-found-in-2.0.11-that-should-hopefully-never-appear-again-if-this-test-does-its-job/This-is-a-directory-with-a-stupidly-long-name-created-in-an-attempt-to-provoke-an-error-found-in-2.0.11-that-should-hopefully-never-appear-again-if-this-test-does-its-job
 
 makepath ${LONGDIR}
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/testsuite/rsync.fns /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/testsuite/rsync.fns
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/testsuite/rsync.fns	2001-11-27 15:59:34.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/testsuite/rsync.fns	2002-01-03 15:09:44.000000000 +0800
@@ -50,13 +50,14 @@
 # Build test directories TO and FROM, with FROM full of files.
 
 hands_setup() {
     # Clean before creation
     rm -rf $FROM
     rm -rf $TO
-    
+
+    [ -d $TMP ] || mkdir $TMP
     [ -d $FROM ] || mkdir $FROM
     [ -d $TO ] || mkdir $TO
 
     # On some BSD systems, the umask affects the mode of created
     # symlinks, even though the mode apparently has no effect on how
     # the links behave in the future, and it cannot be changed using
@@ -69,13 +70,13 @@
 
     # set up test data
     touch ${FROM}/empty
     mkdir ${FROM}/emptydir
 
     # a hundred lines of text or so
-    rsync_ls_lR ${srcdir} > ${FROM}/filelist
+    rsync_ls_lR "${srcdir}" > ${FROM}/filelist
 
     # This might fail on systems that don't have -n
     echo $ECHO_N "This file has no trailing lf$ECHO_C" > ${FROM}/nolf
     umask 0
     ln -s nolf ${FROM}/nolf-symlink
     umask 022
@@ -91,12 +92,17 @@
 
 #      echo testing head:
 #      ls -lR ${srcdir} | head -10 || echo failed
 }
 
 
+hands_cleanup() {
+    rm -r "$TMP"
+}
+
+
 
 
 ####################
 # Many machines do not have "mkdir -p", so we have to build up long paths.
 # How boring.  
 makepath () {
@@ -146,14 +152,14 @@
     echo "check how the files compare with diff:">>${log}
     echo "">>${log}
     diff -cr $2 $3 >>${log} 2>&1 || failed=YES
     echo "-------------">>${log}
     echo "check how the directory listings compare with diff:">>${log}
     echo "">>${log}
-    ( cd "$2" && rsync_ls_lR ) > ${TMP}/ls-from 2>>${log}
-    ( cd "$3" && rsync_ls_lR ) > ${TMP}/ls-to  2>>${log}
+    ( cd "$2" && rsync_ls_lR . ) > ${TMP}/ls-from 2>>${log}
+    ( cd "$3" && rsync_ls_lR . ) > ${TMP}/ls-to  2>>${log}
     diff -c ${TMP}/ls-from ${TMP}/ls-to >>${log} 2>&1 || failed=YES
     if [ -z "${failed}" ] ; then
 	rm $log
 	return 0
     else
 	cat ${log}
@@ -201,6 +207,24 @@
 [test-to] = $scratchdir/daemon-to/
 	read only = no
 EOF
 }
 
 
+build_symlinks() {
+    fromdir="$scratchdir/from"
+    todir="$scratchdir/to"
+    mkdir "$fromdir"
+    date >"$fromdir/referent"
+    ln -s referent "$fromdir/relative"
+    ln -s "$fromdir/referent" "$fromdir/absolute"
+    ln -s nonexistent "$fromdir/dangling"
+    ln -s "$srcdir/rsync.c" "$fromdir/unsafe"
+}
+
+test_fail() {
+    echo "$@" >&2
+    exit 1
+}
+
+# be reproducible
+umask 077
\ No newline at end of file
Only in /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/testsuite: symlink-ignore.test
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/tls.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/tls.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/tls.c	2001-11-27 15:56:33.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/tls.c	2002-01-03 15:09:37.000000000 +0800
@@ -77,17 +77,24 @@
 		buf.st_size = 0;
 
 	/* On some BSD platforms the mode bits of a symlink are
 	 * undefined.  Also it tends not to be possible to reset a
 	 * symlink's mtime, so we have to ignore it too. */
 	if (S_ISLNK(buf.st_mode)) {
+		int len;
 		buf.st_mode &= ~0777;
 		buf.st_mtime = (time_t)0;
 		buf.st_uid = buf.st_gid = 0;
 		strcpy(linkbuf, " -> ");
-		readlink(fname, linkbuf+4, sizeof(linkbuf) - 4);
+		/* const-cast required for silly UNICOS headers */
+		len = readlink((char *) fname, linkbuf+4, sizeof(linkbuf) - 4);
+		if (len == -1) 
+			failed("readlink", fname);
+		else
+			/* it's not nul-terminated */
+			linkbuf[4+len] = 0;
 	} else {
 		linkbuf[0] = 0;
 	}
 
 	permstring(permbuf, buf.st_mode);
 
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/TODO /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/TODO
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/TODO	2001-11-30 08:16:14.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/TODO	2002-01-03 15:09:27.000000000 +0800
@@ -34,16 +34,29 @@
 
 Performance
 
   Traverse just one directory at a time.  Tridge says it's possible.
  
   Can possibly also be smarter about memory use while looking for hard
-  links by reducing the refcount as we find alternative names.
+  links by reducing the refcount as we find alternative names.  In
+  fact at the moment the code seems to make a whole second copy of the
+  file list, which seems unnecessary.
 
 IPv6
 
+  Implement suggestions from http://www.kame.net/newsletter/19980604/
+  and ftp://ftp.iij.ad.jp/pub/RFC/rfc2553.txt
+
+  If a host has multiple addresses, then listen try to connect to all
+  in order until we get through.  (getaddrinfo may return multiple
+  addresses.)  This is kind of implemented already.
+
+  Possibly also when starting as a server we may need to listen on
+  multiple passive addresses.  This might be a bit harder, because we
+  may need to select on all of them.  Hm.
+
   Define a syntax for IPv6 literal addresses.  Since they include
   colons, they tend to break most naming systems, including ours.
   Based on the HTTP IPv6 syntax, I think we should use
  
      rsync://[::1]/foo/bar
      [::1]::bar
@@ -58,12 +71,41 @@
   little easier on people than needing to run strace/truss.
 
   "The dungeon collapses!  You are killed."  Rather than "unexpected
   eof" give a message that is more detailed if possible and also more
   helpful.  
 
+File attributes
+
+  Device major/minor numbers should be at least 32 bits each.  See
+  http://lists.samba.org/pipermail/rsync/2001-November/005357.html
+
+  Transfer ACLs.  Need to think of a standard representation.
+  Probably better not to even try to convert between NT and POSIX.
+  Possibly can share some code with Samba.
+
+Empty directories
+
+  With the current common --include '*/' --exclude '*' pattern, people
+  can end up with many empty directories.  We might avoid this by
+  lazily creating such directories.
+
+zlib
+
+  Perhaps don't use our own zlib.  Will we actually be incompatible,
+  or just be slightly less efficient?
+
+logging
+
+  Perhaps flush stdout after each filename, so that people trying to
+  monitor progress in a log file can do so more easily.  See
+  http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=48108
+
+rsyncd over ssh
+
+  There are already some patches to do this.
 
 PLATFORMS ------------------------------------------------------------
 
 Win32
 
   Don't detach, because this messes up --srvany.
@@ -74,12 +116,16 @@
   has incorrect behaviour on Windows -- it sends a RST packet to the
   other side, which gives a "connection reset by peer" error.  On that
   platform we should probably do shutdown() instead.  However, on Unix
   we are correct to call close(), because shutdown() discards
   untransmitted data.
 
+DOCUMENTATION --------------------------------------------------------
+
+Update README
+
 BUILD FARM -----------------------------------------------------------
 
 Add machines
 
   AMDAHL UTS (Dave Dykstra)
 
@@ -88,22 +134,30 @@
   HP-UX variants (via HP?)
 
   SCO
 
 NICE -----------------------------------------------------------------
 
+SIGHUP
+
+  Re-read config file (just exec() ourselves) rather than exiting.
+
 --no-detach and --no-fork options
 
   Very useful for debugging.  Also good when running under a
   daemon-monitoring process that tries to restart the service when the
   parent exits.
 
 hang/timeout friendliness
 
   On 
 
+verbose output
+  
+  Indicate whether files are new, updated, or deleted
+
 internationalization
 
   Change to using gettext().  Probably need to ship this for platforms
   that don't have it.  
 
   Solicit translations.
diff -BEr -U 6 /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/util.c /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/util.c
--- /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.0/util.c	2001-11-30 08:21:10.000000000 +0800
+++ /usr/info/code/cpp/LogMonitor/LogMonitor/second/download/rsync/repos/rsync-2.5.1/util.c	2002-01-03 15:09:38.000000000 +0800
@@ -808,34 +808,97 @@
 		s1++; s2++;
 	}
 	
 	return (int)*s1 - (int)*s2;
 }
 
-static OFF_T last_ofs;
+static OFF_T  last_ofs;
+static struct timeval print_time;
+static struct timeval start_time;
+static OFF_T  start_ofs;
+
+static unsigned long msdiff(struct timeval *t1, struct timeval *t2)
+{
+    return (t2->tv_sec - t1->tv_sec) * 1000
+        + (t2->tv_usec - t1->tv_usec) / 1000;
+}
+
+
+/**
+ * @param ofs Current position in file
+ * @param size Total size of file
+ * @param is_last True if this is the last time progress will be
+ * printed for this file, so we should output a newline.  (Not
+ * necessarily the same as all bytes being received.)
+ **/
+static void rprint_progress(OFF_T ofs, OFF_T size, struct timeval *now,
+			    int is_last)
+{
+    int           pct  = (ofs == size) ? 100 : (int)((100.0*ofs)/size);
+    unsigned long diff = msdiff(&start_time, now);
+    double        rate = diff ? (double) (ofs-start_ofs) * 1000.0 / diff / 1024.0 : 0;
+    const char    *units, *rem_units;
+    double        remain = rate ? (double) (size-ofs) / rate / 1000.0: 0.0;
+    int 	  remain_h, remain_m, remain_s;
+
+    if (rate > 1024*1024) {
+	    rate /= 1024.0 * 1024.0;
+	    units = "GB/s";
+    } else if (rate > 1024) {
+	    rate /= 1024.0;
+	    units = "MB/s";
+    } else {
+	    units = "kB/s";
+    }
+
+    remain_s = (int) remain % 60;
+    remain_m = (int) (remain / 60.0) % 60;
+    remain_h = (int) (remain / 3600.0);
+    
+    rprintf(FINFO, "%12.0f %3d%% %7.2f%s %4d:%02d:%02d%s",
+	    (double) ofs, pct, rate, units,
+	    remain_h, remain_m, remain_s,
+	    is_last ? "\n" : "\r");
+}
 
 void end_progress(OFF_T size)
 {
 	extern int do_progress, am_server;
 
 	if (do_progress && !am_server) {
-		rprintf(FINFO,"%.0f (100%%)\n", (double)size);
+        	struct timeval now;
+                gettimeofday(&now, NULL);
+                rprint_progress(size, size, &now, True);
 	}
-	last_ofs = 0;
+	last_ofs   = 0;
+        start_ofs  = 0;
+        print_time.tv_sec  = print_time.tv_usec  = 0;
+        start_time.tv_sec  = start_time.tv_usec  = 0;
 }
 
 void show_progress(OFF_T ofs, OFF_T size)
 {
 	extern int do_progress, am_server;
+        struct timeval now;
 
-	if (do_progress && !am_server) {
-		if (ofs > last_ofs + 1000) {
-			int pct = (int)((100.0*ofs)/size);
-			rprintf(FINFO,"%.0f (%d%%)\r", (double)ofs, pct);
-			last_ofs = ofs;
-		}
+        gettimeofday(&now, NULL);
+
+        if (!start_time.tv_sec && !start_time.tv_usec) {
+        	start_time.tv_sec  = now.tv_sec;
+                start_time.tv_usec = now.tv_usec;
+                start_ofs          = ofs;
+        }
+
+	if (do_progress
+            && !am_server
+            && ofs > last_ofs + 1000
+            && msdiff(&print_time, &now) > 250) {
+        	rprint_progress(ofs, size, &now, False);
+                last_ofs = ofs;
+                print_time.tv_sec  = now.tv_sec;
+                print_time.tv_usec = now.tv_usec;
 	}
 }
 
 /* determine if a symlink points outside the current directory tree */
 int unsafe_symlink(char *dest, char *src)
 {
